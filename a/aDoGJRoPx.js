const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aC3n5dqsc.js","a/aCeYg3FOS.css","a/aBn8OIcVh.js","a/a9q_jSmK4.js","a/abA9hIFUQ.js","a/aBrkJtqMH.css","a/aBTPtZPSk.js","a/aDB02xhFr.css","a/aBStwjGSk.js","a/a54d_SC5m.css","a/aD_g7pMnc.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/aC38Fvf-S.js","a/aY1d2PU1k.css","a/aB6ZZ9WUi.js","a/aXuuRa1fb.js","a/aCpd7MTd8.css","a/a3h9fRklM.js","a/aenMKNzfI.css","a/aC969LWc5.css","a/aBfEPBLL2.js","a/aCeh8XjKC.css","a/aCzSbBh8x.js","a/aCBPoPn5g.css","a/aDncFDR1y.js","a/aK1a0NeEW.css","a/aB10fEhcj.js","a/aBem4Ctjp.css","a/aBcgoVMEB.js","a/aBdnakgrk.css","a/arX12ex3S.js","a/aDzsMVVo5.css","a/aB9sn1iM1.js","a/aCH18nfIo.css","a/aDdOnm9Xm.js","a/aO1IdFdpb.js","a/aCb6DfA6m.css","a/aBYLO1bQT.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var kl=Object.defineProperty;var gs=t=>{throw TypeError(t)};var xl=(t,e,a)=>e in t?kl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var zt=(t,e,a)=>xl(t,typeof e!="symbol"?e+"":e,a),yo=(t,e,a)=>e.has(t)||gs("Cannot "+a);var j=(t,e,a)=>(yo(t,e,"read from private field"),a?a.call(t):e.get(t)),Ge=(t,e,a)=>e.has(t)?gs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),qe=(t,e,a,r)=>(yo(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),ct=(t,e,a)=>(yo(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const Tl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};Tl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const El=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};El();const xo=!1;var $o=Array.isArray,Pl=Array.prototype.indexOf,no=Array.from,Nl=Object.defineProperty,na=Object.getOwnPropertyDescriptor,Us=Object.getOwnPropertyDescriptors,Ws=Object.prototype,Al=Array.prototype,ao=Object.getPrototypeOf,hs=Object.isExtensible;function sr(t){return typeof t=="function"}const Je=()=>{};function Dl(t){return typeof t?.then=="function"}function Ml(t){return t()}function To(t){for(var e=0;e<t.length;e++)t[e]()}function Vs(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function Il(t,e,a=!1){return t===void 0?a?e():e:t}const Nt=2,es=4,ro=8,Ll=1<<24,Un=16,Wn=32,Aa=64,oo=128,fn=512,It=1024,Kt=2048,Cn=4096,Jt=8192,In=16384,ts=32768,ca=65536,ps=1<<17,qs=1<<18,nr=1<<19,Ks=1<<20,Mn=1<<25,Ea=32768,Eo=1<<21,ns=1<<22,aa=1<<23,ra=Symbol("$state"),Ys=Symbol("legacy props"),Rl=Symbol(""),ja=new class extends Error{constructor(){super(...arguments);zt(this,"name","StaleReactionError");zt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Gs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Fl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ol(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function zl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Bl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function jl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Hl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ul(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Wl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Vl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ql(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Kl=1,Yl=2,Xs=4,Gl=8,Xl=16,Jl=1,Zl=2,Ql=4,$l=8,ec=16,tc=1,nc=2,Et=Symbol(),ac="http://www.w3.org/1999/xhtml";function rc(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Js(t){return t===this.v}function oc(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Zs(t){return!oc(t,this.v)}let ar=!1,sc=!1;function ic(){ar=!0}const lc=[];function ha(t,e=!1,a=!1){return Br(t,new Map,"",lc,null,a)}function Br(t,e,a,r,o=null,s=!1){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if($o(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var u=0;u<t.length;u+=1){var c=t[u];u in t&&(l[u]=Br(c,e,a,r,null,s))}return l}if(ao(t)===Ws){l={},e.set(t,l),o!==null&&e.set(o,l);for(var d in t)l[d]=Br(t[d],e,a,r,null,s);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return Br(t.toJSON(),e,a,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let it=null;function Xa(t){it=t}function vt(t){return Qs().get(t)}function gt(t,e){return Qs().set(t,e),e}function Se(t,e=!1,a){it={p:it,i:!1,c:null,e:null,s:t,x:null,l:ar&&!e?{s:null,u:null,$:[]}:null}}function ke(t){var e=it,a=e.e;if(a!==null){e.e=null;for(var r of a)_i(r)}return t!==void 0&&(e.x=t),e.i=!0,it=e.p,t??{}}function rr(){return!ar||it!==null&&it.l===null}function Qs(t){return it===null&&Gs(),it.c??(it.c=new Map(cc(it)||void 0))}function cc(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let ma=[];function $s(){var t=ma;ma=[],To(t)}function Da(t){if(ma.length===0&&!Wa){var e=ma;queueMicrotask(()=>{e===ma&&$s()})}ma.push(t)}function dc(){for(;ma.length>0;)$s()}function ei(t){var e=Ze;if(e===null)return Xe.f|=aa,t;if((e.f&ts)===0){if((e.f&oo)===0)throw t;e.b.error(t)}else Ja(t,e)}function Ja(t,e){for(;e!==null;){if((e.f&oo)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Rr=new Set;let Qe=null,jr=null,cn=null,on=[],so=null,Po=!1,Wa=!1;var Va,qa,_a,wa,Sr,Ka,Ya,Pt,No,lr,Ao,ti,ni;const Zr=class Zr{constructor(){Ge(this,Pt);zt(this,"committed",!1);zt(this,"current",new Map);zt(this,"previous",new Map);Ge(this,Va,new Set);Ge(this,qa,new Set);Ge(this,_a,0);Ge(this,wa,0);Ge(this,Sr,null);Ge(this,Ka,new Set);Ge(this,Ya,new Set);zt(this,"skipped_effects",new Set);zt(this,"is_fork",!1)}is_deferred(){return this.is_fork||j(this,wa)>0}process(e){on=[],jr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)ct(this,Pt,No).call(this,r,a);this.is_fork||ct(this,Pt,ti).call(this),this.is_deferred()?(ct(this,Pt,lr).call(this,a.effects),ct(this,Pt,lr).call(this,a.render_effects)):(jr=this,Qe=null,ms(a.render_effects),ms(a.effects),jr=null,j(this,Sr)?.resolve()),cn=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&aa)===0&&(this.current.set(e,e.v),cn?.set(e,e.v))}activate(){Qe=this,this.apply()}deactivate(){Qe===this&&(Qe=null,cn=null)}flush(){if(this.activate(),on.length>0){if(ri(),Qe!==null&&Qe!==this)return}else j(this,_a)===0&&this.process([]);this.deactivate()}discard(){for(const e of j(this,qa))e(this);j(this,qa).clear()}increment(e){qe(this,_a,j(this,_a)+1),e&&qe(this,wa,j(this,wa)+1)}decrement(e){qe(this,_a,j(this,_a)-1),e&&qe(this,wa,j(this,wa)-1),this.revive()}revive(){for(const e of j(this,Ka))j(this,Ya).delete(e),Rt(e,Kt),Pa(e);for(const e of j(this,Ya))Rt(e,Cn),Pa(e);this.flush()}oncommit(e){j(this,Va).add(e)}ondiscard(e){j(this,qa).add(e)}settled(){return(j(this,Sr)??qe(this,Sr,Vs())).promise}static ensure(){if(Qe===null){const e=Qe=new Zr;Rr.add(Qe),Wa||Zr.enqueue(()=>{Qe===e&&e.flush()})}return Qe}static enqueue(e){Da(e)}apply(){}};Va=new WeakMap,qa=new WeakMap,_a=new WeakMap,wa=new WeakMap,Sr=new WeakMap,Ka=new WeakMap,Ya=new WeakMap,Pt=new WeakSet,No=function(e,a){e.f^=It;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Wn|Aa))!==0,i=s&&(o&It)!==0,l=i||(o&Jt)!==0||this.skipped_effects.has(r);if((r.f&oo)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=It:(o&es)!==0?a.effects.push(r):Nr(r)&&((r.f&Un)!==0&&j(this,Ka).add(r),_r(r));var u=r.first;if(u!==null){r=u;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===a.effect&&(ct(this,Pt,lr).call(this,a.effects),ct(this,Pt,lr).call(this,a.render_effects),a=a.parent),r=c.next,c=c.parent}},lr=function(e){for(const a of e)(a.f&Kt)!==0?j(this,Ka).add(a):(a.f&Cn)!==0&&j(this,Ya).add(a),ct(this,Pt,Ao).call(this,a.deps),Rt(a,It)},Ao=function(e){if(e!==null)for(const a of e)(a.f&Nt)===0||(a.f&Ea)===0||(a.f^=Ea,ct(this,Pt,Ao).call(this,a.deps))},ti=function(){if(j(this,wa)===0){for(const e of j(this,Va))e();j(this,Va).clear()}j(this,_a)===0&&ct(this,Pt,ni).call(this)},ni=function(){var s;if(Rr.size>1){this.previous.clear();var e=cn,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Rr){if(i===this){a=!1;continue}const l=[];for(const[c,d]of this.current){if(i.current.has(c))if(a&&d!==i.current.get(c))i.current.set(c,d);else continue;l.push(c)}if(l.length===0)continue;const u=[...i.current.keys()].filter(c=>!this.current.has(c));if(u.length>0){var o=on;on=[];const c=new Set,d=new Map;for(const v of l)oi(v,u,c,d);if(on.length>0){Qe=i,i.apply();for(const v of on)ct(s=i,Pt,No).call(s,v,r);i.deactivate()}on=o}}Qe=null,cn=e}this.committed=!0,Rr.delete(this)};let wn=Zr;function ai(t){var e=Wa;Wa=!0;try{for(var a;;){if(dc(),on.length===0&&(Qe?.flush(),on.length===0))return so=null,a;ri()}}finally{Wa=e}}function ri(){var t=xa;Po=!0;var e=null;try{var a=0;for(Kr(!0);on.length>0;){var r=wn.ensure();if(a++>1e3){var o,s;uc()}r.process(on),oa.clear()}}finally{Po=!1,Kr(t),so=null}}function uc(){try{jl()}catch(t){Ja(t,so)}}let Nn=null;function ms(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(In|Jt))===0&&Nr(r)&&(Nn=new Set,_r(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?bi(r):r.fn=null),Nn?.size>0)){oa.clear();for(const o of Nn){if((o.f&(In|Jt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)Nn.has(i)&&(Nn.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const u=s[l];(u.f&(In|Jt))===0&&_r(u)}}Nn.clear()}}Nn=null}}function oi(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Nt)!==0?oi(o,e,a,r):(s&(ns|Un))!==0&&(s&Kt)===0&&si(o,e,r)&&(Rt(o,Kt),Pa(o))}}function si(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Nt)!==0&&si(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function Pa(t){for(var e=so=t;e.parent!==null;){e=e.parent;var a=e.f;if(Po&&e===Ze&&(a&Un)!==0&&(a&qs)===0)return;if((a&(Aa|Wn))!==0){if((a&It)===0)return;e.f^=It}}on.push(e)}function fc(t){let e=0,a=Sn(0),r;return()=>{pr()&&(n(a),lo(()=>(e===0&&(r=jt(()=>t(()=>sa(a)))),e+=1,()=>{Da(()=>{e-=1,e===0&&(r?.(),r=void 0,sa(a))})})))}}var vc=ca|nr|oo;function gc(t,e,a){new hc(t,e,a)}var nn,an,Qo,gn,ya,hn,rn,Wt,pn,Dn,Zn,ba,Qn,Ca,$n,Qr,xt,pc,mc,Do,Hr,Ur,Mo;class hc{constructor(e,a,r){Ge(this,xt);zt(this,"parent");Ge(this,nn,!1);Ge(this,an);Ge(this,Qo,null);Ge(this,gn);Ge(this,ya);Ge(this,hn);Ge(this,rn,null);Ge(this,Wt,null);Ge(this,pn,null);Ge(this,Dn,null);Ge(this,Zn,null);Ge(this,ba,0);Ge(this,Qn,0);Ge(this,Ca,!1);Ge(this,$n,null);Ge(this,Qr,fc(()=>(qe(this,$n,Sn(j(this,ba))),()=>{qe(this,$n,null)})));qe(this,an,e),qe(this,gn,a),qe(this,ya,r),this.parent=Ze.b,qe(this,nn,!!j(this,gn).pending),qe(this,hn,or(()=>{Ze.b=this;{var o=ct(this,xt,Do).call(this);try{qe(this,rn,sn(()=>r(o)))}catch(s){this.error(s)}j(this,Qn)>0?ct(this,xt,Ur).call(this):qe(this,nn,!1)}return()=>{j(this,Zn)?.remove()}},vc))}is_pending(){return j(this,nn)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!j(this,gn).pending}update_pending_count(e){ct(this,xt,Mo).call(this,e),qe(this,ba,j(this,ba)+e),j(this,$n)&&Ln(j(this,$n),j(this,ba))}get_effect_pending(){return j(this,Qr).call(this),n(j(this,$n))}error(e){var a=j(this,gn).onerror;let r=j(this,gn).failed;if(j(this,Ca)||!a&&!r)throw e;j(this,rn)&&(qt(j(this,rn)),qe(this,rn,null)),j(this,Wt)&&(qt(j(this,Wt)),qe(this,Wt,null)),j(this,pn)&&(qt(j(this,pn)),qe(this,pn,null));var o=!1,s=!1;const i=()=>{if(o){rc();return}o=!0,s&&ql(),wn.ensure(),qe(this,ba,0),j(this,pn)!==null&&ka(j(this,pn),()=>{qe(this,pn,null)}),qe(this,nn,this.has_pending_snippet()),qe(this,rn,ct(this,xt,Hr).call(this,()=>(qe(this,Ca,!1),sn(()=>j(this,ya).call(this,j(this,an)))))),j(this,Qn)>0?ct(this,xt,Ur).call(this):qe(this,nn,!1)};var l=Xe;try{Vt(null),s=!0,a?.(e,i),s=!1}catch(u){Ja(u,j(this,hn)&&j(this,hn).parent)}finally{Vt(l)}r&&Da(()=>{qe(this,pn,ct(this,xt,Hr).call(this,()=>{wn.ensure(),qe(this,Ca,!0);try{return sn(()=>{r(j(this,an),()=>e,()=>i)})}catch(u){return Ja(u,j(this,hn).parent),null}finally{qe(this,Ca,!1)}}))})}}nn=new WeakMap,an=new WeakMap,Qo=new WeakMap,gn=new WeakMap,ya=new WeakMap,hn=new WeakMap,rn=new WeakMap,Wt=new WeakMap,pn=new WeakMap,Dn=new WeakMap,Zn=new WeakMap,ba=new WeakMap,Qn=new WeakMap,Ca=new WeakMap,$n=new WeakMap,Qr=new WeakMap,xt=new WeakSet,pc=function(){try{qe(this,rn,sn(()=>j(this,ya).call(this,j(this,an))))}catch(e){this.error(e)}qe(this,nn,!1)},mc=function(){const e=j(this,gn).pending;e&&(qe(this,Wt,sn(()=>e(j(this,an)))),wn.enqueue(()=>{var a=ct(this,xt,Do).call(this);qe(this,rn,ct(this,xt,Hr).call(this,()=>(wn.ensure(),sn(()=>j(this,ya).call(this,a))))),j(this,Qn)>0?ct(this,xt,Ur).call(this):(ka(j(this,Wt),()=>{qe(this,Wt,null)}),qe(this,nn,!1))}))},Do=function(){var e=j(this,an);return j(this,nn)&&(qe(this,Zn,Rn()),j(this,an).before(j(this,Zn)),e=j(this,Zn)),e},Hr=function(e){var a=Ze,r=Xe,o=it;kn(j(this,hn)),Vt(j(this,hn)),Xa(j(this,hn).ctx);try{return e()}catch(s){return ei(s),null}finally{kn(a),Vt(r),Xa(o)}},Ur=function(){const e=j(this,gn).pending;j(this,rn)!==null&&(qe(this,Dn,document.createDocumentFragment()),j(this,Dn).append(j(this,Zn)),ki(j(this,rn),j(this,Dn))),j(this,Wt)===null&&qe(this,Wt,sn(()=>e(j(this,an))))},Mo=function(e){var a;if(!this.has_pending_snippet()){this.parent&&ct(a=this.parent,xt,Mo).call(a,e);return}qe(this,Qn,j(this,Qn)+e),j(this,Qn)===0&&(qe(this,nn,!1),j(this,Wt)&&ka(j(this,Wt),()=>{qe(this,Wt,null)}),j(this,Dn)&&(j(this,an).before(j(this,Dn)),qe(this,Dn,null)))};function _c(t,e,a,r){const o=rr()?Tr:Er;if(a.length===0&&t.length===0){r(e.map(o));return}var s=Qe,i=Ze,l=ii();function u(){Promise.all(a.map(c=>wc(c))).then(c=>{l();try{r([...e.map(o),...c])}catch(d){(i.f&In)===0&&Ja(d,i)}s?.deactivate(),hr()}).catch(c=>{Ja(c,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return u()}finally{s?.deactivate(),hr()}}):u()}function ii(){var t=Ze,e=Xe,a=it,r=Qe;return function(s=!0){kn(t),Vt(e),Xa(a),s&&r?.activate()}}function hr(){kn(null),Vt(null),Xa(null)}function Tr(t){var e=Nt|Kt,a=Xe!==null&&(Xe.f&Nt)!==0?Xe:null;return Ze!==null&&(Ze.f|=nr),{ctx:it,deps:null,effects:null,equals:Js,f:e,fn:t,reactions:null,rv:0,v:Et,wv:0,parent:a??Ze,ac:null}}function wc(t,e){let a=Ze;a===null&&Fl();var r=a.b,o=void 0,s=Sn(Et),i=!Xe,l=new Map;return Ac(()=>{var u=Vs();o=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{c===Qe&&c.committed&&c.deactivate(),hr()})}catch(h){u.reject(h),hr()}var c=Qe;if(i){var d=!r.is_pending();r.update_pending_count(1),c.increment(d),l.get(c)?.reject(ja),l.delete(c),l.set(c,u)}const v=(h,m=void 0)=>{if(c.activate(),m)m!==ja&&(s.f|=aa,Ln(s,m));else{(s.f&aa)!==0&&(s.f^=aa),Ln(s,h);for(const[_,k]of l){if(l.delete(_),_===c)break;k.reject(ja)}}i&&(r.update_pending_count(-1),c.decrement(d))};u.promise.then(v,h=>v(null,h||"unknown"))}),mi(()=>{for(const u of l.values())u.reject(ja)}),new Promise(u=>{function c(d){function v(){d===o?u(s):c(o)}d.then(v,v)}c(o)})}function T(t){const e=Tr(t);return xi(e),e}function Er(t){const e=Tr(t);return e.equals=Zs,e}function li(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)qt(e[a])}}function yc(t){for(var e=t.parent;e!==null;){if((e.f&Nt)===0)return(e.f&In)===0?e:null;e=e.parent}return null}function as(t){var e,a=Ze;kn(yc(t));try{t.f&=~Ea,li(t),e=Ni(t)}finally{kn(a)}return e}function ci(t){var e=as(t);if(t.equals(e)||(Qe?.is_fork||(t.v=e),t.wv=Ei()),!Ma)if(cn!==null)(pr()||Qe?.is_fork)&&cn.set(t,e);else{var a=(t.f&fn)===0?Cn:It;Rt(t,a)}}let Io=new Set;const oa=new Map;let di=!1;function Sn(t,e){var a={f:0,v:t,reactions:null,equals:Js,rv:0,wv:0};return a}function D(t,e){const a=Sn(t);return xi(a),a}function Lo(t,e=!1,a=!0){var o;const r=Sn(t);return e||(r.equals=Zs),ar&&a&&it!==null&&it.l!==null&&((o=it.l).s??(o.s=[])).push(r),r}function f(t,e,a=!1){Xe!==null&&(!yn||(Xe.f&ps)!==0)&&rr()&&(Xe.f&(Nt|Un|ns|ps))!==0&&!Fn?.includes(t)&&Vl();let r=a?ft(e):e;return Ln(t,r)}function Ln(t,e){if(!t.equals(e)){var a=t.v;Ma?oa.set(t,e):oa.set(t,a),t.v=e;var r=wn.ensure();r.capture(t,a),(t.f&Nt)!==0&&((t.f&Kt)!==0&&as(t),Rt(t,(t.f&fn)!==0?It:Cn)),t.wv=Ei(),ui(t,Kt),rr()&&Ze!==null&&(Ze.f&It)!==0&&(Ze.f&(Wn|Aa))===0&&(en===null?Ic([t]):en.push(t)),!r.is_fork&&Io.size>0&&!di&&bc()}return e}function bc(){di=!1;var t=xa;Kr(!0);const e=Array.from(Io);try{for(const a of e)(a.f&It)!==0&&Rt(a,Cn),Nr(a)&&_r(a)}finally{Kr(t)}Io.clear()}function sa(t){f(t,t.v+1)}function ui(t,e){var a=t.reactions;if(a!==null)for(var r=rr(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===Ze)){var u=(l&Kt)===0;if(u&&Rt(i,e),(l&Nt)!==0){var c=i;cn?.delete(c),(l&Ea)===0&&(l&fn&&(i.f|=Ea),ui(c,Cn))}else u&&((l&Un)!==0&&Nn!==null&&Nn.add(i),Pa(i))}}}function ft(t){if(typeof t!="object"||t===null||ra in t)return t;const e=ao(t);if(e!==Ws&&e!==Al)return t;var a=new Map,r=$o(t),o=D(0),s=On,i=l=>{if(On===s)return l();var u=Xe,c=On;Vt(null),bs(s);var d=l();return Vt(u),bs(c),d};return r&&a.set("length",D(t.length)),new Proxy(t,{defineProperty(l,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Ul();var d=a.get(u);return d===void 0?d=i(()=>{var v=D(c.value);return a.set(u,v),v}):f(d,c.value,!0),!0},deleteProperty(l,u){var c=a.get(u);if(c===void 0){if(u in l){const d=i(()=>D(Et));a.set(u,d),sa(o)}}else f(c,Et),sa(o);return!0},get(l,u,c){if(u===ra)return t;var d=a.get(u),v=u in l;if(d===void 0&&(!v||na(l,u)?.writable)&&(d=i(()=>{var m=ft(v?l[u]:Et),_=D(m);return _}),a.set(u,d)),d!==void 0){var h=n(d);return h===Et?void 0:h}return Reflect.get(l,u,c)},getOwnPropertyDescriptor(l,u){var c=Reflect.getOwnPropertyDescriptor(l,u);if(c&&"value"in c){var d=a.get(u);d&&(c.value=n(d))}else if(c===void 0){var v=a.get(u),h=v?.v;if(v!==void 0&&h!==Et)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(l,u){if(u===ra)return!0;var c=a.get(u),d=c!==void 0&&c.v!==Et||Reflect.has(l,u);if(c!==void 0||Ze!==null&&(!d||na(l,u)?.writable)){c===void 0&&(c=i(()=>{var h=d?ft(l[u]):Et,m=D(h);return m}),a.set(u,c));var v=n(c);if(v===Et)return!1}return d},set(l,u,c,d){var v=a.get(u),h=u in l;if(r&&u==="length")for(var m=c;m<v.v;m+=1){var _=a.get(m+"");_!==void 0?f(_,Et):m in l&&(_=i(()=>D(Et)),a.set(m+"",_))}if(v===void 0)(!h||na(l,u)?.writable)&&(v=i(()=>D(void 0)),f(v,ft(c)),a.set(u,v));else{h=v.v!==Et;var k=i(()=>ft(c));f(v,k)}var p=Reflect.getOwnPropertyDescriptor(l,u);if(p?.set&&p.set.call(d,c),!h){if(r&&typeof u=="string"){var b=a.get("length"),P=Number(u);Number.isInteger(P)&&P>=b.v&&f(b,P+1)}sa(o)}return!0},ownKeys(l){n(o);var u=Reflect.ownKeys(l).filter(v=>{var h=a.get(v);return h===void 0||h.v!==Et});for(var[c,d]of a)d.v!==Et&&!(c in l)&&u.push(c);return u},setPrototypeOf(){Wl()}})}var _s,fi,vi,gi;function Cc(){if(_s===void 0){_s=window,fi=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;vi=na(e,"firstChild").get,gi=na(e,"nextSibling").get,hs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),hs(a)&&(a.__t=void 0)}}function Rn(t=""){return document.createTextNode(t)}function Za(t){return vi.call(t)}function Pr(t){return gi.call(t)}function y(t,e){return Za(t)}function E(t,e=!1){{var a=Za(t);return a instanceof Comment&&a.data===""?Pr(a):a}}function N(t,e=1,a=!1){let r=t;for(;e--;)r=Pr(r);return r}function Sc(t){t.textContent=""}function hi(){return!1}let ws=!1;function kc(){ws||(ws=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function io(t){var e=Xe,a=Ze;Vt(null),kn(null);try{return t()}finally{Vt(e),kn(a)}}function xc(t,e,a,r=a){t.addEventListener(e,()=>io(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),kc()}function pi(t){Ze===null&&(Xe===null&&Bl(),zl()),Ma&&Ol()}function Tc(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function Tn(t,e,a){var r=Ze;r!==null&&(r.f&Jt)!==0&&(t|=Jt);var o={ctx:it,deps:null,nodes:null,f:t|Kt|fn,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{_r(o),o.f|=ts}catch(l){throw qt(o),l}else e!==null&&Pa(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&nr)===0&&(s=s.first,(t&Un)!==0&&(t&ca)!==0&&s!==null&&(s.f|=ca)),s!==null&&(s.parent=r,r!==null&&Tc(s,r),Xe!==null&&(Xe.f&Nt)!==0&&(t&Aa)===0)){var i=Xe;(i.effects??(i.effects=[])).push(s)}return o}function pr(){return Xe!==null&&!yn}function mi(t){const e=Tn(ro,null,!1);return Rt(e,It),e.teardown=t,e}function Ye(t){pi();var e=Ze.f,a=!Xe&&(e&Wn)!==0&&(e&ts)===0;if(a){var r=it;(r.e??(r.e=[])).push(t)}else return _i(t)}function _i(t){return Tn(es|Ks,t,!1)}function Ec(t){return pi(),Tn(ro|Ks,t,!0)}function Pc(t){wn.ensure();const e=Tn(Aa|nr,t,!0);return(a={})=>new Promise(r=>{a.outro?ka(e,()=>{qt(e),r(void 0)}):(qt(e),r(void 0))})}function Nc(t){return Tn(es,t,!1)}function Ac(t){return Tn(ns|nr,t,!0)}function lo(t,e=0){return Tn(ro|e,t,!0)}function Ie(t,e=[],a=[],r=[]){_c(r,e,a,o=>{Tn(ro,()=>t(...o.map(n)),!0)})}function or(t,e=0){var a=Tn(Un|e,t,!0);return a}function sn(t){return Tn(Wn|nr,t,!0)}function wi(t){var e=t.teardown;if(e!==null){const a=Ma,r=Xe;ys(!0),Vt(null);try{e.call(null)}finally{ys(a),Vt(r)}}}function yi(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&io(()=>{o.abort(ja)});var r=a.next;(a.f&Aa)!==0?a.parent=null:qt(a,e),a=r}}function Dc(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&Wn)===0&&qt(e),e=a}}function qt(t,e=!0){var a=!1;(e||(t.f&qs)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Mc(t.nodes.start,t.nodes.end),a=!0),yi(t,e&&!a),Yr(t,0),Rt(t,In);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();wi(t);var o=t.parent;o!==null&&o.first!==null&&bi(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Mc(t,e){for(;t!==null;){var a=t===e?null:Pr(t);t.remove(),t=a}}function bi(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function ka(t,e,a=!0){var r=[];Ci(t,r,!0);var o=()=>{a&&qt(t),e&&e()},s=r.length;if(s>0){var i=()=>--s||o();for(var l of r)l.out(i)}else o()}function Ci(t,e,a){if((t.f&Jt)===0){t.f^=Jt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&e.push(l);for(var o=t.first;o!==null;){var s=o.next,i=(o.f&ca)!==0||(o.f&Wn)!==0&&(t.f&Un)!==0;Ci(o,e,i?a:!1),o=s}}}function rs(t){Si(t,!0)}function Si(t,e){if((t.f&Jt)!==0){t.f^=Jt,(t.f&It)===0&&(Rt(t,Kt),Pa(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&ca)!==0||(a.f&Wn)!==0;Si(a,o?e:!1),a=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)(i.is_global||e)&&i.in()}}function ki(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var o=a===r?null:Pr(a);e.append(a),a=o}}let xa=!1;function Kr(t){xa=t}let Ma=!1;function ys(t){Ma=t}let Xe=null,yn=!1;function Vt(t){Xe=t}let Ze=null;function kn(t){Ze=t}let Fn=null;function xi(t){Xe!==null&&(Fn===null?Fn=[t]:Fn.push(t))}let Bt=null,Yt=0,en=null;function Ic(t){en=t}let Ti=1,mr=0,On=mr;function bs(t){On=t}function Ei(){return++Ti}function Nr(t){var e=t.f;if((e&Kt)!==0)return!0;if(e&Nt&&(t.f&=~Ea),(e&Cn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(Nr(s)&&ci(s),s.wv>t.wv)return!0}(e&fn)!==0&&cn===null&&Rt(t,It)}return!1}function Pi(t,e,a=!0){var r=t.reactions;if(r!==null&&!Fn?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Nt)!==0?Pi(s,e,!1):e===s&&(a?Rt(s,Kt):(s.f&It)!==0&&Rt(s,Cn),Pa(s))}}function Ni(t){var _;var e=Bt,a=Yt,r=en,o=Xe,s=Fn,i=it,l=yn,u=On,c=t.f;Bt=null,Yt=0,en=null,Xe=(c&(Wn|Aa))===0?t:null,Fn=null,Xa(t.ctx),yn=!1,On=++mr,t.ac!==null&&(io(()=>{t.ac.abort(ja)}),t.ac=null);try{t.f|=Eo;var d=t.fn,v=d(),h=t.deps;if(Bt!==null){var m;if(Yr(t,Yt),h!==null&&Yt>0)for(h.length=Yt+Bt.length,m=0;m<Bt.length;m++)h[Yt+m]=Bt[m];else t.deps=h=Bt;if(pr()&&(t.f&fn)!==0)for(m=Yt;m<h.length;m++)((_=h[m]).reactions??(_.reactions=[])).push(t)}else h!==null&&Yt<h.length&&(Yr(t,Yt),h.length=Yt);if(rr()&&en!==null&&!yn&&h!==null&&(t.f&(Nt|Cn|Kt))===0)for(m=0;m<en.length;m++)Pi(en[m],t);return o!==null&&o!==t&&(mr++,en!==null&&(r===null?r=en:r.push(...en))),(t.f&aa)!==0&&(t.f^=aa),v}catch(k){return ei(k)}finally{t.f^=Eo,Bt=e,Yt=a,en=r,Xe=o,Fn=s,Xa(i),yn=l,On=u}}function Lc(t,e){let a=e.reactions;if(a!==null){var r=Pl.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&Nt)!==0&&(Bt===null||!Bt.includes(e))&&(Rt(e,Cn),(e.f&fn)!==0&&(e.f^=fn,e.f&=~Ea),li(e),Yr(e,0))}function Yr(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)Lc(t,a[r])}function _r(t){var e=t.f;if((e&In)===0){Rt(t,It);var a=Ze,r=xa;Ze=t,xa=!0;try{(e&(Un|Ll))!==0?Dc(t):yi(t),wi(t);var o=Ni(t);t.teardown=typeof o=="function"?o:null,t.wv=Ti;var s;xo&&sc&&(t.f&Kt)!==0&&t.deps}finally{xa=r,Ze=a}}}async function Ai(){await Promise.resolve(),ai()}function n(t){var e=t.f,a=(e&Nt)!==0;if(Xe!==null&&!yn){var r=Ze!==null&&(Ze.f&In)!==0;if(!r&&!Fn?.includes(t)){var o=Xe.deps;if((Xe.f&Eo)!==0)t.rv<mr&&(t.rv=mr,Bt===null&&o!==null&&o[Yt]===t?Yt++:Bt===null?Bt=[t]:Bt.includes(t)||Bt.push(t));else{(Xe.deps??(Xe.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Xe]:s.includes(Xe)||s.push(Xe)}}}if(Ma){if(oa.has(t))return oa.get(t);if(a){var i=t,l=i.v;return((i.f&It)===0&&i.reactions!==null||Mi(i))&&(l=as(i)),oa.set(i,l),l}}else a&&(!cn?.has(t)||Qe?.is_fork&&!pr())&&(i=t,Nr(i)&&ci(i),xa&&pr()&&(i.f&fn)===0&&Di(i));if(cn?.has(t))return cn.get(t);if((t.f&aa)!==0)throw t.v;return t.v}function Di(t){if(t.deps!==null){t.f^=fn;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&Nt)!==0&&(e.f&fn)===0&&Di(e)}}function Mi(t){if(t.v===Et)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(oa.has(e)||(e.f&Nt)!==0&&Mi(e))return!0;return!1}function jt(t){var e=yn;try{return yn=!0,t()}finally{yn=e}}const Rc=-7169;function Rt(t,e){t.f=t.f&Rc|e}function Fc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ra in t)Ro(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&ra in a&&Ro(a)}}}function Ro(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Ro(t[r],e)}catch{}const a=ao(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Us(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Oc=["touchstart","touchmove"];function zc(t){return Oc.includes(t)}const Ii=new Set,Fo=new Set;function Bc(t,e,a,r={}){function o(s){if(r.capture||cr.call(e,s),!s.cancelBubble)return io(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Da(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function Zt(t,e,a,r,o){var s={capture:r,passive:o},i=Bc(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&mi(()=>{e.removeEventListener(t,i,s)})}function ht(t){for(var e=0;e<t.length;e++)Ii.add(t[e]);for(var a of Fo)a(t)}let Cs=null;function cr(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;Cs=t;var i=0,l=Cs===t&&t.__root;if(l){var u=o.indexOf(l);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var c=o.indexOf(e);if(c===-1)return;u<=c&&(i=u)}if(s=o[i]||t.target,s!==e){Nl(t,"currentTarget",{configurable:!0,get(){return s||a}});var d=Xe,v=Ze;Vt(null),kn(null);try{for(var h,m=[];s!==null;){var _=s.assignedSlot||s.parentNode||s.host||null;try{var k=s["__"+r];k!=null&&(!s.disabled||t.target===s)&&k.call(s,t)}catch(p){h?m.push(p):h=p}if(t.cancelBubble||_===e||_===null)break;s=_}if(h){for(let p of m)queueMicrotask(()=>{throw p});throw h}}finally{t.__root=e,delete t.currentTarget,Vt(d),kn(v)}}}function Li(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function wr(t,e){var a=Ze;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function C(t,e){var a=(e&tc)!==0,r=(e&nc)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=Li(s?t:"<!>"+t),a||(o=Za(o)));var i=r||fi?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=Za(i),u=i.lastChild;wr(l,u)}else wr(i,i);return i}}function jc(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=Li(o),l=Za(i);s=Za(l)}var u=s.cloneNode(!0);return wr(u,u),u}}function Hc(t,e){return jc(t,e,"svg")}function Ke(t=""){{var e=Rn(t+"");return wr(e,e),e}}function ye(){var t=document.createDocumentFragment(),e=document.createComment(""),a=Rn();return t.append(e,a),wr(e,a),t}function g(t,e){t!==null&&t.before(e)}function np(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function ut(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Uc(t,e){return Wc(t,e)}const za=new Map;function Wc(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){Cc();var l=new Set,u=v=>{for(var h=0;h<v.length;h++){var m=v[h];if(!l.has(m)){l.add(m);var _=zc(m);e.addEventListener(m,cr,{passive:_});var k=za.get(m);k===void 0?(document.addEventListener(m,cr,{passive:_}),za.set(m,1)):za.set(m,k+1)}}};u(no(Ii)),Fo.add(u);var c=void 0,d=Pc(()=>{var v=a??e.appendChild(Rn());return gc(v,{pending:()=>{}},h=>{if(s){Se({});var m=it;m.c=s}o&&(r.$$events=o),c=t(h,r)||{},s&&ke()}),()=>{for(var h of l){e.removeEventListener(h,cr);var m=za.get(h);--m===0?(document.removeEventListener(h,cr),za.delete(h)):za.set(h,m)}Fo.delete(u),v!==a&&v.parentNode?.removeChild(v)}});return Vc.set(c,d),c}let Vc=new WeakMap;var dn,mn,Xt,Sa,kr,xr,$r;class co{constructor(e,a=!0){zt(this,"anchor");Ge(this,dn,new Map);Ge(this,mn,new Map);Ge(this,Xt,new Map);Ge(this,Sa,new Set);Ge(this,kr,!0);Ge(this,xr,()=>{var e=Qe;if(j(this,dn).has(e)){var a=j(this,dn).get(e),r=j(this,mn).get(a);if(r)rs(r),j(this,Sa).delete(a);else{var o=j(this,Xt).get(a);o&&(j(this,mn).set(a,o.effect),j(this,Xt).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of j(this,dn)){if(j(this,dn).delete(s),s===e)break;const l=j(this,Xt).get(i);l&&(qt(l.effect),j(this,Xt).delete(i))}for(const[s,i]of j(this,mn)){if(s===a||j(this,Sa).has(s))continue;const l=()=>{if(Array.from(j(this,dn).values()).includes(s)){var c=document.createDocumentFragment();ki(i,c),c.append(Rn()),j(this,Xt).set(s,{effect:i,fragment:c})}else qt(i);j(this,Sa).delete(s),j(this,mn).delete(s)};j(this,kr)||!r?(j(this,Sa).add(s),ka(i,l,!1)):l()}}});Ge(this,$r,e=>{j(this,dn).delete(e);const a=Array.from(j(this,dn).values());for(const[r,o]of j(this,Xt))a.includes(r)||(qt(o.effect),j(this,Xt).delete(r))});this.anchor=e,qe(this,kr,a)}ensure(e,a){var r=Qe,o=hi();if(a&&!j(this,mn).has(e)&&!j(this,Xt).has(e))if(o){var s=document.createDocumentFragment(),i=Rn();s.append(i),j(this,Xt).set(e,{effect:sn(()=>a(i)),fragment:s})}else j(this,mn).set(e,sn(()=>a(this.anchor)));if(j(this,dn).set(r,e),o){for(const[l,u]of j(this,mn))l===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[l,u]of j(this,Xt))l===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(j(this,xr)),r.ondiscard(j(this,$r))}else j(this,xr).call(this)}}dn=new WeakMap,mn=new WeakMap,Xt=new WeakMap,Sa=new WeakMap,kr=new WeakMap,xr=new WeakMap,$r=new WeakMap;const qc=0,bo=1;function Kc(t,e,a,r,o){var s=rr(),i=Et,l=s?Sn(i):Lo(i,!1,!1),u=s?Sn(i):Lo(i,!1,!1),c=new co(t);or(()=>{var d=e(),v=!1;if(Dl(d)){var h=ii(),m=!1;const _=k=>{if(!v){m=!0,h(!1),wn.ensure();try{k()}finally{hr(),Wa||ai()}}};d.then(k=>{_(()=>{Ln(l,k),c.ensure(bo,r&&(p=>r(p,l)))})},k=>{_(()=>{if(Ln(u,k),c.ensure(bo,o&&(p=>o(p,u))),!o)throw u.v})}),Da(()=>{m||_(()=>{c.ensure(qc,a)})})}else Ln(l,d),c.ensure(bo,r&&(_=>r(_,l)));return()=>{v=!0}})}function B(t,e,a=!1){var r=new co(t),o=a?ca:0;function s(i,l){r.ensure(i,l)}or(()=>{var i=!1;e((l,u=!0)=>{i=!0,s(u,l)}),i||s(!1,null)},o)}function ge(t,e){lo(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Yc(t,e,a){for(var r=[],o=e.length,s,i=e.length,l=0;l<o;l++){let v=e[l];ka(v,()=>{if(s){if(s.pending.delete(v),s.done.add(v),s.pending.size===0){var h=t.outrogroups;Oo(no(s.done)),h.delete(s),h.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var u=r.length===0&&a!==null;if(u){var c=a,d=c.parentNode;Sc(d),d.append(c),t.items.clear()}Oo(e,!u)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function Oo(t,e=!0){for(var a=0;a<t.length;a++)qt(t[a],e)}var Ss;function zn(t,e,a,r,o,s=null){var i=t,l=new Map,u=(e&Xs)!==0;if(u){var c=t;i=c.appendChild(Rn())}var d=null,v=Er(()=>{var b=a();return $o(b)?b:b==null?[]:no(b)}),h,m=!0;function _(){p.fallback=d,Gc(p,h,i,e,r),d!==null&&(h.length===0?(d.f&Mn)===0?rs(d):(d.f^=Mn,dr(d,null,i)):ka(d,()=>{d=null}))}var k=or(()=>{h=n(v);for(var b=h.length,P=new Set,w=Qe,S=hi(),A=0;A<b;A+=1){var G=h[A],O=r(G,A),H=m?null:l.get(O);H?(H.v&&Ln(H.v,G),H.i&&Ln(H.i,A),S&&w.skipped_effects.delete(H.e)):(H=Xc(l,m?i:Ss??(Ss=Rn()),G,O,A,o,e,a),m||(H.e.f|=Mn),l.set(O,H)),P.add(O)}if(b===0&&s&&!d&&(m?d=sn(()=>s(i)):(d=sn(()=>s(Ss??(Ss=Rn()))),d.f|=Mn)),!m)if(S){for(const[I,U]of l)P.has(I)||w.skipped_effects.add(U.e);w.oncommit(_),w.ondiscard(()=>{})}else _();n(v)}),p={effect:k,items:l,outrogroups:null,fallback:d};m=!1}function Gc(t,e,a,r,o){var s=(r&Gl)!==0,i=e.length,l=t.items,u=t.effect.first,c,d=null,v,h=[],m=[],_,k,p,b;if(s)for(b=0;b<i;b+=1)_=e[b],k=o(_,b),p=l.get(k).e,(p.f&Mn)===0&&(p.nodes?.a?.measure(),(v??(v=new Set)).add(p));for(b=0;b<i;b+=1){if(_=e[b],k=o(_,b),p=l.get(k).e,t.outrogroups!==null)for(const U of t.outrogroups)U.pending.delete(p),U.done.delete(p);if((p.f&Mn)!==0)if(p.f^=Mn,p===u)dr(p,null,a);else{var P=d?d.next:u;p===t.effect.last&&(t.effect.last=p.prev),p.prev&&(p.prev.next=p.next),p.next&&(p.next.prev=p.prev),Kn(t,d,p),Kn(t,p,P),dr(p,P,a),d=p,h=[],m=[],u=d.next;continue}if((p.f&Jt)!==0&&(rs(p),s&&(p.nodes?.a?.unfix(),(v??(v=new Set)).delete(p))),p!==u){if(c!==void 0&&c.has(p)){if(h.length<m.length){var w=m[0],S;d=w.prev;var A=h[0],G=h[h.length-1];for(S=0;S<h.length;S+=1)dr(h[S],w,a);for(S=0;S<m.length;S+=1)c.delete(m[S]);Kn(t,A.prev,G.next),Kn(t,d,A),Kn(t,G,w),u=w,d=G,b-=1,h=[],m=[]}else c.delete(p),dr(p,u,a),Kn(t,p.prev,p.next),Kn(t,p,d===null?t.effect.first:d.next),Kn(t,d,p),d=p;continue}for(h=[],m=[];u!==null&&u!==p;)(c??(c=new Set)).add(u),m.push(u),u=u.next;if(u===null)continue}(p.f&Mn)===0&&h.push(p),d=p,u=p.next}if(t.outrogroups!==null){for(const U of t.outrogroups)U.pending.size===0&&(Oo(no(U.done)),t.outrogroups?.delete(U));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||c!==void 0){var O=[];if(c!==void 0)for(p of c)(p.f&Jt)===0&&O.push(p);for(;u!==null;)(u.f&Jt)===0&&u!==t.fallback&&O.push(u),u=u.next;var H=O.length;if(H>0){var I=(r&Xs)!==0&&i===0?a:null;if(s){for(b=0;b<H;b+=1)O[b].nodes?.a?.measure();for(b=0;b<H;b+=1)O[b].nodes?.a?.fix()}Yc(t,O,I)}}s&&Da(()=>{if(v!==void 0)for(p of v)p.nodes?.a?.apply()})}function Xc(t,e,a,r,o,s,i,l){var u=(i&Kl)!==0?(i&Xl)===0?Lo(a,!1,!1):Sn(a):null,c=(i&Yl)!==0?Sn(o):null;return{v:u,i:c,e:sn(()=>(s(e,u??a,c??o,l),()=>{t.delete(r)}))}}function dr(t,e,a){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,s=e&&(e.f&Mn)===0?e.nodes.start:a;r!==null;){var i=Pr(r);if(s.before(r),r===o)return;r=i}}function Kn(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function Ue(t,e,...a){var r=new co(t);or(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},ca)}function Jc(t,e,a){var r=new co(t);or(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},ca)}function Ri(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=Ri(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function Zc(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=Ri(t))&&(r&&(r+=" "),r+=e);return r}function nt(t){return typeof t=="object"?Zc(t):t??""}const ks=[...` 	
\r\fÂ \v\uFEFF`];function Qc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||ks.includes(r[i-1]))&&(l===r.length||ks.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function $c(t,e){return t==null?null:String(t)}function et(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=Qc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var u in s){var c=!!s[u];(o==null||c!==!!o[u])&&t.classList.toggle(u,c)}return s}function Qa(t,e,a,r){var o=t.__style;if(o!==e){var s=$c(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const ed=Symbol("is custom element"),td=Symbol("is html");function ap(t,e){var a=os(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function rp(t,e){var a=os(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function dt(t,e,a,r){var o=os(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[Rl]=a),a==null?t.removeAttribute(e):typeof a!="string"&&nd(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function os(t){return t.__attributes??(t.__attributes={[ed]:t.nodeName.includes("-"),[td]:t.namespaceURI===ac})}var xs=new Map;function nd(t){var e=t.getAttribute("is")||t.nodeName,a=xs.get(e);if(a)return a;xs.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Us(o);for(var i in r)r[i].set&&a.push(i);o=ao(o)}return a}function Fi(t,e,a=e){var r=new WeakSet;xc(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=Co(t)?So(s):s,a(s),Qe!==null&&r.add(Qe),await Ai(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,u=t.value.length;if(t.value=s??"",l!==null){var c=t.value.length;i===l&&l===u&&c>u?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=i,t.selectionEnd=Math.min(l,c))}}}),jt(e)==null&&t.value&&(a(Co(t)?So(t.value):t.value),Qe!==null&&r.add(Qe)),lo(()=>{var o=e();if(t===document.activeElement){var s=jr??Qe;if(r.has(s))return}Co(t)&&o===So(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Co(t){var e=t.type;return e==="number"||e==="range"}function So(t){return t===""?null:+t}function Ts(t,e){return t===e||t?.[ra]===e}function $e(t={},e,a,r){return Nc(()=>{var o,s;return lo(()=>{o=s,s=[],jt(()=>{t!==a(...s)&&(e(t,...s),o&&Ts(a(...o),t)&&e(null,...o))})}),()=>{Da(()=>{s&&Ts(a(...s),t)&&e(null,...s)})}}),t}function ss(t=!1){const e=it,a=e.l.u;if(!a)return;let r=()=>Fc(e.s);if(t){let o=0,s={};const i=Tr(()=>{let l=!1;const u=e.s;for(const c in u)u[c]!==s[c]&&(s[c]=u[c],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&Ec(()=>{Es(e,r),To(a.b)}),Ye(()=>{const o=jt(()=>a.m.map(Ml));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&Ye(()=>{Es(e,r),To(a.a)})}function Es(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Fr=!1;function ad(t){var e=Fr;try{return Fr=!1,[t(),Fr]}finally{Fr=e}}const rd={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(sr(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];sr(o)&&(o=o());const s=na(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(sr(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=na(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===ra||e===Ys)return!1;for(let a of t.props)if(sr(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(sr(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function zo(...t){return new Proxy({props:t},rd)}function Oe(t,e,a,r){var o=!ar||(a&Zl)!==0,s=(a&$l)!==0,i=(a&ec)!==0,l=r,u=!0,c=()=>(u&&(u=!1,l=i?jt(r):r),l),d;if(s){var v=ra in t||Ys in t;d=na(t,e)?.set??(v&&e in t?w=>t[e]=w:void 0)}var h,m=!1;s?[h,m]=ad(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=c(),d&&(o&&Hl(),d(h)));var _;if(o?_=()=>{var w=t[e];return w===void 0?c():(u=!0,w)}:_=()=>{var w=t[e];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(a&Ql)===0)return _;if(d){var k=t.$$legacy;return(function(w,S){return arguments.length>0?((!o||!S||k||m)&&d(S?_():w),w):_()})}var p=!1,b=((a&Jl)!==0?Tr:Er)(()=>(p=!1,_()));s&&n(b);var P=Ze;return(function(w,S){if(arguments.length>0){const A=S?n(b):o&&s?ft(w):w;return f(b,A),p=!0,l!==void 0&&(l=A),w}return Ma&&p||(P.f&In)!==0?b.v:n(b)})}function Ae(t){it===null&&Gs(),ar&&it.l!==null?od(it).m.push(t):Ye(()=>{const e=jt(t);if(typeof e=="function")return e})}function od(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const sd="5";var Hs;typeof window<"u"&&((Hs=window.__svelte??(window.__svelte={})).v??(Hs.v=new Set)).add(sd);ic();const Oi={};function id(t){gt(Oi,t)}function $a(){const t=vt(Oi);if(!t)throw new Error("No FeedSearchContext found");return t}const zi={};function ld(t){gt(zi,t)}function Ht(){const t=vt(zi);if(!t)throw new Error("No SearchParamsContext found");return t}function cd(t,e){Se(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Ht(),s="feedSearch",i=T(()=>o().get(s)||""),l=T(()=>n(i));id({getFeedSearch:()=>n(l),setFeedSearch:d=>{d===""?r(s):a(s,d)}});var u=ye(),c=E(u);Ue(c,()=>e.children??Je),g(t,u),ke()}const Bi={};function dd(t){gt(Bi,t)}function ud(){const t=vt(Bi);if(!t)throw new Error("No TagsSearchContext found");return t}function fd(t,e){Se(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Ht(),s="tagsSearch",i=T(()=>o().get(s)||""),l=T(()=>n(i));dd({getTagsSearch:()=>n(l),setTagsSearch:d=>{d===""?r(s):a(s,d)}});var u=ye(),c=E(u);Ue(c,()=>e.children??Je),g(t,u),ke()}const ji={};function vd(t){gt(ji,t)}function Hi(){const t=vt(ji);if(!t)throw new Error("No FeedOrderContext found");return t}function gd(t,e){Se(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Ht(),s="feedOrder",i=T(()=>o().get(s)||"newest"),l=T(()=>n(i));let u=["newest","oldest","AtoZ","ZtoA","updatedNewest"];vd({getFeedOrder:()=>n(l),setFeedOrder:v=>{v==="newest"||!u.includes(v)?r(s):a(s,v)}});var c=ye(),d=E(c);Ue(d,()=>e.children??Je),g(t,c),ke()}const Ui={};function hd(t){gt(Ui,t)}function Ar(){const t=vt(Ui);if(!t)throw new Error("No SidebarContext found");return t}function pd(t,e){Se(e,!0);let a=D("closed");hd({sidebarOpen:()=>{f(a,"preOpening")},sidebarClose:()=>{f(a,"closing")},getSidebarState:()=>n(a),setSidebarState:c=>{f(a,c,!0)}});var l=ye(),u=E(l);Ue(u,()=>e.children??Je),g(t,l),ke()}const Wi={};function md(t){gt(Wi,t)}function Vn(){const t=vt(Wi);if(!t)throw new Error("No SelectedTagsContext found");return t}function _d(t,e){Se(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Ht(),s=T(a),i="selectedTags";let l=T(()=>n(s).get(i)||""),u=T(()=>new Set(n(l).split(",").map(p=>decodeURIComponent(p)).filter(p=>p!=="")));md({getSelectedTags:()=>n(u),addTag:p=>{n(u).has(p)||r(i,[...n(u),p].map(b=>encodeURIComponent(b)).join(","))},removeTag:p=>{n(u).has(p)&&n(u).size===1?o(i):n(u).has(p)&&r(i,[...n(u)].filter(b=>b!==p).map(b=>encodeURIComponent(b)).join(","))},clearTags:()=>{o(i)},setSelectedTags:p=>{p.size===0?o(i):r(i,[...p].map(b=>encodeURIComponent(b)).join(","))}});var _=ye(),k=E(_);Ue(k,()=>e.children??Je),g(t,_),ke()}const Vi={};function wd(t){gt(Vi,t)}function da(){const t=vt(Vi);if(!t)throw new Error("No SelectedNotesContext found");return t}var yd=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],bd=["difference","intersection","symmetricDifference","union"],Ps=!1,Ga,un,ea,eo,er,qi,Ki;const to=class to extends Set{constructor(a){super();Ge(this,er);Ge(this,Ga,new Map);Ge(this,un,D(0));Ge(this,ea,D(0));Ge(this,eo,On||-1);if(a){for(var r of a)super.add(r);j(this,ea).v=super.size}Ps||ct(this,er,Ki).call(this)}has(a){var r=super.has(a),o=j(this,Ga),s=o.get(a);if(s===void 0){if(!r)return n(j(this,un)),!1;s=ct(this,er,qi).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),f(j(this,ea),super.size),sa(j(this,un))),this}delete(a){var r=super.delete(a),o=j(this,Ga),s=o.get(a);return s!==void 0&&(o.delete(a),f(s,!1)),r&&(f(j(this,ea),super.size),sa(j(this,un))),r}clear(){if(super.size!==0){super.clear();var a=j(this,Ga);for(var r of a.values())f(r,!1);a.clear(),f(j(this,ea),0),sa(j(this,un))}}keys(){return this.values()}values(){return n(j(this,un)),super.values()}entries(){return n(j(this,un)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(j(this,ea))}};Ga=new WeakMap,un=new WeakMap,ea=new WeakMap,eo=new WeakMap,er=new WeakSet,qi=function(a){return On===j(this,eo)?D(a):Sn(a)},Ki=function(){Ps=!0;var a=to.prototype,r=Set.prototype;for(const o of yd)a[o]=function(...s){return n(j(this,un)),r[o].apply(this,s)};for(const o of bd)a[o]=function(...s){n(j(this,un));var i=r[o].apply(this,s);return new to(i)}};let Bo=to;function Cd(t,e){Se(e,!0);let a=new Bo,r=D("single");const o=()=>a,s=m=>{a.clear(),m.forEach(_=>a.add(_))},i=m=>{a.add(m)},l=m=>{a.delete(m)},u=()=>{a.clear()};wd({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:u,getMode:()=>n(r),changeMode:m=>{f(r,m,!0),m==="single"&&u()}});var v=ye(),h=E(v);Ue(h,()=>e.children??Je),g(t,v),ke()}const Yi={};function Sd(t){gt(Yi,t)}function is(){const t=vt(Yi);if(!t)throw new Error("No LocalDBContext found");return t}const Gi={};function kd(t){gt(Gi,t)}function Na(){const t=vt(Gi);if(!t)throw new Error("No SettingsContext found");return t}const Xi={};function xd(t){gt(Xi,t)}function uo(){const t=vt(Xi);if(!t)throw new Error("No BroadcastContext found");return t}const Td="AppStorage",Ed=1,ur="account",Gn="settings",rt="notes",Ut="tags",Pd="syncLog",ua="success",jn="error",kt=(t,e,a)=>{t?.addEventListener(e,a)},Ns=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();kt(s,ua,()=>{const i=s?.result||[];a(i)}),kt(s,jn,i=>{r(i)})}),Gr=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);kt(i,ua,()=>{const l=i?.result?.data;r(l)}),kt(i,jn,l=>{o(l)})}),_n=(t,e,a,r)=>new Promise((o,s)=>{const u=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});kt(u,ua,()=>{o()}),kt(u,jn,c=>{s(c)})}),wt=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,u)=>{kt(i,ua,()=>{l()}),kt(i,jn,c=>{u(c)})})}))},ko=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);kt(l,ua,()=>{r()}),kt(l,jn,u=>{o(u)})}),ir=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,u)=>{kt(i,ua,()=>{l()}),kt(i,jn,c=>{u(c)})})}))},Ha=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();kt(i,ua,()=>{a()}),kt(i,jn,l=>{r(l)})}),tn="dialogPages",Ji={};function Nd(t){gt(Ji,t)}function Ft(){const t=vt(Ji);if(!t)throw new Error("No DialogPagesContext found");return t}var Ee=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t.Extension="extension",t))(Ee||{});const As={settings:"Settings",importData:"Import",exportData:"Export",account:"Account",sync:"Sync",accountSetup:"",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success",extension:"Extension"},Ds=()=>chrome,Zi=()=>LanguageModel;function Ad(t,e){Se(e,!0);const{deleteSearchParam:a,replaceSearchParams:r}=Ht(),{clearDialogPages:o,getDialogPages:s,replaceDialogPage:i}=Ft(),l="viewMode";let c=ft((()=>{const K=new URLSearchParams(window.location.search).get(l)||"tab";return K==="popup"||K==="window"||K==="tab"||K==="sidebar"?K:"tab"})());Ae(()=>{a(l)});let d=D(!1),v=D(ft({showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}}));const{getDB:h}=is(),{createBroadcastChannel:m,tabId:_}=uo(),k=m(),p=T(h),b=async()=>{const ce=await Gr(n(p),Gn,"default");ce&&f(v,ce,!0)},P=async()=>{await b();const K=s().at(-1)||"";K.startsWith(Ee.NewNote+"?id=")&&i(K.replace(Ee.NewNote,Ee.Note)),f(d,!0)};Ae(()=>{});const w=async ce=>{const K=JSON.parse(ce.data),R=K;if(K.tabId&&K.tabId===_){R.type==="exit"&&(f(v,{showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}},!0),Ha(n(p),Gn));return}R.type==="updateSettings"?b():R.type==="exit"&&f(v,{showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}},!0)},S=()=>n(v).showFavicon,A=()=>n(v).recordMode,G=async ce=>{n(v).showFavicon=ce,await _n(n(p),Gn,"default",ha(n(v))),k.postMessage({type:"updateSettings"})},O=async ce=>{n(v).recordMode=ce,await _n(n(p),Gn,"default",ha(n(v))),k.postMessage({type:"updateSettings"})},H=async ce=>{n(v).tags.prev=ce,await _n(n(p),Gn,"default",ha(n(v))),k.postMessage({type:"updateSettings"})},I=()=>n(v).tags.prev||[],U=async ce=>{n(v).tags.llm=ce,await _n(n(p),Gn,"default",ha(n(v))),k.postMessage({type:"updateSettings"})},Z=()=>n(v).tags.llm,ne=()=>n(v).tags.pageData,F=async ce=>{n(v).tags.pageData=ce,await _n(n(p),Gn,"default",ha(n(v))),k.postMessage({type:"updateSettings"})};Ae(()=>(P(),k.addEventListener(w),()=>{k.removeEventListener(w)})),kd({getFaviconEnabled:S,getRecordMode:A,setRecordMode:O,setFaviconShown:G,isInitedSettings:()=>n(d),getViewMode:()=>c,setLlmTagsEnabled:U,getLlmTagsEnabled:Z,setPrevTags:H,getPrevTags:I,getPageDataForTagsEnabled:ne,setPageDataForTagsEnabled:F});var z=ye(),be=E(z);Ue(be,()=>e.children??Je),g(t,z),ke()}const Qi={};function Dd(t){gt(Qi,t)}function ls(){const t=vt(Qi);if(!t)throw new Error("No AccountContext found");return t}function Md(t,e){Se(e,!0);let a=D(void 0);const{getDB:r}=is(),{createBroadcastChannel:o,tabId:s}=uo(),i=T(r),l=o(),u=async()=>{const w=await Gr(n(i),ur,"default");f(a,w,!0)},c=w=>_n(n(i),ur,"default",w),d=async w=>{const S=await Gr(n(i),ur,"default");S!==void 0&&f(a,S,!0),w(S)},v=async w=>{const S=JSON.parse(w.data);if(S.tabId&&S.tabId===s)return;const A=S;A.type==="initLocalAccount"?f(a,null):A.type==="initCloudAccount"?u():A.type==="disconnectCloudAccount"?f(a,null):A.type==="exit"?f(a,void 0):A.type==="updateAccount"&&u()};Ae(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),Dd({init:d,getAccount:()=>n(a),initLocalAccount:async()=>{f(a,null),await c(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async w=>{const S={encryptedClientKey:w.encryptedClientKey||"",subscriptionExpires:w.subscriptionExpires||-1,lastSync:-1};await c(S),f(a,S,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{f(a,null),await c(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async w=>{if(!n(a))throw new Error("No account to update subscription for");const S={...n(a),subscriptionExpires:w};await c(S),l.postMessage({type:"updateAccount"})},exitApp:async()=>{f(a,void 0),l.postMessage({type:"exit"}),await Ha(n(i),ur)}});var b=ye(),P=E(b);Ue(P,()=>e.children??Je),g(t,b),ke()}const $i={};function Id(t){gt($i,t)}function Ot(){const t=vt($i);if(!t)throw new Error("No NotesContext found");return t}const Xn=()=>crypto.randomUUID(),Ld=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},el=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function op(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}const yt=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function Rd(t,e){Se(e,!0);const{getDB:a}=is(),{createBroadcastChannel:r,tabId:o}=uo(),s=T(a),i=r(),l=720*60*60*1e3;let u=D(!1),c=D(()=>new Map),d=D(()=>[]),v=D(()=>new Map),h=D(ft(new Map));const m=()=>n(u),_=()=>n(d)().some(x=>x.data&&!x.data.deletedAt&&!x.data.archivedAt),k=()=>n(d)().some(x=>x.data&&x.data.deletedAt),p=()=>n(d)().some(x=>x.data&&x.data.archivedAt&&!x.data.deletedAt),b=(x,M)=>{n(h).has(x)||n(h).set(x,new Set),n(h).get(x)?.add(M)},P=(x,M)=>{n(h).has(x)&&(n(h).get(x)?.delete(M),n(h).get(x)?.size===0&&n(h).delete(x))},w=x=>{if(!x)return!1;const M=n(v)().get(x);if(!M||!M.data?.link?.url)return!1;const L=n(h).get(M.data.link.url),W=[];return L?.forEach(V=>{if(V===x)return;const X=n(v)().get(V);M.data?.archivedAt!==X?.data?.archivedAt||M.data?.deletedAt!==X?.data?.deletedAt||W.push(V)}),W.length>0},S=x=>{const M=n(d)(),L=n(v)(),W=L.get(x.id);if(W){const V=W.data?.link?.url;W.data=x.data,V!==x.data?.link?.url&&(V&&P(V,x.id),x.data?.link?.url&&b(x.data.link.url,x.id))}else M.push(x),L.set(x.id,x),x.data?.link?.url&&b(x.data.link.url,x.id);f(d,()=>M),f(v,()=>L)},A=x=>{const M=n(d)(),L=n(v)(),W=L.get(x);L.has(x)&&L.delete(x),W&&W.data?.link?.url&&P(W.data.link.url,x),W&&(W.data=void 0),f(d,()=>M),f(v,()=>L)},G=x=>{const M=n(d)(),L=n(v)();for(const W of x){const V=L.get(W);L.has(W)&&L.delete(W),V&&V.data?.link?.url&&P(V.data.link.url,W),V&&(V.data=void 0)}f(d,()=>M),f(v,()=>L)},O=()=>{f(d,()=>[]),f(h,new Map,!0),f(c,()=>new Map),f(v,()=>new Map)},H=()=>n(d),I=x=>{const M=n(c)();for(const L of x)M.get(L)||M.set(L,{name:L});f(c,()=>M)},U=async()=>{const[x,M]=await Promise.all([Ns(n(s),rt),Ns(n(s),Ut).then(ee=>ee.reduce((Y,oe)=>Y.set(oe.id,oe.data),new Map))]),L=[],W=[],V=new Map;for(const ee of x)ee.data.deletedAt&&Date.now()-ee.data.deletedAt>l?L.push(ee.id):(W.push(ee),V.set(ee.id,ee),ee.data.link?.url&&b(ee.data.link?.url,ee.id));const X=Ld(W),Q=[],J=new Map(M);[...X.values()].forEach(ee=>{J.set(ee,{name:ee,pinned:M.get(ee)?.pinned||!1}),M.has(ee)||Q.push(ee)});const se=[];[...M.keys()].forEach(ee=>{X.has(ee)||se.push(ee)}),await ir(n(s),rt,L),await ir(n(s),Ut,se),await wt(n(s),Ut,Q.map(ee=>({id:ee,data:{pinned:J.get(ee)?.pinned||!1}}))),f(d,()=>W),f(v,()=>V),f(c,()=>J),f(u,!0)},Z=async x=>{const M=n(c)(),L=x.data.tags.filter(W=>!M.has(W))||[];return await _n(n(s),rt,x.id,{...x.data}),L.length>0&&(await wt(n(s),Ut,L.map(W=>({id:W,data:{pinned:!1}}))||[]),I(L)),S(x),i.postMessage({type:"putNote",data:{id:x.id}}),x.id},ne=async({link:x,text:M,tags:L})=>{const W={id:Xn(),data:{link:yt(x),text:M,tags:yt(L),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await Z(W),W.id},F=async(x,{link:M,text:L,tags:W})=>{const V=R(x);if(!V||!V.data)return;const X={id:x,data:{...V.data,link:yt(M),text:L,tags:yt(W),updatedAt:Date.now()}};await Z(X)},z=async(x,{link:M,text:L,tags:W})=>{const V=R(x);if(!V||!V.data)return;const X=Xn(),Q={id:x,data:{...V.data,link:M,text:L,tags:W,updatedAt:Date.now(),history:[...(V.data.history||[]).slice(-49),{id:X,link:yt(V.data.link),text:V.data.text,tags:yt(V.data.tags),updatedAt:V.data.updatedAt}]}};return await Z(Q),X},be=async(x,M)=>{const L=R(x);if(!L||!L.data)return;const W=L.data.history?.find?.(X=>X.id===M);if(!W)return;const V={id:x,data:{...L.data,link:yt(W.link),text:W.text,tags:yt(W.tags),updatedAt:W.updatedAt,history:L.data.history?.filter?.(X=>X.id!==M)||[]}};await Z(V)},ce=async x=>{const L=n(v)().get(x);!L||!L.data||(A(x),await ko(n(s),rt,x),i.postMessage({type:"deleteNote",data:{id:x}}))},K=async()=>{await Ha(n(s),rt),await Ha(n(s),Ut),O(),i.postMessage({type:"clearNotes"})},R=x=>n(v)().get(x),te=async(x,M)=>{const W=n(v)().get(x);if(!W||!W.data)return;const V={id:x,data:{...W.data,pinned:M}};Z(V)},fe=async x=>{const L=n(v)().get(x);if(!L||!L.data)return;const W={id:x,data:{...L.data,deletedAt:Date.now()}};await Z(W)},ie=async x=>{const L=n(v)().get(x);if(!L||!L.data)return;const W={id:x,data:{...L.data,archivedAt:Date.now()}};await Z(W)},de=async({noteIds:x})=>{const M=n(v)(),L=n(d)();for(const V of x){const X=M.get(V);X?.data&&(X.data.deletedAt=Date.now())}return await wt(n(s),rt,x.map(V=>{const X=M.get(V);return{id:V,data:X?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>M),f(d,()=>L),{cancel:async()=>{for(const V of x){const X=M.get(V);X?.data&&(X.data.deletedAt=0)}await wt(n(s),rt,x.map(V=>{const X=M.get(V);return{id:V,data:X?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>M),f(d,()=>L)}}},De=async({noteIds:x})=>{const M=n(v)(),L=n(d)();for(const V of x){const X=M.get(V);X?.data&&(X.data.archivedAt=Date.now())}return await wt(n(s),rt,x.map(V=>{const X=M.get(V);return{id:V,data:X?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>M),f(d,()=>L),{cancel:async()=>{for(const V of x){const X=M.get(V);X?.data&&(X.data.archivedAt=0)}await wt(n(s),rt,x.map(V=>{const X=M.get(V);return{id:V,data:X?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>M),f(d,()=>L)}}},Fe=async({noteIds:x})=>{const M=n(v)(),L=n(d)(),W=[];for(const X of x){const Q=M.get(X);Q?.data&&(W.push({id:X,data:yt(Q.data)}),Q.data.archivedAt=0)}return await wt(n(s),rt,x.map(X=>{const Q=M.get(X);return{id:X,data:Q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>M),f(d,()=>L),{cancel:async()=>{for(const X of W){const Q=M.get(X.id);Q?.data&&(Q.data=X.data)}await wt(n(s),rt,x.map(X=>{const Q=M.get(X);return{id:X,data:Q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>M),f(d,()=>L)}}},he=async({noteIds:x})=>{const M=n(v)(),L=n(d)(),W=[];for(const X of x){const Q=M.get(X);Q?.data&&(W.push({id:X,data:yt(Q.data)}),Q.data.deletedAt=0)}return await wt(n(s),rt,x.map(X=>{const Q=M.get(X);return{id:X,data:Q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>M),f(d,()=>L),{cancel:async()=>{for(const X of W){const Q=M.get(X.id);Q?.data&&(Q.data=X.data)}await wt(n(s),rt,x.map(X=>{const Q=M.get(X);return{id:X,data:Q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>M),f(d,()=>L)}}},q=async x=>{const L=n(v)().get(x);if(!L||!L.data)return;const W={id:x,data:{...L.data,deletedAt:0}};await Z(W)},ue=async x=>{const L=n(v)().get(x);if(!L||!L.data)return;const W={id:x,data:{...L.data,archivedAt:0}};await Z(W)},re=async(x,M)=>{const L=n(c)();L.set(x,{name:x,pinned:M}),await _n(n(s),Ut,x,{pinned:M}),i.postMessage({type:"pinTag",data:{tag:x,pinned:M}}),f(c,()=>L)},pe=async({noteIds:x})=>{const M=n(c)(),L=n(d)();G(x),await ir(n(s),rt,x),i.postMessage({type:"reloadNotes"}),f(d,()=>L),f(c,()=>M)},Pe=async x=>{const M=n(v)(),L={};x.forEach(W=>{const V=M.get(W.id),X=[];if(V&&V.data){let Q=0,J=0;for(;Q<W.data.history.length&&J<V.data.history.length;){const se=W.data.history[Q],ee=V.data.history[J];se.id===ee.id?(se.updatedAt>ee.updatedAt?X.push(se):X.push(ee),Q+=1,J+=1):se.updatedAt<ee.updatedAt?(X.push(se),Q+=1):se.updatedAt>ee.updatedAt?(X.push(ee),J+=1):(X.push(ee),Q+=1,J+=1)}V.data.updatedAt>W.data.updatedAt?L[V.id]={id:V.id,data:{...V.data,history:X}}:L[W.id]={id:W.id,data:{...W.data,history:X}}}else L[W.id]=W}),await wt(n(s),rt,Object.values(L)),await U(),i.postMessage({type:"reloadNotes"})},ze=async()=>{const x=[];n(d)().forEach(L=>{L&&L.data&&L.data.deletedAt&&x.push(L.id)}),await ir(n(s),rt,x),await U(),i.postMessage({type:"emptyBin"})},me=async(x,M)=>{const L=n(v)(),W=n(d)(),V=[],X=[];for(const J of M){const se=L.get(J);se?.data&&(V.push({id:J,data:yt(se.data)}),X.push({id:J,data:{...se.data,tags:se.data.tags.filter(ee=>ee!==x),history:[...se.data.history||[],{id:Xn(),link:yt(se.data.link),text:se.data.text,tags:se.data.tags,updatedAt:Date.now()}]}}))}for(const J of X){const se=L.get(J.id);se?.data&&(se.data=J.data)}return await wt(n(s),rt,X.map(J=>({id:J.id,data:J.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>L),f(d,()=>W),{cancel:async()=>{for(const J of V){const se=L.get(J.id);se?.data&&(se.data=J.data)}await wt(n(s),rt,V.map(J=>({id:J.id,data:J.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>L),f(d,()=>W)}}},le=async(x,M,L)=>{const W=n(v)(),V=n(d)(),X=n(c)(),Q=[],J=[];for(const Y of L){const oe=W.get(Y);oe?.data&&(Q.push({id:Y,data:yt(oe.data)}),J.push({id:Y,data:{...oe.data,tags:oe.data.tags.map(ae=>ae!==x?ae:M),history:[...oe.data.history||[],{id:Xn(),link:yt(oe.data.link),text:oe.data.text,tags:oe.data.tags,updatedAt:Date.now()}]}}))}for(const Y of J){const oe=W.get(Y.id);oe?.data&&(oe.data=Y.data)}const se=X.has(M);return await Promise.all([(async()=>{if(!se){const Y=X.get(x)?.pinned||!1;X.set(M,{name:M,pinned:Y}),await _n(n(s),Ut,M,{pinned:Y})}})(),wt(n(s),rt,J.map(Y=>({id:Y.id,data:Y.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>W),f(d,()=>V),f(c,()=>X),{cancel:async()=>{for(const Y of Q){const oe=W.get(Y.id);oe?.data&&(oe.data=Y.data)}await Promise.all([(async()=>{se||(X.delete(M),await ko(n(s),Ut,M))})(),wt(n(s),rt,Q.map(Y=>({id:Y.id,data:Y.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>W),f(d,()=>V),f(c,()=>X)}}},xe=async(x,M)=>{const L=n(v)(),W=n(d)(),V=n(c)(),X=[],Q=[];for(const ee of M){const Y=L.get(ee);Y?.data&&(X.push({id:ee,data:yt(Y.data)}),Q.push({id:ee,data:{...Y.data,tags:[...new Set([...Y.data.tags,x])],history:[...Y.data.history||[],{id:Xn(),link:yt(Y.data.link),text:Y.data.text,tags:Y.data.tags,updatedAt:Date.now()}]}}))}for(const ee of Q){const Y=L.get(ee.id);Y?.data&&(Y.data=ee.data)}const J=V.has(x);return await Promise.all([(async()=>{J||(V.set(x,{name:x,pinned:!1}),await _n(n(s),Ut,x,{pinned:!1}))})(),wt(n(s),rt,Q.map(ee=>({id:ee.id,data:ee.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>L),f(d,()=>W),f(c,()=>V),{cancel:async()=>{for(const ee of X){const Y=L.get(ee.id);Y?.data&&(Y.data=ee.data)}await Promise.all([(async()=>{J||(V.delete(x),await ko(n(s),Ut,x))})(),wt(n(s),rt,X.map(ee=>({id:ee.id,data:ee.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>L),f(d,()=>W),f(c,()=>V)}}},$=async(x,M,L)=>{const W=n(v)(),V=n(d)(),X=n(c)(),Q=[],J=[];for(const oe of L){const ae=W.get(oe);ae?.data&&(Q.push({id:oe,data:yt(ae.data)}),J.push({id:oe,data:{...ae.data,tags:[...new Set([...ae.data.tags.filter(_e=>!x.includes(_e)),...M])],history:[...ae.data.history||[],{id:Xn(),link:yt(ae.data.link),text:ae.data.text,tags:ae.data.tags,updatedAt:Date.now()}]}}))}for(const oe of J){const ae=W.get(oe.id);ae?.data&&(ae.data=oe.data)}const se=n(c)(),ee=M.filter(oe=>!se.has(oe));return await Promise.all([(async()=>{if(ee.length>0)return wt(n(s),Ut,ee.map(oe=>({id:oe,data:{pinned:!1}})))})(),wt(n(s),rt,J.map(oe=>({id:oe.id,data:oe.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>W),f(d,()=>V),f(c,()=>X),{cancel:async()=>{for(const oe of Q){const ae=W.get(oe.id);ae?.data&&(ae.data=oe.data)}await Promise.all([(async()=>{if(ee.length>0){for(const oe of ee)X.delete(oe);return ir(n(s),Ut,ee)}})(),wt(n(s),rt,Q.map(oe=>({id:oe.id,data:oe.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>W),f(d,()=>V),f(c,()=>X)}}},Ne=async x=>{const M=JSON.parse(x.data),L=M;if(M.tabId&&M.tabId===o){L.type==="exit"&&(O(),await Ha(n(s),rt),await Ha(n(s),Ut));return}if(L.type==="putNote"){const V=L.data.id;if(!V)return;const X=await Gr(n(s),rt,V);if(!X)return;S({id:V,data:X})}else if(L.type==="deleteNote"){const W=L.data.id;if(!W)return;A(W)}else if(L.type==="pinTag"){const W=L.data.tag,V=L.data.pinned,X=n(c)();X.set(W,{name:W,pinned:V}),f(c,()=>X)}else L.type==="clearNotes"?O():L.type==="reloadNotes"||L.type==="emptyBin"?U():L.type==="exit"&&O()};Ae(()=>(U(),i.addEventListener(Ne),()=>{i.removeEventListener(Ne)})),Id({isInitedNotes:m,createNote:ne,updateNote:F,deleteNote:ce,saveNote:z,revertNote:be,pinNote:te,moveNoteToBin:fe,moveNoteToArchive:ie,getGetNotes:H,importNotes:Pe,clearNotes:K,getNoteById:R,getGetMapTags:()=>n(c),pinTag:re,restoreNoteFromBin:q,moveNoteFromArchive:ue,checkNotes:_,checkNotesInBin:k,checkNotesInArchive:p,emptyBin:ze,moveNotesToBin:de,moveNotesToArchive:De,moveNotesFromArchive:Fe,deleteNotes:pe,restoreNotesFromBin:he,deleteTag:me,renameTag:le,addTag:xe,changeTags:$,checkDuplicatesExist:w});var ve=ye(),Ce=E(ve);Ue(Ce,()=>e.children??Je),g(t,ve),ke()}const tl={};function Fd(t){gt(tl,t)}function Ia(){const t=vt(tl);if(!t)throw new Error("No FeedContext found");return t}const nl={};var ot=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(ot||{});function Od(t){gt(nl,t)}function fo(){const t=vt(nl);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function zd(t,e){Se(e,!0);const a=$a(),{getSelectedTags:r}=Vn(),{getSelectedMetaTags:o}=fo(),{getGetNotes:s}=Ot();let i=T(r),l=T(o),u=D(0),c=[],d=D(0),v=T(()=>n(l).has(ot.ARCHIVED)),h=T(()=>n(l).has(ot.BIN));Ye(()=>{const k=s()()||[],p=[],b=Array.from(n(i).values());for(let P=k.length-1;P>=0;P--){if(!k[P]||!k[P].data)continue;const w=k[P];if(!n(v)&&!n(h)&&(w?.data.deletedAt||w?.data.archivedAt)||n(v)&&(w?.data.deletedAt||!w?.data.archivedAt)||n(h)&&!w?.data.deletedAt)continue;const S=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(w.data.link?.title.toLowerCase().includes(S)||w.data.link?.url.toLowerCase().includes(S)||w.data.text.toLowerCase().includes(S)||w.data.tags.map(A=>A.toLowerCase()).join(" ").includes(S)))){if(n(l).has(ot.INBOX)){if(w.data.tags.length>0)continue}else if(n(i).size&&b.some(A=>!w.data.tags.includes(A)))continue;p.push(w)}}f(u,p.length,!0),c=p,f(d,Date.now(),!0)}),Fd({getFiltredNotesLength:()=>n(u),getFiltredNotes:()=>(n(d),c),getUpdatedFiltredNotesTimestamp:()=>n(d)});var m=ye(),_=E(m);Ue(_,()=>e.children??Je),g(t,m),ke()}function Bd(t,e){Se(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Ht(),s=T(a),i="selectedMetaTags";let l=T(()=>n(s).get(i)||""),u=T(()=>new Set(n(l).split(",").map(p=>decodeURIComponent(p)).filter(p=>p!=="")));Od({getSelectedMetaTags:()=>n(u),addMetaTag:p=>{n(u).has(p)||r(i,[...n(u),p].map(b=>encodeURIComponent(b)).join(","))},removeMetaTag:p=>{n(u).has(p)&&n(u).size===1?o(i):n(u).has(p)&&r(i,[...n(u)].filter(b=>b!==p).map(b=>encodeURIComponent(b)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:p=>{p.size===0?o(i):r(i,[...p].map(b=>encodeURIComponent(b)).join(","))}});var _=ye(),k=E(_);Ue(k,()=>e.children??Je),g(t,_),ke()}const al={},ia=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function jd(t){gt(al,t)}function qn(){const t=vt(al);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Hd(t,e){Se(e,!0);let a=ft(ia());jd(a);var r=ye(),o=E(r);Ue(o,()=>e.children??Je),g(t,r),ke()}const rl={};function Ud(t){gt(rl,t)}function cs(){const t=vt(rl);if(!t)throw new Error("No ScrollingContext found");return t}function Wd(t,e){Se(e,!0);let a=D(!1);const r=()=>n(a),o=el(()=>{f(a,!1)},100);Ud({isScrolling:r,enable:()=>{f(a,!0),o()}});var i=ye(),l=E(i);Ue(l,()=>e.children??Je),g(t,i),ke()}const ol={};function Vd(t){gt(ol,t)}function fa(){const t=vt(ol);if(!t)throw new Error("No MobileSizeContext found");return t}function qd(t,e){Se(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=D(ft(a())),o=qn();const s=el(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{f(r,a(),!0)})};Vd({checkMobileSize:()=>n(r)}),Ae(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var u=ye(),c=E(u);Ue(c,()=>e.children??Je),g(t,u),ke()}const sl={};function Kd(t){gt(sl,t)}function Qt(){const t=vt(sl);if(!t)throw new Error("No DialogContext found");return t}function Yd(t,e){Se(e,!0);let a=D(0),r=D(!1),o=D(!0),s=D(!1),i=D(!1);Kd({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{f(a,n(a)+1)},dialogDec:()=>{f(a,n(a)-1)},blockDialog:A=>{f(r,A,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:A=>{f(o,A,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:A=>{f(s,A,!0)},setLeftEnd:A=>{f(i,A,!0)},getCountDialog:()=>n(a)});var w=ye(),S=E(w);Ue(S,()=>e.children??Je),g(t,w),ke()}const il={};function Gd(t){gt(il,t)}function vo(){const t=vt(il);if(!t)throw new Error("No ScrollContainerContext found");return t}function Xd(t,e){Se(e,!0);let a=D(null);Gd({setScrollContainer:l=>{f(a,l,!0)},getScrollContainer:()=>n(a)});var s=ye(),i=E(s);Ue(i,()=>e.children??Je),g(t,s),ke()}const ll={};function Jd(t){gt(ll,t)}function ds(){const t=vt(ll);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Zd(t,e){Se(e,!0);let a=D(200);Jd({setDialogPageHeight:l=>{f(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=ye(),i=E(s);Ue(i,()=>e.children??Je),g(t,s),ke()}const Qd=[ur,Gn,rt,Ut,Pd];function $d(){return new Promise((t,e)=>{const a=indexedDB.open(Td,Ed);kt(a,"upgradeneeded",()=>{const r=a.result;for(const o of Qd)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),kt(a,ua,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),kt(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),kt(a,jn,()=>{e(),console.error(jn,a.error)})})}function eu(t,e){Se(e,!0);let a=D(null);Ae(()=>{$d().then(l=>{f(a,l,!0)}).catch(l=>{console.error("Failed to initialize LocalDB:",l)})}),Sd({getDB:()=>n(a)});var o=ye(),s=E(o);{var i=l=>{var u=ye(),c=E(u);Ue(c,()=>e.children??Je),g(l,u)};B(s,l=>{n(a)&&l(i)})}g(t,o),ke()}function tu(t,e){Se(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Ht(),s=T(a);let i=T(()=>n(s).get(tn)||""),l=T(()=>n(i).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const u=()=>n(l),c=w=>{if(w.length===0){o(tn);return}r(tn,w.map(S=>encodeURIComponent(S)).join(","))},d=w=>{r(tn,[...n(l),w].map(S=>encodeURIComponent(S)).join(","))};Nd({setDialogPages:c,getDialogPages:u,pushDialogPage:d,popDialogPage:()=>{const w=n(l)[n(l).length-1];return n(l).length<=1?(o(tn),w):(r(tn,n(l).slice(0,-1).map(S=>encodeURIComponent(S)).join(",")),w)},replaceDialogPage:w=>{r(tn,[...n(l).slice(0,-1),w].map(S=>encodeURIComponent(S)).join(","))},hasDialogPage:w=>n(l).find(S=>{const[A]=S.split("?");return A===w})!==void 0,clearDialogPages:()=>{o(tn)},createDialogPageHref:w=>{const S=new URLSearchParams(n(s).toString());return S.set(tn,[...u(),w].map(A=>encodeURIComponent(A)).join(",")),`${window.location.pathname}?${S.toString()}`},createHandleClickDialogPage:w=>S=>{S.preventDefault(),d(w)}});var b=ye(),P=E(b);Ue(P,()=>e.children??Je),g(t,b),ke()}function nu(t,e){Se(e,!0);let a=D(ft(new URLSearchParams(window.location.search)));const r=v=>{const h=window.location.pathname;f(a,v,!0),window.history.replaceState(null,"",`${h}${v.size>0?`?${v.toString()}`:""}`)};ld({getSearchParams:()=>n(a),replaceSearchParams:v=>{const h=new URLSearchParams(v);r(h)},setSearchParam:(v,h)=>{const m=new URLSearchParams(n(a));m.set(v,h),r(m)},deleteSearchParam:v=>{const h=new URLSearchParams(n(a));h.delete(v),r(h)},getHref:(v=n(a))=>{const h=new URLSearchParams(v);return`${window.location.pathname}${h.toString().length>0?`?${h.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var c=ye(),d=E(c);Ue(d,()=>e.children??Je),g(t,c),ke()}const cl={};function au(t){gt(cl,t)}function ru(){const t=vt(cl);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function ou(t,e){Se(e,!0);let a=ft({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";Ae(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};return l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l)}}),au({getIsKeyboardVisible:r});var s=ye(),i=E(s);Ue(i,()=>e.children??Je),g(t,s),ke()}function su(t,e){Se(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};xd({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=ye(),s=E(o);Ue(s,()=>e.children??Je),g(t,o),ke()}function iu(t,e){eu(t,{children:(a,r)=>{su(a,{children:(o,s)=>{Hd(o,{children:(i,l)=>{Wd(i,{children:(u,c)=>{qd(u,{children:(d,v)=>{Yd(d,{children:(h,m)=>{Xd(h,{children:(_,k)=>{Zd(_,{children:(p,b)=>{ou(p,{children:(P,w)=>{nu(P,{children:(S,A)=>{tu(S,{children:(G,O)=>{var H=ye(),I=E(H);Ue(I,()=>e.children??Je),g(G,H)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function lu(t,e){iu(t,{children:(a,r)=>{fd(a,{children:(o,s)=>{cd(o,{children:(i,l)=>{gd(i,{children:(u,c)=>{pd(u,{children:(d,v)=>{Bd(d,{children:(h,m)=>{_d(h,{children:(_,k)=>{Cd(_,{children:(p,b)=>{Ad(p,{children:(P,w)=>{Md(P,{children:(S,A)=>{Rd(S,{children:(G,O)=>{zd(G,{children:(H,I)=>{var U=ye(),Z=E(U);Ue(Z,()=>e.children??Je),g(H,U)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const cu=(t=document.body)=>Array.from(t.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(r=>r instanceof HTMLElement?r instanceof HTMLButtonElement||r instanceof HTMLInputElement||r instanceof HTMLSelectElement||r instanceof HTMLTextAreaElement?!r.disabled&&r.offsetParent!==null:r.offsetParent!==null:!1),bt=t=>{const e=cu(),a=e.indexOf(t);if(a===-1)return{next:null,prev:null};const r=e[a+1],o=e[a-1];return{next:r,prev:o}};let Mt=D(""),Pn=D(null),Ua=D(null),An=D(null),Yn=D(ft([])),Or=D(null),Jn=null;function tt(t,e){f(Mt,""),Jn=null,f(Ua,null),f(An,null),setTimeout(()=>{f(Mt,t,!0),e?.onFinish&&f(Ua,e.onFinish,!0),e?.cancel&&(f(An,e.cancel.onCancel,!0),Jn=e.cancel.nextFocusRef)},16)}var du=C('<button type="button" class="c p-137gtcu">undo</button>'),uu=C('<div class="a p-137gtcu"><div class="b p-137gtcu"><span> </span> <!></div></div>'),fu=C("<div><!></div>");function go(t,e){Se(e,!0);let a=Oe(e,"ref",15,null);const r=Xn();Ye(()=>{a(n(Pn))}),Ae(()=>(f(Yn,[...n(Yn),r],!0),()=>{const c=n(Yn).indexOf(r);c!==-1&&f(Yn,n(Yn).filter((d,v)=>v!==c),!0)}));const o=c=>{if(c.key==="Tab"&&c.shiftKey){if(Jn&&n(Mt)){c.preventDefault();const{prev:d}=bt(Jn);d?.focus(),f(Mt,"")}}else if(c.key==="Tab"&&!c.shiftKey)Jn&&n(Mt)&&(c.preventDefault(),f(Mt,""),Jn?.focus());else if(c.key==="Escape"&&n(Mt)){if(c.preventDefault(),Jn){const{prev:d}=bt(Jn);d?.focus()}f(Mt,"")}};Ae(()=>(window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)})),Ye(()=>{n(Mt);const c=n(An)?2e3:800;n(Mt)&&(n(Pn)?.getBoundingClientRect(),n(Pn)?.style.setProperty("opacity","1"));const d=setTimeout(()=>{n(Pn)?.style.removeProperty("opacity")},c),v=setTimeout(()=>{f(Mt,""),n(Ua)&&n(Ua)(),f(Ua,null),f(An,null),n(Pn)?.style.removeProperty("opacity")},c+400);return()=>{clearTimeout(d),clearTimeout(v)}});const s=c=>{c.preventDefault(),n(An)&&(f(Ua,null),n(An)(),f(An,null)),f(Mt,""),n(Pn)?.style.removeProperty("opacity")};Ye(()=>{n(Mt)&&n(An)&&n(Or)&&setTimeout(()=>{n(Or)?.focus()},151)}),Ye(()=>{n(Yn),jt(()=>{f(Mt,""),n(Pn)?.style.removeProperty("opacity")})});var i=fu(),l=y(i);{var u=c=>{var d=uu(),v=y(d),h=y(v),m=y(h),_=N(h,2);{var k=p=>{var b=du();b.__click=s,$e(b,P=>f(Or,P),()=>n(Or)),g(p,b)};B(_,p=>{n(An)&&p(k)})}$e(v,p=>f(Pn,p),()=>n(Pn)),Ie(()=>ut(m,n(Mt))),g(c,d)};B(l,c=>{n(Mt)&&n(Yn)[n(Yn).length-1]===r&&c(u)})}g(t,i),ke()}ht(["click"]);var vu=C('<span class="a p-lxk90o"><!></span>');function mt(t,e){var a=vu(),r=y(a);Ue(r,()=>e.children),g(t,a)}var gu=Hc('<svg class="p-1yv1ibq"><use></use></svg>');function we(t,e){let a=Oe(e,"name",8,"");var r=gu(),o=y(r);Ie(()=>dt(o,"href",`#icon-${a()??""}`)),g(t,r)}var hu=C('<button class="a p-1cnj0y3"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function dl(t,e){Se(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=Ar(),{getDialogPages:s}=Ft(),{checkExistedDialog:i}=Qt();let l=T(()=>s().length>0||i());const u=h=>{if(h.preventDefault(),n(l))return;const m=r();m==="closed"?a():m==="opened"&&o()};var c=hu();c.__click=u;var d=y(c);ge(d,()=>({"--size":"28px"})),we(d.lastChild,{name:"sidebarMenu"});var v=N(d,2);mt(v,{children:(h,m)=>{var _=Ke("Menu");g(h,_)}}),g(t,c),ke()}ht(["click"]);var pu=C('<button class="b p-3z9gmw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),mu=C('<div class="a p-3z9gmw"><input class="p-3z9gmw"/> <!></div>');function jo(t,e){Se(e,!0);let a=Oe(e,"value",15,""),r=Oe(e,"ref",15,null);const o=c=>{c.key==="Escape"&&(c.stopPropagation(),r()&&(e.onEscape?.(),r().blur()))};Ae(()=>(r()?.addEventListener("keydown",o),()=>{r()?.removeEventListener("keydown",o)}));var s=mu(),i=y(s);i.__input=c=>e.onChange?.(c.target?.value||""),$e(i,c=>r(c),()=>r());var l=N(i,2);{var u=c=>{var d=pu();d.__click=()=>{a(""),e.onChange?.("")};var v=y(d);ge(v,()=>({"--size":"20px"})),we(v.lastChild,{name:"close"});var h=N(v,2);mt(h,{children:(m,_)=>{var k=Ke("Clear");g(m,k)}}),g(c,d)};B(l,c=>{a()&&c(u)})}Ie(()=>dt(i,"placeholder",e.placeholder)),Zt("focus",i,function(...c){e.onFocus?.apply(this,c)}),Zt("blur",i,function(...c){e.onBlur?.apply(this,c)}),Fi(i,a),g(t,s),ke()}ht(["input","click"]);function us(t,e){Se(e,!0);let a=Oe(e,"notificationRef",11,null);Ae(()=>{const r=o=>{o.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==o.target&&!e.dialogInner.contains(o.target)&&a()!==o.target&&!a()?.contains(o.target)&&e.onClose()};return document.addEventListener("mousedown",r,{capture:!0}),()=>{document.removeEventListener("mousedown",r,{capture:!0})}}),ke()}function _u(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const xn=_u(),wu=()=>{const t=navigator.userAgent;return/android/i.test(t)},Hn=wu(),sp=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},ip=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},yr=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let Ba=D(ft([]));var yu=C("<dialog><div><!></div></dialog> <!>",1);function Dr(t,e){Se(e,!0);const a=Xn(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;Ae(()=>(f(Ba,[...n(Ba),a],!0),()=>{const w=n(Ba).indexOf(a);w!==-1&&f(Ba,n(Ba).filter((S,A)=>A!==w),!0)}));let o=Oe(e,"onClosed",3,()=>{}),s=Oe(e,"blocked",3,!1),i=D(null),l=D(null),u=D(!1),{dialogInc:c,dialogDec:d}=Qt();const v=()=>{const w=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(w),o()()},{once:!0}),f(u,!1)};Ye(()=>{e.startClose&&v()}),Ae(()=>{n(i)?.showModal(),n(i)?.getClientRects(),f(u,!0);const w=S=>{S?.preventDefault(),s()||v()};return n(i)?.addEventListener("cancel",w),n(i)?.addEventListener("close",w),()=>{n(i)?.removeEventListener("cancel",w),n(i)?.removeEventListener("close",w)}}),Ae(()=>(c(),()=>{d()})),Ae(()=>{const w=S=>{S.key==="Escape"&&s()&&S.preventDefault()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}});function h(){setTimeout(()=>{if(xn||!n(i)||!n(l))return;const w=window.visualViewport;if(w)if(w.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}Ae(()=>(h(),window.visualViewport?.addEventListener("resize",h),window.visualViewport?.addEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{window.visualViewport?.removeEventListener("resize",h),window.visualViewport?.removeEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h)}));var m=yu(),_=E(m),k=y(_),p=y(k);Ue(p,()=>e.children),$e(k,w=>f(l,w),()=>n(l)),$e(_,w=>f(i,w),()=>n(i));var b=N(_,2);{var P=w=>{us(w,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:v})};B(b,w=>{n(i)&&n(l)&&!s()&&w(P)})}Ie(()=>{et(_,1,nt({a:!0,b:n(u),c:n(Ba).length>1}),"p-1x14yml"),et(k,1,nt({d:!0,b:n(u)}),"p-1x14yml")}),g(t,m),ke()}var bu=C("<div><!></div>");function Cu(t,e){Se(e,!0);let a=D(!1),r=D(null);const o=()=>{const d=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),f(a,!1)},s=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},i=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},l=d=>{d.key==="Escape"&&o()};Ae(()=>{n(r)?.getClientRects(),f(a,!0);const d=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),Ye(()=>{e.startClose&&o()});var u=bu(),c=y(u);Ue(c,()=>e.children),$e(u,d=>f(r,d),()=>n(r)),Ie(()=>et(u,1,nt({a:!0,b:n(a)}),"p-1unpq18")),g(t,u),ke()}var Su=C("<ul><!></ul>"),ku=C("<ul><!></ul>");function Mr(t,e){Se(e,!0);let a=Oe(e,"ref",15);var r=ye(),o=E(r);{var s=l=>{Dr(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(u,c)=>{var d=Su(),v=y(d);Ue(v,()=>e.children),$e(d,h=>a(h),()=>a()),Ie(()=>et(d,1,nt({a:!0,b:e.isMobile}),"p-6pddb9")),g(u,d)},$$slots:{default:!0}})},i=l=>{Cu(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(u,c)=>{var d=ku(),v=y(d);Ue(v,()=>e.children),$e(d,h=>a(h),()=>a()),Ie(()=>et(d,1,nt({a:!0,b:e.isMobile}),"p-6pddb9")),g(u,d)},$$slots:{default:!0}})};B(o,l=>{e.isMobile?l(s):l(i,!1)})}g(t,r),ke()}var xu=C("<button><!></button>"),Tu=C("<a><!></a>");function We(t,e){let a=Oe(e,"dangerous",3,!1),r=Oe(e,"type",3,"button"),o=Oe(e,"href",3,"");var s=ye(),i=E(s);{var l=c=>{var d=xu();d.__click=function(...h){e.onClick?.apply(this,h)},d.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=y(d);Ue(v,()=>e.children??Je),Ie(()=>et(d,1,nt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-1xchqhv")),g(c,d)},u=c=>{var d=Tu();d.__click=function(...h){e.onClick?.apply(this,h)},d.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=y(d);Ue(v,()=>e.children??Je),Ie(()=>{dt(d,"href",o()),et(d,1,nt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-1xchqhv")}),g(c,d)};B(i,c=>{r()==="button"?c(l):c(u,!1)})}g(t,s)}ht(["click","keydown"]);var Eu=C('<li class="p-108u1na"><!></li> <li class="p-108u1na"><!></li> <li class="p-108u1na"><!></li> <li class="p-108u1na"><!></li> <li class="p-108u1na"><!></li>',1),Pu=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Nu=C('<div class="a p-108u1na"><button><!> <!></button> <!></div>');function Au(t,e){Se(e,!0);let a=D(!1),r=D(!1);const{getFeedOrder:o,setFeedOrder:s}=Hi();let i=xn||Hn,l=T(o);const u=()=>{n(a)||f(a,!0)},c=b=>{f(r,!0),s(b)},d=()=>{f(a,!1),f(r,!1)};Ae(()=>{const b=P=>{P.key==="Escape"&&f(r,!0)};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)});var v=Nu(),h=y(v);h.__click=u,et(h,1,nt({b:!0,c:!0}),"p-108u1na");var m=y(h);we(m,{name:"filter"});var _=N(m,2);mt(_,{children:(b,P)=>{var w=Ke("show feed order menu");g(b,w)}});var k=N(h,2);{var p=b=>{var P=Pu(),w=E(P);ge(w,()=>({"--right":"0px","--top":"44px"})),Mr(w.lastChild,{get startClose(){return n(r)},onClosed:d,get isMobile(){return i},children:(S,A)=>{var G=Eu(),O=E(G),H=y(O);{let K=T(()=>n(l)==="newest");We(H,{get active(){return n(K)},get dialogMode(){return i},onClick:()=>c("newest"),children:(R,te)=>{var fe=Ke("Newest");g(R,fe)},$$slots:{default:!0}})}var I=N(O,2),U=y(I);{let K=T(()=>n(l)==="oldest");We(U,{get active(){return n(K)},get dialogMode(){return i},onClick:()=>c("oldest"),children:(R,te)=>{var fe=Ke("Oldest");g(R,fe)},$$slots:{default:!0}})}var Z=N(I,2),ne=y(Z);{let K=T(()=>n(l)==="AtoZ");We(ne,{get active(){return n(K)},get dialogMode(){return i},onClick:()=>c("AtoZ"),children:(R,te)=>{var fe=Ke("A to Z");g(R,fe)},$$slots:{default:!0}})}var F=N(Z,2),z=y(F);{let K=T(()=>n(l)==="ZtoA");We(z,{get active(){return n(K)},get dialogMode(){return i},onClick:()=>c("ZtoA"),children:(R,te)=>{var fe=Ke("Z to A");g(R,fe)},$$slots:{default:!0}})}var be=N(F,2),ce=y(be);{let K=T(()=>n(l)==="updatedNewest");We(ce,{get active(){return n(K)},get dialogMode(){return i},onClick:()=>c("updatedNewest"),children:(R,te)=>{var fe=Ke("Updated");g(R,fe)},$$slots:{default:!0}})}g(S,G)},$$slots:{default:!0}}),g(b,P)};B(k,b=>{n(a)&&b(p)})}g(t,v),ke()}ht(["click"]);var Du=C('<div><!> <div class="a p-y3zt6o"></div></div>');function La(t,e){Se(e,!0);let a=D(!1);Ae(()=>{const s=setTimeout(()=>{f(a,!0)},200);return()=>{clearTimeout(s)}});var r=Du(),o=y(r);Ue(o,()=>e.children??Je),Ie(()=>et(r,1,nt({b:!0,c:n(a)}),"p-y3zt6o")),g(t,r),ke()}var Mu=C("<a><!></a>"),Iu=C("<button><!></button>");function Lt(t,e){let a=Oe(e,"type",3,"standard"),r=Oe(e,"typeButton",3,"button"),o=Oe(e,"element",3,"button"),s=Oe(e,"href",3,""),i=Oe(e,"fullWidth",3,!1),l=Oe(e,"withoutMinWidth",3,!1);var u=ye(),c=E(u);{var d=h=>{var m=Mu();m.__click=function(...k){e.onClick?.apply(this,k)};var _=y(m);Ue(_,()=>e.children??Je),Ie(()=>{dt(m,"target",e.target),dt(m,"rel",e.rel),dt(m,"href",s()),et(m,1,nt({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l(),g:e.size==="small"}),"p-1iz5xf9")}),g(h,m)},v=h=>{var m=Iu();m.__click=function(...k){e.onClick?.apply(this,k)};var _=y(m);Ue(_,()=>e.children??Je),Ie(()=>{dt(m,"type",r()),et(m,1,nt({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l(),g:e.size==="small"}),"p-1iz5xf9")}),g(h,m)};B(c,h=>{o()==="a"?h(d):h(v,!1)})}g(t,u)}ht(["click"]);let Ho=D(!1),zr=D(!1),Uo=D(""),Wo=D("Cancel"),Vo=D("Confirm"),qo,Wr=D(void 0),Ko,Yo=D("dangerous");function Ta(t){f(Ho,!0),f(Uo,t.title,!0),t.buttonCancelTitle&&f(Wo,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&f(Vo,t.buttonConfirmTitle,!0),qo=t.onConfirm,f(Wr,t.onCancel,!0),Ko=t.onClosed,t.type?f(Yo,t.type,!0):f(Yo,"dangerous")}var Lu=C('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),Ru=C('<div class="a p-1jlul5o"><!></div>');function Fu(t,e){Se(e,!0);let a=D(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{f(a,!0)},250)};Ae(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(Wr)?.(),f(zr,!0)},l=async()=>{s(),await qo?.(),f(zr,!0),o=!0},u=()=>{clearTimeout(r),f(a,!1),f(Ho,!1),f(zr,!1),f(Uo,""),f(Wo,"Cancel"),f(Vo,"Confirm"),f(Wr,void 0),qo=void 0,Ko&&Ko(o),o=!1};var c=ye(),d=E(c);{var v=h=>{Dr(h,{get blocked(){return n(a)},get startClose(){return n(zr)},onClosed:u,children:(m,_)=>{var k=Ru(),p=y(k);{var b=w=>{La(w,{})},P=w=>{var S=Lu(),A=E(S),G=y(A),O=N(A,2),H=y(O);{var I=Z=>{Lt(Z,{size:"small",onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(ne,F)=>{var z=Ke();Ie(()=>ut(z,n(Wo))),g(ne,z)},$$slots:{default:!0}})};B(H,Z=>{n(Wr)&&Z(I)})}var U=N(H,2);Lt(U,{size:"small",onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(Yo)},children:(Z,ne)=>{var F=Ke();Ie(()=>ut(F,n(Vo))),g(Z,F)},$$slots:{default:!0}}),Ie(()=>ut(G,n(Uo))),g(w,S)};B(p,w=>{n(a)?w(b):w(P,!1)})}g(m,k)},$$slots:{default:!0}})};B(d,h=>{n(Ho)&&h(v)})}g(t,c),ke()}const br=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,u=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!u){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var Ou=C('<div class="a p-6qmscy"><a class="b p-6qmscy"><span class="c p-6qmscy"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-6qmscy"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function zu(t,e){Se(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=Ft(),{checkExistedDialog:i}=Qt(),l=()=>{o.length===0&&!i()&&s(Ee.NewNote)};Ae(()=>br({key:"n",action:l})),ss();var u=Ou(),c=y(u),d=T(()=>r(Ee.NewNote));c.__click=function(...p){n(d)?.apply(this,p)};var v=y(c),h=y(v);ge(h,()=>({"--size":"28px","--color":"#b0b0b0"})),we(h.lastChild,{name:"add"});var m=N(h,2);mt(m,{children:(p,b)=>{var P=Ke("Add note");g(p,P)}});var _=N(v,2),k=y(_);ge(k,()=>({"--size":"16px","--color":"#b0b0b0"})),we(k.lastChild,{name:"plus"}),Ie(p=>dt(c,"href",p),[()=>a(Ee.NewNote)]),g(t,u),ke()}ht(["click"]);var Bu=C("<button><!></button>");function va(t,e){Se(e,!0);let a=Oe(e,"type",3,"button"),r=!1,o=D(null);Ye(()=>{e.onRef&&e.onRef(n(o))});const s=d=>{(d.key==="Enter"||d.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=d=>{(d.pointerType==="mouse"&&d.button===0||d.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(d)};var u=Bu();u.__keydown=s,u.__click=i,u.__pointerdown=l,u.__touchstart=function(...d){e.onTouchStart?.apply(this,d)};var c=y(u);Ue(c,()=>e.children??Je),$e(u,d=>f(o,d),()=>n(o)),Ie(()=>{dt(u,"type",a()),u.disabled=e.disabled,et(u,1,nt({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-19nhjik")}),g(t,u),ke()}ht(["keydown","click","pointerdown","touchstart"]);var ju=C('<div class="b p-1pt17hy"> </div>'),Hu=C('<div class="a p-1pt17hy"><input/> <!></div>');function Cr(t,e){Se(e,!0);let a=Oe(e,"value",15,""),r=Oe(e,"error",3,""),o=Oe(e,"ref",15,null);var s=Hu(),i=y(s);i.__input=function(...d){e.onInput?.apply(this,d)};let l;$e(i,d=>o(d),()=>o());var u=N(i,2);{var c=d=>{var v=ju(),h=y(v);Ie(()=>ut(h,r())),g(d,v)};B(u,d=>{r()&&d(c)})}Ie(()=>{dt(i,"placeholder",e.placeholder),l=et(i,1,"p-1pt17hy",null,l,{error:!!r()})}),Zt("blur",i,function(...d){e.onBlur?.apply(this,d)}),Zt("focus",i,function(...d){e.onFocus?.apply(this,d)}),Fi(i,a),g(t,s),ke()}ht(["input"]);var Uu=C('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Wu=C('<form class="a p-y9ylet"><!></form>');function Vu(t,e){Se(e,!0);const{renameTag:a}=Ot(),{getSelectedTags:r,setSelectedTags:o}=Vn(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=da(),{getFiltredNotes:u}=Ia();let c=D(!1),d=D(!1),v,h=!1,m=D(null),_=D(ft(e.tag)),k=e.nextFocusRef;Ae(()=>(n(m)&&n(m).focus(),()=>{v&&clearTimeout(v)}));const p=()=>{v=setTimeout(()=>{f(d,!0)},250)},b=()=>{f(c,!0)},P=async()=>{if(n(_).trim()===e.tag){b();return}if(n(_).trim()!=="")try{p();const A=r(),G=[...A].map(Z=>Z===e.tag?n(_).trim():Z),O=new Set(s()),H=u(),I=O.size?[...O]:H.map(Z=>Z.id),{cancel:U}=await a(e.tag,n(_).trim(),I);l(),o(new Set(G)),tt("Tag renamed",{cancel:{nextFocusRef:k,onCancel:async()=>{await U(),o(A),i(O),setTimeout(()=>{const{prev:Z}=bt(k);Z?.focus()},16)}}}),h=!0}finally{f(c,!0)}},w=()=>{e.onClosed?.(h)},S=A=>{A.preventDefault(),P()};Dr(t,{get blocked(){return n(d)},get startClose(){return n(c)},onClosed:w,children:(A,G)=>{var O=Wu(),H=y(O);{var I=Z=>{La(Z,{})},U=Z=>{var ne=Uu(),F=E(ne),z=y(F),be=N(F,2);Cr(be,{placeholder:"Enter new tag name",get ref(){return n(m)},set ref(te){f(m,te,!0)},get value(){return n(_)},set value(te){f(_,te,!0)}});var ce=N(be,2),K=y(ce);Lt(K,{size:"small",onClick:b,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(te,fe)=>{var ie=Ke("Cancel");g(te,ie)},$$slots:{default:!0}});var R=N(K,2);Lt(R,{size:"small",onClick:P,fullWidth:!0,withoutMinWidth:!0,children:(te,fe)=>{var ie=Ke("OK");g(te,ie)},$$slots:{default:!0}}),Ie(()=>ut(z,`Rename "${e.tag??""}" for selected notes`)),g(Z,ne)};B(H,Z=>{n(d)?Z(I):Z(U,!1)})}Zt("submit",O,S),g(A,O)},$$slots:{default:!0}}),ke()}let ta=D(!1),ga=D(!1),Gt=D(""),pa=D(0),fr=D(0),vr=D(0),Vr,Xr=()=>({bottom:0,right:0,height:0}),$t=D(null),Go=D(null);function qu(t){if(n(ta)){f(ga,!0),n(Gt)!==t.tag&&(Vr=()=>{const a=t.getRect();f(ta,!0),f(Gt,t.tag,!0),f(pa,a.bottom,!0),f(fr,a.right,!0),f(vr,a.height,!0),Xr=t.getRect,f($t,t.focusRef,!0)});return}const e=t.getRect();f(ta,!0),f(Gt,t.tag,!0),f(pa,e.bottom,!0),f(fr,e.right,!0),f(vr,e.height,!0),Xr=t.getRect,f($t,t.focusRef,!0)}const Ku=()=>n(ta),Yu=()=>n(Go);var Gu=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),Xu=C('<li class="p-16hbyw2"><!></li>'),Ju=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Zu=C('<li class="p-16hbyw2"><!></li>'),Qu=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),$u=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),ef=C('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),tf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),nf=C("<!> <!>",1);function af(t,e){Se(e,!0);const{getScrollContainer:a}=vo(),{pinTag:r,getGetMapTags:o,deleteTag:s}=Ot(),{checkMobileSize:i}=fa(),{getSelectedTags:l,removeTag:u,setSelectedTags:c}=Vn(),{getSelectedNotes:d,setSelectedNotes:v,clearNotes:h}=da(),{getFiltredNotes:m}=Ia();let _=D(!1);Ye(()=>{n(ta),jt(()=>{f(_,o()().get(n(Gt))?.pinned||!1,!0)})});let k=D(!1);const p=()=>{r(n(Gt),!0),f(ga,!0);let K=n($t),R=bt(K)?.next;tt("Tag pinned",{cancel:{nextFocusRef:R,onCancel:async()=>{r(n(Gt),!1),setTimeout(()=>{const{prev:te}=bt(R);te?.focus()},16)}}})},b=()=>{r(n(Gt),!1),f(ga,!0);let K=n($t),R=bt(K)?.next;tt("Tag unpinned",{cancel:{nextFocusRef:R,onCancel:async()=>{r(n(Gt),!0),setTimeout(()=>{const{prev:te}=bt(R);te?.focus()},16)}}})},P=()=>{f(ta,!1),f(ga,!1),f(pa,0),f(fr,0),f(vr,0),Xr=()=>({bottom:0,right:0,height:0}),f($t,null),Vr&&setTimeout(()=>{Vr?.(),Vr=void 0})};let w=T(()=>window.innerHeight-n(pa)<100?n(pa)-n(vr)-98+"px":n(pa)+5+"px"),S=T(a);const A=K=>{K.key==="Tab"&&K.shiftKey&&(K.preventDefault(),n($t)?.focus())},G=K=>{K.key==="Tab"&&!K.shiftKey&&n($t)&&(K.preventDefault(),bt(n($t))?.next?.focus())};Ae(()=>{const K=R=>{R.key==="Escape"&&n(ta)&&n($t)?.focus()};return window.addEventListener("keydown",K),()=>{window.removeEventListener("keydown",K)}});const O=()=>{f(ga,!0);let K=n($t),R=bt(K)?.next;Ta({title:`Are you sure to delete "${n(Gt)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const te=Array.from(n(U)),fe=new Set(d()),ie=m(),de=fe.size?[...fe]:ie.map(Fe=>Fe.id);n(U).has(n(Gt))&&(fe.size===0||ie.length===fe.size)&&u(n(Gt)),h();const{cancel:De}=await s(n(Gt),de);tt("Tag deleted",{cancel:{nextFocusRef:R,onCancel:async()=>{await De(),c(new Set(te)),v(new Set(fe)),setTimeout(()=>{const{prev:Fe}=bt(R);Fe?.focus()},16)}}})},onCancel:async()=>{},onClosed:te=>{setTimeout(()=>{te||K?.focus()},16)}})};let H=()=>{};const I=()=>{f(ga,!0),f(k,!0);let K=n($t);H=()=>{f(k,!1),setTimeout(()=>{K?.focus()},16)}};Ye(()=>{const K=()=>{const R=Xr();f(pa,R.bottom,!0),f(fr,R.right,!0),f(vr,R.height,!0)};return n(S)?.addEventListener("scroll",K),window.addEventListener("resize",K),()=>{n(S)?.removeEventListener("scroll",K),window.removeEventListener("resize",K)}});let U=T(l),Z=T(i);var ne=nf(),F=E(ne);{var z=K=>{var R=tf(),te=E(R);ge(te,()=>({"--left":n(fr)-36+"px","--top":n(w),"--transform-origin":"top left"})),Mr(te.lastChild,{get startClose(){return n(ga)},onClosed:P,get isMobile(){return n(Z)},get ref(){return n(Go)},set ref(fe){f(Go,fe,!0)},children:(fe,ie)=>{var de=ef(),De=E(de);{var Fe=Pe=>{var ze=Xu(),me=y(ze);We(me,{onClick:p,onKeydown:A,get dialogMode(){return n(Z)},children:(le,xe)=>{var $=Gu(),Ne=E($);ge(Ne,()=>({"--size":"20px"})),we(Ne.lastChild,{name:"pin"}),g(le,$)},$$slots:{default:!0}}),g(Pe,ze)},he=Pe=>{var ze=Zu(),me=y(ze);We(me,{onClick:b,onKeydown:A,get dialogMode(){return n(Z)},children:(le,xe)=>{var $=Ju(),Ne=E($);ge(Ne,()=>({"--size":"20px"})),we(Ne.lastChild,{name:"pin-cancel"}),g(le,$)},$$slots:{default:!0}}),g(Pe,ze)};B(De,Pe=>{n(_)?Pe(he,!1):Pe(Fe)})}var q=N(De,2),ue=y(q);We(ue,{onClick:I,get dialogMode(){return n(Z)},children:(Pe,ze)=>{var me=Qu(),le=E(me);ge(le,()=>({"--size":"20px","--scale":"0.9"})),we(le.lastChild,{name:"pen"}),g(Pe,me)},$$slots:{default:!0}});var re=N(q,2),pe=y(re);We(pe,{onClick:O,onKeydown:G,get dialogMode(){return n(Z)},children:(Pe,ze)=>{var me=$u(),le=E(me);ge(le,()=>({"--size":"20px"})),we(le.lastChild,{name:"bin"}),g(Pe,me)},$$slots:{default:!0}}),g(fe,de)},$$slots:{default:!0}}),g(K,R)};B(F,K=>{n(ta)&&K(z)})}var be=N(F,2);{var ce=K=>{{let R=T(()=>bt(n($t))?.next||null);Vu(K,{get tag(){return n(Gt)},get nextFocusRef(){return n(R)},onClosed:te=>{H(te)}})}};B(be,K=>{n(k)&&K(ce)})}g(t,ne),ke()}var rf=C('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),of=C('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),sf=C("<!> <span> </span> <!>",1),lf=C('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function gr(t,e){Se(e,!0);let{getGetMapTags:a}=Ot(),r=D(null),o=T(Ku);const s=()=>{if(n(r)){const v=n(r).getBoundingClientRect();return{bottom:v.bottom,right:v.right,height:v.height}}return{bottom:0,right:0,height:0}},i=v=>{v.stopPropagation(),v.preventDefault(),qu({tag:e.tag,getRect:s,focusRef:n(r)})},l=v=>{v.key==="Tab"&&!v.shiftKey&&n(o)&&(v.preventDefault(),Yu()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let u=T(()=>a()().get(e.tag)?.pinned||!1);var c=lf(),d=y(c);ge(d,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),va(d.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(v,h)=>{var m=sf(),_=E(m);{var k=S=>{var A=rf(),G=y(A);ge(G,()=>({"--size":"18px"})),we(G.lastChild,{name:"pin"}),g(S,A)};B(_,S=>{n(u)&&S(k)})}var p=N(_,2),b=y(p),P=N(p,2);{var w=S=>{var A=of();A.__click=i,A.__keydown=l;var G=y(A),O=y(G);ge(O,()=>({"--size":"16px"})),we(O.lastChild,{name:"menu"});var H=N(O,2);mt(H,{children:(I,U)=>{var Z=Ke("Tag options");g(I,Z)}}),$e(A,I=>f(r,I),()=>n(r)),Ie(()=>et(A,1,nt({c:!0,d:e.type==="selected"}),"p-9jjlcl")),g(S,A)};B(P,S=>{e.hideMenu||S(w)})}Ie(()=>ut(b,e.tag)),g(v,m)},$$slots:{default:!0}}),g(t,c),ke()}ht(["click","keydown"]);var cf=C('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function Ms(t,e){Se(e,!0);let a=Oe(e,"mobile",3,!1);const{getGetMapTags:r}=Ot();let s=T(()=>{const m=r()();return[...e.tags].sort((_,k)=>m.get(_)?.pinned?-1:m.get(k)?.pinned?1:_.localeCompare(k))}),i=T(()=>n(s).filter(m=>r()().get(m)?.pinned)),l=T(()=>n(s).filter(m=>!r()().get(m)?.pinned));var u=cf(),c=y(u),d=y(c);zn(d,16,()=>n(i),m=>m,(m,_)=>{gr(m,{get hideMenu(){return e.hideTagMenu},get tag(){return _},onClick:()=>{e.handleTagClick(_)}})});var v=N(d,2);zn(v,17,()=>e.metaTags,m=>"meta"+m,(m,_)=>{gr(m,{hideMenu:!0,get tag(){return n(_)},onClick:()=>{e.handleMetaTagClick(n(_))}})});var h=N(v,2);zn(h,16,()=>n(l),m=>m,(m,_)=>{gr(m,{get hideMenu(){return e.hideTagMenu},get tag(){return _},onClick:()=>{e.handleTagClick(_)}})}),Ie(()=>et(c,1,nt({b:!0,c:a()}),"p-lawyrs")),g(t,u),ke()}var df=C('<div class="b c p-32813r"><div class="d p-32813r"><button class="e p-32813r"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),uf=C('<div class="a p-32813r"><!></div>');function Is(t,e){Se(e,!0);let a=D(null);const r=u=>{f(a,u,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};Ye(()=>{n(a)&&n(a).focus()});var s=uf(),i=y(s);{var l=u=>{var c=df(),d=y(c),v=y(d);v.__click=o;var h=y(v);ge(h,()=>({"--size":"20px"})),we(h.lastChild,{name:"close"});var m=N(h,2);mt(m,{children:(p,b)=>{var P=Ke("Clear");g(p,P)}});var _=N(d,2);zn(_,19,()=>e.metaTags,p=>"meta_"+p,(p,b,P)=>{{let w=T(()=>n(P)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);gr(p,{hideMenu:!0,type:"selected",get tag(){return n(b)},onClick:()=>{e.handleMetaTagClick(n(b))},get onRef(){return n(w)}})}});var k=N(_,2);zn(k,18,()=>e.selectedTags,p=>p,(p,b,P)=>{{let w=T(()=>n(P)===e.selectedTags.size-1?r:void 0);gr(p,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return b},onClick:()=>{e.handleSelectedTagClick(b)},get onRef(){return n(w)}})}}),g(u,c)};B(i,u=>{e.selectedTags.size+e.metaTags.size>0&&u(l)})}g(t,s),ke()}ht(["click"]);const Xo=(t,e,a,r)=>{if(t.has(ot.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},Bn=200,ff=t=>t<.5?2*t*t:-1+(4-2*t)*t,ul=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,ff(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},vf=t=>{const{getIsKeyboardVisible:a}=ru();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=v=>({x:v.clientX,y:v.clientY,time:performance.now()}),u=v=>{r=[l(v.touches[0])],o=!0},c=v=>{if(!o||s)return;r.push(l(v.touches[0]));const h=performance.now()-150;r=r.filter(O=>O.time>=h);const m=r.at(-1),_=r[0];if(!m||!_)return;const k=_.x,p=_.y,b=m.x,P=m.y,w=b-k,S=P-p,A=Math.abs(w)>Math.abs(S),G=Math.abs(w)>3;A&&G&&!a()&&(s=!0,v.preventDefault(),t([...r]),i())},d=()=>{i()};Ae(()=>(document.addEventListener("touchstart",u,{passive:!0}),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchend",d,{passive:!0}),document.addEventListener("touchcancel",d,{passive:!0}),()=>{document.removeEventListener("touchstart",u),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",d),document.removeEventListener("touchcancel",d)}))},Ls=5,Rs=.6,la=.3;function fl(t,e){Se(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,u=0,c=0,d=null,v=null;const h=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,u=0,c=0,d!==null&&(cancelAnimationFrame(d),d=null),v&&(clearTimeout(v),v=null)},m=()=>{e.onCancel(),h()},_=()=>{v&&clearTimeout(v),v=setTimeout(m,5e3)};vf(async G=>{if(!o)try{const O=G.at(-1);if(!O)throw new Error("No points available for swipe initialization");const H=await e.onInit();if(!H)return;s=H.initialPosition,i=H.currentPosition,l=H.minPosition,u=H.maxPosition,c=H.width,r=O.x,a=G,o=!0,_()}catch(O){console.error("Error during swipe initialization:",O),h()}});const p=G=>Math.max(l,Math.min(u,G)),b=()=>{if(d=null,!o){h();return}const G=a.at(-1),O=a[0];if(!G||!O)return;let H=G.x-r;r=G.x;const I=p(i+H);I!==i&&(i=I,e.onUpdate({initialPosition:s,newPosition:I,width:c,minPosition:l,maxPosition:u}))},P=G=>{if(!o){h();return}a.push({x:G.touches[0].clientX,y:G.touches[0].clientY,time:performance.now()});const O=performance.now()-150;a=a.filter(Z=>Z.time>=O),d===null&&(d=requestAnimationFrame(b)),_();const H=G.touches[0].clientX-a[0].x,I=G.touches[0].clientY-a[0].y;Math.abs(H)>Math.abs(I)&&G.cancelable&&G.preventDefault()},w=G=>{const O=Math.abs(G);if(O>=Rs)return Ls;if(O>=la){const H=(O-la)/(Rs-la);return e.baseActionThreshold-H*(e.baseActionThreshold-Ls)}else return e.baseActionThreshold},S=G=>{if(!o){h();return}let O=0;a.push({x:G.changedTouches[0].clientX,y:G.changedTouches[0].clientY,time:performance.now()}),b(),d!==null&&(cancelAnimationFrame(d),d=null);const H=a[0],I=a[a.length-1],U=I.x-H.x,Z=I.time-H.time;Z>0&&(O=U/Z);const ne=w(O);e.onFinish({swipeVelocity:O,currentPosition:i,minPosition:l,maxPosition:u,initialPosition:s,width:c,actionThreshold:ne}),h()},A=()=>{m()};Ae(()=>(document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("touchend",S,{passive:!0}),document.addEventListener("touchcancel",A,{passive:!0}),()=>{document.removeEventListener("touchmove",P),document.removeEventListener("touchend",S),document.removeEventListener("touchcancel",A),d!==null&&cancelAnimationFrame(d),v&&clearTimeout(v)})),ke()}function gf(t,e){Se(e,!0);const a=qn();let r=Oe(e,"animationRef",7),o=Oe(e,"dialog",7);fl(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const c=-e.dialogWidth*.7,d=0;let v=e.sidebarState==="closed"?c:d,h=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let k=()=>1;if(r().current){r().current.pause();let p=Number(r().current.currentTime);yr()&&(p=Number(p)+50,r().current.currentTime=Math.min(Math.max(Bn-1,p),p));const b=r().current.effect?.getComputedTiming().progress||0;k=()=>b,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(p=>requestAnimationFrame(p)),h=Math.abs(1-k())}h=e.sidebarState==="closed"?h:1-h,o().style.setProperty("--backdrop-bg",`${h*.1}`),o()&&!o().open&&(o().showModal(),yr()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=h*-25;const m=h*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let _=e.sidebarState==="closed"?c:d;return e.sidebarState==="opened"||e.sidebarState==="closed"||(_=m),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:v,currentPosition:_,minPosition:c,maxPosition:d,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:c,width:d})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const v=1-Math.abs(c/d)/7*10;o().style.transform=`translate3d(${c}px, 0, 0)`,a.swipingRatio=v*-25,o().style.setProperty("--backdrop-bg",`${v*.1}`)},onFinish:({swipeVelocity:c,currentPosition:d,initialPosition:v,width:h,actionThreshold:m})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let _="close";const k=Math.abs(d-v)/h*100/7*10;if(k===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(k===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?_=Math.abs(k)>m||c>la?"open":"close":e.sidebarState==="swipingClose"&&(_=Math.abs(k)>m&&c<=la||c<-la?"close":"open");let p=ul(Math.abs(k)/100);e.sidebarState==="swipingClose"&&_==="close"&&(p=1-p);const b=(_==="open"?1-p:p)*Bn;a.duration=b/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${_==="open"?.1:0}`),_==="open"?e.onOpen():_==="close"&&e.onClose()}}),ke()}var hf=C("<dialog><div><!> <!></div></dialog> <!> <!>",1);function pf(t,e){Se(e,!0);const{getSidebarState:a,setSidebarState:r}=Ar();let o=D(0);Ae(()=>{const z=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",z),z(),()=>{window.removeEventListener("resize",z)}});const s=qn(),{isScrolling:i}=cs();let l=D(null),u=D(null),c={},d=T(a);const v=()=>{e.blocked||r("closing")},h=z=>{r(z==="open"?"swipingOpen":"swipingClose")},m=()=>{r("opened")},_=()=>{r("preOpening")},k=()=>{n(l)?.close(),r("closed")},p=z=>{z.preventDefault(),v()};Ae(()=>(n(l)?.addEventListener("close",k),n(l)?.addEventListener("cancel",p),()=>{n(l)?.removeEventListener("close",k),n(l)?.removeEventListener("cancel",p)}));const b=T(i);let P=T(()=>s.working);const w=z=>{z?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ia().duration};Ye(()=>{n(d)==="opening"?jt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const z=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const be=n(l)?.animate([{transform:z},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||Bn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});c.current=be,be&&(be.onfinish=()=>{m(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ia().duration,be.cancel(),c.current=void 0})})}):n(d)==="closing"&&jt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const z=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const be=n(l)?.animate([{transform:z},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||Bn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});c.current=be,be&&(be.onfinish=()=>{k(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ia().duration,be.cancel(),c.current=void 0})})})}),Ye(()=>{n(d)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),yr()&&n(l)?.getBoundingClientRect()),r("opening"))}),Ae(()=>{n(d)==="opened"&&r("preOpening")});var S=hf(),A=E(S),G=y(A),O=y(G);Ue(O,()=>e.children);var H=N(O,2);{var I=z=>{go(z,{})};B(H,z=>{n(d)==="opened"&&z(I)})}$e(G,z=>f(u,z),()=>n(u)),$e(A,z=>f(l,z),()=>n(l));var U=N(A,2);{var Z=z=>{us(z,{get dialog(){return n(l)},get dialogInner(){return n(u)},onClose:v})};B(U,z=>{n(u)&&n(d)==="opened"&&!e.blocked&&z(Z)})}var ne=N(U,2);{var F=z=>{gf(z,{onCancelSwipe:w,onOpen:_,onClose:v,onSwipe:h,get dialogWidth(){return n(o)},get animationRef(){return c},get dialog(){return n(l)},get sidebarState(){return n(d)}})};B(ne,z=>{!n(b)&&!e.blocked&&z(F)})}Ie(()=>{et(A,1,nt({a:!0,b:n(P),c:n(d)==="opened"||n(d)==="opening"||n(d)==="closing"||n(d)==="swipingClose",d:n(d)==="opened"||n(d)==="opening"||n(d)==="swipingOpen"}),"p-1gucilc"),et(G,1,nt({e:!0,f:n(d)==="swipingOpen",g:n(d)!=="opened"}),"p-1gucilc")}),g(t,S),ke()}var mf=C('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),_f=C('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function wf(t,e){Se(e,!0);const{checkMobileSize:a}=fa(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=Ar(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:u}=Ft(),{getTagsSearch:c,setTagsSearch:d}=ud(),{getSelectedTags:v,addTag:h,removeTag:m,clearTags:_}=Vn(),{getSelectedMetaTags:k,addMetaTag:p,removeMetaTag:b,clearSelectedMetaTags:P}=fo();let w=T(v),S=T(k);const{getGetNotes:A,checkNotesInArchive:G,checkNotesInBin:O}=Ot(),H=T(A),I=he=>{h(he)},U=he=>{p(he)},Z=he=>{m(he)},ne=he=>{b(he)};let F=T(()=>n(w).size===0&&!n(S).has(ot.INBOX)&&(n(H)()||[]).some(he=>(!n(S).has(ot.ARCHIVED)&&!n(S).has(ot.BIN)&&he?.data&&!he.data.deletedAt&&!he.data.archivedAt||n(S).has(ot.ARCHIVED)&&he?.data&&!he.data.deletedAt&&he.data.archivedAt||n(S).has(ot.BIN)&&he?.data&&he.data.deletedAt)&&he?.data?.tags.length===0)),z=T(()=>Xo(n(S),n(w),n(H)()||[],he=>!(he?.data&&(he.data.deletedAt||he.data.archivedAt)&&!n(S).has(ot.ARCHIVED)&&!n(S).has(ot.BIN)||he?.data&&(he.data.deletedAt||!he.data.archivedAt)&&n(S).has(ot.ARCHIVED)||he?.data&&!he.data.deletedAt&&n(S).has(ot.BIN)))),be=T(()=>n(z).filter(he=>c()===""||he.toLowerCase().indexOf(c().toLowerCase())!==-1)),ce=T(a);const{checkExistedDialog:K}=Qt();let R=T(()=>i().length>0||K());const te=()=>{if(n(ce)){if(n(R))return;o()==="opened"?r():o()==="closed"&&s()}};Ae(()=>br({key:"b",meta:!0,action:te})),Ae(()=>br({key:"b",ctrl:!0,action:te}));let fe=T(()=>[...n(F)&&n(S).size===0?[ot.INBOX]:[],...n(S).size===0?[...G()&&n(w).size===0?[ot.ARCHIVED]:[],...O()&&n(w).size===0?[ot.BIN]:[]]:[]].filter(he=>c()===""||he.toLowerCase().indexOf(c().toLowerCase())!==-1).sort((he,q)=>he===ot.INBOX?-1:q===ot.INBOX?1:he.localeCompare(q)));var ie=ye(),de=E(ie);{var De=he=>{pf(he,{get blocked(){return n(R)},children:(q,ue)=>{var re=mf(),pe=E(re),Pe=y(pe),ze=y(Pe);dl(ze,{});var me=N(ze,2),le=y(me),xe=T(()=>u(Ee.Settings));le.__click=function(...Q){n(xe)?.apply(this,Q)};var $=y(le);ge($,()=>({"--size":"24px"})),we($.lastChild,{name:"settings"});var Ne=N($,2);mt(Ne,{children:(Q,J)=>{var se=Ke("Settings");g(Q,se)}});var ve=N(le,2),Ce=T(()=>u(Ee.Sync));ve.__click=function(...Q){n(Ce)?.apply(this,Q)};var x=y(ve);ge(x,()=>({"--size":"24px"})),we(x.lastChild,{name:"sync"});var M=N(x,2);mt(M,{children:(Q,J)=>{var se=Ke("Sync");g(Q,se)}});var L=N(Pe,2),W=y(L);{let Q=T(c);jo(W,{placeholder:"Search tag",get value(){return n(Q)},onChange:J=>{d(J)}})}var V=N(L,2);{let Q=T(()=>n(S).has(ot.BIN));Is(V,{get clearTags(){return _},get clearMetaTags(){return P},get hideTagMenu(){return n(Q)},handleMetaTagClick:ne,get metaTags(){return n(S)},get selectedTags(){return n(w)},handleSelectedTagClick:Z})}var X=N(pe,2);{let Q=T(()=>n(S).has(ot.BIN));Ms(X,{get hideTagMenu(){return n(Q)},get metaTags(){return n(fe)},get tags(){return n(be)},handleMetaTagClick:U,handleTagClick:I,mobile:!0})}Ie((Q,J)=>{dt(le,"href",Q),dt(ve,"href",J)},[()=>l(Ee.Settings),()=>l(Ee.Sync)]),g(q,re)},$$slots:{default:!0}})},Fe=he=>{var q=_f(),ue=y(q),re=y(ue);{let le=T(c);jo(re,{placeholder:"Search tag",get value(){return n(le)},onChange:xe=>{d(xe)}})}var pe=N(ue,2),Pe=y(pe),ze=y(Pe);{let le=T(()=>n(S).has(ot.BIN));Is(ze,{get metaTags(){return n(S)},get clearTags(){return _},get clearMetaTags(){return P},get hideTagMenu(){return n(le)},get selectedTags(){return n(w)},handleMetaTagClick:ne,handleSelectedTagClick:Z})}var me=N(Pe,2);{let le=T(()=>n(S).has(ot.BIN));Ms(me,{get metaTags(){return n(fe)},get hideTagMenu(){return n(le)},get tags(){return n(be)},handleMetaTagClick:U,handleTagClick:I})}g(he,q)};B(de,he=>{n(ce)?he(De):he(Fe,!1)})}g(t,ie),ke()}ht(["click"]);var yf=C('<button class="a p-tddkdb"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function bf(t,e){Se(e,!0);let a=Oe(e,"ref",15);var r=yf();r.__click=function(...i){e.onClick?.apply(this,i)};var o=y(r);ge(o,()=>({"--rotate":"-90deg"})),we(o.lastChild,{name:"menu"});var s=N(o,2);mt(s,{children:(i,l)=>{var u=Ke();Ie(()=>ut(u,e.title)),g(i,u)}}),$e(r,i=>a(i),()=>a()),g(t,r),ke()}ht(["click"]);const Jo=t=>{try{new URL(t)}catch{return!1}return!0};var Cf=C('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Sf=C('<form class="a p-y9ylet"><!></form>');function kf(t,e){Se(e,!0);const{addTag:a}=Ot(),{getSelectedTags:r}=Vn(),{getSelectedNotes:o}=da(),{getFiltredNotes:s}=Ia();let i=D(!1),l=D(!1),u,c=!1,d=D(null),v=D(""),h=e.nextFocusRef;Ae(()=>(n(d)&&n(d).focus(),()=>{u&&clearTimeout(u)}));const m=()=>{u=setTimeout(()=>{f(l,!0)},250)},_=()=>{f(i,!0)},k=async()=>{if(r().has(n(v).trim())){_();return}if(n(v).trim()!=="")try{m();const w=new Set(o()),S=w.size?[...w]:s().map(G=>G.id),{cancel:A}=await a(n(v).trim(),S);tt("Tag added",{cancel:{nextFocusRef:h,onCancel:async()=>{await A(),setTimeout(()=>{const{prev:G}=bt(h);G?.focus()},16)}}}),c=!0}finally{f(i,!0)}},p=()=>{e.onClosed?.(c)},b=P=>{P.preventDefault(),k()};Dr(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:p,children:(P,w)=>{var S=Sf(),A=y(S);{var G=H=>{La(H,{})},O=H=>{var I=Cf(),U=N(E(I),2);Cr(U,{placeholder:"Enter new tag name",get ref(){return n(d)},set ref(z){f(d,z,!0)},get value(){return n(v)},set value(z){f(v,z,!0)}});var Z=N(U,2),ne=y(Z);Lt(ne,{size:"small",onClick:_,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(z,be)=>{var ce=Ke("Cancel");g(z,ce)},$$slots:{default:!0}});var F=N(ne,2);Lt(F,{size:"small",onClick:k,fullWidth:!0,withoutMinWidth:!0,children:(z,be)=>{var ce=Ke("OK");g(z,ce)},$$slots:{default:!0}}),g(H,I)};B(A,H=>{n(l)?H(G):H(O,!1)})}Zt("submit",S,b),g(P,S)},$$slots:{default:!0}}),ke()}var xf=C('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),Tf=C('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),Ef=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Pf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),Nf=C("<div><!></div>"),Af=C('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),Df=C('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!> <!> <!></div> <!></div>');function vl(t,e){Se(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=Ot(),{getSelectedTags:s}=Vn();let i=D(null),l=D(""),u=D(null);const c=T(a);let d=Oe(e,"shownTagInput",15);const v=()=>n(c)?e.mode==="exit"?Xo(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let m=T(()=>{const R=s(),te=new Set(Xo(new Set,new Set(e.selectedTags.length>0?e.selectedTags:R),o()()||[]));return v().filter(ie=>e.selectedTags.some(de=>ie===de)?!1:n(l)===""||ie.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((ie,de)=>R.has(ie)&&R.has(de)?ie.localeCompare(de):R.has(ie)?-1:R.has(de)?1:te.has(ie)&&te.has(de)?ie.localeCompare(de):te.has(ie)?-1:te.has(de)?1:0)});const _=R=>{if(!e.selectedTags.includes(R)){if(e.mode!=="exit"||n(m).includes(R)){e.onChangeTags([...e.selectedTags,R]),f(l,"");return}n(i)?.focus()}},k=R=>{const te=e.selectedTags.filter(fe=>fe!==R);e.onRejectedTag&&e.onRejectedTag(R),te.length===0?e.onChangeTags([]):e.onChangeTags(te)},p=R=>{R.preventDefault(),n(l)!==""?_(n(l)):d(!1)};Ye(()=>{n(i)&&d()&&n(i).focus(),d()||f(l,"")});const b=R=>{R.preventDefault()},P=R=>{R.preventDefault(),R.stopPropagation(),R.stopImmediatePropagation()};var w=Df(),S=y(w),A=y(S);zn(A,17,()=>e.selectedTags,R=>R+"-tags_selected",(R,te)=>{va(R,{onPointerDown:b,onTouchStart:P,onClick:()=>{k(n(te))},type:"button",style:"selected",children:(fe,ie)=>{var de=Ke();Ie(()=>ut(de,n(te))),g(fe,de)},$$slots:{default:!0}})});var G=N(A,2);{var O=R=>{var te=ye(),fe=E(te);zn(fe,17,()=>n(m).filter(ie=>ie.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),ie=>ie+"-tags_suggested",(ie,de)=>{va(ie,{onPointerDown:b,onTouchStart:P,onClick:()=>{_(n(de))},children:(De,Fe)=>{var he=Ke();Ie(()=>ut(he,n(de))),g(De,he)},$$slots:{default:!0}})}),g(R,te)};B(G,R=>{d()&&R(O)})}var H=N(G,2);{var I=R=>{va(R,{onPointerDown:b,onTouchStart:P,onClick:()=>{_(n(l)),f(l,"")},children:(te,fe)=>{var ie=Ke();Ie(()=>ut(ie,n(l))),g(te,ie)},$$slots:{default:!0}})};B(H,R=>{n(l)!==""&&(e.mode!=="exit"||n(m).find(te=>te.toLowerCase()===n(l).toLowerCase()))&&R(I)})}var U=N(H,2);{var Z=R=>{va(R,{mode:"empty",onPointerDown:b,onTouchStart:P,onClick:()=>{d(!0)},children:(te,fe)=>{var ie=xf(),de=y(ie);ge(de,()=>({"--size":"12px"})),we(de.lastChild,{name:"plus"});var De=N(de,2);mt(De,{children:(Fe,he)=>{var q=Ke("add tag");g(Fe,q)}}),g(te,ie)},$$slots:{default:!0}})};B(U,R=>{d()||R(Z)})}var ne=N(U,2);{var F=R=>{va(R,{mode:"empty",onPointerDown:b,onTouchStart:P,get onClick(){return e.onUsePreviousTags},children:(te,fe)=>{var ie=Tf(),de=y(ie);ge(de,()=>({"--size":"12px"})),we(de.lastChild,{name:"back"});var De=N(de,2);mt(De,{children:(Fe,he)=>{var q=Ke("use previous tags");g(Fe,q)}}),g(te,ie)},$$slots:{default:!0}})};B(ne,R=>{e.previousTagsEnabled&&e.onUsePreviousTags&&R(F)})}var z=N(ne,2);{var be=R=>{va(R,{mode:"empty",onPointerDown:b,onTouchStart:P,get onClick(){return e.onGenTags},get disabled(){return e.generatingTags},children:(te,fe)=>{var ie=Nf(),de=y(ie);{var De=he=>{var q=Ef(),ue=E(q);ge(ue,()=>({"--size":"12px"})),La(ue.lastChild,{}),g(he,q)},Fe=he=>{var q=Pf(),ue=E(q);ge(ue,()=>({"--size":"12px","--rotate":"180deg"})),we(ue.lastChild,{name:"stars"});var re=N(ue,2);mt(re,{children:(pe,Pe)=>{var ze=Ke("gen tags");g(pe,ze)}}),g(he,q)};B(de,he=>{e.generatingTags?he(De):he(Fe,!1)})}g(te,ie)},$$slots:{default:!0}})};B(z,R=>{e.genTagsEnabled&&e.onGenTags&&R(be)})}var ce=N(S,2);{var K=R=>{var te=Af(),fe=y(te),ie=y(fe);Cr(ie,{placeholder:"tag",get ref(){return n(i)},set ref(De){f(i,De,!0)},get value(){return n(l)},set value(De){f(l,De,!0)}});var de=N(fe,2);de.__pointerdown=b,de.__touchstart=P,de.__click=()=>{n(i)?.blur(),n(l)!==""&&_(n(l)),d(!1),f(l,"")},Zt("submit",te,p),g(R,te)};B(ce,R=>{d()&&R(K)})}$e(w,R=>f(u,R),()=>n(u)),g(t,w),ke()}ht(["pointerdown","touchstart","click"]);var Mf=C('<div class="c p-y9ylet"><!> <!></div>'),If=C('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),Lf=C('<form class="a p-y9ylet"><!></form>');function Rf(t,e){Se(e,!0);const{changeTags:a,getNoteById:r}=Ot(),{getSelectedTags:o}=Vn(),{getSelectedNotes:s}=da(),{getFiltredNotes:i}=Ia();let l=D(!1),u=D(!1),c,d=!1,v=D(!1),h=e.nextFocusRef,_=(()=>{const O=[...o()],H=s();if(H.size===0)return O;const I=Array.from(H);let U=new Set(r(I[0])?.data.tags||[]);for(let Z=1;Z<I.length;Z++){const ne=new Set(r(I[Z])?.data.tags||[]),F=new Set([]);ne.forEach(z=>{U.has(z)&&F.add(z)}),U=F}return Array.from(U)})(),k=D(ft(_));Ae(()=>()=>{c&&clearTimeout(c)});const p=()=>{c=setTimeout(()=>{f(u,!0)},250)},b=()=>{f(l,!0)},P=async()=>{const O=_,H=new Set(s()),I=H.size?[...H]:i().map(U=>U.id);try{p();const{cancel:U}=await a([...O],n(k),I);tt("Tags changed",{cancel:{nextFocusRef:h,onCancel:async()=>{await U(),setTimeout(()=>{const{prev:Z}=bt(h);Z?.focus()},16)}}}),d=!0}finally{f(l,!0)}},w=O=>{O.key==="Escape"&&n(v)&&(f(v,!1),O.preventDefault(),O.stopPropagation())};Ae(()=>(document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)));const S=()=>{e.onClosed?.(d)},A=O=>{f(k,O,!0)},G=O=>{O.preventDefault(),P()};Dr(t,{get blocked(){return n(u)},get startClose(){return n(l)},onClosed:S,children:(O,H)=>{var I=Lf(),U=y(I);{var Z=F=>{La(F,{})},ne=F=>{var z=If(),be=N(E(z),2);vl(be,{get selectedTags(){return n(k)},onChangeTags:A,get shownTagInput(){return n(v)},set shownTagInput(R){f(v,R,!0)}});var ce=N(be,2);{var K=R=>{var te=Mf(),fe=y(te);Lt(fe,{size:"small",onClick:b,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(de,De)=>{var Fe=Ke("Cancel");g(de,Fe)},$$slots:{default:!0}});var ie=N(fe,2);Lt(ie,{size:"small",onClick:P,fullWidth:!0,withoutMinWidth:!0,children:(de,De)=>{var Fe=Ke("OK");g(de,Fe)},$$slots:{default:!0}}),g(R,te)};B(ce,R=>{n(v)||R(K)})}g(F,z)};B(U,F=>{n(u)?F(Z):F(ne,!1)})}Zt("submit",I,G),g(O,I)},$$slots:{default:!0}}),ke()}var Ff=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),Of=C('<li class="p-66dk2x"><!></li>'),zf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy',1),Bf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy links',1),jf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),Hf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share links',1),Uf=C('<li class="p-66dk2x"><!></li> <li class="p-66dk2x"><!></li>',1),Wf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),Vf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),qf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),Kf=C('<li class="p-66dk2x"><!></li>'),Yf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),Gf=C('<li class="p-66dk2x"><!></li>'),Xf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),Jf=C('<li class="p-66dk2x"><!></li> <li class="p-66dk2x"><!></li> <!> <li class="p-66dk2x"><!></li>',1),Zf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),Qf=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),$f=C('<li class="p-66dk2x"><!></li> <li class="p-66dk2x"><!></li>',1),ev=C('<!> <!> <li class="p-66dk2x"><!></li> <li class="p-66dk2x"><!></li> <!> <!> <!>',1),tv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),nv=C('<div class="a p-66dk2x"><!></div> <!> <!> <!>',1);function av(t,e){Se(e,!0);const{getSelectedTags:a,setSelectedTags:r,clearTags:o}=Vn(),{moveNotesToBin:s,moveNotesToArchive:i,moveNotesFromArchive:l,restoreNotesFromBin:u,deleteNotes:c}=Ot(),{getFiltredNotes:d}=Ia(),{getSelectedNotes:v,setSelectedNotes:h,clearNotes:m}=da();let _=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"}),k=T(a),p=D(!1),b=D(!1),P=D(!1),w=D(!1),S=D(null),A=D(null);const G=()=>{n(p)||f(p,!0)},O=()=>{f(p,!1),f(b,!1)};Ye(()=>{!n(p)&&!n(P)&&!n(w)&&f(S,bt(n(A)).next,!0)}),Ae(()=>{const me=le=>{le.key==="Escape"&&n(p)&&n(A)?.focus()};return window.addEventListener("keydown",me),()=>{window.removeEventListener("keydown",me)}});let H=()=>{};const I=()=>{f(b,!0),f(P,!0);let me=n(A);H=()=>{f(P,!1),setTimeout(()=>{me?.focus()},16)}};let U=()=>{};const Z=()=>{f(b,!0),f(w,!0);let me=n(A);U=()=>{f(w,!1),setTimeout(()=>{me?.focus()},16)}},ne=async()=>{const me=Array.from(n(k)),le=new Set(v()),xe=le.size?[...le]:d().map(Ne=>Ne.id),{cancel:$}=await s({noteIds:xe});o(),m(),tt("Notes moved to bin",{cancel:{nextFocusRef:n(S),onCancel:async()=>{await $(),r(new Set(me)),h(le),setTimeout(()=>{const{prev:Ne}=bt(n(S));Ne?.focus()},16)}}}),f(b,!0)},F=async()=>{const me=Array.from(n(k)),le=new Set(v()),xe=le.size?[...le]:d().map(Ne=>Ne.id),{cancel:$}=await i({noteIds:xe});o(),m(),tt("Notes moved to archive",{cancel:{nextFocusRef:n(S),onCancel:async()=>{await $(),r(new Set(me)),h(le),setTimeout(()=>{const{prev:Ne}=bt(n(S));Ne?.focus()},16)}}}),f(b,!0)},z=async()=>{const me=Array.from(n(k)),le=new Set(v()),xe=le.size?[...le]:d().map(Ne=>Ne.id),{cancel:$}=await l({noteIds:xe});o(),m(),tt("Notes moved from archive",{cancel:{nextFocusRef:n(S),onCancel:async()=>{await $(),r(new Set(me)),h(le),setTimeout(()=>{const{prev:Ne}=bt(n(S));Ne?.focus()},16)}}}),f(b,!0)},be=async()=>{const me=Array.from(n(k)),le=new Set(v()),xe=le.size?[...le]:d().map(Ne=>Ne.id),{cancel:$}=await u({noteIds:xe});o(),m(),tt("Notes restored",{cancel:{nextFocusRef:n(S),onCancel:async()=>{await $(),r(new Set(me)),h(le),setTimeout(()=>{const{prev:Ne}=bt(n(S));Ne?.focus()},16)}}}),f(b,!0)},ce=()=>{const me=new Set(v()),le=me.size?[...me]:d().map(xe=>xe.id);f(b,!0),Ta({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{f(b,!0),o(),m(),await c({noteIds:le})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(A)?.focus()},16)}})},K=()=>{const me=d(),le=Array.from(v()),xe=[];for(const Ne of me)Ne.data&&Ne.data?.link&&Jo(Ne.data?.link.url)&&(le.includes(Ne.id)||le.length===0)&&xe.push(Ne.data?.link.url);const $=()=>{for(const Ne of xe)if(!window.open(Ne,"_blank")){Ta({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(A)?.focus()},16)}});break}};xe.length<=10?$():Ta({title:`Are you sure to open ${xe.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{$()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(A)?.focus()},16)}}),f(b,!0)},R=()=>{const me=d(),le=Array.from(v());let xe="";for(const $ of me)$.data&&$.data?.link&&Jo($.data?.link.url)&&(le.includes($.id)||le.length===0)&&(xe+=$.data?.link.url+`
`);navigator.clipboard.writeText(xe),tt("Copied links"),f(b,!0)},te=()=>{const me=d(),le=Array.from(v());let xe="";for(const $ of me)$.data&&(le.includes($.id)||le.length===0)&&($.data?.link?.url&&(xe+=$.data?.link.url+`
`),$.data?.text&&(xe+=`
`+$.data?.text+`
`),xe+=`---------------------

`);navigator.clipboard.writeText(xe),tt("Copied"),f(b,!0)},fe=()=>{const me=d(),le=Array.from(v());let xe="";for(const $ of me)$.data&&(le.includes($.id)||le.length===0)&&$.data?.link?.url&&(xe+=$.data?.link.url+`

`);navigator.share({text:xe}).catch($=>{console.error("Error sharing",$)}),f(b,!0)},ie=()=>{const me=d(),le=Array.from(v());let xe="";for(const $ of me)$.data&&(le.includes($.id)||le.length===0)&&($.data?.link?.url&&(xe+=$.data?.link.url+`
`),$.data?.text&&(xe+=`
`+$.data?.text+`
`),xe+=`---------------------

`);navigator.share({text:xe}).catch($=>{console.error("Error sharing",$)}),f(b,!0)};let de=xn||Hn;var De=nv(),Fe=E(De),he=y(Fe);bf(he,{title:"notes menu",onClick:G,get ref(){return n(A)},set ref(me){f(A,me,!0)}});var q=N(Fe,2);{var ue=me=>{var le=tv(),xe=E(le);ge(xe,()=>({"--right":"0","--top":"44px"})),Mr(xe.lastChild,{get startClose(){return n(b)},onClosed:O,get isMobile(){return de},children:($,Ne)=>{var ve=ev(),Ce=E(ve);{var x=ae=>{var _e=Of(),Le=y(_e);We(Le,{onClick:K,get dialogMode(){return de},children:(Te,Me)=>{var Ve=Ff(),Re=E(Ve);ge(Re,()=>({"--size":"20px","--scale":"0.9"})),we(Re.lastChild,{name:"open"}),g(Te,Ve)},$$slots:{default:!0}}),g(ae,_e)};B(Ce,ae=>{xn||Hn||ae(x)})}var M=N(Ce,2);B(M,ae=>{});var L=N(M,2),W=y(L);We(W,{onClick:te,get dialogMode(){return de},children:(ae,_e)=>{var Le=zf(),Te=E(Le);ge(Te,()=>({"--size":"20px"})),we(Te.lastChild,{name:"copy"}),g(ae,Le)},$$slots:{default:!0}});var V=N(L,2),X=y(V);We(X,{onClick:R,get dialogMode(){return de},children:(ae,_e)=>{var Le=Bf(),Te=E(Le);ge(Te,()=>({"--size":"20px"})),we(Te.lastChild,{name:""}),g(ae,Le)},$$slots:{default:!0}});var Q=N(V,2);{var J=ae=>{var _e=Uf(),Le=E(_e),Te=y(Le);We(Te,{onClick:ie,get dialogMode(){return de},children:(Re,Be)=>{var je=jf(),He=E(je);ge(He,()=>({"--size":"20px"})),we(He.lastChild,{name:"share"}),g(Re,je)},$$slots:{default:!0}});var Me=N(Le,2),Ve=y(Me);We(Ve,{onClick:fe,get dialogMode(){return de},children:(Re,Be)=>{var je=Hf(),He=E(je);ge(He,()=>({"--size":"20px"})),we(He.lastChild,{name:""}),g(Re,je)},$$slots:{default:!0}}),g(ae,_e)};B(Q,ae=>{_&&ae(J)})}var se=N(Q,2);{var ee=ae=>{var _e=Jf(),Le=E(_e),Te=y(Le);We(Te,{onClick:I,get dialogMode(){return de},children:(at,st)=>{var lt=Wf(),pt=E(lt);ge(pt,()=>({"--size":"20px"})),we(pt.lastChild,{name:"add"}),g(at,lt)},$$slots:{default:!0}});var Me=N(Le,2),Ve=y(Me);We(Ve,{onClick:Z,get dialogMode(){return de},children:(at,st)=>{var lt=Vf(),pt=E(lt);ge(pt,()=>({"--size":"20px"})),we(pt.lastChild,{name:""}),g(at,lt)},$$slots:{default:!0}});var Re=N(Me,2);{var Be=at=>{var st=Kf(),lt=y(st);We(lt,{onClick:F,get dialogMode(){return de},children:(pt,En)=>{var Tt=qf(),At=E(Tt);ge(At,()=>({"--size":"20px","--scale":"0.9"})),we(At.lastChild,{name:"archive"}),g(pt,Tt)},$$slots:{default:!0}}),g(at,st)},je=at=>{var st=Gf(),lt=y(st);We(lt,{onClick:z,get dialogMode(){return de},children:(pt,En)=>{var Tt=Yf(),At=E(Tt);ge(At,()=>({"--size":"20px","--scale":"0.9"})),we(At.lastChild,{name:"archive-cancel"}),g(pt,Tt)},$$slots:{default:!0}}),g(at,st)};B(Re,at=>{e.mode==="notes"?at(Be):at(je,!1)})}var He=N(Re,2),_t=y(He);We(_t,{onClick:ne,get dialogMode(){return de},children:(at,st)=>{var lt=Xf(),pt=E(lt);ge(pt,()=>({"--size":"20px"})),we(pt.lastChild,{name:"bin"}),g(at,lt)},$$slots:{default:!0}}),g(ae,_e)};B(se,ae=>{(e.mode==="notes"||e.mode==="archive")&&ae(ee)})}var Y=N(se,2);{var oe=ae=>{var _e=$f(),Le=E(_e),Te=y(Le);We(Te,{onClick:be,get dialogMode(){return de},children:(Re,Be)=>{var je=Zf(),He=E(je);ge(He,()=>({"--size":"20px"})),we(He.lastChild,{name:"bin-cancel"}),g(Re,je)},$$slots:{default:!0}});var Me=N(Le,2),Ve=y(Me);We(Ve,{onClick:ce,get dialogMode(){return de},dangerous:!0,children:(Re,Be)=>{var je=Qf(),He=E(je);ge(He,()=>({"--size":"20px"})),we(He.lastChild,{name:"bin"}),g(Re,je)},$$slots:{default:!0}}),g(ae,_e)};B(Y,ae=>{e.mode==="bin"&&ae(oe)})}g($,ve)},$$slots:{default:!0}}),g(me,le)};B(q,me=>{n(p)&&me(ue)})}var re=N(q,2);{var pe=me=>{kf(me,{get nextFocusRef(){return n(S)},onClosed:le=>{H(le)}})};B(re,me=>{n(P)&&me(pe)})}var Pe=N(re,2);{var ze=me=>{Rf(me,{get nextFocusRef(){return n(S)},onClosed:le=>{U(le)}})};B(Pe,me=>{n(w)&&me(ze)})}g(t,De),ke()}var rv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),ov=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy',1),sv=C('<li class="p-1ljon4s"><!></li>'),iv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),lv=C('<li class="p-1ljon4s"><!></li>'),cv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),dv=C('<li class="p-1ljon4s"><!></li>'),uv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share link',1),fv=C('<li class="p-1ljon4s"><!></li>'),vv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select',1),gv=C('<li class="p-1ljon4s"><!></li>'),hv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Duplicates',1),pv=C('<li class="p-1ljon4s"><!></li>'),mv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),_v=C('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),wv=C('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),yv=C('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),bv=C(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),Cv=C('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Sv=C('<li class="p-1ljon4s"><!></li> <!> <!> <!> <!> <!> <!> <!>',1),kv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function xv(t,e){Se(e,!0);const{checkMobileSize:a}=fa(),{getMode:r,getSelectedNotes:o,changeMode:s,addNote:i}=da(),{clearDialogPages:l}=Ft(),{setFeedSearch:u}=$a(),{moveNoteToBin:c,moveNoteFromArchive:d,moveNoteToArchive:v,deleteNote:h,pinNote:m,restoreNoteFromBin:_,checkDuplicatesExist:k}=Ot();let p=Oe(e,"mode",3,"notes"),b=Oe(e,"shownMenu",15),P=D(!1),w=D(!1),S=D(!1),A=D(!1),G=D(!1),O=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"});const H=async()=>{c(e.noteId),tt("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{_(e.noteId)}}})},I=async()=>{v(e.noteId),tt("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{d(e.noteId)}}})},U=async()=>{d(e.noteId),tt("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{v(e.noteId)}}})},Z=()=>{_(e.noteId),tt("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{c(e.noteId)}}})},ne=()=>{e.noteData.pinned?(m(e.noteId,!1),tt("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{m(e.noteId,!0)}}})):(m(e.noteId,!0),tt("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{m(e.noteId,!1)}}})),f(P,!0)},F=()=>{n(w)?(f(w,!1),H()):n(G)?(f(G,!1),Z()):n(S)?(f(S,!1),I()):n(A)&&(f(A,!1),U()),b(!1),f(P,!1)},z=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),tt("Copied link"),f(P,!0))},be=()=>{let q="";e.noteData.link?.url&&(q+=e.noteData.link.url+`
`),e.noteData.text&&(q+=`
`+e.noteData.text+`
`),navigator.clipboard.writeText(q),tt("Copied"),f(P,!0)},ce=()=>{f(P,!0),Ta({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await h(e.noteId)},onCancel:async()=>{}})},K=()=>{if(navigator.share){const q={};let ue="";e.noteData.link?.url&&(ue+=e.noteData.link.url+`
`),e.noteData.text&&(ue+=`
`+e.noteData.text+`
`),q.text=ue,navigator.share(q).catch(re=>{console.error("Error sharing",re)})}f(P,!0)},R=()=>{if(navigator.share){const q={};e.noteData.link?.url&&(q.url=e.noteData.link.url),e.noteData.link?.title&&(q.title=e.noteData.link.title),navigator.share(q).catch(ue=>{console.error("Error sharing",ue)})}f(P,!0)},te=()=>{f(P,!0),e.noteData.link?.url&&(l(),u(e.noteData.link?.url))};let fe=xn||Hn,ie=T(a),de=T(()=>r()==="multiple"&&o().has(e.noteId));var De=ye(),Fe=E(De);{var he=q=>{var ue=kv(),re=E(ue);ge(re,()=>({"--bottom":e.showMenuUp?"calc(100%)":"auto","--top":e.showMenuUp?"auto":"calc(100%)","--right":"10px"})),Mr(re.lastChild,{get startClose(){return n(P)},onClosed:F,get isMobile(){return fe},children:(pe,Pe)=>{var ze=Sv(),me=E(ze),le=y(me);We(le,{onClick:ne,get dialogMode(){return fe},children:(Y,oe)=>{var ae=rv(),_e=E(ae);{let Te=T(()=>e.noteData.pinned?"pin-cancel":"pin");ge(_e,()=>({"--size":"20px"})),we(_e.lastChild,{get name(){return n(Te)}})}var Le=N(_e);Ie(()=>ut(Le,` ${e.noteData.pinned?"Unpin":"Pin"}`)),g(Y,ae)},$$slots:{default:!0}});var xe=N(me,2);{var $=Y=>{var oe=sv(),ae=y(oe);We(ae,{onClick:be,get dialogMode(){return fe},children:(_e,Le)=>{var Te=ov(),Me=E(Te);ge(Me,()=>({"--size":"20px"})),we(Me.lastChild,{name:"copy"}),g(_e,Te)},$$slots:{default:!0}}),g(Y,oe)};B(xe,Y=>{e.noteData.text&&Y($)})}var Ne=N(xe,2);{var ve=Y=>{var oe=lv(),ae=y(oe);We(ae,{onClick:z,get dialogMode(){return fe},children:(_e,Le)=>{var Te=iv(),Me=E(Te);ge(Me,()=>({"--size":"20px"})),we(Me.lastChild,{name:""}),g(_e,Te)},$$slots:{default:!0}}),g(Y,oe)};B(Ne,Y=>{n(ie)&&e.noteData.link?.url&&Y(ve)})}var Ce=N(Ne,2);{var x=Y=>{var oe=dv(),ae=y(oe);We(ae,{onClick:K,get dialogMode(){return fe},children:(_e,Le)=>{var Te=cv(),Me=E(Te);ge(Me,()=>({"--size":"20px"})),we(Me.lastChild,{name:"share"}),g(_e,Te)},$$slots:{default:!0}}),g(Y,oe)};B(Ce,Y=>{O&&e.noteData.text&&Y(x)})}var M=N(Ce,2);{var L=Y=>{var oe=fv(),ae=y(oe);We(ae,{onClick:R,get dialogMode(){return fe},children:(_e,Le)=>{var Te=uv(),Me=E(Te);{let Ve=T(()=>e.noteData.text?"":"share");ge(Me,()=>({"--size":"20px"})),we(Me.lastChild,{get name(){return n(Ve)}})}g(_e,Te)},$$slots:{default:!0}}),g(Y,oe)};B(M,Y=>{O&&e.noteData.link?.url&&Y(L)})}var W=N(M,2);{var V=Y=>{var oe=gv(),ae=y(oe);We(ae,{onClick:()=>{f(P,!0),r()!=="multiple"&&s("multiple"),i(e.noteId)},get dialogMode(){return fe},children:(_e,Le)=>{var Te=vv(),Me=E(Te);ge(Me,()=>({"--size":"20px"})),we(Me.lastChild,{name:"check"}),g(_e,Te)},$$slots:{default:!0}}),g(Y,oe)};B(W,Y=>{n(de)||Y(V)})}var X=N(W,2);{var Q=Y=>{var oe=pv(),ae=y(oe);We(ae,{onClick:te,get dialogMode(){return fe},children:(_e,Le)=>{var Te=hv(),Me=E(Te);ge(Me,()=>({"--size":"20px"})),we(Me.lastChild,{name:""}),g(_e,Te)},$$slots:{default:!0}}),g(Y,oe)};B(X,Y=>{e.noteData.link?.url&&k(e.noteId)&&Y(Q)})}var J=N(X,2);{var se=Y=>{var oe=wv(),ae=E(oe),_e=y(ae);We(_e,{onClick:()=>{f(S,p()==="notes"),f(A,p()==="archive"),f(P,!0)},get dialogMode(){return fe},children:(Me,Ve)=>{var Re=mv(),Be=E(Re);{let He=T(()=>p()==="archive"?"archive-cancel":"archive");ge(Be,()=>({"--size":"20px","--scale":"0.9"})),we(Be.lastChild,{get name(){return n(He)}})}var je=N(Be);Ie(()=>ut(je,` ${p()==="archive"?"Unarchive":"Archive"}`)),g(Me,Re)},$$slots:{default:!0}});var Le=N(ae,2),Te=y(Le);We(Te,{onClick:()=>{f(w,!0),f(P,!0)},get dialogMode(){return fe},children:(Me,Ve)=>{var Re=_v(),Be=E(Re),je=y(Be);ge(je,()=>({"--size":"20px"})),we(je.lastChild,{name:"bin"}),g(Me,Re)},$$slots:{default:!0}}),g(Y,oe)},ee=Y=>{var oe=Cv(),ae=E(oe),_e=y(ae);We(_e,{onClick:()=>{f(G,!0),f(P,!0)},get dialogMode(){return fe},children:(Me,Ve)=>{var Re=yv(),Be=E(Re),je=y(Be);ge(je,()=>({"--size":"20px"})),we(je.lastChild,{name:"bin-cancel"}),g(Me,Re)},$$slots:{default:!0}});var Le=N(ae,2),Te=y(Le);We(Te,{onClick:ce,get dialogMode(){return fe},dangerous:!0,children:(Me,Ve)=>{var Re=bv(),Be=E(Re),je=y(Be);ge(je,()=>({"--size":"20px"})),we(je.lastChild,{name:"bin"}),g(Me,Re)},$$slots:{default:!0}}),g(Y,oe)};B(J,Y=>{p()==="notes"||p()==="archive"?Y(se):Y(ee,!1)})}g(pe,ze)},$$slots:{default:!0}}),g(q,ue)};B(Fe,q=>{b()&&q(he)})}g(t,De),ke()}var Tv=C('<div class="a p-1hg9kpf"></div>'),Ev=C('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function gl(t,e){Se(e,!0);const a=c=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(c).host}.ico`}catch{return""}};let r=D(!1),o=T(()=>a(e.url));var s=ye(),i=E(s);{var l=c=>{var d=Tv();g(c,d)},u=c=>{var d=Ev();Ie(v=>dt(d,"src",v),[()=>a(e.url)]),Zt("error",d,()=>{f(r,!0)}),g(c,d)};B(i,c=>{n(r)||!n(o)?c(l):c(u,!1)})}g(t,s),ke()}var Pv=C('<a target="_blank" rel="noopener noreferrer"><!> <!></a>'),Nv=C("<button><!> <!></button>");function ln(t,e){Se(e,!0);let a=Oe(e,"tabindex",3,0),r=Oe(e,"onclick",3,()=>{}),o=Oe(e,"ref",15),s=Oe(e,"disabled",3,!1);var i=ye(),l=E(i);{var u=d=>{var v=Pv();v.__click=function(..._){r()?.apply(this,_)};var h=y(v);Ue(h,()=>e.children);var m=N(h,2);mt(m,{children:(_,k)=>{var p=Ke();Ie(()=>ut(p,e.title)),g(_,p)}}),$e(v,_=>o(_),()=>o()),Ie(()=>{dt(v,"href",e.href),dt(v,"tabindex",s()?-1:a()),et(v,1,nt({a:!0,b:s()}),"p-62et9t")}),g(d,v)},c=d=>{var v=ye(),h=E(v);{var m=_=>{var k=Nv();k.__click=function(...P){r()?.apply(this,P)};var p=y(k);Ue(p,()=>e.children);var b=N(p,2);mt(b,{children:(P,w)=>{var S=Ke();Ie(()=>ut(S,e.title)),g(P,S)}}),$e(k,P=>o(P),()=>o()),Ie(()=>{dt(k,"tabindex",s()?-1:a()),et(k,1,nt({a:!0,b:s()}),"p-62et9t"),k.disabled=s()}),g(_,k)};B(h,_=>{e.elem==="button"&&_(m)},!0)}g(d,v)};B(l,d=>{e.elem==="a"?d(u):d(c,!1)})}g(t,i),ke()}ht(["click"]);let ho=D(!1),po=D(!1),bn=D(void 0),Jr={};const Av=()=>{xn||Hn||f(po,!0)},Dv=()=>{f(po,!1)},Zo=()=>{xn||Hn||f(ho,!0)},Mv=()=>{f(ho,!1)},Iv=()=>n(po),hl=()=>n(ho),vn=t=>{xn||Hn||f(bn,t,!0)},qr=()=>n(bn),Fs=()=>{const t=Jr[n(bn)||""]?.next;if(t)return f(bn,t,!0),t},Os=()=>{const t=Jr[n(bn)||""]?.prev;if(t)return f(bn,t,!0),t};var Lv=C('<div class="a p-rxwzp0"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Rv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Fv=C('<div class="b p-rxwzp0"><!></div>'),Ov=C('<a class="c p-rxwzp0" target="_blank" rel="noopener noreferrer"> </a>'),zv=C('<a class="c p-rxwzp0" target="_blank" rel="noopener noreferrer"> </a>'),Bv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),jv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Hv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Uv=C("<!> <!> <!>",1),Wv=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Vv=C("<li><!> <!> <!> <div><!> <!></div> <!></li>");function qv(t,e){Se(e,!0);const{pushDialogPage:a}=Ft(),{getFaviconEnabled:r,getRecordMode:o}=Na(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:u}=da(),{getSearchParams:c,getHref:d}=Ht();let v=Oe(e,"mode",3,"notes"),h="unknown";Ye(()=>(Jr[e.noteId]={next:e.nextNoteId,prev:e.prevNoteId},()=>{delete Jr[e.noteId]}));let m=D(!1),_=D(!1),k=T(r),p=T(o),b=D(null),P=D(null),w=D(null);const{checkMobileSize:S}=fa(),A=()=>{f(m,!0)},G=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),tt("Copied link"))};Ye(()=>{n(bn)===e.noteId?f(_,!0):f(_,!1)});const O=q=>{q.preventDefault(),a(`${Ee.Note}?id=${encodeURIComponent(e.noteId)}`)},H=T(()=>e.noteData.link?.url||"");let I=T(()=>n(m)&&n(b)?bt(n(b)).next:null);const U=q=>{q?l(e.noteId):u(e.noteId)},Z=()=>{const q=new URLSearchParams(c());return q.set(tn,`${Ee.Note}?id=${encodeURIComponent(e.noteId)}`),d(q)};let ne=T(()=>s()==="multiple"&&i().has(e.noteId));Ae(()=>{const q=ue=>{if(h="keyboard",n(bn)===e.noteId&&(ue.key==="Enter"&&n(po)&&(n(p)==="note"?(ue.preventDefault(),setTimeout(()=>{a(`${Ee.Note}?id=${encodeURIComponent(e.noteId)}`)},0)):n(p)==="bookmark"&&n(H)&&window.open(n(H),"_blank","noopener")),ue.key==="Tab"&&n(ho)&&(Mv(),n(w)))){const re=bt(n(w));ue.shiftKey?re.prev?.focus():re?.next?.focus()}};return document.addEventListener("keydown",q),()=>{document.removeEventListener("keydown",q)}});var F=Vv();F.__focusin=()=>{h==="keyboard"&&f(bn,e.noteId,!0)};var z=y(F);{var be=q=>{var ue=Lv(),re=y(ue);ge(re,()=>({"--size":"18px"})),we(re.lastChild,{name:"pin"}),g(q,ue)};B(z,q=>{e.noteData.pinned&&q(be)})}var ce=N(z,2);{var K=q=>{var ue=Fv(),re=y(ue);{var pe=ze=>{gl(ze,{get url(){return n(H)}})},Pe=ze=>{var me=Rv(),le=E(me);ge(le,()=>({"--size":"16px"})),we(le.lastChild,{name:"note"}),g(ze,me)};B(re,ze=>{n(H)?ze(pe):ze(Pe,!1)})}g(q,ue)};B(ce,q=>{n(k)&&q(K)})}var R=N(ce,2);{var te=q=>{var ue=Ov();ue.__keydown=pe=>{pe.key==="Enter"&&(h="keyboard")},ue.__mousedown=()=>{h="mouse"},ue.__click=pe=>{h==="mouse"&&vn(void 0),pe.preventDefault(),s()==="multiple"?U(!n(ne)):O(pe)};var re=y(ue);$e(ue,pe=>f(w,pe),()=>n(w)),Ie((pe,Pe)=>{dt(ue,"tabindex",e.focusHidden?-1:0),dt(ue,"href",pe),ut(re,Pe)},[Z,()=>e.noteData?.text.trim()?e.noteData?.text.split(`
`)[0]:e.noteData?.link?.title||"unknown"]),Zt("focus",ue,()=>{}),g(q,ue)},fe=q=>{var ue=zv();ue.__keydown=pe=>{pe.key==="Enter"&&(h="keyboard")},ue.__mousedown=()=>{h="mouse"},ue.__click=pe=>{s()==="multiple"&&(pe.preventDefault(),U(!n(ne)))};var re=y(ue);$e(ue,pe=>f(w,pe),()=>n(w)),Ie(pe=>{dt(ue,"tabindex",e.focusHidden?-1:0),dt(ue,"href",n(H)),ut(re,pe)},[()=>e.noteData?.text.trim()?e.noteData?.text.split(`
`)[0]:e.noteData?.link?.title||"unknown"]),Zt("focus",ue,()=>{}),g(q,ue)};B(R,q=>{n(p)==="note"||!n(H)?q(te):q(fe,!1)})}var ie=N(R,2),de=y(ie);{var De=q=>{var ue=Uv(),re=E(ue);{var pe=xe=>{{let $=T(Z),Ne=T(()=>e.focusHidden?-1:0);ln(xe,{title:"edit",elem:"a",get href(){return n($)},get tabindex(){return n(Ne)},onclick:O,children:(ve,Ce)=>{var x=Bv(),M=E(x);ge(M,()=>({"--size":"18px"})),we(M.lastChild,{name:"pen"}),g(ve,x)},$$slots:{default:!0}})}};B(re,xe=>{(n(p)==="bookmark"||s()==="multiple")&&xe(pe)})}var Pe=N(re,2);{var ze=xe=>{{let $=T(()=>e.focusHidden?-1:0),Ne=T(()=>e.noteData.link?.title||"unknown");ln(xe,{elem:"a",get href(){return n(H)},get tabindex(){return n($)},get title(){return n(Ne)},children:(ve,Ce)=>{var x=jv(),M=E(x);ge(M,()=>({"--size":"18px"})),we(M.lastChild,{name:"open"}),g(ve,x)},$$slots:{default:!0}})}};B(Pe,xe=>{(n(p)==="note"||s()==="multiple")&&xe(ze)})}var me=N(Pe,2);{var le=xe=>{{let $=T(()=>e.focusHidden?-1:0);ln(xe,{elem:"button",onclick:G,get tabindex(){return n($)},title:"copy link",children:(Ne,ve)=>{var Ce=Hv(),x=E(Ce);ge(x,()=>({"--size":"20px"})),we(x.lastChild,{name:"copy"}),g(Ne,Ce)},$$slots:{default:!0}})}};B(me,xe=>{S()||xe(le)})}g(q,ue)};B(de,q=>{n(H)&&q(De)})}var Fe=N(de,2);{let q=T(()=>e.focusHidden?-1:0);ln(Fe,{title:"show menu",elem:"button",get tabindex(){return n(q)},onclick:A,get ref(){return n(b)},set ref(ue){f(b,ue,!0)},children:(ue,re)=>{var pe=Wv(),Pe=E(pe);ge(Pe,()=>({"--size":"18px","--rotate":"90deg"})),we(Pe.lastChild,{name:"menu"}),g(ue,pe)},$$slots:{default:!0}})}var he=N(ie,2);xv(he,{get nextFocusRef(){return n(I)},get mode(){return v()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(m)},set shownMenu(q){f(m,q,!0)}}),$e(F,q=>f(P,q),()=>n(P)),Ie(()=>{et(F,1,nt({d:!0,e:n(_),f:n(ne)||n(bn)===e.noteId}),"p-rxwzp0"),et(ie,1,nt({g:!0,h:n(_)}),"p-rxwzp0")}),g(t,F),ke()}ht(["focusin","keydown","mousedown","click"]);var Kv=C('<div class="g e p-12ns0yc"><button class="d p-12ns0yc" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),Yv=C('<div class="g p-12ns0yc"><button class="d p-12ns0yc" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),Gv=C('<a class="i j p-12ns0yc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Xv=C('<div class="h p-12ns0yc"><!> <!></div>'),Jv=C('<!> <div class="q p-12ns0yc"><!></div>',1),Zv=C('<button class="u p-12ns0yc">All</button>'),Qv=C('<button class="u p-12ns0yc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>'),$v=C('<div class="s p-12ns0yc"><div class="t p-12ns0yc"><!> <span> </span> <!></div> <button class="u v p-12ns0yc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),eg=C('<div class="a p-12ns0yc"><div class="b p-12ns0yc"><div class="c p-12ns0yc"><a class="d p-12ns0yc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-12ns0yc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-12ns0yc"><!></div> <div class="f p-12ns0yc"><!></div></div> <div class="k p-12ns0yc"><div class="l p-12ns0yc"><!></div> <div class="m p-12ns0yc"><div class="n p-12ns0yc"><div class="o p-12ns0yc"><!></div> <div class="p p-12ns0yc"><!></div></div> <div class="r p-12ns0yc"><!></div></div></div></div>');function tg(t,e){Se(e,!0);const{getFeedSearch:a,setFeedSearch:r}=$a(),{getScrollContainer:o}=vo();let s=T(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:u,checkNotes:c}=Ot(),{replaceSearchParams:d}=Ht(),{createDialogPageHref:v,createHandleClickDialogPage:h,getDialogPages:m}=Ft(),{checkExistedDialog:_}=Qt(),{getMode:k,clearNotes:p,setSelectedNotes:b,getSelectedNotes:P,changeMode:w}=da(),{checkMobileSize:S}=fa(),{getFiltredNotes:A}=Ia(),{getSelectedMetaTags:G}=fo(),{getViewMode:O}=Na();let H=T(G),I=D(null);const U=T(l);let ne=T(()=>{const Q=A()||[],J=P();return Q.every(se=>J.has(se.id))});const F=()=>{Ta({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),d("")},onCancel:async()=>{}})};let z=T(()=>m().length===0);Ye(()=>{n(z)});const be=()=>{m().length===0&&!_()&&n(I)?.focus()};Ae(()=>br({key:"k",meta:!0,action:be})),Ae(()=>br({key:"k",ctrl:!0,action:be})),Ae(()=>{}),Ye(()=>{const Q=A()||[];jt(()=>{const J=P();b(new Set(Q.filter(se=>J.has(se.id)).map(se=>se.id)))})});let ce=T(()=>n(H).has(ot.ARCHIVED)?"archive":n(H).has(ot.BIN)?"bin":"notes");Ae(()=>{n(I)&&n(I).addEventListener("keydown",Q=>{Q.key==="Tab"&&qr()&&Q.preventDefault()})}),Ye(()=>{hl()&&setTimeout(()=>{n(I)?.focus(),n(I)?.setSelectionRange(n(I).value.length,n(I).value.length)},0)}),Ae(()=>{});var K=eg(),R=y(K),te=y(R),fe=y(te),ie=T(()=>h(Ee.Settings));fe.__click=function(...Q){n(ie)?.apply(this,Q)};var de=y(fe);ge(de,()=>({"--rotate":"30deg","--size":"20px"})),we(de.lastChild,{name:"settings"});var De=N(fe,2),Fe=T(()=>h(Ee.Sync));De.__click=function(...Q){n(Fe)?.apply(this,Q)};var he=y(De);ge(he,()=>({"--size":"20px"})),we(he.lastChild,{name:"sync"});var q=N(te,2),ue=y(q);dl(ue,{});var re=N(q,2),pe=y(re);{var Pe=Q=>{var J=ye(),se=E(J);{var ee=Y=>{var oe=ye(),ae=E(oe);{var _e=Te=>{var Me=Kv(),Ve=y(Me);Ve.__click=F;var Re=y(Ve);ge(Re,()=>({"--scale":"1.2","--size":"20px"})),we(Re.lastChild,{name:"clear"});var Be=N(Re);mt(Be,{children:(je,He)=>{var _t=Ke("Empty bin");g(je,_t)}}),g(Te,Me)},Le=Te=>{var Me=Yv(),Ve=y(Me);Ve.__click=F;var Re=y(Ve);ge(Re,()=>({"--scale":"0.9","--size":"20px"})),we(Re.lastChild,{name:"clear"}),g(Te,Me)};B(ae,Te=>{S()?Te(_e):Te(Le,!1)})}g(Y,oe)};B(se,Y=>{n(U)&&Y(ee)})}g(Q,J)},ze=Q=>{var J=ye(),se=E(J);{var ee=Y=>{var oe=Xv(),ae=y(oe);{var _e=Te=>{var Me=Gv();Me.__click=function(...Be){e.onOpenWindow?.apply(this,Be)};var Ve=y(Me);ge(Ve,()=>({"--scale":"0.7","--size":"26px"})),we(Ve.lastChild,{name:"open-window"});var Re=N(Ve,2);mt(Re,{children:(Be,je)=>{var He=Ke("open window");g(Be,He)}}),Ie(()=>dt(Me,"href",e.openWindowHref)),g(Te,Me)};B(ae,Te=>{e.onOpenWindow&&Te(_e)})}var Le=N(ae,2);zu(Le,{}),g(Y,oe)};B(se,Y=>{n(ce)==="notes"&&Y(ee)},!0)}g(Q,J)};B(pe,Q=>{n(ce)==="bin"?Q(Pe):Q(ze,!1)})}var me=N(R,2),le=y(me),xe=y(le);wf(xe,{});var $=N(le,2),Ne=y($),ve=y(Ne),Ce=y(ve);{let Q=T(a);jo(Ce,{placeholder:"Search",onFocus:()=>{xn||Hn||(Av(),Zo(),n(I)?.setSelectionRange(n(I).value.length,n(I).value.length))},onBlur:()=>{Dv()},get value(){return n(Q)},onChange:J=>{vn(void 0),n(s)&&n(s).scrollTo({top:0}),r(J)},onEscape:()=>{vn(void 0)},get ref(){return n(I)},set ref(J){f(I,J,!0)}})}var x=N(ve,2),M=y(x);{var L=Q=>{var J=Jv(),se=E(J);Au(se,{});var ee=N(se,2),Y=y(ee);av(Y,{get mode(){return n(ce)}}),g(Q,J)};B(M,Q=>{(n(ce)==="notes"&&c()||n(ce)==="bin"&&l()||n(ce)==="archive"&&u())&&Q(L)})}var W=N(Ne,2),V=y(W);{var X=Q=>{var J=ye(),se=E(J);{var ee=Y=>{var oe=$v(),ae=y(oe),_e=y(ae);{var Le=He=>{var _t=Zv();_t.__click=at=>{at.preventDefault();const st=A()||[];b(new Set(st.map(lt=>lt.id)))},g(He,_t)};B(_e,He=>{n(ne)||He(Le)})}var Te=N(_e,2),Me=y(Te),Ve=N(Te,2);{var Re=He=>{var _t=Qv();_t.__click=st=>{st.preventDefault(),p()};var at=y(_t);ge(at,()=>({"--size":"16px"})),we(at.lastChild,{name:"close"}),g(He,_t)};B(Ve,He=>{P().size>0&&He(Re)})}var Be=N(ae,2);Be.__click=He=>{He.preventDefault(),w("single")};var je=y(Be);ge(je,()=>({"--size":"16px"})),we(je.lastChild,{name:"close"}),Ie(He=>ut(Me,`Selected ${He??""}`),[()=>P().size]),g(Y,oe)};B(se,Y=>{k()==="multiple"&&Y(ee)})}g(Q,J)};B(V,Q=>{(n(ce)==="notes"&&c()||n(ce)==="bin"&&l()||n(ce)==="archive"&&u())&&Q(X)})}Ie((Q,J)=>{dt(fe,"href",Q),dt(De,"href",J)},[()=>v(Ee.Settings),()=>v(Ee.Sync)]),g(t,K),ke()}ht(["click"]);var ng=C('<div class="a p-11shdp8"><!></div>');function Ct(t,e){Se(e,!0);const{setDialogPageHeight:a}=ds();let r=D(null);Ae(()=>{n(r);const i=new ResizeObserver(l=>{for(let u of l){const c=u.contentRect.height;a(c)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=ng(),s=y(o);Ue(s,()=>e.children),$e(o,i=>f(r,i),()=>n(r)),g(t,o),ke()}var ag=C('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function rg(t,e){Se(e,!1);const{replaceSearchParams:a,getHref:r}=Ht(),o=l=>{l.preventDefault(),a("")};ss();var s=ag(),i=N(y(s),2);{let l=Er(()=>r(""));Lt(i,{element:"a",get href(){return n(l)},onClick:o,children:(u,c)=>{var d=Ke("close");g(u,d)},$$slots:{default:!0}})}g(t,s),ke()}var og=C('<h1 class="p-1n0ziuh"><!></h1>');function sg(t,e){var a=og(),r=y(a);Ue(r,()=>e.children),g(t,a)}var ig=C('<!> <div class="b p-193tby9"><!> <!></div>',1),lg=C('<div class="a p-193tby9"><!></div>');function cg(t,e){Se(e,!0);const{blockDialog:a,setLeftEnd:r}=Qt(),{pushDialogPage:o}=Ft(),{initLocalAccount:s}=ls(),{replaceSearchParams:i}=Ht(),l=qn(),u=()=>{o(Ee.Auth)},c=async()=>{l.duration=0,l.swipingRatio=-25,requestAnimationFrame(()=>{l.duration=ia().duration,l.swipingRatio=ia().swipingRatio,s(),a(!1),r(!0),i("")})};var d=lg(),v=y(d);{var h=m=>{var _=ig(),k=E(_);sg(k,{children:(w,S)=>{var A=Ke("Welcome");g(w,A)}});var p=N(k,2),b=y(p);Lt(b,{onClick:u,fullWidth:!0,children:(w,S)=>{var A=Ke("Cloud account");g(w,A)},$$slots:{default:!0}});var P=N(b,2);Lt(P,{onClick:c,fullWidth:!0,type:"secondary",children:(w,S)=>{var A=Ke("Local account");g(w,A)},$$slots:{default:!0}}),g(m,_)};B(v,m=>{m(h)})}g(t,d),ke()}var dg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ug=C('<form class="b p-10m9vsg"><!> <!> <div class="c p-10m9vsg"><div class="d p-10m9vsg"><button type="button" class="p-10m9vsg">Cancel</button> <button type="submit" class="p-10m9vsg">Done</button></div> <!></div></form>'),fg=C('<div class="f p-10m9vsg"><!></div>'),vg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),gg=C('<div class="e p-10m9vsg"><div><!> <a class="g p-10m9vsg" target="_blank" rel="noopener noreferrer"> </a> <div><!></div></div></div>'),hg=C('<div class="a p-10m9vsg"><!></div>');function pg(t,e){Se(e,!0);let a=Oe(e,"shownUrlInput",15);const{getFaviconEnabled:r}=Na();let o=T(r),s=D(null),i=D(null),l=D(null),u=D(ft(e.url)),c=D(ft(e.title)),d=D(null);const v=w=>{f(u,w.target.value||"",!0)},h=w=>{f(c,w.target.value||"",!0)};Ye(()=>{a()&&n(s)?.focus()});const m=()=>{e.url&&(navigator.clipboard.writeText(e.url),tt("Copied link"))},_=()=>{f(c,""),f(u,""),e.onDeleteUrl(),a(!1)};var k=hg(),p=y(k);{var b=w=>{var S=ug(),A=y(S);Cr(A,{get value(){return n(u)},onInput:v,placeholder:"url",get ref(){return n(s)},set ref(ne){f(s,ne,!0)}});var G=N(A,2);Cr(G,{get value(){return n(c)},onInput:h,placeholder:"title",get ref(){return n(i)},set ref(ne){f(i,ne,!0)}});var O=N(G,2),H=y(O),I=y(H);I.__click=()=>{f(u,e.url,!0),f(c,e.title,!0),a(!1)};var U=N(H,2);{var Z=ne=>{ln(ne,{title:"delete link",elem:"button",onclick:_,children:(F,z)=>{var be=dg(),ce=E(be);ge(ce,()=>({"--size":"20px"})),we(ce.lastChild,{name:"bin"}),g(F,be)},$$slots:{default:!0}})};B(U,ne=>{(e.url||e.title)&&ne(Z)})}Zt("submit",S,ne=>{if(ne.preventDefault(),document.activeElement===n(s)){n(i)?.focus();return}let F=n(u).trim();F!==""&&/^[[a-zA-Z]+?:\/\//.test(F)===!1&&(F="https://"+F,f(u,F,!0)),e.onChangeUrl(F,n(c)),a(!1)}),g(w,S)},P=w=>{var S=ye(),A=E(S);{var G=O=>{var H=gg(),I=y(H);et(I,1,nt({h:!0}),"p-10m9vsg");var U=y(I);{var Z=ce=>{var K=fg(),R=y(K);gl(R,{get url(){return e.url}}),g(ce,K)};B(U,ce=>{n(o)&&ce(Z)})}var ne=N(U,2),F=y(ne),z=N(ne,2);et(z,1,nt({i:!0}),"p-10m9vsg");var be=y(z);ln(be,{title:"copy link",elem:"button",onclick:m,children:(ce,K)=>{var R=vg(),te=E(R);ge(te,()=>({"--size":"20px"})),we(te.lastChild,{name:"copy"}),g(ce,R)},$$slots:{default:!0}}),$e(I,ce=>f(d,ce),()=>n(d)),Ie(()=>{dt(ne,"href",e.url),ut(F,e.title||"unknown")}),g(O,H)};B(A,O=>{e.url&&O(G)},!0)}g(w,S)};B(p,w=>{a()?w(b):w(P,!1)})}$e(k,w=>f(l,w),()=>n(l)),g(t,k),ke()}ht(["click"]);const mg=t=>{let e="",a=!0;function r(o){for(let s=0;s<o.length;s++){const i=o[s];if(i.nodeName==="BR"){e+=`
`,a=!0;continue}i.nodeName==="DIV"&&a===!1&&(e+=`
`),a=!1,i.nodeType===3&&i.textContent&&(e+=i.textContent),r(i.childNodes)}}return r(t),e===`
`&&(e=e.slice(0,-1)),e},_g=()=>{const t=()=>{const a=new Set(["script","style","noscript","iframe","svg","canvas","meta","link","input","button","form"]),r=u=>{if(u.childNodes.length===0)return!1;for(const c of u.childNodes)if(c.nodeType===Node.TEXT_NODE&&c.textContent?.trim())return!0;return!1},o=Array.from({length:10},()=>({priority:0,text:""})),s=(u,c)=>({main:u.main||c.tagName.toLowerCase()==="main",article:u.article||c.tagName.toLowerCase()==="article",h1:u.h1||c.tagName.toLowerCase()==="h1",h2:u.h2||c.tagName.toLowerCase()==="h2",h3:u.h3||c.tagName.toLowerCase()==="h3"}),i=u=>{let c=0;return u.main&&(c+=1e3),u.article&&(c+=1e4),u.h1&&(c+=10),u.h2&&(c+=5),u.h3&&(c+=1),c},l=(u=document.body,c={main:!1,article:!1,h1:!1,h2:!1,h3:!1})=>{for(const d of u.childNodes)if(d.nodeType===Node.ELEMENT_NODE){if(a.has(d.tagName.toLowerCase()))continue;if(r(d)){const v=d.textContent;if(!v)continue;for(let h=0;h<o.length&&!o[h].text.includes(v||"");h++)if(v&&i(s(c,d))+v.length>o[h].priority){o.splice(h,0,{priority:i(s(c,d))+v.length,text:v.trim()}),o.pop();break}}else l(d,s(c,d))}};return l(),o};return{title:document.title||"",desctiption:document.querySelector('meta[name="description"]')?.getAttribute("content")||"",topTextContents:t()}},wg=async()=>await Zi().create({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}],temperature:.2,topK:2,initialPrompts:[{role:"system",content:`
						You are a tagging assistant.
						Your task is to suggest relevant tags for bookmarks.

						Rules:
						- Use page content by priority to generate relevant tags.
						- Focus on the main topics and themes of the page and note content.
						- Prefer short, lowercase, single-word tags.
						- Use only single words for tags, no phrases, you can split into multiple tags.
						- Avoid special characters in tags.
						- All tags must be in English.
						- Add common tags related to the content like "music", "article", "video", "tutorial", "blog", etc. if relevant.
						- Return 3 to 5 tags.
						- Output ONLY a JSON array of strings.
					`}]}),yg=async()=>typeof LanguageModel>"u"?"unavailable":await Zi().availability({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}]}),bg=t=>new Promise(e=>{Ds().tabs.query({active:!0,currentWindow:!0},async a=>{const r=a[0];if(!r||!r.id){e(void 0);return}if(r.url!==t){e(void 0);return}const s=(await Ds().scripting.executeScript({target:{tabId:r.id},world:"MAIN",func:_g}))[0]?.result;e(s)})}),Cg=async({llmSession:t,rejectedTags:e,accessPageData:a,text:r,link:o,tags:s})=>{const i=a&&o?.url?await bg(o.url):void 0,l={type:"object",properties:{tags:{type:"array",items:{type:"string"}}},required:["tags"]},u=`
			Page information:
			Title: ${o?.title||"N/A"}.
			URL: ${o?.url||"N/A"}.
			Description: ${i?.desctiption||"N/A"}.
			Note content: ${r||"N/A"}.
			Dont return tags: ${[...e.length>0?e:[],...s.length>0?s:[]].join(", ")||"N/A"}.
			Page contents: ${i?.topTextContents?i.topTextContents.slice(0,5).map(({priority:v,text:h})=>`priority: ${v}; text: ${h}

`).join(""):"N/A"}.
		`.slice(0,5e3),c=await t.prompt(u,{responseConstraint:l});return Array.from(new Set([...s,...(JSON.parse(c)?.tags||[]).map(v=>v.trim().toLowerCase()).filter(v=>v!=="")]))};var Sg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Add link',1),kg=C('<li class="p-1ljon4s"><!></li>'),xg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Edit link',1),Tg=C('<li class="p-1ljon4s"><!></li>'),Eg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy',1),Pg=C('<li class="p-1ljon4s"><!></li>'),Ng=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share link',1),Ag=C('<li class="p-1ljon4s"><!></li>'),Dg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),Mg=C('<li class="p-1ljon4s"><!></li>'),Ig=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Make copy',1),Lg=C('<li class="p-1ljon4s"><!></li>'),Rg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Duplicates',1),Fg=C('<li class="p-1ljon4s"><!></li>'),Og=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),zg=C('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),Bg=C('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),jg=C('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),Hg=C(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),Ug=C('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Wg=C("<!> <!> <!> <!> <!> <!> <!>",1),Vg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function zs(t,e){Se(e,!0);const{moveNoteToBin:a,moveNoteFromArchive:r,moveNoteToArchive:o,deleteNote:s,restoreNoteFromBin:i,checkDuplicatesExist:l,createNote:u}=Ot(),{clearDialogPages:c,replaceDialogPage:d,pushDialogPage:v}=Ft(),{setFeedSearch:h}=$a(),{checkMobileSize:m}=fa();let _=Oe(e,"mode",3,"notes"),k=Oe(e,"shownMenu",15),p=D(!1),b=D(!1),P=D(!1),w=D(!1),S=D(!1),A=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"});const G=async()=>{requestAnimationFrame(()=>{c(),setTimeout(()=>{a(e.noteId),tt("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId),v(`${Ee.Note}?id=${e.noteId}`)}}})},300)})},O=async()=>{o(e.noteId),tt("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{r(e.noteId)}}})},H=async()=>{r(e.noteId),tt("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{o(e.noteId)}}})},I=()=>{i(e.noteId),tt("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{a(e.noteId)}}})},U=()=>{n(b)?(f(b,!1),G()):n(S)?(f(S,!1),I()):n(P)?(f(P,!1),O()):n(w)&&(f(w,!1),H()),k(!1),f(p,!1)},Z=()=>{let ie="";e.link?.url&&(ie+=e.link.url+`
`),e.text&&(ie+=`
`+e.text+`
`),navigator.clipboard.writeText(ie),tt("Copied"),f(p,!0)},ne=()=>{f(p,!0),Ta({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{c(),await s(e.noteId)},onCancel:async()=>{}})},F=()=>{if(navigator.share){const ie={};let de="";e.link?.url&&(de+=e.link.url+`
`),e.text&&(de+=`
`+e.text+`
`),ie.text=de,navigator.share(ie).catch(De=>{console.error("Error sharing",De)})}f(p,!0)},z=()=>{if(navigator.share){const ie={};e.link?.url&&(ie.url=e.link.url),e.link?.title&&(ie.title=e.link.title),navigator.share(ie).catch(de=>{console.error("Error sharing",de)})}f(p,!0)},be=async()=>{f(p,!0);const ie=await u({link:yt(e.link),text:e.text||"",tags:e.tags?yt(e.tags):[]});d(`${Ee.Note}?id=${ie}`),tt("Copy made")},ce=()=>{f(p,!0),e.link?.url&&(c(),h(e.link?.url))};let K=!1;var R=ye(),te=E(R);{var fe=ie=>{var de=Vg(),De=E(de);{let Fe=T(()=>`calc(100% - ${m()?"0px":"16px"})`),he=T(()=>m()?"auto":"10px"),q=T(()=>m()?"10px":"auto");ge(De,()=>({"--bottom":"auto","--top":n(Fe),"--left":n(he),"--right":n(q)})),Mr(De.lastChild,{get startClose(){return n(p)},onClosed:U,isMobile:K,children:(ue,re)=>{var pe=Wg(),Pe=E(pe);{var ze=J=>{var se=kg(),ee=y(se);We(ee,{onClick:Y=>{e.onAddLinkClick(Y),f(p,!0)},dialogMode:K,children:(Y,oe)=>{var ae=Sg(),_e=E(ae);ge(_e,()=>({"--size":"20px"})),we(_e.lastChild,{name:"add"}),g(Y,ae)},$$slots:{default:!0}}),g(J,se)},me=J=>{var se=Tg(),ee=y(se);We(ee,{onClick:Y=>{e.onEditLinkClick(Y),f(p,!0)},dialogMode:K,children:(Y,oe)=>{var ae=xg(),_e=E(ae);ge(_e,()=>({"--size":"20px","--scale":"0.9"})),we(_e.lastChild,{name:"pen"}),g(Y,ae)},$$slots:{default:!0}}),g(J,se)};B(Pe,J=>{e.link?.url?J(me,!1):J(ze)})}var le=N(Pe,2);{var xe=J=>{var se=Pg(),ee=y(se);We(ee,{onClick:Z,dialogMode:K,children:(Y,oe)=>{var ae=Eg(),_e=E(ae);ge(_e,()=>({"--size":"20px"})),we(_e.lastChild,{name:"copy"}),g(Y,ae)},$$slots:{default:!0}}),g(J,se)};B(le,J=>{e.text&&J(xe)})}var $=N(le,2);{var Ne=J=>{var se=Ag(),ee=y(se);We(ee,{onClick:z,dialogMode:K,children:(Y,oe)=>{var ae=Ng(),_e=E(ae);{let Le=T(()=>e.text?"":"share");ge(_e,()=>({"--size":"20px"})),we(_e.lastChild,{get name(){return n(Le)}})}g(Y,ae)},$$slots:{default:!0}}),g(J,se)};B($,J=>{A&&e.link?.url&&J(Ne)})}var ve=N($,2);{var Ce=J=>{var se=Mg(),ee=y(se);We(ee,{onClick:F,dialogMode:K,children:(Y,oe)=>{var ae=Dg(),_e=E(ae);ge(_e,()=>({"--size":"20px"})),we(_e.lastChild,{name:"share"}),g(Y,ae)},$$slots:{default:!0}}),g(J,se)};B(ve,J=>{A&&e.text&&J(Ce)})}var x=N(ve,2);{var M=J=>{var se=Lg(),ee=y(se);We(ee,{onClick:be,dialogMode:K,children:(Y,oe)=>{var ae=Ig(),_e=E(ae);ge(_e,()=>({"--size":"20px","--scale":"0.8"})),we(_e.lastChild,{name:"note"}),g(Y,ae)},$$slots:{default:!0}}),g(J,se)};B(x,J=>{(e.text||e.link?.url)&&J(M)})}var L=N(x,2);{var W=J=>{var se=Fg(),ee=y(se);We(ee,{onClick:ce,dialogMode:K,children:(Y,oe)=>{var ae=Rg(),_e=E(ae);ge(_e,()=>({"--size":"20px"})),we(_e.lastChild,{name:""}),g(Y,ae)},$$slots:{default:!0}}),g(J,se)};B(L,J=>{e.link?.url&&l(e.noteId)&&J(W)})}var V=N(L,2);{var X=J=>{var se=ye(),ee=E(se);{var Y=oe=>{var ae=Bg(),_e=E(ae),Le=y(_e);We(Le,{onClick:()=>{f(P,_()==="notes"),f(w,_()==="archive"),f(p,!0)},dialogMode:K,children:(Ve,Re)=>{var Be=Og(),je=E(Be);{let _t=T(()=>_()==="archive"?"archive-cancel":"archive");ge(je,()=>({"--size":"20px","--scale":"0.9"})),we(je.lastChild,{get name(){return n(_t)}})}var He=N(je);Ie(()=>ut(He,` ${_()==="archive"?"Unarchive":"Archive"}`)),g(Ve,Be)},$$slots:{default:!0}});var Te=N(_e,2),Me=y(Te);We(Me,{onClick:()=>{f(b,!0),f(p,!0)},dialogMode:K,children:(Ve,Re)=>{var Be=zg(),je=E(Be),He=y(je);ge(He,()=>({"--size":"20px"})),we(He.lastChild,{name:"bin"}),g(Ve,Be)},$$slots:{default:!0}}),g(oe,ae)};B(ee,oe=>{(e.text||e.link?.url)&&oe(Y)})}g(J,se)},Q=J=>{var se=Ug(),ee=E(se),Y=y(ee);We(Y,{onClick:()=>{f(S,!0),f(p,!0)},dialogMode:K,children:(_e,Le)=>{var Te=jg(),Me=E(Te),Ve=y(Me);ge(Ve,()=>({"--size":"20px"})),we(Ve.lastChild,{name:"bin-cancel"}),g(_e,Te)},$$slots:{default:!0}});var oe=N(ee,2),ae=y(oe);We(ae,{onClick:ne,dialogMode:K,dangerous:!0,children:(_e,Le)=>{var Te=Hg(),Me=E(Te),Ve=y(Me);ge(Ve,()=>({"--size":"20px"})),we(Ve.lastChild,{name:"bin"}),g(_e,Te)},$$slots:{default:!0}}),g(J,se)};B(V,J=>{_()==="notes"||_()==="archive"?J(X):J(Q,!1)})}g(ue,pe)},$$slots:{default:!0}})}g(ie,de)};B(te,ie=>{k()&&ie(fe)})}g(t,R),ke()}var qg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Kg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Yg=C("<!> <!> <!> <!>",1),Gg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Xg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Jg=C("<!> <!> <!>",1),Zg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Qg=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),$g=C('<div class="a p-5sjfv5"><div class="b p-5sjfv5"><!></div> <div class="c p-5sjfv5"><!> <!></div></div>');function eh(t,e){Se(e,!0);let a=Oe(e,"pinned",15,!1);const{checkMobileSize:r}=fa(),{getSearchParams:o,getHref:s}=Ht();let i=D(!1);const l=()=>!e.deletedAt&&!e.archivedAt?"notes":e.archivedAt?"archive":"bin";var u=$g(),c=y(u),d=y(c);{var v=p=>{var b=Yg(),P=E(b);{let G=T(()=>a()?"unpin":"pin");ln(P,{get title(){return n(G)},elem:"button",onclick:()=>{a(!a())},children:(O,H)=>{var I=qg(),U=E(I);{let Z=T(()=>a()?"pin-cancel":"pin");ge(U,()=>({"--size":"20px"})),we(U.lastChild,{get name(){return n(Z)}})}g(O,I)},$$slots:{default:!0}})}var w=N(P,2);ln(w,{title:"menu",elem:"button",onclick:()=>{f(i,!0)},children:(G,O)=>{var H=Kg(),I=E(H);ge(I,()=>({"--size":"20px","--rotate":"90deg"})),we(I.lastChild,{name:"menu"}),g(G,H)},$$slots:{default:!0}});var S=N(w,2);{let G=T(l);zs(S,{get onAddLinkClick(){return e.onAddLinkClick},get onEditLinkClick(){return e.onEditLinkClick},nextFocusRef:null,get mode(){return n(G)},get tags(){return e.tags},get noteId(){return e.noteId},get text(){return e.text},get link(){return e.link},get shownMenu(){return n(i)},set shownMenu(O){f(i,O,!0)}})}var A=N(S,2);B(A,G=>{}),g(p,b)},h=p=>{var b=Jg(),P=E(b);ln(P,{title:"menu",elem:"button",onclick:()=>{f(i,!0)},children:(A,G)=>{var O=Gg(),H=E(O);ge(H,()=>({"--size":"24px","--rotate":"90deg"})),we(H.lastChild,{name:"menu"}),g(A,O)},$$slots:{default:!0}});var w=N(P,2);{let A=T(l);zs(w,{get onAddLinkClick(){return e.onAddLinkClick},get onEditLinkClick(){return e.onEditLinkClick},nextFocusRef:null,get mode(){return n(A)},get tags(){return e.tags},get noteId(){return e.noteId},get text(){return e.text},get link(){return e.link},get shownMenu(){return n(i)},set shownMenu(G){f(i,G,!0)}})}var S=N(w,2);{let A=T(()=>a()?"unpin":"pin");ln(S,{get title(){return n(A)},elem:"button",onclick:()=>{a(!a())},children:(G,O)=>{var H=Xg(),I=E(H);{let U=T(()=>a()?"pin-cancel":"pin");ge(I,()=>({"--size":"24px"})),we(I.lastChild,{get name(){return n(U)}})}g(G,H)},$$slots:{default:!0}})}g(p,b)};B(d,p=>{r()?p(v):p(h,!1)})}var m=N(c,2),_=y(m);ln(_,{title:"previous",elem:"button",disabled:!0,onclick:()=>{console.log("prev")},children:(p,b)=>{var P=Zg(),w=E(P);ge(w,()=>({"--size":"20px"})),we(w.lastChild,{name:"prev"}),g(p,P)},$$slots:{default:!0}});var k=N(_,2);ln(k,{title:"next",elem:"button",disabled:!0,onclick:()=>{console.log("next")},children:(p,b)=>{var P=Qg(),w=E(P);ge(w,()=>({"--size":"20px"})),we(w.lastChild,{name:"next"}),g(p,P)},$$slots:{default:!0}}),g(t,u),ke()}var th=C('<div class="e p-vlmfrv">Note</div>'),nh=C("<span> </span>"),ah=C('<div class="i p-vlmfrv"><!></div>'),rh=C('<!> <!> <div class="a p-vlmfrv"><div class="b"><div class="c"><div class="d p-vlmfrv"><!> <div class="f p-vlmfrv" role="textbox" aria-label="note" tabindex="0" contenteditable="true" placeholder="Note"> </div></div></div></div> <div class="g h p-vlmfrv"><!> <div class="j p-vlmfrv"><!></div></div></div>',1);function oh(t,e){Se(e,!0);const{getLlmTagsEnabled:a,getPrevTags:r,getPageDataForTagsEnabled:o}=Na(),{pushDialogPage:s}=Ft();let i=Oe(e,"link",15,void 0),l=Oe(e,"text",15,""),u=Oe(e,"tags",31,()=>ft([])),c=Oe(e,"pinned",11,!1),d=D(null),v=D(!1),h=D(!1),m=D(ft(new Set)),_=D(!1);const k=re=>{const pe=mg(re.currentTarget.childNodes);l(pe)},p=re=>{re.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(n(v)&&(f(v,!1),re.preventDefault(),re.stopPropagation()),n(h)&&(f(h,!1),re.preventDefault(),re.stopPropagation()))};Ae(()=>(document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)));const b=(re,pe)=>{i({url:re,title:pe})},P=()=>{i(void 0)},w=re=>{u(re)},S=r(),A=()=>{u([...new Set([...u(),...S])])},G=l();Ae(()=>{if(n(d)){if((xn||Hn)&&(e.mode==="edit"||navigator.userActivation.isActive===!1))return;n(d).focus();const re=document.createRange();re.selectNodeContents(n(d)),re.collapse(!1);const pe=window.getSelection();pe?.removeAllRanges(),pe?.addRange(re)}});let O=D("unknown");Ae(()=>{(async()=>f(O,await yg(),!0))()});let H=T(a),I=null;const U=async()=>I||(I=await wg(),I),Z=async()=>{if(n(O)==="downloadable"||n(O)==="downloading"){s(Ee.Extension);return}f(_,!0);const re=await U();u(await Cg({llmSession:re,text:l(),link:i(),accessPageData:o(),rejectedTags:Array.from(n(m)),tags:u()})),f(_,!1)};Ae(()=>{const re=pe=>{if(pe.preventDefault(),!pe.clipboardData)return;l(pe.clipboardData.getData("text/plain"));const Pe=window.getSelection();if(Pe&&Pe.rangeCount>0){const ze=Pe.getRangeAt(0);ze.deleteContents(),ze.insertNode(document.createTextNode(l())),ze.collapse(!1),Pe.removeAllRanges(),Pe.addRange(ze)}};return document.addEventListener("paste",re),()=>{document.removeEventListener("paste",re)}});var ne=rh(),F=E(ne);eh(F,{get noteId(){return e.noteId},get link(){return i()},get pinned(){return c()},get text(){return l()},get tags(){return u()},get deletedAt(){return e.deletedAt},get archivedAt(){return e.archivedAt},onAddLinkClick:()=>{f(h,!0)},onEditLinkClick:()=>{f(h,!0)}});var z=N(F,2);{let re=T(()=>i()?.url||""),pe=T(()=>i()?.title||"");pg(z,{get url(){return n(re)},get title(){return n(pe)},onChangeUrl:b,onDeleteUrl:P,get shownUrlInput(){return n(h)},set shownUrlInput(Pe){f(h,Pe,!0)}})}var be=N(z,2),ce=y(be),K=y(ce),R=y(K),te=y(R);{var fe=re=>{var pe=th();g(re,pe)};B(te,re=>{l()||re(fe)})}var ie=N(te,2);ie.__input=k;var de=y(ie);$e(ie,re=>f(d,re),()=>n(d));var De=N(ce,2),Fe=y(De);{var he=re=>{var pe=ah(),Pe=y(pe);{var ze=me=>{var le=nh(),xe=y(le);Ie($=>ut(xe,`updated: ${$??""}`),[()=>new Date(e.updatedAt).toLocaleString()]),g(me,le)};B(Pe,me=>{e.updatedAt&&me(ze)})}g(re,pe)};B(Fe,re=>{e.mode==="edit"&&re(he)})}var q=N(Fe,2),ue=y(q);{let re=T(()=>n(H)&&n(O)!=="unknown"&&n(O)!=="unavailable"),pe=T(()=>e.mode==="add"&&S.length>0);vl(ue,{get selectedTags(){return u()},onRejectedTag:Pe=>{f(m,new Set([...n(m),Pe]),!0)},onChangeTags:w,get genTagsEnabled(){return n(re)},onGenTags:Z,get generatingTags(){return n(_)},onUsePreviousTags:A,get previousTagsEnabled(){return n(pe)},get shownTagInput(){return n(v)},set shownTagInput(Pe){f(v,Pe,!0)}})}Ie(()=>ut(de,G)),g(t,ne),ke()}ht(["input"]);function sh(t,e){Se(e,!0);const{isInitedNotes:a,createNote:r,updateNote:o,deleteNote:s,getNoteById:i,pinNote:l}=Ot(),{getViewMode:u,setPrevTags:c}=Na(),{deleteSearchParam:d,getSearchParams:v}=Ht(),{replaceDialogPage:h}=Ft();let m=D("loading"),_=D("idle"),k=D(""),p=D(void 0),b=D(""),P=D(!1),w=D(ft([]));const S=()=>{{const U=v().get("url"),Z=v().get("title"),ne=v().get("text");U&&f(p,{url:U,title:Z||""},!0),ne&&(!U&&Jo(ne)?f(p,{url:ne,title:Z||new URL(ne).hostname},!0):f(b,ne,!0)),d("url"),d("title"),d("text"),f(m,"finish");return}},A=T(()=>a()&&n(m)==="finish"),G=async()=>{if(n(p)?.title||n(p)?.url||n(b)||n(w).length>0){if(n(k)){const U=i(n(k));if(!U?.data)return;if((U.data.link?.url!==n(p)?.url||U.data.link?.title!==n(p)?.title||U.data.text!==n(b)||JSON.stringify(U.data.tags)!==JSON.stringify(n(w)))&&n(_)==="idle"){f(_,"loading");try{await o(n(k),{link:ha(n(p)),text:n(b),tags:n(w).slice()})}finally{f(_,"idle")}}}else if(n(_)==="idle"){f(_,"loading");try{f(k,await r({link:ha(n(p)),text:n(b),tags:n(w).slice()}),!0),h(`${Ee.NewNote}?id=${n(k)}`)}catch(U){console.error("Error creating note:",U)}finally{f(_,"idle")}}}else if(n(k)&&n(_)==="idle"){f(_,"loading");try{await s(n(k)),f(k,""),h(`${Ee.NewNote}`)}finally{f(_,"idle")}}};Ye(()=>{n(A)&&n(_)!=="loading"&&G()}),Ye(()=>{n(A)&&n(_)!=="loading"&&n(k)&&(n(P),jt(()=>{i(n(k))?.data.pinned!==n(P)&&l(n(k),n(P))}))}),Ae(()=>{S()}),Ae(()=>()=>{n(w).length>0&&c([...n(w)])});var O=ye(),H=E(O);{var I=U=>{{let Z=T(()=>i(n(k))?.data.deletedAt),ne=T(()=>i(n(k))?.data.archivedAt);oh(U,{get deletedAt(){return n(Z)},get archivedAt(){return n(ne)},get noteId(){return n(k)},mode:"add",get link(){return n(p)},set link(F){f(p,F,!0)},get text(){return n(b)},set text(F){f(b,F,!0)},get tags(){return n(w)},set tags(F){f(w,F,!0)},get pinned(){return n(P)},set pinned(F){f(P,F,!0)}})}};B(H,U=>{n(A)&&U(I)})}g(t,O),ke()}const ih="modulepreload",lh=function(t){return"/"+t},Bs={},St=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let u=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=u(a.map(c=>{if(c=lh(c),c in Bs)return;Bs[c]=!0;const d=c.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${v}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":ih,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((m,_)=>{h.addEventListener("load",m),h.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var ch=C('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function dh(t){var e=ch(),a=N(y(e),2);Lt(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=Ke("Reload");g(r,s)},$$slots:{default:!0}}),g(t,e)}var uh=C('<div class="p-uzefkz"><!></div>');function fh(t,e){Se(e,!0);let a=D(!1);const{getDialogPageHeight:r}=ds(),o=T(r);Ae(()=>{const u=setTimeout(()=>{f(a,!0)},250);return()=>{clearTimeout(u)}});var s=uh(),i=y(s);{var l=u=>{La(u,{})};B(i,u=>{n(a)&&u(l)})}Ie(()=>Qa(s,`min-height: ${n(o)??""}px;`)),g(t,s),ke()}function Dt(t,e){Se(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>St(()=>import("./aC3n5dqsc.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>St(()=>import("./aBn8OIcVh.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>St(()=>import("./aBTPtZPSk.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>St(()=>import("./aBStwjGSk.js"),__vite__mapDeps([8,9])),"./Pages/ChangeTags.svelte":()=>St(()=>import("./aCDRfwdfD.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>St(()=>import("./aD_g7pMnc.js"),__vite__mapDeps([10,4,3,11,12])),"./Pages/Exit.svelte":()=>St(()=>import("./aC38Fvf-S.js"),__vite__mapDeps([13,14])),"./Pages/ExportData.svelte":()=>St(()=>import("./aB6ZZ9WUi.js"),__vite__mapDeps([15,16,17,18,19,20])),"./Pages/Extension.svelte":()=>St(()=>import("./aBfEPBLL2.js"),__vite__mapDeps([21,18,19,22])),"./Pages/ImportData.svelte":()=>St(()=>import("./aCzSbBh8x.js"),__vite__mapDeps([23,24])),"./Pages/Install.svelte":()=>St(()=>import("./aDncFDR1y.js"),__vite__mapDeps([25,26])),"./Pages/InstallSuccess.svelte":()=>St(()=>import("./aB10fEhcj.js"),__vite__mapDeps([27,28])),"./Pages/Note.svelte":()=>St(()=>import("./aBcgoVMEB.js"),__vite__mapDeps([29,30])),"./Pages/Settings.svelte":()=>St(()=>import("./arX12ex3S.js"),__vite__mapDeps([31,18,19,16,17,32])),"./Pages/Signin.svelte":()=>St(()=>import("./aB9sn1iM1.js"),__vite__mapDeps([33,4,3,11,34])),"./Pages/Signup.svelte":()=>St(()=>import("./aDdOnm9Xm.js"),__vite__mapDeps([35,11,4,3,34])),"./Pages/Subscription.svelte":()=>St(()=>import("./aO1IdFdpb.js"),__vite__mapDeps([36,37])),"./Pages/Sync.svelte":()=>St(()=>import("./aBYLO1bQT.js"),__vite__mapDeps([38,39]))}),o=async l=>{const u=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[u]){const c=r[u]();return a[l]={promise:c},a[l].module=await c,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=ye(),i=E(s);Kc(i,()=>o(e.page),l=>{fh(l,{})},(l,u)=>{const c=T(()=>n(u).default);var d=ye(),v=E(d);Jc(v,()=>n(c),(h,m)=>{m(h,{get params(){return e.params},get hidden(){return e.hidden}})}),g(l,d)},l=>{dh(l)}),g(t,s),ke()}var tr,pl,ml;class vh{constructor(e){Ge(this,tr);zt(this,"data");zt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),ct(this,tr,pl).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,ct(this,tr,ml).call(this)),e}isEmpty(){return this.data.length===0}}tr=new WeakSet,pl=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},ml=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class gh{constructor(e,a){zt(this,"heap");zt(this,"done");zt(this,"cache",[]);this.heap=new vh(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var hh=C("<span>Back to notes</span>"),ph=C('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),mh=C("<span>Back to notes</span>"),_h=C('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),wh=C('<p class="f">No notes in bin</p>'),yh=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),bh=C('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),Ch=C('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),Sh=C('<div class="e p-1jdj5w3"><!></div>'),kh=C('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),xh=C('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),Th=C('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function Eh(t,e){Se(e,!0);const{getCountDialog:a}=Qt(),{getScrollContainer:r}=vo(),{createHandleClickDialogPage:o,createDialogPageHref:s}=Ft(),{getSelectedTags:i}=Vn(),{getFeedOrder:l}=Hi(),{checkNotesInArchive:u,checkNotesInBin:c,checkNotes:d,isInitedNotes:v}=Ot(),{getSelectedMetaTags:h}=fo(),{replaceSearchParams:m,getHref:_}=Ht();$a();const{getFiltredNotesLength:k,getFiltredNotes:p,getUpdatedFiltredNotesTimestamp:b}=Ia(),{getFeedSearch:P}=$a();let w="keyboard",S=T(h),A=T(k),G=T(p),O=T(b),H=T(v),I=54,U=D(0),Z=D(0),ne=D(0),F=D(null),z=T(r),be=null,ce=null,K=T(()=>n(S).has(ot.ARCHIVED)?"archive":n(S).has(ot.BIN)?"bin":"notes");const R=T(i);Ye(()=>{n(R),n(De),n(z)?.scrollTo(0,0)});const{enable:te}=cs(),fe=()=>{te(),be||(be=requestAnimationFrame(()=>{const ve=n(z)?.scrollTop||0;f(ne,ve,!0);const Ce=Math.ceil(n(U)/I);f(Z,Math.floor(ve/(I*Ce))*(I*Ce)),be=null}))},ie=()=>{ce||(ce=requestAnimationFrame(()=>{f(U,window.innerHeight-180||0,!0);const ve=n(z)?.scrollTop||0;f(ne,ve,!0);const Ce=Math.ceil(n(U)/I);f(Z,Math.floor(ve/(I*Ce))*(I*Ce)),ce=null}))};Ae(()=>{const ve=Ce=>{if(!(!Iv()&&qr()===void 0)&&!(a()>0)&&(Ce.key==="ArrowDown"||Ce.key==="ArrowUp")){if(Ce.preventDefault(),Ce.key==="ArrowDown"){const x=qr(),M=n(q).findIndex(V=>V.id===x),L=Pe(),W=ze();if(!x||M===-1)vn(L?.id);else if(M<=W.index&&M>=L.index)Fs()&&M!==-1&&pe(M+1)&&n(z)&&(n(z).scrollTop=Math.floor(n(z).scrollTop/I)*I+I);else if(M>W.index&&!pe(M-1)&&pe(M)){n(z)&&(n(z).scrollTop=Math.ceil(n(z).scrollTop/I)*I+I);const V=Fs();vn(V)}else vn(L?.id)}else if(Ce.key==="ArrowUp"){const x=qr(),M=n(q).findIndex(V=>V.id===x),L=Pe(),W=ze();if(!x||M===-1)vn(W?.id);else if(M<=W.index&&M>=L.index)Os()&&M!==-1&&pe(M-1)&&n(z)&&(n(z).scrollTop=Math.ceil(n(z).scrollTop/I)*I-I);else if(M<L.index&&!pe(M+1)&&pe(M)){n(z)&&(n(z).scrollTop=n(re)+M*I-I);const V=Os();vn(V)}else vn(W?.id)}hl()||Zo()}};return document.addEventListener("keydown",ve),()=>{document.removeEventListener("keydown",ve)}}),Ae(()=>{ie(),fe()});const de=()=>{fe()};Ye(()=>{P()!==""&&w==="keyboard"&&(vn(Pe().id),Zo())}),Ye(()=>(n(z)?.addEventListener("scroll",de),window.addEventListener("resize",ie),()=>{n(z)?.removeEventListener("scroll",de),window.removeEventListener("resize",ie)}));const De=T(l);Ye(()=>{n(De),n(O),f(F,new gh(n(G),(ve,Ce)=>{if(!ve||!Ce||!ve.data||!Ce.data)return 0;if(ve.data.pinned&&!Ce.data.pinned)return-1;if(!ve.data.pinned&&Ce.data.pinned)return 1;if(ve.data.pinned&&Ce.data.pinned){if(ve.data.pinned<Ce.data.pinned)return 1;if(ve.data.pinned>Ce.data.pinned)return-1}const x=(M,L)=>M.data.text||L.data.text?(M.data.text||"").localeCompare(L.data.text||""):(M.data.link?.title||"").localeCompare(L.data.link?.title||"");switch(n(De)){case"newest":return ve.data.createdAt<Ce.data.createdAt?1:ve.data.createdAt>Ce.data.createdAt?-1:x(ve,Ce);case"oldest":return ve.data.createdAt>Ce.data.createdAt?1:ve.data.createdAt<Ce.data.createdAt?-1:x(ve,Ce);case"AtoZ":return x(ve,Ce);case"ZtoA":return x(Ce,ve);case"updatedNewest":return ve.data.updatedAt<Ce.data.updatedAt?1:ve.data.updatedAt>Ce.data.updatedAt?-1:x(ve,Ce);default:return 0}}),!0)});const Fe=T(()=>n(A)*I);let q=T(()=>{n(O);const ve=Math.ceil(n(U)/I);let Ce=Math.floor(n(Z)/I);return Ce=Ce-Math.min(Ce,ve),n(F)?.get(Ce,Ce+ve*3)||[]}),ue=T(()=>I*Math.ceil(n(U)/I));const re=T(()=>n(Z)-Math.min(n(Z),n(ue))),pe=ve=>ve*I<n(ne)-n(re)-I/2||ve*I>n(ne)-n(re)+Math.floor(n(U)/I)*I,Pe=()=>{for(let ve=0;ve<n(q).length;ve++)if(!pe(ve))return{index:ve,id:n(q)[ve].id};return{index:-1,id:void 0}},ze=()=>{for(let ve=n(q).length-1;ve>=0;ve--)if(!pe(ve))return{index:ve,id:n(q)[ve].id};return{index:-1,id:void 0}};Ae(()=>{document.addEventListener("mousemove",()=>{w="mouse"}),document.addEventListener("keydown",()=>{w="keyboard"})});var me=Th(),le=y(me),xe=y(le);{var $=ve=>{La(ve,{})},Ne=ve=>{var Ce=ye(),x=E(Ce);{var M=W=>{var V=ph(),X=N(E(V),2),Q=y(X);{let J=T(()=>_(""));Lt(Q,{element:"a",get href(){return n(J)},onClick:se=>{se.preventDefault(),m("")},children:(se,ee)=>{var Y=hh();g(se,Y)},$$slots:{default:!0}})}g(W,V)},L=W=>{var V=ye(),X=E(V);{var Q=se=>{var ee=_h(),Y=N(E(ee),2),oe=y(Y);{let ae=T(()=>_(""));Lt(oe,{element:"a",get href(){return n(ae)},onClick:_e=>{_e.preventDefault(),m("")},children:(_e,Le)=>{var Te=mh();g(_e,Te)},$$slots:{default:!0}})}g(se,ee)},J=se=>{var ee=ye(),Y=E(ee);{var oe=_e=>{var Le=Sh(),Te=y(Le);{var Me=Re=>{var Be=wh();g(Re,Be)},Ve=Re=>{var Be=Ch(),je=y(Be),He=y(je);{let st=T(()=>s(Ee.NewNote)),lt=T(()=>o(Ee.NewNote));Lt(He,{element:"a",get href(){return n(st)},get onClick(){return n(lt)},children:(pt,En)=>{var Tt=yh(),At=E(Tt);ge(At,()=>({"--size":"18px","--color":"#b0b0b0"})),we(At.lastChild,{name:"plus"}),g(pt,Tt)},$$slots:{default:!0}})}var _t=N(je,4),at=y(_t);{let st=T(()=>s(Ee.ImportData)),lt=T(()=>o(Ee.ImportData));Lt(at,{element:"a",get href(){return n(st)},get onClick(){return n(lt)},children:(pt,En)=>{var Tt=bh(),At=E(Tt);ge(At,()=>({"--size":"18px","--color":"#b0b0b0"})),we(At.lastChild,{name:"import"}),g(pt,Tt)},$$slots:{default:!0}})}g(Re,Be)};B(Te,Re=>{n(K)==="bin"?Re(Me):Re(Ve,!1)})}g(_e,Le)},ae=_e=>{var Le=ye(),Te=E(Le);{var Me=Re=>{var Be=kh();g(Re,Be)},Ve=Re=>{var Be=xh(),je=y(Be);zn(je,23,()=>n(q),He=>He.data,(He,_t,at)=>{var st=ye(),lt=E(st);{var pt=En=>{{let Tt=T(()=>n(q)[n(at)+1]?.id),At=T(()=>n(q)[n(at)-1]?.id),mo=T(()=>pe(n(at))),_o=T(()=>(n(at)+5)*I<n(ne)-n(re)-I/2||(n(at)+5)*I>n(ne)-n(re)+Math.floor(n(U)/I)*I);qv(En,{get nextNoteId(){return n(Tt)},get prevNoteId(){return n(At)},get mode(){return n(K)},get focusHidden(){return n(mo)},get showMenuUp(){return n(_o)},get noteId(){return n(_t).id},get noteData(){return n(_t).data}})}};B(lt,En=>{n(_t).data&&En(pt)})}g(He,st)}),Ie(He=>{Qa(Be,He),Qa(je,`transform: translateY(${n(re)??""}px);`)},[()=>`--minHeight: ${Math.max((n(Fe)>n(U),n(Fe)),0)}px`]),g(Re,Be)};B(Te,Re=>{n(q).length===0?Re(Me):Re(Ve,!1)},!0)}g(_e,Le)};B(Y,_e=>{!c()&&!u()&&!d()?_e(oe):_e(ae,!1)},!0)}g(se,ee)};B(X,se=>{n(K)==="archive"&&!u()?se(Q):se(J,!1)},!0)}g(W,V)};B(x,W=>{n(K)==="bin"&&!c()?W(M):W(L,!1)},!0)}g(ve,Ce)};B(xe,ve=>{n(H)?ve(Ne,!1):ve($)})}g(t,me),ke()}var Ph=C('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function Nh(t){var e=Ph(),a=N(E(e),2),r=y(a);Eh(r,{}),g(t,e)}function Ah(t,e){Se(e,!0);const a=qn();let r=Oe(e,"animationRef",7),o=Oe(e,"dialog",7);fl(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let c=0,d=0,v=()=>1;if(r().current){r().current.pause();let m=Number(r().current.currentTime);yr()&&(m=Number(m)+50,r().current.currentTime=Math.min(Math.max(Bn-1,m),m));const _=r().current.effect?.getComputedTiming().progress||0;v=()=>_,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(m=>requestAnimationFrame(m)),d=1-v();const h=d*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-d)*.1}`),a.swipingRatio=Math.abs(1-d)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${h}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:c,currentPosition:h,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:c,width:d})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-c/d)*.1}`),o().style.transform=`translate3d(${c}px, 0, 0)`,a.swipingRatio=Math.abs(1-c/d)*25)},onFinish:({swipeVelocity:c,currentPosition:d,width:v,actionThreshold:h,initialPosition:m})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const _=()=>Math.abs(m+d)/v*100;let k=null;if(c<=-la?k="open":c>=la?k="close":k=Math.abs(_())>h?"close":"open",r().progress=ul(_()/100),k==="close"){const p=(1-(r().progress||0))*Bn;a.duration=p/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const p=(r().progress||1)*Bn;a.duration=p/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),ke()}var Dh=C('<div class="d p-8xr118"> </div>'),Mh=C('<button class="e f p-8xr118"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Ih=C('<a class="e g p-8xr118"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Lh=C('<div><div class="a p-8xr118"><div class="b p-8xr118"><div class="c p-8xr118"><!> <!> <!></div></div></div> <!> <!></div>'),Rh=C("<dialog><!></dialog> <!>",1);function Fh(t,e){Se(e,!0);const{isScrolling:a,enable:r}=cs();let o=D(null),s=D(null),i={};const l=qn(),{checkLeftEnd:u,checkLeftStart:c,setLeftEnd:d,setLeftStart:v,getCountDialog:h}=Qt(),m=T(c),_=T(u);let k=T(()=>l.working);const p=()=>{e.dialogState!=="opened"&&e.onStartOpening()},b=()=>{e.onClose()},P=()=>{e.onSwipe()},w=ne=>{ne.preventDefault(),b()};Ae(()=>(n(o)?.addEventListener("close",b),n(o)?.addEventListener("cancel",w),()=>{n(o)?.removeEventListener("close",b),n(o)?.removeEventListener("cancel",w)})),Ye(()=>{h()>0&&(l.swipingRatio=25)}),Ye(()=>{e.dialogState==="opening"?jt(()=>{requestAnimationFrame(()=>{if(!n(o))return;const ne=(i.progress||1)*Bn,F=n(o).style.transform||`translate3d(${n(m)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const z=n(o)?.animate([{transform:F},{transform:"translate3d(0, 0, 0)"}],{duration:ne,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=z,z&&(z.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ia().duration,z.cancel(),i.current=void 0,i.progress=void 0,n(m)&&v(!1)})})}):e.dialogState==="closing"&&jt(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const ne=(1-(i.progress||0))*Bn,F=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const z=n(o)?.animate([{transform:F},{transform:`translate3d(${n(_)?"-100%":"100%"}, 0, 0)`}],{duration:ne,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=z,z&&(z.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ia().duration,z.cancel(),i.current=void 0,i.progress=void 0,n(_)&&d(!1)})})})});const S=()=>{r()},A=T(a);Ae(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),yr()&&n(o).getBoundingClientRect(),!n(k)){e.onOpened();return}e.onStartOpening()}});var G=Rh(),O=E(G),H=y(O);{var I=ne=>{var F=Lh(),z=y(F),be=y(z),ce=y(be),K=y(ce);{var R=q=>{var ue=Dh(),re=y(ue);Ie(()=>ut(re,e.title)),g(q,ue)};B(K,q=>{e.title&&q(R)})}var te=N(K,2);{var fe=q=>{var ue=Mh();ue.__click=b;var re=y(ue);ge(re,()=>({"--size":"28px"})),we(re.lastChild,{name:"back"});var pe=N(re,2);mt(pe,{children:(Pe,ze)=>{var me=Ke("back");g(Pe,me)}}),g(q,ue)};B(te,q=>{e.blocked||q(fe)})}var ie=N(te,2);{var de=q=>{var ue=Ih();ue.__click=function(...Pe){e.onOpenWindow?.apply(this,Pe)};var re=y(ue);ge(re,()=>({"--scale":"0.7","--size":"28px"})),we(re.lastChild,{name:"open-window"});var pe=N(re,2);mt(pe,{children:(Pe,ze)=>{var me=Ke("open window");g(Pe,me)}}),Ie(()=>dt(ue,"href",e.openWindowHref)),g(q,ue)};B(ie,q=>{e.onOpenWindow&&q(de)})}var De=N(z,2);Ue(De,()=>e.children);var Fe=N(De,2);{var he=q=>{go(q,{})};B(Fe,q=>{e.dialogState==="opened"&&q(he)})}$e(F,q=>f(s,q),()=>n(s)),Ie(()=>et(F,1,nt({o:!0,p:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-8xr118")),Zt("scroll",F,S),g(ne,F)};B(H,ne=>{e.dialogState!=="preOpening"&&ne(I)})}$e(O,ne=>f(o,ne),()=>n(o));var U=N(O,2);{var Z=ne=>{Ah(ne,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:p,onClose:b,onSwipe:P,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};B(U,ne=>{n(s)&&!n(A)&&!e.blocked&&!e.hidden&&ne(Z)})}Ie(()=>et(O,1,nt({h:!0,i:n(k),j:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",k:e.hidden,l:e.dialogState==="opened",m:n(m),n:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-8xr118")),g(t,G),ke()}ht(["click"]);function Oh(t,e){Se(e,!0);let a=Oe(e,"hidden",3,!1),r=Oe(e,"onClosed",3,()=>{}),o=D(0);Ae(()=>{const b=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",b),b(),()=>{window.removeEventListener("resize",b)}});const{dialogDec:s,dialogInc:i}=Qt(),l=qn();Ae(()=>(i(),()=>{s()}));let u=D("closed");const c=()=>{f(u,"opening")},d=()=>{f(u,"swiping")},v=()=>{f(u,"opened")},h=()=>{e.onClose(),f(u,"closing")},m=()=>{f(u,"closed"),r()()};Ye(()=>{e.shown&&n(u)==="closed"?f(u,"preOpening"):!e.shown&&n(u)==="opened"&&f(u,"closing")}),Ye(()=>{n(u)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(u)==="opened"||n(u)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var _=ye(),k=E(_);{var p=b=>{Fh(b,{get dialogWidth(){return n(o)},get dialogState(){return n(u)},get title(){return e.title},onStartOpening:c,onOpened:v,onClose:h,onClosed:m,onSwipe:d,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(P,w)=>{var S=ye(),A=E(S);Ue(A,()=>e.children),g(P,S)},$$slots:{default:!0}})};B(k,b=>{n(u)!=="closed"&&b(p)})}g(t,_),ke()}const zh=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};Ae(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Ae(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Bh=C('<button class="c d p-zlbg3d"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),jh=C('<div class="e p-zlbg3d"> </div>'),Hh=C('<button class="c f p-zlbg3d"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Uh=C('<dialog><div><div class="a p-zlbg3d"><div class="b p-zlbg3d"><div><!></div> <!> <div><!></div></div></div> <div class="g p-zlbg3d"><!></div></div> <!></dialog> <!>',1);function Wh(t,e){Se(e,!0);let a=Oe(e,"blockedDialog",3,!1),r=Oe(e,"hiddenDialog",3,!1),o=Oe(e,"isDesktopAnimationOff",3,!1),s=D(null),i=D(null),l=D(!1),u=D(null);zh({getDialog:()=>n(s),onOpen:()=>e.onOpen(),onStartClose:()=>e.onStartClose(),onClose:()=>e.onClose()});const c=qn();Ye(()=>{e.stateDialog==="closing"&&(c.working?n(i)?.addEventListener("transitionend",()=>{n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:d}=ds(),v=T(d);Ae(()=>{setTimeout(()=>{f(l,!0)},50)});var h=Uh(),m=E(h),_=y(m),k=y(_),p=y(k),b=y(p),P=y(b);{var w=F=>{var z=Bh();z.__click=()=>{e.onStartBack()};var be=y(z);ge(be,()=>({"--size":"24px"})),we(be.lastChild,{name:"back"});var ce=N(be,2);mt(ce,{children:(K,R)=>{var te=Ke("back");g(K,te)}}),g(F,z)};B(P,F=>{(!(a()||r())||a())&&e.onStartBack&&F(w)})}var S=N(b,2);{var A=F=>{var z=jh(),be=y(z);Ie(()=>ut(be,e.title)),g(F,z)};B(S,F=>{e.title&&F(A)})}var G=N(S,2),O=y(G);{var H=F=>{var z=Hh();z.__click=()=>{e.onStartClose()};var be=y(z);ge(be,()=>({"--size":"24px"})),we(be.lastChild,{name:"close"});var ce=N(be,2);mt(ce,{children:(K,R)=>{var te=Ke("close");g(K,te)}}),g(F,z)};B(O,F=>{a()||r()||F(H)})}var I=N(k,2),U=y(I);Ue(U,()=>e.children),$e(_,F=>f(i,F),()=>n(i));var Z=N(_,2);go(Z,{get ref(){return n(u)},set ref(F){f(u,F,!0)}}),$e(m,F=>f(s,F),()=>n(s));var ne=N(m,2);us(ne,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose},get notificationRef(){return n(u)},set notificationRef(F){f(u,F,!0)}}),Ie(()=>{et(m,1,nt({h:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o(),m:r()}),"p-zlbg3d"),Qa(_,`height: ${n(v)+74}px`),et(_,1,nt({n:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o()}),"p-zlbg3d")}),g(t,h),ke()}ht(["click"]);const Vh=({onStartClose:t,onClosed:e})=>{let a=D("close");return{get state(){return n(a)},set state(i){f(a,i,!0)},handleStartClose:(i=!1)=>{i||(f(a,"closing"),t?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function qh(t,e){Se(e,!0);let a=Oe(e,"blockedDialog",3,!1),r=Oe(e,"hiddenDialog",3,!1),o=Oe(e,"onStartClose",3,()=>{}),s=Oe(e,"onClosed",3,()=>{}),i=Vh({onStartClose:()=>o()(),onClosed:()=>s()()});const{dialogDec:l,dialogInc:u}=Qt();Ae(()=>(u(),()=>{l()})),Ye(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const c=m=>{m.key==="Escape"&&a()&&(m.preventDefault(),m.stopPropagation())};Ae(()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}));var d=ye(),v=E(d);{var h=m=>{Wh(m,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(_,k)=>{var p=ye(),b=E(p);Ue(b,()=>e.children),g(_,p)},$$slots:{default:!0}})};B(v,m=>{i.state!=="close"&&m(h)})}g(t,d),ke()}const js=(t,e=Je,a=Je,r)=>{let o=Er(()=>Il(r?.(),!1));var s=ye(),i=E(s);{var l=c=>{Ct(c,{children:(d,v)=>{Dt(d,{get hidden(){return n(o)},get page(){return Ee.Settings}})},$$slots:{default:!0}})},u=c=>{var d=ye(),v=E(d);{var h=_=>{Ct(_,{children:(k,p)=>{sh(k,{})},$$slots:{default:!0}})},m=_=>{var k=ye(),p=E(k);{var b=w=>{Ct(w,{children:(S,A)=>{Dt(S,{get params(){return a()},get hidden(){return n(o)},get page(){return Ee.Note}})},$$slots:{default:!0}})},P=w=>{var S=ye(),A=E(S);{var G=H=>{Ct(H,{children:(I,U)=>{Dt(I,{get hidden(){return n(o)},get page(){return Ee.ImportData}})},$$slots:{default:!0}})},O=H=>{var I=ye(),U=E(I);{var Z=F=>{Ct(F,{children:(z,be)=>{Dt(z,{get hidden(){return n(o)},get page(){return Ee.ExportData}})},$$slots:{default:!0}})},ne=F=>{var z=ye(),be=E(z);{var ce=R=>{Ct(R,{children:(te,fe)=>{cg(te,{})},$$slots:{default:!0}})},K=R=>{var te=ye(),fe=E(te);{var ie=De=>{Ct(De,{children:(Fe,he)=>{Dt(Fe,{get hidden(){return n(o)},get page(){return Ee.Install}})},$$slots:{default:!0}})},de=De=>{var Fe=ye(),he=E(Fe);{var q=re=>{Ct(re,{children:(pe,Pe)=>{Dt(pe,{get hidden(){return n(o)},get page(){return Ee.InstallSuccess}})},$$slots:{default:!0}})},ue=re=>{var pe=ye(),Pe=E(pe);{var ze=le=>{Ct(le,{children:(xe,$)=>{Dt(xe,{get hidden(){return n(o)},get page(){return Ee.Auth}})},$$slots:{default:!0}})},me=le=>{var xe=ye(),$=E(xe);{var Ne=Ce=>{Ct(Ce,{children:(x,M)=>{Dt(x,{get hidden(){return n(o)},get page(){return Ee.Signup}})},$$slots:{default:!0}})},ve=Ce=>{var x=ye(),M=E(x);{var L=V=>{Ct(V,{children:(X,Q)=>{Dt(X,{get hidden(){return n(o)},get page(){return Ee.Signin}})},$$slots:{default:!0}})},W=V=>{var X=ye(),Q=E(X);{var J=ee=>{Ct(ee,{children:(Y,oe)=>{Dt(Y,{get hidden(){return n(o)},get page(){return Ee.AccessKeys}})},$$slots:{default:!0}})},se=ee=>{var Y=ye(),oe=E(Y);{var ae=Le=>{Ct(Le,{children:(Te,Me)=>{Dt(Te,{get hidden(){return n(o)},get page(){return Ee.Account}})},$$slots:{default:!0}})},_e=Le=>{var Te=ye(),Me=E(Te);{var Ve=Be=>{Ct(Be,{children:(je,He)=>{Dt(je,{get hidden(){return n(o)},get page(){return Ee.ConfirmAccessKey}})},$$slots:{default:!0}})},Re=Be=>{var je=ye(),He=E(je);{var _t=st=>{Ct(st,{children:(lt,pt)=>{Dt(lt,{get hidden(){return n(o)},get page(){return Ee.Exit}})},$$slots:{default:!0}})},at=st=>{var lt=ye(),pt=E(lt);{var En=Tt=>{var At=ye(),mo=E(At);{var _o=Ra=>{Ct(Ra,{children:(Ir,fs)=>{Dt(Ir,{get hidden(){return n(o)},get page(){return Ee.Sync}})},$$slots:{default:!0}})},_l=Ra=>{var Ir=ye(),fs=E(Ir);{var wl=Fa=>{Ct(Fa,{children:(Lr,vs)=>{Dt(Lr,{get hidden(){return n(o)},get page(){return Ee.Subscription}})},$$slots:{default:!0}})},yl=Fa=>{var Lr=ye(),vs=E(Lr);{var bl=Oa=>{Ct(Oa,{children:(wo,Sl)=>{Dt(wo,{get hidden(){return n(o)},get page(){return Ee.About}})},$$slots:{default:!0}})},Cl=Oa=>{Ct(Oa,{children:(wo,Sl)=>{rg(wo,{})},$$slots:{default:!0}})};B(vs,Oa=>{e()===Ee.About?Oa(bl):Oa(Cl,!1)},!0)}g(Fa,Lr)};B(fs,Fa=>{e()===Ee.Subscription?Fa(wl):Fa(yl,!1)},!0)}g(Ra,Ir)};B(mo,Ra=>{e()===Ee.Sync?Ra(_o):Ra(_l,!1)},!0)}g(Tt,At)};B(pt,Tt=>{e(),Ee.Extension,Tt(En,!1)},!0)}g(st,lt)};B(He,st=>{e()===Ee.Exit?st(_t):st(at,!1)},!0)}g(Be,je)};B(Me,Be=>{e()===Ee.ConfirmAccessKey?Be(Ve):Be(Re,!1)},!0)}g(Le,Te)};B(oe,Le=>{e()===Ee.Account?Le(ae):Le(_e,!1)},!0)}g(ee,Y)};B(Q,ee=>{e()===Ee.AccessKeys?ee(J):ee(se,!1)},!0)}g(V,X)};B(M,V=>{e()===Ee.Signin?V(L):V(W,!1)},!0)}g(Ce,x)};B($,Ce=>{e()===Ee.Signup?Ce(Ne):Ce(ve,!1)},!0)}g(le,xe)};B(Pe,le=>{e()===Ee.Auth?le(ze):le(me,!1)},!0)}g(re,pe)};B(he,re=>{e()===Ee.InstallSuccess?re(q):re(ue,!1)},!0)}g(De,Fe)};B(fe,De=>{e()===Ee.Install?De(ie):De(de,!1)},!0)}g(R,te)};B(be,R=>{e()===Ee.AccountSetup?R(ce):R(K,!1)},!0)}g(F,z)};B(U,F=>{e()===Ee.ExportData?F(Z):F(ne,!1)},!0)}g(H,I)};B(A,H=>{e()===Ee.ImportData?H(G):H(O,!1)},!0)}g(w,S)};B(p,w=>{e()===Ee.Note?w(b):w(P,!1)},!0)}g(_,k)};B(v,_=>{e()===Ee.NewNote?_(h):_(m,!1)},!0)}g(c,d)};B(i,c=>{e()===Ee.Settings?c(l):c(u,!1)})}g(t,s)};var Kh=C("<!> <!>",1);function Yh(t,e){Se(e,!0);let a=T(()=>({...e.openWindowHref?{openWindowHref:e.openWindowHref}:{},...e.onOpenWindow?{onOpenWindow:e.onOpenWindow}:{}}));const{checkBlockedDialog:r,checkClosableDialog:o}=Qt(),{sidebarClose:s,getSidebarState:i}=Ar(),l=T(r),u=T(o),{getDialogPages:c}=Ft(),{getAccount:d}=ls();let v=T(c),h=T(()=>d()!==void 0);const{checkMobileSize:m}=fa();let _=D(ft([]));const k=T(m),{clearDialogPages:p,popDialogPage:b}=Ft(),{checkLeftStart:P}=Qt();let w=T(P);Ye(()=>{c().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const S=()=>{b()},A=()=>{p()};Ye(()=>{n(v),n(k),jt(()=>{if(n(k))n(v).length>=n(_).length||n(w)?f(_,n(v).map(F=>({page:F,shown:!0})),!0):f(_,n(_).map((F,z)=>({page:F.page,shown:z<n(v).length})),!0);else if(n(v).length>=n(_).length)f(_,n(v).map(F=>({page:F,shown:!0})),!0);else{if(n(v).length===0){f(_,[{page:n(_)[n(_).length-1].page,shown:!1}],!0);return}f(_,n(v).map(F=>({page:F,shown:!0})),!0)}})});const G=()=>{f(_,n(v).map(F=>({page:F,shown:!0})),!0)};var O=Kh(),H=E(O);{var I=F=>{Nh(F)};B(H,F=>{n(h)&&F(I)})}var U=N(H,2);{var Z=F=>{var z=ye(),be=E(z);zn(be,19,()=>n(_),ce=>ce.page.split("?")[0],(ce,K,R)=>{const te=T(()=>n(K).page.split("?")[1]),fe=T(()=>n(K).page.split("?")[0]),ie=T(()=>n(R)!==n(_).length-1&&!!n(_)[n(R)+1]?.shown),de=T(()=>n(R)===0);{let De=T(()=>As[n(fe)]||""),Fe=T(()=>n(l)||n(de)&&!n(u)),he=T(()=>({...n(fe)!==Ee.NewNote&&n(fe)!==Ee.Note?n(a):{}}));Oh(ce,zo({get shown(){return n(K).shown},get title(){return n(De)},get hidden(){return n(ie)},get blocked(){return n(Fe)},onClose:S,onClosed:G},()=>n(he),{children:(q,ue)=>{js(q,()=>n(fe),()=>n(te),()=>n(ie))},$$slots:{default:!0}}))}}),g(F,z)},ne=F=>{var z=ye(),be=E(z);{var ce=K=>{const R=T(()=>n(_)[n(_).length-1].page.split("?")[1]),te=T(()=>n(_)[n(_).length-1].page.split("?")[0]),fe=T(()=>n(_)[n(_).length-1].shown),ie=T(()=>n(_).length===1);{let de=T(()=>As[n(te)]||""),De=T(()=>n(l)||!n(u)),Fe=T(()=>n(l)||n(ie)?void 0:S);qh(K,{get shownDialog(){return n(fe)},get title(){return n(de)},get blockedDialog(){return n(De)},hiddenDialog:!1,get onStartBack(){return n(Fe)},onStartClose:A,onClosed:G,children:(he,q)=>{js(he,()=>n(te),()=>n(R))},$$slots:{default:!0}})}};B(be,K=>{n(_).length>0&&K(ce)},!0)}g(F,z)};B(U,F=>{m()?F(Z):F(ne,!1)})}g(t,O),ke()}function Gh(t,e){Se(e,!1);let a=0;Ae(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),ss(),ke()}const Xh=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var Jh=C('<div><button class="d p-bn1wva"><!> <span class="e p-bn1wva"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),Zh=C('<!> <!> <!> <!> <main><div class="a p-bn1wva"><div class="b p-bn1wva"><!></div></div> <div class="c p-bn1wva"><!></div></main> <!>',1);function Qh(t,e){Se(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=Ht(),{hasDialogPage:s}=Ft(),{setScrollContainer:i}=vo(),{getAccount:l,init:u}=ls(),{isInitedNotes:c}=Ot(),{isInitedSettings:d}=Na(),{getDialogPages:v}=Ft(),{createBroadcastChannel:h,tabId:m}=uo(),_=h(),{getSidebarState:k}=Ar(),{setClosableDialog:p}=Qt(),{getViewMode:b}=Na(),P=()=>{Xh()?a(`${tn}=${Ee.AccountSetup}`):a(`${tn}=${Ee.Install}`)};Ae(()=>{u(Ne=>{Ne===void 0?P():(s(Ee.AccountSetup)&&a(""),Ne?f(O,Ne):f(O,null))});const $=async Ne=>{const ve=JSON.parse(Ne.data);if(ve.tabId&&ve.tabId===m)return;const Ce=ve;Ce.type==="initLocalAccount"||Ce.type==="initCloudAccount"||Ce.type==="updateAccount"||Ce.type==="disconnectCloudAccount"?a(""):Ce.type==="exit"&&P()};return _.addEventListener($),()=>_.removeEventListener($)});const w=qn();Ae(async()=>{await new Promise($=>setTimeout($,60)),await Ai(),w.working=!0});let S=D(!1),A=0,G=T(()=>v().length>0),O=T(l),H=T(c),I=T(d),U=D(null);const Z=()=>{n(U)&&n(U).scrollTo({top:0})};Ye(()=>{p(n(O)!==void 0)}),Ye(()=>{i(n(U))});const ne=()=>{if(n(U)){const $=n(U).scrollTop||0;$===0?f(S,!1):!n(S)&&A>$?f(S,!0):n(S)&&A+50<$&&f(S,!1),A=$}},F=()=>{ne()};Ye(()=>(n(U)?.addEventListener("scroll",F),window.addEventListener("resize",F),()=>{n(U)?.removeEventListener("scroll",F),window.removeEventListener("resize",F)}));const z=T(k);let be=T(()=>w.swipingRatio);const ce=()=>{const $=new URLSearchParams(o());return r($)},K=async $=>{$.preventDefault()},R=T(b),te=T(()=>n(R)==="popup"||n(R)==="sidebar"?{onOpenWindow:K,openWindowHref:ce()}:{});var fe=Zh(),ie=E(fe);Gh(ie,{});var de=N(ie,2);Fu(de,{});var De=N(de,2);go(De,{});var Fe=N(De,2);af(Fe,{});var he=N(Fe,2),q=y(he),ue=y(q),re=y(ue);{var pe=$=>{tg($,zo(()=>n(te)))};B(re,$=>{n(I)&&n(O)!==void 0&&$(pe)})}var Pe=N(q,2),ze=y(Pe);{var me=$=>{Yh($,zo(()=>n(te)))};B(ze,$=>{n(H)&&n(I)&&$(me)})}$e(he,$=>f(U,$),()=>n(U));var le=N(he,2);{var xe=$=>{var Ne=Jh(),ve=y(Ne);ve.__click=Z;var Ce=y(ve);mt(Ce,{children:(L,W)=>{var V=Ke("top");g(L,V)}});var x=N(Ce,2),M=y(x);ge(M,()=>({"--rotate":"90deg","--size":"28px"})),we(M.lastChild,{name:"back"}),Ie(()=>{Qa(Ne,`--swiping-ratio: ${n(be)}; --transition-timing-default: ${w.duration}s;`),et(Ne,1,nt({i:!0,g:w.working&&!w.isSwiping,j:n(G)||n(z)!=="closed"}),"p-bn1wva")}),g($,Ne)};B(le,$=>{n(S)&&$(xe)})}Ie(()=>{Qa(he,`--swiping-ratio: ${n(be)}; --transition-timing-default: ${w.duration}s;`),et(he,1,nt({f:!0,g:w.working&&!w.isSwiping,h:n(z)!=="closed"}),"p-bn1wva")}),g(t,fe),ke()}ht(["click"]);function $h(t){lu(t,{children:(e,a)=>{Qh(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Uc($h,{target:document.getElementById("app")});export{yt as $,T as A,Lt as B,Ht as C,ls as D,ss as E,Cr as F,Zt as G,sg as H,we as I,Ot as J,fa as K,La as L,Na as M,vl as N,Zi as O,Ee as P,Ds as Q,Xn as R,$e as S,ip as T,sp as U,mt as V,_u as W,wu as X,tn as Y,yr as Z,jt as _,f as a,ha as a0,oh as a1,uo as a2,ap as a3,rp as a4,Xh as a5,np as a6,Oe as a7,Qa as a8,op as a9,D as b,y as c,ge as d,zn as e,C as f,n as g,dt as h,g as i,B as j,et as k,nt as l,ke as m,E as n,Ae as o,Se as p,ut as q,ht as r,N as s,Ie as t,Ft as u,Qt as v,ft as w,Ye as x,ye as y,Ke as z};
