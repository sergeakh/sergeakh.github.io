import{G as K,p as q,H as Q,f as O,e as V,r as k,J as B,K as U,s as b,t as F,b as y,g as n,M as X,N as Y,w as W,c as p,d as i,O as Z,n as G,v as ee,C as te,z as ae,i as se,u as re,j,o as oe,m as R,l as w,B as P,x as $,q as N,L as le}from"./TC5YU3Zo.js";const ne=h=>{const s=Math.floor(Date.now()/1e3),t={};h.forEach(e=>{const a=e.data.tags||["Imported"];if(a.length===0){t.ROOT||(t.ROOT=[]),t.ROOT.push(e);return}a.forEach(l=>{t[l]||(t[l]=[]),t[l].push(e)})});let o=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(t).forEach(e=>{e!=="ROOT"&&e!=="other"&&(o+=`
    <DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}">${e}</H3>
    <DL><p>`,t[e].forEach(a=>{const l=a.data.name.replace(/"/g,"&quot;");o+=`
        <DT><A HREF="${a.data.url}" ADD_DATE="${Math.floor(a.data.createdAt/1e3)||s}">${l}</A>`}),o+=`
    </DL><p>`)}),t.ROOT&&t.ROOT.forEach(e=>{const a=e.data.name.replace(/"/g,"&quot;");o+=`
    <DT><A HREF="${e.data.url}" ADD_DATE="${Math.floor(e.data.createdAt/1e3)||s}">${a}</A>`}),o+=`
</DL><p>`,t.other&&t.other.forEach(e=>{const a=e.data.name.replace(/"/g,"&quot;");o+=`
    <DT><A HREF="${e.data.url}" ADD_DATE="${Math.floor(e.data.createdAt/1e3)||s}">${a}</A>`}),o+="</DL><p>",o},ce=async h=>{const s="notes-export.json",t=JSON.stringify({notes:h}),o=new Blob([t],{type:"application/json"}),e=URL.createObjectURL(o),a=document.createElement("a");a.href=e,a.download=s,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(e)},0)},ie=(h,s,t)=>{s(h.target.value),t.onChange(s())};var de=O('<input type="radio"/> <label> </label>',1),ve=O('<div class="wrapper svelte-yu87bd"><fieldset class="switcher svelte-yu87bd"><!> <div class="wrapSwitcherStatus svelte-yu87bd"><div class="switcherStatus svelte-yu87bd"></div></div></fieldset></div>');function ue(h,s){const t=K();q(s,!0);let o=Q(s,"value",7);const e=`switcher-${t}`;var a=ve(),l=p(a),T=p(l);V(T,17,()=>s.items,d=>d.title,(d,v)=>{var C=de(),u=k(C);B(u,1,U(["vh","input"]),"svelte-yu87bd"),u.__change=[ie,o,s];var r=b(u,2);B(r,1,U(["switcherButton"]),"svelte-yu87bd");var m=p(r);F(()=>{y(u,"id",`${n(v).title}-${t}`),y(u,"name",e),X(u,n(v).value),Y(u,n(v).value===o()),y(u,"aria-label",n(v).title),y(r,"for",`${n(v).title}-${t}`),y(r,"title",n(v).title),y(r,"aria-label",n(v).title),W(m,n(v).title)}),i(d,C)});var H=b(T,2),S=p(H);F(d=>Z(S,d),[()=>`transform: translateX(${s.items.findIndex(d=>d.value===o())*100}%)`]),i(h,a),G()}ee(["change"]);var fe=O('<p class="message svelte-1rr554k">Export data</p> <div class="format-switcher svelte-1rr554k"><!> <p class="format-description svelte-1rr554k"><!></p></div> <div class="buttonContainer svelte-1rr554k"><!></div>',1),pe=O('<p class="message svelte-1rr554k">Exporting data...</p> <div class="buttonContainer svelte-1rr554k"><!></div>',1),he=O('<p class="message svelte-1rr554k">Data exported successfully!</p> <div class="buttonContainer svelte-1rr554k"><!></div>',1),me=O('<div class="content svelte-1rr554k"><!></div>');function ge(h,s){q(s,!0);const{getGetNotes:t,getGetMapNotes:o}=te(),{closeDialogStack:e}=ae(),{blockDialog:a}=se();let l=j("idle"),T=j("sync");const H=()=>{e()};re(()=>{a(n(l)==="loading")}),oe(()=>()=>{a(!1)});const S=async()=>{w(l,"loading"),setTimeout(async()=>{if(n(T)==="sync")await ce(t()()||[]).finally(async()=>{await new Promise(r=>setTimeout(r,500)),w(l,"success")});else try{const r=ne(o()()||new Map),m=new Blob([r],{type:"text/html"}),g=URL.createObjectURL(m),f=document.createElement("a");f.href=g,f.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(g),w(l,"success")}catch{w(l,"success")}},0)};var d=me(),v=p(d);{var C=r=>{var m=fe(),g=b(k(m),2),f=p(g);ue(f,{items:[{title:"Sync",value:"sync"},{title:"Bookmarks",value:"bookmarks"}],get value(){return n(T)},onChange:c=>{w(T,c,!0)}});var M=b(f,2),_=p(M);{var D=c=>{var E=$("App format for sync or backup");i(c,E)},x=c=>{var E=$("Browser bookmarks format (exports only bookmarks, not notes)");i(c,E)};R(_,c=>{n(T)==="sync"?c(D):c(x,!1)})}var A=b(g,2),L=p(A);P(L,{onClick:S,children:(c,E)=>{var I=$("Export");i(c,I)},$$slots:{default:!0}}),i(r,m)},u=r=>{var m=N(),g=k(m);{var f=_=>{var D=pe(),x=b(k(D),2),A=p(x);le(A,{}),i(_,D)},M=_=>{var D=N(),x=k(D);{var A=L=>{var c=he(),E=b(k(c),2),I=p(E);P(I,{onClick:H,children:(J,_e)=>{var z=$("Close");i(J,z)},$$slots:{default:!0}}),i(L,c)};R(x,L=>{n(l)==="success"&&L(A)},!0)}i(_,D)};R(g,_=>{n(l)==="loading"?_(f):_(M,!1)},!0)}i(r,m)};R(v,r=>{n(l)==="idle"?r(C):r(u,!1)})}i(h,d),G()}export{ge as default};
