const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/rTn9fzQl.js","a/BAW-HnOs.css","a/BuutRz2O.js","a/9q_jSmK4.js","a/bA9hIFUQ.js","a/Df0fAQHq.css","a/CV9Es3Ir.js","a/GKJynjgv.css","a/BG_ybiX3.js","a/BMjxyC5e.css","a/BCgrmG2v.js","a/DgPIJwnn.css","a/C1wSLy4F.js","a/B_UsPGEu.css","a/CPESMClp.js","a/Cpa8lgv9.js","a/C37ccwpw.js","a/j0KFa_-O.css","a/hu7yjlv8.css","a/DJOvs-XL.js","a/DOV6M5Hm.js","a/D_Du8inO.js","a/EZ_l8VDb.css","a/B_Zcg-eh.css","a/HOTUjnfJ.css","a/CFtnZ4ot.js","a/Bs6Vrlio.css","a/B2X1Sr9W.js","a/CCtlgutt.css","a/CuHa9L1E.js","a/DZNlfyYK.css","a/VbMfqZUS.js","a/CJkK19aw.css","a/C6OjO_O6.js","a/DlxBpJjD.css","a/CylPsmPr.js","a/DFZs3clB.js","a/DaxC3cdO.css","a/BmSHAoaR.js","a/Bib31qW-.css","a/Doh6VfQu.js","a/Br15UghP.css","a/DiJjkBbY.js","a/CTzb1Nvm.css"])))=>i.map(i=>d[i]);
var ai=Object.defineProperty;var Ya=t=>{throw TypeError(t)};var si=(t,e,n)=>e in t?ai(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lt=(t,e,n)=>si(t,typeof e!="symbol"?e+"":e,n),$r=(t,e,n)=>e.has(t)||Ya("Cannot "+n);var L=(t,e,n)=>($r(t,e,"read from private field"),n?n.call(t):e.get(t)),Se=(t,e,n)=>e.has(t)?Ya("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),le=(t,e,n,r)=>($r(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),He=(t,e,n)=>($r(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const hs=!1;var ya=Array.isArray,oi=Array.prototype.indexOf,ba=Array.from,oa=Object.defineProperty,In=Object.getOwnPropertyDescriptor,gs=Object.getOwnPropertyDescriptors,ii=Object.prototype,li=Array.prototype,Sa=Object.getPrototypeOf,Ka=Object.isExtensible;const xe=()=>{};function ci(t){return typeof t?.then=="function"}function ui(t){return t()}function ia(t){for(var e=0;e<t.length;e++)t[e]()}function ps(){var t,e,n=new Promise((r,s)=>{t=r,e=s});return{promise:n,resolve:t,reject:e}}function di(t,e,n=!1){return t===void 0?n?e():e:t}const Qe=2,ka=4,Hr=8,pn=16,Ht=32,_n=64,Ca=128,ft=256,Ir=512,Xe=1024,at=2048,Zt=4096,yt=8192,mn=16384,Ea=32768,Yn=65536,Xa=1<<17,fi=1<<18,Kn=1<<19,_s=1<<20,la=1<<21,Pa=1<<22,un=1<<23,dn=Symbol("$state"),vi=Symbol("legacy props"),hi=Symbol(""),Ln=new class extends Error{constructor(){super(...arguments);lt(this,"name","StaleReactionError");lt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ms(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function gi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function pi(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function _i(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function mi(t){throw new Error("https://svelte.dev/e/effect_orphan")}function wi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function yi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function bi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Si(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ki(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ci(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const jr=1,Ur=2,ws=4,Ei=8,Pi=16,xi=1,Ai=2,Di=4,Ti=8,Ni=16,Li=1,Ii=2,qe=Symbol(),Mi="http://www.w3.org/1999/xhtml";function Oi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Bi=!1;function ys(t){return t===this.v}function Ri(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function bs(t){return!Ri(t,this.v)}let Xn=!1,Fi=!1;function zi(){Xn=!0}let Ae=null;function jn(t){Ae=t}function Fe(t){return Ss().get(t)}function ze(t,e){return Ss().set(t,e),e}function ee(t,e=!1,n){Ae={p:Ae,c:null,e:null,s:t,x:null,l:Xn&&!e?{s:null,u:null,$:[]}:null}}function te(t){var e=Ae,n=e.e;if(n!==null){e.e=null;for(var r of n)Hs(r)}return t!==void 0&&(e.x=t),Ae=e.p,t??{}}function Gn(){return!Xn||Ae!==null&&Ae.l===null}function Ss(t){return Ae===null&&ms(),Ae.c??(Ae.c=new Map(Hi(Ae)||void 0))}function Hi(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let rn=[];function ks(){var t=rn;rn=[],ia(t)}function Gt(t){if(rn.length===0&&!Mn){var e=rn;queueMicrotask(()=>{e===rn&&ks()})}rn.push(t)}function ji(){for(;rn.length>0;)ks()}const Ui=new WeakMap;function Cs(t){var e=we;if(e===null)return he.f|=un,t;if((e.f&Ea)===0){if((e.f&Ca)===0)throw!e.parent&&t instanceof Error&&Es(t),t;e.b.error(t)}else Un(t,e)}function Un(t,e){for(;e!==null;){if((e.f&Ca)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&Es(t),t}function Es(t){const e=Ui.get(t);e&&(oa(t,"message",{value:e.message}),oa(t,"stack",{value:e.stack}))}const Cr=new Set;let De=null,xr=null,mt=null,ca=new Set,Dt=[],Vr=null,ua=!1,Mn=!1;var Rn,Fn,an,ir,zn,sn,Hn,lr,cr,vt,da,Ar,fa;const Rr=class Rr{constructor(){Se(this,vt);lt(this,"current",new Map);Se(this,Rn,new Map);Se(this,Fn,new Set);Se(this,an,0);Se(this,ir,null);Se(this,zn,[]);Se(this,sn,[]);Se(this,Hn,[]);Se(this,lr,[]);Se(this,cr,[]);lt(this,"skipped_effects",new Set)}process(e){Dt=[],xr=null,this.apply();for(const o of e)He(this,vt,da).call(this,o);if(L(this,an)===0){var n=mt;He(this,vt,fa).call(this);var r=L(this,zn),s=L(this,sn);le(this,zn,[]),le(this,sn,[]),le(this,Hn,[]),xr=this,De=null,mt=n,Ga(r),Ga(s),xr=null,L(this,ir)?.resolve()}else He(this,vt,Ar).call(this,L(this,zn)),He(this,vt,Ar).call(this,L(this,sn)),He(this,vt,Ar).call(this,L(this,Hn));mt=null}capture(e,n){L(this,Rn).has(e)||L(this,Rn).set(e,n),this.current.set(e,e.v),mt?.set(e,e.v)}activate(){De=this}deactivate(){De=null,mt=null}flush(){if(Dt.length>0){if(this.activate(),xs(),De!==null&&De!==this)return}else L(this,an)===0&&He(this,vt,fa).call(this);this.deactivate();for(const e of ca)if(ca.delete(e),e(),De!==null)break}increment(){le(this,an,L(this,an)+1)}decrement(){le(this,an,L(this,an)-1);for(const e of L(this,lr))Ze(e,at),hn(e);for(const e of L(this,cr))Ze(e,Zt),hn(e);this.flush()}add_callback(e){L(this,Fn).add(e)}settled(){return(L(this,ir)??le(this,ir,ps())).promise}static ensure(){if(De===null){const e=De=new Rr;Cr.add(De),Mn||Rr.enqueue(()=>{De===e&&e.flush()})}return De}static enqueue(e){Gt(e)}apply(){}};Rn=new WeakMap,Fn=new WeakMap,an=new WeakMap,ir=new WeakMap,zn=new WeakMap,sn=new WeakMap,Hn=new WeakMap,lr=new WeakMap,cr=new WeakMap,vt=new WeakSet,da=function(e){e.f^=Xe;for(var n=e.first;n!==null;){var r=n.f,s=(r&(Ht|_n))!==0,o=s&&(r&Xe)!==0,i=o||(r&yt)!==0||this.skipped_effects.has(n);if(!i&&n.fn!==null){s?n.f^=Xe:(r&ka)!==0?L(this,sn).push(n):Kr(n)&&((n.f&pn)!==0&&L(this,Hn).push(n),Br(n));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}},Ar=function(e){for(const n of e)((n.f&at)!==0?L(this,lr):L(this,cr)).push(n),Ze(n,Xe);e.length=0},fa=function(){var e;for(const n of L(this,Fn))n();if(L(this,Fn).clear(),Cr.size>1){L(this,Rn).clear();let n=!0;for(const r of Cr){if(r===this){n=!1;continue}const s=[];for(const[i,l]of this.current){if(r.current.has(i))if(n&&l!==r.current.get(i))r.current.set(i,l);else continue;s.push(i)}if(s.length===0)continue;const o=[...r.current.keys()].filter(i=>!this.current.has(i));if(o.length>0){for(const i of s)As(i,o);if(Dt.length>0){De=r,r.apply();for(const i of Dt)He(e=r,vt,da).call(e,i);Dt=[],r.deactivate()}}}De=null}Cr.delete(this)};let Mt=Rr;function Ps(t){var e=Mn;Mn=!0;try{for(var n;;){if(ji(),Dt.length===0&&(De?.flush(),Dt.length===0))return Vr=null,n;xs()}}finally{Mn=e}}function xs(){var t=Bn;ua=!0;try{var e=0;for(Qa(!0);Dt.length>0;){var n=Mt.ensure();if(e++>1e3){var r,s;Vi()}n.process(Dt),Kt.clear()}}finally{ua=!1,Qa(t),Vr=null}}function Vi(){try{wi()}catch(t){Un(t,Vr)}}let tn=null;function Ga(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(mn|yt))===0&&Kr(r)&&(tn=[],Br(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Vs(r):r.fn=null),tn?.length>0)){Kt.clear();for(const s of tn)Br(s);tn=[]}}tn=null}}function As(t,e){if(t.reactions!==null)for(const n of t.reactions){const r=n.f;(r&Qe)!==0?As(n,e):(r&(Pa|pn))!==0&&Ds(n,e)&&(Ze(n,at),hn(n))}}function Ds(t,e){if(t.deps!==null){for(const n of t.deps)if(e.includes(n)||(n.f&Qe)!==0&&Ds(n,e))return!0}return!1}function hn(t){for(var e=Vr=t;e.parent!==null;){e=e.parent;var n=e.f;if(ua&&e===we&&(n&pn)!==0)return;if((n&(_n|Ht))!==0){if((n&Xe)===0)return;e.f^=Xe}}Dt.push(e)}function qi(t){let e=0,n=Ft(0),r;return()=>{al()&&(a(n),Yr(()=>(e===0&&(r=ht(()=>t(()=>nr(n)))),e+=1,()=>{Gt(()=>{e-=1,e===0&&(r?.(),r=void 0,nr(n))})})))}}var Wi=Yn|Kn|Ca;function Yi(t,e,n){new Ki(t,e,n)}var gt,ut,wa,Et,on,Pt,dt,et,xt,Vt,ln,qt,cn,Wt,Fr,zr,Je,Xi,Gi,Dr,Tr,va;class Ki{constructor(e,n,r){Se(this,Je);lt(this,"parent");Se(this,gt,!1);Se(this,ut);Se(this,wa,null);Se(this,Et);Se(this,on);Se(this,Pt);Se(this,dt,null);Se(this,et,null);Se(this,xt,null);Se(this,Vt,null);Se(this,ln,0);Se(this,qt,0);Se(this,cn,!1);Se(this,Wt,null);Se(this,Fr,()=>{L(this,Wt)&&Ot(L(this,Wt),L(this,ln))});Se(this,zr,qi(()=>(le(this,Wt,Ft(L(this,ln))),()=>{le(this,Wt,null)})));le(this,ut,e),le(this,Et,n),le(this,on,r),this.parent=we.b,le(this,gt,!!L(this,Et).pending),le(this,Pt,Zn(()=>{we.b=this;{try{le(this,dt,_t(()=>r(L(this,ut))))}catch(s){this.error(s)}L(this,qt)>0?He(this,Je,Tr).call(this):le(this,gt,!1)}},Wi))}is_pending(){return L(this,gt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!L(this,Et).pending}update_pending_count(e){He(this,Je,va).call(this,e),le(this,ln,L(this,ln)+e),ca.add(L(this,Fr))}get_effect_pending(){return L(this,zr).call(this),a(L(this,Wt))}error(e){var n=L(this,Et).onerror;let r=L(this,Et).failed;if(L(this,cn)||!n&&!r)throw e;L(this,dt)&&(nt(L(this,dt)),le(this,dt,null)),L(this,et)&&(nt(L(this,et)),le(this,et,null)),L(this,xt)&&(nt(L(this,xt)),le(this,xt,null));var s=!1,o=!1;const i=()=>{if(s){Oi();return}s=!0,o&&Ci(),Mt.ensure(),le(this,ln,0),L(this,xt)!==null&&On(L(this,xt),()=>{le(this,xt,null)}),le(this,gt,this.has_pending_snippet()),le(this,dt,He(this,Je,Dr).call(this,()=>(le(this,cn,!1),_t(()=>L(this,on).call(this,L(this,ut)))))),L(this,qt)>0?He(this,Je,Tr).call(this):le(this,gt,!1)};var l=he;try{tt(null),o=!0,n?.(e,i),o=!1}catch(c){Un(c,L(this,Pt)&&L(this,Pt).parent)}finally{tt(l)}r&&Gt(()=>{le(this,xt,He(this,Je,Dr).call(this,()=>{le(this,cn,!0);try{return _t(()=>{r(L(this,ut),()=>e,()=>i)})}catch(c){return Un(c,L(this,Pt).parent),null}finally{le(this,cn,!1)}}))})}}gt=new WeakMap,ut=new WeakMap,wa=new WeakMap,Et=new WeakMap,on=new WeakMap,Pt=new WeakMap,dt=new WeakMap,et=new WeakMap,xt=new WeakMap,Vt=new WeakMap,ln=new WeakMap,qt=new WeakMap,cn=new WeakMap,Wt=new WeakMap,Fr=new WeakMap,zr=new WeakMap,Je=new WeakSet,Xi=function(){try{le(this,dt,_t(()=>L(this,on).call(this,L(this,ut))))}catch(e){this.error(e)}le(this,gt,!1)},Gi=function(){const e=L(this,Et).pending;e&&(le(this,et,_t(()=>e(L(this,ut)))),Mt.enqueue(()=>{le(this,dt,He(this,Je,Dr).call(this,()=>(Mt.ensure(),_t(()=>L(this,on).call(this,L(this,ut)))))),L(this,qt)>0?He(this,Je,Tr).call(this):(On(L(this,et),()=>{le(this,et,null)}),le(this,gt,!1))}))},Dr=function(e){var n=we,r=he,s=Ae;Tt(L(this,Pt)),tt(L(this,Pt)),jn(L(this,Pt).ctx);try{return e()}catch(o){return Cs(o),null}finally{Tt(n),tt(r),jn(s)}},Tr=function(){const e=L(this,Et).pending;L(this,dt)!==null&&(le(this,Vt,document.createDocumentFragment()),Ys(L(this,dt),L(this,Vt))),L(this,et)===null&&le(this,et,_t(()=>e(L(this,ut))))},va=function(e){var n;if(!this.has_pending_snippet()){this.parent&&He(n=this.parent,Je,va).call(n,e);return}le(this,qt,L(this,qt)+e),L(this,qt)===0&&(le(this,gt,!1),L(this,et)&&On(L(this,et),()=>{le(this,et,null)}),L(this,Vt)&&(L(this,ut).before(L(this,Vt)),le(this,Vt,null)),Gt(()=>{Mt.ensure().flush()}))};function Zi(t,e,n){const r=Gn()?fr:qr;if(e.length===0){n(t.map(r));return}var s=De,o=we,i=Ts();Promise.all(e.map(l=>Ji(l))).then(l=>{i();try{n([...t.map(r),...l])}catch(c){(o.f&mn)===0&&Un(c,o)}s?.deactivate(),Mr()}).catch(l=>{Un(l,o)})}function Ts(){var t=we,e=he,n=Ae,r=De;return function(){Tt(t),tt(e),jn(n),r?.activate()}}function Mr(){Tt(null),tt(null),jn(null)}function fr(t){var e=Qe|at,n=he!==null&&(he.f&Qe)!==0?he:null;return we===null||n!==null&&(n.f&ft)!==0?e|=ft:we.f|=Kn,{ctx:Ae,deps:null,effects:null,equals:ys,f:e,fn:t,reactions:null,rv:0,v:qe,wv:0,parent:n??we,ac:null}}function Ji(t,e){let n=we;n===null&&gi();var r=n.b,s=void 0,o=Ft(qe),i=!he,l=new Map;return ll(()=>{var c=ps();s=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(Mr)}catch(v){c.reject(v),Mr()}var u=De,d=r.is_pending();i&&(r.update_pending_count(1),d||(u.increment(),l.get(u)?.reject(Ln),l.delete(u),l.set(u,c)));const f=(v,g=void 0)=>{if(d||u.activate(),g)g!==Ln&&(o.f|=un,Ot(o,g));else{(o.f&un)!==0&&(o.f^=un),Ot(o,v);for(const[h,m]of l){if(l.delete(h),h===u)break;m.reject(Ln)}}i&&(r.update_pending_count(-1),d||u.decrement())};c.promise.then(f,v=>f(null,v||"unknown"))}),zs(()=>{for(const c of l.values())c.reject(Ln)}),new Promise(c=>{function u(d){function f(){d===s?c(o):u(s)}d.then(f,f)}u(s)})}function F(t){const e=fr(t);return Ks(e),e}function qr(t){const e=fr(t);return e.equals=bs,e}function Ns(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)nt(e[n])}}function Qi(t){for(var e=t.parent;e!==null;){if((e.f&Qe)===0)return e;e=e.parent}return null}function xa(t){var e,n=we;Tt(Qi(t));try{Ns(t),e=Js(t)}finally{Tt(n)}return e}function Ls(t){var e=xa(t);if(t.equals(e)||(t.v=e,t.wv=Gs()),!wn)if(mt!==null)mt.set(t,t.v);else{var n=(Yt||(t.f&ft)!==0)&&t.deps!==null?Zt:Xe;Ze(t,n)}}const Kt=new Map;function Ft(t,e){var n={f:0,v:t,reactions:null,equals:ys,rv:0,wv:0};return n}function V(t,e){const n=Ft(t);return Ks(n),n}function ha(t,e=!1,n=!0){var s;const r=Ft(t);return e||(r.equals=bs),Xn&&n&&Ae!==null&&Ae.l!==null&&((s=Ae.l).s??(s.s=[])).push(r),r}function w(t,e,n=!1){he!==null&&(!wt||(he.f&Xa)!==0)&&Gn()&&(he.f&(Qe|pn|Pa|Xa))!==0&&!Bt?.includes(t)&&ki();let r=n?Re(e):e;return Ot(t,r)}function Ot(t,e){if(!t.equals(e)){var n=t.v;wn?Kt.set(t,e):Kt.set(t,n),t.v=e;var r=Mt.ensure();r.capture(t,n),(t.f&Qe)!==0&&((t.f&at)!==0&&xa(t),Ze(t,(t.f&ft)===0?Xe:Zt)),t.wv=Gs(),Is(t,at),Gn()&&we!==null&&(we.f&Xe)!==0&&(we.f&(Ht|_n))===0&&(ct===null?dl([t]):ct.push(t))}return e}function nr(t){w(t,t.v+1)}function Is(t,e){var n=t.reactions;if(n!==null)for(var r=Gn(),s=n.length,o=0;o<s;o++){var i=n[o],l=i.f;if(!(!r&&i===we)){var c=(l&at)===0;c&&Ze(i,e),(l&Qe)!==0?Is(i,Zt):c&&((l&pn)!==0&&tn!==null&&tn.push(i),hn(i))}}}function Re(t){if(typeof t!="object"||t===null||dn in t)return t;const e=Sa(t);if(e!==ii&&e!==li)return t;var n=new Map,r=ya(t),s=V(0),o=fn,i=l=>{if(fn===o)return l();var c=he,u=fn;tt(null),es(o);var d=l();return tt(c),es(u),d};return r&&n.set("length",V(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&bi();var d=n.get(c);return d===void 0?d=i(()=>{var f=V(u.value);return n.set(c,f),f}):w(d,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const d=i(()=>V(qe));n.set(c,d),nr(s)}}else w(u,qe),nr(s);return!0},get(l,c,u){if(c===dn)return t;var d=n.get(c),f=c in l;if(d===void 0&&(!f||In(l,c)?.writable)&&(d=i(()=>{var g=Re(f?l[c]:qe),h=V(g);return h}),n.set(c,d)),d!==void 0){var v=a(d);return v===qe?void 0:v}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=n.get(c);d&&(u.value=a(d))}else if(u===void 0){var f=n.get(c),v=f?.v;if(f!==void 0&&v!==qe)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,c){if(c===dn)return!0;var u=n.get(c),d=u!==void 0&&u.v!==qe||Reflect.has(l,c);if(u!==void 0||we!==null&&(!d||In(l,c)?.writable)){u===void 0&&(u=i(()=>{var v=d?Re(l[c]):qe,g=V(v);return g}),n.set(c,u));var f=a(u);if(f===qe)return!1}return d},set(l,c,u,d){var f=n.get(c),v=c in l;if(r&&c==="length")for(var g=u;g<f.v;g+=1){var h=n.get(g+"");h!==void 0?w(h,qe):g in l&&(h=i(()=>V(qe)),n.set(g+"",h))}if(f===void 0)(!v||In(l,c)?.writable)&&(f=i(()=>V(void 0)),w(f,Re(u)),n.set(c,f));else{v=f.v!==qe;var m=i(()=>Re(u));w(f,m)}var p=Reflect.getOwnPropertyDescriptor(l,c);if(p?.set&&p.set.call(d,u),!v){if(r&&typeof c=="string"){var E=n.get("length"),C=Number(c);Number.isInteger(C)&&C>=E.v&&w(E,C+1)}nr(s)}return!0},ownKeys(l){a(s);var c=Reflect.ownKeys(l).filter(f=>{var v=n.get(f);return v===void 0||v.v!==qe});for(var[u,d]of n)d.v!==qe&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Si()}})}var Za,Ms,Os,Bs;function $i(){if(Za===void 0){Za=window,Ms=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Os=In(e,"firstChild").get,Bs=In(e,"nextSibling").get,Ka(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ka(n)&&(n.__t=void 0)}}function gn(t=""){return document.createTextNode(t)}function Vn(t){return Os.call(t)}function vr(t){return Bs.call(t)}function k(t,e){return Vn(t)}function R(t,e=!1){{var n=Vn(t);return n instanceof Comment&&n.data===""?vr(n):n}}function z(t,e=1,n=!1){let r=t;for(;e--;)r=vr(r);return r}function el(t){t.textContent=""}function Rs(){return!1}let Ja=!1;function tl(){Ja||(Ja=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Wr(t){var e=he,n=we;tt(null),Tt(null);try{return t()}finally{tt(e),Tt(n)}}function nl(t,e,n,r=n){t.addEventListener(e,()=>Wr(n));const s=t.__on_r;s?t.__on_r=()=>{s(),r(!0)}:t.__on_r=()=>r(!0),tl()}function Fs(t){we===null&&he===null&&mi(),he!==null&&(he.f&ft)!==0&&we===null&&_i(),wn&&pi()}function rl(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Nt(t,e,n,r=!0){var s=we;s!==null&&(s.f&yt)!==0&&(t|=yt);var o={ctx:Ae,deps:null,nodes_start:null,nodes_end:null,f:t|at,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Br(o),o.f|=Ea}catch(c){throw nt(o),c}else e!==null&&hn(o);if(r){var i=o;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Kn)===0&&(i=i.first),i!==null&&(i.parent=s,s!==null&&rl(i,s),he!==null&&(he.f&Qe)!==0&&(t&_n)===0)){var l=he;(l.effects??(l.effects=[])).push(i)}}return o}function al(){return he!==null&&!wt}function zs(t){const e=Nt(Hr,null,!1);return Ze(e,Xe),e.teardown=t,e}function Te(t){Fs();var e=we.f,n=!he&&(e&Ht)!==0&&(e&Ea)===0;if(n){var r=Ae;(r.e??(r.e=[])).push(t)}else return Hs(t)}function Hs(t){return Nt(ka|_s,t,!1)}function sl(t){return Fs(),Nt(Hr|_s,t,!0)}function ol(t){Mt.ensure();const e=Nt(_n|Kn,t,!0);return(n={})=>new Promise(r=>{n.outro?On(e,()=>{nt(e),r(void 0)}):(nt(e),r(void 0))})}function il(t){return Nt(ka,t,!1)}function ll(t){return Nt(Pa|Kn,t,!0)}function Yr(t,e=0){return Nt(Hr|e,t,!0)}function ce(t,e=[],n=[]){Zi(e,n,r=>{Nt(Hr,()=>t(...r.map(a)),!0)})}function Zn(t,e=0){var n=Nt(pn|e,t,!0);return n}function _t(t,e=!0){return Nt(Ht|Kn,t,!0,e)}function js(t){var e=t.teardown;if(e!==null){const n=wn,r=he;$a(!0),tt(null);try{e.call(null)}finally{$a(n),tt(r)}}}function Us(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&Wr(()=>{s.abort(Ln)});var r=n.next;(n.f&_n)!==0?n.parent=null:nt(n,e),n=r}}function cl(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Ht)===0&&nt(e),e=n}}function nt(t,e=!0){var n=!1;(e||(t.f&fi)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ul(t.nodes_start,t.nodes_end),n=!0),Us(t,e&&!n),Or(t,0),Ze(t,mn);var r=t.transitions;if(r!==null)for(const o of r)o.stop();js(t);var s=t.parent;s!==null&&s.first!==null&&Vs(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ul(t,e){for(;t!==null;){var n=t===e?null:vr(t);t.remove(),t=n}}function Vs(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function On(t,e,n=!0){var r=[];Aa(t,r,!0),qs(r,()=>{n&&nt(t),e&&e()})}function qs(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var s of t)s.out(r)}else e()}function Aa(t,e,n){if((t.f&yt)===0){if(t.f^=yt,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var s=r.next,o=(r.f&Yn)!==0||(r.f&Ht)!==0;Aa(r,e,o?n:!1),r=s}}}function Da(t){Ws(t,!0)}function Ws(t,e){if((t.f&yt)!==0){t.f^=yt,(t.f&Xe)===0&&(Ze(t,at),hn(t));for(var n=t.first;n!==null;){var r=n.next,s=(n.f&Yn)!==0||(n.f&Ht)!==0;Ws(n,s?e:!1),n=r}if(t.transitions!==null)for(const o of t.transitions)(o.is_global||e)&&o.in()}}function Ys(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var s=n===r?null:vr(n);e.append(n),n=s}}let Bn=!1;function Qa(t){Bn=t}let wn=!1;function $a(t){wn=t}let he=null,wt=!1;function tt(t){he=t}let we=null;function Tt(t){we=t}let Bt=null;function Ks(t){he!==null&&(Bt===null?Bt=[t]:Bt.push(t))}let Ke=null,rt=0,ct=null;function dl(t){ct=t}let Xs=1,ar=0,fn=ar;function es(t){fn=t}let Yt=!1;function Gs(){return++Xs}function Kr(t){var e=t.f;if((e&at)!==0)return!0;if((e&Zt)!==0){var n=t.deps,r=(e&ft)!==0;if(n!==null){var s,o,i=(e&Ir)!==0,l=r&&we!==null&&!Yt,c=n.length;if((i||l)&&(we===null||(we.f&mn)===0)){var u=t,d=u.parent;for(s=0;s<c;s++)o=n[s],(i||!o?.reactions?.includes(u))&&(o.reactions??(o.reactions=[])).push(u);i&&(u.f^=Ir),l&&d!==null&&(d.f&ft)===0&&(u.f^=ft)}for(s=0;s<c;s++)if(o=n[s],Kr(o)&&Ls(o),o.wv>t.wv)return!0}(!r||we!==null&&!Yt)&&Ze(t,Xe)}return!1}function Zs(t,e,n=!0){var r=t.reactions;if(r!==null&&!Bt?.includes(t))for(var s=0;s<r.length;s++){var o=r[s];(o.f&Qe)!==0?Zs(o,e,!1):e===o&&(n?Ze(o,at):(o.f&Xe)!==0&&Ze(o,Zt),hn(o))}}function Js(t){var m;var e=Ke,n=rt,r=ct,s=he,o=Yt,i=Bt,l=Ae,c=wt,u=fn,d=t.f;Ke=null,rt=0,ct=null,Yt=(d&ft)!==0&&(wt||!Bn||he===null),he=(d&(Ht|_n))===0?t:null,Bt=null,jn(t.ctx),wt=!1,fn=++ar,t.ac!==null&&(Wr(()=>{t.ac.abort(Ln)}),t.ac=null);try{t.f|=la;var f=t.fn,v=f(),g=t.deps;if(Ke!==null){var h;if(Or(t,rt),g!==null&&rt>0)for(g.length=rt+Ke.length,h=0;h<Ke.length;h++)g[rt+h]=Ke[h];else t.deps=g=Ke;if(!Yt||(d&Qe)!==0&&t.reactions!==null)for(h=rt;h<g.length;h++)((m=g[h]).reactions??(m.reactions=[])).push(t)}else g!==null&&rt<g.length&&(Or(t,rt),g.length=rt);if(Gn()&&ct!==null&&!wt&&g!==null&&(t.f&(Qe|Zt|at))===0)for(h=0;h<ct.length;h++)Zs(ct[h],t);return s!==null&&s!==t&&(ar++,ct!==null&&(r===null?r=ct:r.push(...ct))),(t.f&un)!==0&&(t.f^=un),v}catch(p){return Cs(p)}finally{t.f^=la,Ke=e,rt=n,ct=r,he=s,Yt=o,Bt=i,jn(l),wt=c,fn=u}}function fl(t,e){let n=e.reactions;if(n!==null){var r=oi.call(n,t);if(r!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[r]=n[s],n.pop())}}n===null&&(e.f&Qe)!==0&&(Ke===null||!Ke.includes(e))&&(Ze(e,Zt),(e.f&(ft|Ir))===0&&(e.f^=Ir),Ns(e),Or(e,0))}function Or(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)fl(t,n[r])}function Br(t){var e=t.f;if((e&mn)===0){Ze(t,Xe);var n=we,r=Bn;we=t,Bn=!0;try{(e&pn)!==0?cl(t):Us(t),js(t);var s=Js(t);t.teardown=typeof s=="function"?s:null,t.wv=Xs;var o;hs&&Fi&&(t.f&at)!==0&&t.deps}finally{Bn=r,we=n}}}async function Qs(){await Promise.resolve(),Ps()}function a(t){var e=t.f,n=(e&Qe)!==0;if(he!==null&&!wt){var r=we!==null&&(we.f&mn)!==0;if(!r&&!Bt?.includes(t)){var s=he.deps;if((he.f&la)!==0)t.rv<ar&&(t.rv=ar,Ke===null&&s!==null&&s[rt]===t?rt++:Ke===null?Ke=[t]:(!Yt||!Ke.includes(t))&&Ke.push(t));else{(he.deps??(he.deps=[])).push(t);var o=t.reactions;o===null?t.reactions=[he]:o.includes(he)||o.push(he)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&ft)===0&&(i.f^=ft)}if(wn){if(Kt.has(t))return Kt.get(t);if(n){i=t;var c=i.v;return((i.f&Xe)===0&&i.reactions!==null||$s(i))&&(c=xa(i)),Kt.set(i,c),c}}else if(n){if(i=t,mt?.has(i))return mt.get(i);Kr(i)&&Ls(i)}if(mt?.has(t))return mt.get(t);if((t.f&un)!==0)throw t.v;return t.v}function $s(t){if(t.v===qe)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Kt.has(e)||(e.f&Qe)!==0&&$s(e))return!0;return!1}function ht(t){var e=wt;try{return wt=!0,t()}finally{wt=e}}const vl=-7169;function Ze(t,e){t.f=t.f&vl|e}function hl(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(dn in t)ga(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&dn in n&&ga(n)}}}function ga(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{ga(t[r],e)}catch{}const n=Sa(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=gs(n);for(let s in r){const o=r[s].get;if(o)try{o.call(t)}catch{}}}}}const gl=["touchstart","touchmove"];function pl(t){return gl.includes(t)}const eo=new Set,pa=new Set;function _l(t,e,n,r={}){function s(o){if(r.capture||Qn.call(e,o),!o.cancelBubble)return Wr(()=>n?.call(this,o))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Gt(()=>{e.addEventListener(t,s,r)}):e.addEventListener(t,s,r),s}function Ta(t,e,n,r,s){var o={capture:r,passive:s},i=_l(t,e,n,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&zs(()=>{e.removeEventListener(t,i,o)})}function We(t){for(var e=0;e<t.length;e++)eo.add(t[e]);for(var n of pa)n(t)}let ts=null;function Qn(t){var e=this,n=e.ownerDocument,r=t.type,s=t.composedPath?.()||[],o=s[0]||t.target;ts=t;var i=0,l=ts===t&&t.__root;if(l){var c=s.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=s.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(o=s[i]||t.target,o!==e){oa(t,"currentTarget",{configurable:!0,get(){return o||n}});var d=he,f=we;tt(null),Tt(null);try{for(var v,g=[];o!==null;){var h=o.assignedSlot||o.parentNode||o.host||null;try{var m=o["__"+r];if(m!=null&&(!o.disabled||t.target===o))if(ya(m)){var[p,...E]=m;p.apply(o,[t,...E])}else m.call(o,t)}catch(C){v?g.push(C):v=C}if(t.cancelBubble||h===e||h===null)break;o=h}if(v){for(let C of g)queueMicrotask(()=>{throw C});throw v}}finally{t.__root=e,delete t.currentTarget,tt(d),Tt(f)}}}function to(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function sr(t,e){var n=we;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function W(t,e){var n=(e&Li)!==0,r=(e&Ii)!==0,s,o=!t.startsWith("<!>");return()=>{s===void 0&&(s=to(o?t:"<!>"+t),n||(s=Vn(s)));var i=r||Ms?document.importNode(s,!0):s.cloneNode(!0);if(n){var l=Vn(i),c=i.lastChild;sr(l,c)}else sr(i,i);return i}}function ml(t,e,n="svg"){var r=!t.startsWith("<!>"),s=`<${n}>${r?t:"<!>"+t}</${n}>`,o;return()=>{if(!o){var i=to(s),l=Vn(i);o=Vn(l)}var c=o.cloneNode(!0);return sr(c,c),c}}function wl(t,e){return ml(t,e,"svg")}function Oe(t=""){{var e=gn(t+"");return sr(e,e),e}}function G(){var t=document.createDocumentFragment(),e=document.createComment(""),n=gn();return t.append(e,n),sr(e,n),t}function _(t,e){t!==null&&t.before(e)}function ff(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function Rt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function yl(t,e){return bl(t,e)}const Nn=new Map;function bl(t,{target:e,anchor:n,props:r={},events:s,context:o,intro:i=!0}){$i();var l=new Set,c=f=>{for(var v=0;v<f.length;v++){var g=f[v];if(!l.has(g)){l.add(g);var h=pl(g);e.addEventListener(g,Qn,{passive:h});var m=Nn.get(g);m===void 0?(document.addEventListener(g,Qn,{passive:h}),Nn.set(g,1)):Nn.set(g,m+1)}}};c(ba(eo)),pa.add(c);var u=void 0,d=ol(()=>{var f=n??e.appendChild(gn());return Yi(f,{pending:()=>{}},v=>{if(o){ee({});var g=Ae;g.c=o}s&&(r.$$events=s),u=t(v,r)||{},o&&te()}),()=>{for(var v of l){e.removeEventListener(v,Qn);var g=Nn.get(v);--g===0?(document.removeEventListener(v,Qn),Nn.delete(v)):Nn.set(v,g)}pa.delete(c),f!==n&&f.parentNode?.removeChild(f)}});return Sl.set(u,d),u}let Sl=new WeakMap;var It,At,pt,ur,dr;class Xr{constructor(e,n=!0){lt(this,"anchor");Se(this,It,new Map);Se(this,At,new Map);Se(this,pt,new Map);Se(this,ur,!0);Se(this,dr,()=>{var e=De;if(L(this,It).has(e)){var n=L(this,It).get(e),r=L(this,At).get(n);if(r)Da(r);else{var s=L(this,pt).get(n);s&&(L(this,At).set(n,s.effect),L(this,pt).delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),r=s.effect)}for(const[o,i]of L(this,It)){if(L(this,It).delete(o),o===e)break;const l=L(this,pt).get(i);l&&(nt(l.effect),L(this,pt).delete(i))}for(const[o,i]of L(this,At)){if(o===n)continue;const l=()=>{if(Array.from(L(this,It).values()).includes(o)){var u=document.createDocumentFragment();Ys(i,u),u.append(gn()),L(this,pt).set(o,{effect:i,fragment:u})}else nt(i);L(this,At).delete(o)};L(this,ur)||!r?On(i,l,!1):l()}}});this.anchor=e,le(this,ur,n)}ensure(e,n){var r=De,s=Rs();if(n&&!L(this,At).has(e)&&!L(this,pt).has(e))if(s){var o=document.createDocumentFragment(),i=gn();o.append(i),L(this,pt).set(e,{effect:_t(()=>n(i)),fragment:o})}else L(this,At).set(e,_t(()=>n(this.anchor)));if(L(this,It).set(r,e),s){for(const[l,c]of L(this,At))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of L(this,pt))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.add_callback(L(this,dr))}else L(this,dr).call(this)}}It=new WeakMap,At=new WeakMap,pt=new WeakMap,ur=new WeakMap,dr=new WeakMap;const kl=0,ea=1;function Cl(t,e,n,r,s){var o=Gn(),i=qe,l=o?Ft(i):ha(i,!1,!1),c=o?Ft(i):ha(i,!1,!1),u=new Xr(t);Zn(()=>{var d=e(),f=!1;if(ci(d)){var v=Ts(),g=!1;const h=m=>{if(!f){g=!0,v();try{m()}finally{Mr(),Mn||Ps()}}};d.then(m=>{h(()=>{Ot(l,m),u.ensure(ea,r&&(p=>r(p,l)))})},m=>{h(()=>{if(Ot(c,m),u.ensure(ea,s&&(p=>s(p,c))),!s)throw c.v})}),Gt(()=>{g||h(()=>{u.ensure(kl,n)})})}else Ot(l,d),u.ensure(ea,r&&(h=>r(h,l)));return()=>{f=!0}})}function q(t,e,n=!1){var r=new Xr(t),s=n?Yn:0;function o(i,l){r.ensure(i,l)}Zn(()=>{var i=!1;e((l,c=!0)=>{i=!0,o(c,l)}),i||o(!1,null)},s)}function ge(t,e){Yr(()=>{var n=e();for(var r in n){var s=n[r];s?t.style.setProperty(r,s):t.style.removeProperty(r)}})}function El(t,e,n){for(var r=t.items,s=[],o=e.length,i=0;i<o;i++)Aa(e[i].e,s,!0);var l=o>0&&s.length===0&&n!==null;if(l){var c=n.parentNode;el(c),c.append(n),r.clear(),Ct(t,e[0].prev,e[o-1].next)}qs(s,()=>{for(var u=0;u<o;u++){var d=e[u];l||(r.delete(d.k),Ct(t,d.prev,d.next)),nt(d.e,!l)}})}function Gr(t,e,n,r,s,o=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&ws)!==0;if(c){var u=t;i=u.appendChild(gn())}var d=null,f=!1,v=new Map,g=qr(()=>{var E=n();return ya(E)?E:E==null?[]:ba(E)}),h,m;function p(){Pl(m,h,l,v,i,s,e,r,n),o!==null&&(h.length===0?d?Da(d):d=_t(()=>o(i)):d!==null&&On(d,()=>{d=null}))}Zn(()=>{m??(m=we),h=a(g);var E=h.length;if(!(f&&E===0)){f=E===0;var C,y,x,D;if(Rs()){var A=new Set,b=De;for(y=0;y<E;y+=1){x=h[y],D=r(x,y);var P=l.items.get(D)??v.get(D);P?(e&(jr|Ur))!==0&&no(P,x,y,e):(C=ro(null,l,null,null,x,D,y,s,e,n,!0),v.set(D,C)),A.add(D)}for(const[I,Z]of l.items)A.has(I)||b.skipped_effects.add(Z.e);b.add_callback(p)}else p();a(g)}})}function Pl(t,e,n,r,s,o,i,l,c){var u=(i&Ei)!==0,d=(i&(jr|Ur))!==0,f=e.length,v=n.items,g=n.first,h=g,m,p=null,E,C=[],y=[],x,D,A,b;if(u)for(b=0;b<f;b+=1)x=e[b],D=l(x,b),A=v.get(D),A!==void 0&&(A.a?.measure(),(E??(E=new Set)).add(A));for(b=0;b<f;b+=1){if(x=e[b],D=l(x,b),A=v.get(D),A===void 0){var P=r.get(D);if(P!==void 0){r.delete(D),v.set(D,P);var I=p?p.next:h;Ct(n,p,P),Ct(n,P,I),ta(P,I,s),p=P}else{var Z=h?h.e.nodes_start:s;p=ro(Z,n,p,p===null?n.first:p.next,x,D,b,o,i,c)}v.set(D,p),C=[],y=[],h=p.next;continue}if(d&&no(A,x,b,i),(A.e.f&yt)!==0&&(Da(A.e),u&&(A.a?.unfix(),(E??(E=new Set)).delete(A))),A!==h){if(m!==void 0&&m.has(A)){if(C.length<y.length){var se=y[0],j;p=se.prev;var X=C[0],$=C[C.length-1];for(j=0;j<C.length;j+=1)ta(C[j],se,s);for(j=0;j<y.length;j+=1)m.delete(y[j]);Ct(n,X.prev,$.next),Ct(n,p,X),Ct(n,$,se),h=se,p=$,b-=1,C=[],y=[]}else m.delete(A),ta(A,h,s),Ct(n,A.prev,A.next),Ct(n,A,p===null?n.first:p.next),Ct(n,p,A),p=A;continue}for(C=[],y=[];h!==null&&h.k!==D;)(h.e.f&yt)===0&&(m??(m=new Set)).add(h),y.push(h),h=h.next;if(h===null)continue;A=h}C.push(A),p=A,h=A.next}if(h!==null||m!==void 0){for(var ne=m===void 0?[]:ba(m);h!==null;)(h.e.f&yt)===0&&ne.push(h),h=h.next;var ue=ne.length;if(ue>0){var Q=(i&ws)!==0&&f===0?s:null;if(u){for(b=0;b<ue;b+=1)ne[b].a?.measure();for(b=0;b<ue;b+=1)ne[b].a?.fix()}El(n,ne,Q)}}u&&Gt(()=>{if(E!==void 0)for(A of E)A.a?.apply()}),t.first=n.first&&n.first.e,t.last=p&&p.e;for(var J of r.values())nt(J.e);r.clear()}function no(t,e,n,r){(r&jr)!==0&&Ot(t.v,e),(r&Ur)!==0?Ot(t.i,n):t.i=n}function ro(t,e,n,r,s,o,i,l,c,u,d){var f=(c&jr)!==0,v=(c&Pi)===0,g=f?v?ha(s,!1,!1):Ft(s):s,h=(c&Ur)===0?i:Ft(i),m={i:h,v:g,k:o,a:null,e:null,prev:n,next:r};try{if(t===null){var p=document.createDocumentFragment();p.append(t=gn())}return m.e=_t(()=>l(t,g,h,u),Bi),m.e.prev=n&&n.e,m.e.next=r&&r.e,n===null?d||(e.first=m):(n.next=m,n.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function ta(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,o=t.e.nodes_start;o!==null&&o!==r;){var i=vr(o);s.before(o),o=i}}function Ct(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function ye(t,e,...n){var r=new Xr(t);Zn(()=>{const s=e()??null;r.ensure(s,s&&(o=>s(o,...n)))},Yn)}function xl(t,e,n){var r=new Xr(t);Zn(()=>{var s=e()??null;r.ensure(s,s&&(o=>n(o,s)))},Yn)}function ao(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=ao(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Al(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=ao(t))&&(r&&(r+=" "),r+=e);return r}function pe(t){return typeof t=="object"?Al(t):t??""}const ns=[...` 	
\r\f \v\uFEFF`];function Dl(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var o=s.length,i=0;(i=r.indexOf(s,i))>=0;){var l=i+o;(i===0||ns.includes(r[i-1]))&&(l===r.length||ns.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Tl(t,e){return t==null?null:String(t)}function _e(t,e,n,r,s,o){var i=t.__className;if(i!==n||i===void 0){var l=Dl(n,r,o);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(o&&s!==o)for(var c in o){var u=!!o[c];(s==null||u!==!!s[c])&&t.classList.toggle(c,u)}return o}function qn(t,e,n,r){var s=t.__style;if(s!==e){var o=Tl(e);o==null?t.removeAttribute("style"):t.style.cssText=o,t.__style=e}return r}const Nl=Symbol("is custom element"),Ll=Symbol("is html");function na(t,e){var n=Na(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Nr(t,e){var n=Na(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Ce(t,e,n,r){var s=Na(t);s[e]!==(s[e]=n)&&(e==="loading"&&(t[hi]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Il(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Na(t){return t.__attributes??(t.__attributes={[Nl]:t.nodeName.includes("-"),[Ll]:t.namespaceURI===Mi})}var rs=new Map;function Il(t){var e=t.getAttribute("is")||t.nodeName,n=rs.get(e);if(n)return n;rs.set(e,n=[]);for(var r,s=t,o=Element.prototype;o!==s;){r=gs(s);for(var i in r)r[i].set&&n.push(i);s=Sa(s)}return n}function Ml(t,e,n=e){var r=new WeakSet;nl(t,"input",async s=>{var o=s?t.defaultValue:t.value;if(o=ra(t)?aa(o):o,n(o),De!==null&&r.add(De),await Qs(),o!==(o=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=o??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),ht(e)==null&&t.value&&(n(ra(t)?aa(t.value):t.value),De!==null&&r.add(De)),Yr(()=>{var s=e();if(t===document.activeElement){var o=xr??De;if(r.has(o))return}ra(t)&&s===aa(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function ra(t){var e=t.type;return e==="number"||e==="range"}function aa(t){return t===""?null:+t}function as(t,e){return t===e||t?.[dn]===e}function st(t={},e,n,r){return il(()=>{var s,o;return Yr(()=>{s=o,o=[],ht(()=>{t!==n(...o)&&(e(t,...o),s&&as(n(...s),t)&&e(null,...s))})}),()=>{Gt(()=>{o&&as(n(...o),t)&&e(null,...o)})}}),t}function Zr(t=!1){const e=Ae,n=e.l.u;if(!n)return;let r=()=>hl(e.s);if(t){let s=0,o={};const i=fr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==o[u]&&(o[u]=c[u],l=!0);return l&&s++,s});r=()=>a(i)}n.b.length&&sl(()=>{ss(e,r),ia(n.b)}),Te(()=>{const s=ht(()=>n.m.map(ui));return()=>{for(const o of s)typeof o=="function"&&o()}}),n.a.length&&Te(()=>{ss(e,r),ia(n.a)})}function ss(t,e){if(t.l.s)for(const n of t.l.s)a(n);e()}let Er=!1;function Ol(t){var e=Er;try{return Er=!1,[t(),Er]}finally{Er=e}}function ve(t,e,n,r){var s=!Xn||(n&Ai)!==0,o=(n&Ti)!==0,i=(n&Ni)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?ht(r):r),l),d;if(o){var f=dn in t||vi in t;d=In(t,e)?.set??(f&&e in t?y=>t[e]=y:void 0)}var v,g=!1;o?[v,g]=Ol(()=>t[e]):v=t[e],v===void 0&&r!==void 0&&(v=u(),d&&(s&&yi(),d(v)));var h;if(s?h=()=>{var y=t[e];return y===void 0?u():(c=!0,y)}:h=()=>{var y=t[e];return y!==void 0&&(l=void 0),y===void 0?l:y},s&&(n&Di)===0)return h;if(d){var m=t.$$legacy;return(function(y,x){return arguments.length>0?((!s||!x||m||g)&&d(x?h():y),y):h()})}var p=!1,E=((n&xi)!==0?fr:qr)(()=>(p=!1,h()));o&&a(E);var C=we;return(function(y,x){if(arguments.length>0){const D=x?a(E):s&&o?Re(y):y;return w(E,D),p=!0,l!==void 0&&(l=D),y}return wn&&p||(C.f&mn)!==0?E.v:a(E)})}function be(t){Ae===null&&ms(),Xn&&Ae.l!==null?Bl(Ae).m.push(t):Te(()=>{const e=ht(t);if(typeof e=="function")return e})}function Bl(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Rl="5";var vs;typeof window<"u"&&((vs=window.__svelte??(window.__svelte={})).v??(vs.v=new Set)).add(Rl);zi();const so={};function Fl(t){ze(so,t)}function oo(){const t=Fe(so);if(!t)throw new Error("No SearchContext found");return t}const io={};function zl(t){ze(io,t)}function Lt(){const t=Fe(io);if(!t)throw new Error("No AppHistoryContext found");return t}function Hl(t,e){ee(e,!0);const{addSearchParam:n,deleteSearchParam:r,getAppLocation:s}=Lt(),o=F(()=>s().searchParams),i="search",l=Re({value:s().searchParams.get(i)||""}),c=f=>{(a(o).get(i)||"")!==f&&(f===""?r(i):n(i,f))};Te(()=>{a(o);const f=l.value;ht(()=>{c(f)})}),Fl(l);var u=G(),d=R(u);ye(d,()=>e.children??xe),_(t,u),te()}const lo={};function jl(t){ze(lo,t)}function co(){const t=Fe(lo);if(!t)throw new Error("No TagSearchContext found");return t}function Ul(t,e){ee(e,!0);const n=Re({value:""});jl(n);var r=G(),s=R(r);ye(s,()=>e.children??xe),_(t,r),te()}const uo={};function Vl(t){ze(uo,t)}function fo(){const t=Fe(uo);if(!t)throw new Error("No FeedOrderContext found");return t}function ql(t,e){ee(e,!0);const{addSearchParam:n,deleteSearchParam:r,getAppLocation:s}=Lt(),o=F(()=>s().searchParams),i="feedOrder";let l=V(Re(s().searchParams.get(i)||"newest"));const c=g=>{(a(o).get(i)||"newest")!==g&&(g==="newest"?r(i):n(i,g))};Te(()=>{a(o),a(l),ht(()=>{c(a(l))})}),Vl({getFeedOrder:()=>a(l),setFeedOrder:g=>{w(l,g,!0)}});var f=G(),v=R(f);ye(v,()=>e.children??xe),_(t,f),te()}const vo={};function Wl(t){ze(vo,t)}function Jr(){const t=Fe(vo);if(!t)throw new Error("No SidebarContext found");return t}function Yl(t,e){ee(e,!0);const n=(d,f)=>{if(!f)return d;if(f.type==="closed")return{type:"closed"};switch(d.type){case"opened":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:f.type==="swipe"?{type:"openSwiping"}:d;case"closed":return f.type==="open"?{type:"opening"}:f.type==="swipe"?{type:"closeSwiping"}:d;case"openSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"closeSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"opening":return f.type==="opened"?{type:"opened"}:d;default:return d}};let r=V(Re(n({type:"closed"})));const s=d=>{const f=ht(()=>a(r));w(r,n(f,d),!0)};Wl({sidebarOpen:()=>{s({type:"open"})},sidebarClose:()=>{s({type:"close"})},handleComputeState:s,getSidebarState:()=>a(r)});var c=G(),u=R(c);ye(u,()=>e.children??xe),_(t,c),te()}const ho={};function Kl(t){ze(ho,t)}function go(){const t=Fe(ho);if(!t)throw new Error("No SelectedTagsContext found");return t}const po=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function vf(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}const Xl=(t,e)=>{if(t.size!==e.size)return!0;for(const n of t)if(!e.has(n))return!0;return!1};function Gl(t,e){ee(e,!0);const{getAppLocation:n,replace:r}=Lt(),s=F(n),o=F(()=>a(s).searchParams),i="selectedTags",l=()=>new Set(n().searchParams.get(i)?.split(",")||[]);let c=V(Re(l()));const u=()=>{const m=l();if(Xl(m,a(c))){const p=a(s).pathname;a(c).size===0?a(o).delete(i):a(o).set(i,Array.from(a(c)).join(",")),r(`${p}${a(o).size>0?`?${a(o).toString()}`:""}`)}};Te(()=>{a(o),a(c),ht(()=>{u()})}),Kl({getSelectedTags:()=>a(c),addTag:m=>{a(c).has(m)||w(c,new Set([...a(c),m]),!0)},removeTag:m=>{const p=new Set(a(c));p.delete(m),w(c,p,!0)}});var g=G(),h=R(g);ye(h,()=>e.children??xe),_(t,g),te()}const _o={};function Zl(t){ze(_o,t)}function La(){const t=Fe(_o);if(!t)throw new Error("No LocalDBContext found");return t}const mo={};function Jl(t){ze(mo,t)}function wo(){const t=Fe(mo);if(!t)throw new Error("No SettingsContext found");return t}const yo={};function Ql(t){ze(yo,t)}function yn(){const t=Fe(yo);if(!t)throw new Error("No BroadcastContext found");return t}const $l="AppStorage",ec=1,$n="account",Lr="settings",St="notes",kt="tags",tc="syncLog",Jt="success",zt="error",Ve=(t,e,n)=>{t?.addEventListener(e,n)},os=(t,e)=>new Promise((n,r)=>{const o=t?.transaction(e,"readonly")?.objectStore(e).getAll();Ve(o,Jt,()=>{const i=o?.result||[];n(i)}),Ve(o,zt,i=>{r(i)})}),_a=(t,e,n)=>new Promise((r,s)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);Ve(i,Jt,()=>{const l=i?.result?.data;r(l)}),Ve(i,zt,l=>{s(l)})}),rr=(t,e,n,r)=>new Promise((s,o)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:r});Ve(c,Jt,()=>{s()}),Ve(c,zt,u=>{o(u)})}),sa=async(t,e,n)=>{const s=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(o=>{const i=s?.put(o);return new Promise((l,c)=>{Ve(i,Jt,()=>{l()}),Ve(i,zt,u=>{c(u)})})}))},nc=(t,e,n)=>new Promise((r,s)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);Ve(l,Jt,()=>{r()}),Ve(l,zt,c=>{s(c)})}),Pr=async(t,e,n)=>{const s=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(o=>{const i=s?.delete(o);return new Promise((l,c)=>{Ve(i,Jt,()=>{l()}),Ve(i,zt,u=>{c(u)})})}))},nn=(t,e)=>new Promise((n,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();Ve(i,Jt,()=>{n()}),Ve(i,zt,l=>{r(l)})});function rc(t,e){ee(e,!0);let n=V(Re({showFavicon:!0}));const{getDB:r}=La(),{createBroadcastChannel:s,tabId:o}=yn(),i=s(),l=F(r),c=async()=>{const m=await _a(a(l),Lr,"default");m&&w(n,m,!0)},u=async()=>{c()},d=async m=>{const p=JSON.parse(m.data),E=p;if(p.tabId&&p.tabId===o){E.type==="exit"&&(w(n,{showFavicon:!0},!0),nn(a(l),Lr));return}E.type==="updateSettings"?c():E.type==="exit"&&w(n,{showFavicon:!0},!0)},f=()=>a(n).showFavicon,v=async m=>{a(n).showFavicon=m,await rr(a(l),Lr,"default",{showFavicon:m}),i.postMessage({type:"updateSettings"})};be(()=>(u(),i.addEventListener(d),()=>{i.removeEventListener(d)})),Jl({getFaviconEnabled:f,setFaviconShown:v});var g=G(),h=R(g);ye(h,()=>e.children??xe),_(t,g),te()}const bo={};function ac(t){ze(bo,t)}function So(){const t=Fe(bo);if(!t)throw new Error("No AccountContext found");return t}function sc(t,e){ee(e,!0);let n=V(void 0);const{getDB:r}=La(),{createBroadcastChannel:s,tabId:o}=yn(),i=F(r),l=s(),c=async()=>{const y=await _a(a(i),$n,"default");w(n,y,!0)},u=y=>rr(a(i),$n,"default",y),d=async y=>{const x=await _a(a(i),$n,"default");x!==void 0&&w(n,x,!0),y(x)},f=async y=>{const x=JSON.parse(y.data);if(x.tabId&&x.tabId===o)return;const D=x;D.type==="initLocalAccount"?w(n,null):D.type==="initCloudAccount"?c():D.type==="disconnectCloudAccount"?w(n,null):D.type==="exit"?w(n,void 0):D.type==="updateAccount"&&c()};be(()=>(l.addEventListener(f),()=>{l.removeEventListener(f)})),ac({init:d,getAccount:()=>a(n),initLocalAccount:async()=>{w(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async y=>{const x={encryptedClientKey:y.encryptedClientKey||"",subscriptionExpires:y.subscriptionExpires||-1,lastSync:-1};await u(x),w(n,x,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{w(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async y=>{if(!a(n))throw new Error("No account to update subscription for");const x={...a(n),subscriptionExpires:y};await u(x),l.postMessage({type:"updateAccount"})},exitApp:async()=>{w(n,void 0),l.postMessage({type:"exit"}),await nn(a(i),$n)}});var E=G(),C=R(E);ye(C,()=>e.children??xe),_(t,E),te()}const ko={};function oc(t){ze(ko,t)}function hr(){const t=Fe(ko);if(!t)throw new Error("No NotesContext found");return t}const ic=()=>crypto.randomUUID(),lc=t=>{const e=new Map;for(const n of t||[])for(const r of n?.data.tags||[])e.set(r,{name:r,count:(e.get(r)?.count||0)+1});return e};function cc(t,e){ee(e,!0);const{getDB:n}=La(),{createBroadcastChannel:r,tabId:s}=yn(),o=F(n),i=r(),l=720*60*60*1e3;let c=V(0),u=V(!1),d=V(()=>new Map),f=V(()=>[]),v=V(()=>new Map);const g=()=>a(u),h=()=>a(c)>0,m=()=>{a(c)>0&&w(c,a(c)-1)},p=T=>{const B=a(f)(),S=a(v)(),O={...T};B.push(O),S.set(O.id,O),w(f,()=>B),w(v,()=>S)},E=T=>{const B=a(f)(),S=a(v)(),O=S.get(T.id);O&&(O.data=T.data),w(f,()=>B),w(v,()=>S)},C=T=>{const B=a(f)(),S=a(v)(),O=S.get(T);S.has(T)&&S.delete(T),O?.data?.type==="draft"&&S.delete("draft"),O&&(O.data=void 0),w(f,()=>B),w(v,()=>S)},y=()=>{w(f,()=>[]),w(d,()=>new Map),w(v,()=>new Map)},x=()=>a(f),D=T=>{const B=a(d)();for(const S of T){const O=B.get(S);O?O.count++:B.set(S,{name:S,count:1})}w(d,()=>B)},A=T=>{const B=a(d)();for(const S of T){const O=B.get(S);O&&(O.count--,O.count<=0&&B.delete(S))}w(d,()=>B)},b=async()=>{const[T,B]=await Promise.all([os(a(o),St),os(a(o),kt).then(ie=>ie.reduce((Ne,Ie)=>Ne.set(Ie.name,Ie),new Map))]),S=[],O=[],oe=new Map;let ke=0;for(const ie of T)ie.data.deletedAt&&Date.now()-ie.data.deletedAt>l?S.push(ie.id):(O.push(ie),oe.set(ie.id,ie),ie.data.deletedAt&&(ke+=1),ie.data.type==="draft"&&oe.set("draft",ie));w(c,ke,!0);const fe=lc(O),ae=new Map;fe.entries().forEach(([ie,Ne])=>{const Ie=B.get(ie);ae.set(ie,{...Ie,...Ne})}),await Pr(a(o),St,S),await nn(a(o),kt),await sa(a(o),kt,Array.from(ae.values()).map(ie=>({id:ie.name,data:{pinned:ie.pinned}}))),w(f,()=>O),w(v,()=>oe),w(d,()=>ae),w(u,!0)},P=async()=>{const T=a(v)(),B=T.get("draft");if(B)return B;const S={id:ic(),data:{type:"draft",url:"",name:"",text:"",tags:[],draft:{url:"",name:"",text:"",tags:[],createdAt:Date.now(),updatedAt:Date.now()},createdAt:Date.now(),updatedAt:Date.now()}};return await rr(a(o),St,S.id,{...S.data}),T.set("draft",S),p(S),i.postMessage({type:"createNoteDraft",data:{note:S}}),S},I=async T=>{const S=a(v)().get(T);if(!S||!S.data)return;const O=a(d)(),oe=S.data.tags;A(oe),C(T),i.postMessage({type:"deleteNote",data:{id:T}}),m(),await nc(a(o),St,T),await Pr(a(o),kt,oe.filter(ke=>{const fe=O.get(ke);return fe?fe.count<=1:!1}))},Z=async(T,B)=>{const S={id:B.id,data:{...B.data}},O=a(d)(),oe=B.data.tags.filter(fe=>!T.data.tags.includes(fe)),ke=T.data.tags.filter(fe=>!B.data.tags.includes(fe));await rr(a(o),St,S.id,{...S.data}),await sa(a(o),kt,oe.filter(fe=>!O.has(fe)).map(fe=>({id:fe,data:{}}))),await Pr(a(o),kt,ke.filter(fe=>{const ae=O.get(fe);return ae?ae.count<=1:!1})),E(S),A(ke),D(oe),i.postMessage({type:"updateNote",data:{note:S,tagsToAdd:oe,tagsToDelete:ke}})},se=async T=>{const B=a(v)(),S=X(T);if(!S||!S.data)return;const O=B.get("draft");O&&O.id===S.id&&B.delete("draft");const oe={id:T,data:{type:"note",name:S.data.draft?.name??S.data.name,url:S.data.draft?.url??S.data.url,text:S.data.draft?.text??S.data.text,tags:S.data.draft?.tags??S.data.tags,updatedAt:Date.now(),createdAt:S.data.createdAt,pinnedAt:S.data.pinnedAt,deletedAt:S.data.deletedAt,draft:void 0}};return Z(S,oe)},j=async()=>{y(),i.postMessage({type:"clearNotes"}),await nn(a(o),St),await nn(a(o),kt)},X=T=>{const B=a(v)();return T?B.get(T):B.get("draft")},$=async(T,B)=>{const O=a(v)().get(T);if(!O||!O.data)return;const oe={id:T,data:{...O.data,pinnedAt:B?Date.now():void 0}};return Z(O,oe)},ne=async T=>{const S=a(v)().get(T);if(!S||!S.data)return;const O={id:T,data:{...S.data,deletedAt:Date.now()}};w(c,a(c)+1),await Z(S,O)},ue=async T=>{const S=a(v)().get(T);if(!S||!S.data)return;const O={id:T,data:{...S.data,deletedAt:0}};m(),await Z(S,O)},Q=async(T,B)=>{const S=a(d)();S.set(T,{name:T,count:S.get(T)?.count||0,pinned:B}),await rr(a(o),kt,T,{pinned:B}),i.postMessage({type:"pinTag",data:{tag:T,pinned:B}}),w(d,()=>S)},J=async T=>{const B=a(v)(),S={};T.forEach(O=>{const oe=B.get(O.id);(!oe||oe&&oe.data&&oe.data.updatedAt<O.data.updatedAt)&&(S[O.id]=O)}),await sa(a(o),St,Object.values(S)),await b(),i.postMessage({type:"reloadNotes"})},U=async()=>{const T=[];a(f)().forEach(S=>{S&&S.data&&S.data.deletedAt&&T.push(S.id)}),w(c,0),await Pr(a(o),St,T),await b(),i.postMessage({type:"emptyBin"})},K=async(T,B)=>{if(T===""){const ke=a(v)().get("draft");ke?T=ke.id:T=(await P()).id}const S=X(T);if(!S||!S.data)return;const O={id:T,data:{...S.data,draft:{...B,tags:B.tags,createdAt:S.data.draft?.createdAt||Date.now(),updatedAt:Date.now()}}};return await Z(S,O),S.id},N=async T=>{const B=a(v)(),S=X(T);if(!S||!S.data||!S.data.draft)return;if(S.data.type==="draft"){T===B.get("draft")?.id&&B.delete("draft"),await I(T);return}const O={id:T,data:{...S.data,draft:void 0}};return Z(S,O)},M=async T=>{const B=JSON.parse(T.data),S=B;if(B.tabId&&B.tabId===s){S.type==="exit"&&(y(),await nn(a(o),St),await nn(a(o),kt));return}if(S.type==="createNoteDraft"){const O=S.data.note;a(v)().set("draft",O),p(O)}else if(S.type==="updateNote"){const O=S.data,ke=a(v)().get(O.note.id);if(!ke||!ke.data)return;ke.data.deletedAt&&!O.note.data.deletedAt?m():!ke.data.deletedAt&&O.note.data.deletedAt&&w(c,a(c)+1),E(O.note),A(O.tagsToAdd),D(O.tagsToDelete)}else if(S.type==="deleteNote"){const O=S.data.id,ke=a(v)().get(O);if(!ke)return;m(),C(O),A(ke?.data?.tags||[])}else if(S.type==="pinTag"){const O=S.data.tag,oe=S.data.pinned,ke=a(d)(),fe=ke.get(O);fe&&(fe.pinned=oe,ke.set(O,fe))}else S.type==="clearNotes"?y():S.type==="reloadNotes"||S.type==="emptyBin"?b():S.type==="exit"&&y()};be(()=>(b(),i.addEventListener(M),()=>{i.removeEventListener(M)})),oc({isInitedNotes:g,putNoteDraft:K,deleteNoteDraft:N,deleteNote:I,pinNote:$,getGetNotes:x,importNotes:J,clearNotes:j,getNoteById:X,getGetMapTags:()=>a(d),pinTag:Q,moveNoteToBin:ne,restoreNoteFromBin:ue,checkNotesInBin:h,emptyBin:U,saveNoteDraft:se,countNotesInBin:()=>a(c)});var Y=G(),re=R(Y);ye(re,()=>e.children??xe),_(t,Y),te()}const Co={},uc=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function dc(t){ze(Co,t)}function Qt(){const t=Fe(Co);if(!t)throw new Error("No AnimationSettingsContext found");return t}function fc(t,e){ee(e,!0);let n=Re(uc());dc(n);var r=G(),s=R(r);ye(s,()=>e.children??xe),_(t,r),te()}const Eo={};function vc(t){ze(Eo,t)}function Ia(){const t=Fe(Eo);if(!t)throw new Error("No ScrollingContext found");return t}function hc(t,e){ee(e,!0);let n=V(!1);const r=()=>a(n),s=po(()=>{w(n,!1)},100);vc({isScrolling:r,enable:()=>{w(n,!0),s()}});var i=G(),l=R(i);ye(l,()=>e.children??xe),_(t,i),te()}const Po={};function gc(t){ze(Po,t)}function bn(){const t=Fe(Po);if(!t)throw new Error("No MobileSizeContext found");return t}function pc(t,e){ee(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let r=V(Re(n())),s=Qt();const o=po(()=>{s.working=!0},16),i=()=>{s.working=!1,o(),requestAnimationFrame(()=>{w(r,n(),!0)})};gc({checkMobileSize:()=>a(r)}),be(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=G(),u=R(c);ye(u,()=>e.children??xe),_(t,c),te()}const xo={};function _c(t){ze(xo,t)}function $t(){const t=Fe(xo);if(!t)throw new Error("No DialogContext found");return t}function mc(t,e){ee(e,!0);let n=V(0),r=V(!1),s=V(!0);_c({checkExistedDialog:()=>a(n)>0,showDialog:()=>{w(n,a(n)+1)},hideDialog:()=>{w(n,a(n)-1)},blockDialog:h=>{w(r,h,!0)},checkBlockedDialog:()=>a(r),setClosableDialog:h=>{w(s,h,!0)},checkClosableDialog:()=>a(s)});var v=G(),g=R(v);ye(g,()=>e.children??xe),_(t,v),te()}const Ao={};function wc(t){ze(Ao,t)}function Ma(){const t=Fe(Ao);if(!t)throw new Error("No ScrollContainerContext found");return t}function yc(t,e){ee(e,!0);let n=V(null);wc({setScrollContainer:l=>{w(n,l,!0)},getScrollContainer:()=>a(n)});var o=G(),i=R(o);ye(i,()=>e.children??xe),_(t,o),te()}const Do={};function bc(t){ze(Do,t)}function Oa(){const t=Fe(Do);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Sc(t,e){ee(e,!0);let n=V(200);bc({setDialogPageHeight:l=>{w(n,l,!0)},getDialogPageHeight:()=>a(n)});var o=G(),i=R(o);ye(i,()=>e.children??xe),_(t,o),te()}const kc=[$n,Lr,St,kt,tc];function Cc(){return new Promise((t,e)=>{const n=indexedDB.open($l,ec);Ve(n,"upgradeneeded",()=>{const r=n.result;for(const s of kc)r.objectStoreNames.contains(s)||r.createObjectStore(s,{keyPath:"id"})}),Ve(n,Jt,()=>{const r=n.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),Ve(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),Ve(n,zt,()=>{e(),console.error(zt,n.error)})})}function Ec(t,e){ee(e,!0);let n=V(null);be(()=>{Cc().then(l=>{w(n,l,!0)}).catch(l=>{console.error("Failed to initialize LocalDB:",l)})}),Zl({getDB:()=>a(n)});var s=G(),o=R(s);{var i=l=>{var c=G(),u=R(c);ye(u,()=>e.children??xe),_(l,c)};q(o,l=>{a(n)&&l(i)})}_(t,s),te()}const To={};function Pc(t){ze(To,t)}function ot(){const t=Fe(To);if(!t)throw new Error("No StackPagesContext found");return t}function xc(t,e){ee(e,!0);const{createBroadcastChannel:n,tabId:r}=yn(),s=n(),{getAppLocation:o,getAppHistoryStack:i,navigate:l,goBack:c,replace:u}=Lt(),d=F(o),f=F(()=>a(d).searchParams),v="stackPages",g=()=>a(f).get(v)?.split(",")||[];let h=V(Re([]));const m=()=>{const b=g();a(h).join(",")!==b.join(",")&&w(h,b,!0)};Te(()=>{a(f),ht(()=>{m()})});const p=b=>{if(!a(h).find(P=>{const[I]=P.split("?");return I===b})){const P=new URLSearchParams(a(d).search),I=a(d).pathname;P.set(v,[...a(h),b].join(",")),l(`${I}${P.size>0?`?${P.toString()}`:""}`)}},E=b=>a(h).find(P=>{const[I]=P.split("?");return I===b})!==void 0,C=()=>{const b=i(),P=b.findIndex(I=>I.searchParams.has(v));if(b.length<=1||P===-1){const I=new URLSearchParams(a(d).search);I.delete(v),u(`${a(d).pathname}${I.size>0?`?${I.toString()}`:""}`)}else if(P===0){c(b.length-P+1);const I=new URLSearchParams(a(d).search);I.delete(v),u(`${a(d).pathname}${I.size>0?`?${I.toString()}`:""}`)}else c(b.length-P)},y=(b,P)=>{if(P?.full)return`/${b}`;const I=a(h).slice();I.includes(b)||I.push(b);const Z=new URLSearchParams(a(d).search);return Z.set(v,I.join(",")),`${a(d).pathname}?${Z}`},x=(b,P)=>I=>{if(I.preventDefault(),P?.full){l(b);return}p(b)};be(()=>{const b=P=>{const I=JSON.parse(P.data),Z=I;if(I.tabId&&I.tabId===r){if(Z.type==="navigateBack"&&a(h).length>0){const se=new URLSearchParams(a(d).search);a(h).length>1?se.set(v,a(h).slice(0,-1).join(",")):se.delete(v),u(`${a(d).pathname}${se.size>0?`?${se.toString()}`:""}`)}return}};return s.addEventListener(b),()=>{s.removeEventListener(b)}}),Pc({getStackPages:()=>a(h),pushStackPages:p,hasStackPage:E,clearStackPages:C,getPageUrl:y,createHandlePage:x,getStackPagesFormUrl:g});var D=G(),A=R(D);ye(A,()=>e.children??xe),_(t,D),te()}function Ac(t,e){ee(e,!0);const{createBroadcastChannel:n}=yn(),r=n(),s=p=>p.startsWith("/")?p:`/${p}`,o=p=>{const[E,C]=p.split("?");return{href:s(p),pathname:s(E),search:C?`?${C}`:"",searchParams:new URLSearchParams(C)}};let i=V(Re([{href:`${s(window.location.pathname)}${window.location.search}`,pathname:s(window.location.pathname),search:window.location.search,searchParams:new URLSearchParams(window.location.search)}]));const l=p=>{a(i).push(o(p)),window.history.replaceState(null,"",p)},c=p=>{a(i)[a(i).length-1]=o(p),window.history.replaceState(null,"",p)};zl({getAppLocation:()=>a(i)[a(i).length-1],getAppHistoryStack:()=>a(i),navigate:l,replace:c,addSearchParam:(p,E)=>{const C=a(i)[a(i).length-1],y=C.searchParams;y.set(p,E),c(`${C.pathname}${y.size>0?`?${y.toString()}`:""}`)},deleteSearchParam:p=>{const E=a(i)[a(i).length-1],C=E.searchParams;C.delete(p),c(`${E.pathname}${C.size>0?`?${C.toString()}`:""}`)},back:p=>{const{to:E}=p||{};if(a(i).length>1){if(E){const y=a(i).findIndex(x=>x.href===E);if(y!==-1){w(i,a(i).slice(0,y+1),!0);const x=a(i)[a(i).length-1];window.history.replaceState(null,"",x.href)}else c(E);return}a(i).pop();const C=a(i)[a(i).length-1];window.history.replaceState(null,"",C.href)}else E?c(E):r.postMessage({type:"navigateBack"})},goBack:p=>{if(a(i).length>=p){w(i,a(i).slice(0,-p),!0);const E=a(i)[a(i).length-1];window.history.replaceState(null,"",E.href)}},clearHistoryStack:()=>{w(i,a(i).slice(-1),!0)}});var h=G(),m=R(h);ye(m,()=>e.children??xe),_(t,h),te()}const No={};function Dc(t){ze(No,t)}function Lo(){const t=Fe(No);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Tc(t,e){ee(e,!0);let n=Re({value:!1});const r=()=>n.value;be(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),Dc({getIsKeyboardVisible:r});var s=G(),o=R(s);ye(o,()=>e.children??xe),_(t,s),te()}function Nc(t,e){ee(e,!0);const n=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};Ql({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var s=G(),o=R(s);ye(o,()=>e.children??xe),_(t,s),te()}function Lc(t,e){Ec(t,{children:(n,r)=>{Nc(n,{children:(s,o)=>{fc(s,{children:(i,l)=>{hc(i,{children:(c,u)=>{pc(c,{children:(d,f)=>{mc(d,{children:(v,g)=>{yc(v,{children:(h,m)=>{Sc(h,{children:(p,E)=>{Tc(p,{children:(C,y)=>{Ac(C,{children:(x,D)=>{xc(x,{children:(A,b)=>{var P=G(),I=R(P);ye(I,()=>e.children??xe),_(A,P)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Ic(t,e){Lc(t,{children:(n,r)=>{Ul(n,{children:(s,o)=>{Hl(s,{children:(i,l)=>{ql(i,{children:(c,u)=>{Yl(c,{children:(d,f)=>{Gl(d,{children:(v,g)=>{rc(v,{children:(h,m)=>{sc(h,{children:(p,E)=>{cc(p,{children:(C,y)=>{var x=G(),D=R(x);ye(D,()=>e.children??xe),_(C,x)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let Ut=V(""),en=V(null),er=V(null),tr=V(null);function vn(t,e){w(Ut,""),setTimeout(()=>{w(Ut,t,!0),e?.onFinish&&w(er,e.onFinish,!0),e?.onCancel&&w(tr,e.onCancel,!0)},16)}const Mc=(t,e,n,r,s)=>{t.preventDefault(),a(e)&&(w(n,null),a(e)(),w(e,null)),w(r,""),a(s)?.style.removeProperty("opacity")};var Oc=W('<button type="button" class="undoButton svelte-1vxmgq5">undo</button>'),Bc=W('<div class="notification svelte-1vxmgq5"><span> </span> <!></div>'),Rc=W("<div><!></div>");function Fc(t,e){ee(e,!0),Te(()=>{a(Ut);const o=a(tr)?2e3:800;a(Ut)&&(a(en)?.getBoundingClientRect(),a(en)?.style.setProperty("opacity","1"));const i=setTimeout(()=>{a(en)?.style.removeProperty("opacity")},o),l=setTimeout(()=>{w(Ut,""),a(er)&&a(er)(),w(er,null),w(tr,null),a(en)?.style.removeProperty("opacity")},o+400);return()=>{clearTimeout(i),clearTimeout(l)}});var n=Rc(),r=k(n);{var s=o=>{var i=Bc(),l=k(i),c=k(l),u=z(l,2);{var d=f=>{var v=Oc();v.__click=[Mc,tr,er,Ut,en],_(f,v)};q(u,f=>{a(tr)&&f(d)})}st(i,f=>w(en,f),()=>a(en)),ce(()=>Rt(c,a(Ut))),_(o,i)};q(r,o=>{a(Ut)&&o(s)})}_(t,n),te()}We(["click"]);var zc=W('<span class="vh svelte-s92gzo"><!></span>');function Ge(t,e){var n=zc(),r=k(n);ye(r,()=>e.children),_(t,n)}var Hc=wl('<svg class="svelte-18et5h9"><use></use></svg>');function me(t,e){let n=ve(e,"name",8,"");var r=Hc(),s=k(r);ce(()=>Ce(s,"href",`#icon-${n()??""}`)),_(t,r)}const jc=(t,e,n,r,s)=>{if(a(e))return;const o=n().type;o==="closed"?r():o==="opened"&&s()};var Uc=W('<button class="buttonMenu svelte-bpktnw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Io(t,e){ee(e,!0);const{sidebarOpen:n,getSidebarState:r,sidebarClose:s}=Jr(),{getStackPagesFormUrl:o}=ot(),{checkExistedDialog:i}=$t();let l=F(()=>o().length>0||i());var c=Uc();c.__click=[jc,l,r,n,s];var u=k(c);ge(u,()=>({"--size":"36px"})),me(u.lastChild,{name:"sidebarMenu"});var d=z(u,2);Ge(d,{children:(f,v)=>{var g=Oe("Menu");_(f,g)}}),_(t,c),te()}We(["click"]);var Vc=(t,e)=>e.onChange?.(t.target?.value||""),qc=W('<input class="svelte-15lr19w"/>');function ma(t,e){ee(e,!0);let n=ve(e,"value",15,""),r=ve(e,"ref",15,null);var s=qc();s.__input=[Vc,e],st(s,o=>r(o),()=>r()),ce(()=>Ce(s,"placeholder",e.placeholder)),Ta("focus",s,function(...o){e.onFocus?.apply(this,o)}),Ml(s,n),_(t,s),te()}We(["input"]);function Ba(t,e){ee(e,!0),be(()=>{const n=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),te()}var Wc=W('<dialog><div class="dialogInner svelte-1x410nl"><!></div></dialog> <!>',1);function Ra(t,e){ee(e,!0);let n=V(null),r=V(null),s=V(!1),{showDialog:o,hideDialog:i}=$t();const l=h=>{h?.preventDefault();const m=setTimeout(()=>{e.onClosed()},150);a(n)?.addEventListener("transitionend",()=>{clearTimeout(m),e.onClosed()},{once:!0}),w(s,!1)};Te(()=>{e.startClose&&l()}),be(()=>(a(n)?.showModal(),a(n)?.getClientRects(),w(s,!0),a(n)?.addEventListener("cancel",l),a(n)?.addEventListener("close",l),()=>{a(n)?.removeEventListener("cancel",l),a(n)?.removeEventListener("close",l)})),be(()=>(o(),()=>{i()}));var c=Wc(),u=R(c),d=k(u),f=k(d);ye(f,()=>e.children),st(d,h=>w(r,h),()=>a(r)),st(u,h=>w(n,h),()=>a(n));var v=z(u,2);{var g=h=>{Ba(h,{get dialog(){return a(n)},get dialogInner(){return a(r)},onClose:l})};q(v,h=>{a(n)&&a(r)&&h(g)})}ce(()=>_e(u,1,pe(["dialog",{shown:a(s)}]),"svelte-1x410nl")),_(t,c),te()}var Yc=W("<div><!></div>");function Mo(t,e){ee(e,!0);let n=V(!1),r=V(null);const s=()=>{const u=setTimeout(()=>{e.onClosed()},150);a(r)?.addEventListener("transitionend",()=>{clearTimeout(u),e.onClosed()},{once:!0}),w(n,!1)},o=u=>{u.target!==a(r)&&!a(r)?.contains(u.target)&&s()},i=u=>{u.target!==a(r)&&!a(r)?.contains(u.target)&&s()};be(()=>{a(r)?.getClientRects(),w(n,!0);const u=setTimeout(()=>{document.addEventListener("focusin",o),document.addEventListener("click",i)},0);return()=>{clearTimeout(u),document.removeEventListener("focusin",o),document.removeEventListener("click",i)}}),Te(()=>{e.startClose&&s()});var l=Yc(),c=k(l);ye(c,()=>e.children),st(l,u=>w(r,u),()=>a(r)),ce(()=>_e(l,1,pe(["menu",{top:e.positionTop,shown:a(n)}]),"svelte-ujw4xi")),_(t,l),te()}const Kc=(t,e)=>{a(e)||w(e,!0)};var Xc=(t,e)=>e("newest"),Gc=(t,e)=>e("oldest"),Zc=(t,e)=>e("AtoZ"),Jc=(t,e)=>e("ZtoA"),Qc=W("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),$c=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),eu=W('<div class="orderMenu svelte-14zj87s"><button><!> <!></button> <!></div>');function tu(t,e){ee(e,!0);const n=(C,y=xe)=>{var x=Qc(),D=k(x);D.__click=[Xc,d];var A=z(D,2);A.__click=[Gc,d];var b=z(A,2);b.__click=[Zc,d];var P=z(b,2);P.__click=[Jc,d],ce(()=>{_e(x,1,pe(["menu",{menuDialog:y()}]),"svelte-14zj87s"),_e(D,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="newest"}]),"svelte-14zj87s"),_e(A,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="oldest"}]),"svelte-14zj87s"),_e(b,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="AtoZ"}]),"svelte-14zj87s"),_e(P,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="ZtoA"}]),"svelte-14zj87s")}),_(C,x)};let r=V(!1),s=V(!1);const{checkMobileSize:o}=bn(),{getFeedOrder:i,setFeedOrder:l}=fo();let c=F(o),u=F(i);const d=C=>{w(s,!0),l(C)},f=()=>{w(r,!1),w(s,!1)};be(()=>{const C=y=>{y.key==="Escape"&&w(s,!0)};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)});var v=eu(),g=k(v);g.__click=[Kc,r],_e(g,1,pe(["button","buttonMenu"]),"svelte-14zj87s");var h=k(g);me(h,{name:"filter"});var m=z(h,2);Ge(m,{children:(C,y)=>{var x=Oe("show feed order menu");_(C,x)}});var p=z(g,2);{var E=C=>{var y=G(),x=R(y);{var D=b=>{Ra(b,{get startClose(){return a(s)},onClosed:f,children:(P,I)=>{n(P,()=>!0)},$$slots:{default:!0}})},A=b=>{var P=$c(),I=R(P);ge(I,()=>({"--right":"20px","--top":"60px"})),Mo(I.lastChild,{get startClose(){return a(s)},onClosed:f,children:(Z,se)=>{n(Z,()=>!1)},$$slots:{default:!0}}),_(b,P)};q(x,b=>{a(c)?b(D):b(A,!1)})}_(C,y)};q(p,C=>{a(r)&&C(E)})}_(t,v),te()}We(["click"]);var H=(t=>(t.NewNote="newNote",t.EditNote="editNote",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t.Install="install",t.InstallSuccess="installSuccess",t.Wellcome="wellcome",t))(H||{}),nu=W("<a><!></a>"),ru=W("<button><!></button>");function Xt(t,e){let n=ve(e,"type",3,"standard"),r=ve(e,"typeButton",3,"button"),s=ve(e,"element",3,"button"),o=ve(e,"href",3,""),i=ve(e,"fullWidth",3,!1),l=ve(e,"withoutMinWidth",3,!1);var c=G(),u=R(c);{var d=v=>{var g=nu();g.__click=function(...m){e.onClick?.apply(this,m)};var h=k(g);ye(h,()=>e.children??xe),ce(()=>{Ce(g,"target",e.target),Ce(g,"rel",e.rel),Ce(g,"href",o()),_e(g,1,pe(["button","a",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(v,g)},f=v=>{var g=ru();g.__click=function(...m){e.onClick?.apply(this,m)};var h=k(g);ye(h,()=>e.children??xe),ce(()=>{Ce(g,"type",r()),_e(g,1,pe(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(v,g)};q(u,v=>{s()==="a"?v(d):v(f,!1)})}_(t,c)}We(["click"]);var au=W('<div class="block svelte-1dzbsx4"><span class="title svelte-1dzbsx4"> </span> <div class="controls svelte-1dzbsx4"><!> <!></div></div>');function Oo(t,e){ee(e,!0);let n=ve(e,"buttonCancelTitle",3,"Cancel"),r=ve(e,"buttonConfirmTitle",3,"Confirm"),s=V(!1),o=V(!1);const i=()=>{w(s,!0)},l=()=>{w(s,!0),w(o,!0)};Ra(t,{get startClose(){return a(s)},onClosed:()=>{a(o)?e.onConfirm():e.onCancel()},children:(u,d)=>{var f=au(),v=k(f),g=k(v),h=z(v,2),m=k(h);Xt(m,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(E,C)=>{var y=Oe();ce(()=>Rt(y,n())),_(E,y)},$$slots:{default:!0}});var p=z(m,2);Xt(p,{onClick:l,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(E,C)=>{var y=Oe();ce(()=>Rt(y,r())),_(E,y)},$$slots:{default:!0}}),ce(()=>Rt(g,e.title)),_(u,f)},$$slots:{default:!0}}),te()}const or=t=>{const e=n=>{const r=n.target,s=r?.tagName;if(s==="INPUT"||s==="TEXTAREA"||r?.isContentEditable)return;const o=n.key.toLowerCase(),i=n.metaKey,l=n.ctrlKey,c=n.shiftKey;if(o===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){n.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var su=W('<a class="buttonAdd svelte-lfflvc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></a>');function ou(t,e){ee(e,!1);const{createHandlePage:n,getPageUrl:r,pushStackPages:s,getStackPages:o}=ot(),{checkExistedDialog:i}=$t(),l=()=>{o.length===0&&!i()&&s(H.NewNote)};be(()=>or({key:"n",action:l})),Zr();var c=su(),u=F(()=>n(H.NewNote));c.__click=function(...f){a(u)?.apply(this,f)};var d=k(c);ge(d,()=>({"--size":"16px","--color":"#b0b0b0"})),me(d.lastChild,{name:"plus"}),ce(f=>Ce(c,"href",f),[()=>r(H.NewNote)]),_(t,c),te()}We(["click"]);const iu=(t,e)=>{w(e,!0)};var lu=(t,e)=>{e("/",{full:!0})(t)},cu=W('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),uu=(t,e)=>{e(H.Bin,{full:!0})(t)},du=W('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),fu=W('<button class="emptyBinButton svelte-13t3afu" type="button">Empty bin</button>'),vu=W('<div class="header svelte-13t3afu"><div class="top svelte-13t3afu"><div class="menu svelte-13t3afu"><a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="mobile svelte-13t3afu"><!></div> <!></div> <div class="bottom svelte-13t3afu"><div><div class="sidebarSearchWrapper"><!></div></div> <div class="right svelte-13t3afu"><div class="filter svelte-13t3afu"><div class="feedSearchWrapper svelte-13t3afu"><!></div> <!></div></div></div></div> <!>',1);function hu(t,e){ee(e,!0);const n=oo(),r=co(),{getScrollContainer:s}=Ma();let o=F(s);const{emptyBin:i,checkNotesInBin:l}=hr(),{getAppLocation:c}=Lt(),{createHandlePage:u,getPageUrl:d,getStackPages:f}=ot(),{checkExistedDialog:v}=$t();let g=V(null);const h=F(l),m=F(()=>c().pathname);let p=V(!1);const E=()=>{a(o)&&a(o).scrollTo({top:0,behavior:"smooth"})},C=()=>{f.length===0&&!v()&&a(g)?.focus()};be(()=>or({key:"k",meta:!0,action:C})),be(()=>or({key:"k",ctrl:!0,action:C}));var y=vu(),x=R(y),D=k(x),A=k(D),b=k(A),P=F(()=>u(H.Settings));b.__click=function(...ae){a(P)?.apply(this,ae)};var I=k(b);ge(I,()=>({"--rotate":"30deg","--size":"20px"})),me(I.lastChild,{name:"settings"});var Z=z(b,2),se=F(()=>u(H.Sync));Z.__click=function(...ae){a(se)?.apply(this,ae)};var j=k(Z);ge(j,()=>({"--size":"20px"})),me(j.lastChild,{name:"sync"});var X=z(Z,2);{var $=ae=>{var ie=cu();ie.__click=[lu,u];var Ne=k(ie);ge(Ne,()=>({"--size":"18px"})),me(Ne.lastChild,{name:"note"}),ce(Ie=>Ce(ie,"href",Ie),[()=>d("/",{full:!0})]),_(ae,ie)},ne=ae=>{var ie=G(),Ne=R(ie);{var Ie=Le=>{var de=du();de.__click=[uu,u];var Ee=k(de);ge(Ee,()=>({"--size":"20px"})),me(Ee.lastChild,{name:"bin"}),ce(Pe=>Ce(de,"href",Pe),[()=>d(H.Bin,{full:!0})]),_(Le,de)};q(Ne,Le=>{a(h)&&Le(Ie)},!0)}_(ae,ie)};q(X,ae=>{a(m)===`/${H.Bin}`?ae($):ae(ne,!1)})}var ue=z(A,2),Q=k(ue);Io(Q,{});var J=z(ue,2);{var U=ae=>{var ie=G(),Ne=R(ie);{var Ie=Le=>{var de=fu();de.__click=[iu,p],_(Le,de)};q(Ne,Le=>{a(h)&&Le(Ie)})}_(ae,ie)},K=ae=>{ou(ae,{})};q(J,ae=>{a(m)===`/${H.Bin}`?ae(U):ae(K,!1)})}var N=z(D,2),M=k(N);_e(M,1,pe(["left"]),"svelte-13t3afu");var Y=k(M),re=k(Y);ma(re,{placeholder:"Search tag",get value(){return r.value},set value(ae){r.value=ae}});var T=z(M,2),B=k(T),S=k(B),O=k(S);ma(O,{onFocus:E,placeholder:"Search",get ref(){return a(g)},set ref(ae){w(g,ae,!0)},get value(){return n.value},set value(ae){n.value=ae}});var oe=z(S,2);tu(oe,{});var ke=z(x,2);{var fe=ae=>{Oo(ae,{title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:()=>{i(),w(p,!1)},onCancel:()=>{w(p,!1)}})};q(ke,ae=>{a(p)&&ae(fe)})}ce((ae,ie)=>{Ce(b,"href",ae),Ce(Z,"href",ie)},[()=>d(H.Settings),()=>d(H.Sync)]),_(t,y),te()}We(["click"]);function gu(t,e){ee(e,!0);const{getIsKeyboardVisible:n}=Lo();let r=ve(e,"dialog",7);const s=F(n),o=Qt();let i=null;const l=()=>{e.dialogState==="swiping"&&e.onClose()};Te(()=>(e.dialogState==="swiping"&&(i=setTimeout(l,3e3)),()=>{i&&(clearTimeout(i),i=null)}));let c=null,u=null;const d=3,f=50,v=5,g=.6,h=.3,m=.35,p=.95;let E=0,C=0,y=0,x=!1,D=!1,A=0,b=0,P=0;const I=()=>{E=0,C=0,x=!1,D=!1,A=0,b=0,P=0,y=0,c=null,u!==null&&(cancelAnimationFrame(u),u=null),i&&(clearTimeout(i),i=null)},Z=U=>{if(!r()){console.warn("Touch start: No dialog element");return}if(e.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${e.dialogState}`);return}E=U.touches[0].clientX,C=U.touches[0].clientY,y=performance.now(),x=!0,D=!1},se=U=>e.dialogState==="opened"&&U>0||e.dialogState==="swiping"&&U>0,j=()=>{if(r()){r().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const U=window.getComputedStyle(r()),K=U.transform||U.webkitTransform||"";if(b=r().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(A=0),K&&K!=="none")try{A=new DOMMatrix(K).m41}catch{console.warn("Could not parse transform matrix, using default position")}D=!0}catch(U){console.error("Error during swipe initialization:",U),I()}}},X=()=>{if(!r())return;const K=Math.abs(A+P*b/100)/b;r().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-K)})`)},$=()=>{if(u=null,!c||!x||!r()||a(s)){I();return}const U=[...c.touches].reduce((O,oe)=>O+oe.clientX,0)/c.touches.length,K=[...c.touches].reduce((O,oe)=>O+oe.clientY,0)/c.touches.length,N=U-E,M=K-C,Y=Math.abs(N)>Math.abs(M),re=Math.abs(N)>d;if(!D)if(Y&&re&&se(N))try{j()}catch(O){console.error("Error initializing swipe:",O),I();return}else return;let T=A+N*p;T=Math.max(0,Math.min(b,T)),!(T<0)&&(r().style.setProperty("--transition-timing","0s"),r().style.transform=`translate3d(${T}px, 0, 0)`,o.swipingRatio=Math.abs(1-T/b),P=(T-A)/b*100,e.dialogState==="swiping"&&(i&&clearTimeout(i),i=setTimeout(l,3e3)),X())},ne=U=>{if(!x)return;c=U,u===null&&(u=requestAnimationFrame($));const K=U.touches[0].clientX-E,N=U.touches[0].clientY-C,M=Math.abs(K)>Math.abs(N);D&&M&&U.preventDefault()},ue=U=>{const K=Math.abs(U);if(K>=g)return v;if(K>=h){const N=(K-h)/(g-h);return f-N*(f-v)}else return f},Q=(U,K)=>{if(Math.abs(U)>=g)return m*.5;const M=Math.abs(P)/100;return K?m*Math.max(.5,1-M):m*Math.max(.5,M)},J=U=>{if(u!==null&&(cancelAnimationFrame(u),u=null),!x||!r()){I();return}if(!D){I();return}let K=0;if(U?.changedTouches?.[0]){const T=U.changedTouches[0].clientX,S=performance.now()-y;S>0&&(K=(T-E)/S)}const N=ue(K);let M=null;e.dialogState==="swiping"&&(M=Math.abs(P)>N||K<-h?"close":"open");const Y=e.dialogState==="swiping"&&M==="close",re=Q(K,Y);o.duration=re-.02,r().style.setProperty("--transition-timing",`${re}s`),r().offsetWidth,r().style.transform="",M==="open"?e.onOpen():M==="close"&&e.onClose(),r()?.style.removeProperty("--backdrop-bg"),I()};be(()=>(r().addEventListener("touchstart",Z,{passive:!0}),r().addEventListener("touchmove",ne,{passive:!1}),r().addEventListener("touchend",J,{passive:!0}),r().addEventListener("touchcancel",J,{passive:!0}),()=>{r().removeEventListener("touchstart",Z),r().removeEventListener("touchmove",ne),r().removeEventListener("touchend",J),r().removeEventListener("touchcancel",J),u!==null&&cancelAnimationFrame(u)})),te()}var pu=(t,e)=>{e.onStartClose()},_u=W('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),mu=W('<dialog><div class="dialogInner svelte-vr2o0t"><div class="header svelte-vr2o0t"><div><!></div></div> <!></div></dialog> <!>',1);function wu(t,e){ee(e,!0);let n=350;const{isScrolling:r,enable:s}=Ia();let o=V(null),i=V(null);const l=Qt(),c=A=>{A.preventDefault(),e.onStartClose()};be(()=>(a(o)?.addEventListener("close",e.onClosed),a(o)?.addEventListener("cancel",c),()=>{a(o)?.removeEventListener("close",e.onClosed),a(o)?.removeEventListener("cancel",c)}));const u=()=>{a(o)?.style.removeProperty("--transition-timing"),a(o)?.style.removeProperty("transform"),a(o)?.style.removeProperty("--backdrop-bg")},d=()=>{s()},f=F(r);Te(()=>{if(e.dialogState,!!a(o))switch(e.dialogState){case"opening":{a(o).open||a(o).showModal(),a(o).getBoundingClientRect();const A=setTimeout(()=>{u()},n+1),b=()=>{clearTimeout(A),u()};return a(o)?.addEventListener("transitionend",b,{once:!0}),e.onOpened(),()=>{clearTimeout(A),a(o)?.removeEventListener("transitionend",b)}}case"closing":{const A=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),b=()=>{clearTimeout(A),e.onClosed()};return a(o)?.addEventListener("transitionend",b,{once:!0}),()=>{clearTimeout(A),a(o)?.removeEventListener("transitionend",b)}}case"opened":u()}});var v=mu(),g=R(v),h=k(g),m=k(h),p=k(m),E=k(p);{var C=A=>{var b=_u();_e(b,1,pe(["navigateButton","buttonBack"]),"svelte-vr2o0t"),b.__click=[pu,e];var P=k(b);ge(P,()=>({"--size":"36px"})),me(P.lastChild,{name:"back"});var I=z(P,2);Ge(I,{children:(Z,se)=>{var j=Oe("back");_(Z,j)}}),_(A,b)};q(E,A=>{e.blocked||A(C)})}var y=z(m,2);ye(y,()=>e.children),st(h,A=>w(i,A),()=>a(i)),st(g,A=>w(o,A),()=>a(o));var x=z(g,2);{var D=A=>{gu(A,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return a(o)}})};q(x,A=>{(!a(f)&&e.dialogState==="opened"||e.dialogState==="swiping")&&!e.blocked&&A(D)})}ce(()=>_e(g,1,pe([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:l.working&&(!l.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-vr2o0t")),Ta("scroll",h,d),_(t,v),te()}We(["click"]);const is=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function yu(t,e){ee(e,!0);let n=ve(e,"hiddenDialog",3,!1),r=ve(e,"onClose",3,()=>{});const s=Qt();let o=V(Re(is({type:"closed"})));const i=p=>{w(o,is(a(o),p),!0)},l=()=>{e.onStartClose&&(e.onStartClose(),i({type:"close"}))},c=()=>{i({type:"open"})},u=()=>{i({type:"opened"}),s.swipingRatio=1,s.duration=.2},d=()=>{r()(),i({type:"closed"}),s.swipingRatio=1,s.duration=.2},f=()=>{i({type:"swipe"})};Te(()=>{a(o).type==="swiping"?s.isSwiping=!0:s.isSwiping=!1,a(o).type==="closed"&&e.shownDialog?c():a(o).type==="opened"&&!e.shownDialog&&l()});var v={handleComputeState:i},g=G(),h=R(g);{var m=p=>{{let E=F(()=>!e.onStartClose);wu(p,{onSwipe:f,onOpened:u,onClosed:d,onStartClose:l,onStartOpen:c,get dialogState(){return a(o).type},get hidden(){return n()},get blocked(){return a(E)},children:(C,y)=>{var x=G(),D=R(x);ye(D,()=>e.children),_(C,x)},$$slots:{default:!0}})}};q(h,p=>{a(o).type!=="closed"&&p(m)})}return _(t,g),te(v)}const bu=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const s=i=>{i.preventDefault(),n()},o=()=>{r?.()};be(()=>{const i=t();return i?.addEventListener("cancel",s),i?.addEventListener("close",o),()=>{i?.removeEventListener("cancel",s),i?.removeEventListener("close",o)}}),be(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Su=(t,e)=>{e.onStartBack()},ku=W('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Cu=(t,e)=>{e.onStartClose()},Eu=W('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Pu=W('<dialog><div class="dialogInner svelte-rt409n"><div class="header svelte-rt409n"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function xu(t,e){ee(e,!0);let n=ve(e,"blockedDialog",3,!1),r=ve(e,"hiddenDialog",3,!1),s=ve(e,"isDesktopAnimationOff",3,!1),o=V(null),i=V(null),l=V(!1);bu({getDialog:()=>a(o),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=Qt();Te(()=>{e.stateDialog==="closing"&&(c.working?a(o)?.addEventListener("transitionend",()=>{a(o)?.close()},{once:!0}):a(o)?.close())});const{getDialogPageHeight:u}=Oa(),d=F(u);be(()=>{setTimeout(()=>{w(l,!0)},50)});var f=Pu(),v=R(f),g=k(v),h=k(g),m=k(h),p=k(m);{var E=b=>{var P=ku();_e(P,1,pe(["navigateButton","buttonBack"]),"svelte-rt409n"),P.__click=[Su,e];var I=k(P);ge(I,()=>({"--size":"28px"})),me(I.lastChild,{name:"back"});var Z=z(I,2);Ge(Z,{children:(se,j)=>{var X=Oe("back");_(se,X)}}),_(b,P)};q(p,b=>{(!(n()||r())||n())&&e.onStartBack&&b(E)})}var C=z(m,2),y=k(C);{var x=b=>{var P=Eu();_e(P,1,pe(["navigateButton","buttonClose"]),"svelte-rt409n"),P.__click=[Cu,e];var I=k(P);ge(I,()=>({"--size":"28px"})),me(I.lastChild,{name:"close"});var Z=z(I,2);Ge(Z,{children:(se,j)=>{var X=Oe("close");_(se,X)}}),_(b,P)};q(y,b=>{n()||r()||b(x)})}var D=z(h,2);ye(D,()=>e.children),st(g,b=>w(i,b),()=>a(i)),st(v,b=>w(o,b),()=>a(o));var A=z(v,2);Ba(A,{get dialog(){return a(o)},get dialogInner(){return a(i)},get onClose(){return e.onStartClose}}),ce(()=>{qn(v,`height: ${a(d)+74}px`),_e(v,1,pe([{open:e.stateDialog==="open",isHeightAnimationOn:a(l),isAnimationOn:c.working,isDesktopAnimationOff:s(),hiddenDialog:r()}]),"svelte-rt409n")}),_(t,f),te()}We(["click"]);const Au=({onStartClose:t,onClose:e})=>{let n=V("close");return{get state(){return a(n)},set state(i){w(n,i,!0)},handleStartClose:(i=!1)=>{i||(w(n,"closing"),t?.())},handleOpen:()=>{w(n,"open")},handleClose:()=>{w(n,"close"),e?.()}}};function Du(t,e){ee(e,!0);let n=ve(e,"blockedDialog",3,!1),r=ve(e,"hiddenDialog",3,!1),s=ve(e,"onStartClose",3,()=>{}),o=ve(e,"onClose",3,()=>{}),i=Au({onStartClose:s(),onClose:o()});Te(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=f=>{f.key==="Escape"&&n()&&(f.preventDefault(),f.stopPropagation())};be(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=G(),u=R(c);{var d=f=>{xu(f,{get stateDialog(){return i.state},get blockedDialog(){return n()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(v,g)=>{var h=G(),m=R(h);ye(m,()=>e.children),_(v,h)},$$slots:{default:!0}})};q(u,f=>{i.state!=="close"&&f(d)})}_(t,c),te()}function Tu(t,e){ee(e,!0);let n=ve(e,"blockedDialog",3,!1),r=ve(e,"hiddenDialog",3,!1),s=ve(e,"blockedBack",3,!1),o=ve(e,"onStartClose",3,()=>{}),i=ve(e,"onClose",3,()=>{});const l=F(()=>s()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=$t();be(()=>(c(),()=>{u()}));const{checkMobileSize:d}=bn();var f=G(),v=R(f);{var g=m=>{yu(m,{get shownDialog(){return e.shownDialog},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return a(l)},get onClose(){return i()}})},h=m=>{Du(m,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return a(l)},get onStartClose(){return o()},get onClose(){return i()}})};q(v,m=>{d()?m(g):m(h,!1)})}_(t,f),te()}function ls(t,e){ee(e,!0);const{back:n}=Lt(),{clearStackPages:r}=ot(),{checkMobileSize:s}=bn();let o=ve(e,"blocked",3,!1),i=ve(e,"isLastDialog",3,!1),l=ve(e,"onBack",3,()=>{}),c=ve(e,"onClosed",3,()=>{});const{checkBlockedDialog:u,checkClosableDialog:d}=$t(),f=F(()=>o()||u()),v=F(d),g=()=>{(!a(f)||a(f))&&e.shown&&(n(),l()())},h=()=>{((!a(f)||a(f)&&a(v))&&e.shown||!e.shown)&&r()},m=()=>{c()()};{let p=F(()=>a(f)&&e.shown||a(v)===!1),E=F(()=>a(f)||i()&&(a(v)===!1||!s()));Tu(t,{get shownDialog(){return e.shown},get blockedDialog(){return a(p)},get hiddenDialog(){return e.hidden},get blockedBack(){return a(E)},onStartBack:g,onStartClose:h,onClose:m,children:(C,y)=>{var x=G(),D=R(x);ye(D,()=>e.children),_(C,x)},$$slots:{default:!0}})}te()}var Nu=W('<div class="svelte-1x9a4ve"><!></div>');function Me(t,e){ee(e,!0);const{setDialogPageHeight:n}=Oa();let r=V(null);be(()=>{a(r)&&(a(r).getBoundingClientRect(),a(r).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(a(r))return i.observe(a(r)),()=>{a(r)&&i.unobserve(a(r)),i.disconnect()}});var s=Nu(),o=k(s);ye(o,()=>e.children),st(s,i=>w(r,i),()=>a(r)),_(t,s),te()}var Lu=W('<div class="svelte-stjbkr"><p class="svelte-stjbkr">Page not found</p> <!></div>');function Iu(t,e){ee(e,!1);const{navigate:n}=Lt(),r=i=>{i.preventDefault(),n("/")};Zr();var s=Lu(),o=z(k(s),2);Xt(o,{element:"a",href:"/",onClick:r,children:(i,l)=>{var c=Oe("close");_(i,c)},$$slots:{default:!0}}),_(t,s),te()}const Mu="modulepreload",Ou=function(t){return"/"+t},cs={},je=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");s=c(n.map(u=>{if(u=Ou(u),u in cs)return;cs[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":Mu,d||(v.as="script"),v.crossOrigin="",v.href=u,l&&v.setAttribute("nonce",l),document.head.appendChild(v),d)return new Promise((g,h)=>{v.addEventListener("load",g),v.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};var Bu=W('<div class="svelte-10xfz1h"><p class="svelte-10xfz1h">Something went wrong. Please reload the page</p> <!></div>');function Ru(t){var e=Bu(),n=z(k(e),2);Xt(n,{onClick:()=>location.reload(),children:(r,s)=>{var o=Oe("Reload");_(r,o)},$$slots:{default:!0}}),_(t,e)}var Fu=W('<div><!> <div class="loader svelte-m0sno1"></div></div>');function Bo(t,e){ee(e,!0);let n=V(!1);be(()=>{const o=setTimeout(()=>{w(n,!0)},200);return()=>{clearTimeout(o)}});var r=Fu(),s=k(r);ye(s,()=>e.children??xe),ce(()=>_e(r,1,pe(["block",{shown:a(n)}]),"svelte-m0sno1")),_(t,r),te()}var zu=W('<div class="svelte-1mu1b44"><!></div>');function Hu(t,e){ee(e,!0);const{getDialogPageHeight:n}=Oa(),r=F(n);var s=zu(),o=k(s);Bo(o,{}),ce(()=>qn(s,`min-height: ${a(r)??""}px;`)),_(t,s),te()}function Ue(t,e){ee(e,!0);const n={},r=Object.assign({"./Pages/About.svelte":()=>je(()=>import("./rTn9fzQl.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>je(()=>import("./BuutRz2O.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>je(()=>import("./CV9Es3Ir.js"),__vite__mapDeps([6,3,7])),"./Pages/AccountSetup.svelte":()=>je(()=>import("./BG_ybiX3.js"),__vite__mapDeps([8,9])),"./Pages/Auth.svelte":()=>je(()=>import("./BCgrmG2v.js"),__vite__mapDeps([10,11])),"./Pages/ClearStore.svelte":()=>je(()=>import("./C1wSLy4F.js"),__vite__mapDeps([12,13])),"./Pages/ConfirmAccessKey.svelte":()=>je(()=>import("./CPESMClp.js"),__vite__mapDeps([14,4,3,15,16,17,18])),"./Pages/EditNote.svelte":()=>je(()=>import("./DJOvs-XL.js"),__vite__mapDeps([19,20,21,16,17,22,23,24])),"./Pages/Exit.svelte":()=>je(()=>import("./CFtnZ4ot.js"),__vite__mapDeps([25,26])),"./Pages/ExportData.svelte":()=>je(()=>import("./B2X1Sr9W.js"),__vite__mapDeps([27,21,16,17,22,28])),"./Pages/ImportData.svelte":()=>je(()=>import("./CuHa9L1E.js"),__vite__mapDeps([29,21,16,17,22,30])),"./Pages/Install.svelte":()=>je(()=>import("./VbMfqZUS.js"),__vite__mapDeps([31,32])),"./Pages/InstallSuccess.svelte":()=>je(()=>import("./C6OjO_O6.js"),__vite__mapDeps([33,34])),"./Pages/NewNote.svelte":()=>je(()=>import("./CylPsmPr.js"),__vite__mapDeps([35,20,21,16,17,22,23])),"./Pages/Signin.svelte":()=>je(()=>import("./DFZs3clB.js"),__vite__mapDeps([36,4,3,15,37])),"./Pages/Signup.svelte":()=>je(()=>import("./BmSHAoaR.js"),__vite__mapDeps([38,15,4,3,39])),"./Pages/Subscription.svelte":()=>je(()=>import("./Doh6VfQu.js"),__vite__mapDeps([40,41])),"./Pages/Sync.svelte":()=>je(()=>import("./DiJjkBbY.js"),__vite__mapDeps([42,43]))}),s=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(r[c]){const u=r[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var o=G(),i=R(o);Cl(i,()=>s(e.page),l=>{Hu(l,{})},(l,c)=>{const u=F(()=>a(c).default);var d=G(),f=R(d);xl(f,()=>a(u),(v,g)=>{g(v,{get params(){return e.params},get hidden(){return e.hidden}})}),_(l,d)},l=>{Ru(l)}),_(t,o),te()}var ju=W('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Ro(t,e){let n=F(()=>e.style==="selected"?"45deg":"0deg");var r=ju();r.__click=function(...c){e.onClick?.apply(this,c)};var s=k(r),o=z(s);ge(o,()=>({"--size":e.size==="small"?"10px":"12px","--rotate":a(n)})),me(o.lastChild,{name:"plus"});var i=z(o,2);{var l=c=>{Ge(c,{children:(u,d)=>{var f=Oe("add tag");_(u,f)}})};q(i,c=>{e.title===void 0&&c(l)})}ce(()=>{Ce(r,"type",e.type),_e(r,1,pe([{selectedTag:e.style==="selected",small:e.size==="small",empty:e.title===void 0}]),"svelte-uu8a24"),Rt(s,`${e.title??""} `)}),_(t,r)}We(["click"]);var Uu=W("<div></div>");function us(t,e){ee(e,!0);let n=ve(e,"mobile",3,!1);var r=Uu();Gr(r,20,()=>e.tags,s=>s,(s,o)=>{Ro(s,{get title(){return o},onClick:()=>e.handleTagClick(o)})}),ce(()=>_e(r,1,pe(["tags",{mobile:n()}]),"svelte-1c53r32")),_(t,r),te()}var Vu=W("<div></div>");function ds(t,e){ee(e,!0);var n=G(),r=R(n);{var s=o=>{var i=Vu();_e(i,1,pe(["tags","selectedTags"]),"svelte-58z9m1"),Gr(i,20,()=>e.selectedTags,l=>l,(l,c)=>{Ro(l,{get title(){return c},onClick:()=>e.handleSelectedTagClick(c),style:"selected"})}),_(o,i)};q(r,o=>{e.selectedTags.size>0&&o(s)})}_(t,n),te()}const qu=(t,e,n)=>{if(t.has("inbox"))return[];const r=[],s=Array.from(t.values());for(const o of e)if(o.data&&!(n&&!n(o))){if(t.size===0){for(const i of o?.data?.tags||[])r.includes(i)||r.push(i);for(const i of o?.data?.draft?.tags||[])r.includes(i)||r.push(i);continue}if(o.data&&s.every(i=>o.data?.tags.includes(i)))for(const i of o.data.tags)!t.has(i)&&!r.includes(i)&&r.push(i);if(o&&o.data.draft&&s.every(i=>o.data?.draft?.tags.includes(i)))for(const i of o.data.draft.tags)!t.has(i)&&!r.includes(i)&&r.push(i)}return r};function Wu(t,e){ee(e,!0);const n=Qt(),{getIsKeyboardVisible:r}=Lo();let s=ve(e,"dialog",7);const o=F(r),i=3,l=50,c=5,u=.6,d=.3,f=.35,v=.95;let g=0,h=0,m=0,p=!1,E=!1,C=0,y=0,x=0;const D=()=>{g=0,h=0,p=!1,E=!1,C=0,y=0,x=0,m=0,A!==null&&(cancelAnimationFrame(A),A=null),b=null};let A=null,b=null;const P=Q=>{if(!s()){console.warn("Touch start: No dialog element");return}if(e.sidebarState!=="opened"&&e.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${e.sidebarState}`);return}g=Q.touches[0].clientX,h=Q.touches[0].clientY,m=performance.now(),p=!0,E=!1},I=Q=>e.sidebarState==="closed"&&Q>0||e.sidebarState==="closeSwiping"&&Q>0||e.sidebarState==="opened"&&Q<0||e.sidebarState==="openSwiping"&&Q<0,Z=()=>{if(s()){if(s().style.setProperty("--transition-timing","0s"),!s().open&&e.sidebarState==="closed")try{s().showModal(),s().offsetWidth}catch(Q){console.error("Error opening dialog:",Q);return}e.onSwipe();try{const Q=window.getComputedStyle(s()),J=Q.transform||Q.webkitTransform||"";if(y=s().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?C=-y:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(C=0),J&&J!=="none")try{C=new DOMMatrix(J).m41}catch{console.warn("Could not parse transform matrix, using default position")}E=!0}catch(Q){console.error("Error during swipe initialization:",Q),D()}}},se=()=>{if(!s())return;const Q=-(y*.3),J=-y;let U=0;const K=window.getComputedStyle(s()),N=K.transform||K.webkitTransform||"";if(N&&N!=="none")try{U=new DOMMatrix(N).m41}catch{U=0}const re=.25*Math.min(1,Math.max(0,(U-J)/(Q-J)));s().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${re})`)},j=()=>{if(A=null,!b||!p||!s()||a(o))return;const{x:Q,y:J}=b;b=null;const U=Q-g,K=J-h,N=Math.abs(U)>Math.abs(K),M=Math.abs(U)>i;if(!E)if(N&&M&&I(U))try{Z()}catch(S){console.error("Error initializing swipe:",S),D();return}else return;let Y=C+U*v;const re=-y,T=-(y*.3);let B=Math.max(re,Math.min(T,Y));s().style.setProperty("--transition-timing","0s"),s().style.transform=`translate3d(${B}px, 0, 0)`,n.swipingRatio=(-1+Math.abs(B/y))/7*10,x=(B-C)/y*100,se()},X=Q=>{if(!p)return;const J=Q.touches[0].clientX,U=Q.touches[0].clientY;b={x:J,y:U},A===null&&(A=requestAnimationFrame(j)),E&&Math.abs(J-g)>Math.abs(U-h)&&Q.preventDefault()},$=Q=>{const J=Math.abs(Q);if(J>=u)return c;if(J>=d){const U=(J-d)/(u-d);return l-U*(l-c)}else return l},ne=(Q,J)=>{if(Math.abs(Q)>=u)return f*.5;const K=Math.abs(x)/100;return J?f*Math.max(.5,1-K):f*Math.max(.5,K)},ue=Q=>{if(A!==null&&(cancelAnimationFrame(A),A=null),b=null,!p||!s()){D();return}if(!E){D();return}let J=0;if(Q?.changedTouches?.[0]){const Y=Q.changedTouches[0].clientX,T=performance.now()-m;T>0&&(J=(Y-g)/T)}const U=$(J);let K=null;e.sidebarState==="closeSwiping"?K=Math.abs(x)>U||J>d?"open":"close":e.sidebarState==="openSwiping"&&(K=Math.abs(x)>U||J<-d?"close":"open");const N=e.sidebarState==="closeSwiping"&&K==="open"||e.sidebarState==="openSwiping"&&K==="close",M=ne(J,N);n.duration=M-.02,s().style.setProperty("--transition-timing",`${M}s`),s().offsetWidth,s().style.transform="",K==="open"?e.onOpen():K==="close"&&e.onClose(),s()?.style.removeProperty("--backdrop-bg"),D()};be(()=>(document.addEventListener("touchstart",P,{passive:!0}),document.addEventListener("touchmove",X,{passive:!1}),document.addEventListener("touchend",ue,{passive:!0}),document.addEventListener("touchcancel",ue,{passive:!0}),()=>{document.removeEventListener("touchstart",P),document.removeEventListener("touchmove",X),document.removeEventListener("touchend",ue),document.removeEventListener("touchcancel",ue),A!==null&&cancelAnimationFrame(A)})),te()}var Yu=W('<dialog><div class="dialogInner svelte-1nov8pn"><!></div></dialog> <!> <!>',1);function Ku(t,e){ee(e,!0);const{getStackPages:n}=ot(),{getSidebarState:r,handleComputeState:s}=Jr();let o=350;const i=Qt(),{isScrolling:l}=Ia();let c=V(null),u=V(null),d=F(r);Te(()=>{n().length>0&&s({type:"close"})});const f=()=>{e.blocked||s({type:"close"})},v=()=>{e.blocked||s({type:"open"})},g=()=>{s({type:"opened"}),i.swipingRatio=-1,i.duration=.2},h=()=>{s({type:"closed"})},m=()=>{s({type:"swipe"})},p=j=>{j.preventDefault(),f()};be(()=>(a(c)?.addEventListener("close",h),a(c)?.addEventListener("cancel",p),()=>{a(c)?.removeEventListener("close",h),a(c)?.removeEventListener("cancel",p)}));const E=()=>{a(c)?.style.removeProperty("--transition-timing"),a(c)?.style.removeProperty("transform"),a(c)?.style.removeProperty("--backdrop-bg")},C=F(l);Te(()=>{if(a(d),!!a(c))switch(a(d).type==="openSwiping"||a(d).type==="closeSwiping"?i.isSwiping=!0:i.isSwiping=!1,a(d).type){case"closeSwiping":{const j=setTimeout(()=>{f()},3e3);return()=>{clearTimeout(j)}}case"openSwiping":{const j=setTimeout(()=>{v()},3e3);return()=>{clearTimeout(j)}}case"opening":{a(c).open||a(c).showModal(),a(c).getBoundingClientRect();const j=setTimeout(()=>{E()},o+1),X=()=>{clearTimeout(j),E()};return a(c)?.addEventListener("transitionend",X,{once:!0}),g(),()=>{clearTimeout(j),a(c)?.removeEventListener("transitionend",X)}}case"closing":{i.swipingRatio=0,i.duration=.2;const j=setTimeout(()=>{a(d).type==="closing"&&h()},o+1),X=()=>{clearTimeout(j),h()};return a(c)?.addEventListener("transitionend",X,{once:!0}),()=>{clearTimeout(j),a(c)?.removeEventListener("transitionend",X)}}case"closed":a(c)?.close(),E();break;case"opened":E();break}}),be(()=>{a(d).type==="opened"&&s({type:"open"})});var y=Yu(),x=R(y),D=k(x),A=k(D);{var b=j=>{var X=G(),$=R(X);ye($,()=>e.children),_(j,X)};q(A,j=>{a(d).type!=="closed"&&j(b)})}st(D,j=>w(u,j),()=>a(u)),st(x,j=>w(c,j),()=>a(c));var P=z(x,2);{var I=j=>{Ba(j,{get dialog(){return a(c)},get dialogInner(){return a(u)},onClose:f})};q(P,j=>{a(d).type==="opened"&&!e.blocked&&j(I)})}var Z=z(P,2);{var se=j=>{Wu(j,{onClose:f,onOpen:v,onSwipe:m,get sidebarState(){return a(d).type},get dialog(){return a(c)}})};q(Z,j=>{(!a(C)&&a(d).type==="closed"||a(d).type==="opened"||a(d).type==="openSwiping"||a(d).type==="closeSwiping")&&!e.blocked&&j(se)})}ce(()=>_e(x,1,pe([{open:a(d).type==="opened",hidden:e.blocked,isAnimationOn:i.working&&(!i.isSwiping||!e.blocked)}]),"svelte-1nov8pn")),_(t,y),te()}var Xu=(t,e,n)=>{e(),n("/",{full:!0})(t)},Gu=W('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Zu=(t,e,n)=>{e(),n(H.Bin,{full:!0})(t)},Ju=W('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Qu=W('<div class="sidebarFixed svelte-ltt61h"><div class="nav svelte-ltt61h"><!> <div class="menu svelte-ltt61h"><a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="searchWrapper svelte-ltt61h"><!></div> <!></div> <!>',1),$u=W('<div class="sidebar svelte-ltt61h"><div class="sidebarFixed svelte-ltt61h"><!></div> <!></div>');function ed(t,e){ee(e,!0);const{checkMobileSize:n}=bn(),{sidebarClose:r,getSidebarState:s,sidebarOpen:o}=Jr(),{getAppLocation:i}=Lt(),{getPageUrl:l,createHandlePage:c,getStackPagesFormUrl:u}=ot(),d=co(),f=F(()=>i().pathname),{getSelectedTags:v,addTag:g,removeTag:h}=go();let m=F(v);const{checkNotesInBin:p}=hr();let E=ve(e,"getNotes",3,()=>[]),C=ve(e,"mode",3,"notes");const y=$=>{g($)},x=$=>{h($)};let D=F(()=>qu(a(m),E()()||[],$=>!($?.data&&$.data.deletedAt&&C()==="notes"||$?.data&&!$.data.deletedAt&&C()==="bin")).filter($=>d.value===""||$.toLowerCase().indexOf(d.value.toLowerCase())!==-1).sort(($,ne)=>$==="inbox"?-1:ne==="inbox"?1:$.localeCompare(ne))),A=F(n);const{checkExistedDialog:b}=$t();let P=F(()=>u().length>0||b());const I=()=>{if(a(A)){if(a(P))return;s().type==="opened"?r():s().type==="closed"&&o()}};be(()=>or({key:"b",meta:!0,action:I})),be(()=>or({key:"b",ctrl:!0,action:I}));var Z=G(),se=R(Z);{var j=$=>{Ku($,{get blocked(){return a(P)},children:(ne,ue)=>{var Q=Qu(),J=R(Q),U=k(J),K=k(U);Io(K,{});var N=z(K,2),M=k(N),Y=F(()=>c(H.Settings));M.__click=function(...de){a(Y)?.apply(this,de)};var re=k(M);ge(re,()=>({"--size":"24px"})),me(re.lastChild,{name:"settings"});var T=z(re,2);Ge(T,{children:(de,Ee)=>{var Pe=Oe("Settings");_(de,Pe)}});var B=z(M,2),S=F(()=>c(H.Sync));B.__click=function(...de){a(S)?.apply(this,de)};var O=k(B);ge(O,()=>({"--size":"24px"})),me(O.lastChild,{name:"sync"});var oe=z(O,2);Ge(oe,{children:(de,Ee)=>{var Pe=Oe("Sync");_(de,Pe)}});var ke=z(B,2);{var fe=de=>{var Ee=Gu();Ee.__click=[Xu,r,c];var Pe=k(Ee);ge(Pe,()=>({"--size":"24px"})),me(Pe.lastChild,{name:"note"});var it=z(Pe,2);Ge(it,{children:(Be,Ye)=>{var $e=Oe("Notes");_(Be,$e)}}),ce(Be=>Ce(Ee,"href",Be),[()=>l("/",{full:!0})]),_(de,Ee)},ae=de=>{var Ee=G(),Pe=R(Ee);{var it=Be=>{var Ye=Ju();Ye.__click=[Zu,r,c];var $e=k(Ye);ge($e,()=>({"--size":"24px"})),me($e.lastChild,{name:"bin"});var jt=z($e,2);Ge(jt,{children:(bt,gr)=>{var Jn=Oe("Bin");_(bt,Jn)}}),ce(bt=>Ce(Ye,"href",bt),[()=>l(H.Bin,{full:!0})]),_(Be,Ye)};q(Pe,Be=>{p()&&Be(it)},!0)}_(de,Ee)};q(ke,de=>{a(f)===`/${H.Bin}`?de(fe):de(ae,!1)})}var ie=z(U,2),Ne=k(ie);ma(Ne,{placeholder:"Search tag",get value(){return d.value},set value(de){d.value=de}});var Ie=z(ie,2);ds(Ie,{get selectedTags(){return a(m)},handleSelectedTagClick:x});var Le=z(J,2);us(Le,{get tags(){return a(D)},handleTagClick:y,mobile:!0}),ce((de,Ee)=>{Ce(M,"href",de),Ce(B,"href",Ee)},[()=>l(H.Settings),()=>l(H.Sync)]),_(ne,Q)},$$slots:{default:!0}})},X=$=>{var ne=$u(),ue=k(ne),Q=k(ue);ds(Q,{get selectedTags(){return a(m)},handleSelectedTagClick:x});var J=z(ue,2);us(J,{get tags(){return a(D)},handleTagClick:y}),_($,ne)};q(se,$=>{a(A)?$(j):$(X,!1)})}_(t,Z),te()}We(["click"]);const td=(t,e,n,r)=>{e.noteData.pinnedAt?(n(e.noteId,!1),vn("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),vn("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),w(r,!0)},nd=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),vn("Link copied"),w(n,!0)};var rd=W('<li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),ad=(t,e,n)=>{w(e,!0),w(n,!0)},sd=W('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),od=(t,e,n)=>{w(e,!0),w(n,!0)},id=(t,e,n)=>{w(e,!0),w(n,!0)},ld=W('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete from bin</button></li>',1),cd=W('<ul class="menu svelte-8ve3pe"><!> <li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),ud=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),dd=W("<!> <!>",1);function fd(t,e){ee(e,!0);const n=(P,I=xe)=>{var Z=cd(),se=k(Z);{var j=K=>{var N=rd(),M=k(N);M.__click=[nd,e,u];var Y=k(M);ge(Y,()=>({"--size":"22px"})),me(Y.lastChild,{name:"copy"}),ce(()=>_e(M,1,pe(["button",{buttonMenuDialog:I()}]),"svelte-8ve3pe")),_(K,N)};q(se,K=>{I()&&e.noteData.url&&K(j)})}var X=z(se,2),$=k(X);$.__click=[td,e,o,u];var ne=k($);{let K=F(()=>e.noteData.pinnedAt?"pin-cancel":"pin");ge(ne,()=>({"--size":"22px"})),me(ne.lastChild,{get name(){return a(K)}})}var ue=z(ne),Q=z(X,2);{var J=K=>{var N=sd(),M=k(N);M.__click=[ad,d,u];var Y=k(M),re=k(Y);ge(re,()=>({"--size":"18px"})),me(re.lastChild,{name:"bin"}),ce(()=>_e(M,1,pe(["button",{buttonMenuDialog:I()}]),"svelte-8ve3pe")),_(K,N)},U=K=>{var N=ld(),M=R(N),Y=k(M);Y.__click=[od,f,u];var re=k(Y),T=k(re);ge(T,()=>({"--size":"18px"})),me(T.lastChild,{name:"bin-cancel"});var B=z(M,2),S=k(B);S.__click=[id,v,u];var O=k(S),oe=k(O);ge(oe,()=>({"--size":"18px"})),me(oe.lastChild,{name:"bin"}),ce(()=>{_e(Y,1,pe(["button",{buttonMenuDialog:I()}]),"svelte-8ve3pe"),_e(S,1,pe(["button",{buttonMenuDialog:I()}]),"svelte-8ve3pe")}),_(K,N)};q(Q,K=>{l()==="notes"?K(J):K(U,!1)})}ce(()=>{_e($,1,pe(["button",{buttonMenuDialog:I()}]),"svelte-8ve3pe"),Rt(ue,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),_(P,Z)},{moveNoteToBin:r,deleteNote:s,pinNote:o,restoreNoteFromBin:i}=hr();let l=ve(e,"mode",3,"notes"),c=ve(e,"shownMenu",15),u=V(!1),d=V(!1),f=V(!1),v=V(!1);const{checkMobileSize:g}=bn();let h=F(g);const m=()=>{s(e.noteId),vn("Draft deleted")},p=async()=>{r(e.noteId),vn("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},E=()=>{i(e.noteId),vn("Note restored from bin",{onCancel:()=>{r(e.noteId)}})},C=()=>{a(d)?(w(d,!1),e.noteData.type==="draft"?m():p()):a(f)&&(w(f,!1),E()),c(!1),w(u,!1)};var y=dd(),x=R(y);{var D=P=>{var I=G(),Z=R(I);{var se=X=>{Ra(X,{get startClose(){return a(u)},onClosed:C,children:($,ne)=>{n($,()=>!0)},$$slots:{default:!0}})},j=X=>{var $=ud(),ne=R($);ge(ne,()=>({"--bottom":"-90px","--right":"20px"})),Mo(ne.lastChild,{get startClose(){return a(u)},get positionTop(){return e.showMenuUp},onClosed:C,children:(ue,Q)=>{n(ue,()=>!1)},$$slots:{default:!0}}),_(X,$)};q(Z,X=>{a(h)?X(se):X(j,!1)})}_(P,I)};q(x,P=>{c()&&P(D)})}var A=z(x,2);{var b=P=>{Oo(P,{title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:()=>{s(e.noteId),w(v,!1)},onCancel:()=>{w(v,!1)}})};q(A,P=>{a(v)&&P(b)})}_(t,y),te()}We(["click"]);const vd=(t,e)=>{w(e,!0)},hd=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),vn("Link copied"),w(n,!1)},gd=(t,e)=>{w(e,!0)},pd=(t,e)=>{w(e,!1)},_d=(t,e,n,r)=>{t.preventDefault(),e.noteData.type==="draft"?n(`${H.NewNote}`):n(`${H.EditNote}?id=${e.noteId}`),w(r,!1)};var md=W('<div class="iconPlaceholder svelte-1jg44o9"></div>'),wd=W('<img loading="lazy" class="noteIcon" height="16" width="16" alt=""/>'),yd=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),bd=W('<div class="noteIconWrapper svelte-1jg44o9"><!></div>'),Sd=W('<button class="button svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),kd=(t,e)=>{w(e,!1)},Cd=W('<!> <a target="_blank" rel="noopener noreferrer" class="button openLink svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),Ed=W('<li><!> <a class="noteLink svelte-1jg44o9" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function Pd(t,e){ee(e,!0);const{pushStackPages:n}=ot(),{getFaviconEnabled:r}=wo();let s=ve(e,"mode",3,"notes"),o=V(!1),i=V(!1),l=V(!1),c=F(r);const{checkMobileSize:u}=bn(),d=P=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(P).host}.ico`}catch{return""}},f=e.noteData.url||e.noteData.draft?.url||"";var v=Ed();v.__focusin=[gd,i],v.__focusout=[pd,i];var g=k(v);{var h=P=>{var I=bd(),Z=k(I);{var se=X=>{var $=G(),ne=R($);{var ue=J=>{var U=md();_(J,U)},Q=J=>{var U=wd();ce(K=>Ce(U,"src",K),[()=>d(f)]),Ta("error",U,()=>{w(l,!0)}),_(J,U)};q(ne,J=>{a(l)?J(ue):J(Q,!1)})}_(X,$)},j=X=>{var $=yd(),ne=R($);ge(ne,()=>({"--size":"16px"})),me(ne.lastChild,{name:"note"}),_(X,$)};q(Z,X=>{f?X(se):X(j,!1)})}_(P,I)};q(g,P=>{a(c)&&P(h)})}var m=z(g,2);m.__click=[_d,e,n,i];var p=k(m),E=z(m,2),C=k(E);{var y=P=>{var I=Cd(),Z=R(I);{var se=ne=>{var ue=Sd();ue.__click=[hd,e,i];var Q=k(ue);ge(Q,()=>({"--size":"20px"})),me(Q.lastChild,{name:"copy"});var J=z(Q,2);Ge(J,{children:(U,K)=>{var N=Oe("copy link");_(U,N)}}),ce(()=>Ce(ue,"tabindex",e.focusHidden?-1:0)),_(ne,ue)};q(Z,ne=>{u()||ne(se)})}var j=z(Z,2);j.__click=[kd,i];var X=k(j);ge(X,()=>({"--size":"18px"})),me(X.lastChild,{name:"open"});var $=z(X,2);Ge($,{children:(ne,ue)=>{var Q=Oe();ce(()=>Rt(Q,e.noteData.draft?.name||e.noteData.name||"unknown")),_(ne,Q)}}),ce(()=>{Ce(j,"href",f),Ce(j,"tabindex",e.focusHidden?-1:0)}),_(P,I)};q(C,P=>{f&&P(y)})}var x=z(C,2);x.__click=[vd,o],_e(x,1,pe(["button","buttonMenu"]),"svelte-1jg44o9");var D=k(x);ge(D,()=>({"--size":"18px","--rotate":"90deg"})),me(D.lastChild,{name:"menu"});var A=z(D,2);Ge(A,{children:(P,I)=>{var Z=Oe("show menu");_(P,Z)}});var b=z(E,2);fd(b,{get mode(){return s()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return a(o)},set shownMenu(P){w(o,P,!0)}}),ce((P,I)=>{_e(v,1,P,"svelte-1jg44o9"),Ce(m,"tabindex",e.focusHidden?-1:0),Ce(m,"href",I),Rt(p,e.noteData?.draft?.name||e.noteData?.name||"unknown"),_e(E,1,pe(["noteMenuWrapper",{noteMenuWrapperActive:a(i)}]),"svelte-1jg44o9"),Ce(x,"tabindex",e.focusHidden?-1:0)},[()=>pe(["record",{pinned:!!e.noteData.pinnedAt,draft:!!e.noteData.draft}]),()=>`/?stackPages=${encodeURIComponent(`${H.EditNote}?id=${e.noteId}`)}`]),_(t,v),te()}We(["focusin","focusout","click"]);var Wn,Fo,zo;class xd{constructor(e){Se(this,Wn);lt(this,"data");lt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),He(this,Wn,Fo).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,He(this,Wn,zo).call(this)),e}isEmpty(){return this.data.length===0}}Wn=new WeakSet,Fo=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(n,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},zo=function(){let e=0;const n=this.data.length;for(;;){const r=2*e+1,s=2*e+2;let o=e;if(r<n&&this.compare(this.data[r],this.data[o])<0&&(o=r),s<n&&this.compare(this.data[s],this.data[o])<0&&(o=s),o===e)break;[this.data[e],this.data[o]]=[this.data[o],this.data[e]],e=o}};class Ad{constructor(e,n){lt(this,"heap");lt(this,"done");lt(this,"cache",[]);this.heap=new xd(n);for(const r of e)this.heap.insert(r);this.done=!1}get(e,n){const r=this.cache.slice(e,n);for(;r.length<n-e&&!this.heap.isEmpty();){const s=this.heap.extractMin();s!==void 0&&(this.cache.push(s),r.push(s))}return this.heap.isEmpty()&&(this.done=!0),r}}var Dd=W('<p class="message">No notes in bin</p>'),Td=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),Nd=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),Ld=W('<p class="message">No notes found</p> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div> <div>or</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),Id=W('<div class="emptyStore svelte-106i4nx"><!></div>'),Md=W("<span>Back to notes</span>"),Od=W('<div class="emptyMessage svelte-106i4nx">No notes in bin</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),Bd=W('<div class="emptyMessage svelte-106i4nx">No notes found</div>'),Rd=W('<div class="feed svelte-106i4nx"><ul class="svelte-106i4nx"></ul></div>'),Fd=W('<div class="wrapperFeed svelte-106i4nx"><div class="wrapperContainer svelte-106i4nx"><!></div></div>');function zd(t,e){ee(e,!0);let n=ve(e,"getNotes",3,()=>[]),r=ve(e,"mode",3,"notes");const{getScrollContainer:s}=Ma(),{createHandlePage:o,getPageUrl:i}=ot(),{getSelectedTags:l}=go(),{getFeedOrder:c}=fo(),u=oo();let d=54,f=V(0),v=V(0),g=V(0),h=V(0),m=[],p=V(0),E=V(null),C=F(s),y=null,x=null;const D=F(l);Te(()=>{a(D),a(Z),a(C)?.scrollTo(0,0)});const{enable:A}=Ia(),b=()=>{A(),y||(y=requestAnimationFrame(()=>{const N=a(C)?.scrollTop||0;w(g,N,!0);const M=Math.ceil(a(f)/d);w(v,Math.floor(N/(d*M))*(d*M)),y=null}))},P=()=>{x||(x=requestAnimationFrame(()=>{w(f,window.innerHeight-180||0,!0);const N=a(C)?.scrollTop||0;w(g,N,!0);const M=Math.ceil(a(f)/d);w(v,Math.floor(N/(d*M))*(d*M)),x=null}))};be(()=>{P(),b()});const I=()=>{b()};Te(()=>(a(C)?.addEventListener("scroll",I),window.addEventListener("resize",P),()=>{a(C)?.removeEventListener("scroll",I),window.removeEventListener("resize",P)}));const Z=F(c);Te(()=>{const N=n()()||[],M=[],Y=Array.from(a(D).values());for(let re=N.length-1;re>=0;re--){if(!N[re]||!N[re].data)continue;const T=N[re];r()==="notes"&&T?.data.deletedAt||r()==="bin"&&!T?.data.deletedAt||a(D).size&&Y.some(B=>!T.data?.tags.includes(B))&&(!T.data.draft||Y.some(B=>!T.data?.draft?.tags.includes(B)))||u&&!(T.data.name.toLowerCase().includes(u.value.toLowerCase())||T.data.url.toLowerCase().includes(u.value.toLowerCase())||T.data.text.toLowerCase().includes(u.value.toLowerCase()))||M.push(T)}w(h,M.length,!0),m=M,w(p,Date.now(),!0)}),Te(()=>{a(Z),a(p),w(E,new Ad(m,(N,M)=>{if(!N||!M||!N.data||!M.data)return 0;if(N.data.pinnedAt&&!M.data.pinnedAt)return-1;if(!N.data.pinnedAt&&M.data.pinnedAt)return 1;if(N.data.pinnedAt&&M.data.pinnedAt){if(N.data.pinnedAt<M.data.pinnedAt)return 1;if(N.data.pinnedAt>M.data.pinnedAt)return-1}if(N.data.draft&&!M.data.draft)return-1;if(!N.data.draft&&M.data.draft)return 1;if(N.data.draft&&M.data.draft){if(N.data.draft.updatedAt<M.data.draft.updatedAt)return 1;if(N.data.draft.updatedAt>M.data.draft.updatedAt)return-1}switch(a(Z)){case"newest":return N.data.updatedAt<M.data.updatedAt?1:-1;case"oldest":return N.data.updatedAt>M.data.updatedAt?1:-1;case"AtoZ":return N.data.name.localeCompare(M.data.name);case"ZtoA":return M.data.name.localeCompare(N.data.name);default:return 0}}),!0)});const se=F(()=>a(h)*d);let X=F(()=>{a(p);const N=Math.ceil(a(f)/d);let M=Math.floor(a(v)/d);return M=M-Math.min(M,N),a(E)?.get(M,M+N*3)||[]}),$=F(()=>d*Math.ceil(a(f)/d));const ne=F(()=>a(v)-Math.min(a(v),a($)));var ue=Fd(),Q=k(ue),J=k(Q);{var U=N=>{Bo(N,{})},K=N=>{var M=G(),Y=R(M);{var re=B=>{var S=Id(),O=k(S);{var oe=fe=>{var ae=Dd();_(fe,ae)},ke=fe=>{var ae=Ld(),ie=z(R(ae),2),Ne=k(ie);{let de=F(()=>i(H.NewNote)),Ee=F(()=>o(H.NewNote));Xt(Ne,{element:"a",get href(){return a(de)},get onClick(){return a(Ee)},children:(Pe,it)=>{var Be=Td(),Ye=R(Be);ge(Ye,()=>({"--size":"18px","--color":"#b0b0b0"})),me(Ye.lastChild,{name:"plus"}),_(Pe,Be)},$$slots:{default:!0}})}var Ie=z(ie,4),Le=k(Ie);{let de=F(()=>i(H.ImportData)),Ee=F(()=>o(H.ImportData));Xt(Le,{element:"a",get href(){return a(de)},get onClick(){return a(Ee)},children:(Pe,it)=>{var Be=Nd(),Ye=R(Be);ge(Ye,()=>({"--size":"18px","--color":"#b0b0b0"})),me(Ye.lastChild,{name:"import"}),_(Pe,Be)},$$slots:{default:!0}})}_(fe,ae)};q(O,fe=>{r()==="bin"?fe(oe):fe(ke,!1)})}_(B,S)},T=B=>{var S=G(),O=R(S);{var oe=fe=>{var ae=Od(),ie=z(R(ae),2),Ne=k(ie);{let Ie=F(()=>i("/",{full:!0})),Le=F(()=>o("/",{full:!0}));Xt(Ne,{element:"a",get href(){return a(Ie)},get onClick(){return a(Le)},children:(de,Ee)=>{var Pe=Md();_(de,Pe)},$$slots:{default:!0}})}_(fe,ae)},ke=fe=>{var ae=G(),ie=R(ae);{var Ne=Le=>{var de=Bd();_(Le,de)},Ie=Le=>{var de=Rd(),Ee=k(de);Gr(Ee,23,()=>a(X),Pe=>Pe.data,(Pe,it,Be)=>{var Ye=G(),$e=R(Ye);{var jt=bt=>{{let gr=F(()=>a(Be)*d<a(g)-a(ne)-d/2||a(Be)*d>a(g)-a(ne)+Math.floor(a(f)/d)*d),Jn=F(()=>(a(Be)+3)*d<a(g)-a(ne)-d/2||(a(Be)+3)*d>a(g)-a(ne)+Math.floor(a(f)/d)*d);Pd(bt,{get mode(){return r()},get focusHidden(){return a(gr)},get showMenuUp(){return a(Jn)},get noteId(){return a(it).id},get noteData(){return a(it).data}})}};q($e,bt=>{a(it).data&&bt(jt)})}_(Pe,Ye)}),ce(Pe=>{qn(de,`min-height: ${Pe??""}px`),qn(Ee,`transform: translateY(${a(ne)??""}px);`)},[()=>Math.max((a(se)>a(f),a(se)),0)]),_(Le,de)};q(ie,Le=>{a(X).length===0?Le(Ne):Le(Ie,!1)},!0)}_(fe,ae)};q(O,fe=>{r()==="bin"&&e.countNotesInBin()===0?fe(oe):fe(ke,!1)},!0)}_(B,S)};q(Y,B=>{(n()()||[]).length===0||r()==="notes"&&(n()()||[]).length-e.countNotesInBin()===0?B(re):B(T,!1)},!0)}_(N,M)};q(J,N=>{e.readyNotes?N(K,!1):N(U)})}_(t,ue),te()}var Hd=W('<!> <div class="content svelte-k57gez"><!></div>',1);function jd(t,e){ee(e,!0);const{getAppLocation:n}=Lt(),{getGetNotes:r,isInitedNotes:s,countNotesInBin:o}=hr(),i=F(s),l=F(r),c=F(()=>n().pathname);var u=Hd(),d=R(u);{let g=F(()=>a(c)==="/bin"?"bin":"notes");ed(d,{get mode(){return a(g)},get getNotes(){return a(l)}})}var f=z(d,2),v=k(f);{let g=F(()=>a(c)==="/bin"?"bin":"notes");zd(v,{get mode(){return a(g)},get getNotes(){return a(l)},get countNotesInBin(){return o},get readyNotes(){return a(i)}})}_(t,u),te()}var Ud=W('<h1 class="svelte-1ky72l5"><!></h1>');function Vd(t,e){var n=Ud(),r=k(n);ye(r,()=>e.children),_(t,n)}const Ho=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var qd=W('<div class="block svelte-4rc64"><!> <p class="message svelte-4rc64">Enjoy using the app!</p> <div class="container svelte-4rc64"><!></div></div>');function Wd(t,e){ee(e,!1);const{pushStackPages:n}=ot(),r=()=>{Ho()?n(H.AccountSetup):n(H.Install)};Zr();var s=qd(),o=k(s);Vd(o,{children:(c,u)=>{var d=Oe("Wellcome");_(c,d)}});var i=z(o,4),l=k(i);Xt(l,{onClick:r,fullWidth:!0,children:(c,u)=>{var d=Oe("Start");_(c,d)},$$slots:{default:!0}}),_(t,s),te()}var Yd=W('<div class="wrapper svelte-1rhfuek"><fieldset class="switcher svelte-1rhfuek"><legend class="vh svelte-1rhfuek">Color Scheme</legend> <input id="light" type="radio" aria-label="Light"/> <label for="light" title="Light" aria-label="Light"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="system" type="radio" aria-label="System"/> <label for="system" title="System" aria-label="System"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="dark" type="radio" aria-label="Dark"/> <label for="dark" title="Dark" aria-label="Dark"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <div class="wrapSwitcherStatus svelte-1rhfuek"><div class="switcherStatus svelte-1rhfuek"></div></div></fieldset></div>');function Kd(t,e){ee(e,!0);const{createBroadcastChannel:n}=yn(),r=n(),s={Light:"light",System:"system",Dark:"dark"};let o=V(Re(localStorage.getItem("colorScheme")||s.System));const i=D=>{localStorage.setItem("colorScheme",D),D===s.System?window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.dataset.colorScheme=s.Dark:document.documentElement.dataset.colorScheme=s.Light:document.documentElement.dataset.colorScheme=D,w(o,D,!0)},l=D=>{const A=D.target.value;i(A),r.postMessage({type:"setColorScheme",data:{scheme:A}})},c="color-scheme-switcher";be(()=>{const D=A=>{const b=JSON.parse(A.data);b?.type==="setColorScheme"&&b?.data.scheme&&i(b.data.scheme)};return r.addEventListener(D),()=>{r.removeEventListener(D)}});var u={setColorScheme:i,handleChange:l},d=Yd(),f=k(d),v=z(k(f),2);_e(v,1,pe(["vh","input"]),"svelte-1rhfuek"),Ce(v,"name",c),v.__change=l;var g=z(v,2);_e(g,1,pe(["switcherButton","light"]),"svelte-1rhfuek");var h=k(g);ge(h,()=>({"--size":"20px"})),me(h.lastChild,{name:"sun"});var m=z(g,2);_e(m,1,pe(["vh","input"]),"svelte-1rhfuek"),Ce(m,"name",c),m.__change=l;var p=z(m,2);_e(p,1,pe(["switcherButton","system"]),"svelte-1rhfuek");var E=k(p);ge(E,()=>({"--size":"14px"})),me(E.lastChild,{name:"a"});var C=z(p,2);_e(C,1,pe(["vh","input"]),"svelte-1rhfuek"),Ce(C,"name",c),C.__change=l;var y=z(C,2);_e(y,1,pe(["switcherButton","dark"]),"svelte-1rhfuek");var x=k(y);return ge(x,()=>({"--size":"20px"})),me(x.lastChild,{name:"moon"}),ce(()=>{na(v,s.Light),Nr(v,a(o)===s.Light),na(m,s.System),Nr(m,a(o)===s.System),na(C,s.Dark),Nr(C,a(o)===s.Dark)}),_(t,d),te(u)}We(["change"]);const Xd=(t,e)=>{e.onChange(!e.checked)};var Gd=W('<label class="switch svelte-18l3no4"><input class="vh svelte-18l3no4" type="checkbox"/> <span class="slider svelte-18l3no4"></span> <!></label>');function Zd(t,e){ee(e,!0);var n=Gd(),r=k(n);r.__change=[Xd,e];var s=z(r,4);Ge(s,{children:(o,i)=>{var l=Oe("Toggle switch");_(o,l)}}),ce(()=>Nr(r,e.checked)),_(t,n),te()}We(["change"]);var Jd=W('<li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">Install app</span></a></li>'),Qd=W("<span> </span>"),$d=W('<div class="block svelte-94ovk9"><!> <ul class="svelte-94ovk9"><!> <li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">Account</span></a></li> <li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">Import data</span></a></li> <li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">Export data</span></a></li> <li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">Clear storage</span></a></li> <li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">About</span></a></li></ul> <div class="favicons svelte-94ovk9"><span class="faviconsLabel svelte-94ovk9">show favicons (use duckduckgo servers)</span> <!></div> <div class="hotkeys svelte-94ovk9"><div class="hotkey__head svelte-94ovk9">Hotkeys:</div> <div>New note: <span class="hotkey svelte-94ovk9">N</span></div> <div>Search notes: <span class="hotkey svelte-94ovk9">Ctrl/Cmd + K</span></div> <div>Open sidebar: <span class="hotkey svelte-94ovk9">Ctrl/Cmd + B</span></div></div> <div class="version svelte-94ovk9"><!></div></div>');function ef(t,e){ee(e,!0);const{createHandlePage:n}=ot(),{setFaviconShown:r,getFaviconEnabled:s}=wo();let o=F(s),i=V("");const l=async Y=>{try{const T=await(await fetch("/build-metadata.json",{signal:Y})).json();w(i,`${T.buildHash}`)}catch{console.error("Failed to load build metadata")}};be(()=>{const Y=new AbortController;return l(Y.signal),()=>{Y.abort()}});const c=Y=>{r(Y)};var u=$d(),d=k(u);Kd(d,{});var f=z(d,2),v=k(f);{var g=Y=>{var re=Jd(),T=k(re),B=F(()=>n(H.Install));T.__click=function(...O){a(B)?.apply(this,O)};var S=k(T);ge(S,()=>({"--size":"28px"})),me(S.lastChild,{name:"install"}),ce(()=>Ce(T,"href",`/?stackPages=${H.Install}`)),_(Y,re)};q(v,Y=>{Ho()||Y(g)})}var h=z(v,2),m=k(h),p=F(()=>n(H.Account));m.__click=function(...Y){a(p)?.apply(this,Y)};var E=k(m);ge(E,()=>({"--size":"28px"})),me(E.lastChild,{name:"account"});var C=z(h,2),y=k(C),x=F(()=>n(H.ImportData));y.__click=function(...Y){a(x)?.apply(this,Y)};var D=k(y);ge(D,()=>({"--size":"28px"})),me(D.lastChild,{name:"import"});var A=z(C,2),b=k(A),P=F(()=>n(H.ExportData));b.__click=function(...Y){a(P)?.apply(this,Y)};var I=k(b);ge(I,()=>({"--size":"28px"})),me(I.lastChild,{name:"export"});var Z=z(A,2),se=k(Z),j=F(()=>n(H.ClearStore));se.__click=function(...Y){a(j)?.apply(this,Y)};var X=k(se);ge(X,()=>({"--size":"28px"})),me(X.lastChild,{name:"clear"});var $=z(Z,2),ne=k($),ue=F(()=>n(H.About));ne.__click=function(...Y){a(ue)?.apply(this,Y)};var Q=k(ne);ge(Q,()=>({"--size":"28px"})),me(Q.lastChild,{name:"about"});var J=z(f,2),U=z(k(J),2);Zd(U,{get checked(){return a(o)},onChange:c});var K=z(J,4),N=k(K);{var M=Y=>{var re=Qd(),T=k(re);ce(B=>Rt(T,`version: 0.0.25 build_date: "${B??""}" build_hash:
				${a(i)??""}`),[()=>new Date(1761231557357).toISOString().replaceAll("T"," ").replace(/\..*/,"")]),_(Y,re)};q(N,Y=>{a(i)&&Y(M)})}ce(()=>{Ce(m,"href",`/?stackPages=${H.Account}`),Ce(y,"href",`/?stackPages=${H.ImportData}`),Ce(b,"href",`/?stackPages=${H.ExportData}`),Ce(se,"href",`/?stackPages=${H.ClearStore}`),Ce(ne,"href",`/?stackPages=${H.About}`)}),_(t,u),te()}We(["click"]);const fs=(t,e=xe,n=xe,r)=>{let s=qr(()=>di(r?.(),!1));var o=G(),i=R(o);{var l=u=>{Me(u,{children:(d,f)=>{ef(d,{})},$$slots:{default:!0}})},c=u=>{var d=G(),f=R(d);{var v=h=>{Me(h,{children:(m,p)=>{Ue(m,{get hidden(){return a(s)},get page(){return H.NewNote}})},$$slots:{default:!0}})},g=h=>{var m=G(),p=R(m);{var E=y=>{Me(y,{children:(x,D)=>{Ue(x,{get params(){return n()},get hidden(){return a(s)},get page(){return H.EditNote}})},$$slots:{default:!0}})},C=y=>{var x=G(),D=R(x);{var A=P=>{Me(P,{children:(I,Z)=>{Ue(I,{get hidden(){return a(s)},get page(){return H.ImportData}})},$$slots:{default:!0}})},b=P=>{var I=G(),Z=R(I);{var se=X=>{Me(X,{children:($,ne)=>{Ue($,{get hidden(){return a(s)},get page(){return H.ExportData}})},$$slots:{default:!0}})},j=X=>{var $=G(),ne=R($);{var ue=J=>{Me(J,{children:(U,K)=>{Ue(U,{get hidden(){return a(s)},get page(){return H.ClearStore}})},$$slots:{default:!0}})},Q=J=>{var U=G(),K=R(U);{var N=Y=>{Me(Y,{children:(re,T)=>{Ue(re,{get hidden(){return a(s)},get page(){return H.AccountSetup}})},$$slots:{default:!0}})},M=Y=>{var re=G(),T=R(re);{var B=O=>{Me(O,{children:(oe,ke)=>{Ue(oe,{get hidden(){return a(s)},get page(){return H.Install}})},$$slots:{default:!0}})},S=O=>{var oe=G(),ke=R(oe);{var fe=ie=>{Me(ie,{children:(Ne,Ie)=>{Ue(Ne,{get hidden(){return a(s)},get page(){return H.InstallSuccess}})},$$slots:{default:!0}})},ae=ie=>{var Ne=G(),Ie=R(Ne);{var Le=Ee=>{Me(Ee,{children:(Pe,it)=>{Wd(Pe,{})},$$slots:{default:!0}})},de=Ee=>{var Pe=G(),it=R(Pe);{var Be=$e=>{Me($e,{children:(jt,bt)=>{Ue(jt,{get hidden(){return a(s)},get page(){return H.Auth}})},$$slots:{default:!0}})},Ye=$e=>{var jt=G(),bt=R(jt);{var gr=Sn=>{Me(Sn,{children:(pr,Fa)=>{Ue(pr,{get hidden(){return a(s)},get page(){return H.Signup}})},$$slots:{default:!0}})},Jn=Sn=>{var pr=G(),Fa=R(pr);{var jo=kn=>{Me(kn,{children:(_r,za)=>{Ue(_r,{get hidden(){return a(s)},get page(){return H.Signin}})},$$slots:{default:!0}})},Uo=kn=>{var _r=G(),za=R(_r);{var Vo=Cn=>{Me(Cn,{children:(mr,Ha)=>{Ue(mr,{get hidden(){return a(s)},get page(){return H.AccessKeys}})},$$slots:{default:!0}})},qo=Cn=>{var mr=G(),Ha=R(mr);{var Wo=En=>{Me(En,{children:(wr,ja)=>{Ue(wr,{get hidden(){return a(s)},get page(){return H.Account}})},$$slots:{default:!0}})},Yo=En=>{var wr=G(),ja=R(wr);{var Ko=Pn=>{Me(Pn,{children:(yr,Ua)=>{Ue(yr,{get hidden(){return a(s)},get page(){return H.ConfirmAccessKey}})},$$slots:{default:!0}})},Xo=Pn=>{var yr=G(),Ua=R(yr);{var Go=xn=>{Me(xn,{children:(br,Va)=>{Ue(br,{get hidden(){return a(s)},get page(){return H.Exit}})},$$slots:{default:!0}})},Zo=xn=>{var br=G(),Va=R(br);{var Jo=An=>{Me(An,{children:(Sr,qa)=>{Ue(Sr,{get hidden(){return a(s)},get page(){return H.Sync}})},$$slots:{default:!0}})},Qo=An=>{var Sr=G(),qa=R(Sr);{var $o=Dn=>{Me(Dn,{children:(kr,Wa)=>{Ue(kr,{get hidden(){return a(s)},get page(){return H.Subscription}})},$$slots:{default:!0}})},ei=Dn=>{var kr=G(),Wa=R(kr);{var ti=Tn=>{Me(Tn,{children:(Qr,ri)=>{Ue(Qr,{get hidden(){return a(s)},get page(){return H.About}})},$$slots:{default:!0}})},ni=Tn=>{Me(Tn,{children:(Qr,ri)=>{Iu(Qr,{})},$$slots:{default:!0}})};q(Wa,Tn=>{e()===H.About?Tn(ti):Tn(ni,!1)},!0)}_(Dn,kr)};q(qa,Dn=>{e()===H.Subscription?Dn($o):Dn(ei,!1)},!0)}_(An,Sr)};q(Va,An=>{e()===H.Sync?An(Jo):An(Qo,!1)},!0)}_(xn,br)};q(Ua,xn=>{e()===H.Exit?xn(Go):xn(Zo,!1)},!0)}_(Pn,yr)};q(ja,Pn=>{e()===H.ConfirmAccessKey?Pn(Ko):Pn(Xo,!1)},!0)}_(En,wr)};q(Ha,En=>{e()===H.Account?En(Wo):En(Yo,!1)},!0)}_(Cn,mr)};q(za,Cn=>{e()===H.AccessKeys?Cn(Vo):Cn(qo,!1)},!0)}_(kn,_r)};q(Fa,kn=>{e()===H.Signin?kn(jo):kn(Uo,!1)},!0)}_(Sn,pr)};q(bt,Sn=>{e()===H.Signup?Sn(gr):Sn(Jn,!1)},!0)}_($e,jt)};q(it,$e=>{e()===H.Auth?$e(Be):$e(Ye,!1)},!0)}_(Ee,Pe)};q(Ie,Ee=>{e()===H.Wellcome?Ee(Le):Ee(de,!1)},!0)}_(ie,Ne)};q(ke,ie=>{e()===H.InstallSuccess?ie(fe):ie(ae,!1)},!0)}_(O,oe)};q(T,O=>{e()===H.Install?O(B):O(S,!1)},!0)}_(Y,re)};q(K,Y=>{e()===H.AccountSetup?Y(N):Y(M,!1)},!0)}_(J,U)};q(ne,J=>{e()===H.ClearStore?J(ue):J(Q,!1)},!0)}_(X,$)};q(Z,X=>{e()===H.ExportData?X(se):X(j,!1)},!0)}_(P,I)};q(D,P=>{e()===H.ImportData?P(A):P(b,!1)},!0)}_(y,x)};q(p,y=>{e()===H.EditNote?y(E):y(C,!1)},!0)}_(h,m)};q(f,h=>{e()===H.NewNote?h(v):h(g,!1)},!0)}_(u,d)};q(i,u=>{e()===H.Settings?u(l):u(c,!1)})}_(t,o)};var tf=W("<!> <!>",1);function nf(t,e){ee(e,!0);const{getStackPages:n}=ot(),{getAccount:r}=So();let s=F(n),o=F(()=>r()!==void 0);const{checkMobileSize:i}=bn();let l=V(Re([]));const c=F(i);Te(()=>{a(s),a(c),ht(()=>{if(a(c))a(s).length>=a(l).length?w(l,a(s).map(p=>({page:p,shown:!0})),!0):w(l,a(l).map((p,E)=>({page:p.page,shown:E<a(s).length})),!0);else if(a(s).length>=a(l).length)w(l,a(s).map(p=>({page:p,shown:!0})),!0);else{if(a(s).length===0){w(l,[{page:a(l)[a(l).length-1].page,shown:!1}],!0);return}w(l,a(s).map(p=>({page:p,shown:!0})),!0)}})});const u=()=>{w(l,a(s).map(p=>({page:p,shown:!0})),!0)};var d=tf(),f=R(d);{var v=p=>{jd(p,{})};q(f,p=>{a(o)&&p(v)})}var g=z(f,2);{var h=p=>{var E=G(),C=R(E);Gr(C,19,()=>a(l),y=>y.page,(y,x,D)=>{const A=F(()=>a(x).page.split("?")[1]),b=F(()=>a(x).page.split("?")[0]);{let P=F(()=>a(D)!==a(l).length-1&&!!a(l)[a(D)+1]?.shown),I=F(()=>a(D)===0);ls(y,{onClosed:u,get shown(){return a(x).shown},get hidden(){return a(P)},get isLastDialog(){return a(I)},children:(Z,se)=>{{let j=F(()=>a(D)!==a(l).length-1&&!!a(l)[a(D)+1]?.shown);fs(Z,()=>a(b),()=>a(A),()=>a(j))}},$$slots:{default:!0}})}}),_(p,E)},m=p=>{var E=G(),C=R(E);{var y=x=>{const D=F(()=>a(l)[a(l).length-1].page.split("?")[1]),A=F(()=>a(l)[a(l).length-1].page.split("?")[0]);{let b=F(()=>a(l).length===1);ls(x,{onClosed:u,get shown(){return a(l)[a(l).length-1].shown},hidden:!1,get isLastDialog(){return a(b)},children:(P,I)=>{fs(P,()=>a(A),()=>a(D))},$$slots:{default:!0}})}};q(C,x=>{a(l).length>0&&x(y)},!0)}_(p,E)};q(g,p=>{i()?p(h):p(m,!1)})}_(t,d),te()}function rf(t,e){ee(e,!1);let n=0;be(()=>{document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const o=r.touches[0].clientX-n;(n<30&&o>0||n>window.innerWidth-30&&o<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Zr(),te()}const af=(t,e)=>{a(e)&&a(e).scrollTo({top:0})};var sf=W('<div><button class="buttonTop svelte-1n46o8q"><!> <span class="icon svelte-1n46o8q"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),of=W('<!> <!> <main><div class="wrapperHeader svelte-1n46o8q"><!></div> <div class="container svelte-1n46o8q"><!></div></main> <!>',1);function lf(t,e){ee(e,!0);const{navigate:n}=Lt(),{hasStackPage:r}=ot(),{setScrollContainer:s}=Ma(),{getAccount:o,init:i}=So(),{isInitedNotes:l}=hr(),{getStackPagesFormUrl:c}=ot(),{createBroadcastChannel:u,tabId:d}=yn(),f=u(),{getSidebarState:v}=Jr(),{setClosableDialog:g}=$t(),h=()=>{n("/?stackPages=wellcome")};be(()=>{i(M=>{M===void 0?h():((r("wellcome")||r("accountSetup"))&&n("/"),M?w(y,M):w(y,null))});const N=async M=>{const Y=JSON.parse(M.data);if(Y.tabId&&Y.tabId===d)return;const re=Y;re.type==="initLocalAccount"||re.type==="initCloudAccount"||re.type==="updateAccount"||re.type==="disconnectCloudAccount"?n("/"):re.type==="exit"&&(n("/"),setTimeout(()=>{h()}))};return f.addEventListener(N),()=>f.removeEventListener(N)});const m=Qt();be(async()=>{await new Promise(N=>setTimeout(N,100)),await Qs(),m.working=!0});let p=V(!1),E=0,C=F(()=>c().length>0),y=F(o),x=F(l),D=V(null);Te(()=>{g(a(y)!==void 0)}),Te(()=>{s(a(D))});const A=()=>{if(a(D)){const N=a(D).scrollTop||0;N===0?w(p,!1):!a(p)&&E>N?w(p,!0):a(p)&&E+50<N&&w(p,!1),E=N}},b=()=>{A()};Te(()=>(a(D)?.addEventListener("scroll",b),window.addEventListener("resize",b),()=>{a(D)?.removeEventListener("scroll",b),window.removeEventListener("resize",b)}));const P=F(v);var I=of(),Z=R(I);rf(Z,{});var se=z(Z,2);Fc(se,{});var j=z(se,2),X=k(j),$=k(X);{var ne=N=>{hu(N,{})};q($,N=>{a(y)!==void 0&&N(ne)})}var ue=z(X,2),Q=k(ue);{var J=N=>{nf(N,{})};q(Q,N=>{a(x)&&N(J)})}st(j,N=>w(D,N),()=>a(D));var U=z(j,2);{var K=N=>{var M=sf(),Y=k(M);Y.__click=[af,D];var re=k(Y);Ge(re,{children:(S,O)=>{var oe=Oe("top");_(S,oe)}});var T=z(re,2),B=k(T);ge(B,()=>({"--rotate":"90deg","--size":"28px"})),me(B.lastChild,{name:"back"}),ce(()=>{qn(M,`--swiping-ratio: ${m.swipingRatio}; --transition-timing-default: ${m.duration}s;`),_e(M,1,pe(["wrapperButtonTop",{isAnimationOn:m.working&&!m.isSwiping,open:a(C)||a(P).type!=="closed"}]),"svelte-1n46o8q")}),_(N,M)};q(U,N=>{a(p)&&N(K)})}ce(()=>{qn(j,`--swiping-ratio: ${m.swipingRatio}; --transition-timing-default: ${m.duration}s;`),_e(j,1,pe(["main",{isAnimationOn:m.working&&!m.isSwiping,open:a(C)||a(P).type!=="closed"}]),"svelte-1n46o8q")}),_(t,I),te()}We(["click"]);function cf(t){Ic(t,{children:(e,n)=>{lf(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||yl(cf,{target:document.getElementById("app")});export{So as A,Xt as B,Zr as C,hr as D,Ta as E,ff as F,ve as G,Vd as H,me as I,_e as J,pe as K,Bo as L,na as M,Nr as N,qn as O,H as P,bn as Q,ic as R,Zd as S,st as T,vf as U,Ge as V,Ro as W,qu as X,Ml as Y,ge as a,Ce as b,k as c,_ as d,Gr as e,W as f,a as g,ot as h,$t as i,V as j,Re as k,w as l,q as m,te as n,be as o,ee as p,G as q,R as r,z as s,ce as t,Te as u,We as v,Oe as w,Rt as x,F as y,Lt as z};
