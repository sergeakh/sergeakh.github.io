const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aCUiK-qwe.js","a/aDJGxTJuX.css","a/aXzWIdwG0.js","a/a9q_jSmK4.js","a/abA9hIFUQ.js","a/aDf0fAQHq.css","a/aBQFimOQi.js","a/aGKJynjgv.css","a/aBzv5zeQY.js","a/aBMjxyC5e.css","a/aCSRv7Nhe.js","a/aDgPIJwnn.css","a/aB_EW2-Sa.js","a/aB_UsPGEu.css","a/auh_wKMTF.js","a/aCpa8lgv9.js","a/axW2GRvlh.js","a/aj0KFa_-O.css","a/ahu7yjlv8.css","a/aCUayy6_c.js","a/aDHyncMUO.js","a/aDjyq9Kxn.js","a/aEZ_l8VDb.css","a/aB_Zcg-eh.css","a/aC-Mx_t1i.css","a/a2fMAcyb8.js","a/aBs6Vrlio.css","a/aDDf4TLh_.js","a/aCv_Ok0R6.js","a/aDWUfwQ_G.css","a/aB0gnAdLT.css","a/aDKdt5BcS.js","a/aw3_6eoJ1.css","a/aDXM_DuIU.js","a/aCJkK19aw.css","a/aJbsFIO5h.js","a/aDlxBpJjD.css","a/aCRqTPRxs.js","a/a_-inrlHq.js","a/aCtCLuIz_.css","a/aDZdVFwPC.js","a/aDaxC3cdO.css","a/aCmpRm34B.js","a/aBib31qW-.css","a/aCY4p1mVL.js","a/aBr15UghP.css","a/aDGQ0yuBu.js","a/aCTzb1Nvm.css"])))=>i.map(i=>d[i]);
var ri=Object.defineProperty;var Za=t=>{throw TypeError(t)};var ai=(t,e,n)=>e in t?ri(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var dt=(t,e,n)=>ai(t,typeof e!="symbol"?e+"":e,n),oa=(t,e,n)=>e.has(t)||Za("Cannot "+n);var A=(t,e,n)=>(oa(t,e,"read from private field"),n?n.call(t):e.get(t)),Pe=(t,e,n)=>e.has(t)?Za("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ue=(t,e,n,r)=>(oa(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ie=(t,e,n)=>(oa(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const wo=!1;var ka=Array.isArray,oi=Array.prototype.indexOf,Da=Array.from,ua=Object.defineProperty,Un=Object.getOwnPropertyDescriptor,yo=Object.getOwnPropertyDescriptors,si=Object.prototype,ii=Array.prototype,Pa=Object.getPrototypeOf,Ja=Object.isExtensible;const xe=()=>{};function li(t){return typeof t?.then=="function"}function ci(t){return t()}function da(t){for(var e=0;e<t.length;e++)t[e]()}function bo(){var t,e,n=new Promise((r,o)=>{t=r,e=o});return{promise:n,resolve:t,reject:e}}function ui(t,e,n=!1){return t===void 0?n?e():e:t}const $e=2,Ta=4,jr=8,Gt=16,Xt=32,Tn=64,Vr=128,nt=1024,ct=2048,sn=4096,ht=8192,Vt=16384,xa=32768,an=65536,Qa=1<<17,di=1<<18,nr=1<<19,So=1<<20,wt=256,Lr=512,Ir=32768,fa=1<<21,Aa=1<<22,Sn=1<<23,Cn=Symbol("$state"),fi=Symbol("legacy props"),vi=Symbol(""),Vn=new class extends Error{constructor(){super(...arguments);dt(this,"name","StaleReactionError");dt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Co(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function hi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function gi(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function pi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _i(t){throw new Error("https://svelte.dev/e/effect_orphan")}function mi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function wi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function yi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function bi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Si(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ci(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ur=1,Wr=2,Eo=4,Ei=8,ki=16,Di=1,Pi=2,Ti=4,xi=8,Ai=16,Ni=1,Mi=2,Xe=Symbol(),Li="http://www.w3.org/1999/xhtml";function Ii(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Oi=!1;function ko(t){return t===this.v}function Bi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Do(t){return!Bi(t,this.v)}let rr=!1,Ri=!1;function zi(){rr=!0}let Ne=null;function Qn(t){Ne=t}function Ve(t){return Po().get(t)}function Ue(t,e){return Po().set(t,e),e}function oe(t,e=!1,n){Ne={p:Ne,c:null,e:null,s:t,x:null,l:rr&&!e?{s:null,u:null,$:[]}:null}}function se(t){var e=Ne,n=e.e;if(n!==null){e.e=null;for(var r of n)Ko(r)}return t!==void 0&&(e.x=t),Ne=e.p,t??{}}function ar(){return!rr||Ne!==null&&Ne.l===null}function Po(t){return Ne===null&&Co(),Ne.c??(Ne.c=new Map(Fi(Ne)||void 0))}function Fi(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let _n=[];function To(){var t=_n;_n=[],da(t)}function xn(t){if(_n.length===0&&!Wn){var e=_n;queueMicrotask(()=>{e===_n&&To()})}_n.push(t)}function Hi(){for(;_n.length>0;)To()}const ji=new WeakMap;function xo(t){var e=be;if(e===null)return me.f|=Sn,t;if((e.f&xa)===0){if((e.f&Vr)===0)throw!e.parent&&t instanceof Error&&Ao(t),t;e.b.error(t)}else $n(t,e)}function $n(t,e){for(;e!==null;){if((e.f&Vr)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&Ao(t),t}function Ao(t){const e=ji.get(t);e&&(ua(t,"message",{value:e.message}),ua(t,"stack",{value:e.stack}))}const Pr=new Set;let Ae=null,xr=null,kt=null,va=new Set,It=[],qr=null,ha=!1,Wn=!1;var Yn,Gn,Xn,mn,pr,Zn,Jn,Ze,ga,gn,pa,No;const zr=class zr{constructor(){Pe(this,Ze);dt(this,"committed",!1);dt(this,"current",new Map);Pe(this,Yn,new Map);Pe(this,Gn,new Set);Pe(this,Xn,0);Pe(this,mn,0);Pe(this,pr,null);Pe(this,Zn,[]);Pe(this,Jn,[]);dt(this,"skipped_effects",new Set)}process(e){It=[],xr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)Ie(this,Ze,ga).call(this,r,n);Ie(this,Ze,pa).call(this),A(this,mn)>0?(Ie(this,Ze,gn).call(this,n.effects),Ie(this,Ze,gn).call(this,n.render_effects),Ie(this,Ze,gn).call(this,n.block_effects)):(xr=this,Ae=null,$a(n.render_effects),$a(n.effects),xr=null),kt=null}capture(e,n){A(this,Yn).has(e)||A(this,Yn).set(e,n),this.current.set(e,e.v),kt?.set(e,e.v)}activate(){Ae=this}deactivate(){Ae=null,kt=null}flush(){if(It.length>0){if(this.activate(),Lo(),Ae!==null&&Ae!==this)return}else Ie(this,Ze,pa).call(this);this.deactivate();for(const e of va)if(va.delete(e),e(),Ae!==null)break}increment(e){ue(this,Xn,A(this,Xn)+1),e&&ue(this,mn,A(this,mn)+1)}decrement(e){ue(this,Xn,A(this,Xn)-1),e&&ue(this,mn,A(this,mn)-1);for(const n of A(this,Zn))rt(n,ct),Dn(n);for(const n of A(this,Jn))rt(n,sn),Dn(n);ue(this,Zn,[]),ue(this,Jn,[]),this.flush()}add_callback(e){A(this,Gn).add(e)}settled(){return(A(this,pr)??ue(this,pr,bo())).promise}static ensure(){if(Ae===null){const e=Ae=new zr;Pr.add(Ae),Wn||zr.enqueue(()=>{Ae===e&&e.flush()})}return Ae}static enqueue(e){xn(e)}apply(){}};Yn=new WeakMap,Gn=new WeakMap,Xn=new WeakMap,mn=new WeakMap,pr=new WeakMap,Zn=new WeakMap,Jn=new WeakMap,Ze=new WeakSet,ga=function(e,n){e.f^=nt;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Xt|Tn))!==0,i=s&&(o&nt)!==0,l=i||(o&ht)!==0||this.skipped_effects.has(r);if((r.f&Vr)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){s?r.f^=nt:(o&Ta)!==0?n.effects.push(r):Xr(r)&&((r.f&Gt)!==0&&n.block_effects.push(r),Rr(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(Ie(this,Ze,gn).call(this,n.effects),Ie(this,Ze,gn).call(this,n.render_effects),Ie(this,Ze,gn).call(this,n.block_effects),n=n.parent),r=u.next,u=u.parent}},gn=function(e){for(const n of e)((n.f&ct)!==0?A(this,Zn):A(this,Jn)).push(n),rt(n,nt)},pa=function(){if(A(this,mn)===0){for(const e of A(this,Gn))e();A(this,Gn).clear()}A(this,Xn)===0&&Ie(this,Ze,No).call(this)},No=function(){var o;if(Pr.size>1){A(this,Yn).clear();var e=kt,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Pr){if(s===this){n=!1;continue}const i=[];for(const[c,u]of this.current){if(s.current.has(c))if(n&&u!==s.current.get(c))s.current.set(c,u);else continue;i.push(c)}if(i.length===0)continue;const l=[...s.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){const c=new Set,u=new Map;for(const f of i)Io(f,l,c,u);if(It.length>0){Ae=s,s.apply();for(const f of It)Ie(o=s,Ze,ga).call(o,f,r);It=[],s.deactivate()}}}Ae=null,kt=e}this.committed=!0,Pr.delete(this),A(this,pr)?.resolve()};let jt=zr;function Mo(t){var e=Wn;Wn=!0;try{for(var n;;){if(Hi(),It.length===0&&(Ae?.flush(),It.length===0))return qr=null,n;Lo()}}finally{Wn=e}}function Lo(){var t=Kn;ha=!0;try{var e=0;for(no(!0);It.length>0;){var n=jt.ensure();if(e++>1e3){var r,o;Vi()}n.process(It),nn.clear()}}finally{ha=!1,no(t),qr=null}}function Vi(){try{mi()}catch(t){$n(t,qr)}}let zt=null;function $a(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Vt|ht))===0&&Xr(r)&&(zt=new Set,Rr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Xo(r):r.fn=null),zt?.size>0)){nn.clear();for(const o of zt){if((o.f&(Vt|ht))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)zt.has(i)&&(zt.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(Vt|ht))===0&&Rr(c)}}zt.clear()}}zt=null}}function Io(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&$e)!==0?Io(o,e,n,r):(s&(Aa|Gt))!==0&&(s&ct)===0&&Oo(o,e,r)&&(rt(o,ct),Dn(o))}}function Oo(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&$e)!==0&&Oo(o,e,n))return n.set(o,!0),!0}return n.set(t,!1),!1}function Dn(t){for(var e=qr=t;e.parent!==null;){e=e.parent;var n=e.f;if(ha&&e===be&&(n&Gt)!==0)return;if((n&(Tn|Xt))!==0){if((n&nt)===0)return;e.f^=nt}}It.push(e)}function Ui(t){let e=0,n=Kt(0),r;return()=>{rl()&&(a(n),Gr(()=>(e===0&&(r=Rt(()=>t(()=>dr(n)))),e+=1,()=>{xn(()=>{e-=1,e===0&&(r?.(),r=void 0,dr(n))})})))}}var Wi=an|nr|Vr;function qi(t,e,n){new Ki(t,e,n)}var pt,_t,Ea,At,wn,Nt,mt,st,Mt,Ft,Qt,yn,$t,bn,en,Fr,Hr,qe,Yi,Gi,_a,Ar,Nr,ma;class Ki{constructor(e,n,r){Pe(this,qe);dt(this,"parent");Pe(this,pt,!1);Pe(this,_t);Pe(this,Ea,null);Pe(this,At);Pe(this,wn);Pe(this,Nt);Pe(this,mt,null);Pe(this,st,null);Pe(this,Mt,null);Pe(this,Ft,null);Pe(this,Qt,null);Pe(this,yn,0);Pe(this,$t,0);Pe(this,bn,!1);Pe(this,en,null);Pe(this,Fr,()=>{A(this,en)&&Ut(A(this,en),A(this,yn))});Pe(this,Hr,Ui(()=>(ue(this,en,Kt(A(this,yn))),()=>{ue(this,en,null)})));ue(this,_t,e),ue(this,At,n),ue(this,wn,r),this.parent=be.b,ue(this,pt,!!A(this,At).pending),ue(this,Nt,or(()=>{be.b=this;{var o=Ie(this,qe,_a).call(this);try{ue(this,mt,Et(()=>r(o)))}catch(s){this.error(s)}A(this,$t)>0?Ie(this,qe,Nr).call(this):ue(this,pt,!1)}return()=>{A(this,Qt)?.remove()}},Wi))}is_pending(){return A(this,pt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!A(this,At).pending}update_pending_count(e){Ie(this,qe,ma).call(this,e),ue(this,yn,A(this,yn)+e),va.add(A(this,Fr))}get_effect_pending(){return A(this,Hr).call(this),a(A(this,en))}error(e){var n=A(this,At).onerror;let r=A(this,At).failed;if(A(this,bn)||!n&&!r)throw e;A(this,mt)&&(lt(A(this,mt)),ue(this,mt,null)),A(this,st)&&(lt(A(this,st)),ue(this,st,null)),A(this,Mt)&&(lt(A(this,Mt)),ue(this,Mt,null));var o=!1,s=!1;const i=()=>{if(o){Ii();return}o=!0,s&&Ci(),jt.ensure(),ue(this,yn,0),A(this,Mt)!==null&&qn(A(this,Mt),()=>{ue(this,Mt,null)}),ue(this,pt,this.has_pending_snippet()),ue(this,mt,Ie(this,qe,Ar).call(this,()=>(ue(this,bn,!1),Et(()=>A(this,wn).call(this,A(this,_t)))))),A(this,$t)>0?Ie(this,qe,Nr).call(this):ue(this,pt,!1)};var l=me;try{it(null),s=!0,n?.(e,i),s=!1}catch(c){$n(c,A(this,Nt)&&A(this,Nt).parent)}finally{it(l)}r&&xn(()=>{ue(this,Mt,Ie(this,qe,Ar).call(this,()=>{jt.ensure(),ue(this,bn,!0);try{return Et(()=>{r(A(this,_t),()=>e,()=>i)})}catch(c){return $n(c,A(this,Nt).parent),null}finally{ue(this,bn,!1)}}))})}}pt=new WeakMap,_t=new WeakMap,Ea=new WeakMap,At=new WeakMap,wn=new WeakMap,Nt=new WeakMap,mt=new WeakMap,st=new WeakMap,Mt=new WeakMap,Ft=new WeakMap,Qt=new WeakMap,yn=new WeakMap,$t=new WeakMap,bn=new WeakMap,en=new WeakMap,Fr=new WeakMap,Hr=new WeakMap,qe=new WeakSet,Yi=function(){try{ue(this,mt,Et(()=>A(this,wn).call(this,A(this,_t))))}catch(e){this.error(e)}ue(this,pt,!1)},Gi=function(){const e=A(this,At).pending;e&&(ue(this,st,Et(()=>e(A(this,_t)))),jt.enqueue(()=>{var n=Ie(this,qe,_a).call(this);ue(this,mt,Ie(this,qe,Ar).call(this,()=>(jt.ensure(),Et(()=>A(this,wn).call(this,n))))),A(this,$t)>0?Ie(this,qe,Nr).call(this):(qn(A(this,st),()=>{ue(this,st,null)}),ue(this,pt,!1))}))},_a=function(){var e=A(this,_t);return A(this,pt)&&(ue(this,Qt,on()),A(this,_t).before(A(this,Qt)),e=A(this,Qt)),e},Ar=function(e){var n=be,r=me,o=Ne;Ot(A(this,Nt)),it(A(this,Nt)),Qn(A(this,Nt).ctx);try{return e()}catch(s){return xo(s),null}finally{Ot(n),it(r),Qn(o)}},Nr=function(){const e=A(this,At).pending;A(this,mt)!==null&&(ue(this,Ft,document.createDocumentFragment()),A(this,Ft).append(A(this,Qt)),Qo(A(this,mt),A(this,Ft))),A(this,st)===null&&ue(this,st,Et(()=>e(A(this,_t))))},ma=function(e){var n;if(!this.has_pending_snippet()){this.parent&&Ie(n=this.parent,qe,ma).call(n,e);return}ue(this,$t,A(this,$t)+e),A(this,$t)===0&&(ue(this,pt,!1),A(this,st)&&qn(A(this,st),()=>{ue(this,st,null)}),A(this,Ft)&&(A(this,_t).before(A(this,Ft)),ue(this,Ft,null)))};function Xi(t,e,n){const r=ar()?wr:Kr;if(e.length===0){n(t.map(r));return}var o=Ae,s=be,i=Bo();Promise.all(e.map(l=>Zi(l))).then(l=>{i();try{n([...t.map(r),...l])}catch(c){(s.f&Vt)===0&&$n(c,s)}o?.deactivate(),Or()}).catch(l=>{$n(l,s)})}function Bo(){var t=be,e=me,n=Ne,r=Ae;return function(){Ot(t),it(e),Qn(n),r?.activate()}}function Or(){Ot(null),it(null),Qn(null)}function wr(t){var e=$e|ct,n=me!==null&&(me.f&$e)!==0?me:null;return be===null||n!==null&&(n.f&wt)!==0?e|=wt:be.f|=nr,{ctx:Ne,deps:null,effects:null,equals:ko,f:e,fn:t,reactions:null,rv:0,v:Xe,wv:0,parent:n??be,ac:null}}function Zi(t,e){let n=be;n===null&&hi();var r=n.b,o=void 0,s=Kt(Xe),i=!me,l=new Map;return il(()=>{var c=bo();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===Ae&&u.committed&&u.deactivate(),Or()})}catch(v){c.reject(v),Or()}var u=Ae;if(i){var f=!r.is_pending();r.update_pending_count(1),u.increment(f),l.get(u)?.reject(Vn),l.delete(u),l.set(u,c)}const d=(v,_=void 0)=>{if(u.activate(),_)_!==Vn&&(s.f|=Sn,Ut(s,_));else{(s.f&Sn)!==0&&(s.f^=Sn),Ut(s,v);for(const[h,y]of l){if(l.delete(h),h===u)break;y.reject(Vn)}}i&&(r.update_pending_count(-1),u.decrement(f))};c.promise.then(d,v=>d(null,v||"unknown"))}),qo(()=>{for(const c of l.values())c.reject(Vn)}),new Promise(c=>{function u(f){function d(){f===o?c(s):u(o)}f.then(d,d)}u(o)})}function I(t){const e=wr(t);return $o(e),e}function Kr(t){const e=wr(t);return e.equals=Do,e}function Ro(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)lt(e[n])}}function Ji(t){for(var e=t.parent;e!==null;){if((e.f&$e)===0)return e;e=e.parent}return null}function Na(t){var e,n=be;Ot(Ji(t));try{t.f&=~Ir,Ro(t),e=rs(t)}finally{Ot(n)}return e}function zo(t){var e=Na(t);if(t.equals(e)||(t.v=e,t.wv=ts()),!An)if(kt!==null)kt.set(t,t.v);else{var n=(tn||(t.f&wt)!==0)&&t.deps!==null?sn:nt;rt(t,n)}}const nn=new Map;function Kt(t,e){var n={f:0,v:t,reactions:null,equals:ko,rv:0,wv:0};return n}function W(t,e){const n=Kt(t);return $o(n),n}function wa(t,e=!1,n=!0){var o;const r=Kt(t);return e||(r.equals=Do),rr&&n&&Ne!==null&&Ne.l!==null&&((o=Ne.l).s??(o.s=[])).push(r),r}function g(t,e,n=!1){me!==null&&(!Dt||(me.f&Qa)!==0)&&ar()&&(me.f&($e|Gt|Aa|Qa))!==0&&!Wt?.includes(t)&&Si();let r=n?Qe(e):e;return Ut(t,r)}function Ut(t,e){if(!t.equals(e)){var n=t.v;An?nn.set(t,e):nn.set(t,n),t.v=e;var r=jt.ensure();r.capture(t,n),(t.f&$e)!==0&&((t.f&ct)!==0&&Na(t),rt(t,(t.f&wt)===0?nt:sn)),t.wv=ts(),Fo(t,ct),ar()&&be!==null&&(be.f&nt)!==0&&(be.f&(Xt|Tn))===0&&(gt===null?ul([t]):gt.push(t))}return e}function dr(t){g(t,t.v+1)}function Fo(t,e){var n=t.reactions;if(n!==null)for(var r=ar(),o=n.length,s=0;s<o;s++){var i=n[s],l=i.f;if(!(!r&&i===be)){var c=(l&ct)===0;c&&rt(i,e),(l&$e)!==0?(l&Ir)===0&&(i.f|=Ir,Fo(i,sn)):c&&((l&Gt)!==0&&zt!==null&&zt.add(i),Dn(i))}}}function Qe(t){if(typeof t!="object"||t===null||Cn in t)return t;const e=Pa(t);if(e!==si&&e!==ii)return t;var n=new Map,r=ka(t),o=W(0),s=En,i=l=>{if(En===s)return l();var c=me,u=En;it(null),ao(s);var f=l();return it(c),ao(u),f};return r&&n.set("length",W(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&yi();var f=n.get(c);return f===void 0?f=i(()=>{var d=W(u.value);return n.set(c,d),d}):g(f,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const f=i(()=>W(Xe));n.set(c,f),dr(o)}}else g(u,Xe),dr(o);return!0},get(l,c,u){if(c===Cn)return t;var f=n.get(c),d=c in l;if(f===void 0&&(!d||Un(l,c)?.writable)&&(f=i(()=>{var _=Qe(d?l[c]:Xe),h=W(_);return h}),n.set(c,f)),f!==void 0){var v=a(f);return v===Xe?void 0:v}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var f=n.get(c);f&&(u.value=a(f))}else if(u===void 0){var d=n.get(c),v=d?.v;if(d!==void 0&&v!==Xe)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,c){if(c===Cn)return!0;var u=n.get(c),f=u!==void 0&&u.v!==Xe||Reflect.has(l,c);if(u!==void 0||be!==null&&(!f||Un(l,c)?.writable)){u===void 0&&(u=i(()=>{var v=f?Qe(l[c]):Xe,_=W(v);return _}),n.set(c,u));var d=a(u);if(d===Xe)return!1}return f},set(l,c,u,f){var d=n.get(c),v=c in l;if(r&&c==="length")for(var _=u;_<d.v;_+=1){var h=n.get(_+"");h!==void 0?g(h,Xe):_ in l&&(h=i(()=>W(Xe)),n.set(_+"",h))}if(d===void 0)(!v||Un(l,c)?.writable)&&(d=i(()=>W(void 0)),g(d,Qe(u)),n.set(c,d));else{v=d.v!==Xe;var y=i(()=>Qe(u));g(d,y)}var m=Reflect.getOwnPropertyDescriptor(l,c);if(m?.set&&m.set.call(f,u),!v){if(r&&typeof c=="string"){var P=n.get("length"),T=Number(c);Number.isInteger(T)&&T>=P.v&&g(P,T+1)}dr(o)}return!0},ownKeys(l){a(o);var c=Reflect.ownKeys(l).filter(d=>{var v=n.get(d);return v===void 0||v.v!==Xe});for(var[u,f]of n)f.v!==Xe&&!(u in l)&&c.push(u);return c},setPrototypeOf(){bi()}})}var eo,Ho,jo,Vo;function Qi(){if(eo===void 0){eo=window,Ho=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;jo=Un(e,"firstChild").get,Vo=Un(e,"nextSibling").get,Ja(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ja(n)&&(n.__t=void 0)}}function on(t=""){return document.createTextNode(t)}function er(t){return jo.call(t)}function yr(t){return Vo.call(t)}function E(t,e){return er(t)}function B(t,e=!1){{var n=er(t);return n instanceof Comment&&n.data===""?yr(n):n}}function F(t,e=1,n=!1){let r=t;for(;e--;)r=yr(r);return r}function $i(t){t.textContent=""}function Uo(){return!1}let to=!1;function el(){to||(to=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Yr(t){var e=me,n=be;it(null),Ot(null);try{return t()}finally{it(e),Ot(n)}}function tl(t,e,n,r=n){t.addEventListener(e,()=>Yr(n));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),el()}function Wo(t){be===null&&me===null&&_i(),me!==null&&(me.f&wt)!==0&&be===null&&pi(),An&&gi()}function nl(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Bt(t,e,n,r=!0){var o=be;o!==null&&(o.f&ht)!==0&&(t|=ht);var s={ctx:Ne,deps:null,nodes_start:null,nodes_end:null,f:t|ct,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Rr(s),s.f|=xa}catch(c){throw lt(s),c}else e!==null&&Dn(s);if(r){var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&nr)===0&&(i=i.first,(t&Gt)!==0&&(t&an)!==0&&i!==null&&(i.f|=an)),i!==null&&(i.parent=o,o!==null&&nl(i,o),me!==null&&(me.f&$e)!==0&&(t&Tn)===0)){var l=me;(l.effects??(l.effects=[])).push(i)}}return s}function rl(){return me!==null&&!Dt}function qo(t){const e=Bt(jr,null,!1);return rt(e,nt),e.teardown=t,e}function Oe(t){Wo();var e=be.f,n=!me&&(e&Xt)!==0&&(e&xa)===0;if(n){var r=Ne;(r.e??(r.e=[])).push(t)}else return Ko(t)}function Ko(t){return Bt(Ta|So,t,!1)}function al(t){return Wo(),Bt(jr|So,t,!0)}function ol(t){jt.ensure();const e=Bt(Tn|nr,t,!0);return(n={})=>new Promise(r=>{n.outro?qn(e,()=>{lt(e),r(void 0)}):(lt(e),r(void 0))})}function sl(t){return Bt(Ta,t,!1)}function il(t){return Bt(Aa|nr,t,!0)}function Gr(t,e=0){return Bt(jr|e,t,!0)}function _e(t,e=[],n=[]){Xi(e,n,r=>{Bt(jr,()=>t(...r.map(a)),!0)})}function or(t,e=0){var n=Bt(Gt|e,t,!0);return n}function Et(t,e=!0){return Bt(Xt|nr,t,!0,e)}function Yo(t){var e=t.teardown;if(e!==null){const n=An,r=me;ro(!0),it(null);try{e.call(null)}finally{ro(n),it(r)}}}function Go(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const o=n.ac;o!==null&&Yr(()=>{o.abort(Vn)});var r=n.next;(n.f&Tn)!==0?n.parent=null:lt(n,e),n=r}}function ll(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Xt)===0&&lt(e),e=n}}function lt(t,e=!0){var n=!1;(e||(t.f&di)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(cl(t.nodes_start,t.nodes_end),n=!0),Go(t,e&&!n),Br(t,0),rt(t,Vt);var r=t.transitions;if(r!==null)for(const s of r)s.stop();Yo(t);var o=t.parent;o!==null&&o.first!==null&&Xo(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function cl(t,e){for(;t!==null;){var n=t===e?null:yr(t);t.remove(),t=n}}function Xo(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function qn(t,e,n=!0){var r=[];Ma(t,r,!0),Zo(r,()=>{n&&lt(t),e&&e()})}function Zo(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var o of t)o.out(r)}else e()}function Ma(t,e,n){if((t.f&ht)===0){if(t.f^=ht,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var o=r.next,s=(r.f&an)!==0||(r.f&Xt)!==0&&(t.f&Gt)!==0;Ma(r,e,s?n:!1),r=o}}}function La(t){Jo(t,!0)}function Jo(t,e){if((t.f&ht)!==0){t.f^=ht,(t.f&nt)===0&&(rt(t,ct),Dn(t));for(var n=t.first;n!==null;){var r=n.next,o=(n.f&an)!==0||(n.f&Xt)!==0;Jo(n,o?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function Qo(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var o=n===r?null:yr(n);e.append(n),n=o}}let Kn=!1;function no(t){Kn=t}let An=!1;function ro(t){An=t}let me=null,Dt=!1;function it(t){me=t}let be=null;function Ot(t){be=t}let Wt=null;function $o(t){me!==null&&(Wt===null?Wt=[t]:Wt.push(t))}let tt=null,vt=0,gt=null;function ul(t){gt=t}let es=1,vr=0,En=vr;function ao(t){En=t}let tn=!1;function ts(){return++es}function Xr(t){var e=t.f;if((e&ct)!==0)return!0;if((e&sn)!==0){var n=t.deps,r=(e&wt)!==0;if(e&$e&&(t.f&=~Ir),n!==null){var o,s,i=(e&Lr)!==0,l=r&&be!==null&&!tn,c=n.length;if((i||l)&&(be===null||(be.f&Vt)===0)){var u=t,f=u.parent;for(o=0;o<c;o++)s=n[o],(i||!s?.reactions?.includes(u))&&(s.reactions??(s.reactions=[])).push(u);i&&(u.f^=Lr),l&&f!==null&&(f.f&wt)===0&&(u.f^=wt)}for(o=0;o<c;o++)if(s=n[o],Xr(s)&&zo(s),s.wv>t.wv)return!0}(!r||be!==null&&!tn)&&rt(t,nt)}return!1}function ns(t,e,n=!0){var r=t.reactions;if(r!==null&&!Wt?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&$e)!==0?ns(s,e,!1):e===s&&(n?rt(s,ct):(s.f&nt)!==0&&rt(s,sn),Dn(s))}}function rs(t){var y;var e=tt,n=vt,r=gt,o=me,s=tn,i=Wt,l=Ne,c=Dt,u=En,f=t.f;tt=null,vt=0,gt=null,tn=(f&wt)!==0&&(Dt||!Kn||me===null),me=(f&(Xt|Tn))===0?t:null,Wt=null,Qn(t.ctx),Dt=!1,En=++vr,t.ac!==null&&(Yr(()=>{t.ac.abort(Vn)}),t.ac=null);try{t.f|=fa;var d=t.fn,v=d(),_=t.deps;if(tt!==null){var h;if(Br(t,vt),_!==null&&vt>0)for(_.length=vt+tt.length,h=0;h<tt.length;h++)_[vt+h]=tt[h];else t.deps=_=tt;if(!tn||(f&$e)!==0&&t.reactions!==null)for(h=vt;h<_.length;h++)((y=_[h]).reactions??(y.reactions=[])).push(t)}else _!==null&&vt<_.length&&(Br(t,vt),_.length=vt);if(ar()&&gt!==null&&!Dt&&_!==null&&(t.f&($e|sn|ct))===0)for(h=0;h<gt.length;h++)ns(gt[h],t);return o!==null&&o!==t&&(vr++,gt!==null&&(r===null?r=gt:r.push(...gt))),(t.f&Sn)!==0&&(t.f^=Sn),v}catch(m){return xo(m)}finally{t.f^=fa,tt=e,vt=n,gt=r,me=o,tn=s,Wt=i,Qn(l),Dt=c,En=u}}function dl(t,e){let n=e.reactions;if(n!==null){var r=oi.call(n,t);if(r!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(e.f&$e)!==0&&(tt===null||!tt.includes(e))&&(rt(e,sn),(e.f&(wt|Lr))===0&&(e.f^=Lr),Ro(e),Br(e,0))}function Br(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)dl(t,n[r])}function Rr(t){var e=t.f;if((e&Vt)===0){rt(t,nt);var n=be,r=Kn;be=t,Kn=!0;try{(e&Gt)!==0?ll(t):Go(t),Yo(t);var o=rs(t);t.teardown=typeof o=="function"?o:null,t.wv=es;var s;wo&&Ri&&(t.f&ct)!==0&&t.deps}finally{Kn=r,be=n}}}async function as(){await Promise.resolve(),Mo()}function a(t){var e=t.f,n=(e&$e)!==0;if(me!==null&&!Dt){var r=be!==null&&(be.f&Vt)!==0;if(!r&&!Wt?.includes(t)){var o=me.deps;if((me.f&fa)!==0)t.rv<vr&&(t.rv=vr,tt===null&&o!==null&&o[vt]===t?vt++:tt===null?tt=[t]:(!tn||!tt.includes(t))&&tt.push(t));else{(me.deps??(me.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[me]:s.includes(me)||s.push(me)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&wt)===0&&(i.f^=wt)}if(An){if(nn.has(t))return nn.get(t);if(n){i=t;var c=i.v;return((i.f&nt)===0&&i.reactions!==null||os(i))&&(c=Na(i)),nn.set(i,c),c}}else if(n){if(i=t,kt?.has(i))return kt.get(i);Xr(i)&&zo(i)}if(kt?.has(t))return kt.get(t);if((t.f&Sn)!==0)throw t.v;return t.v}function os(t){if(t.v===Xe)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(nn.has(e)||(e.f&$e)!==0&&os(e))return!0;return!1}function Rt(t){var e=Dt;try{return Dt=!0,t()}finally{Dt=e}}const fl=-7169;function rt(t,e){t.f=t.f&fl|e}function vl(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Cn in t)ya(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Cn in n&&ya(n)}}}function ya(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{ya(t[r],e)}catch{}const n=Pa(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=yo(n);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const hl=["touchstart","touchmove"];function gl(t){return hl.includes(t)}const ss=new Set,ba=new Set;function pl(t,e,n,r={}){function o(s){if(r.capture||ir.call(e,s),!s.cancelBubble)return Yr(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?xn(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function Ia(t,e,n,r,o){var s={capture:r,passive:o},i=pl(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&qo(()=>{e.removeEventListener(t,i,s)})}function at(t){for(var e=0;e<t.length;e++)ss.add(t[e]);for(var n of ba)n(t)}let oo=null;function ir(t){var e=this,n=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;oo=t;var i=0,l=oo===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){ua(t,"currentTarget",{configurable:!0,get(){return s||n}});var f=me,d=be;it(null),Ot(null);try{for(var v,_=[];s!==null;){var h=s.assignedSlot||s.parentNode||s.host||null;try{var y=s["__"+r];if(y!=null&&(!s.disabled||t.target===s))if(ka(y)){var[m,...P]=y;m.apply(s,[t,...P])}else y.call(s,t)}catch(T){v?_.push(T):v=T}if(t.cancelBubble||h===e||h===null)break;s=h}if(v){for(let T of _)queueMicrotask(()=>{throw T});throw v}}finally{t.__root=e,delete t.currentTarget,it(f),Ot(d)}}}function is(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function hr(t,e){var n=be;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function q(t,e){var n=(e&Ni)!==0,r=(e&Mi)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=is(s?t:"<!>"+t),n||(o=er(o)));var i=r||Ho?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=er(i),c=i.lastChild;hr(l,c)}else hr(i,i);return i}}function _l(t,e,n="svg"){var r=!t.startsWith("<!>"),o=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=is(o),l=er(i);s=er(l)}var c=s.cloneNode(!0);return hr(c,c),c}}function ml(t,e){return _l(t,e,"svg")}function Be(t=""){{var e=on(t+"");return hr(e,e),e}}function J(){var t=document.createDocumentFragment(),e=document.createComment(""),n=on();return t.append(e,n),hr(e,n),t}function p(t,e){t!==null&&t.before(e)}function yf(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function qt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function wl(t,e){return yl(t,e)}const Hn=new Map;function yl(t,{target:e,anchor:n,props:r={},events:o,context:s,intro:i=!0}){Qi();var l=new Set,c=d=>{for(var v=0;v<d.length;v++){var _=d[v];if(!l.has(_)){l.add(_);var h=gl(_);e.addEventListener(_,ir,{passive:h});var y=Hn.get(_);y===void 0?(document.addEventListener(_,ir,{passive:h}),Hn.set(_,1)):Hn.set(_,y+1)}}};c(Da(ss)),ba.add(c);var u=void 0,f=ol(()=>{var d=n??e.appendChild(on());return qi(d,{pending:()=>{}},v=>{if(s){oe({});var _=Ne;_.c=s}o&&(r.$$events=o),u=t(v,r)||{},s&&se()}),()=>{for(var v of l){e.removeEventListener(v,ir);var _=Hn.get(v);--_===0?(document.removeEventListener(v,ir),Hn.delete(v)):Hn.set(v,_)}ba.delete(c),d!==n&&d.parentNode?.removeChild(d)}});return bl.set(u,f),u}let bl=new WeakMap;var Ht,Lt,Ct,_r,mr;class Zr{constructor(e,n=!0){dt(this,"anchor");Pe(this,Ht,new Map);Pe(this,Lt,new Map);Pe(this,Ct,new Map);Pe(this,_r,!0);Pe(this,mr,()=>{var e=Ae;if(A(this,Ht).has(e)){var n=A(this,Ht).get(e),r=A(this,Lt).get(n);if(r)La(r);else{var o=A(this,Ct).get(n);o&&(A(this,Lt).set(n,o.effect),A(this,Ct).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of A(this,Ht)){if(A(this,Ht).delete(s),s===e)break;const l=A(this,Ct).get(i);l&&(lt(l.effect),A(this,Ct).delete(i))}for(const[s,i]of A(this,Lt)){if(s===n)continue;const l=()=>{if(Array.from(A(this,Ht).values()).includes(s)){var u=document.createDocumentFragment();Qo(i,u),u.append(on()),A(this,Ct).set(s,{effect:i,fragment:u})}else lt(i);A(this,Lt).delete(s)};A(this,_r)||!r?qn(i,l,!1):l()}}});this.anchor=e,ue(this,_r,n)}ensure(e,n){var r=Ae,o=Uo();if(n&&!A(this,Lt).has(e)&&!A(this,Ct).has(e))if(o){var s=document.createDocumentFragment(),i=on();s.append(i),A(this,Ct).set(e,{effect:Et(()=>n(i)),fragment:s})}else A(this,Lt).set(e,Et(()=>n(this.anchor)));if(A(this,Ht).set(r,e),o){for(const[l,c]of A(this,Lt))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of A(this,Ct))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.add_callback(A(this,mr))}else A(this,mr).call(this)}}Ht=new WeakMap,Lt=new WeakMap,Ct=new WeakMap,_r=new WeakMap,mr=new WeakMap;const Sl=0,sa=1;function Cl(t,e,n,r,o){var s=ar(),i=Xe,l=s?Kt(i):wa(i,!1,!1),c=s?Kt(i):wa(i,!1,!1),u=new Zr(t);or(()=>{var f=e(),d=!1;if(li(f)){var v=Bo(),_=!1;const h=y=>{if(!d){_=!0,v();try{y()}finally{Or(),Wn||Mo()}}};f.then(y=>{h(()=>{Ut(l,y),u.ensure(sa,r&&(m=>r(m,l)))})},y=>{h(()=>{if(Ut(c,y),u.ensure(sa,o&&(m=>o(m,c))),!o)throw c.v})}),xn(()=>{_||h(()=>{u.ensure(Sl,n)})})}else Ut(l,f),u.ensure(sa,r&&(h=>r(h,l)));return()=>{d=!0}})}function V(t,e,n=!1){var r=new Zr(t),o=n?an:0;function s(i,l){r.ensure(i,l)}or(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function we(t,e){Gr(()=>{var n=e();for(var r in n){var o=n[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function El(t,e,n){for(var r=t.items,o=[],s=e.length,i=0;i<s;i++)Ma(e[i].e,o,!0);var l=s>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;$i(c),c.append(n),r.clear(),xt(t,e[0].prev,e[s-1].next)}Zo(o,()=>{for(var u=0;u<s;u++){var f=e[u];l||(r.delete(f.k),xt(t,f.prev,f.next)),lt(f.e,!l)}})}function Jr(t,e,n,r,o,s=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&Eo)!==0;if(c){var u=t;i=u.appendChild(on())}var f=null,d=!1,v=new Map,_=Kr(()=>{var P=n();return ka(P)?P:P==null?[]:Da(P)}),h,y;function m(){kl(y,h,l,v,i,o,e,r,n),s!==null&&(h.length===0?f?La(f):f=Et(()=>s(i)):f!==null&&qn(f,()=>{f=null}))}or(()=>{y??(y=be),h=a(_);var P=h.length;if(!(d&&P===0)){d=P===0;var T,b,S,k;if(Uo()){var C=new Set,N=Ae;for(b=0;b<P;b+=1){S=h[b],k=r(S,b);var x=l.items.get(k)??v.get(k);x?(e&(Ur|Wr))!==0&&ls(x,S,b,e):(T=cs(null,l,null,null,S,k,b,o,e,n,!0),v.set(k,T)),C.add(k)}for(const[j,ne]of l.items)C.has(j)||N.skipped_effects.add(ne.e);N.add_callback(m)}else m();a(_)}})}function kl(t,e,n,r,o,s,i,l,c){var u=(i&Ei)!==0,f=(i&(Ur|Wr))!==0,d=e.length,v=n.items,_=n.first,h=_,y,m=null,P,T=[],b=[],S,k,C,N;if(u)for(N=0;N<d;N+=1)S=e[N],k=l(S,N),C=v.get(k),C!==void 0&&(C.a?.measure(),(P??(P=new Set)).add(C));for(N=0;N<d;N+=1){if(S=e[N],k=l(S,N),C=v.get(k),C===void 0){var x=r.get(k);if(x!==void 0){r.delete(k),v.set(k,x);var j=m?m.next:h;xt(n,m,x),xt(n,x,j),ia(x,j,o),m=x}else{var ne=h?h.e.nodes_start:o;m=cs(ne,n,m,m===null?n.first:m.next,S,k,N,s,i,c)}v.set(k,m),T=[],b=[],h=m.next;continue}if(f&&ls(C,S,N,i),(C.e.f&ht)!==0&&(La(C.e),u&&(C.a?.unfix(),(P??(P=new Set)).delete(C))),C!==h){if(y!==void 0&&y.has(C)){if(T.length<b.length){var de=b[0],R;m=de.prev;var ee=T[0],$=T[T.length-1];for(R=0;R<T.length;R+=1)ia(T[R],de,o);for(R=0;R<b.length;R+=1)y.delete(b[R]);xt(n,ee.prev,$.next),xt(n,m,ee),xt(n,$,de),h=de,m=$,N-=1,T=[],b=[]}else y.delete(C),ia(C,h,o),xt(n,C.prev,C.next),xt(n,C,m===null?n.first:m.next),xt(n,m,C),m=C;continue}for(T=[],b=[];h!==null&&h.k!==k;)(h.e.f&ht)===0&&(y??(y=new Set)).add(h),b.push(h),h=h.next;if(h===null)continue;C=h}T.push(C),m=C,h=C.next}if(h!==null||y!==void 0){for(var Z=y===void 0?[]:Da(y);h!==null;)(h.e.f&ht)===0&&Z.push(h),h=h.next;var Y=Z.length;if(Y>0){var ae=(i&Eo)!==0&&d===0?o:null;if(u){for(N=0;N<Y;N+=1)Z[N].a?.measure();for(N=0;N<Y;N+=1)Z[N].a?.fix()}El(n,Z,ae)}}u&&xn(()=>{if(P!==void 0)for(C of P)C.a?.apply()}),t.first=n.first&&n.first.e,t.last=m&&m.e;for(var re of r.values())lt(re.e);r.clear()}function ls(t,e,n,r){(r&Ur)!==0&&Ut(t.v,e),(r&Wr)!==0?Ut(t.i,n):t.i=n}function cs(t,e,n,r,o,s,i,l,c,u,f){var d=(c&Ur)!==0,v=(c&ki)===0,_=d?v?wa(o,!1,!1):Kt(o):o,h=(c&Wr)===0?i:Kt(i),y={i:h,v:_,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var m=document.createDocumentFragment();m.append(t=on())}return y.e=Et(()=>l(t,_,h,u),Oi),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?f||(e.first=y):(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function ia(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var i=yr(s);o.before(s),s=i}}function xt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Se(t,e,...n){var r=new Zr(t);or(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...n)))},an)}function Dl(t,e,n){var r=new Zr(t);or(()=>{var o=e()??null;r.ensure(o,o&&(s=>n(s,o)))},an)}function us(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=us(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Pl(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=us(t))&&(r&&(r+=" "),r+=e);return r}function Ee(t){return typeof t=="object"?Pl(t):t??""}const so=[...` 	
\r\f \v\uFEFF`];function Tl(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||so.includes(r[i-1]))&&(l===r.length||so.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function xl(t,e){return t==null?null:String(t)}function ke(t,e,n,r,o,s){var i=t.__className;if(i!==n||i===void 0){var l=Tl(n,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function Pn(t,e,n,r){var o=t.__style;if(o!==e){var s=xl(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Al=Symbol("is custom element"),Nl=Symbol("is html");function bf(t,e){var n=Oa(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Sf(t,e){var n=Oa(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function ze(t,e,n,r){var o=Oa(t);o[e]!==(o[e]=n)&&(e==="loading"&&(t[vi]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Ml(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Oa(t){return t.__attributes??(t.__attributes={[Al]:t.nodeName.includes("-"),[Nl]:t.namespaceURI===Li})}var io=new Map;function Ml(t){var e=t.getAttribute("is")||t.nodeName,n=io.get(e);if(n)return n;io.set(e,n=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=yo(o);for(var i in r)r[i].set&&n.push(i);o=Pa(o)}return n}function Ll(t,e,n=e){var r=new WeakSet;tl(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=la(t)?ca(s):s,n(s),Ae!==null&&r.add(Ae),await as(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),Rt(e)==null&&t.value&&(n(la(t)?ca(t.value):t.value),Ae!==null&&r.add(Ae)),Gr(()=>{var o=e();if(t===document.activeElement){var s=xr??Ae;if(r.has(s))return}la(t)&&o===ca(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function la(t){var e=t.type;return e==="number"||e==="range"}function ca(t){return t===""?null:+t}function lo(t,e){return t===e||t?.[Cn]===e}function ut(t={},e,n,r){return sl(()=>{var o,s;return Gr(()=>{o=s,s=[],Rt(()=>{t!==n(...s)&&(e(t,...s),o&&lo(n(...o),t)&&e(null,...o))})}),()=>{xn(()=>{s&&lo(n(...s),t)&&e(null,...s)})}}),t}function Qr(t=!1){const e=Ne,n=e.l.u;if(!n)return;let r=()=>vl(e.s);if(t){let o=0,s={};const i=wr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>a(i)}n.b.length&&al(()=>{co(e,r),da(n.b)}),Oe(()=>{const o=Rt(()=>n.m.map(ci));return()=>{for(const s of o)typeof s=="function"&&s()}}),n.a.length&&Oe(()=>{co(e,r),da(n.a)})}function co(t,e){if(t.l.s)for(const n of t.l.s)a(n);e()}let Tr=!1;function Il(t){var e=Tr;try{return Tr=!1,[t(),Tr]}finally{Tr=e}}function ve(t,e,n,r){var o=!rr||(n&Pi)!==0,s=(n&xi)!==0,i=(n&Ai)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?Rt(r):r),l),f;if(s){var d=Cn in t||fi in t;f=Un(t,e)?.set??(d&&e in t?b=>t[e]=b:void 0)}var v,_=!1;s?[v,_]=Il(()=>t[e]):v=t[e],v===void 0&&r!==void 0&&(v=u(),f&&(o&&wi(),f(v)));var h;if(o?h=()=>{var b=t[e];return b===void 0?u():(c=!0,b)}:h=()=>{var b=t[e];return b!==void 0&&(l=void 0),b===void 0?l:b},o&&(n&Ti)===0)return h;if(f){var y=t.$$legacy;return(function(b,S){return arguments.length>0?((!o||!S||y||_)&&f(S?h():b),b):h()})}var m=!1,P=((n&Di)!==0?wr:Kr)(()=>(m=!1,h()));s&&a(P);var T=be;return(function(b,S){if(arguments.length>0){const k=S?a(P):o&&s?Qe(b):b;return g(P,k),m=!0,l!==void 0&&(l=k),b}return An&&m||(T.f&Vt)!==0?P.v:a(P)})}function De(t){Ne===null&&Co(),rr&&Ne.l!==null?Ol(Ne).m.push(t):Oe(()=>{const e=Rt(t);if(typeof e=="function")return e})}function Ol(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Bl="5";var mo;typeof window<"u"&&((mo=window.__svelte??(window.__svelte={})).v??(mo.v=new Set)).add(Bl);zi();const ds={};function Rl(t){Ue(ds,t)}function fs(){const t=Ve(ds);if(!t)throw new Error("No FeedSearchContext found");return t}const vs={};function zl(t){Ue(vs,t)}function Pt(){const t=Ve(vs);if(!t)throw new Error("No AppHistoryContext found");return t}function Fl(t,e){oe(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=Pt(),s="feedSearch",i=I(()=>o().searchParams.get(s)||""),l=I(()=>a(i));Rl({getFeedSearch:()=>a(l),setFeedSearch:f=>{f===""?r(s):n(s,f)}});var c=J(),u=B(c);Se(u,()=>e.children??xe),p(t,c),se()}const hs={};function Hl(t){Ue(hs,t)}function gs(){const t=Ve(hs);if(!t)throw new Error("No TagsSearchContext found");return t}function jl(t,e){oe(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=Pt(),s="tagsSearch",i=I(()=>o().searchParams.get(s)||""),l=I(()=>a(i));Hl({getTagsSearch:()=>a(l),setTagsSearch:f=>{f===""?r(s):n(s,f)}});var c=J(),u=B(c);Se(u,()=>e.children??xe),p(t,c),se()}const ps={};function Vl(t){Ue(ps,t)}function _s(){const t=Ve(ps);if(!t)throw new Error("No FeedOrderContext found");return t}function Ul(t,e){oe(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=Pt(),s="feedOrder",i=I(()=>o().searchParams.get(s)||"newest"),l=I(()=>a(i));Vl({getFeedOrder:()=>a(l),setFeedOrder:f=>{f==="newest"?r(s):n(s,f)}});var c=J(),u=B(c);Se(u,()=>e.children??xe),p(t,c),se()}const ms={};function Wl(t){Ue(ms,t)}function $r(){const t=Ve(ms);if(!t)throw new Error("No SidebarContext found");return t}function ql(t,e){oe(e,!0);const n=(f,d)=>{if(!d)return f;if(d.type==="closed")return{type:"closed"};switch(f.type){case"opened":return d.type==="open"?{type:"opening"}:d.type==="close"?{type:"closing"}:d.type==="swipe"?{type:"openSwiping"}:f;case"closed":return d.type==="open"?{type:"opening"}:d.type==="swipe"?{type:"closeSwiping"}:f;case"openSwiping":return d.type==="open"?{type:"opening"}:d.type==="close"?{type:"closing"}:f;case"closeSwiping":return d.type==="open"?{type:"opening"}:d.type==="close"?{type:"closing"}:f;case"opening":return d.type==="opened"?{type:"opened"}:f;default:return f}};let r=W(Qe(n({type:"closed"})));const o=f=>{const d=Rt(()=>a(r));g(r,n(d,f),!0)};Wl({sidebarOpen:()=>{o({type:"open"})},sidebarClose:()=>{o({type:"close"})},handleComputeState:o,getSidebarState:()=>a(r)});var c=J(),u=B(c);Se(u,()=>e.children??xe),p(t,c),se()}const ws={};function Kl(t){Ue(ws,t)}function ys(){const t=Ve(ws);if(!t)throw new Error("No SelectedTagsContext found");return t}function Yl(t,e){oe(e,!0);const{getAppLocation:n,setSearchParam:r,deleteSearchParam:o}=Pt(),s=I(n),i=I(()=>a(s).searchParams),l="selectedTags";let c=I(()=>a(i).get(l)||""),u=I(()=>new Set(a(c).split(",").map(m=>decodeURIComponent(m)).filter(m=>m!=="")));Kl({getSelectedTags:()=>a(u),addTag:m=>{a(u).has(m)||r(l,[...a(u),m].map(P=>encodeURIComponent(P)).join(","))},removeTag:m=>{a(u).has(m)&&a(u).size===1?o(l):a(u).has(m)&&r(l,[...a(u)].filter(P=>P!==m).map(P=>encodeURIComponent(P)).join(","))},clearTags:()=>{o(l)}});var h=J(),y=B(h);Se(y,()=>e.children??xe),p(t,h),se()}const bs={};function Gl(t){Ue(bs,t)}function Ba(){const t=Ve(bs);if(!t)throw new Error("No LocalDBContext found");return t}const Ss={};function Xl(t){Ue(Ss,t)}function Zl(){const t=Ve(Ss);if(!t)throw new Error("No SettingsContext found");return t}const Cs={};function Jl(t){Ue(Cs,t)}function ea(){const t=Ve(Cs);if(!t)throw new Error("No BroadcastContext found");return t}const Ql="AppStorage",$l=1,lr="account",Mr="settings",ft="notes",bt="tags",ec="syncLog",ln="success",Yt="error",We=(t,e,n)=>{t?.addEventListener(e,n)},uo=(t,e)=>new Promise((n,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();We(s,ln,()=>{const i=s?.result||[];n(i)}),We(s,Yt,i=>{r(i)})}),Sa=(t,e,n)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);We(i,ln,()=>{const l=i?.result?.data;r(l)}),We(i,Yt,l=>{o(l)})}),fr=(t,e,n,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:r});We(c,ln,()=>{o()}),We(c,Yt,u=>{s(u)})}),sr=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{We(i,ln,()=>{l()}),We(i,Yt,u=>{c(u)})})}))},tc=(t,e,n)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);We(l,ln,()=>{r()}),We(l,Yt,c=>{o(c)})}),jn=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{We(i,ln,()=>{l()}),We(i,Yt,u=>{c(u)})})}))},pn=(t,e)=>new Promise((n,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();We(i,ln,()=>{n()}),We(i,Yt,l=>{r(l)})});function nc(t,e){oe(e,!0);let n=W(Qe({showFavicon:!0}));const{getDB:r}=Ba(),{createBroadcastChannel:o,tabId:s}=ea(),i=o(),l=I(r),c=async()=>{const y=await Sa(a(l),Mr,"default");y&&g(n,y,!0)},u=async()=>{c()},f=async y=>{const m=JSON.parse(y.data),P=m;if(m.tabId&&m.tabId===s){P.type==="exit"&&(g(n,{showFavicon:!0},!0),pn(a(l),Mr));return}P.type==="updateSettings"?c():P.type==="exit"&&g(n,{showFavicon:!0},!0)},d=()=>a(n).showFavicon,v=async y=>{a(n).showFavicon=y,await fr(a(l),Mr,"default",{showFavicon:y}),i.postMessage({type:"updateSettings"})};De(()=>(u(),i.addEventListener(f),()=>{i.removeEventListener(f)})),Xl({getFaviconEnabled:d,setFaviconShown:v});var _=J(),h=B(_);Se(h,()=>e.children??xe),p(t,_),se()}const Es={};function rc(t){Ue(Es,t)}function ks(){const t=Ve(Es);if(!t)throw new Error("No AccountContext found");return t}function ac(t,e){oe(e,!0);let n=W(void 0);const{getDB:r}=Ba(),{createBroadcastChannel:o,tabId:s}=ea(),i=I(r),l=o(),c=async()=>{const b=await Sa(a(i),lr,"default");g(n,b,!0)},u=b=>fr(a(i),lr,"default",b),f=async b=>{const S=await Sa(a(i),lr,"default");S!==void 0&&g(n,S,!0),b(S)},d=async b=>{const S=JSON.parse(b.data);if(S.tabId&&S.tabId===s)return;const k=S;k.type==="initLocalAccount"?g(n,null):k.type==="initCloudAccount"?c():k.type==="disconnectCloudAccount"?g(n,null):k.type==="exit"?g(n,void 0):k.type==="updateAccount"&&c()};De(()=>(l.addEventListener(d),()=>{l.removeEventListener(d)})),rc({init:f,getAccount:()=>a(n),initLocalAccount:async()=>{g(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async b=>{const S={encryptedClientKey:b.encryptedClientKey||"",subscriptionExpires:b.subscriptionExpires||-1,lastSync:-1};await u(S),g(n,S,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{g(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async b=>{if(!a(n))throw new Error("No account to update subscription for");const S={...a(n),subscriptionExpires:b};await u(S),l.postMessage({type:"updateAccount"})},exitApp:async()=>{g(n,void 0),l.postMessage({type:"exit"}),await pn(a(i),lr)}});var P=J(),T=B(P);Se(T,()=>e.children??xe),p(t,P),se()}const Ds={};function oc(t){Ue(Ds,t)}function Nn(){const t=Ve(Ds);if(!t)throw new Error("No NotesContext found");return t}const sc=()=>crypto.randomUUID(),ic=t=>{const e=new Map;for(const n of t||[])for(const r of n?.data.tags||[])e.set(r,{name:r,count:(e.get(r)?.count||0)+1});return e};function lc(t,e){oe(e,!0);const{getDB:n}=Ba(),{createBroadcastChannel:r,tabId:o}=ea(),s=I(n),i=r(),l=720*60*60*1e3;let c=W(0),u=W(!1),f=W(()=>new Map),d=W(()=>[]),v=W(()=>new Map);const _=()=>a(u),h=()=>a(c)>0,y=(L=1)=>{a(c)>0&&g(c,a(c)-L)},m=L=>{const z=a(d)(),w=a(v)(),D={...L};z.push(D),w.set(D.id,D),g(d,()=>z),g(v,()=>w)},P=L=>{const z=a(d)(),w=a(v)(),D=w.get(L.id);D&&(D.data=L.data),g(d,()=>z),g(v,()=>w)},T=L=>{const z=a(d)(),w=a(v)(),D=w.get(L);w.has(L)&&w.delete(L),D?.data?.type==="draft"&&w.delete("draft"),D&&(D.data=void 0),g(d,()=>z),g(v,()=>w)},b=L=>{const z=a(d)(),w=a(v)();for(const D of L){const H=w.get(D);w.has(D)&&w.delete(D),H?.data?.type==="draft"&&w.delete("draft"),H&&(H.data=void 0)}g(d,()=>z),g(v,()=>w)},S=()=>{g(d,()=>[]),g(f,()=>new Map),g(v,()=>new Map)},k=()=>a(d),C=L=>{const z=a(f)();for(const w of L){const D=z.get(w);D?D.count++:z.set(w,{name:w,count:1})}g(f,()=>z)},N=L=>{const z=a(f)();for(const w of L){const D=z.get(w);D&&(D.count--,D.count<=0&&z.delete(w))}g(f,()=>z)},x=async()=>{const[L,z]=await Promise.all([uo(a(s),ft),uo(a(s),bt).then(ce=>ce.reduce((Me,Te)=>Me.set(Te.id,Te.data),new Map))]),w=[],D=[],H=new Map;let X=0;for(const ce of L)ce.data.deletedAt&&Date.now()-ce.data.deletedAt>l?w.push(ce.id):(D.push(ce),H.set(ce.id,ce),ce.data.deletedAt&&(X+=1),ce.data.type==="draft"&&H.set("draft",ce));g(c,X,!0);const Q=ic(D),ge=new Map;Q.entries().forEach(([ce,Me])=>{const Te=z.get(ce);ge.set(ce,{...Me,...Te})}),await jn(a(s),ft,w),await pn(a(s),bt),await sr(a(s),bt,Array.from(ge.values()).map(ce=>({id:ce.name,data:{pinned:ce.pinned}}))),g(d,()=>D),g(v,()=>H),g(f,()=>ge),g(u,!0)},j=async()=>{const L=a(v)(),z=L.get("draft");if(z)return z;const w={id:sc(),data:{type:"draft",url:"",name:"",text:"",tags:[],draft:{url:"",name:"",text:"",tags:[],createdAt:Date.now(),updatedAt:Date.now()},createdAt:Date.now(),updatedAt:Date.now()}};return await fr(a(s),ft,w.id,{...w.data}),L.set("draft",w),m(w),i.postMessage({type:"createNoteDraft",data:{note:w}}),w},ne=async L=>{const w=a(v)().get(L);if(!w||!w.data)return;const D=a(f)(),H=w.data.tags;N(H),T(L),i.postMessage({type:"deleteNote",data:{id:L}}),y(),await tc(a(s),ft,L),await jn(a(s),bt,H.filter(X=>{const Q=D.get(X);return Q?Q.count<=1:!1}))},de=async L=>{const z=a(v)(),w=new Set;for(const H of L){const X=z.get(H);X&&X.data&&X.data.tags.forEach(Q=>w.add(Q))}const D=a(f)();N(Array.from(w)),b(L),y(L.length),await jn(a(s),ft,L),await jn(a(s),bt,Array.from(w.values()).filter(H=>{const X=D.get(H);return X?X.count<=1:!1})),i.postMessage({type:"reloadNotes"})},R=async(L,z)=>{const w={id:z.id,data:{...z.data}},D=a(f)(),H=z.data.tags.filter(Q=>!L.data.tags.includes(Q)),X=L.data.tags.filter(Q=>!z.data.tags.includes(Q));await fr(a(s),ft,w.id,{...w.data}),await sr(a(s),bt,H.filter(Q=>!D.has(Q)).map(Q=>({id:Q,data:{}}))),await jn(a(s),bt,X.filter(Q=>{const ge=D.get(Q);return ge?ge.count<=1:!1})),P(w),N(X),C(H),i.postMessage({type:"updateNote",data:{note:w,tagsToAdd:H,tagsToDelete:X}})},ee=async L=>{const z=a(v)(),w=Z(L);if(!w||!w.data)return;const D=z.get("draft");D&&D.id===w.id&&z.delete("draft");const H={id:L,data:{type:"note",name:w.data.draft?.name??w.data.name,url:w.data.draft?.url??w.data.url,text:w.data.draft?.text??w.data.text,tags:w.data.draft?.tags??w.data.tags,updatedAt:Date.now(),createdAt:w.data.createdAt,pinnedAt:w.data.pinnedAt,deletedAt:w.data.deletedAt,draft:void 0}};return R(w,H)},$=async()=>{S(),i.postMessage({type:"clearNotes"}),g(c,0),await pn(a(s),ft),await pn(a(s),bt)},Z=L=>{const z=a(v)();return L?z.get(L):z.get("draft")},Y=async(L,z)=>{const D=a(v)().get(L);if(!D||!D.data)return;const H={id:L,data:{...D.data,pinnedAt:z?Date.now():void 0}};return R(D,H)},ae=async L=>{const w=a(v)().get(L);if(!w||!w.data)return;const D={id:L,data:{...w.data,deletedAt:Date.now()}};g(c,a(c)+1),await R(w,D)},re=async L=>{const z=a(v)(),w=a(d)(),D=[];w.forEach(H=>{H.data&&L.every(X=>H?.data?.tags.includes(X))&&D.push(H.id)});for(const H of D){const X=z.get(H);X?.data&&(X.data.deletedAt=Date.now())}g(c,a(c)+D.length),await sr(a(s),ft,D.map(H=>{const X=z.get(H);return{id:H,data:X?.data}})),i.postMessage({type:"reloadNotes"}),g(v,()=>z),g(d,()=>w)},G=async L=>{const z=a(v)(),w=a(d)(),D=[];w.forEach(H=>{H.data&&L.every(X=>H?.data?.tags.includes(X))&&D.push(H.id)});for(const H of D){const X=z.get(H);X?.data&&(X.data.deletedAt=0)}g(c,a(c)-D.length),await sr(a(s),ft,D.map(H=>{const X=z.get(H);return{id:H,data:X?.data}})),i.postMessage({type:"reloadNotes"}),g(v,()=>z),g(d,()=>w)},te=async L=>{const w=a(v)().get(L);if(!w||!w.data)return;const D={id:L,data:{...w.data,deletedAt:0}};y(),await R(w,D)},M=async(L,z)=>{const w=a(f)();w.set(L,{name:L,count:w.get(L)?.count||0,pinned:z}),await fr(a(s),bt,L,{pinned:z}),i.postMessage({type:"pinTag",data:{tag:L,pinned:z}}),g(f,()=>w)},O=async L=>{const z=a(f)(),w=a(d)(),D=[];w.forEach(H=>{H.data&&L.every(X=>H?.data?.tags.includes(X))&&D.push(H.id)}),await de(D),g(d,()=>w),g(f,()=>z)},U=async L=>{const z=a(v)(),w={};L.forEach(D=>{const H=z.get(D.id);(!H||H&&H.data&&H.data.updatedAt<D.data.updatedAt)&&(w[D.id]=D)}),await sr(a(s),ft,Object.values(w)),await x(),i.postMessage({type:"reloadNotes"})},le=async()=>{const L=[];a(d)().forEach(w=>{w&&w.data&&w.data.deletedAt&&L.push(w.id)}),g(c,0),await jn(a(s),ft,L),await x(),i.postMessage({type:"emptyBin"})},ie=async(L,z)=>{if(L===""){const X=a(v)().get("draft");X?L=X.id:L=(await j()).id}const w=Z(L);if(!w||!w.data)return;const D={id:L,data:{...w.data,draft:{...z,tags:z.tags,createdAt:w.data.draft?.createdAt||Date.now(),updatedAt:Date.now()}}};return await R(w,D),w.id},fe=async L=>{const z=a(v)(),w=Z(L);if(!w||!w.data||!w.data.draft)return;if(w.data.type==="draft"){L===z.get("draft")?.id&&z.delete("draft"),await ne(L);return}const D={id:L,data:{...w.data,draft:void 0}};return R(w,D)},pe=async L=>{const z=JSON.parse(L.data),w=z;if(z.tabId&&z.tabId===o){w.type==="exit"&&(S(),await pn(a(s),ft),await pn(a(s),bt));return}if(w.type==="createNoteDraft"){const D=w.data.note;a(v)().set("draft",D),m(D)}else if(w.type==="updateNote"){const D=w.data,X=a(v)().get(D.note.id);if(!X||!X.data)return;X.data.deletedAt&&!D.note.data.deletedAt?y():!X.data.deletedAt&&D.note.data.deletedAt&&g(c,a(c)+1),P(D.note),N(D.tagsToAdd),C(D.tagsToDelete)}else if(w.type==="deleteNote"){const D=w.data.id,X=a(v)().get(D);if(!X)return;y(),T(D),N(X?.data?.tags||[])}else if(w.type==="pinTag"){const D=w.data.tag,H=w.data.pinned,X=a(f)(),Q=X.get(D);Q&&(Q.pinned=H,X.set(D,Q)),g(f,()=>X)}else w.type==="clearNotes"?S():w.type==="reloadNotes"||w.type==="emptyBin"?x():w.type==="exit"&&S()};De(()=>(x(),i.addEventListener(pe),()=>{i.removeEventListener(pe)})),oc({isInitedNotes:_,putNoteDraft:ie,deleteNoteDraft:fe,deleteNote:ne,pinNote:Y,getGetNotes:k,importNotes:U,clearNotes:$,getNoteById:Z,getGetMapTags:()=>a(f),pinTag:M,moveNoteToBin:ae,restoreNoteFromBin:te,checkNotesInBin:h,emptyBin:le,saveNoteDraft:ee,countNotesInBin:()=>a(c),moveNotesToBinByTags:re,deleteNotesByTags:O,restoreNotesFromBinByTags:G});var he=J(),Ce=B(he);Se(Ce,()=>e.children??xe),p(t,he),se()}const Ps={},cc=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function uc(t){Ue(Ps,t)}function cn(){const t=Ve(Ps);if(!t)throw new Error("No AnimationSettingsContext found");return t}function dc(t,e){oe(e,!0);let n=Qe(cc());uc(n);var r=J(),o=B(r);Se(o,()=>e.children??xe),p(t,r),se()}const Ts={};function fc(t){Ue(Ts,t)}function Ra(){const t=Ve(Ts);if(!t)throw new Error("No ScrollingContext found");return t}const xs=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function Cf(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}function vc(t,e){oe(e,!0);let n=W(!1);const r=()=>a(n),o=xs(()=>{g(n,!1)},100);fc({isScrolling:r,enable:()=>{g(n,!0),o()}});var i=J(),l=B(i);Se(l,()=>e.children??xe),p(t,i),se()}const As={};function hc(t){Ue(As,t)}function un(){const t=Ve(As);if(!t)throw new Error("No MobileSizeContext found");return t}function gc(t,e){oe(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let r=W(Qe(n())),o=cn();const s=xs(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{g(r,n(),!0)})};hc({checkMobileSize:()=>a(r)}),De(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=J(),u=B(c);Se(u,()=>e.children??xe),p(t,c),se()}const Ns={};function pc(t){Ue(Ns,t)}function dn(){const t=Ve(Ns);if(!t)throw new Error("No DialogContext found");return t}function _c(t,e){oe(e,!0);let n=W(0),r=W(!1),o=W(!0);pc({checkExistedDialog:()=>a(n)>0,showDialog:()=>{g(n,a(n)+1)},hideDialog:()=>{g(n,a(n)-1)},blockDialog:h=>{g(r,h,!0)},checkBlockedDialog:()=>a(r),setClosableDialog:h=>{g(o,h,!0)},checkClosableDialog:()=>a(o)});var v=J(),_=B(v);Se(_,()=>e.children??xe),p(t,v),se()}const Ms={};function mc(t){Ue(Ms,t)}function za(){const t=Ve(Ms);if(!t)throw new Error("No ScrollContainerContext found");return t}function wc(t,e){oe(e,!0);let n=W(null);mc({setScrollContainer:l=>{g(n,l,!0)},getScrollContainer:()=>a(n)});var s=J(),i=B(s);Se(i,()=>e.children??xe),p(t,s),se()}const Ls={};function yc(t){Ue(Ls,t)}function Fa(){const t=Ve(Ls);if(!t)throw new Error("No DialogPageHeightContext found");return t}function bc(t,e){oe(e,!0);let n=W(200);yc({setDialogPageHeight:l=>{g(n,l,!0)},getDialogPageHeight:()=>a(n)});var s=J(),i=B(s);Se(i,()=>e.children??xe),p(t,s),se()}const Sc=[lr,Mr,ft,bt,ec];function Cc(){return new Promise((t,e)=>{const n=indexedDB.open(Ql,$l);We(n,"upgradeneeded",()=>{const r=n.result;for(const o of Sc)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),We(n,ln,()=>{const r=n.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),We(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),We(n,Yt,()=>{e(),console.error(Yt,n.error)})})}function Ec(t,e){oe(e,!0);let n=W(null);De(()=>{Cc().then(l=>{g(n,l,!0)}).catch(l=>{console.error("Failed to initialize LocalDB:",l)})}),Gl({getDB:()=>a(n)});var o=J(),s=B(o);{var i=l=>{var c=J(),u=B(c);Se(u,()=>e.children??xe),p(l,c)};V(s,l=>{a(n)&&l(i)})}p(t,o),se()}const St="dialogPages",Is={};function kc(t){Ue(Is,t)}function yt(){const t=Ve(Is);if(!t)throw new Error("No DialogPagesContext found");return t}function Dc(t,e){oe(e,!0);const{getAppLocation:n,setSearchParam:r,deleteSearchParam:o}=Pt(),s=I(n),i=I(()=>a(s).searchParams);let l=I(()=>a(i).get(St)||""),c=I(()=>a(l).split(",").map(S=>decodeURIComponent(S)).filter(S=>S!==""));const u=()=>a(c),f=S=>{if(S.length===0){o(St);return}r(St,S.map(k=>encodeURIComponent(k)).join(","))},d=S=>{r(St,[...a(c),S].map(k=>encodeURIComponent(k)).join(","))};kc({setDialogPages:f,getDialogPages:u,pushDialogPage:d,popDialogPage:()=>{const S=a(c)[a(c).length-1];return a(c).length<=1?(o(St),S):(r(St,a(c).slice(0,-1).map(k=>encodeURIComponent(k)).join(",")),S)},replaceDialogPage:S=>{r(St,[...a(c).slice(0,-1),S].map(k=>encodeURIComponent(k)).join(","))},hasDialogPage:S=>a(c).find(k=>{const[C]=k.split("?");return C===S})!==void 0,clearDialogPages:()=>{o(St)},createDialogPageHref:S=>{const k=new URLSearchParams(a(s).searchParams.toString());return k.set(St,[...u(),S].map(C=>encodeURIComponent(C)).join(",")),`${a(s).pathname}?${k.toString()}`},createHandleClickDialogPage:S=>k=>{k.preventDefault(),d(S)}});var T=J(),b=B(T);Se(b,()=>e.children??xe),p(t,T),se()}function Pc(t,e){oe(e,!0);const n=f=>f.startsWith("/")?f:`/${f}`,r=f=>{const[d,v]=f.split("?");return{href:n(f),pathname:n(d),search:v?`?${v}`:"",searchParams:new URLSearchParams(v)}};let o=W(Qe({href:`${n(window.location.pathname)}${window.location.search}`,pathname:n(window.location.pathname),search:window.location.search,searchParams:new URLSearchParams(window.location.search)}));const s=f=>{g(o,r(f),!0),window.history.replaceState(null,"",f)};zl({getAppLocation:()=>a(o),replace:s,setSearchParam:(f,d)=>{const v=a(o).searchParams;v.set(f,d),s(`${a(o).pathname}${v.size>0?`?${v.toString()}`:""}`)},deleteSearchParam:f=>{const d=a(o).searchParams;d.delete(f),s(`${a(o).pathname}${d.size>0?`?${d.toString()}`:""}`)}});var c=J(),u=B(c);Se(u,()=>e.children??xe),p(t,c),se()}const Os={};function Tc(t){Ue(Os,t)}function Bs(){const t=Ve(Os);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function xc(t,e){oe(e,!0);let n=Qe({value:!1});const r=()=>n.value;De(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),Tc({getIsKeyboardVisible:r});var o=J(),s=B(o);Se(s,()=>e.children??xe),p(t,o),se()}function Ac(t,e){oe(e,!0);const n=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};Jl({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=J(),s=B(o);Se(s,()=>e.children??xe),p(t,o),se()}function Nc(t,e){Ec(t,{children:(n,r)=>{Ac(n,{children:(o,s)=>{dc(o,{children:(i,l)=>{vc(i,{children:(c,u)=>{gc(c,{children:(f,d)=>{_c(f,{children:(v,_)=>{wc(v,{children:(h,y)=>{bc(h,{children:(m,P)=>{xc(m,{children:(T,b)=>{Pc(T,{children:(S,k)=>{Dc(S,{children:(C,N)=>{var x=J(),j=B(x);Se(j,()=>e.children??xe),p(C,x)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Mc(t,e){Nc(t,{children:(n,r)=>{jl(n,{children:(o,s)=>{Fl(o,{children:(i,l)=>{Ul(i,{children:(c,u)=>{ql(c,{children:(f,d)=>{Yl(f,{children:(v,_)=>{nc(v,{children:(h,y)=>{ac(h,{children:(m,P)=>{lc(m,{children:(T,b)=>{var S=J(),k=B(S);Se(k,()=>e.children??xe),p(T,S)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let Jt=W(""),hn=W(null),cr=W(null),ur=W(null);function kn(t,e){g(Jt,""),setTimeout(()=>{g(Jt,t,!0),e?.onFinish&&g(cr,e.onFinish,!0),e?.onCancel&&g(ur,e.onCancel,!0)},16)}const Lc=(t,e,n,r,o)=>{t.preventDefault(),a(e)&&(g(n,null),a(e)(),g(e,null)),g(r,""),a(o)?.style.removeProperty("opacity")};var Ic=q('<button type="button" class="undoButton svelte-1vxmgq5">undo</button>'),Oc=q('<div class="notification svelte-1vxmgq5"><span> </span> <!></div>'),Bc=q("<div><!></div>");function Rc(t,e){oe(e,!0),Oe(()=>{a(Jt);const s=a(ur)?2e3:800;a(Jt)&&(a(hn)?.getBoundingClientRect(),a(hn)?.style.setProperty("opacity","1"));const i=setTimeout(()=>{a(hn)?.style.removeProperty("opacity")},s),l=setTimeout(()=>{g(Jt,""),a(cr)&&a(cr)(),g(cr,null),g(ur,null),a(hn)?.style.removeProperty("opacity")},s+400);return()=>{clearTimeout(i),clearTimeout(l)}});var n=Bc(),r=E(n);{var o=s=>{var i=Oc(),l=E(i),c=E(l),u=F(l,2);{var f=d=>{var v=Ic();v.__click=[Lc,ur,cr,Jt,hn],p(d,v)};V(u,d=>{a(ur)&&d(f)})}ut(i,d=>g(hn,d),()=>a(hn)),_e(()=>qt(c,a(Jt))),p(s,i)};V(r,s=>{a(Jt)&&s(o)})}p(t,n),se()}at(["click"]);var zc=q('<span class="vh svelte-s92gzo"><!></span>');function Je(t,e){var n=zc(),r=E(n);Se(r,()=>e.children),p(t,n)}var Fc=ml('<svg class="svelte-18et5h9"><use></use></svg>');function ye(t,e){let n=ve(e,"name",8,"");var r=Fc(),o=E(r);_e(()=>ze(o,"href",`#icon-${n()??""}`)),p(t,r)}const Hc=(t,e,n,r,o)=>{if(a(e))return;const s=n().type;s==="closed"?r():s==="opened"&&o()};var jc=q('<button class="buttonMenu svelte-bpktnw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Rs(t,e){oe(e,!0);const{sidebarOpen:n,getSidebarState:r,sidebarClose:o}=$r(),{getDialogPages:s}=yt(),{checkExistedDialog:i}=dn();let l=I(()=>s().length>0||i());var c=jc();c.__click=[Hc,l,r,n,o];var u=E(c);we(u,()=>({"--size":"32px"})),ye(u.lastChild,{name:"sidebarMenu"});var f=F(u,2);Je(f,{children:(d,v)=>{var _=Be("Menu");p(d,_)}}),p(t,c),se()}at(["click"]);var Vc=(t,e)=>e.onChange?.(t.target?.value||""),Uc=(t,e,n)=>{e(""),n.onChange?.("")},Wc=q('<button class="clearButton svelte-15lr19w"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),qc=q('<div class="block svelte-15lr19w"><input class="svelte-15lr19w"/> <!></div>');function Ca(t,e){oe(e,!0);let n=ve(e,"value",15,""),r=ve(e,"ref",15,null);const o=u=>{u.key==="Escape"&&(n(""),e.onChange?.(""))};De(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=qc(),i=E(s);i.__input=[Vc,e],ut(i,u=>r(u),()=>r());var l=F(i,2);{var c=u=>{var f=Wc();f.__click=[Uc,n,e];var d=E(f);we(d,()=>({"--size":"20px"})),ye(d.lastChild,{name:"close"});var v=F(d,2);Je(v,{children:(_,h)=>{var y=Be("Clear");p(_,y)}}),p(u,f)};V(l,u=>{n()&&u(c)})}_e(()=>ze(i,"placeholder",e.placeholder)),Ia("focus",i,function(...u){e.onFocus?.apply(this,u)}),Ll(i,n),p(t,s),se()}at(["input","click"]);function Ha(t,e){oe(e,!0),De(()=>{const n=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),se()}var Kc=q('<dialog><div class="dialogInner svelte-1x410nl"><!></div></dialog> <!>',1);function ta(t,e){oe(e,!0);let n=W(null),r=W(null),o=W(!1),{showDialog:s,hideDialog:i}=dn();const l=h=>{h?.preventDefault();const y=setTimeout(()=>{e.onClosed()},150);a(n)?.addEventListener("transitionend",()=>{clearTimeout(y),e.onClosed()},{once:!0}),g(o,!1)};Oe(()=>{e.startClose&&l()}),De(()=>(a(n)?.showModal(),a(n)?.getClientRects(),g(o,!0),a(n)?.addEventListener("cancel",l),a(n)?.addEventListener("close",l),()=>{a(n)?.removeEventListener("cancel",l),a(n)?.removeEventListener("close",l)})),De(()=>(s(),()=>{i()}));var c=Kc(),u=B(c),f=E(u),d=E(f);Se(d,()=>e.children),ut(f,h=>g(r,h),()=>a(r)),ut(u,h=>g(n,h),()=>a(n));var v=F(u,2);{var _=h=>{Ha(h,{get dialog(){return a(n)},get dialogInner(){return a(r)},onClose:l})};V(v,h=>{a(n)&&a(r)&&h(_)})}_e(()=>ke(u,1,Ee(["dialog",{shown:a(o)}]),"svelte-1x410nl")),p(t,c),se()}var Yc=q("<div><!></div>");function ja(t,e){oe(e,!0);let n=ve(e,"transformOrigin",3,"top right"),r=W(!1),o=W(null);const s=()=>{const d=setTimeout(()=>{e.onClosed()},150);a(o)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),g(r,!1)},i=d=>{d.target!==a(o)&&!a(o)?.contains(d.target)&&s()},l=d=>{d.target!==a(o)&&!a(o)?.contains(d.target)&&s()},c=d=>{d.key==="Escape"&&s()};De(()=>{a(o)?.getClientRects(),g(r,!0);const d=setTimeout(()=>{document.addEventListener("focusin",i),document.addEventListener("click",l),document.addEventListener("keydown",c)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",i),document.removeEventListener("click",l),document.removeEventListener("keydown",c)}}),Oe(()=>{e.startClose&&s()});var u=Yc(),f=E(u);Se(f,()=>e.children),ut(u,d=>g(o,d),()=>a(o)),_e(()=>{Pn(u,`transform-origin: ${e.positionTop?"top right":n()};`),ke(u,1,Ee(["menu",{top:e.positionTop,shown:a(r)}]),"svelte-ujw4xi")}),p(t,u),se()}const Gc=(t,e)=>{a(e)||g(e,!0)};var Xc=(t,e)=>e("newest"),Zc=(t,e)=>e("oldest"),Jc=(t,e)=>e("AtoZ"),Qc=(t,e)=>e("ZtoA"),$c=q("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),eu=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),tu=q('<div class="orderMenu svelte-14zj87s"><button><!> <!></button> <!></div>');function nu(t,e){oe(e,!0);const n=(T,b=xe)=>{var S=$c(),k=E(S);k.__click=[Xc,f];var C=F(k,2);C.__click=[Zc,f];var N=F(C,2);N.__click=[Jc,f];var x=F(N,2);x.__click=[Qc,f],_e(()=>{ke(S,1,Ee(["menu",{menuDialog:b()}]),"svelte-14zj87s"),ke(k,1,Ee(["menuButton",{menuButtonDialog:b(),current:a(u)==="newest"}]),"svelte-14zj87s"),ke(C,1,Ee(["menuButton",{menuButtonDialog:b(),current:a(u)==="oldest"}]),"svelte-14zj87s"),ke(N,1,Ee(["menuButton",{menuButtonDialog:b(),current:a(u)==="AtoZ"}]),"svelte-14zj87s"),ke(x,1,Ee(["menuButton",{menuButtonDialog:b(),current:a(u)==="ZtoA"}]),"svelte-14zj87s")}),p(T,S)};let r=W(!1),o=W(!1);const{checkMobileSize:s}=un(),{getFeedOrder:i,setFeedOrder:l}=_s();let c=I(s),u=I(i);const f=T=>{g(o,!0),l(T)},d=()=>{g(r,!1),g(o,!1)};De(()=>{const T=b=>{b.key==="Escape"&&g(o,!0)};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)});var v=tu(),_=E(v);_.__click=[Gc,r],ke(_,1,Ee(["button","buttonMenu"]),"svelte-14zj87s");var h=E(_);ye(h,{name:"filter"});var y=F(h,2);Je(y,{children:(T,b)=>{var S=Be("show feed order menu");p(T,S)}});var m=F(_,2);{var P=T=>{var b=J(),S=B(b);{var k=N=>{ta(N,{get startClose(){return a(o)},onClosed:d,children:(x,j)=>{n(x,()=>!0)},$$slots:{default:!0}})},C=N=>{var x=eu(),j=B(x);we(j,()=>({"--right":"20px","--top":"60px"})),ja(j.lastChild,{get startClose(){return a(o)},onClosed:d,children:(ne,de)=>{n(ne,()=>!1)},$$slots:{default:!0}}),p(N,x)};V(S,N=>{a(c)?N(k):N(C,!1)})}p(T,b)};V(m,T=>{a(r)&&T(P)})}p(t,v),se()}at(["click"]);var K=(t=>(t.NewNote="newNote",t.EditNote="editNote",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t.Install="install",t.InstallSuccess="installSuccess",t.Welcome="welcome",t))(K||{}),ru=q("<a><!></a>"),au=q("<button><!></button>");function rn(t,e){let n=ve(e,"type",3,"standard"),r=ve(e,"typeButton",3,"button"),o=ve(e,"element",3,"button"),s=ve(e,"href",3,""),i=ve(e,"fullWidth",3,!1),l=ve(e,"withoutMinWidth",3,!1);var c=J(),u=B(c);{var f=v=>{var _=ru();_.__click=function(...y){e.onClick?.apply(this,y)};var h=E(_);Se(h,()=>e.children??xe),_e(()=>{ze(_,"target",e.target),ze(_,"rel",e.rel),ze(_,"href",s()),ke(_,1,Ee(["button","a",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),p(v,_)},d=v=>{var _=au();_.__click=function(...y){e.onClick?.apply(this,y)};var h=E(_);Se(h,()=>e.children??xe),_e(()=>{ze(_,"type",r()),ke(_,1,Ee(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),p(v,_)};V(u,v=>{o()==="a"?v(f):v(d,!1)})}p(t,c)}at(["click"]);var ou=q('<div class="block svelte-1dzbsx4"><span class="title svelte-1dzbsx4"> </span> <div class="controls svelte-1dzbsx4"><!> <!></div></div>');function Va(t,e){oe(e,!0);let n=ve(e,"buttonCancelTitle",3,"Cancel"),r=ve(e,"buttonConfirmTitle",3,"Confirm"),o=W(!1),s=W(!1);const i=()=>{g(o,!0)},l=()=>{g(o,!0),g(s,!0)};ta(t,{get startClose(){return a(o)},onClosed:()=>{a(s)?e.onConfirm():e.onCancel()},children:(u,f)=>{var d=ou(),v=E(d),_=E(v),h=F(v,2),y=E(h);rn(y,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(P,T)=>{var b=Be();_e(()=>qt(b,n())),p(P,b)},$$slots:{default:!0}});var m=F(y,2);rn(m,{onClick:l,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(P,T)=>{var b=Be();_e(()=>qt(b,r())),p(P,b)},$$slots:{default:!0}}),_e(()=>qt(_,e.title)),p(u,d)},$$slots:{default:!0}}),se()}const gr=t=>{const e=n=>{const r=n.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=n.key.toLowerCase(),i=n.metaKey,l=n.ctrlKey,c=n.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){n.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var su=q('<div class="block svelte-lfflvc"><a class="buttonAdd svelte-lfflvc"><span class="mobile svelte-lfflvc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="desktop svelte-lfflvc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function iu(t,e){oe(e,!1);const{createDialogPageHref:n,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=yt(),{checkExistedDialog:i}=dn(),l=()=>{o.length===0&&!i()&&s(K.NewNote)};De(()=>gr({key:"n",action:l})),Qr();var c=su(),u=E(c),f=I(()=>r(K.NewNote));u.__click=function(...m){a(f)?.apply(this,m)};var d=E(u),v=E(d);we(v,()=>({"--size":"32px","--color":"#b0b0b0"})),ye(v.lastChild,{name:"add"});var _=F(v,2);Je(_,{children:(m,P)=>{var T=Be("Add note");p(m,T)}});var h=F(d,2),y=E(h);we(y,()=>({"--size":"16px","--color":"#b0b0b0"})),ye(y.lastChild,{name:"plus"}),_e(m=>ze(u,"href",m),[()=>n(K.NewNote)]),p(t,c),se()}at(["click"]);var lu=q('<button><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>');function zs(t,e){oe(e,!0);let n=ve(e,"type",3,"button"),r=!1,o=W(null);Oe(()=>{e.onRef&&e.onRef(a(o))});const s=d=>{(d.key==="Enter"||d.key===" ")&&(r=!0)},i=()=>{e.onClick(r),r&&(r=!1)};let l=I(()=>e.style==="selected"?"45deg":"0deg");var c=lu();c.__keydown=s,c.__click=i;var u=E(c);Se(u,()=>e.children??xe);var f=F(u,2);we(f,()=>({"--size":e.size==="small"?"10px":"12px","--rotate":a(l)})),ye(f.lastChild,{name:"plus"}),ut(c,d=>g(o,d),()=>a(o)),_e(()=>{ze(c,"type",n()),ke(c,1,Ee([{selectedTag:e.style==="selected",small:e.size==="small",empty:e.mode==="empty"}]),"svelte-uu8a24")}),p(t,c),se()}at(["keydown","click"]);var cu=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),uu=q("<!> <span> </span>",1),du=q("<div></div>");function fo(t,e){oe(e,!0);let n=ve(e,"mobile",3,!1),r=ve(e,"mode",3,"notes");const{getGetMapTags:o}=Nn();let s=W(null),i=W(Qe({value:!1}));const l=d=>{g(s,d,!0)};let u=I(()=>{const d=o()();return[...e.tags].sort((v,_)=>{if(r()==="notes"){if(d.get(v)?.pinned)return-1;if(d.get(_)?.pinned)return 1}return v==="inbox"?-1:_==="inbox"?1:v==="drafts"?-1:_==="drafts"?1:v.localeCompare(_)})});Oe(()=>{a(i),Rt(()=>{a(s)&&a(i).value&&a(s).focus()})});var f=du();Jr(f,22,()=>a(u),d=>d,(d,v,_)=>{{let h=I(()=>a(_)===0?l:void 0);zs(d,{get onRef(){return a(h)},onClick:y=>{y?g(i,{value:!0},!0):g(i,{value:!1},!0),e.handleTagClick(v)},children:(y,m)=>{var P=uu(),T=B(P);{var b=C=>{var N=cu(),x=B(N);we(x,()=>({"--size":"18px"})),ye(x.lastChild,{name:"pin"}),p(C,N)};V(T,C=>{r()==="notes"&&o()().get(v)?.pinned&&C(b)})}var S=F(T,2),k=E(S);_e(()=>qt(k,v)),p(y,P)},$$slots:{default:!0}})}}),_e(()=>ke(f,1,Ee(["tags",{mobile:n()}]),"svelte-1c53r32")),p(t,f),se()}const fu=t=>{try{new URL(t)}catch{return!1}return!0},vu=(t,e)=>{a(e)||g(e,!0)},hu=(t,e,n,r)=>{for(const o of e())o==="inbox"||o==="drafts"||n(o,!0);g(r,!0)},gu=(t,e,n,r)=>{for(const o of e())o==="inbox"||o==="drafts"||n(o,!1);g(r,!0)},pu=(t,e)=>{e.clearTags()},_u=(t,e,n,r)=>{const o=e()(),s=Array.from(n());for(const i of o)i.data&&i.data?.url&&fu(i.data?.url)&&s.every(l=>i.data?.tags.includes(l))&&window.open(i.data?.url,"_blank");g(r,!0)};var mu=q('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin</button></li>'),wu=q('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin</button></li>'),yu=q('<ul><li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links</button></li> <!> <!></ul>'),bu=q('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Su=q("<!> <span> </span>",1),Cu=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Eu=q('<div class="block svelte-58z9m1"><div class="tagsMenu__wrapper svelte-58z9m1"><button class="tagsMenu svelte-58z9m1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <div><div class="clearButton_wrapper svelte-58z9m1"><button class="clearButton svelte-58z9m1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></div> <!></div>'),ku=q("<!> <!>",1);function vo(t,e){oe(e,!0);const n=($,Z=xe)=>{var Y=yu(),ae=E(Y),re=E(ae);re.__click=[_u,l,r,m];var G=E(re);we(G,()=>({"--size":"22px"})),ye(G.lastChild,{name:"open"});var te=F(ae,2);{var M=le=>{var ie=mu(),fe=E(ie);fe.__click=[hu,r,c,m];var pe=E(fe);we(pe,()=>({"--size":"22px"})),ye(pe.lastChild,{name:"pin"}),_e(()=>ke(fe,1,Ee(["button",{buttonMenuDialog:Z()}]),"svelte-58z9m1")),p(le,ie)};V(te,le=>{o()==="notes"&&a(N)&&[...r()].filter(ie=>ie!=="inbox"&&ie!=="drafts").length>0&&le(M)})}var O=F(te,2);{var U=le=>{var ie=wu(),fe=E(ie);fe.__click=[gu,r,c,m];var pe=E(fe);we(pe,()=>({"--size":"22px"})),ye(pe.lastChild,{name:"pin-cancel"}),_e(()=>ke(fe,1,Ee(["button",{buttonMenuDialog:Z()}]),"svelte-58z9m1")),p(le,ie)};V(O,le=>{o()==="notes"&&a(C)&&[...r()].filter(ie=>ie!=="inbox"&&ie!=="drafts").length>0&&le(U)})}_e(()=>{ke(Y,1,Ee(["menu",{menuDialog:Z()}]),"svelte-58z9m1"),ke(re,1,Ee(["button",{buttonMenuDialog:Z()}]),"svelte-58z9m1")}),p($,Y)};let r=ve(e,"selectedTags",7),o=ve(e,"mode",3,"notes");const{checkMobileSize:s}=un(),{getGetMapTags:i,getGetNotes:l,pinTag:c,moveNotesToBinByTags:u,restoreNotesFromBinByTags:f,deleteNotesByTags:d}=Nn();let v=I(s),_=W(null),h=W(Qe({value:!1})),y=W(!1),m=W(!1),P=W(!1);const T=$=>{g(_,$,!0)},b=()=>{g(y,!1),g(m,!1)},S=()=>{const $=i()();for(const Z of r())if(!(Z==="inbox"||Z==="drafts")&&$.get(Z)?.pinned)return!0;return!1},k=()=>{const $=i()();for(const Z of r())if(!(Z==="inbox"||Z==="drafts")&&!$.get(Z)?.pinned)return!0;return!1};let C=I(S),N=I(k);const x=()=>{d(Array.from(r())),e.clearTags(),g(m,!0)};Oe(()=>{a(h),Rt(()=>{a(_)&&a(h).value&&a(_).focus()})});var j=ku(),ne=B(j);{var de=$=>{Va($,{title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:()=>{x(),g(P,!1)},onCancel:()=>{g(P,!1)}})};V(ne,$=>{a(P)&&$(de)})}var R=F(ne,2);{var ee=$=>{var Z=Eu(),Y=E(Z),ae=E(Y);ae.__click=[vu,y];var re=E(ae);we(re,()=>({"--rotate":"-90deg","--size":"20px"})),ye(re.lastChild,{name:"menu"});var G=F(re,2);Je(G,{children:(he,Ce)=>{var L=Be("tags menu");p(he,L)}});var te=F(Y,2);ke(te,1,Ee(["tags","selectedTags"]),"svelte-58z9m1");var M=E(te),O=E(M);O.__click=[pu,e];var U=E(O);we(U,()=>({"--size":"20px"})),ye(U.lastChild,{name:"close"});var le=F(U,2);Je(le,{children:(he,Ce)=>{var L=Be("Clear");p(he,L)}});var ie=F(M,2);Jr(ie,18,r,he=>he,(he,Ce,L)=>{{let z=I(()=>a(L)===r().size-1?T:void 0);zs(he,{get onRef(){return a(z)},onClick:w=>{w?g(h,{value:!0},!0):g(h,{value:!1},!0),e.handleSelectedTagClick(Ce)},style:"selected",children:(w,D)=>{var H=Su(),X=B(H);{var Q=Me=>{var Te=bu(),Fe=E(Te);we(Fe,()=>({"--size":"18px"})),ye(Fe.lastChild,{name:"pin"}),p(Me,Te)};V(X,Me=>{o()==="notes"&&i()().get(Ce)?.pinned&&Me(Q)})}var ge=F(X,2),ce=E(ge);_e(()=>qt(ce,Ce)),p(w,H)},$$slots:{default:!0}})}});var fe=F(te,2);{var pe=he=>{var Ce=J(),L=B(Ce);{var z=D=>{ta(D,{get startClose(){return a(m)},onClosed:b,children:(H,X)=>{n(H,()=>!0)},$$slots:{default:!0}})},w=D=>{var H=Cu(),X=B(H);we(X,()=>({"--right":"0","--top":"0px"})),ja(X.lastChild,{transformOrigin:"top",get startClose(){return a(m)},onClosed:b,children:(Q,ge)=>{n(Q,()=>!1)},$$slots:{default:!0}}),p(D,H)};V(L,D=>{a(v)?D(z):D(w,!1)})}p(he,Ce)};V(fe,he=>{a(y)&&he(pe)})}p($,Z)};V(R,$=>{r().size>0&&$(ee)})}p(t,j),se()}at(["click"]);const Du=(t,e,n)=>{if(t.has("inbox"))return[];const r=[],o=Array.from(t.values()).filter(s=>s!=="drafts");for(const s of e)if(s.data&&!(n&&!n(s))){if(t.size===0){for(const i of s?.data?.tags||[])r.includes(i)||r.push(i);for(const i of s?.data?.draft?.tags||[])r.includes(i)||r.push(i);continue}if(s.data&&o.every(i=>s.data?.tags.includes(i)))for(const i of s.data.tags)t.has("drafts")&&!s.data.draft||!t.has(i)&&!r.includes(i)&&r.push(i);if(s&&s.data.draft&&o.every(i=>s.data?.draft?.tags.includes(i)))for(const i of s.data.draft.tags)t.has("drafts")&&!s.data.draft||!t.has(i)&&!r.includes(i)&&r.push(i)}return r};function Pu(t,e){oe(e,!0);const n=cn(),{getIsKeyboardVisible:r}=Bs();let o=ve(e,"dialog",7);const s=I(r),i=3,l=50,c=5,u=.6,f=.3,d=.35,v=.95;let _=0,h=0,y=0,m=!1,P=!1,T=0,b=0,S=0;const k=()=>{_=0,h=0,m=!1,P=!1,T=0,b=0,S=0,y=0,C!==null&&(cancelAnimationFrame(C),C=null),N=null};let C=null,N=null;const x=Y=>{if(!o()){console.warn("Touch start: No dialog element");return}if(e.sidebarState!=="opened"&&e.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${e.sidebarState}`);return}_=Y.touches[0].clientX,h=Y.touches[0].clientY,y=performance.now(),m=!0,P=!1},j=Y=>e.sidebarState==="closed"&&Y>0||e.sidebarState==="closeSwiping"&&Y>0||e.sidebarState==="opened"&&Y<0||e.sidebarState==="openSwiping"&&Y<0,ne=()=>{if(o()){if(o().style.setProperty("--transition-timing","0s"),!o().open&&e.sidebarState==="closed")try{o().showModal(),o().offsetWidth}catch(Y){console.error("Error opening dialog:",Y);return}e.onSwipe();try{const Y=window.getComputedStyle(o()),ae=Y.transform||Y.webkitTransform||"";if(b=o().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?T=-b:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(T=0),ae&&ae!=="none")try{T=new DOMMatrix(ae).m41}catch{console.warn("Could not parse transform matrix, using default position")}P=!0}catch(Y){console.error("Error during swipe initialization:",Y),k()}}},de=()=>{if(C=null,!N||!m||!o()||a(s))return;const{x:Y,y:ae}=N;N=null;const re=Y-_,G=ae-h,te=Math.abs(re)>Math.abs(G),M=Math.abs(re)>i;if(!P)if(te&&M&&j(re))try{ne()}catch(pe){console.error("Error initializing swipe:",pe),k();return}else return;let O=T+re*v;const U=-b,le=-(b*.3);let ie=Math.max(U,Math.min(le,O));o().style.setProperty("--transition-timing","0s"),o().style.transform=`translate3d(${ie}px, 0, 0)`;const fe=Math.min(1,Math.max(0,(ie-U)/(le-U)));n.swipingRatio=(-1+Math.abs(ie/b))/7*10,S=(ie-T)/b*100,o().style.setProperty("--backdrop-bg",`${fe*.25}`)},R=Y=>{if(!m)return;const ae=Y.touches[0].clientX,re=Y.touches[0].clientY;N={x:ae,y:re},C===null&&(C=requestAnimationFrame(de)),P&&Math.abs(ae-_)>Math.abs(re-h)&&Y.preventDefault()},ee=Y=>{const ae=Math.abs(Y);if(ae>=u)return c;if(ae>=f){const re=(ae-f)/(u-f);return l-re*(l-c)}else return l},$=(Y,ae)=>{if(Math.abs(Y)>=u)return d*.5;const G=Math.abs(S)/100;return ae?d*Math.max(.5,1-G):d*Math.max(.5,G)},Z=Y=>{if(C!==null&&(cancelAnimationFrame(C),C=null),N=null,!m||!o()){k();return}if(!P){k();return}let ae=0;if(Y?.changedTouches?.[0]){const O=Y.changedTouches[0].clientX,le=performance.now()-y;le>0&&(ae=(O-_)/le)}const re=ee(ae);let G=null;e.sidebarState==="closeSwiping"?G=Math.abs(S)>re||ae>f?"open":"close":e.sidebarState==="openSwiping"&&(G=Math.abs(S)>re||ae<-f?"close":"open");const te=e.sidebarState==="closeSwiping"&&G==="open"||e.sidebarState==="openSwiping"&&G==="close",M=$(ae,te);n.duration=M-.02,o().style.setProperty("--transition-timing",`${M}s`),o().offsetWidth,o().style.transform="",G==="open"?e.onOpen():G==="close"&&e.onClose(),o()?.style.removeProperty("--backdrop-bg"),k()};De(()=>(document.addEventListener("touchstart",x,{passive:!0}),document.addEventListener("touchmove",R,{passive:!1}),document.addEventListener("touchend",Z,{passive:!0}),document.addEventListener("touchcancel",Z,{passive:!0}),()=>{document.removeEventListener("touchstart",x),document.removeEventListener("touchmove",R),document.removeEventListener("touchend",Z),document.removeEventListener("touchcancel",Z),C!==null&&cancelAnimationFrame(C)})),se()}var Tu=q('<dialog><div class="dialogInner svelte-1nov8pn"><!></div></dialog> <!> <!>',1);function xu(t,e){oe(e,!0);const{getDialogPages:n}=yt(),{getSidebarState:r,handleComputeState:o}=$r();let s=350;const i=cn(),{isScrolling:l}=Ra();let c=W(null),u=W(null),f=I(r);Oe(()=>{n().length>0&&o({type:"close"})});const d=()=>{e.blocked||o({type:"close"})},v=()=>{e.blocked||o({type:"open"})},_=()=>{o({type:"opened"}),i.swipingRatio=-1,i.duration=.2},h=()=>{o({type:"closed"})},y=()=>{o({type:"swipe"})},m=R=>{R.preventDefault(),d()};De(()=>(a(c)?.addEventListener("close",h),a(c)?.addEventListener("cancel",m),()=>{a(c)?.removeEventListener("close",h),a(c)?.removeEventListener("cancel",m)}));const P=()=>{a(c)?.style.removeProperty("--transition-timing"),a(c)?.style.removeProperty("transform"),a(c)?.style.removeProperty("--backdrop-bg")},T=I(l);Oe(()=>{if(a(f),!!a(c))switch(a(f).type==="openSwiping"||a(f).type==="closeSwiping"?i.isSwiping=!0:i.isSwiping=!1,a(f).type){case"closeSwiping":{const R=setTimeout(()=>{d()},3e3);return()=>{clearTimeout(R)}}case"openSwiping":{const R=setTimeout(()=>{v()},3e3);return()=>{clearTimeout(R)}}case"opening":{a(c).open||a(c).showModal(),a(c).getBoundingClientRect();const R=setTimeout(()=>{P()},s+1),ee=()=>{clearTimeout(R),P()};return a(c)?.addEventListener("transitionend",ee,{once:!0}),_(),()=>{clearTimeout(R),a(c)?.removeEventListener("transitionend",ee)}}case"closing":{i.swipingRatio=0,i.duration=.2;const R=setTimeout(()=>{a(f).type==="closing"&&h()},s+1),ee=()=>{clearTimeout(R),h()};return a(c)?.addEventListener("transitionend",ee,{once:!0}),()=>{clearTimeout(R),a(c)?.removeEventListener("transitionend",ee)}}case"closed":a(c)?.close(),P();break;case"opened":P();break}}),De(()=>{a(f).type==="opened"&&o({type:"open"})});var b=Tu(),S=B(b),k=E(S),C=E(k);{var N=R=>{var ee=J(),$=B(ee);Se($,()=>e.children),p(R,ee)};V(C,R=>{a(f).type!=="closed"&&R(N)})}ut(k,R=>g(u,R),()=>a(u)),ut(S,R=>g(c,R),()=>a(c));var x=F(S,2);{var j=R=>{Ha(R,{get dialog(){return a(c)},get dialogInner(){return a(u)},onClose:d})};V(x,R=>{a(f).type==="opened"&&!e.blocked&&R(j)})}var ne=F(x,2);{var de=R=>{Pu(R,{onClose:d,onOpen:v,onSwipe:y,get sidebarState(){return a(f).type},get dialog(){return a(c)}})};V(ne,R=>{(!a(T)&&a(f).type==="closed"||a(f).type==="opened"||a(f).type==="openSwiping"||a(f).type==="closeSwiping")&&!e.blocked&&R(de)})}_e(()=>ke(S,1,Ee([{open:a(f).type==="opened",isAnimationOn:i.working&&(!i.isSwiping||!e.blocked)}]),"svelte-1nov8pn")),p(t,b),se()}var Au=(t,e,n)=>{t.preventDefault(),e(),n("/")},Nu=q('<a class="link svelte-ltt61h" href="/"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Mu=(t,e,n)=>{t.preventDefault(),e(),n(`/${K.Bin}`)},Lu=q('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Iu=q('<div class="sidebarFixed svelte-ltt61h"><div class="nav svelte-ltt61h"><!> <div class="menu svelte-ltt61h"><a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="searchWrapper svelte-ltt61h"><!></div> <!></div> <!>',1),Ou=q('<div class="sidebar svelte-ltt61h"><div class="sidebarFixed svelte-ltt61h"><!></div> <!></div>');function Bu(t,e){oe(e,!0);const{checkMobileSize:n}=un(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=$r(),{getAppLocation:i,replace:l}=Pt(),{getDialogPages:c,createDialogPageHref:u,createHandleClickDialogPage:f}=yt(),{getTagsSearch:d,setTagsSearch:v}=gs(),_=I(()=>i().pathname),{getSelectedTags:h,addTag:y,removeTag:m,clearTags:P}=ys();let T=I(h);const{checkNotesInBin:b,getGetNotes:S}=Nn(),k=I(S);let C=I(()=>a(_)==="/bin"?"bin":"notes");const N=M=>{y(M)},x=M=>{m(M)};let j=I(()=>a(T).size===0&&!a(T).has("inbox")&&(a(k)()||[]).some(M=>(a(C)==="notes"&&M?.data&&!M.data.deletedAt||a(C)==="bin"&&M?.data&&M.data.deletedAt)&&M?.data?.tags.length===0&&(!M?.data?.draft||M?.data?.draft?.tags.length===0))),ne=I(()=>!a(T).has("drafts")&&(a(k)()||[]).filter(M=>a(T).size===0||M.data?.tags.every(O=>a(T).has(O))||M.data?.draft?.tags.every(O=>a(T).has(O))).some(M=>(a(C)==="notes"&&M?.data&&!M.data.deletedAt||a(C)==="bin"&&M?.data&&M.data.deletedAt)&&M.data?.draft)),de=I(()=>Du(a(T),a(k)()||[],M=>!(M?.data&&M.data.deletedAt&&a(C)==="notes"||M?.data&&!M.data.deletedAt&&a(C)==="bin"))),R=I(()=>[...a(j)?["inbox"]:[],...a(ne)&&(!a(T).has("inbox")||a(j))?["drafts"]:[],...a(de)].filter(M=>d()===""||M.toLowerCase().indexOf(d().toLowerCase())!==-1)),ee=I(n);const{checkExistedDialog:$}=dn();let Z=I(()=>c().length>0||$());const Y=()=>{if(a(ee)){if(a(Z))return;o().type==="opened"?r():o().type==="closed"&&s()}};De(()=>gr({key:"b",meta:!0,action:Y})),De(()=>gr({key:"b",ctrl:!0,action:Y}));var ae=J(),re=B(ae);{var G=M=>{xu(M,{get blocked(){return a(Z)},children:(O,U)=>{var le=Iu(),ie=B(le),fe=E(ie),pe=E(fe);Rs(pe,{});var he=F(pe,2),Ce=E(he),L=I(()=>f(K.Settings));Ce.__click=function(...Le){a(L)?.apply(this,Le)};var z=E(Ce);we(z,()=>({"--size":"24px"})),ye(z.lastChild,{name:"settings"});var w=F(z,2);Je(w,{children:(Le,Ge)=>{var et=Be("Settings");p(Le,et)}});var D=F(Ce,2),H=I(()=>f(K.Sync));D.__click=function(...Le){a(H)?.apply(this,Le)};var X=E(D);we(X,()=>({"--size":"24px"})),ye(X.lastChild,{name:"sync"});var Q=F(X,2);Je(Q,{children:(Le,Ge)=>{var et=Be("Sync");p(Le,et)}});var ge=F(D,2);{var ce=Le=>{var Ge=Nu();Ge.__click=[Au,r,l];var et=E(Ge);we(et,()=>({"--size":"24px"})),ye(et.lastChild,{name:"note"});var fn=F(et,2);Je(fn,{children:(ot,Tt)=>{var Zt=Be("Notes");p(ot,Zt)}}),p(Le,Ge)},Me=Le=>{var Ge=J(),et=B(Ge);{var fn=ot=>{var Tt=Lu();Tt.__click=[Mu,r,l];var Zt=E(Tt);we(Zt,()=>({"--size":"24px"})),ye(Zt.lastChild,{name:"bin"});var na=F(Zt,2);Je(na,{children:(ra,vn)=>{var Mn=Be("Bin");p(ra,Mn)}}),_e(()=>ze(Tt,"href",`/${K.Bin}`)),p(ot,Tt)};V(et,ot=>{b()&&ot(fn)},!0)}p(Le,Ge)};V(ge,Le=>{a(_)===`/${K.Bin}`?Le(ce):Le(Me,!1)})}var Te=F(fe,2),Fe=E(Te);{let Le=I(d);Ca(Fe,{placeholder:"Search tag",get value(){return a(Le)},onChange:Ge=>{v(Ge)}})}var Ke=F(Te,2);vo(Ke,{get clearTags(){return P},get mode(){return a(C)},get selectedTags(){return a(T)},handleSelectedTagClick:x});var Ye=F(ie,2);fo(Ye,{get mode(){return a(C)},get tags(){return a(R)},handleTagClick:N,mobile:!0}),_e((Le,Ge)=>{ze(Ce,"href",Le),ze(D,"href",Ge)},[()=>u(K.Settings),()=>u(K.Sync)]),p(O,le)},$$slots:{default:!0}})},te=M=>{var O=Ou(),U=E(O),le=E(U);vo(le,{get clearTags(){return P},get mode(){return a(C)},get selectedTags(){return a(T)},handleSelectedTagClick:x});var ie=F(U,2);fo(ie,{get mode(){return a(C)},get tags(){return a(R)},handleTagClick:N}),p(M,O)};V(re,M=>{a(ee)?M(G):M(te,!1)})}p(t,ae),se()}at(["click"]);const Ru=(t,e)=>{g(e,!0)};var zu=(t,e)=>{t.preventDefault(),e("/")},Fu=q('<a class="link svelte-13t3afu" href="/"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),Hu=(t,e)=>{t.preventDefault(),e(`/${K.Bin}`)},ju=q('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),Vu=q('<button class="emptyBinButton svelte-13t3afu" type="button">Empty bin</button>'),Uu=q('<div class="header svelte-13t3afu"><div class="top svelte-13t3afu"><div class="menu svelte-13t3afu"><a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="mobile svelte-13t3afu"><!></div> <!></div> <div class="bottom svelte-13t3afu"><div><div class="sidebarSearchWrapper"><!></div></div> <!> <div class="right svelte-13t3afu"><div class="filter svelte-13t3afu"><div class="feedSearchWrapper svelte-13t3afu"><!></div> <!></div></div></div></div> <!>',1);function Wu(t,e){oe(e,!0);const{getFeedSearch:n,setFeedSearch:r}=fs(),{getTagsSearch:o,setTagsSearch:s}=gs(),{getScrollContainer:i}=za();let l=I(i);const{emptyBin:c,checkNotesInBin:u}=Nn(),{getAppLocation:f,replace:d}=Pt(),{createDialogPageHref:v,createHandleClickDialogPage:_,getDialogPages:h}=yt(),{checkExistedDialog:y}=dn();let m=W(null);const P=I(u),T=I(()=>f().pathname);let b=W(!1);const S=()=>{a(l)&&a(l).scrollTo({top:0,behavior:"smooth"})},k=()=>{h().length===0&&!y()&&a(m)?.focus()};De(()=>gr({key:"k",meta:!0,action:k})),De(()=>gr({key:"k",ctrl:!0,action:k}));var C=Uu(),N=B(C),x=E(N),j=E(x),ne=E(j),de=I(()=>_(K.Settings));ne.__click=function(...Q){a(de)?.apply(this,Q)};var R=E(ne);we(R,()=>({"--rotate":"30deg","--size":"20px"})),ye(R.lastChild,{name:"settings"});var ee=F(ne,2),$=I(()=>_(K.Sync));ee.__click=function(...Q){a($)?.apply(this,Q)};var Z=E(ee);we(Z,()=>({"--size":"20px"})),ye(Z.lastChild,{name:"sync"});var Y=F(ee,2);{var ae=Q=>{var ge=Fu();ge.__click=[zu,d];var ce=E(ge);we(ce,()=>({"--size":"18px"})),ye(ce.lastChild,{name:"note"}),p(Q,ge)},re=Q=>{var ge=J(),ce=B(ge);{var Me=Te=>{var Fe=ju();Fe.__click=[Hu,d];var Ke=E(Fe);we(Ke,()=>({"--size":"21px"})),ye(Ke.lastChild,{name:"bin"}),_e(()=>ze(Fe,"href",`/${K.Bin}`)),p(Te,Fe)};V(ce,Te=>{a(P)&&Te(Me)},!0)}p(Q,ge)};V(Y,Q=>{a(T)===`/${K.Bin}`?Q(ae):Q(re,!1)})}var G=F(j,2),te=E(G);Rs(te,{});var M=F(G,2);{var O=Q=>{var ge=J(),ce=B(ge);{var Me=Te=>{var Fe=Vu();Fe.__click=[Ru,b],p(Te,Fe)};V(ce,Te=>{a(P)&&Te(Me)})}p(Q,ge)},U=Q=>{iu(Q,{})};V(M,Q=>{a(T)===`/${K.Bin}`?Q(O):Q(U,!1)})}var le=F(x,2),ie=E(le);ke(ie,1,Ee(["left"]),"svelte-13t3afu");var fe=E(ie),pe=E(fe);{let Q=I(o);Ca(pe,{placeholder:"Search tag",get value(){return a(Q)},onChange:ge=>s(ge)})}var he=F(ie,2);Bu(he,{});var Ce=F(he,2),L=E(Ce),z=E(L),w=E(z);{let Q=I(n);Ca(w,{onFocus:S,placeholder:"Search",get value(){return a(Q)},onChange:ge=>{r(ge)},get ref(){return a(m)},set ref(ge){g(m,ge,!0)}})}var D=F(z,2);nu(D,{});var H=F(N,2);{var X=Q=>{Va(Q,{title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:()=>{c(),g(b,!1),d("/")},onCancel:()=>{g(b,!1)}})};V(H,Q=>{a(b)&&Q(X)})}_e((Q,ge)=>{ze(ne,"href",Q),ze(ee,"href",ge)},[()=>v(K.Settings),()=>v(K.Sync)]),p(t,C),se()}at(["click"]);function qu(t,e){oe(e,!0);const{getIsKeyboardVisible:n}=Bs();let r=ve(e,"dialog",7);const o=I(n),s=cn();let i=null;const l=()=>{e.dialogState==="swiping"&&e.onClose()};Oe(()=>(e.dialogState==="swiping"&&(i=setTimeout(l,3e3)),()=>{i&&(clearTimeout(i),i=null)}));let c=null,u=null;const f=3,d=50,v=5,_=.6,h=.3,y=.35,m=.95;let P=0,T=0,b=0,S=!1,k=!1,C=0,N=0,x=0;const j=()=>{P=0,T=0,S=!1,k=!1,C=0,N=0,x=0,b=0,c=null,u!==null&&(cancelAnimationFrame(u),u=null),i&&(clearTimeout(i),i=null)},ne=G=>{if(!r()){console.warn("Touch start: No dialog element");return}if(e.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${e.dialogState}`);return}P=G.touches[0].clientX,T=G.touches[0].clientY,b=performance.now(),S=!0,k=!1},de=G=>e.dialogState==="opened"&&G>0||e.dialogState==="swiping"&&G>0,R=()=>{if(r()){r().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const G=window.getComputedStyle(r()),te=G.transform||G.webkitTransform||"";if(N=r().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(C=0),te&&te!=="none")try{C=new DOMMatrix(te).m41}catch{console.warn("Could not parse transform matrix, using default position")}k=!0}catch(G){console.error("Error during swipe initialization:",G),j()}}},ee=()=>{if(!r())return;const te=Math.abs(C+x*N/100)/N;r().style.setProperty("--backdrop-bg",`${.1*(1-te)}`)},$=()=>{if(u=null,!c||!S||!r()||a(o)){j();return}const G=[...c.touches].reduce((he,Ce)=>he+Ce.clientX,0)/c.touches.length,te=[...c.touches].reduce((he,Ce)=>he+Ce.clientY,0)/c.touches.length,M=G-P,O=te-T,U=Math.abs(M)>Math.abs(O),le=Math.abs(M)>f;if(!k)if(U&&le&&de(M))try{R()}catch(he){console.error("Error initializing swipe:",he),j();return}else return;let ie=C+M*m;ie=Math.max(0,Math.min(N,ie)),!(ie<0)&&(r().style.setProperty("--transition-timing","0s"),r().style.transform=`translate3d(${ie}px, 0, 0)`,s.swipingRatio=Math.abs(1-ie/N),x=(ie-C)/N*100,e.dialogState==="swiping"&&(i&&clearTimeout(i),i=setTimeout(l,3e3)),ee())},Z=G=>{if(!S)return;c=G,u===null&&(u=requestAnimationFrame($));const te=G.touches[0].clientX-P,M=G.touches[0].clientY-T,O=Math.abs(te)>Math.abs(M);k&&O&&G.preventDefault()},Y=G=>{const te=Math.abs(G);if(te>=_)return v;if(te>=h){const M=(te-h)/(_-h);return d-M*(d-v)}else return d},ae=(G,te)=>{if(Math.abs(G)>=_)return y*.5;const O=Math.abs(x)/100;return te?y*Math.max(.5,1-O):y*Math.max(.5,O)},re=G=>{if(u!==null&&(cancelAnimationFrame(u),u=null),!S||!r()){j();return}if(!k){j();return}let te=0;if(G?.changedTouches?.[0]){const ie=G.changedTouches[0].clientX,pe=performance.now()-b;pe>0&&(te=(ie-P)/pe)}const M=Y(te);let O=null;e.dialogState==="swiping"&&(O=Math.abs(x)>M||te<-h?"close":"open");const U=e.dialogState==="swiping"&&O==="close",le=ae(te,U);s.duration=le-.02,r().style.setProperty("--transition-timing",`${le}s`),r().offsetWidth,r().style.transform="",O==="open"?e.onOpen():O==="close"&&e.onClose(),r()?.style.removeProperty("--backdrop-bg"),j()};De(()=>(r().addEventListener("touchstart",ne,{passive:!0}),r().addEventListener("touchmove",Z,{passive:!1}),r().addEventListener("touchend",re,{passive:!0}),r().addEventListener("touchcancel",re,{passive:!0}),()=>{r().removeEventListener("touchstart",ne),r().removeEventListener("touchmove",Z),r().removeEventListener("touchend",re),r().removeEventListener("touchcancel",re),u!==null&&cancelAnimationFrame(u)})),se()}var Ku=(t,e)=>{e.onStartClose()},Yu=q('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Gu=q('<dialog><div class="dialogInner svelte-vr2o0t"><div class="header svelte-vr2o0t"><div class="navigation__wrapper svelte-vr2o0t"><!></div></div> <!></div></dialog> <!>',1);function Xu(t,e){oe(e,!0);let n=350;const{isScrolling:r,enable:o}=Ra();let s=W(null),i=W(null);const l=cn(),c=C=>{C.preventDefault(),e.onStartClose()};De(()=>(a(s)?.addEventListener("close",e.onClosed),a(s)?.addEventListener("cancel",c),()=>{a(s)?.removeEventListener("close",e.onClosed),a(s)?.removeEventListener("cancel",c)}));const u=()=>{a(s)?.style.removeProperty("--transition-timing"),a(s)?.style.removeProperty("transform"),a(s)?.style.removeProperty("--backdrop-bg")},f=()=>{o()},d=I(r);Oe(()=>{if(e.dialogState,!!a(s))switch(e.dialogState){case"opening":{a(s).open||a(s).showModal(),a(s).getBoundingClientRect();const C=setTimeout(()=>{u()},n+1),N=()=>{clearTimeout(C),u()};return a(s)?.addEventListener("transitionend",N,{once:!0}),e.onOpened(),()=>{clearTimeout(C),a(s)?.removeEventListener("transitionend",N)}}case"closing":{const C=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),N=()=>{clearTimeout(C),e.onClosed()};return a(s)?.addEventListener("transitionend",N,{once:!0}),()=>{clearTimeout(C),a(s)?.removeEventListener("transitionend",N)}}case"opened":u()}});var v=Gu(),_=B(v),h=E(_),y=E(h),m=E(y),P=E(m);{var T=C=>{var N=Yu();ke(N,1,Ee(["navigateButton","buttonBack"]),"svelte-vr2o0t"),N.__click=[Ku,e];var x=E(N);we(x,()=>({"--size":"32px"})),ye(x.lastChild,{name:"back"});var j=F(x,2);Je(j,{children:(ne,de)=>{var R=Be("back");p(ne,R)}}),p(C,N)};V(P,C=>{e.blocked||C(T)})}var b=F(y,2);Se(b,()=>e.children),ut(h,C=>g(i,C),()=>a(i)),ut(_,C=>g(s,C),()=>a(s));var S=F(_,2);{var k=C=>{qu(C,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return a(s)}})};V(S,C=>{(!a(d)&&e.dialogState==="opened"||e.dialogState==="swiping")&&!e.blocked&&C(k)})}_e(()=>ke(_,1,Ee([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:l.working&&(!l.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-vr2o0t")),Ia("scroll",h,f),p(t,v),se()}at(["click"]);const ho=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function Zu(t,e){oe(e,!0);let n=ve(e,"hiddenDialog",3,!1),r=ve(e,"onClose",3,()=>{});const o=cn();let s=W(Qe(ho({type:"closed"})));const i=m=>{g(s,ho(a(s),m),!0)},l=()=>{e.onStartClose&&(e.onStartClose(),i({type:"close"}))},c=()=>{i({type:"open"})},u=()=>{i({type:"opened"}),o.swipingRatio=1,o.duration=.2},f=()=>{r()(),i({type:"closed"}),o.swipingRatio=1,o.duration=.2},d=()=>{i({type:"swipe"})};Oe(()=>{a(s).type==="swiping"?o.isSwiping=!0:o.isSwiping=!1,a(s).type==="closed"&&e.shownDialog?c():a(s).type==="opened"&&!e.shownDialog&&l()});var v={handleComputeState:i},_=J(),h=B(_);{var y=m=>{{let P=I(()=>!e.onStartClose);Xu(m,{onSwipe:d,onOpened:u,onClosed:f,onStartClose:l,onStartOpen:c,get dialogState(){return a(s).type},get hidden(){return n()},get blocked(){return a(P)},children:(T,b)=>{var S=J(),k=B(S);Se(k,()=>e.children),p(T,S)},$$slots:{default:!0}})}};V(h,m=>{a(s).type!=="closed"&&m(y)})}return p(t,_),se(v)}const Ju=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const o=i=>{i.preventDefault(),n()},s=()=>{r?.()};De(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),De(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Qu=(t,e)=>{e.onStartBack()},$u=q('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),ed=(t,e)=>{e.onStartClose()},td=q('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),nd=q('<dialog><div class="dialogInner svelte-rt409n"><div class="header svelte-rt409n"><div class="navigation__wrapper svelte-rt409n"><div><!></div> <div><!></div></div></div> <!></div></dialog> <!>',1);function rd(t,e){oe(e,!0);let n=ve(e,"blockedDialog",3,!1),r=ve(e,"hiddenDialog",3,!1),o=ve(e,"isDesktopAnimationOff",3,!1),s=W(null),i=W(null),l=W(!1);Ju({getDialog:()=>a(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=cn();Oe(()=>{e.stateDialog==="closing"&&(c.working?a(s)?.addEventListener("transitionend",()=>{a(s)?.close()},{once:!0}):a(s)?.close())});const{getDialogPageHeight:u}=Fa(),f=I(u);De(()=>{setTimeout(()=>{g(l,!0)},50)});var d=nd(),v=B(d),_=E(v),h=E(_),y=E(h),m=E(y),P=E(m);{var T=x=>{var j=$u();ke(j,1,Ee(["navigateButton","buttonBack"]),"svelte-rt409n"),j.__click=[Qu,e];var ne=E(j);we(ne,()=>({"--size":"28px"})),ye(ne.lastChild,{name:"back"});var de=F(ne,2);Je(de,{children:(R,ee)=>{var $=Be("back");p(R,$)}}),p(x,j)};V(P,x=>{(!(n()||r())||n())&&e.onStartBack&&x(T)})}var b=F(m,2),S=E(b);{var k=x=>{var j=td();ke(j,1,Ee(["navigateButton","buttonClose"]),"svelte-rt409n"),j.__click=[ed,e];var ne=E(j);we(ne,()=>({"--size":"28px"})),ye(ne.lastChild,{name:"close"});var de=F(ne,2);Je(de,{children:(R,ee)=>{var $=Be("close");p(R,$)}}),p(x,j)};V(S,x=>{n()||r()||x(k)})}var C=F(h,2);Se(C,()=>e.children),ut(_,x=>g(i,x),()=>a(i)),ut(v,x=>g(s,x),()=>a(s));var N=F(v,2);Ha(N,{get dialog(){return a(s)},get dialogInner(){return a(i)},get onClose(){return e.onStartClose}}),_e(()=>{Pn(v,`height: ${a(f)+74}px`),ke(v,1,Ee([{open:e.stateDialog==="open",isHeightAnimationOn:a(l),isAnimationOn:c.working,isDesktopAnimationOff:o(),hiddenDialog:r()}]),"svelte-rt409n")}),p(t,d),se()}at(["click"]);const ad=({onStartClose:t,onClose:e})=>{let n=W("close");return{get state(){return a(n)},set state(i){g(n,i,!0)},handleStartClose:(i=!1)=>{i||(g(n,"closing"),t?.())},handleOpen:()=>{g(n,"open")},handleClose:()=>{g(n,"close"),e?.()}}};function od(t,e){oe(e,!0);let n=ve(e,"blockedDialog",3,!1),r=ve(e,"hiddenDialog",3,!1),o=ve(e,"onStartClose",3,()=>{}),s=ve(e,"onClose",3,()=>{}),i=ad({onStartClose:o(),onClose:s()});Oe(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=d=>{d.key==="Escape"&&n()&&(d.preventDefault(),d.stopPropagation())};De(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=J(),u=B(c);{var f=d=>{rd(d,{get stateDialog(){return i.state},get blockedDialog(){return n()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(v,_)=>{var h=J(),y=B(h);Se(y,()=>e.children),p(v,h)},$$slots:{default:!0}})};V(u,d=>{i.state!=="close"&&d(f)})}p(t,c),se()}function sd(t,e){oe(e,!0);let n=ve(e,"blockedDialog",3,!1),r=ve(e,"hiddenDialog",3,!1),o=ve(e,"blockedBack",3,!1),s=ve(e,"onStartClose",3,()=>{}),i=ve(e,"onClose",3,()=>{});const l=I(()=>o()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=dn();De(()=>(c(),()=>{u()}));const{checkMobileSize:f}=un();var d=J(),v=B(d);{var _=y=>{Zu(y,{get shownDialog(){return e.shownDialog},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return a(l)},get onClose(){return i()}})},h=y=>{od(y,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return a(l)},get onStartClose(){return s()},get onClose(){return i()}})};V(v,y=>{f()?y(_):y(h,!1)})}p(t,d),se()}function go(t,e){oe(e,!0);const{clearDialogPages:n,popDialogPage:r}=yt(),{checkMobileSize:o}=un();let s=ve(e,"blocked",3,!1),i=ve(e,"isLastDialog",3,!1),l=ve(e,"onBack",3,()=>{}),c=ve(e,"onClosed",3,()=>{});const{checkBlockedDialog:u,checkClosableDialog:f}=dn(),d=I(()=>s()||u()),v=I(f),_=()=>{(!a(d)||a(d))&&e.shown&&(r(),l()())},h=()=>{((!a(d)||a(d)&&a(v))&&e.shown||!e.shown)&&n()},y=()=>{c()()};{let m=I(()=>a(d)&&e.shown||a(v)===!1),P=I(()=>a(d)||i()&&(a(v)===!1||!o()));sd(t,{get shownDialog(){return e.shown},get blockedDialog(){return a(m)},get hiddenDialog(){return e.hidden},get blockedBack(){return a(P)},onStartBack:_,onStartClose:h,onClose:y,children:(T,b)=>{var S=J(),k=B(S);Se(k,()=>e.children),p(T,S)},$$slots:{default:!0}})}se()}var id=q('<div class="svelte-1x9a4ve"><!></div>');function Re(t,e){oe(e,!0);const{setDialogPageHeight:n}=Fa();let r=W(null);De(()=>{a(r)&&(a(r).getBoundingClientRect(),a(r).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(a(r))return i.observe(a(r)),()=>{a(r)&&i.unobserve(a(r)),i.disconnect()}});var o=id(),s=E(o);Se(s,()=>e.children),ut(o,i=>g(r,i),()=>a(r)),p(t,o),se()}var ld=q('<div class="svelte-stjbkr"><p class="svelte-stjbkr">Page not found</p> <!></div>');function cd(t,e){oe(e,!1);const{replace:n}=Pt(),r=i=>{i.preventDefault(),n("/")};Qr();var o=ld(),s=F(E(o),2);rn(s,{element:"a",href:"/",onClick:r,children:(i,l)=>{var c=Be("close");p(i,c)},$$slots:{default:!0}}),p(t,o),se()}const ud="modulepreload",dd=function(t){return"/"+t},po={},He=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(n.map(u=>{if(u=dd(u),u in po)return;po[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":ud,f||(v.as="script"),v.crossOrigin="",v.href=u,l&&v.setAttribute("nonce",l),document.head.appendChild(v),f)return new Promise((_,h)=>{v.addEventListener("load",_),v.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var fd=q('<div class="svelte-10xfz1h"><p class="svelte-10xfz1h">Something went wrong. Please reload the page</p> <!></div>');function vd(t){var e=fd(),n=F(E(e),2);rn(n,{onClick:()=>location.reload(),children:(r,o)=>{var s=Be("Reload");p(r,s)},$$slots:{default:!0}}),p(t,e)}var hd=q('<div><!> <div class="loader svelte-m0sno1"></div></div>');function Fs(t,e){oe(e,!0);let n=W(!1);De(()=>{const s=setTimeout(()=>{g(n,!0)},200);return()=>{clearTimeout(s)}});var r=hd(),o=E(r);Se(o,()=>e.children??xe),_e(()=>ke(r,1,Ee(["block",{shown:a(n)}]),"svelte-m0sno1")),p(t,r),se()}var gd=q('<div class="svelte-1mu1b44"><!></div>');function pd(t,e){oe(e,!0);let n=W(!1);const{getDialogPageHeight:r}=Fa(),o=I(r);De(()=>{const c=setTimeout(()=>{g(n,!0)},250);return()=>{clearTimeout(c)}});var s=gd(),i=E(s);{var l=c=>{Fs(c,{})};V(i,c=>{a(n)&&c(l)})}_e(()=>Pn(s,`min-height: ${a(o)??""}px;`)),p(t,s),se()}function je(t,e){oe(e,!0);const n={},r=Object.assign({"./Pages/About.svelte":()=>He(()=>import("./aCUiK-qwe.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>He(()=>import("./aXzWIdwG0.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>He(()=>import("./aBQFimOQi.js"),__vite__mapDeps([6,3,7])),"./Pages/AccountSetup.svelte":()=>He(()=>import("./aBzv5zeQY.js"),__vite__mapDeps([8,9])),"./Pages/Auth.svelte":()=>He(()=>import("./aCSRv7Nhe.js"),__vite__mapDeps([10,11])),"./Pages/ChangeTags.svelte":()=>He(()=>import("./aCCNMqjxJ.js"),[]),"./Pages/ClearStore.svelte":()=>He(()=>import("./aB_EW2-Sa.js"),__vite__mapDeps([12,13])),"./Pages/ConfirmAccessKey.svelte":()=>He(()=>import("./auh_wKMTF.js"),__vite__mapDeps([14,4,3,15,16,17,18])),"./Pages/EditNote.svelte":()=>He(()=>import("./aCUayy6_c.js"),__vite__mapDeps([19,20,21,16,17,22,23,24])),"./Pages/Exit.svelte":()=>He(()=>import("./a2fMAcyb8.js"),__vite__mapDeps([25,26])),"./Pages/ExportData.svelte":()=>He(()=>import("./aDDf4TLh_.js"),__vite__mapDeps([27,21,16,17,22,28,29,30])),"./Pages/ImportData.svelte":()=>He(()=>import("./aDKdt5BcS.js"),__vite__mapDeps([31,21,16,17,22,32])),"./Pages/Install.svelte":()=>He(()=>import("./aDXM_DuIU.js"),__vite__mapDeps([33,34])),"./Pages/InstallSuccess.svelte":()=>He(()=>import("./aJbsFIO5h.js"),__vite__mapDeps([35,36])),"./Pages/NewNote.svelte":()=>He(()=>import("./aCRqTPRxs.js"),__vite__mapDeps([37,20,21,16,17,22,23])),"./Pages/Settings.svelte":()=>He(()=>import("./a_-inrlHq.js"),__vite__mapDeps([38,28,29,39])),"./Pages/Signin.svelte":()=>He(()=>import("./aDZdVFwPC.js"),__vite__mapDeps([40,4,3,15,41])),"./Pages/Signup.svelte":()=>He(()=>import("./aCmpRm34B.js"),__vite__mapDeps([42,15,4,3,43])),"./Pages/Subscription.svelte":()=>He(()=>import("./aCY4p1mVL.js"),__vite__mapDeps([44,45])),"./Pages/Sync.svelte":()=>He(()=>import("./aDGQ0yuBu.js"),__vite__mapDeps([46,47]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(r[c]){const u=r[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var s=J(),i=B(s);Cl(i,()=>o(e.page),l=>{pd(l,{})},(l,c)=>{const u=I(()=>a(c).default);var f=J(),d=B(f);Dl(d,()=>a(u),(v,_)=>{_(v,{get params(){return e.params},get hidden(){return e.hidden}})}),p(l,f)},l=>{vd(l)}),p(t,s),se()}const _d=(t,e,n,r)=>{e.noteData.pinnedAt?(n(e.noteId,!1),kn("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),kn("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),g(r,!0)},md=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),kn("Link copied"),g(n,!0)};var wd=q('<li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),yd=(t,e,n)=>{g(e,!0),g(n,!0)},bd=q('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),Sd=(t,e,n)=>{g(e,!0),g(n,!0)},Cd=(t,e,n)=>{g(e,!0),g(n,!0)},Ed=q('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete from bin</button></li>',1),kd=q('<ul class="menu svelte-8ve3pe"><!> <li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),Dd=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Pd=q("<!> <!>",1);function Td(t,e){oe(e,!0);const n=(x,j=xe)=>{var ne=kd(),de=E(ne);{var R=te=>{var M=wd(),O=E(M);O.__click=[md,e,u];var U=E(O);we(U,()=>({"--size":"20px"})),ye(U.lastChild,{name:"copy"}),_e(()=>ke(O,1,Ee(["button",{buttonMenuDialog:j()}]),"svelte-8ve3pe")),p(te,M)};V(de,te=>{j()&&e.noteData.url&&te(R)})}var ee=F(de,2),$=E(ee);$.__click=[_d,e,s,u];var Z=E($);{let te=I(()=>e.noteData.pinnedAt?"pin-cancel":"pin");we(Z,()=>({"--size":"20px"})),ye(Z.lastChild,{get name(){return a(te)}})}var Y=F(Z),ae=F(ee,2);{var re=te=>{var M=bd(),O=E(M);O.__click=[yd,f,u];var U=E(O),le=E(U);we(le,()=>({"--size":"20px"})),ye(le.lastChild,{name:"bin"}),_e(()=>ke(O,1,Ee(["button",{buttonMenuDialog:j()}]),"svelte-8ve3pe")),p(te,M)},G=te=>{var M=Ed(),O=B(M),U=E(O);U.__click=[Sd,d,u];var le=E(U),ie=E(le);we(ie,()=>({"--size":"20px"})),ye(ie.lastChild,{name:"bin-cancel"});var fe=F(O,2),pe=E(fe);pe.__click=[Cd,v,u];var he=E(pe),Ce=E(he);we(Ce,()=>({"--size":"20px"})),ye(Ce.lastChild,{name:"bin"}),_e(()=>{ke(U,1,Ee(["button",{buttonMenuDialog:j()}]),"svelte-8ve3pe"),ke(pe,1,Ee(["button",{buttonMenuDialog:j()}]),"svelte-8ve3pe")}),p(te,M)};V(ae,te=>{l()==="notes"?te(re):te(G,!1)})}_e(()=>{ke($,1,Ee(["button",{buttonMenuDialog:j()}]),"svelte-8ve3pe"),qt(Y,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),p(x,ne)},{moveNoteToBin:r,deleteNote:o,pinNote:s,restoreNoteFromBin:i}=Nn();let l=ve(e,"mode",3,"notes"),c=ve(e,"shownMenu",15),u=W(!1),f=W(!1),d=W(!1),v=W(!1);const{checkMobileSize:_}=un();let h=I(_);const y=()=>{o(e.noteId),kn("Draft deleted")},m=async()=>{r(e.noteId),kn("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},P=()=>{i(e.noteId),kn("Note restored from bin",{onCancel:()=>{r(e.noteId)}})},T=()=>{a(f)?(g(f,!1),e.noteData.type==="draft"?y():m()):a(d)&&(g(d,!1),P()),c(!1),g(u,!1)};var b=Pd(),S=B(b);{var k=x=>{var j=J(),ne=B(j);{var de=ee=>{ta(ee,{get startClose(){return a(u)},onClosed:T,children:($,Z)=>{n($,()=>!0)},$$slots:{default:!0}})},R=ee=>{var $=Dd(),Z=B($);we(Z,()=>({"--bottom":"-100px","--right":"20px"})),ja(Z.lastChild,{get startClose(){return a(u)},get positionTop(){return e.showMenuUp},onClosed:T,children:(Y,ae)=>{n(Y,()=>!1)},$$slots:{default:!0}}),p(ee,$)};V(ne,ee=>{a(h)?ee(de):ee(R,!1)})}p(x,j)};V(S,x=>{c()&&x(k)})}var C=F(S,2);{var N=x=>{Va(x,{title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:()=>{o(e.noteId),g(v,!1)},onCancel:()=>{g(v,!1)}})};V(C,x=>{a(v)&&x(N)})}p(t,b),se()}at(["click"]);const xd=(t,e)=>{g(e,!0)},Ad=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),kn("Link copied"),g(n,!1)},Nd=(t,e)=>{g(e,!0)},Md=(t,e)=>{g(e,!1)},Ld=(t,e,n,r)=>{t.preventDefault(),e.noteData.type==="draft"?n(`${K.NewNote}`):n(`${K.EditNote}?id=${encodeURIComponent(e.noteId)}`),g(r,!1)};var Id=q('<div class="iconPlaceholder svelte-1jg44o9"></div>'),Od=q('<img loading="lazy" class="noteIcon" height="16" width="16" alt=""/>'),Bd=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Rd=q('<div class="noteIconWrapper svelte-1jg44o9"><!></div>'),zd=q('<button class="button svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Fd=(t,e)=>{g(e,!1)},Hd=q('<!> <a target="_blank" rel="noopener noreferrer" class="button openLink svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),jd=q('<li><!> <a class="noteLink svelte-1jg44o9" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function Vd(t,e){oe(e,!0);const{pushDialogPage:n}=yt(),{getFaviconEnabled:r}=Zl();let o=ve(e,"mode",3,"notes"),s=W(!1),i=W(!1),l=W(!1),c=I(r);const{checkMobileSize:u}=un(),f=x=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(x).host}.ico`}catch{return""}},d=e.noteData.url||e.noteData.draft?.url||"";var v=jd();v.__focusin=[Nd,i],v.__focusout=[Md,i];var _=E(v);{var h=x=>{var j=Rd(),ne=E(j);{var de=ee=>{var $=J(),Z=B($);{var Y=re=>{var G=Id();p(re,G)},ae=re=>{var G=Od();_e(te=>ze(G,"src",te),[()=>f(d)]),Ia("error",G,()=>{g(l,!0)}),p(re,G)};V(Z,re=>{a(l)?re(Y):re(ae,!1)})}p(ee,$)},R=ee=>{var $=Bd(),Z=B($);we(Z,()=>({"--size":"16px"})),ye(Z.lastChild,{name:"note"}),p(ee,$)};V(ne,ee=>{d?ee(de):ee(R,!1)})}p(x,j)};V(_,x=>{a(c)&&x(h)})}var y=F(_,2);y.__click=[Ld,e,n,i];var m=E(y),P=F(y,2),T=E(P);{var b=x=>{var j=Hd(),ne=B(j);{var de=Z=>{var Y=zd();Y.__click=[Ad,e,i];var ae=E(Y);we(ae,()=>({"--size":"20px"})),ye(ae.lastChild,{name:"copy"});var re=F(ae,2);Je(re,{children:(G,te)=>{var M=Be("copy link");p(G,M)}}),_e(()=>ze(Y,"tabindex",e.focusHidden?-1:0)),p(Z,Y)};V(ne,Z=>{u()||Z(de)})}var R=F(ne,2);R.__click=[Fd,i];var ee=E(R);we(ee,()=>({"--size":"18px"})),ye(ee.lastChild,{name:"open"});var $=F(ee,2);Je($,{children:(Z,Y)=>{var ae=Be();_e(()=>qt(ae,e.noteData.draft?.name||e.noteData.name||"unknown")),p(Z,ae)}}),_e(()=>{ze(R,"href",d),ze(R,"tabindex",e.focusHidden?-1:0)}),p(x,j)};V(T,x=>{d&&x(b)})}var S=F(T,2);S.__click=[xd,s],ke(S,1,Ee(["button","buttonMenu"]),"svelte-1jg44o9");var k=E(S);we(k,()=>({"--size":"18px","--rotate":"90deg"})),ye(k.lastChild,{name:"menu"});var C=F(k,2);Je(C,{children:(x,j)=>{var ne=Be("show menu");p(x,ne)}});var N=F(P,2);Td(N,{get mode(){return o()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return a(s)},set shownMenu(x){g(s,x,!0)}}),_e((x,j)=>{ke(v,1,x,"svelte-1jg44o9"),ze(y,"tabindex",e.focusHidden?-1:0),ze(y,"href",j),qt(m,e.noteData?.draft?.name||e.noteData?.name||"unknown"),ke(P,1,Ee(["noteMenuWrapper",{noteMenuWrapperActive:a(i)}]),"svelte-1jg44o9"),ze(S,"tabindex",e.focusHidden?-1:0)},[()=>Ee(["record",{pinned:!!e.noteData.pinnedAt,draft:!!e.noteData.draft}]),()=>`/?${St}=${encodeURIComponent(`${K.EditNote}?id=${encodeURIComponent(e.noteId)}`)}`]),p(t,v),se()}at(["focusin","focusout","click"]);var tr,Hs,js;class Ud{constructor(e){Pe(this,tr);dt(this,"data");dt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),Ie(this,tr,Hs).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,Ie(this,tr,js).call(this)),e}isEmpty(){return this.data.length===0}}tr=new WeakSet,Hs=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(n,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},js=function(){let e=0;const n=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<n&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<n&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class Wd{constructor(e,n){dt(this,"heap");dt(this,"done");dt(this,"cache",[]);this.heap=new Ud(n);for(const r of e)this.heap.insert(r);this.done=!1}get(e,n){const r=this.cache.slice(e,n);for(;r.length<n-e&&!this.heap.isEmpty();){const o=this.heap.extractMin();o!==void 0&&(this.cache.push(o),r.push(o))}return this.heap.isEmpty()&&(this.done=!0),r}}var qd=q('<p class="message">No notes in bin</p>'),Kd=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),Yd=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),Gd=q('<p class="message">No notes found</p> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div> <div>or</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),Xd=q('<div class="emptyStore svelte-106i4nx"><!></div>'),Zd=q("<span>Back to notes</span>"),Jd=q('<div class="emptyMessage svelte-106i4nx">No notes in bin</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),Qd=q('<div class="emptyMessage svelte-106i4nx">No notes found</div>'),$d=q('<div class="feed svelte-106i4nx"><ul class="svelte-106i4nx"></ul></div>'),ef=q('<div class="wrapperFeed svelte-106i4nx"><div class="wrapperContainer svelte-106i4nx"><!></div></div>');function tf(t,e){oe(e,!0);let n=ve(e,"getNotes",3,()=>[]),r=ve(e,"mode",3,"notes");const{getScrollContainer:o}=za(),{createHandleClickDialogPage:s,createDialogPageHref:i}=yt(),{getSelectedTags:l}=ys(),{getFeedOrder:c}=_s(),{replace:u}=Pt(),f=fs();let d=54,v=W(0),_=W(0),h=W(0),y=W(0),m=[],P=W(0),T=W(null),b=I(o),S=null,k=null;const C=I(l);Oe(()=>{a(C),a(de),a(b)?.scrollTo(0,0)});const{enable:N}=Ra(),x=()=>{N(),S||(S=requestAnimationFrame(()=>{const O=a(b)?.scrollTop||0;g(h,O,!0);const U=Math.ceil(a(v)/d);g(_,Math.floor(O/(d*U))*(d*U)),S=null}))},j=()=>{k||(k=requestAnimationFrame(()=>{g(v,window.innerHeight-180||0,!0);const O=a(b)?.scrollTop||0;g(h,O,!0);const U=Math.ceil(a(v)/d);g(_,Math.floor(O/(d*U))*(d*U)),k=null}))};De(()=>{j(),x()});const ne=()=>{x()};Oe(()=>(a(b)?.addEventListener("scroll",ne),window.addEventListener("resize",j),()=>{a(b)?.removeEventListener("scroll",ne),window.removeEventListener("resize",j)}));const de=I(c);Oe(()=>{const O=n()()||[],U=[],le=Array.from(a(C).values());for(let ie=O.length-1;ie>=0;ie--){if(!O[ie]||!O[ie].data)continue;const fe=O[ie];if(!(r()==="notes"&&fe?.data.deletedAt)&&!(r()==="bin"&&!fe?.data.deletedAt)&&!(f&&!(fe.data.name.toLowerCase().includes(f.getFeedSearch().toLowerCase())||fe.data.url.toLowerCase().includes(f.getFeedSearch().toLowerCase())||fe.data.text.toLowerCase().includes(f.getFeedSearch().toLowerCase())))){if(a(C).has("inbox")){if(fe.data.tags.length>0||fe.data.draft&&fe.data.draft.tags.length>0)continue}else if(a(C).has("drafts")){if(!fe.data.draft)continue}else if(a(C).size&&le.some(pe=>!fe.data?.tags.includes(pe))&&(!fe.data.draft||le.some(pe=>!fe.data?.draft?.tags.includes(pe))))continue;U.push(fe)}}g(y,U.length,!0),m=U,g(P,Date.now(),!0)}),Oe(()=>{a(de),a(P),g(T,new Wd(m,(O,U)=>{if(!O||!U||!O.data||!U.data)return 0;if(O.data.pinnedAt&&!U.data.pinnedAt)return-1;if(!O.data.pinnedAt&&U.data.pinnedAt)return 1;if(O.data.pinnedAt&&U.data.pinnedAt){if(O.data.pinnedAt<U.data.pinnedAt)return 1;if(O.data.pinnedAt>U.data.pinnedAt)return-1}switch(a(de)){case"newest":return O.data.updatedAt<U.data.updatedAt?1:-1;case"oldest":return O.data.updatedAt>U.data.updatedAt?1:-1;case"AtoZ":return O.data.name.localeCompare(U.data.name);case"ZtoA":return U.data.name.localeCompare(O.data.name);default:return 0}}),!0)});const R=I(()=>a(y)*d);let $=I(()=>{a(P);const O=Math.ceil(a(v)/d);let U=Math.floor(a(_)/d);return U=U-Math.min(U,O),a(T)?.get(U,U+O*3)||[]}),Z=I(()=>d*Math.ceil(a(v)/d));const Y=I(()=>a(_)-Math.min(a(_),a(Z)));var ae=ef(),re=E(ae),G=E(re);{var te=O=>{Fs(O,{})},M=O=>{var U=J(),le=B(U);{var ie=pe=>{var he=Xd(),Ce=E(he);{var L=w=>{var D=qd();p(w,D)},z=w=>{var D=Gd(),H=F(B(D),2),X=E(H);{let ce=I(()=>i(K.NewNote)),Me=I(()=>s(K.NewNote));rn(X,{element:"a",get href(){return a(ce)},get onClick(){return a(Me)},children:(Te,Fe)=>{var Ke=Kd(),Ye=B(Ke);we(Ye,()=>({"--size":"18px","--color":"#b0b0b0"})),ye(Ye.lastChild,{name:"plus"}),p(Te,Ke)},$$slots:{default:!0}})}var Q=F(H,4),ge=E(Q);{let ce=I(()=>i(K.ImportData)),Me=I(()=>s(K.ImportData));rn(ge,{element:"a",get href(){return a(ce)},get onClick(){return a(Me)},children:(Te,Fe)=>{var Ke=Yd(),Ye=B(Ke);we(Ye,()=>({"--size":"18px","--color":"#b0b0b0"})),ye(Ye.lastChild,{name:"import"}),p(Te,Ke)},$$slots:{default:!0}})}p(w,D)};V(Ce,w=>{r()==="bin"?w(L):w(z,!1)})}p(pe,he)},fe=pe=>{var he=J(),Ce=B(he);{var L=w=>{var D=Jd(),H=F(B(D),2),X=E(H);rn(X,{element:"a",href:"/",onClick:Q=>{Q.preventDefault(),u("/")},children:(Q,ge)=>{var ce=Zd();p(Q,ce)},$$slots:{default:!0}}),p(w,D)},z=w=>{var D=J(),H=B(D);{var X=ge=>{var ce=Qd();p(ge,ce)},Q=ge=>{var ce=$d(),Me=E(ce);Jr(Me,23,()=>a($),Te=>Te.data,(Te,Fe,Ke)=>{var Ye=J(),Le=B(Ye);{var Ge=et=>{{let fn=I(()=>a(Ke)*d<a(h)-a(Y)-d/2||a(Ke)*d>a(h)-a(Y)+Math.floor(a(v)/d)*d),ot=I(()=>(a(Ke)+3)*d<a(h)-a(Y)-d/2||(a(Ke)+3)*d>a(h)-a(Y)+Math.floor(a(v)/d)*d);Vd(et,{get mode(){return r()},get focusHidden(){return a(fn)},get showMenuUp(){return a(ot)},get noteId(){return a(Fe).id},get noteData(){return a(Fe).data}})}};V(Le,et=>{a(Fe).data&&et(Ge)})}p(Te,Ye)}),_e(Te=>{Pn(ce,`min-height: ${Te??""}px`),Pn(Me,`transform: translateY(${a(Y)??""}px);`)},[()=>Math.max((a(R)>a(v),a(R)),0)]),p(ge,ce)};V(H,ge=>{a($).length===0?ge(X):ge(Q,!1)},!0)}p(w,D)};V(Ce,w=>{r()==="bin"&&e.countNotesInBin()===0?w(L):w(z,!1)},!0)}p(pe,he)};V(le,pe=>{(n()()||[]).length===0||r()==="notes"&&(n()()||[]).length-e.countNotesInBin()===0?pe(ie):pe(fe,!1)},!0)}p(O,U)};V(G,O=>{e.readyNotes?O(M,!1):O(te)})}p(t,ae),se()}var nf=q('<div class="fakeSidebar svelte-k57gez"></div> <div class="content svelte-k57gez"><!></div>',1);function rf(t,e){oe(e,!0);const{getAppLocation:n}=Pt(),{getGetNotes:r,isInitedNotes:o,countNotesInBin:s}=Nn(),i=I(o),l=I(r),c=I(()=>n().pathname);var u=nf(),f=F(B(u),2),d=E(f);{let v=I(()=>a(c)==="/bin"?"bin":"notes");tf(d,{get mode(){return a(v)},get getNotes(){return a(l)},get countNotesInBin(){return s},get readyNotes(){return a(i)}})}p(t,u),se()}var af=q('<h1 class="svelte-1ky72l5"><!></h1>');function of(t,e){var n=af(),r=E(n);Se(r,()=>e.children),p(t,n)}const sf=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var lf=q('<div class="block svelte-1hz8bbk"><!> <p class="message svelte-1hz8bbk">Enjoy using the app!</p> <div class="container svelte-1hz8bbk"><!></div></div>');function cf(t,e){oe(e,!1);const{pushDialogPage:n}=yt(),r=()=>{sf()?n(K.AccountSetup):n(K.Install)};Qr();var o=lf(),s=E(o);of(s,{children:(c,u)=>{var f=Be("Welcome");p(c,f)}});var i=F(s,4),l=E(i);rn(l,{onClick:r,fullWidth:!0,children:(c,u)=>{var f=Be("Start");p(c,f)},$$slots:{default:!0}}),p(t,o),se()}const _o=(t,e=xe,n=xe,r)=>{let o=Kr(()=>ui(r?.(),!1));var s=J(),i=B(s);{var l=u=>{Re(u,{children:(f,d)=>{je(f,{get hidden(){return a(o)},get page(){return K.Settings}})},$$slots:{default:!0}})},c=u=>{var f=J(),d=B(f);{var v=h=>{Re(h,{children:(y,m)=>{je(y,{get hidden(){return a(o)},get page(){return K.NewNote}})},$$slots:{default:!0}})},_=h=>{var y=J(),m=B(y);{var P=b=>{Re(b,{children:(S,k)=>{je(S,{get params(){return n()},get hidden(){return a(o)},get page(){return K.EditNote}})},$$slots:{default:!0}})},T=b=>{var S=J(),k=B(S);{var C=x=>{Re(x,{children:(j,ne)=>{je(j,{get hidden(){return a(o)},get page(){return K.ImportData}})},$$slots:{default:!0}})},N=x=>{var j=J(),ne=B(j);{var de=ee=>{Re(ee,{children:($,Z)=>{je($,{get hidden(){return a(o)},get page(){return K.ExportData}})},$$slots:{default:!0}})},R=ee=>{var $=J(),Z=B($);{var Y=re=>{Re(re,{children:(G,te)=>{je(G,{get hidden(){return a(o)},get page(){return K.ClearStore}})},$$slots:{default:!0}})},ae=re=>{var G=J(),te=B(G);{var M=U=>{Re(U,{children:(le,ie)=>{je(le,{get hidden(){return a(o)},get page(){return K.AccountSetup}})},$$slots:{default:!0}})},O=U=>{var le=J(),ie=B(le);{var fe=he=>{Re(he,{children:(Ce,L)=>{je(Ce,{get hidden(){return a(o)},get page(){return K.Install}})},$$slots:{default:!0}})},pe=he=>{var Ce=J(),L=B(Ce);{var z=D=>{Re(D,{children:(H,X)=>{je(H,{get hidden(){return a(o)},get page(){return K.InstallSuccess}})},$$slots:{default:!0}})},w=D=>{var H=J(),X=B(H);{var Q=ce=>{Re(ce,{children:(Me,Te)=>{cf(Me,{})},$$slots:{default:!0}})},ge=ce=>{var Me=J(),Te=B(Me);{var Fe=Ye=>{Re(Ye,{children:(Le,Ge)=>{je(Le,{get hidden(){return a(o)},get page(){return K.Auth}})},$$slots:{default:!0}})},Ke=Ye=>{var Le=J(),Ge=B(Le);{var et=ot=>{Re(ot,{children:(Tt,Zt)=>{je(Tt,{get hidden(){return a(o)},get page(){return K.Signup}})},$$slots:{default:!0}})},fn=ot=>{var Tt=J(),Zt=B(Tt);{var na=vn=>{Re(vn,{children:(Mn,Ua)=>{je(Mn,{get hidden(){return a(o)},get page(){return K.Signin}})},$$slots:{default:!0}})},ra=vn=>{var Mn=J(),Ua=B(Mn);{var Vs=Ln=>{Re(Ln,{children:(br,Wa)=>{je(br,{get hidden(){return a(o)},get page(){return K.AccessKeys}})},$$slots:{default:!0}})},Us=Ln=>{var br=J(),Wa=B(br);{var Ws=In=>{Re(In,{children:(Sr,qa)=>{je(Sr,{get hidden(){return a(o)},get page(){return K.Account}})},$$slots:{default:!0}})},qs=In=>{var Sr=J(),qa=B(Sr);{var Ks=On=>{Re(On,{children:(Cr,Ka)=>{je(Cr,{get hidden(){return a(o)},get page(){return K.ConfirmAccessKey}})},$$slots:{default:!0}})},Ys=On=>{var Cr=J(),Ka=B(Cr);{var Gs=Bn=>{Re(Bn,{children:(Er,Ya)=>{je(Er,{get hidden(){return a(o)},get page(){return K.Exit}})},$$slots:{default:!0}})},Xs=Bn=>{var Er=J(),Ya=B(Er);{var Zs=Rn=>{Re(Rn,{children:(kr,Ga)=>{je(kr,{get hidden(){return a(o)},get page(){return K.Sync}})},$$slots:{default:!0}})},Js=Rn=>{var kr=J(),Ga=B(kr);{var Qs=zn=>{Re(zn,{children:(Dr,Xa)=>{je(Dr,{get hidden(){return a(o)},get page(){return K.Subscription}})},$$slots:{default:!0}})},$s=zn=>{var Dr=J(),Xa=B(Dr);{var ei=Fn=>{Re(Fn,{children:(aa,ni)=>{je(aa,{get hidden(){return a(o)},get page(){return K.About}})},$$slots:{default:!0}})},ti=Fn=>{Re(Fn,{children:(aa,ni)=>{cd(aa,{})},$$slots:{default:!0}})};V(Xa,Fn=>{e()===K.About?Fn(ei):Fn(ti,!1)},!0)}p(zn,Dr)};V(Ga,zn=>{e()===K.Subscription?zn(Qs):zn($s,!1)},!0)}p(Rn,kr)};V(Ya,Rn=>{e()===K.Sync?Rn(Zs):Rn(Js,!1)},!0)}p(Bn,Er)};V(Ka,Bn=>{e()===K.Exit?Bn(Gs):Bn(Xs,!1)},!0)}p(On,Cr)};V(qa,On=>{e()===K.ConfirmAccessKey?On(Ks):On(Ys,!1)},!0)}p(In,Sr)};V(Wa,In=>{e()===K.Account?In(Ws):In(qs,!1)},!0)}p(Ln,br)};V(Ua,Ln=>{e()===K.AccessKeys?Ln(Vs):Ln(Us,!1)},!0)}p(vn,Mn)};V(Zt,vn=>{e()===K.Signin?vn(na):vn(ra,!1)},!0)}p(ot,Tt)};V(Ge,ot=>{e()===K.Signup?ot(et):ot(fn,!1)},!0)}p(Ye,Le)};V(Te,Ye=>{e()===K.Auth?Ye(Fe):Ye(Ke,!1)},!0)}p(ce,Me)};V(X,ce=>{e()===K.Welcome?ce(Q):ce(ge,!1)},!0)}p(D,H)};V(L,D=>{e()===K.InstallSuccess?D(z):D(w,!1)},!0)}p(he,Ce)};V(ie,he=>{e()===K.Install?he(fe):he(pe,!1)},!0)}p(U,le)};V(te,U=>{e()===K.AccountSetup?U(M):U(O,!1)},!0)}p(re,G)};V(Z,re=>{e()===K.ClearStore?re(Y):re(ae,!1)},!0)}p(ee,$)};V(ne,ee=>{e()===K.ExportData?ee(de):ee(R,!1)},!0)}p(x,j)};V(k,x=>{e()===K.ImportData?x(C):x(N,!1)},!0)}p(b,S)};V(m,b=>{e()===K.EditNote?b(P):b(T,!1)},!0)}p(h,y)};V(d,h=>{e()===K.NewNote?h(v):h(_,!1)},!0)}p(u,f)};V(i,u=>{e()===K.Settings?u(l):u(c,!1)})}p(t,s)};var uf=q("<!> <!>",1);function df(t,e){oe(e,!0);const{getDialogPages:n}=yt(),{getAccount:r}=ks();let o=I(n),s=I(()=>r()!==void 0);const{checkMobileSize:i}=un();let l=W(Qe([]));const c=I(i);Oe(()=>{a(o),a(c),Rt(()=>{if(a(c))a(o).length>=a(l).length?g(l,a(o).map(m=>({page:m,shown:!0})),!0):g(l,a(l).map((m,P)=>({page:m.page,shown:P<a(o).length})),!0);else if(a(o).length>=a(l).length)g(l,a(o).map(m=>({page:m,shown:!0})),!0);else{if(a(o).length===0){g(l,[{page:a(l)[a(l).length-1].page,shown:!1}],!0);return}g(l,a(o).map(m=>({page:m,shown:!0})),!0)}})});const u=()=>{g(l,a(o).map(m=>({page:m,shown:!0})),!0)};var f=uf(),d=B(f);{var v=m=>{rf(m,{})};V(d,m=>{a(s)&&m(v)})}var _=F(d,2);{var h=m=>{var P=J(),T=B(P);Jr(T,19,()=>a(l),b=>b.page,(b,S,k)=>{const C=I(()=>a(S).page.split("?")[1]),N=I(()=>a(S).page.split("?")[0]);{let x=I(()=>a(k)!==a(l).length-1&&!!a(l)[a(k)+1]?.shown),j=I(()=>a(k)===0);go(b,{onClosed:u,get shown(){return a(S).shown},get hidden(){return a(x)},get isLastDialog(){return a(j)},children:(ne,de)=>{{let R=I(()=>a(k)!==a(l).length-1&&!!a(l)[a(k)+1]?.shown);_o(ne,()=>a(N),()=>a(C),()=>a(R))}},$$slots:{default:!0}})}}),p(m,P)},y=m=>{var P=J(),T=B(P);{var b=S=>{const k=I(()=>a(l)[a(l).length-1].page.split("?")[1]),C=I(()=>a(l)[a(l).length-1].page.split("?")[0]);{let N=I(()=>a(l).length===1);go(S,{onClosed:u,get shown(){return a(l)[a(l).length-1].shown},hidden:!1,get isLastDialog(){return a(N)},children:(x,j)=>{_o(x,()=>a(C),()=>a(k))},$$slots:{default:!0}})}};V(T,S=>{a(l).length>0&&S(b)},!0)}p(m,P)};V(_,m=>{i()?m(h):m(y,!1)})}p(t,f),se()}function ff(t,e){oe(e,!1);let n=0;De(()=>{document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-n;(n<30&&s>0||n>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Qr(),se()}const vf=(t,e)=>{a(e)&&a(e).scrollTo({top:0})};var hf=q('<div><button class="buttonTop svelte-1n46o8q"><!> <span class="icon svelte-1n46o8q"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),gf=q('<!> <!> <main><div class="wrapperHeader svelte-1n46o8q"><!></div> <div class="container svelte-1n46o8q"><!></div></main> <!>',1);function pf(t,e){oe(e,!0);const{replace:n}=Pt(),{hasDialogPage:r}=yt(),{setScrollContainer:o}=za(),{getAccount:s,init:i}=ks(),{isInitedNotes:l}=Nn(),{getDialogPages:c}=yt(),{createBroadcastChannel:u,tabId:f}=ea(),d=u(),{getSidebarState:v}=$r(),{setClosableDialog:_}=dn(),h=()=>{n(`/?${St}=${K.Welcome}`)};De(()=>{i(O=>{O===void 0?h():((r(K.Welcome)||r(K.AccountSetup))&&n("/"),O?g(b,O):g(b,null))});const M=async O=>{const U=JSON.parse(O.data);if(U.tabId&&U.tabId===f)return;const le=U;le.type==="initLocalAccount"||le.type==="initCloudAccount"||le.type==="updateAccount"||le.type==="disconnectCloudAccount"?n("/"):le.type==="exit"&&h()};return d.addEventListener(M),()=>d.removeEventListener(M)});const y=cn();De(async()=>{await new Promise(M=>setTimeout(M,250)),await as(),y.working=!0});let m=W(!1),P=0,T=I(()=>c().length>0),b=I(s),S=I(l),k=W(null);Oe(()=>{_(a(b)!==void 0)}),Oe(()=>{o(a(k))});const C=()=>{if(a(k)){const M=a(k).scrollTop||0;M===0?g(m,!1):!a(m)&&P>M?g(m,!0):a(m)&&P+50<M&&g(m,!1),P=M}},N=()=>{C()};Oe(()=>(a(k)?.addEventListener("scroll",N),window.addEventListener("resize",N),()=>{a(k)?.removeEventListener("scroll",N),window.removeEventListener("resize",N)}));const x=I(v);var j=gf(),ne=B(j);ff(ne,{});var de=F(ne,2);Rc(de,{});var R=F(de,2),ee=E(R),$=E(ee);{var Z=M=>{Wu(M,{})};V($,M=>{a(b)!==void 0&&M(Z)})}var Y=F(ee,2),ae=E(Y);{var re=M=>{df(M,{})};V(ae,M=>{a(S)&&M(re)})}ut(R,M=>g(k,M),()=>a(k));var G=F(R,2);{var te=M=>{var O=hf(),U=E(O);U.__click=[vf,k];var le=E(U);Je(le,{children:(pe,he)=>{var Ce=Be("top");p(pe,Ce)}});var ie=F(le,2),fe=E(ie);we(fe,()=>({"--rotate":"90deg","--size":"28px"})),ye(fe.lastChild,{name:"back"}),_e(()=>{Pn(O,`--swiping-ratio: ${y.swipingRatio}; --transition-timing-default: ${y.duration}s;`),ke(O,1,Ee(["wrapperButtonTop",{isAnimationOn:y.working&&!y.isSwiping,open:a(T)||a(x).type!=="closed"}]),"svelte-1n46o8q")}),p(M,O)};V(G,M=>{a(m)&&M(te)})}_e(()=>{Pn(R,`--swiping-ratio: ${y.swipingRatio}; --transition-timing-default: ${y.duration}s;`),ke(R,1,Ee(["main",{isAnimationOn:y.working&&!y.isSwiping,open:a(T)||a(x).type!=="closed",blockScroll:a(x).type!=="closed"}]),"svelte-1n46o8q")}),p(t,j),se()}at(["click"]);function _f(t){Mc(t,{children:(e,n)=>{pf(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||wl(_f,{target:document.getElementById("app")});export{sf as $,ks as A,rn as B,Qr as C,Nn as D,Ia as E,St as F,yf as G,of as H,ye as I,ve as J,ke as K,Fs as L,Ee as M,bf as N,Sf as O,K as P,Pn as Q,un as R,sc as S,ut as T,Cf as U,Je as V,zs as W,Du as X,Ll as Y,ea as Z,Zl as _,we as a,ze as b,E as c,p as d,Jr as e,q as f,a as g,W as h,V as i,se as j,g as k,B as l,qt as m,yt as n,De as o,oe as p,dn as q,Qe as r,F as s,_e as t,Oe as u,J as v,at as w,Be as x,I as y,Pt as z};
