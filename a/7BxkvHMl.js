const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/BkQCY7E_.js","a/B3ySkiVu.css","a/BL-Ad7FZ.js","a/9q_jSmK4.js","a/bA9hIFUQ.js","a/Df0fAQHq.css","a/BEt5Y6Hh.js","a/GKJynjgv.css","a/V8kYadGs.js","a/BMjxyC5e.css","a/CYxeIIxL.js","a/DgPIJwnn.css","a/C7Azcxo6.js","a/B_UsPGEu.css","a/Cxw1tYo6.js","a/Cpa8lgv9.js","a/D7jJWW_t.js","a/j0KFa_-O.css","a/hu7yjlv8.css","a/CNCpl9VC.js","a/BwvRMkbK.js","a/Bk2ovjQl.js","a/EZ_l8VDb.css","a/B_Zcg-eh.css","a/HOTUjnfJ.css","a/48eoajN4.js","a/Bs6Vrlio.css","a/BWVH35wP.js","a/DQceye4A.js","a/DWUfwQ_G.css","a/CCtlgutt.css","a/B0asrb0J.js","a/DZNlfyYK.css","a/Lj2oHVhr.js","a/CJkK19aw.css","a/6whESR3w.js","a/DlxBpJjD.css","a/CaZD1jqq.js","a/DRnVlPbk.js","a/CNab-qr2.css","a/CbeeEu5U.js","a/DaxC3cdO.css","a/CgHGqhNu.js","a/Bib31qW-.css","a/Zv8aa1Zp.js","a/Br15UghP.css","a/CFJrBmif.js","a/CTzb1Nvm.css"])))=>i.map(i=>d[i]);
var ni=Object.defineProperty;var Ka=t=>{throw TypeError(t)};var ri=(t,e,n)=>e in t?ni(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lt=(t,e,n)=>ri(t,typeof e!="symbol"?e+"":e,n),ea=(t,e,n)=>e.has(t)||Ka("Cannot "+n);var M=(t,e,n)=>(ea(t,e,"read from private field"),n?n.call(t):e.get(t)),be=(t,e,n)=>e.has(t)?Ka("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ie=(t,e,n,r)=>(ea(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),De=(t,e,n)=>(ea(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const go=!1;var ba=Array.isArray,ai=Array.prototype.indexOf,Sa=Array.from,sa=Object.defineProperty,Bn=Object.getOwnPropertyDescriptor,po=Object.getOwnPropertyDescriptors,oi=Object.prototype,si=Array.prototype,Ca=Object.getPrototypeOf,Ya=Object.isExtensible;const Ee=()=>{};function ii(t){return typeof t?.then=="function"}function li(t){return t()}function ia(t){for(var e=0;e<t.length;e++)t[e]()}function _o(){var t,e,n=new Promise((r,o)=>{t=r,e=o});return{promise:n,resolve:t,reject:e}}function ci(t,e,n=!1){return t===void 0?n?e():e:t}const Ge=2,Ea=4,Fr=8,Vt=16,Wt=32,bn=64,Hr=128,Je=1024,ot=2048,tn=4096,ut=8192,Rt=16384,ka=32768,$t=65536,Xa=1<<17,ui=1<<18,Gn=1<<19,mo=1<<20,gt=256,Nr=512,Lr=32768,la=1<<21,Pa=1<<22,gn=1<<23,pn=Symbol("$state"),di=Symbol("legacy props"),fi=Symbol(""),On=new class extends Error{constructor(){super(...arguments);lt(this,"name","StaleReactionError");lt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function wo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function vi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function hi(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function gi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function pi(t){throw new Error("https://svelte.dev/e/effect_orphan")}function _i(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function mi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function wi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function yi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function bi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Si(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const jr=1,Ur=2,yo=4,Ci=8,Ei=16,ki=1,Pi=2,xi=4,Ti=8,Ai=16,Di=1,Ni=2,qe=Symbol(),Li="http://www.w3.org/1999/xhtml";function Mi(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Ii=!1;function bo(t){return t===this.v}function Oi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function So(t){return!Oi(t,this.v)}let Zn=!1,Bi=!1;function Ri(){Zn=!0}let Ae=null;function qn(t){Ae=t}function je(t){return Co().get(t)}function Ue(t,e){return Co().set(t,e),e}function ne(t,e=!1,n){Ae={p:Ae,c:null,e:null,s:t,x:null,l:Zn&&!e?{s:null,u:null,$:[]}:null}}function re(t){var e=Ae,n=e.e;if(n!==null){e.e=null;for(var r of n)Uo(r)}return t!==void 0&&(e.x=t),Ae=e.p,t??{}}function Jn(){return!Zn||Ae!==null&&Ae.l===null}function Co(t){return Ae===null&&wo(),Ae.c??(Ae.c=new Map(zi(Ae)||void 0))}function zi(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let un=[];function Eo(){var t=un;un=[],ia(t)}function Sn(t){if(un.length===0&&!Rn){var e=un;queueMicrotask(()=>{e===un&&Eo()})}un.push(t)}function Fi(){for(;un.length>0;)Eo()}const Hi=new WeakMap;function ko(t){var e=he;if(e===null)return ve.f|=gn,t;if((e.f&ka)===0){if((e.f&Hr)===0)throw!e.parent&&t instanceof Error&&Po(t),t;e.b.error(t)}else Kn(t,e)}function Kn(t,e){for(;e!==null;){if((e.f&Hr)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&Po(t),t}function Po(t){const e=Hi.get(t);e&&(sa(t,"message",{value:e.message}),sa(t,"stack",{value:e.stack}))}const Er=new Set;let Te=null,xr=null,wt=null,ca=new Set,At=[],Vr=null,ua=!1,Rn=!1;var Hn,jn,Un,dn,ur,Vn,Wn,Ke,da,ln,fa,xo;const Br=class Br{constructor(){be(this,Ke);lt(this,"committed",!1);lt(this,"current",new Map);be(this,Hn,new Map);be(this,jn,new Set);be(this,Un,0);be(this,dn,0);be(this,ur,null);be(this,Vn,[]);be(this,Wn,[]);lt(this,"skipped_effects",new Set)}process(e){At=[],xr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)De(this,Ke,da).call(this,r,n);De(this,Ke,fa).call(this),M(this,dn)>0?(De(this,Ke,ln).call(this,n.effects),De(this,Ke,ln).call(this,n.render_effects),De(this,Ke,ln).call(this,n.block_effects)):(xr=this,Te=null,Ga(n.render_effects),Ga(n.effects),xr=null),wt=null}capture(e,n){M(this,Hn).has(e)||M(this,Hn).set(e,n),this.current.set(e,e.v),wt?.set(e,e.v)}activate(){Te=this}deactivate(){Te=null,wt=null}flush(){if(At.length>0){if(this.activate(),Ao(),Te!==null&&Te!==this)return}else De(this,Ke,fa).call(this);this.deactivate();for(const e of ca)if(ca.delete(e),e(),Te!==null)break}increment(e){ie(this,Un,M(this,Un)+1),e&&ie(this,dn,M(this,dn)+1)}decrement(e){ie(this,Un,M(this,Un)-1),e&&ie(this,dn,M(this,dn)-1);for(const n of M(this,Vn))Qe(n,ot),wn(n);for(const n of M(this,Wn))Qe(n,tn),wn(n);ie(this,Vn,[]),ie(this,Wn,[]),this.flush()}add_callback(e){M(this,jn).add(e)}settled(){return(M(this,ur)??ie(this,ur,_o())).promise}static ensure(){if(Te===null){const e=Te=new Br;Er.add(Te),Rn||Br.enqueue(()=>{Te===e&&e.flush()})}return Te}static enqueue(e){Sn(e)}apply(){}};Hn=new WeakMap,jn=new WeakMap,Un=new WeakMap,dn=new WeakMap,ur=new WeakMap,Vn=new WeakMap,Wn=new WeakMap,Ke=new WeakSet,da=function(e,n){e.f^=Je;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Wt|bn))!==0,i=s&&(o&Je)!==0,l=i||(o&ut)!==0||this.skipped_effects.has(r);if((r.f&Hr)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){s?r.f^=Je:(o&Ea)!==0?n.effects.push(r):Yr(r)&&((r.f&Vt)!==0&&n.block_effects.push(r),Or(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(De(this,Ke,ln).call(this,n.effects),De(this,Ke,ln).call(this,n.render_effects),De(this,Ke,ln).call(this,n.block_effects),n=n.parent),r=u.next,u=u.parent}},ln=function(e){for(const n of e)((n.f&ot)!==0?M(this,Vn):M(this,Wn)).push(n),Qe(n,Je)},fa=function(){if(M(this,dn)===0){for(const e of M(this,jn))e();M(this,jn).clear()}M(this,Un)===0&&De(this,Ke,xo).call(this)},xo=function(){var o;if(Er.size>1){M(this,Hn).clear();var e=wt,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Er){if(s===this){n=!1;continue}const i=[];for(const[c,u]of this.current){if(s.current.has(c))if(n&&u!==s.current.get(c))s.current.set(c,u);else continue;i.push(c)}if(i.length===0)continue;const l=[...s.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){const c=new Set,u=new Map;for(const d of i)Do(d,l,c,u);if(At.length>0){Te=s,s.apply();for(const d of At)De(o=s,Ke,da).call(o,d,r);At=[],s.deactivate()}}}Te=null,wt=e}this.committed=!0,Er.delete(this),M(this,ur)?.resolve()};let Bt=Br;function To(t){var e=Rn;Rn=!0;try{for(var n;;){if(Fi(),At.length===0&&(Te?.flush(),At.length===0))return Vr=null,n;Ao()}}finally{Rn=e}}function Ao(){var t=Fn;ua=!0;try{var e=0;for(Qa(!0);At.length>0;){var n=Bt.ensure();if(e++>1e3){var r,o;ji()}n.process(At),Jt.clear()}}finally{ua=!1,Qa(t),Vr=null}}function ji(){try{_i()}catch(t){Kn(t,Vr)}}let Mt=null;function Ga(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Rt|ut))===0&&Yr(r)&&(Mt=new Set,Or(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?qo(r):r.fn=null),Mt?.size>0)){Jt.clear();for(const o of Mt){if((o.f&(Rt|ut))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)Mt.has(i)&&(Mt.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(Rt|ut))===0&&Or(c)}}Mt.clear()}}Mt=null}}function Do(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Ge)!==0?Do(o,e,n,r):(s&(Pa|Vt))!==0&&(s&ot)===0&&No(o,e,r)&&(Qe(o,ot),wn(o))}}function No(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Ge)!==0&&No(o,e,n))return n.set(o,!0),!0}return n.set(t,!1),!1}function wn(t){for(var e=Vr=t;e.parent!==null;){e=e.parent;var n=e.f;if(ua&&e===he&&(n&Vt)!==0)return;if((n&(bn|Wt))!==0){if((n&Je)===0)return;e.f^=Je}}At.push(e)}function Ui(t){let e=0,n=jt(0),r;return()=>{nl()&&(a(n),Kr(()=>(e===0&&(r=it(()=>t(()=>or(n)))),e+=1,()=>{Sn(()=>{e-=1,e===0&&(r?.(),r=void 0,or(n))})})))}}var Vi=$t|Gn|Hr;function Wi(t,e,n){new qi(t,e,n)}var ft,vt,ya,kt,fn,Pt,ht,nt,xt,It,Yt,vn,Xt,hn,Gt,Rr,zr,We,Ki,Yi,va,Tr,Ar,ha;class qi{constructor(e,n,r){be(this,We);lt(this,"parent");be(this,ft,!1);be(this,vt);be(this,ya,null);be(this,kt);be(this,fn);be(this,Pt);be(this,ht,null);be(this,nt,null);be(this,xt,null);be(this,It,null);be(this,Yt,null);be(this,vn,0);be(this,Xt,0);be(this,hn,!1);be(this,Gt,null);be(this,Rr,()=>{M(this,Gt)&&zt(M(this,Gt),M(this,vn))});be(this,zr,Ui(()=>(ie(this,Gt,jt(M(this,vn))),()=>{ie(this,Gt,null)})));ie(this,vt,e),ie(this,kt,n),ie(this,fn,r),this.parent=he.b,ie(this,ft,!!M(this,kt).pending),ie(this,Pt,Qn(()=>{he.b=this;{var o=De(this,We,va).call(this);try{ie(this,ht,mt(()=>r(o)))}catch(s){this.error(s)}M(this,Xt)>0?De(this,We,Ar).call(this):ie(this,ft,!1)}return()=>{M(this,Yt)?.remove()}},Vi))}is_pending(){return M(this,ft)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!M(this,kt).pending}update_pending_count(e){De(this,We,ha).call(this,e),ie(this,vn,M(this,vn)+e),ca.add(M(this,Rr))}get_effect_pending(){return M(this,zr).call(this),a(M(this,Gt))}error(e){var n=M(this,kt).onerror;let r=M(this,kt).failed;if(M(this,hn)||!n&&!r)throw e;M(this,ht)&&(at(M(this,ht)),ie(this,ht,null)),M(this,nt)&&(at(M(this,nt)),ie(this,nt,null)),M(this,xt)&&(at(M(this,xt)),ie(this,xt,null));var o=!1,s=!1;const i=()=>{if(o){Mi();return}o=!0,s&&Si(),Bt.ensure(),ie(this,vn,0),M(this,xt)!==null&&zn(M(this,xt),()=>{ie(this,xt,null)}),ie(this,ft,this.has_pending_snippet()),ie(this,ht,De(this,We,Tr).call(this,()=>(ie(this,hn,!1),mt(()=>M(this,fn).call(this,M(this,vt)))))),M(this,Xt)>0?De(this,We,Ar).call(this):ie(this,ft,!1)};var l=ve;try{rt(null),s=!0,n?.(e,i),s=!1}catch(c){Kn(c,M(this,Pt)&&M(this,Pt).parent)}finally{rt(l)}r&&Sn(()=>{ie(this,xt,De(this,We,Tr).call(this,()=>{Bt.ensure(),ie(this,hn,!0);try{return mt(()=>{r(M(this,vt),()=>e,()=>i)})}catch(c){return Kn(c,M(this,Pt).parent),null}finally{ie(this,hn,!1)}}))})}}ft=new WeakMap,vt=new WeakMap,ya=new WeakMap,kt=new WeakMap,fn=new WeakMap,Pt=new WeakMap,ht=new WeakMap,nt=new WeakMap,xt=new WeakMap,It=new WeakMap,Yt=new WeakMap,vn=new WeakMap,Xt=new WeakMap,hn=new WeakMap,Gt=new WeakMap,Rr=new WeakMap,zr=new WeakMap,We=new WeakSet,Ki=function(){try{ie(this,ht,mt(()=>M(this,fn).call(this,M(this,vt))))}catch(e){this.error(e)}ie(this,ft,!1)},Yi=function(){const e=M(this,kt).pending;e&&(ie(this,nt,mt(()=>e(M(this,vt)))),Bt.enqueue(()=>{var n=De(this,We,va).call(this);ie(this,ht,De(this,We,Tr).call(this,()=>(Bt.ensure(),mt(()=>M(this,fn).call(this,n))))),M(this,Xt)>0?De(this,We,Ar).call(this):(zn(M(this,nt),()=>{ie(this,nt,null)}),ie(this,ft,!1))}))},va=function(){var e=M(this,vt);return M(this,ft)&&(ie(this,Yt,en()),M(this,vt).before(M(this,Yt)),e=M(this,Yt)),e},Tr=function(e){var n=he,r=ve,o=Ae;Dt(M(this,Pt)),rt(M(this,Pt)),qn(M(this,Pt).ctx);try{return e()}catch(s){return ko(s),null}finally{Dt(n),rt(r),qn(o)}},Ar=function(){const e=M(this,kt).pending;M(this,ht)!==null&&(ie(this,It,document.createDocumentFragment()),M(this,It).append(M(this,Yt)),Xo(M(this,ht),M(this,It))),M(this,nt)===null&&ie(this,nt,mt(()=>e(M(this,vt))))},ha=function(e){var n;if(!this.has_pending_snippet()){this.parent&&De(n=this.parent,We,ha).call(n,e);return}ie(this,Xt,M(this,Xt)+e),M(this,Xt)===0&&(ie(this,ft,!1),M(this,nt)&&zn(M(this,nt),()=>{ie(this,nt,null)}),M(this,It)&&(M(this,vt).before(M(this,It)),ie(this,It,null)))};function Xi(t,e,n){const r=Jn()?vr:Wr;if(e.length===0){n(t.map(r));return}var o=Te,s=he,i=Lo();Promise.all(e.map(l=>Gi(l))).then(l=>{i();try{n([...t.map(r),...l])}catch(c){(s.f&Rt)===0&&Kn(c,s)}o?.deactivate(),Mr()}).catch(l=>{Kn(l,s)})}function Lo(){var t=he,e=ve,n=Ae,r=Te;return function(){Dt(t),rt(e),qn(n),r?.activate()}}function Mr(){Dt(null),rt(null),qn(null)}function vr(t){var e=Ge|ot,n=ve!==null&&(ve.f&Ge)!==0?ve:null;return he===null||n!==null&&(n.f&gt)!==0?e|=gt:he.f|=Gn,{ctx:Ae,deps:null,effects:null,equals:bo,f:e,fn:t,reactions:null,rv:0,v:qe,wv:0,parent:n??he,ac:null}}function Gi(t,e){let n=he;n===null&&vi();var r=n.b,o=void 0,s=jt(qe),i=!ve,l=new Map;return sl(()=>{var c=_o();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===Te&&u.committed&&u.deactivate(),Mr()})}catch(v){c.reject(v),Mr()}var u=Te;if(i){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(On),l.delete(u),l.set(u,c)}const f=(v,g=void 0)=>{if(u.activate(),g)g!==On&&(s.f|=gn,zt(s,g));else{(s.f&gn)!==0&&(s.f^=gn),zt(s,v);for(const[h,w]of l){if(l.delete(h),h===u)break;w.reject(On)}}i&&(r.update_pending_count(-1),u.decrement(d))};c.promise.then(f,v=>f(null,v||"unknown"))}),jo(()=>{for(const c of l.values())c.reject(On)}),new Promise(c=>{function u(d){function f(){d===o?c(s):u(o)}d.then(f,f)}u(o)})}function z(t){const e=vr(t);return Go(e),e}function Wr(t){const e=vr(t);return e.equals=So,e}function Mo(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)at(e[n])}}function Zi(t){for(var e=t.parent;e!==null;){if((e.f&Ge)===0)return e;e=e.parent}return null}function xa(t){var e,n=he;Dt(Zi(t));try{t.f&=~Lr,Mo(t),e=$o(t)}finally{Dt(n)}return e}function Io(t){var e=xa(t);if(t.equals(e)||(t.v=e,t.wv=Jo()),!Cn)if(wt!==null)wt.set(t,t.v);else{var n=(Zt||(t.f&gt)!==0)&&t.deps!==null?tn:Je;Qe(t,n)}}const Jt=new Map;function jt(t,e){var n={f:0,v:t,reactions:null,equals:bo,rv:0,wv:0};return n}function U(t,e){const n=jt(t);return Go(n),n}function ga(t,e=!1,n=!0){var o;const r=jt(t);return e||(r.equals=So),Zn&&n&&Ae!==null&&Ae.l!==null&&((o=Ae.l).s??(o.s=[])).push(r),r}function m(t,e,n=!1){ve!==null&&(!yt||(ve.f&Xa)!==0)&&Jn()&&(ve.f&(Ge|Vt|Pa|Xa))!==0&&!Ft?.includes(t)&&bi();let r=n?Be(e):e;return zt(t,r)}function zt(t,e){if(!t.equals(e)){var n=t.v;Cn?Jt.set(t,e):Jt.set(t,n),t.v=e;var r=Bt.ensure();r.capture(t,n),(t.f&Ge)!==0&&((t.f&ot)!==0&&xa(t),Qe(t,(t.f&gt)===0?Je:tn)),t.wv=Jo(),Oo(t,ot),Jn()&&he!==null&&(he.f&Je)!==0&&(he.f&(Wt|bn))===0&&(dt===null?cl([t]):dt.push(t))}return e}function or(t){m(t,t.v+1)}function Oo(t,e){var n=t.reactions;if(n!==null)for(var r=Jn(),o=n.length,s=0;s<o;s++){var i=n[s],l=i.f;if(!(!r&&i===he)){var c=(l&ot)===0;c&&Qe(i,e),(l&Ge)!==0?(l&Lr)===0&&(i.f|=Lr,Oo(i,tn)):c&&((l&Vt)!==0&&Mt!==null&&Mt.add(i),wn(i))}}}function Be(t){if(typeof t!="object"||t===null||pn in t)return t;const e=Ca(t);if(e!==oi&&e!==si)return t;var n=new Map,r=ba(t),o=U(0),s=_n,i=l=>{if(_n===s)return l();var c=ve,u=_n;rt(null),eo(s);var d=l();return rt(c),eo(u),d};return r&&n.set("length",U(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&wi();var d=n.get(c);return d===void 0?d=i(()=>{var f=U(u.value);return n.set(c,f),f}):m(d,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const d=i(()=>U(qe));n.set(c,d),or(o)}}else m(u,qe),or(o);return!0},get(l,c,u){if(c===pn)return t;var d=n.get(c),f=c in l;if(d===void 0&&(!f||Bn(l,c)?.writable)&&(d=i(()=>{var g=Be(f?l[c]:qe),h=U(g);return h}),n.set(c,d)),d!==void 0){var v=a(d);return v===qe?void 0:v}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=n.get(c);d&&(u.value=a(d))}else if(u===void 0){var f=n.get(c),v=f?.v;if(f!==void 0&&v!==qe)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,c){if(c===pn)return!0;var u=n.get(c),d=u!==void 0&&u.v!==qe||Reflect.has(l,c);if(u!==void 0||he!==null&&(!d||Bn(l,c)?.writable)){u===void 0&&(u=i(()=>{var v=d?Be(l[c]):qe,g=U(v);return g}),n.set(c,u));var f=a(u);if(f===qe)return!1}return d},set(l,c,u,d){var f=n.get(c),v=c in l;if(r&&c==="length")for(var g=u;g<f.v;g+=1){var h=n.get(g+"");h!==void 0?m(h,qe):g in l&&(h=i(()=>U(qe)),n.set(g+"",h))}if(f===void 0)(!v||Bn(l,c)?.writable)&&(f=i(()=>U(void 0)),m(f,Be(u)),n.set(c,f));else{v=f.v!==qe;var w=i(()=>Be(u));m(f,w)}var p=Reflect.getOwnPropertyDescriptor(l,c);if(p?.set&&p.set.call(d,u),!v){if(r&&typeof c=="string"){var k=n.get("length"),x=Number(c);Number.isInteger(x)&&x>=k.v&&m(k,x+1)}or(o)}return!0},ownKeys(l){a(o);var c=Reflect.ownKeys(l).filter(f=>{var v=n.get(f);return v===void 0||v.v!==qe});for(var[u,d]of n)d.v!==qe&&!(u in l)&&c.push(u);return c},setPrototypeOf(){yi()}})}var Za,Bo,Ro,zo;function Ji(){if(Za===void 0){Za=window,Bo=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Ro=Bn(e,"firstChild").get,zo=Bn(e,"nextSibling").get,Ya(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ya(n)&&(n.__t=void 0)}}function en(t=""){return document.createTextNode(t)}function Yn(t){return Ro.call(t)}function hr(t){return zo.call(t)}function A(t,e){return Yn(t)}function B(t,e=!1){{var n=Yn(t);return n instanceof Comment&&n.data===""?hr(n):n}}function W(t,e=1,n=!1){let r=t;for(;e--;)r=hr(r);return r}function Qi(t){t.textContent=""}function Fo(){return!1}let Ja=!1;function $i(){Ja||(Ja=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function qr(t){var e=ve,n=he;rt(null),Dt(null);try{return t()}finally{rt(e),Dt(n)}}function el(t,e,n,r=n){t.addEventListener(e,()=>qr(n));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),$i()}function Ho(t){he===null&&ve===null&&pi(),ve!==null&&(ve.f&gt)!==0&&he===null&&gi(),Cn&&hi()}function tl(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Nt(t,e,n,r=!0){var o=he;o!==null&&(o.f&ut)!==0&&(t|=ut);var s={ctx:Ae,deps:null,nodes_start:null,nodes_end:null,f:t|ot,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Or(s),s.f|=ka}catch(c){throw at(s),c}else e!==null&&wn(s);if(r){var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Gn)===0&&(i=i.first,(t&Vt)!==0&&(t&$t)!==0&&i!==null&&(i.f|=$t)),i!==null&&(i.parent=o,o!==null&&tl(i,o),ve!==null&&(ve.f&Ge)!==0&&(t&bn)===0)){var l=ve;(l.effects??(l.effects=[])).push(i)}}return s}function nl(){return ve!==null&&!yt}function jo(t){const e=Nt(Fr,null,!1);return Qe(e,Je),e.teardown=t,e}function xe(t){Ho();var e=he.f,n=!ve&&(e&Wt)!==0&&(e&ka)===0;if(n){var r=Ae;(r.e??(r.e=[])).push(t)}else return Uo(t)}function Uo(t){return Nt(Ea|mo,t,!1)}function rl(t){return Ho(),Nt(Fr|mo,t,!0)}function al(t){Bt.ensure();const e=Nt(bn|Gn,t,!0);return(n={})=>new Promise(r=>{n.outro?zn(e,()=>{at(e),r(void 0)}):(at(e),r(void 0))})}function ol(t){return Nt(Ea,t,!1)}function sl(t){return Nt(Pa|Gn,t,!0)}function Kr(t,e=0){return Nt(Fr|e,t,!0)}function ce(t,e=[],n=[]){Xi(e,n,r=>{Nt(Fr,()=>t(...r.map(a)),!0)})}function Qn(t,e=0){var n=Nt(Vt|e,t,!0);return n}function mt(t,e=!0){return Nt(Wt|Gn,t,!0,e)}function Vo(t){var e=t.teardown;if(e!==null){const n=Cn,r=ve;$a(!0),rt(null);try{e.call(null)}finally{$a(n),rt(r)}}}function Wo(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const o=n.ac;o!==null&&qr(()=>{o.abort(On)});var r=n.next;(n.f&bn)!==0?n.parent=null:at(n,e),n=r}}function il(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Wt)===0&&at(e),e=n}}function at(t,e=!0){var n=!1;(e||(t.f&ui)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ll(t.nodes_start,t.nodes_end),n=!0),Wo(t,e&&!n),Ir(t,0),Qe(t,Rt);var r=t.transitions;if(r!==null)for(const s of r)s.stop();Vo(t);var o=t.parent;o!==null&&o.first!==null&&qo(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ll(t,e){for(;t!==null;){var n=t===e?null:hr(t);t.remove(),t=n}}function qo(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function zn(t,e,n=!0){var r=[];Ta(t,r,!0),Ko(r,()=>{n&&at(t),e&&e()})}function Ko(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var o of t)o.out(r)}else e()}function Ta(t,e,n){if((t.f&ut)===0){if(t.f^=ut,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var o=r.next,s=(r.f&$t)!==0||(r.f&Wt)!==0&&(t.f&Vt)!==0;Ta(r,e,s?n:!1),r=o}}}function Aa(t){Yo(t,!0)}function Yo(t,e){if((t.f&ut)!==0){t.f^=ut,(t.f&Je)===0&&(Qe(t,ot),wn(t));for(var n=t.first;n!==null;){var r=n.next,o=(n.f&$t)!==0||(n.f&Wt)!==0;Yo(n,o?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function Xo(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var o=n===r?null:hr(n);e.append(n),n=o}}let Fn=!1;function Qa(t){Fn=t}let Cn=!1;function $a(t){Cn=t}let ve=null,yt=!1;function rt(t){ve=t}let he=null;function Dt(t){he=t}let Ft=null;function Go(t){ve!==null&&(Ft===null?Ft=[t]:Ft.push(t))}let Ze=null,ct=0,dt=null;function cl(t){dt=t}let Zo=1,ir=0,_n=ir;function eo(t){_n=t}let Zt=!1;function Jo(){return++Zo}function Yr(t){var e=t.f;if((e&ot)!==0)return!0;if((e&tn)!==0){var n=t.deps,r=(e&gt)!==0;if(e&Ge&&(t.f&=~Lr),n!==null){var o,s,i=(e&Nr)!==0,l=r&&he!==null&&!Zt,c=n.length;if((i||l)&&(he===null||(he.f&Rt)===0)){var u=t,d=u.parent;for(o=0;o<c;o++)s=n[o],(i||!s?.reactions?.includes(u))&&(s.reactions??(s.reactions=[])).push(u);i&&(u.f^=Nr),l&&d!==null&&(d.f&gt)===0&&(u.f^=gt)}for(o=0;o<c;o++)if(s=n[o],Yr(s)&&Io(s),s.wv>t.wv)return!0}(!r||he!==null&&!Zt)&&Qe(t,Je)}return!1}function Qo(t,e,n=!0){var r=t.reactions;if(r!==null&&!Ft?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Ge)!==0?Qo(s,e,!1):e===s&&(n?Qe(s,ot):(s.f&Je)!==0&&Qe(s,tn),wn(s))}}function $o(t){var w;var e=Ze,n=ct,r=dt,o=ve,s=Zt,i=Ft,l=Ae,c=yt,u=_n,d=t.f;Ze=null,ct=0,dt=null,Zt=(d&gt)!==0&&(yt||!Fn||ve===null),ve=(d&(Wt|bn))===0?t:null,Ft=null,qn(t.ctx),yt=!1,_n=++ir,t.ac!==null&&(qr(()=>{t.ac.abort(On)}),t.ac=null);try{t.f|=la;var f=t.fn,v=f(),g=t.deps;if(Ze!==null){var h;if(Ir(t,ct),g!==null&&ct>0)for(g.length=ct+Ze.length,h=0;h<Ze.length;h++)g[ct+h]=Ze[h];else t.deps=g=Ze;if(!Zt||(d&Ge)!==0&&t.reactions!==null)for(h=ct;h<g.length;h++)((w=g[h]).reactions??(w.reactions=[])).push(t)}else g!==null&&ct<g.length&&(Ir(t,ct),g.length=ct);if(Jn()&&dt!==null&&!yt&&g!==null&&(t.f&(Ge|tn|ot))===0)for(h=0;h<dt.length;h++)Qo(dt[h],t);return o!==null&&o!==t&&(ir++,dt!==null&&(r===null?r=dt:r.push(...dt))),(t.f&gn)!==0&&(t.f^=gn),v}catch(p){return ko(p)}finally{t.f^=la,Ze=e,ct=n,dt=r,ve=o,Zt=s,Ft=i,qn(l),yt=c,_n=u}}function ul(t,e){let n=e.reactions;if(n!==null){var r=ai.call(n,t);if(r!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(e.f&Ge)!==0&&(Ze===null||!Ze.includes(e))&&(Qe(e,tn),(e.f&(gt|Nr))===0&&(e.f^=Nr),Mo(e),Ir(e,0))}function Ir(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)ul(t,n[r])}function Or(t){var e=t.f;if((e&Rt)===0){Qe(t,Je);var n=he,r=Fn;he=t,Fn=!0;try{(e&Vt)!==0?il(t):Wo(t),Vo(t);var o=$o(t);t.teardown=typeof o=="function"?o:null,t.wv=Zo;var s;go&&Bi&&(t.f&ot)!==0&&t.deps}finally{Fn=r,he=n}}}async function es(){await Promise.resolve(),To()}function a(t){var e=t.f,n=(e&Ge)!==0;if(ve!==null&&!yt){var r=he!==null&&(he.f&Rt)!==0;if(!r&&!Ft?.includes(t)){var o=ve.deps;if((ve.f&la)!==0)t.rv<ir&&(t.rv=ir,Ze===null&&o!==null&&o[ct]===t?ct++:Ze===null?Ze=[t]:(!Zt||!Ze.includes(t))&&Ze.push(t));else{(ve.deps??(ve.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[ve]:s.includes(ve)||s.push(ve)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&gt)===0&&(i.f^=gt)}if(Cn){if(Jt.has(t))return Jt.get(t);if(n){i=t;var c=i.v;return((i.f&Je)===0&&i.reactions!==null||ts(i))&&(c=xa(i)),Jt.set(i,c),c}}else if(n){if(i=t,wt?.has(i))return wt.get(i);Yr(i)&&Io(i)}if(wt?.has(t))return wt.get(t);if((t.f&gn)!==0)throw t.v;return t.v}function ts(t){if(t.v===qe)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Jt.has(e)||(e.f&Ge)!==0&&ts(e))return!0;return!1}function it(t){var e=yt;try{return yt=!0,t()}finally{yt=e}}const dl=-7169;function Qe(t,e){t.f=t.f&dl|e}function fl(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(pn in t)pa(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&pn in n&&pa(n)}}}function pa(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{pa(t[r],e)}catch{}const n=Ca(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=po(n);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const vl=["touchstart","touchmove"];function hl(t){return vl.includes(t)}const ns=new Set,_a=new Set;function gl(t,e,n,r={}){function o(s){if(r.capture||tr.call(e,s),!s.cancelBubble)return qr(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Sn(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function Da(t,e,n,r,o){var s={capture:r,passive:o},i=gl(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&jo(()=>{e.removeEventListener(t,i,s)})}function $e(t){for(var e=0;e<t.length;e++)ns.add(t[e]);for(var n of _a)n(t)}let to=null;function tr(t){var e=this,n=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;to=t;var i=0,l=to===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){sa(t,"currentTarget",{configurable:!0,get(){return s||n}});var d=ve,f=he;rt(null),Dt(null);try{for(var v,g=[];s!==null;){var h=s.assignedSlot||s.parentNode||s.host||null;try{var w=s["__"+r];if(w!=null&&(!s.disabled||t.target===s))if(ba(w)){var[p,...k]=w;p.apply(s,[t,...k])}else w.call(s,t)}catch(x){v?g.push(x):v=x}if(t.cancelBubble||h===e||h===null)break;s=h}if(v){for(let x of g)queueMicrotask(()=>{throw x});throw v}}finally{t.__root=e,delete t.currentTarget,rt(d),Dt(f)}}}function rs(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function lr(t,e){var n=he;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function q(t,e){var n=(e&Di)!==0,r=(e&Ni)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=rs(s?t:"<!>"+t),n||(o=Yn(o)));var i=r||Bo?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=Yn(i),c=i.lastChild;lr(l,c)}else lr(i,i);return i}}function pl(t,e,n="svg"){var r=!t.startsWith("<!>"),o=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=rs(o),l=Yn(i);s=Yn(l)}var c=s.cloneNode(!0);return lr(c,c),c}}function _l(t,e){return pl(t,e,"svg")}function Ie(t=""){{var e=en(t+"");return lr(e,e),e}}function J(){var t=document.createDocumentFragment(),e=document.createComment(""),n=en();return t.append(e,n),lr(e,n),t}function _(t,e){t!==null&&t.before(e)}function hf(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function Ht(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function ml(t,e){return wl(t,e)}const In=new Map;function wl(t,{target:e,anchor:n,props:r={},events:o,context:s,intro:i=!0}){Ji();var l=new Set,c=f=>{for(var v=0;v<f.length;v++){var g=f[v];if(!l.has(g)){l.add(g);var h=hl(g);e.addEventListener(g,tr,{passive:h});var w=In.get(g);w===void 0?(document.addEventListener(g,tr,{passive:h}),In.set(g,1)):In.set(g,w+1)}}};c(Sa(ns)),_a.add(c);var u=void 0,d=al(()=>{var f=n??e.appendChild(en());return Wi(f,{pending:()=>{}},v=>{if(s){ne({});var g=Ae;g.c=s}o&&(r.$$events=o),u=t(v,r)||{},s&&re()}),()=>{for(var v of l){e.removeEventListener(v,tr);var g=In.get(v);--g===0?(document.removeEventListener(v,tr),In.delete(v)):In.set(v,g)}_a.delete(c),f!==n&&f.parentNode?.removeChild(f)}});return yl.set(u,d),u}let yl=new WeakMap;var Ot,Tt,_t,dr,fr;class Xr{constructor(e,n=!0){lt(this,"anchor");be(this,Ot,new Map);be(this,Tt,new Map);be(this,_t,new Map);be(this,dr,!0);be(this,fr,()=>{var e=Te;if(M(this,Ot).has(e)){var n=M(this,Ot).get(e),r=M(this,Tt).get(n);if(r)Aa(r);else{var o=M(this,_t).get(n);o&&(M(this,Tt).set(n,o.effect),M(this,_t).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of M(this,Ot)){if(M(this,Ot).delete(s),s===e)break;const l=M(this,_t).get(i);l&&(at(l.effect),M(this,_t).delete(i))}for(const[s,i]of M(this,Tt)){if(s===n)continue;const l=()=>{if(Array.from(M(this,Ot).values()).includes(s)){var u=document.createDocumentFragment();Xo(i,u),u.append(en()),M(this,_t).set(s,{effect:i,fragment:u})}else at(i);M(this,Tt).delete(s)};M(this,dr)||!r?zn(i,l,!1):l()}}});this.anchor=e,ie(this,dr,n)}ensure(e,n){var r=Te,o=Fo();if(n&&!M(this,Tt).has(e)&&!M(this,_t).has(e))if(o){var s=document.createDocumentFragment(),i=en();s.append(i),M(this,_t).set(e,{effect:mt(()=>n(i)),fragment:s})}else M(this,Tt).set(e,mt(()=>n(this.anchor)));if(M(this,Ot).set(r,e),o){for(const[l,c]of M(this,Tt))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of M(this,_t))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.add_callback(M(this,fr))}else M(this,fr).call(this)}}Ot=new WeakMap,Tt=new WeakMap,_t=new WeakMap,dr=new WeakMap,fr=new WeakMap;const bl=0,ta=1;function Sl(t,e,n,r,o){var s=Jn(),i=qe,l=s?jt(i):ga(i,!1,!1),c=s?jt(i):ga(i,!1,!1),u=new Xr(t);Qn(()=>{var d=e(),f=!1;if(ii(d)){var v=Lo(),g=!1;const h=w=>{if(!f){g=!0,v();try{w()}finally{Mr(),Rn||To()}}};d.then(w=>{h(()=>{zt(l,w),u.ensure(ta,r&&(p=>r(p,l)))})},w=>{h(()=>{if(zt(c,w),u.ensure(ta,o&&(p=>o(p,c))),!o)throw c.v})}),Sn(()=>{g||h(()=>{u.ensure(bl,n)})})}else zt(l,d),u.ensure(ta,r&&(h=>r(h,l)));return()=>{f=!0}})}function V(t,e,n=!1){var r=new Xr(t),o=n?$t:0;function s(i,l){r.ensure(i,l)}Qn(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function pe(t,e){Kr(()=>{var n=e();for(var r in n){var o=n[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Cl(t,e,n){for(var r=t.items,o=[],s=e.length,i=0;i<s;i++)Ta(e[i].e,o,!0);var l=s>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;Qi(c),c.append(n),r.clear(),Et(t,e[0].prev,e[s-1].next)}Ko(o,()=>{for(var u=0;u<s;u++){var d=e[u];l||(r.delete(d.k),Et(t,d.prev,d.next)),at(d.e,!l)}})}function Gr(t,e,n,r,o,s=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&yo)!==0;if(c){var u=t;i=u.appendChild(en())}var d=null,f=!1,v=new Map,g=Wr(()=>{var k=n();return ba(k)?k:k==null?[]:Sa(k)}),h,w;function p(){El(w,h,l,v,i,o,e,r,n),s!==null&&(h.length===0?d?Aa(d):d=mt(()=>s(i)):d!==null&&zn(d,()=>{d=null}))}Qn(()=>{w??(w=he),h=a(g);var k=h.length;if(!(f&&k===0)){f=k===0;var x,y,E,T;if(Fo()){var P=new Set,S=Te;for(y=0;y<k;y+=1){E=h[y],T=r(E,y);var C=l.items.get(T)??v.get(T);C?(e&(jr|Ur))!==0&&as(C,E,y,e):(x=os(null,l,null,null,E,T,y,o,e,n,!0),v.set(T,x)),P.add(T)}for(const[L,X]of l.items)P.has(L)||S.skipped_effects.add(X.e);S.add_callback(p)}else p();a(g)}})}function El(t,e,n,r,o,s,i,l,c){var u=(i&Ci)!==0,d=(i&(jr|Ur))!==0,f=e.length,v=n.items,g=n.first,h=g,w,p=null,k,x=[],y=[],E,T,P,S;if(u)for(S=0;S<f;S+=1)E=e[S],T=l(E,S),P=v.get(T),P!==void 0&&(P.a?.measure(),(k??(k=new Set)).add(P));for(S=0;S<f;S+=1){if(E=e[S],T=l(E,S),P=v.get(T),P===void 0){var C=r.get(T);if(C!==void 0){r.delete(T),v.set(T,C);var L=p?p.next:h;Et(n,p,C),Et(n,C,L),na(C,L,o),p=C}else{var X=h?h.e.nodes_start:o;p=os(X,n,p,p===null?n.first:p.next,E,T,S,s,i,c)}v.set(T,p),x=[],y=[],h=p.next;continue}if(d&&as(P,E,S,i),(P.e.f&ut)!==0&&(Aa(P.e),u&&(P.a?.unfix(),(k??(k=new Set)).delete(P))),P!==h){if(w!==void 0&&w.has(P)){if(x.length<y.length){var ee=y[0],F;p=ee.prev;var Y=x[0],j=x[x.length-1];for(F=0;F<x.length;F+=1)na(x[F],ee,o);for(F=0;F<y.length;F+=1)w.delete(y[F]);Et(n,Y.prev,j.next),Et(n,p,Y),Et(n,j,ee),h=ee,p=j,S-=1,x=[],y=[]}else w.delete(P),na(P,h,o),Et(n,P.prev,P.next),Et(n,P,p===null?n.first:p.next),Et(n,p,P),p=P;continue}for(x=[],y=[];h!==null&&h.k!==T;)(h.e.f&ut)===0&&(w??(w=new Set)).add(h),y.push(h),h=h.next;if(h===null)continue;P=h}x.push(P),p=P,h=P.next}if(h!==null||w!==void 0){for(var te=w===void 0?[]:Sa(w);h!==null;)(h.e.f&ut)===0&&te.push(h),h=h.next;var le=te.length;if(le>0){var Q=(i&yo)!==0&&f===0?o:null;if(u){for(S=0;S<le;S+=1)te[S].a?.measure();for(S=0;S<le;S+=1)te[S].a?.fix()}Cl(n,te,Q)}}u&&Sn(()=>{if(k!==void 0)for(P of k)P.a?.apply()}),t.first=n.first&&n.first.e,t.last=p&&p.e;for(var G of r.values())at(G.e);r.clear()}function as(t,e,n,r){(r&jr)!==0&&zt(t.v,e),(r&Ur)!==0?zt(t.i,n):t.i=n}function os(t,e,n,r,o,s,i,l,c,u,d){var f=(c&jr)!==0,v=(c&Ei)===0,g=f?v?ga(o,!1,!1):jt(o):o,h=(c&Ur)===0?i:jt(i),w={i:h,v:g,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var p=document.createDocumentFragment();p.append(t=en())}return w.e=mt(()=>l(t,g,h,u),Ii),w.e.prev=n&&n.e,w.e.next=r&&r.e,n===null?d||(e.first=w):(n.next=w,n.e.next=w.e),r!==null&&(r.prev=w,r.e.prev=w.e),w}finally{}}function na(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var i=hr(s);o.before(s),s=i}}function Et(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function ge(t,e,...n){var r=new Xr(t);Qn(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...n)))},$t)}function kl(t,e,n){var r=new Xr(t);Qn(()=>{var o=e()??null;r.ensure(o,o&&(s=>n(s,o)))},$t)}function ss(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=ss(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Pl(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=ss(t))&&(r&&(r+=" "),r+=e);return r}function we(t){return typeof t=="object"?Pl(t):t??""}const no=[...` 	
\r\f \v\uFEFF`];function xl(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||no.includes(r[i-1]))&&(l===r.length||no.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Tl(t,e){return t==null?null:String(t)}function ye(t,e,n,r,o,s){var i=t.__className;if(i!==n||i===void 0){var l=xl(n,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function yn(t,e,n,r){var o=t.__style;if(o!==e){var s=Tl(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Al=Symbol("is custom element"),Dl=Symbol("is html");function gf(t,e){var n=Na(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function pf(t,e){var n=Na(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Le(t,e,n,r){var o=Na(t);o[e]!==(o[e]=n)&&(e==="loading"&&(t[fi]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Nl(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Na(t){return t.__attributes??(t.__attributes={[Al]:t.nodeName.includes("-"),[Dl]:t.namespaceURI===Li})}var ro=new Map;function Nl(t){var e=t.getAttribute("is")||t.nodeName,n=ro.get(e);if(n)return n;ro.set(e,n=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=po(o);for(var i in r)r[i].set&&n.push(i);o=Ca(o)}return n}function Ll(t,e,n=e){var r=new WeakSet;el(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=ra(t)?aa(s):s,n(s),Te!==null&&r.add(Te),await es(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),it(e)==null&&t.value&&(n(ra(t)?aa(t.value):t.value),Te!==null&&r.add(Te)),Kr(()=>{var o=e();if(t===document.activeElement){var s=xr??Te;if(r.has(s))return}ra(t)&&o===aa(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function ra(t){var e=t.type;return e==="number"||e==="range"}function aa(t){return t===""?null:+t}function ao(t,e){return t===e||t?.[pn]===e}function st(t={},e,n,r){return ol(()=>{var o,s;return Kr(()=>{o=s,s=[],it(()=>{t!==n(...s)&&(e(t,...s),o&&ao(n(...o),t)&&e(null,...o))})}),()=>{Sn(()=>{s&&ao(n(...s),t)&&e(null,...s)})}}),t}function Zr(t=!1){const e=Ae,n=e.l.u;if(!n)return;let r=()=>fl(e.s);if(t){let o=0,s={};const i=vr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>a(i)}n.b.length&&rl(()=>{oo(e,r),ia(n.b)}),xe(()=>{const o=it(()=>n.m.map(li));return()=>{for(const s of o)typeof s=="function"&&s()}}),n.a.length&&xe(()=>{oo(e,r),ia(n.a)})}function oo(t,e){if(t.l.s)for(const n of t.l.s)a(n);e()}let kr=!1;function Ml(t){var e=kr;try{return kr=!1,[t(),kr]}finally{kr=e}}function ue(t,e,n,r){var o=!Zn||(n&Pi)!==0,s=(n&Ti)!==0,i=(n&Ai)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?it(r):r),l),d;if(s){var f=pn in t||di in t;d=Bn(t,e)?.set??(f&&e in t?y=>t[e]=y:void 0)}var v,g=!1;s?[v,g]=Ml(()=>t[e]):v=t[e],v===void 0&&r!==void 0&&(v=u(),d&&(o&&mi(),d(v)));var h;if(o?h=()=>{var y=t[e];return y===void 0?u():(c=!0,y)}:h=()=>{var y=t[e];return y!==void 0&&(l=void 0),y===void 0?l:y},o&&(n&xi)===0)return h;if(d){var w=t.$$legacy;return(function(y,E){return arguments.length>0?((!o||!E||w||g)&&d(E?h():y),y):h()})}var p=!1,k=((n&ki)!==0?vr:Wr)(()=>(p=!1,h()));s&&a(k);var x=he;return(function(y,E){if(arguments.length>0){const T=E?a(k):o&&s?Be(y):y;return m(k,T),p=!0,l!==void 0&&(l=T),y}return Cn&&p||(x.f&Rt)!==0?k.v:a(k)})}function Ce(t){Ae===null&&wo(),Zn&&Ae.l!==null?Il(Ae).m.push(t):xe(()=>{const e=it(t);if(typeof e=="function")return e})}function Il(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Ol="5";var ho;typeof window<"u"&&((ho=window.__svelte??(window.__svelte={})).v??(ho.v=new Set)).add(Ol);Ri();const is={};function Bl(t){Ue(is,t)}function ls(){const t=je(is);if(!t)throw new Error("No SearchContext found");return t}const cs={};function Rl(t){Ue(cs,t)}function Lt(){const t=je(cs);if(!t)throw new Error("No AppHistoryContext found");return t}function zl(t,e){ne(e,!0);const{addSearchParam:n,deleteSearchParam:r,getAppLocation:o}=Lt(),s=z(()=>o().searchParams),i="search",l=Be({value:o().searchParams.get(i)||""}),c=f=>{(a(s).get(i)||"")!==f&&(f===""?r(i):n(i,f))};xe(()=>{a(s);const f=l.value;it(()=>{c(f)})}),Bl(l);var u=J(),d=B(u);ge(d,()=>e.children??Ee),_(t,u),re()}const us={};function Fl(t){Ue(us,t)}function ds(){const t=je(us);if(!t)throw new Error("No TagSearchContext found");return t}function Hl(t,e){ne(e,!0);const n=Be({value:""});Fl(n);var r=J(),o=B(r);ge(o,()=>e.children??Ee),_(t,r),re()}const fs={};function jl(t){Ue(fs,t)}function vs(){const t=je(fs);if(!t)throw new Error("No FeedOrderContext found");return t}function Ul(t,e){ne(e,!0);const{addSearchParam:n,deleteSearchParam:r,getAppLocation:o}=Lt(),s=z(()=>o().searchParams),i="feedOrder";let l=U(Be(o().searchParams.get(i)||"newest"));const c=g=>{(a(s).get(i)||"newest")!==g&&(g==="newest"?r(i):n(i,g))};xe(()=>{a(s),a(l),it(()=>{c(a(l))})}),jl({getFeedOrder:()=>a(l),setFeedOrder:g=>{m(l,g,!0)}});var f=J(),v=B(f);ge(v,()=>e.children??Ee),_(t,f),re()}const hs={};function Vl(t){Ue(hs,t)}function Jr(){const t=je(hs);if(!t)throw new Error("No SidebarContext found");return t}function Wl(t,e){ne(e,!0);const n=(d,f)=>{if(!f)return d;if(f.type==="closed")return{type:"closed"};switch(d.type){case"opened":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:f.type==="swipe"?{type:"openSwiping"}:d;case"closed":return f.type==="open"?{type:"opening"}:f.type==="swipe"?{type:"closeSwiping"}:d;case"openSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"closeSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"opening":return f.type==="opened"?{type:"opened"}:d;default:return d}};let r=U(Be(n({type:"closed"})));const o=d=>{const f=it(()=>a(r));m(r,n(f,d),!0)};Vl({sidebarOpen:()=>{o({type:"open"})},sidebarClose:()=>{o({type:"close"})},handleComputeState:o,getSidebarState:()=>a(r)});var c=J(),u=B(c);ge(u,()=>e.children??Ee),_(t,c),re()}const gs={};function ql(t){Ue(gs,t)}function ps(){const t=je(gs);if(!t)throw new Error("No SelectedTagsContext found");return t}const _s=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function _f(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}const Kl=(t,e)=>{if(t.size!==e.size)return!0;for(const n of t)if(!e.has(n))return!0;return!1};function Yl(t,e){ne(e,!0);const{getAppLocation:n,replace:r}=Lt(),o=z(n),s=z(()=>a(o).searchParams),i="selectedTags",l=()=>new Set(n().searchParams.get(i)?.split(",")||[]);let c=U(Be(l()));const u=()=>{const w=l();if(Kl(w,a(c))){const p=a(o).pathname;a(c).size===0?a(s).delete(i):a(s).set(i,Array.from(a(c)).join(",")),r(`${p}${a(s).size>0?`?${a(s).toString()}`:""}`)}};xe(()=>{a(s),a(c),it(()=>{u()})}),ql({getSelectedTags:()=>a(c),addTag:w=>{a(c).has(w)||m(c,new Set([...a(c),w]),!0)},removeTag:w=>{const p=new Set(a(c));p.delete(w),m(c,p,!0)}});var g=J(),h=B(g);ge(h,()=>e.children??Ee),_(t,g),re()}const ms={};function Xl(t){Ue(ms,t)}function La(){const t=je(ms);if(!t)throw new Error("No LocalDBContext found");return t}const ws={};function Gl(t){Ue(ws,t)}function Zl(){const t=je(ws);if(!t)throw new Error("No SettingsContext found");return t}const ys={};function Jl(t){Ue(ys,t)}function $n(){const t=je(ys);if(!t)throw new Error("No BroadcastContext found");return t}const Ql="AppStorage",$l=1,nr="account",Dr="settings",St="notes",Ct="tags",ec="syncLog",nn="success",Ut="error",Ve=(t,e,n)=>{t?.addEventListener(e,n)},so=(t,e)=>new Promise((n,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();Ve(s,nn,()=>{const i=s?.result||[];n(i)}),Ve(s,Ut,i=>{r(i)})}),ma=(t,e,n)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);Ve(i,nn,()=>{const l=i?.result?.data;r(l)}),Ve(i,Ut,l=>{o(l)})}),sr=(t,e,n,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:r});Ve(c,nn,()=>{o()}),Ve(c,Ut,u=>{s(u)})}),oa=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{Ve(i,nn,()=>{l()}),Ve(i,Ut,u=>{c(u)})})}))},tc=(t,e,n)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);Ve(l,nn,()=>{r()}),Ve(l,Ut,c=>{o(c)})}),Pr=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{Ve(i,nn,()=>{l()}),Ve(i,Ut,u=>{c(u)})})}))},cn=(t,e)=>new Promise((n,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();Ve(i,nn,()=>{n()}),Ve(i,Ut,l=>{r(l)})});function nc(t,e){ne(e,!0);let n=U(Be({showFavicon:!0}));const{getDB:r}=La(),{createBroadcastChannel:o,tabId:s}=$n(),i=o(),l=z(r),c=async()=>{const w=await ma(a(l),Dr,"default");w&&m(n,w,!0)},u=async()=>{c()},d=async w=>{const p=JSON.parse(w.data),k=p;if(p.tabId&&p.tabId===s){k.type==="exit"&&(m(n,{showFavicon:!0},!0),cn(a(l),Dr));return}k.type==="updateSettings"?c():k.type==="exit"&&m(n,{showFavicon:!0},!0)},f=()=>a(n).showFavicon,v=async w=>{a(n).showFavicon=w,await sr(a(l),Dr,"default",{showFavicon:w}),i.postMessage({type:"updateSettings"})};Ce(()=>(u(),i.addEventListener(d),()=>{i.removeEventListener(d)})),Gl({getFaviconEnabled:f,setFaviconShown:v});var g=J(),h=B(g);ge(h,()=>e.children??Ee),_(t,g),re()}const bs={};function rc(t){Ue(bs,t)}function Ss(){const t=je(bs);if(!t)throw new Error("No AccountContext found");return t}function ac(t,e){ne(e,!0);let n=U(void 0);const{getDB:r}=La(),{createBroadcastChannel:o,tabId:s}=$n(),i=z(r),l=o(),c=async()=>{const y=await ma(a(i),nr,"default");m(n,y,!0)},u=y=>sr(a(i),nr,"default",y),d=async y=>{const E=await ma(a(i),nr,"default");E!==void 0&&m(n,E,!0),y(E)},f=async y=>{const E=JSON.parse(y.data);if(E.tabId&&E.tabId===s)return;const T=E;T.type==="initLocalAccount"?m(n,null):T.type==="initCloudAccount"?c():T.type==="disconnectCloudAccount"?m(n,null):T.type==="exit"?m(n,void 0):T.type==="updateAccount"&&c()};Ce(()=>(l.addEventListener(f),()=>{l.removeEventListener(f)})),rc({init:d,getAccount:()=>a(n),initLocalAccount:async()=>{m(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async y=>{const E={encryptedClientKey:y.encryptedClientKey||"",subscriptionExpires:y.subscriptionExpires||-1,lastSync:-1};await u(E),m(n,E,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{m(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async y=>{if(!a(n))throw new Error("No account to update subscription for");const E={...a(n),subscriptionExpires:y};await u(E),l.postMessage({type:"updateAccount"})},exitApp:async()=>{m(n,void 0),l.postMessage({type:"exit"}),await cn(a(i),nr)}});var k=J(),x=B(k);ge(x,()=>e.children??Ee),_(t,k),re()}const Cs={};function oc(t){Ue(Cs,t)}function En(){const t=je(Cs);if(!t)throw new Error("No NotesContext found");return t}const sc=()=>crypto.randomUUID(),ic=t=>{const e=new Map;for(const n of t||[])for(const r of n?.data.tags||[])e.set(r,{name:r,count:(e.get(r)?.count||0)+1});return e};function lc(t,e){ne(e,!0);const{getDB:n}=La(),{createBroadcastChannel:r,tabId:o}=$n(),s=z(n),i=r(),l=720*60*60*1e3;let c=U(0),u=U(!1),d=U(()=>new Map),f=U(()=>[]),v=U(()=>new Map);const g=()=>a(u),h=()=>a(c)>0,w=()=>{a(c)>0&&m(c,a(c)-1)},p=N=>{const R=a(f)(),b=a(v)(),O={...N};R.push(O),b.set(O.id,O),m(f,()=>R),m(v,()=>b)},k=N=>{const R=a(f)(),b=a(v)(),O=b.get(N.id);O&&(O.data=N.data),m(f,()=>R),m(v,()=>b)},x=N=>{const R=a(f)(),b=a(v)(),O=b.get(N);b.has(N)&&b.delete(N),O?.data?.type==="draft"&&b.delete("draft"),O&&(O.data=void 0),m(f,()=>R),m(v,()=>b)},y=()=>{m(f,()=>[]),m(d,()=>new Map),m(v,()=>new Map)},E=()=>a(f),T=N=>{const R=a(d)();for(const b of N){const O=R.get(b);O?O.count++:R.set(b,{name:b,count:1})}m(d,()=>R)},P=N=>{const R=a(d)();for(const b of N){const O=R.get(b);O&&(O.count--,O.count<=0&&R.delete(b))}m(d,()=>R)},S=async()=>{const[N,R]=await Promise.all([so(a(s),St),so(a(s),Ct).then($=>$.reduce((ke,Me)=>ke.set(Me.id,Me.data),new Map))]),b=[],O=[],oe=new Map;let _e=0;for(const $ of N)$.data.deletedAt&&Date.now()-$.data.deletedAt>l?b.push($.id):(O.push($),oe.set($.id,$),$.data.deletedAt&&(_e+=1),$.data.type==="draft"&&oe.set("draft",$));m(c,_e,!0);const fe=ic(O),Ne=new Map;fe.entries().forEach(([$,ke])=>{const Me=R.get($);Ne.set($,{...ke,...Me})}),await Pr(a(s),St,b),await cn(a(s),Ct),await oa(a(s),Ct,Array.from(Ne.values()).map($=>({id:$.name,data:{pinned:$.pinned}}))),m(f,()=>O),m(v,()=>oe),m(d,()=>Ne),m(u,!0)},C=async()=>{const N=a(v)(),R=N.get("draft");if(R)return R;const b={id:sc(),data:{type:"draft",url:"",name:"",text:"",tags:[],draft:{url:"",name:"",text:"",tags:[],createdAt:Date.now(),updatedAt:Date.now()},createdAt:Date.now(),updatedAt:Date.now()}};return await sr(a(s),St,b.id,{...b.data}),N.set("draft",b),p(b),i.postMessage({type:"createNoteDraft",data:{note:b}}),b},L=async N=>{const b=a(v)().get(N);if(!b||!b.data)return;const O=a(d)(),oe=b.data.tags;P(oe),x(N),i.postMessage({type:"deleteNote",data:{id:N}}),w(),await tc(a(s),St,N),await Pr(a(s),Ct,oe.filter(_e=>{const fe=O.get(_e);return fe?fe.count<=1:!1}))},X=async(N,R)=>{const b={id:R.id,data:{...R.data}},O=a(d)(),oe=R.data.tags.filter(fe=>!N.data.tags.includes(fe)),_e=N.data.tags.filter(fe=>!R.data.tags.includes(fe));await sr(a(s),St,b.id,{...b.data}),await oa(a(s),Ct,oe.filter(fe=>!O.has(fe)).map(fe=>({id:fe,data:{}}))),await Pr(a(s),Ct,_e.filter(fe=>{const Ne=O.get(fe);return Ne?Ne.count<=1:!1})),k(b),P(_e),T(oe),i.postMessage({type:"updateNote",data:{note:b,tagsToAdd:oe,tagsToDelete:_e}})},ee=async N=>{const R=a(v)(),b=Y(N);if(!b||!b.data)return;const O=R.get("draft");O&&O.id===b.id&&R.delete("draft");const oe={id:N,data:{type:"note",name:b.data.draft?.name??b.data.name,url:b.data.draft?.url??b.data.url,text:b.data.draft?.text??b.data.text,tags:b.data.draft?.tags??b.data.tags,updatedAt:Date.now(),createdAt:b.data.createdAt,pinnedAt:b.data.pinnedAt,deletedAt:b.data.deletedAt,draft:void 0}};return X(b,oe)},F=async()=>{y(),i.postMessage({type:"clearNotes"}),m(c,0),await cn(a(s),St),await cn(a(s),Ct)},Y=N=>{const R=a(v)();return N?R.get(N):R.get("draft")},j=async(N,R)=>{const O=a(v)().get(N);if(!O||!O.data)return;const oe={id:N,data:{...O.data,pinnedAt:R?Date.now():void 0}};return X(O,oe)},te=async N=>{const b=a(v)().get(N);if(!b||!b.data)return;const O={id:N,data:{...b.data,deletedAt:Date.now()}};m(c,a(c)+1),await X(b,O)},le=async N=>{const b=a(v)().get(N);if(!b||!b.data)return;const O={id:N,data:{...b.data,deletedAt:0}};w(),await X(b,O)},Q=async(N,R)=>{const b=a(d)();b.set(N,{name:N,count:b.get(N)?.count||0,pinned:R}),await sr(a(s),Ct,N,{pinned:R}),i.postMessage({type:"pinTag",data:{tag:N,pinned:R}}),m(d,()=>b)},G=async N=>{const R=a(v)(),b={};N.forEach(O=>{const oe=R.get(O.id);(!oe||oe&&oe.data&&oe.data.updatedAt<O.data.updatedAt)&&(b[O.id]=O)}),await oa(a(s),St,Object.values(b)),await S(),i.postMessage({type:"reloadNotes"})},H=async()=>{const N=[];a(f)().forEach(b=>{b&&b.data&&b.data.deletedAt&&N.push(b.id)}),m(c,0),await Pr(a(s),St,N),await S(),i.postMessage({type:"emptyBin"})},K=async(N,R)=>{if(N===""){const _e=a(v)().get("draft");_e?N=_e.id:N=(await C()).id}const b=Y(N);if(!b||!b.data)return;const O={id:N,data:{...b.data,draft:{...R,tags:R.tags,createdAt:b.data.draft?.createdAt||Date.now(),updatedAt:Date.now()}}};return await X(b,O),b.id},D=async N=>{const R=a(v)(),b=Y(N);if(!b||!b.data||!b.data.draft)return;if(b.data.type==="draft"){N===R.get("draft")?.id&&R.delete("draft"),await L(N);return}const O={id:N,data:{...b.data,draft:void 0}};return X(b,O)},I=async N=>{const R=JSON.parse(N.data),b=R;if(R.tabId&&R.tabId===o){b.type==="exit"&&(y(),await cn(a(s),St),await cn(a(s),Ct));return}if(b.type==="createNoteDraft"){const O=b.data.note;a(v)().set("draft",O),p(O)}else if(b.type==="updateNote"){const O=b.data,_e=a(v)().get(O.note.id);if(!_e||!_e.data)return;_e.data.deletedAt&&!O.note.data.deletedAt?w():!_e.data.deletedAt&&O.note.data.deletedAt&&m(c,a(c)+1),k(O.note),P(O.tagsToAdd),T(O.tagsToDelete)}else if(b.type==="deleteNote"){const O=b.data.id,_e=a(v)().get(O);if(!_e)return;w(),x(O),P(_e?.data?.tags||[])}else if(b.type==="pinTag"){const O=b.data.tag,oe=b.data.pinned,_e=a(d)(),fe=_e.get(O);fe&&(fe.pinned=oe,_e.set(O,fe)),m(d,()=>_e)}else b.type==="clearNotes"?y():b.type==="reloadNotes"||b.type==="emptyBin"?S():b.type==="exit"&&y()};Ce(()=>(S(),i.addEventListener(I),()=>{i.removeEventListener(I)})),oc({isInitedNotes:g,putNoteDraft:K,deleteNoteDraft:D,deleteNote:L,pinNote:j,getGetNotes:E,importNotes:G,clearNotes:F,getNoteById:Y,getGetMapTags:()=>a(d),pinTag:Q,moveNoteToBin:te,restoreNoteFromBin:le,checkNotesInBin:h,emptyBin:H,saveNoteDraft:ee,countNotesInBin:()=>a(c)});var ae=J(),se=B(ae);ge(se,()=>e.children??Ee),_(t,ae),re()}const Es={},cc=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function uc(t){Ue(Es,t)}function rn(){const t=je(Es);if(!t)throw new Error("No AnimationSettingsContext found");return t}function dc(t,e){ne(e,!0);let n=Be(cc());uc(n);var r=J(),o=B(r);ge(o,()=>e.children??Ee),_(t,r),re()}const ks={};function fc(t){Ue(ks,t)}function Ma(){const t=je(ks);if(!t)throw new Error("No ScrollingContext found");return t}function vc(t,e){ne(e,!0);let n=U(!1);const r=()=>a(n),o=_s(()=>{m(n,!1)},100);fc({isScrolling:r,enable:()=>{m(n,!0),o()}});var i=J(),l=B(i);ge(l,()=>e.children??Ee),_(t,i),re()}const Ps={};function hc(t){Ue(Ps,t)}function an(){const t=je(Ps);if(!t)throw new Error("No MobileSizeContext found");return t}function gc(t,e){ne(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let r=U(Be(n())),o=rn();const s=_s(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{m(r,n(),!0)})};hc({checkMobileSize:()=>a(r)}),Ce(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=J(),u=B(c);ge(u,()=>e.children??Ee),_(t,c),re()}const xs={};function pc(t){Ue(xs,t)}function on(){const t=je(xs);if(!t)throw new Error("No DialogContext found");return t}function _c(t,e){ne(e,!0);let n=U(0),r=U(!1),o=U(!0);pc({checkExistedDialog:()=>a(n)>0,showDialog:()=>{m(n,a(n)+1)},hideDialog:()=>{m(n,a(n)-1)},blockDialog:h=>{m(r,h,!0)},checkBlockedDialog:()=>a(r),setClosableDialog:h=>{m(o,h,!0)},checkClosableDialog:()=>a(o)});var v=J(),g=B(v);ge(g,()=>e.children??Ee),_(t,v),re()}const Ts={};function mc(t){Ue(Ts,t)}function Ia(){const t=je(Ts);if(!t)throw new Error("No ScrollContainerContext found");return t}function wc(t,e){ne(e,!0);let n=U(null);mc({setScrollContainer:l=>{m(n,l,!0)},getScrollContainer:()=>a(n)});var s=J(),i=B(s);ge(i,()=>e.children??Ee),_(t,s),re()}const As={};function yc(t){Ue(As,t)}function Oa(){const t=je(As);if(!t)throw new Error("No DialogPageHeightContext found");return t}function bc(t,e){ne(e,!0);let n=U(200);yc({setDialogPageHeight:l=>{m(n,l,!0)},getDialogPageHeight:()=>a(n)});var s=J(),i=B(s);ge(i,()=>e.children??Ee),_(t,s),re()}const Sc=[nr,Dr,St,Ct,ec];function Cc(){return new Promise((t,e)=>{const n=indexedDB.open(Ql,$l);Ve(n,"upgradeneeded",()=>{const r=n.result;for(const o of Sc)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),Ve(n,nn,()=>{const r=n.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),Ve(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),Ve(n,Ut,()=>{e(),console.error(Ut,n.error)})})}function Ec(t,e){ne(e,!0);let n=U(null);Ce(()=>{Cc().then(l=>{m(n,l,!0)}).catch(l=>{console.error("Failed to initialize LocalDB:",l)})}),Xl({getDB:()=>a(n)});var o=J(),s=B(o);{var i=l=>{var c=J(),u=B(c);ge(u,()=>e.children??Ee),_(l,c)};V(s,l=>{a(n)&&l(i)})}_(t,o),re()}const Ds={};function kc(t){Ue(Ds,t)}function pt(){const t=je(Ds);if(!t)throw new Error("No StackPagesContext found");return t}function Pc(t,e){ne(e,!0);const{createBroadcastChannel:n,tabId:r}=$n(),o=n(),{getAppLocation:s,getAppHistoryStack:i,navigate:l,goBack:c,replace:u}=Lt(),d=z(s),f=z(()=>a(d).searchParams),v="stackPages",g=()=>a(f).get(v)?.split(",")||[];let h=U(Be([]));const w=()=>{const S=g();a(h).join(",")!==S.join(",")&&m(h,S,!0)};xe(()=>{a(f),it(()=>{w()})});const p=S=>{if(!a(h).find(C=>{const[L]=C.split("?");return L===S})){const C=new URLSearchParams(a(d).search),L=a(d).pathname;C.set(v,[...a(h),S].join(",")),l(`${L}${C.size>0?`?${C.toString()}`:""}`)}},k=S=>a(h).find(C=>{const[L]=C.split("?");return L===S})!==void 0,x=()=>{const S=i(),C=S.findIndex(L=>L.searchParams.has(v));if(S.length<=1||C===-1){const L=new URLSearchParams(a(d).search);L.delete(v),u(`${a(d).pathname}${L.size>0?`?${L.toString()}`:""}`)}else if(C===0){c(S.length-C+1);const L=new URLSearchParams(a(d).search);L.delete(v),u(`${a(d).pathname}${L.size>0?`?${L.toString()}`:""}`)}else c(S.length-C)},y=(S,C)=>{if(C?.full)return`/${S}`;const L=a(h).slice();L.includes(S)||L.push(S);const X=new URLSearchParams(a(d).search);return X.set(v,L.join(",")),`${a(d).pathname}?${X}`},E=(S,C)=>L=>{if(L.preventDefault(),C?.full){l(S);return}p(S)};Ce(()=>{const S=C=>{const L=JSON.parse(C.data),X=L;if(L.tabId&&L.tabId===r){if(X.type==="navigateBack"&&a(h).length>0){const ee=new URLSearchParams(a(d).search);a(h).length>1?ee.set(v,a(h).slice(0,-1).join(",")):ee.delete(v),u(`${a(d).pathname}${ee.size>0?`?${ee.toString()}`:""}`)}return}};return o.addEventListener(S),()=>{o.removeEventListener(S)}}),kc({getStackPages:()=>a(h),pushStackPages:p,hasStackPage:k,clearStackPages:x,getPageUrl:y,createHandlePage:E,getStackPagesFormUrl:g});var T=J(),P=B(T);ge(P,()=>e.children??Ee),_(t,T),re()}function xc(t,e){ne(e,!0);const{createBroadcastChannel:n}=$n(),r=n(),o=p=>p.startsWith("/")?p:`/${p}`,s=p=>{const[k,x]=p.split("?");return{href:o(p),pathname:o(k),search:x?`?${x}`:"",searchParams:new URLSearchParams(x)}};let i=U(Be([{href:`${o(window.location.pathname)}${window.location.search}`,pathname:o(window.location.pathname),search:window.location.search,searchParams:new URLSearchParams(window.location.search)}]));const l=p=>{a(i).push(s(p)),window.history.replaceState(null,"",p)},c=p=>{a(i)[a(i).length-1]=s(p),window.history.replaceState(null,"",p)};Rl({getAppLocation:()=>a(i)[a(i).length-1],getAppHistoryStack:()=>a(i),navigate:l,replace:c,addSearchParam:(p,k)=>{const x=a(i)[a(i).length-1],y=x.searchParams;y.set(p,k),c(`${x.pathname}${y.size>0?`?${y.toString()}`:""}`)},deleteSearchParam:p=>{const k=a(i)[a(i).length-1],x=k.searchParams;x.delete(p),c(`${k.pathname}${x.size>0?`?${x.toString()}`:""}`)},back:p=>{const{to:k}=p||{};if(a(i).length>1){if(k){const y=a(i).findIndex(E=>E.href===k);if(y!==-1){m(i,a(i).slice(0,y+1),!0);const E=a(i)[a(i).length-1];window.history.replaceState(null,"",E.href)}else c(k);return}a(i).pop();const x=a(i)[a(i).length-1];window.history.replaceState(null,"",x.href)}else k?c(k):r.postMessage({type:"navigateBack"})},goBack:p=>{if(a(i).length>=p){m(i,a(i).slice(0,-p),!0);const k=a(i)[a(i).length-1];window.history.replaceState(null,"",k.href)}},clearHistoryStack:()=>{m(i,a(i).slice(-1),!0)}});var h=J(),w=B(h);ge(w,()=>e.children??Ee),_(t,h),re()}const Ns={};function Tc(t){Ue(Ns,t)}function Ls(){const t=je(Ns);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Ac(t,e){ne(e,!0);let n=Be({value:!1});const r=()=>n.value;Ce(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),Tc({getIsKeyboardVisible:r});var o=J(),s=B(o);ge(s,()=>e.children??Ee),_(t,o),re()}function Dc(t,e){ne(e,!0);const n=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};Jl({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=J(),s=B(o);ge(s,()=>e.children??Ee),_(t,o),re()}function Nc(t,e){Ec(t,{children:(n,r)=>{Dc(n,{children:(o,s)=>{dc(o,{children:(i,l)=>{vc(i,{children:(c,u)=>{gc(c,{children:(d,f)=>{_c(d,{children:(v,g)=>{wc(v,{children:(h,w)=>{bc(h,{children:(p,k)=>{Ac(p,{children:(x,y)=>{xc(x,{children:(E,T)=>{Pc(E,{children:(P,S)=>{var C=J(),L=B(C);ge(L,()=>e.children??Ee),_(P,C)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Lc(t,e){Nc(t,{children:(n,r)=>{Hl(n,{children:(o,s)=>{zl(o,{children:(i,l)=>{Ul(i,{children:(c,u)=>{Wl(c,{children:(d,f)=>{Yl(d,{children:(v,g)=>{nc(v,{children:(h,w)=>{ac(h,{children:(p,k)=>{lc(p,{children:(x,y)=>{var E=J(),T=B(E);ge(T,()=>e.children??Ee),_(x,E)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let Kt=U(""),sn=U(null),rr=U(null),ar=U(null);function mn(t,e){m(Kt,""),setTimeout(()=>{m(Kt,t,!0),e?.onFinish&&m(rr,e.onFinish,!0),e?.onCancel&&m(ar,e.onCancel,!0)},16)}const Mc=(t,e,n,r,o)=>{t.preventDefault(),a(e)&&(m(n,null),a(e)(),m(e,null)),m(r,""),a(o)?.style.removeProperty("opacity")};var Ic=q('<button type="button" class="undoButton svelte-1vxmgq5">undo</button>'),Oc=q('<div class="notification svelte-1vxmgq5"><span> </span> <!></div>'),Bc=q("<div><!></div>");function Rc(t,e){ne(e,!0),xe(()=>{a(Kt);const s=a(ar)?2e3:800;a(Kt)&&(a(sn)?.getBoundingClientRect(),a(sn)?.style.setProperty("opacity","1"));const i=setTimeout(()=>{a(sn)?.style.removeProperty("opacity")},s),l=setTimeout(()=>{m(Kt,""),a(rr)&&a(rr)(),m(rr,null),m(ar,null),a(sn)?.style.removeProperty("opacity")},s+400);return()=>{clearTimeout(i),clearTimeout(l)}});var n=Bc(),r=A(n);{var o=s=>{var i=Oc(),l=A(i),c=A(l),u=W(l,2);{var d=f=>{var v=Ic();v.__click=[Mc,ar,rr,Kt,sn],_(f,v)};V(u,f=>{a(ar)&&f(d)})}st(i,f=>m(sn,f),()=>a(sn)),ce(()=>Ht(c,a(Kt))),_(s,i)};V(r,s=>{a(Kt)&&s(o)})}_(t,n),re()}$e(["click"]);var zc=q('<span class="vh svelte-s92gzo"><!></span>');function Xe(t,e){var n=zc(),r=A(n);ge(r,()=>e.children),_(t,n)}var Fc=_l('<svg class="svelte-18et5h9"><use></use></svg>');function Se(t,e){let n=ue(e,"name",8,"");var r=Fc(),o=A(r);ce(()=>Le(o,"href",`#icon-${n()??""}`)),_(t,r)}const Hc=(t,e,n,r,o)=>{if(a(e))return;const s=n().type;s==="closed"?r():s==="opened"&&o()};var jc=q('<button class="buttonMenu svelte-bpktnw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Ms(t,e){ne(e,!0);const{sidebarOpen:n,getSidebarState:r,sidebarClose:o}=Jr(),{getStackPagesFormUrl:s}=pt(),{checkExistedDialog:i}=on();let l=z(()=>s().length>0||i());var c=jc();c.__click=[Hc,l,r,n,o];var u=A(c);pe(u,()=>({"--size":"32px"})),Se(u.lastChild,{name:"sidebarMenu"});var d=W(u,2);Xe(d,{children:(f,v)=>{var g=Ie("Menu");_(f,g)}}),_(t,c),re()}$e(["click"]);var Uc=(t,e)=>e.onChange?.(t.target?.value||""),Vc=q('<input class="svelte-15lr19w"/>');function wa(t,e){ne(e,!0);let n=ue(e,"value",15,""),r=ue(e,"ref",15,null);var o=Vc();o.__input=[Uc,e],st(o,s=>r(s),()=>r()),ce(()=>Le(o,"placeholder",e.placeholder)),Da("focus",o,function(...s){e.onFocus?.apply(this,s)}),Ll(o,n),_(t,o),re()}$e(["input"]);function Ba(t,e){ne(e,!0),Ce(()=>{const n=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),re()}var Wc=q('<dialog><div class="dialogInner svelte-1x410nl"><!></div></dialog> <!>',1);function Qr(t,e){ne(e,!0);let n=U(null),r=U(null),o=U(!1),{showDialog:s,hideDialog:i}=on();const l=h=>{h?.preventDefault();const w=setTimeout(()=>{e.onClosed()},150);a(n)?.addEventListener("transitionend",()=>{clearTimeout(w),e.onClosed()},{once:!0}),m(o,!1)};xe(()=>{e.startClose&&l()}),Ce(()=>(a(n)?.showModal(),a(n)?.getClientRects(),m(o,!0),a(n)?.addEventListener("cancel",l),a(n)?.addEventListener("close",l),()=>{a(n)?.removeEventListener("cancel",l),a(n)?.removeEventListener("close",l)})),Ce(()=>(s(),()=>{i()}));var c=Wc(),u=B(c),d=A(u),f=A(d);ge(f,()=>e.children),st(d,h=>m(r,h),()=>a(r)),st(u,h=>m(n,h),()=>a(n));var v=W(u,2);{var g=h=>{Ba(h,{get dialog(){return a(n)},get dialogInner(){return a(r)},onClose:l})};V(v,h=>{a(n)&&a(r)&&h(g)})}ce(()=>ye(u,1,we(["dialog",{shown:a(o)}]),"svelte-1x410nl")),_(t,c),re()}var qc=q("<div><!></div>");function Ra(t,e){ne(e,!0);let n=ue(e,"transformOrigin",3,"top right"),r=U(!1),o=U(null);const s=()=>{const d=setTimeout(()=>{e.onClosed()},150);a(o)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),m(r,!1)},i=d=>{d.target!==a(o)&&!a(o)?.contains(d.target)&&s()},l=d=>{d.target!==a(o)&&!a(o)?.contains(d.target)&&s()};Ce(()=>{a(o)?.getClientRects(),m(r,!0);const d=setTimeout(()=>{document.addEventListener("focusin",i),document.addEventListener("click",l)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",i),document.removeEventListener("click",l)}}),xe(()=>{e.startClose&&s()});var c=qc(),u=A(c);ge(u,()=>e.children),st(c,d=>m(o,d),()=>a(o)),ce(()=>{yn(c,`transform-origin: ${e.positionTop?"top right":n()};`),ye(c,1,we(["menu",{top:e.positionTop,shown:a(r)}]),"svelte-ujw4xi")}),_(t,c),re()}const Kc=(t,e)=>{a(e)||m(e,!0)};var Yc=(t,e)=>e("newest"),Xc=(t,e)=>e("oldest"),Gc=(t,e)=>e("AtoZ"),Zc=(t,e)=>e("ZtoA"),Jc=q("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),Qc=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),$c=q('<div class="orderMenu svelte-14zj87s"><button><!> <!></button> <!></div>');function eu(t,e){ne(e,!0);const n=(x,y=Ee)=>{var E=Jc(),T=A(E);T.__click=[Yc,d];var P=W(T,2);P.__click=[Xc,d];var S=W(P,2);S.__click=[Gc,d];var C=W(S,2);C.__click=[Zc,d],ce(()=>{ye(E,1,we(["menu",{menuDialog:y()}]),"svelte-14zj87s"),ye(T,1,we(["menuButton",{menuButtonDialog:y(),current:a(u)==="newest"}]),"svelte-14zj87s"),ye(P,1,we(["menuButton",{menuButtonDialog:y(),current:a(u)==="oldest"}]),"svelte-14zj87s"),ye(S,1,we(["menuButton",{menuButtonDialog:y(),current:a(u)==="AtoZ"}]),"svelte-14zj87s"),ye(C,1,we(["menuButton",{menuButtonDialog:y(),current:a(u)==="ZtoA"}]),"svelte-14zj87s")}),_(x,E)};let r=U(!1),o=U(!1);const{checkMobileSize:s}=an(),{getFeedOrder:i,setFeedOrder:l}=vs();let c=z(s),u=z(i);const d=x=>{m(o,!0),l(x)},f=()=>{m(r,!1),m(o,!1)};Ce(()=>{const x=y=>{y.key==="Escape"&&m(o,!0)};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)});var v=$c(),g=A(v);g.__click=[Kc,r],ye(g,1,we(["button","buttonMenu"]),"svelte-14zj87s");var h=A(g);Se(h,{name:"filter"});var w=W(h,2);Xe(w,{children:(x,y)=>{var E=Ie("show feed order menu");_(x,E)}});var p=W(g,2);{var k=x=>{var y=J(),E=B(y);{var T=S=>{Qr(S,{get startClose(){return a(o)},onClosed:f,children:(C,L)=>{n(C,()=>!0)},$$slots:{default:!0}})},P=S=>{var C=Qc(),L=B(C);pe(L,()=>({"--right":"20px","--top":"60px"})),Ra(L.lastChild,{get startClose(){return a(o)},onClosed:f,children:(X,ee)=>{n(X,()=>!1)},$$slots:{default:!0}}),_(S,C)};V(E,S=>{a(c)?S(T):S(P,!1)})}_(x,y)};V(p,x=>{a(r)&&x(k)})}_(t,v),re()}$e(["click"]);var Z=(t=>(t.NewNote="newNote",t.EditNote="editNote",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t.Install="install",t.InstallSuccess="installSuccess",t.Wellcome="wellcome",t))(Z||{}),tu=q("<a><!></a>"),nu=q("<button><!></button>");function Qt(t,e){let n=ue(e,"type",3,"standard"),r=ue(e,"typeButton",3,"button"),o=ue(e,"element",3,"button"),s=ue(e,"href",3,""),i=ue(e,"fullWidth",3,!1),l=ue(e,"withoutMinWidth",3,!1);var c=J(),u=B(c);{var d=v=>{var g=tu();g.__click=function(...w){e.onClick?.apply(this,w)};var h=A(g);ge(h,()=>e.children??Ee),ce(()=>{Le(g,"target",e.target),Le(g,"rel",e.rel),Le(g,"href",s()),ye(g,1,we(["button","a",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(v,g)},f=v=>{var g=nu();g.__click=function(...w){e.onClick?.apply(this,w)};var h=A(g);ge(h,()=>e.children??Ee),ce(()=>{Le(g,"type",r()),ye(g,1,we(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(v,g)};V(u,v=>{o()==="a"?v(d):v(f,!1)})}_(t,c)}$e(["click"]);var ru=q('<div class="block svelte-1dzbsx4"><span class="title svelte-1dzbsx4"> </span> <div class="controls svelte-1dzbsx4"><!> <!></div></div>');function Is(t,e){ne(e,!0);let n=ue(e,"buttonCancelTitle",3,"Cancel"),r=ue(e,"buttonConfirmTitle",3,"Confirm"),o=U(!1),s=U(!1);const i=()=>{m(o,!0)},l=()=>{m(o,!0),m(s,!0)};Qr(t,{get startClose(){return a(o)},onClosed:()=>{a(s)?e.onConfirm():e.onCancel()},children:(u,d)=>{var f=ru(),v=A(f),g=A(v),h=W(v,2),w=A(h);Qt(w,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(k,x)=>{var y=Ie();ce(()=>Ht(y,n())),_(k,y)},$$slots:{default:!0}});var p=W(w,2);Qt(p,{onClick:l,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(k,x)=>{var y=Ie();ce(()=>Ht(y,r())),_(k,y)},$$slots:{default:!0}}),ce(()=>Ht(g,e.title)),_(u,f)},$$slots:{default:!0}}),re()}const cr=t=>{const e=n=>{const r=n.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=n.key.toLowerCase(),i=n.metaKey,l=n.ctrlKey,c=n.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){n.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var au=q('<div class="block svelte-lfflvc"><a class="buttonAdd svelte-lfflvc"><span class="mobile svelte-lfflvc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="desktop svelte-lfflvc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function ou(t,e){ne(e,!1);const{createHandlePage:n,getPageUrl:r,pushStackPages:o,getStackPages:s}=pt(),{checkExistedDialog:i}=on(),l=()=>{s.length===0&&!i()&&o(Z.NewNote)};Ce(()=>cr({key:"n",action:l})),Zr();var c=au(),u=A(c),d=z(()=>n(Z.NewNote));u.__click=function(...p){a(d)?.apply(this,p)};var f=A(u),v=A(f);pe(v,()=>({"--size":"32px","--color":"#b0b0b0"})),Se(v.lastChild,{name:"add"});var g=W(v,2);Xe(g,{children:(p,k)=>{var x=Ie("Add note");_(p,x)}});var h=W(f,2),w=A(h);pe(w,()=>({"--size":"16px","--color":"#b0b0b0"})),Se(w.lastChild,{name:"plus"}),ce(p=>Le(u,"href",p),[()=>r(Z.NewNote)]),_(t,c),re()}$e(["click"]);const su=(t,e)=>{m(e,!0)};var iu=(t,e)=>{e("/",{full:!0})(t)},lu=q('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),cu=(t,e)=>{e(Z.Bin,{full:!0})(t)},uu=q('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),du=q('<button class="emptyBinButton svelte-13t3afu" type="button">Empty bin</button>'),fu=q('<div class="header svelte-13t3afu"><div class="top svelte-13t3afu"><div class="menu svelte-13t3afu"><a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="mobile svelte-13t3afu"><!></div> <!></div> <div class="bottom svelte-13t3afu"><div><div class="sidebarSearchWrapper"><!></div></div> <div class="right svelte-13t3afu"><div class="filter svelte-13t3afu"><div class="feedSearchWrapper svelte-13t3afu"><!></div> <!></div></div></div></div> <!>',1);function vu(t,e){ne(e,!0);const n=ls(),r=ds(),{getScrollContainer:o}=Ia();let s=z(o);const{emptyBin:i,checkNotesInBin:l}=En(),{getAppLocation:c,navigate:u}=Lt(),{createHandlePage:d,getPageUrl:f,getStackPages:v}=pt(),{checkExistedDialog:g}=on();let h=U(null);const w=z(l),p=z(()=>c().pathname);let k=U(!1);const x=()=>{a(s)&&a(s).scrollTo({top:0,behavior:"smooth"})},y=()=>{v.length===0&&!g()&&a(h)?.focus()};Ce(()=>cr({key:"k",meta:!0,action:y})),Ce(()=>cr({key:"k",ctrl:!0,action:y}));var E=fu(),T=B(E),P=A(T),S=A(P),C=A(S),L=z(()=>d(Z.Settings));C.__click=function(...$){a(L)?.apply(this,$)};var X=A(C);pe(X,()=>({"--rotate":"30deg","--size":"20px"})),Se(X.lastChild,{name:"settings"});var ee=W(C,2),F=z(()=>d(Z.Sync));ee.__click=function(...$){a(F)?.apply(this,$)};var Y=A(ee);pe(Y,()=>({"--size":"20px"})),Se(Y.lastChild,{name:"sync"});var j=W(ee,2);{var te=$=>{var ke=lu();ke.__click=[iu,d];var Me=A(ke);pe(Me,()=>({"--size":"18px"})),Se(Me.lastChild,{name:"note"}),ce(Re=>Le(ke,"href",Re),[()=>f("/",{full:!0})]),_($,ke)},le=$=>{var ke=J(),Me=B(ke);{var Re=de=>{var me=uu();me.__click=[cu,d];var Pe=A(me);pe(Pe,()=>({"--size":"20px"})),Se(Pe.lastChild,{name:"bin"}),ce(et=>Le(me,"href",et),[()=>f(Z.Bin,{full:!0})]),_(de,me)};V(Me,de=>{a(w)&&de(Re)},!0)}_($,ke)};V(j,$=>{a(p)===`/${Z.Bin}`?$(te):$(le,!1)})}var Q=W(S,2),G=A(Q);Ms(G,{});var H=W(Q,2);{var K=$=>{var ke=J(),Me=B(ke);{var Re=de=>{var me=du();me.__click=[su,k],_(de,me)};V(Me,de=>{a(w)&&de(Re)})}_($,ke)},D=$=>{ou($,{})};V(H,$=>{a(p)===`/${Z.Bin}`?$(K):$(D,!1)})}var I=W(P,2),ae=A(I);ye(ae,1,we(["left"]),"svelte-13t3afu");var se=A(ae),N=A(se);wa(N,{placeholder:"Search tag",get value(){return r.value},set value($){r.value=$}});var R=W(ae,2),b=A(R),O=A(b),oe=A(O);wa(oe,{onFocus:x,placeholder:"Search",get ref(){return a(h)},set ref($){m(h,$,!0)},get value(){return n.value},set value($){n.value=$}});var _e=W(O,2);eu(_e,{});var fe=W(T,2);{var Ne=$=>{Is($,{title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:()=>{i(),m(k,!1),u("/")},onCancel:()=>{m(k,!1)}})};V(fe,$=>{a(k)&&$(Ne)})}ce(($,ke)=>{Le(C,"href",$),Le(ee,"href",ke)},[()=>f(Z.Settings),()=>f(Z.Sync)]),_(t,E),re()}$e(["click"]);function hu(t,e){ne(e,!0);const{getIsKeyboardVisible:n}=Ls();let r=ue(e,"dialog",7);const o=z(n),s=rn();let i=null;const l=()=>{e.dialogState==="swiping"&&e.onClose()};xe(()=>(e.dialogState==="swiping"&&(i=setTimeout(l,3e3)),()=>{i&&(clearTimeout(i),i=null)}));let c=null,u=null;const d=3,f=50,v=5,g=.6,h=.3,w=.35,p=.95;let k=0,x=0,y=0,E=!1,T=!1,P=0,S=0,C=0;const L=()=>{k=0,x=0,E=!1,T=!1,P=0,S=0,C=0,y=0,c=null,u!==null&&(cancelAnimationFrame(u),u=null),i&&(clearTimeout(i),i=null)},X=H=>{if(!r()){console.warn("Touch start: No dialog element");return}if(e.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${e.dialogState}`);return}k=H.touches[0].clientX,x=H.touches[0].clientY,y=performance.now(),E=!0,T=!1},ee=H=>e.dialogState==="opened"&&H>0||e.dialogState==="swiping"&&H>0,F=()=>{if(r()){r().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const H=window.getComputedStyle(r()),K=H.transform||H.webkitTransform||"";if(S=r().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(P=0),K&&K!=="none")try{P=new DOMMatrix(K).m41}catch{console.warn("Could not parse transform matrix, using default position")}T=!0}catch(H){console.error("Error during swipe initialization:",H),L()}}},Y=()=>{if(!r())return;const K=Math.abs(P+C*S/100)/S;r().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-K)})`)},j=()=>{if(u=null,!c||!E||!r()||a(o)){L();return}const H=[...c.touches].reduce((O,oe)=>O+oe.clientX,0)/c.touches.length,K=[...c.touches].reduce((O,oe)=>O+oe.clientY,0)/c.touches.length,D=H-k,I=K-x,ae=Math.abs(D)>Math.abs(I),se=Math.abs(D)>d;if(!T)if(ae&&se&&ee(D))try{F()}catch(O){console.error("Error initializing swipe:",O),L();return}else return;let N=P+D*p;N=Math.max(0,Math.min(S,N)),!(N<0)&&(r().style.setProperty("--transition-timing","0s"),r().style.transform=`translate3d(${N}px, 0, 0)`,s.swipingRatio=Math.abs(1-N/S),C=(N-P)/S*100,e.dialogState==="swiping"&&(i&&clearTimeout(i),i=setTimeout(l,3e3)),Y())},te=H=>{if(!E)return;c=H,u===null&&(u=requestAnimationFrame(j));const K=H.touches[0].clientX-k,D=H.touches[0].clientY-x,I=Math.abs(K)>Math.abs(D);T&&I&&H.preventDefault()},le=H=>{const K=Math.abs(H);if(K>=g)return v;if(K>=h){const D=(K-h)/(g-h);return f-D*(f-v)}else return f},Q=(H,K)=>{if(Math.abs(H)>=g)return w*.5;const I=Math.abs(C)/100;return K?w*Math.max(.5,1-I):w*Math.max(.5,I)},G=H=>{if(u!==null&&(cancelAnimationFrame(u),u=null),!E||!r()){L();return}if(!T){L();return}let K=0;if(H?.changedTouches?.[0]){const N=H.changedTouches[0].clientX,b=performance.now()-y;b>0&&(K=(N-k)/b)}const D=le(K);let I=null;e.dialogState==="swiping"&&(I=Math.abs(C)>D||K<-h?"close":"open");const ae=e.dialogState==="swiping"&&I==="close",se=Q(K,ae);s.duration=se-.02,r().style.setProperty("--transition-timing",`${se}s`),r().offsetWidth,r().style.transform="",I==="open"?e.onOpen():I==="close"&&e.onClose(),r()?.style.removeProperty("--backdrop-bg"),L()};Ce(()=>(r().addEventListener("touchstart",X,{passive:!0}),r().addEventListener("touchmove",te,{passive:!1}),r().addEventListener("touchend",G,{passive:!0}),r().addEventListener("touchcancel",G,{passive:!0}),()=>{r().removeEventListener("touchstart",X),r().removeEventListener("touchmove",te),r().removeEventListener("touchend",G),r().removeEventListener("touchcancel",G),u!==null&&cancelAnimationFrame(u)})),re()}var gu=(t,e)=>{e.onStartClose()},pu=q('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),_u=q('<dialog><div class="dialogInner svelte-vr2o0t"><div class="header svelte-vr2o0t"><div class="navigation__wrapper svelte-vr2o0t"><!></div></div> <!></div></dialog> <!>',1);function mu(t,e){ne(e,!0);let n=350;const{isScrolling:r,enable:o}=Ma();let s=U(null),i=U(null);const l=rn(),c=P=>{P.preventDefault(),e.onStartClose()};Ce(()=>(a(s)?.addEventListener("close",e.onClosed),a(s)?.addEventListener("cancel",c),()=>{a(s)?.removeEventListener("close",e.onClosed),a(s)?.removeEventListener("cancel",c)}));const u=()=>{a(s)?.style.removeProperty("--transition-timing"),a(s)?.style.removeProperty("transform"),a(s)?.style.removeProperty("--backdrop-bg")},d=()=>{o()},f=z(r);xe(()=>{if(e.dialogState,!!a(s))switch(e.dialogState){case"opening":{a(s).open||a(s).showModal(),a(s).getBoundingClientRect();const P=setTimeout(()=>{u()},n+1),S=()=>{clearTimeout(P),u()};return a(s)?.addEventListener("transitionend",S,{once:!0}),e.onOpened(),()=>{clearTimeout(P),a(s)?.removeEventListener("transitionend",S)}}case"closing":{const P=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),S=()=>{clearTimeout(P),e.onClosed()};return a(s)?.addEventListener("transitionend",S,{once:!0}),()=>{clearTimeout(P),a(s)?.removeEventListener("transitionend",S)}}case"opened":u()}});var v=_u(),g=B(v),h=A(g),w=A(h),p=A(w),k=A(p);{var x=P=>{var S=pu();ye(S,1,we(["navigateButton","buttonBack"]),"svelte-vr2o0t"),S.__click=[gu,e];var C=A(S);pe(C,()=>({"--size":"32px"})),Se(C.lastChild,{name:"back"});var L=W(C,2);Xe(L,{children:(X,ee)=>{var F=Ie("back");_(X,F)}}),_(P,S)};V(k,P=>{e.blocked||P(x)})}var y=W(w,2);ge(y,()=>e.children),st(h,P=>m(i,P),()=>a(i)),st(g,P=>m(s,P),()=>a(s));var E=W(g,2);{var T=P=>{hu(P,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return a(s)}})};V(E,P=>{(!a(f)&&e.dialogState==="opened"||e.dialogState==="swiping")&&!e.blocked&&P(T)})}ce(()=>ye(g,1,we([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:l.working&&(!l.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-vr2o0t")),Da("scroll",h,d),_(t,v),re()}$e(["click"]);const io=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function wu(t,e){ne(e,!0);let n=ue(e,"hiddenDialog",3,!1),r=ue(e,"onClose",3,()=>{});const o=rn();let s=U(Be(io({type:"closed"})));const i=p=>{m(s,io(a(s),p),!0)},l=()=>{e.onStartClose&&(e.onStartClose(),i({type:"close"}))},c=()=>{i({type:"open"})},u=()=>{i({type:"opened"}),o.swipingRatio=1,o.duration=.2},d=()=>{r()(),i({type:"closed"}),o.swipingRatio=1,o.duration=.2},f=()=>{i({type:"swipe"})};xe(()=>{a(s).type==="swiping"?o.isSwiping=!0:o.isSwiping=!1,a(s).type==="closed"&&e.shownDialog?c():a(s).type==="opened"&&!e.shownDialog&&l()});var v={handleComputeState:i},g=J(),h=B(g);{var w=p=>{{let k=z(()=>!e.onStartClose);mu(p,{onSwipe:f,onOpened:u,onClosed:d,onStartClose:l,onStartOpen:c,get dialogState(){return a(s).type},get hidden(){return n()},get blocked(){return a(k)},children:(x,y)=>{var E=J(),T=B(E);ge(T,()=>e.children),_(x,E)},$$slots:{default:!0}})}};V(h,p=>{a(s).type!=="closed"&&p(w)})}return _(t,g),re(v)}const yu=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const o=i=>{i.preventDefault(),n()},s=()=>{r?.()};Ce(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Ce(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var bu=(t,e)=>{e.onStartBack()},Su=q('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Cu=(t,e)=>{e.onStartClose()},Eu=q('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),ku=q('<dialog><div class="dialogInner svelte-rt409n"><div class="header svelte-rt409n"><div class="navigation__wrapper svelte-rt409n"><div><!></div> <div><!></div></div></div> <!></div></dialog> <!>',1);function Pu(t,e){ne(e,!0);let n=ue(e,"blockedDialog",3,!1),r=ue(e,"hiddenDialog",3,!1),o=ue(e,"isDesktopAnimationOff",3,!1),s=U(null),i=U(null),l=U(!1);yu({getDialog:()=>a(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=rn();xe(()=>{e.stateDialog==="closing"&&(c.working?a(s)?.addEventListener("transitionend",()=>{a(s)?.close()},{once:!0}):a(s)?.close())});const{getDialogPageHeight:u}=Oa(),d=z(u);Ce(()=>{setTimeout(()=>{m(l,!0)},50)});var f=ku(),v=B(f),g=A(v),h=A(g),w=A(h),p=A(w),k=A(p);{var x=C=>{var L=Su();ye(L,1,we(["navigateButton","buttonBack"]),"svelte-rt409n"),L.__click=[bu,e];var X=A(L);pe(X,()=>({"--size":"28px"})),Se(X.lastChild,{name:"back"});var ee=W(X,2);Xe(ee,{children:(F,Y)=>{var j=Ie("back");_(F,j)}}),_(C,L)};V(k,C=>{(!(n()||r())||n())&&e.onStartBack&&C(x)})}var y=W(p,2),E=A(y);{var T=C=>{var L=Eu();ye(L,1,we(["navigateButton","buttonClose"]),"svelte-rt409n"),L.__click=[Cu,e];var X=A(L);pe(X,()=>({"--size":"28px"})),Se(X.lastChild,{name:"close"});var ee=W(X,2);Xe(ee,{children:(F,Y)=>{var j=Ie("close");_(F,j)}}),_(C,L)};V(E,C=>{n()||r()||C(T)})}var P=W(h,2);ge(P,()=>e.children),st(g,C=>m(i,C),()=>a(i)),st(v,C=>m(s,C),()=>a(s));var S=W(v,2);Ba(S,{get dialog(){return a(s)},get dialogInner(){return a(i)},get onClose(){return e.onStartClose}}),ce(()=>{yn(v,`height: ${a(d)+74}px`),ye(v,1,we([{open:e.stateDialog==="open",isHeightAnimationOn:a(l),isAnimationOn:c.working,isDesktopAnimationOff:o(),hiddenDialog:r()}]),"svelte-rt409n")}),_(t,f),re()}$e(["click"]);const xu=({onStartClose:t,onClose:e})=>{let n=U("close");return{get state(){return a(n)},set state(i){m(n,i,!0)},handleStartClose:(i=!1)=>{i||(m(n,"closing"),t?.())},handleOpen:()=>{m(n,"open")},handleClose:()=>{m(n,"close"),e?.()}}};function Tu(t,e){ne(e,!0);let n=ue(e,"blockedDialog",3,!1),r=ue(e,"hiddenDialog",3,!1),o=ue(e,"onStartClose",3,()=>{}),s=ue(e,"onClose",3,()=>{}),i=xu({onStartClose:o(),onClose:s()});xe(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=f=>{f.key==="Escape"&&n()&&(f.preventDefault(),f.stopPropagation())};Ce(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=J(),u=B(c);{var d=f=>{Pu(f,{get stateDialog(){return i.state},get blockedDialog(){return n()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(v,g)=>{var h=J(),w=B(h);ge(w,()=>e.children),_(v,h)},$$slots:{default:!0}})};V(u,f=>{i.state!=="close"&&f(d)})}_(t,c),re()}function Au(t,e){ne(e,!0);let n=ue(e,"blockedDialog",3,!1),r=ue(e,"hiddenDialog",3,!1),o=ue(e,"blockedBack",3,!1),s=ue(e,"onStartClose",3,()=>{}),i=ue(e,"onClose",3,()=>{});const l=z(()=>o()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=on();Ce(()=>(c(),()=>{u()}));const{checkMobileSize:d}=an();var f=J(),v=B(f);{var g=w=>{wu(w,{get shownDialog(){return e.shownDialog},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return a(l)},get onClose(){return i()}})},h=w=>{Tu(w,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return a(l)},get onStartClose(){return s()},get onClose(){return i()}})};V(v,w=>{d()?w(g):w(h,!1)})}_(t,f),re()}function lo(t,e){ne(e,!0);const{back:n}=Lt(),{clearStackPages:r}=pt(),{checkMobileSize:o}=an();let s=ue(e,"blocked",3,!1),i=ue(e,"isLastDialog",3,!1),l=ue(e,"onBack",3,()=>{}),c=ue(e,"onClosed",3,()=>{});const{checkBlockedDialog:u,checkClosableDialog:d}=on(),f=z(()=>s()||u()),v=z(d),g=()=>{(!a(f)||a(f))&&e.shown&&(n(),l()())},h=()=>{((!a(f)||a(f)&&a(v))&&e.shown||!e.shown)&&r()},w=()=>{c()()};{let p=z(()=>a(f)&&e.shown||a(v)===!1),k=z(()=>a(f)||i()&&(a(v)===!1||!o()));Au(t,{get shownDialog(){return e.shown},get blockedDialog(){return a(p)},get hiddenDialog(){return e.hidden},get blockedBack(){return a(k)},onStartBack:g,onStartClose:h,onClose:w,children:(x,y)=>{var E=J(),T=B(E);ge(T,()=>e.children),_(x,E)},$$slots:{default:!0}})}re()}var Du=q('<div class="svelte-1x9a4ve"><!></div>');function Oe(t,e){ne(e,!0);const{setDialogPageHeight:n}=Oa();let r=U(null);Ce(()=>{a(r)&&(a(r).getBoundingClientRect(),a(r).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(a(r))return i.observe(a(r)),()=>{a(r)&&i.unobserve(a(r)),i.disconnect()}});var o=Du(),s=A(o);ge(s,()=>e.children),st(o,i=>m(r,i),()=>a(r)),_(t,o),re()}var Nu=q('<div class="svelte-stjbkr"><p class="svelte-stjbkr">Page not found</p> <!></div>');function Lu(t,e){ne(e,!1);const{navigate:n}=Lt(),r=i=>{i.preventDefault(),n("/")};Zr();var o=Nu(),s=W(A(o),2);Qt(s,{element:"a",href:"/",onClick:r,children:(i,l)=>{var c=Ie("close");_(i,c)},$$slots:{default:!0}}),_(t,o),re()}const Mu="modulepreload",Iu=function(t){return"/"+t},co={},Fe=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(n.map(u=>{if(u=Iu(u),u in co)return;co[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":Mu,d||(v.as="script"),v.crossOrigin="",v.href=u,l&&v.setAttribute("nonce",l),document.head.appendChild(v),d)return new Promise((g,h)=>{v.addEventListener("load",g),v.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Ou=q('<div class="svelte-10xfz1h"><p class="svelte-10xfz1h">Something went wrong. Please reload the page</p> <!></div>');function Bu(t){var e=Ou(),n=W(A(e),2);Qt(n,{onClick:()=>location.reload(),children:(r,o)=>{var s=Ie("Reload");_(r,s)},$$slots:{default:!0}}),_(t,e)}var Ru=q('<div><!> <div class="loader svelte-m0sno1"></div></div>');function Os(t,e){ne(e,!0);let n=U(!1);Ce(()=>{const s=setTimeout(()=>{m(n,!0)},200);return()=>{clearTimeout(s)}});var r=Ru(),o=A(r);ge(o,()=>e.children??Ee),ce(()=>ye(r,1,we(["block",{shown:a(n)}]),"svelte-m0sno1")),_(t,r),re()}var zu=q('<div class="svelte-1mu1b44"><!></div>');function Fu(t,e){ne(e,!0);const{getDialogPageHeight:n}=Oa(),r=z(n);var o=zu(),s=A(o);Os(s,{}),ce(()=>yn(o,`min-height: ${a(r)??""}px;`)),_(t,o),re()}function He(t,e){ne(e,!0);const n={},r=Object.assign({"./Pages/About.svelte":()=>Fe(()=>import("./BkQCY7E_.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>Fe(()=>import("./BL-Ad7FZ.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>Fe(()=>import("./BEt5Y6Hh.js"),__vite__mapDeps([6,3,7])),"./Pages/AccountSetup.svelte":()=>Fe(()=>import("./V8kYadGs.js"),__vite__mapDeps([8,9])),"./Pages/Auth.svelte":()=>Fe(()=>import("./CYxeIIxL.js"),__vite__mapDeps([10,11])),"./Pages/ClearStore.svelte":()=>Fe(()=>import("./C7Azcxo6.js"),__vite__mapDeps([12,13])),"./Pages/ConfirmAccessKey.svelte":()=>Fe(()=>import("./Cxw1tYo6.js"),__vite__mapDeps([14,4,3,15,16,17,18])),"./Pages/EditNote.svelte":()=>Fe(()=>import("./CNCpl9VC.js"),__vite__mapDeps([19,20,21,16,17,22,23,24])),"./Pages/Exit.svelte":()=>Fe(()=>import("./48eoajN4.js"),__vite__mapDeps([25,26])),"./Pages/ExportData.svelte":()=>Fe(()=>import("./BWVH35wP.js"),__vite__mapDeps([27,21,16,17,22,28,29,30])),"./Pages/ImportData.svelte":()=>Fe(()=>import("./B0asrb0J.js"),__vite__mapDeps([31,21,16,17,22,32])),"./Pages/Install.svelte":()=>Fe(()=>import("./Lj2oHVhr.js"),__vite__mapDeps([33,34])),"./Pages/InstallSuccess.svelte":()=>Fe(()=>import("./6whESR3w.js"),__vite__mapDeps([35,36])),"./Pages/NewNote.svelte":()=>Fe(()=>import("./CaZD1jqq.js"),__vite__mapDeps([37,20,21,16,17,22,23])),"./Pages/Settings.svelte":()=>Fe(()=>import("./DRnVlPbk.js"),__vite__mapDeps([38,28,29,39])),"./Pages/Signin.svelte":()=>Fe(()=>import("./CbeeEu5U.js"),__vite__mapDeps([40,4,3,15,41])),"./Pages/Signup.svelte":()=>Fe(()=>import("./CgHGqhNu.js"),__vite__mapDeps([42,15,4,3,43])),"./Pages/Subscription.svelte":()=>Fe(()=>import("./Zv8aa1Zp.js"),__vite__mapDeps([44,45])),"./Pages/Sync.svelte":()=>Fe(()=>import("./CFJrBmif.js"),__vite__mapDeps([46,47]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(r[c]){const u=r[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var s=J(),i=B(s);Sl(i,()=>o(e.page),l=>{Fu(l,{})},(l,c)=>{const u=z(()=>a(c).default);var d=J(),f=B(d);kl(f,()=>a(u),(v,g)=>{g(v,{get params(){return e.params},get hidden(){return e.hidden}})}),_(l,d)},l=>{Bu(l)}),_(t,s),re()}var Hu=q('<button><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Bs(t,e){ne(e,!0);let n=ue(e,"type",3,"button"),r=!1,o=U(null);xe(()=>{e.onRef&&e.onRef(a(o))});const s=g=>{(g.key==="Enter"||g.key===" ")&&(r=!0)},i=g=>{e.onClick(r),r&&(r=!1)};let l=z(()=>e.style==="selected"?"45deg":"0deg");var c=Hu();c.__keydown=s,c.__click=i;var u=A(c);ge(u,()=>e.children??Ee);var d=W(u,2);pe(d,()=>({"--size":e.size==="small"?"10px":"12px","--rotate":a(l)})),Se(d.lastChild,{name:"plus"});var f=W(d,2);{var v=g=>{Xe(g,{children:(h,w)=>{var p=Ie("add tag");_(h,p)}})};V(f,g=>{e.children===void 0&&g(v)})}st(c,g=>m(o,g),()=>a(o)),ce(()=>{Le(c,"type",n()),ye(c,1,we([{selectedTag:e.style==="selected",small:e.size==="small",empty:e.children===void 0}]),"svelte-uu8a24")}),_(t,c),re()}$e(["keydown","click"]);var ju=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Uu=q("<!> <span> </span>",1),Vu=q("<div></div>");function uo(t,e){ne(e,!0);let n=ue(e,"mobile",3,!1);const{getGetMapTags:r}=En();let o=U(null),s=U(Be({value:!1}));const i=d=>{m(o,d,!0)};let c=z(()=>{const d=r()();return[...e.tags].sort((f,v)=>f.toLowerCase()==="inbox"?-1:v.toLowerCase()==="inbox"?1:d.get(f)?.pinned?-1:d.get(v)?.pinned?1:f.localeCompare(v))});xe(()=>{a(s),it(()=>{a(o)&&a(s).value&&a(o).focus()})});var u=Vu();Gr(u,22,()=>a(c),d=>d,(d,f,v)=>{{let g=z(()=>a(v)===0?i:void 0);Bs(d,{get onRef(){return a(g)},onClick:h=>{h?m(s,{value:!0},!0):m(s,{value:!1},!0),e.handleTagClick(f)},children:(h,w)=>{var p=Uu(),k=B(p);{var x=T=>{var P=ju(),S=B(P);pe(S,()=>({"--size":"18px"})),Se(S.lastChild,{name:"pin"}),_(T,P)};V(k,T=>{r()().get(f)?.pinned&&T(x)})}var y=W(k,2),E=A(y);ce(()=>Ht(E,f)),_(h,p)},$$slots:{default:!0}})}}),ce(()=>ye(u,1,we(["tags",{mobile:n()}]),"svelte-1c53r32")),_(t,u),re()}const Wu=(t,e)=>{a(e)||m(e,!0)},qu=(t,e,n,r)=>{for(const o of e.selectedTags)n(o,!0);m(r,!0)},Ku=(t,e,n,r)=>{for(const o of e.selectedTags)n(o,!1);m(r,!0)};var Yu=q('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin</button></li>'),Xu=q('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin</button></li>'),Gu=q("<ul><!> <!></ul>"),Zu=q('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Ju=q("<!> <span> </span>",1),Qu=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),$u=q('<div><div><!> <div class="tagsMenu__wrapper svelte-58z9m1"><button class="tagsMenu svelte-58z9m1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div></div> <!></div>');function fo(t,e){ne(e,!0);const n=(E,T=Ee)=>{var P=Gu(),S=A(P);{var C=ee=>{var F=Yu(),Y=A(F);Y.__click=[qu,e,s,d];var j=A(Y);pe(j,()=>({"--size":"22px"})),Se(j.lastChild,{name:"pin"}),ce(()=>ye(Y,1,we(["button",{buttonMenuDialog:T()}]),"svelte-58z9m1")),_(ee,F)};V(S,ee=>{a(p)&&ee(C)})}var L=W(S,2);{var X=ee=>{var F=Xu(),Y=A(F);Y.__click=[Ku,e,s,d];var j=A(Y);pe(j,()=>({"--size":"22px"})),Se(j.lastChild,{name:"pin-cancel"}),ce(()=>ye(Y,1,we(["button",{buttonMenuDialog:T()}]),"svelte-58z9m1")),_(ee,F)};V(L,ee=>{a(w)&&ee(X)})}ce(()=>ye(P,1,we(["menu",{menuDialog:T()}]),"svelte-58z9m1")),_(E,P)},{checkMobileSize:r}=an(),{getGetMapTags:o,pinTag:s}=En();let i=z(r),l=U(null),c=U(Be({value:!1})),u=U(!1),d=U(!1);const f=E=>{m(l,E,!0)},v=()=>{m(u,!1),m(d,!1)},g=()=>{const E=o()();for(const T of e.selectedTags)if(E.get(T)?.pinned)return!0;return!1},h=()=>{const E=o()();for(const T of e.selectedTags)if(!E.get(T)?.pinned)return!0;return!1};let w=z(g),p=z(h);xe(()=>{a(c),it(()=>{a(l)&&a(c).value&&a(l).focus()})});var k=J(),x=B(k);{var y=E=>{var T=$u(),P=A(T);ye(P,1,we(["tags","selectedTags"]),"svelte-58z9m1");var S=A(P);Gr(S,18,()=>e.selectedTags,j=>j,(j,te,le)=>{{let Q=z(()=>a(le)===e.selectedTags.size-1?f:void 0);Bs(j,{get onRef(){return a(Q)},onClick:G=>{G?m(c,{value:!0},!0):m(c,{value:!1},!0),e.handleSelectedTagClick(te)},style:"selected",children:(G,H)=>{var K=Ju(),D=B(K);{var I=N=>{var R=Zu(),b=A(R);pe(b,()=>({"--size":"18px"})),Se(b.lastChild,{name:"pin"}),_(N,R)};V(D,N=>{o()().get(te)?.pinned&&N(I)})}var ae=W(D,2),se=A(ae);ce(()=>Ht(se,te)),_(G,K)},$$slots:{default:!0}})}});var C=W(S,2),L=A(C);L.__click=[Wu,u];var X=A(L);pe(X,()=>({"--size":"20px"})),Se(X.lastChild,{name:"menu"});var ee=W(X,2);Xe(ee,{children:(j,te)=>{var le=Ie("tags menu");_(j,le)}});var F=W(P,2);{var Y=j=>{var te=J(),le=B(te);{var Q=H=>{Qr(H,{get startClose(){return a(d)},onClosed:v,children:(K,D)=>{n(K,()=>!0)},$$slots:{default:!0}})},G=H=>{var K=Qu(),D=B(K);pe(D,()=>({"--right":"50px","--top":"calc(100% - 8px)"})),Ra(D.lastChild,{transformOrigin:"top",get startClose(){return a(d)},onClosed:v,children:(I,ae)=>{n(I,()=>!1)},$$slots:{default:!0}}),_(H,K)};V(le,H=>{a(i)?H(Q):H(G,!1)})}_(j,te)};V(F,j=>{a(u)&&j(Y)})}_(E,T)};V(x,E=>{e.selectedTags.size>0&&E(y)})}_(t,k),re()}$e(["click"]);const ed=(t,e,n)=>{if(t.has("inbox"))return[];const r=[],o=Array.from(t.values());for(const s of e)if(s.data&&!(n&&!n(s))){if(t.size===0){for(const i of s?.data?.tags||[])r.includes(i)||r.push(i);for(const i of s?.data?.draft?.tags||[])r.includes(i)||r.push(i);continue}if(s.data&&o.every(i=>s.data?.tags.includes(i)))for(const i of s.data.tags)!t.has(i)&&!r.includes(i)&&r.push(i);if(s&&s.data.draft&&o.every(i=>s.data?.draft?.tags.includes(i)))for(const i of s.data.draft.tags)!t.has(i)&&!r.includes(i)&&r.push(i)}return r};function td(t,e){ne(e,!0);const n=rn(),{getIsKeyboardVisible:r}=Ls();let o=ue(e,"dialog",7);const s=z(r),i=3,l=50,c=5,u=.6,d=.3,f=.35,v=.95;let g=0,h=0,w=0,p=!1,k=!1,x=0,y=0,E=0;const T=()=>{g=0,h=0,p=!1,k=!1,x=0,y=0,E=0,w=0,P!==null&&(cancelAnimationFrame(P),P=null),S=null};let P=null,S=null;const C=Q=>{if(!o()){console.warn("Touch start: No dialog element");return}if(e.sidebarState!=="opened"&&e.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${e.sidebarState}`);return}g=Q.touches[0].clientX,h=Q.touches[0].clientY,w=performance.now(),p=!0,k=!1},L=Q=>e.sidebarState==="closed"&&Q>0||e.sidebarState==="closeSwiping"&&Q>0||e.sidebarState==="opened"&&Q<0||e.sidebarState==="openSwiping"&&Q<0,X=()=>{if(o()){if(o().style.setProperty("--transition-timing","0s"),!o().open&&e.sidebarState==="closed")try{o().showModal(),o().offsetWidth}catch(Q){console.error("Error opening dialog:",Q);return}e.onSwipe();try{const Q=window.getComputedStyle(o()),G=Q.transform||Q.webkitTransform||"";if(y=o().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?x=-y:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(x=0),G&&G!=="none")try{x=new DOMMatrix(G).m41}catch{console.warn("Could not parse transform matrix, using default position")}k=!0}catch(Q){console.error("Error during swipe initialization:",Q),T()}}},ee=()=>{if(!o())return;const Q=-(y*.3),G=-y;let H=0;const K=window.getComputedStyle(o()),D=K.transform||K.webkitTransform||"";if(D&&D!=="none")try{H=new DOMMatrix(D).m41}catch{H=0}const se=.25*Math.min(1,Math.max(0,(H-G)/(Q-G)));o().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${se})`)},F=()=>{if(P=null,!S||!p||!o()||a(s))return;const{x:Q,y:G}=S;S=null;const H=Q-g,K=G-h,D=Math.abs(H)>Math.abs(K),I=Math.abs(H)>i;if(!k)if(D&&I&&L(H))try{X()}catch(b){console.error("Error initializing swipe:",b),T();return}else return;let ae=x+H*v;const se=-y,N=-(y*.3);let R=Math.max(se,Math.min(N,ae));o().style.setProperty("--transition-timing","0s"),o().style.transform=`translate3d(${R}px, 0, 0)`,n.swipingRatio=(-1+Math.abs(R/y))/7*10,E=(R-x)/y*100,ee()},Y=Q=>{if(!p)return;const G=Q.touches[0].clientX,H=Q.touches[0].clientY;S={x:G,y:H},P===null&&(P=requestAnimationFrame(F)),k&&Math.abs(G-g)>Math.abs(H-h)&&Q.preventDefault()},j=Q=>{const G=Math.abs(Q);if(G>=u)return c;if(G>=d){const H=(G-d)/(u-d);return l-H*(l-c)}else return l},te=(Q,G)=>{if(Math.abs(Q)>=u)return f*.5;const K=Math.abs(E)/100;return G?f*Math.max(.5,1-K):f*Math.max(.5,K)},le=Q=>{if(P!==null&&(cancelAnimationFrame(P),P=null),S=null,!p||!o()){T();return}if(!k){T();return}let G=0;if(Q?.changedTouches?.[0]){const ae=Q.changedTouches[0].clientX,N=performance.now()-w;N>0&&(G=(ae-g)/N)}const H=j(G);let K=null;e.sidebarState==="closeSwiping"?K=Math.abs(E)>H||G>d?"open":"close":e.sidebarState==="openSwiping"&&(K=Math.abs(E)>H||G<-d?"close":"open");const D=e.sidebarState==="closeSwiping"&&K==="open"||e.sidebarState==="openSwiping"&&K==="close",I=te(G,D);n.duration=I-.02,o().style.setProperty("--transition-timing",`${I}s`),o().offsetWidth,o().style.transform="",K==="open"?e.onOpen():K==="close"&&e.onClose(),o()?.style.removeProperty("--backdrop-bg"),T()};Ce(()=>(document.addEventListener("touchstart",C,{passive:!0}),document.addEventListener("touchmove",Y,{passive:!1}),document.addEventListener("touchend",le,{passive:!0}),document.addEventListener("touchcancel",le,{passive:!0}),()=>{document.removeEventListener("touchstart",C),document.removeEventListener("touchmove",Y),document.removeEventListener("touchend",le),document.removeEventListener("touchcancel",le),P!==null&&cancelAnimationFrame(P)})),re()}var nd=q('<dialog><div class="dialogInner svelte-1nov8pn"><!></div></dialog> <!> <!>',1);function rd(t,e){ne(e,!0);const{getStackPages:n}=pt(),{getSidebarState:r,handleComputeState:o}=Jr();let s=350;const i=rn(),{isScrolling:l}=Ma();let c=U(null),u=U(null),d=z(r);xe(()=>{n().length>0&&o({type:"close"})});const f=()=>{e.blocked||o({type:"close"})},v=()=>{e.blocked||o({type:"open"})},g=()=>{o({type:"opened"}),i.swipingRatio=-1,i.duration=.2},h=()=>{o({type:"closed"})},w=()=>{o({type:"swipe"})},p=F=>{F.preventDefault(),f()};Ce(()=>(a(c)?.addEventListener("close",h),a(c)?.addEventListener("cancel",p),()=>{a(c)?.removeEventListener("close",h),a(c)?.removeEventListener("cancel",p)}));const k=()=>{a(c)?.style.removeProperty("--transition-timing"),a(c)?.style.removeProperty("transform"),a(c)?.style.removeProperty("--backdrop-bg")},x=z(l);xe(()=>{if(a(d),!!a(c))switch(a(d).type==="openSwiping"||a(d).type==="closeSwiping"?i.isSwiping=!0:i.isSwiping=!1,a(d).type){case"closeSwiping":{const F=setTimeout(()=>{f()},3e3);return()=>{clearTimeout(F)}}case"openSwiping":{const F=setTimeout(()=>{v()},3e3);return()=>{clearTimeout(F)}}case"opening":{a(c).open||a(c).showModal(),a(c).getBoundingClientRect();const F=setTimeout(()=>{k()},s+1),Y=()=>{clearTimeout(F),k()};return a(c)?.addEventListener("transitionend",Y,{once:!0}),g(),()=>{clearTimeout(F),a(c)?.removeEventListener("transitionend",Y)}}case"closing":{i.swipingRatio=0,i.duration=.2;const F=setTimeout(()=>{a(d).type==="closing"&&h()},s+1),Y=()=>{clearTimeout(F),h()};return a(c)?.addEventListener("transitionend",Y,{once:!0}),()=>{clearTimeout(F),a(c)?.removeEventListener("transitionend",Y)}}case"closed":a(c)?.close(),k();break;case"opened":k();break}}),Ce(()=>{a(d).type==="opened"&&o({type:"open"})});var y=nd(),E=B(y),T=A(E),P=A(T);{var S=F=>{var Y=J(),j=B(Y);ge(j,()=>e.children),_(F,Y)};V(P,F=>{a(d).type!=="closed"&&F(S)})}st(T,F=>m(u,F),()=>a(u)),st(E,F=>m(c,F),()=>a(c));var C=W(E,2);{var L=F=>{Ba(F,{get dialog(){return a(c)},get dialogInner(){return a(u)},onClose:f})};V(C,F=>{a(d).type==="opened"&&!e.blocked&&F(L)})}var X=W(C,2);{var ee=F=>{td(F,{onClose:f,onOpen:v,onSwipe:w,get sidebarState(){return a(d).type},get dialog(){return a(c)}})};V(X,F=>{(!a(x)&&a(d).type==="closed"||a(d).type==="opened"||a(d).type==="openSwiping"||a(d).type==="closeSwiping")&&!e.blocked&&F(ee)})}ce(()=>ye(E,1,we([{open:a(d).type==="opened",isAnimationOn:i.working&&(!i.isSwiping||!e.blocked)}]),"svelte-1nov8pn")),_(t,y),re()}var ad=(t,e,n)=>{e(),n("/",{full:!0})(t)},od=q('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),sd=(t,e,n)=>{e(),n(Z.Bin,{full:!0})(t)},id=q('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),ld=q('<div class="sidebarFixed svelte-ltt61h"><div class="nav svelte-ltt61h"><!> <div class="menu svelte-ltt61h"><a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="searchWrapper svelte-ltt61h"><!></div> <!></div> <!>',1),cd=q('<div class="sidebar svelte-ltt61h"><div class="sidebarFixed svelte-ltt61h"><!></div> <!></div>');function ud(t,e){ne(e,!0);const{checkMobileSize:n}=an(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=Jr(),{getAppLocation:i}=Lt(),{getPageUrl:l,createHandlePage:c,getStackPagesFormUrl:u}=pt(),d=ds(),f=z(()=>i().pathname),{getSelectedTags:v,addTag:g,removeTag:h}=ps();let w=z(v);const{checkNotesInBin:p}=En();let k=ue(e,"getNotes",3,()=>[]),x=ue(e,"mode",3,"notes");const y=j=>{g(j)},E=j=>{h(j)};let T=z(()=>ed(a(w),k()()||[],j=>!(j?.data&&j.data.deletedAt&&x()==="notes"||j?.data&&!j.data.deletedAt&&x()==="bin")).filter(j=>d.value===""||j.toLowerCase().indexOf(d.value.toLowerCase())!==-1)),P=z(n);const{checkExistedDialog:S}=on();let C=z(()=>u().length>0||S());const L=()=>{if(a(P)){if(a(C))return;o().type==="opened"?r():o().type==="closed"&&s()}};Ce(()=>cr({key:"b",meta:!0,action:L})),Ce(()=>cr({key:"b",ctrl:!0,action:L}));var X=J(),ee=B(X);{var F=j=>{rd(j,{get blocked(){return a(C)},children:(te,le)=>{var Q=ld(),G=B(Q),H=A(G),K=A(H);Ms(K,{});var D=W(K,2),I=A(D),ae=z(()=>c(Z.Settings));I.__click=function(...de){a(ae)?.apply(this,de)};var se=A(I);pe(se,()=>({"--size":"24px"})),Se(se.lastChild,{name:"settings"});var N=W(se,2);Xe(N,{children:(de,me)=>{var Pe=Ie("Settings");_(de,Pe)}});var R=W(I,2),b=z(()=>c(Z.Sync));R.__click=function(...de){a(b)?.apply(this,de)};var O=A(R);pe(O,()=>({"--size":"24px"})),Se(O.lastChild,{name:"sync"});var oe=W(O,2);Xe(oe,{children:(de,me)=>{var Pe=Ie("Sync");_(de,Pe)}});var _e=W(R,2);{var fe=de=>{var me=od();me.__click=[ad,r,c];var Pe=A(me);pe(Pe,()=>({"--size":"24px"})),Se(Pe.lastChild,{name:"note"});var et=W(Pe,2);Xe(et,{children:(ze,Ye)=>{var tt=Ie("Notes");_(ze,tt)}}),ce(ze=>Le(me,"href",ze),[()=>l("/",{full:!0})]),_(de,me)},Ne=de=>{var me=J(),Pe=B(me);{var et=ze=>{var Ye=id();Ye.__click=[sd,r,c];var tt=A(Ye);pe(tt,()=>({"--size":"24px"})),Se(tt.lastChild,{name:"bin"});var qt=W(tt,2);Xe(qt,{children:(bt,gr)=>{var er=Ie("Bin");_(bt,er)}}),ce(bt=>Le(Ye,"href",bt),[()=>l(Z.Bin,{full:!0})]),_(ze,Ye)};V(Pe,ze=>{p()&&ze(et)},!0)}_(de,me)};V(_e,de=>{a(f)===`/${Z.Bin}`?de(fe):de(Ne,!1)})}var $=W(H,2),ke=A($);wa(ke,{placeholder:"Search tag",get value(){return d.value},set value(de){d.value=de}});var Me=W($,2);fo(Me,{get selectedTags(){return a(w)},handleSelectedTagClick:E});var Re=W(G,2);uo(Re,{get tags(){return a(T)},handleTagClick:y,mobile:!0}),ce((de,me)=>{Le(I,"href",de),Le(R,"href",me)},[()=>l(Z.Settings),()=>l(Z.Sync)]),_(te,Q)},$$slots:{default:!0}})},Y=j=>{var te=cd(),le=A(te),Q=A(le);fo(Q,{get selectedTags(){return a(w)},handleSelectedTagClick:E});var G=W(le,2);uo(G,{get tags(){return a(T)},handleTagClick:y}),_(j,te)};V(ee,j=>{a(P)?j(F):j(Y,!1)})}_(t,X),re()}$e(["click"]);const dd=(t,e,n,r)=>{e.noteData.pinnedAt?(n(e.noteId,!1),mn("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),mn("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),m(r,!0)},fd=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),mn("Link copied"),m(n,!0)};var vd=q('<li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),hd=(t,e,n)=>{m(e,!0),m(n,!0)},gd=q('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),pd=(t,e,n)=>{m(e,!0),m(n,!0)},_d=(t,e,n)=>{m(e,!0),m(n,!0)},md=q('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete from bin</button></li>',1),wd=q('<ul class="menu svelte-8ve3pe"><!> <li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),yd=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),bd=q("<!> <!>",1);function Sd(t,e){ne(e,!0);const n=(C,L=Ee)=>{var X=wd(),ee=A(X);{var F=K=>{var D=vd(),I=A(D);I.__click=[fd,e,u];var ae=A(I);pe(ae,()=>({"--size":"22px"})),Se(ae.lastChild,{name:"copy"}),ce(()=>ye(I,1,we(["button",{buttonMenuDialog:L()}]),"svelte-8ve3pe")),_(K,D)};V(ee,K=>{L()&&e.noteData.url&&K(F)})}var Y=W(ee,2),j=A(Y);j.__click=[dd,e,s,u];var te=A(j);{let K=z(()=>e.noteData.pinnedAt?"pin-cancel":"pin");pe(te,()=>({"--size":"22px"})),Se(te.lastChild,{get name(){return a(K)}})}var le=W(te),Q=W(Y,2);{var G=K=>{var D=gd(),I=A(D);I.__click=[hd,d,u];var ae=A(I),se=A(ae);pe(se,()=>({"--size":"18px"})),Se(se.lastChild,{name:"bin"}),ce(()=>ye(I,1,we(["button",{buttonMenuDialog:L()}]),"svelte-8ve3pe")),_(K,D)},H=K=>{var D=md(),I=B(D),ae=A(I);ae.__click=[pd,f,u];var se=A(ae),N=A(se);pe(N,()=>({"--size":"18px"})),Se(N.lastChild,{name:"bin-cancel"});var R=W(I,2),b=A(R);b.__click=[_d,v,u];var O=A(b),oe=A(O);pe(oe,()=>({"--size":"18px"})),Se(oe.lastChild,{name:"bin"}),ce(()=>{ye(ae,1,we(["button",{buttonMenuDialog:L()}]),"svelte-8ve3pe"),ye(b,1,we(["button",{buttonMenuDialog:L()}]),"svelte-8ve3pe")}),_(K,D)};V(Q,K=>{l()==="notes"?K(G):K(H,!1)})}ce(()=>{ye(j,1,we(["button",{buttonMenuDialog:L()}]),"svelte-8ve3pe"),Ht(le,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),_(C,X)},{moveNoteToBin:r,deleteNote:o,pinNote:s,restoreNoteFromBin:i}=En();let l=ue(e,"mode",3,"notes"),c=ue(e,"shownMenu",15),u=U(!1),d=U(!1),f=U(!1),v=U(!1);const{checkMobileSize:g}=an();let h=z(g);const w=()=>{o(e.noteId),mn("Draft deleted")},p=async()=>{r(e.noteId),mn("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},k=()=>{i(e.noteId),mn("Note restored from bin",{onCancel:()=>{r(e.noteId)}})},x=()=>{a(d)?(m(d,!1),e.noteData.type==="draft"?w():p()):a(f)&&(m(f,!1),k()),c(!1),m(u,!1)};var y=bd(),E=B(y);{var T=C=>{var L=J(),X=B(L);{var ee=Y=>{Qr(Y,{get startClose(){return a(u)},onClosed:x,children:(j,te)=>{n(j,()=>!0)},$$slots:{default:!0}})},F=Y=>{var j=yd(),te=B(j);pe(te,()=>({"--bottom":"-100px","--right":"20px"})),Ra(te.lastChild,{get startClose(){return a(u)},get positionTop(){return e.showMenuUp},onClosed:x,children:(le,Q)=>{n(le,()=>!1)},$$slots:{default:!0}}),_(Y,j)};V(X,Y=>{a(h)?Y(ee):Y(F,!1)})}_(C,L)};V(E,C=>{c()&&C(T)})}var P=W(E,2);{var S=C=>{Is(C,{title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:()=>{o(e.noteId),m(v,!1)},onCancel:()=>{m(v,!1)}})};V(P,C=>{a(v)&&C(S)})}_(t,y),re()}$e(["click"]);const Cd=(t,e)=>{m(e,!0)},Ed=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),mn("Link copied"),m(n,!1)},kd=(t,e)=>{m(e,!0)},Pd=(t,e)=>{m(e,!1)},xd=(t,e,n,r)=>{t.preventDefault(),e.noteData.type==="draft"?n(`${Z.NewNote}`):n(`${Z.EditNote}?id=${e.noteId}`),m(r,!1)};var Td=q('<div class="iconPlaceholder svelte-1jg44o9"></div>'),Ad=q('<img loading="lazy" class="noteIcon" height="16" width="16" alt=""/>'),Dd=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Nd=q('<div class="noteIconWrapper svelte-1jg44o9"><!></div>'),Ld=q('<button class="button svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Md=(t,e)=>{m(e,!1)},Id=q('<!> <a target="_blank" rel="noopener noreferrer" class="button openLink svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),Od=q('<li><!> <a class="noteLink svelte-1jg44o9" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function Bd(t,e){ne(e,!0);const{pushStackPages:n}=pt(),{getFaviconEnabled:r}=Zl();let o=ue(e,"mode",3,"notes"),s=U(!1),i=U(!1),l=U(!1),c=z(r);const{checkMobileSize:u}=an(),d=C=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(C).host}.ico`}catch{return""}},f=e.noteData.url||e.noteData.draft?.url||"";var v=Od();v.__focusin=[kd,i],v.__focusout=[Pd,i];var g=A(v);{var h=C=>{var L=Nd(),X=A(L);{var ee=Y=>{var j=J(),te=B(j);{var le=G=>{var H=Td();_(G,H)},Q=G=>{var H=Ad();ce(K=>Le(H,"src",K),[()=>d(f)]),Da("error",H,()=>{m(l,!0)}),_(G,H)};V(te,G=>{a(l)?G(le):G(Q,!1)})}_(Y,j)},F=Y=>{var j=Dd(),te=B(j);pe(te,()=>({"--size":"16px"})),Se(te.lastChild,{name:"note"}),_(Y,j)};V(X,Y=>{f?Y(ee):Y(F,!1)})}_(C,L)};V(g,C=>{a(c)&&C(h)})}var w=W(g,2);w.__click=[xd,e,n,i];var p=A(w),k=W(w,2),x=A(k);{var y=C=>{var L=Id(),X=B(L);{var ee=te=>{var le=Ld();le.__click=[Ed,e,i];var Q=A(le);pe(Q,()=>({"--size":"20px"})),Se(Q.lastChild,{name:"copy"});var G=W(Q,2);Xe(G,{children:(H,K)=>{var D=Ie("copy link");_(H,D)}}),ce(()=>Le(le,"tabindex",e.focusHidden?-1:0)),_(te,le)};V(X,te=>{u()||te(ee)})}var F=W(X,2);F.__click=[Md,i];var Y=A(F);pe(Y,()=>({"--size":"18px"})),Se(Y.lastChild,{name:"open"});var j=W(Y,2);Xe(j,{children:(te,le)=>{var Q=Ie();ce(()=>Ht(Q,e.noteData.draft?.name||e.noteData.name||"unknown")),_(te,Q)}}),ce(()=>{Le(F,"href",f),Le(F,"tabindex",e.focusHidden?-1:0)}),_(C,L)};V(x,C=>{f&&C(y)})}var E=W(x,2);E.__click=[Cd,s],ye(E,1,we(["button","buttonMenu"]),"svelte-1jg44o9");var T=A(E);pe(T,()=>({"--size":"18px","--rotate":"90deg"})),Se(T.lastChild,{name:"menu"});var P=W(T,2);Xe(P,{children:(C,L)=>{var X=Ie("show menu");_(C,X)}});var S=W(k,2);Sd(S,{get mode(){return o()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return a(s)},set shownMenu(C){m(s,C,!0)}}),ce((C,L)=>{ye(v,1,C,"svelte-1jg44o9"),Le(w,"tabindex",e.focusHidden?-1:0),Le(w,"href",L),Ht(p,e.noteData?.draft?.name||e.noteData?.name||"unknown"),ye(k,1,we(["noteMenuWrapper",{noteMenuWrapperActive:a(i)}]),"svelte-1jg44o9"),Le(E,"tabindex",e.focusHidden?-1:0)},[()=>we(["record",{pinned:!!e.noteData.pinnedAt,draft:!!e.noteData.draft}]),()=>`/?stackPages=${encodeURIComponent(`${Z.EditNote}?id=${e.noteId}`)}`]),_(t,v),re()}$e(["focusin","focusout","click"]);var Xn,Rs,zs;class Rd{constructor(e){be(this,Xn);lt(this,"data");lt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),De(this,Xn,Rs).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,De(this,Xn,zs).call(this)),e}isEmpty(){return this.data.length===0}}Xn=new WeakSet,Rs=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(n,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},zs=function(){let e=0;const n=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<n&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<n&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class zd{constructor(e,n){lt(this,"heap");lt(this,"done");lt(this,"cache",[]);this.heap=new Rd(n);for(const r of e)this.heap.insert(r);this.done=!1}get(e,n){const r=this.cache.slice(e,n);for(;r.length<n-e&&!this.heap.isEmpty();){const o=this.heap.extractMin();o!==void 0&&(this.cache.push(o),r.push(o))}return this.heap.isEmpty()&&(this.done=!0),r}}var Fd=q('<p class="message">No notes in bin</p>'),Hd=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),jd=q('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),Ud=q('<p class="message">No notes found</p> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div> <div>or</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),Vd=q('<div class="emptyStore svelte-106i4nx"><!></div>'),Wd=q("<span>Back to notes</span>"),qd=q('<div class="emptyMessage svelte-106i4nx">No notes in bin</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),Kd=q('<div class="emptyMessage svelte-106i4nx">No notes found</div>'),Yd=q('<div class="feed svelte-106i4nx"><ul class="svelte-106i4nx"></ul></div>'),Xd=q('<div class="wrapperFeed svelte-106i4nx"><div class="wrapperContainer svelte-106i4nx"><!></div></div>');function Gd(t,e){ne(e,!0);let n=ue(e,"getNotes",3,()=>[]),r=ue(e,"mode",3,"notes");const{getScrollContainer:o}=Ia(),{createHandlePage:s,getPageUrl:i}=pt(),{getSelectedTags:l}=ps(),{getFeedOrder:c}=vs(),u=ls();let d=54,f=U(0),v=U(0),g=U(0),h=U(0),w=[],p=U(0),k=U(null),x=z(o),y=null,E=null;const T=z(l);xe(()=>{a(T),a(X),a(x)?.scrollTo(0,0)});const{enable:P}=Ma(),S=()=>{P(),y||(y=requestAnimationFrame(()=>{const D=a(x)?.scrollTop||0;m(g,D,!0);const I=Math.ceil(a(f)/d);m(v,Math.floor(D/(d*I))*(d*I)),y=null}))},C=()=>{E||(E=requestAnimationFrame(()=>{m(f,window.innerHeight-180||0,!0);const D=a(x)?.scrollTop||0;m(g,D,!0);const I=Math.ceil(a(f)/d);m(v,Math.floor(D/(d*I))*(d*I)),E=null}))};Ce(()=>{C(),S()});const L=()=>{S()};xe(()=>(a(x)?.addEventListener("scroll",L),window.addEventListener("resize",C),()=>{a(x)?.removeEventListener("scroll",L),window.removeEventListener("resize",C)}));const X=z(c);xe(()=>{const D=n()()||[],I=[],ae=Array.from(a(T).values());for(let se=D.length-1;se>=0;se--){if(!D[se]||!D[se].data)continue;const N=D[se];r()==="notes"&&N?.data.deletedAt||r()==="bin"&&!N?.data.deletedAt||a(T).size&&ae.some(R=>!N.data?.tags.includes(R))&&(!N.data.draft||ae.some(R=>!N.data?.draft?.tags.includes(R)))||u&&!(N.data.name.toLowerCase().includes(u.value.toLowerCase())||N.data.url.toLowerCase().includes(u.value.toLowerCase())||N.data.text.toLowerCase().includes(u.value.toLowerCase()))||I.push(N)}m(h,I.length,!0),w=I,m(p,Date.now(),!0)}),xe(()=>{a(X),a(p),m(k,new zd(w,(D,I)=>{if(!D||!I||!D.data||!I.data)return 0;if(D.data.pinnedAt&&!I.data.pinnedAt)return-1;if(!D.data.pinnedAt&&I.data.pinnedAt)return 1;if(D.data.pinnedAt&&I.data.pinnedAt){if(D.data.pinnedAt<I.data.pinnedAt)return 1;if(D.data.pinnedAt>I.data.pinnedAt)return-1}if(D.data.draft&&!I.data.draft)return-1;if(!D.data.draft&&I.data.draft)return 1;if(D.data.draft&&I.data.draft){if(D.data.draft.updatedAt<I.data.draft.updatedAt)return 1;if(D.data.draft.updatedAt>I.data.draft.updatedAt)return-1}switch(a(X)){case"newest":return D.data.updatedAt<I.data.updatedAt?1:-1;case"oldest":return D.data.updatedAt>I.data.updatedAt?1:-1;case"AtoZ":return D.data.name.localeCompare(I.data.name);case"ZtoA":return I.data.name.localeCompare(D.data.name);default:return 0}}),!0)});const ee=z(()=>a(h)*d);let Y=z(()=>{a(p);const D=Math.ceil(a(f)/d);let I=Math.floor(a(v)/d);return I=I-Math.min(I,D),a(k)?.get(I,I+D*3)||[]}),j=z(()=>d*Math.ceil(a(f)/d));const te=z(()=>a(v)-Math.min(a(v),a(j)));var le=Xd(),Q=A(le),G=A(Q);{var H=D=>{Os(D,{})},K=D=>{var I=J(),ae=B(I);{var se=R=>{var b=Vd(),O=A(b);{var oe=fe=>{var Ne=Fd();_(fe,Ne)},_e=fe=>{var Ne=Ud(),$=W(B(Ne),2),ke=A($);{let de=z(()=>i(Z.NewNote)),me=z(()=>s(Z.NewNote));Qt(ke,{element:"a",get href(){return a(de)},get onClick(){return a(me)},children:(Pe,et)=>{var ze=Hd(),Ye=B(ze);pe(Ye,()=>({"--size":"18px","--color":"#b0b0b0"})),Se(Ye.lastChild,{name:"plus"}),_(Pe,ze)},$$slots:{default:!0}})}var Me=W($,4),Re=A(Me);{let de=z(()=>i(Z.ImportData)),me=z(()=>s(Z.ImportData));Qt(Re,{element:"a",get href(){return a(de)},get onClick(){return a(me)},children:(Pe,et)=>{var ze=jd(),Ye=B(ze);pe(Ye,()=>({"--size":"18px","--color":"#b0b0b0"})),Se(Ye.lastChild,{name:"import"}),_(Pe,ze)},$$slots:{default:!0}})}_(fe,Ne)};V(O,fe=>{r()==="bin"?fe(oe):fe(_e,!1)})}_(R,b)},N=R=>{var b=J(),O=B(b);{var oe=fe=>{var Ne=qd(),$=W(B(Ne),2),ke=A($);{let Me=z(()=>i("/",{full:!0})),Re=z(()=>s("/",{full:!0}));Qt(ke,{element:"a",get href(){return a(Me)},get onClick(){return a(Re)},children:(de,me)=>{var Pe=Wd();_(de,Pe)},$$slots:{default:!0}})}_(fe,Ne)},_e=fe=>{var Ne=J(),$=B(Ne);{var ke=Re=>{var de=Kd();_(Re,de)},Me=Re=>{var de=Yd(),me=A(de);Gr(me,23,()=>a(Y),Pe=>Pe.data,(Pe,et,ze)=>{var Ye=J(),tt=B(Ye);{var qt=bt=>{{let gr=z(()=>a(ze)*d<a(g)-a(te)-d/2||a(ze)*d>a(g)-a(te)+Math.floor(a(f)/d)*d),er=z(()=>(a(ze)+3)*d<a(g)-a(te)-d/2||(a(ze)+3)*d>a(g)-a(te)+Math.floor(a(f)/d)*d);Bd(bt,{get mode(){return r()},get focusHidden(){return a(gr)},get showMenuUp(){return a(er)},get noteId(){return a(et).id},get noteData(){return a(et).data}})}};V(tt,bt=>{a(et).data&&bt(qt)})}_(Pe,Ye)}),ce(Pe=>{yn(de,`min-height: ${Pe??""}px`),yn(me,`transform: translateY(${a(te)??""}px);`)},[()=>Math.max((a(ee)>a(f),a(ee)),0)]),_(Re,de)};V($,Re=>{a(Y).length===0?Re(ke):Re(Me,!1)},!0)}_(fe,Ne)};V(O,fe=>{r()==="bin"&&e.countNotesInBin()===0?fe(oe):fe(_e,!1)},!0)}_(R,b)};V(ae,R=>{(n()()||[]).length===0||r()==="notes"&&(n()()||[]).length-e.countNotesInBin()===0?R(se):R(N,!1)},!0)}_(D,I)};V(G,D=>{e.readyNotes?D(K,!1):D(H)})}_(t,le),re()}var Zd=q('<!> <div class="content svelte-k57gez"><!></div>',1);function Jd(t,e){ne(e,!0);const{getAppLocation:n}=Lt(),{getGetNotes:r,isInitedNotes:o,countNotesInBin:s}=En(),i=z(o),l=z(r),c=z(()=>n().pathname);var u=Zd(),d=B(u);{let g=z(()=>a(c)==="/bin"?"bin":"notes");ud(d,{get mode(){return a(g)},get getNotes(){return a(l)}})}var f=W(d,2),v=A(f);{let g=z(()=>a(c)==="/bin"?"bin":"notes");Gd(v,{get mode(){return a(g)},get getNotes(){return a(l)},get countNotesInBin(){return s},get readyNotes(){return a(i)}})}_(t,u),re()}var Qd=q('<h1 class="svelte-1ky72l5"><!></h1>');function $d(t,e){var n=Qd(),r=A(n);ge(r,()=>e.children),_(t,n)}const ef=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var tf=q('<div class="block svelte-4rc64"><!> <p class="message svelte-4rc64">Enjoy using the app!</p> <div class="container svelte-4rc64"><!></div></div>');function nf(t,e){ne(e,!1);const{pushStackPages:n}=pt(),r=()=>{ef()?n(Z.AccountSetup):n(Z.Install)};Zr();var o=tf(),s=A(o);$d(s,{children:(c,u)=>{var d=Ie("Wellcome");_(c,d)}});var i=W(s,4),l=A(i);Qt(l,{onClick:r,fullWidth:!0,children:(c,u)=>{var d=Ie("Start");_(c,d)},$$slots:{default:!0}}),_(t,o),re()}const vo=(t,e=Ee,n=Ee,r)=>{let o=Wr(()=>ci(r?.(),!1));var s=J(),i=B(s);{var l=u=>{Oe(u,{children:(d,f)=>{He(d,{get hidden(){return a(o)},get page(){return Z.Settings}})},$$slots:{default:!0}})},c=u=>{var d=J(),f=B(d);{var v=h=>{Oe(h,{children:(w,p)=>{He(w,{get hidden(){return a(o)},get page(){return Z.NewNote}})},$$slots:{default:!0}})},g=h=>{var w=J(),p=B(w);{var k=y=>{Oe(y,{children:(E,T)=>{He(E,{get params(){return n()},get hidden(){return a(o)},get page(){return Z.EditNote}})},$$slots:{default:!0}})},x=y=>{var E=J(),T=B(E);{var P=C=>{Oe(C,{children:(L,X)=>{He(L,{get hidden(){return a(o)},get page(){return Z.ImportData}})},$$slots:{default:!0}})},S=C=>{var L=J(),X=B(L);{var ee=Y=>{Oe(Y,{children:(j,te)=>{He(j,{get hidden(){return a(o)},get page(){return Z.ExportData}})},$$slots:{default:!0}})},F=Y=>{var j=J(),te=B(j);{var le=G=>{Oe(G,{children:(H,K)=>{He(H,{get hidden(){return a(o)},get page(){return Z.ClearStore}})},$$slots:{default:!0}})},Q=G=>{var H=J(),K=B(H);{var D=ae=>{Oe(ae,{children:(se,N)=>{He(se,{get hidden(){return a(o)},get page(){return Z.AccountSetup}})},$$slots:{default:!0}})},I=ae=>{var se=J(),N=B(se);{var R=O=>{Oe(O,{children:(oe,_e)=>{He(oe,{get hidden(){return a(o)},get page(){return Z.Install}})},$$slots:{default:!0}})},b=O=>{var oe=J(),_e=B(oe);{var fe=$=>{Oe($,{children:(ke,Me)=>{He(ke,{get hidden(){return a(o)},get page(){return Z.InstallSuccess}})},$$slots:{default:!0}})},Ne=$=>{var ke=J(),Me=B(ke);{var Re=me=>{Oe(me,{children:(Pe,et)=>{nf(Pe,{})},$$slots:{default:!0}})},de=me=>{var Pe=J(),et=B(Pe);{var ze=tt=>{Oe(tt,{children:(qt,bt)=>{He(qt,{get hidden(){return a(o)},get page(){return Z.Auth}})},$$slots:{default:!0}})},Ye=tt=>{var qt=J(),bt=B(qt);{var gr=kn=>{Oe(kn,{children:(pr,za)=>{He(pr,{get hidden(){return a(o)},get page(){return Z.Signup}})},$$slots:{default:!0}})},er=kn=>{var pr=J(),za=B(pr);{var Fs=Pn=>{Oe(Pn,{children:(_r,Fa)=>{He(_r,{get hidden(){return a(o)},get page(){return Z.Signin}})},$$slots:{default:!0}})},Hs=Pn=>{var _r=J(),Fa=B(_r);{var js=xn=>{Oe(xn,{children:(mr,Ha)=>{He(mr,{get hidden(){return a(o)},get page(){return Z.AccessKeys}})},$$slots:{default:!0}})},Us=xn=>{var mr=J(),Ha=B(mr);{var Vs=Tn=>{Oe(Tn,{children:(wr,ja)=>{He(wr,{get hidden(){return a(o)},get page(){return Z.Account}})},$$slots:{default:!0}})},Ws=Tn=>{var wr=J(),ja=B(wr);{var qs=An=>{Oe(An,{children:(yr,Ua)=>{He(yr,{get hidden(){return a(o)},get page(){return Z.ConfirmAccessKey}})},$$slots:{default:!0}})},Ks=An=>{var yr=J(),Ua=B(yr);{var Ys=Dn=>{Oe(Dn,{children:(br,Va)=>{He(br,{get hidden(){return a(o)},get page(){return Z.Exit}})},$$slots:{default:!0}})},Xs=Dn=>{var br=J(),Va=B(br);{var Gs=Nn=>{Oe(Nn,{children:(Sr,Wa)=>{He(Sr,{get hidden(){return a(o)},get page(){return Z.Sync}})},$$slots:{default:!0}})},Zs=Nn=>{var Sr=J(),Wa=B(Sr);{var Js=Ln=>{Oe(Ln,{children:(Cr,qa)=>{He(Cr,{get hidden(){return a(o)},get page(){return Z.Subscription}})},$$slots:{default:!0}})},Qs=Ln=>{var Cr=J(),qa=B(Cr);{var $s=Mn=>{Oe(Mn,{children:($r,ti)=>{He($r,{get hidden(){return a(o)},get page(){return Z.About}})},$$slots:{default:!0}})},ei=Mn=>{Oe(Mn,{children:($r,ti)=>{Lu($r,{})},$$slots:{default:!0}})};V(qa,Mn=>{e()===Z.About?Mn($s):Mn(ei,!1)},!0)}_(Ln,Cr)};V(Wa,Ln=>{e()===Z.Subscription?Ln(Js):Ln(Qs,!1)},!0)}_(Nn,Sr)};V(Va,Nn=>{e()===Z.Sync?Nn(Gs):Nn(Zs,!1)},!0)}_(Dn,br)};V(Ua,Dn=>{e()===Z.Exit?Dn(Ys):Dn(Xs,!1)},!0)}_(An,yr)};V(ja,An=>{e()===Z.ConfirmAccessKey?An(qs):An(Ks,!1)},!0)}_(Tn,wr)};V(Ha,Tn=>{e()===Z.Account?Tn(Vs):Tn(Ws,!1)},!0)}_(xn,mr)};V(Fa,xn=>{e()===Z.AccessKeys?xn(js):xn(Us,!1)},!0)}_(Pn,_r)};V(za,Pn=>{e()===Z.Signin?Pn(Fs):Pn(Hs,!1)},!0)}_(kn,pr)};V(bt,kn=>{e()===Z.Signup?kn(gr):kn(er,!1)},!0)}_(tt,qt)};V(et,tt=>{e()===Z.Auth?tt(ze):tt(Ye,!1)},!0)}_(me,Pe)};V(Me,me=>{e()===Z.Wellcome?me(Re):me(de,!1)},!0)}_($,ke)};V(_e,$=>{e()===Z.InstallSuccess?$(fe):$(Ne,!1)},!0)}_(O,oe)};V(N,O=>{e()===Z.Install?O(R):O(b,!1)},!0)}_(ae,se)};V(K,ae=>{e()===Z.AccountSetup?ae(D):ae(I,!1)},!0)}_(G,H)};V(te,G=>{e()===Z.ClearStore?G(le):G(Q,!1)},!0)}_(Y,j)};V(X,Y=>{e()===Z.ExportData?Y(ee):Y(F,!1)},!0)}_(C,L)};V(T,C=>{e()===Z.ImportData?C(P):C(S,!1)},!0)}_(y,E)};V(p,y=>{e()===Z.EditNote?y(k):y(x,!1)},!0)}_(h,w)};V(f,h=>{e()===Z.NewNote?h(v):h(g,!1)},!0)}_(u,d)};V(i,u=>{e()===Z.Settings?u(l):u(c,!1)})}_(t,s)};var rf=q("<!> <!>",1);function af(t,e){ne(e,!0);const{getStackPages:n}=pt(),{getAccount:r}=Ss();let o=z(n),s=z(()=>r()!==void 0);const{checkMobileSize:i}=an();let l=U(Be([]));const c=z(i);xe(()=>{a(o),a(c),it(()=>{if(a(c))a(o).length>=a(l).length?m(l,a(o).map(p=>({page:p,shown:!0})),!0):m(l,a(l).map((p,k)=>({page:p.page,shown:k<a(o).length})),!0);else if(a(o).length>=a(l).length)m(l,a(o).map(p=>({page:p,shown:!0})),!0);else{if(a(o).length===0){m(l,[{page:a(l)[a(l).length-1].page,shown:!1}],!0);return}m(l,a(o).map(p=>({page:p,shown:!0})),!0)}})});const u=()=>{m(l,a(o).map(p=>({page:p,shown:!0})),!0)};var d=rf(),f=B(d);{var v=p=>{Jd(p,{})};V(f,p=>{a(s)&&p(v)})}var g=W(f,2);{var h=p=>{var k=J(),x=B(k);Gr(x,19,()=>a(l),y=>y.page,(y,E,T)=>{const P=z(()=>a(E).page.split("?")[1]),S=z(()=>a(E).page.split("?")[0]);{let C=z(()=>a(T)!==a(l).length-1&&!!a(l)[a(T)+1]?.shown),L=z(()=>a(T)===0);lo(y,{onClosed:u,get shown(){return a(E).shown},get hidden(){return a(C)},get isLastDialog(){return a(L)},children:(X,ee)=>{{let F=z(()=>a(T)!==a(l).length-1&&!!a(l)[a(T)+1]?.shown);vo(X,()=>a(S),()=>a(P),()=>a(F))}},$$slots:{default:!0}})}}),_(p,k)},w=p=>{var k=J(),x=B(k);{var y=E=>{const T=z(()=>a(l)[a(l).length-1].page.split("?")[1]),P=z(()=>a(l)[a(l).length-1].page.split("?")[0]);{let S=z(()=>a(l).length===1);lo(E,{onClosed:u,get shown(){return a(l)[a(l).length-1].shown},hidden:!1,get isLastDialog(){return a(S)},children:(C,L)=>{vo(C,()=>a(P),()=>a(T))},$$slots:{default:!0}})}};V(x,E=>{a(l).length>0&&E(y)},!0)}_(p,k)};V(g,p=>{i()?p(h):p(w,!1)})}_(t,d),re()}function of(t,e){ne(e,!1);let n=0;Ce(()=>{document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-n;(n<30&&s>0||n>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Zr(),re()}const sf=(t,e)=>{a(e)&&a(e).scrollTo({top:0})};var lf=q('<div><button class="buttonTop svelte-1n46o8q"><!> <span class="icon svelte-1n46o8q"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),cf=q('<!> <!> <main><div class="wrapperHeader svelte-1n46o8q"><!></div> <div class="container svelte-1n46o8q"><!></div></main> <!>',1);function uf(t,e){ne(e,!0);const{navigate:n}=Lt(),{hasStackPage:r}=pt(),{setScrollContainer:o}=Ia(),{getAccount:s,init:i}=Ss(),{isInitedNotes:l}=En(),{getStackPagesFormUrl:c}=pt(),{createBroadcastChannel:u,tabId:d}=$n(),f=u(),{getSidebarState:v}=Jr(),{setClosableDialog:g}=on(),h=()=>{n("/?stackPages=wellcome")};Ce(()=>{i(I=>{I===void 0?h():((r("wellcome")||r("accountSetup"))&&n("/"),I?m(y,I):m(y,null))});const D=async I=>{const ae=JSON.parse(I.data);if(ae.tabId&&ae.tabId===d)return;const se=ae;se.type==="initLocalAccount"||se.type==="initCloudAccount"||se.type==="updateAccount"||se.type==="disconnectCloudAccount"?n("/"):se.type==="exit"&&(n("/"),setTimeout(()=>{h()}))};return f.addEventListener(D),()=>f.removeEventListener(D)});const w=rn();Ce(async()=>{await new Promise(D=>setTimeout(D,100)),await es(),w.working=!0});let p=U(!1),k=0,x=z(()=>c().length>0),y=z(s),E=z(l),T=U(null);xe(()=>{g(a(y)!==void 0)}),xe(()=>{o(a(T))});const P=()=>{if(a(T)){const D=a(T).scrollTop||0;D===0?m(p,!1):!a(p)&&k>D?m(p,!0):a(p)&&k+50<D&&m(p,!1),k=D}},S=()=>{P()};xe(()=>(a(T)?.addEventListener("scroll",S),window.addEventListener("resize",S),()=>{a(T)?.removeEventListener("scroll",S),window.removeEventListener("resize",S)}));const C=z(v);var L=cf(),X=B(L);of(X,{});var ee=W(X,2);Rc(ee,{});var F=W(ee,2),Y=A(F),j=A(Y);{var te=D=>{vu(D,{})};V(j,D=>{a(y)!==void 0&&D(te)})}var le=W(Y,2),Q=A(le);{var G=D=>{af(D,{})};V(Q,D=>{a(E)&&D(G)})}st(F,D=>m(T,D),()=>a(T));var H=W(F,2);{var K=D=>{var I=lf(),ae=A(I);ae.__click=[sf,T];var se=A(ae);Xe(se,{children:(b,O)=>{var oe=Ie("top");_(b,oe)}});var N=W(se,2),R=A(N);pe(R,()=>({"--rotate":"90deg","--size":"28px"})),Se(R.lastChild,{name:"back"}),ce(()=>{yn(I,`--swiping-ratio: ${w.swipingRatio}; --transition-timing-default: ${w.duration}s;`),ye(I,1,we(["wrapperButtonTop",{isAnimationOn:w.working&&!w.isSwiping,open:a(x)||a(C).type!=="closed"}]),"svelte-1n46o8q")}),_(D,I)};V(H,D=>{a(p)&&D(K)})}ce(()=>{yn(F,`--swiping-ratio: ${w.swipingRatio}; --transition-timing-default: ${w.duration}s;`),ye(F,1,we(["main",{isAnimationOn:w.working&&!w.isSwiping,open:a(x)||a(C).type!=="closed"}]),"svelte-1n46o8q")}),_(t,L),re()}$e(["click"]);function df(t){Lc(t,{children:(e,n)=>{uf(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||ml(df,{target:document.getElementById("app")});export{Ss as A,Qt as B,Zr as C,En as D,Da as E,hf as F,ue as G,$d as H,Se as I,ye as J,we as K,Os as L,gf as M,pf as N,yn as O,Z as P,an as Q,sc as R,st as S,_f as T,Bs as U,Xe as V,ed as W,Ll as X,$n as Y,Zl as Z,ef as _,pe as a,Le as b,A as c,_ as d,Gr as e,q as f,a as g,pt as h,on as i,U as j,Be as k,m as l,V as m,re as n,Ce as o,ne as p,J as q,B as r,W as s,ce as t,xe as u,$e as v,Ie as w,Ht as x,z as y,Lt as z};
