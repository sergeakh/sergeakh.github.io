import{F as K,p as N,G as Q,f as y,e as V,r as E,J as I,K as F,s as b,t as M,b as D,g as n,M as X,N as Y,x as z,c as u,d,O as W,n as q,v as Z,C as tt,h as et,i as at,u as st,j as P,o as rt,m as $,l as L,B as U,w as S,q as j,L as ot}from"./Dp1GyMqO.js";const lt=f=>{const s=Math.floor(Date.now()/1e3),a={};f.forEach(e=>{if(!e)return;const t=e.data.tags||["Imported"];if(t.length===0){a.ROOT||(a.ROOT=[]),a.ROOT.push(e);return}t.forEach(i=>{a[i]||(a[i]=[]),a[i].push(e)})});let l=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>Bookmarks</TITLE>
<H1>Bookmarks</H1>
<DL><p>
<DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}" PERSONAL_TOOLBAR_FOLDER="true">Bookmarks bar</H3>
<DL><p>`;return Object.keys(a).forEach(e=>{e!=="ROOT"&&e!=="other"&&(l+=`
    <DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}">${e}</H3>
    <DL><p>`,a[e].forEach(t=>{const i=t.data.name.replace(/"/g,"&quot;");l+=`
        <DT><A HREF="${t.data.url}" ADD_DATE="${Math.floor(t.data.createdAt/1e3)||s}">${i}</A>`}),l+=`
    </DL><p>`)}),a.ROOT&&a.ROOT.forEach(e=>{const t=e.data.name.replace(/"/g,"&quot;");l+=`
    <DT><A HREF="${e.data.url}" ADD_DATE="${Math.floor(e.data.createdAt/1e3)||s}">${t}</A>`}),l+=`
</DL><p>`,a.other&&a.other.forEach(e=>{const t=e.data.name.replace(/"/g,"&quot;");l+=`
    <DT><A HREF="${e.data.url}" ADD_DATE="${Math.floor(e.data.createdAt/1e3)||s}">${t}</A>`}),l+="</DL><p>",l},nt=async f=>{const s="notes-export.json",a=JSON.stringify({notes:f}),l=new Blob([a],{type:"application/json"}),e=URL.createObjectURL(l),t=document.createElement("a");t.href=e,t.download=s,document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t),URL.revokeObjectURL(e)},0)},ct=(f,s,a)=>{s(f.target.value),a.onChange(s())};var it=y('<input type="radio"/> <label> </label>',1),dt=y('<div class="wrapper svelte-yu87bd"><fieldset class="switcher svelte-yu87bd"><!> <div class="wrapSwitcherStatus svelte-yu87bd"><div class="switcherStatus svelte-yu87bd"></div></div></fieldset></div>');function vt(f,s){const a=K();N(s,!0);let l=Q(s,"value",7);const e=`switcher-${a}`;var t=dt(),i=u(t),C=u(i);V(C,17,()=>s.items,p=>p.title,(p,v)=>{var R=it(),r=E(R);I(r,1,F(["vh","input"]),"svelte-yu87bd"),r.__change=[ct,l,s];var o=b(r,2);I(o,1,F(["switcherButton"]),"svelte-yu87bd");var m=u(o);M(()=>{D(r,"id",`${n(v).title}-${a}`),D(r,"name",e),X(r,n(v).value),Y(r,n(v).value===l()),D(r,"aria-label",n(v).title),D(o,"for",`${n(v).title}-${a}`),D(o,"title",n(v).title),D(o,"aria-label",n(v).title),z(m,n(v).title)}),d(p,R)});var B=b(C,2),w=u(B);M(p=>W(w,p),[()=>`transform: translateX(${s.items.findIndex(p=>p.value===l())*100}%)`]),d(f,t),q()}Z(["change"]);var ut=y('<h4 class="message svelte-1rr554k">Export data</h4> <div class="format-switcher svelte-1rr554k"><!> <p class="format-description svelte-1rr554k"><!></p></div> <div class="buttonContainer svelte-1rr554k"><!></div>',1),ft=y('<p class="message svelte-1rr554k">Exporting data...</p> <div class="buttonContainer svelte-1rr554k"><!></div>',1),pt=y('<p class="message svelte-1rr554k">Data exported successfully!</p> <div class="buttonContainer svelte-1rr554k"><!></div>',1),ht=y('<div class="content svelte-1rr554k"><!></div>');function Tt(f,s){N(s,!0);const{getGetNotes:a}=tt(),{clearStackPages:l}=et(),{blockDialog:e}=at();let t=P("idle"),i=P("sync");const C=()=>{l()};st(()=>{e(n(t)==="loading")}),rt(()=>()=>{e(!1)});const B=async()=>{L(t,"loading"),setTimeout(async()=>{const r=(a()()||[]).filter(o=>o.data);if(n(i)==="sync")await nt(r).finally(async()=>{await new Promise(o=>setTimeout(o,500)),L(t,"success")});else try{const o=lt(r),m=new Blob([o],{type:"text/html"}),T=URL.createObjectURL(m),h=document.createElement("a");h.href=T,h.download=`bookmarks_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(T),L(t,"success")}catch{L(t,"success")}},0)};var w=ht(),p=u(w);{var v=r=>{var o=ut(),m=b(E(o),2),T=u(m);vt(T,{items:[{title:"Sync",value:"sync"},{title:"Bookmarks",value:"bookmarks"}],get value(){return n(i)},onChange:c=>{L(i,c,!0)}});var h=b(T,2),_=u(h);{var g=c=>{var k=S("App format for sync or backup");d(c,k)},O=c=>{var k=S("Browser bookmarks format (exports only bookmarks, not notes)");d(c,k)};$(_,c=>{n(i)==="sync"?c(g):c(O,!1)})}var x=b(m,2),A=u(x);U(A,{onClick:B,children:(c,k)=>{var H=S("Export");d(c,H)},$$slots:{default:!0}}),d(r,o)},R=r=>{var o=j(),m=E(o);{var T=_=>{var g=ft(),O=b(E(g),2),x=u(O);ot(x,{}),d(_,g)},h=_=>{var g=j(),O=E(g);{var x=A=>{var c=pt(),k=b(E(c),2),H=u(k);U(H,{onClick:C,children:(G,mt)=>{var J=S("Close");d(G,J)},$$slots:{default:!0}}),d(A,c)};$(O,A=>{n(t)==="success"&&A(x)},!0)}d(_,g)};$(m,_=>{n(t)==="loading"?_(T):_(h,!1)},!0)}d(r,o)};$(p,r=>{n(t)==="idle"?r(v):r(R,!1)})}d(f,w),q()}export{Tt as default};
