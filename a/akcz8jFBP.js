const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/acIuue27B.js","a/a3TquqTin.css","a/aD8dNz4Ky.js","a/a9q_jSmK4.js","a/aBEGDcNQV.js","a/aBrkJtqMH.css","a/aDytQ2vx4.js","a/aDB02xhFr.css","a/a37fzI3-t.js","a/a54d_SC5m.css","a/aDhyzYU4e.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/aCoOFux_s.js","a/aY1d2PU1k.css","a/aJuGEWyG0.js","a/aCRJj0X9w.js","a/aBUzlYYyV.css","a/aBlmo2At2.css","a/agyxuAd3Z.js","a/a2arbkmgI.css","a/aDBKhsche.js","a/aBpR5g6jV.css","a/aDrJKLFjQ.js","a/aBem4Ctjp.css","a/aDl8xfmuI.js","a/aBdnakgrk.css","a/aDYnvdQV7.js","a/aDa9Ga8F-.css","a/aqo3n_ow-.js","a/aCH18nfIo.css","a/aBQ3Pa_Y6.js","a/aCGrfzhGC.js","a/aCb6DfA6m.css","a/aDN0QNFbN.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var il=Object.defineProperty;var $o=t=>{throw TypeError(t)};var ll=(t,e,a)=>e in t?il(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var At=(t,e,a)=>ll(t,typeof e!="symbol"?e+"":e,a),ao=(t,e,a)=>e.has(t)||$o("Cannot "+a);var z=(t,e,a)=>(ao(t,e,"read from private field"),a?a.call(t):e.get(t)),De=(t,e,a)=>e.has(t)?$o("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),Ae=(t,e,a,r)=>(ao(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),$e=(t,e,a)=>(ao(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const cl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};cl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const dl=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};dl();const lo=!1;var Lo=Array.isArray,ul=Array.prototype.indexOf,Vr=Array.from,fl=Object.defineProperty,qn=Object.getOwnPropertyDescriptor,xs=Object.getOwnPropertyDescriptors,ks=Object.prototype,vl=Array.prototype,Kr=Object.getPrototypeOf,es=Object.isExtensible;function Ya(t){return typeof t=="function"}const je=()=>{};function gl(t){return typeof t?.then=="function"}function hl(t){return t()}function co(t){for(var e=0;e<t.length;e++)t[e]()}function Ts(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function pl(t,e,a=!1){return t===void 0?a?e():e:t}const St=2,Oo=4,Yr=8,ml=1<<24,Nn=16,An=32,ga=64,Xr=128,nn=512,kt=1024,Ft=2048,gn=4096,qt=8192,Sn=16384,Fo=32768,Gn=65536,ts=1<<17,Es=1<<18,Ua=1<<19,Ps=1<<20,bn=1<<25,fa=32768,uo=1<<21,zo=1<<22,Wn=1<<23,Vn=Symbol("$state"),Ns=Symbol("legacy props"),_l=Symbol(""),ka=new class extends Error{constructor(){super(...arguments);At(this,"name","StaleReactionError");At(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function As(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function wl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function yl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function bl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Sl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Cl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function xl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function kl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Tl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function El(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Pl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Nl=1,Al=2,Ms=4,Ml=8,Dl=16,Il=1,Rl=2,Ll=4,Ol=8,Fl=16,zl=1,jl=2,yt=Symbol(),Bl="http://www.w3.org/1999/xhtml";function Ds(t){return t===this.v}function Hl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Is(t){return!Hl(t,this.v)}let qa=!1,Ul=!1;function ql(){qa=!0}const Wl=[];function ns(t,e=!1,a=!1){return Ar(t,new Map,"",Wl,null,a)}function Ar(t,e,a,r,o=null,s=!1){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Lo(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var c=0;c<t.length;c+=1){var u=t[c];c in t&&(l[c]=Ar(u,e,a,r,null,s))}return l}if(Kr(t)===ks){l={},e.set(t,l),o!==null&&e.set(o,l);for(var d in t)l[d]=Ar(t[d],e,a,r,null,s);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return Ar(t.toJSON(),e,a,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Ge=null;function Oa(t){Ge=t}function lt(t){return Rs().get(t)}function ct(t,e){return Rs().set(t,e),e}function le(t,e=!1,a){Ge={p:Ge,i:!1,c:null,e:null,s:t,x:null,l:qa&&!e?{s:null,u:null,$:[]}:null}}function ce(t){var e=Ge,a=e.e;if(a!==null){e.e=null;for(var r of a)ei(r)}return t!==void 0&&(e.x=t),e.i=!0,Ge=e.p,t??{}}function Wa(){return!qa||Ge!==null&&Ge.l===null}function Rs(t){return Ge===null&&As(),Ge.c??(Ge.c=new Map(Vl(Ge)||void 0))}function Vl(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let ta=[];function Ls(){var t=ta;ta=[],co(t)}function ha(t){if(ta.length===0&&!Na){var e=ta;queueMicrotask(()=>{e===ta&&Ls()})}ta.push(t)}function Kl(){for(;ta.length>0;)Ls()}function Os(t){var e=He;if(e===null)return Re.f|=Wn,t;if((e.f&Fo)===0){if((e.f&Xr)===0)throw t;e.b.error(t)}else Fa(t,e)}function Fa(t,e){for(;e!==null;){if((e.f&Xr)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Tr=new Set;let We=null,Mr=null,Qt=null,Jt=[],Gr=null,fo=!1,Na=!1;var Ma,Da,aa,ra,vr,Ia,Ra,bt,vo,Ga,go,Fs,zs;const Br=class Br{constructor(){De(this,bt);At(this,"committed",!1);At(this,"current",new Map);At(this,"previous",new Map);De(this,Ma,new Set);De(this,Da,new Set);De(this,aa,0);De(this,ra,0);De(this,vr,null);De(this,Ia,new Set);De(this,Ra,new Set);At(this,"skipped_effects",new Set);At(this,"is_fork",!1)}is_deferred(){return this.is_fork||z(this,ra)>0}process(e){Jt=[],Mr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)$e(this,bt,vo).call(this,r,a);this.is_fork||$e(this,bt,Fs).call(this),this.is_deferred()?($e(this,bt,Ga).call(this,a.effects),$e(this,bt,Ga).call(this,a.render_effects)):(Mr=this,We=null,as(a.render_effects),as(a.effects),Mr=null,z(this,vr)?.resolve()),Qt=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&Wn)===0&&(this.current.set(e,e.v),Qt?.set(e,e.v))}activate(){We=this,this.apply()}deactivate(){We===this&&(We=null,Qt=null)}flush(){if(this.activate(),Jt.length>0){if(Bs(),We!==null&&We!==this)return}else z(this,aa)===0&&this.process([]);this.deactivate()}discard(){for(const e of z(this,Da))e(this);z(this,Da).clear()}increment(e){Ae(this,aa,z(this,aa)+1),e&&Ae(this,ra,z(this,ra)+1)}decrement(e){Ae(this,aa,z(this,aa)-1),e&&Ae(this,ra,z(this,ra)-1),this.revive()}revive(){for(const e of z(this,Ia))z(this,Ra).delete(e),Et(e,Ft),va(e);for(const e of z(this,Ra))Et(e,gn),va(e);this.flush()}oncommit(e){z(this,Ma).add(e)}ondiscard(e){z(this,Da).add(e)}settled(){return(z(this,vr)??Ae(this,vr,Ts())).promise}static ensure(){if(We===null){const e=We=new Br;Tr.add(We),Na||Br.enqueue(()=>{We===e&&e.flush()})}return We}static enqueue(e){ha(e)}apply(){}};Ma=new WeakMap,Da=new WeakMap,aa=new WeakMap,ra=new WeakMap,vr=new WeakMap,Ia=new WeakMap,Ra=new WeakMap,bt=new WeakSet,vo=function(e,a){e.f^=kt;for(var r=e.first;r!==null;){var o=r.f,s=(o&(An|ga))!==0,i=s&&(o&kt)!==0,l=i||(o&qt)!==0||this.skipped_effects.has(r);if((r.f&Xr)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=kt:(o&Oo)!==0?a.effects.push(r):wr(r)&&((r.f&Nn)!==0&&z(this,Ia).add(r),ir(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===a.effect&&($e(this,bt,Ga).call(this,a.effects),$e(this,bt,Ga).call(this,a.render_effects),a=a.parent),r=u.next,u=u.parent}},Ga=function(e){for(const a of e)(a.f&Ft)!==0?z(this,Ia).add(a):(a.f&gn)!==0&&z(this,Ra).add(a),$e(this,bt,go).call(this,a.deps),Et(a,kt)},go=function(e){if(e!==null)for(const a of e)(a.f&St)===0||(a.f&fa)===0||(a.f^=fa,$e(this,bt,go).call(this,a.deps))},Fs=function(){if(z(this,ra)===0){for(const e of z(this,Ma))e();z(this,Ma).clear()}z(this,aa)===0&&$e(this,bt,zs).call(this)},zs=function(){var s;if(Tr.size>1){this.previous.clear();var e=Qt,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Tr){if(i===this){a=!1;continue}const l=[];for(const[u,d]of this.current){if(i.current.has(u))if(a&&d!==i.current.get(u))i.current.set(u,d);else continue;l.push(u)}if(l.length===0)continue;const c=[...i.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var o=Jt;Jt=[];const u=new Set,d=new Map;for(const v of l)Hs(v,c,u,d);if(Jt.length>0){We=i,i.apply();for(const v of Jt)$e(s=i,bt,vo).call(s,v,r);i.deactivate()}Jt=o}}We=null,Qt=e}this.committed=!0,Tr.delete(this)};let fn=Br;function js(t){var e=Na;Na=!0;try{for(var a;;){if(Kl(),Jt.length===0&&(We?.flush(),Jt.length===0))return Gr=null,a;Bs()}}finally{Na=e}}function Bs(){var t=da;fo=!0;var e=null;try{var a=0;for(Or(!0);Jt.length>0;){var r=fn.ensure();if(a++>1e3){var o,s;Yl()}r.process(Jt),Kn.clear()}}finally{fo=!1,Or(t),Gr=null}}function Yl(){try{Cl()}catch(t){Fa(t,Gr)}}let _n=null;function as(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(Sn|qt))===0&&wr(r)&&(_n=new Set,ir(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?ai(r):r.fn=null),_n?.size>0)){Kn.clear();for(const o of _n){if((o.f&(Sn|qt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)_n.has(i)&&(_n.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(Sn|qt))===0&&ir(c)}}_n.clear()}}_n=null}}function Hs(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&St)!==0?Hs(o,e,a,r):(s&(zo|Nn))!==0&&(s&Ft)===0&&Us(o,e,r)&&(Et(o,Ft),va(o))}}function Us(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&St)!==0&&Us(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function va(t){for(var e=Gr=t;e.parent!==null;){e=e.parent;var a=e.f;if(fo&&e===He&&(a&Nn)!==0&&(a&Es)===0)return;if((a&(ga|An))!==0){if((a&kt)===0)return;e.f^=kt}}Jt.push(e)}function Xl(t){let e=0,a=hn(0),r;return()=>{or()&&(n(a),Zr(()=>(e===0&&(r=zt(()=>t(()=>Yn(a)))),e+=1,()=>{ha(()=>{e-=1,e===0&&(r?.(),r=void 0,Yn(a))})})))}}var Gl=Gn|Ua|Xr;function Jl(t,e,a){new Zl(t,e,a)}var Yt,Xt,Ro,ln,oa,cn,Gt,Rt,dn,yn,zn,sa,jn,ia,Bn,Hr,_t,Ql,$l,ho,Dr,Ir,po;class Zl{constructor(e,a,r){De(this,_t);At(this,"parent");De(this,Yt,!1);De(this,Xt);De(this,Ro,null);De(this,ln);De(this,oa);De(this,cn);De(this,Gt,null);De(this,Rt,null);De(this,dn,null);De(this,yn,null);De(this,zn,null);De(this,sa,0);De(this,jn,0);De(this,ia,!1);De(this,Bn,null);De(this,Hr,Xl(()=>(Ae(this,Bn,hn(z(this,sa))),()=>{Ae(this,Bn,null)})));Ae(this,Xt,e),Ae(this,ln,a),Ae(this,oa,r),this.parent=He.b,Ae(this,Yt,!!z(this,ln).pending),Ae(this,cn,Va(()=>{He.b=this;{var o=$e(this,_t,ho).call(this);try{Ae(this,Gt,Zt(()=>r(o)))}catch(s){this.error(s)}z(this,jn)>0?$e(this,_t,Ir).call(this):Ae(this,Yt,!1)}return()=>{z(this,zn)?.remove()}},Gl))}is_pending(){return z(this,Yt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!z(this,ln).pending}update_pending_count(e){$e(this,_t,po).call(this,e),Ae(this,sa,z(this,sa)+e),z(this,Bn)&&Cn(z(this,Bn),z(this,sa))}get_effect_pending(){return z(this,Hr).call(this),n(z(this,Bn))}error(e){var a=z(this,ln).onerror;let r=z(this,ln).failed;if(z(this,ia)||!a&&!r)throw e;z(this,Gt)&&(Ot(z(this,Gt)),Ae(this,Gt,null)),z(this,Rt)&&(Ot(z(this,Rt)),Ae(this,Rt,null)),z(this,dn)&&(Ot(z(this,dn)),Ae(this,dn,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&Pl(),fn.ensure(),Ae(this,sa,0),z(this,dn)!==null&&ca(z(this,dn),()=>{Ae(this,dn,null)}),Ae(this,Yt,this.has_pending_snippet()),Ae(this,Gt,$e(this,_t,Dr).call(this,()=>(Ae(this,ia,!1),Zt(()=>z(this,oa).call(this,z(this,Xt)))))),z(this,jn)>0?$e(this,_t,Ir).call(this):Ae(this,Yt,!1)};var l=Re;try{Lt(null),s=!0,a?.(e,i),s=!1}catch(c){Fa(c,z(this,cn)&&z(this,cn).parent)}finally{Lt(l)}r&&ha(()=>{Ae(this,dn,$e(this,_t,Dr).call(this,()=>{fn.ensure(),Ae(this,ia,!0);try{return Zt(()=>{r(z(this,Xt),()=>e,()=>i)})}catch(c){return Fa(c,z(this,cn).parent),null}finally{Ae(this,ia,!1)}}))})}}Yt=new WeakMap,Xt=new WeakMap,Ro=new WeakMap,ln=new WeakMap,oa=new WeakMap,cn=new WeakMap,Gt=new WeakMap,Rt=new WeakMap,dn=new WeakMap,yn=new WeakMap,zn=new WeakMap,sa=new WeakMap,jn=new WeakMap,ia=new WeakMap,Bn=new WeakMap,Hr=new WeakMap,_t=new WeakSet,Ql=function(){try{Ae(this,Gt,Zt(()=>z(this,oa).call(this,z(this,Xt))))}catch(e){this.error(e)}Ae(this,Yt,!1)},$l=function(){const e=z(this,ln).pending;e&&(Ae(this,Rt,Zt(()=>e(z(this,Xt)))),fn.enqueue(()=>{var a=$e(this,_t,ho).call(this);Ae(this,Gt,$e(this,_t,Dr).call(this,()=>(fn.ensure(),Zt(()=>z(this,oa).call(this,a))))),z(this,jn)>0?$e(this,_t,Ir).call(this):(ca(z(this,Rt),()=>{Ae(this,Rt,null)}),Ae(this,Yt,!1))}))},ho=function(){var e=z(this,Xt);return z(this,Yt)&&(Ae(this,zn,xn()),z(this,Xt).before(z(this,zn)),e=z(this,zn)),e},Dr=function(e){var a=He,r=Re,o=Ge;pn(z(this,cn)),Lt(z(this,cn)),Oa(z(this,cn).ctx);try{return e()}catch(s){return Os(s),null}finally{pn(a),Lt(r),Oa(o)}},Ir=function(){const e=z(this,ln).pending;z(this,Gt)!==null&&(Ae(this,yn,document.createDocumentFragment()),z(this,yn).append(z(this,zn)),si(z(this,Gt),z(this,yn))),z(this,Rt)===null&&Ae(this,Rt,Zt(()=>e(z(this,Xt))))},po=function(e){var a;if(!this.has_pending_snippet()){this.parent&&$e(a=this.parent,_t,po).call(a,e);return}Ae(this,jn,z(this,jn)+e),z(this,jn)===0&&(Ae(this,Yt,!1),z(this,Rt)&&ca(z(this,Rt),()=>{Ae(this,Rt,null)}),z(this,yn)&&(z(this,Xt).before(z(this,yn)),Ae(this,yn,null)))};function ec(t,e,a,r){const o=Wa()?pr:mr;if(a.length===0&&t.length===0){r(e.map(o));return}var s=We,i=He,l=qs();function c(){Promise.all(a.map(u=>tc(u))).then(u=>{l();try{r([...e.map(o),...u])}catch(d){(i.f&Sn)===0&&Fa(d,i)}s?.deactivate(),rr()}).catch(u=>{Fa(u,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return c()}finally{s?.deactivate(),rr()}}):c()}function qs(){var t=He,e=Re,a=Ge,r=We;return function(s=!0){pn(t),Lt(e),Oa(a),s&&r?.activate()}}function rr(){pn(null),Lt(null),Oa(null)}function pr(t){var e=St|Ft,a=Re!==null&&(Re.f&St)!==0?Re:null;return He!==null&&(He.f|=Ua),{ctx:Ge,deps:null,effects:null,equals:Ds,f:e,fn:t,reactions:null,rv:0,v:yt,wv:0,parent:a??He,ac:null}}function tc(t,e){let a=He;a===null&&wl();var r=a.b,o=void 0,s=hn(yt),i=!Re,l=new Map;return fc(()=>{var c=Ts();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===We&&u.committed&&u.deactivate(),rr()})}catch(g){c.reject(g),rr()}var u=We;if(i){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(ka),l.delete(u),l.set(u,c)}const v=(g,h=void 0)=>{if(u.activate(),h)h!==ka&&(s.f|=Wn,Cn(s,h));else{(s.f&Wn)!==0&&(s.f^=Wn),Cn(s,g);for(const[m,k]of l){if(l.delete(m),m===u)break;k.reject(ka)}}i&&(r.update_pending_count(-1),u.decrement(d))};c.promise.then(v,g=>v(null,g||"unknown"))}),$s(()=>{for(const c of l.values())c.reject(ka)}),new Promise(c=>{function u(d){function v(){d===o?c(s):u(o)}d.then(v,v)}u(o)})}function N(t){const e=pr(t);return ii(e),e}function mr(t){const e=pr(t);return e.equals=Is,e}function Ws(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Ot(e[a])}}function nc(t){for(var e=t.parent;e!==null;){if((e.f&St)===0)return(e.f&Sn)===0?e:null;e=e.parent}return null}function jo(t){var e,a=He;pn(nc(t));try{t.f&=~fa,Ws(t),e=ui(t)}finally{pn(a)}return e}function Vs(t){var e=jo(t);if(t.equals(e)||(We?.is_fork||(t.v=e),t.wv=ci()),!pa)if(Qt!==null)(or()||We?.is_fork)&&Qt.set(t,e);else{var a=(t.f&nn)===0?gn:kt;Et(t,a)}}let mo=new Set;const Kn=new Map;let Ks=!1;function hn(t,e){var a={f:0,v:t,reactions:null,equals:Ds,rv:0,wv:0};return a}function M(t,e){const a=hn(t);return ii(a),a}function _o(t,e=!1,a=!0){var o;const r=hn(t);return e||(r.equals=Is),qa&&a&&Ge!==null&&Ge.l!==null&&((o=Ge.l).s??(o.s=[])).push(r),r}function f(t,e,a=!1){Re!==null&&(!vn||(Re.f&ts)!==0)&&Wa()&&(Re.f&(St|Nn|zo|ts))!==0&&!kn?.includes(t)&&El();let r=a?dt(e):e;return Cn(t,r)}function Cn(t,e){if(!t.equals(e)){var a=t.v;pa?Kn.set(t,e):Kn.set(t,a),t.v=e;var r=fn.ensure();r.capture(t,a),(t.f&St)!==0&&((t.f&Ft)!==0&&jo(t),Et(t,(t.f&nn)!==0?kt:gn)),t.wv=ci(),Ys(t,Ft),Wa()&&He!==null&&(He.f&kt)!==0&&(He.f&(An|ga))===0&&(Vt===null?hc([t]):Vt.push(t)),!r.is_fork&&mo.size>0&&!Ks&&ac()}return e}function ac(){Ks=!1;var t=da;Or(!0);const e=Array.from(mo);try{for(const a of e)(a.f&kt)!==0&&Et(a,gn),wr(a)&&ir(a)}finally{Or(t)}mo.clear()}function Yn(t){f(t,t.v+1)}function Ys(t,e){var a=t.reactions;if(a!==null)for(var r=Wa(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===He)){var c=(l&Ft)===0;if(c&&Et(i,e),(l&St)!==0){var u=i;Qt?.delete(u),(l&fa)===0&&(l&nn&&(i.f|=fa),Ys(u,gn))}else c&&((l&Nn)!==0&&_n!==null&&_n.add(i),va(i))}}}function dt(t){if(typeof t!="object"||t===null||Vn in t)return t;const e=Kr(t);if(e!==ks&&e!==vl)return t;var a=new Map,r=Lo(t),o=M(0),s=Tn,i=l=>{if(Tn===s)return l();var c=Re,u=Tn;Lt(null),is(s);var d=l();return Lt(c),is(u),d};return r&&a.set("length",M(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&kl();var d=a.get(c);return d===void 0?d=i(()=>{var v=M(u.value);return a.set(c,v),v}):f(d,u.value,!0),!0},deleteProperty(l,c){var u=a.get(c);if(u===void 0){if(c in l){const d=i(()=>M(yt));a.set(c,d),Yn(o)}}else f(u,yt),Yn(o);return!0},get(l,c,u){if(c===Vn)return t;var d=a.get(c),v=c in l;if(d===void 0&&(!v||qn(l,c)?.writable)&&(d=i(()=>{var h=dt(v?l[c]:yt),m=M(h);return m}),a.set(c,d)),d!==void 0){var g=n(d);return g===yt?void 0:g}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=a.get(c);d&&(u.value=n(d))}else if(u===void 0){var v=a.get(c),g=v?.v;if(v!==void 0&&g!==yt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return u},has(l,c){if(c===Vn)return!0;var u=a.get(c),d=u!==void 0&&u.v!==yt||Reflect.has(l,c);if(u!==void 0||He!==null&&(!d||qn(l,c)?.writable)){u===void 0&&(u=i(()=>{var g=d?dt(l[c]):yt,h=M(g);return h}),a.set(c,u));var v=n(u);if(v===yt)return!1}return d},set(l,c,u,d){var v=a.get(c),g=c in l;if(r&&c==="length")for(var h=u;h<v.v;h+=1){var m=a.get(h+"");m!==void 0?f(m,yt):h in l&&(m=i(()=>M(yt)),a.set(h+"",m))}if(v===void 0)(!g||qn(l,c)?.writable)&&(v=i(()=>M(void 0)),f(v,dt(u)),a.set(c,v));else{g=v.v!==yt;var k=i(()=>dt(u));f(v,k)}var _=Reflect.getOwnPropertyDescriptor(l,c);if(_?.set&&_.set.call(d,u),!g){if(r&&typeof c=="string"){var x=a.get("length"),j=Number(c);Number.isInteger(j)&&j>=x.v&&f(x,j+1)}Yn(o)}return!0},ownKeys(l){n(o);var c=Reflect.ownKeys(l).filter(v=>{var g=a.get(v);return g===void 0||g.v!==yt});for(var[u,d]of a)d.v!==yt&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Tl()}})}var rs,Xs,Gs,Js;function rc(){if(rs===void 0){rs=window,Xs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;Gs=qn(e,"firstChild").get,Js=qn(e,"nextSibling").get,es(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),es(a)&&(a.__t=void 0)}}function xn(t=""){return document.createTextNode(t)}function za(t){return Gs.call(t)}function _r(t){return Js.call(t)}function b(t,e){return za(t)}function L(t,e=!1){{var a=za(t);return a instanceof Comment&&a.data===""?_r(a):a}}function O(t,e=1,a=!1){let r=t;for(;e--;)r=_r(r);return r}function oc(t){t.textContent=""}function Zs(){return!1}let os=!1;function sc(){os||(os=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Jr(t){var e=Re,a=He;Lt(null),pn(null);try{return t()}finally{Lt(e),pn(a)}}function ic(t,e,a,r=a){t.addEventListener(e,()=>Jr(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),sc()}function Qs(t){He===null&&(Re===null&&Sl(),bl()),pa&&yl()}function lc(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function mn(t,e,a){var r=He;r!==null&&(r.f&qt)!==0&&(t|=qt);var o={ctx:Ge,deps:null,nodes:null,f:t|Ft|nn,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{ir(o),o.f|=Fo}catch(l){throw Ot(o),l}else e!==null&&va(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&Ua)===0&&(s=s.first,(t&Nn)!==0&&(t&Gn)!==0&&s!==null&&(s.f|=Gn)),s!==null&&(s.parent=r,r!==null&&lc(s,r),Re!==null&&(Re.f&St)!==0&&(t&ga)===0)){var i=Re;(i.effects??(i.effects=[])).push(s)}return o}function or(){return Re!==null&&!vn}function $s(t){const e=mn(Yr,null,!1);return Et(e,kt),e.teardown=t,e}function Le(t){Qs();var e=He.f,a=!Re&&(e&An)!==0&&(e&Fo)===0;if(a){var r=Ge;(r.e??(r.e=[])).push(t)}else return ei(t)}function ei(t){return mn(Oo|Ps,t,!1)}function cc(t){return Qs(),mn(Yr|Ps,t,!0)}function dc(t){fn.ensure();const e=mn(ga|Ua,t,!0);return(a={})=>new Promise(r=>{a.outro?ca(e,()=>{Ot(e),r(void 0)}):(Ot(e),r(void 0))})}function uc(t){return mn(Oo,t,!1)}function fc(t){return mn(zo|Ua,t,!0)}function Zr(t,e=0){return mn(Yr|e,t,!0)}function pe(t,e=[],a=[],r=[]){ec(r,e,a,o=>{mn(Yr,()=>t(...o.map(n)),!0)})}function Va(t,e=0){var a=mn(Nn|e,t,!0);return a}function Zt(t){return mn(An|Ua,t,!0)}function ti(t){var e=t.teardown;if(e!==null){const a=pa,r=Re;ss(!0),Lt(null);try{e.call(null)}finally{ss(a),Lt(r)}}}function ni(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&Jr(()=>{o.abort(ka)});var r=a.next;(a.f&ga)!==0?a.parent=null:Ot(a,e),a=r}}function vc(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&An)===0&&Ot(e),e=a}}function Ot(t,e=!0){var a=!1;(e||(t.f&Es)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(gc(t.nodes.start,t.nodes.end),a=!0),ni(t,e&&!a),Fr(t,0),Et(t,Sn);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();ti(t);var o=t.parent;o!==null&&o.first!==null&&ai(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function gc(t,e){for(;t!==null;){var a=t===e?null:_r(t);t.remove(),t=a}}function ai(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function ca(t,e,a=!0){var r=[];ri(t,r,!0);var o=()=>{a&&Ot(t),e&&e()},s=r.length;if(s>0){var i=()=>--s||o();for(var l of r)l.out(i)}else o()}function ri(t,e,a){if((t.f&qt)===0){t.f^=qt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&e.push(l);for(var o=t.first;o!==null;){var s=o.next,i=(o.f&Gn)!==0||(o.f&An)!==0&&(t.f&Nn)!==0;ri(o,e,i?a:!1),o=s}}}function Bo(t){oi(t,!0)}function oi(t,e){if((t.f&qt)!==0){t.f^=qt,(t.f&kt)===0&&(Et(t,Ft),va(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&Gn)!==0||(a.f&An)!==0;oi(a,o?e:!1),a=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)(i.is_global||e)&&i.in()}}function si(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var o=a===r?null:_r(a);e.append(a),a=o}}let da=!1;function Or(t){da=t}let pa=!1;function ss(t){pa=t}let Re=null,vn=!1;function Lt(t){Re=t}let He=null;function pn(t){He=t}let kn=null;function ii(t){Re!==null&&(kn===null?kn=[t]:kn.push(t))}let Mt=null,Bt=0,Vt=null;function hc(t){Vt=t}let li=1,sr=0,Tn=sr;function is(t){Tn=t}function ci(){return++li}function wr(t){var e=t.f;if((e&Ft)!==0)return!0;if(e&St&&(t.f&=~fa),(e&gn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(wr(s)&&Vs(s),s.wv>t.wv)return!0}(e&nn)!==0&&Qt===null&&Et(t,kt)}return!1}function di(t,e,a=!0){var r=t.reactions;if(r!==null&&!kn?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&St)!==0?di(s,e,!1):e===s&&(a?Et(s,Ft):(s.f&kt)!==0&&Et(s,gn),va(s))}}function ui(t){var m;var e=Mt,a=Bt,r=Vt,o=Re,s=kn,i=Ge,l=vn,c=Tn,u=t.f;Mt=null,Bt=0,Vt=null,Re=(u&(An|ga))===0?t:null,kn=null,Oa(t.ctx),vn=!1,Tn=++sr,t.ac!==null&&(Jr(()=>{t.ac.abort(ka)}),t.ac=null);try{t.f|=uo;var d=t.fn,v=d(),g=t.deps;if(Mt!==null){var h;if(Fr(t,Bt),g!==null&&Bt>0)for(g.length=Bt+Mt.length,h=0;h<Mt.length;h++)g[Bt+h]=Mt[h];else t.deps=g=Mt;if(or()&&(t.f&nn)!==0)for(h=Bt;h<g.length;h++)((m=g[h]).reactions??(m.reactions=[])).push(t)}else g!==null&&Bt<g.length&&(Fr(t,Bt),g.length=Bt);if(Wa()&&Vt!==null&&!vn&&g!==null&&(t.f&(St|gn|Ft))===0)for(h=0;h<Vt.length;h++)di(Vt[h],t);return o!==null&&o!==t&&(sr++,Vt!==null&&(r===null?r=Vt:r.push(...Vt))),(t.f&Wn)!==0&&(t.f^=Wn),v}catch(k){return Os(k)}finally{t.f^=uo,Mt=e,Bt=a,Vt=r,Re=o,kn=s,Oa(i),vn=l,Tn=c}}function pc(t,e){let a=e.reactions;if(a!==null){var r=ul.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&St)!==0&&(Mt===null||!Mt.includes(e))&&(Et(e,gn),(e.f&nn)!==0&&(e.f^=nn,e.f&=~fa),Ws(e),Fr(e,0))}function Fr(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)pc(t,a[r])}function ir(t){var e=t.f;if((e&Sn)===0){Et(t,kt);var a=He,r=da;He=t,da=!0;try{(e&(Nn|ml))!==0?vc(t):ni(t),ti(t);var o=ui(t);t.teardown=typeof o=="function"?o:null,t.wv=li;var s;lo&&Ul&&(t.f&Ft)!==0&&t.deps}finally{da=r,He=a}}}async function fi(){await Promise.resolve(),js()}function n(t){var e=t.f,a=(e&St)!==0;if(Re!==null&&!vn){var r=He!==null&&(He.f&Sn)!==0;if(!r&&!kn?.includes(t)){var o=Re.deps;if((Re.f&uo)!==0)t.rv<sr&&(t.rv=sr,Mt===null&&o!==null&&o[Bt]===t?Bt++:Mt===null?Mt=[t]:Mt.includes(t)||Mt.push(t));else{(Re.deps??(Re.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Re]:s.includes(Re)||s.push(Re)}}}if(pa){if(Kn.has(t))return Kn.get(t);if(a){var i=t,l=i.v;return((i.f&kt)===0&&i.reactions!==null||gi(i))&&(l=jo(i)),Kn.set(i,l),l}}else a&&(!Qt?.has(t)||We?.is_fork&&!or())&&(i=t,wr(i)&&Vs(i),da&&or()&&(i.f&nn)===0&&vi(i));if(Qt?.has(t))return Qt.get(t);if((t.f&Wn)!==0)throw t.v;return t.v}function vi(t){if(t.deps!==null){t.f^=nn;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&St)!==0&&(e.f&nn)===0&&vi(e)}}function gi(t){if(t.v===yt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Kn.has(e)||(e.f&St)!==0&&gi(e))return!0;return!1}function zt(t){var e=vn;try{return vn=!0,t()}finally{vn=e}}const mc=-7169;function Et(t,e){t.f=t.f&mc|e}function _c(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Vn in t)wo(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&Vn in a&&wo(a)}}}function wo(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{wo(t[r],e)}catch{}const a=Kr(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=xs(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const wc=["touchstart","touchmove"];function yc(t){return wc.includes(t)}const hi=new Set,yo=new Set;function bc(t,e,a,r={}){function o(s){if(r.capture||Ja.call(e,s),!s.cancelBubble)return Jr(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?ha(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function an(t,e,a,r,o){var s={capture:r,passive:o},i=bc(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&$s(()=>{e.removeEventListener(t,i,s)})}function st(t){for(var e=0;e<t.length;e++)hi.add(t[e]);for(var a of yo)a(t)}let ls=null;function Ja(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;ls=t;var i=0,l=ls===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){fl(t,"currentTarget",{configurable:!0,get(){return s||a}});var d=Re,v=He;Lt(null),pn(null);try{for(var g,h=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var k=s["__"+r];k!=null&&(!s.disabled||t.target===s)&&k.call(s,t)}catch(_){g?h.push(_):g=_}if(t.cancelBubble||m===e||m===null)break;s=m}if(g){for(let _ of h)queueMicrotask(()=>{throw _});throw g}}finally{t.__root=e,delete t.currentTarget,Lt(d),pn(v)}}}function pi(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function lr(t,e){var a=He;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function P(t,e){var a=(e&zl)!==0,r=(e&jl)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=pi(s?t:"<!>"+t),a||(o=za(o)));var i=r||Xs?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=za(i),c=i.lastChild;lr(l,c)}else lr(i,i);return i}}function Sc(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=pi(o),l=za(i);s=za(l)}var c=s.cloneNode(!0);return lr(c,c),c}}function Cc(t,e){return Sc(t,e,"svg")}function Me(t=""){{var e=xn(t+"");return lr(e,e),e}}function ue(){var t=document.createDocumentFragment(),e=document.createComment(""),a=xn();return t.append(e,a),lr(e,a),t}function p(t,e){t!==null&&t.before(e)}function qg(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function ot(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function xc(t,e){return kc(t,e)}const Ca=new Map;function kc(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){rc();var l=new Set,c=v=>{for(var g=0;g<v.length;g++){var h=v[g];if(!l.has(h)){l.add(h);var m=yc(h);e.addEventListener(h,Ja,{passive:m});var k=Ca.get(h);k===void 0?(document.addEventListener(h,Ja,{passive:m}),Ca.set(h,1)):Ca.set(h,k+1)}}};c(Vr(hi)),yo.add(c);var u=void 0,d=dc(()=>{var v=a??e.appendChild(xn());return Jl(v,{pending:()=>{}},g=>{if(s){le({});var h=Ge;h.c=s}o&&(r.$$events=o),u=t(g,r)||{},s&&ce()}),()=>{for(var g of l){e.removeEventListener(g,Ja);var h=Ca.get(g);--h===0?(document.removeEventListener(g,Ja),Ca.delete(g)):Ca.set(g,h)}yo.delete(c),v!==a&&v.parentNode?.removeChild(v)}});return Tc.set(u,d),u}let Tc=new WeakMap;var en,un,Ut,la,gr,hr,Ur;class Qr{constructor(e,a=!0){At(this,"anchor");De(this,en,new Map);De(this,un,new Map);De(this,Ut,new Map);De(this,la,new Set);De(this,gr,!0);De(this,hr,()=>{var e=We;if(z(this,en).has(e)){var a=z(this,en).get(e),r=z(this,un).get(a);if(r)Bo(r),z(this,la).delete(a);else{var o=z(this,Ut).get(a);o&&(z(this,un).set(a,o.effect),z(this,Ut).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of z(this,en)){if(z(this,en).delete(s),s===e)break;const l=z(this,Ut).get(i);l&&(Ot(l.effect),z(this,Ut).delete(i))}for(const[s,i]of z(this,un)){if(s===a||z(this,la).has(s))continue;const l=()=>{if(Array.from(z(this,en).values()).includes(s)){var u=document.createDocumentFragment();si(i,u),u.append(xn()),z(this,Ut).set(s,{effect:i,fragment:u})}else Ot(i);z(this,la).delete(s),z(this,un).delete(s)};z(this,gr)||!r?(z(this,la).add(s),ca(i,l,!1)):l()}}});De(this,Ur,e=>{z(this,en).delete(e);const a=Array.from(z(this,en).values());for(const[r,o]of z(this,Ut))a.includes(r)||(Ot(o.effect),z(this,Ut).delete(r))});this.anchor=e,Ae(this,gr,a)}ensure(e,a){var r=We,o=Zs();if(a&&!z(this,un).has(e)&&!z(this,Ut).has(e))if(o){var s=document.createDocumentFragment(),i=xn();s.append(i),z(this,Ut).set(e,{effect:Zt(()=>a(i)),fragment:s})}else z(this,un).set(e,Zt(()=>a(this.anchor)));if(z(this,en).set(r,e),o){for(const[l,c]of z(this,un))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of z(this,Ut))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(z(this,hr)),r.ondiscard(z(this,Ur))}else z(this,hr).call(this)}}en=new WeakMap,un=new WeakMap,Ut=new WeakMap,la=new WeakMap,gr=new WeakMap,hr=new WeakMap,Ur=new WeakMap;const Ec=0,ro=1;function Pc(t,e,a,r,o){var s=Wa(),i=yt,l=s?hn(i):_o(i,!1,!1),c=s?hn(i):_o(i,!1,!1),u=new Qr(t);Va(()=>{var d=e(),v=!1;if(gl(d)){var g=qs(),h=!1;const m=k=>{if(!v){h=!0,g(!1),fn.ensure();try{k()}finally{rr(),Na||js()}}};d.then(k=>{m(()=>{Cn(l,k),u.ensure(ro,r&&(_=>r(_,l)))})},k=>{m(()=>{if(Cn(c,k),u.ensure(ro,o&&(_=>o(_,c))),!o)throw c.v})}),ha(()=>{h||m(()=>{u.ensure(Ec,a)})})}else Cn(l,d),u.ensure(ro,r&&(m=>r(m,l)));return()=>{v=!0}})}function U(t,e,a=!1){var r=new Qr(t),o=a?Gn:0;function s(i,l){r.ensure(i,l)}Va(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function ve(t,e){Zr(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Nc(t,e,a){for(var r=[],o=e.length,s,i=e.length,l=0;l<o;l++){let v=e[l];ca(v,()=>{if(s){if(s.pending.delete(v),s.done.add(v),s.pending.size===0){var g=t.outrogroups;bo(Vr(s.done)),g.delete(s),g.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var c=r.length===0&&a!==null;if(c){var u=a,d=u.parentNode;oc(d),d.append(u),t.items.clear()}bo(e,!c)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function bo(t,e=!0){for(var a=0;a<t.length;a++)Ot(t[a],e)}var cs;function En(t,e,a,r,o,s=null){var i=t,l=new Map,c=(e&Ms)!==0;if(c){var u=t;i=u.appendChild(xn())}var d=null,v=mr(()=>{var x=a();return Lo(x)?x:x==null?[]:Vr(x)}),g,h=!0;function m(){_.fallback=d,Ac(_,g,i,e,r),d!==null&&(g.length===0?(d.f&bn)===0?Bo(d):(d.f^=bn,Za(d,null,i)):ca(d,()=>{d=null}))}var k=Va(()=>{g=n(v);for(var x=g.length,j=new Set,w=We,S=Zs(),I=0;I<x;I+=1){var T=g[I],E=r(T,I),F=h?null:l.get(E);F?(F.v&&Cn(F.v,T),F.i&&Cn(F.i,I),S&&w.skipped_effects.delete(F.e)):(F=Mc(l,h?i:cs??(cs=xn()),T,E,I,o,e,a),h||(F.e.f|=bn),l.set(E,F)),j.add(E)}if(x===0&&s&&!d&&(h?d=Zt(()=>s(i)):(d=Zt(()=>s(cs??(cs=xn()))),d.f|=bn)),!h)if(S){for(const[J,H]of l)j.has(J)||w.skipped_effects.add(H.e);w.oncommit(m),w.ondiscard(()=>{})}else m();n(v)}),_={effect:k,items:l,outrogroups:null,fallback:d};h=!1}function Ac(t,e,a,r,o){var s=(r&Ml)!==0,i=e.length,l=t.items,c=t.effect.first,u,d=null,v,g=[],h=[],m,k,_,x;if(s)for(x=0;x<i;x+=1)m=e[x],k=o(m,x),_=l.get(k).e,(_.f&bn)===0&&(_.nodes?.a?.measure(),(v??(v=new Set)).add(_));for(x=0;x<i;x+=1){if(m=e[x],k=o(m,x),_=l.get(k).e,t.outrogroups!==null)for(const H of t.outrogroups)H.pending.delete(_),H.done.delete(_);if((_.f&bn)!==0)if(_.f^=bn,_===c)Za(_,null,a);else{var j=d?d.next:c;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),In(t,d,_),In(t,_,j),Za(_,j,a),d=_,g=[],h=[],c=d.next;continue}if((_.f&qt)!==0&&(Bo(_),s&&(_.nodes?.a?.unfix(),(v??(v=new Set)).delete(_))),_!==c){if(u!==void 0&&u.has(_)){if(g.length<h.length){var w=h[0],S;d=w.prev;var I=g[0],T=g[g.length-1];for(S=0;S<g.length;S+=1)Za(g[S],w,a);for(S=0;S<h.length;S+=1)u.delete(h[S]);In(t,I.prev,T.next),In(t,d,I),In(t,T,w),c=w,d=T,x-=1,g=[],h=[]}else u.delete(_),Za(_,c,a),In(t,_.prev,_.next),In(t,_,d===null?t.effect.first:d.next),In(t,d,_),d=_;continue}for(g=[],h=[];c!==null&&c!==_;)(u??(u=new Set)).add(c),h.push(c),c=c.next;if(c===null)continue}(_.f&bn)===0&&g.push(_),d=_,c=_.next}if(t.outrogroups!==null){for(const H of t.outrogroups)H.pending.size===0&&(bo(Vr(H.done)),t.outrogroups?.delete(H));t.outrogroups.size===0&&(t.outrogroups=null)}if(c!==null||u!==void 0){var E=[];if(u!==void 0)for(_ of u)(_.f&qt)===0&&E.push(_);for(;c!==null;)(c.f&qt)===0&&c!==t.fallback&&E.push(c),c=c.next;var F=E.length;if(F>0){var J=(r&Ms)!==0&&i===0?a:null;if(s){for(x=0;x<F;x+=1)E[x].nodes?.a?.measure();for(x=0;x<F;x+=1)E[x].nodes?.a?.fix()}Nc(t,E,J)}}s&&ha(()=>{if(v!==void 0)for(_ of v)_.nodes?.a?.apply()})}function Mc(t,e,a,r,o,s,i,l){var c=(i&Nl)!==0?(i&Dl)===0?_o(a,!1,!1):hn(a):null,u=(i&Al)!==0?hn(o):null;return{v:c,i:u,e:Zt(()=>(s(e,c??a,u??o,l),()=>{t.delete(r)}))}}function Za(t,e,a){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,s=e&&(e.f&bn)===0?e.nodes.start:a;r!==null;){var i=_r(r);if(s.before(r),r===o)return;r=i}}function In(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function Pe(t,e,...a){var r=new Qr(t);Va(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},Gn)}function Dc(t,e,a){var r=new Qr(t);Va(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},Gn)}function mi(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=mi(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function Ic(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=mi(t))&&(r&&(r+=" "),r+=e);return r}function nt(t){return typeof t=="object"?Ic(t):t??""}const ds=[...` 	
\r\fÂ \v\uFEFF`];function Rc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||ds.includes(r[i-1]))&&(l===r.length||ds.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Lc(t,e){return t==null?null:String(t)}function Je(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=Rc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function ja(t,e,a,r){var o=t.__style;if(o!==e){var s=Lc(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Oc=Symbol("is custom element"),Fc=Symbol("is html");function Wg(t,e){var a=Ho(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function zc(t,e){var a=Ho(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function tt(t,e,a,r){var o=Ho(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[_l]=a),a==null?t.removeAttribute(e):typeof a!="string"&&jc(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Ho(t){return t.__attributes??(t.__attributes={[Oc]:t.nodeName.includes("-"),[Fc]:t.namespaceURI===Bl})}var us=new Map;function jc(t){var e=t.getAttribute("is")||t.nodeName,a=us.get(e);if(a)return a;us.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=xs(o);for(var i in r)r[i].set&&a.push(i);o=Kr(o)}return a}function _i(t,e,a=e){var r=new WeakSet;ic(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=oo(t)?so(s):s,a(s),We!==null&&r.add(We),await fi(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),zt(e)==null&&t.value&&(a(oo(t)?so(t.value):t.value),We!==null&&r.add(We)),Zr(()=>{var o=e();if(t===document.activeElement){var s=Mr??We;if(r.has(s))return}oo(t)&&o===so(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function oo(t){var e=t.type;return e==="number"||e==="range"}function so(t){return t===""?null:+t}function fs(t,e){return t===e||t?.[Vn]===e}function Xe(t={},e,a,r){return uc(()=>{var o,s;return Zr(()=>{o=s,s=[],zt(()=>{t!==a(...s)&&(e(t,...s),o&&fs(a(...o),t)&&e(null,...o))})}),()=>{ha(()=>{s&&fs(a(...s),t)&&e(null,...s)})}}),t}function Uo(t=!1){const e=Ge,a=e.l.u;if(!a)return;let r=()=>_c(e.s);if(t){let o=0,s={};const i=pr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&cc(()=>{vs(e,r),co(a.b)}),Le(()=>{const o=zt(()=>a.m.map(hl));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&Le(()=>{vs(e,r),co(a.a)})}function vs(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Er=!1;function Bc(t){var e=Er;try{return Er=!1,[t(),Er]}finally{Er=e}}const Hc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Uc(t,e,a){return new Proxy({props:t,exclude:e},Hc)}const qc={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(Ya(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];Ya(o)&&(o=o());const s=qn(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(Ya(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=qn(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===Vn||e===Ns)return!1;for(let a of t.props)if(Ya(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(Ya(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function So(...t){return new Proxy({props:t},qc)}function Te(t,e,a,r){var o=!qa||(a&Rl)!==0,s=(a&Ol)!==0,i=(a&Fl)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?zt(r):r),l),d;if(s){var v=Vn in t||Ns in t;d=qn(t,e)?.set??(v&&e in t?w=>t[e]=w:void 0)}var g,h=!1;s?[g,h]=Bc(()=>t[e]):g=t[e],g===void 0&&r!==void 0&&(g=u(),d&&(o&&xl(),d(g)));var m;if(o?m=()=>{var w=t[e];return w===void 0?u():(c=!0,w)}:m=()=>{var w=t[e];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(a&Ll)===0)return m;if(d){var k=t.$$legacy;return(function(w,S){return arguments.length>0?((!o||!S||k||h)&&d(S?m():w),w):m()})}var _=!1,x=((a&Il)!==0?pr:mr)(()=>(_=!1,m()));s&&n(x);var j=He;return(function(w,S){if(arguments.length>0){const I=S?n(x):o&&s?dt(w):w;return f(x,I),_=!0,l!==void 0&&(l=I),w}return pa&&_||(j.f&Sn)!==0?x.v:n(x)})}function he(t){Ge===null&&As(),qa&&Ge.l!==null?Wc(Ge).m.push(t):Le(()=>{const e=zt(t);if(typeof e=="function")return e})}function Wc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Vc="5";var Cs;typeof window<"u"&&((Cs=window.__svelte??(window.__svelte={})).v??(Cs.v=new Set)).add(Vc);ql();const wi={};function Kc(t){ct(wi,t)}function qo(){const t=lt(wi);if(!t)throw new Error("No FeedSearchContext found");return t}const yi={};function Yc(t){ct(yi,t)}function jt(){const t=lt(yi);if(!t)throw new Error("No SearchParamsContext found");return t}function Xc(t,e){le(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=jt(),s="feedSearch",i=N(()=>o().get(s)||""),l=N(()=>n(i));Kc({getFeedSearch:()=>n(l),setFeedSearch:d=>{d===""?r(s):a(s,d)}});var c=ue(),u=L(c);Pe(u,()=>e.children??je),p(t,c),ce()}const bi={};function Gc(t){ct(bi,t)}function Jc(){const t=lt(bi);if(!t)throw new Error("No TagsSearchContext found");return t}function Zc(t,e){le(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=jt(),s="tagsSearch",i=N(()=>o().get(s)||""),l=N(()=>n(i));Gc({getTagsSearch:()=>n(l),setTagsSearch:d=>{d===""?r(s):a(s,d)}});var c=ue(),u=L(c);Pe(u,()=>e.children??je),p(t,c),ce()}const Si={};function Qc(t){ct(Si,t)}function Ci(){const t=lt(Si);if(!t)throw new Error("No FeedOrderContext found");return t}function $c(t,e){le(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=jt(),s="feedOrder",i=N(()=>o().get(s)||"newest"),l=N(()=>n(i));Qc({getFeedOrder:()=>n(l),setFeedOrder:d=>{d==="newest"?r(s):a(s,d)}});var c=ue(),u=L(c);Pe(u,()=>e.children??je),p(t,c),ce()}const xi={};function ed(t){ct(xi,t)}function yr(){const t=lt(xi);if(!t)throw new Error("No SidebarContext found");return t}function td(t,e){le(e,!0);let a=M("closed");ed({sidebarOpen:()=>{f(a,"preOpening")},sidebarClose:()=>{f(a,"closing")},getSidebarState:()=>n(a),setSidebarState:u=>{f(a,u,!0)}});var l=ue(),c=L(l);Pe(c,()=>e.children??je),p(t,l),ce()}const ki={};function nd(t){ct(ki,t)}function Mn(){const t=lt(ki);if(!t)throw new Error("No SelectedTagsContext found");return t}function ad(t,e){le(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=jt(),s=N(a),i="selectedTags";let l=N(()=>n(s).get(i)||""),c=N(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));nd({getSelectedTags:()=>n(c),addTag:_=>{n(c).has(_)||r(i,[...n(c),_].map(x=>encodeURIComponent(x)).join(","))},removeTag:_=>{n(c).has(_)&&n(c).size===1?o(i):n(c).has(_)&&r(i,[...n(c)].filter(x=>x!==_).map(x=>encodeURIComponent(x)).join(","))},clearTags:()=>{o(i)},setSelectedTags:_=>{_.size===0?o(i):r(i,[..._].map(x=>encodeURIComponent(x)).join(","))}});var m=ue(),k=L(m);Pe(k,()=>e.children??je),p(t,m),ce()}const Ti={};function rd(t){ct(Ti,t)}function ma(){const t=lt(Ti);if(!t)throw new Error("No SelectedNotesContext found");return t}var od=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],sd=["difference","intersection","symmetricDifference","union"],gs=!1,La,tn,Hn,qr,Ba,Ei,Pi;const Wr=class Wr extends Set{constructor(a){super();De(this,Ba);De(this,La,new Map);De(this,tn,M(0));De(this,Hn,M(0));De(this,qr,Tn||-1);if(a){for(var r of a)super.add(r);z(this,Hn).v=super.size}gs||$e(this,Ba,Pi).call(this)}has(a){var r=super.has(a),o=z(this,La),s=o.get(a);if(s===void 0){if(!r)return n(z(this,tn)),!1;s=$e(this,Ba,Ei).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),f(z(this,Hn),super.size),Yn(z(this,tn))),this}delete(a){var r=super.delete(a),o=z(this,La),s=o.get(a);return s!==void 0&&(o.delete(a),f(s,!1)),r&&(f(z(this,Hn),super.size),Yn(z(this,tn))),r}clear(){if(super.size!==0){super.clear();var a=z(this,La);for(var r of a.values())f(r,!1);a.clear(),f(z(this,Hn),0),Yn(z(this,tn))}}keys(){return this.values()}values(){return n(z(this,tn)),super.values()}entries(){return n(z(this,tn)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(z(this,Hn))}};La=new WeakMap,tn=new WeakMap,Hn=new WeakMap,qr=new WeakMap,Ba=new WeakSet,Ei=function(a){return Tn===z(this,qr)?M(a):hn(a)},Pi=function(){gs=!0;var a=Wr.prototype,r=Set.prototype;for(const o of od)a[o]=function(...s){return n(z(this,tn)),r[o].apply(this,s)};for(const o of sd)a[o]=function(...s){n(z(this,tn));var i=r[o].apply(this,s);return new Wr(i)}};let Co=Wr;function id(t,e){le(e,!0);let a=new Co,r=M("single");const o=()=>a,s=h=>{a.clear(),h.forEach(m=>a.add(m))},i=h=>{a.add(h)},l=h=>{a.delete(h)},c=()=>{a.clear()};rd({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:c,getMode:()=>n(r),changeMode:h=>{f(r,h,!0),h==="single"&&c()}});var v=ue(),g=L(v);Pe(g,()=>e.children??je),p(t,v),ce()}const Ni={};function ld(t){ct(Ni,t)}function Wo(){const t=lt(Ni);if(!t)throw new Error("No LocalDBContext found");return t}const Ai={};function cd(t){ct(Ai,t)}function cr(){const t=lt(Ai);if(!t)throw new Error("No SettingsContext found");return t}const Mi={};function dd(t){ct(Mi,t)}function $r(){const t=lt(Mi);if(!t)throw new Error("No BroadcastContext found");return t}const ud="AppStorage",fd=1,Qa="account",$a="settings",Ke="notes",It="tags",vd="syncLog",Jn="success",Zn="error",mt=(t,e,a)=>{t?.addEventListener(e,a)},hs=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();mt(s,Jn,()=>{const i=s?.result||[];a(i)}),mt(s,Zn,i=>{r(i)})}),zr=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);mt(i,Jn,()=>{const l=i?.result?.data;r(l)}),mt(i,Zn,l=>{o(l)})}),na=(t,e,a,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});mt(c,Jn,()=>{o()}),mt(c,Zn,u=>{s(u)})}),ut=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{mt(i,Jn,()=>{l()}),mt(i,Zn,u=>{c(u)})})}))},io=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);mt(l,Jn,()=>{r()}),mt(l,Zn,c=>{o(c)})}),Xa=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{mt(i,Jn,()=>{l()}),mt(i,Zn,u=>{c(u)})})}))},Ta=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();mt(i,Jn,()=>{a()}),mt(i,Zn,l=>{r(l)})});function gd(t,e){le(e,!0);const{deleteSearchParam:a}=jt(),r="viewMode";let s=dt((()=>{const E=new URLSearchParams(window.location.search).get(r)||"tab";return E==="popup"||E==="window"||E==="tab"||E==="sidebar"?E:"tab"})());he(()=>{a(r)});let i=M(!1),l=M(dt({showFavicon:!0,recordMode:"note"}));const{getDB:c}=Wo(),{createBroadcastChannel:u,tabId:d}=$r(),v=u(),g=N(c),h=async()=>{const T=await zr(n(g),$a,"default");T&&f(l,T,!0)},m=async()=>{await h(),f(i,!0)},k=async T=>{const E=JSON.parse(T.data),F=E;if(E.tabId&&E.tabId===d){F.type==="exit"&&(f(l,{showFavicon:!0,recordMode:"note"},!0),Ta(n(g),$a));return}F.type==="updateSettings"?h():F.type==="exit"&&f(l,{showFavicon:!0,recordMode:"note"},!0)},_=()=>n(l).showFavicon,x=()=>n(l).recordMode,j=async T=>{n(l).showFavicon=T,await na(n(g),$a,"default",{...n(l)}),v.postMessage({type:"updateSettings"})},w=async T=>{n(l).recordMode=T,await na(n(g),$a,"default",{...n(l)}),v.postMessage({type:"updateSettings"})};he(()=>(m(),v.addEventListener(k),()=>{v.removeEventListener(k)})),cd({getFaviconEnabled:_,getRecordMode:x,setRecordMode:w,setFaviconShown:j,isInitedSettings:()=>n(i),getViewMode:()=>s});var S=ue(),I=L(S);Pe(I,()=>e.children??je),p(t,S),ce()}const Di={};function hd(t){ct(Di,t)}function Vo(){const t=lt(Di);if(!t)throw new Error("No AccountContext found");return t}function pd(t,e){le(e,!0);let a=M(void 0);const{getDB:r}=Wo(),{createBroadcastChannel:o,tabId:s}=$r(),i=N(r),l=o(),c=async()=>{const w=await zr(n(i),Qa,"default");f(a,w,!0)},u=w=>na(n(i),Qa,"default",w),d=async w=>{const S=await zr(n(i),Qa,"default");S!==void 0&&f(a,S,!0),w(S)},v=async w=>{const S=JSON.parse(w.data);if(S.tabId&&S.tabId===s)return;const I=S;I.type==="initLocalAccount"?f(a,null):I.type==="initCloudAccount"?c():I.type==="disconnectCloudAccount"?f(a,null):I.type==="exit"?f(a,void 0):I.type==="updateAccount"&&c()};he(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),hd({init:d,getAccount:()=>n(a),initLocalAccount:async()=>{f(a,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async w=>{const S={encryptedClientKey:w.encryptedClientKey||"",subscriptionExpires:w.subscriptionExpires||-1,lastSync:-1};await u(S),f(a,S,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{f(a,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async w=>{if(!n(a))throw new Error("No account to update subscription for");const S={...n(a),subscriptionExpires:w};await u(S),l.postMessage({type:"updateAccount"})},exitApp:async()=>{f(a,void 0),l.postMessage({type:"exit"}),await Ta(n(i),Qa)}});var x=ue(),j=L(x);Pe(j,()=>e.children??je),p(t,x),ce()}const Ii={};function md(t){ct(Ii,t)}function Dt(){const t=lt(Ii);if(!t)throw new Error("No NotesContext found");return t}const On=()=>crypto.randomUUID(),_d=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},Ri=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function Vg(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const pt=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function wd(t,e){le(e,!0);const{getDB:a}=Wo(),{createBroadcastChannel:r,tabId:o}=$r(),s=N(a),i=r(),l=720*60*60*1e3;let c=M(!1),u=M(()=>new Map),d=M(()=>[]),v=M(()=>new Map);const g=()=>n(c),h=()=>n(d)().some(y=>y.data&&!y.data.deletedAt&&!y.data.archivedAt),m=()=>n(d)().some(y=>y.data&&y.data.deletedAt),k=()=>n(d)().some(y=>y.data&&y.data.archivedAt&&!y.data.deletedAt),_=y=>{const R=n(d)(),A=n(v)(),B=A.get(y.id);B?B.data=y.data:(R.push(y),A.set(y.id,y)),f(d,()=>R),f(v,()=>A)},x=y=>{const R=n(d)(),A=n(v)(),B=A.get(y);A.has(y)&&A.delete(y),B&&(B.data=void 0),f(d,()=>R),f(v,()=>A)},j=y=>{const R=n(d)(),A=n(v)();for(const B of y){const Q=A.get(B);A.has(B)&&A.delete(B),Q&&(Q.data=void 0)}f(d,()=>R),f(v,()=>A)},w=()=>{f(d,()=>[]),f(u,()=>new Map),f(v,()=>new Map)},S=()=>n(d),I=y=>{const R=n(u)();for(const A of y)R.get(A)||R.set(A,{name:A});f(u,()=>R)},T=async()=>{const[y,R]=await Promise.all([hs(n(s),Ke),hs(n(s),It).then(ee=>ee.reduce(($,re)=>$.set(re.id,re.data),new Map))]),A=[],B=[],Q=new Map;for(const ee of y)ee.data.deletedAt&&Date.now()-ee.data.deletedAt>l?A.push(ee.id):(B.push(ee),Q.set(ee.id,ee));const Y=_d(B),fe=[],ye=new Map(R);[...Y.values()].forEach(ee=>{ye.set(ee,{name:ee,pinned:R.get(ee)?.pinned||!1}),R.has(ee)||fe.push(ee)});const oe=[];[...R.keys()].forEach(ee=>{Y.has(ee)||oe.push(ee)}),await Xa(n(s),Ke,A),await Xa(n(s),It,oe),await ut(n(s),It,fe.map(ee=>({id:ee,data:{pinned:ye.get(ee)?.pinned||!1}}))),f(d,()=>B),f(v,()=>Q),f(u,()=>ye),f(c,!0)},E=async y=>{const R=n(u)(),A=y.data.tags.filter(B=>!R.has(B))||[];return await na(n(s),Ke,y.id,{...y.data}),A.length>0&&(await ut(n(s),It,A.map(B=>({id:B,data:{pinned:!1}}))||[]),I(A)),_(y),i.postMessage({type:"putNote",data:{id:y.id}}),y.id},F=async({link:y,text:R,tags:A})=>{const B={id:On(),data:{link:pt(y),text:R,tags:pt(A),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await E(B),B.id},J=async(y,{link:R,text:A,tags:B})=>{const Q=C(y);if(!Q||!Q.data)return;const Y={id:y,data:{...Q.data,link:pt(R),text:A,tags:pt(B),updatedAt:Date.now()}};await E(Y)},H=async(y,{link:R,text:A,tags:B})=>{const Q=C(y);if(!Q||!Q.data)return;const Y=On(),fe={id:y,data:{...Q.data,link:R,text:A,tags:B,updatedAt:Date.now(),history:[...(Q.data.history||[]).slice(-49),{id:Y,link:pt(Q.data.link),text:Q.data.text,tags:pt(Q.data.tags),updatedAt:Q.data.updatedAt}]}};return await E(fe),Y},W=async(y,R)=>{const A=C(y);if(!A||!A.data)return;const B=A.data.history?.find?.(Y=>Y.id===R);if(!B)return;const Q={id:y,data:{...A.data,link:pt(B.link),text:B.text,tags:pt(B.tags),updatedAt:B.updatedAt,history:A.data.history?.filter?.(Y=>Y.id!==R)||[]}};await E(Q)},ne=async y=>{const A=n(v)().get(y);!A||!A.data||(x(y),await io(n(s),Ke,y),i.postMessage({type:"deleteNote",data:{id:y}}))},Z=async()=>{await Ta(n(s),Ke),await Ta(n(s),It),w(),i.postMessage({type:"clearNotes"})},C=y=>n(v)().get(y),K=async(y,R)=>{const B=n(v)().get(y);if(!B||!B.data)return;const Q={id:y,data:{...B.data,pinnedAt:R?Date.now():void 0}};E(Q)},se=async y=>{const A=n(v)().get(y);if(!A||!A.data)return;const B={id:y,data:{...A.data,deletedAt:Date.now()}};await E(B)},q=async y=>{const A=n(v)().get(y);if(!A||!A.data)return;const B={id:y,data:{...A.data,archivedAt:Date.now()}};await E(B)},X=async({noteIds:y})=>{const R=n(v)(),A=n(d)();for(const Q of y){const Y=R.get(Q);Y?.data&&(Y.data.deletedAt=Date.now())}return await ut(n(s),Ke,y.map(Q=>{const Y=R.get(Q);return{id:Q,data:Y?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>R),f(d,()=>A),{cancel:async()=>{for(const Q of y){const Y=R.get(Q);Y?.data&&(Y.data.deletedAt=0)}await ut(n(s),Ke,y.map(Q=>{const Y=R.get(Q);return{id:Q,data:Y?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>R),f(d,()=>A)}}},te=async({noteIds:y})=>{const R=n(v)(),A=n(d)();for(const Q of y){const Y=R.get(Q);Y?.data&&(Y.data.archivedAt=Date.now())}return await ut(n(s),Ke,y.map(Q=>{const Y=R.get(Q);return{id:Q,data:Y?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>R),f(d,()=>A),{cancel:async()=>{for(const Q of y){const Y=R.get(Q);Y?.data&&(Y.data.archivedAt=0)}await ut(n(s),Ke,y.map(Q=>{const Y=R.get(Q);return{id:Q,data:Y?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>R),f(d,()=>A)}}},ie=async({noteIds:y})=>{const R=n(v)(),A=n(d)(),B=[];for(const Y of y){const fe=R.get(Y);fe?.data&&(B.push({id:Y,data:pt(fe.data)}),fe.data.archivedAt=0)}return await ut(n(s),Ke,y.map(Y=>{const fe=R.get(Y);return{id:Y,data:fe?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>R),f(d,()=>A),{cancel:async()=>{for(const Y of B){const fe=R.get(Y.id);fe?.data&&(fe.data=Y.data)}await ut(n(s),Ke,y.map(Y=>{const fe=R.get(Y);return{id:Y,data:fe?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>R),f(d,()=>A)}}},be=async({noteIds:y})=>{const R=n(v)(),A=n(d)(),B=[];for(const Y of y){const fe=R.get(Y);fe?.data&&(B.push({id:Y,data:pt(fe.data)}),fe.data.deletedAt=0)}return await ut(n(s),Ke,y.map(Y=>{const fe=R.get(Y);return{id:Y,data:fe?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>R),f(d,()=>A),{cancel:async()=>{for(const Y of B){const fe=R.get(Y.id);fe?.data&&(fe.data=Y.data)}await ut(n(s),Ke,y.map(Y=>{const fe=R.get(Y);return{id:Y,data:fe?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>R),f(d,()=>A)}}},ke=async y=>{const A=n(v)().get(y);if(!A||!A.data)return;const B={id:y,data:{...A.data,deletedAt:0}};await E(B)},Ee=async y=>{const A=n(v)().get(y);if(!A||!A.data)return;const B={id:y,data:{...A.data,archivedAt:0}};await E(B)},Ie=async(y,R)=>{const A=n(u)();A.set(y,{name:y,pinned:R}),await na(n(s),It,y,{pinned:R}),i.postMessage({type:"pinTag",data:{tag:y,pinned:R}}),f(u,()=>A)},D=async({noteIds:y})=>{const R=n(u)(),A=n(d)();j(y),await Xa(n(s),Ke,y),i.postMessage({type:"reloadNotes"}),f(d,()=>A),f(u,()=>R)},ae=async y=>{const R=n(v)(),A={};y.forEach(B=>{const Q=R.get(B.id),Y=[];if(Q&&Q.data){let fe=0,ye=0;for(;fe<B.data.history.length&&ye<Q.data.history.length;){const oe=B.data.history[fe],ee=Q.data.history[ye];oe.id===ee.id?(oe.updatedAt>ee.updatedAt?Y.push(oe):Y.push(ee),fe+=1,ye+=1):oe.updatedAt<ee.updatedAt?(Y.push(oe),fe+=1):oe.updatedAt>ee.updatedAt?(Y.push(ee),ye+=1):(Y.push(ee),fe+=1,ye+=1)}Q.data.updatedAt>B.data.updatedAt?A[Q.id]={id:Q.id,data:{...Q.data,history:Y}}:A[B.id]={id:B.id,data:{...B.data,history:Y}}}else A[B.id]=B}),await ut(n(s),Ke,Object.values(A)),await T(),i.postMessage({type:"reloadNotes"})},_e=async()=>{const y=[];n(d)().forEach(A=>{A&&A.data&&A.data.deletedAt&&y.push(A.id)}),await Xa(n(s),Ke,y),await T(),i.postMessage({type:"emptyBin"})},Se=async(y,R)=>{const A=n(v)(),B=n(d)(),Q=[],Y=[];for(const ye of R){const oe=A.get(ye);oe?.data&&(Q.push({id:ye,data:pt(oe.data)}),Y.push({id:ye,data:{...oe.data,tags:oe.data.tags.filter(ee=>ee!==y),history:[...oe.data.history||[],{id:On(),link:pt(oe.data.link),text:oe.data.text,tags:oe.data.tags,updatedAt:Date.now()}]}}))}for(const ye of Y){const oe=A.get(ye.id);oe?.data&&(oe.data=ye.data)}return await ut(n(s),Ke,Y.map(ye=>({id:ye.id,data:ye.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>B),{cancel:async()=>{for(const ye of Q){const oe=A.get(ye.id);oe?.data&&(oe.data=ye.data)}await ut(n(s),Ke,Q.map(ye=>({id:ye.id,data:ye.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>B)}}},Ne=async(y,R,A)=>{const B=n(v)(),Q=n(d)(),Y=n(u)(),fe=[],ye=[];for(const $ of A){const re=B.get($);re?.data&&(fe.push({id:$,data:pt(re.data)}),ye.push({id:$,data:{...re.data,tags:re.data.tags.map(we=>we!==y?we:R),history:[...re.data.history||[],{id:On(),link:pt(re.data.link),text:re.data.text,tags:re.data.tags,updatedAt:Date.now()}]}}))}for(const $ of ye){const re=B.get($.id);re?.data&&(re.data=$.data)}const oe=Y.has(R);return await Promise.all([(async()=>{if(!oe){const $=Y.get(y)?.pinned||!1;Y.set(R,{name:R,pinned:$}),await na(n(s),It,R,{pinned:$})}})(),ut(n(s),Ke,ye.map($=>({id:$.id,data:$.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>Q),f(u,()=>Y),{cancel:async()=>{for(const $ of fe){const re=B.get($.id);re?.data&&(re.data=$.data)}await Promise.all([(async()=>{oe||(Y.delete(R),await io(n(s),It,R))})(),ut(n(s),Ke,fe.map($=>({id:$.id,data:$.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>Q),f(u,()=>Y)}}},Ce=async(y,R)=>{const A=n(v)(),B=n(d)(),Q=n(u)(),Y=[],fe=[];for(const ee of R){const $=A.get(ee);$?.data&&(Y.push({id:ee,data:pt($.data)}),fe.push({id:ee,data:{...$.data,tags:[...new Set([...$.data.tags,y])],history:[...$.data.history||[],{id:On(),link:pt($.data.link),text:$.data.text,tags:$.data.tags,updatedAt:Date.now()}]}}))}for(const ee of fe){const $=A.get(ee.id);$?.data&&($.data=ee.data)}const ye=Q.has(y);return await Promise.all([(async()=>{ye||(Q.set(y,{name:y,pinned:!1}),await na(n(s),It,y,{pinned:!1}))})(),ut(n(s),Ke,fe.map(ee=>({id:ee.id,data:ee.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>B),f(u,()=>Q),{cancel:async()=>{for(const ee of Y){const $=A.get(ee.id);$?.data&&($.data=ee.data)}await Promise.all([(async()=>{ye||(Q.delete(y),await io(n(s),It,y))})(),ut(n(s),Ke,Y.map(ee=>({id:ee.id,data:ee.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>B),f(u,()=>Q)}}},V=async(y,R,A)=>{const B=n(v)(),Q=n(d)(),Y=n(u)(),fe=[],ye=[];for(const re of A){const we=B.get(re);we?.data&&(fe.push({id:re,data:pt(we.data)}),ye.push({id:re,data:{...we.data,tags:[...new Set([...we.data.tags.filter(Be=>!y.includes(Be)),...R])],history:[...we.data.history||[],{id:On(),link:pt(we.data.link),text:we.data.text,tags:we.data.tags,updatedAt:Date.now()}]}}))}for(const re of ye){const we=B.get(re.id);we?.data&&(we.data=re.data)}const oe=n(u)(),ee=R.filter(re=>!oe.has(re));return await Promise.all([(async()=>{if(ee.length>0)return ut(n(s),It,ee.map(re=>({id:re,data:{pinned:!1}})))})(),ut(n(s),Ke,ye.map(re=>({id:re.id,data:re.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>Q),f(u,()=>Y),{cancel:async()=>{for(const re of fe){const we=B.get(re.id);we?.data&&(we.data=re.data)}await Promise.all([(async()=>{if(ee.length>0){for(const re of ee)Y.delete(re);return Xa(n(s),It,ee)}})(),ut(n(s),Ke,fe.map(re=>({id:re.id,data:re.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>Q),f(u,()=>Y)}}},G=async y=>{const R=JSON.parse(y.data),A=R;if(R.tabId&&R.tabId===o){A.type==="exit"&&(w(),await Ta(n(s),Ke),await Ta(n(s),It));return}if(A.type==="putNote"){const Q=A.data.id;if(!Q)return;const Y=await zr(n(s),Ke,Q);if(!Y)return;_({id:Q,data:Y})}else if(A.type==="deleteNote"){const B=A.data.id;if(!B)return;x(B)}else if(A.type==="pinTag"){const B=A.data.tag,Q=A.data.pinned,Y=n(u)();Y.set(B,{name:B,pinned:Q}),f(u,()=>Y)}else A.type==="clearNotes"?w():A.type==="reloadNotes"||A.type==="emptyBin"?T():A.type==="exit"&&w()};he(()=>(T(),i.addEventListener(G),()=>{i.removeEventListener(G)})),md({isInitedNotes:g,createNote:F,updateNote:J,deleteNote:ne,saveNote:H,revertNote:W,pinNote:K,moveNoteToBin:se,moveNoteToArchive:q,getGetNotes:S,importNotes:ae,clearNotes:Z,getNoteById:C,getGetMapTags:()=>n(u),pinTag:Ie,restoreNoteFromBin:ke,moveNoteFromArchive:Ee,checkNotes:h,checkNotesInBin:m,checkNotesInArchive:k,emptyBin:_e,moveNotesToBin:X,moveNotesToArchive:te,moveNotesFromArchive:ie,deleteNotes:D,restoreNotesFromBin:be,deleteTag:Se,renameTag:Ne,addTag:Ce,changeTags:V});var de=ue(),xe=L(de);Pe(xe,()=>e.children??je),p(t,de),ce()}const Li={};function yd(t){ct(Li,t)}function _a(){const t=lt(Li);if(!t)throw new Error("No FeedContext found");return t}const Oi={};var Ye=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(Ye||{});function bd(t){ct(Oi,t)}function eo(){const t=lt(Oi);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function Sd(t,e){le(e,!0);const a=qo(),{getSelectedTags:r}=Mn(),{getSelectedMetaTags:o}=eo(),{getGetNotes:s}=Dt();let i=N(r),l=N(o),c=M(0),u=[],d=M(0),v=N(()=>n(l).has(Ye.ARCHIVED)),g=N(()=>n(l).has(Ye.BIN));Le(()=>{const k=s()()||[],_=[],x=Array.from(n(i).values());for(let j=k.length-1;j>=0;j--){if(!k[j]||!k[j].data)continue;const w=k[j];if(!n(v)&&!n(g)&&(w?.data.deletedAt||w?.data.archivedAt)||n(v)&&(w?.data.deletedAt||!w?.data.archivedAt)||n(g)&&!w?.data.deletedAt)continue;const S=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(w.data.link?.title.toLowerCase().includes(S)||w.data.link?.url.toLowerCase().includes(S)||w.data.text.toLowerCase().includes(S)||w.data.tags.map(I=>I.toLowerCase()).join(" ").includes(S)))){if(n(l).has(Ye.INBOX)){if(w.data.tags.length>0)continue}else if(n(i).size&&x.some(I=>!w.data.tags.includes(I)))continue;_.push(w)}}f(c,_.length,!0),u=_,f(d,Date.now(),!0)}),yd({getFiltredNotesLength:()=>n(c),getFiltredNotes:()=>(n(d),u),getUpdatedFiltredNotesTimestamp:()=>n(d)});var h=ue(),m=L(h);Pe(m,()=>e.children??je),p(t,h),ce()}function Cd(t,e){le(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=jt(),s=N(a),i="selectedMetaTags";let l=N(()=>n(s).get(i)||""),c=N(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));bd({getSelectedMetaTags:()=>n(c),addMetaTag:_=>{n(c).has(_)||r(i,[...n(c),_].map(x=>encodeURIComponent(x)).join(","))},removeMetaTag:_=>{n(c).has(_)&&n(c).size===1?o(i):n(c).has(_)&&r(i,[...n(c)].filter(x=>x!==_).map(x=>encodeURIComponent(x)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:_=>{_.size===0?o(i):r(i,[..._].map(x=>encodeURIComponent(x)).join(","))}});var m=ue(),k=L(m);Pe(k,()=>e.children??je),p(t,m),ce()}const Fi={},ua=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function xd(t){ct(Fi,t)}function Dn(){const t=lt(Fi);if(!t)throw new Error("No AnimationSettingsContext found");return t}function kd(t,e){le(e,!0);let a=dt(ua());xd(a);var r=ue(),o=L(r);Pe(o,()=>e.children??je),p(t,r),ce()}const zi={};function Td(t){ct(zi,t)}function Ko(){const t=lt(zi);if(!t)throw new Error("No ScrollingContext found");return t}function Ed(t,e){le(e,!0);let a=M(!1);const r=()=>n(a),o=Ri(()=>{f(a,!1)},100);Td({isScrolling:r,enable:()=>{f(a,!0),o()}});var i=ue(),l=L(i);Pe(l,()=>e.children??je),p(t,i),ce()}const ji={};function Pd(t){ct(ji,t)}function on(){const t=lt(ji);if(!t)throw new Error("No MobileSizeContext found");return t}function Nd(t,e){le(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=M(dt(a())),o=Dn();const s=Ri(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{f(r,a(),!0)})};Pd({checkMobileSize:()=>n(r)}),he(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=ue(),u=L(c);Pe(u,()=>e.children??je),p(t,c),ce()}const Bi={};function Ad(t){ct(Bi,t)}function $t(){const t=lt(Bi);if(!t)throw new Error("No DialogContext found");return t}function Md(t,e){le(e,!0);let a=M(0),r=M(!1),o=M(!0),s=M(!1),i=M(!1);Ad({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{f(a,n(a)+1)},dialogDec:()=>{f(a,n(a)-1)},blockDialog:I=>{f(r,I,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:I=>{f(o,I,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:I=>{f(s,I,!0)},setLeftEnd:I=>{f(i,I,!0)},getCountDialog:()=>n(a)});var w=ue(),S=L(w);Pe(S,()=>e.children??je),p(t,w),ce()}const Hi={};function Dd(t){ct(Hi,t)}function to(){const t=lt(Hi);if(!t)throw new Error("No ScrollContainerContext found");return t}function Id(t,e){le(e,!0);let a=M(null);Dd({setScrollContainer:l=>{f(a,l,!0)},getScrollContainer:()=>n(a)});var s=ue(),i=L(s);Pe(i,()=>e.children??je),p(t,s),ce()}const Ui={};function Rd(t){ct(Ui,t)}function Yo(){const t=lt(Ui);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Ld(t,e){le(e,!0);let a=M(200);Rd({setDialogPageHeight:l=>{f(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=ue(),i=L(s);Pe(i,()=>e.children??je),p(t,s),ce()}const Od=[Qa,$a,Ke,It,vd];function Fd(){return new Promise((t,e)=>{const a=indexedDB.open(ud,fd);mt(a,"upgradeneeded",()=>{const r=a.result;for(const o of Od)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),mt(a,Jn,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),mt(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),mt(a,Zn,()=>{e()})})}function zd(t,e){le(e,!0);let a=M(null);he(()=>{Fd().then(l=>{f(a,l,!0)}).catch(l=>{})}),ld({getDB:()=>n(a)});var o=ue(),s=L(o);{var i=l=>{var c=ue(),u=L(c);Pe(u,()=>e.children??je),p(l,c)};U(s,l=>{n(a)&&l(i)})}p(t,o),ce()}const Kt="dialogPages",qi={};function jd(t){ct(qi,t)}function rn(){const t=lt(qi);if(!t)throw new Error("No DialogPagesContext found");return t}function Bd(t,e){le(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=jt(),s=N(a);let i=N(()=>n(s).get(Kt)||""),l=N(()=>n(i).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const c=()=>n(l),u=w=>{if(w.length===0){o(Kt);return}r(Kt,w.map(S=>encodeURIComponent(S)).join(","))},d=w=>{r(Kt,[...n(l),w].map(S=>encodeURIComponent(S)).join(","))};jd({setDialogPages:u,getDialogPages:c,pushDialogPage:d,popDialogPage:()=>{const w=n(l)[n(l).length-1];return n(l).length<=1?(o(Kt),w):(r(Kt,n(l).slice(0,-1).map(S=>encodeURIComponent(S)).join(",")),w)},replaceDialogPage:w=>{r(Kt,[...n(l).slice(0,-1),w].map(S=>encodeURIComponent(S)).join(","))},hasDialogPage:w=>n(l).find(S=>{const[I]=S.split("?");return I===w})!==void 0,clearDialogPages:()=>{o(Kt)},createDialogPageHref:w=>{const S=new URLSearchParams(n(s).toString());return S.set(Kt,[...c(),w].map(I=>encodeURIComponent(I)).join(",")),`${window.location.pathname}?${S.toString()}`},createHandleClickDialogPage:w=>S=>{S.preventDefault(),d(w)}});var x=ue(),j=L(x);Pe(j,()=>e.children??je),p(t,x),ce()}function Hd(t,e){le(e,!0);let a=M(dt(new URLSearchParams(window.location.search)));const r=v=>{const g=window.location.pathname;f(a,v,!0),window.history.replaceState(null,"",`${g}${v.size>0?`?${v.toString()}`:""}`)};Yc({getSearchParams:()=>n(a),replaceSearchParams:v=>{const g=new URLSearchParams(v);r(g)},setSearchParam:(v,g)=>{const h=new URLSearchParams(n(a));h.set(v,g),r(h)},deleteSearchParam:v=>{const g=new URLSearchParams(n(a));g.delete(v),r(g)},getHref:v=>{const g=new URLSearchParams(v);return`${window.location.pathname}${g.toString().length>0?`?${g.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var u=ue(),d=L(u);Pe(d,()=>e.children??je),p(t,u),ce()}const Wi={};function Ud(t){ct(Wi,t)}function qd(){const t=lt(Wi);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Wd(t,e){le(e,!0);let a=dt({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";he(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l);let c=null;const u=d=>{o()&&(c&&clearTimeout(c),c=setTimeout(()=>{o()&&d.target!==document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur?.()},120))};return document.addEventListener("touchstart",u,{passive:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l),document.removeEventListener("touchstart",u)}}),Ud({getIsKeyboardVisible:r});var s=ue(),i=L(s);Pe(i,()=>e.children??je),p(t,s),ce()}function Vd(t,e){le(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};dd({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=ue(),s=L(o);Pe(s,()=>e.children??je),p(t,o),ce()}function Kd(t,e){zd(t,{children:(a,r)=>{Vd(a,{children:(o,s)=>{kd(o,{children:(i,l)=>{Ed(i,{children:(c,u)=>{Nd(c,{children:(d,v)=>{Md(d,{children:(g,h)=>{Id(g,{children:(m,k)=>{Ld(m,{children:(_,x)=>{Wd(_,{children:(j,w)=>{Hd(j,{children:(S,I)=>{Bd(S,{children:(T,E)=>{var F=ue(),J=L(F);Pe(J,()=>e.children??je),p(T,F)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Yd(t,e){Kd(t,{children:(a,r)=>{Zc(a,{children:(o,s)=>{Xc(o,{children:(i,l)=>{$c(i,{children:(c,u)=>{td(c,{children:(d,v)=>{Cd(d,{children:(g,h)=>{ad(g,{children:(m,k)=>{id(m,{children:(_,x)=>{gd(_,{children:(j,w)=>{pd(j,{children:(S,I)=>{wd(S,{children:(T,E)=>{Sd(T,{children:(F,J)=>{var H=ue(),W=L(H);Pe(W,()=>e.children??je),p(F,H)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const gt=t=>{const a=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(i=>i instanceof HTMLElement?i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement?!i.disabled&&i.offsetParent!==null:i.offsetParent!==null:!1),r=a.indexOf(t);if(r===-1)return{next:null,prev:null};const o=a[r+1],s=a[r-1];return{next:o,prev:s}};let xt=M(""),Rn=M(null),Ea=M(null),wn=M(null),Ln=M(dt([])),Pr=M(null),Fn=null;function ht(t,e){f(xt,""),Fn=null,f(Ea,null),f(wn,null),setTimeout(()=>{f(xt,t,!0),e?.onFinish&&f(Ea,e.onFinish,!0),e?.cancel&&(f(wn,e.cancel.onCancel,!0),Fn=e.cancel.nextFocusRef)},16)}var Xd=P('<button type="button" class="c p-1i0azn2">undo</button>'),Gd=P('<div class="a p-1i0azn2"><div class="b p-1i0azn2"><span> </span> <!></div></div>'),Jd=P("<div><!></div>");function Xo(t,e){le(e,!0);const a=On();he(()=>(f(Ln,[...n(Ln),a],!0),()=>{const c=n(Ln).indexOf(a);c!==-1&&f(Ln,n(Ln).filter((u,d)=>d!==c),!0)}));const r=c=>{if(c.key==="Tab"&&c.shiftKey){if(Fn&&n(xt)){c.preventDefault();const{prev:u}=gt(Fn);u?.focus(),f(xt,"")}}else if(c.key==="Tab"&&!c.shiftKey)Fn&&n(xt)&&(c.preventDefault(),f(xt,""),Fn?.focus());else if(c.key==="Escape"&&n(xt)){if(c.preventDefault(),Fn){const{prev:u}=gt(Fn);u?.focus()}f(xt,"")}};he(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)})),Le(()=>{n(xt);const c=n(wn)?2e3:800;n(xt)&&(n(Rn)?.getBoundingClientRect(),n(Rn)?.style.setProperty("opacity","1"));const u=setTimeout(()=>{n(Rn)?.style.removeProperty("opacity")},c),d=setTimeout(()=>{f(xt,""),n(Ea)&&n(Ea)(),f(Ea,null),f(wn,null),n(Rn)?.style.removeProperty("opacity")},c+400);return()=>{clearTimeout(u),clearTimeout(d)}});const o=c=>{c.preventDefault(),n(wn)&&(f(Ea,null),n(wn)(),f(wn,null)),f(xt,""),n(Rn)?.style.removeProperty("opacity")};Le(()=>{n(xt)&&n(wn)&&n(Pr)&&setTimeout(()=>{n(Pr)?.focus()},151)}),Le(()=>{n(Ln),zt(()=>{f(xt,""),n(Rn)?.style.removeProperty("opacity")})});var s=Jd(),i=b(s);{var l=c=>{var u=Gd(),d=b(u),v=b(d),g=b(v),h=O(v,2);{var m=k=>{var _=Xd();_.__click=o,Xe(_,x=>f(Pr,x),()=>n(Pr)),p(k,_)};U(h,k=>{n(wn)&&k(m)})}Xe(d,k=>f(Rn,k),()=>n(Rn)),pe(()=>ot(g,n(xt))),p(c,u)};U(i,c=>{n(xt)&&n(Ln)[n(Ln).length-1]===a&&c(l)})}p(t,s),ce()}st(["click"]);var Zd=P('<span class="a p-lxk90o"><!></span>');function ft(t,e){var a=Zd(),r=b(a);Pe(r,()=>e.children),p(t,a)}var Qd=Cc('<svg class="p-1yv1ibq"><use></use></svg>');function me(t,e){let a=Te(e,"name",8,"");var r=Qd(),o=b(r);pe(()=>tt(o,"href",`#icon-${a()??""}`)),p(t,r)}var $d=P('<button class="a p-18m1f7k"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Vi(t,e){le(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=yr(),{getDialogPages:s}=rn(),{checkExistedDialog:i}=$t();let l=N(()=>s().length>0||i());const c=g=>{if(g.preventDefault(),n(l))return;const h=r();h==="closed"?a():h==="opened"&&o()};var u=$d();u.__click=c;var d=b(u);ve(d,()=>({"--size":"32px"})),me(d.lastChild,{name:"sidebarMenu"});var v=O(d,2);ft(v,{children:(g,h)=>{var m=Me("Menu");p(g,m)}}),p(t,u),ce()}st(["click"]);var eu=P('<button class="b p-9fi5nt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),tu=P('<div class="a p-9fi5nt"><input class="p-9fi5nt"/> <!></div>');function xo(t,e){le(e,!0);let a=Te(e,"value",15,""),r=Te(e,"ref",15,null);const o=u=>{u.key==="Escape"&&(a(""),e.onChange?.(""))};he(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=tu(),i=b(s);i.__input=u=>e.onChange?.(u.target?.value||""),Xe(i,u=>r(u),()=>r());var l=O(i,2);{var c=u=>{var d=eu();d.__click=()=>{a(""),e.onChange?.("")};var v=b(d);ve(v,()=>({"--size":"20px"})),me(v.lastChild,{name:"close"});var g=O(v,2);ft(g,{children:(h,m)=>{var k=Me("Clear");p(h,k)}}),p(u,d)};U(l,u=>{a()&&u(c)})}pe(()=>tt(i,"placeholder",e.placeholder)),an("focus",i,function(...u){e.onFocus?.apply(this,u)}),_i(i,a),p(t,s),ce()}st(["input","click"]);function Go(t,e){le(e,!0),he(()=>{const a=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("click",a,{capture:!0}),()=>{document.removeEventListener("click",a,{capture:!0})}}),ce()}function nu(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const Ki=nu(),au=()=>{const t=navigator.userAgent;return/android/i.test(t)},ru=au(),Kg=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},Yg=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},dr=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let xa=M(dt([]));var ou=P("<dialog><div><!></div></dialog> <!>",1);function br(t,e){le(e,!0);const a=On(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;he(()=>(f(xa,[...n(xa),a],!0),()=>{const w=n(xa).indexOf(a);w!==-1&&f(xa,n(xa).filter((S,I)=>I!==w),!0)}));let o=Te(e,"onClosed",3,()=>{}),s=Te(e,"blocked",3,!1),i=M(null),l=M(null),c=M(!1),{dialogInc:u,dialogDec:d}=$t();const v=()=>{const w=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(w),o()()},{once:!0}),f(c,!1)};Le(()=>{e.startClose&&v()}),he(()=>{n(i)?.showModal(),n(i)?.getClientRects(),f(c,!0);const w=S=>{S?.preventDefault(),s()||v()};return n(i)?.addEventListener("cancel",w),n(i)?.addEventListener("close",w),()=>{n(i)?.removeEventListener("cancel",w),n(i)?.removeEventListener("close",w)}}),he(()=>(u(),()=>{d()})),he(()=>{const w=S=>{S.key==="Escape"&&s()&&S.preventDefault()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}});function g(){setTimeout(()=>{if(Ki||!n(i)||!n(l))return;const w=window.visualViewport;if(w)if(w.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}he(()=>(g(),window.visualViewport?.addEventListener("resize",g),window.visualViewport?.addEventListener("scroll",g),document.addEventListener("focusin",g),document.addEventListener("focusout",g),()=>{window.visualViewport?.removeEventListener("resize",g),window.visualViewport?.removeEventListener("scroll",g),document.addEventListener("focusin",g),document.addEventListener("focusout",g)}));var h=ou(),m=L(h),k=b(m),_=b(k);Pe(_,()=>e.children),Xe(k,w=>f(l,w),()=>n(l)),Xe(m,w=>f(i,w),()=>n(i));var x=O(m,2);{var j=w=>{Go(w,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:v})};U(x,w=>{n(i)&&n(l)&&!s()&&w(j)})}pe(()=>{Je(m,1,nt({a:!0,b:n(c),c:n(xa).length>1}),"p-1x14yml"),Je(k,1,nt({d:!0,b:n(c)}),"p-1x14yml")}),p(t,h),ce()}var su=P("<div><!></div>");function iu(t,e){le(e,!0);let a=M(!1),r=M(null);const o=()=>{const d=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),f(a,!1)},s=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},i=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},l=d=>{d.key==="Escape"&&o()};he(()=>{n(r)?.getClientRects(),f(a,!0);const d=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),Le(()=>{e.startClose&&o()});var c=su(),u=b(c);Pe(u,()=>e.children),Xe(c,d=>f(r,d),()=>n(r)),pe(()=>Je(c,1,nt({a:!0,b:n(a)}),"p-1unpq18")),p(t,c),ce()}var lu=P("<ul><!></ul>"),cu=P("<ul><!></ul>");function Sr(t,e){le(e,!0);let a=Te(e,"ref",15);const{checkMobileSize:r}=on();let o=r();var s=ue(),i=L(s);{var l=u=>{br(u,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(d,v)=>{var g=lu(),h=b(g);Pe(h,()=>e.children),Xe(g,m=>a(m),()=>a()),pe(()=>Je(g,1,nt({a:!0,b:o}),"p-1sp2xya")),p(d,g)},$$slots:{default:!0}})},c=u=>{iu(u,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(d,v)=>{var g=cu(),h=b(g);Pe(h,()=>e.children),Xe(g,m=>a(m),()=>a()),pe(()=>Je(g,1,nt({a:!0,b:o}),"p-1sp2xya")),p(d,g)},$$slots:{default:!0}})};U(i,u=>{o?u(l):u(c,!1)})}p(t,s),ce()}var du=P("<button><!></button>"),uu=P("<a><!></a>");function et(t,e){let a=Te(e,"dangerous",3,!1),r=Te(e,"type",3,"button"),o=Te(e,"href",3,"");var s=ue(),i=L(s);{var l=u=>{var d=du();d.__click=function(...g){e.onClick?.apply(this,g)},d.__keydown=function(...g){e.onKeydown?.apply(this,g)};var v=b(d);Pe(v,()=>e.children??je),pe(()=>Je(d,1,nt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")),p(u,d)},c=u=>{var d=uu();d.__click=function(...g){e.onClick?.apply(this,g)},d.__keydown=function(...g){e.onKeydown?.apply(this,g)};var v=b(d);Pe(v,()=>e.children??je),pe(()=>{tt(d,"href",o()),Je(d,1,nt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")}),p(u,d)};U(i,u=>{r()==="button"?u(l):u(c,!1)})}p(t,s)}st(["click","keydown"]);var fu=P('<li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li>',1),vu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),gu=P('<div class="a p-cjxu92"><button><!> <!></button> <!></div>');function hu(t,e){le(e,!0);let a=M(!1),r=M(!1);const{checkMobileSize:o}=on(),{getFeedOrder:s,setFeedOrder:i}=Ci();let l=N(o),c=N(s);const u=()=>{n(a)||f(a,!0)},d=j=>{f(r,!0),i(j)},v=()=>{f(a,!1),f(r,!1)};he(()=>{const j=w=>{w.key==="Escape"&&f(r,!0)};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)});var g=gu(),h=b(g);h.__click=u,Je(h,1,nt({b:!0,c:!0}),"p-cjxu92");var m=b(h);me(m,{name:"filter"});var k=O(m,2);ft(k,{children:(j,w)=>{var S=Me("show feed order menu");p(j,S)}});var _=O(h,2);{var x=j=>{var w=vu(),S=L(w);ve(S,()=>({"--right":"0px","--top":"44px"})),Sr(S.lastChild,{get startClose(){return n(r)},onClosed:v,children:(I,T)=>{var E=fu(),F=L(E),J=b(F);{let se=N(()=>n(c)==="newest");et(J,{get active(){return n(se)},get dialogMode(){return n(l)},onClick:()=>d("newest"),children:(q,X)=>{var te=Me("Newest");p(q,te)},$$slots:{default:!0}})}var H=O(F,2),W=b(H);{let se=N(()=>n(c)==="oldest");et(W,{get active(){return n(se)},get dialogMode(){return n(l)},onClick:()=>d("oldest"),children:(q,X)=>{var te=Me("Oldest");p(q,te)},$$slots:{default:!0}})}var ne=O(H,2),Z=b(ne);{let se=N(()=>n(c)==="AtoZ");et(Z,{get active(){return n(se)},get dialogMode(){return n(l)},onClick:()=>d("AtoZ"),children:(q,X)=>{var te=Me("A to Z");p(q,te)},$$slots:{default:!0}})}var C=O(ne,2),K=b(C);{let se=N(()=>n(c)==="ZtoA");et(K,{get active(){return n(se)},get dialogMode(){return n(l)},onClick:()=>d("ZtoA"),children:(q,X)=>{var te=Me("Z to A");p(q,te)},$$slots:{default:!0}})}p(I,E)},$$slots:{default:!0}}),p(j,w)};U(_,j=>{n(a)&&j(x)})}p(t,g),ce()}st(["click"]);var ge=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t))(ge||{});const ps={settings:"Settings",importData:"Import",exportData:"Export",account:"Account",sync:"Sync",accountSetup:"",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success"};var pu=P('<div><!> <div class="a p-t68rxw"></div></div>');function Ka(t,e){le(e,!0);let a=M(!1);he(()=>{const s=setTimeout(()=>{f(a,!0)},200);return()=>{clearTimeout(s)}});var r=pu(),o=b(r);Pe(o,()=>e.children??je),pe(()=>Je(r,1,nt({b:!0,c:n(a)}),"p-t68rxw")),p(t,r),ce()}var mu=P("<a><!></a>"),_u=P("<button><!></button>");function Tt(t,e){let a=Te(e,"type",3,"standard"),r=Te(e,"typeButton",3,"button"),o=Te(e,"element",3,"button"),s=Te(e,"href",3,""),i=Te(e,"fullWidth",3,!1),l=Te(e,"withoutMinWidth",3,!1);var c=ue(),u=L(c);{var d=g=>{var h=mu();h.__click=function(...k){e.onClick?.apply(this,k)};var m=b(h);Pe(m,()=>e.children??je),pe(()=>{tt(h,"target",e.target),tt(h,"rel",e.rel),tt(h,"href",s()),Je(h,1,nt({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),p(g,h)},v=g=>{var h=_u();h.__click=function(...k){e.onClick?.apply(this,k)};var m=b(h);Pe(m,()=>e.children??je),pe(()=>{tt(h,"type",r()),Je(h,1,nt({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),p(g,h)};U(u,g=>{o()==="a"?g(d):g(v,!1)})}p(t,c)}st(["click"]);let ko=M(!1),Nr=M(!1),To=M(""),Eo=M("Cancel"),Po=M("Confirm"),No,Rr=M(void 0),Ao,Mo=M("dangerous");function Aa(t){f(ko,!0),f(To,t.title,!0),t.buttonCancelTitle&&f(Eo,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&f(Po,t.buttonConfirmTitle,!0),No=t.onConfirm,f(Rr,t.onCancel,!0),Ao=t.onClosed,t.type?f(Mo,t.type,!0):f(Mo,"dangerous")}var wu=P('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),yu=P('<div class="a p-1jlul5o"><!></div>');function bu(t,e){le(e,!0);let a=M(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{f(a,!0)},250)};he(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(Rr)?.(),f(Nr,!0)},l=async()=>{s(),await No?.(),f(Nr,!0),o=!0},c=()=>{clearTimeout(r),f(a,!1),f(ko,!1),f(Nr,!1),f(To,""),f(Eo,"Cancel"),f(Po,"Confirm"),f(Rr,void 0),No=void 0,Ao&&Ao(o),o=!1};var u=ue(),d=L(u);{var v=g=>{br(g,{get blocked(){return n(a)},get startClose(){return n(Nr)},onClosed:c,children:(h,m)=>{var k=yu(),_=b(k);{var x=w=>{Ka(w,{})},j=w=>{var S=wu(),I=L(S),T=b(I),E=O(I,2),F=b(E);{var J=W=>{Tt(W,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(ne,Z)=>{var C=Me();pe(()=>ot(C,n(Eo))),p(ne,C)},$$slots:{default:!0}})};U(F,W=>{n(Rr)&&W(J)})}var H=O(F,2);Tt(H,{onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(Mo)},children:(W,ne)=>{var Z=Me();pe(()=>ot(Z,n(Po))),p(W,Z)},$$slots:{default:!0}}),pe(()=>ot(T,n(To))),p(w,S)};U(_,w=>{n(a)?w(x):w(j,!1)})}p(h,k)},$$slots:{default:!0}})};U(d,g=>{n(ko)&&g(v)})}p(t,u),ce()}const ur=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,c=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var Su=P('<div class="a p-rp2pt7"><a class="b p-rp2pt7"><span class="c p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function Cu(t,e){le(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=rn(),{checkExistedDialog:i}=$t(),l=()=>{o.length===0&&!i()&&s(ge.NewNote)};he(()=>ur({key:"n",action:l})),Uo();var c=Su(),u=b(c),d=N(()=>r(ge.NewNote));u.__click=function(..._){n(d)?.apply(this,_)};var v=b(u),g=b(v);ve(g,()=>({"--size":"32px","--color":"#b0b0b0"})),me(g.lastChild,{name:"add"});var h=O(g,2);ft(h,{children:(_,x)=>{var j=Me("Add note");p(_,j)}});var m=O(v,2),k=b(m);ve(k,()=>({"--size":"16px","--color":"#b0b0b0"})),me(k.lastChild,{name:"plus"}),pe(_=>tt(u,"href",_),[()=>a(ge.NewNote)]),p(t,c),ce()}st(["click"]);var xu=P("<button><!></button>");function er(t,e){le(e,!0);let a=Te(e,"type",3,"button"),r=!1,o=M(null);Le(()=>{e.onRef&&e.onRef(n(o))});const s=d=>{(d.key==="Enter"||d.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=d=>{(d.pointerType==="mouse"&&d.button===0||d.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(d)};var c=xu();c.__keydown=s,c.__click=i,c.__pointerdown=l,c.__touchstart=function(...d){e.onTouchStart?.apply(this,d)};var u=b(c);Pe(u,()=>e.children??je),Xe(c,d=>f(o,d),()=>n(o)),pe(()=>{tt(c,"type",a()),Je(c,1,nt({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-pgzded")}),p(t,c),ce()}st(["keydown","click","pointerdown","touchstart"]);var ku=P('<div class="b p-1pt17hy"> </div>'),Tu=P('<div class="a p-1pt17hy"><input/> <!></div>');function fr(t,e){le(e,!0);let a=Te(e,"value",15,""),r=Te(e,"error",3,""),o=Te(e,"ref",15,null);var s=Tu(),i=b(s);i.__input=function(...d){e.onInput?.apply(this,d)};let l;Xe(i,d=>o(d),()=>o());var c=O(i,2);{var u=d=>{var v=ku(),g=b(v);pe(()=>ot(g,r())),p(d,v)};U(c,d=>{r()&&d(u)})}pe(()=>{tt(i,"placeholder",e.placeholder),l=Je(i,1,"p-1pt17hy",null,l,{error:!!r()})}),an("blur",i,function(...d){e.onBlur?.apply(this,d)}),an("focus",i,function(...d){e.onFocus?.apply(this,d)}),_i(i,a),p(t,s),ce()}st(["input"]);var Eu=P('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Pu=P('<form class="a p-y9ylet"><!></form>');function Nu(t,e){le(e,!0);const{renameTag:a}=Dt(),{getSelectedTags:r,setSelectedTags:o}=Mn(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=ma(),{getFiltredNotes:c}=_a();let u=M(!1),d=M(!1),v,g=!1,h=M(null),m=M(dt(e.tag)),k=e.nextFocusRef;he(()=>(n(h)&&n(h).focus(),()=>{v&&clearTimeout(v)}));const _=()=>{v=setTimeout(()=>{f(d,!0)},250)},x=()=>{f(u,!0)},j=async()=>{if(n(m).trim()===e.tag){x();return}if(n(m).trim()!=="")try{_();const I=r(),T=[...I].map(W=>W===e.tag?n(m).trim():W),E=new Set(s()),F=c(),J=E.size?[...E]:F.map(W=>W.id),{cancel:H}=await a(e.tag,n(m).trim(),J);l(),o(new Set(T)),ht("Tag renamed",{cancel:{nextFocusRef:k,onCancel:async()=>{await H(),o(I),i(E),setTimeout(()=>{const{prev:W}=gt(k);W?.focus()},16)}}}),g=!0}finally{f(u,!0)}},w=()=>{e.onClosed?.(g)},S=I=>{I.preventDefault(),j()};br(t,{get blocked(){return n(d)},get startClose(){return n(u)},onClosed:w,children:(I,T)=>{var E=Pu(),F=b(E);{var J=W=>{Ka(W,{})},H=W=>{var ne=Eu(),Z=L(ne),C=b(Z),K=O(Z,2);fr(K,{placeholder:"Enter new tag name",get ref(){return n(h)},set ref(te){f(h,te,!0)},get value(){return n(m)},set value(te){f(m,te,!0)}});var se=O(K,2),q=b(se);Tt(q,{onClick:x,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(te,ie)=>{var be=Me("Cancel");p(te,be)},$$slots:{default:!0}});var X=O(q,2);Tt(X,{onClick:j,fullWidth:!0,withoutMinWidth:!0,children:(te,ie)=>{var be=Me("OK");p(te,be)},$$slots:{default:!0}}),pe(()=>ot(C,`Rename "${e.tag??""}" for selected notes`)),p(W,ne)};U(F,W=>{n(d)?W(J):W(H,!1)})}an("submit",E,S),p(I,E)},$$slots:{default:!0}}),ce()}let Un=M(!1),$n=M(!1),Ht=M(""),ea=M(0),tr=M(0),nr=M(0),Lr,jr=()=>({bottom:0,right:0,height:0}),Wt=M(null),Do=M(null);function Au(t){if(n(Un)){f($n,!0),n(Ht)!==t.tag&&(Lr=()=>{const a=t.getRect();f(Un,!0),f(Ht,t.tag,!0),f(ea,a.bottom,!0),f(tr,a.right,!0),f(nr,a.height,!0),jr=t.getRect,f(Wt,t.focusRef,!0)});return}const e=t.getRect();f(Un,!0),f(Ht,t.tag,!0),f(ea,e.bottom,!0),f(tr,e.right,!0),f(nr,e.height,!0),jr=t.getRect,f(Wt,t.focusRef,!0)}const Mu=()=>n(Un),Du=()=>n(Do);var Iu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),Ru=P('<li class="p-16hbyw2"><!></li>'),Lu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Ou=P('<li class="p-16hbyw2"><!></li>'),Fu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),zu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),ju=P('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),Bu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Hu=P("<!> <!>",1);function Uu(t,e){le(e,!0);const{getScrollContainer:a}=to(),{pinTag:r,getGetMapTags:o,deleteTag:s}=Dt(),{checkMobileSize:i}=on(),{getSelectedTags:l,removeTag:c,setSelectedTags:u}=Mn(),{getSelectedNotes:d,setSelectedNotes:v,clearNotes:g}=ma(),{getFiltredNotes:h}=_a();let m=M(!1);Le(()=>{n(Un),zt(()=>{f(m,o()().get(n(Ht))?.pinned||!1,!0)})});let k=M(!1);const _=()=>{r(n(Ht),!0),f($n,!0);let q=n(Wt),X=gt(q)?.next;ht("Tag pinned",{cancel:{nextFocusRef:X,onCancel:async()=>{r(n(Ht),!1),setTimeout(()=>{const{prev:te}=gt(X);te?.focus()},16)}}})},x=()=>{r(n(Ht),!1),f($n,!0);let q=n(Wt),X=gt(q)?.next;ht("Tag unpinned",{cancel:{nextFocusRef:X,onCancel:async()=>{r(n(Ht),!0),setTimeout(()=>{const{prev:te}=gt(X);te?.focus()},16)}}})},j=()=>{f(Un,!1),f($n,!1),f(ea,0),f(tr,0),f(nr,0),jr=()=>({bottom:0,right:0,height:0}),f(Wt,null),Lr&&setTimeout(()=>{Lr?.(),Lr=void 0})};let w=N(()=>window.innerHeight-n(ea)<100?n(ea)-n(nr)-98+"px":n(ea)+5+"px"),S=N(a);const I=q=>{q.key==="Tab"&&q.shiftKey&&(q.preventDefault(),n(Wt)?.focus())},T=q=>{q.key==="Tab"&&!q.shiftKey&&n(Wt)&&(q.preventDefault(),gt(n(Wt))?.next?.focus())};he(()=>{const q=X=>{X.key==="Escape"&&n(Un)&&n(Wt)?.focus()};return window.addEventListener("keydown",q),()=>{window.removeEventListener("keydown",q)}});const E=()=>{f($n,!0);let q=n(Wt),X=gt(q)?.next;Aa({title:`Are you sure to delete "${n(Ht)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const te=Array.from(n(H)),ie=new Set(d()),be=h(),ke=ie.size?[...ie]:be.map(Ie=>Ie.id);n(H).has(n(Ht))&&(ie.size===0||be.length===ie.size)&&c(n(Ht)),g();const{cancel:Ee}=await s(n(Ht),ke);ht("Tag deleted",{cancel:{nextFocusRef:X,onCancel:async()=>{await Ee(),u(new Set(te)),v(new Set(ie)),setTimeout(()=>{const{prev:Ie}=gt(X);Ie?.focus()},16)}}})},onCancel:async()=>{},onClosed:te=>{setTimeout(()=>{te||q?.focus()},16)}})};let F=()=>{};const J=()=>{f($n,!0),f(k,!0);let q=n(Wt);F=()=>{f(k,!1),setTimeout(()=>{q?.focus()},16)}};Le(()=>{const q=()=>{const X=jr();f(ea,X.bottom,!0),f(tr,X.right,!0),f(nr,X.height,!0)};return n(S)?.addEventListener("scroll",q),window.addEventListener("resize",q),()=>{n(S)?.removeEventListener("scroll",q),window.removeEventListener("resize",q)}});let H=N(l),W=N(i);var ne=Hu(),Z=L(ne);{var C=q=>{var X=Bu(),te=L(X);ve(te,()=>({"--left":n(tr)-36+"px","--top":n(w),"--transform-origin":"top left"})),Sr(te.lastChild,{get startClose(){return n($n)},onClosed:j,get ref(){return n(Do)},set ref(ie){f(Do,ie,!0)},children:(ie,be)=>{var ke=ju(),Ee=L(ke);{var Ie=Ce=>{var V=Ru(),G=b(V);et(G,{onClick:_,onKeydown:I,get dialogMode(){return n(W)},children:(de,xe)=>{var y=Iu(),R=L(y);ve(R,()=>({"--size":"20px"})),me(R.lastChild,{name:"pin"}),p(de,y)},$$slots:{default:!0}}),p(Ce,V)},D=Ce=>{var V=Ou(),G=b(V);et(G,{onClick:x,onKeydown:I,get dialogMode(){return n(W)},children:(de,xe)=>{var y=Lu(),R=L(y);ve(R,()=>({"--size":"20px"})),me(R.lastChild,{name:"pin-cancel"}),p(de,y)},$$slots:{default:!0}}),p(Ce,V)};U(Ee,Ce=>{n(m)?Ce(D,!1):Ce(Ie)})}var ae=O(Ee,2),_e=b(ae);et(_e,{onClick:J,get dialogMode(){return n(W)},children:(Ce,V)=>{var G=Fu(),de=L(G);ve(de,()=>({"--size":"20px"})),me(de.lastChild,{name:"pen"}),p(Ce,G)},$$slots:{default:!0}});var Se=O(ae,2),Ne=b(Se);et(Ne,{onClick:E,onKeydown:T,dangerous:!0,get dialogMode(){return n(W)},children:(Ce,V)=>{var G=zu(),de=L(G);ve(de,()=>({"--size":"20px"})),me(de.lastChild,{name:"bin"}),p(Ce,G)},$$slots:{default:!0}}),p(ie,ke)},$$slots:{default:!0}}),p(q,X)};U(Z,q=>{n(Un)&&q(C)})}var K=O(Z,2);{var se=q=>{{let X=N(()=>gt(n(Wt))?.next||null);Nu(q,{get tag(){return n(Ht)},get nextFocusRef(){return n(X)},onClosed:te=>{F(te)}})}};U(K,q=>{n(k)&&q(se)})}p(t,ne),ce()}var qu=P('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Wu=P('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),Vu=P("<!> <span> </span> <!>",1),Ku=P('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function ar(t,e){le(e,!0);let{getGetMapTags:a}=Dt(),r=M(null),o=N(Mu);const s=()=>{if(n(r)){const v=n(r).getBoundingClientRect();return{bottom:v.bottom,right:v.right,height:v.height}}return{bottom:0,right:0,height:0}},i=v=>{v.stopPropagation(),v.preventDefault(),Au({tag:e.tag,getRect:s,focusRef:n(r)})},l=v=>{v.key==="Tab"&&!v.shiftKey&&n(o)&&(v.preventDefault(),Du()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let c=N(()=>a()().get(e.tag)?.pinned||!1);var u=Ku(),d=b(u);ve(d,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),er(d.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(v,g)=>{var h=Vu(),m=L(h);{var k=S=>{var I=qu(),T=b(I);ve(T,()=>({"--size":"18px"})),me(T.lastChild,{name:"pin"}),p(S,I)};U(m,S=>{n(c)&&S(k)})}var _=O(m,2),x=b(_),j=O(_,2);{var w=S=>{var I=Wu();I.__click=i,I.__keydown=l;var T=b(I),E=b(T);ve(E,()=>({"--size":"16px"})),me(E.lastChild,{name:"menu"});var F=O(E,2);ft(F,{children:(J,H)=>{var W=Me("Tag options");p(J,W)}}),Xe(I,J=>f(r,J),()=>n(r)),pe(()=>Je(I,1,nt({c:!0,d:e.type==="selected"}),"p-9jjlcl")),p(S,I)};U(j,S=>{e.hideMenu||S(w)})}pe(()=>ot(x,e.tag)),p(v,h)},$$slots:{default:!0}}),p(t,u),ce()}st(["click","keydown"]);var Yu=P('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function ms(t,e){le(e,!0);let a=Te(e,"mobile",3,!1);const{getGetMapTags:r}=Dt();let s=N(()=>{const h=r()();return[...e.tags].sort((m,k)=>h.get(m)?.pinned?-1:h.get(k)?.pinned?1:m.localeCompare(k))}),i=N(()=>n(s).filter(h=>r()().get(h)?.pinned)),l=N(()=>n(s).filter(h=>!r()().get(h)?.pinned));var c=Yu(),u=b(c),d=b(u);En(d,16,()=>n(i),h=>h,(h,m)=>{ar(h,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})});var v=O(d,2);En(v,17,()=>e.metaTags,h=>"meta"+h,(h,m)=>{ar(h,{hideMenu:!0,get tag(){return n(m)},onClick:()=>{e.handleMetaTagClick(n(m))}})});var g=O(v,2);En(g,16,()=>n(l),h=>h,(h,m)=>{ar(h,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})}),pe(()=>Je(u,1,nt({b:!0,c:a()}),"p-lawyrs")),p(t,c),ce()}var Xu=P('<div class="b c p-1i0uzbi"><div class="d p-1i0uzbi"><button class="e p-1i0uzbi"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),Gu=P('<div class="a p-1i0uzbi"><!></div>');function _s(t,e){le(e,!0);let a=M(null);const r=c=>{f(a,c,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};Le(()=>{n(a)&&n(a).focus()});var s=Gu(),i=b(s);{var l=c=>{var u=Xu(),d=b(u),v=b(d);v.__click=o;var g=b(v);ve(g,()=>({"--size":"20px"})),me(g.lastChild,{name:"close"});var h=O(g,2);ft(h,{children:(_,x)=>{var j=Me("Clear");p(_,j)}});var m=O(d,2);En(m,19,()=>e.metaTags,_=>"meta_"+_,(_,x,j)=>{{let w=N(()=>n(j)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);ar(_,{hideMenu:!0,type:"selected",get tag(){return n(x)},onClick:()=>{e.handleMetaTagClick(n(x))},get onRef(){return n(w)}})}});var k=O(m,2);En(k,18,()=>e.selectedTags,_=>_,(_,x,j)=>{{let w=N(()=>n(j)===e.selectedTags.size-1?r:void 0);ar(_,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return x},onClick:()=>{e.handleSelectedTagClick(x)},get onRef(){return n(w)}})}}),p(c,u)};U(i,c=>{e.selectedTags.size+e.metaTags.size>0&&c(l)})}p(t,s),ce()}st(["click"]);const Io=(t,e,a,r)=>{if(t.has(Ye.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},Pn=200,Ju=t=>t<.5?2*t*t:-1+(4-2*t)*t,Yi=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,Ju(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},Zu=t=>{const{getIsKeyboardVisible:a}=qd();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=v=>({x:v.clientX,y:v.clientY,time:performance.now()}),c=v=>{r=[l(v.touches[0])],o=!0},u=v=>{if(!o||s)return;r.push(l(v.touches[0]));const g=performance.now()-150;r=r.filter(E=>E.time>=g);const h=r.at(-1),m=r[0];if(!h||!m)return;const k=m.x,_=m.y,x=h.x,j=h.y,w=x-k,S=j-_,I=Math.abs(w)>Math.abs(S),T=Math.abs(w)>3;I&&T&&!a()&&(s=!0,v.preventDefault(),t([...r]),i())},d=()=>{i()};he(()=>(document.addEventListener("touchstart",c,{passive:!0}),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",d,{passive:!0}),document.addEventListener("touchcancel",d,{passive:!0}),()=>{document.removeEventListener("touchstart",c),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",d),document.removeEventListener("touchcancel",d)}))},ws=5,ys=.6,Xn=.3;function Xi(t,e){le(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,c=0,u=0,d=null,v=null;const g=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,c=0,u=0,d!==null&&(cancelAnimationFrame(d),d=null),v&&(clearTimeout(v),v=null)},h=()=>{e.onCancel(),g()},m=()=>{v&&clearTimeout(v),v=setTimeout(h,5e3)};Zu(async T=>{if(!o)try{const E=T.at(-1);if(!E)throw new Error("No points available for swipe initialization");const F=await e.onInit();if(!F)return;s=F.initialPosition,i=F.currentPosition,l=F.minPosition,c=F.maxPosition,u=F.width,r=E.x,a=T,o=!0,m()}catch{g()}});const _=T=>Math.max(l,Math.min(c,T)),x=()=>{if(d=null,!o){g();return}const T=a.at(-1),E=a[0];if(!T||!E)return;let F=T.x-r;r=T.x;const J=_(i+F);J!==i&&(i=J,e.onUpdate({initialPosition:s,newPosition:J,width:u,minPosition:l,maxPosition:c}))},j=T=>{if(!o){g();return}a.push({x:T.touches[0].clientX,y:T.touches[0].clientY,time:performance.now()});const E=performance.now()-150;a=a.filter(W=>W.time>=E),d===null&&(d=requestAnimationFrame(x)),m();const F=T.touches[0].clientX-a[0].x,J=T.touches[0].clientY-a[0].y;Math.abs(F)>Math.abs(J)&&T.cancelable&&T.preventDefault()},w=T=>{const E=Math.abs(T);if(E>=ys)return ws;if(E>=Xn){const F=(E-Xn)/(ys-Xn);return e.baseActionThreshold-F*(e.baseActionThreshold-ws)}else return e.baseActionThreshold},S=T=>{if(!o){g();return}let E=0;a.push({x:T.changedTouches[0].clientX,y:T.changedTouches[0].clientY,time:performance.now()}),x(),d!==null&&(cancelAnimationFrame(d),d=null);const F=a[0],J=a[a.length-1],H=J.x-F.x,W=J.time-F.time;W>0&&(E=H/W);const ne=w(E);e.onFinish({swipeVelocity:E,currentPosition:i,minPosition:l,maxPosition:c,initialPosition:s,width:u,actionThreshold:ne}),g()},I=()=>{h()};he(()=>(document.addEventListener("touchmove",j,{passive:!1}),document.addEventListener("touchend",S,{passive:!0}),document.addEventListener("touchcancel",I,{passive:!0}),()=>{document.removeEventListener("touchmove",j),document.removeEventListener("touchend",S),document.removeEventListener("touchcancel",I),d!==null&&cancelAnimationFrame(d),v&&clearTimeout(v)})),ce()}function Qu(t,e){le(e,!0);const a=Dn();let r=Te(e,"animationRef",7),o=Te(e,"dialog",7);Xi(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const u=-e.dialogWidth*.7,d=0;let v=e.sidebarState==="closed"?u:d,g=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let k=()=>1;if(r().current){r().current.pause();let _=Number(r().current.currentTime);dr()&&(_=Number(_)+50,r().current.currentTime=Math.min(Math.max(Pn-1,_),_));const x=r().current.effect?.getComputedTiming().progress||0;k=()=>x,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(_=>requestAnimationFrame(_)),g=Math.abs(1-k())}g=e.sidebarState==="closed"?g:1-g,o().style.setProperty("--backdrop-bg",`${g*.1}`),o()&&!o().open&&(o().showModal(),dr()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=g*-25;const h=g*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let m=e.sidebarState==="closed"?u:d;return e.sidebarState==="opened"||e.sidebarState==="closed"||(m=h),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:v,currentPosition:m,minPosition:u,maxPosition:d,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:u,width:d})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const v=1-Math.abs(u/d)/7*10;o().style.transform=`translate3d(${u}px, 0, 0)`,a.swipingRatio=v*-25,o().style.setProperty("--backdrop-bg",`${v*.1}`)},onFinish:({swipeVelocity:u,currentPosition:d,initialPosition:v,width:g,actionThreshold:h})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let m="close";const k=Math.abs(d-v)/g*100/7*10;if(k===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(k===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?m=Math.abs(k)>h||u>Xn?"open":"close":e.sidebarState==="swipingClose"&&(m=Math.abs(k)>h&&u<=Xn||u<-Xn?"close":"open");let _=Yi(Math.abs(k)/100);e.sidebarState==="swipingClose"&&m==="close"&&(_=1-_);const x=(m==="open"?1-_:_)*Pn;a.duration=x/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${m==="open"?.1:0}`),m==="open"?e.onOpen():m==="close"&&e.onClose()}}),ce()}var $u=P("<dialog><div><!> <!></div></dialog> <!> <!>",1);function ef(t,e){le(e,!0);const{getSidebarState:a,setSidebarState:r}=yr();let o=M(0);he(()=>{const C=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",C),C(),()=>{window.removeEventListener("resize",C)}});const s=Dn(),{isScrolling:i}=Ko();let l=M(null),c=M(null),u={},d=N(a);const v=()=>{e.blocked||r("closing")},g=C=>{r(C==="open"?"swipingOpen":"swipingClose")},h=()=>{r("opened")},m=()=>{r("preOpening")},k=()=>{n(l)?.close(),r("closed")},_=C=>{C.preventDefault(),v()};he(()=>(n(l)?.addEventListener("close",k),n(l)?.addEventListener("cancel",_),()=>{n(l)?.removeEventListener("close",k),n(l)?.removeEventListener("cancel",_)}));const x=N(i);let j=N(()=>s.working);const w=C=>{C?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ua().duration};Le(()=>{n(d)==="opening"?zt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const C=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const K=n(l)?.animate([{transform:C},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||Pn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});u.current=K,K&&(K.onfinish=()=>{h(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ua().duration,K.cancel(),u.current=void 0})})}):n(d)==="closing"&&zt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const C=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const K=n(l)?.animate([{transform:C},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||Pn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});u.current=K,K&&(K.onfinish=()=>{k(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ua().duration,K.cancel(),u.current=void 0})})})}),Le(()=>{n(d)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),dr()&&n(l)?.getBoundingClientRect()),r("opening"))}),he(()=>{n(d)==="opened"&&r("preOpening")});var S=$u(),I=L(S),T=b(I),E=b(T);Pe(E,()=>e.children);var F=O(E,2);{var J=C=>{Xo(C,{})};U(F,C=>{n(d)==="opened"&&C(J)})}Xe(T,C=>f(c,C),()=>n(c)),Xe(I,C=>f(l,C),()=>n(l));var H=O(I,2);{var W=C=>{Go(C,{get dialog(){return n(l)},get dialogInner(){return n(c)},onClose:v})};U(H,C=>{n(c)&&n(d)==="opened"&&!e.blocked&&C(W)})}var ne=O(H,2);{var Z=C=>{Qu(C,{onCancelSwipe:w,onOpen:m,onClose:v,onSwipe:g,get dialogWidth(){return n(o)},get animationRef(){return u},get dialog(){return n(l)},get sidebarState(){return n(d)}})};U(ne,C=>{!n(x)&&!e.blocked&&C(Z)})}pe(()=>{Je(I,1,nt({a:!0,b:n(j),c:n(d)==="opened"||n(d)==="opening"||n(d)==="closing"||n(d)==="swipingClose",d:n(d)==="opened"||n(d)==="opening"||n(d)==="swipingOpen"}),"p-1gucilc"),Je(T,1,nt({e:!0,f:n(d)==="swipingOpen",g:n(d)!=="opened"}),"p-1gucilc")}),p(t,S),ce()}var tf=P('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),nf=P('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function af(t,e){le(e,!0);const{checkMobileSize:a}=on(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=yr(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:c}=rn(),{getTagsSearch:u,setTagsSearch:d}=Jc(),{getSelectedTags:v,addTag:g,removeTag:h,clearTags:m}=Mn(),{getSelectedMetaTags:k,addMetaTag:_,removeMetaTag:x,clearSelectedMetaTags:j}=eo();let w=N(v),S=N(k);const{getGetNotes:I,checkNotesInArchive:T,checkNotesInBin:E}=Dt(),F=N(I),J=D=>{g(D)},H=D=>{_(D)},W=D=>{h(D)},ne=D=>{x(D)};let Z=N(()=>n(w).size===0&&!n(S).has(Ye.INBOX)&&(n(F)()||[]).some(D=>(!n(S).has(Ye.ARCHIVED)&&!n(S).has(Ye.BIN)&&D?.data&&!D.data.deletedAt&&!D.data.archivedAt||n(S).has(Ye.ARCHIVED)&&D?.data&&!D.data.deletedAt&&D.data.archivedAt||n(S).has(Ye.BIN)&&D?.data&&D.data.deletedAt)&&D?.data?.tags.length===0)),C=N(()=>Io(n(S),n(w),n(F)()||[],D=>!(D?.data&&(D.data.deletedAt||D.data.archivedAt)&&!n(S).has(Ye.ARCHIVED)&&!n(S).has(Ye.BIN)||D?.data&&(D.data.deletedAt||!D.data.archivedAt)&&n(S).has(Ye.ARCHIVED)||D?.data&&!D.data.deletedAt&&n(S).has(Ye.BIN)))),K=N(()=>n(C).filter(D=>u()===""||D.toLowerCase().indexOf(u().toLowerCase())!==-1)),se=N(a);const{checkExistedDialog:q}=$t();let X=N(()=>i().length>0||q());const te=()=>{if(n(se)){if(n(X))return;o()==="opened"?r():o()==="closed"&&s()}};he(()=>ur({key:"b",meta:!0,action:te})),he(()=>ur({key:"b",ctrl:!0,action:te}));let ie=N(()=>[...n(Z)&&n(S).size===0?[Ye.INBOX]:[],...n(S).size===0?[...T()&&n(w).size===0?[Ye.ARCHIVED]:[],...E()&&n(w).size===0?[Ye.BIN]:[]]:[]].filter(D=>u()===""||D.toLowerCase().indexOf(u().toLowerCase())!==-1).sort((D,ae)=>D===Ye.INBOX?-1:ae===Ye.INBOX?1:D.localeCompare(ae)));var be=ue(),ke=L(be);{var Ee=D=>{ef(D,{get blocked(){return n(X)},children:(ae,_e)=>{var Se=tf(),Ne=L(Se),Ce=b(Ne),V=b(Ce);Vi(V,{});var G=O(V,2),de=b(G),xe=N(()=>c(ge.Settings));de.__click=function(...$){n(xe)?.apply(this,$)};var y=b(de);ve(y,()=>({"--size":"24px"})),me(y.lastChild,{name:"settings"});var R=O(y,2);ft(R,{children:($,re)=>{var we=Me("Settings");p($,we)}});var A=O(de,2),B=N(()=>c(ge.Sync));A.__click=function(...$){n(B)?.apply(this,$)};var Q=b(A);ve(Q,()=>({"--size":"24px"})),me(Q.lastChild,{name:"sync"});var Y=O(Q,2);ft(Y,{children:($,re)=>{var we=Me("Sync");p($,we)}});var fe=O(Ce,2),ye=b(fe);{let $=N(u);xo(ye,{placeholder:"Search tag",get value(){return n($)},onChange:re=>{d(re)}})}var oe=O(fe,2);{let $=N(()=>n(S).has(Ye.BIN));_s(oe,{get clearTags(){return m},get clearMetaTags(){return j},get hideTagMenu(){return n($)},handleMetaTagClick:ne,get metaTags(){return n(S)},get selectedTags(){return n(w)},handleSelectedTagClick:W})}var ee=O(Ne,2);{let $=N(()=>n(S).has(Ye.BIN));ms(ee,{get hideTagMenu(){return n($)},get metaTags(){return n(ie)},get tags(){return n(K)},handleMetaTagClick:H,handleTagClick:J,mobile:!0})}pe(($,re)=>{tt(de,"href",$),tt(A,"href",re)},[()=>l(ge.Settings),()=>l(ge.Sync)]),p(ae,Se)},$$slots:{default:!0}})},Ie=D=>{var ae=nf(),_e=b(ae),Se=b(_e);{let de=N(u);xo(Se,{placeholder:"Search tag",get value(){return n(de)},onChange:xe=>{d(xe)}})}var Ne=O(_e,2),Ce=b(Ne),V=b(Ce);{let de=N(()=>n(S).has(Ye.BIN));_s(V,{get metaTags(){return n(S)},get clearTags(){return m},get clearMetaTags(){return j},get hideTagMenu(){return n(de)},get selectedTags(){return n(w)},handleMetaTagClick:ne,handleSelectedTagClick:W})}var G=O(Ce,2);{let de=N(()=>n(S).has(Ye.BIN));ms(G,{get metaTags(){return n(ie)},get hideTagMenu(){return n(de)},get tags(){return n(K)},handleMetaTagClick:H,handleTagClick:J})}p(D,ae)};U(ke,D=>{n(se)?D(Ee):D(Ie,!1)})}p(t,be),ce()}st(["click"]);var rf=P('<button class="a p-11odwi4"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function of(t,e){le(e,!0);let a=Te(e,"ref",15);var r=rf();r.__click=function(...i){e.onClick?.apply(this,i)};var o=b(r);ve(o,()=>({"--rotate":"-90deg"})),me(o.lastChild,{name:"menu"});var s=O(o,2);ft(s,{children:(i,l)=>{var c=Me();pe(()=>ot(c,e.title)),p(i,c)}}),Xe(r,i=>a(i),()=>a()),p(t,r),ce()}st(["click"]);const sf=t=>{try{new URL(t)}catch{return!1}return!0};var lf=P('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),cf=P('<form class="a p-y9ylet"><!></form>');function df(t,e){le(e,!0);const{addTag:a}=Dt(),{getSelectedTags:r}=Mn(),{getSelectedNotes:o}=ma(),{getFiltredNotes:s}=_a();let i=M(!1),l=M(!1),c,u=!1,d=M(null),v=M(""),g=e.nextFocusRef;he(()=>(n(d)&&n(d).focus(),()=>{c&&clearTimeout(c)}));const h=()=>{c=setTimeout(()=>{f(l,!0)},250)},m=()=>{f(i,!0)},k=async()=>{if(r().has(n(v).trim())){m();return}if(n(v).trim()!=="")try{h();const w=new Set(o()),S=w.size?[...w]:s().map(T=>T.id),{cancel:I}=await a(n(v).trim(),S);ht("Tag added",{cancel:{nextFocusRef:g,onCancel:async()=>{await I(),setTimeout(()=>{const{prev:T}=gt(g);T?.focus()},16)}}}),u=!0}finally{f(i,!0)}},_=()=>{e.onClosed?.(u)},x=j=>{j.preventDefault(),k()};br(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:_,children:(j,w)=>{var S=cf(),I=b(S);{var T=F=>{Ka(F,{})},E=F=>{var J=lf(),H=O(L(J),2);fr(H,{placeholder:"Enter new tag name",get ref(){return n(d)},set ref(C){f(d,C,!0)},get value(){return n(v)},set value(C){f(v,C,!0)}});var W=O(H,2),ne=b(W);Tt(ne,{onClick:m,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(C,K)=>{var se=Me("Cancel");p(C,se)},$$slots:{default:!0}});var Z=O(ne,2);Tt(Z,{onClick:k,fullWidth:!0,withoutMinWidth:!0,children:(C,K)=>{var se=Me("OK");p(C,se)},$$slots:{default:!0}}),p(F,J)};U(I,F=>{n(l)?F(T):F(E,!1)})}an("submit",S,x),p(j,S)},$$slots:{default:!0}}),ce()}var uf=P('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),ff=P('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),vf=P('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!></div> <!></div>');function Gi(t,e){le(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=Dt(),{getSelectedTags:s}=Mn();let i=M(null),l=M(""),c=M(null);const u=N(a);let d=Te(e,"shownTagInput",15);const v=()=>n(u)?e.mode==="exit"?Io(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let h=N(()=>{const C=s(),K=new Set(Io(new Set,new Set(e.selectedTags.length>0?e.selectedTags:C),o()()||[]));return v().filter(q=>e.selectedTags.some(X=>q===X)?!1:n(l)===""||q.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((q,X)=>C.has(q)&&C.has(X)?q.localeCompare(X):C.has(q)?-1:C.has(X)?1:K.has(q)&&K.has(X)?q.localeCompare(X):K.has(q)?-1:K.has(X)?1:0)});const m=C=>{if(!e.selectedTags.includes(C)){if(e.mode!=="exit"||n(h).includes(C)){e.onChangeTags([...e.selectedTags,C]),f(l,"");return}n(i)?.focus()}},k=C=>{const K=e.selectedTags.filter(se=>se!==C);K.length===0?e.onChangeTags([]):e.onChangeTags(K)},_=C=>{C.preventDefault(),n(l)!==""?m(n(l)):d(!1)};Le(()=>{n(i)&&d()&&n(i).focus(),d()||f(l,"")});const x=C=>{C.preventDefault()},j=C=>{C.preventDefault(),C.stopPropagation(),C.stopImmediatePropagation()};var w=vf(),S=b(w),I=b(S);En(I,17,()=>e.selectedTags,C=>C+"-tags_selected",(C,K)=>{er(C,{onPointerDown:x,onTouchStart:j,onClick:()=>{k(n(K))},type:"button",style:"selected",children:(se,q)=>{var X=Me();pe(()=>ot(X,n(K))),p(se,X)},$$slots:{default:!0}})});var T=O(I,2);{var E=C=>{var K=ue(),se=L(K);En(se,17,()=>n(h).filter(q=>q.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),q=>q+"-tags_suggested",(q,X)=>{er(q,{onPointerDown:x,onTouchStart:j,onClick:()=>{m(n(X))},children:(te,ie)=>{var be=Me();pe(()=>ot(be,n(X))),p(te,be)},$$slots:{default:!0}})}),p(C,K)};U(T,C=>{d()&&C(E)})}var F=O(T,2);{var J=C=>{er(C,{onPointerDown:x,onTouchStart:j,onClick:()=>{m(n(l)),f(l,"")},children:(K,se)=>{var q=Me();pe(()=>ot(q,n(l))),p(K,q)},$$slots:{default:!0}})};U(F,C=>{n(l)!==""&&(e.mode!=="exit"||n(h).find(K=>K.toLowerCase()===n(l).toLowerCase()))&&C(J)})}var H=O(F,2);{var W=C=>{er(C,{mode:"empty",onPointerDown:x,onTouchStart:j,onClick:()=>{d(!0)},children:(K,se)=>{var q=uf(),X=b(q);ve(X,()=>({"--size":"12px"})),me(X.lastChild,{name:"plus"});var te=O(X,2);ft(te,{children:(ie,be)=>{var ke=Me("add tag");p(ie,ke)}}),p(K,q)},$$slots:{default:!0}})};U(H,C=>{d()||C(W)})}var ne=O(S,2);{var Z=C=>{var K=ff(),se=b(K),q=b(se);fr(q,{placeholder:"tag",get ref(){return n(i)},set ref(te){f(i,te,!0)},get value(){return n(l)},set value(te){f(l,te,!0)}});var X=O(se,2);X.__pointerdown=x,X.__touchstart=j,X.__click=()=>{n(i)?.blur(),n(l)!==""&&m(n(l)),d(!1),f(l,"")},an("submit",K,_),p(C,K)};U(ne,C=>{d()&&C(Z)})}Xe(w,C=>f(c,C),()=>n(c)),p(t,w),ce()}st(["pointerdown","touchstart","click"]);var gf=P('<div class="c p-y9ylet"><!> <!></div>'),hf=P('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),pf=P('<form class="a p-y9ylet"><!></form>');function mf(t,e){le(e,!0);const{changeTags:a,getNoteById:r}=Dt(),{getSelectedTags:o}=Mn(),{getSelectedNotes:s}=ma(),{getFiltredNotes:i}=_a();let l=M(!1),c=M(!1),u,d=!1,v=M(!1),g=e.nextFocusRef,m=(()=>{const E=[...o()],F=s();if(F.size===0)return E;const J=Array.from(F);let H=new Set(r(J[0])?.data.tags||[]);for(let W=1;W<J.length;W++){const ne=new Set(r(J[W])?.data.tags||[]),Z=new Set([]);ne.forEach(C=>{H.has(C)&&Z.add(C)}),H=Z}return Array.from(H)})(),k=M(dt(m));he(()=>()=>{u&&clearTimeout(u)});const _=()=>{u=setTimeout(()=>{f(c,!0)},250)},x=()=>{f(l,!0)},j=async()=>{const E=m,F=new Set(s()),J=F.size?[...F]:i().map(H=>H.id);try{_();const{cancel:H}=await a([...E],n(k),J);ht("Tags changed",{cancel:{nextFocusRef:g,onCancel:async()=>{await H(),setTimeout(()=>{const{prev:W}=gt(g);W?.focus()},16)}}}),d=!0}finally{f(l,!0)}},w=E=>{E.key==="Escape"&&n(v)&&(f(v,!1),E.preventDefault(),E.stopPropagation())};he(()=>(document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)));const S=()=>{e.onClosed?.(d)},I=E=>{f(k,E,!0)},T=E=>{E.preventDefault(),j()};br(t,{get blocked(){return n(c)},get startClose(){return n(l)},onClosed:S,children:(E,F)=>{var J=pf(),H=b(J);{var W=Z=>{Ka(Z,{})},ne=Z=>{var C=hf(),K=O(L(C),2);Gi(K,{get selectedTags(){return n(k)},onChangeTags:I,get shownTagInput(){return n(v)},set shownTagInput(X){f(v,X,!0)}});var se=O(K,2);{var q=X=>{var te=gf(),ie=b(te);Tt(ie,{onClick:x,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(ke,Ee)=>{var Ie=Me("Cancel");p(ke,Ie)},$$slots:{default:!0}});var be=O(ie,2);Tt(be,{onClick:j,fullWidth:!0,withoutMinWidth:!0,children:(ke,Ee)=>{var Ie=Me("OK");p(ke,Ie)},$$slots:{default:!0}}),p(X,te)};U(se,X=>{n(v)||X(q)})}p(Z,C)};U(H,Z=>{n(c)?Z(W):Z(ne,!1)})}an("submit",J,T),p(E,J)},$$slots:{default:!0}}),ce()}var _f=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),wf=P('<li class="p-antir2"><!></li>'),yf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select mode',1),bf=P('<li class="p-antir2"><!></li>'),Sf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),Cf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),xf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),kf=P('<li class="p-antir2"><!></li>'),Tf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),Ef=P('<li class="p-antir2"><!></li>'),Pf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),Nf=P('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <li class="p-antir2"><!></li>',1),Af=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),Mf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),Df=P('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),If=P("<!> <!> <!> <!>",1),Rf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Lf=P('<div class="a p-antir2"><!></div> <!> <!> <!>',1);function Of(t,e){le(e,!0);const{checkMobileSize:a}=on(),{getSelectedTags:r,setSelectedTags:o,clearTags:s}=Mn(),{moveNotesToBin:i,moveNotesToArchive:l,moveNotesFromArchive:c,restoreNotesFromBin:u,deleteNotes:d}=Dt(),{getFiltredNotes:v}=_a(),{getMode:g,changeMode:h,getSelectedNotes:m,setSelectedNotes:k,clearNotes:_}=ma();let x=N(r),j=M(!1),w=M(!1),S=M(!1),I=M(!1),T=N(a),E=M(null),F=M(null);const J=()=>{n(j)||f(j,!0)},H=()=>{f(j,!1),f(w,!1)};Le(()=>{!n(j)&&!n(S)&&!n(I)&&f(E,gt(n(F)).next,!0)}),he(()=>{const V=G=>{G.key==="Escape"&&n(j)&&n(F)?.focus()};return window.addEventListener("keydown",V),()=>{window.removeEventListener("keydown",V)}});let W=()=>{};const ne=()=>{f(w,!0),f(S,!0);let V=n(F);W=()=>{f(S,!1),setTimeout(()=>{V?.focus()},16)}};let Z=()=>{};const C=()=>{f(w,!0),f(I,!0);let V=n(F);Z=()=>{f(I,!1),setTimeout(()=>{V?.focus()},16)}},K=async()=>{const V=Array.from(n(x)),G=new Set(m()),de=G.size?[...G]:v().map(y=>y.id),{cancel:xe}=await i({noteIds:de});s(),_(),ht("Notes moved to bin",{cancel:{nextFocusRef:n(E),onCancel:async()=>{await xe(),o(new Set(V)),k(G),setTimeout(()=>{const{prev:y}=gt(n(E));y?.focus()},16)}}}),f(w,!0)},se=async()=>{const V=Array.from(n(x)),G=new Set(m()),de=G.size?[...G]:v().map(y=>y.id),{cancel:xe}=await l({noteIds:de});s(),_(),ht("Notes moved to archive",{cancel:{nextFocusRef:n(E),onCancel:async()=>{await xe(),o(new Set(V)),k(G),setTimeout(()=>{const{prev:y}=gt(n(E));y?.focus()},16)}}}),f(w,!0)},q=async()=>{const V=Array.from(n(x)),G=new Set(m()),de=G.size?[...G]:v().map(y=>y.id),{cancel:xe}=await c({noteIds:de});s(),_(),ht("Notes moved from archive",{cancel:{nextFocusRef:n(E),onCancel:async()=>{await xe(),o(new Set(V)),k(G),setTimeout(()=>{const{prev:y}=gt(n(E));y?.focus()},16)}}}),f(w,!0)},X=async()=>{const V=Array.from(n(x)),G=new Set(m()),de=G.size?[...G]:v().map(y=>y.id),{cancel:xe}=await u({noteIds:de});s(),_(),ht("Notes restored",{cancel:{nextFocusRef:n(E),onCancel:async()=>{await xe(),o(new Set(V)),k(G),setTimeout(()=>{const{prev:y}=gt(n(E));y?.focus()},16)}}}),f(w,!0)},te=()=>{const V=new Set(m()),G=V.size?[...V]:v().map(de=>de.id);f(w,!0),Aa({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{f(w,!0),s(),_(),await d({noteIds:G})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(F)?.focus()},16)}})},ie=()=>{const V=v(),G=Array.from(m()),de=[];for(const y of V)y.data&&y.data?.link&&sf(y.data?.link.url)&&(G.includes(y.id)||G.length===0)&&de.push(y.data?.link.url);const xe=()=>{for(const y of de)if(!window.open(y,"_blank")){Aa({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(F)?.focus()},16)}});break}};de.length<=10?xe():Aa({title:`Are you sure to open ${de.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{xe()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(F)?.focus()},16)}}),f(w,!0)};let be=N(()=>g()==="multiple");var ke=Lf(),Ee=L(ke),Ie=b(Ee);of(Ie,{title:"notes menu",onClick:J,get ref(){return n(F)},set ref(V){f(F,V,!0)}});var D=O(Ee,2);{var ae=V=>{var G=Rf(),de=L(G);ve(de,()=>({"--right":"0","--top":"44px"})),Sr(de.lastChild,{get startClose(){return n(w)},onClosed:H,children:(xe,y)=>{var R=If(),A=L(R);{var B=$=>{var re=wf(),we=b(re);et(we,{onClick:ie,get dialogMode(){return n(T)},children:(Be,at)=>{var rt=_f(),Oe=L(rt);ve(Oe,()=>({"--size":"20px"})),me(Oe.lastChild,{name:"open"}),p(Be,rt)},$$slots:{default:!0}}),p($,re)};U(A,$=>{Ki||ru||$(B)})}var Q=O(A,2);{var Y=$=>{var re=bf(),we=b(re);et(we,{onClick:()=>{f(w,!0),h("multiple")},get dialogMode(){return n(T)},children:(Be,at)=>{var rt=yf(),Oe=L(rt);ve(Oe,()=>({"--size":"20px"})),me(Oe.lastChild,{name:"check"}),p(Be,rt)},$$slots:{default:!0}}),p($,re)};U(Q,$=>{n(be)||$(Y)})}var fe=O(Q,2);{var ye=$=>{var re=Nf(),we=L(re),Be=b(we);et(Be,{onClick:ne,get dialogMode(){return n(T)},children:(qe,it)=>{var Ve=Sf(),Qe=L(Ve);ve(Qe,()=>({"--size":"20px","--rotate":"45deg"})),me(Qe.lastChild,{name:"close"}),p(qe,Ve)},$$slots:{default:!0}});var at=O(we,2),rt=b(at);et(rt,{onClick:C,get dialogMode(){return n(T)},children:(qe,it)=>{var Ve=Cf(),Qe=L(Ve);ve(Qe,()=>({"--size":"20px"})),me(Qe.lastChild,{name:"pen"}),p(qe,Ve)},$$slots:{default:!0}});var Oe=O(at,2);{var Ue=qe=>{var it=kf(),Ve=b(it);et(Ve,{onClick:se,get dialogMode(){return n(T)},children:(Qe,sn)=>{var Pt=xf(),Nt=L(Pt);ve(Nt,()=>({"--size":"20px"})),me(Nt.lastChild,{name:"archive"}),p(Qe,Pt)},$$slots:{default:!0}}),p(qe,it)},Fe=qe=>{var it=Ef(),Ve=b(it);et(Ve,{onClick:q,get dialogMode(){return n(T)},children:(Qe,sn)=>{var Pt=Tf(),Nt=L(Pt);ve(Nt,()=>({"--size":"20px"})),me(Nt.lastChild,{name:"archive-cancel"}),p(Qe,Pt)},$$slots:{default:!0}}),p(qe,it)};U(Oe,qe=>{e.mode==="notes"?qe(Ue):qe(Fe,!1)})}var ze=O(Oe,2),Ze=b(ze);et(Ze,{onClick:K,get dialogMode(){return n(T)},dangerous:!0,children:(qe,it)=>{var Ve=Pf(),Qe=L(Ve);ve(Qe,()=>({"--size":"20px"})),me(Qe.lastChild,{name:"bin"}),p(qe,Ve)},$$slots:{default:!0}}),p($,re)};U(fe,$=>{(e.mode==="notes"||e.mode==="archive")&&$(ye)})}var oe=O(fe,2);{var ee=$=>{var re=Df(),we=L(re),Be=b(we);et(Be,{onClick:X,get dialogMode(){return n(T)},children:(Oe,Ue)=>{var Fe=Af(),ze=L(Fe);ve(ze,()=>({"--size":"20px"})),me(ze.lastChild,{name:"bin-cancel"}),p(Oe,Fe)},$$slots:{default:!0}});var at=O(we,2),rt=b(at);et(rt,{onClick:te,get dialogMode(){return n(T)},dangerous:!0,children:(Oe,Ue)=>{var Fe=Mf(),ze=L(Fe);ve(ze,()=>({"--size":"20px"})),me(ze.lastChild,{name:"bin"}),p(Oe,Fe)},$$slots:{default:!0}}),p($,re)};U(oe,$=>{e.mode==="bin"&&$(ee)})}p(xe,R)},$$slots:{default:!0}}),p(V,G)};U(D,V=>{n(j)&&V(ae)})}var _e=O(D,2);{var Se=V=>{df(V,{get nextFocusRef(){return n(E)},onClosed:G=>{W(G)}})};U(_e,V=>{n(S)&&V(Se)})}var Ne=O(_e,2);{var Ce=V=>{mf(V,{get nextFocusRef(){return n(E)},onClosed:G=>{Z(G)}})};U(Ne,V=>{n(I)&&V(Ce)})}p(t,ke),ce()}var Ff=P('<label class="a p-uuy4jt"><input class="b p-uuy4jt" type="checkbox"/> <span class="c p-uuy4jt"><span class="d p-uuy4jt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></span> <!></label>');function Ji(t,e){le(e,!0);const a=()=>{e.onChange(!e.checked)};var r=Ff(),o=b(r);o.__change=a;var s=O(o,2),i=b(s),l=b(i);ve(l,()=>({"--size":"16px"})),me(l.lastChild,{name:"check"});var c=O(s,2);ft(c,{children:(u,d)=>{var v=Me("Toggle switch");p(u,v)}}),pe(()=>zc(o,e.checked)),p(t,r),ce()}st(["change"]);var zf=P('<div class="g e p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),jf=P('<div class="g p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),Bf=P('<a class="i j p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Hf=P('<div class="h p-1336jx2"><!> <!></div>'),Uf=P('<!> <div class="p p-1336jx2"><!></div>',1),qf=P('<div class="r p-1336jx2"><div class="s p-1336jx2"><!> <span> </span></div> <button class="t p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),Wf=P('<div class="a p-1336jx2"><div class="b p-1336jx2"><div class="c p-1336jx2"><a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-1336jx2"><!></div> <div class="f p-1336jx2"><!></div></div> <div class="k p-1336jx2"><div class="l p-1336jx2"><!></div> <div class="m p-1336jx2"><div class="n p-1336jx2"><div class="o p-1336jx2"><!></div> <!></div> <div class="q p-1336jx2"><!></div></div></div></div>');function Vf(t,e){le(e,!0);const{getFeedSearch:a,setFeedSearch:r}=qo(),{getScrollContainer:o}=to();let s=N(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:c,checkNotes:u}=Dt(),{replaceSearchParams:d}=jt(),{createDialogPageHref:v,createHandleClickDialogPage:g,getDialogPages:h}=rn(),{checkExistedDialog:m}=$t(),{getMode:k,clearNotes:_,setSelectedNotes:x,getSelectedNotes:j,changeMode:w}=ma(),{checkMobileSize:S}=on(),{getFiltredNotes:I}=_a(),{getSelectedMetaTags:T}=eo();let E=N(T),F=M(null);const J=N(l);let W=N(()=>{const oe=I()||[],ee=j();return oe.every($=>ee.has($.id))});const ne=()=>{n(s)&&n(s).scrollTo({top:0})},Z=()=>{Aa({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),d("")},onCancel:async()=>{}})},C=()=>{h().length===0&&!m()&&n(F)?.focus()};he(()=>ur({key:"k",meta:!0,action:C})),he(()=>ur({key:"k",ctrl:!0,action:C})),Le(()=>{const oe=I()||[];zt(()=>{const ee=j();x(new Set(oe.filter($=>ee.has($.id)).map($=>$.id)))})});let K=N(()=>n(E).has(Ye.ARCHIVED)?"archive":n(E).has(Ye.BIN)?"bin":"notes");var se=Wf(),q=b(se),X=b(q),te=b(X),ie=N(()=>g(ge.Settings));te.__click=function(...oe){n(ie)?.apply(this,oe)};var be=b(te);ve(be,()=>({"--rotate":"30deg","--size":"20px"})),me(be.lastChild,{name:"settings"});var ke=O(te,2),Ee=N(()=>g(ge.Sync));ke.__click=function(...oe){n(Ee)?.apply(this,oe)};var Ie=b(ke);ve(Ie,()=>({"--size":"20px"})),me(Ie.lastChild,{name:"sync"});var D=O(X,2),ae=b(D);Vi(ae,{});var _e=O(D,2),Se=b(_e);{var Ne=oe=>{var ee=ue(),$=L(ee);{var re=we=>{var Be=ue(),at=L(Be);{var rt=Ue=>{var Fe=zf(),ze=b(Fe);ze.__click=Z;var Ze=b(ze);ve(Ze,()=>({"--scale":"1.2","--size":"20px"})),me(Ze.lastChild,{name:"clear"});var qe=O(Ze);ft(qe,{children:(it,Ve)=>{var Qe=Me("Empty bin");p(it,Qe)}}),p(Ue,Fe)},Oe=Ue=>{var Fe=jf(),ze=b(Fe);ze.__click=Z;var Ze=b(ze);ve(Ze,()=>({"--scale":"0.9","--size":"20px"})),me(Ze.lastChild,{name:"clear"}),p(Ue,Fe)};U(at,Ue=>{S()?Ue(rt):Ue(Oe,!1)})}p(we,Be)};U($,we=>{n(J)&&we(re)})}p(oe,ee)},Ce=oe=>{var ee=ue(),$=L(ee);{var re=we=>{var Be=Hf(),at=b(Be);{var rt=Ue=>{var Fe=Bf();Fe.__click=function(...qe){e.onOpenWindow?.apply(this,qe)};var ze=b(Fe);ve(ze,()=>({"--scale":"0.7","--size":"32px"})),me(ze.lastChild,{name:"open-window"});var Ze=O(ze,2);ft(Ze,{children:(qe,it)=>{var Ve=Me("open window");p(qe,Ve)}}),pe(()=>tt(Fe,"href",e.openWindowHref)),p(Ue,Fe)};U(at,Ue=>{e.onOpenWindow&&Ue(rt)})}var Oe=O(at,2);Cu(Oe,{}),p(we,Be)};U($,we=>{n(K)==="notes"&&we(re)},!0)}p(oe,ee)};U(Se,oe=>{n(K)==="bin"?oe(Ne):oe(Ce,!1)})}var V=O(q,2),G=b(V),de=b(G);af(de,{});var xe=O(G,2),y=b(xe),R=b(y),A=b(R);{let oe=N(a);xo(A,{onFocus:ne,placeholder:"Search",get value(){return n(oe)},onChange:ee=>{r(ee)},get ref(){return n(F)},set ref(ee){f(F,ee,!0)}})}var B=O(R,2);{var Q=oe=>{var ee=Uf(),$=L(ee);hu($,{});var re=O($,2),we=b(re);Of(we,{get mode(){return n(K)}}),p(oe,ee)};U(B,oe=>{(n(K)==="notes"&&u()||n(K)==="bin"&&l()||n(K)==="archive"&&c())&&oe(Q)})}var Y=O(y,2),fe=b(Y);{var ye=oe=>{var ee=ue(),$=L(ee);{var re=we=>{var Be=qf(),at=b(Be),rt=b(at);Ji(rt,{get checked(){return n(W)},onChange:Ze=>{if(Ze){const qe=I()||[];x(new Set(qe.map(it=>it.id)))}else _()}});var Oe=O(rt,2),Ue=b(Oe),Fe=O(at,2);Fe.__click=Ze=>{Ze.preventDefault(),w("single")};var ze=b(Fe);ve(ze,()=>({"--size":"16px"})),me(ze.lastChild,{name:"close"}),pe(Ze=>ot(Ue,`Selected ${Ze??""}`),[()=>j().size]),p(we,Be)};U($,we=>{k()==="multiple"&&we(re)})}p(oe,ee)};U(fe,oe=>{(n(K)==="notes"&&u()||n(K)==="bin"&&l()||n(K)==="archive"&&c())&&oe(ye)})}pe((oe,ee)=>{tt(te,"href",oe),tt(ke,"href",ee)},[()=>v(ge.Settings),()=>v(ge.Sync)]),p(t,se),ce()}st(["click"]);var Kf=P('<div class="p-gkgqyo"><!></div>');function vt(t,e){le(e,!0);const{setDialogPageHeight:a}=Yo();let r=M(null);he(()=>{n(r);const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;a(u)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=Kf(),s=b(o);Pe(s,()=>e.children),Xe(o,i=>f(r,i),()=>n(r)),p(t,o),ce()}var Yf=P('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function Xf(t,e){le(e,!1);const{replaceSearchParams:a,getHref:r}=jt(),o=l=>{l.preventDefault(),a("")};Uo();var s=Yf(),i=O(b(s),2);{let l=mr(()=>r(""));Tt(i,{element:"a",get href(){return n(l)},onClick:o,children:(c,u)=>{var d=Me("close");p(c,d)},$$slots:{default:!0}})}p(t,s),ce()}var Gf=P('<h1 class="p-1n0ziuh"><!></h1>');function Jf(t,e){var a=Gf(),r=b(a);Pe(r,()=>e.children),p(t,a)}var Zf=P('<!> <div class="b p-193tby9"><!> <!></div>',1),Qf=P('<div class="a p-193tby9"><!></div>');function $f(t,e){le(e,!0);const{blockDialog:a,setLeftEnd:r}=$t(),{pushDialogPage:o}=rn(),{initLocalAccount:s}=Vo(),{replaceSearchParams:i}=jt(),l=Dn(),c=()=>{o(ge.Auth)},u=async()=>{l.duration=0,l.swipingRatio=-25,requestAnimationFrame(()=>{l.duration=ua().duration,s(),a(!1),r(!0),i("")})};var d=Qf(),v=b(d);{var g=h=>{var m=Zf(),k=L(m);Jf(k,{children:(w,S)=>{var I=Me("Welcome");p(w,I)}});var _=O(k,2),x=b(_);Tt(x,{onClick:c,fullWidth:!0,children:(w,S)=>{var I=Me("Cloud account");p(w,I)},$$slots:{default:!0}});var j=O(x,2);Tt(j,{onClick:u,fullWidth:!0,type:"secondary",children:(w,S)=>{var I=Me("Local account");p(w,I)},$$slots:{default:!0}}),p(h,m)};U(v,h=>{h(g)})}p(t,d),ce()}var ev=P('<div class="a p-1hg9kpf"></div>'),tv=P('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function Zi(t,e){le(e,!0);const a=u=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(u).host}.ico`}catch{return""}};let r=M(!1),o=N(()=>a(e.url));var s=ue(),i=L(s);{var l=u=>{var d=ev();p(u,d)},c=u=>{var d=tv();pe(v=>tt(d,"src",v),[()=>a(e.url)]),an("error",d,()=>{f(r,!0)}),p(u,d)};U(i,u=>{n(r)||!n(o)?u(l):u(c,!1)})}p(t,s),ce()}var nv=P('<a target="_blank" rel="noopener noreferrer" class="a p-7mmq8e"><!> <!></a>'),av=P('<button class="a p-7mmq8e"><!> <!></button>');function Pa(t,e){le(e,!0);let a=Te(e,"tabindex",3,0),r=Te(e,"onclick",3,()=>{}),o=Te(e,"ref",15);var s=ue(),i=L(s);{var l=u=>{var d=nv();d.__click=function(...h){r()?.apply(this,h)};var v=b(d);Pe(v,()=>e.children);var g=O(v,2);ft(g,{children:(h,m)=>{var k=Me();pe(()=>ot(k,e.title)),p(h,k)}}),Xe(d,h=>o(h),()=>o()),pe(()=>{tt(d,"href",e.href),tt(d,"tabindex",a())}),p(u,d)},c=u=>{var d=ue(),v=L(d);{var g=h=>{var m=av();m.__click=function(...x){r()?.apply(this,x)};var k=b(m);Pe(k,()=>e.children);var _=O(k,2);ft(_,{children:(x,j)=>{var w=Me();pe(()=>ot(w,e.title)),p(x,w)}}),Xe(m,x=>o(x),()=>o()),pe(()=>tt(m,"tabindex",a())),p(h,m)};U(v,h=>{e.elem==="button"&&h(g)},!0)}p(u,d)};U(i,u=>{e.elem==="a"?u(l):u(c,!1)})}p(t,s),ce()}st(["click"]);var rv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Edit',1),ov=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),sv=P('<li class="p-1jbq6g9"><!></li> <li class="p-1jbq6g9"><!></li>',1),iv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function lv(t,e){le(e,!0);let a=Te(e,"shownMenu",15),r=M(!1),o=M(!1),s=M(!1);const{checkMobileSize:i}=on(),l=async()=>{e.onEdit()},c=()=>{n(o)?(f(o,!1),l()):n(s)&&(f(s,!1),e.onDelete()),a(!1),f(r,!1)};let u=N(i);var d=ue(),v=L(d);{var g=h=>{var m=iv(),k=L(m);ve(k,()=>({"--top":"90%","--right":"0px"})),Sr(k.lastChild,{get startClose(){return n(r)},onClosed:c,children:(_,x)=>{var j=sv(),w=L(j),S=b(w);et(S,{onClick:()=>{f(o,!0),f(r,!0)},get dialogMode(){return n(u)},children:(E,F)=>{var J=rv(),H=L(J);ve(H,()=>({"--size":"20px"})),me(H.lastChild,{name:"pen"}),p(E,J)},$$slots:{default:!0}});var I=O(w,2),T=b(I);et(T,{onClick:()=>{f(s,!0),f(r,!0)},get dialogMode(){return n(u)},children:(E,F)=>{var J=ov(),H=L(J);ve(H,()=>({"--size":"20px"})),me(H.lastChild,{name:"bin"}),p(E,J)},$$slots:{default:!0}}),p(_,j)},$$slots:{default:!0}}),p(h,m)};U(v,h=>{a()&&h(g)})}p(t,d),ce()}var cv=P('<div class="b p-ptbuqy"><!> <!> <div class="c p-ptbuqy"><button class="p-ptbuqy">Cancel</button> <button class="p-ptbuqy">Done</button></div></div>'),dv=P('<div class="e p-ptbuqy"><!></div>'),uv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),fv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),vv=P('<div class="d p-ptbuqy"><div><!> <a class="f p-ptbuqy" target="_blank" rel="noopener noreferrer"> </a> <div><!> <!></div> <!></div></div>'),gv=P('<div class="g p-ptbuqy"><button class="h p-ptbuqy">Add link</button></div>'),hv=P('<div class="a p-ptbuqy"><!></div>');function pv(t,e){le(e,!0);let a=Te(e,"shownUrlInput",15);const{getFaviconEnabled:r}=cr();let o=N(r),s=M(null),i=M(null),l=M(dt(e.url)),c=M(dt(e.title)),u=M(null),d=M(null),v=M(!1);const g=S=>{f(l,S.target.value||"",!0)},h=S=>{f(c,S.target.value||"",!0)};Le(()=>{a()&&n(s)?.focus()});const m=()=>{f(v,!0)},k=()=>{e.url&&(navigator.clipboard.writeText(e.url),ht("copied"))};var _=hv(),x=b(_);{var j=S=>{var I=cv(),T=b(I);fr(T,{get value(){return n(l)},onInput:g,placeholder:"url",get ref(){return n(s)},set ref(W){f(s,W,!0)}});var E=O(T,2);fr(E,{get value(){return n(c)},onInput:h,placeholder:"title"});var F=O(E,2),J=b(F);J.__click=()=>{f(l,e.url,!0),f(c,e.title,!0),a(!1)};var H=O(J,2);H.__click=()=>{let W=n(l).trim();W!==""&&/^[[a-zA-Z]+?:\/\//.test(W)===!1&&(W="https://"+W,f(l,W,!0)),e.onChangeUrl(W,n(c)),a(!1)},p(S,I)},w=S=>{var I=ue(),T=L(I);{var E=J=>{var H=vv(),W=b(H);Je(W,1,nt({i:!0}),"p-ptbuqy");var ne=b(W);{var Z=ie=>{var be=dv(),ke=b(be);Zi(ke,{get url(){return e.url}}),p(ie,be)};U(ne,ie=>{n(o)&&ie(Z)})}var C=O(ne,2),K=b(C),se=O(C,2);Je(se,1,nt({j:!0}),"p-ptbuqy");var q=b(se);Pa(q,{title:"copy link",elem:"button",onclick:k,children:(ie,be)=>{var ke=uv(),Ee=L(ke);ve(Ee,()=>({"--size":"20px"})),me(Ee.lastChild,{name:"copy"}),p(ie,ke)},$$slots:{default:!0}});var X=O(q,2);Pa(X,{title:"show menu",elem:"button",onclick:m,get ref(){return n(d)},set ref(ie){f(d,ie,!0)},children:(ie,be)=>{var ke=fv(),Ee=L(ke);ve(Ee,()=>({"--size":"18px","--rotate":"90deg"})),me(Ee.lastChild,{name:"menu"}),p(ie,ke)},$$slots:{default:!0}});var te=O(se,2);lv(te,{onDelete:()=>{f(c,""),f(l,""),e.onDeleteUrl()},onEdit:()=>{a(!0)},get shownMenu(){return n(v)},set shownMenu(ie){f(v,ie,!0)}}),Xe(W,ie=>f(u,ie),()=>n(u)),pe(()=>{tt(C,"href",e.url),ot(K,e.title||"unknown")}),p(J,H)},F=J=>{var H=gv(),W=b(H);W.__click=()=>{a(!0)},p(J,H)};U(T,J=>{e.url?J(E):J(F,!1)})}p(S,I)};U(x,S=>{a()?S(j):S(w,!1)})}Xe(_,S=>f(i,S),()=>n(i)),p(t,_),ce()}st(["click"]);var mv=P('<div class="e p-vlmfrv">Note</div>'),_v=P("<span> </span>"),wv=P('<div class="i p-vlmfrv"><!></div>'),yv=P('<!> <div class="a p-vlmfrv"><div class="b"><div class="c"><div class="d p-vlmfrv"><!> <div class="f p-vlmfrv" role="textbox" aria-label="note" tabindex="0" contenteditable="true" placeholder="Note"> </div></div></div></div> <div class="g h p-vlmfrv"><!> <div class="j p-vlmfrv"><!></div></div></div>',1);function bv(t,e){le(e,!0);const{checkMobileSize:a}=on();let r=Te(e,"link",15,void 0),o=Te(e,"text",15,""),s=Te(e,"tags",31,()=>dt([])),i=M(null),l=M(!1),c=M(!1);const u=C=>{let K="",se=!0;function q(X){for(let te=0;te<X.length;te++){const ie=X[te];if(ie.nodeName==="BR"){K+=`
`,se=!0;continue}ie.nodeName==="DIV"&&se===!1&&(K+=`
`),se=!1,ie.nodeType===3&&ie.textContent&&(K+=ie.textContent),q(ie.childNodes)}}q(C.currentTarget.childNodes),K===`
`&&(K=K.slice(0,-1)),o(K)},d=C=>{C.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(n(l)&&(f(l,!1),C.preventDefault(),C.stopPropagation()),n(c)&&(f(c,!1),C.preventDefault(),C.stopPropagation()))};he(()=>(a(),document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)));const v=(C,K)=>{r({url:C,title:K})},g=()=>{r(void 0)},h=C=>{s(C)},m=o();he(()=>{if(n(i)&&e.mode==="add"){n(i).focus();const C=document.createRange();C.selectNodeContents(n(i)),C.collapse(!1);const K=window.getSelection();K?.removeAllRanges(),K?.addRange(C)}});var k=yv(),_=L(k);{let C=N(()=>r()?.url||""),K=N(()=>r()?.title||"");pv(_,{get url(){return n(C)},get title(){return n(K)},onChangeUrl:v,onDeleteUrl:g,get shownUrlInput(){return n(c)},set shownUrlInput(se){f(c,se,!0)}})}var x=O(_,2),j=b(x),w=b(j),S=b(w),I=b(S);{var T=C=>{var K=mv();p(C,K)};U(I,C=>{o()||C(T)})}var E=O(I,2);E.__input=u;var F=b(E);Xe(E,C=>f(i,C),()=>n(i));var J=O(j,2),H=b(J);{var W=C=>{var K=wv(),se=b(K);{var q=X=>{var te=_v(),ie=b(te);pe(be=>ot(ie,`updated: ${be??""}`),[()=>new Date(e.updatedAt).toLocaleString()]),p(X,te)};U(se,X=>{e.updatedAt&&X(q)})}p(C,K)};U(H,C=>{e.mode==="edit"&&C(W)})}var ne=O(H,2),Z=b(ne);Gi(Z,{get selectedTags(){return s()},onChangeTags:h,get shownTagInput(){return n(l)},set shownTagInput(C){f(l,C,!0)}}),pe(()=>ot(F,m)),p(t,k),ce()}st(["input"]);function Sv(t,e){le(e,!0);const{isInitedNotes:a,createNote:r,updateNote:o,deleteNote:s,getNoteById:i}=Dt(),{getViewMode:l}=cr(),{setSearchParam:c,deleteSearchParam:u}=jt();let d=M("loading"),v=M("idle"),g=M(""),h=M(void 0),m=M(""),k=M(dt([]));const _=()=>{{const T=JSON.parse(localStorage.getItem("new-note-draft")||"{}");localStorage.removeItem("new-note-draft");const E=T.link?.url||"",F=T.link?.title||"";f(m,T.text||"",!0),f(k,T.tags||[],!0),f(h,{url:E||"",title:F||""},!0),f(d,"finish")}},x=N(()=>a()&&n(d)==="finish"),j=async()=>{if(n(h)?.title||n(h)?.url||n(m)||n(k).length>0){if(n(g)){const T=i(n(g));if(!T?.data)return;if((T.data.link?.url!==n(h)?.url||T.data.link?.title!==n(h)?.title||T.data.text!==n(m)||JSON.stringify(T.data.tags)!==JSON.stringify(n(k)))&&n(v)==="idle"){f(v,"loading");try{await o(n(g),{link:ns(n(h)),text:n(m),tags:n(k).slice()})}finally{f(v,"idle")}}}else if(n(v)==="idle"){f(v,"loading");try{f(g,await r({link:ns(n(h)),text:n(m),tags:n(k).slice()}),!0),c("noteId",n(g))}catch{}finally{f(v,"idle")}}}else if(n(g)&&n(v)==="idle"){f(v,"loading");try{await s(n(g)),f(g,""),u("noteId")}finally{f(v,"idle")}}};Le(()=>{n(x)&&n(v)!=="loading"&&j()}),he(()=>{_()}),he(()=>()=>{n(g)&&u("noteId")});var w=ue(),S=L(w);{var I=T=>{bv(T,{mode:"add",get link(){return n(h)},set link(E){f(h,E,!0)},get text(){return n(m)},set text(E){f(m,E,!0)},get tags(){return n(k)},set tags(E){f(k,E,!0)}})};U(S,T=>{n(x)&&T(I)})}p(t,w),ce()}const Cv="modulepreload",xv=function(t){return"/"+t},bs={},wt=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(a.map(u=>{if(u=xv(u),u in bs)return;bs[u]=!0;const d=u.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${v}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":Cv,d||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((h,m)=>{g.addEventListener("load",h),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var kv=P('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function Tv(t){var e=kv(),a=O(b(e),2);Tt(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=Me("Reload");p(r,s)},$$slots:{default:!0}}),p(t,e)}var Ev=P('<div class="p-uzefkz"><!></div>');function Pv(t,e){le(e,!0);let a=M(!1);const{getDialogPageHeight:r}=Yo(),o=N(r);he(()=>{const c=setTimeout(()=>{f(a,!0)},250);return()=>{clearTimeout(c)}});var s=Ev(),i=b(s);{var l=c=>{Ka(c,{})};U(i,c=>{n(a)&&c(l)})}pe(()=>ja(s,`min-height: ${n(o)??""}px;`)),p(t,s),ce()}function Ct(t,e){le(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>wt(()=>import("./acIuue27B.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>wt(()=>import("./aD8dNz4Ky.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>wt(()=>import("./aDytQ2vx4.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>wt(()=>import("./a37fzI3-t.js"),__vite__mapDeps([8,9])),"./Pages/ChangeTags.svelte":()=>wt(()=>import("./aC2WTKiO3.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>wt(()=>import("./aDhyzYU4e.js"),__vite__mapDeps([10,4,3,11,12])),"./Pages/Exit.svelte":()=>wt(()=>import("./aCoOFux_s.js"),__vite__mapDeps([13,14])),"./Pages/ExportData.svelte":()=>wt(()=>import("./aJuGEWyG0.js"),__vite__mapDeps([15,16,17,18])),"./Pages/ImportData.svelte":()=>wt(()=>import("./agyxuAd3Z.js"),__vite__mapDeps([19,20])),"./Pages/Install.svelte":()=>wt(()=>import("./aDBKhsche.js"),__vite__mapDeps([21,22])),"./Pages/InstallSuccess.svelte":()=>wt(()=>import("./aDrJKLFjQ.js"),__vite__mapDeps([23,24])),"./Pages/Note.svelte":()=>wt(()=>import("./aDl8xfmuI.js"),__vite__mapDeps([25,26])),"./Pages/Settings.svelte":()=>wt(()=>import("./aDYnvdQV7.js"),__vite__mapDeps([27,16,17,28])),"./Pages/Signin.svelte":()=>wt(()=>import("./aqo3n_ow-.js"),__vite__mapDeps([29,4,3,11,30])),"./Pages/Signup.svelte":()=>wt(()=>import("./aBQ3Pa_Y6.js"),__vite__mapDeps([31,11,4,3,30])),"./Pages/Subscription.svelte":()=>wt(()=>import("./aCGrfzhGC.js"),__vite__mapDeps([32,33])),"./Pages/Sync.svelte":()=>wt(()=>import("./aDN0QNFbN.js"),__vite__mapDeps([34,35]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[c]){const u=r[c]();return a[l]={promise:u},a[l].module=await u,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=ue(),i=L(s);Pc(i,()=>o(e.page),l=>{Pv(l,{})},(l,c)=>{const u=N(()=>n(c).default);var d=ue(),v=L(d);Dc(v,()=>n(u),(g,h)=>{h(g,{get params(){return e.params},get hidden(){return e.hidden}})}),p(l,d)},l=>{Tv(l)}),p(t,s),ce()}var Nv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),Av=P('<li class="p-1ljon4s"><!></li>'),Mv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),Dv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),Iv=P('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),Rv=P('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Lv=P('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),Ov=P(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),Fv=P('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),zv=P('<!> <li class="p-1ljon4s"><!></li> <!>',1),jv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Bv(t,e){le(e,!0);const{moveNoteToBin:a,moveNoteFromArchive:r,moveNoteToArchive:o,deleteNote:s,pinNote:i,restoreNoteFromBin:l}=Dt();let c=Te(e,"mode",3,"notes"),u=Te(e,"shownMenu",15),d=M(!1),v=M(!1),g=M(!1),h=M(!1),m=M(!1);const{checkMobileSize:k}=on(),_=async()=>{a(e.noteId),ht("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{l(e.noteId)}}})},x=async()=>{o(e.noteId),ht("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{r(e.noteId)}}})},j=async()=>{r(e.noteId),ht("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{o(e.noteId)}}})},w=()=>{l(e.noteId),ht("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{a(e.noteId)}}})},S=()=>{e.noteData.pinnedAt?(i(e.noteId,!1),ht("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId,!0)}}})):(i(e.noteId,!0),ht("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId,!1)}}})),f(d,!0)},I=()=>{n(v)?(f(v,!1),_()):n(m)?(f(m,!1),w()):n(g)?(f(g,!1),x()):n(h)&&(f(h,!1),j()),u(!1),f(d,!1)},T=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),ht("copied"),f(d,!0))},E=()=>{f(d,!0),Aa({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await s(e.noteId)},onCancel:async()=>{}})};let F=N(k);var J=ue(),H=L(J);{var W=ne=>{var Z=jv(),C=L(Z);ve(C,()=>({"--bottom":e.showMenuUp?"100%":"-129px","--right":"10px"})),Sr(C.lastChild,{get startClose(){return n(d)},onClosed:I,children:(K,se)=>{var q=zv(),X=L(q);{var te=D=>{var ae=Av(),_e=b(ae);et(_e,{onClick:T,get dialogMode(){return n(F)},children:(Se,Ne)=>{var Ce=Nv(),V=L(Ce);ve(V,()=>({"--size":"20px"})),me(V.lastChild,{name:"copy"}),p(Se,Ce)},$$slots:{default:!0}}),p(D,ae)};U(X,D=>{n(F)&&e.noteData.link?.url&&D(te)})}var ie=O(X,2),be=b(ie);et(be,{onClick:S,get dialogMode(){return n(F)},children:(D,ae)=>{var _e=Mv(),Se=L(_e);{let Ce=N(()=>e.noteData.pinnedAt?"pin-cancel":"pin");ve(Se,()=>({"--size":"20px"})),me(Se.lastChild,{get name(){return n(Ce)}})}var Ne=O(Se);pe(()=>ot(Ne,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)),p(D,_e)},$$slots:{default:!0}});var ke=O(ie,2);{var Ee=D=>{var ae=Rv(),_e=L(ae),Se=b(_e);et(Se,{onClick:()=>{f(g,c()==="notes"),f(h,c()==="archive"),f(d,!0)},get dialogMode(){return n(F)},children:(V,G)=>{var de=Dv(),xe=L(de);{let R=N(()=>c()==="archive"?"archive-cancel":"archive");ve(xe,()=>({"--size":"20px"})),me(xe.lastChild,{get name(){return n(R)}})}var y=O(xe);pe(()=>ot(y,` ${c()==="archive"?"Unarchive":"Archive"}`)),p(V,de)},$$slots:{default:!0}});var Ne=O(_e,2),Ce=b(Ne);et(Ce,{onClick:()=>{f(v,!0),f(d,!0)},get dialogMode(){return n(F)},dangerous:!0,children:(V,G)=>{var de=Iv(),xe=L(de),y=b(xe);ve(y,()=>({"--size":"20px"})),me(y.lastChild,{name:"bin"}),p(V,de)},$$slots:{default:!0}}),p(D,ae)},Ie=D=>{var ae=Fv(),_e=L(ae),Se=b(_e);et(Se,{onClick:()=>{f(m,!0),f(d,!0)},get dialogMode(){return n(F)},children:(V,G)=>{var de=Lv(),xe=L(de),y=b(xe);ve(y,()=>({"--size":"20px"})),me(y.lastChild,{name:"bin-cancel"}),p(V,de)},$$slots:{default:!0}});var Ne=O(_e,2),Ce=b(Ne);et(Ce,{onClick:E,get dialogMode(){return n(F)},dangerous:!0,children:(V,G)=>{var de=Ov(),xe=L(de),y=b(xe);ve(y,()=>({"--size":"20px"})),me(y.lastChild,{name:"bin"}),p(V,de)},$$slots:{default:!0}}),p(D,ae)};U(ke,D=>{c()==="notes"||c()==="archive"?D(Ee):D(Ie,!1)})}p(K,q)},$$slots:{default:!0}}),p(ne,Z)};U(H,ne=>{u()&&ne(W)})}p(t,J),ce()}let Qn=M(null);var Hv=P('<div class="a p-1t3doe5"><!></div>'),Uv=P('<div class="b p-1t3doe5"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),qv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Wv=P('<div class="c p-1t3doe5"><!></div>'),Vv=P('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),Kv=P('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),Yv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Xv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Gv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Jv=P("<!> <!>",1),Zv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Qv=P("<li><!> <!> <!> <!> <div><!> <!></div> <!></li>");function $v(t,e){le(e,!0);const{pushDialogPage:a}=rn(),{getFaviconEnabled:r,getRecordMode:o}=cr(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:c}=ma(),{getSearchParams:u,getHref:d}=jt();let v=Te(e,"mode",3,"notes"),g=M(!1),h=M(!1),m=N(r),k=N(o),_=M(null),x=M(null);const{checkMobileSize:j}=on(),w=()=>{f(g,!0)},S=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),ht("copied"))};Le(()=>{n(Qn)===n(x)?f(h,!0):f(h,!1)});const I=D=>{D.preventDefault(),a(`${ge.Note}?id=${encodeURIComponent(e.noteId)}`),f(Qn,null)},T=e.noteData.link?.url||"";let E=N(()=>n(g)&&n(_)?gt(n(_)).next:null);const F=D=>{D?l(e.noteId):c(e.noteId)};he(()=>{const D=ae=>{n(x)&&n(Qn)===n(x)&&!(n(x)===ae.target||n(x).contains(ae.target))&&f(Qn,null)};return document.addEventListener("click",D),()=>{document.removeEventListener("click",D)}});const J=()=>{const D=new URLSearchParams(u());return D.set(Kt,`${ge.Note}?id=${encodeURIComponent(e.noteId)}`),d(D)};var H=Qv(),W=b(H);{var ne=D=>{var ae=Hv(),_e=b(ae);{let Se=N(()=>i().has(e.noteId));Ji(_e,{get checked(){return n(Se)},onChange:F})}p(D,ae)};U(W,D=>{s()==="multiple"&&D(ne)})}var Z=O(W,2);{var C=D=>{var ae=Uv(),_e=b(ae);ve(_e,()=>({"--size":"18px"})),me(_e.lastChild,{name:"pin"}),p(D,ae)};U(Z,D=>{e.noteData.pinnedAt&&D(C)})}var K=O(Z,2);{var se=D=>{var ae=Wv(),_e=b(ae);{var Se=Ce=>{Zi(Ce,{get url(){return T}})},Ne=Ce=>{var V=qv(),G=L(V);ve(G,()=>({"--size":"16px"})),me(G.lastChild,{name:"note"}),p(Ce,V)};U(_e,Ce=>{T?Ce(Se):Ce(Ne,!1)})}p(D,ae)};U(K,D=>{n(m)&&D(se)})}var q=O(K,2);{var X=D=>{var ae=Vv();ae.__click=I;var _e=b(ae);pe((Se,Ne)=>{tt(ae,"tabindex",e.focusHidden?-1:0),tt(ae,"href",Se),ot(_e,Ne)},[J,()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),an("focus",ae,()=>{f(Qn,n(x),!0)}),p(D,ae)},te=D=>{var ae=Kv(),_e=b(ae);pe(Se=>{tt(ae,"tabindex",e.focusHidden?-1:0),tt(ae,"href",T),ot(_e,Se)},[()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),an("focus",ae,()=>{f(Qn,n(x),!0)}),p(D,ae)};U(q,D=>{n(k)==="note"||!T?D(X):D(te,!1)})}var ie=O(q,2);ie.__focusin=()=>{f(Qn,n(x),!0)};var be=b(ie);{var ke=D=>{var ae=Jv(),_e=L(ae);{var Se=G=>{{let de=N(()=>e.focusHidden?-1:0);Pa(G,{elem:"button",onclick:S,get tabindex(){return n(de)},title:"copy link",children:(xe,y)=>{var R=Yv(),A=L(R);ve(A,()=>({"--size":"20px"})),me(A.lastChild,{name:"copy"}),p(xe,R)},$$slots:{default:!0}})}};U(_e,G=>{j()||G(Se)})}var Ne=O(_e,2);{var Ce=G=>{{let de=N(()=>e.focusHidden?-1:0),xe=N(()=>e.noteData.link?.title||"unknown");Pa(G,{elem:"a",get href(){return T},get tabindex(){return n(de)},get title(){return n(xe)},children:(y,R)=>{var A=Xv(),B=L(A);ve(B,()=>({"--size":"18px"})),me(B.lastChild,{name:"open"}),p(y,A)},$$slots:{default:!0}})}},V=G=>{{let de=N(J),xe=N(()=>e.focusHidden?-1:0);Pa(G,{title:"edit",elem:"a",get href(){return n(de)},get tabindex(){return n(xe)},onclick:I,children:(y,R)=>{var A=Gv(),B=L(A);ve(B,()=>({"--size":"18px"})),me(B.lastChild,{name:"pen"}),p(y,A)},$$slots:{default:!0}})}};U(Ne,G=>{n(k)==="note"?G(Ce):G(V,!1)})}p(D,ae)};U(be,D=>{T&&D(ke)})}var Ee=O(be,2);{let D=N(()=>e.focusHidden?-1:0);Pa(Ee,{title:"show menu",elem:"button",get tabindex(){return n(D)},onclick:w,get ref(){return n(_)},set ref(ae){f(_,ae,!0)},children:(ae,_e)=>{var Se=Zv(),Ne=L(Se);ve(Ne,()=>({"--size":"18px","--rotate":"90deg"})),me(Ne.lastChild,{name:"menu"}),p(ae,Se)},$$slots:{default:!0}})}var Ie=O(ie,2);Bv(Ie,{get nextFocusRef(){return n(E)},get mode(){return v()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(g)},set shownMenu(D){f(g,D,!0)}}),Xe(H,D=>f(x,D),()=>n(x)),pe(()=>{Je(H,1,nt({e:!0,f:n(h)}),"p-1t3doe5"),Je(ie,1,nt({g:!0,h:n(h)}),"p-1t3doe5")}),p(t,H),ce()}st(["click","focusin"]);var Ha,Qi,$i;class eg{constructor(e){De(this,Ha);At(this,"data");At(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),$e(this,Ha,Qi).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,$e(this,Ha,$i).call(this)),e}isEmpty(){return this.data.length===0}}Ha=new WeakSet,Qi=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},$i=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class tg{constructor(e,a){At(this,"heap");At(this,"done");At(this,"cache",[]);this.heap=new eg(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var ng=P("<span>Back to notes</span>"),ag=P('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),rg=P("<span>Back to notes</span>"),og=P('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),sg=P('<p class="f">No notes in bin</p>'),ig=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),lg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),cg=P('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),dg=P('<div class="e p-1jdj5w3"><!></div>'),ug=P('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),fg=P('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),vg=P('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function gg(t,e){le(e,!0);const{getScrollContainer:a}=to(),{createHandleClickDialogPage:r,createDialogPageHref:o}=rn(),{getSelectedTags:s}=Mn(),{getFeedOrder:i}=Ci(),{checkNotesInArchive:l,checkNotesInBin:c,checkNotes:u,isInitedNotes:d}=Dt(),{getSelectedMetaTags:v}=eo(),{replaceSearchParams:g,getHref:h}=jt();qo();const{getFiltredNotesLength:m,getFiltredNotes:k,getUpdatedFiltredNotesTimestamp:_}=_a();let x=N(v),j=N(m),w=N(k),S=N(_),I=N(d),T=54,E=M(0),F=M(0),J=M(0),H=M(null),W=N(a),ne=null,Z=null,C=N(()=>n(x).has(Ye.ARCHIVED)?"archive":n(x).has(Ye.BIN)?"bin":"notes");const K=N(s);Le(()=>{n(K),n(ie),n(W)?.scrollTo(0,0)});const{enable:se}=Ko(),q=()=>{se(),ne||(ne=requestAnimationFrame(()=>{const V=n(W)?.scrollTop||0;f(J,V,!0);const G=Math.ceil(n(E)/T);f(F,Math.floor(V/(T*G))*(T*G)),ne=null}))},X=()=>{Z||(Z=requestAnimationFrame(()=>{f(E,window.innerHeight-180||0,!0);const V=n(W)?.scrollTop||0;f(J,V,!0);const G=Math.ceil(n(E)/T);f(F,Math.floor(V/(T*G))*(T*G)),Z=null}))};he(()=>{X(),q()});const te=()=>{q()};Le(()=>(n(W)?.addEventListener("scroll",te),window.addEventListener("resize",X),()=>{n(W)?.removeEventListener("scroll",te),window.removeEventListener("resize",X)}));const ie=N(i);Le(()=>{n(ie),n(S),f(H,new tg(n(w),(V,G)=>{if(!V||!G||!V.data||!G.data)return 0;if(V.data.pinnedAt&&!G.data.pinnedAt)return-1;if(!V.data.pinnedAt&&G.data.pinnedAt)return 1;if(V.data.pinnedAt&&G.data.pinnedAt){if(V.data.pinnedAt<G.data.pinnedAt)return 1;if(V.data.pinnedAt>G.data.pinnedAt)return-1}switch(n(ie)){case"newest":return V.data.updatedAt<G.data.updatedAt?1:V.data.updatedAt>G.data.updatedAt?-1:(V.data.link?.title||"").localeCompare(G.data.link?.title||"");case"oldest":return V.data.updatedAt>G.data.updatedAt?1:V.data.updatedAt<G.data.updatedAt?-1:(V.data.link?.title||"").localeCompare(G.data.link?.title||"");case"AtoZ":return(V.data.link?.title||"").localeCompare(G.data.link?.title||"");case"ZtoA":return(G.data.link?.title||"").localeCompare(V.data.link?.title||"");default:return 0}}),!0)});const be=N(()=>n(j)*T);let Ee=N(()=>{n(S);const V=Math.ceil(n(E)/T);let G=Math.floor(n(F)/T);return G=G-Math.min(G,V),n(H)?.get(G,G+V*3)||[]}),Ie=N(()=>T*Math.ceil(n(E)/T));const D=N(()=>n(F)-Math.min(n(F),n(Ie)));var ae=vg(),_e=b(ae),Se=b(_e);{var Ne=V=>{Ka(V,{})},Ce=V=>{var G=ue(),de=L(G);{var xe=R=>{var A=ag(),B=O(L(A),2),Q=b(B);{let Y=N(()=>h(""));Tt(Q,{element:"a",get href(){return n(Y)},onClick:fe=>{fe.preventDefault(),g("")},children:(fe,ye)=>{var oe=ng();p(fe,oe)},$$slots:{default:!0}})}p(R,A)},y=R=>{var A=ue(),B=L(A);{var Q=fe=>{var ye=og(),oe=O(L(ye),2),ee=b(oe);{let $=N(()=>h(""));Tt(ee,{element:"a",get href(){return n($)},onClick:re=>{re.preventDefault(),g("")},children:(re,we)=>{var Be=rg();p(re,Be)},$$slots:{default:!0}})}p(fe,ye)},Y=fe=>{var ye=ue(),oe=L(ye);{var ee=re=>{var we=dg(),Be=b(we);{var at=Oe=>{var Ue=sg();p(Oe,Ue)},rt=Oe=>{var Ue=cg(),Fe=b(Ue),ze=b(Fe);{let it=N(()=>o(ge.NewNote)),Ve=N(()=>r(ge.NewNote));Tt(ze,{element:"a",get href(){return n(it)},get onClick(){return n(Ve)},children:(Qe,sn)=>{var Pt=ig(),Nt=L(Pt);ve(Nt,()=>({"--size":"18px","--color":"#b0b0b0"})),me(Nt.lastChild,{name:"plus"}),p(Qe,Pt)},$$slots:{default:!0}})}var Ze=O(Fe,4),qe=b(Ze);{let it=N(()=>o(ge.ImportData)),Ve=N(()=>r(ge.ImportData));Tt(qe,{element:"a",get href(){return n(it)},get onClick(){return n(Ve)},children:(Qe,sn)=>{var Pt=lg(),Nt=L(Pt);ve(Nt,()=>({"--size":"18px","--color":"#b0b0b0"})),me(Nt.lastChild,{name:"import"}),p(Qe,Pt)},$$slots:{default:!0}})}p(Oe,Ue)};U(Be,Oe=>{n(C)==="bin"?Oe(at):Oe(rt,!1)})}p(re,we)},$=re=>{var we=ue(),Be=L(we);{var at=Oe=>{var Ue=ug();p(Oe,Ue)},rt=Oe=>{var Ue=fg(),Fe=b(Ue);En(Fe,23,()=>n(Ee),ze=>ze.data,(ze,Ze,qe)=>{var it=ue(),Ve=L(it);{var Qe=sn=>{{let Pt=N(()=>n(qe)*T<n(J)-n(D)-T/2||n(qe)*T>n(J)-n(D)+Math.floor(n(E)/T)*T),Nt=N(()=>(n(qe)+3)*T<n(J)-n(D)-T/2||(n(qe)+3)*T>n(J)-n(D)+Math.floor(n(E)/T)*T);$v(sn,{get mode(){return n(C)},get focusHidden(){return n(Pt)},get showMenuUp(){return n(Nt)},get noteId(){return n(Ze).id},get noteData(){return n(Ze).data}})}};U(Ve,sn=>{n(Ze).data&&sn(Qe)})}p(ze,it)}),pe(ze=>{ja(Ue,ze),ja(Fe,`transform: translateY(${n(D)??""}px);`)},[()=>`--minHeight: ${Math.max((n(be)>n(E),n(be)),0)}px`]),p(Oe,Ue)};U(Be,Oe=>{n(Ee).length===0?Oe(at):Oe(rt,!1)},!0)}p(re,we)};U(oe,re=>{!c()&&!l()&&!u()?re(ee):re($,!1)},!0)}p(fe,ye)};U(B,fe=>{n(C)==="archive"&&!l()?fe(Q):fe(Y,!1)},!0)}p(R,A)};U(de,R=>{n(C)==="bin"&&!c()?R(xe):R(y,!1)},!0)}p(V,G)};U(Se,V=>{n(I)?V(Ce,!1):V(Ne)})}p(t,ae),ce()}var hg=P('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function pg(t){var e=hg(),a=O(L(e),2),r=b(a);gg(r,{}),p(t,e)}function mg(t,e){le(e,!0);const a=Dn();let r=Te(e,"animationRef",7),o=Te(e,"dialog",7);Xi(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let u=0,d=0,v=()=>1;if(r().current){r().current.pause();let h=Number(r().current.currentTime);dr()&&(h=Number(h)+50,r().current.currentTime=Math.min(Math.max(Pn-1,h),h));const m=r().current.effect?.getComputedTiming().progress||0;v=()=>m,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(h=>requestAnimationFrame(h)),d=1-v();const g=d*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-d)*.1}`),a.swipingRatio=Math.abs(1-d)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${g}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:u,currentPosition:g,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:u,width:d})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-u/d)*.1}`),o().style.transform=`translate3d(${u}px, 0, 0)`,a.swipingRatio=Math.abs(1-u/d)*25)},onFinish:({swipeVelocity:u,currentPosition:d,width:v,actionThreshold:g,initialPosition:h})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const m=()=>Math.abs(h+d)/v*100;let k=null;if(u<=-Xn?k="open":u>=Xn?k="close":k=Math.abs(m())>g?"close":"open",r().progress=Yi(m()/100),k==="close"){const _=(1-(r().progress||0))*Pn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const _=(r().progress||1)*Pn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),ce()}var _g=P('<div class="c p-b75woj"> </div>'),wg=P('<button class="d e p-b75woj"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),yg=P('<a class="d f p-b75woj"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),bg=P('<div><div class="a p-b75woj"><div class="b p-b75woj"><!> <!> <!></div></div> <!> <!></div>'),Sg=P("<dialog><!></dialog> <!>",1);function Cg(t,e){le(e,!0);const{isScrolling:a,enable:r}=Ko();let o=M(null),s=M(null),i={};const l=Dn(),{checkLeftEnd:c,checkLeftStart:u,setLeftEnd:d,setLeftStart:v,getCountDialog:g}=$t(),h=N(u),m=N(c);let k=N(()=>l.working);const _=()=>{e.dialogState!=="opened"&&e.onStartOpening()},x=()=>{e.onClose()},j=()=>{e.onSwipe()},w=ne=>{ne.preventDefault(),x()};he(()=>(n(o)?.addEventListener("close",x),n(o)?.addEventListener("cancel",w),()=>{n(o)?.removeEventListener("close",x),n(o)?.removeEventListener("cancel",w)})),Le(()=>{g()>0&&(l.swipingRatio=25)}),Le(()=>{e.dialogState==="opening"?zt(()=>{requestAnimationFrame(()=>{if(!n(o))return;const ne=(i.progress||1)*Pn,Z=n(o).style.transform||`translate3d(${n(h)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const C=n(o)?.animate([{transform:Z},{transform:"translate3d(0, 0, 0)"}],{duration:ne,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=C,C&&(C.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ua().duration,C.cancel(),i.current=void 0,i.progress=void 0,n(h)&&v(!1)})})}):e.dialogState==="closing"&&zt(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const ne=(1-(i.progress||0))*Pn,Z=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const C=n(o)?.animate([{transform:Z},{transform:`translate3d(${n(m)?"-100%":"100%"}, 0, 0)`}],{duration:ne,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=C,C&&(C.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ua().duration,C.cancel(),i.current=void 0,i.progress=void 0,n(m)&&d(!1)})})})});const S=()=>{r()},I=N(a);he(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),dr()&&n(o).getBoundingClientRect(),!n(k)){e.onOpened();return}e.onStartOpening()}});var T=Sg(),E=L(T),F=b(E);{var J=ne=>{var Z=bg(),C=b(Z),K=b(C),se=b(K);{var q=D=>{var ae=_g(),_e=b(ae);pe(()=>ot(_e,e.title)),p(D,ae)};U(se,D=>{e.title&&D(q)})}var X=O(se,2);{var te=D=>{var ae=wg();ae.__click=x;var _e=b(ae);ve(_e,()=>({"--size":"32px"})),me(_e.lastChild,{name:"back"});var Se=O(_e,2);ft(Se,{children:(Ne,Ce)=>{var V=Me("back");p(Ne,V)}}),p(D,ae)};U(X,D=>{e.blocked||D(te)})}var ie=O(X,2);{var be=D=>{var ae=yg();ae.__click=function(...Ne){e.onOpenWindow?.apply(this,Ne)};var _e=b(ae);ve(_e,()=>({"--scale":"0.7","--size":"32px"})),me(_e.lastChild,{name:"open-window"});var Se=O(_e,2);ft(Se,{children:(Ne,Ce)=>{var V=Me("open window");p(Ne,V)}}),pe(()=>tt(ae,"href",e.openWindowHref)),p(D,ae)};U(ie,D=>{e.onOpenWindow&&D(be)})}var ke=O(C,2);Pe(ke,()=>e.children);var Ee=O(ke,2);{var Ie=D=>{Xo(D,{})};U(Ee,D=>{e.dialogState==="opened"&&D(Ie)})}Xe(Z,D=>f(s,D),()=>n(s)),pe(()=>Je(Z,1,nt({n:!0,o:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-b75woj")),an("scroll",Z,S),p(ne,Z)};U(F,ne=>{e.dialogState!=="preOpening"&&ne(J)})}Xe(E,ne=>f(o,ne),()=>n(o));var H=O(E,2);{var W=ne=>{mg(ne,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:_,onClose:x,onSwipe:j,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};U(H,ne=>{n(s)&&!n(I)&&!e.blocked&&!e.hidden&&ne(W)})}pe(()=>Je(E,1,nt({g:!0,h:n(k),i:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",j:e.hidden,k:e.dialogState==="opened",l:n(h),m:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-b75woj")),p(t,T),ce()}st(["click"]);function xg(t,e){le(e,!0);let a=Te(e,"hidden",3,!1),r=Te(e,"onClosed",3,()=>{}),o=M(0);he(()=>{const x=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",x),x(),()=>{window.removeEventListener("resize",x)}});const{dialogDec:s,dialogInc:i}=$t(),l=Dn();he(()=>(i(),()=>{s()}));let c=M("closed");const u=()=>{f(c,"opening")},d=()=>{f(c,"swiping")},v=()=>{f(c,"opened")},g=()=>{e.onClose(),f(c,"closing")},h=()=>{f(c,"closed"),r()()};Le(()=>{e.shown&&n(c)==="closed"?f(c,"preOpening"):!e.shown&&n(c)==="opened"&&f(c,"closing")}),Le(()=>{n(c)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(c)==="opened"||n(c)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var m=ue(),k=L(m);{var _=x=>{Cg(x,{get dialogWidth(){return n(o)},get dialogState(){return n(c)},get title(){return e.title},onStartOpening:u,onOpened:v,onClose:g,onClosed:h,onSwipe:d,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(j,w)=>{var S=ue(),I=L(S);Pe(I,()=>e.children),p(j,S)},$$slots:{default:!0}})};U(k,x=>{n(c)!=="closed"&&x(_)})}p(t,m),ce()}const kg=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};he(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),he(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Tg=P('<button class="d e p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Eg=P('<div class="f p-2jn3ll"> </div>'),Pg=P('<button class="d g p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Ng=P('<dialog><div class="a p-2jn3ll"><div class="b p-2jn3ll"><div class="c p-2jn3ll"><div><!></div> <!> <div><!></div></div></div> <!></div></dialog> <!>',1);function Ag(t,e){le(e,!0);let a=Te(e,"blockedDialog",3,!1),r=Te(e,"hiddenDialog",3,!1),o=Te(e,"isDesktopAnimationOff",3,!1),s=M(null),i=M(null),l=M(!1);kg({getDialog:()=>n(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=Dn();Le(()=>{e.stateDialog==="closing"&&(c.working?n(s)?.addEventListener("transitionend",()=>{n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:u}=Yo(),d=N(u);he(()=>{setTimeout(()=>{f(l,!0)},50)});var v=Ng(),g=L(v),h=b(g),m=b(h),k=b(m),_=b(k),x=b(_);{var j=H=>{var W=Tg();W.__click=()=>{e.onStartBack()};var ne=b(W);ve(ne,()=>({"--size":"28px"})),me(ne.lastChild,{name:"back"});var Z=O(ne,2);ft(Z,{children:(C,K)=>{var se=Me("back");p(C,se)}}),p(H,W)};U(x,H=>{(!(a()||r())||a())&&e.onStartBack&&H(j)})}var w=O(_,2);{var S=H=>{var W=Eg(),ne=b(W);pe(()=>ot(ne,e.title)),p(H,W)};U(w,H=>{e.title&&H(S)})}var I=O(w,2),T=b(I);{var E=H=>{var W=Pg();W.__click=()=>{e.onStartClose()};var ne=b(W);ve(ne,()=>({"--size":"28px"})),me(ne.lastChild,{name:"close"});var Z=O(ne,2);ft(Z,{children:(C,K)=>{var se=Me("close");p(C,se)}}),p(H,W)};U(T,H=>{a()||r()||H(E)})}var F=O(m,2);Pe(F,()=>e.children),Xe(h,H=>f(i,H),()=>n(i)),Xe(g,H=>f(s,H),()=>n(s));var J=O(g,2);Go(J,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose}}),pe(()=>{ja(g,`height: ${n(d)+74}px`),Je(g,1,nt({h:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o(),m:r()}),"p-2jn3ll")}),p(t,v),ce()}st(["click"]);const Mg=({onStartClose:t,onClosed:e})=>{let a=M("close");return{get state(){return n(a)},set state(i){f(a,i,!0)},handleStartClose:(i=!1)=>{i||(f(a,"closing"),t?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function Dg(t,e){le(e,!0);let a=Te(e,"blockedDialog",3,!1),r=Te(e,"hiddenDialog",3,!1),o=Te(e,"onStartClose",3,()=>{}),s=Te(e,"onClosed",3,()=>{}),i=Mg({onStartClose:o(),onClosed:s()});const{dialogDec:l,dialogInc:c}=$t();he(()=>(c(),()=>{l()})),Le(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const u=h=>{h.key==="Escape"&&a()&&(h.preventDefault(),h.stopPropagation())};he(()=>(document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}));var d=ue(),v=L(d);{var g=h=>{Ag(h,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(m,k)=>{var _=ue(),x=L(_);Pe(x,()=>e.children),p(m,_)},$$slots:{default:!0}})};U(v,h=>{i.state!=="close"&&h(g)})}p(t,d),ce()}const Ss=(t,e=je,a=je,r)=>{let o=mr(()=>pl(r?.(),!1));var s=ue(),i=L(s);{var l=u=>{vt(u,{children:(d,v)=>{Ct(d,{get hidden(){return n(o)},get page(){return ge.Settings}})},$$slots:{default:!0}})},c=u=>{var d=ue(),v=L(d);{var g=m=>{vt(m,{children:(k,_)=>{Sv(k,{})},$$slots:{default:!0}})},h=m=>{var k=ue(),_=L(k);{var x=w=>{vt(w,{children:(S,I)=>{Ct(S,{get params(){return a()},get hidden(){return n(o)},get page(){return ge.Note}})},$$slots:{default:!0}})},j=w=>{var S=ue(),I=L(S);{var T=F=>{vt(F,{children:(J,H)=>{Ct(J,{get hidden(){return n(o)},get page(){return ge.ImportData}})},$$slots:{default:!0}})},E=F=>{var J=ue(),H=L(J);{var W=Z=>{vt(Z,{children:(C,K)=>{Ct(C,{get hidden(){return n(o)},get page(){return ge.ExportData}})},$$slots:{default:!0}})},ne=Z=>{var C=ue(),K=L(C);{var se=X=>{vt(X,{children:(te,ie)=>{$f(te,{})},$$slots:{default:!0}})},q=X=>{var te=ue(),ie=L(te);{var be=Ee=>{vt(Ee,{children:(Ie,D)=>{Ct(Ie,{get hidden(){return n(o)},get page(){return ge.Install}})},$$slots:{default:!0}})},ke=Ee=>{var Ie=ue(),D=L(Ie);{var ae=Se=>{vt(Se,{children:(Ne,Ce)=>{Ct(Ne,{get hidden(){return n(o)},get page(){return ge.InstallSuccess}})},$$slots:{default:!0}})},_e=Se=>{var Ne=ue(),Ce=L(Ne);{var V=de=>{vt(de,{children:(xe,y)=>{Ct(xe,{get hidden(){return n(o)},get page(){return ge.Auth}})},$$slots:{default:!0}})},G=de=>{var xe=ue(),y=L(xe);{var R=B=>{vt(B,{children:(Q,Y)=>{Ct(Q,{get hidden(){return n(o)},get page(){return ge.Signup}})},$$slots:{default:!0}})},A=B=>{var Q=ue(),Y=L(Q);{var fe=oe=>{vt(oe,{children:(ee,$)=>{Ct(ee,{get hidden(){return n(o)},get page(){return ge.Signin}})},$$slots:{default:!0}})},ye=oe=>{var ee=ue(),$=L(ee);{var re=Be=>{vt(Be,{children:(at,rt)=>{Ct(at,{get hidden(){return n(o)},get page(){return ge.AccessKeys}})},$$slots:{default:!0}})},we=Be=>{var at=ue(),rt=L(at);{var Oe=Fe=>{vt(Fe,{children:(ze,Ze)=>{Ct(ze,{get hidden(){return n(o)},get page(){return ge.Account}})},$$slots:{default:!0}})},Ue=Fe=>{var ze=ue(),Ze=L(ze);{var qe=Ve=>{vt(Ve,{children:(Qe,sn)=>{Ct(Qe,{get hidden(){return n(o)},get page(){return ge.ConfirmAccessKey}})},$$slots:{default:!0}})},it=Ve=>{var Qe=ue(),sn=L(Qe);{var Pt=wa=>{vt(wa,{children:(Cr,Jo)=>{Ct(Cr,{get hidden(){return n(o)},get page(){return ge.Exit}})},$$slots:{default:!0}})},Nt=wa=>{var Cr=ue(),Jo=L(Cr);{var el=ya=>{vt(ya,{children:(xr,Zo)=>{Ct(xr,{get hidden(){return n(o)},get page(){return ge.Sync}})},$$slots:{default:!0}})},tl=ya=>{var xr=ue(),Zo=L(xr);{var nl=ba=>{vt(ba,{children:(kr,Qo)=>{Ct(kr,{get hidden(){return n(o)},get page(){return ge.Subscription}})},$$slots:{default:!0}})},al=ba=>{var kr=ue(),Qo=L(kr);{var rl=Sa=>{vt(Sa,{children:(no,sl)=>{Ct(no,{get hidden(){return n(o)},get page(){return ge.About}})},$$slots:{default:!0}})},ol=Sa=>{vt(Sa,{children:(no,sl)=>{Xf(no,{})},$$slots:{default:!0}})};U(Qo,Sa=>{e()===ge.About?Sa(rl):Sa(ol,!1)},!0)}p(ba,kr)};U(Zo,ba=>{e()===ge.Subscription?ba(nl):ba(al,!1)},!0)}p(ya,xr)};U(Jo,ya=>{e()===ge.Sync?ya(el):ya(tl,!1)},!0)}p(wa,Cr)};U(sn,wa=>{e()===ge.Exit?wa(Pt):wa(Nt,!1)},!0)}p(Ve,Qe)};U(Ze,Ve=>{e()===ge.ConfirmAccessKey?Ve(qe):Ve(it,!1)},!0)}p(Fe,ze)};U(rt,Fe=>{e()===ge.Account?Fe(Oe):Fe(Ue,!1)},!0)}p(Be,at)};U($,Be=>{e()===ge.AccessKeys?Be(re):Be(we,!1)},!0)}p(oe,ee)};U(Y,oe=>{e()===ge.Signin?oe(fe):oe(ye,!1)},!0)}p(B,Q)};U(y,B=>{e()===ge.Signup?B(R):B(A,!1)},!0)}p(de,xe)};U(Ce,de=>{e()===ge.Auth?de(V):de(G,!1)},!0)}p(Se,Ne)};U(D,Se=>{e()===ge.InstallSuccess?Se(ae):Se(_e,!1)},!0)}p(Ee,Ie)};U(ie,Ee=>{e()===ge.Install?Ee(be):Ee(ke,!1)},!0)}p(X,te)};U(K,X=>{e()===ge.AccountSetup?X(se):X(q,!1)},!0)}p(Z,C)};U(H,Z=>{e()===ge.ExportData?Z(W):Z(ne,!1)},!0)}p(F,J)};U(I,F=>{e()===ge.ImportData?F(T):F(E,!1)},!0)}p(w,S)};U(_,w=>{e()===ge.Note?w(x):w(j,!1)},!0)}p(m,k)};U(v,m=>{e()===ge.NewNote?m(g):m(h,!1)},!0)}p(u,d)};U(i,u=>{e()===ge.Settings?u(l):u(c,!1)})}p(t,s)};var Ig=P("<!> <!>",1);function Rg(t,e){le(e,!0);const a=Uc(e,["$$slots","$$events","$$legacy"]),{checkBlockedDialog:r,checkClosableDialog:o}=$t(),{sidebarClose:s,getSidebarState:i}=yr(),l=N(r),c=N(o),{getDialogPages:u}=rn(),{getAccount:d}=Vo();let v=N(u),g=N(()=>d()!==void 0);const{checkMobileSize:h}=on();let m=M(dt([]));const k=N(h),{clearDialogPages:_,popDialogPage:x}=rn(),{checkLeftStart:j}=$t();let w=N(j);Le(()=>{u().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const S=()=>{x()},I=()=>{_()};Le(()=>{n(v),n(k),zt(()=>{if(n(k))n(v).length>=n(m).length||n(w)?f(m,n(v).map(Z=>({page:Z,shown:!0})),!0):f(m,n(m).map((Z,C)=>({page:Z.page,shown:C<n(v).length})),!0);else if(n(v).length>=n(m).length)f(m,n(v).map(Z=>({page:Z,shown:!0})),!0);else{if(n(v).length===0){f(m,[{page:n(m)[n(m).length-1].page,shown:!1}],!0);return}f(m,n(v).map(Z=>({page:Z,shown:!0})),!0)}})});const T=()=>{f(m,n(v).map(Z=>({page:Z,shown:!0})),!0)};var E=Ig(),F=L(E);{var J=Z=>{pg(Z)};U(F,Z=>{n(g)&&Z(J)})}var H=O(F,2);{var W=Z=>{var C=ue(),K=L(C);En(K,19,()=>n(m),se=>se.page,(se,q,X)=>{const te=N(()=>n(q).page.split("?")[1]),ie=N(()=>n(q).page.split("?")[0]),be=N(()=>n(X)!==n(m).length-1&&!!n(m)[n(X)+1]?.shown),ke=N(()=>n(X)===0);{let Ee=N(()=>ps[n(ie)]||""),Ie=N(()=>n(l)||n(ke)&&!n(c));xg(se,So({get shown(){return n(q).shown},get title(){return n(Ee)},get hidden(){return n(be)},get blocked(){return n(Ie)},onClose:S,onClosed:T},()=>a,{children:(D,ae)=>{Ss(D,()=>n(ie),()=>n(te),()=>n(be))},$$slots:{default:!0}}))}}),p(Z,C)},ne=Z=>{var C=ue(),K=L(C);{var se=q=>{const X=N(()=>n(m)[n(m).length-1].page.split("?")[1]),te=N(()=>n(m)[n(m).length-1].page.split("?")[0]),ie=N(()=>n(m)[n(m).length-1].shown),be=N(()=>n(m).length===1);{let ke=N(()=>ps[n(te)]||""),Ee=N(()=>n(l)||!n(c)),Ie=N(()=>n(l)||n(be)?void 0:S);Dg(q,{get shownDialog(){return n(ie)},get title(){return n(ke)},get blockedDialog(){return n(Ee)},hiddenDialog:!1,get onStartBack(){return n(Ie)},onStartClose:I,onClosed:T,children:(D,ae)=>{Ss(D,()=>n(te),()=>n(X))},$$slots:{default:!0}})}};U(K,q=>{n(m).length>0&&q(se)},!0)}p(Z,C)};U(H,Z=>{h()?Z(W):Z(ne,!1)})}p(t,E),ce()}function Lg(t,e){le(e,!1);let a=0;he(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),Uo(),ce()}const Og=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var Fg=P('<div><button class="d p-11qzo3t"><!> <span class="e p-11qzo3t"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),zg=P('<!> <!> <!> <!> <main><div class="a p-11qzo3t"><div class="b p-11qzo3t"><!></div></div> <div class="c p-11qzo3t"><!></div></main> <!>',1);function jg(t,e){le(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=jt(),{hasDialogPage:s}=rn(),{setScrollContainer:i}=to(),{getAccount:l,init:c}=Vo(),{isInitedNotes:u}=Dt(),{isInitedSettings:d}=cr(),{getDialogPages:v}=rn(),{createBroadcastChannel:g,tabId:h}=$r(),m=g(),{getSidebarState:k}=yr(),{setClosableDialog:_}=$t(),{getViewMode:x}=cr(),j=()=>{Og()?a(`${Kt}=${ge.AccountSetup}`):a(`${Kt}=${ge.Install}`)};he(()=>{c(R=>{R===void 0?j():(s(ge.AccountSetup)&&a(""),R?f(E,R):f(E,null))});const y=async R=>{const A=JSON.parse(R.data);if(A.tabId&&A.tabId===h)return;const B=A;B.type==="initLocalAccount"||B.type==="initCloudAccount"||B.type==="updateAccount"||B.type==="disconnectCloudAccount"?a(""):B.type==="exit"&&j()};return m.addEventListener(y),()=>m.removeEventListener(y)});const w=Dn();he(async()=>{await new Promise(y=>setTimeout(y,250)),await fi(),w.working=!0});let S=M(!1),I=0,T=N(()=>v().length>0),E=N(l),F=N(u),J=N(d),H=M(null);const W=()=>{n(H)&&n(H).scrollTo({top:0})};Le(()=>{_(n(E)!==void 0)}),Le(()=>{i(n(H))});const ne=()=>{if(n(H)){const y=n(H).scrollTop||0;y===0?f(S,!1):!n(S)&&I>y?f(S,!0):n(S)&&I+50<y&&f(S,!1),I=y}},Z=()=>{ne()};Le(()=>(n(H)?.addEventListener("scroll",Z),window.addEventListener("resize",Z),()=>{n(H)?.removeEventListener("scroll",Z),window.removeEventListener("resize",Z)}));const C=N(k);let K=N(()=>w.swipingRatio);const se=()=>{const y=new URLSearchParams(o());if(s(ge.NewNote)){const R=y.get("noteId")||"";return r(R?y.toString().replace(ge.NewNote,`${ge.Note}?id=${encodeURIComponent(R)}`):y)}return r(y)},q=async()=>{const y=await chrome.windows.getCurrent();if(!y)return;const R=420,A=700,B=(y.left||0)+(y.width||0)-R-10,Q=(y.top||0)+90;await chrome.windows.create({url:se(),type:"popup",width:R,height:A,left:B,top:Q}),window.close()},X=N(x),te=N(()=>n(X)==="popup"||n(X)==="sidebar"?{onOpenWindow:q,openWindowHref:se()}:{});var ie=zg(),be=L(ie);Lg(be,{});var ke=O(be,2);bu(ke,{});var Ee=O(ke,2);Xo(Ee,{});var Ie=O(Ee,2);Uu(Ie,{});var D=O(Ie,2),ae=b(D),_e=b(ae),Se=b(_e);{var Ne=y=>{Vf(y,So(()=>n(te)))};U(Se,y=>{n(J)&&n(E)!==void 0&&y(Ne)})}var Ce=O(ae,2),V=b(Ce);{var G=y=>{Rg(y,So(()=>n(te)))};U(V,y=>{n(F)&&n(J)&&y(G)})}Xe(D,y=>f(H,y),()=>n(H));var de=O(D,2);{var xe=y=>{var R=Fg(),A=b(R);A.__click=W;var B=b(A);ft(B,{children:(fe,ye)=>{var oe=Me("top");p(fe,oe)}});var Q=O(B,2),Y=b(Q);ve(Y,()=>({"--rotate":"90deg","--size":"28px"})),me(Y.lastChild,{name:"back"}),pe(()=>{ja(R,`--swiping-ratio: ${n(K)}; --transition-timing-default: ${w.duration}s;`),Je(R,1,nt({i:!0,g:w.working&&!w.isSwiping,j:n(T)||n(C)!=="closed"}),"p-11qzo3t")}),p(y,R)};U(de,y=>{n(S)&&y(xe)})}pe(()=>{ja(D,`--swiping-ratio: ${n(K)}; --transition-timing-default: ${w.duration}s;`),Je(D,1,nt({f:!0,g:w.working&&!w.isSwiping,h:n(C)!=="closed"}),"p-11qzo3t")}),p(t,ie),ce()}st(["click"]);function Bg(t){Yd(t,{children:(e,a)=>{jg(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||xc(Bg,{target:document.getElementById("app")});export{$r as $,N as A,Tt as B,jt as C,Vo as D,Uo as E,fr as F,an as G,Jf as H,me as I,Dt as J,on as K,Ka as L,On as M,Gi as N,Xe as O,ge as P,Yg as Q,Kg as R,nu as S,au as T,Kt as U,ft as V,dr as W,zt as X,pt as Y,ns as Z,bv as _,f as a,Wg as a0,zc as a1,cr as a2,Og as a3,qg as a4,Te as a5,ja as a6,Vg as a7,M as b,b as c,ve as d,En as e,P as f,n as g,tt as h,p as i,U as j,Je as k,nt as l,ce as m,L as n,he as o,le as p,ot as q,st as r,O as s,pe as t,rn as u,$t as v,dt as w,Le as x,ue as y,Me as z};
