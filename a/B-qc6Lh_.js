import{p as he,h as be,z as we,A as Ae,i as Pe,o as Se,l as k,j as N,g as m,u as ke,f as c,m as n,c as q,d as e,n as xe,r as i,H as Q,w as x,s as $,B as L,q as u,P as Ce,L as ye}from"./N-mdzuqB.js";const Ie=async()=>"getInstalledRelatedApps"in navigator?(await navigator?.getInstalledRelatedApps?.())?.some(f=>f.platform==="webapp")??!1:!1,M=()=>window.installPrompt;function se(){const r=navigator.userAgent,f=/iPad|iPhone|iPod/.test(r);return f?!!f:!1}const U=()=>{const r=navigator.userAgent;return/android/i.test(r)},V=()=>{const r=navigator.userAgent;return/chrome|crios/i.test(r)&&!/edge|edgios|edga|brave/i.test(r)},ze=()=>{const r="serviceWorker"in navigator,f="onbeforeinstallprompt"in window;return r&&f},X=()=>{const r=navigator.userAgent;return!!(/Safari/.test(r)&&!/Chrome/.test(r)&&!/CriOS/.test(r)&&!/FxiOS/.test(r))};var $e=c('<p class="message svelte-1uagzbf">App is already installed.</p>'),We=c('<p class="message svelte-1uagzbf">For install app, select the share button and select "Add to Home Screen".</p>'),Be=c('<p class="message svelte-1uagzbf">Install app available on Safari.</p>'),Oe=c(`<p class="message svelte-1uagzbf">From the menu bar, choose File > Add to Dock. Or click the Share button in the Safari
				toolbar, then choose Add to Dock.</p>`),Fe=c('<p class="message svelte-1uagzbf">Installation is not supported in this browser. use Brave, Chrome or Edge.</p>'),He=c(`<p class="message svelte-1uagzbf">App is already installed or installation is not supported in this browser. use Brave,
					Chrome or Edge.</p>`),De=c('<p class="message svelte-1uagzbf">For better experience, install app from Chrome.</p>'),Ee=c(`<!> <p class="message svelte-1uagzbf">You can install app to have a better experience and more reliable storage or you can use it in
			your browser and install later.</p> <!> <div class="container svelte-1uagzbf"><!> <!></div>`,1),Le=c('<!> <div class="loader svelte-1uagzbf"><!></div>',1),Re=c('<p class="message svelte-1uagzbf">Open the app from your device.</p>'),Te=c('<!> <!> <div class="container svelte-1uagzbf"><!> <!></div>',1),je=c('<div class="block svelte-1uagzbf"><!></div>');function Me(r,f){he(f,!0);const{pushStackPages:oe,clearStackPages:ne}=be(),{replace:Z,clearHistoryStack:le}=we(),{getAccount:ee}=Ae(),{blockDialog:ae}=Pe();let h=N("idle"),O=N(!1),R=N(null);const ie=()=>{ee()===void 0?oe(Ce.AccountSetup):ne()},te=()=>{ie()},ce=async()=>{const l=M();try{l&&(k(h,"installing"),"onappinstalled"in window&&window.addEventListener("appinstalled",()=>{if(k(O,!0),!U()){ae(!1),le();const v=ee();Z(v===void 0?"/?stackPages=wellcome%2CinstallSuccess":"/?stackPages=installSuccess")}}),await l.prompt(),l.userChoice?.then(v=>{v.outcome==="accepted"?(window.installPrompt=null,U()&&k(R,setTimeout(()=>{k(R,null),m(O)?k(h,"success"):k(h,"idle")},5e3),!0)):k(h,"idle")}))}catch(v){console.error("Error during install prompt:",v)}};Se(()=>(Ie().then(l=>{k(O,l,!0)}),()=>{m(R)&&clearTimeout(m(R))})),ke(()=>{ae(m(h)==="installing")});var re=je(),ve=q(re);{var pe=l=>{var v=Ee(),T=i(v);Q(T,{children:(a,s)=>{var p=x("install app");e(a,p)}});var j=$(T,4);{var Y=a=>{var s=$e();e(a,s)},b=a=>{var s=u(),p=i(s);{var z=d=>{var A=u(),t=i(A);{var g=o=>{var S=We();e(o,S)},P=o=>{var S=Be();e(o,S)};n(t,o=>{X()?o(g):o(P,!1)})}e(d,A)},w=d=>{var A=u(),t=i(A);{var g=o=>{var S=Oe();e(o,S)},P=o=>{var S=u(),ue=i(S);{var fe=B=>{var H=u(),G=i(H);{var J=_=>{var E=Fe();e(_,E)},D=_=>{var E=He();e(_,E)};n(G,_=>{ze()?_(D,!1):_(J)})}e(B,H)},ge=B=>{var H=u(),G=i(H);{var J=D=>{var _=u(),E=i(_);{var _e=K=>{var me=De();e(K,me)};n(E,K=>{!V()&&M()&&K(_e)})}e(D,_)};n(G,D=>{U()&&D(J)},!0)}e(B,H)};n(ue,B=>{M()?B(ge,!1):B(fe)},!0)}e(o,S)};n(t,o=>{X()?o(g):o(P,!1)},!0)}e(d,A)};n(p,d=>{se()?d(z):d(w,!1)},!0)}e(a,s)};n(j,a=>{m(O)?a(Y):a(b,!1)})}var C=$(j,2),y=q(C);{var F=a=>{L(a,{onClick:ce,fullWidth:!0,children:(s,p)=>{var z=x("install web app");e(s,z)},$$slots:{default:!0}})},I=a=>{var s=u(),p=i(s);{var z=w=>{L(w,{element:"a",target:"_blank",rel:"noopener noreferrer",href:`${window.location.origin}`,fullWidth:!0,children:(d,A)=>{var t=x("open app");e(d,t)},$$slots:{default:!0}})};n(p,w=>{(m(O)||se()&&X())&&w(z)},!0)}e(a,s)};n(y,a=>{M()?a(F):a(I,!1)})}var W=$(y,2);L(W,{onClick:te,fullWidth:!0,type:"secondary",children:(a,s)=>{var p=x("continue in browser");e(a,p)},$$slots:{default:!0}}),e(l,v)},de=l=>{var v=u(),T=i(v);{var j=b=>{var C=Le(),y=i(C);Q(y,{children:(W,a)=>{var s=x("installing app...");e(W,s)}});var F=$(y,2),I=q(F);ye(I,{}),e(b,C)},Y=b=>{var C=u(),y=i(C);{var F=I=>{var W=Te(),a=i(W);Q(a,{children:(t,g)=>{var P=x("app installed successfully!");e(t,P)}});var s=$(a,2);{var p=t=>{var g=Re();e(t,g)};n(s,t=>{V()||t(p)})}var z=$(s,2),w=q(z);{var d=t=>{L(t,{element:"a",target:"_blank",rel:"noopener noreferrer",href:`${window.location.origin}`,fullWidth:!0,children:(g,P)=>{var o=x("open app");e(g,o)},$$slots:{default:!0}})};n(w,t=>{V()&&t(d)})}var A=$(w,2);L(A,{onClick:te,fullWidth:!0,type:"secondary",children:(t,g)=>{var P=x("continue in browser");e(t,P)},$$slots:{default:!0}}),e(I,W)};n(y,I=>{m(h)==="success"&&I(F)},!0)}e(b,C)};n(T,b=>{m(h)==="installing"?b(j):b(Y,!1)},!0)}e(l,v)};n(ve,l=>{m(h)==="idle"?l(pe):l(de,!1)})}e(r,re),xe()}export{Me as default};
