const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/a1OKK9xAj.js","a/aDJGxTJuX.css","a/aoVcry-4R.js","a/a9q_jSmK4.js","a/abA9hIFUQ.js","a/aDf0fAQHq.css","a/aBGmh41R0.js","a/aGKJynjgv.css","a/an_KVr1_f.js","a/aBMjxyC5e.css","a/aBDy-wQ8a.js","a/aDgPIJwnn.css","a/aDbTXOgtV.js","a/aB_UsPGEu.css","a/aBChIOSrH.js","a/aCpa8lgv9.js","a/aDq3vB9Uh.js","a/aj0KFa_-O.css","a/ahu7yjlv8.css","a/aB8E3PoOj.js","a/aBs6Vrlio.css","a/aCeYkt_L2.js","a/a9vnhDBJf.js","a/aEZ_l8VDb.css","a/aDbULo4ES.js","a/aDWUfwQ_G.css","a/aB0gnAdLT.css","a/aBNqDzABF.js","a/aw3_6eoJ1.css","a/aD0r4KuIo.js","a/aCJkK19aw.css","a/aCGXVAi3Q.js","a/aDlxBpJjD.css","a/aBMQK0O6R.js","a/aEpkgGAZ0.js","a/aCungcrUA.css","a/aCUejJoiW.js","a/aBJhChuhe.css","a/aB9JYul-A.js","a/aDp4shRW_.css","a/aDpkUrEix.js","a/aDaxC3cdO.css","a/aDsCk936O.js","a/aBib31qW-.css","a/aCdUSnIu8.js","a/aBr15UghP.css","a/aDhnuDweb.js","a/aCTzb1Nvm.css"])))=>i.map(i=>d[i]);
var Si=Object.defineProperty;var mo=t=>{throw TypeError(t)};var Ci=(t,e,n)=>e in t?Si(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ut=(t,e,n)=>Ci(t,typeof e!="symbol"?e+"":e,n),ma=(t,e,n)=>e.has(t)||mo("Cannot "+n);var N=(t,e,n)=>(ma(t,e,"read from private field"),n?n.call(t):e.get(t)),Te=(t,e,n)=>e.has(t)?mo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),fe=(t,e,n,r)=>(ma(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Me=(t,e,n)=>(ma(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const jo=!1;var Ka=Array.isArray,Ei=Array.prototype.indexOf,Ya=Array.from,Ea=Object.defineProperty,qn=Object.getOwnPropertyDescriptor,Vo=Object.getOwnPropertyDescriptors,ki=Object.prototype,Ti=Array.prototype,Ga=Object.getPrototypeOf,wo=Object.isExtensible;const xe=()=>{};function xi(t){return typeof t?.then=="function"}function Pi(t){return t()}function ka(t){for(var e=0;e<t.length;e++)t[e]()}function Uo(){var t,e,n=new Promise((r,o)=>{t=r,e=o});return{promise:n,resolve:t,reject:e}}function Di(t,e,n=!1){return t===void 0?n?e():e:t}const Ze=2,Xa=4,$r=8,Xt=16,Zt=32,Mn=64,ea=128,et=1024,ct=2048,vn=4096,vt=8192,Wt=16384,Za=32768,un=65536,yo=1<<17,Ai=1<<18,or=1<<19,Wo=1<<20,mt=256,Vr=512,Ur=32768,Ta=1<<21,Ja=1<<22,xn=1<<23,Pn=Symbol("$state"),Ni=Symbol("legacy props"),Mi=Symbol(""),Un=new class extends Error{constructor(){super(...arguments);ut(this,"name","StaleReactionError");ut(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function qo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Li(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ii(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Oi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ri(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Bi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Fi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Hi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function ji(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Vi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ta=1,na=2,Ko=4,Ui=8,Wi=16,qi=1,Ki=2,Yi=4,Gi=8,Xi=16,Zi=1,Ji=2,Ke=Symbol(),Qi="http://www.w3.org/1999/xhtml";function $i(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let el=!1;function Yo(t){return t===this.v}function tl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Go(t){return!tl(t,this.v)}let sr=!1,nl=!1;function rl(){sr=!0}let De=null;function tr(t){De=t}function He(t){return Xo().get(t)}function je(t,e){return Xo().set(t,e),e}function ie(t,e=!1,n){De={p:De,c:null,e:null,s:t,x:null,l:sr&&!e?{s:null,u:null,$:[]}:null}}function le(t){var e=De,n=e.e;if(n!==null){e.e=null;for(var r of n)hs(r)}return t!==void 0&&(e.x=t),De=e.p,t??{}}function ir(){return!sr||De!==null&&De.l===null}function Xo(t){return De===null&&qo(),De.c??(De.c=new Map(al(De)||void 0))}function al(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let Sn=[];function Zo(){var t=Sn;Sn=[],ka(t)}function Ln(t){if(Sn.length===0&&!Kn){var e=Sn;queueMicrotask(()=>{e===Sn&&Zo()})}Sn.push(t)}function ol(){for(;Sn.length>0;)Zo()}const sl=new WeakMap;function Jo(t){var e=Se;if(e===null)return ye.f|=xn,t;if((e.f&Za)===0){if((e.f&ea)===0)throw!e.parent&&t instanceof Error&&Qo(t),t;e.b.error(t)}else nr(t,e)}function nr(t,e){for(;e!==null;){if((e.f&ea)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&Qo(t),t}function Qo(t){const e=sl.get(t);e&&(Ea(t,"message",{value:e.message}),Ea(t,"stack",{value:e.stack}))}const Lr=new Set;let Pe=null,Br=null,Ct=null,xa=new Set,Mt=[],ra=null,Pa=!1,Kn=!1;var Zn,Jn,Qn,Cn,wr,$n,er,Ye,Da,wn,Aa,$o;const Zr=class Zr{constructor(){Te(this,Ye);ut(this,"committed",!1);ut(this,"current",new Map);Te(this,Zn,new Map);Te(this,Jn,new Set);Te(this,Qn,0);Te(this,Cn,0);Te(this,wr,null);Te(this,$n,[]);Te(this,er,[]);ut(this,"skipped_effects",new Set)}process(e){Mt=[],Br=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)Me(this,Ye,Da).call(this,r,n);Me(this,Ye,Aa).call(this),N(this,Cn)>0?(Me(this,Ye,wn).call(this,n.effects),Me(this,Ye,wn).call(this,n.render_effects),Me(this,Ye,wn).call(this,n.block_effects)):(Br=this,Pe=null,bo(n.render_effects),bo(n.effects),Br=null),Ct=null}capture(e,n){N(this,Zn).has(e)||N(this,Zn).set(e,n),this.current.set(e,e.v),Ct?.set(e,e.v)}activate(){Pe=this}deactivate(){Pe=null,Ct=null}flush(){if(Mt.length>0){if(this.activate(),ts(),Pe!==null&&Pe!==this)return}else Me(this,Ye,Aa).call(this);this.deactivate();for(const e of xa)if(xa.delete(e),e(),Pe!==null)break}increment(e){fe(this,Qn,N(this,Qn)+1),e&&fe(this,Cn,N(this,Cn)+1)}decrement(e){fe(this,Qn,N(this,Qn)-1),e&&fe(this,Cn,N(this,Cn)-1);for(const n of N(this,$n))tt(n,ct),An(n);for(const n of N(this,er))tt(n,vn),An(n);fe(this,$n,[]),fe(this,er,[]),this.flush()}add_callback(e){N(this,Jn).add(e)}settled(){return(N(this,wr)??fe(this,wr,Uo())).promise}static ensure(){if(Pe===null){const e=Pe=new Zr;Lr.add(Pe),Kn||Zr.enqueue(()=>{Pe===e&&e.flush()})}return Pe}static enqueue(e){Ln(e)}apply(){}};Zn=new WeakMap,Jn=new WeakMap,Qn=new WeakMap,Cn=new WeakMap,wr=new WeakMap,$n=new WeakMap,er=new WeakMap,Ye=new WeakSet,Da=function(e,n){e.f^=et;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Zt|Mn))!==0,i=s&&(o&et)!==0,l=i||(o&vt)!==0||this.skipped_effects.has(r);if((r.f&ea)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){s?r.f^=et:(o&Xa)!==0?n.effects.push(r):ia(r)&&((r.f&Xt)!==0&&n.block_effects.push(r),Kr(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(Me(this,Ye,wn).call(this,n.effects),Me(this,Ye,wn).call(this,n.render_effects),Me(this,Ye,wn).call(this,n.block_effects),n=n.parent),r=u.next,u=u.parent}},wn=function(e){for(const n of e)((n.f&ct)!==0?N(this,$n):N(this,er)).push(n),tt(n,et)},Aa=function(){if(N(this,Cn)===0){for(const e of N(this,Jn))e();N(this,Jn).clear()}N(this,Qn)===0&&Me(this,Ye,$o).call(this)},$o=function(){var o;if(Lr.size>1){N(this,Zn).clear();var e=Ct,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Lr){if(s===this){n=!1;continue}const i=[];for(const[c,u]of this.current){if(s.current.has(c))if(n&&u!==s.current.get(c))s.current.set(c,u);else continue;i.push(c)}if(i.length===0)continue;const l=[...s.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){const c=new Set,u=new Map;for(const f of i)ns(f,l,c,u);if(Mt.length>0){Pe=s,s.apply();for(const f of Mt)Me(o=s,Ye,Da).call(o,f,r);Mt=[],s.deactivate()}}}Pe=null,Ct=e}this.committed=!0,Lr.delete(this),N(this,wr)?.resolve()};let Ut=Zr;function es(t){var e=Kn;Kn=!0;try{for(var n;;){if(ol(),Mt.length===0&&(Pe?.flush(),Mt.length===0))return ra=null,n;ts()}}finally{Kn=e}}function ts(){var t=Gn;Pa=!0;try{var e=0;for(Eo(!0);Mt.length>0;){var n=Ut.ensure();if(e++>1e3){var r,o;il()}n.process(Mt),sn.clear()}}finally{Pa=!1,Eo(t),ra=null}}function il(){try{Bi()}catch(t){nr(t,ra)}}let Ft=null;function bo(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Wt|vt))===0&&ia(r)&&(Ft=new Set,Kr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?_s(r):r.fn=null),Ft?.size>0)){sn.clear();for(const o of Ft){if((o.f&(Wt|vt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)Ft.has(i)&&(Ft.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(Wt|vt))===0&&Kr(c)}}Ft.clear()}}Ft=null}}function ns(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Ze)!==0?ns(o,e,n,r):(s&(Ja|Xt))!==0&&(s&ct)===0&&rs(o,e,r)&&(tt(o,ct),An(o))}}function rs(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Ze)!==0&&rs(o,e,n))return n.set(o,!0),!0}return n.set(t,!1),!1}function An(t){for(var e=ra=t;e.parent!==null;){e=e.parent;var n=e.f;if(Pa&&e===Se&&(n&Xt)!==0)return;if((n&(Mn|Zt))!==0){if((n&et)===0)return;e.f^=et}}Mt.push(e)}function ll(t){let e=0,n=Yt(0),r;return()=>{Sl()&&(a(n),sa(()=>(e===0&&(r=Ot(()=>t(()=>vr(n)))),e+=1,()=>{Ln(()=>{e-=1,e===0&&(r?.(),r=void 0,vr(n))})})))}}var cl=un|or|ea;function ul(t,e,n){new dl(t,e,n)}var gt,pt,qa,Pt,En,Dt,_t,st,At,jt,nn,kn,rn,Tn,an,Jr,Qr,We,fl,vl,Na,zr,Fr,Ma;class dl{constructor(e,n,r){Te(this,We);ut(this,"parent");Te(this,gt,!1);Te(this,pt);Te(this,qa,null);Te(this,Pt);Te(this,En);Te(this,Dt);Te(this,_t,null);Te(this,st,null);Te(this,At,null);Te(this,jt,null);Te(this,nn,null);Te(this,kn,0);Te(this,rn,0);Te(this,Tn,!1);Te(this,an,null);Te(this,Jr,()=>{N(this,an)&&qt(N(this,an),N(this,kn))});Te(this,Qr,ll(()=>(fe(this,an,Yt(N(this,kn))),()=>{fe(this,an,null)})));fe(this,pt,e),fe(this,Pt,n),fe(this,En,r),this.parent=Se.b,fe(this,gt,!!N(this,Pt).pending),fe(this,Dt,lr(()=>{Se.b=this;{var o=Me(this,We,Na).call(this);try{fe(this,_t,St(()=>r(o)))}catch(s){this.error(s)}N(this,rn)>0?Me(this,We,Fr).call(this):fe(this,gt,!1)}return()=>{N(this,nn)?.remove()}},cl))}is_pending(){return N(this,gt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!N(this,Pt).pending}update_pending_count(e){Me(this,We,Ma).call(this,e),fe(this,kn,N(this,kn)+e),xa.add(N(this,Jr))}get_effect_pending(){return N(this,Qr).call(this),a(N(this,an))}error(e){var n=N(this,Pt).onerror;let r=N(this,Pt).failed;if(N(this,Tn)||!n&&!r)throw e;N(this,_t)&&(lt(N(this,_t)),fe(this,_t,null)),N(this,st)&&(lt(N(this,st)),fe(this,st,null)),N(this,At)&&(lt(N(this,At)),fe(this,At,null));var o=!1,s=!1;const i=()=>{if(o){$i();return}o=!0,s&&Vi(),Ut.ensure(),fe(this,kn,0),N(this,At)!==null&&Yn(N(this,At),()=>{fe(this,At,null)}),fe(this,gt,this.has_pending_snippet()),fe(this,_t,Me(this,We,zr).call(this,()=>(fe(this,Tn,!1),St(()=>N(this,En).call(this,N(this,pt)))))),N(this,rn)>0?Me(this,We,Fr).call(this):fe(this,gt,!1)};var l=ye;try{it(null),s=!0,n?.(e,i),s=!1}catch(c){nr(c,N(this,Dt)&&N(this,Dt).parent)}finally{it(l)}r&&Ln(()=>{fe(this,At,Me(this,We,zr).call(this,()=>{Ut.ensure(),fe(this,Tn,!0);try{return St(()=>{r(N(this,pt),()=>e,()=>i)})}catch(c){return nr(c,N(this,Dt).parent),null}finally{fe(this,Tn,!1)}}))})}}gt=new WeakMap,pt=new WeakMap,qa=new WeakMap,Pt=new WeakMap,En=new WeakMap,Dt=new WeakMap,_t=new WeakMap,st=new WeakMap,At=new WeakMap,jt=new WeakMap,nn=new WeakMap,kn=new WeakMap,rn=new WeakMap,Tn=new WeakMap,an=new WeakMap,Jr=new WeakMap,Qr=new WeakMap,We=new WeakSet,fl=function(){try{fe(this,_t,St(()=>N(this,En).call(this,N(this,pt))))}catch(e){this.error(e)}fe(this,gt,!1)},vl=function(){const e=N(this,Pt).pending;e&&(fe(this,st,St(()=>e(N(this,pt)))),Ut.enqueue(()=>{var n=Me(this,We,Na).call(this);fe(this,_t,Me(this,We,zr).call(this,()=>(Ut.ensure(),St(()=>N(this,En).call(this,n))))),N(this,rn)>0?Me(this,We,Fr).call(this):(Yn(N(this,st),()=>{fe(this,st,null)}),fe(this,gt,!1))}))},Na=function(){var e=N(this,pt);return N(this,gt)&&(fe(this,nn,dn()),N(this,pt).before(N(this,nn)),e=N(this,nn)),e},zr=function(e){var n=Se,r=ye,o=De;Lt(N(this,Dt)),it(N(this,Dt)),tr(N(this,Dt).ctx);try{return e()}catch(s){return Jo(s),null}finally{Lt(n),it(r),tr(o)}},Fr=function(){const e=N(this,Pt).pending;N(this,_t)!==null&&(fe(this,jt,document.createDocumentFragment()),N(this,jt).append(N(this,nn)),ys(N(this,_t),N(this,jt))),N(this,st)===null&&fe(this,st,St(()=>e(N(this,pt))))},Ma=function(e){var n;if(!this.has_pending_snippet()){this.parent&&Me(n=this.parent,We,Ma).call(n,e);return}fe(this,rn,N(this,rn)+e),N(this,rn)===0&&(fe(this,gt,!1),N(this,st)&&Yn(N(this,st),()=>{fe(this,st,null)}),N(this,jt)&&(N(this,pt).before(N(this,jt)),fe(this,jt,null)))};function hl(t,e,n){const r=ir()?Sr:aa;if(e.length===0){n(t.map(r));return}var o=Pe,s=Se,i=as();Promise.all(e.map(l=>gl(l))).then(l=>{i();try{n([...t.map(r),...l])}catch(c){(s.f&Wt)===0&&nr(c,s)}o?.deactivate(),Wr()}).catch(l=>{nr(l,s)})}function as(){var t=Se,e=ye,n=De,r=Pe;return function(){Lt(t),it(e),tr(n),r?.activate()}}function Wr(){Lt(null),it(null),tr(null)}function Sr(t){var e=Ze|ct,n=ye!==null&&(ye.f&Ze)!==0?ye:null;return Se===null||n!==null&&(n.f&mt)!==0?e|=mt:Se.f|=or,{ctx:De,deps:null,effects:null,equals:Yo,f:e,fn:t,reactions:null,rv:0,v:Ke,wv:0,parent:n??Se,ac:null}}function gl(t,e){let n=Se;n===null&&Li();var r=n.b,o=void 0,s=Yt(Ke),i=!ye,l=new Map;return Tl(()=>{var c=Uo();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===Pe&&u.committed&&u.deactivate(),Wr()})}catch(h){c.reject(h),Wr()}var u=Pe;if(i){var f=!r.is_pending();r.update_pending_count(1),u.increment(f),l.get(u)?.reject(Un),l.delete(u),l.set(u,c)}const d=(h,m=void 0)=>{if(u.activate(),m)m!==Un&&(s.f|=xn,qt(s,m));else{(s.f&xn)!==0&&(s.f^=xn),qt(s,h);for(const[g,w]of l){if(l.delete(g),g===u)break;w.reject(Un)}}i&&(r.update_pending_count(-1),u.decrement(f))};c.promise.then(d,h=>d(null,h||"unknown"))}),vs(()=>{for(const c of l.values())c.reject(Un)}),new Promise(c=>{function u(f){function d(){f===o?c(s):u(o)}f.then(d,d)}u(o)})}function M(t){const e=Sr(t);return bs(e),e}function aa(t){const e=Sr(t);return e.equals=Go,e}function os(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)lt(e[n])}}function pl(t){for(var e=t.parent;e!==null;){if((e.f&Ze)===0)return e;e=e.parent}return null}function Qa(t){var e,n=Se;Lt(pl(t));try{t.f&=~Ur,os(t),e=ks(t)}finally{Lt(n)}return e}function ss(t){var e=Qa(t);if(t.equals(e)||(t.v=e,t.wv=Cs()),!In)if(Ct!==null)Ct.set(t,t.v);else{var n=(on||(t.f&mt)!==0)&&t.deps!==null?vn:et;tt(t,n)}}const sn=new Map;function Yt(t,e){var n={f:0,v:t,reactions:null,equals:Yo,rv:0,wv:0};return n}function j(t,e){const n=Yt(t);return bs(n),n}function La(t,e=!1,n=!0){var o;const r=Yt(t);return e||(r.equals=Go),sr&&n&&De!==null&&De.l!==null&&((o=De.l).s??(o.s=[])).push(r),r}function v(t,e,n=!1){ye!==null&&(!Et||(ye.f&yo)!==0)&&ir()&&(ye.f&(Ze|Xt|Ja|yo))!==0&&!Kt?.includes(t)&&ji();let r=n?Xe(e):e;return qt(t,r)}function qt(t,e){if(!t.equals(e)){var n=t.v;In?sn.set(t,e):sn.set(t,n),t.v=e;var r=Ut.ensure();r.capture(t,n),(t.f&Ze)!==0&&((t.f&ct)!==0&&Qa(t),tt(t,(t.f&mt)===0?et:vn)),t.wv=Cs(),is(t,ct),ir()&&Se!==null&&(Se.f&et)!==0&&(Se.f&(Zt|Mn))===0&&(ht===null?Dl([t]):ht.push(t))}return e}function vr(t){v(t,t.v+1)}function is(t,e){var n=t.reactions;if(n!==null)for(var r=ir(),o=n.length,s=0;s<o;s++){var i=n[s],l=i.f;if(!(!r&&i===Se)){var c=(l&ct)===0;c&&tt(i,e),(l&Ze)!==0?(l&Ur)===0&&(i.f|=Ur,is(i,vn)):c&&((l&Xt)!==0&&Ft!==null&&Ft.add(i),An(i))}}}function Xe(t){if(typeof t!="object"||t===null||Pn in t)return t;const e=Ga(t);if(e!==ki&&e!==Ti)return t;var n=new Map,r=Ka(t),o=j(0),s=Dn,i=l=>{if(Dn===s)return l();var c=ye,u=Dn;it(null),To(s);var f=l();return it(c),To(u),f};return r&&n.set("length",j(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Fi();var f=n.get(c);return f===void 0?f=i(()=>{var d=j(u.value);return n.set(c,d),d}):v(f,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const f=i(()=>j(Ke));n.set(c,f),vr(o)}}else v(u,Ke),vr(o);return!0},get(l,c,u){if(c===Pn)return t;var f=n.get(c),d=c in l;if(f===void 0&&(!d||qn(l,c)?.writable)&&(f=i(()=>{var m=Xe(d?l[c]:Ke),g=j(m);return g}),n.set(c,f)),f!==void 0){var h=a(f);return h===Ke?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var f=n.get(c);f&&(u.value=a(f))}else if(u===void 0){var d=n.get(c),h=d?.v;if(d!==void 0&&h!==Ke)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){if(c===Pn)return!0;var u=n.get(c),f=u!==void 0&&u.v!==Ke||Reflect.has(l,c);if(u!==void 0||Se!==null&&(!f||qn(l,c)?.writable)){u===void 0&&(u=i(()=>{var h=f?Xe(l[c]):Ke,m=j(h);return m}),n.set(c,u));var d=a(u);if(d===Ke)return!1}return f},set(l,c,u,f){var d=n.get(c),h=c in l;if(r&&c==="length")for(var m=u;m<d.v;m+=1){var g=n.get(m+"");g!==void 0?v(g,Ke):m in l&&(g=i(()=>j(Ke)),n.set(m+"",g))}if(d===void 0)(!h||qn(l,c)?.writable)&&(d=i(()=>j(void 0)),v(d,Xe(u)),n.set(c,d));else{h=d.v!==Ke;var w=i(()=>Xe(u));v(d,w)}var _=Reflect.getOwnPropertyDescriptor(l,c);if(_?.set&&_.set.call(f,u),!h){if(r&&typeof c=="string"){var A=n.get("length"),D=Number(c);Number.isInteger(D)&&D>=A.v&&v(A,D+1)}vr(o)}return!0},ownKeys(l){a(o);var c=Reflect.ownKeys(l).filter(d=>{var h=n.get(d);return h===void 0||h.v!==Ke});for(var[u,f]of n)f.v!==Ke&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Hi()}})}var So,ls,cs,us;function _l(){if(So===void 0){So=window,ls=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;cs=qn(e,"firstChild").get,us=qn(e,"nextSibling").get,wo(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),wo(n)&&(n.__t=void 0)}}function dn(t=""){return document.createTextNode(t)}function rr(t){return cs.call(t)}function Cr(t){return us.call(t)}function b(t,e){return rr(t)}function B(t,e=!1){{var n=rr(t);return n instanceof Comment&&n.data===""?Cr(n):n}}function U(t,e=1,n=!1){let r=t;for(;e--;)r=Cr(r);return r}function ml(t){t.textContent=""}function ds(){return!1}let Co=!1;function wl(){Co||(Co=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function oa(t){var e=ye,n=Se;it(null),Lt(null);try{return t()}finally{it(e),Lt(n)}}function yl(t,e,n,r=n){t.addEventListener(e,()=>oa(n));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),wl()}function fs(t){Se===null&&ye===null&&Ri(),ye!==null&&(ye.f&mt)!==0&&Se===null&&Oi(),In&&Ii()}function bl(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function It(t,e,n,r=!0){var o=Se;o!==null&&(o.f&vt)!==0&&(t|=vt);var s={ctx:De,deps:null,nodes_start:null,nodes_end:null,f:t|ct,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Kr(s),s.f|=Za}catch(c){throw lt(s),c}else e!==null&&An(s);if(r){var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&or)===0&&(i=i.first,(t&Xt)!==0&&(t&un)!==0&&i!==null&&(i.f|=un)),i!==null&&(i.parent=o,o!==null&&bl(i,o),ye!==null&&(ye.f&Ze)!==0&&(t&Mn)===0)){var l=ye;(l.effects??(l.effects=[])).push(i)}}return s}function Sl(){return ye!==null&&!Et}function vs(t){const e=It($r,null,!1);return tt(e,et),e.teardown=t,e}function Ae(t){fs();var e=Se.f,n=!ye&&(e&Zt)!==0&&(e&Za)===0;if(n){var r=De;(r.e??(r.e=[])).push(t)}else return hs(t)}function hs(t){return It(Xa|Wo,t,!1)}function Cl(t){return fs(),It($r|Wo,t,!0)}function El(t){Ut.ensure();const e=It(Mn|or,t,!0);return(n={})=>new Promise(r=>{n.outro?Yn(e,()=>{lt(e),r(void 0)}):(lt(e),r(void 0))})}function kl(t){return It(Xa,t,!1)}function Tl(t){return It(Ja|or,t,!0)}function sa(t,e=0){return It($r|e,t,!0)}function de(t,e=[],n=[]){hl(e,n,r=>{It($r,()=>t(...r.map(a)),!0)})}function lr(t,e=0){var n=It(Xt|e,t,!0);return n}function St(t,e=!0){return It(Zt|or,t,!0,e)}function gs(t){var e=t.teardown;if(e!==null){const n=In,r=ye;ko(!0),it(null);try{e.call(null)}finally{ko(n),it(r)}}}function ps(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const o=n.ac;o!==null&&oa(()=>{o.abort(Un)});var r=n.next;(n.f&Mn)!==0?n.parent=null:lt(n,e),n=r}}function xl(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Zt)===0&&lt(e),e=n}}function lt(t,e=!0){var n=!1;(e||(t.f&Ai)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Pl(t.nodes_start,t.nodes_end),n=!0),ps(t,e&&!n),qr(t,0),tt(t,Wt);var r=t.transitions;if(r!==null)for(const s of r)s.stop();gs(t);var o=t.parent;o!==null&&o.first!==null&&_s(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Pl(t,e){for(;t!==null;){var n=t===e?null:Cr(t);t.remove(),t=n}}function _s(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Yn(t,e,n=!0){var r=[];$a(t,r,!0),ms(r,()=>{n&&lt(t),e&&e()})}function ms(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var o of t)o.out(r)}else e()}function $a(t,e,n){if((t.f&vt)===0){if(t.f^=vt,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var o=r.next,s=(r.f&un)!==0||(r.f&Zt)!==0&&(t.f&Xt)!==0;$a(r,e,s?n:!1),r=o}}}function eo(t){ws(t,!0)}function ws(t,e){if((t.f&vt)!==0){t.f^=vt,(t.f&et)===0&&(tt(t,ct),An(t));for(var n=t.first;n!==null;){var r=n.next,o=(n.f&un)!==0||(n.f&Zt)!==0;ws(n,o?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function ys(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var o=n===r?null:Cr(n);e.append(n),n=o}}let Gn=!1;function Eo(t){Gn=t}let In=!1;function ko(t){In=t}let ye=null,Et=!1;function it(t){ye=t}let Se=null;function Lt(t){Se=t}let Kt=null;function bs(t){ye!==null&&(Kt===null?Kt=[t]:Kt.push(t))}let $e=null,dt=0,ht=null;function Dl(t){ht=t}let Ss=1,pr=0,Dn=pr;function To(t){Dn=t}let on=!1;function Cs(){return++Ss}function ia(t){var e=t.f;if((e&ct)!==0)return!0;if((e&vn)!==0){var n=t.deps,r=(e&mt)!==0;if(e&Ze&&(t.f&=~Ur),n!==null){var o,s,i=(e&Vr)!==0,l=r&&Se!==null&&!on,c=n.length;if((i||l)&&(Se===null||(Se.f&Wt)===0)){var u=t,f=u.parent;for(o=0;o<c;o++)s=n[o],(i||!s?.reactions?.includes(u))&&(s.reactions??(s.reactions=[])).push(u);i&&(u.f^=Vr),l&&f!==null&&(f.f&mt)===0&&(u.f^=mt)}for(o=0;o<c;o++)if(s=n[o],ia(s)&&ss(s),s.wv>t.wv)return!0}(!r||Se!==null&&!on)&&tt(t,et)}return!1}function Es(t,e,n=!0){var r=t.reactions;if(r!==null&&!Kt?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Ze)!==0?Es(s,e,!1):e===s&&(n?tt(s,ct):(s.f&et)!==0&&tt(s,vn),An(s))}}function ks(t){var w;var e=$e,n=dt,r=ht,o=ye,s=on,i=Kt,l=De,c=Et,u=Dn,f=t.f;$e=null,dt=0,ht=null,on=(f&mt)!==0&&(Et||!Gn||ye===null),ye=(f&(Zt|Mn))===0?t:null,Kt=null,tr(t.ctx),Et=!1,Dn=++pr,t.ac!==null&&(oa(()=>{t.ac.abort(Un)}),t.ac=null);try{t.f|=Ta;var d=t.fn,h=d(),m=t.deps;if($e!==null){var g;if(qr(t,dt),m!==null&&dt>0)for(m.length=dt+$e.length,g=0;g<$e.length;g++)m[dt+g]=$e[g];else t.deps=m=$e;if(!on||(f&Ze)!==0&&t.reactions!==null)for(g=dt;g<m.length;g++)((w=m[g]).reactions??(w.reactions=[])).push(t)}else m!==null&&dt<m.length&&(qr(t,dt),m.length=dt);if(ir()&&ht!==null&&!Et&&m!==null&&(t.f&(Ze|vn|ct))===0)for(g=0;g<ht.length;g++)Es(ht[g],t);return o!==null&&o!==t&&(pr++,ht!==null&&(r===null?r=ht:r.push(...ht))),(t.f&xn)!==0&&(t.f^=xn),h}catch(_){return Jo(_)}finally{t.f^=Ta,$e=e,dt=n,ht=r,ye=o,on=s,Kt=i,tr(l),Et=c,Dn=u}}function Al(t,e){let n=e.reactions;if(n!==null){var r=Ei.call(n,t);if(r!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(e.f&Ze)!==0&&($e===null||!$e.includes(e))&&(tt(e,vn),(e.f&(mt|Vr))===0&&(e.f^=Vr),os(e),qr(e,0))}function qr(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Al(t,n[r])}function Kr(t){var e=t.f;if((e&Wt)===0){tt(t,et);var n=Se,r=Gn;Se=t,Gn=!0;try{(e&Xt)!==0?xl(t):ps(t),gs(t);var o=ks(t);t.teardown=typeof o=="function"?o:null,t.wv=Ss;var s;jo&&nl&&(t.f&ct)!==0&&t.deps}finally{Gn=r,Se=n}}}async function Ts(){await Promise.resolve(),es()}function a(t){var e=t.f,n=(e&Ze)!==0;if(ye!==null&&!Et){var r=Se!==null&&(Se.f&Wt)!==0;if(!r&&!Kt?.includes(t)){var o=ye.deps;if((ye.f&Ta)!==0)t.rv<pr&&(t.rv=pr,$e===null&&o!==null&&o[dt]===t?dt++:$e===null?$e=[t]:(!on||!$e.includes(t))&&$e.push(t));else{(ye.deps??(ye.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[ye]:s.includes(ye)||s.push(ye)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&mt)===0&&(i.f^=mt)}if(In){if(sn.has(t))return sn.get(t);if(n){i=t;var c=i.v;return((i.f&et)===0&&i.reactions!==null||xs(i))&&(c=Qa(i)),sn.set(i,c),c}}else if(n){if(i=t,Ct?.has(i))return Ct.get(i);ia(i)&&ss(i)}if(Ct?.has(t))return Ct.get(t);if((t.f&xn)!==0)throw t.v;return t.v}function xs(t){if(t.v===Ke)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(sn.has(e)||(e.f&Ze)!==0&&xs(e))return!0;return!1}function Ot(t){var e=Et;try{return Et=!0,t()}finally{Et=e}}const Nl=-7169;function tt(t,e){t.f=t.f&Nl|e}function Ml(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Pn in t)Ia(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Pn in n&&Ia(n)}}}function Ia(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Ia(t[r],e)}catch{}const n=Ga(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Vo(n);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Ll=["touchstart","touchmove"];function Il(t){return Ll.includes(t)}const Ps=new Set,Oa=new Set;function Ol(t,e,n,r={}){function o(s){if(r.capture||cr.call(e,s),!s.cancelBubble)return oa(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ln(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function to(t,e,n,r,o){var s={capture:r,passive:o},i=Ol(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&vs(()=>{e.removeEventListener(t,i,s)})}function Ge(t){for(var e=0;e<t.length;e++)Ps.add(t[e]);for(var n of Oa)n(t)}let xo=null;function cr(t){var e=this,n=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;xo=t;var i=0,l=xo===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){Ea(t,"currentTarget",{configurable:!0,get(){return s||n}});var f=ye,d=Se;it(null),Lt(null);try{for(var h,m=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var w=s["__"+r];if(w!=null&&(!s.disabled||t.target===s))if(Ka(w)){var[_,...A]=w;_.apply(s,[t,...A])}else w.call(s,t)}catch(D){h?m.push(D):h=D}if(t.cancelBubble||g===e||g===null)break;s=g}if(h){for(let D of m)queueMicrotask(()=>{throw D});throw h}}finally{t.__root=e,delete t.currentTarget,it(f),Lt(d)}}}function Ds(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function _r(t,e){var n=Se;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function K(t,e){var n=(e&Zi)!==0,r=(e&Ji)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=Ds(s?t:"<!>"+t),n||(o=rr(o)));var i=r||ls?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=rr(i),c=i.lastChild;_r(l,c)}else _r(i,i);return i}}function Rl(t,e,n="svg"){var r=!t.startsWith("<!>"),o=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=Ds(o),l=rr(i);s=rr(l)}var c=s.cloneNode(!0);return _r(c,c),c}}function Bl(t,e){return Rl(t,e,"svg")}function Le(t=""){{var e=dn(t+"");return _r(e,e),e}}function Q(){var t=document.createDocumentFragment(),e=document.createComment(""),n=dn();return t.append(e,n),_r(e,n),t}function p(t,e){t!==null&&t.before(e)}function tv(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function ln(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function zl(t,e){return Fl(t,e)}const Vn=new Map;function Fl(t,{target:e,anchor:n,props:r={},events:o,context:s,intro:i=!0}){_l();var l=new Set,c=d=>{for(var h=0;h<d.length;h++){var m=d[h];if(!l.has(m)){l.add(m);var g=Il(m);e.addEventListener(m,cr,{passive:g});var w=Vn.get(m);w===void 0?(document.addEventListener(m,cr,{passive:g}),Vn.set(m,1)):Vn.set(m,w+1)}}};c(Ya(Ps)),Oa.add(c);var u=void 0,f=El(()=>{var d=n??e.appendChild(dn());return ul(d,{pending:()=>{}},h=>{if(s){ie({});var m=De;m.c=s}o&&(r.$$events=o),u=t(h,r)||{},s&&le()}),()=>{for(var h of l){e.removeEventListener(h,cr);var m=Vn.get(h);--m===0?(document.removeEventListener(h,cr),Vn.delete(h)):Vn.set(h,m)}Oa.delete(c),d!==n&&d.parentNode?.removeChild(d)}});return Hl.set(u,f),u}let Hl=new WeakMap;var Vt,Nt,bt,yr,br;class la{constructor(e,n=!0){ut(this,"anchor");Te(this,Vt,new Map);Te(this,Nt,new Map);Te(this,bt,new Map);Te(this,yr,!0);Te(this,br,()=>{var e=Pe;if(N(this,Vt).has(e)){var n=N(this,Vt).get(e),r=N(this,Nt).get(n);if(r)eo(r);else{var o=N(this,bt).get(n);o&&(N(this,Nt).set(n,o.effect),N(this,bt).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of N(this,Vt)){if(N(this,Vt).delete(s),s===e)break;const l=N(this,bt).get(i);l&&(lt(l.effect),N(this,bt).delete(i))}for(const[s,i]of N(this,Nt)){if(s===n)continue;const l=()=>{if(Array.from(N(this,Vt).values()).includes(s)){var u=document.createDocumentFragment();ys(i,u),u.append(dn()),N(this,bt).set(s,{effect:i,fragment:u})}else lt(i);N(this,Nt).delete(s)};N(this,yr)||!r?Yn(i,l,!1):l()}}});this.anchor=e,fe(this,yr,n)}ensure(e,n){var r=Pe,o=ds();if(n&&!N(this,Nt).has(e)&&!N(this,bt).has(e))if(o){var s=document.createDocumentFragment(),i=dn();s.append(i),N(this,bt).set(e,{effect:St(()=>n(i)),fragment:s})}else N(this,Nt).set(e,St(()=>n(this.anchor)));if(N(this,Vt).set(r,e),o){for(const[l,c]of N(this,Nt))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of N(this,bt))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.add_callback(N(this,br))}else N(this,br).call(this)}}Vt=new WeakMap,Nt=new WeakMap,bt=new WeakMap,yr=new WeakMap,br=new WeakMap;const jl=0,wa=1;function Vl(t,e,n,r,o){var s=ir(),i=Ke,l=s?Yt(i):La(i,!1,!1),c=s?Yt(i):La(i,!1,!1),u=new la(t);lr(()=>{var f=e(),d=!1;if(xi(f)){var h=as(),m=!1;const g=w=>{if(!d){m=!0,h();try{w()}finally{Wr(),Kn||es()}}};f.then(w=>{g(()=>{qt(l,w),u.ensure(wa,r&&(_=>r(_,l)))})},w=>{g(()=>{if(qt(c,w),u.ensure(wa,o&&(_=>o(_,c))),!o)throw c.v})}),Ln(()=>{m||g(()=>{u.ensure(jl,n)})})}else qt(l,f),u.ensure(wa,r&&(g=>r(g,l)));return()=>{d=!0}})}function q(t,e,n=!1){var r=new la(t),o=n?un:0;function s(i,l){r.ensure(i,l)}lr(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function ue(t,e){sa(()=>{var n=e();for(var r in n){var o=n[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Ul(t,e,n){for(var r=t.items,o=[],s=e.length,i=0;i<s;i++)$a(e[i].e,o,!0);var l=s>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;ml(c),c.append(n),r.clear(),xt(t,e[0].prev,e[s-1].next)}ms(o,()=>{for(var u=0;u<s;u++){var f=e[u];l||(r.delete(f.k),xt(t,f.prev,f.next)),lt(f.e,!l)}})}function ca(t,e,n,r,o,s=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&Ko)!==0;if(c){var u=t;i=u.appendChild(dn())}var f=null,d=!1,h=new Map,m=aa(()=>{var A=n();return Ka(A)?A:A==null?[]:Ya(A)}),g,w;function _(){Wl(w,g,l,h,i,o,e,r,n),s!==null&&(g.length===0?f?eo(f):f=St(()=>s(i)):f!==null&&Yn(f,()=>{f=null}))}lr(()=>{w??(w=Se),g=a(m);var A=g.length;if(!(d&&A===0)){d=A===0;var D,E,y,k;if(ds()){var C=new Set,T=Pe;for(E=0;E<A;E+=1){y=g[E],k=r(y,E);var x=l.items.get(k)??h.get(k);x?(e&(ta|na))!==0&&As(x,y,E,e):(D=Ns(null,l,null,null,y,k,E,o,e,n,!0),h.set(k,D)),C.add(k)}for(const[I,Y]of l.items)C.has(I)||T.skipped_effects.add(Y.e);T.add_callback(_)}else _();a(m)}})}function Wl(t,e,n,r,o,s,i,l,c){var u=(i&Ui)!==0,f=(i&(ta|na))!==0,d=e.length,h=n.items,m=n.first,g=m,w,_=null,A,D=[],E=[],y,k,C,T;if(u)for(T=0;T<d;T+=1)y=e[T],k=l(y,T),C=h.get(k),C!==void 0&&(C.a?.measure(),(A??(A=new Set)).add(C));for(T=0;T<d;T+=1){if(y=e[T],k=l(y,T),C=h.get(k),C===void 0){var x=r.get(k);if(x!==void 0){r.delete(k),h.set(k,x);var I=_?_.next:g;xt(n,_,x),xt(n,x,I),ya(x,I,o),_=x}else{var Y=g?g.e.nodes_start:o;_=Ns(Y,n,_,_===null?n.first:_.next,y,k,T,s,i,c)}h.set(k,_),D=[],E=[],g=_.next;continue}if(f&&As(C,y,T,i),(C.e.f&vt)!==0&&(eo(C.e),u&&(C.a?.unfix(),(A??(A=new Set)).delete(C))),C!==g){if(w!==void 0&&w.has(C)){if(D.length<E.length){var X=E[0],O;_=X.prev;var ae=D[0],re=D[D.length-1];for(O=0;O<D.length;O+=1)ya(D[O],X,o);for(O=0;O<E.length;O+=1)w.delete(E[O]);xt(n,ae.prev,re.next),xt(n,_,ae),xt(n,re,X),g=X,_=re,T-=1,D=[],E=[]}else w.delete(C),ya(C,g,o),xt(n,C.prev,C.next),xt(n,C,_===null?n.first:_.next),xt(n,_,C),_=C;continue}for(D=[],E=[];g!==null&&g.k!==k;)(g.e.f&vt)===0&&(w??(w=new Set)).add(g),E.push(g),g=g.next;if(g===null)continue;C=g}D.push(C),_=C,g=C.next}if(g!==null||w!==void 0){for(var ce=w===void 0?[]:Ya(w);g!==null;)(g.e.f&vt)===0&&ce.push(g),g=g.next;var z=ce.length;if(z>0){var ne=(i&Ko)!==0&&d===0?o:null;if(u){for(T=0;T<z;T+=1)ce[T].a?.measure();for(T=0;T<z;T+=1)ce[T].a?.fix()}Ul(n,ce,ne)}}u&&Ln(()=>{if(A!==void 0)for(C of A)C.a?.apply()}),t.first=n.first&&n.first.e,t.last=_&&_.e;for(var G of r.values())lt(G.e);r.clear()}function As(t,e,n,r){(r&ta)!==0&&qt(t.v,e),(r&na)!==0?qt(t.i,n):t.i=n}function Ns(t,e,n,r,o,s,i,l,c,u,f){var d=(c&ta)!==0,h=(c&Wi)===0,m=d?h?La(o,!1,!1):Yt(o):o,g=(c&na)===0?i:Yt(i),w={i:g,v:m,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var _=document.createDocumentFragment();_.append(t=dn())}return w.e=St(()=>l(t,m,g,u),el),w.e.prev=n&&n.e,w.e.next=r&&r.e,n===null?f||(e.first=w):(n.next=w,n.e.next=w.e),r!==null&&(r.prev=w,r.e.prev=w.e),w}finally{}}function ya(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var i=Cr(s);o.before(s),s=i}}function xt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Ce(t,e,...n){var r=new la(t);lr(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...n)))},un)}function ql(t,e,n){var r=new la(t);lr(()=>{var o=e()??null;r.ensure(o,o&&(s=>n(s,o)))},un)}function Ms(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=Ms(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Kl(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=Ms(t))&&(r&&(r+=" "),r+=e);return r}function pe(t){return typeof t=="object"?Kl(t):t??""}const Po=[...` 	
\r\f \v\uFEFF`];function Yl(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||Po.includes(r[i-1]))&&(l===r.length||Po.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Gl(t,e){return t==null?null:String(t)}function _e(t,e,n,r,o,s){var i=t.__className;if(i!==n||i===void 0){var l=Yl(n,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function Nn(t,e,n,r){var o=t.__style;if(o!==e){var s=Gl(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Xl=Symbol("is custom element"),Zl=Symbol("is html");function nv(t,e){var n=no(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function rv(t,e){var n=no(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Re(t,e,n,r){var o=no(t);o[e]!==(o[e]=n)&&(e==="loading"&&(t[Mi]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Jl(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function no(t){return t.__attributes??(t.__attributes={[Xl]:t.nodeName.includes("-"),[Zl]:t.namespaceURI===Qi})}var Do=new Map;function Jl(t){var e=t.getAttribute("is")||t.nodeName,n=Do.get(e);if(n)return n;Do.set(e,n=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Vo(o);for(var i in r)r[i].set&&n.push(i);o=Ga(o)}return n}function Ql(t,e,n=e){var r=new WeakSet;yl(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=ba(t)?Sa(s):s,n(s),Pe!==null&&r.add(Pe),await Ts(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),Ot(e)==null&&t.value&&(n(ba(t)?Sa(t.value):t.value),Pe!==null&&r.add(Pe)),sa(()=>{var o=e();if(t===document.activeElement){var s=Br??Pe;if(r.has(s))return}ba(t)&&o===Sa(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function ba(t){var e=t.type;return e==="number"||e==="range"}function Sa(t){return t===""?null:+t}function Ao(t,e){return t===e||t?.[Pn]===e}function Je(t={},e,n,r){return kl(()=>{var o,s;return sa(()=>{o=s,s=[],Ot(()=>{t!==n(...s)&&(e(t,...s),o&&Ao(n(...o),t)&&e(null,...o))})}),()=>{Ln(()=>{s&&Ao(n(...s),t)&&e(null,...s)})}}),t}function ua(t=!1){const e=De,n=e.l.u;if(!n)return;let r=()=>Ml(e.s);if(t){let o=0,s={};const i=Sr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>a(i)}n.b.length&&Cl(()=>{No(e,r),ka(n.b)}),Ae(()=>{const o=Ot(()=>n.m.map(Pi));return()=>{for(const s of o)typeof s=="function"&&s()}}),n.a.length&&Ae(()=>{No(e,r),ka(n.a)})}function No(t,e){if(t.l.s)for(const n of t.l.s)a(n);e()}let Ir=!1;function $l(t){var e=Ir;try{return Ir=!1,[t(),Ir]}finally{Ir=e}}function we(t,e,n,r){var o=!sr||(n&Ki)!==0,s=(n&Gi)!==0,i=(n&Xi)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?Ot(r):r),l),f;if(s){var d=Pn in t||Ni in t;f=qn(t,e)?.set??(d&&e in t?E=>t[e]=E:void 0)}var h,m=!1;s?[h,m]=$l(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=u(),f&&(o&&zi(),f(h)));var g;if(o?g=()=>{var E=t[e];return E===void 0?u():(c=!0,E)}:g=()=>{var E=t[e];return E!==void 0&&(l=void 0),E===void 0?l:E},o&&(n&Yi)===0)return g;if(f){var w=t.$$legacy;return(function(E,y){return arguments.length>0?((!o||!y||w||m)&&f(y?g():E),E):g()})}var _=!1,A=((n&qi)!==0?Sr:aa)(()=>(_=!1,g()));s&&a(A);var D=Se;return(function(E,y){if(arguments.length>0){const k=y?a(A):o&&s?Xe(E):E;return v(A,k),_=!0,l!==void 0&&(l=k),E}return In&&_||(D.f&Wt)!==0?A.v:a(A)})}function Ee(t){De===null&&qo(),sr&&De.l!==null?ec(De).m.push(t):Ae(()=>{const e=Ot(t);if(typeof e=="function")return e})}function ec(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const tc="5";var Ho;typeof window<"u"&&((Ho=window.__svelte??(window.__svelte={})).v??(Ho.v=new Set)).add(tc);rl();const Ls={};function nc(t){je(Ls,t)}function Is(){const t=He(Ls);if(!t)throw new Error("No FeedSearchContext found");return t}const Os={};function rc(t){je(Os,t)}function kt(){const t=He(Os);if(!t)throw new Error("No AppHistoryContext found");return t}function ac(t,e){ie(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=kt(),s="feedSearch",i=M(()=>o().searchParams.get(s)||""),l=M(()=>a(i));nc({getFeedSearch:()=>a(l),setFeedSearch:f=>{f===""?r(s):n(s,f)}});var c=Q(),u=B(c);Ce(u,()=>e.children??xe),p(t,c),le()}const Rs={};function oc(t){je(Rs,t)}function sc(){const t=He(Rs);if(!t)throw new Error("No TagsSearchContext found");return t}function ic(t,e){ie(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=kt(),s="tagsSearch",i=M(()=>o().searchParams.get(s)||""),l=M(()=>a(i));oc({getTagsSearch:()=>a(l),setTagsSearch:f=>{f===""?r(s):n(s,f)}});var c=Q(),u=B(c);Ce(u,()=>e.children??xe),p(t,c),le()}const Bs={};function lc(t){je(Bs,t)}function zs(){const t=He(Bs);if(!t)throw new Error("No FeedOrderContext found");return t}function cc(t,e){ie(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=kt(),s="feedOrder",i=M(()=>o().searchParams.get(s)||"newest"),l=M(()=>a(i));lc({getFeedOrder:()=>a(l),setFeedOrder:f=>{f==="newest"?r(s):n(s,f)}});var c=Q(),u=B(c);Ce(u,()=>e.children??xe),p(t,c),le()}const Fs={};function uc(t){je(Fs,t)}function da(){const t=He(Fs);if(!t)throw new Error("No SidebarContext found");return t}function dc(t,e){ie(e,!0);const n=(f,d)=>{if(!d)return f;if(d.type==="closed")return{type:"closed"};switch(f.type){case"opened":return d.type==="open"?{type:"opening"}:d.type==="close"?{type:"closing"}:d.type==="swipe"?{type:"openSwiping"}:f;case"closed":return d.type==="open"?{type:"opening"}:d.type==="swipe"?{type:"closeSwiping"}:f;case"openSwiping":return d.type==="open"?{type:"opening"}:d.type==="close"?{type:"closing"}:f;case"closeSwiping":return d.type==="open"?{type:"opening"}:d.type==="close"?{type:"closing"}:f;case"opening":return d.type==="opened"?{type:"opened"}:f;default:return f}};let r=j(Xe(n({type:"closed"})));const o=f=>{const d=Ot(()=>a(r));v(r,n(d,f),!0)};uc({sidebarOpen:()=>{o({type:"open"})},sidebarClose:()=>{o({type:"close"})},handleComputeState:o,getSidebarState:()=>a(r)});var c=Q(),u=B(c);Ce(u,()=>e.children??xe),p(t,c),le()}const Hs={};function fc(t){je(Hs,t)}function ro(){const t=He(Hs);if(!t)throw new Error("No SelectedTagsContext found");return t}function vc(t,e){ie(e,!0);const{getAppLocation:n,setSearchParam:r,deleteSearchParam:o}=kt(),s=M(n),i=M(()=>a(s).searchParams),l="selectedTags";let c=M(()=>a(i).get(l)||""),u=M(()=>new Set(a(c).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));fc({getSelectedTags:()=>a(u),addTag:_=>{a(u).has(_)||r(l,[...a(u),_].map(A=>encodeURIComponent(A)).join(","))},removeTag:_=>{a(u).has(_)&&a(u).size===1?o(l):a(u).has(_)&&r(l,[...a(u)].filter(A=>A!==_).map(A=>encodeURIComponent(A)).join(","))},clearTags:()=>{o(l)}});var g=Q(),w=B(g);Ce(w,()=>e.children??xe),p(t,g),le()}const js={};function hc(t){je(js,t)}function ao(){const t=He(js);if(!t)throw new Error("No LocalDBContext found");return t}const Vs={};function gc(t){je(Vs,t)}function pc(){const t=He(Vs);if(!t)throw new Error("No SettingsContext found");return t}const Us={};function _c(t){je(Us,t)}function fa(){const t=He(Us);if(!t)throw new Error("No BroadcastContext found");return t}const mc="AppStorage",wc=1,ur="account",Hr="settings",Qe="notes",en="tags",yc="syncLog",hn="success",Gt="error",Ve=(t,e,n)=>{t?.addEventListener(e,n)},Mo=(t,e)=>new Promise((n,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();Ve(s,hn,()=>{const i=s?.result||[];n(i)}),Ve(s,Gt,i=>{r(i)})}),Yr=(t,e,n)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);Ve(i,hn,()=>{const l=i?.result?.data;r(l)}),Ve(i,Gt,l=>{o(l)})}),Gr=(t,e,n,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:r});Ve(c,hn,()=>{o()}),Ve(c,Gt,u=>{s(u)})}),_n=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{Ve(i,hn,()=>{l()}),Ve(i,Gt,u=>{c(u)})})}))},bc=(t,e,n)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);Ve(l,hn,()=>{r()}),Ve(l,Gt,c=>{o(c)})}),Or=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{Ve(i,hn,()=>{l()}),Ve(i,Gt,u=>{c(u)})})}))},Wn=(t,e)=>new Promise((n,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();Ve(i,hn,()=>{n()}),Ve(i,Gt,l=>{r(l)})});function Sc(t,e){ie(e,!0);let n=j(Xe({showFavicon:!0}));const{getDB:r}=ao(),{createBroadcastChannel:o,tabId:s}=fa(),i=o(),l=M(r),c=async()=>{const w=await Yr(a(l),Hr,"default");w&&v(n,w,!0)},u=async()=>{c()},f=async w=>{const _=JSON.parse(w.data),A=_;if(_.tabId&&_.tabId===s){A.type==="exit"&&(v(n,{showFavicon:!0},!0),Wn(a(l),Hr));return}A.type==="updateSettings"?c():A.type==="exit"&&v(n,{showFavicon:!0},!0)},d=()=>a(n).showFavicon,h=async w=>{a(n).showFavicon=w,await Gr(a(l),Hr,"default",{showFavicon:w}),i.postMessage({type:"updateSettings"})};Ee(()=>(u(),i.addEventListener(f),()=>{i.removeEventListener(f)})),gc({getFaviconEnabled:d,setFaviconShown:h});var m=Q(),g=B(m);Ce(g,()=>e.children??xe),p(t,m),le()}const Ws={};function Cc(t){je(Ws,t)}function qs(){const t=He(Ws);if(!t)throw new Error("No AccountContext found");return t}function Ec(t,e){ie(e,!0);let n=j(void 0);const{getDB:r}=ao(),{createBroadcastChannel:o,tabId:s}=fa(),i=M(r),l=o(),c=async()=>{const E=await Yr(a(i),ur,"default");v(n,E,!0)},u=E=>Gr(a(i),ur,"default",E),f=async E=>{const y=await Yr(a(i),ur,"default");y!==void 0&&v(n,y,!0),E(y)},d=async E=>{const y=JSON.parse(E.data);if(y.tabId&&y.tabId===s)return;const k=y;k.type==="initLocalAccount"?v(n,null):k.type==="initCloudAccount"?c():k.type==="disconnectCloudAccount"?v(n,null):k.type==="exit"?v(n,void 0):k.type==="updateAccount"&&c()};Ee(()=>(l.addEventListener(d),()=>{l.removeEventListener(d)})),Cc({init:f,getAccount:()=>a(n),initLocalAccount:async()=>{v(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async E=>{const y={encryptedClientKey:E.encryptedClientKey||"",subscriptionExpires:E.subscriptionExpires||-1,lastSync:-1};await u(y),v(n,y,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{v(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async E=>{if(!a(n))throw new Error("No account to update subscription for");const y={...a(n),subscriptionExpires:E};await u(y),l.postMessage({type:"updateAccount"})},exitApp:async()=>{v(n,void 0),l.postMessage({type:"exit"}),await Wn(a(i),ur)}});var A=Q(),D=B(A);Ce(D,()=>e.children??xe),p(t,A),le()}const Ks={};function kc(t){je(Ks,t)}function Jt(){const t=He(Ks);if(!t)throw new Error("No NotesContext found");return t}const Ca=()=>crypto.randomUUID(),Tc=t=>{const e=new Set;for(const n of t||[])for(const r of n?.data.tags||[])e.add(r);return e};function xc(t,e){ie(e,!0);const{getDB:n}=ao(),{createBroadcastChannel:r,tabId:o}=fa(),s=M(n),i=r(),l=720*60*60*1e3;let c=j(!1),u=j(()=>new Map),f=j(()=>[]),d=j(()=>new Map);const h=()=>a(c),m=()=>a(f)().some(S=>S.data&&S.data.deletedAt),g=()=>a(f)().some(S=>S.data&&S.data.archivedAt),w=S=>{const L=a(f)(),P=a(d)(),R=P.get(S.id);R?R.data=S.data:(L.push(S),P.set(S.id,S)),v(f,()=>L),v(d,()=>P)},_=S=>{const L=a(f)(),P=a(d)(),R=P.get(S);P.has(S)&&P.delete(S),R&&(R.data=void 0),v(f,()=>L),v(d,()=>P)},A=S=>{const L=a(f)(),P=a(d)();for(const R of S){const H=P.get(R);P.has(R)&&P.delete(R),H&&(H.data=void 0)}v(f,()=>L),v(d,()=>P)},D=()=>{v(f,()=>[]),v(u,()=>new Map),v(d,()=>new Map)},E=()=>a(f),y=S=>{const L=a(u)();for(const P of S)L.get(P)||L.set(P,{name:P});v(u,()=>L)},k=async()=>{const[S,L]=await Promise.all([Mo(a(s),Qe),Mo(a(s),en).then(oe=>oe.reduce((Ne,qe)=>Ne.set(qe.id,qe.data),new Map))]),P=[],R=[],H=new Map;for(const oe of S)oe.data.deletedAt&&Date.now()-oe.data.deletedAt>l?P.push(oe.id):(R.push(oe),H.set(oe.id,oe));const V=Tc(R),be=[],Ie=new Map(L);V.values().forEach(oe=>{Ie.set(oe,{name:oe,pinned:L.get(oe)?.pinned||!1}),L.has(oe)||be.push(oe)});const ge=[];L.keys().forEach(oe=>{V.has(oe)||ge.push(oe)}),await Or(a(s),Qe,P),await Or(a(s),en,ge),await _n(a(s),en,be.map(oe=>({id:oe,data:{pinned:Ie.get(oe)?.pinned||!1}}))),v(f,()=>R),v(d,()=>H),v(u,()=>Ie),v(c,!0)},C=async S=>{const L=a(u)(),P=S.data.tags.filter(R=>!L.has(R))||[];return await Gr(a(s),Qe,S.id,{...S.data}),P.length>0&&(await _n(a(s),en,P.map(R=>({id:R,data:{pinned:!1}}))||[]),y(P)),w(S),i.postMessage({type:"putNote",data:{id:S.id}}),S.id},T=async({url:S,name:L,text:P,tags:R})=>{const H={id:Ca(),data:{url:S,name:L,text:P,tags:R,history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await C(H),H.id},x=async(S,{url:L,name:P,text:R,tags:H})=>{const V=re(S);if(!V||!V.data)return;const be={id:S,data:{...V.data,url:L,name:P,text:R,tags:H,updatedAt:Date.now()}};await C(be)},I=async(S,{url:L,name:P,text:R,tags:H})=>{const V=re(S);if(!V||!V.data)return;const be=Ca(),Ie={id:S,data:{...V.data,url:L,name:P,text:R,tags:H,updatedAt:Date.now(),history:[...(V.data.history||[]).slice(-49),{id:be,name:V.data.name,url:V.data.url,text:V.data.text,tags:V.data.tags,updatedAt:V.data.updatedAt}]}};return await C(Ie),be},Y=async(S,L)=>{const P=re(S);if(!P||!P.data)return;const R=P.data.history?.find?.(V=>V.id===L);if(!R)return;const H={id:S,data:{...P.data,url:R.url,name:R.name,text:R.text,tags:R.tags,updatedAt:R.updatedAt,history:P.data.history?.filter?.(V=>V.id!==L)||[]}};await C(H)},X=async S=>{const P=a(d)().get(S);!P||!P.data||(_(S),await bc(a(s),Qe,S),i.postMessage({type:"deleteNote",data:{id:S}}))},O=async S=>{A(S),await Or(a(s),Qe,S),i.postMessage({type:"reloadNotes"})},ae=async()=>{await Wn(a(s),Qe),await Wn(a(s),en),D(),i.postMessage({type:"clearNotes"})},re=S=>a(d)().get(S),ce=async(S,L)=>{const R=a(d)().get(S);if(!R||!R.data)return;const H={id:S,data:{...R.data,pinnedAt:L?Date.now():void 0}};C(H)},z=async S=>{const P=a(d)().get(S);if(!P||!P.data)return;const R={id:S,data:{...P.data,deletedAt:Date.now()}};await C(R)},ne=async S=>{const L=a(d)(),P=a(f)(),R=[];P.forEach(H=>{H.data&&S.every(V=>H?.data?.tags.includes(V))&&R.push(H.id)});for(const H of R){const V=L.get(H);V?.data&&(V.data.deletedAt=Date.now())}await _n(a(s),Qe,R.map(H=>{const V=L.get(H);return{id:H,data:V?.data}})),i.postMessage({type:"reloadNotes"}),v(d,()=>L),v(f,()=>P)},G=async S=>{const L=a(d)(),P=a(f)(),R=[];P.forEach(H=>{H.data&&S.every(V=>H?.data?.tags.includes(V))&&R.push(H.id)});for(const H of R){const V=L.get(H);V?.data&&(V.data.deletedAt=0)}await _n(a(s),Qe,R.map(H=>{const V=L.get(H);return{id:H,data:V?.data}})),i.postMessage({type:"reloadNotes"}),v(d,()=>L),v(f,()=>P)},W=async S=>{const P=a(d)().get(S);if(!P||!P.data)return;const R={id:S,data:{...P.data,deletedAt:0}};await C(R)},J=async(S,L)=>{const P=a(u)();P.set(S,{name:S,pinned:L}),await Gr(a(s),en,S,{pinned:L}),i.postMessage({type:"pinTag",data:{tag:S,pinned:L}}),v(u,()=>P)},he=async S=>{const L=a(u)(),P=a(f)(),R=[];P.forEach(H=>{H.data&&S.every(V=>H?.data?.tags.includes(V))&&R.push(H.id)}),await O(R),v(f,()=>P),v(u,()=>L)},te=async S=>{const L=a(d)(),P={};S.forEach(R=>{const H=L.get(R.id),V=[];if(H&&H.data){let be=0,Ie=0;for(;be<R.data.history.length&&Ie<H.data.history.length;){const ge=R.data.history[be],oe=H.data.history[Ie];ge.id===oe.id?(ge.updatedAt>oe.updatedAt?V.push(ge):V.push(oe),be+=1,Ie+=1):ge.updatedAt<oe.updatedAt?(V.push(ge),be+=1):ge.updatedAt>oe.updatedAt?(V.push(oe),Ie+=1):(V.push(oe),be+=1,Ie+=1)}H.data.updatedAt>R.data.updatedAt?P[H.id]={id:H.id,data:{...H.data,history:V}}:P[R.id]={id:R.id,data:{...R.data,history:V}}}else P[R.id]=R}),await _n(a(s),Qe,Object.values(P)),await k(),i.postMessage({type:"reloadNotes"})},F=async()=>{const S=[];a(f)().forEach(P=>{P&&P.data&&P.data.deletedAt&&S.push(P.id)}),await Or(a(s),Qe,S),await k(),i.postMessage({type:"emptyBin"})},$=async(S,L=[])=>{const P=a(d)(),R=a(f)(),H=[];R.forEach(ge=>{ge.data&&ge?.data?.tags.includes(S)&&L.every(oe=>ge?.data?.tags.includes(oe))&&H.push(ge.id)});const V=[],be=[];for(const ge of H){const oe=P.get(ge);oe?.data&&(V.push({id:ge,data:{...oe.data}}),be.push({id:ge,data:{...oe.data,tags:oe.data.tags.filter(Ne=>Ne!==S),history:[...oe.data.history||[],{id:Ca(),name:oe.data.name,url:oe.data.url,text:oe.data.text,tags:oe.data.tags,updatedAt:Date.now()}]}}))}for(const ge of be){const oe=P.get(ge.id);oe?.data&&(oe.data=ge.data)}return await _n(a(s),Qe,be.map(ge=>({id:ge.id,data:ge.data}))),i.postMessage({type:"reloadNotes"}),v(d,()=>P),v(f,()=>R),{cancel:async()=>{for(const ge of V){const oe=P.get(ge.id);oe?.data&&(oe.data=ge.data)}await _n(a(s),Qe,V.map(ge=>({id:ge.id,data:ge.data}))),i.postMessage({type:"reloadNotes"}),v(d,()=>P),v(f,()=>R)}}},Z=async S=>{const L=JSON.parse(S.data),P=L;if(L.tabId&&L.tabId===o){P.type==="exit"&&(D(),await Wn(a(s),Qe),await Wn(a(s),en));return}if(P.type==="putNote"){const H=P.data.id;if(!H)return;const V=await Yr(a(s),Qe,H);if(!V)return;w(V)}else if(P.type==="deleteNote"){const R=P.data.id;if(!R)return;_(R)}else if(P.type==="pinTag"){const R=P.data.tag,H=P.data.pinned,V=a(u)();V.set(R,{name:R,pinned:H}),v(u,()=>V)}else P.type==="clearNotes"?D():P.type==="reloadNotes"||P.type==="emptyBin"?k():P.type==="exit"&&D()};Ee(()=>(k(),i.addEventListener(Z),()=>{i.removeEventListener(Z)})),kc({isInitedNotes:h,createNote:T,updateNote:x,deleteNote:X,saveNote:I,revertNote:Y,pinNote:ce,moveNoteToBin:z,getGetNotes:E,importNotes:te,clearNotes:ae,getNoteById:re,getGetMapTags:()=>a(u),pinTag:J,restoreNoteFromBin:W,checkNotesInBin:m,checkNotesInArchive:g,emptyBin:F,moveNotesToBinByTags:ne,deleteNotesByTags:he,restoreNotesFromBinByTags:G,deleteTag:$});var se=Q(),ve=B(se);Ce(ve,()=>e.children??xe),p(t,se),le()}const Ys={},Pc=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function Dc(t){je(Ys,t)}function gn(){const t=He(Ys);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Ac(t,e){ie(e,!0);let n=Xe(Pc());Dc(n);var r=Q(),o=B(r);Ce(o,()=>e.children??xe),p(t,r),le()}const Gs={};function Nc(t){je(Gs,t)}function oo(){const t=He(Gs);if(!t)throw new Error("No ScrollingContext found");return t}const Xs=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function av(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}function Mc(t,e){ie(e,!0);let n=j(!1);const r=()=>a(n),o=Xs(()=>{v(n,!1)},100);Nc({isScrolling:r,enable:()=>{v(n,!0),o()}});var i=Q(),l=B(i);Ce(l,()=>e.children??xe),p(t,i),le()}const Zs={};function Lc(t){je(Zs,t)}function Qt(){const t=He(Zs);if(!t)throw new Error("No MobileSizeContext found");return t}function Ic(t,e){ie(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let r=j(Xe(n())),o=gn();const s=Xs(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{v(r,n(),!0)})};Lc({checkMobileSize:()=>a(r)}),Ee(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=Q(),u=B(c);Ce(u,()=>e.children??xe),p(t,c),le()}const Js={};function Oc(t){je(Js,t)}function pn(){const t=He(Js);if(!t)throw new Error("No DialogContext found");return t}function Rc(t,e){ie(e,!0);let n=j(0),r=j(!1),o=j(!0);Oc({checkExistedDialog:()=>a(n)>0,showDialog:()=>{v(n,a(n)+1)},hideDialog:()=>{v(n,a(n)-1)},blockDialog:g=>{v(r,g,!0)},checkBlockedDialog:()=>a(r),setClosableDialog:g=>{v(o,g,!0)},checkClosableDialog:()=>a(o)});var h=Q(),m=B(h);Ce(m,()=>e.children??xe),p(t,h),le()}const Qs={};function Bc(t){je(Qs,t)}function va(){const t=He(Qs);if(!t)throw new Error("No ScrollContainerContext found");return t}function zc(t,e){ie(e,!0);let n=j(null);Bc({setScrollContainer:l=>{v(n,l,!0)},getScrollContainer:()=>a(n)});var s=Q(),i=B(s);Ce(i,()=>e.children??xe),p(t,s),le()}const $s={};function Fc(t){je($s,t)}function so(){const t=He($s);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Hc(t,e){ie(e,!0);let n=j(200);Fc({setDialogPageHeight:l=>{v(n,l,!0)},getDialogPageHeight:()=>a(n)});var s=Q(),i=B(s);Ce(i,()=>e.children??xe),p(t,s),le()}const jc=[ur,Hr,Qe,en,yc];function Vc(){return new Promise((t,e)=>{const n=indexedDB.open(mc,wc);Ve(n,"upgradeneeded",()=>{const r=n.result;for(const o of jc)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),Ve(n,hn,()=>{const r=n.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),Ve(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),Ve(n,Gt,()=>{e(),console.error(Gt,n.error)})})}function Uc(t,e){ie(e,!0);let n=j(null);Ee(()=>{Vc().then(l=>{v(n,l,!0)}).catch(l=>{console.error("Failed to initialize LocalDB:",l)})}),hc({getDB:()=>a(n)});var o=Q(),s=B(o);{var i=l=>{var c=Q(),u=B(c);Ce(u,()=>e.children??xe),p(l,c)};q(s,l=>{a(n)&&l(i)})}p(t,o),le()}const yt="dialogPages",ei={};function Wc(t){je(ei,t)}function wt(){const t=He(ei);if(!t)throw new Error("No DialogPagesContext found");return t}function qc(t,e){ie(e,!0);const{getAppLocation:n,setSearchParam:r,deleteSearchParam:o}=kt(),s=M(n),i=M(()=>a(s).searchParams);let l=M(()=>a(i).get(yt)||""),c=M(()=>a(l).split(",").map(y=>decodeURIComponent(y)).filter(y=>y!==""));const u=()=>a(c),f=y=>{if(y.length===0){o(yt);return}r(yt,y.map(k=>encodeURIComponent(k)).join(","))},d=y=>{r(yt,[...a(c),y].map(k=>encodeURIComponent(k)).join(","))};Wc({setDialogPages:f,getDialogPages:u,pushDialogPage:d,popDialogPage:()=>{const y=a(c)[a(c).length-1];return a(c).length<=1?(o(yt),y):(r(yt,a(c).slice(0,-1).map(k=>encodeURIComponent(k)).join(",")),y)},replaceDialogPage:y=>{r(yt,[...a(c).slice(0,-1),y].map(k=>encodeURIComponent(k)).join(","))},hasDialogPage:y=>a(c).find(k=>{const[C]=k.split("?");return C===y})!==void 0,clearDialogPages:()=>{o(yt)},createDialogPageHref:y=>{const k=new URLSearchParams(a(s).searchParams.toString());return k.set(yt,[...u(),y].map(C=>encodeURIComponent(C)).join(",")),`${a(s).pathname}?${k.toString()}`},createHandleClickDialogPage:y=>k=>{k.preventDefault(),d(y)}});var D=Q(),E=B(D);Ce(E,()=>e.children??xe),p(t,D),le()}function Kc(t,e){ie(e,!0);const n=f=>f.startsWith("/")?f:`/${f}`,r=f=>{const[d,h]=f.split("?");return{href:n(f),pathname:n(d),search:h?`?${h}`:"",searchParams:new URLSearchParams(h)}};let o=j(Xe({href:`${n(window.location.pathname)}${window.location.search}`,pathname:n(window.location.pathname),search:window.location.search,searchParams:new URLSearchParams(window.location.search)}));const s=f=>{v(o,r(f),!0),window.history.replaceState(null,"",f)};rc({getAppLocation:()=>a(o),replace:s,setSearchParam:(f,d)=>{const h=a(o).searchParams;h.set(f,d),s(`${a(o).pathname}${h.size>0?`?${h.toString()}`:""}`)},deleteSearchParam:f=>{const d=a(o).searchParams;d.delete(f),s(`${a(o).pathname}${d.size>0?`?${d.toString()}`:""}`)}});var c=Q(),u=B(c);Ce(u,()=>e.children??xe),p(t,c),le()}const ti={};function Yc(t){je(ti,t)}function ni(){const t=He(ti);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Gc(t,e){ie(e,!0);let n=Xe({value:!1});const r=()=>n.value;Ee(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),Yc({getIsKeyboardVisible:r});var o=Q(),s=B(o);Ce(s,()=>e.children??xe),p(t,o),le()}function Xc(t,e){ie(e,!0);const n=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};_c({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=Q(),s=B(o);Ce(s,()=>e.children??xe),p(t,o),le()}function Zc(t,e){Uc(t,{children:(n,r)=>{Xc(n,{children:(o,s)=>{Ac(o,{children:(i,l)=>{Mc(i,{children:(c,u)=>{Ic(c,{children:(f,d)=>{Rc(f,{children:(h,m)=>{zc(h,{children:(g,w)=>{Hc(g,{children:(_,A)=>{Gc(_,{children:(D,E)=>{Kc(D,{children:(y,k)=>{qc(y,{children:(C,T)=>{var x=Q(),I=B(x);Ce(I,()=>e.children??xe),p(C,x)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Jc(t,e){Zc(t,{children:(n,r)=>{ic(n,{children:(o,s)=>{ac(o,{children:(i,l)=>{cc(i,{children:(c,u)=>{dc(c,{children:(f,d)=>{vc(f,{children:(h,m)=>{Sc(h,{children:(g,w)=>{Ec(g,{children:(_,A)=>{xc(_,{children:(D,E)=>{var y=Q(),k=B(y);Ce(k,()=>e.children??xe),p(D,y)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let tn=j(""),mn=j(null),dr=j(null),fr=j(null);function fn(t,e){v(tn,""),setTimeout(()=>{v(tn,t,!0),e?.onFinish&&v(dr,e.onFinish,!0),e?.onCancel&&v(fr,e.onCancel,!0)},16)}const Qc=(t,e,n,r,o)=>{t.preventDefault(),a(e)&&(v(n,null),a(e)(),v(e,null)),v(r,""),a(o)?.style.removeProperty("opacity")};var $c=K('<button type="button" class="undoButton svelte-1vxmgq5">undo</button>'),eu=K('<div class="notification svelte-1vxmgq5"><span> </span> <!></div>'),tu=K("<div><!></div>");function nu(t,e){ie(e,!0),Ae(()=>{a(tn);const s=a(fr)?2e3:800;a(tn)&&(a(mn)?.getBoundingClientRect(),a(mn)?.style.setProperty("opacity","1"));const i=setTimeout(()=>{a(mn)?.style.removeProperty("opacity")},s),l=setTimeout(()=>{v(tn,""),a(dr)&&a(dr)(),v(dr,null),v(fr,null),a(mn)?.style.removeProperty("opacity")},s+400);return()=>{clearTimeout(i),clearTimeout(l)}});var n=tu(),r=b(n);{var o=s=>{var i=eu(),l=b(i),c=b(l),u=U(l,2);{var f=d=>{var h=$c();h.__click=[Qc,fr,dr,tn,mn],p(d,h)};q(u,d=>{a(fr)&&d(f)})}Je(i,d=>v(mn,d),()=>a(mn)),de(()=>ln(c,a(tn))),p(s,i)};q(r,s=>{a(tn)&&s(o)})}p(t,n),le()}Ge(["click"]);var ru=K('<span class="vh svelte-s92gzo"><!></span>');function Ue(t,e){var n=ru(),r=b(n);Ce(r,()=>e.children),p(t,n)}var au=Bl('<svg class="svelte-18et5h9"><use></use></svg>');function me(t,e){let n=we(e,"name",8,"");var r=au(),o=b(r);de(()=>Re(o,"href",`#icon-${n()??""}`)),p(t,r)}const ou=(t,e,n,r,o)=>{if(a(e))return;const s=n().type;s==="closed"?r():s==="opened"&&o()};var su=K('<button class="buttonMenu svelte-bpktnw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ri(t,e){ie(e,!0);const{sidebarOpen:n,getSidebarState:r,sidebarClose:o}=da(),{getDialogPages:s}=wt(),{checkExistedDialog:i}=pn();let l=M(()=>s().length>0||i());var c=su();c.__click=[ou,l,r,n,o];var u=b(c);ue(u,()=>({"--size":"32px"})),me(u.lastChild,{name:"sidebarMenu"});var f=U(u,2);Ue(f,{children:(d,h)=>{var m=Le("Menu");p(d,m)}}),p(t,c),le()}Ge(["click"]);var iu=(t,e)=>e.onChange?.(t.target?.value||""),lu=(t,e,n)=>{e(""),n.onChange?.("")},cu=K('<button class="clearButton svelte-15lr19w"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),uu=K('<div class="block svelte-15lr19w"><input class="svelte-15lr19w"/> <!></div>');function Ra(t,e){ie(e,!0);let n=we(e,"value",15,""),r=we(e,"ref",15,null);const o=u=>{u.key==="Escape"&&(n(""),e.onChange?.(""))};Ee(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=uu(),i=b(s);i.__input=[iu,e],Je(i,u=>r(u),()=>r());var l=U(i,2);{var c=u=>{var f=cu();f.__click=[lu,n,e];var d=b(f);ue(d,()=>({"--size":"20px"})),me(d.lastChild,{name:"close"});var h=U(d,2);Ue(h,{children:(m,g)=>{var w=Le("Clear");p(m,w)}}),p(u,f)};q(l,u=>{n()&&u(c)})}de(()=>Re(i,"placeholder",e.placeholder)),to("focus",i,function(...u){e.onFocus?.apply(this,u)}),Ql(i,n),p(t,s),le()}Ge(["input","click"]);function io(t,e){ie(e,!0),Ee(()=>{const n=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),le()}var du=K('<dialog><div class="dialogInner svelte-1x410nl"><!></div></dialog> <!>',1);function Er(t,e){ie(e,!0);let n=we(e,"onClosed",3,()=>{}),r=we(e,"blocked",3,!1),o=j(null),s=j(null),i=j(!1),{showDialog:l,hideDialog:c}=pn();const u=()=>{const _=setTimeout(()=>{n()()},150);a(o)?.addEventListener("transitionend",()=>{clearTimeout(_),n()()},{once:!0}),v(i,!1)};Ae(()=>{e.startClose&&u()}),Ee(()=>{a(o)?.showModal(),a(o)?.getClientRects(),v(i,!0);const _=A=>{A?.preventDefault(),r()||u()};return a(o)?.addEventListener("cancel",_),a(o)?.addEventListener("close",_),()=>{a(o)?.removeEventListener("cancel",_),a(o)?.removeEventListener("close",_)}}),Ee(()=>(l(),()=>{c()})),Ee(()=>{const _=A=>{A.key==="Escape"&&r()&&A.preventDefault()};return window.addEventListener("keydown",_),()=>{window.removeEventListener("keydown",_)}});var f=du(),d=B(f),h=b(d),m=b(h);Ce(m,()=>e.children),Je(h,_=>v(s,_),()=>a(s)),Je(d,_=>v(o,_),()=>a(o));var g=U(d,2);{var w=_=>{io(_,{get dialog(){return a(o)},get dialogInner(){return a(s)},onClose:u})};q(g,_=>{a(o)&&a(s)&&!r()&&_(w)})}de(()=>_e(d,1,pe(["dialog",{shown:a(i)}]),"svelte-1x410nl")),p(t,f),le()}var fu=K("<div><!></div>");function ha(t,e){ie(e,!0);let n=we(e,"transformOrigin",3,"top right"),r=j(!1),o=j(null);const s=()=>{const d=setTimeout(()=>{e.onClosed()},150);a(o)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),v(r,!1)},i=d=>{d.target!==a(o)&&!a(o)?.contains(d.target)&&s()},l=d=>{d.target!==a(o)&&!a(o)?.contains(d.target)&&s()},c=d=>{d.key==="Escape"&&s()};Ee(()=>{a(o)?.getClientRects(),v(r,!0);const d=setTimeout(()=>{document.addEventListener("focusin",i),document.addEventListener("click",l),document.addEventListener("keydown",c)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",i),document.removeEventListener("click",l),document.removeEventListener("keydown",c)}}),Ae(()=>{e.startClose&&s()});var u=fu(),f=b(u);Ce(f,()=>e.children),Je(u,d=>v(o,d),()=>a(o)),de(()=>{Nn(u,`transform-origin: ${e.positionTop?"top right":n()};`),_e(u,1,pe(["menu",{top:e.positionTop,shown:a(r)}]),"svelte-ujw4xi")}),p(t,u),le()}const vu=(t,e)=>{a(e)||v(e,!0)};var hu=(t,e)=>e("newest"),gu=(t,e)=>e("oldest"),pu=(t,e)=>e("AtoZ"),_u=(t,e)=>e("ZtoA"),mu=K("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),wu=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),yu=K('<div class="orderMenu svelte-14zj87s"><button><!> <!></button> <!></div>');function bu(t,e){ie(e,!0);const n=(D,E=xe)=>{var y=mu(),k=b(y);k.__click=[hu,f];var C=U(k,2);C.__click=[gu,f];var T=U(C,2);T.__click=[pu,f];var x=U(T,2);x.__click=[_u,f],de(()=>{_e(y,1,pe(["menu",{menuDialog:E()}]),"svelte-14zj87s"),_e(k,1,pe(["menuButton",{menuButtonDialog:E(),current:a(u)==="newest"}]),"svelte-14zj87s"),_e(C,1,pe(["menuButton",{menuButtonDialog:E(),current:a(u)==="oldest"}]),"svelte-14zj87s"),_e(T,1,pe(["menuButton",{menuButtonDialog:E(),current:a(u)==="AtoZ"}]),"svelte-14zj87s"),_e(x,1,pe(["menuButton",{menuButtonDialog:E(),current:a(u)==="ZtoA"}]),"svelte-14zj87s")}),p(D,y)};let r=j(!1),o=j(!1);const{checkMobileSize:s}=Qt(),{getFeedOrder:i,setFeedOrder:l}=zs();let c=M(s),u=M(i);const f=D=>{v(o,!0),l(D)},d=()=>{v(r,!1),v(o,!1)};Ee(()=>{const D=E=>{E.key==="Escape"&&v(o,!0)};return document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)});var h=yu(),m=b(h);m.__click=[vu,r],_e(m,1,pe(["button","buttonMenu"]),"svelte-14zj87s");var g=b(m);me(g,{name:"filter"});var w=U(g,2);Ue(w,{children:(D,E)=>{var y=Le("show feed order menu");p(D,y)}});var _=U(m,2);{var A=D=>{var E=Q(),y=B(E);{var k=T=>{Er(T,{get startClose(){return a(o)},onClosed:d,children:(x,I)=>{n(x,()=>!0)},$$slots:{default:!0}})},C=T=>{var x=wu(),I=B(x);ue(I,()=>({"--right":"20px","--top":"60px"})),ha(I.lastChild,{get startClose(){return a(o)},onClosed:d,children:(Y,X)=>{n(Y,()=>!1)},$$slots:{default:!0}}),p(T,x)};q(y,T=>{a(c)?T(k):T(C,!1)})}p(D,E)};q(_,D=>{a(r)&&D(A)})}p(t,h),le()}Ge(["click"]);var ee=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t.Install="install",t.InstallSuccess="installSuccess",t.Welcome="welcome",t))(ee||{}),Su=K('<div><!> <div class="loader svelte-m0sno1"></div></div>');function lo(t,e){ie(e,!0);let n=j(!1);Ee(()=>{const s=setTimeout(()=>{v(n,!0)},200);return()=>{clearTimeout(s)}});var r=Su(),o=b(r);Ce(o,()=>e.children??xe),de(()=>_e(r,1,pe(["block",{shown:a(n)}]),"svelte-m0sno1")),p(t,r),le()}var Cu=K("<a><!></a>"),Eu=K("<button><!></button>");function cn(t,e){let n=we(e,"type",3,"standard"),r=we(e,"typeButton",3,"button"),o=we(e,"element",3,"button"),s=we(e,"href",3,""),i=we(e,"fullWidth",3,!1),l=we(e,"withoutMinWidth",3,!1);var c=Q(),u=B(c);{var f=h=>{var m=Cu();m.__click=function(...w){e.onClick?.apply(this,w)};var g=b(m);Ce(g,()=>e.children??xe),de(()=>{Re(m,"target",e.target),Re(m,"rel",e.rel),Re(m,"href",s()),_e(m,1,pe(["button","a",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),p(h,m)},d=h=>{var m=Eu();m.__click=function(...w){e.onClick?.apply(this,w)};var g=b(m);Ce(g,()=>e.children??xe),de(()=>{Re(m,"type",r()),_e(m,1,pe(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),p(h,m)};q(u,h=>{o()==="a"?h(f):h(d,!1)})}p(t,c)}Ge(["click"]);let Ba=j(!1),Rr=j(!1),za=j(""),Fa=j("Cancel"),Ha=j("Confirm"),ja,Va,Ua;function ga(t){v(Ba,!0),v(za,t.title,!0),t.buttonCancelTitle&&v(Fa,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&v(Ha,t.buttonConfirmTitle,!0),ja=t.onConfirm,Va=t.onCancel,Ua=t.onClosed}var ku=K('<span class="title svelte-1dzbsx4"> </span> <div class="controls svelte-1dzbsx4"><!> <!></div>',1),Tu=K('<div class="block svelte-1dzbsx4"><!></div>');function xu(t){let e=j(!1),n,r=!1;const o=()=>{n=setTimeout(()=>{v(e,!0)},250)},s=async()=>{o(),await Va?.(),v(Rr,!0)},i=async()=>{o(),await ja?.(),v(Rr,!0),r=!0},l=()=>{clearTimeout(n),v(e,!1),v(Ba,!1),v(Rr,!1),v(za,""),v(Fa,"Cancel"),v(Ha,"Confirm"),Va=void 0,ja=void 0,Ua&&Ua(r),r=!1};var c=Q(),u=B(c);{var f=d=>{Er(d,{get blocked(){return a(e)},get startClose(){return a(Rr)},onClosed:l,children:(h,m)=>{var g=Tu(),w=b(g);{var _=D=>{lo(D,{})},A=D=>{var E=ku(),y=B(E),k=b(y),C=U(y,2),T=b(C);cn(T,{onClick:s,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(I,Y)=>{var X=Le();de(()=>ln(X,a(Fa))),p(I,X)},$$slots:{default:!0}});var x=U(T,2);cn(x,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(I,Y)=>{var X=Le();de(()=>ln(X,a(Ha))),p(I,X)},$$slots:{default:!0}}),de(()=>ln(k,a(za))),p(D,E)};q(w,D=>{a(e)?D(_):D(A,!1)})}p(h,g)},$$slots:{default:!0}})};q(u,d=>{a(Ba)&&d(f)})}p(t,c)}const mr=t=>{const e=n=>{const r=n.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=n.key.toLowerCase(),i=n.metaKey,l=n.ctrlKey,c=n.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){n.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var Pu=K('<div class="block svelte-lfflvc"><a class="buttonAdd svelte-lfflvc"><span class="mobile svelte-lfflvc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="desktop svelte-lfflvc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function Du(t,e){ie(e,!1);const{createDialogPageHref:n,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=wt(),{checkExistedDialog:i}=pn(),l=()=>{o.length===0&&!i()&&s(ee.NewNote)};Ee(()=>mr({key:"n",action:l})),ua();var c=Pu(),u=b(c),f=M(()=>r(ee.NewNote));u.__click=function(..._){a(f)?.apply(this,_)};var d=b(u),h=b(d);ue(h,()=>({"--size":"32px","--color":"#b0b0b0"})),me(h.lastChild,{name:"add"});var m=U(h,2);Ue(m,{children:(_,A)=>{var D=Le("Add note");p(_,D)}});var g=U(d,2),w=b(g);ue(w,()=>({"--size":"16px","--color":"#b0b0b0"})),me(w.lastChild,{name:"plus"}),de(_=>Re(u,"href",_),[()=>n(ee.NewNote)]),p(t,c),le()}Ge(["click"]);var Au=K("<button><!></button>");function Nu(t,e){ie(e,!0);let n=we(e,"type",3,"button"),r=!1,o=j(null);Ae(()=>{e.onRef&&e.onRef(a(o))});const s=u=>{(u.key==="Enter"||u.key===" ")&&(r=!0)},i=()=>{e.onClick(r),r&&(r=!1)};var l=Au();l.__keydown=s,l.__click=i;var c=b(l);Ce(c,()=>e.children??xe),Je(l,u=>v(o,u),()=>a(o)),de(()=>{Re(l,"type",n()),_e(l,1,pe([{selectedTag:e.style==="selected",small:e.size==="small",empty:e.mode==="empty"}]),"svelte-uu8a24")}),p(t,l),le()}Ge(["keydown","click"]);const Lo=t=>{const n=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(o=>o instanceof HTMLElement?o instanceof HTMLButtonElement||o instanceof HTMLInputElement||o instanceof HTMLSelectElement||o instanceof HTMLTextAreaElement?!o.disabled&&o.offsetParent!==null:o.offsetParent!==null:!1),r=t||document.activeElement;if(r){const o=n.indexOf(r);return n[o+1]}return null};let Xn=j(!1),yn=j(!1),ft=j(""),bn=j(0),hr=j(0),gr=j(0),jr,Xr=()=>({bottom:0,right:0,height:0}),Ht=null,Wa=j(null);function Mu(t){if(a(Xn)){v(yn,!0),a(ft)!==t.tag&&(jr=()=>{const n=t.getRect();v(Xn,!0),v(ft,t.tag,!0),v(bn,n.bottom,!0),v(hr,n.right,!0),v(gr,n.height,!0),Xr=t.getRect,Ht=t.focusRef});return}const e=t.getRect();v(Xn,!0),v(ft,t.tag,!0),v(bn,e.bottom,!0),v(hr,e.right,!0),v(gr,e.height,!0),Xr=t.getRect,Ht=t.focusRef}const Lu=()=>a(Xn),Iu=()=>a(Wa);var Ou=K('<li class="svelte-10et2j6"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin</button></li>'),Ru=K('<li class="svelte-10et2j6"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin</button></li>'),Bu=K('<ul><!> <li class="svelte-10et2j6"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete</button></li></ul>'),zu=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Fu(t,e){ie(e,!0);const n=(T,x=xe)=>{var I=Bu(),Y=b(I);{var X=z=>{var ne=Ou(),G=b(ne);G.__click=d,G.__keydown=_;var W=b(G);ue(W,()=>({"--size":"22px"})),me(W.lastChild,{name:"pin"}),de(()=>_e(G,1,pe(["button",{buttonMenuDialog:x()}]),"svelte-10et2j6")),p(z,ne)},O=z=>{var ne=Ru(),G=b(ne);G.__click=h,G.__keydown=_;var W=b(G);ue(W,()=>({"--size":"22px"})),me(W.lastChild,{name:"pin-cancel"}),de(()=>_e(G,1,pe(["button",{buttonMenuDialog:x()}]),"svelte-10et2j6")),p(z,ne)};q(Y,z=>{a(f)?z(O,!1):z(X)})}var ae=U(Y,2),re=b(ae);re.__click=D,re.__keydown=A;var ce=b(re);ue(ce,()=>({"--size":"22px"})),me(ce.lastChild,{name:"bin"}),Je(I,z=>v(Wa,z),()=>a(Wa)),de(()=>{_e(I,1,pe(["menu",{menuDialog:x()}]),"svelte-10et2j6"),_e(re,1,pe(["button","buttonDelete",{buttonMenuDialog:x()}]),"svelte-10et2j6")}),p(T,I)},{getScrollContainer:r}=va(),{pinTag:o,getGetMapTags:s,deleteTag:i}=Jt(),{checkMobileSize:l}=Qt(),{getSelectedTags:c,removeTag:u}=ro();let f=M(()=>s()().get(a(ft))?.pinned||!1);const d=()=>{o(a(ft),!0),Ht?.focus(),v(yn,!0)},h=()=>{o(a(ft),!1),Ht?.focus(),v(yn,!0)},m=()=>{v(Xn,!1),v(yn,!1),v(bn,0),v(hr,0),v(gr,0),Xr=()=>({bottom:0,right:0,height:0}),Ht=null,jr&&setTimeout(()=>{jr?.(),jr=void 0})};let g=M(()=>window.innerHeight-a(bn)<100?a(bn)-a(gr)-98+"px":a(bn)+5+"px"),w=M(r);const _=T=>{T.key==="Tab"&&T.shiftKey&&(T.preventDefault(),Ht?.focus())},A=T=>{T.key==="Tab"&&!T.shiftKey&&Ht&&(T.preventDefault(),Lo(Ht)?.focus())},D=()=>{v(yn,!0);let T=Ht,x=Lo(T);ga({title:a(E).has(a(ft))?`Are you sure you want to delete tag "${a(ft)}" from selected notes?`:`Are you sure you want to delete tag "${a(ft)}"?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const I=a(E).has(a(ft))?Array.from(a(E)).filter(Y=>Y!==a(ft)):[];u(a(ft)),await i(a(ft),I)},onCancel:async()=>{},onClosed:I=>{setTimeout(()=>{I?x&&x?.focus():T?.focus()},16)}})};Ae(()=>{const T=()=>{const x=Xr();v(bn,x.bottom,!0),v(hr,x.right,!0),v(gr,x.height,!0)};return a(w)?.addEventListener("scroll",T),window.addEventListener("resize",T),()=>{a(w)?.removeEventListener("scroll",T),window.removeEventListener("resize",T)}});let E=M(c);var y=Q(),k=B(y);{var C=T=>{var x=Q(),I=B(x);{var Y=O=>{Er(O,{get startClose(){return a(yn)},onClosed:m,children:(ae,re)=>{n(ae,()=>!0)},$$slots:{default:!0}})},X=O=>{var ae=zu(),re=B(ae);ue(re,()=>({"--left":a(hr)-36+"px","--top":a(g)})),ha(re.lastChild,{transformOrigin:"top",get startClose(){return a(yn)},onClosed:m,children:(ce,z)=>{n(ce,()=>!1)},$$slots:{default:!0}}),p(O,ae)};q(I,O=>{l()?O(Y):O(X,!1)})}p(T,x)};q(k,T=>{a(Xn)&&T(C)})}p(t,y),le()}Ge(["click","keydown"]);const Hu=(t,e,n,r)=>{t.stopPropagation(),t.preventDefault(),Mu({tag:e.tag,getRect:n,focusRef:a(r)})},ju=(t,e)=>{t.key==="Tab"&&!t.shiftKey&&a(e)&&(t.preventDefault(),Iu()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};var Vu=K('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Uu=K('<button><span class="buttonMenuInner svelte-16ablwx"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),Wu=K("<!> <span> </span> <!>",1),qu=K('<div class="block svelte-16ablwx"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function ai(t,e){ie(e,!0);let{getGetMapTags:n}=Jt(),r=j(null),o=M(Lu);const s=()=>{if(a(r)){const f=a(r).getBoundingClientRect();return{bottom:f.bottom,right:f.right,height:f.height}}return{bottom:0,right:0,height:0}};let i=M(()=>e.mode==="notes"&&!(e.tag==="inbox"||e.tag==="drafts")),l=M(()=>n()().get(e.tag)?.pinned||!1);var c=qu(),u=b(c);ue(u,()=>({"--paddingRight":a(i)?"30px":void 0})),Nu(u.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(f,d)=>{var h=Wu(),m=B(h);{var g=E=>{var y=Vu(),k=b(y);ue(k,()=>({"--size":"18px"})),me(k.lastChild,{name:"pin"}),p(E,y)};q(m,E=>{a(l)&&E(g)})}var w=U(m,2),_=b(w),A=U(w,2);{var D=E=>{var y=Uu();y.__click=[Hu,e,s,r],y.__keydown=[ju,o];var k=b(y),C=b(k);ue(C,()=>({"--size":"16px"})),me(C.lastChild,{name:"menu"});var T=U(C,2);Ue(T,{children:(x,I)=>{var Y=Le("Tag options");p(x,Y)}}),Je(y,x=>v(r,x),()=>a(r)),de(()=>_e(y,1,pe({buttonMenu:!0,selected:e.type==="selected"}),"svelte-16ablwx")),p(E,y)};q(A,E=>{a(i)&&E(D)})}de(()=>ln(_,e.tag)),p(f,h)},$$slots:{default:!0}}),p(t,c),le()}Ge(["click","keydown"]);var Ku=K('<div class="block svelte-1c53r32"><div></div></div>');function Io(t,e){ie(e,!0);let n=we(e,"mobile",3,!1);const{getGetMapTags:r}=Jt();let o=j(null),s=j(Xe({value:!1}));const i=d=>{v(o,d,!0)};let c=M(()=>{const d=r()();return[...e.tags].sort((h,m)=>h==="inbox"?-1:m==="inbox"?1:d.get(h)?.pinned?-1:d.get(m)?.pinned?1:h.localeCompare(m))});Ae(()=>{a(s),Ot(()=>{a(o)&&a(s).value&&a(o).focus()})});var u=Ku(),f=b(u);ca(f,22,()=>a(c),d=>d,(d,h,m)=>{{let g=M(()=>a(m)===0?i:void 0);ai(d,{get mode(){return e.mode},get tag(){return h},get onRef(){return a(g)},onClick:w=>{w?v(s,{value:!0},!0):v(s,{value:!1},!0),e.handleTagClick(h)}})}}),de(()=>_e(f,1,pe(["tags",{mobile:n()}]),"svelte-1c53r32")),p(t,u),le()}const Yu=t=>{try{new URL(t)}catch{return!1}return!0},Gu=(t,e)=>{a(e)||v(e,!0)},Xu=(t,e,n,r)=>{for(const o of e())o==="inbox"||o==="drafts"||n(o,!0);v(r,!0)},Zu=(t,e,n,r)=>{for(const o of e())o==="inbox"||o==="drafts"||n(o,!1);v(r,!0)},Ju=(t,e,n,r,o,s)=>{const i=Array.from(e());n(i),r.clearTags(),fn("Notes moved to bin",{onCancel:()=>{e(new Set(i)),o(i)}}),v(s,!0)},Qu=(t,e,n,r,o)=>{v(e,!0),ga({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{v(e,!0),n.clearTags(),await r(Array.from(o()))},onCancel:async()=>{}})},$u=(t,e,n,r,o,s)=>{const i=Array.from(e());n(i),r.clearTags(),fn("Notes restored",{onCancel:()=>{e(new Set(i)),o(i)}}),v(s,!0)},ed=(t,e)=>{e.clearTags()},td=(t,e,n,r)=>{const o=e()(),s=Array.from(n());for(const i of o)i.data&&i.data?.url&&Yu(i.data?.url)&&s.every(l=>i.data?.tags.includes(l))&&window.open(i.data?.url,"_blank");v(r,!0)};var nd=K('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin</button></li>'),rd=K('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin</button></li>'),ad=K('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin</button></li>'),od=K('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore</button></li> <li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes</button></li>',1),sd=K('<ul><li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links</button></li> <!> <!> <!> <!></ul>'),id=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ld=K('<div class="block svelte-58z9m1"><div class="tagsMenu__wrapper svelte-58z9m1"><button class="tagsMenu svelte-58z9m1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <div><div class="clearButton_wrapper svelte-58z9m1"><button class="clearButton svelte-58z9m1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></div> <!></div>');function Oo(t,e){ie(e,!0);const n=(Y,X=xe)=>{var O=sd(),ae=b(O),re=b(ae);re.__click=[td,l,r,_];var ce=b(re);ue(ce,()=>({"--size":"22px"})),me(ce.lastChild,{name:"open"});var z=U(ae,2);{var ne=$=>{var Z=nd(),se=b(Z);se.__click=[Xu,r,c,_];var ve=b(se);ue(ve,()=>({"--size":"22px"})),me(ve.lastChild,{name:"pin"}),de(()=>_e(se,1,pe(["button",{buttonMenuDialog:X()}]),"svelte-58z9m1")),p($,Z)};q(z,$=>{o()==="notes"&&a(C)&&[...r()].filter(Z=>Z!=="inbox"&&Z!=="drafts").length>0&&$(ne)})}var G=U(z,2);{var W=$=>{var Z=rd(),se=b(Z);se.__click=[Zu,r,c,_];var ve=b(se);ue(ve,()=>({"--size":"22px"})),me(ve.lastChild,{name:"pin-cancel"}),de(()=>_e(se,1,pe(["button",{buttonMenuDialog:X()}]),"svelte-58z9m1")),p($,Z)};q(G,$=>{o()==="notes"&&a(k)&&[...r()].filter(Z=>Z!=="inbox"&&Z!=="drafts").length>0&&$(W)})}var J=U(G,2);{var he=$=>{var Z=ad(),se=b(Z);se.__click=[Ju,r,u,e,f,_];var ve=b(se);ue(ve,()=>({"--size":"22px"})),me(ve.lastChild,{name:"bin"}),de(()=>_e(se,1,pe(["button",{buttonMenuDialog:X()}]),"svelte-58z9m1")),p($,Z)};q(J,$=>{o()==="notes"&&$(he)})}var te=U(J,2);{var F=$=>{var Z=od(),se=B(Z),ve=b(se);ve.__click=[$u,r,f,e,u,_];var S=b(ve);ue(S,()=>({"--size":"22px"})),me(S.lastChild,{name:"bin-cancel"});var L=U(se,2),P=b(L);P.__click=[Qu,_,e,d,r];var R=b(P);ue(R,()=>({"--size":"22px"})),me(R.lastChild,{name:"bin"}),de(()=>{_e(ve,1,pe(["button",{buttonMenuDialog:X()}]),"svelte-58z9m1"),_e(P,1,pe(["button",{buttonMenuDialog:X()}]),"svelte-58z9m1")}),p($,Z)};q(te,$=>{o()==="bin"&&$(F)})}de(()=>{_e(O,1,pe(["menu",{menuDialog:X()}]),"svelte-58z9m1"),_e(re,1,pe(["button",{buttonMenuDialog:X()}]),"svelte-58z9m1")}),p(Y,O)};let r=we(e,"selectedTags",7),o=we(e,"mode",3,"notes");const{checkMobileSize:s}=Qt(),{getGetMapTags:i,getGetNotes:l,pinTag:c,moveNotesToBinByTags:u,restoreNotesFromBinByTags:f,deleteNotesByTags:d}=Jt();let h=M(s),m=j(null),g=j(Xe({value:!1})),w=j(!1),_=j(!1);const A=Y=>{v(m,Y,!0)},D=()=>{v(w,!1),v(_,!1)},E=()=>{const Y=i()();for(const X of r())if(X!=="inbox"&&Y.get(X)?.pinned)return!0;return!1},y=()=>{const Y=i()();for(const X of r())if(X!=="inbox"&&!Y.get(X)?.pinned)return!0;return!1};let k=M(E),C=M(y);Ae(()=>{a(g),Ot(()=>{a(m)&&a(g).value&&a(m).focus()})});var T=Q(),x=B(T);{var I=Y=>{var X=ld(),O=b(X),ae=b(O);ae.__click=[Gu,w];var re=b(ae);ue(re,()=>({"--rotate":"-90deg","--size":"20px"})),me(re.lastChild,{name:"menu"});var ce=U(re,2);Ue(ce,{children:($,Z)=>{var se=Le("tags menu");p($,se)}});var z=U(O,2);_e(z,1,pe(["tags","selectedTags"]),"svelte-58z9m1");var ne=b(z),G=b(ne);G.__click=[ed,e];var W=b(G);ue(W,()=>({"--size":"20px"})),me(W.lastChild,{name:"close"});var J=U(W,2);Ue(J,{children:($,Z)=>{var se=Le("Clear");p($,se)}});var he=U(ne,2);ca(he,18,r,$=>$,($,Z,se)=>{{let ve=M(()=>a(se)===r().size-1?A:void 0);ai($,{get mode(){return o()},type:"selected",get tag(){return Z},onClick:S=>{S?v(g,{value:!0},!0):v(g,{value:!1},!0),e.handleSelectedTagClick(Z)},get onRef(){return a(ve)}})}});var te=U(z,2);{var F=$=>{var Z=Q(),se=B(Z);{var ve=L=>{Er(L,{get startClose(){return a(_)},onClosed:D,children:(P,R)=>{n(P,()=>!0)},$$slots:{default:!0}})},S=L=>{var P=id(),R=B(P);ue(R,()=>({"--right":"0","--top":"10px"})),ha(R.lastChild,{transformOrigin:"top",get startClose(){return a(_)},onClosed:D,children:(H,V)=>{n(H,()=>!1)},$$slots:{default:!0}}),p(L,P)};q(se,L=>{a(h)?L(ve):L(S,!1)})}p($,Z)};q(te,$=>{a(w)&&$(F)})}p(Y,X)};q(x,Y=>{r().size>0&&Y(I)})}p(t,T),le()}Ge(["click"]);const cd=(t,e,n)=>{if(t.has("inbox"))return[];const r=[],o=Array.from(t.values());for(const s of e)if(s.data&&!(n&&!n(s))){if(t.size===0){for(const i of s?.data?.tags||[])r.includes(i)||r.push(i);continue}if(s.data&&o.every(i=>s.data?.tags.includes(i)))for(const i of s.data.tags||[])!t.has(i)&&!r.includes(i)&&r.push(i)}return r};function ud(t,e){ie(e,!0);const n=gn(),{getIsKeyboardVisible:r}=ni();let o=we(e,"dialog",7);const s=M(r),i=3,l=50,c=5,u=.6,f=.3,d=.35,h=.95;let m=0,g=0,w=0,_=!1,A=!1,D=0,E=0,y=0;const k=()=>{m=0,g=0,_=!1,A=!1,D=0,E=0,y=0,w=0,C!==null&&(cancelAnimationFrame(C),C=null),T=null};let C=null,T=null;const x=z=>{if(!o()){console.warn("Touch start: No dialog element");return}if(e.sidebarState!=="opened"&&e.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${e.sidebarState}`);return}m=z.touches[0].clientX,g=z.touches[0].clientY,w=performance.now(),_=!0,A=!1},I=z=>e.sidebarState==="closed"&&z>0||e.sidebarState==="closeSwiping"&&z>0||e.sidebarState==="opened"&&z<0||e.sidebarState==="openSwiping"&&z<0,Y=()=>{if(o()){if(o().style.setProperty("--transition-timing","0s"),!o().open&&e.sidebarState==="closed")try{o().showModal(),o().offsetWidth}catch(z){console.error("Error opening dialog:",z);return}e.onSwipe();try{const z=window.getComputedStyle(o()),ne=z.transform||z.webkitTransform||"";if(E=o().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?D=-E:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(D=0),ne&&ne!=="none")try{D=new DOMMatrix(ne).m41}catch{console.warn("Could not parse transform matrix, using default position")}A=!0}catch(z){console.error("Error during swipe initialization:",z),k()}}},X=()=>{if(C=null,!T||!_||!o()||a(s))return;const{x:z,y:ne}=T;T=null;const G=z-m,W=ne-g,J=Math.abs(G)>Math.abs(W),he=Math.abs(G)>i;if(!A)if(J&&he&&I(G))try{Y()}catch(ve){console.error("Error initializing swipe:",ve),k();return}else return;let te=D+G*h;const F=-E,$=-(E*.3);let Z=Math.max(F,Math.min($,te));o().style.setProperty("--transition-timing","0s"),o().style.transform=`translate3d(${Z}px, 0, 0)`;const se=Math.min(1,Math.max(0,(Z-F)/($-F)));n.swipingRatio=(-1+Math.abs(Z/E))/7*10,y=(Z-D)/E*100,o().style.setProperty("--backdrop-bg",`${se*.25}`)},O=z=>{if(!_)return;const ne=z.touches[0].clientX,G=z.touches[0].clientY;T={x:ne,y:G},C===null&&(C=requestAnimationFrame(X)),A&&Math.abs(ne-m)>Math.abs(G-g)&&z.preventDefault()},ae=z=>{const ne=Math.abs(z);if(ne>=u)return c;if(ne>=f){const G=(ne-f)/(u-f);return l-G*(l-c)}else return l},re=(z,ne)=>{if(Math.abs(z)>=u)return d*.5;const W=Math.abs(y)/100;return ne?d*Math.max(.5,1-W):d*Math.max(.5,W)},ce=z=>{if(C!==null&&(cancelAnimationFrame(C),C=null),T=null,!_||!o()){k();return}if(!A){k();return}let ne=0;if(z?.changedTouches?.[0]){const te=z.changedTouches[0].clientX,$=performance.now()-w;$>0&&(ne=(te-m)/$)}const G=ae(ne);let W=null;e.sidebarState==="closeSwiping"?W=Math.abs(y)>G||ne>f?"open":"close":e.sidebarState==="openSwiping"&&(W=Math.abs(y)>G||ne<-f?"close":"open");const J=e.sidebarState==="closeSwiping"&&W==="open"||e.sidebarState==="openSwiping"&&W==="close",he=re(ne,J);n.duration=he-.02,o().style.setProperty("--transition-timing",`${he}s`),o().offsetWidth,o().style.transform="",W==="open"?e.onOpen():W==="close"&&e.onClose(),o()?.style.removeProperty("--backdrop-bg"),k()};Ee(()=>(document.addEventListener("touchstart",x,{passive:!0}),document.addEventListener("touchmove",O,{passive:!1}),document.addEventListener("touchend",ce,{passive:!0}),document.addEventListener("touchcancel",ce,{passive:!0}),()=>{document.removeEventListener("touchstart",x),document.removeEventListener("touchmove",O),document.removeEventListener("touchend",ce),document.removeEventListener("touchcancel",ce),C!==null&&cancelAnimationFrame(C)})),le()}var dd=K('<dialog><div class="dialogInner svelte-1nov8pn"><!></div></dialog> <!> <!>',1);function fd(t,e){ie(e,!0);const{getDialogPages:n}=wt(),{getSidebarState:r,handleComputeState:o}=da();let s=350;const i=gn(),{isScrolling:l}=oo();let c=j(null),u=j(null),f=M(r);Ae(()=>{n().length>0&&o({type:"close"})});const d=()=>{e.blocked||o({type:"close"})},h=()=>{e.blocked||o({type:"open"})},m=()=>{o({type:"opened"}),i.swipingRatio=-1,i.duration=.2},g=()=>{o({type:"closed"})},w=()=>{o({type:"swipe"})},_=O=>{O.preventDefault(),d()};Ee(()=>(a(c)?.addEventListener("close",g),a(c)?.addEventListener("cancel",_),()=>{a(c)?.removeEventListener("close",g),a(c)?.removeEventListener("cancel",_)}));const A=()=>{a(c)?.style.removeProperty("--transition-timing"),a(c)?.style.removeProperty("transform"),a(c)?.style.removeProperty("--backdrop-bg")},D=M(l);Ae(()=>{if(a(f),!!a(c))switch(a(f).type==="openSwiping"||a(f).type==="closeSwiping"?i.isSwiping=!0:i.isSwiping=!1,a(f).type){case"closeSwiping":{const O=setTimeout(()=>{d()},3e3);return()=>{clearTimeout(O)}}case"openSwiping":{const O=setTimeout(()=>{h()},3e3);return()=>{clearTimeout(O)}}case"opening":{a(c).open||a(c).showModal(),a(c).getBoundingClientRect();const O=setTimeout(()=>{A()},s+1),ae=()=>{clearTimeout(O),A()};return a(c)?.addEventListener("transitionend",ae,{once:!0}),m(),()=>{clearTimeout(O),a(c)?.removeEventListener("transitionend",ae)}}case"closing":{i.swipingRatio=0,i.duration=.2;const O=setTimeout(()=>{a(f).type==="closing"&&g()},s+1),ae=()=>{clearTimeout(O),g()};return a(c)?.addEventListener("transitionend",ae,{once:!0}),()=>{clearTimeout(O),a(c)?.removeEventListener("transitionend",ae)}}case"closed":a(c)?.close(),A();break;case"opened":A();break}}),Ee(()=>{a(f).type==="opened"&&o({type:"open"})});var E=dd(),y=B(E),k=b(y),C=b(k);{var T=O=>{var ae=Q(),re=B(ae);Ce(re,()=>e.children),p(O,ae)};q(C,O=>{a(f).type!=="closed"&&O(T)})}Je(k,O=>v(u,O),()=>a(u)),Je(y,O=>v(c,O),()=>a(c));var x=U(y,2);{var I=O=>{io(O,{get dialog(){return a(c)},get dialogInner(){return a(u)},onClose:d})};q(x,O=>{a(f).type==="opened"&&!e.blocked&&O(I)})}var Y=U(x,2);{var X=O=>{ud(O,{onClose:d,onOpen:h,onSwipe:w,get sidebarState(){return a(f).type},get dialog(){return a(c)}})};q(Y,O=>{(!a(D)&&a(f).type==="closed"||a(f).type==="opened"||a(f).type==="openSwiping"||a(f).type==="closeSwiping")&&!e.blocked&&O(X)})}de(()=>_e(y,1,pe([{open:a(f).type==="opened",isAnimationOn:i.working&&(!i.isSwiping||!e.blocked)}]),"svelte-1nov8pn")),p(t,E),le()}var vd=(t,e,n)=>{t.preventDefault(),e(),n("/")},hd=K('<a class="link svelte-ltt61h" href="/"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),gd=(t,e,n)=>{t.preventDefault(),e(),n(`/${ee.Bin}`)},pd=K('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),_d=K('<div class="sidebarFixed svelte-ltt61h"><div class="nav svelte-ltt61h"><!> <div class="menu svelte-ltt61h"><a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="searchWrapper svelte-ltt61h"><!></div> <!></div> <!>',1),md=K('<div class="desktopSidebar svelte-ltt61h"><div class="searchWrapper svelte-ltt61h"><!></div> <div class="sidebar svelte-ltt61h"><div class="sidebarFixed svelte-ltt61h"><!></div> <!></div></div>');function wd(t,e){ie(e,!0);const{checkMobileSize:n}=Qt(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=da(),{getAppLocation:i,replace:l}=kt(),{getDialogPages:c,createDialogPageHref:u,createHandleClickDialogPage:f}=wt(),{getTagsSearch:d,setTagsSearch:h}=sc(),m=M(()=>i().pathname),{getSelectedTags:g,addTag:w,removeTag:_,clearTags:A}=ro();let D=M(g);const{checkNotesInBin:E,getGetNotes:y}=Jt(),k=M(y);let C=M(()=>a(m)==="/bin"?"bin":"notes");const T=J=>{w(J)},x=J=>{_(J)};let I=M(()=>a(D).size===0&&!a(D).has("inbox")&&(a(k)()||[]).some(J=>(a(C)==="notes"&&J?.data&&!J.data.deletedAt||a(C)==="bin"&&J?.data&&J.data.deletedAt)&&J?.data?.tags.length===0)),Y=M(()=>cd(a(D),a(k)()||[],J=>!(J?.data&&J.data.deletedAt&&a(C)==="notes"||J?.data&&!J.data.deletedAt&&a(C)==="bin"))),X=M(()=>[...a(I)?["inbox"]:[],...a(Y)].filter(J=>d()===""||J.toLowerCase().indexOf(d().toLowerCase())!==-1)),O=M(n);const{checkExistedDialog:ae}=pn();let re=M(()=>c().length>0||ae());const ce=()=>{if(a(O)){if(a(re))return;o().type==="opened"?r():o().type==="closed"&&s()}};Ee(()=>mr({key:"b",meta:!0,action:ce})),Ee(()=>mr({key:"b",ctrl:!0,action:ce}));var z=Q(),ne=B(z);{var G=J=>{fd(J,{get blocked(){return a(re)},children:(he,te)=>{var F=_d(),$=B(F),Z=b($),se=b(Z);ri(se,{});var ve=U(se,2),S=b(ve),L=M(()=>f(ee.Settings));S.__click=function(...ke){a(L)?.apply(this,ke)};var P=b(S);ue(P,()=>({"--size":"24px"})),me(P.lastChild,{name:"settings"});var R=U(P,2);Ue(R,{children:(ke,ze)=>{var at=Le("Settings");p(ke,at)}});var H=U(S,2),V=M(()=>f(ee.Sync));H.__click=function(...ke){a(V)?.apply(this,ke)};var be=b(H);ue(be,()=>({"--size":"24px"})),me(be.lastChild,{name:"sync"});var Ie=U(be,2);Ue(Ie,{children:(ke,ze)=>{var at=Le("Sync");p(ke,at)}});var ge=U(H,2);{var oe=ke=>{var ze=hd();ze.__click=[vd,r,l];var at=b(ze);ue(at,()=>({"--size":"24px"})),me(at.lastChild,{name:"note"});var Bt=U(at,2);Ue(Bt,{children:(zt,ot)=>{var Tt=Le("Notes");p(zt,Tt)}}),p(ke,ze)},Ne=ke=>{var ze=Q(),at=B(ze);{var Bt=zt=>{var ot=pd();ot.__click=[gd,r,l];var Tt=b(ot);ue(Tt,()=>({"--size":"24px"})),me(Tt.lastChild,{name:"bin"});var kr=U(Tt,2);Ue(kr,{children:(pa,co)=>{var $t=Le("Bin");p(pa,$t)}}),de(()=>Re(ot,"href",`/${ee.Bin}`)),p(zt,ot)};q(at,zt=>{E()&&zt(Bt)},!0)}p(ke,ze)};q(ge,ke=>{a(m)===`/${ee.Bin}`?ke(oe):ke(Ne,!1)})}var qe=U(Z,2),nt=b(qe);{let ke=M(d);Ra(nt,{placeholder:"Search tag",get value(){return a(ke)},onChange:ze=>{h(ze)}})}var Rt=U(qe,2);Oo(Rt,{get clearTags(){return A},get mode(){return a(C)},get selectedTags(){return a(D)},handleSelectedTagClick:x});var rt=U($,2);Io(rt,{get mode(){return a(C)},get tags(){return a(X)},handleTagClick:T,mobile:!0}),de((ke,ze)=>{Re(S,"href",ke),Re(H,"href",ze)},[()=>u(ee.Settings),()=>u(ee.Sync)]),p(he,F)},$$slots:{default:!0}})},W=J=>{var he=md(),te=b(he),F=b(te);{let S=M(d);Ra(F,{placeholder:"Search tag",get value(){return a(S)},onChange:L=>{h(L)}})}var $=U(te,2),Z=b($),se=b(Z);Oo(se,{get clearTags(){return A},get mode(){return a(C)},get selectedTags(){return a(D)},handleSelectedTagClick:x});var ve=U(Z,2);Io(ve,{get mode(){return a(C)},get tags(){return a(X)},handleTagClick:T}),p(J,he)};q(ne,J=>{a(O)?J(G):J(W,!1)})}p(t,z),le()}Ge(["click"]);const yd=(t,e,n)=>{ga({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await e(),n("/")},onCancel:async()=>{}})};var bd=(t,e)=>{t.preventDefault(),e("/")},Sd=K('<a class="link svelte-13t3afu" href="/"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),Cd=(t,e)=>{t.preventDefault(),e(`/${ee.Bin}`)},Ed=K('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),kd=K('<button class="emptyBinButton svelte-13t3afu" type="button">Empty bin</button>'),Td=K('<div class="header svelte-13t3afu"><div class="top svelte-13t3afu"><div class="menu svelte-13t3afu"><a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="mobile svelte-13t3afu"><!></div> <!></div> <div class="bottom svelte-13t3afu"><div class="left svelte-13t3afu"><!></div> <div class="right svelte-13t3afu"><div class="filter svelte-13t3afu"><div class="feedSearchWrapper svelte-13t3afu"><!></div> <!></div></div></div></div>');function xd(t,e){ie(e,!0);const{getFeedSearch:n,setFeedSearch:r}=Is(),{getScrollContainer:o}=va();let s=M(o);const{emptyBin:i,checkNotesInBin:l}=Jt(),{getAppLocation:c,replace:u}=kt(),{createDialogPageHref:f,createHandleClickDialogPage:d,getDialogPages:h}=wt(),{checkExistedDialog:m}=pn();let g=j(null);const w=M(l),_=M(()=>c().pathname),A=()=>{a(s)&&a(s).scrollTo({top:0,behavior:"smooth"})},D=()=>{h().length===0&&!m()&&a(g)?.focus()};Ee(()=>mr({key:"k",meta:!0,action:D})),Ee(()=>mr({key:"k",ctrl:!0,action:D}));var E=Td(),y=b(E),k=b(y),C=b(k),T=M(()=>d(ee.Settings));C.__click=function(...S){a(T)?.apply(this,S)};var x=b(C);ue(x,()=>({"--rotate":"30deg","--size":"20px"})),me(x.lastChild,{name:"settings"});var I=U(C,2),Y=M(()=>d(ee.Sync));I.__click=function(...S){a(Y)?.apply(this,S)};var X=b(I);ue(X,()=>({"--size":"20px"})),me(X.lastChild,{name:"sync"});var O=U(I,2);{var ae=S=>{var L=Sd();L.__click=[bd,u];var P=b(L);ue(P,()=>({"--size":"18px"})),me(P.lastChild,{name:"note"}),p(S,L)},re=S=>{var L=Q(),P=B(L);{var R=H=>{var V=Ed();V.__click=[Cd,u];var be=b(V);ue(be,()=>({"--size":"24px"})),me(be.lastChild,{name:"bin"}),de(()=>Re(V,"href",`/${ee.Bin}`)),p(H,V)};q(P,H=>{a(w)&&H(R)},!0)}p(S,L)};q(O,S=>{a(_)===`/${ee.Bin}`?S(ae):S(re,!1)})}var ce=U(k,2),z=b(ce);ri(z,{});var ne=U(ce,2);{var G=S=>{var L=Q(),P=B(L);{var R=H=>{var V=kd();V.__click=[yd,i,u],p(H,V)};q(P,H=>{a(w)&&H(R)})}p(S,L)},W=S=>{Du(S,{})};q(ne,S=>{a(_)===`/${ee.Bin}`?S(G):S(W,!1)})}var J=U(y,2),he=b(J),te=b(he);wd(te,{});var F=U(he,2),$=b(F),Z=b($),se=b(Z);{let S=M(n);Ra(se,{onFocus:A,placeholder:"Search",get value(){return a(S)},onChange:L=>{r(L)},get ref(){return a(g)},set ref(L){v(g,L,!0)}})}var ve=U(Z,2);bu(ve,{}),de((S,L)=>{Re(C,"href",S),Re(I,"href",L)},[()=>f(ee.Settings),()=>f(ee.Sync)]),p(t,E),le()}Ge(["click"]);function Pd(t,e){ie(e,!0);const{getIsKeyboardVisible:n}=ni();let r=we(e,"dialog",7);const o=M(n),s=gn();let i=null;const l=()=>{e.dialogState==="swiping"&&e.onClose()};Ae(()=>(e.dialogState==="swiping"&&(i=setTimeout(l,3e3)),()=>{i&&(clearTimeout(i),i=null)}));let c=null,u=null;const f=3,d=50,h=5,m=.6,g=.3,w=.35,_=.95;let A=0,D=0,E=0,y=!1,k=!1,C=0,T=0,x=0;const I=()=>{A=0,D=0,y=!1,k=!1,C=0,T=0,x=0,E=0,c=null,u!==null&&(cancelAnimationFrame(u),u=null),i&&(clearTimeout(i),i=null)},Y=W=>{if(!r()){console.warn("Touch start: No dialog element");return}if(e.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${e.dialogState}`);return}A=W.touches[0].clientX,D=W.touches[0].clientY,E=performance.now(),y=!0,k=!1},X=W=>e.dialogState==="opened"&&W>0||e.dialogState==="swiping"&&W>0,O=()=>{if(r()){r().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const W=window.getComputedStyle(r()),J=W.transform||W.webkitTransform||"";if(T=r().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(C=0),J&&J!=="none")try{C=new DOMMatrix(J).m41}catch{console.warn("Could not parse transform matrix, using default position")}k=!0}catch(W){console.error("Error during swipe initialization:",W),I()}}},ae=()=>{if(!r())return;const J=Math.abs(C+x*T/100)/T;r().style.setProperty("--backdrop-bg",`${.1*(1-J)}`)},re=()=>{if(u=null,!c||!y||!r()||a(o)){I();return}const W=[...c.touches].reduce((S,L)=>S+L.clientX,0)/c.touches.length,J=[...c.touches].reduce((S,L)=>S+L.clientY,0)/c.touches.length,he=W-A,te=J-D,F=Math.abs(he)>Math.abs(te),$=Math.abs(he)>f;if(!k)if(F&&$&&X(he))try{O()}catch(S){console.error("Error initializing swipe:",S),I();return}else return;let Z=C+he*_;Z=Math.max(0,Math.min(T,Z)),!(Z<0)&&(r().style.setProperty("--transition-timing","0s"),r().style.transform=`translate3d(${Z}px, 0, 0)`,s.swipingRatio=Math.abs(1-Z/T),x=(Z-C)/T*100,e.dialogState==="swiping"&&(i&&clearTimeout(i),i=setTimeout(l,3e3)),ae())},ce=W=>{if(!y)return;c=W,u===null&&(u=requestAnimationFrame(re));const J=W.touches[0].clientX-A,he=W.touches[0].clientY-D,te=Math.abs(J)>Math.abs(he);k&&te&&W.preventDefault()},z=W=>{const J=Math.abs(W);if(J>=m)return h;if(J>=g){const he=(J-g)/(m-g);return d-he*(d-h)}else return d},ne=(W,J)=>{if(Math.abs(W)>=m)return w*.5;const te=Math.abs(x)/100;return J?w*Math.max(.5,1-te):w*Math.max(.5,te)},G=W=>{if(u!==null&&(cancelAnimationFrame(u),u=null),!y||!r()){I();return}if(!k){I();return}let J=0;if(W?.changedTouches?.[0]){const Z=W.changedTouches[0].clientX,ve=performance.now()-E;ve>0&&(J=(Z-A)/ve)}const he=z(J);let te=null;e.dialogState==="swiping"&&(te=Math.abs(x)>he||J<-g?"close":"open");const F=e.dialogState==="swiping"&&te==="close",$=ne(J,F);s.duration=$-.02,r().style.setProperty("--transition-timing",`${$}s`),r().offsetWidth,r().style.transform="",te==="open"?e.onOpen():te==="close"&&e.onClose(),r()?.style.removeProperty("--backdrop-bg"),I()};Ee(()=>(r().addEventListener("touchstart",Y,{passive:!0}),r().addEventListener("touchmove",ce,{passive:!1}),r().addEventListener("touchend",G,{passive:!0}),r().addEventListener("touchcancel",G,{passive:!0}),()=>{r().removeEventListener("touchstart",Y),r().removeEventListener("touchmove",ce),r().removeEventListener("touchend",G),r().removeEventListener("touchcancel",G),u!==null&&cancelAnimationFrame(u)})),le()}var Dd=(t,e)=>{e.onStartClose()},Ad=K('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Nd=K('<dialog><div class="dialogInner svelte-vr2o0t"><div class="header svelte-vr2o0t"><div class="navigation__wrapper svelte-vr2o0t"><!></div></div> <!></div></dialog> <!>',1);function Md(t,e){ie(e,!0);let n=350;const{isScrolling:r,enable:o}=oo();let s=j(null),i=j(null);const l=gn(),c=C=>{C.preventDefault(),e.onStartClose()};Ee(()=>(a(s)?.addEventListener("close",e.onClosed),a(s)?.addEventListener("cancel",c),()=>{a(s)?.removeEventListener("close",e.onClosed),a(s)?.removeEventListener("cancel",c)}));const u=()=>{a(s)?.style.removeProperty("--transition-timing"),a(s)?.style.removeProperty("transform"),a(s)?.style.removeProperty("--backdrop-bg")},f=()=>{o()},d=M(r);Ae(()=>{if(e.dialogState,!!a(s))switch(e.dialogState){case"opening":{a(s).open||a(s).showModal(),a(s).getBoundingClientRect();const C=setTimeout(()=>{u()},n+1),T=()=>{clearTimeout(C),u()};return a(s)?.addEventListener("transitionend",T,{once:!0}),e.onOpened(),()=>{clearTimeout(C),a(s)?.removeEventListener("transitionend",T)}}case"closing":{const C=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),T=()=>{clearTimeout(C),e.onClosed()};return a(s)?.addEventListener("transitionend",T,{once:!0}),()=>{clearTimeout(C),a(s)?.removeEventListener("transitionend",T)}}case"opened":u()}});var h=Nd(),m=B(h),g=b(m),w=b(g),_=b(w),A=b(_);{var D=C=>{var T=Ad();_e(T,1,pe(["navigateButton","buttonBack"]),"svelte-vr2o0t"),T.__click=[Dd,e];var x=b(T);ue(x,()=>({"--size":"32px"})),me(x.lastChild,{name:"back"});var I=U(x,2);Ue(I,{children:(Y,X)=>{var O=Le("back");p(Y,O)}}),p(C,T)};q(A,C=>{e.blocked||C(D)})}var E=U(w,2);Ce(E,()=>e.children),Je(g,C=>v(i,C),()=>a(i)),Je(m,C=>v(s,C),()=>a(s));var y=U(m,2);{var k=C=>{Pd(C,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return a(s)}})};q(y,C=>{(!a(d)&&e.dialogState==="opened"||e.dialogState==="swiping")&&!e.blocked&&C(k)})}de(()=>_e(m,1,pe([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:l.working&&(!l.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-vr2o0t")),to("scroll",g,f),p(t,h),le()}Ge(["click"]);const Ro=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function Ld(t,e){ie(e,!0);let n=we(e,"hiddenDialog",3,!1),r=we(e,"onClose",3,()=>{});const o=gn();let s=j(Xe(Ro({type:"closed"})));const i=_=>{v(s,Ro(a(s),_),!0)},l=()=>{e.onStartClose&&(e.onStartClose(),i({type:"close"}))},c=()=>{i({type:"open"})},u=()=>{i({type:"opened"}),o.swipingRatio=1,o.duration=.2},f=()=>{r()(),i({type:"closed"}),o.swipingRatio=1,o.duration=.2},d=()=>{i({type:"swipe"})};Ae(()=>{a(s).type==="swiping"?o.isSwiping=!0:o.isSwiping=!1,a(s).type==="closed"&&e.shownDialog?c():a(s).type==="opened"&&!e.shownDialog&&l()});var h={handleComputeState:i},m=Q(),g=B(m);{var w=_=>{{let A=M(()=>!e.onStartClose);Md(_,{onSwipe:d,onOpened:u,onClosed:f,onStartClose:l,onStartOpen:c,get dialogState(){return a(s).type},get hidden(){return n()},get blocked(){return a(A)},children:(D,E)=>{var y=Q(),k=B(y);Ce(k,()=>e.children),p(D,y)},$$slots:{default:!0}})}};q(g,_=>{a(s).type!=="closed"&&_(w)})}return p(t,m),le(h)}const Id=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const o=i=>{i.preventDefault(),n()},s=()=>{r?.()};Ee(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Ee(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Od=(t,e)=>{e.onStartBack()},Rd=K('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Bd=(t,e)=>{e.onStartClose()},zd=K('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Fd=K('<dialog><div class="dialogInner svelte-rt409n"><div class="header svelte-rt409n"><div class="navigation__wrapper svelte-rt409n"><div><!></div> <div><!></div></div></div> <!></div></dialog> <!>',1);function Hd(t,e){ie(e,!0);let n=we(e,"blockedDialog",3,!1),r=we(e,"hiddenDialog",3,!1),o=we(e,"isDesktopAnimationOff",3,!1),s=j(null),i=j(null),l=j(!1);Id({getDialog:()=>a(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=gn();Ae(()=>{e.stateDialog==="closing"&&(c.working?a(s)?.addEventListener("transitionend",()=>{a(s)?.close()},{once:!0}):a(s)?.close())});const{getDialogPageHeight:u}=so(),f=M(u);Ee(()=>{setTimeout(()=>{v(l,!0)},50)});var d=Fd(),h=B(d),m=b(h),g=b(m),w=b(g),_=b(w),A=b(_);{var D=x=>{var I=Rd();_e(I,1,pe(["navigateButton","buttonBack"]),"svelte-rt409n"),I.__click=[Od,e];var Y=b(I);ue(Y,()=>({"--size":"28px"})),me(Y.lastChild,{name:"back"});var X=U(Y,2);Ue(X,{children:(O,ae)=>{var re=Le("back");p(O,re)}}),p(x,I)};q(A,x=>{(!(n()||r())||n())&&e.onStartBack&&x(D)})}var E=U(_,2),y=b(E);{var k=x=>{var I=zd();_e(I,1,pe(["navigateButton","buttonClose"]),"svelte-rt409n"),I.__click=[Bd,e];var Y=b(I);ue(Y,()=>({"--size":"28px"})),me(Y.lastChild,{name:"close"});var X=U(Y,2);Ue(X,{children:(O,ae)=>{var re=Le("close");p(O,re)}}),p(x,I)};q(y,x=>{n()||r()||x(k)})}var C=U(g,2);Ce(C,()=>e.children),Je(m,x=>v(i,x),()=>a(i)),Je(h,x=>v(s,x),()=>a(s));var T=U(h,2);io(T,{get dialog(){return a(s)},get dialogInner(){return a(i)},get onClose(){return e.onStartClose}}),de(()=>{Nn(h,`height: ${a(f)+74}px`),_e(h,1,pe([{open:e.stateDialog==="open",isHeightAnimationOn:a(l),isAnimationOn:c.working,isDesktopAnimationOff:o(),hiddenDialog:r()}]),"svelte-rt409n")}),p(t,d),le()}Ge(["click"]);const jd=({onStartClose:t,onClose:e})=>{let n=j("close");return{get state(){return a(n)},set state(i){v(n,i,!0)},handleStartClose:(i=!1)=>{i||(v(n,"closing"),t?.())},handleOpen:()=>{v(n,"open")},handleClose:()=>{v(n,"close"),e?.()}}};function Vd(t,e){ie(e,!0);let n=we(e,"blockedDialog",3,!1),r=we(e,"hiddenDialog",3,!1),o=we(e,"onStartClose",3,()=>{}),s=we(e,"onClose",3,()=>{}),i=jd({onStartClose:o(),onClose:s()});Ae(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=d=>{d.key==="Escape"&&n()&&(d.preventDefault(),d.stopPropagation())};Ee(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=Q(),u=B(c);{var f=d=>{Hd(d,{get stateDialog(){return i.state},get blockedDialog(){return n()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(h,m)=>{var g=Q(),w=B(g);Ce(w,()=>e.children),p(h,g)},$$slots:{default:!0}})};q(u,d=>{i.state!=="close"&&d(f)})}p(t,c),le()}function Ud(t,e){ie(e,!0);let n=we(e,"blockedDialog",3,!1),r=we(e,"hiddenDialog",3,!1),o=we(e,"blockedBack",3,!1),s=we(e,"onStartClose",3,()=>{}),i=we(e,"onClose",3,()=>{});const l=M(()=>o()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=pn();Ee(()=>(c(),()=>{u()}));const{checkMobileSize:f}=Qt();var d=Q(),h=B(d);{var m=w=>{Ld(w,{get shownDialog(){return e.shownDialog},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return a(l)},get onClose(){return i()}})},g=w=>{Vd(w,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return a(l)},get onStartClose(){return s()},get onClose(){return i()}})};q(h,w=>{f()?w(m):w(g,!1)})}p(t,d),le()}function Bo(t,e){ie(e,!0);const{clearDialogPages:n,popDialogPage:r}=wt(),{checkMobileSize:o}=Qt();let s=we(e,"blocked",3,!1),i=we(e,"isLastDialog",3,!1),l=we(e,"onBack",3,()=>{}),c=we(e,"onClosed",3,()=>{});const{checkBlockedDialog:u,checkClosableDialog:f}=pn(),d=M(()=>s()||u()),h=M(f),m=()=>{(!a(d)||a(d))&&e.shown&&(r(),l()())},g=()=>{((!a(d)||a(d)&&a(h))&&e.shown||!e.shown)&&n()},w=()=>{c()()};{let _=M(()=>a(d)&&e.shown||a(h)===!1),A=M(()=>a(d)||i()&&(a(h)===!1||!o()));Ud(t,{get shownDialog(){return e.shown},get blockedDialog(){return a(_)},get hiddenDialog(){return e.hidden},get blockedBack(){return a(A)},onStartBack:m,onStartClose:g,onClose:w,children:(D,E)=>{var y=Q(),k=B(y);Ce(k,()=>e.children),p(D,y)},$$slots:{default:!0}})}le()}var Wd=K('<div class="svelte-1x9a4ve"><!></div>');function Oe(t,e){ie(e,!0);const{setDialogPageHeight:n}=so();let r=j(null);Ee(()=>{a(r)&&(a(r).getBoundingClientRect(),a(r).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(a(r))return i.observe(a(r)),()=>{a(r)&&i.unobserve(a(r)),i.disconnect()}});var o=Wd(),s=b(o);Ce(s,()=>e.children),Je(o,i=>v(r,i),()=>a(r)),p(t,o),le()}var qd=K('<div class="svelte-stjbkr"><p class="svelte-stjbkr">Page not found</p> <!></div>');function Kd(t,e){ie(e,!1);const{replace:n}=kt(),r=i=>{i.preventDefault(),n("/")};ua();var o=qd(),s=U(b(o),2);cn(s,{element:"a",href:"/",onClick:r,children:(i,l)=>{var c=Le("close");p(i,c)},$$slots:{default:!0}}),p(t,o),le()}const Yd="modulepreload",Gd=function(t){return"/"+t},zo={},Be=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(n.map(u=>{if(u=Gd(u),u in zo)return;zo[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=f?"stylesheet":Yd,f||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),f)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Xd=K('<div class="svelte-10xfz1h"><p class="svelte-10xfz1h">Something went wrong. Please reload the page</p> <!></div>');function Zd(t){var e=Xd(),n=U(b(e),2);cn(n,{onClick:()=>location.reload(),children:(r,o)=>{var s=Le("Reload");p(r,s)},$$slots:{default:!0}}),p(t,e)}var Jd=K('<div class="svelte-1mu1b44"><!></div>');function Qd(t,e){ie(e,!0);let n=j(!1);const{getDialogPageHeight:r}=so(),o=M(r);Ee(()=>{const c=setTimeout(()=>{v(n,!0)},250);return()=>{clearTimeout(c)}});var s=Jd(),i=b(s);{var l=c=>{lo(c,{})};q(i,c=>{a(n)&&c(l)})}de(()=>Nn(s,`min-height: ${a(o)??""}px;`)),p(t,s),le()}function Fe(t,e){ie(e,!0);const n={},r=Object.assign({"./Pages/About.svelte":()=>Be(()=>import("./a1OKK9xAj.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>Be(()=>import("./aoVcry-4R.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>Be(()=>import("./aBGmh41R0.js"),__vite__mapDeps([6,3,7])),"./Pages/AccountSetup.svelte":()=>Be(()=>import("./an_KVr1_f.js"),__vite__mapDeps([8,9])),"./Pages/Auth.svelte":()=>Be(()=>import("./aBDy-wQ8a.js"),__vite__mapDeps([10,11])),"./Pages/ChangeTags.svelte":()=>Be(()=>import("./aDGuW0KoJ.js"),[]),"./Pages/ClearStore.svelte":()=>Be(()=>import("./aDbTXOgtV.js"),__vite__mapDeps([12,13])),"./Pages/ConfirmAccessKey.svelte":()=>Be(()=>import("./aBChIOSrH.js"),__vite__mapDeps([14,4,3,15,16,17,18])),"./Pages/Exit.svelte":()=>Be(()=>import("./aB8E3PoOj.js"),__vite__mapDeps([19,20])),"./Pages/ExportData.svelte":()=>Be(()=>import("./aCeYkt_L2.js"),__vite__mapDeps([21,22,16,17,23,24,25,26])),"./Pages/ImportData.svelte":()=>Be(()=>import("./aBNqDzABF.js"),__vite__mapDeps([27,22,16,17,23,28])),"./Pages/Install.svelte":()=>Be(()=>import("./aD0r4KuIo.js"),__vite__mapDeps([29,30])),"./Pages/InstallSuccess.svelte":()=>Be(()=>import("./aCGXVAi3Q.js"),__vite__mapDeps([31,32])),"./Pages/NewNote.svelte":()=>Be(()=>import("./aBMQK0O6R.js"),__vite__mapDeps([33,34,22,16,17,23,35])),"./Pages/Note.svelte":()=>Be(()=>import("./aCUejJoiW.js"),__vite__mapDeps([36,34,22,16,17,23,35,37])),"./Pages/Settings.svelte":()=>Be(()=>import("./aB9JYul-A.js"),__vite__mapDeps([38,24,25,39])),"./Pages/Signin.svelte":()=>Be(()=>import("./aDpkUrEix.js"),__vite__mapDeps([40,4,3,15,41])),"./Pages/Signup.svelte":()=>Be(()=>import("./aDsCk936O.js"),__vite__mapDeps([42,15,4,3,43])),"./Pages/Subscription.svelte":()=>Be(()=>import("./aCdUSnIu8.js"),__vite__mapDeps([44,45])),"./Pages/Sync.svelte":()=>Be(()=>import("./aDhnuDweb.js"),__vite__mapDeps([46,47]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(r[c]){const u=r[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var s=Q(),i=B(s);Vl(i,()=>o(e.page),l=>{Qd(l,{})},(l,c)=>{const u=M(()=>a(c).default);var f=Q(),d=B(f);ql(d,()=>a(u),(h,m)=>{m(h,{get params(){return e.params},get hidden(){return e.hidden}})}),p(l,f)},l=>{Zd(l)}),p(t,s),le()}const $d=(t,e,n,r)=>{e.noteData.pinnedAt?(n(e.noteId,!1),fn("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),fn("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),v(r,!0)},ef=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),fn("Link copied"),v(n,!0)},tf=(t,e,n,r)=>{v(e,!0),ga({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await n(r.noteId)},onCancel:async()=>{}})};var nf=K('<li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),rf=(t,e,n)=>{v(e,!0),v(n,!0)},af=K('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),of=(t,e,n)=>{v(e,!0),v(n,!0)},sf=K('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete from bin</button></li>',1),lf=K('<ul class="menu svelte-8ve3pe"><!> <li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),cf=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function uf(t,e){ie(e,!0);const n=(y,k=xe)=>{var C=lf(),T=b(C);{var x=z=>{var ne=nf(),G=b(ne);G.__click=[ef,e,u];var W=b(G);ue(W,()=>({"--size":"20px"})),me(W.lastChild,{name:"copy"}),de(()=>_e(G,1,pe(["button",{buttonMenuDialog:k()}]),"svelte-8ve3pe")),p(z,ne)};q(T,z=>{k()&&e.noteData.url&&z(x)})}var I=U(T,2),Y=b(I);Y.__click=[$d,e,s,u];var X=b(Y);{let z=M(()=>e.noteData.pinnedAt?"pin-cancel":"pin");ue(X,()=>({"--size":"20px"})),me(X.lastChild,{get name(){return a(z)}})}var O=U(X),ae=U(I,2);{var re=z=>{var ne=af(),G=b(ne);G.__click=[rf,f,u];var W=b(G),J=b(W);ue(J,()=>({"--size":"20px"})),me(J.lastChild,{name:"bin"}),de(()=>_e(G,1,pe(["button",{buttonMenuDialog:k()}]),"svelte-8ve3pe")),p(z,ne)},ce=z=>{var ne=sf(),G=B(ne),W=b(G);W.__click=[of,d,u];var J=b(W),he=b(J);ue(he,()=>({"--size":"20px"})),me(he.lastChild,{name:"bin-cancel"});var te=U(G,2),F=b(te);F.__click=[tf,u,o,e];var $=b(F),Z=b($);ue(Z,()=>({"--size":"20px"})),me(Z.lastChild,{name:"bin"}),de(()=>{_e(W,1,pe(["button",{buttonMenuDialog:k()}]),"svelte-8ve3pe"),_e(F,1,pe(["button",{buttonMenuDialog:k()}]),"svelte-8ve3pe")}),p(z,ne)};q(ae,z=>{l()==="notes"?z(re):z(ce,!1)})}de(()=>{_e(Y,1,pe(["button",{buttonMenuDialog:k()}]),"svelte-8ve3pe"),ln(O,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),p(y,C)},{moveNoteToBin:r,deleteNote:o,pinNote:s,restoreNoteFromBin:i}=Jt();let l=we(e,"mode",3,"notes"),c=we(e,"shownMenu",15),u=j(!1),f=j(!1),d=j(!1);const{checkMobileSize:h}=Qt();let m=M(h);const g=async()=>{r(e.noteId),fn("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},w=()=>{i(e.noteId),fn("Note restored from bin",{onCancel:()=>{r(e.noteId)}})},_=()=>{a(f)?(v(f,!1),g()):a(d)&&(v(d,!1),w()),c(!1),v(u,!1)};var A=Q(),D=B(A);{var E=y=>{var k=Q(),C=B(k);{var T=I=>{Er(I,{get startClose(){return a(u)},onClosed:_,children:(Y,X)=>{n(Y,()=>!0)},$$slots:{default:!0}})},x=I=>{var Y=cf(),X=B(Y);ue(X,()=>({"--bottom":"-100px","--right":"20px"})),ha(X.lastChild,{get startClose(){return a(u)},get positionTop(){return e.showMenuUp},onClosed:_,children:(O,ae)=>{n(O,()=>!1)},$$slots:{default:!0}}),p(I,Y)};q(C,I=>{a(m)?I(T):I(x,!1)})}p(y,k)};q(D,y=>{c()&&y(E)})}p(t,A),le()}Ge(["click"]);const df=(t,e)=>{v(e,!0)},ff=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),fn("Link copied"),v(n,!1)},vf=(t,e)=>{v(e,!0)},hf=(t,e)=>{v(e,!1)},gf=(t,e,n,r)=>{t.preventDefault(),e(`${ee.Note}?id=${encodeURIComponent(n.noteId)}`),v(r,!1)};var pf=K('<div class="iconPlaceholder svelte-1jg44o9"></div>'),_f=K('<img loading="lazy" class="noteIcon" height="16" width="16" alt=""/>'),mf=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),wf=K('<div class="noteIconWrapper svelte-1jg44o9"><!></div>'),yf=K('<button class="button svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),bf=(t,e)=>{v(e,!1)},Sf=K('<!> <a target="_blank" rel="noopener noreferrer" class="button openLink svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),Cf=K('<li><!> <a class="noteLink svelte-1jg44o9" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function Ef(t,e){ie(e,!0);const{pushDialogPage:n}=wt(),{getFaviconEnabled:r}=pc();let o=we(e,"mode",3,"notes"),s=j(!1),i=j(!1),l=j(!1),c=M(r);const{checkMobileSize:u}=Qt(),f=x=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(x).host}.ico`}catch{return""}},d=e.noteData.url||"";var h=Cf();h.__focusin=[vf,i],h.__focusout=[hf,i];var m=b(h);{var g=x=>{var I=wf(),Y=b(I);{var X=ae=>{var re=Q(),ce=B(re);{var z=G=>{var W=pf();p(G,W)},ne=G=>{var W=_f();de(J=>Re(W,"src",J),[()=>f(d)]),to("error",W,()=>{v(l,!0)}),p(G,W)};q(ce,G=>{a(l)?G(z):G(ne,!1)})}p(ae,re)},O=ae=>{var re=mf(),ce=B(re);ue(ce,()=>({"--size":"16px"})),me(ce.lastChild,{name:"note"}),p(ae,re)};q(Y,ae=>{d?ae(X):ae(O,!1)})}p(x,I)};q(m,x=>{a(c)&&x(g)})}var w=U(m,2);w.__click=[gf,n,e,i];var _=b(w),A=U(w,2),D=b(A);{var E=x=>{var I=Sf(),Y=B(I);{var X=ce=>{var z=yf();z.__click=[ff,e,i];var ne=b(z);ue(ne,()=>({"--size":"20px"})),me(ne.lastChild,{name:"copy"});var G=U(ne,2);Ue(G,{children:(W,J)=>{var he=Le("copy link");p(W,he)}}),de(()=>Re(z,"tabindex",e.focusHidden?-1:0)),p(ce,z)};q(Y,ce=>{u()||ce(X)})}var O=U(Y,2);O.__click=[bf,i];var ae=b(O);ue(ae,()=>({"--size":"18px"})),me(ae.lastChild,{name:"open"});var re=U(ae,2);Ue(re,{children:(ce,z)=>{var ne=Le();de(()=>ln(ne,e.noteData.name||"unknown")),p(ce,ne)}}),de(()=>{Re(O,"href",d),Re(O,"tabindex",e.focusHidden?-1:0)}),p(x,I)};q(D,x=>{d&&x(E)})}var y=U(D,2);y.__click=[df,s],_e(y,1,pe(["button","buttonMenu"]),"svelte-1jg44o9");var k=b(y);ue(k,()=>({"--size":"18px","--rotate":"90deg"})),me(k.lastChild,{name:"menu"});var C=U(k,2);Ue(C,{children:(x,I)=>{var Y=Le("show menu");p(x,Y)}});var T=U(A,2);uf(T,{get mode(){return o()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return a(s)},set shownMenu(x){v(s,x,!0)}}),de((x,I)=>{_e(h,1,x,"svelte-1jg44o9"),Re(w,"tabindex",e.focusHidden?-1:0),Re(w,"href",I),ln(_,e.noteData?.name||"unknown"),_e(A,1,pe(["noteMenuWrapper",{noteMenuWrapperActive:a(i)}]),"svelte-1jg44o9"),Re(y,"tabindex",e.focusHidden?-1:0)},[()=>pe(["record",{pinned:!!e.noteData.pinnedAt}]),()=>`/?${yt}=${encodeURIComponent(`${ee.Note}?id=${encodeURIComponent(e.noteId)}`)}`]),p(t,h),le()}Ge(["focusin","focusout","click"]);var ar,oi,si;class kf{constructor(e){Te(this,ar);ut(this,"data");ut(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),Me(this,ar,oi).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,Me(this,ar,si).call(this)),e}isEmpty(){return this.data.length===0}}ar=new WeakSet,oi=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(n,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},si=function(){let e=0;const n=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<n&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<n&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class Tf{constructor(e,n){ut(this,"heap");ut(this,"done");ut(this,"cache",[]);this.heap=new kf(n);for(const r of e)this.heap.insert(r);this.done=!1}get(e,n){const r=this.cache.slice(e,n);for(;r.length<n-e&&!this.heap.isEmpty();){const o=this.heap.extractMin();o!==void 0&&(this.cache.push(o),r.push(o))}return this.heap.isEmpty()&&(this.done=!0),r}}var xf=K('<p class="message">No notes in bin</p>'),Pf=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),Df=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),Af=K('<div class="startingPage svelte-106i4nx"><div class="wrapperButtonsAdd svelte-106i4nx"><!></div> <div>or</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div></div>'),Nf=K('<div class="emptyStore svelte-106i4nx"><!></div>'),Mf=K("<span>Back to notes</span>"),Lf=K('<div class="emptyMessage svelte-106i4nx">No notes in bin</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),If=K('<div class="box"><div class="emptyMessage svelte-106i4nx">No notes found</div></div>'),Of=K('<div class="feed svelte-106i4nx"><ul class="svelte-106i4nx"></ul></div>'),Rf=K('<div class="wrapperFeed svelte-106i4nx"><div class="wrapperContainer svelte-106i4nx"><!></div></div>');function Bf(t,e){ie(e,!0);let n=we(e,"getNotes",3,()=>[]),r=we(e,"mode",3,"notes");const{getScrollContainer:o}=va(),{createHandleClickDialogPage:s,createDialogPageHref:i}=wt(),{getSelectedTags:l}=ro(),{getFeedOrder:c}=zs(),{replace:u}=kt(),f=Is();let d=54,h=j(0),m=j(0),g=j(0),w=j(0),_=[],A=j(0),D=j(null),E=M(o),y=null,k=null;const C=M(l);Ae(()=>{a(C),a(X),a(E)?.scrollTo(0,0)});const{enable:T}=oo(),x=()=>{T(),y||(y=requestAnimationFrame(()=>{const te=a(E)?.scrollTop||0;v(g,te,!0);const F=Math.ceil(a(h)/d);v(m,Math.floor(te/(d*F))*(d*F)),y=null}))},I=()=>{k||(k=requestAnimationFrame(()=>{v(h,window.innerHeight-180||0,!0);const te=a(E)?.scrollTop||0;v(g,te,!0);const F=Math.ceil(a(h)/d);v(m,Math.floor(te/(d*F))*(d*F)),k=null}))};Ee(()=>{I(),x()});const Y=()=>{x()};Ae(()=>(a(E)?.addEventListener("scroll",Y),window.addEventListener("resize",I),()=>{a(E)?.removeEventListener("scroll",Y),window.removeEventListener("resize",I)}));const X=M(c);Ae(()=>{const te=n()()||[],F=[],$=Array.from(a(C).values());for(let Z=te.length-1;Z>=0;Z--){if(!te[Z]||!te[Z].data)continue;const se=te[Z];if(!(r()==="notes"&&se?.data.deletedAt)&&!(r()==="bin"&&!se?.data.deletedAt)&&!(f&&!(se.data.name.toLowerCase().includes(f.getFeedSearch().toLowerCase())||se.data.url.toLowerCase().includes(f.getFeedSearch().toLowerCase())||se.data.text.toLowerCase().includes(f.getFeedSearch().toLowerCase())))){if(a(C).has("inbox")){if(se.data.tags.length>0)continue}else if(a(C).size&&$.some(ve=>!se.data.tags.includes(ve)))continue;F.push(se)}}v(w,F.length,!0),_=F,v(A,Date.now(),!0)}),Ae(()=>{a(X),a(A),v(D,new Tf(_,(te,F)=>{if(!te||!F||!te.data||!F.data)return 0;if(te.data.pinnedAt&&!F.data.pinnedAt)return-1;if(!te.data.pinnedAt&&F.data.pinnedAt)return 1;if(te.data.pinnedAt&&F.data.pinnedAt){if(te.data.pinnedAt<F.data.pinnedAt)return 1;if(te.data.pinnedAt>F.data.pinnedAt)return-1}switch(a(X)){case"newest":return te.data.updatedAt<F.data.updatedAt?1:-1;case"oldest":return te.data.updatedAt>F.data.updatedAt?1:-1;case"AtoZ":return te.data.name.localeCompare(F.data.name);case"ZtoA":return F.data.name.localeCompare(te.data.name);default:return 0}}),!0)});const O=M(()=>a(w)*d);let re=M(()=>{a(A);const te=Math.ceil(a(h)/d);let F=Math.floor(a(m)/d);return F=F-Math.min(F,te),a(D)?.get(F,F+te*3)||[]}),ce=M(()=>d*Math.ceil(a(h)/d));const z=M(()=>a(m)-Math.min(a(m),a(ce)));var ne=Rf(),G=b(ne),W=b(G);{var J=te=>{lo(te,{})},he=te=>{var F=Q(),$=B(F);{var Z=ve=>{var S=Nf(),L=b(S);{var P=H=>{var V=xf();p(H,V)},R=H=>{var V=Af(),be=b(V),Ie=b(be);{let Ne=M(()=>i(ee.NewNote)),qe=M(()=>s(ee.NewNote));cn(Ie,{element:"a",get href(){return a(Ne)},get onClick(){return a(qe)},children:(nt,Rt)=>{var rt=Pf(),ke=B(rt);ue(ke,()=>({"--size":"18px","--color":"#b0b0b0"})),me(ke.lastChild,{name:"plus"}),p(nt,rt)},$$slots:{default:!0}})}var ge=U(be,4),oe=b(ge);{let Ne=M(()=>i(ee.ImportData)),qe=M(()=>s(ee.ImportData));cn(oe,{element:"a",get href(){return a(Ne)},get onClick(){return a(qe)},children:(nt,Rt)=>{var rt=Df(),ke=B(rt);ue(ke,()=>({"--size":"18px","--color":"#b0b0b0"})),me(ke.lastChild,{name:"import"}),p(nt,rt)},$$slots:{default:!0}})}p(H,V)};q(L,H=>{r()==="bin"?H(P):H(R,!1)})}p(ve,S)},se=ve=>{var S=Q(),L=B(S);{var P=H=>{var V=Lf(),be=U(B(V),2),Ie=b(be);cn(Ie,{element:"a",href:"/",onClick:ge=>{ge.preventDefault(),u("/")},children:(ge,oe)=>{var Ne=Mf();p(ge,Ne)},$$slots:{default:!0}}),p(H,V)},R=H=>{var V=Q(),be=B(V);{var Ie=oe=>{var Ne=If();p(oe,Ne)},ge=oe=>{var Ne=Of(),qe=b(Ne);ca(qe,23,()=>a(re),nt=>nt.data,(nt,Rt,rt)=>{var ke=Q(),ze=B(ke);{var at=Bt=>{{let zt=M(()=>a(rt)*d<a(g)-a(z)-d/2||a(rt)*d>a(g)-a(z)+Math.floor(a(h)/d)*d),ot=M(()=>(a(rt)+3)*d<a(g)-a(z)-d/2||(a(rt)+3)*d>a(g)-a(z)+Math.floor(a(h)/d)*d);Ef(Bt,{get mode(){return r()},get focusHidden(){return a(zt)},get showMenuUp(){return a(ot)},get noteId(){return a(Rt).id},get noteData(){return a(Rt).data}})}};q(ze,Bt=>{a(Rt).data&&Bt(at)})}p(nt,ke)}),de(nt=>{Nn(Ne,`min-height: ${nt??""}px`),Nn(qe,`transform: translateY(${a(z)??""}px);`)},[()=>Math.max((a(O)>a(h),a(O)),0)]),p(oe,Ne)};q(be,oe=>{a(re).length===0?oe(Ie):oe(ge,!1)},!0)}p(H,V)};q(L,H=>{r()==="bin"&&!e.checkNotesInBin()?H(P):H(R,!1)},!0)}p(ve,S)};q($,ve=>{(n()()||[]).length===0?ve(Z):ve(se,!1)},!0)}p(te,F)};q(W,te=>{e.readyNotes?te(he,!1):te(J)})}p(t,ne),le()}var zf=K('<div class="fakeSidebar svelte-k57gez"></div> <div class="content svelte-k57gez"><!></div>',1);function Ff(t,e){ie(e,!0);const{getAppLocation:n}=kt(),{getGetNotes:r,isInitedNotes:o,checkNotesInBin:s}=Jt(),i=M(o),l=M(r),c=M(()=>n().pathname);var u=zf(),f=U(B(u),2),d=b(f);{let h=M(()=>a(c)==="/bin"?"bin":"notes");Bf(d,{get mode(){return a(h)},get getNotes(){return a(l)},get checkNotesInBin(){return s},get readyNotes(){return a(i)}})}p(t,u),le()}var Hf=K('<h1 class="svelte-1ky72l5"><!></h1>');function jf(t,e){var n=Hf(),r=b(n);Ce(r,()=>e.children),p(t,n)}const Vf=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var Uf=K('<div class="block svelte-1hz8bbk"><!> <p class="message svelte-1hz8bbk">Enjoy using the app!</p> <div class="container svelte-1hz8bbk"><!></div></div>');function Wf(t,e){ie(e,!1);const{pushDialogPage:n}=wt(),r=()=>{Vf()?n(ee.AccountSetup):n(ee.Install)};ua();var o=Uf(),s=b(o);jf(s,{children:(c,u)=>{var f=Le("Welcome");p(c,f)}});var i=U(s,4),l=b(i);cn(l,{onClick:r,fullWidth:!0,children:(c,u)=>{var f=Le("Start");p(c,f)},$$slots:{default:!0}}),p(t,o),le()}const Fo=(t,e=xe,n=xe,r)=>{let o=aa(()=>Di(r?.(),!1));var s=Q(),i=B(s);{var l=u=>{Oe(u,{children:(f,d)=>{Fe(f,{get hidden(){return a(o)},get page(){return ee.Settings}})},$$slots:{default:!0}})},c=u=>{var f=Q(),d=B(f);{var h=g=>{Oe(g,{children:(w,_)=>{Fe(w,{get hidden(){return a(o)},get page(){return ee.NewNote}})},$$slots:{default:!0}})},m=g=>{var w=Q(),_=B(w);{var A=E=>{Oe(E,{children:(y,k)=>{Fe(y,{get params(){return n()},get hidden(){return a(o)},get page(){return ee.Note}})},$$slots:{default:!0}})},D=E=>{var y=Q(),k=B(y);{var C=x=>{Oe(x,{children:(I,Y)=>{Fe(I,{get hidden(){return a(o)},get page(){return ee.ImportData}})},$$slots:{default:!0}})},T=x=>{var I=Q(),Y=B(I);{var X=ae=>{Oe(ae,{children:(re,ce)=>{Fe(re,{get hidden(){return a(o)},get page(){return ee.ExportData}})},$$slots:{default:!0}})},O=ae=>{var re=Q(),ce=B(re);{var z=G=>{Oe(G,{children:(W,J)=>{Fe(W,{get hidden(){return a(o)},get page(){return ee.ClearStore}})},$$slots:{default:!0}})},ne=G=>{var W=Q(),J=B(W);{var he=F=>{Oe(F,{children:($,Z)=>{Fe($,{get hidden(){return a(o)},get page(){return ee.AccountSetup}})},$$slots:{default:!0}})},te=F=>{var $=Q(),Z=B($);{var se=S=>{Oe(S,{children:(L,P)=>{Fe(L,{get hidden(){return a(o)},get page(){return ee.Install}})},$$slots:{default:!0}})},ve=S=>{var L=Q(),P=B(L);{var R=V=>{Oe(V,{children:(be,Ie)=>{Fe(be,{get hidden(){return a(o)},get page(){return ee.InstallSuccess}})},$$slots:{default:!0}})},H=V=>{var be=Q(),Ie=B(be);{var ge=Ne=>{Oe(Ne,{children:(qe,nt)=>{Wf(qe,{})},$$slots:{default:!0}})},oe=Ne=>{var qe=Q(),nt=B(qe);{var Rt=ke=>{Oe(ke,{children:(ze,at)=>{Fe(ze,{get hidden(){return a(o)},get page(){return ee.Auth}})},$$slots:{default:!0}})},rt=ke=>{var ze=Q(),at=B(ze);{var Bt=ot=>{Oe(ot,{children:(Tt,kr)=>{Fe(Tt,{get hidden(){return a(o)},get page(){return ee.Signup}})},$$slots:{default:!0}})},zt=ot=>{var Tt=Q(),kr=B(Tt);{var pa=$t=>{Oe($t,{children:(Tr,uo)=>{Fe(Tr,{get hidden(){return a(o)},get page(){return ee.Signin}})},$$slots:{default:!0}})},co=$t=>{var Tr=Q(),uo=B(Tr);{var ii=On=>{Oe(On,{children:(xr,fo)=>{Fe(xr,{get hidden(){return a(o)},get page(){return ee.AccessKeys}})},$$slots:{default:!0}})},li=On=>{var xr=Q(),fo=B(xr);{var ci=Rn=>{Oe(Rn,{children:(Pr,vo)=>{Fe(Pr,{get hidden(){return a(o)},get page(){return ee.Account}})},$$slots:{default:!0}})},ui=Rn=>{var Pr=Q(),vo=B(Pr);{var di=Bn=>{Oe(Bn,{children:(Dr,ho)=>{Fe(Dr,{get hidden(){return a(o)},get page(){return ee.ConfirmAccessKey}})},$$slots:{default:!0}})},fi=Bn=>{var Dr=Q(),ho=B(Dr);{var vi=zn=>{Oe(zn,{children:(Ar,go)=>{Fe(Ar,{get hidden(){return a(o)},get page(){return ee.Exit}})},$$slots:{default:!0}})},hi=zn=>{var Ar=Q(),go=B(Ar);{var gi=Fn=>{Oe(Fn,{children:(Nr,po)=>{Fe(Nr,{get hidden(){return a(o)},get page(){return ee.Sync}})},$$slots:{default:!0}})},pi=Fn=>{var Nr=Q(),po=B(Nr);{var _i=Hn=>{Oe(Hn,{children:(Mr,_o)=>{Fe(Mr,{get hidden(){return a(o)},get page(){return ee.Subscription}})},$$slots:{default:!0}})},mi=Hn=>{var Mr=Q(),_o=B(Mr);{var wi=jn=>{Oe(jn,{children:(_a,bi)=>{Fe(_a,{get hidden(){return a(o)},get page(){return ee.About}})},$$slots:{default:!0}})},yi=jn=>{Oe(jn,{children:(_a,bi)=>{Kd(_a,{})},$$slots:{default:!0}})};q(_o,jn=>{e()===ee.About?jn(wi):jn(yi,!1)},!0)}p(Hn,Mr)};q(po,Hn=>{e()===ee.Subscription?Hn(_i):Hn(mi,!1)},!0)}p(Fn,Nr)};q(go,Fn=>{e()===ee.Sync?Fn(gi):Fn(pi,!1)},!0)}p(zn,Ar)};q(ho,zn=>{e()===ee.Exit?zn(vi):zn(hi,!1)},!0)}p(Bn,Dr)};q(vo,Bn=>{e()===ee.ConfirmAccessKey?Bn(di):Bn(fi,!1)},!0)}p(Rn,Pr)};q(fo,Rn=>{e()===ee.Account?Rn(ci):Rn(ui,!1)},!0)}p(On,xr)};q(uo,On=>{e()===ee.AccessKeys?On(ii):On(li,!1)},!0)}p($t,Tr)};q(kr,$t=>{e()===ee.Signin?$t(pa):$t(co,!1)},!0)}p(ot,Tt)};q(at,ot=>{e()===ee.Signup?ot(Bt):ot(zt,!1)},!0)}p(ke,ze)};q(nt,ke=>{e()===ee.Auth?ke(Rt):ke(rt,!1)},!0)}p(Ne,qe)};q(Ie,Ne=>{e()===ee.Welcome?Ne(ge):Ne(oe,!1)},!0)}p(V,be)};q(P,V=>{e()===ee.InstallSuccess?V(R):V(H,!1)},!0)}p(S,L)};q(Z,S=>{e()===ee.Install?S(se):S(ve,!1)},!0)}p(F,$)};q(J,F=>{e()===ee.AccountSetup?F(he):F(te,!1)},!0)}p(G,W)};q(ce,G=>{e()===ee.ClearStore?G(z):G(ne,!1)},!0)}p(ae,re)};q(Y,ae=>{e()===ee.ExportData?ae(X):ae(O,!1)},!0)}p(x,I)};q(k,x=>{e()===ee.ImportData?x(C):x(T,!1)},!0)}p(E,y)};q(_,E=>{e()===ee.Note?E(A):E(D,!1)},!0)}p(g,w)};q(d,g=>{e()===ee.NewNote?g(h):g(m,!1)},!0)}p(u,f)};q(i,u=>{e()===ee.Settings?u(l):u(c,!1)})}p(t,s)};var qf=K("<!> <!>",1);function Kf(t,e){ie(e,!0);const{getDialogPages:n}=wt(),{getAccount:r}=qs();let o=M(n),s=M(()=>r()!==void 0);const{checkMobileSize:i}=Qt();let l=j(Xe([]));const c=M(i);Ae(()=>{a(o),a(c),Ot(()=>{if(a(c))a(o).length>=a(l).length?v(l,a(o).map(_=>({page:_,shown:!0})),!0):v(l,a(l).map((_,A)=>({page:_.page,shown:A<a(o).length})),!0);else if(a(o).length>=a(l).length)v(l,a(o).map(_=>({page:_,shown:!0})),!0);else{if(a(o).length===0){v(l,[{page:a(l)[a(l).length-1].page,shown:!1}],!0);return}v(l,a(o).map(_=>({page:_,shown:!0})),!0)}})});const u=()=>{v(l,a(o).map(_=>({page:_,shown:!0})),!0)};var f=qf(),d=B(f);{var h=_=>{Ff(_,{})};q(d,_=>{a(s)&&_(h)})}var m=U(d,2);{var g=_=>{var A=Q(),D=B(A);ca(D,19,()=>a(l),E=>E.page,(E,y,k)=>{const C=M(()=>a(y).page.split("?")[1]),T=M(()=>a(y).page.split("?")[0]);{let x=M(()=>a(k)!==a(l).length-1&&!!a(l)[a(k)+1]?.shown),I=M(()=>a(k)===0);Bo(E,{onClosed:u,get shown(){return a(y).shown},get hidden(){return a(x)},get isLastDialog(){return a(I)},children:(Y,X)=>{{let O=M(()=>a(k)!==a(l).length-1&&!!a(l)[a(k)+1]?.shown);Fo(Y,()=>a(T),()=>a(C),()=>a(O))}},$$slots:{default:!0}})}}),p(_,A)},w=_=>{var A=Q(),D=B(A);{var E=y=>{const k=M(()=>a(l)[a(l).length-1].page.split("?")[1]),C=M(()=>a(l)[a(l).length-1].page.split("?")[0]);{let T=M(()=>a(l).length===1);Bo(y,{onClosed:u,get shown(){return a(l)[a(l).length-1].shown},hidden:!1,get isLastDialog(){return a(T)},children:(x,I)=>{Fo(x,()=>a(C),()=>a(k))},$$slots:{default:!0}})}};q(D,y=>{a(l).length>0&&y(E)},!0)}p(_,A)};q(m,_=>{i()?_(g):_(w,!1)})}p(t,f),le()}function Yf(t,e){ie(e,!1);let n=0;Ee(()=>{document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-n;(n<30&&s>0||n>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),ua(),le()}const Gf=(t,e)=>{a(e)&&a(e).scrollTo({top:0})};var Xf=K('<div><button class="buttonTop svelte-1n46o8q"><!> <span class="icon svelte-1n46o8q"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),Zf=K('<!> <!> <!> <!> <main><div class="wrapperHeader svelte-1n46o8q"><!></div> <div class="container svelte-1n46o8q"><!></div></main> <!>',1);function Jf(t,e){ie(e,!0);const{replace:n}=kt(),{hasDialogPage:r}=wt(),{setScrollContainer:o}=va(),{getAccount:s,init:i}=qs(),{isInitedNotes:l}=Jt(),{getDialogPages:c}=wt(),{createBroadcastChannel:u,tabId:f}=fa(),d=u(),{getSidebarState:h}=da(),{setClosableDialog:m}=pn(),g=()=>{n(`/?${yt}=${ee.Welcome}`)};Ee(()=>{i($=>{$===void 0?g():((r(ee.Welcome)||r(ee.AccountSetup))&&n("/"),$?v(E,$):v(E,null))});const F=async $=>{const Z=JSON.parse($.data);if(Z.tabId&&Z.tabId===f)return;const se=Z;se.type==="initLocalAccount"||se.type==="initCloudAccount"||se.type==="updateAccount"||se.type==="disconnectCloudAccount"?n("/"):se.type==="exit"&&g()};return d.addEventListener(F),()=>d.removeEventListener(F)});const w=gn();Ee(async()=>{await new Promise(F=>setTimeout(F,250)),await Ts(),w.working=!0});let _=j(!1),A=0,D=M(()=>c().length>0),E=M(s),y=M(l),k=j(null);Ae(()=>{m(a(E)!==void 0)}),Ae(()=>{o(a(k))});const C=()=>{if(a(k)){const F=a(k).scrollTop||0;F===0?v(_,!1):!a(_)&&A>F?v(_,!0):a(_)&&A+50<F&&v(_,!1),A=F}},T=()=>{C()};Ae(()=>(a(k)?.addEventListener("scroll",T),window.addEventListener("resize",T),()=>{a(k)?.removeEventListener("scroll",T),window.removeEventListener("resize",T)}));const x=M(h);var I=Zf(),Y=B(I);Yf(Y,{});var X=U(Y,2);xu(X);var O=U(X,2);nu(O,{});var ae=U(O,2);Fu(ae,{});var re=U(ae,2),ce=b(re),z=b(ce);{var ne=F=>{xd(F,{})};q(z,F=>{a(E)!==void 0&&F(ne)})}var G=U(ce,2),W=b(G);{var J=F=>{Kf(F,{})};q(W,F=>{a(y)&&F(J)})}Je(re,F=>v(k,F),()=>a(k));var he=U(re,2);{var te=F=>{var $=Xf(),Z=b($);Z.__click=[Gf,k];var se=b(Z);Ue(se,{children:(L,P)=>{var R=Le("top");p(L,R)}});var ve=U(se,2),S=b(ve);ue(S,()=>({"--rotate":"90deg","--size":"28px"})),me(S.lastChild,{name:"back"}),de(()=>{Nn($,`--swiping-ratio: ${w.swipingRatio}; --transition-timing-default: ${w.duration}s;`),_e($,1,pe(["wrapperButtonTop",{isAnimationOn:w.working&&!w.isSwiping,open:a(D)||a(x).type!=="closed"}]),"svelte-1n46o8q")}),p(F,$)};q(he,F=>{a(_)&&F(te)})}de(()=>{Nn(re,`--swiping-ratio: ${w.swipingRatio}; --transition-timing-default: ${w.duration}s;`),_e(re,1,pe(["main",{isAnimationOn:w.working&&!w.isSwiping,open:a(D)||a(x).type!=="closed",blockScroll:a(x).type!=="closed"}]),"svelte-1n46o8q")}),p(t,I),le()}Ge(["click"]);function Qf(t){Jc(t,{children:(e,n)=>{Jf(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||zl(Qf,{target:document.getElementById("app")});export{Vf as $,qs as A,cn as B,ua as C,Jt as D,to as E,yt as F,tv as G,jf as H,me as I,we as J,_e as K,lo as L,pe as M,nv as N,rv as O,ee as P,Nn as Q,Qt as R,Ca as S,Je as T,Ot as U,Ue as V,Nu as W,cd as X,Ql as Y,fa as Z,pc as _,ue as a,av as a0,Re as b,b as c,p as d,ca as e,K as f,a as g,j as h,q as i,le as j,v as k,B as l,ln as m,wt as n,Ee as o,ie as p,pn as q,Xe as r,U as s,de as t,Ae as u,Q as v,Ge as w,Le as x,M as y,kt as z};
