import{p as me,n as he,z as be,A as we,q as Ae,o as Pe,k,h as N,g as m,u as Se,f as c,i as n,c as q,d as e,j as ke,l as i,H as Q,x,s as $,B as L,v as u,P as xe,L as Ce}from"./Bn3MMomC.js";const ye=async()=>"getInstalledRelatedApps"in navigator?(await navigator?.getInstalledRelatedApps?.())?.some(f=>f.platform==="webapp")??!1:!1,M=()=>window.installPrompt;function Ie(){const r=navigator.userAgent,f=/iPad|iPhone|iPod/.test(r);return f?!!f:!1}const U=()=>{const r=navigator.userAgent;return/android/i.test(r)},V=()=>{const r=navigator.userAgent;return/chrome|crios/i.test(r)&&!/edge|edgios|edga|brave/i.test(r)},ze=()=>{const r="serviceWorker"in navigator,f="onbeforeinstallprompt"in window;return r&&f},re=()=>{const r=navigator.userAgent;return!!(/Safari/.test(r)&&!/Chrome/.test(r)&&!/CriOS/.test(r)&&!/FxiOS/.test(r))};var $e=c('<p class="message svelte-1uagzbf">App is already installed.</p>'),We=c('<p class="message svelte-1uagzbf">For install app, select the share button and select "Add to Home Screen".</p>'),Be=c('<p class="message svelte-1uagzbf">Install app available on Safari.</p>'),Oe=c(`<p class="message svelte-1uagzbf">From the menu bar, choose File > Add to Dock. Or click the Share button in the Safari
				toolbar, then choose Add to Dock.</p>`),Fe=c('<p class="message svelte-1uagzbf">Installation is not supported in this browser. use Brave, Chrome or Edge.</p>'),He=c(`<p class="message svelte-1uagzbf">App is already installed or installation is not supported in this browser. use Brave,
					Chrome or Edge.</p>`),De=c('<p class="message svelte-1uagzbf">For better experience, install app from Chrome.</p>'),Ee=c(`<!> <p class="message svelte-1uagzbf">You can install app to have a better experience and more reliable storage or you can use it in
			your browser and install later.</p> <!> <div class="container svelte-1uagzbf"><!> <!></div>`,1),Le=c('<!> <div class="loader svelte-1uagzbf"><!></div>',1),Re=c('<p class="message svelte-1uagzbf">Open the app from your device.</p>'),Te=c('<!> <!> <div class="container svelte-1uagzbf"><!> <!></div>',1),je=c('<div class="block svelte-1uagzbf"><!></div>');function Me(r,f){me(f,!0);const{pushStackPages:se,clearStackPages:oe}=he(),{replace:X,clearHistoryStack:ne}=be(),{getAccount:Z}=we(),{blockDialog:ee}=Ae();let h=N("idle"),O=N(!1),R=N(null);const le=()=>{Z()===void 0?se(xe.AccountSetup):oe()},ae=()=>{le()},ie=async()=>{const l=M();try{l&&(k(h,"installing"),"onappinstalled"in window&&window.addEventListener("appinstalled",()=>{if(k(O,!0),!U()){ee(!1),ne();const v=Z();X(v===void 0?"/?stackPages=welcome%2CinstallSuccess":"/?stackPages=installSuccess")}}),await l.prompt(),l.userChoice?.then(v=>{v.outcome==="accepted"?(window.installPrompt=null,U()&&k(R,setTimeout(()=>{k(R,null),m(O)?k(h,"success"):k(h,"idle")},5e3),!0)):k(h,"idle")}))}catch(v){console.error("Error during install prompt:",v)}};Pe(()=>(ye().then(l=>{k(O,l,!0)}),()=>{m(R)&&clearTimeout(m(R))})),Se(()=>{ee(m(h)==="installing")});var te=je(),ce=q(te);{var ve=l=>{var v=Ee(),T=i(v);Q(T,{children:(a,s)=>{var p=x("install app");e(a,p)}});var j=$(T,4);{var Y=a=>{var s=$e();e(a,s)},b=a=>{var s=u(),p=i(s);{var z=d=>{var A=u(),t=i(A);{var g=o=>{var S=We();e(o,S)},P=o=>{var S=Be();e(o,S)};n(t,o=>{re()?o(g):o(P,!1)})}e(d,A)},w=d=>{var A=u(),t=i(A);{var g=o=>{var S=Oe();e(o,S)},P=o=>{var S=u(),de=i(S);{var ue=B=>{var H=u(),G=i(H);{var J=_=>{var E=Fe();e(_,E)},D=_=>{var E=He();e(_,E)};n(G,_=>{ze()?_(D,!1):_(J)})}e(B,H)},fe=B=>{var H=u(),G=i(H);{var J=D=>{var _=u(),E=i(_);{var ge=K=>{var _e=De();e(K,_e)};n(E,K=>{!V()&&M()&&K(ge)})}e(D,_)};n(G,D=>{U()&&D(J)},!0)}e(B,H)};n(de,B=>{M()?B(fe,!1):B(ue)},!0)}e(o,S)};n(t,o=>{re()?o(g):o(P,!1)},!0)}e(d,A)};n(p,d=>{Ie()?d(z):d(w,!1)},!0)}e(a,s)};n(j,a=>{m(O)?a(Y):a(b,!1)})}var C=$(j,2),y=q(C);{var F=a=>{L(a,{onClick:ie,fullWidth:!0,children:(s,p)=>{var z=x("install web app");e(s,z)},$$slots:{default:!0}})},I=a=>{var s=u(),p=i(s);{var z=w=>{L(w,{element:"a",target:"_blank",rel:"noopener noreferrer",href:`${window.location.origin}`,fullWidth:!0,children:(d,A)=>{var t=x("open app");e(d,t)},$$slots:{default:!0}})};n(p,w=>{m(O)&&w(z)},!0)}e(a,s)};n(y,a=>{M()?a(F):a(I,!1)})}var W=$(y,2);L(W,{onClick:ae,fullWidth:!0,type:"secondary",children:(a,s)=>{var p=x("continue in browser");e(a,p)},$$slots:{default:!0}}),e(l,v)},pe=l=>{var v=u(),T=i(v);{var j=b=>{var C=Le(),y=i(C);Q(y,{children:(W,a)=>{var s=x("installing app...");e(W,s)}});var F=$(y,2),I=q(F);Ce(I,{}),e(b,C)},Y=b=>{var C=u(),y=i(C);{var F=I=>{var W=Te(),a=i(W);Q(a,{children:(t,g)=>{var P=x("app installed successfully!");e(t,P)}});var s=$(a,2);{var p=t=>{var g=Re();e(t,g)};n(s,t=>{V()||t(p)})}var z=$(s,2),w=q(z);{var d=t=>{L(t,{element:"a",target:"_blank",rel:"noopener noreferrer",href:`${window.location.origin}`,fullWidth:!0,children:(g,P)=>{var o=x("open app");e(g,o)},$$slots:{default:!0}})};n(w,t=>{V()&&t(d)})}var A=$(w,2);L(A,{onClick:ae,fullWidth:!0,type:"secondary",children:(t,g)=>{var P=x("continue in browser");e(t,P)},$$slots:{default:!0}}),e(I,W)};n(y,I=>{m(h)==="success"&&I(F)},!0)}e(b,C)};n(T,b=>{m(h)==="installing"?b(j):b(Y,!1)},!0)}e(l,v)};n(ce,l=>{m(h)==="idle"?l(ve):l(pe,!1)})}e(r,te),ke()}export{Me as default};
