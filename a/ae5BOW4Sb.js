const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aDoa_V8fm.js","a/a3TquqTin.css","a/aBu5qDwnN.js","a/a9q_jSmK4.js","a/abA9hIFUQ.js","a/aBrkJtqMH.css","a/a425JyaR-.js","a/aDB02xhFr.css","a/aBol2W6eK.js","a/a54d_SC5m.css","a/aC4Z6RWQy.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/aTXyBTsBY.js","a/aY1d2PU1k.css","a/aBob50iAE.js","a/aC_rtfvif.js","a/aC2dX6fIB.css","a/aCyFOVHrX.js","a/aBeWFm1o7.css","a/aC969LWc5.css","a/aBtyA5gTJ.js","a/aCeh8XjKC.css","a/aDoEo5KQZ.js","a/aCBPoPn5g.css","a/aC6lDqmHl.js","a/awSKLKcnU.css","a/a97Ar9SV0.js","a/aBem4Ctjp.css","a/aCu5kJElk.js","a/aBdnakgrk.css","a/aDl5OsXFN.js","a/aB5Vv7TwJ.css","a/aBRLAuhmG.js","a/aCH18nfIo.css","a/aBYtJ7R2N.js","a/aCxDj277B.js","a/aCb6DfA6m.css","a/aD9NV8eIA.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var ml=Object.defineProperty;var us=t=>{throw TypeError(t)};var _l=(t,e,a)=>e in t?ml(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Lt=(t,e,a)=>_l(t,typeof e!="symbol"?e+"":e,a),mo=(t,e,a)=>e.has(t)||us("Cannot "+a);var F=(t,e,a)=>(mo(t,e,"read from private field"),a?a.call(t):e.get(t)),ze=(t,e,a)=>e.has(t)?us("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),Le=(t,e,a,r)=>(mo(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),ot=(t,e,a)=>(mo(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const wl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};wl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const yl=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};yl();const So=!1;var Go=Array.isArray,bl=Array.prototype.indexOf,no=Array.from,Sl=Object.defineProperty,ea=Object.getOwnPropertyDescriptor,zs=Object.getOwnPropertyDescriptors,Bs=Object.prototype,Cl=Array.prototype,ao=Object.getPrototypeOf,fs=Object.isExtensible;function sr(t){return typeof t=="function"}const Ye=()=>{};function kl(t){return typeof t?.then=="function"}function Tl(t){return t()}function Co(t){for(var e=0;e<t.length;e++)t[e]()}function js(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function xl(t,e,a=!1){return t===void 0?a?e():e:t}const xt=2,Xo=4,ro=8,El=1<<24,Bn=16,jn=32,xa=64,oo=128,gn=512,Mt=1024,qt=2048,Cn=4096,Jt=8192,Mn=16384,Jo=32768,ia=65536,vs=1<<17,Hs=1<<18,nr=1<<19,Us=1<<20,An=1<<25,ka=32768,ko=1<<21,Zo=1<<22,ta=1<<23,na=Symbol("$state"),Ws=Symbol("legacy props"),Pl=Symbol(""),Oa=new class extends Error{constructor(){super(...arguments);Lt(this,"name","StaleReactionError");Lt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function qs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Nl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Al(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ml(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Dl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Il(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ll(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Rl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ol(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Fl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function zl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Bl=1,jl=2,Vs=4,Hl=8,Ul=16,Wl=1,ql=2,Vl=4,Kl=8,Yl=16,Gl=1,Xl=2,kt=Symbol(),Jl="http://www.w3.org/1999/xhtml";function Zl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ks(t){return t===this.v}function Ql(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Ys(t){return!Ql(t,this.v)}let ar=!1,$l=!1;function ec(){ar=!0}const tc=[];function va(t,e=!1,a=!1){return jr(t,new Map,"",tc,null,a)}function jr(t,e,a,r,o=null,s=!1){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Go(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var d=0;d<t.length;d+=1){var c=t[d];d in t&&(l[d]=jr(c,e,a,r,null,s))}return l}if(ao(t)===Bs){l={},e.set(t,l),o!==null&&e.set(o,l);for(var u in t)l[u]=jr(t[u],e,a,r,null,s);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return jr(t.toJSON(),e,a,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let nt=null;function Ya(t){nt=t}function ft(t){return Gs().get(t)}function vt(t,e){return Gs().set(t,e),e}function fe(t,e=!1,a){nt={p:nt,i:!1,c:null,e:null,s:t,x:null,l:ar&&!e?{s:null,u:null,$:[]}:null}}function ve(t){var e=nt,a=e.e;if(a!==null){e.e=null;for(var r of a)gi(r)}return t!==void 0&&(e.x=t),e.i=!0,nt=e.p,t??{}}function rr(){return!ar||nt!==null&&nt.l===null}function Gs(t){return nt===null&&qs(),nt.c??(nt.c=new Map(nc(nt)||void 0))}function nc(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let ha=[];function Xs(){var t=ha;ha=[],Co(t)}function Ea(t){if(ha.length===0&&!ja){var e=ha;queueMicrotask(()=>{e===ha&&Xs()})}ha.push(t)}function ac(){for(;ha.length>0;)Xs()}function Js(t){var e=Je;if(e===null)return We.f|=ta,t;if((e.f&Jo)===0){if((e.f&oo)===0)throw t;e.b.error(t)}else Ga(t,e)}function Ga(t,e){for(;e!==null;){if((e.f&oo)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Or=new Set;let Ze=null,Hr=null,ln=null,on=[],so=null,To=!1,ja=!1;var Ua,Wa,pa,ma,Tr,qa,Va,Tt,xo,lr,Eo,Zs,Qs;const Zr=class Zr{constructor(){ze(this,Tt);Lt(this,"committed",!1);Lt(this,"current",new Map);Lt(this,"previous",new Map);ze(this,Ua,new Set);ze(this,Wa,new Set);ze(this,pa,0);ze(this,ma,0);ze(this,Tr,null);ze(this,qa,new Set);ze(this,Va,new Set);Lt(this,"skipped_effects",new Set);Lt(this,"is_fork",!1)}is_deferred(){return this.is_fork||F(this,ma)>0}process(e){on=[],Hr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)ot(this,Tt,xo).call(this,r,a);this.is_fork||ot(this,Tt,Zs).call(this),this.is_deferred()?(ot(this,Tt,lr).call(this,a.effects),ot(this,Tt,lr).call(this,a.render_effects)):(Hr=this,Ze=null,gs(a.render_effects),gs(a.effects),Hr=null,F(this,Tr)?.resolve()),ln=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&ta)===0&&(this.current.set(e,e.v),ln?.set(e,e.v))}activate(){Ze=this,this.apply()}deactivate(){Ze===this&&(Ze=null,ln=null)}flush(){if(this.activate(),on.length>0){if(ei(),Ze!==null&&Ze!==this)return}else F(this,pa)===0&&this.process([]);this.deactivate()}discard(){for(const e of F(this,Wa))e(this);F(this,Wa).clear()}increment(e){Le(this,pa,F(this,pa)+1),e&&Le(this,ma,F(this,ma)+1)}decrement(e){Le(this,pa,F(this,pa)-1),e&&Le(this,ma,F(this,ma)-1),this.revive()}revive(){for(const e of F(this,qa))F(this,Va).delete(e),It(e,qt),Ta(e);for(const e of F(this,Va))It(e,Cn),Ta(e);this.flush()}oncommit(e){F(this,Ua).add(e)}ondiscard(e){F(this,Wa).add(e)}settled(){return(F(this,Tr)??Le(this,Tr,js())).promise}static ensure(){if(Ze===null){const e=Ze=new Zr;Or.add(Ze),ja||Zr.enqueue(()=>{Ze===e&&e.flush()})}return Ze}static enqueue(e){Ea(e)}apply(){}};Ua=new WeakMap,Wa=new WeakMap,pa=new WeakMap,ma=new WeakMap,Tr=new WeakMap,qa=new WeakMap,Va=new WeakMap,Tt=new WeakSet,xo=function(e,a){e.f^=Mt;for(var r=e.first;r!==null;){var o=r.f,s=(o&(jn|xa))!==0,i=s&&(o&Mt)!==0,l=i||(o&Jt)!==0||this.skipped_effects.has(r);if((r.f&oo)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=Mt:(o&Xo)!==0?a.effects.push(r):Mr(r)&&((r.f&Bn)!==0&&F(this,qa).add(r),_r(r));var d=r.first;if(d!==null){r=d;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===a.effect&&(ot(this,Tt,lr).call(this,a.effects),ot(this,Tt,lr).call(this,a.render_effects),a=a.parent),r=c.next,c=c.parent}},lr=function(e){for(const a of e)(a.f&qt)!==0?F(this,qa).add(a):(a.f&Cn)!==0&&F(this,Va).add(a),ot(this,Tt,Eo).call(this,a.deps),It(a,Mt)},Eo=function(e){if(e!==null)for(const a of e)(a.f&xt)===0||(a.f&ka)===0||(a.f^=ka,ot(this,Tt,Eo).call(this,a.deps))},Zs=function(){if(F(this,ma)===0){for(const e of F(this,Ua))e();F(this,Ua).clear()}F(this,pa)===0&&ot(this,Tt,Qs).call(this)},Qs=function(){var s;if(Or.size>1){this.previous.clear();var e=ln,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Or){if(i===this){a=!1;continue}const l=[];for(const[c,u]of this.current){if(i.current.has(c))if(a&&u!==i.current.get(c))i.current.set(c,u);else continue;l.push(c)}if(l.length===0)continue;const d=[...i.current.keys()].filter(c=>!this.current.has(c));if(d.length>0){var o=on;on=[];const c=new Set,u=new Map;for(const v of l)ti(v,d,c,u);if(on.length>0){Ze=i,i.apply();for(const v of on)ot(s=i,Tt,xo).call(s,v,r);i.deactivate()}on=o}}Ze=null,ln=e}this.committed=!0,Or.delete(this)};let bn=Zr;function $s(t){var e=ja;ja=!0;try{for(var a;;){if(ac(),on.length===0&&(Ze?.flush(),on.length===0))return so=null,a;ei()}}finally{ja=e}}function ei(){var t=Ca;To=!0;var e=null;try{var a=0;for(Kr(!0);on.length>0;){var r=bn.ensure();if(a++>1e3){var o,s;rc()}r.process(on),aa.clear()}}finally{To=!1,Kr(t),so=null}}function rc(){try{Il()}catch(t){Ga(t,so)}}let En=null;function gs(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(Mn|Jt))===0&&Mr(r)&&(En=new Set,_r(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?mi(r):r.fn=null),En?.size>0)){aa.clear();for(const o of En){if((o.f&(Mn|Jt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)En.has(i)&&(En.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const d=s[l];(d.f&(Mn|Jt))===0&&_r(d)}}En.clear()}}En=null}}function ti(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&xt)!==0?ti(o,e,a,r):(s&(Zo|Bn))!==0&&(s&qt)===0&&ni(o,e,r)&&(It(o,qt),Ta(o))}}function ni(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&xt)!==0&&ni(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function Ta(t){for(var e=so=t;e.parent!==null;){e=e.parent;var a=e.f;if(To&&e===Je&&(a&Bn)!==0&&(a&Hs)===0)return;if((a&(xa|jn))!==0){if((a&Mt)===0)return;e.f^=Mt}}on.push(e)}function oc(t){let e=0,a=kn(0),r;return()=>{pr()&&(n(a),lo(()=>(e===0&&(r=Vt(()=>t(()=>ra(a)))),e+=1,()=>{Ea(()=>{e-=1,e===0&&(r?.(),r=void 0,ra(a))})})))}}var sc=ia|nr|oo;function ic(t,e,a){new lc(t,e,a)}var nn,an,Yo,pn,_a,mn,rn,Ht,_n,Nn,Xn,wa,Jn,ya,Zn,Qr,Ct,cc,dc,Po,Ur,Wr,No;class lc{constructor(e,a,r){ze(this,Ct);Lt(this,"parent");ze(this,nn,!1);ze(this,an);ze(this,Yo,null);ze(this,pn);ze(this,_a);ze(this,mn);ze(this,rn,null);ze(this,Ht,null);ze(this,_n,null);ze(this,Nn,null);ze(this,Xn,null);ze(this,wa,0);ze(this,Jn,0);ze(this,ya,!1);ze(this,Zn,null);ze(this,Qr,oc(()=>(Le(this,Zn,kn(F(this,wa))),()=>{Le(this,Zn,null)})));Le(this,an,e),Le(this,pn,a),Le(this,_a,r),this.parent=Je.b,Le(this,nn,!!F(this,pn).pending),Le(this,mn,or(()=>{Je.b=this;{var o=ot(this,Ct,Po).call(this);try{Le(this,rn,sn(()=>r(o)))}catch(s){this.error(s)}F(this,Jn)>0?ot(this,Ct,Wr).call(this):Le(this,nn,!1)}return()=>{F(this,Xn)?.remove()}},sc))}is_pending(){return F(this,nn)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!F(this,pn).pending}update_pending_count(e){ot(this,Ct,No).call(this,e),Le(this,wa,F(this,wa)+e),F(this,Zn)&&Dn(F(this,Zn),F(this,wa))}get_effect_pending(){return F(this,Qr).call(this),n(F(this,Zn))}error(e){var a=F(this,pn).onerror;let r=F(this,pn).failed;if(F(this,ya)||!a&&!r)throw e;F(this,rn)&&(Wt(F(this,rn)),Le(this,rn,null)),F(this,Ht)&&(Wt(F(this,Ht)),Le(this,Ht,null)),F(this,_n)&&(Wt(F(this,_n)),Le(this,_n,null));var o=!1,s=!1;const i=()=>{if(o){Zl();return}o=!0,s&&zl(),bn.ensure(),Le(this,wa,0),F(this,_n)!==null&&Sa(F(this,_n),()=>{Le(this,_n,null)}),Le(this,nn,this.has_pending_snippet()),Le(this,rn,ot(this,Ct,Ur).call(this,()=>(Le(this,ya,!1),sn(()=>F(this,_a).call(this,F(this,an)))))),F(this,Jn)>0?ot(this,Ct,Wr).call(this):Le(this,nn,!1)};var l=We;try{Ut(null),s=!0,a?.(e,i),s=!1}catch(d){Ga(d,F(this,mn)&&F(this,mn).parent)}finally{Ut(l)}r&&Ea(()=>{Le(this,_n,ot(this,Ct,Ur).call(this,()=>{bn.ensure(),Le(this,ya,!0);try{return sn(()=>{r(F(this,an),()=>e,()=>i)})}catch(d){return Ga(d,F(this,mn).parent),null}finally{Le(this,ya,!1)}}))})}}nn=new WeakMap,an=new WeakMap,Yo=new WeakMap,pn=new WeakMap,_a=new WeakMap,mn=new WeakMap,rn=new WeakMap,Ht=new WeakMap,_n=new WeakMap,Nn=new WeakMap,Xn=new WeakMap,wa=new WeakMap,Jn=new WeakMap,ya=new WeakMap,Zn=new WeakMap,Qr=new WeakMap,Ct=new WeakSet,cc=function(){try{Le(this,rn,sn(()=>F(this,_a).call(this,F(this,an))))}catch(e){this.error(e)}Le(this,nn,!1)},dc=function(){const e=F(this,pn).pending;e&&(Le(this,Ht,sn(()=>e(F(this,an)))),bn.enqueue(()=>{var a=ot(this,Ct,Po).call(this);Le(this,rn,ot(this,Ct,Ur).call(this,()=>(bn.ensure(),sn(()=>F(this,_a).call(this,a))))),F(this,Jn)>0?ot(this,Ct,Wr).call(this):(Sa(F(this,Ht),()=>{Le(this,Ht,null)}),Le(this,nn,!1))}))},Po=function(){var e=F(this,an);return F(this,nn)&&(Le(this,Xn,In()),F(this,an).before(F(this,Xn)),e=F(this,Xn)),e},Ur=function(e){var a=Je,r=We,o=nt;Tn(F(this,mn)),Ut(F(this,mn)),Ya(F(this,mn).ctx);try{return e()}catch(s){return Js(s),null}finally{Tn(a),Ut(r),Ya(o)}},Wr=function(){const e=F(this,pn).pending;F(this,rn)!==null&&(Le(this,Nn,document.createDocumentFragment()),F(this,Nn).append(F(this,Xn)),yi(F(this,rn),F(this,Nn))),F(this,Ht)===null&&Le(this,Ht,sn(()=>e(F(this,an))))},No=function(e){var a;if(!this.has_pending_snippet()){this.parent&&ot(a=this.parent,Ct,No).call(a,e);return}Le(this,Jn,F(this,Jn)+e),F(this,Jn)===0&&(Le(this,nn,!1),F(this,Ht)&&Sa(F(this,Ht),()=>{Le(this,Ht,null)}),F(this,Nn)&&(F(this,an).before(F(this,Nn)),Le(this,Nn,null)))};function uc(t,e,a,r){const o=rr()?Pr:Nr;if(a.length===0&&t.length===0){r(e.map(o));return}var s=Ze,i=Je,l=ai();function d(){Promise.all(a.map(c=>fc(c))).then(c=>{l();try{r([...e.map(o),...c])}catch(u){(i.f&Mn)===0&&Ga(u,i)}s?.deactivate(),hr()}).catch(c=>{Ga(c,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return d()}finally{s?.deactivate(),hr()}}):d()}function ai(){var t=Je,e=We,a=nt,r=Ze;return function(s=!0){Tn(t),Ut(e),Ya(a),s&&r?.activate()}}function hr(){Tn(null),Ut(null),Ya(null)}function Pr(t){var e=xt|qt,a=We!==null&&(We.f&xt)!==0?We:null;return Je!==null&&(Je.f|=nr),{ctx:nt,deps:null,effects:null,equals:Ks,f:e,fn:t,reactions:null,rv:0,v:kt,wv:0,parent:a??Je,ac:null}}function fc(t,e){let a=Je;a===null&&Nl();var r=a.b,o=void 0,s=kn(kt),i=!We,l=new Map;return Cc(()=>{var d=js();o=d.promise;try{Promise.resolve(t()).then(d.resolve,d.reject).then(()=>{c===Ze&&c.committed&&c.deactivate(),hr()})}catch(h){d.reject(h),hr()}var c=Ze;if(i){var u=!r.is_pending();r.update_pending_count(1),c.increment(u),l.get(c)?.reject(Oa),l.delete(c),l.set(c,d)}const v=(h,p=void 0)=>{if(c.activate(),p)p!==Oa&&(s.f|=ta,Dn(s,p));else{(s.f&ta)!==0&&(s.f^=ta),Dn(s,h);for(const[m,T]of l){if(l.delete(m),m===c)break;T.reject(Oa)}}i&&(r.update_pending_count(-1),c.decrement(u))};d.promise.then(v,h=>v(null,h||"unknown"))}),vi(()=>{for(const d of l.values())d.reject(Oa)}),new Promise(d=>{function c(u){function v(){u===o?d(s):c(o)}u.then(v,v)}c(o)})}function A(t){const e=Pr(t);return bi(e),e}function Nr(t){const e=Pr(t);return e.equals=Ys,e}function ri(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Wt(e[a])}}function vc(t){for(var e=t.parent;e!==null;){if((e.f&xt)===0)return(e.f&Mn)===0?e:null;e=e.parent}return null}function Qo(t){var e,a=Je;Tn(vc(t));try{t.f&=~ka,ri(t),e=Ti(t)}finally{Tn(a)}return e}function oi(t){var e=Qo(t);if(t.equals(e)||(Ze?.is_fork||(t.v=e),t.wv=Ci()),!Pa)if(ln!==null)(pr()||Ze?.is_fork)&&ln.set(t,e);else{var a=(t.f&gn)===0?Cn:Mt;It(t,a)}}let Ao=new Set;const aa=new Map;let si=!1;function kn(t,e){var a={f:0,v:t,reactions:null,equals:Ks,rv:0,wv:0};return a}function I(t,e){const a=kn(t);return bi(a),a}function Mo(t,e=!1,a=!0){var o;const r=kn(t);return e||(r.equals=Ys),ar&&a&&nt!==null&&nt.l!==null&&((o=nt.l).s??(o.s=[])).push(r),r}function f(t,e,a=!1){We!==null&&(!Sn||(We.f&vs)!==0)&&rr()&&(We.f&(xt|Bn|Zo|vs))!==0&&!Ln?.includes(t)&&Fl();let r=a?ut(e):e;return Dn(t,r)}function Dn(t,e){if(!t.equals(e)){var a=t.v;Pa?aa.set(t,e):aa.set(t,a),t.v=e;var r=bn.ensure();r.capture(t,a),(t.f&xt)!==0&&((t.f&qt)!==0&&Qo(t),It(t,(t.f&gn)!==0?Mt:Cn)),t.wv=Ci(),ii(t,qt),rr()&&Je!==null&&(Je.f&Mt)!==0&&(Je.f&(jn|xa))===0&&(en===null?xc([t]):en.push(t)),!r.is_fork&&Ao.size>0&&!si&&gc()}return e}function gc(){si=!1;var t=Ca;Kr(!0);const e=Array.from(Ao);try{for(const a of e)(a.f&Mt)!==0&&It(a,Cn),Mr(a)&&_r(a)}finally{Kr(t)}Ao.clear()}function ra(t){f(t,t.v+1)}function ii(t,e){var a=t.reactions;if(a!==null)for(var r=rr(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===Je)){var d=(l&qt)===0;if(d&&It(i,e),(l&xt)!==0){var c=i;ln?.delete(c),(l&ka)===0&&(l&gn&&(i.f|=ka),ii(c,Cn))}else d&&((l&Bn)!==0&&En!==null&&En.add(i),Ta(i))}}}function ut(t){if(typeof t!="object"||t===null||na in t)return t;const e=ao(t);if(e!==Bs&&e!==Cl)return t;var a=new Map,r=Go(t),o=I(0),s=Rn,i=l=>{if(Rn===s)return l();var d=We,c=Rn;Ut(null),_s(s);var u=l();return Ut(d),_s(c),u};return r&&a.set("length",I(t.length)),new Proxy(t,{defineProperty(l,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Rl();var u=a.get(d);return u===void 0?u=i(()=>{var v=I(c.value);return a.set(d,v),v}):f(u,c.value,!0),!0},deleteProperty(l,d){var c=a.get(d);if(c===void 0){if(d in l){const u=i(()=>I(kt));a.set(d,u),ra(o)}}else f(c,kt),ra(o);return!0},get(l,d,c){if(d===na)return t;var u=a.get(d),v=d in l;if(u===void 0&&(!v||ea(l,d)?.writable)&&(u=i(()=>{var p=ut(v?l[d]:kt),m=I(p);return m}),a.set(d,u)),u!==void 0){var h=n(u);return h===kt?void 0:h}return Reflect.get(l,d,c)},getOwnPropertyDescriptor(l,d){var c=Reflect.getOwnPropertyDescriptor(l,d);if(c&&"value"in c){var u=a.get(d);u&&(c.value=n(u))}else if(c===void 0){var v=a.get(d),h=v?.v;if(v!==void 0&&h!==kt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(l,d){if(d===na)return!0;var c=a.get(d),u=c!==void 0&&c.v!==kt||Reflect.has(l,d);if(c!==void 0||Je!==null&&(!u||ea(l,d)?.writable)){c===void 0&&(c=i(()=>{var h=u?ut(l[d]):kt,p=I(h);return p}),a.set(d,c));var v=n(c);if(v===kt)return!1}return u},set(l,d,c,u){var v=a.get(d),h=d in l;if(r&&d==="length")for(var p=c;p<v.v;p+=1){var m=a.get(p+"");m!==void 0?f(m,kt):p in l&&(m=i(()=>I(kt)),a.set(p+"",m))}if(v===void 0)(!h||ea(l,d)?.writable)&&(v=i(()=>I(void 0)),f(v,ut(c)),a.set(d,v));else{h=v.v!==kt;var T=i(()=>ut(c));f(v,T)}var _=Reflect.getOwnPropertyDescriptor(l,d);if(_?.set&&_.set.call(u,c),!h){if(r&&typeof d=="string"){var S=a.get("length"),B=Number(d);Number.isInteger(B)&&B>=S.v&&f(S,B+1)}ra(o)}return!0},ownKeys(l){n(o);var d=Reflect.ownKeys(l).filter(v=>{var h=a.get(v);return h===void 0||h.v!==kt});for(var[c,u]of a)u.v!==kt&&!(c in l)&&d.push(c);return d},setPrototypeOf(){Ol()}})}var hs,li,ci,di;function hc(){if(hs===void 0){hs=window,li=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;ci=ea(e,"firstChild").get,di=ea(e,"nextSibling").get,fs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),fs(a)&&(a.__t=void 0)}}function In(t=""){return document.createTextNode(t)}function Xa(t){return ci.call(t)}function Ar(t){return di.call(t)}function b(t,e){return Xa(t)}function M(t,e=!1){{var a=Xa(t);return a instanceof Comment&&a.data===""?Ar(a):a}}function D(t,e=1,a=!1){let r=t;for(;e--;)r=Ar(r);return r}function pc(t){t.textContent=""}function ui(){return!1}let ps=!1;function mc(){ps||(ps=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function io(t){var e=We,a=Je;Ut(null),Tn(null);try{return t()}finally{Ut(e),Tn(a)}}function _c(t,e,a,r=a){t.addEventListener(e,()=>io(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),mc()}function fi(t){Je===null&&(We===null&&Dl(),Ml()),Pa&&Al()}function wc(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function xn(t,e,a){var r=Je;r!==null&&(r.f&Jt)!==0&&(t|=Jt);var o={ctx:nt,deps:null,nodes:null,f:t|qt|gn,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{_r(o),o.f|=Jo}catch(l){throw Wt(o),l}else e!==null&&Ta(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&nr)===0&&(s=s.first,(t&Bn)!==0&&(t&ia)!==0&&s!==null&&(s.f|=ia)),s!==null&&(s.parent=r,r!==null&&wc(s,r),We!==null&&(We.f&xt)!==0&&(t&xa)===0)){var i=We;(i.effects??(i.effects=[])).push(s)}return o}function pr(){return We!==null&&!Sn}function vi(t){const e=xn(ro,null,!1);return It(e,Mt),e.teardown=t,e}function Be(t){fi();var e=Je.f,a=!We&&(e&jn)!==0&&(e&Jo)===0;if(a){var r=nt;(r.e??(r.e=[])).push(t)}else return gi(t)}function gi(t){return xn(Xo|Us,t,!1)}function yc(t){return fi(),xn(ro|Us,t,!0)}function bc(t){bn.ensure();const e=xn(xa|nr,t,!0);return(a={})=>new Promise(r=>{a.outro?Sa(e,()=>{Wt(e),r(void 0)}):(Wt(e),r(void 0))})}function Sc(t){return xn(Xo,t,!1)}function Cc(t){return xn(Zo|nr,t,!0)}function lo(t,e=0){return xn(ro|e,t,!0)}function xe(t,e=[],a=[],r=[]){uc(r,e,a,o=>{xn(ro,()=>t(...o.map(n)),!0)})}function or(t,e=0){var a=xn(Bn|e,t,!0);return a}function sn(t){return xn(jn|nr,t,!0)}function hi(t){var e=t.teardown;if(e!==null){const a=Pa,r=We;ms(!0),Ut(null);try{e.call(null)}finally{ms(a),Ut(r)}}}function pi(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&io(()=>{o.abort(Oa)});var r=a.next;(a.f&xa)!==0?a.parent=null:Wt(a,e),a=r}}function kc(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&jn)===0&&Wt(e),e=a}}function Wt(t,e=!0){var a=!1;(e||(t.f&Hs)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Tc(t.nodes.start,t.nodes.end),a=!0),pi(t,e&&!a),Yr(t,0),It(t,Mn);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();hi(t);var o=t.parent;o!==null&&o.first!==null&&mi(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Tc(t,e){for(;t!==null;){var a=t===e?null:Ar(t);t.remove(),t=a}}function mi(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function Sa(t,e,a=!0){var r=[];_i(t,r,!0);var o=()=>{a&&Wt(t),e&&e()},s=r.length;if(s>0){var i=()=>--s||o();for(var l of r)l.out(i)}else o()}function _i(t,e,a){if((t.f&Jt)===0){t.f^=Jt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&e.push(l);for(var o=t.first;o!==null;){var s=o.next,i=(o.f&ia)!==0||(o.f&jn)!==0&&(t.f&Bn)!==0;_i(o,e,i?a:!1),o=s}}}function $o(t){wi(t,!0)}function wi(t,e){if((t.f&Jt)!==0){t.f^=Jt,(t.f&Mt)===0&&(It(t,qt),Ta(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&ia)!==0||(a.f&jn)!==0;wi(a,o?e:!1),a=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)(i.is_global||e)&&i.in()}}function yi(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var o=a===r?null:Ar(a);e.append(a),a=o}}let Ca=!1;function Kr(t){Ca=t}let Pa=!1;function ms(t){Pa=t}let We=null,Sn=!1;function Ut(t){We=t}let Je=null;function Tn(t){Je=t}let Ln=null;function bi(t){We!==null&&(Ln===null?Ln=[t]:Ln.push(t))}let Rt=null,Yt=0,en=null;function xc(t){en=t}let Si=1,mr=0,Rn=mr;function _s(t){Rn=t}function Ci(){return++Si}function Mr(t){var e=t.f;if((e&qt)!==0)return!0;if(e&xt&&(t.f&=~ka),(e&Cn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(Mr(s)&&oi(s),s.wv>t.wv)return!0}(e&gn)!==0&&ln===null&&It(t,Mt)}return!1}function ki(t,e,a=!0){var r=t.reactions;if(r!==null&&!Ln?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&xt)!==0?ki(s,e,!1):e===s&&(a?It(s,qt):(s.f&Mt)!==0&&It(s,Cn),Ta(s))}}function Ti(t){var m;var e=Rt,a=Yt,r=en,o=We,s=Ln,i=nt,l=Sn,d=Rn,c=t.f;Rt=null,Yt=0,en=null,We=(c&(jn|xa))===0?t:null,Ln=null,Ya(t.ctx),Sn=!1,Rn=++mr,t.ac!==null&&(io(()=>{t.ac.abort(Oa)}),t.ac=null);try{t.f|=ko;var u=t.fn,v=u(),h=t.deps;if(Rt!==null){var p;if(Yr(t,Yt),h!==null&&Yt>0)for(h.length=Yt+Rt.length,p=0;p<Rt.length;p++)h[Yt+p]=Rt[p];else t.deps=h=Rt;if(pr()&&(t.f&gn)!==0)for(p=Yt;p<h.length;p++)((m=h[p]).reactions??(m.reactions=[])).push(t)}else h!==null&&Yt<h.length&&(Yr(t,Yt),h.length=Yt);if(rr()&&en!==null&&!Sn&&h!==null&&(t.f&(xt|Cn|qt))===0)for(p=0;p<en.length;p++)ki(en[p],t);return o!==null&&o!==t&&(mr++,en!==null&&(r===null?r=en:r.push(...en))),(t.f&ta)!==0&&(t.f^=ta),v}catch(T){return Js(T)}finally{t.f^=ko,Rt=e,Yt=a,en=r,We=o,Ln=s,Ya(i),Sn=l,Rn=d}}function Ec(t,e){let a=e.reactions;if(a!==null){var r=bl.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&xt)!==0&&(Rt===null||!Rt.includes(e))&&(It(e,Cn),(e.f&gn)!==0&&(e.f^=gn,e.f&=~ka),ri(e),Yr(e,0))}function Yr(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)Ec(t,a[r])}function _r(t){var e=t.f;if((e&Mn)===0){It(t,Mt);var a=Je,r=Ca;Je=t,Ca=!0;try{(e&(Bn|El))!==0?kc(t):pi(t),hi(t);var o=Ti(t);t.teardown=typeof o=="function"?o:null,t.wv=Si;var s;So&&$l&&(t.f&qt)!==0&&t.deps}finally{Ca=r,Je=a}}}async function xi(){await Promise.resolve(),$s()}function n(t){var e=t.f,a=(e&xt)!==0;if(We!==null&&!Sn){var r=Je!==null&&(Je.f&Mn)!==0;if(!r&&!Ln?.includes(t)){var o=We.deps;if((We.f&ko)!==0)t.rv<mr&&(t.rv=mr,Rt===null&&o!==null&&o[Yt]===t?Yt++:Rt===null?Rt=[t]:Rt.includes(t)||Rt.push(t));else{(We.deps??(We.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[We]:s.includes(We)||s.push(We)}}}if(Pa){if(aa.has(t))return aa.get(t);if(a){var i=t,l=i.v;return((i.f&Mt)===0&&i.reactions!==null||Pi(i))&&(l=Qo(i)),aa.set(i,l),l}}else a&&(!ln?.has(t)||Ze?.is_fork&&!pr())&&(i=t,Mr(i)&&oi(i),Ca&&pr()&&(i.f&gn)===0&&Ei(i));if(ln?.has(t))return ln.get(t);if((t.f&ta)!==0)throw t.v;return t.v}function Ei(t){if(t.deps!==null){t.f^=gn;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&xt)!==0&&(e.f&gn)===0&&Ei(e)}}function Pi(t){if(t.v===kt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(aa.has(e)||(e.f&xt)!==0&&Pi(e))return!0;return!1}function Vt(t){var e=Sn;try{return Sn=!0,t()}finally{Sn=e}}const Pc=-7169;function It(t,e){t.f=t.f&Pc|e}function Nc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(na in t)Do(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&na in a&&Do(a)}}}function Do(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Do(t[r],e)}catch{}const a=ao(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=zs(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Ac=["touchstart","touchmove"];function Mc(t){return Ac.includes(t)}const Ni=new Set,Io=new Set;function Dc(t,e,a,r={}){function o(s){if(r.capture||cr.call(e,s),!s.cancelBubble)return io(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ea(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function cn(t,e,a,r,o){var s={capture:r,passive:o},i=Dc(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&vi(()=>{e.removeEventListener(t,i,s)})}function gt(t){for(var e=0;e<t.length;e++)Ni.add(t[e]);for(var a of Io)a(t)}let ws=null;function cr(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;ws=t;var i=0,l=ws===t&&t.__root;if(l){var d=o.indexOf(l);if(d!==-1&&(e===document||e===window)){t.__root=e;return}var c=o.indexOf(e);if(c===-1)return;d<=c&&(i=d)}if(s=o[i]||t.target,s!==e){Sl(t,"currentTarget",{configurable:!0,get(){return s||a}});var u=We,v=Je;Ut(null),Tn(null);try{for(var h,p=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var T=s["__"+r];T!=null&&(!s.disabled||t.target===s)&&T.call(s,t)}catch(_){h?p.push(_):h=_}if(t.cancelBubble||m===e||m===null)break;s=m}if(h){for(let _ of p)queueMicrotask(()=>{throw _});throw h}}finally{t.__root=e,delete t.currentTarget,Ut(u),Tn(v)}}}function Ai(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function wr(t,e){var a=Je;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function E(t,e){var a=(e&Gl)!==0,r=(e&Xl)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=Ai(s?t:"<!>"+t),a||(o=Xa(o)));var i=r||li?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=Xa(i),d=i.lastChild;wr(l,d)}else wr(i,i);return i}}function Ic(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=Ai(o),l=Xa(i);s=Xa(l)}var d=s.cloneNode(!0);return wr(d,d),d}}function Lc(t,e){return Ic(t,e,"svg")}function Re(t=""){{var e=In(t+"");return wr(e,e),e}}function ce(){var t=document.createDocumentFragment(),e=document.createComment(""),a=In();return t.append(e,a),wr(e,a),t}function g(t,e){t!==null&&t.before(e)}function mh(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function lt(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Rc(t,e){return Oc(t,e)}const La=new Map;function Oc(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){hc();var l=new Set,d=v=>{for(var h=0;h<v.length;h++){var p=v[h];if(!l.has(p)){l.add(p);var m=Mc(p);e.addEventListener(p,cr,{passive:m});var T=La.get(p);T===void 0?(document.addEventListener(p,cr,{passive:m}),La.set(p,1)):La.set(p,T+1)}}};d(no(Ni)),Io.add(d);var c=void 0,u=bc(()=>{var v=a??e.appendChild(In());return ic(v,{pending:()=>{}},h=>{if(s){fe({});var p=nt;p.c=s}o&&(r.$$events=o),c=t(h,r)||{},s&&ve()}),()=>{for(var h of l){e.removeEventListener(h,cr);var p=La.get(h);--p===0?(document.removeEventListener(h,cr),La.delete(h)):La.set(h,p)}Io.delete(d),v!==a&&v.parentNode?.removeChild(v)}});return Fc.set(c,u),c}let Fc=new WeakMap;var fn,wn,Xt,ba,xr,Er,$r;class co{constructor(e,a=!0){Lt(this,"anchor");ze(this,fn,new Map);ze(this,wn,new Map);ze(this,Xt,new Map);ze(this,ba,new Set);ze(this,xr,!0);ze(this,Er,()=>{var e=Ze;if(F(this,fn).has(e)){var a=F(this,fn).get(e),r=F(this,wn).get(a);if(r)$o(r),F(this,ba).delete(a);else{var o=F(this,Xt).get(a);o&&(F(this,wn).set(a,o.effect),F(this,Xt).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of F(this,fn)){if(F(this,fn).delete(s),s===e)break;const l=F(this,Xt).get(i);l&&(Wt(l.effect),F(this,Xt).delete(i))}for(const[s,i]of F(this,wn)){if(s===a||F(this,ba).has(s))continue;const l=()=>{if(Array.from(F(this,fn).values()).includes(s)){var c=document.createDocumentFragment();yi(i,c),c.append(In()),F(this,Xt).set(s,{effect:i,fragment:c})}else Wt(i);F(this,ba).delete(s),F(this,wn).delete(s)};F(this,xr)||!r?(F(this,ba).add(s),Sa(i,l,!1)):l()}}});ze(this,$r,e=>{F(this,fn).delete(e);const a=Array.from(F(this,fn).values());for(const[r,o]of F(this,Xt))a.includes(r)||(Wt(o.effect),F(this,Xt).delete(r))});this.anchor=e,Le(this,xr,a)}ensure(e,a){var r=Ze,o=ui();if(a&&!F(this,wn).has(e)&&!F(this,Xt).has(e))if(o){var s=document.createDocumentFragment(),i=In();s.append(i),F(this,Xt).set(e,{effect:sn(()=>a(i)),fragment:s})}else F(this,wn).set(e,sn(()=>a(this.anchor)));if(F(this,fn).set(r,e),o){for(const[l,d]of F(this,wn))l===e?r.skipped_effects.delete(d):r.skipped_effects.add(d);for(const[l,d]of F(this,Xt))l===e?r.skipped_effects.delete(d.effect):r.skipped_effects.add(d.effect);r.oncommit(F(this,Er)),r.ondiscard(F(this,$r))}else F(this,Er).call(this)}}fn=new WeakMap,wn=new WeakMap,Xt=new WeakMap,ba=new WeakMap,xr=new WeakMap,Er=new WeakMap,$r=new WeakMap;const zc=0,_o=1;function Bc(t,e,a,r,o){var s=rr(),i=kt,l=s?kn(i):Mo(i,!1,!1),d=s?kn(i):Mo(i,!1,!1),c=new co(t);or(()=>{var u=e(),v=!1;if(kl(u)){var h=ai(),p=!1;const m=T=>{if(!v){p=!0,h(!1),bn.ensure();try{T()}finally{hr(),ja||$s()}}};u.then(T=>{m(()=>{Dn(l,T),c.ensure(_o,r&&(_=>r(_,l)))})},T=>{m(()=>{if(Dn(d,T),c.ensure(_o,o&&(_=>o(_,d))),!o)throw d.v})}),Ea(()=>{p||m(()=>{c.ensure(zc,a)})})}else Dn(l,u),c.ensure(_o,r&&(m=>r(m,l)));return()=>{v=!0}})}function U(t,e,a=!1){var r=new co(t),o=a?ia:0;function s(i,l){r.ensure(i,l)}or(()=>{var i=!1;e((l,d=!0)=>{i=!0,s(d,l)}),i||s(!1,null)},o)}function he(t,e){lo(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function jc(t,e,a){for(var r=[],o=e.length,s,i=e.length,l=0;l<o;l++){let v=e[l];Sa(v,()=>{if(s){if(s.pending.delete(v),s.done.add(v),s.pending.size===0){var h=t.outrogroups;Lo(no(s.done)),h.delete(s),h.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var d=r.length===0&&a!==null;if(d){var c=a,u=c.parentNode;pc(u),u.append(c),t.items.clear()}Lo(e,!d)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function Lo(t,e=!0){for(var a=0;a<t.length;a++)Wt(t[a],e)}var ys;function On(t,e,a,r,o,s=null){var i=t,l=new Map,d=(e&Vs)!==0;if(d){var c=t;i=c.appendChild(In())}var u=null,v=Nr(()=>{var S=a();return Go(S)?S:S==null?[]:no(S)}),h,p=!0;function m(){_.fallback=u,Hc(_,h,i,e,r),u!==null&&(h.length===0?(u.f&An)===0?$o(u):(u.f^=An,dr(u,null,i)):Sa(u,()=>{u=null}))}var T=or(()=>{h=n(v);for(var S=h.length,B=new Set,w=Ze,C=ui(),R=0;R<S;R+=1){var L=h[R],P=r(L,R),j=p?null:l.get(P);j?(j.v&&Dn(j.v,L),j.i&&Dn(j.i,R),C&&w.skipped_effects.delete(j.e)):(j=Uc(l,p?i:ys??(ys=In()),L,P,R,o,e,a),p||(j.e.f|=An),l.set(P,j)),B.add(P)}if(S===0&&s&&!u&&(p?u=sn(()=>s(i)):(u=sn(()=>s(ys??(ys=In()))),u.f|=An)),!p)if(C){for(const[G,V]of l)B.has(G)||w.skipped_effects.add(V.e);w.oncommit(m),w.ondiscard(()=>{})}else m();n(v)}),_={effect:T,items:l,outrogroups:null,fallback:u};p=!1}function Hc(t,e,a,r,o){var s=(r&Hl)!==0,i=e.length,l=t.items,d=t.effect.first,c,u=null,v,h=[],p=[],m,T,_,S;if(s)for(S=0;S<i;S+=1)m=e[S],T=o(m,S),_=l.get(T).e,(_.f&An)===0&&(_.nodes?.a?.measure(),(v??(v=new Set)).add(_));for(S=0;S<i;S+=1){if(m=e[S],T=o(m,S),_=l.get(T).e,t.outrogroups!==null)for(const V of t.outrogroups)V.pending.delete(_),V.done.delete(_);if((_.f&An)!==0)if(_.f^=An,_===d)dr(_,null,a);else{var B=u?u.next:d;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Wn(t,u,_),Wn(t,_,B),dr(_,B,a),u=_,h=[],p=[],d=u.next;continue}if((_.f&Jt)!==0&&($o(_),s&&(_.nodes?.a?.unfix(),(v??(v=new Set)).delete(_))),_!==d){if(c!==void 0&&c.has(_)){if(h.length<p.length){var w=p[0],C;u=w.prev;var R=h[0],L=h[h.length-1];for(C=0;C<h.length;C+=1)dr(h[C],w,a);for(C=0;C<p.length;C+=1)c.delete(p[C]);Wn(t,R.prev,L.next),Wn(t,u,R),Wn(t,L,w),d=w,u=L,S-=1,h=[],p=[]}else c.delete(_),dr(_,d,a),Wn(t,_.prev,_.next),Wn(t,_,u===null?t.effect.first:u.next),Wn(t,u,_),u=_;continue}for(h=[],p=[];d!==null&&d!==_;)(c??(c=new Set)).add(d),p.push(d),d=d.next;if(d===null)continue}(_.f&An)===0&&h.push(_),u=_,d=_.next}if(t.outrogroups!==null){for(const V of t.outrogroups)V.pending.size===0&&(Lo(no(V.done)),t.outrogroups?.delete(V));t.outrogroups.size===0&&(t.outrogroups=null)}if(d!==null||c!==void 0){var P=[];if(c!==void 0)for(_ of c)(_.f&Jt)===0&&P.push(_);for(;d!==null;)(d.f&Jt)===0&&d!==t.fallback&&P.push(d),d=d.next;var j=P.length;if(j>0){var G=(r&Vs)!==0&&i===0?a:null;if(s){for(S=0;S<j;S+=1)P[S].nodes?.a?.measure();for(S=0;S<j;S+=1)P[S].nodes?.a?.fix()}jc(t,P,G)}}s&&Ea(()=>{if(v!==void 0)for(_ of v)_.nodes?.a?.apply()})}function Uc(t,e,a,r,o,s,i,l){var d=(i&Bl)!==0?(i&Ul)===0?Mo(a,!1,!1):kn(a):null,c=(i&jl)!==0?kn(o):null;return{v:d,i:c,e:sn(()=>(s(e,d??a,c??o,l),()=>{t.delete(r)}))}}function dr(t,e,a){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,s=e&&(e.f&An)===0?e.nodes.start:a;r!==null;){var i=Ar(r);if(s.before(r),r===o)return;r=i}}function Wn(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function Ie(t,e,...a){var r=new co(t);or(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},ia)}function Wc(t,e,a){var r=new co(t);or(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},ia)}function Mi(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=Mi(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function qc(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=Mi(t))&&(r&&(r+=" "),r+=e);return r}function it(t){return typeof t=="object"?qc(t):t??""}const bs=[...` 	
\r\fÂ \v\uFEFF`];function Vc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||bs.includes(r[i-1]))&&(l===r.length||bs.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Kc(t,e){return t==null?null:String(t)}function at(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=Vc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var d in s){var c=!!s[d];(o==null||c!==!!o[d])&&t.classList.toggle(d,c)}return s}function Ja(t,e,a,r){var o=t.__style;if(o!==e){var s=Kc(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Yc=Symbol("is custom element"),Gc=Symbol("is html");function _h(t,e){var a=es(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function wh(t,e){var a=es(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function st(t,e,a,r){var o=es(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[Pl]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Xc(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function es(t){return t.__attributes??(t.__attributes={[Yc]:t.nodeName.includes("-"),[Gc]:t.namespaceURI===Jl})}var Ss=new Map;function Xc(t){var e=t.getAttribute("is")||t.nodeName,a=Ss.get(e);if(a)return a;Ss.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=zs(o);for(var i in r)r[i].set&&a.push(i);o=ao(o)}return a}function Di(t,e,a=e){var r=new WeakSet;_c(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=wo(t)?yo(s):s,a(s),Ze!==null&&r.add(Ze),await xi(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,d=t.value.length;if(t.value=s??"",l!==null){var c=t.value.length;i===l&&l===d&&c>d?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=i,t.selectionEnd=Math.min(l,c))}}}),Vt(e)==null&&t.value&&(a(wo(t)?yo(t.value):t.value),Ze!==null&&r.add(Ze)),lo(()=>{var o=e();if(t===document.activeElement){var s=Hr??Ze;if(r.has(s))return}wo(t)&&o===yo(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function wo(t){var e=t.type;return e==="number"||e==="range"}function yo(t){return t===""?null:+t}function Cs(t,e){return t===e||t?.[na]===e}function tt(t={},e,a,r){return Sc(()=>{var o,s;return lo(()=>{o=s,s=[],Vt(()=>{t!==a(...s)&&(e(t,...s),o&&Cs(a(...o),t)&&e(null,...o))})}),()=>{Ea(()=>{s&&Cs(a(...s),t)&&e(null,...s)})}}),t}function ts(t=!1){const e=nt,a=e.l.u;if(!a)return;let r=()=>Nc(e.s);if(t){let o=0,s={};const i=Pr(()=>{let l=!1;const d=e.s;for(const c in d)d[c]!==s[c]&&(s[c]=d[c],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&yc(()=>{ks(e,r),Co(a.b)}),Be(()=>{const o=Vt(()=>a.m.map(Tl));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&Be(()=>{ks(e,r),Co(a.a)})}function ks(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Fr=!1;function Jc(t){var e=Fr;try{return Fr=!1,[t(),Fr]}finally{Fr=e}}const Zc={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(sr(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];sr(o)&&(o=o());const s=ea(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(sr(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=ea(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===na||e===Ws)return!1;for(let a of t.props)if(sr(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(sr(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function Ro(...t){return new Proxy({props:t},Zc)}function De(t,e,a,r){var o=!ar||(a&ql)!==0,s=(a&Kl)!==0,i=(a&Yl)!==0,l=r,d=!0,c=()=>(d&&(d=!1,l=i?Vt(r):r),l),u;if(s){var v=na in t||Ws in t;u=ea(t,e)?.set??(v&&e in t?w=>t[e]=w:void 0)}var h,p=!1;s?[h,p]=Jc(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=c(),u&&(o&&Ll(),u(h)));var m;if(o?m=()=>{var w=t[e];return w===void 0?c():(d=!0,w)}:m=()=>{var w=t[e];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(a&Vl)===0)return m;if(u){var T=t.$$legacy;return(function(w,C){return arguments.length>0?((!o||!C||T||p)&&u(C?m():w),w):m()})}var _=!1,S=((a&Wl)!==0?Pr:Nr)(()=>(_=!1,m()));s&&n(S);var B=Je;return(function(w,C){if(arguments.length>0){const R=C?n(S):o&&s?ut(w):w;return f(S,R),_=!0,l!==void 0&&(l=R),w}return Pa&&_||(B.f&Mn)!==0?S.v:n(S)})}function Se(t){nt===null&&qs(),ar&&nt.l!==null?Qc(nt).m.push(t):Be(()=>{const e=Vt(t);if(typeof e=="function")return e})}function Qc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const $c="5";var Fs;typeof window<"u"&&((Fs=window.__svelte??(window.__svelte={})).v??(Fs.v=new Set)).add($c);ec();const Ii={};function ed(t){vt(Ii,t)}function ns(){const t=ft(Ii);if(!t)throw new Error("No FeedSearchContext found");return t}const Li={};function td(t){vt(Li,t)}function Kt(){const t=ft(Li);if(!t)throw new Error("No SearchParamsContext found");return t}function nd(t,e){fe(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Kt(),s="feedSearch",i=A(()=>o().get(s)||""),l=A(()=>n(i));ed({getFeedSearch:()=>n(l),setFeedSearch:u=>{u===""?r(s):a(s,u)}});var d=ce(),c=M(d);Ie(c,()=>e.children??Ye),g(t,d),ve()}const Ri={};function ad(t){vt(Ri,t)}function rd(){const t=ft(Ri);if(!t)throw new Error("No TagsSearchContext found");return t}function od(t,e){fe(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Kt(),s="tagsSearch",i=A(()=>o().get(s)||""),l=A(()=>n(i));ad({getTagsSearch:()=>n(l),setTagsSearch:u=>{u===""?r(s):a(s,u)}});var d=ce(),c=M(d);Ie(c,()=>e.children??Ye),g(t,d),ve()}const Oi={};function sd(t){vt(Oi,t)}function Fi(){const t=ft(Oi);if(!t)throw new Error("No FeedOrderContext found");return t}function id(t,e){fe(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Kt(),s="feedOrder",i=A(()=>o().get(s)||"newest"),l=A(()=>n(i));sd({getFeedOrder:()=>n(l),setFeedOrder:u=>{u==="newest"?r(s):a(s,u)}});var d=ce(),c=M(d);Ie(c,()=>e.children??Ye),g(t,d),ve()}const zi={};function ld(t){vt(zi,t)}function Dr(){const t=ft(zi);if(!t)throw new Error("No SidebarContext found");return t}function cd(t,e){fe(e,!0);let a=I("closed");ld({sidebarOpen:()=>{f(a,"preOpening")},sidebarClose:()=>{f(a,"closing")},getSidebarState:()=>n(a),setSidebarState:c=>{f(a,c,!0)}});var l=ce(),d=M(l);Ie(d,()=>e.children??Ye),g(t,l),ve()}const Bi={};function dd(t){vt(Bi,t)}function Hn(){const t=ft(Bi);if(!t)throw new Error("No SelectedTagsContext found");return t}function ud(t,e){fe(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Kt(),s=A(a),i="selectedTags";let l=A(()=>n(s).get(i)||""),d=A(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));dd({getSelectedTags:()=>n(d),addTag:_=>{n(d).has(_)||r(i,[...n(d),_].map(S=>encodeURIComponent(S)).join(","))},removeTag:_=>{n(d).has(_)&&n(d).size===1?o(i):n(d).has(_)&&r(i,[...n(d)].filter(S=>S!==_).map(S=>encodeURIComponent(S)).join(","))},clearTags:()=>{o(i)},setSelectedTags:_=>{_.size===0?o(i):r(i,[..._].map(S=>encodeURIComponent(S)).join(","))}});var m=ce(),T=M(m);Ie(T,()=>e.children??Ye),g(t,m),ve()}const ji={};function fd(t){vt(ji,t)}function la(){const t=ft(ji);if(!t)throw new Error("No SelectedNotesContext found");return t}var vd=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],gd=["difference","intersection","symmetricDifference","union"],Ts=!1,Ka,vn,Qn,eo,er,Hi,Ui;const to=class to extends Set{constructor(a){super();ze(this,er);ze(this,Ka,new Map);ze(this,vn,I(0));ze(this,Qn,I(0));ze(this,eo,Rn||-1);if(a){for(var r of a)super.add(r);F(this,Qn).v=super.size}Ts||ot(this,er,Ui).call(this)}has(a){var r=super.has(a),o=F(this,Ka),s=o.get(a);if(s===void 0){if(!r)return n(F(this,vn)),!1;s=ot(this,er,Hi).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),f(F(this,Qn),super.size),ra(F(this,vn))),this}delete(a){var r=super.delete(a),o=F(this,Ka),s=o.get(a);return s!==void 0&&(o.delete(a),f(s,!1)),r&&(f(F(this,Qn),super.size),ra(F(this,vn))),r}clear(){if(super.size!==0){super.clear();var a=F(this,Ka);for(var r of a.values())f(r,!1);a.clear(),f(F(this,Qn),0),ra(F(this,vn))}}keys(){return this.values()}values(){return n(F(this,vn)),super.values()}entries(){return n(F(this,vn)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(F(this,Qn))}};Ka=new WeakMap,vn=new WeakMap,Qn=new WeakMap,eo=new WeakMap,er=new WeakSet,Hi=function(a){return Rn===F(this,eo)?I(a):kn(a)},Ui=function(){Ts=!0;var a=to.prototype,r=Set.prototype;for(const o of vd)a[o]=function(...s){return n(F(this,vn)),r[o].apply(this,s)};for(const o of gd)a[o]=function(...s){n(F(this,vn));var i=r[o].apply(this,s);return new to(i)}};let Oo=to;function hd(t,e){fe(e,!0);let a=new Oo,r=I("single");const o=()=>a,s=p=>{a.clear(),p.forEach(m=>a.add(m))},i=p=>{a.add(p)},l=p=>{a.delete(p)},d=()=>{a.clear()};fd({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:d,getMode:()=>n(r),changeMode:p=>{f(r,p,!0),p==="single"&&d()}});var v=ce(),h=M(v);Ie(h,()=>e.children??Ye),g(t,v),ve()}const Wi={};function pd(t){vt(Wi,t)}function as(){const t=ft(Wi);if(!t)throw new Error("No LocalDBContext found");return t}const qi={};function md(t){vt(qi,t)}function Za(){const t=ft(qi);if(!t)throw new Error("No SettingsContext found");return t}const Vi={};function _d(t){vt(Vi,t)}function uo(){const t=ft(Vi);if(!t)throw new Error("No BroadcastContext found");return t}const wd="AppStorage",yd=1,ur="account",Kn="settings",$e="notes",jt="tags",bd="syncLog",ca="success",zn="error",St=(t,e,a)=>{t?.addEventListener(e,a)},xs=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();St(s,ca,()=>{const i=s?.result||[];a(i)}),St(s,zn,i=>{r(i)})}),Gr=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);St(i,ca,()=>{const l=i?.result?.data;r(l)}),St(i,zn,l=>{o(l)})}),yn=(t,e,a,r)=>new Promise((o,s)=>{const d=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});St(d,ca,()=>{o()}),St(d,zn,c=>{s(c)})}),mt=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,d)=>{St(i,ca,()=>{l()}),St(i,zn,c=>{d(c)})})}))},bo=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);St(l,ca,()=>{r()}),St(l,zn,d=>{o(d)})}),ir=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,d)=>{St(i,ca,()=>{l()}),St(i,zn,c=>{d(c)})})}))},Fa=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();St(i,ca,()=>{a()}),St(i,zn,l=>{r(l)})}),tn="dialogPages",Ki={};function Sd(t){vt(Ki,t)}function Zt(){const t=ft(Ki);if(!t)throw new Error("No DialogPagesContext found");return t}var be=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t.Extension="extension",t))(be||{});const Es={settings:"Settings",importData:"Import",exportData:"Export",account:"Account",sync:"Sync",accountSetup:"",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success",extension:"Extension"},yh=()=>chrome,Ps=()=>LanguageModel;function Cd(t,e){fe(e,!0);const{deleteSearchParam:a}=Kt(),{clearDialogPages:r,getDialogPages:o}=Zt(),s="viewMode";let l=ut((()=>{const ae=new URLSearchParams(window.location.search).get(s)||"tab";return ae==="popup"||ae==="window"||ae==="tab"||ae==="sidebar"?ae:"tab"})());Se(()=>{a(s)});let d=I(!1),c=I(ut({showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}}));const{getDB:u}=as(),{createBroadcastChannel:v,tabId:h}=uo(),p=v(),m=A(u),T=async()=>{const z=await Gr(n(m),Kn,"default");z&&f(c,z,!0)},_=async()=>{await T(),f(d,!0)},S=async z=>{const ae=JSON.parse(z.data),ye=ae;if(ae.tabId&&ae.tabId===h){ye.type==="exit"&&(f(c,{showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}},!0),Fa(n(m),Kn));return}ye.type==="updateSettings"?T():ye.type==="exit"&&f(c,{showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}},!0)},B=()=>n(c).showFavicon,w=()=>n(c).recordMode,C=async z=>{n(c).showFavicon=z,await yn(n(m),Kn,"default",va(n(c))),p.postMessage({type:"updateSettings"})},R=async z=>{n(c).recordMode=z,await yn(n(m),Kn,"default",va(n(c))),p.postMessage({type:"updateSettings"})},L=async z=>{n(c).tags.prev=z,await yn(n(m),Kn,"default",va(n(c))),p.postMessage({type:"updateSettings"})},P=()=>n(c).tags.prev||[],j=async z=>{n(c).tags.llm=z,await yn(n(m),Kn,"default",va(n(c))),p.postMessage({type:"updateSettings"})},G=()=>n(c).tags.llm,V=()=>n(c).tags.pageData,q=async z=>{n(c).tags.pageData=z,await yn(n(m),Kn,"default",va(n(c))),p.postMessage({type:"updateSettings"})};Se(()=>(_(),p.addEventListener(S),()=>{p.removeEventListener(S)})),md({getFaviconEnabled:B,getRecordMode:w,setRecordMode:R,setFaviconShown:C,isInitedSettings:()=>n(d),getViewMode:()=>l,setLlmTagsEnabled:j,getLlmTagsEnabled:G,setPrevTags:L,getPrevTags:P,getPageDataForTagsEnabled:V,setPageDataForTagsEnabled:q});var ne=ce(),X=M(ne);Ie(X,()=>e.children??Ye),g(t,ne),ve()}const Yi={};function kd(t){vt(Yi,t)}function rs(){const t=ft(Yi);if(!t)throw new Error("No AccountContext found");return t}function Td(t,e){fe(e,!0);let a=I(void 0);const{getDB:r}=as(),{createBroadcastChannel:o,tabId:s}=uo(),i=A(r),l=o(),d=async()=>{const w=await Gr(n(i),ur,"default");f(a,w,!0)},c=w=>yn(n(i),ur,"default",w),u=async w=>{const C=await Gr(n(i),ur,"default");C!==void 0&&f(a,C,!0),w(C)},v=async w=>{const C=JSON.parse(w.data);if(C.tabId&&C.tabId===s)return;const R=C;R.type==="initLocalAccount"?f(a,null):R.type==="initCloudAccount"?d():R.type==="disconnectCloudAccount"?f(a,null):R.type==="exit"?f(a,void 0):R.type==="updateAccount"&&d()};Se(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),kd({init:u,getAccount:()=>n(a),initLocalAccount:async()=>{f(a,null),await c(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async w=>{const C={encryptedClientKey:w.encryptedClientKey||"",subscriptionExpires:w.subscriptionExpires||-1,lastSync:-1};await c(C),f(a,C,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{f(a,null),await c(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async w=>{if(!n(a))throw new Error("No account to update subscription for");const C={...n(a),subscriptionExpires:w};await c(C),l.postMessage({type:"updateAccount"})},exitApp:async()=>{f(a,void 0),l.postMessage({type:"exit"}),await Fa(n(i),ur)}});var S=ce(),B=M(S);Ie(B,()=>e.children??Ye),g(t,S),ve()}const Gi={};function xd(t){vt(Gi,t)}function Ot(){const t=ft(Gi);if(!t)throw new Error("No NotesContext found");return t}const Yn=()=>crypto.randomUUID(),Ed=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},Xi=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function bh(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}const yt=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function Pd(t,e){fe(e,!0);const{getDB:a}=as(),{createBroadcastChannel:r,tabId:o}=uo(),s=A(a),i=r(),l=720*60*60*1e3;let d=I(!1),c=I(()=>new Map),u=I(()=>[]),v=I(()=>new Map);const h=()=>n(d),p=()=>n(u)().some(y=>y.data&&!y.data.deletedAt&&!y.data.archivedAt),m=()=>n(u)().some(y=>y.data&&y.data.deletedAt),T=()=>n(u)().some(y=>y.data&&y.data.archivedAt&&!y.data.deletedAt),_=y=>{const x=n(u)(),k=n(v)(),N=k.get(y.id);N?N.data=y.data:(x.push(y),k.set(y.id,y)),f(u,()=>x),f(v,()=>k)},S=y=>{const x=n(u)(),k=n(v)(),N=k.get(y);k.has(y)&&k.delete(y),N&&(N.data=void 0),f(u,()=>x),f(v,()=>k)},B=y=>{const x=n(u)(),k=n(v)();for(const N of y){const W=k.get(N);k.has(N)&&k.delete(N),W&&(W.data=void 0)}f(u,()=>x),f(v,()=>k)},w=()=>{f(u,()=>[]),f(c,()=>new Map),f(v,()=>new Map)},C=()=>n(u),R=y=>{const x=n(c)();for(const k of y)x.get(k)||x.set(k,{name:k});f(c,()=>x)},L=async()=>{const[y,x]=await Promise.all([xs(n(s),$e),xs(n(s),jt).then(ee=>ee.reduce((Y,Z)=>Y.set(Z.id,Z.data),new Map))]),k=[],N=[],W=new Map;for(const ee of y)ee.data.deletedAt&&Date.now()-ee.data.deletedAt>l?k.push(ee.id):(N.push(ee),W.set(ee.id,ee));const K=Ed(N),pe=[],Ee=new Map(x);[...K.values()].forEach(ee=>{Ee.set(ee,{name:ee,pinned:x.get(ee)?.pinned||!1}),x.has(ee)||pe.push(ee)});const se=[];[...x.keys()].forEach(ee=>{K.has(ee)||se.push(ee)}),await ir(n(s),$e,k),await ir(n(s),jt,se),await mt(n(s),jt,pe.map(ee=>({id:ee,data:{pinned:Ee.get(ee)?.pinned||!1}}))),f(u,()=>N),f(v,()=>W),f(c,()=>Ee),f(d,!0)},P=async y=>{const x=n(c)(),k=y.data.tags.filter(N=>!x.has(N))||[];return await yn(n(s),$e,y.id,{...y.data}),k.length>0&&(await mt(n(s),jt,k.map(N=>({id:N,data:{pinned:!1}}))||[]),R(k)),_(y),i.postMessage({type:"putNote",data:{id:y.id}}),y.id},j=async({link:y,text:x,tags:k})=>{const N={id:Yn(),data:{link:yt(y),text:x,tags:yt(k),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await P(N),N.id},G=async(y,{link:x,text:k,tags:N})=>{const W=z(y);if(!W||!W.data)return;const K={id:y,data:{...W.data,link:yt(x),text:k,tags:yt(N),updatedAt:Date.now()}};await P(K)},V=async(y,{link:x,text:k,tags:N})=>{const W=z(y);if(!W||!W.data)return;const K=Yn(),pe={id:y,data:{...W.data,link:x,text:k,tags:N,updatedAt:Date.now(),history:[...(W.data.history||[]).slice(-49),{id:K,link:yt(W.data.link),text:W.data.text,tags:yt(W.data.tags),updatedAt:W.data.updatedAt}]}};return await P(pe),K},q=async(y,x)=>{const k=z(y);if(!k||!k.data)return;const N=k.data.history?.find?.(K=>K.id===x);if(!N)return;const W={id:y,data:{...k.data,link:yt(N.link),text:N.text,tags:yt(N.tags),updatedAt:N.updatedAt,history:k.data.history?.filter?.(K=>K.id!==x)||[]}};await P(W)},ne=async y=>{const k=n(v)().get(y);!k||!k.data||(S(y),await bo(n(s),$e,y),i.postMessage({type:"deleteNote",data:{id:y}}))},X=async()=>{await Fa(n(s),$e),await Fa(n(s),jt),w(),i.postMessage({type:"clearNotes"})},z=y=>n(v)().get(y),ae=async(y,x)=>{const N=n(v)().get(y);if(!N||!N.data)return;const W={id:y,data:{...N.data,pinnedAt:x?Date.now():void 0}};P(W)},ye=async y=>{const k=n(v)().get(y);if(!k||!k.data)return;const N={id:y,data:{...k.data,deletedAt:Date.now()}};await P(N)},te=async y=>{const k=n(v)().get(y);if(!k||!k.data)return;const N={id:y,data:{...k.data,archivedAt:Date.now()}};await P(N)},H=async({noteIds:y})=>{const x=n(v)(),k=n(u)();for(const W of y){const K=x.get(W);K?.data&&(K.data.deletedAt=Date.now())}return await mt(n(s),$e,y.map(W=>{const K=x.get(W);return{id:W,data:K?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>x),f(u,()=>k),{cancel:async()=>{for(const W of y){const K=x.get(W);K?.data&&(K.data.deletedAt=0)}await mt(n(s),$e,y.map(W=>{const K=x.get(W);return{id:W,data:K?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>x),f(u,()=>k)}}},J=async({noteIds:y})=>{const x=n(v)(),k=n(u)();for(const W of y){const K=x.get(W);K?.data&&(K.data.archivedAt=Date.now())}return await mt(n(s),$e,y.map(W=>{const K=x.get(W);return{id:W,data:K?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>x),f(u,()=>k),{cancel:async()=>{for(const W of y){const K=x.get(W);K?.data&&(K.data.archivedAt=0)}await mt(n(s),$e,y.map(W=>{const K=x.get(W);return{id:W,data:K?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>x),f(u,()=>k)}}},le=async({noteIds:y})=>{const x=n(v)(),k=n(u)(),N=[];for(const K of y){const pe=x.get(K);pe?.data&&(N.push({id:K,data:yt(pe.data)}),pe.data.archivedAt=0)}return await mt(n(s),$e,y.map(K=>{const pe=x.get(K);return{id:K,data:pe?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>x),f(u,()=>k),{cancel:async()=>{for(const K of N){const pe=x.get(K.id);pe?.data&&(pe.data=K.data)}await mt(n(s),$e,y.map(K=>{const pe=x.get(K);return{id:K,data:pe?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>x),f(u,()=>k)}}},oe=async({noteIds:y})=>{const x=n(v)(),k=n(u)(),N=[];for(const K of y){const pe=x.get(K);pe?.data&&(N.push({id:K,data:yt(pe.data)}),pe.data.deletedAt=0)}return await mt(n(s),$e,y.map(K=>{const pe=x.get(K);return{id:K,data:pe?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>x),f(u,()=>k),{cancel:async()=>{for(const K of N){const pe=x.get(K.id);pe?.data&&(pe.data=K.data)}await mt(n(s),$e,y.map(K=>{const pe=x.get(K);return{id:K,data:pe?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>x),f(u,()=>k)}}},de=async y=>{const k=n(v)().get(y);if(!k||!k.data)return;const N={id:y,data:{...k.data,deletedAt:0}};await P(N)},ue=async y=>{const k=n(v)().get(y);if(!k||!k.data)return;const N={id:y,data:{...k.data,archivedAt:0}};await P(N)},Q=async(y,x)=>{const k=n(c)();k.set(y,{name:y,pinned:x}),await yn(n(s),jt,y,{pinned:x}),i.postMessage({type:"pinTag",data:{tag:y,pinned:x}}),f(c,()=>k)},O=async({noteIds:y})=>{const x=n(c)(),k=n(u)();B(y),await ir(n(s),$e,y),i.postMessage({type:"reloadNotes"}),f(u,()=>k),f(c,()=>x)},ge=async y=>{const x=n(v)(),k={};y.forEach(N=>{const W=x.get(N.id),K=[];if(W&&W.data){let pe=0,Ee=0;for(;pe<N.data.history.length&&Ee<W.data.history.length;){const se=N.data.history[pe],ee=W.data.history[Ee];se.id===ee.id?(se.updatedAt>ee.updatedAt?K.push(se):K.push(ee),pe+=1,Ee+=1):se.updatedAt<ee.updatedAt?(K.push(se),pe+=1):se.updatedAt>ee.updatedAt?(K.push(ee),Ee+=1):(K.push(ee),pe+=1,Ee+=1)}W.data.updatedAt>N.data.updatedAt?k[W.id]={id:W.id,data:{...W.data,history:K}}:k[N.id]={id:N.id,data:{...N.data,history:K}}}else k[N.id]=N}),await mt(n(s),$e,Object.values(k)),await L(),i.postMessage({type:"reloadNotes"})},ke=async()=>{const y=[];n(u)().forEach(k=>{k&&k.data&&k.data.deletedAt&&y.push(k.id)}),await ir(n(s),$e,y),await L(),i.postMessage({type:"emptyBin"})},re=async(y,x)=>{const k=n(v)(),N=n(u)(),W=[],K=[];for(const Ee of x){const se=k.get(Ee);se?.data&&(W.push({id:Ee,data:yt(se.data)}),K.push({id:Ee,data:{...se.data,tags:se.data.tags.filter(ee=>ee!==y),history:[...se.data.history||[],{id:Yn(),link:yt(se.data.link),text:se.data.text,tags:se.data.tags,updatedAt:Date.now()}]}}))}for(const Ee of K){const se=k.get(Ee.id);se?.data&&(se.data=Ee.data)}return await mt(n(s),$e,K.map(Ee=>({id:Ee.id,data:Ee.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(u,()=>N),{cancel:async()=>{for(const Ee of W){const se=k.get(Ee.id);se?.data&&(se.data=Ee.data)}await mt(n(s),$e,W.map(Ee=>({id:Ee.id,data:Ee.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(u,()=>N)}}},we=async(y,x,k)=>{const N=n(v)(),W=n(u)(),K=n(c)(),pe=[],Ee=[];for(const Y of k){const Z=N.get(Y);Z?.data&&(pe.push({id:Y,data:yt(Z.data)}),Ee.push({id:Y,data:{...Z.data,tags:Z.data.tags.map(me=>me!==y?me:x),history:[...Z.data.history||[],{id:Yn(),link:yt(Z.data.link),text:Z.data.text,tags:Z.data.tags,updatedAt:Date.now()}]}}))}for(const Y of Ee){const Z=N.get(Y.id);Z?.data&&(Z.data=Y.data)}const se=K.has(x);return await Promise.all([(async()=>{if(!se){const Y=K.get(y)?.pinned||!1;K.set(x,{name:x,pinned:Y}),await yn(n(s),jt,x,{pinned:Y})}})(),mt(n(s),$e,Ee.map(Y=>({id:Y.id,data:Y.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(u,()=>W),f(c,()=>K),{cancel:async()=>{for(const Y of pe){const Z=N.get(Y.id);Z?.data&&(Z.data=Y.data)}await Promise.all([(async()=>{se||(K.delete(x),await bo(n(s),jt,x))})(),mt(n(s),$e,pe.map(Y=>({id:Y.id,data:Y.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(u,()=>W),f(c,()=>K)}}},Ce=async(y,x)=>{const k=n(v)(),N=n(u)(),W=n(c)(),K=[],pe=[];for(const ee of x){const Y=k.get(ee);Y?.data&&(K.push({id:ee,data:yt(Y.data)}),pe.push({id:ee,data:{...Y.data,tags:[...new Set([...Y.data.tags,y])],history:[...Y.data.history||[],{id:Yn(),link:yt(Y.data.link),text:Y.data.text,tags:Y.data.tags,updatedAt:Date.now()}]}}))}for(const ee of pe){const Y=k.get(ee.id);Y?.data&&(Y.data=ee.data)}const Ee=W.has(y);return await Promise.all([(async()=>{Ee||(W.set(y,{name:y,pinned:!1}),await yn(n(s),jt,y,{pinned:!1}))})(),mt(n(s),$e,pe.map(ee=>({id:ee.id,data:ee.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(u,()=>N),f(c,()=>W),{cancel:async()=>{for(const ee of K){const Y=k.get(ee.id);Y?.data&&(Y.data=ee.data)}await Promise.all([(async()=>{Ee||(W.delete(y),await bo(n(s),jt,y))})(),mt(n(s),$e,K.map(ee=>({id:ee.id,data:ee.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(u,()=>N),f(c,()=>W)}}},ie=async(y,x,k)=>{const N=n(v)(),W=n(u)(),K=n(c)(),pe=[],Ee=[];for(const Z of k){const me=N.get(Z);me?.data&&(pe.push({id:Z,data:yt(me.data)}),Ee.push({id:Z,data:{...me.data,tags:[...new Set([...me.data.tags.filter(Ne=>!y.includes(Ne)),...x])],history:[...me.data.history||[],{id:Yn(),link:yt(me.data.link),text:me.data.text,tags:me.data.tags,updatedAt:Date.now()}]}}))}for(const Z of Ee){const me=N.get(Z.id);me?.data&&(me.data=Z.data)}const se=n(c)(),ee=x.filter(Z=>!se.has(Z));return await Promise.all([(async()=>{if(ee.length>0)return mt(n(s),jt,ee.map(Z=>({id:Z,data:{pinned:!1}})))})(),mt(n(s),$e,Ee.map(Z=>({id:Z.id,data:Z.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(u,()=>W),f(c,()=>K),{cancel:async()=>{for(const Z of pe){const me=N.get(Z.id);me?.data&&(me.data=Z.data)}await Promise.all([(async()=>{if(ee.length>0){for(const Z of ee)K.delete(Z);return ir(n(s),jt,ee)}})(),mt(n(s),$e,pe.map(Z=>({id:Z.id,data:Z.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(u,()=>W),f(c,()=>K)}}},$=async y=>{const x=JSON.parse(y.data),k=x;if(x.tabId&&x.tabId===o){k.type==="exit"&&(w(),await Fa(n(s),$e),await Fa(n(s),jt));return}if(k.type==="putNote"){const W=k.data.id;if(!W)return;const K=await Gr(n(s),$e,W);if(!K)return;_({id:W,data:K})}else if(k.type==="deleteNote"){const N=k.data.id;if(!N)return;S(N)}else if(k.type==="pinTag"){const N=k.data.tag,W=k.data.pinned,K=n(c)();K.set(N,{name:N,pinned:W}),f(c,()=>K)}else k.type==="clearNotes"?w():k.type==="reloadNotes"||k.type==="emptyBin"?L():k.type==="exit"&&w()};Se(()=>(L(),i.addEventListener($),()=>{i.removeEventListener($)})),xd({isInitedNotes:h,createNote:j,updateNote:G,deleteNote:ne,saveNote:V,revertNote:q,pinNote:ae,moveNoteToBin:ye,moveNoteToArchive:te,getGetNotes:C,importNotes:ge,clearNotes:X,getNoteById:z,getGetMapTags:()=>n(c),pinTag:Q,restoreNoteFromBin:de,moveNoteFromArchive:ue,checkNotes:p,checkNotesInBin:m,checkNotesInArchive:T,emptyBin:ke,moveNotesToBin:H,moveNotesToArchive:J,moveNotesFromArchive:le,deleteNotes:O,restoreNotesFromBin:oe,deleteTag:re,renameTag:we,addTag:Ce,changeTags:ie});var Te=ce(),je=M(Te);Ie(je,()=>e.children??Ye),g(t,Te),ve()}const Ji={};function Nd(t){vt(Ji,t)}function Na(){const t=ft(Ji);if(!t)throw new Error("No FeedContext found");return t}const Zi={};var et=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(et||{});function Ad(t){vt(Zi,t)}function fo(){const t=ft(Zi);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function Md(t,e){fe(e,!0);const a=ns(),{getSelectedTags:r}=Hn(),{getSelectedMetaTags:o}=fo(),{getGetNotes:s}=Ot();let i=A(r),l=A(o),d=I(0),c=[],u=I(0),v=A(()=>n(l).has(et.ARCHIVED)),h=A(()=>n(l).has(et.BIN));Be(()=>{const T=s()()||[],_=[],S=Array.from(n(i).values());for(let B=T.length-1;B>=0;B--){if(!T[B]||!T[B].data)continue;const w=T[B];if(!n(v)&&!n(h)&&(w?.data.deletedAt||w?.data.archivedAt)||n(v)&&(w?.data.deletedAt||!w?.data.archivedAt)||n(h)&&!w?.data.deletedAt)continue;const C=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(w.data.link?.title.toLowerCase().includes(C)||w.data.link?.url.toLowerCase().includes(C)||w.data.text.toLowerCase().includes(C)||w.data.tags.map(R=>R.toLowerCase()).join(" ").includes(C)))){if(n(l).has(et.INBOX)){if(w.data.tags.length>0)continue}else if(n(i).size&&S.some(R=>!w.data.tags.includes(R)))continue;_.push(w)}}f(d,_.length,!0),c=_,f(u,Date.now(),!0)}),Nd({getFiltredNotesLength:()=>n(d),getFiltredNotes:()=>(n(u),c),getUpdatedFiltredNotesTimestamp:()=>n(u)});var p=ce(),m=M(p);Ie(m,()=>e.children??Ye),g(t,p),ve()}function Dd(t,e){fe(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Kt(),s=A(a),i="selectedMetaTags";let l=A(()=>n(s).get(i)||""),d=A(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));Ad({getSelectedMetaTags:()=>n(d),addMetaTag:_=>{n(d).has(_)||r(i,[...n(d),_].map(S=>encodeURIComponent(S)).join(","))},removeMetaTag:_=>{n(d).has(_)&&n(d).size===1?o(i):n(d).has(_)&&r(i,[...n(d)].filter(S=>S!==_).map(S=>encodeURIComponent(S)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:_=>{_.size===0?o(i):r(i,[..._].map(S=>encodeURIComponent(S)).join(","))}});var m=ce(),T=M(m);Ie(T,()=>e.children??Ye),g(t,m),ve()}const Qi={},oa=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function Id(t){vt(Qi,t)}function Un(){const t=ft(Qi);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Ld(t,e){fe(e,!0);let a=ut(oa());Id(a);var r=ce(),o=M(r);Ie(o,()=>e.children??Ye),g(t,r),ve()}const $i={};function Rd(t){vt($i,t)}function os(){const t=ft($i);if(!t)throw new Error("No ScrollingContext found");return t}function Od(t,e){fe(e,!0);let a=I(!1);const r=()=>n(a),o=Xi(()=>{f(a,!1)},100);Rd({isScrolling:r,enable:()=>{f(a,!0),o()}});var i=ce(),l=M(i);Ie(l,()=>e.children??Ye),g(t,i),ve()}const el={};function Fd(t){vt(el,t)}function Aa(){const t=ft(el);if(!t)throw new Error("No MobileSizeContext found");return t}function zd(t,e){fe(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=I(ut(a())),o=Un();const s=Xi(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{f(r,a(),!0)})};Fd({checkMobileSize:()=>n(r)}),Se(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var d=ce(),c=M(d);Ie(c,()=>e.children??Ye),g(t,d),ve()}const tl={};function Bd(t){vt(tl,t)}function dn(){const t=ft(tl);if(!t)throw new Error("No DialogContext found");return t}function jd(t,e){fe(e,!0);let a=I(0),r=I(!1),o=I(!0),s=I(!1),i=I(!1);Bd({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{f(a,n(a)+1)},dialogDec:()=>{f(a,n(a)-1)},blockDialog:R=>{f(r,R,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:R=>{f(o,R,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:R=>{f(s,R,!0)},setLeftEnd:R=>{f(i,R,!0)},getCountDialog:()=>n(a)});var w=ce(),C=M(w);Ie(C,()=>e.children??Ye),g(t,w),ve()}const nl={};function Hd(t){vt(nl,t)}function vo(){const t=ft(nl);if(!t)throw new Error("No ScrollContainerContext found");return t}function Ud(t,e){fe(e,!0);let a=I(null);Hd({setScrollContainer:l=>{f(a,l,!0)},getScrollContainer:()=>n(a)});var s=ce(),i=M(s);Ie(i,()=>e.children??Ye),g(t,s),ve()}const al={};function Wd(t){vt(al,t)}function ss(){const t=ft(al);if(!t)throw new Error("No DialogPageHeightContext found");return t}function qd(t,e){fe(e,!0);let a=I(200);Wd({setDialogPageHeight:l=>{f(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=ce(),i=M(s);Ie(i,()=>e.children??Ye),g(t,s),ve()}const Vd=[ur,Kn,$e,jt,bd];function Kd(){return new Promise((t,e)=>{const a=indexedDB.open(wd,yd);St(a,"upgradeneeded",()=>{const r=a.result;for(const o of Vd)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),St(a,ca,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),St(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),St(a,zn,()=>{e(),console.error(zn,a.error)})})}function Yd(t,e){fe(e,!0);let a=I(null);Se(()=>{Kd().then(l=>{f(a,l,!0)}).catch(l=>{console.error("Failed to initialize LocalDB:",l)})}),pd({getDB:()=>n(a)});var o=ce(),s=M(o);{var i=l=>{var d=ce(),c=M(d);Ie(c,()=>e.children??Ye),g(l,d)};U(s,l=>{n(a)&&l(i)})}g(t,o),ve()}function Gd(t,e){fe(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Kt(),s=A(a);let i=A(()=>n(s).get(tn)||""),l=A(()=>n(i).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const d=()=>n(l),c=w=>{if(w.length===0){o(tn);return}r(tn,w.map(C=>encodeURIComponent(C)).join(","))},u=w=>{r(tn,[...n(l),w].map(C=>encodeURIComponent(C)).join(","))};Sd({setDialogPages:c,getDialogPages:d,pushDialogPage:u,popDialogPage:()=>{const w=n(l)[n(l).length-1];return n(l).length<=1?(o(tn),w):(r(tn,n(l).slice(0,-1).map(C=>encodeURIComponent(C)).join(",")),w)},replaceDialogPage:w=>{r(tn,[...n(l).slice(0,-1),w].map(C=>encodeURIComponent(C)).join(","))},hasDialogPage:w=>n(l).find(C=>{const[R]=C.split("?");return R===w})!==void 0,clearDialogPages:()=>{o(tn)},createDialogPageHref:w=>{const C=new URLSearchParams(n(s).toString());return C.set(tn,[...d(),w].map(R=>encodeURIComponent(R)).join(",")),`${window.location.pathname}?${C.toString()}`},createHandleClickDialogPage:w=>C=>{C.preventDefault(),u(w)}});var S=ce(),B=M(S);Ie(B,()=>e.children??Ye),g(t,S),ve()}function Xd(t,e){fe(e,!0);let a=I(ut(new URLSearchParams(window.location.search)));const r=v=>{const h=window.location.pathname;f(a,v,!0),window.history.replaceState(null,"",`${h}${v.size>0?`?${v.toString()}`:""}`)};td({getSearchParams:()=>n(a),replaceSearchParams:v=>{const h=new URLSearchParams(v);r(h)},setSearchParam:(v,h)=>{const p=new URLSearchParams(n(a));p.set(v,h),r(p)},deleteSearchParam:v=>{const h=new URLSearchParams(n(a));h.delete(v),r(h)},getHref:v=>{const h=new URLSearchParams(v);return`${window.location.pathname}${h.toString().length>0?`?${h.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var c=ce(),u=M(c);Ie(u,()=>e.children??Ye),g(t,c),ve()}const rl={};function Jd(t){vt(rl,t)}function Zd(){const t=ft(rl);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Qd(t,e){fe(e,!0);let a=ut({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";Se(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l);let d=null;const c=u=>{o()&&(d&&clearTimeout(d),d=setTimeout(()=>{o()&&u.target!==document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur?.()},120))};return document.addEventListener("touchstart",c,{passive:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l),document.removeEventListener("touchstart",c)}}),Jd({getIsKeyboardVisible:r});var s=ce(),i=M(s);Ie(i,()=>e.children??Ye),g(t,s),ve()}function $d(t,e){fe(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};_d({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=ce(),s=M(o);Ie(s,()=>e.children??Ye),g(t,o),ve()}function eu(t,e){Yd(t,{children:(a,r)=>{$d(a,{children:(o,s)=>{Ld(o,{children:(i,l)=>{Od(i,{children:(d,c)=>{zd(d,{children:(u,v)=>{jd(u,{children:(h,p)=>{Ud(h,{children:(m,T)=>{qd(m,{children:(_,S)=>{Qd(_,{children:(B,w)=>{Xd(B,{children:(C,R)=>{Gd(C,{children:(L,P)=>{var j=ce(),G=M(j);Ie(G,()=>e.children??Ye),g(L,j)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function tu(t,e){eu(t,{children:(a,r)=>{od(a,{children:(o,s)=>{nd(o,{children:(i,l)=>{id(i,{children:(d,c)=>{cd(d,{children:(u,v)=>{Dd(u,{children:(h,p)=>{ud(h,{children:(m,T)=>{hd(m,{children:(_,S)=>{Cd(_,{children:(B,w)=>{Td(B,{children:(C,R)=>{Pd(C,{children:(L,P)=>{Md(L,{children:(j,G)=>{var V=ce(),q=M(V);Ie(q,()=>e.children??Ye),g(j,V)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const wt=t=>{const a=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(i=>i instanceof HTMLElement?i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement?!i.disabled&&i.offsetParent!==null:i.offsetParent!==null:!1),r=a.indexOf(t);if(r===-1)return{next:null,prev:null};const o=a[r+1],s=a[r-1];return{next:o,prev:s}};let At=I(""),qn=I(null),za=I(null),Pn=I(null),Vn=I(ut([])),zr=I(null),Gn=null;function dt(t,e){f(At,""),Gn=null,f(za,null),f(Pn,null),setTimeout(()=>{f(At,t,!0),e?.onFinish&&f(za,e.onFinish,!0),e?.cancel&&(f(Pn,e.cancel.onCancel,!0),Gn=e.cancel.nextFocusRef)},16)}var nu=E('<button type="button" class="c p-18jfd2t">undo</button>'),au=E('<div class="a p-18jfd2t"><div class="b p-18jfd2t"><span> </span> <!></div></div>'),ru=E("<div><!></div>");function is(t,e){fe(e,!0);const a=Yn();Se(()=>(f(Vn,[...n(Vn),a],!0),()=>{const d=n(Vn).indexOf(a);d!==-1&&f(Vn,n(Vn).filter((c,u)=>u!==d),!0)}));const r=d=>{if(d.key==="Tab"&&d.shiftKey){if(Gn&&n(At)){d.preventDefault();const{prev:c}=wt(Gn);c?.focus(),f(At,"")}}else if(d.key==="Tab"&&!d.shiftKey)Gn&&n(At)&&(d.preventDefault(),f(At,""),Gn?.focus());else if(d.key==="Escape"&&n(At)){if(d.preventDefault(),Gn){const{prev:c}=wt(Gn);c?.focus()}f(At,"")}};Se(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)})),Be(()=>{n(At);const d=n(Pn)?2e3:800;n(At)&&(n(qn)?.getBoundingClientRect(),n(qn)?.style.setProperty("opacity","1"));const c=setTimeout(()=>{n(qn)?.style.removeProperty("opacity")},d),u=setTimeout(()=>{f(At,""),n(za)&&n(za)(),f(za,null),f(Pn,null),n(qn)?.style.removeProperty("opacity")},d+400);return()=>{clearTimeout(c),clearTimeout(u)}});const o=d=>{d.preventDefault(),n(Pn)&&(f(za,null),n(Pn)(),f(Pn,null)),f(At,""),n(qn)?.style.removeProperty("opacity")};Be(()=>{n(At)&&n(Pn)&&n(zr)&&setTimeout(()=>{n(zr)?.focus()},151)}),Be(()=>{n(Vn),Vt(()=>{f(At,""),n(qn)?.style.removeProperty("opacity")})});var s=ru(),i=b(s);{var l=d=>{var c=au(),u=b(c),v=b(u),h=b(v),p=D(v,2);{var m=T=>{var _=nu();_.__click=o,tt(_,S=>f(zr,S),()=>n(zr)),g(T,_)};U(p,T=>{n(Pn)&&T(m)})}tt(u,T=>f(qn,T),()=>n(qn)),xe(()=>lt(h,n(At))),g(d,c)};U(i,d=>{n(At)&&n(Vn)[n(Vn).length-1]===a&&d(l)})}g(t,s),ve()}gt(["click"]);var ou=E('<span class="a p-lxk90o"><!></span>');function ht(t,e){var a=ou(),r=b(a);Ie(r,()=>e.children),g(t,a)}var su=Lc('<svg class="p-1yv1ibq"><use></use></svg>');function _e(t,e){let a=De(e,"name",8,"");var r=su(),o=b(r);xe(()=>st(o,"href",`#icon-${a()??""}`)),g(t,r)}var iu=E('<button class="a p-18m1f7k"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ol(t,e){fe(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=Dr(),{getDialogPages:s}=Zt(),{checkExistedDialog:i}=dn();let l=A(()=>s().length>0||i());const d=h=>{if(h.preventDefault(),n(l))return;const p=r();p==="closed"?a():p==="opened"&&o()};var c=iu();c.__click=d;var u=b(c);he(u,()=>({"--size":"32px"})),_e(u.lastChild,{name:"sidebarMenu"});var v=D(u,2);ht(v,{children:(h,p)=>{var m=Re("Menu");g(h,m)}}),g(t,c),ve()}gt(["click"]);var lu=E('<button class="b p-3z9gmw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),cu=E('<div class="a p-3z9gmw"><input class="p-3z9gmw"/> <!></div>');function Fo(t,e){fe(e,!0);let a=De(e,"value",15,""),r=De(e,"ref",15,null);const o=c=>{c.key==="Escape"&&(a(""),e.onChange?.(""))};Se(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=cu(),i=b(s);i.__input=c=>e.onChange?.(c.target?.value||""),tt(i,c=>r(c),()=>r());var l=D(i,2);{var d=c=>{var u=lu();u.__click=()=>{a(""),e.onChange?.("")};var v=b(u);he(v,()=>({"--size":"20px"})),_e(v.lastChild,{name:"close"});var h=D(v,2);ht(h,{children:(p,m)=>{var T=Re("Clear");g(p,T)}}),g(c,u)};U(l,c=>{a()&&c(d)})}xe(()=>st(i,"placeholder",e.placeholder)),cn("focus",i,function(...c){e.onFocus?.apply(this,c)}),cn("blur",i,function(...c){e.onBlur?.apply(this,c)}),Di(i,a),g(t,s),ve()}gt(["input","click"]);function ls(t,e){fe(e,!0),Se(()=>{const a=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("click",a,{capture:!0}),()=>{document.removeEventListener("click",a,{capture:!0})}}),ve()}function du(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const Qa=du(),uu=()=>{const t=navigator.userAgent;return/android/i.test(t)},yr=uu(),Sh=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},Ch=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},br=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let Ra=I(ut([]));var fu=E("<dialog><div><!></div></dialog> <!>",1);function Ir(t,e){fe(e,!0);const a=Yn(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;Se(()=>(f(Ra,[...n(Ra),a],!0),()=>{const w=n(Ra).indexOf(a);w!==-1&&f(Ra,n(Ra).filter((C,R)=>R!==w),!0)}));let o=De(e,"onClosed",3,()=>{}),s=De(e,"blocked",3,!1),i=I(null),l=I(null),d=I(!1),{dialogInc:c,dialogDec:u}=dn();const v=()=>{const w=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(w),o()()},{once:!0}),f(d,!1)};Be(()=>{e.startClose&&v()}),Se(()=>{n(i)?.showModal(),n(i)?.getClientRects(),f(d,!0);const w=C=>{C?.preventDefault(),s()||v()};return n(i)?.addEventListener("cancel",w),n(i)?.addEventListener("close",w),()=>{n(i)?.removeEventListener("cancel",w),n(i)?.removeEventListener("close",w)}}),Se(()=>(c(),()=>{u()})),Se(()=>{const w=C=>{C.key==="Escape"&&s()&&C.preventDefault()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}});function h(){setTimeout(()=>{if(Qa||!n(i)||!n(l))return;const w=window.visualViewport;if(w)if(w.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}Se(()=>(h(),window.visualViewport?.addEventListener("resize",h),window.visualViewport?.addEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{window.visualViewport?.removeEventListener("resize",h),window.visualViewport?.removeEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h)}));var p=fu(),m=M(p),T=b(m),_=b(T);Ie(_,()=>e.children),tt(T,w=>f(l,w),()=>n(l)),tt(m,w=>f(i,w),()=>n(i));var S=D(m,2);{var B=w=>{ls(w,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:v})};U(S,w=>{n(i)&&n(l)&&!s()&&w(B)})}xe(()=>{at(m,1,it({a:!0,b:n(d),c:n(Ra).length>1}),"p-1x14yml"),at(T,1,it({d:!0,b:n(d)}),"p-1x14yml")}),g(t,p),ve()}var vu=E("<div><!></div>");function gu(t,e){fe(e,!0);let a=I(!1),r=I(null);const o=()=>{const u=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(u),e.onClosed()},{once:!0}),f(a,!1)},s=u=>{u.target!==n(r)&&!n(r)?.contains(u.target)&&o()},i=u=>{u.target!==n(r)&&!n(r)?.contains(u.target)&&o()},l=u=>{u.key==="Escape"&&o()};Se(()=>{n(r)?.getClientRects(),f(a,!0);const u=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(u),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),Be(()=>{e.startClose&&o()});var d=vu(),c=b(d);Ie(c,()=>e.children),tt(d,u=>f(r,u),()=>n(r)),xe(()=>at(d,1,it({a:!0,b:n(a)}),"p-1unpq18")),g(t,d),ve()}var hu=E("<ul><!></ul>"),pu=E("<ul><!></ul>");function Lr(t,e){fe(e,!0);let a=De(e,"ref",15);var r=ce(),o=M(r);{var s=l=>{Ir(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(d,c)=>{var u=hu(),v=b(u);Ie(v,()=>e.children),tt(u,h=>a(h),()=>a()),xe(()=>at(u,1,it({a:!0,b:e.isMobile}),"p-1sp2xya")),g(d,u)},$$slots:{default:!0}})},i=l=>{gu(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(d,c)=>{var u=pu(),v=b(u);Ie(v,()=>e.children),tt(u,h=>a(h),()=>a()),xe(()=>at(u,1,it({a:!0,b:e.isMobile}),"p-1sp2xya")),g(d,u)},$$slots:{default:!0}})};U(o,l=>{e.isMobile?l(s):l(i,!1)})}g(t,r),ve()}var mu=E("<button><!></button>"),_u=E("<a><!></a>");function qe(t,e){let a=De(e,"dangerous",3,!1),r=De(e,"type",3,"button"),o=De(e,"href",3,"");var s=ce(),i=M(s);{var l=c=>{var u=mu();u.__click=function(...h){e.onClick?.apply(this,h)},u.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=b(u);Ie(v,()=>e.children??Ye),xe(()=>at(u,1,it({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")),g(c,u)},d=c=>{var u=_u();u.__click=function(...h){e.onClick?.apply(this,h)},u.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=b(u);Ie(v,()=>e.children??Ye),xe(()=>{st(u,"href",o()),at(u,1,it({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")}),g(c,u)};U(i,c=>{r()==="button"?c(l):c(d,!1)})}g(t,s)}gt(["click","keydown"]);var wu=E('<li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li>',1),yu=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),bu=E('<div class="a p-cjxu92"><button><!> <!></button> <!></div>');function Su(t,e){fe(e,!0);let a=I(!1),r=I(!1);const{getFeedOrder:o,setFeedOrder:s}=Fi();let i=Qa||yr,l=A(o);const d=()=>{n(a)||f(a,!0)},c=S=>{f(r,!0),s(S)},u=()=>{f(a,!1),f(r,!1)};Se(()=>{const S=B=>{B.key==="Escape"&&f(r,!0)};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)});var v=bu(),h=b(v);h.__click=d,at(h,1,it({b:!0,c:!0}),"p-cjxu92");var p=b(h);_e(p,{name:"filter"});var m=D(p,2);ht(m,{children:(S,B)=>{var w=Re("show feed order menu");g(S,w)}});var T=D(h,2);{var _=S=>{var B=yu(),w=M(B);he(w,()=>({"--right":"0px","--top":"44px"})),Lr(w.lastChild,{get startClose(){return n(r)},onClosed:u,get isMobile(){return i},children:(C,R)=>{var L=wu(),P=M(L),j=b(P);{let ae=A(()=>n(l)==="newest");qe(j,{get active(){return n(ae)},get dialogMode(){return i},onClick:()=>c("newest"),children:(ye,te)=>{var H=Re("Newest");g(ye,H)},$$slots:{default:!0}})}var G=D(P,2),V=b(G);{let ae=A(()=>n(l)==="oldest");qe(V,{get active(){return n(ae)},get dialogMode(){return i},onClick:()=>c("oldest"),children:(ye,te)=>{var H=Re("Oldest");g(ye,H)},$$slots:{default:!0}})}var q=D(G,2),ne=b(q);{let ae=A(()=>n(l)==="AtoZ");qe(ne,{get active(){return n(ae)},get dialogMode(){return i},onClick:()=>c("AtoZ"),children:(ye,te)=>{var H=Re("A to Z");g(ye,H)},$$slots:{default:!0}})}var X=D(q,2),z=b(X);{let ae=A(()=>n(l)==="ZtoA");qe(z,{get active(){return n(ae)},get dialogMode(){return i},onClick:()=>c("ZtoA"),children:(ye,te)=>{var H=Re("Z to A");g(ye,H)},$$slots:{default:!0}})}g(C,L)},$$slots:{default:!0}}),g(S,B)};U(T,S=>{n(a)&&S(_)})}g(t,v),ve()}gt(["click"]);var Cu=E('<div><!> <div class="a p-y3zt6o"></div></div>');function Ma(t,e){fe(e,!0);let a=I(!1);Se(()=>{const s=setTimeout(()=>{f(a,!0)},200);return()=>{clearTimeout(s)}});var r=Cu(),o=b(r);Ie(o,()=>e.children??Ye),xe(()=>at(r,1,it({b:!0,c:n(a)}),"p-y3zt6o")),g(t,r),ve()}var ku=E("<a><!></a>"),Tu=E("<button><!></button>");function Dt(t,e){let a=De(e,"type",3,"standard"),r=De(e,"typeButton",3,"button"),o=De(e,"element",3,"button"),s=De(e,"href",3,""),i=De(e,"fullWidth",3,!1),l=De(e,"withoutMinWidth",3,!1);var d=ce(),c=M(d);{var u=h=>{var p=ku();p.__click=function(...T){e.onClick?.apply(this,T)};var m=b(p);Ie(m,()=>e.children??Ye),xe(()=>{st(p,"target",e.target),st(p,"rel",e.rel),st(p,"href",s()),at(p,1,it({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),g(h,p)},v=h=>{var p=Tu();p.__click=function(...T){e.onClick?.apply(this,T)};var m=b(p);Ie(m,()=>e.children??Ye),xe(()=>{st(p,"type",r()),at(p,1,it({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),g(h,p)};U(c,h=>{o()==="a"?h(u):h(v,!1)})}g(t,d)}gt(["click"]);let zo=I(!1),Br=I(!1),Bo=I(""),jo=I("Cancel"),Ho=I("Confirm"),Uo,qr=I(void 0),Wo,qo=I("dangerous");function Ha(t){f(zo,!0),f(Bo,t.title,!0),t.buttonCancelTitle&&f(jo,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&f(Ho,t.buttonConfirmTitle,!0),Uo=t.onConfirm,f(qr,t.onCancel,!0),Wo=t.onClosed,t.type?f(qo,t.type,!0):f(qo,"dangerous")}var xu=E('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),Eu=E('<div class="a p-1jlul5o"><!></div>');function Pu(t,e){fe(e,!0);let a=I(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{f(a,!0)},250)};Se(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(qr)?.(),f(Br,!0)},l=async()=>{s(),await Uo?.(),f(Br,!0),o=!0},d=()=>{clearTimeout(r),f(a,!1),f(zo,!1),f(Br,!1),f(Bo,""),f(jo,"Cancel"),f(Ho,"Confirm"),f(qr,void 0),Uo=void 0,Wo&&Wo(o),o=!1};var c=ce(),u=M(c);{var v=h=>{Ir(h,{get blocked(){return n(a)},get startClose(){return n(Br)},onClosed:d,children:(p,m)=>{var T=Eu(),_=b(T);{var S=w=>{Ma(w,{})},B=w=>{var C=xu(),R=M(C),L=b(R),P=D(R,2),j=b(P);{var G=q=>{Dt(q,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(ne,X)=>{var z=Re();xe(()=>lt(z,n(jo))),g(ne,z)},$$slots:{default:!0}})};U(j,q=>{n(qr)&&q(G)})}var V=D(j,2);Dt(V,{onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(qo)},children:(q,ne)=>{var X=Re();xe(()=>lt(X,n(Ho))),g(q,X)},$$slots:{default:!0}}),xe(()=>lt(L,n(Bo))),g(w,C)};U(_,w=>{n(a)?w(S):w(B,!1)})}g(p,T)},$$slots:{default:!0}})};U(u,h=>{n(zo)&&h(v)})}g(t,c),ve()}const Sr=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,d=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!d){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var Nu=E('<div class="a p-rp2pt7"><a class="b p-rp2pt7"><span class="c p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function Au(t,e){fe(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=Zt(),{checkExistedDialog:i}=dn(),l=()=>{o.length===0&&!i()&&s(be.NewNote)};Se(()=>Sr({key:"n",action:l})),ts();var d=Nu(),c=b(d),u=A(()=>r(be.NewNote));c.__click=function(..._){n(u)?.apply(this,_)};var v=b(c),h=b(v);he(h,()=>({"--size":"32px","--color":"#b0b0b0"})),_e(h.lastChild,{name:"add"});var p=D(h,2);ht(p,{children:(_,S)=>{var B=Re("Add note");g(_,B)}});var m=D(v,2),T=b(m);he(T,()=>({"--size":"16px","--color":"#b0b0b0"})),_e(T.lastChild,{name:"plus"}),xe(_=>st(c,"href",_),[()=>a(be.NewNote)]),g(t,d),ve()}gt(["click"]);var Mu=E("<button><!></button>");function ua(t,e){fe(e,!0);let a=De(e,"type",3,"button"),r=!1,o=I(null);Be(()=>{e.onRef&&e.onRef(n(o))});const s=u=>{(u.key==="Enter"||u.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=u=>{(u.pointerType==="mouse"&&u.button===0||u.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(u)};var d=Mu();d.__keydown=s,d.__click=i,d.__pointerdown=l,d.__touchstart=function(...u){e.onTouchStart?.apply(this,u)};var c=b(d);Ie(c,()=>e.children??Ye),tt(d,u=>f(o,u),()=>n(o)),xe(()=>{st(d,"type",a()),d.disabled=e.disabled,at(d,1,it({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-1g975vt")}),g(t,d),ve()}gt(["keydown","click","pointerdown","touchstart"]);var Du=E('<div class="b p-1pt17hy"> </div>'),Iu=E('<div class="a p-1pt17hy"><input/> <!></div>');function Cr(t,e){fe(e,!0);let a=De(e,"value",15,""),r=De(e,"error",3,""),o=De(e,"ref",15,null);var s=Iu(),i=b(s);i.__input=function(...u){e.onInput?.apply(this,u)};let l;tt(i,u=>o(u),()=>o());var d=D(i,2);{var c=u=>{var v=Du(),h=b(v);xe(()=>lt(h,r())),g(u,v)};U(d,u=>{r()&&u(c)})}xe(()=>{st(i,"placeholder",e.placeholder),l=at(i,1,"p-1pt17hy",null,l,{error:!!r()})}),cn("blur",i,function(...u){e.onBlur?.apply(this,u)}),cn("focus",i,function(...u){e.onFocus?.apply(this,u)}),Di(i,a),g(t,s),ve()}gt(["input"]);var Lu=E('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Ru=E('<form class="a p-y9ylet"><!></form>');function Ou(t,e){fe(e,!0);const{renameTag:a}=Ot(),{getSelectedTags:r,setSelectedTags:o}=Hn(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=la(),{getFiltredNotes:d}=Na();let c=I(!1),u=I(!1),v,h=!1,p=I(null),m=I(ut(e.tag)),T=e.nextFocusRef;Se(()=>(n(p)&&n(p).focus(),()=>{v&&clearTimeout(v)}));const _=()=>{v=setTimeout(()=>{f(u,!0)},250)},S=()=>{f(c,!0)},B=async()=>{if(n(m).trim()===e.tag){S();return}if(n(m).trim()!=="")try{_();const R=r(),L=[...R].map(q=>q===e.tag?n(m).trim():q),P=new Set(s()),j=d(),G=P.size?[...P]:j.map(q=>q.id),{cancel:V}=await a(e.tag,n(m).trim(),G);l(),o(new Set(L)),dt("Tag renamed",{cancel:{nextFocusRef:T,onCancel:async()=>{await V(),o(R),i(P),setTimeout(()=>{const{prev:q}=wt(T);q?.focus()},16)}}}),h=!0}finally{f(c,!0)}},w=()=>{e.onClosed?.(h)},C=R=>{R.preventDefault(),B()};Ir(t,{get blocked(){return n(u)},get startClose(){return n(c)},onClosed:w,children:(R,L)=>{var P=Ru(),j=b(P);{var G=q=>{Ma(q,{})},V=q=>{var ne=Lu(),X=M(ne),z=b(X),ae=D(X,2);Cr(ae,{placeholder:"Enter new tag name",get ref(){return n(p)},set ref(J){f(p,J,!0)},get value(){return n(m)},set value(J){f(m,J,!0)}});var ye=D(ae,2),te=b(ye);Dt(te,{onClick:S,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(J,le)=>{var oe=Re("Cancel");g(J,oe)},$$slots:{default:!0}});var H=D(te,2);Dt(H,{onClick:B,fullWidth:!0,withoutMinWidth:!0,children:(J,le)=>{var oe=Re("OK");g(J,oe)},$$slots:{default:!0}}),xe(()=>lt(z,`Rename "${e.tag??""}" for selected notes`)),g(q,ne)};U(j,q=>{n(u)?q(G):q(V,!1)})}cn("submit",P,C),g(R,P)},$$slots:{default:!0}}),ve()}let $n=I(!1),fa=I(!1),Gt=I(""),ga=I(0),fr=I(0),vr=I(0),Vr,Xr=()=>({bottom:0,right:0,height:0}),$t=I(null),Vo=I(null);function Fu(t){if(n($n)){f(fa,!0),n(Gt)!==t.tag&&(Vr=()=>{const a=t.getRect();f($n,!0),f(Gt,t.tag,!0),f(ga,a.bottom,!0),f(fr,a.right,!0),f(vr,a.height,!0),Xr=t.getRect,f($t,t.focusRef,!0)});return}const e=t.getRect();f($n,!0),f(Gt,t.tag,!0),f(ga,e.bottom,!0),f(fr,e.right,!0),f(vr,e.height,!0),Xr=t.getRect,f($t,t.focusRef,!0)}const zu=()=>n($n),Bu=()=>n(Vo);var ju=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),Hu=E('<li class="p-16hbyw2"><!></li>'),Uu=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Wu=E('<li class="p-16hbyw2"><!></li>'),qu=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),Vu=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),Ku=E('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),Yu=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Gu=E("<!> <!>",1);function Xu(t,e){fe(e,!0);const{getScrollContainer:a}=vo(),{pinTag:r,getGetMapTags:o,deleteTag:s}=Ot(),{checkMobileSize:i}=Aa(),{getSelectedTags:l,removeTag:d,setSelectedTags:c}=Hn(),{getSelectedNotes:u,setSelectedNotes:v,clearNotes:h}=la(),{getFiltredNotes:p}=Na();let m=I(!1);Be(()=>{n($n),Vt(()=>{f(m,o()().get(n(Gt))?.pinned||!1,!0)})});let T=I(!1);const _=()=>{r(n(Gt),!0),f(fa,!0);let te=n($t),H=wt(te)?.next;dt("Tag pinned",{cancel:{nextFocusRef:H,onCancel:async()=>{r(n(Gt),!1),setTimeout(()=>{const{prev:J}=wt(H);J?.focus()},16)}}})},S=()=>{r(n(Gt),!1),f(fa,!0);let te=n($t),H=wt(te)?.next;dt("Tag unpinned",{cancel:{nextFocusRef:H,onCancel:async()=>{r(n(Gt),!0),setTimeout(()=>{const{prev:J}=wt(H);J?.focus()},16)}}})},B=()=>{f($n,!1),f(fa,!1),f(ga,0),f(fr,0),f(vr,0),Xr=()=>({bottom:0,right:0,height:0}),f($t,null),Vr&&setTimeout(()=>{Vr?.(),Vr=void 0})};let w=A(()=>window.innerHeight-n(ga)<100?n(ga)-n(vr)-98+"px":n(ga)+5+"px"),C=A(a);const R=te=>{te.key==="Tab"&&te.shiftKey&&(te.preventDefault(),n($t)?.focus())},L=te=>{te.key==="Tab"&&!te.shiftKey&&n($t)&&(te.preventDefault(),wt(n($t))?.next?.focus())};Se(()=>{const te=H=>{H.key==="Escape"&&n($n)&&n($t)?.focus()};return window.addEventListener("keydown",te),()=>{window.removeEventListener("keydown",te)}});const P=()=>{f(fa,!0);let te=n($t),H=wt(te)?.next;Ha({title:`Are you sure to delete "${n(Gt)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const J=Array.from(n(V)),le=new Set(u()),oe=p(),de=le.size?[...le]:oe.map(Q=>Q.id);n(V).has(n(Gt))&&(le.size===0||oe.length===le.size)&&d(n(Gt)),h();const{cancel:ue}=await s(n(Gt),de);dt("Tag deleted",{cancel:{nextFocusRef:H,onCancel:async()=>{await ue(),c(new Set(J)),v(new Set(le)),setTimeout(()=>{const{prev:Q}=wt(H);Q?.focus()},16)}}})},onCancel:async()=>{},onClosed:J=>{setTimeout(()=>{J||te?.focus()},16)}})};let j=()=>{};const G=()=>{f(fa,!0),f(T,!0);let te=n($t);j=()=>{f(T,!1),setTimeout(()=>{te?.focus()},16)}};Be(()=>{const te=()=>{const H=Xr();f(ga,H.bottom,!0),f(fr,H.right,!0),f(vr,H.height,!0)};return n(C)?.addEventListener("scroll",te),window.addEventListener("resize",te),()=>{n(C)?.removeEventListener("scroll",te),window.removeEventListener("resize",te)}});let V=A(l),q=A(i);var ne=Gu(),X=M(ne);{var z=te=>{var H=Yu(),J=M(H);he(J,()=>({"--left":n(fr)-36+"px","--top":n(w),"--transform-origin":"top left"})),Lr(J.lastChild,{get startClose(){return n(fa)},onClosed:B,get isMobile(){return n(q)},get ref(){return n(Vo)},set ref(le){f(Vo,le,!0)},children:(le,oe)=>{var de=Ku(),ue=M(de);{var Q=Ce=>{var ie=Hu(),$=b(ie);qe($,{onClick:_,onKeydown:R,get dialogMode(){return n(q)},children:(Te,je)=>{var y=ju(),x=M(y);he(x,()=>({"--size":"20px"})),_e(x.lastChild,{name:"pin"}),g(Te,y)},$$slots:{default:!0}}),g(Ce,ie)},O=Ce=>{var ie=Wu(),$=b(ie);qe($,{onClick:S,onKeydown:R,get dialogMode(){return n(q)},children:(Te,je)=>{var y=Uu(),x=M(y);he(x,()=>({"--size":"20px"})),_e(x.lastChild,{name:"pin-cancel"}),g(Te,y)},$$slots:{default:!0}}),g(Ce,ie)};U(ue,Ce=>{n(m)?Ce(O,!1):Ce(Q)})}var ge=D(ue,2),ke=b(ge);qe(ke,{onClick:G,get dialogMode(){return n(q)},children:(Ce,ie)=>{var $=qu(),Te=M($);he(Te,()=>({"--size":"20px"})),_e(Te.lastChild,{name:"pen"}),g(Ce,$)},$$slots:{default:!0}});var re=D(ge,2),we=b(re);qe(we,{onClick:P,onKeydown:L,dangerous:!0,get dialogMode(){return n(q)},children:(Ce,ie)=>{var $=Vu(),Te=M($);he(Te,()=>({"--size":"20px"})),_e(Te.lastChild,{name:"bin"}),g(Ce,$)},$$slots:{default:!0}}),g(le,de)},$$slots:{default:!0}}),g(te,H)};U(X,te=>{n($n)&&te(z)})}var ae=D(X,2);{var ye=te=>{{let H=A(()=>wt(n($t))?.next||null);Ou(te,{get tag(){return n(Gt)},get nextFocusRef(){return n(H)},onClosed:J=>{j(J)}})}};U(ae,te=>{n(T)&&te(ye)})}g(t,ne),ve()}var Ju=E('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Zu=E('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),Qu=E("<!> <span> </span> <!>",1),$u=E('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function gr(t,e){fe(e,!0);let{getGetMapTags:a}=Ot(),r=I(null),o=A(zu);const s=()=>{if(n(r)){const v=n(r).getBoundingClientRect();return{bottom:v.bottom,right:v.right,height:v.height}}return{bottom:0,right:0,height:0}},i=v=>{v.stopPropagation(),v.preventDefault(),Fu({tag:e.tag,getRect:s,focusRef:n(r)})},l=v=>{v.key==="Tab"&&!v.shiftKey&&n(o)&&(v.preventDefault(),Bu()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let d=A(()=>a()().get(e.tag)?.pinned||!1);var c=$u(),u=b(c);he(u,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),ua(u.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(v,h)=>{var p=Qu(),m=M(p);{var T=C=>{var R=Ju(),L=b(R);he(L,()=>({"--size":"18px"})),_e(L.lastChild,{name:"pin"}),g(C,R)};U(m,C=>{n(d)&&C(T)})}var _=D(m,2),S=b(_),B=D(_,2);{var w=C=>{var R=Zu();R.__click=i,R.__keydown=l;var L=b(R),P=b(L);he(P,()=>({"--size":"16px"})),_e(P.lastChild,{name:"menu"});var j=D(P,2);ht(j,{children:(G,V)=>{var q=Re("Tag options");g(G,q)}}),tt(R,G=>f(r,G),()=>n(r)),xe(()=>at(R,1,it({c:!0,d:e.type==="selected"}),"p-9jjlcl")),g(C,R)};U(B,C=>{e.hideMenu||C(w)})}xe(()=>lt(S,e.tag)),g(v,p)},$$slots:{default:!0}}),g(t,c),ve()}gt(["click","keydown"]);var ef=E('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function Ns(t,e){fe(e,!0);let a=De(e,"mobile",3,!1);const{getGetMapTags:r}=Ot();let s=A(()=>{const p=r()();return[...e.tags].sort((m,T)=>p.get(m)?.pinned?-1:p.get(T)?.pinned?1:m.localeCompare(T))}),i=A(()=>n(s).filter(p=>r()().get(p)?.pinned)),l=A(()=>n(s).filter(p=>!r()().get(p)?.pinned));var d=ef(),c=b(d),u=b(c);On(u,16,()=>n(i),p=>p,(p,m)=>{gr(p,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})});var v=D(u,2);On(v,17,()=>e.metaTags,p=>"meta"+p,(p,m)=>{gr(p,{hideMenu:!0,get tag(){return n(m)},onClick:()=>{e.handleMetaTagClick(n(m))}})});var h=D(v,2);On(h,16,()=>n(l),p=>p,(p,m)=>{gr(p,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})}),xe(()=>at(c,1,it({b:!0,c:a()}),"p-lawyrs")),g(t,d),ve()}var tf=E('<div class="b c p-1i0uzbi"><div class="d p-1i0uzbi"><button class="e p-1i0uzbi"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),nf=E('<div class="a p-1i0uzbi"><!></div>');function As(t,e){fe(e,!0);let a=I(null);const r=d=>{f(a,d,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};Be(()=>{n(a)&&n(a).focus()});var s=nf(),i=b(s);{var l=d=>{var c=tf(),u=b(c),v=b(u);v.__click=o;var h=b(v);he(h,()=>({"--size":"20px"})),_e(h.lastChild,{name:"close"});var p=D(h,2);ht(p,{children:(_,S)=>{var B=Re("Clear");g(_,B)}});var m=D(u,2);On(m,19,()=>e.metaTags,_=>"meta_"+_,(_,S,B)=>{{let w=A(()=>n(B)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);gr(_,{hideMenu:!0,type:"selected",get tag(){return n(S)},onClick:()=>{e.handleMetaTagClick(n(S))},get onRef(){return n(w)}})}});var T=D(m,2);On(T,18,()=>e.selectedTags,_=>_,(_,S,B)=>{{let w=A(()=>n(B)===e.selectedTags.size-1?r:void 0);gr(_,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return S},onClick:()=>{e.handleSelectedTagClick(S)},get onRef(){return n(w)}})}}),g(d,c)};U(i,d=>{e.selectedTags.size+e.metaTags.size>0&&d(l)})}g(t,s),ve()}gt(["click"]);const Ko=(t,e,a,r)=>{if(t.has(et.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},Fn=200,af=t=>t<.5?2*t*t:-1+(4-2*t)*t,sl=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,af(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},rf=t=>{const{getIsKeyboardVisible:a}=Zd();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=v=>({x:v.clientX,y:v.clientY,time:performance.now()}),d=v=>{r=[l(v.touches[0])],o=!0},c=v=>{if(!o||s)return;r.push(l(v.touches[0]));const h=performance.now()-150;r=r.filter(P=>P.time>=h);const p=r.at(-1),m=r[0];if(!p||!m)return;const T=m.x,_=m.y,S=p.x,B=p.y,w=S-T,C=B-_,R=Math.abs(w)>Math.abs(C),L=Math.abs(w)>3;R&&L&&!a()&&(s=!0,v.preventDefault(),t([...r]),i())},u=()=>{i()};Se(()=>(document.addEventListener("touchstart",d,{passive:!0}),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchend",u,{passive:!0}),document.addEventListener("touchcancel",u,{passive:!0}),()=>{document.removeEventListener("touchstart",d),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",u),document.removeEventListener("touchcancel",u)}))},Ms=5,Ds=.6,sa=.3;function il(t,e){fe(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,d=0,c=0,u=null,v=null;const h=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,d=0,c=0,u!==null&&(cancelAnimationFrame(u),u=null),v&&(clearTimeout(v),v=null)},p=()=>{e.onCancel(),h()},m=()=>{v&&clearTimeout(v),v=setTimeout(p,5e3)};rf(async L=>{if(!o)try{const P=L.at(-1);if(!P)throw new Error("No points available for swipe initialization");const j=await e.onInit();if(!j)return;s=j.initialPosition,i=j.currentPosition,l=j.minPosition,d=j.maxPosition,c=j.width,r=P.x,a=L,o=!0,m()}catch(P){console.error("Error during swipe initialization:",P),h()}});const _=L=>Math.max(l,Math.min(d,L)),S=()=>{if(u=null,!o){h();return}const L=a.at(-1),P=a[0];if(!L||!P)return;let j=L.x-r;r=L.x;const G=_(i+j);G!==i&&(i=G,e.onUpdate({initialPosition:s,newPosition:G,width:c,minPosition:l,maxPosition:d}))},B=L=>{if(!o){h();return}a.push({x:L.touches[0].clientX,y:L.touches[0].clientY,time:performance.now()});const P=performance.now()-150;a=a.filter(q=>q.time>=P),u===null&&(u=requestAnimationFrame(S)),m();const j=L.touches[0].clientX-a[0].x,G=L.touches[0].clientY-a[0].y;Math.abs(j)>Math.abs(G)&&L.cancelable&&L.preventDefault()},w=L=>{const P=Math.abs(L);if(P>=Ds)return Ms;if(P>=sa){const j=(P-sa)/(Ds-sa);return e.baseActionThreshold-j*(e.baseActionThreshold-Ms)}else return e.baseActionThreshold},C=L=>{if(!o){h();return}let P=0;a.push({x:L.changedTouches[0].clientX,y:L.changedTouches[0].clientY,time:performance.now()}),S(),u!==null&&(cancelAnimationFrame(u),u=null);const j=a[0],G=a[a.length-1],V=G.x-j.x,q=G.time-j.time;q>0&&(P=V/q);const ne=w(P);e.onFinish({swipeVelocity:P,currentPosition:i,minPosition:l,maxPosition:d,initialPosition:s,width:c,actionThreshold:ne}),h()},R=()=>{p()};Se(()=>(document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("touchend",C,{passive:!0}),document.addEventListener("touchcancel",R,{passive:!0}),()=>{document.removeEventListener("touchmove",B),document.removeEventListener("touchend",C),document.removeEventListener("touchcancel",R),u!==null&&cancelAnimationFrame(u),v&&clearTimeout(v)})),ve()}function of(t,e){fe(e,!0);const a=Un();let r=De(e,"animationRef",7),o=De(e,"dialog",7);il(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const c=-e.dialogWidth*.7,u=0;let v=e.sidebarState==="closed"?c:u,h=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let T=()=>1;if(r().current){r().current.pause();let _=Number(r().current.currentTime);br()&&(_=Number(_)+50,r().current.currentTime=Math.min(Math.max(Fn-1,_),_));const S=r().current.effect?.getComputedTiming().progress||0;T=()=>S,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(_=>requestAnimationFrame(_)),h=Math.abs(1-T())}h=e.sidebarState==="closed"?h:1-h,o().style.setProperty("--backdrop-bg",`${h*.1}`),o()&&!o().open&&(o().showModal(),br()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=h*-25;const p=h*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let m=e.sidebarState==="closed"?c:u;return e.sidebarState==="opened"||e.sidebarState==="closed"||(m=p),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:v,currentPosition:m,minPosition:c,maxPosition:u,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:c,width:u})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const v=1-Math.abs(c/u)/7*10;o().style.transform=`translate3d(${c}px, 0, 0)`,a.swipingRatio=v*-25,o().style.setProperty("--backdrop-bg",`${v*.1}`)},onFinish:({swipeVelocity:c,currentPosition:u,initialPosition:v,width:h,actionThreshold:p})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let m="close";const T=Math.abs(u-v)/h*100/7*10;if(T===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(T===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?m=Math.abs(T)>p||c>sa?"open":"close":e.sidebarState==="swipingClose"&&(m=Math.abs(T)>p&&c<=sa||c<-sa?"close":"open");let _=sl(Math.abs(T)/100);e.sidebarState==="swipingClose"&&m==="close"&&(_=1-_);const S=(m==="open"?1-_:_)*Fn;a.duration=S/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${m==="open"?.1:0}`),m==="open"?e.onOpen():m==="close"&&e.onClose()}}),ve()}var sf=E("<dialog><div><!> <!></div></dialog> <!> <!>",1);function lf(t,e){fe(e,!0);const{getSidebarState:a,setSidebarState:r}=Dr();let o=I(0);Se(()=>{const z=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",z),z(),()=>{window.removeEventListener("resize",z)}});const s=Un(),{isScrolling:i}=os();let l=I(null),d=I(null),c={},u=A(a);const v=()=>{e.blocked||r("closing")},h=z=>{r(z==="open"?"swipingOpen":"swipingClose")},p=()=>{r("opened")},m=()=>{r("preOpening")},T=()=>{n(l)?.close(),r("closed")},_=z=>{z.preventDefault(),v()};Se(()=>(n(l)?.addEventListener("close",T),n(l)?.addEventListener("cancel",_),()=>{n(l)?.removeEventListener("close",T),n(l)?.removeEventListener("cancel",_)}));const S=A(i);let B=A(()=>s.working);const w=z=>{z?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=oa().duration};Be(()=>{n(u)==="opening"?Vt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const z=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const ae=n(l)?.animate([{transform:z},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||Fn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});c.current=ae,ae&&(ae.onfinish=()=>{p(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=oa().duration,ae.cancel(),c.current=void 0})})}):n(u)==="closing"&&Vt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const z=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const ae=n(l)?.animate([{transform:z},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||Fn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});c.current=ae,ae&&(ae.onfinish=()=>{T(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=oa().duration,ae.cancel(),c.current=void 0})})})}),Be(()=>{n(u)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),br()&&n(l)?.getBoundingClientRect()),r("opening"))}),Se(()=>{n(u)==="opened"&&r("preOpening")});var C=sf(),R=M(C),L=b(R),P=b(L);Ie(P,()=>e.children);var j=D(P,2);{var G=z=>{is(z,{})};U(j,z=>{n(u)==="opened"&&z(G)})}tt(L,z=>f(d,z),()=>n(d)),tt(R,z=>f(l,z),()=>n(l));var V=D(R,2);{var q=z=>{ls(z,{get dialog(){return n(l)},get dialogInner(){return n(d)},onClose:v})};U(V,z=>{n(d)&&n(u)==="opened"&&!e.blocked&&z(q)})}var ne=D(V,2);{var X=z=>{of(z,{onCancelSwipe:w,onOpen:m,onClose:v,onSwipe:h,get dialogWidth(){return n(o)},get animationRef(){return c},get dialog(){return n(l)},get sidebarState(){return n(u)}})};U(ne,z=>{!n(S)&&!e.blocked&&z(X)})}xe(()=>{at(R,1,it({a:!0,b:n(B),c:n(u)==="opened"||n(u)==="opening"||n(u)==="closing"||n(u)==="swipingClose",d:n(u)==="opened"||n(u)==="opening"||n(u)==="swipingOpen"}),"p-1gucilc"),at(L,1,it({e:!0,f:n(u)==="swipingOpen",g:n(u)!=="opened"}),"p-1gucilc")}),g(t,C),ve()}var cf=E('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),df=E('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function uf(t,e){fe(e,!0);const{checkMobileSize:a}=Aa(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=Dr(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:d}=Zt(),{getTagsSearch:c,setTagsSearch:u}=rd(),{getSelectedTags:v,addTag:h,removeTag:p,clearTags:m}=Hn(),{getSelectedMetaTags:T,addMetaTag:_,removeMetaTag:S,clearSelectedMetaTags:B}=fo();let w=A(v),C=A(T);const{getGetNotes:R,checkNotesInArchive:L,checkNotesInBin:P}=Ot(),j=A(R),G=O=>{h(O)},V=O=>{_(O)},q=O=>{p(O)},ne=O=>{S(O)};let X=A(()=>n(w).size===0&&!n(C).has(et.INBOX)&&(n(j)()||[]).some(O=>(!n(C).has(et.ARCHIVED)&&!n(C).has(et.BIN)&&O?.data&&!O.data.deletedAt&&!O.data.archivedAt||n(C).has(et.ARCHIVED)&&O?.data&&!O.data.deletedAt&&O.data.archivedAt||n(C).has(et.BIN)&&O?.data&&O.data.deletedAt)&&O?.data?.tags.length===0)),z=A(()=>Ko(n(C),n(w),n(j)()||[],O=>!(O?.data&&(O.data.deletedAt||O.data.archivedAt)&&!n(C).has(et.ARCHIVED)&&!n(C).has(et.BIN)||O?.data&&(O.data.deletedAt||!O.data.archivedAt)&&n(C).has(et.ARCHIVED)||O?.data&&!O.data.deletedAt&&n(C).has(et.BIN)))),ae=A(()=>n(z).filter(O=>c()===""||O.toLowerCase().indexOf(c().toLowerCase())!==-1)),ye=A(a);const{checkExistedDialog:te}=dn();let H=A(()=>i().length>0||te());const J=()=>{if(n(ye)){if(n(H))return;o()==="opened"?r():o()==="closed"&&s()}};Se(()=>Sr({key:"b",meta:!0,action:J})),Se(()=>Sr({key:"b",ctrl:!0,action:J}));let le=A(()=>[...n(X)&&n(C).size===0?[et.INBOX]:[],...n(C).size===0?[...L()&&n(w).size===0?[et.ARCHIVED]:[],...P()&&n(w).size===0?[et.BIN]:[]]:[]].filter(O=>c()===""||O.toLowerCase().indexOf(c().toLowerCase())!==-1).sort((O,ge)=>O===et.INBOX?-1:ge===et.INBOX?1:O.localeCompare(ge)));var oe=ce(),de=M(oe);{var ue=O=>{lf(O,{get blocked(){return n(H)},children:(ge,ke)=>{var re=cf(),we=M(re),Ce=b(we),ie=b(Ce);ol(ie,{});var $=D(ie,2),Te=b($),je=A(()=>d(be.Settings));Te.__click=function(...Y){n(je)?.apply(this,Y)};var y=b(Te);he(y,()=>({"--size":"24px"})),_e(y.lastChild,{name:"settings"});var x=D(y,2);ht(x,{children:(Y,Z)=>{var me=Re("Settings");g(Y,me)}});var k=D(Te,2),N=A(()=>d(be.Sync));k.__click=function(...Y){n(N)?.apply(this,Y)};var W=b(k);he(W,()=>({"--size":"24px"})),_e(W.lastChild,{name:"sync"});var K=D(W,2);ht(K,{children:(Y,Z)=>{var me=Re("Sync");g(Y,me)}});var pe=D(Ce,2),Ee=b(pe);{let Y=A(c);Fo(Ee,{placeholder:"Search tag",get value(){return n(Y)},onChange:Z=>{u(Z)}})}var se=D(pe,2);{let Y=A(()=>n(C).has(et.BIN));As(se,{get clearTags(){return m},get clearMetaTags(){return B},get hideTagMenu(){return n(Y)},handleMetaTagClick:ne,get metaTags(){return n(C)},get selectedTags(){return n(w)},handleSelectedTagClick:q})}var ee=D(we,2);{let Y=A(()=>n(C).has(et.BIN));Ns(ee,{get hideTagMenu(){return n(Y)},get metaTags(){return n(le)},get tags(){return n(ae)},handleMetaTagClick:V,handleTagClick:G,mobile:!0})}xe((Y,Z)=>{st(Te,"href",Y),st(k,"href",Z)},[()=>l(be.Settings),()=>l(be.Sync)]),g(ge,re)},$$slots:{default:!0}})},Q=O=>{var ge=df(),ke=b(ge),re=b(ke);{let Te=A(c);Fo(re,{placeholder:"Search tag",get value(){return n(Te)},onChange:je=>{u(je)}})}var we=D(ke,2),Ce=b(we),ie=b(Ce);{let Te=A(()=>n(C).has(et.BIN));As(ie,{get metaTags(){return n(C)},get clearTags(){return m},get clearMetaTags(){return B},get hideTagMenu(){return n(Te)},get selectedTags(){return n(w)},handleMetaTagClick:ne,handleSelectedTagClick:q})}var $=D(Ce,2);{let Te=A(()=>n(C).has(et.BIN));Ns($,{get metaTags(){return n(le)},get hideTagMenu(){return n(Te)},get tags(){return n(ae)},handleMetaTagClick:V,handleTagClick:G})}g(O,ge)};U(de,O=>{n(ye)?O(ue):O(Q,!1)})}g(t,oe),ve()}gt(["click"]);var ff=E('<button class="a p-11odwi4"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function vf(t,e){fe(e,!0);let a=De(e,"ref",15);var r=ff();r.__click=function(...i){e.onClick?.apply(this,i)};var o=b(r);he(o,()=>({"--rotate":"-90deg"})),_e(o.lastChild,{name:"menu"});var s=D(o,2);ht(s,{children:(i,l)=>{var d=Re();xe(()=>lt(d,e.title)),g(i,d)}}),tt(r,i=>a(i),()=>a()),g(t,r),ve()}gt(["click"]);const Is=t=>{try{new URL(t)}catch{return!1}return!0};var gf=E('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),hf=E('<form class="a p-y9ylet"><!></form>');function pf(t,e){fe(e,!0);const{addTag:a}=Ot(),{getSelectedTags:r}=Hn(),{getSelectedNotes:o}=la(),{getFiltredNotes:s}=Na();let i=I(!1),l=I(!1),d,c=!1,u=I(null),v=I(""),h=e.nextFocusRef;Se(()=>(n(u)&&n(u).focus(),()=>{d&&clearTimeout(d)}));const p=()=>{d=setTimeout(()=>{f(l,!0)},250)},m=()=>{f(i,!0)},T=async()=>{if(r().has(n(v).trim())){m();return}if(n(v).trim()!=="")try{p();const w=new Set(o()),C=w.size?[...w]:s().map(L=>L.id),{cancel:R}=await a(n(v).trim(),C);dt("Tag added",{cancel:{nextFocusRef:h,onCancel:async()=>{await R(),setTimeout(()=>{const{prev:L}=wt(h);L?.focus()},16)}}}),c=!0}finally{f(i,!0)}},_=()=>{e.onClosed?.(c)},S=B=>{B.preventDefault(),T()};Ir(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:_,children:(B,w)=>{var C=hf(),R=b(C);{var L=j=>{Ma(j,{})},P=j=>{var G=gf(),V=D(M(G),2);Cr(V,{placeholder:"Enter new tag name",get ref(){return n(u)},set ref(z){f(u,z,!0)},get value(){return n(v)},set value(z){f(v,z,!0)}});var q=D(V,2),ne=b(q);Dt(ne,{onClick:m,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(z,ae)=>{var ye=Re("Cancel");g(z,ye)},$$slots:{default:!0}});var X=D(ne,2);Dt(X,{onClick:T,fullWidth:!0,withoutMinWidth:!0,children:(z,ae)=>{var ye=Re("OK");g(z,ye)},$$slots:{default:!0}}),g(j,G)};U(R,j=>{n(l)?j(L):j(P,!1)})}cn("submit",C,S),g(B,C)},$$slots:{default:!0}}),ve()}var mf=E('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),_f=E('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),wf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),yf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),bf=E("<div><!></div>"),Sf=E('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),Cf=E('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!> <!> <!></div> <!></div>');function ll(t,e){fe(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=Ot(),{getSelectedTags:s}=Hn();let i=I(null),l=I(""),d=I(null);const c=A(a);let u=De(e,"shownTagInput",15);const v=()=>n(c)?e.mode==="exit"?Ko(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let p=A(()=>{const H=s(),J=new Set(Ko(new Set,new Set(e.selectedTags.length>0?e.selectedTags:H),o()()||[]));return v().filter(oe=>e.selectedTags.some(de=>oe===de)?!1:n(l)===""||oe.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((oe,de)=>H.has(oe)&&H.has(de)?oe.localeCompare(de):H.has(oe)?-1:H.has(de)?1:J.has(oe)&&J.has(de)?oe.localeCompare(de):J.has(oe)?-1:J.has(de)?1:0)});const m=H=>{if(!e.selectedTags.includes(H)){if(e.mode!=="exit"||n(p).includes(H)){e.onChangeTags([...e.selectedTags,H]),f(l,"");return}n(i)?.focus()}},T=H=>{const J=e.selectedTags.filter(le=>le!==H);e.onRejectedTag&&e.onRejectedTag(H),J.length===0?e.onChangeTags([]):e.onChangeTags(J)},_=H=>{H.preventDefault(),n(l)!==""?m(n(l)):u(!1)};Be(()=>{n(i)&&u()&&n(i).focus(),u()||f(l,"")});const S=H=>{H.preventDefault()},B=H=>{H.preventDefault(),H.stopPropagation(),H.stopImmediatePropagation()};var w=Cf(),C=b(w),R=b(C);On(R,17,()=>e.selectedTags,H=>H+"-tags_selected",(H,J)=>{ua(H,{onPointerDown:S,onTouchStart:B,onClick:()=>{T(n(J))},type:"button",style:"selected",children:(le,oe)=>{var de=Re();xe(()=>lt(de,n(J))),g(le,de)},$$slots:{default:!0}})});var L=D(R,2);{var P=H=>{var J=ce(),le=M(J);On(le,17,()=>n(p).filter(oe=>oe.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),oe=>oe+"-tags_suggested",(oe,de)=>{ua(oe,{onPointerDown:S,onTouchStart:B,onClick:()=>{m(n(de))},children:(ue,Q)=>{var O=Re();xe(()=>lt(O,n(de))),g(ue,O)},$$slots:{default:!0}})}),g(H,J)};U(L,H=>{u()&&H(P)})}var j=D(L,2);{var G=H=>{ua(H,{onPointerDown:S,onTouchStart:B,onClick:()=>{m(n(l)),f(l,"")},children:(J,le)=>{var oe=Re();xe(()=>lt(oe,n(l))),g(J,oe)},$$slots:{default:!0}})};U(j,H=>{n(l)!==""&&(e.mode!=="exit"||n(p).find(J=>J.toLowerCase()===n(l).toLowerCase()))&&H(G)})}var V=D(j,2);{var q=H=>{ua(H,{mode:"empty",onPointerDown:S,onTouchStart:B,onClick:()=>{u(!0)},children:(J,le)=>{var oe=mf(),de=b(oe);he(de,()=>({"--size":"12px"})),_e(de.lastChild,{name:"plus"});var ue=D(de,2);ht(ue,{children:(Q,O)=>{var ge=Re("add tag");g(Q,ge)}}),g(J,oe)},$$slots:{default:!0}})};U(V,H=>{u()||H(q)})}var ne=D(V,2);{var X=H=>{ua(H,{mode:"empty",onPointerDown:S,onTouchStart:B,get onClick(){return e.onUsePreviousTags},children:(J,le)=>{var oe=_f(),de=b(oe);he(de,()=>({"--size":"12px"})),_e(de.lastChild,{name:"back"});var ue=D(de,2);ht(ue,{children:(Q,O)=>{var ge=Re("use previous tags");g(Q,ge)}}),g(J,oe)},$$slots:{default:!0}})};U(ne,H=>{e.previousTagsEnabled&&e.onUsePreviousTags&&H(X)})}var z=D(ne,2);{var ae=H=>{ua(H,{mode:"empty",onPointerDown:S,onTouchStart:B,get onClick(){return e.onGenTags},get disabled(){return e.generatingTags},children:(J,le)=>{var oe=bf(),de=b(oe);{var ue=O=>{var ge=wf(),ke=M(ge);he(ke,()=>({"--size":"12px"})),Ma(ke.lastChild,{}),g(O,ge)},Q=O=>{var ge=yf(),ke=M(ge);he(ke,()=>({"--size":"12px","--rotate":"180deg"})),_e(ke.lastChild,{name:"stars"});var re=D(ke,2);ht(re,{children:(we,Ce)=>{var ie=Re("gen tags");g(we,ie)}}),g(O,ge)};U(de,O=>{e.generatingTags?O(ue):O(Q,!1)})}g(J,oe)},$$slots:{default:!0}})};U(z,H=>{e.genTagsEnabled&&e.onGenTags&&H(ae)})}var ye=D(C,2);{var te=H=>{var J=Sf(),le=b(J),oe=b(le);Cr(oe,{placeholder:"tag",get ref(){return n(i)},set ref(ue){f(i,ue,!0)},get value(){return n(l)},set value(ue){f(l,ue,!0)}});var de=D(le,2);de.__pointerdown=S,de.__touchstart=B,de.__click=()=>{n(i)?.blur(),n(l)!==""&&m(n(l)),u(!1),f(l,"")},cn("submit",J,_),g(H,J)};U(ye,H=>{u()&&H(te)})}tt(w,H=>f(d,H),()=>n(d)),g(t,w),ve()}gt(["pointerdown","touchstart","click"]);var kf=E('<div class="c p-y9ylet"><!> <!></div>'),Tf=E('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),xf=E('<form class="a p-y9ylet"><!></form>');function Ef(t,e){fe(e,!0);const{changeTags:a,getNoteById:r}=Ot(),{getSelectedTags:o}=Hn(),{getSelectedNotes:s}=la(),{getFiltredNotes:i}=Na();let l=I(!1),d=I(!1),c,u=!1,v=I(!1),h=e.nextFocusRef,m=(()=>{const P=[...o()],j=s();if(j.size===0)return P;const G=Array.from(j);let V=new Set(r(G[0])?.data.tags||[]);for(let q=1;q<G.length;q++){const ne=new Set(r(G[q])?.data.tags||[]),X=new Set([]);ne.forEach(z=>{V.has(z)&&X.add(z)}),V=X}return Array.from(V)})(),T=I(ut(m));Se(()=>()=>{c&&clearTimeout(c)});const _=()=>{c=setTimeout(()=>{f(d,!0)},250)},S=()=>{f(l,!0)},B=async()=>{const P=m,j=new Set(s()),G=j.size?[...j]:i().map(V=>V.id);try{_();const{cancel:V}=await a([...P],n(T),G);dt("Tags changed",{cancel:{nextFocusRef:h,onCancel:async()=>{await V(),setTimeout(()=>{const{prev:q}=wt(h);q?.focus()},16)}}}),u=!0}finally{f(l,!0)}},w=P=>{P.key==="Escape"&&n(v)&&(f(v,!1),P.preventDefault(),P.stopPropagation())};Se(()=>(document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)));const C=()=>{e.onClosed?.(u)},R=P=>{f(T,P,!0)},L=P=>{P.preventDefault(),B()};Ir(t,{get blocked(){return n(d)},get startClose(){return n(l)},onClosed:C,children:(P,j)=>{var G=xf(),V=b(G);{var q=X=>{Ma(X,{})},ne=X=>{var z=Tf(),ae=D(M(z),2);ll(ae,{get selectedTags(){return n(T)},onChangeTags:R,get shownTagInput(){return n(v)},set shownTagInput(H){f(v,H,!0)}});var ye=D(ae,2);{var te=H=>{var J=kf(),le=b(J);Dt(le,{onClick:S,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(de,ue)=>{var Q=Re("Cancel");g(de,Q)},$$slots:{default:!0}});var oe=D(le,2);Dt(oe,{onClick:B,fullWidth:!0,withoutMinWidth:!0,children:(de,ue)=>{var Q=Re("OK");g(de,Q)},$$slots:{default:!0}}),g(H,J)};U(ye,H=>{n(v)||H(te)})}g(X,z)};U(V,X=>{n(d)?X(q):X(ne,!1)})}cn("submit",G,L),g(P,G)},$$slots:{default:!0}}),ve()}var Pf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),Nf=E('<li class="p-antir2"><!></li>'),Af=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy links',1),Mf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy',1),Df=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share links',1),If=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),Lf=E('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),Rf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select mode',1),Of=E('<li class="p-antir2"><!></li>'),Ff=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),zf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),Bf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),jf=E('<li class="p-antir2"><!></li>'),Hf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),Uf=E('<li class="p-antir2"><!></li>'),Wf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),qf=E('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <li class="p-antir2"><!></li>',1),Vf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),Kf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),Yf=E('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),Gf=E('<!> <!> <li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <!> <!> <!>',1),Xf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Jf=E('<div class="a p-antir2"><!></div> <!> <!> <!>',1);function Zf(t,e){fe(e,!0);const{getSelectedTags:a,setSelectedTags:r,clearTags:o}=Hn(),{moveNotesToBin:s,moveNotesToArchive:i,moveNotesFromArchive:l,restoreNotesFromBin:d,deleteNotes:c}=Ot(),{getFiltredNotes:u}=Na(),{getMode:v,changeMode:h,getSelectedNotes:p,setSelectedNotes:m,clearNotes:T}=la();let _=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"}),S=A(a),B=I(!1),w=I(!1),C=I(!1),R=I(!1),L=I(null),P=I(null);const j=()=>{n(B)||f(B,!0)},G=()=>{f(B,!1),f(w,!1)};Be(()=>{!n(B)&&!n(C)&&!n(R)&&f(L,wt(n(P)).next,!0)}),Se(()=>{const y=x=>{x.key==="Escape"&&n(B)&&n(P)?.focus()};return window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}});let V=()=>{};const q=()=>{f(w,!0),f(C,!0);let y=n(P);V=()=>{f(C,!1),setTimeout(()=>{y?.focus()},16)}};let ne=()=>{};const X=()=>{f(w,!0),f(R,!0);let y=n(P);ne=()=>{f(R,!1),setTimeout(()=>{y?.focus()},16)}},z=async()=>{const y=Array.from(n(S)),x=new Set(p()),k=x.size?[...x]:u().map(W=>W.id),{cancel:N}=await s({noteIds:k});o(),T(),dt("Notes moved to bin",{cancel:{nextFocusRef:n(L),onCancel:async()=>{await N(),r(new Set(y)),m(x),setTimeout(()=>{const{prev:W}=wt(n(L));W?.focus()},16)}}}),f(w,!0)},ae=async()=>{const y=Array.from(n(S)),x=new Set(p()),k=x.size?[...x]:u().map(W=>W.id),{cancel:N}=await i({noteIds:k});o(),T(),dt("Notes moved to archive",{cancel:{nextFocusRef:n(L),onCancel:async()=>{await N(),r(new Set(y)),m(x),setTimeout(()=>{const{prev:W}=wt(n(L));W?.focus()},16)}}}),f(w,!0)},ye=async()=>{const y=Array.from(n(S)),x=new Set(p()),k=x.size?[...x]:u().map(W=>W.id),{cancel:N}=await l({noteIds:k});o(),T(),dt("Notes moved from archive",{cancel:{nextFocusRef:n(L),onCancel:async()=>{await N(),r(new Set(y)),m(x),setTimeout(()=>{const{prev:W}=wt(n(L));W?.focus()},16)}}}),f(w,!0)},te=async()=>{const y=Array.from(n(S)),x=new Set(p()),k=x.size?[...x]:u().map(W=>W.id),{cancel:N}=await d({noteIds:k});o(),T(),dt("Notes restored",{cancel:{nextFocusRef:n(L),onCancel:async()=>{await N(),r(new Set(y)),m(x),setTimeout(()=>{const{prev:W}=wt(n(L));W?.focus()},16)}}}),f(w,!0)},H=()=>{const y=new Set(p()),x=y.size?[...y]:u().map(k=>k.id);f(w,!0),Ha({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{f(w,!0),o(),T(),await c({noteIds:x})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(P)?.focus()},16)}})},J=()=>{const y=u(),x=Array.from(p()),k=[];for(const W of y)W.data&&W.data?.link&&Is(W.data?.link.url)&&(x.includes(W.id)||x.length===0)&&k.push(W.data?.link.url);const N=()=>{for(const W of k)if(!window.open(W,"_blank")){Ha({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(P)?.focus()},16)}});break}};k.length<=10?N():Ha({title:`Are you sure to open ${k.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{N()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(P)?.focus()},16)}}),f(w,!0)},le=()=>{const y=u(),x=Array.from(p());let k="";for(const N of y)N.data&&N.data?.link&&Is(N.data?.link.url)&&(x.includes(N.id)||x.length===0)&&(k+=N.data?.link.url+`
`);navigator.clipboard.writeText(k),dt("Copied links"),f(w,!0)},oe=()=>{const y=u(),x=Array.from(p());let k="";for(const N of y)N.data&&(x.includes(N.id)||x.length===0)&&(N.data?.link?.url&&(k+=N.data?.link.url+`
`),N.data?.text&&(k+=`
`+N.data?.text+`
`),k+=`---------------------

`);navigator.clipboard.writeText(k),dt("Copied"),f(w,!0)},de=()=>{const y=u(),x=Array.from(p());let k="";for(const N of y)N.data&&(x.includes(N.id)||x.length===0)&&N.data?.link?.url&&(k+=N.data?.link.url+`
`);navigator.share({text:k}).catch(N=>{console.error("Error sharing",N)}),f(w,!0)},ue=()=>{const y=u(),x=Array.from(p());let k="";for(const N of y)N.data&&(x.includes(N.id)||x.length===0)&&(N.data?.link?.url&&(k+=N.data?.link.url+`
`),N.data?.text&&(k+=`
`+N.data?.text+`
`),k+=`---------------------

`);navigator.share({text:k}).catch(N=>{console.error("Error sharing",N)}),f(w,!0)};let Q=A(()=>v()==="multiple"),O=Qa||yr;var ge=Jf(),ke=M(ge),re=b(ke);vf(re,{title:"notes menu",onClick:j,get ref(){return n(P)},set ref(y){f(P,y,!0)}});var we=D(ke,2);{var Ce=y=>{var x=Xf(),k=M(x);he(k,()=>({"--right":"0","--top":"44px"})),Lr(k.lastChild,{get startClose(){return n(w)},onClosed:G,get isMobile(){return O},children:(N,W)=>{var K=Gf(),pe=M(K);{var Ee=Ae=>{var Ge=Nf(),Me=b(Ge);qe(Me,{onClick:J,get dialogMode(){return O},children:(Ue,ct)=>{var rt=Pf(),Qe=M(rt);he(Qe,()=>({"--size":"20px"})),_e(Qe.lastChild,{name:"open"}),g(Ue,rt)},$$slots:{default:!0}}),g(Ae,Ge)};U(pe,Ae=>{Qa||yr||Ae(Ee)})}var se=D(pe,2);U(se,Ae=>{});var ee=D(se,2),Y=b(ee);qe(Y,{onClick:le,get dialogMode(){return O},children:(Ae,Ge)=>{var Me=Af(),Ue=M(Me);he(Ue,()=>({"--size":"20px"})),_e(Ue.lastChild,{name:"copy"}),g(Ae,Me)},$$slots:{default:!0}});var Z=D(ee,2),me=b(Z);qe(me,{onClick:oe,get dialogMode(){return O},children:(Ae,Ge)=>{var Me=Mf(),Ue=M(Me);he(Ue,()=>({"--size":"20px"})),_e(Ue.lastChild,{name:"copy"}),g(Ae,Me)},$$slots:{default:!0}});var Ne=D(Z,2);{var Xe=Ae=>{var Ge=Lf(),Me=M(Ge),Ue=b(Me);qe(Ue,{onClick:de,get dialogMode(){return O},children:(Qe,Ft)=>{var pt=Df(),Et=M(pt);he(Et,()=>({"--size":"20px"})),_e(Et.lastChild,{name:"share"}),g(Qe,pt)},$$slots:{default:!0}});var ct=D(Me,2),rt=b(ct);qe(rt,{onClick:ue,get dialogMode(){return O},children:(Qe,Ft)=>{var pt=If(),Et=M(pt);he(Et,()=>({"--size":"20px"})),_e(Et.lastChild,{name:"share"}),g(Qe,pt)},$$slots:{default:!0}}),g(Ae,Ge)};U(Ne,Ae=>{_&&Ae(Xe)})}var Oe=D(Ne,2);{var Pe=Ae=>{var Ge=Of(),Me=b(Ge);qe(Me,{onClick:()=>{f(w,!0),h("multiple")},get dialogMode(){return O},children:(Ue,ct)=>{var rt=Rf(),Qe=M(rt);he(Qe,()=>({"--size":"20px"})),_e(Qe.lastChild,{name:"check"}),g(Ue,rt)},$$slots:{default:!0}}),g(Ae,Ge)};U(Oe,Ae=>{n(Q)||Ae(Pe)})}var Ve=D(Oe,2);{var Fe=Ae=>{var Ge=qf(),Me=M(Ge),Ue=b(Me);qe(Ue,{onClick:q,get dialogMode(){return O},children:(Pt,un)=>{var zt=Ff(),Bt=M(zt);he(Bt,()=>({"--size":"20px","--rotate":"45deg"})),_e(Bt.lastChild,{name:"close"}),g(Pt,zt)},$$slots:{default:!0}});var ct=D(Me,2),rt=b(ct);qe(rt,{onClick:X,get dialogMode(){return O},children:(Pt,un)=>{var zt=zf(),Bt=M(zt);he(Bt,()=>({"--size":"20px"})),_e(Bt.lastChild,{name:"pen"}),g(Pt,zt)},$$slots:{default:!0}});var Qe=D(ct,2);{var Ft=Pt=>{var un=jf(),zt=b(un);qe(zt,{onClick:ae,get dialogMode(){return O},children:(Bt,ho)=>{var Qt=Bf(),hn=M(Qt);he(hn,()=>({"--size":"20px"})),_e(hn.lastChild,{name:"archive"}),g(Bt,Qt)},$$slots:{default:!0}}),g(Pt,un)},pt=Pt=>{var un=Uf(),zt=b(un);qe(zt,{onClick:ye,get dialogMode(){return O},children:(Bt,ho)=>{var Qt=Hf(),hn=M(Qt);he(hn,()=>({"--size":"20px"})),_e(hn.lastChild,{name:"archive-cancel"}),g(Bt,Qt)},$$slots:{default:!0}}),g(Pt,un)};U(Qe,Pt=>{e.mode==="notes"?Pt(Ft):Pt(pt,!1)})}var Et=D(Qe,2),go=b(Et);qe(go,{onClick:z,get dialogMode(){return O},dangerous:!0,children:(Pt,un)=>{var zt=Wf(),Bt=M(zt);he(Bt,()=>({"--size":"20px"})),_e(Bt.lastChild,{name:"bin"}),g(Pt,zt)},$$slots:{default:!0}}),g(Ae,Ge)};U(Ve,Ae=>{(e.mode==="notes"||e.mode==="archive")&&Ae(Fe)})}var He=D(Ve,2);{var Ke=Ae=>{var Ge=Yf(),Me=M(Ge),Ue=b(Me);qe(Ue,{onClick:te,get dialogMode(){return O},children:(Qe,Ft)=>{var pt=Vf(),Et=M(pt);he(Et,()=>({"--size":"20px"})),_e(Et.lastChild,{name:"bin-cancel"}),g(Qe,pt)},$$slots:{default:!0}});var ct=D(Me,2),rt=b(ct);qe(rt,{onClick:H,get dialogMode(){return O},dangerous:!0,children:(Qe,Ft)=>{var pt=Kf(),Et=M(pt);he(Et,()=>({"--size":"20px"})),_e(Et.lastChild,{name:"bin"}),g(Qe,pt)},$$slots:{default:!0}}),g(Ae,Ge)};U(He,Ae=>{e.mode==="bin"&&Ae(Ke)})}g(N,K)},$$slots:{default:!0}}),g(y,x)};U(we,y=>{n(B)&&y(Ce)})}var ie=D(we,2);{var $=y=>{pf(y,{get nextFocusRef(){return n(L)},onClosed:x=>{V(x)}})};U(ie,y=>{n(C)&&y($)})}var Te=D(ie,2);{var je=y=>{Ef(y,{get nextFocusRef(){return n(L)},onClosed:x=>{ne(x)}})};U(Te,y=>{n(R)&&y(je)})}g(t,ge),ve()}var Qf=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),$f=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),ev=E('<li class="p-1ljon4s"><!></li>'),tv=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy',1),nv=E('<li class="p-1ljon4s"><!></li>'),av=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),rv=E('<li class="p-1ljon4s"><!></li>'),ov=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share link',1),sv=E('<li class="p-1ljon4s"><!></li>'),iv=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select',1),lv=E('<li class="p-1ljon4s"><!></li>'),cv=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Deselect',1),dv=E('<li class="p-1ljon4s"><!></li>'),uv=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),fv=E('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),vv=E('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),gv=E('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),hv=E(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),pv=E('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),mv=E('<li class="p-1ljon4s"><!></li> <!> <!> <!> <!> <!> <!>',1),_v=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function wv(t,e){fe(e,!0);const{checkMobileSize:a}=Aa(),{getMode:r,getSelectedNotes:o,changeMode:s,addNote:i,removeNote:l}=la(),{moveNoteToBin:d,moveNoteFromArchive:c,moveNoteToArchive:u,deleteNote:v,pinNote:h,restoreNoteFromBin:p}=Ot();let m=De(e,"mode",3,"notes"),T=De(e,"shownMenu",15),_=I(!1),S=I(!1),B=I(!1),w=I(!1),C=I(!1),R=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"});const L=async()=>{d(e.noteId),dt("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{p(e.noteId)}}})},P=async()=>{u(e.noteId),dt("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{c(e.noteId)}}})},j=async()=>{c(e.noteId),dt("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{u(e.noteId)}}})},G=()=>{p(e.noteId),dt("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{d(e.noteId)}}})},V=()=>{e.noteData.pinnedAt?(h(e.noteId,!1),dt("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{h(e.noteId,!0)}}})):(h(e.noteId,!0),dt("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{h(e.noteId,!1)}}})),f(_,!0)},q=()=>{n(S)?(f(S,!1),L()):n(C)?(f(C,!1),G()):n(B)?(f(B,!1),P()):n(w)&&(f(w,!1),j()),T(!1),f(_,!1)},ne=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),dt("Copied link"),f(_,!0))},X=()=>{let ue="";e.noteData.link?.url&&(ue+=e.noteData.link.url+`
`),e.noteData.text&&(ue+=`
`+e.noteData.text+`
`),navigator.clipboard.writeText(ue),dt("Copied"),f(_,!0)},z=()=>{f(_,!0),Ha({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await v(e.noteId)},onCancel:async()=>{}})},ae=()=>{if(navigator.share){const ue={};let Q="";e.noteData.link?.url&&(Q+=e.noteData.link.url+`
`),e.noteData.text&&(Q+=`
`+e.noteData.text+`
`),ue.text=Q,navigator.share(ue).catch(O=>{console.error("Error sharing",O)})}f(_,!0)},ye=()=>{if(navigator.share){const ue={};e.noteData.link?.url&&(ue.url=e.noteData.link.url),e.noteData.link?.title&&(ue.title=e.noteData.link.title),navigator.share(ue).catch(Q=>{console.error("Error sharing",Q)})}f(_,!0)};let te=Qa||yr,H=A(a),J=A(()=>r()==="multiple"&&o().has(e.noteId));var le=ce(),oe=M(le);{var de=ue=>{var Q=_v(),O=M(Q);he(O,()=>({"--bottom":e.showMenuUp?"100%":"auto","--top":e.showMenuUp?"auto":"100%","--right":"10px"})),Lr(O.lastChild,{get startClose(){return n(_)},onClosed:q,get isMobile(){return te},children:(ge,ke)=>{var re=mv(),we=M(re),Ce=b(we);qe(Ce,{onClick:V,get dialogMode(){return te},children:(Y,Z)=>{var me=Qf(),Ne=M(me);{let Oe=A(()=>e.noteData.pinnedAt?"pin-cancel":"pin");he(Ne,()=>({"--size":"20px"})),_e(Ne.lastChild,{get name(){return n(Oe)}})}var Xe=D(Ne);xe(()=>lt(Xe,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)),g(Y,me)},$$slots:{default:!0}});var ie=D(we,2);{var $=Y=>{var Z=ev(),me=b(Z);qe(me,{onClick:ne,get dialogMode(){return te},children:(Ne,Xe)=>{var Oe=$f(),Pe=M(Oe);he(Pe,()=>({"--size":"20px"})),_e(Pe.lastChild,{name:"copy"}),g(Ne,Oe)},$$slots:{default:!0}}),g(Y,Z)};U(ie,Y=>{n(H)&&e.noteData.link?.url&&Y($)})}var Te=D(ie,2);{var je=Y=>{var Z=nv(),me=b(Z);qe(me,{onClick:X,get dialogMode(){return te},children:(Ne,Xe)=>{var Oe=tv(),Pe=M(Oe);he(Pe,()=>({"--size":"20px"})),_e(Pe.lastChild,{name:"copy"}),g(Ne,Oe)},$$slots:{default:!0}}),g(Y,Z)};U(Te,Y=>{e.noteData.text&&Y(je)})}var y=D(Te,2);{var x=Y=>{var Z=rv(),me=b(Z);qe(me,{onClick:ae,get dialogMode(){return te},children:(Ne,Xe)=>{var Oe=av(),Pe=M(Oe);he(Pe,()=>({"--size":"20px"})),_e(Pe.lastChild,{name:"share"}),g(Ne,Oe)},$$slots:{default:!0}}),g(Y,Z)};U(y,Y=>{R&&e.noteData.text&&Y(x)})}var k=D(y,2);{var N=Y=>{var Z=sv(),me=b(Z);qe(me,{onClick:ye,get dialogMode(){return te},children:(Ne,Xe)=>{var Oe=ov(),Pe=M(Oe);he(Pe,()=>({"--size":"20px"})),_e(Pe.lastChild,{name:"share"}),g(Ne,Oe)},$$slots:{default:!0}}),g(Y,Z)};U(k,Y=>{R&&e.noteData.link?.url&&Y(N)})}var W=D(k,2);{var K=Y=>{var Z=lv(),me=b(Z);qe(me,{onClick:()=>{f(_,!0),r()!=="multiple"&&s("multiple"),i(e.noteId)},get dialogMode(){return te},children:(Ne,Xe)=>{var Oe=iv(),Pe=M(Oe);he(Pe,()=>({"--size":"20px"})),_e(Pe.lastChild,{name:"check"}),g(Ne,Oe)},$$slots:{default:!0}}),g(Y,Z)},pe=Y=>{var Z=dv(),me=b(Z);qe(me,{onClick:()=>{f(_,!0),o().size===1?s("single"):l(e.noteId)},get dialogMode(){return te},children:(Ne,Xe)=>{var Oe=cv(),Pe=M(Oe);he(Pe,()=>({"--size":"20px"})),_e(Pe.lastChild,{name:"close"}),g(Ne,Oe)},$$slots:{default:!0}}),g(Y,Z)};U(W,Y=>{n(J)?Y(pe,!1):Y(K)})}var Ee=D(W,2);{var se=Y=>{var Z=vv(),me=M(Z),Ne=b(me);qe(Ne,{onClick:()=>{f(B,m()==="notes"),f(w,m()==="archive"),f(_,!0)},get dialogMode(){return te},children:(Pe,Ve)=>{var Fe=uv(),He=M(Fe);{let Ae=A(()=>m()==="archive"?"archive-cancel":"archive");he(He,()=>({"--size":"20px"})),_e(He.lastChild,{get name(){return n(Ae)}})}var Ke=D(He);xe(()=>lt(Ke,` ${m()==="archive"?"Unarchive":"Archive"}`)),g(Pe,Fe)},$$slots:{default:!0}});var Xe=D(me,2),Oe=b(Xe);qe(Oe,{onClick:()=>{f(S,!0),f(_,!0)},get dialogMode(){return te},dangerous:!0,children:(Pe,Ve)=>{var Fe=fv(),He=M(Fe),Ke=b(He);he(Ke,()=>({"--size":"20px"})),_e(Ke.lastChild,{name:"bin"}),g(Pe,Fe)},$$slots:{default:!0}}),g(Y,Z)},ee=Y=>{var Z=pv(),me=M(Z),Ne=b(me);qe(Ne,{onClick:()=>{f(C,!0),f(_,!0)},get dialogMode(){return te},children:(Pe,Ve)=>{var Fe=gv(),He=M(Fe),Ke=b(He);he(Ke,()=>({"--size":"20px"})),_e(Ke.lastChild,{name:"bin-cancel"}),g(Pe,Fe)},$$slots:{default:!0}});var Xe=D(me,2),Oe=b(Xe);qe(Oe,{onClick:z,get dialogMode(){return te},dangerous:!0,children:(Pe,Ve)=>{var Fe=hv(),He=M(Fe),Ke=b(He);he(Ke,()=>({"--size":"20px"})),_e(Ke.lastChild,{name:"bin"}),g(Pe,Fe)},$$slots:{default:!0}}),g(Y,Z)};U(Ee,Y=>{m()==="notes"||m()==="archive"?Y(se):Y(ee,!1)})}g(ge,re)},$$slots:{default:!0}}),g(ue,Q)};U(oe,ue=>{T()&&ue(de)})}g(t,le),ve()}var yv=E('<div class="a p-1hg9kpf"></div>'),bv=E('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function cl(t,e){fe(e,!0);const a=c=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(c).host}.ico`}catch{return""}};let r=I(!1),o=A(()=>a(e.url));var s=ce(),i=M(s);{var l=c=>{var u=yv();g(c,u)},d=c=>{var u=bv();xe(v=>st(u,"src",v),[()=>a(e.url)]),cn("error",u,()=>{f(r,!0)}),g(c,u)};U(i,c=>{n(r)||!n(o)?c(l):c(d,!1)})}g(t,s),ve()}var Sv=E('<a target="_blank" rel="noopener noreferrer" class="a p-7mmq8e"><!> <!></a>'),Cv=E('<button class="a p-7mmq8e"><!> <!></button>');function Ba(t,e){fe(e,!0);let a=De(e,"tabindex",3,0),r=De(e,"onclick",3,()=>{}),o=De(e,"ref",15);var s=ce(),i=M(s);{var l=c=>{var u=Sv();u.__click=function(...p){r()?.apply(this,p)};var v=b(u);Ie(v,()=>e.children);var h=D(v,2);ht(h,{children:(p,m)=>{var T=Re();xe(()=>lt(T,e.title)),g(p,T)}}),tt(u,p=>o(p),()=>o()),xe(()=>{st(u,"href",e.href),st(u,"tabindex",a())}),g(c,u)},d=c=>{var u=ce(),v=M(u);{var h=p=>{var m=Cv();m.__click=function(...S){r()?.apply(this,S)};var T=b(m);Ie(T,()=>e.children);var _=D(T,2);ht(_,{children:(S,B)=>{var w=Re();xe(()=>lt(w,e.title)),g(S,w)}}),tt(m,S=>o(S),()=>o()),xe(()=>st(m,"tabindex",a())),g(p,m)};U(v,p=>{e.elem==="button"&&p(h)},!0)}g(c,u)};U(i,c=>{e.elem==="a"?c(l):c(d,!1)})}g(t,s),ve()}gt(["click"]);let da=I(null),kr=I(!1),$a=I(void 0),Jr={};const kv=()=>{f(kr,!0)},Tv=()=>{f(kr,!1)},Ls=()=>n(kr),xv=()=>{const t=Jr[n($a)||""]?.next;t&&f($a,t,!0)},Ev=()=>{const t=Jr[n($a)||""]?.prev;t&&f($a,t,!0)};var Pv=E('<div class="a p-6j6hl0"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Nv=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Av=E('<div class="b p-6j6hl0"><!></div>'),Mv=E('<a class="c p-6j6hl0" target="_blank" rel="noopener noreferrer"> </a>'),Dv=E('<a class="c p-6j6hl0" target="_blank" rel="noopener noreferrer"> </a>'),Iv=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Lv=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Rv=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ov=E("<!> <!> <!>",1),Fv=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),zv=E("<li><!> <!> <!> <div><!> <!></div> <!></li>");function Bv(t,e){fe(e,!0);const{pushDialogPage:a}=Zt(),{getFaviconEnabled:r,getRecordMode:o}=Za(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:d}=la(),{getSearchParams:c,getHref:u}=Kt();let v=De(e,"mode",3,"notes");Be(()=>(Jr[e.noteId]={next:e.nextNoteId,prev:e.prevNoteId},()=>{delete Jr[e.noteId]}));let h=I(!1),p=I(!1),m=A(r),T=A(o),_=I(null),S=I(null);const{checkMobileSize:B}=Aa(),w=()=>{f(h,!0)},C=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),dt("copied"))};Be(()=>{n(da)===n(S)?f(p,!0):f(p,!1)});const R=Q=>{Q.preventDefault(),a(`${be.Note}?id=${encodeURIComponent(e.noteId)}`),f(da,null)},L=A(()=>e.noteData.link?.url||"");let P=A(()=>n(h)&&n(_)?wt(n(_)).next:null);const j=Q=>{Q?l(e.noteId):d(e.noteId)};Se(()=>{const Q=O=>{n(S)&&n(da)===n(S)&&!(n(S)===O.target||n(S).contains(O.target))&&f(da,null)};return document.addEventListener("click",Q),()=>{document.removeEventListener("click",Q)}});const G=()=>{const Q=new URLSearchParams(c());return Q.set(tn,`${be.Note}?id=${encodeURIComponent(e.noteId)}`),u(Q)};let V=A(()=>s()==="multiple"&&i().has(e.noteId));Se(()=>{const Q=O=>{n(kr)&&n($a)===e.noteId&&O.key==="Enter"&&(n(T)==="note"?(O.preventDefault(),setTimeout(()=>{a(`${be.Note}?id=${encodeURIComponent(e.noteId)}`)},0)):n(T)==="bookmark"&&n(L)&&window.open(n(L),"_blank","noopener"))};return document.addEventListener("keydown",Q),()=>{document.removeEventListener("keydown",Q)}});var q=zv(),ne=b(q);{var X=Q=>{var O=Pv(),ge=b(O);he(ge,()=>({"--size":"18px"})),_e(ge.lastChild,{name:"pin"}),g(Q,O)};U(ne,Q=>{e.noteData.pinnedAt&&Q(X)})}var z=D(ne,2);{var ae=Q=>{var O=Av(),ge=b(O);{var ke=we=>{cl(we,{get url(){return n(L)}})},re=we=>{var Ce=Nv(),ie=M(Ce);he(ie,()=>({"--size":"16px"})),_e(ie.lastChild,{name:"note"}),g(we,Ce)};U(ge,we=>{n(L)?we(ke):we(re,!1)})}g(Q,O)};U(z,Q=>{n(m)&&Q(ae)})}var ye=D(z,2);{var te=Q=>{var O=Mv();O.__click=ke=>{ke.preventDefault(),s()==="multiple"?j(!n(V)):R(ke)};var ge=b(O);xe((ke,re)=>{st(O,"tabindex",e.focusHidden?-1:0),st(O,"href",ke),lt(ge,re)},[G,()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),cn("focus",O,()=>{f(da,n(S),!0)}),g(Q,O)},H=Q=>{var O=Dv();O.__click=ke=>{s()==="multiple"&&(ke.preventDefault(),j(!n(V)))};var ge=b(O);xe(ke=>{st(O,"tabindex",e.focusHidden?-1:0),st(O,"href",n(L)),lt(ge,ke)},[()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),cn("focus",O,()=>{f(da,n(S),!0)}),g(Q,O)};U(ye,Q=>{n(T)==="note"||!n(L)?Q(te):Q(H,!1)})}var J=D(ye,2);J.__focusin=()=>{f(da,n(S),!0)};var le=b(J);{var oe=Q=>{var O=Ov(),ge=M(O);{var ke=$=>{{let Te=A(G),je=A(()=>e.focusHidden?-1:0);Ba($,{title:"edit",elem:"a",get href(){return n(Te)},get tabindex(){return n(je)},onclick:R,children:(y,x)=>{var k=Iv(),N=M(k);he(N,()=>({"--size":"18px"})),_e(N.lastChild,{name:"pen"}),g(y,k)},$$slots:{default:!0}})}};U(ge,$=>{(n(T)==="bookmark"||s()==="multiple")&&$(ke)})}var re=D(ge,2);{var we=$=>{{let Te=A(()=>e.focusHidden?-1:0),je=A(()=>e.noteData.link?.title||"unknown");Ba($,{elem:"a",get href(){return n(L)},get tabindex(){return n(Te)},get title(){return n(je)},children:(y,x)=>{var k=Lv(),N=M(k);he(N,()=>({"--size":"18px"})),_e(N.lastChild,{name:"open"}),g(y,k)},$$slots:{default:!0}})}};U(re,$=>{(n(T)==="note"||s()==="multiple")&&$(we)})}var Ce=D(re,2);{var ie=$=>{{let Te=A(()=>e.focusHidden?-1:0);Ba($,{elem:"button",onclick:C,get tabindex(){return n(Te)},title:"copy link",children:(je,y)=>{var x=Rv(),k=M(x);he(k,()=>({"--size":"20px"})),_e(k.lastChild,{name:"copy"}),g(je,x)},$$slots:{default:!0}})}};U(Ce,$=>{B()||$(ie)})}g(Q,O)};U(le,Q=>{n(L)&&Q(oe)})}var de=D(le,2);{let Q=A(()=>e.focusHidden?-1:0);Ba(de,{title:"show menu",elem:"button",get tabindex(){return n(Q)},onclick:w,get ref(){return n(_)},set ref(O){f(_,O,!0)},children:(O,ge)=>{var ke=Fv(),re=M(ke);he(re,()=>({"--size":"18px","--rotate":"90deg"})),_e(re.lastChild,{name:"menu"}),g(O,ke)},$$slots:{default:!0}})}var ue=D(J,2);wv(ue,{get nextFocusRef(){return n(P)},get mode(){return v()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(h)},set shownMenu(Q){f(h,Q,!0)}}),tt(q,Q=>f(S,Q),()=>n(S)),xe(()=>{at(q,1,it({d:!0,e:n(p),f:n(V)||n(kr)&&n($a)===e.noteId}),"p-6j6hl0"),at(J,1,it({g:!0,h:n(p)}),"p-6j6hl0")}),g(t,q),ve()}gt(["click","focusin"]);var jv=E('<div class="g e p-1594e7o"><button class="d p-1594e7o" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),Hv=E('<div class="g p-1594e7o"><button class="d p-1594e7o" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),Uv=E('<a class="i j p-1594e7o"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Wv=E('<div class="h p-1594e7o"><!> <!></div>'),qv=E('<!> <div class="p p-1594e7o"><!></div>',1),Vv=E('<button class="t p-1594e7o">All</button>'),Kv=E('<button class="t p-1594e7o"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>'),Yv=E('<div class="r p-1594e7o"><div class="s p-1594e7o"><!> <span> </span> <!></div> <button class="t u p-1594e7o"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),Gv=E('<div class="a p-1594e7o"><div class="b p-1594e7o"><div class="c p-1594e7o"><a class="d p-1594e7o"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-1594e7o"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-1594e7o"><!></div> <div class="f p-1594e7o"><!></div></div> <div class="k p-1594e7o"><div class="l p-1594e7o"><!></div> <div class="m p-1594e7o"><div class="n p-1594e7o"><div class="o p-1594e7o"><!></div> <!></div> <div class="q p-1594e7o"><!></div></div></div></div>');function Xv(t,e){fe(e,!0);const{getFeedSearch:a,setFeedSearch:r}=ns(),{getScrollContainer:o}=vo();let s=A(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:d,checkNotes:c}=Ot(),{replaceSearchParams:u}=Kt(),{createDialogPageHref:v,createHandleClickDialogPage:h,getDialogPages:p}=Zt(),{checkExistedDialog:m}=dn(),{getMode:T,clearNotes:_,setSelectedNotes:S,getSelectedNotes:B,changeMode:w}=la(),{checkMobileSize:C}=Aa(),{getFiltredNotes:R}=Na(),{getSelectedMetaTags:L}=fo();let P=A(L),j=I(null);const G=A(l);let q=A(()=>{const se=R()||[],ee=B();return se.every(Y=>ee.has(Y.id))});const ne=()=>{Ha({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),u("")},onCancel:async()=>{}})};let X=A(()=>p().length===0);Be(()=>{n(X)});const z=()=>{p().length===0&&!m()&&n(j)?.focus()};Se(()=>Sr({key:"k",meta:!0,action:z})),Se(()=>Sr({key:"k",ctrl:!0,action:z})),Be(()=>{const se=R()||[];Vt(()=>{const ee=B();S(new Set(se.filter(Y=>ee.has(Y.id)).map(Y=>Y.id)))})});let ae=A(()=>n(P).has(et.ARCHIVED)?"archive":n(P).has(et.BIN)?"bin":"notes");var ye=Gv(),te=b(ye),H=b(te),J=b(H),le=A(()=>h(be.Settings));J.__click=function(...se){n(le)?.apply(this,se)};var oe=b(J);he(oe,()=>({"--rotate":"30deg","--size":"20px"})),_e(oe.lastChild,{name:"settings"});var de=D(J,2),ue=A(()=>h(be.Sync));de.__click=function(...se){n(ue)?.apply(this,se)};var Q=b(de);he(Q,()=>({"--size":"20px"})),_e(Q.lastChild,{name:"sync"});var O=D(H,2),ge=b(O);ol(ge,{});var ke=D(O,2),re=b(ke);{var we=se=>{var ee=ce(),Y=M(ee);{var Z=me=>{var Ne=ce(),Xe=M(Ne);{var Oe=Ve=>{var Fe=jv(),He=b(Fe);He.__click=ne;var Ke=b(He);he(Ke,()=>({"--scale":"1.2","--size":"20px"})),_e(Ke.lastChild,{name:"clear"});var Ae=D(Ke);ht(Ae,{children:(Ge,Me)=>{var Ue=Re("Empty bin");g(Ge,Ue)}}),g(Ve,Fe)},Pe=Ve=>{var Fe=Hv(),He=b(Fe);He.__click=ne;var Ke=b(He);he(Ke,()=>({"--scale":"0.9","--size":"20px"})),_e(Ke.lastChild,{name:"clear"}),g(Ve,Fe)};U(Xe,Ve=>{C()?Ve(Oe):Ve(Pe,!1)})}g(me,Ne)};U(Y,me=>{n(G)&&me(Z)})}g(se,ee)},Ce=se=>{var ee=ce(),Y=M(ee);{var Z=me=>{var Ne=Wv(),Xe=b(Ne);{var Oe=Ve=>{var Fe=Uv();Fe.__click=function(...Ae){e.onOpenWindow?.apply(this,Ae)};var He=b(Fe);he(He,()=>({"--scale":"0.7","--size":"32px"})),_e(He.lastChild,{name:"open-window"});var Ke=D(He,2);ht(Ke,{children:(Ae,Ge)=>{var Me=Re("open window");g(Ae,Me)}}),xe(()=>st(Fe,"href",e.openWindowHref)),g(Ve,Fe)};U(Xe,Ve=>{e.onOpenWindow&&Ve(Oe)})}var Pe=D(Xe,2);Au(Pe,{}),g(me,Ne)};U(Y,me=>{n(ae)==="notes"&&me(Z)},!0)}g(se,ee)};U(re,se=>{n(ae)==="bin"?se(we):se(Ce,!1)})}var ie=D(te,2),$=b(ie),Te=b($);uf(Te,{});var je=D($,2),y=b(je),x=b(y),k=b(x);{let se=A(a);Fo(k,{placeholder:"Search",onFocus:()=>{kv()},onBlur:()=>{Tv()},get value(){return n(se)},onChange:ee=>{n(s)&&n(s).scrollTo({top:0}),r(ee)},get ref(){return n(j)},set ref(ee){f(j,ee,!0)}})}var N=D(x,2);{var W=se=>{var ee=qv(),Y=M(ee);Su(Y,{});var Z=D(Y,2),me=b(Z);Zf(me,{get mode(){return n(ae)}}),g(se,ee)};U(N,se=>{(n(ae)==="notes"&&c()||n(ae)==="bin"&&l()||n(ae)==="archive"&&d())&&se(W)})}var K=D(y,2),pe=b(K);{var Ee=se=>{var ee=ce(),Y=M(ee);{var Z=me=>{var Ne=Yv(),Xe=b(Ne),Oe=b(Xe);{var Pe=Me=>{var Ue=Vv();Ue.__click=ct=>{ct.preventDefault();const rt=R()||[];S(new Set(rt.map(Qe=>Qe.id)))},g(Me,Ue)};U(Oe,Me=>{n(q)||Me(Pe)})}var Ve=D(Oe,2),Fe=b(Ve),He=D(Ve,2);{var Ke=Me=>{var Ue=Kv();Ue.__click=rt=>{rt.preventDefault(),_()};var ct=b(Ue);he(ct,()=>({"--size":"16px"})),_e(ct.lastChild,{name:"close"}),g(Me,Ue)};U(He,Me=>{B().size>0&&Me(Ke)})}var Ae=D(Xe,2);Ae.__click=Me=>{Me.preventDefault(),w("single")};var Ge=b(Ae);he(Ge,()=>({"--size":"16px"})),_e(Ge.lastChild,{name:"close"}),xe(Me=>lt(Fe,`Selected ${Me??""}`),[()=>B().size]),g(me,Ne)};U(Y,me=>{T()==="multiple"&&me(Z)})}g(se,ee)};U(pe,se=>{(n(ae)==="notes"&&c()||n(ae)==="bin"&&l()||n(ae)==="archive"&&d())&&se(Ee)})}xe((se,ee)=>{st(J,"href",se),st(de,"href",ee)},[()=>v(be.Settings),()=>v(be.Sync)]),g(t,ye),ve()}gt(["click"]);var Jv=E('<div class="p-gkgqyo"><!></div>');function _t(t,e){fe(e,!0);const{setDialogPageHeight:a}=ss();let r=I(null);Se(()=>{n(r);const i=new ResizeObserver(l=>{for(let d of l){const c=d.contentRect.height;a(c)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=Jv(),s=b(o);Ie(s,()=>e.children),tt(o,i=>f(r,i),()=>n(r)),g(t,o),ve()}var Zv=E('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function Qv(t,e){fe(e,!1);const{replaceSearchParams:a,getHref:r}=Kt(),o=l=>{l.preventDefault(),a("")};ts();var s=Zv(),i=D(b(s),2);{let l=Nr(()=>r(""));Dt(i,{element:"a",get href(){return n(l)},onClick:o,children:(d,c)=>{var u=Re("close");g(d,u)},$$slots:{default:!0}})}g(t,s),ve()}var $v=E('<h1 class="p-1n0ziuh"><!></h1>');function eg(t,e){var a=$v(),r=b(a);Ie(r,()=>e.children),g(t,a)}var tg=E('<!> <div class="b p-193tby9"><!> <!></div>',1),ng=E('<div class="a p-193tby9"><!></div>');function ag(t,e){fe(e,!0);const{blockDialog:a,setLeftEnd:r}=dn(),{pushDialogPage:o}=Zt(),{initLocalAccount:s}=rs(),{replaceSearchParams:i}=Kt(),l=Un(),d=()=>{o(be.Auth)},c=async()=>{l.duration=0,l.swipingRatio=-25,requestAnimationFrame(()=>{l.duration=oa().duration,l.swipingRatio=oa().swipingRatio,s(),a(!1),r(!0),i("")})};var u=ng(),v=b(u);{var h=p=>{var m=tg(),T=M(m);eg(T,{children:(w,C)=>{var R=Re("Welcome");g(w,R)}});var _=D(T,2),S=b(_);Dt(S,{onClick:d,fullWidth:!0,children:(w,C)=>{var R=Re("Cloud account");g(w,R)},$$slots:{default:!0}});var B=D(S,2);Dt(B,{onClick:c,fullWidth:!0,type:"secondary",children:(w,C)=>{var R=Re("Local account");g(w,R)},$$slots:{default:!0}}),g(p,m)};U(v,p=>{p(h)})}g(t,u),ve()}var rg=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Edit',1),og=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),sg=E('<li class="p-1jbq6g9"><!></li> <li class="p-1jbq6g9"><!></li>',1),ig=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function lg(t,e){fe(e,!0);let a=De(e,"shownMenu",15),r=I(!1),o=I(!1),s=I(!1);const i=async()=>{e.onEdit()},l=()=>{n(o)?(f(o,!1),i()):n(s)&&(f(s,!1),e.onDelete()),a(!1),f(r,!1)};let d=Qa||yr;var c=ce(),u=M(c);{var v=h=>{var p=ig(),m=M(p);he(m,()=>({"--top":"90%","--right":"0px"})),Lr(m.lastChild,{get startClose(){return n(r)},onClosed:l,get isMobile(){return d},children:(T,_)=>{var S=sg(),B=M(S),w=b(B);qe(w,{onClick:()=>{f(o,!0),f(r,!0)},get dialogMode(){return d},children:(L,P)=>{var j=rg(),G=M(j);he(G,()=>({"--size":"20px"})),_e(G.lastChild,{name:"pen"}),g(L,j)},$$slots:{default:!0}});var C=D(B,2),R=b(C);qe(R,{onClick:()=>{f(s,!0),f(r,!0)},get dialogMode(){return d},children:(L,P)=>{var j=og(),G=M(j);he(G,()=>({"--size":"20px"})),_e(G.lastChild,{name:"bin"}),g(L,j)},$$slots:{default:!0}}),g(T,S)},$$slots:{default:!0}}),g(h,p)};U(u,h=>{a()&&h(v)})}g(t,c),ve()}var cg=E('<div class="b p-ptbuqy"><!> <!> <div class="c p-ptbuqy"><button class="p-ptbuqy">Cancel</button> <button class="p-ptbuqy">Done</button></div></div>'),dg=E('<div class="e p-ptbuqy"><!></div>'),ug=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),fg=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),vg=E('<div class="d p-ptbuqy"><div><!> <a class="f p-ptbuqy" target="_blank" rel="noopener noreferrer"> </a> <div><!> <!></div> <!></div></div>'),gg=E('<div class="a p-ptbuqy"><!></div>');function hg(t,e){fe(e,!0);let a=De(e,"shownUrlInput",15);const{getFaviconEnabled:r}=Za();let o=A(r),s=I(null),i=I(null),l=I(ut(e.url)),d=I(ut(e.title)),c=I(null),u=I(null),v=I(!1);const h=C=>{f(l,C.target.value||"",!0)},p=C=>{f(d,C.target.value||"",!0)};Be(()=>{a()&&n(s)?.focus()});const m=()=>{f(v,!0)},T=()=>{e.url&&(navigator.clipboard.writeText(e.url),dt("copied"))};var _=gg(),S=b(_);{var B=C=>{var R=cg(),L=b(R);Cr(L,{get value(){return n(l)},onInput:h,placeholder:"url",get ref(){return n(s)},set ref(q){f(s,q,!0)}});var P=D(L,2);Cr(P,{get value(){return n(d)},onInput:p,placeholder:"title"});var j=D(P,2),G=b(j);G.__click=()=>{f(l,e.url,!0),f(d,e.title,!0),a(!1)};var V=D(G,2);V.__click=()=>{let q=n(l).trim();q!==""&&/^[[a-zA-Z]+?:\/\//.test(q)===!1&&(q="https://"+q,f(l,q,!0)),e.onChangeUrl(q,n(d)),a(!1)},g(C,R)},w=C=>{var R=ce(),L=M(R);{var P=G=>{var V=vg(),q=b(V);at(q,1,it({i:!0}),"p-ptbuqy");var ne=b(q);{var X=le=>{var oe=dg(),de=b(oe);cl(de,{get url(){return e.url}}),g(le,oe)};U(ne,le=>{n(o)&&le(X)})}var z=D(ne,2),ae=b(z),ye=D(z,2);at(ye,1,it({j:!0}),"p-ptbuqy");var te=b(ye);Ba(te,{title:"copy link",elem:"button",onclick:T,children:(le,oe)=>{var de=ug(),ue=M(de);he(ue,()=>({"--size":"20px"})),_e(ue.lastChild,{name:"copy"}),g(le,de)},$$slots:{default:!0}});var H=D(te,2);Ba(H,{title:"show menu",elem:"button",onclick:m,get ref(){return n(u)},set ref(le){f(u,le,!0)},children:(le,oe)=>{var de=fg(),ue=M(de);he(ue,()=>({"--size":"18px","--rotate":"90deg"})),_e(ue.lastChild,{name:"menu"}),g(le,de)},$$slots:{default:!0}});var J=D(ye,2);lg(J,{onDelete:()=>{f(d,""),f(l,""),e.onDeleteUrl()},onEdit:()=>{a(!0)},get shownMenu(){return n(v)},set shownMenu(le){f(v,le,!0)}}),tt(q,le=>f(c,le),()=>n(c)),xe(()=>{st(z,"href",e.url),lt(ae,e.title||"unknown")}),g(G,V)},j=G=>{};U(L,G=>{e.url?G(P):G(j,!1)})}g(C,R)};U(S,C=>{a()?C(B):C(w,!1)})}tt(_,C=>f(i,C),()=>n(i)),g(t,_),ve()}gt(["click"]);var pg=E('<div class="e p-vlmfrv">Note</div>'),mg=E("<span> </span>"),_g=E('<div class="i p-vlmfrv"><!></div>'),wg=E('<!> <div class="a p-vlmfrv"><div class="b"><div class="c"><div class="d p-vlmfrv"><!> <div class="f p-vlmfrv" role="textbox" aria-label="note" tabindex="0" contenteditable="true" placeholder="Note"> </div></div></div></div> <div class="g h p-vlmfrv"><!> <div class="j p-vlmfrv"><!></div></div></div>',1);function yg(t,e){fe(e,!0);const{checkMobileSize:a}=Aa(),{getLlmTagsEnabled:r,getPrevTags:o,getPageDataForTagsEnabled:s}=Za(),{pushDialogPage:i}=Zt();let l=De(e,"link",15,void 0),d=De(e,"text",15,""),c=De(e,"tags",31,()=>ut([])),u=I(null),v=I(!1),h=I(!1),p=I(ut(new Set)),m=I(!1);const T=re=>{let we="",Ce=!0;function ie($){for(let Te=0;Te<$.length;Te++){const je=$[Te];if(je.nodeName==="BR"){we+=`
`,Ce=!0;continue}je.nodeName==="DIV"&&Ce===!1&&(we+=`
`),Ce=!1,je.nodeType===3&&je.textContent&&(we+=je.textContent),ie(je.childNodes)}}ie(re.currentTarget.childNodes),we===`
`&&(we=we.slice(0,-1)),d(we)},_=re=>{re.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(n(v)&&(f(v,!1),re.preventDefault(),re.stopPropagation()),n(h)&&(f(h,!1),re.preventDefault(),re.stopPropagation()))};Se(()=>(a(),document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)));const S=(re,we)=>{l({url:re,title:we})},B=()=>{l(void 0)},w=re=>{c(re)},C=o(),R=()=>{c([...new Set([...c(),...C])])},L=d();Se(()=>{if(n(u)&&e.mode==="add"){n(u).focus();const re=document.createRange();re.selectNodeContents(n(u)),re.collapse(!1);const we=window.getSelection();we?.removeAllRanges(),we?.addRange(re)}});let P=I("unknown");const j=async()=>{if(typeof LanguageModel>"u"){f(P,"unavailable");return}f(P,await Ps().availability({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}]}),!0)};Se(()=>{j()});let G=A(r),V=null;const q=async()=>V||(V=await Ps().create({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}],temperature:.2,topK:2,initialPrompts:[{role:"system",content:`
						You are a tagging assistant.
						Your task is to suggest relevant tags for bookmarks.

						Rules:
						- Use page content by priority to generate relevant tags.
						- Focus on the main topics and themes of the page and note content.
						- Prefer short, lowercase, single-word tags.
						- Use only single words for tags, no phrases, you can split into multiple tags.
						- Avoid special characters in tags.
						- All tags must be in English.
						- Add common tags related to the content like "music", "article", "video", "tutorial", "blog", etc. if relevant.
						- Return 3 to 5 tags.
						- Output ONLY a JSON array of strings.
					`}]}),V),ne=async()=>{if(n(P)==="downloadable"||n(P)==="downloading"){i(be.Extension);return}f(m,!0);const re=await q(),we={type:"object",properties:{tags:{type:"array",items:{type:"string"}}},required:["tags"]},Ce=`
			Page information:
			Title: ${l()?.title||"N/A"}.
			URL: ${l()?.url||"N/A"}.
			Description: N/A.
			Note content: ${d()||"N/A"}.
			Dont return tags: ${[...n(p).size>0?Array.from(n(p)):[],...c().length>0?c():[]].join(", ")||"N/A"}.
			Page contents: N/A.
		`.slice(0,5e3);console.log("Prompt for tag generation:",Ce);const ie=await re.prompt(Ce,{responseConstraint:we});c(Array.from(new Set([...c(),...(JSON.parse(ie)?.tags||[]).map($=>$.trim().toLowerCase()).filter($=>$!=="")]))),f(m,!1)};var X=wg(),z=M(X);{let re=A(()=>l()?.url||""),we=A(()=>l()?.title||"");hg(z,{get url(){return n(re)},get title(){return n(we)},onChangeUrl:S,onDeleteUrl:B,get shownUrlInput(){return n(h)},set shownUrlInput(Ce){f(h,Ce,!0)}})}var ae=D(z,2),ye=b(ae),te=b(ye),H=b(te),J=b(H);{var le=re=>{var we=pg();g(re,we)};U(J,re=>{d()||re(le)})}var oe=D(J,2);oe.__input=T;var de=b(oe);tt(oe,re=>f(u,re),()=>n(u));var ue=D(ye,2),Q=b(ue);{var O=re=>{var we=_g(),Ce=b(we);{var ie=$=>{var Te=mg(),je=b(Te);xe(y=>lt(je,`updated: ${y??""}`),[()=>new Date(e.updatedAt).toLocaleString()]),g($,Te)};U(Ce,$=>{e.updatedAt&&$(ie)})}g(re,we)};U(Q,re=>{e.mode==="edit"&&re(O)})}var ge=D(Q,2),ke=b(ge);{let re=A(()=>n(G)&&n(P)!=="unknown"&&n(P)!=="unavailable"),we=A(()=>e.mode==="add"&&C.length>0);ll(ke,{get selectedTags(){return c()},onRejectedTag:Ce=>{f(p,new Set([...n(p),Ce]),!0)},onChangeTags:w,get genTagsEnabled(){return n(re)},onGenTags:ne,get generatingTags(){return n(m)},onUsePreviousTags:R,get previousTagsEnabled(){return n(we)},get shownTagInput(){return n(v)},set shownTagInput(Ce){f(v,Ce,!0)}})}xe(()=>lt(de,L)),g(t,X),ve()}gt(["input"]);function bg(t,e){fe(e,!0);const{isInitedNotes:a,createNote:r,updateNote:o,deleteNote:s,getNoteById:i}=Ot(),{getViewMode:l,setPrevTags:d}=Za(),{setSearchParam:c,deleteSearchParam:u}=Kt();let v=I("loading"),h=I("idle"),p=I(""),m=I(void 0),T=I(""),_=I(ut([]));const S=()=>{{const P=JSON.parse(localStorage.getItem("new-note-draft")||"{}");localStorage.removeItem("new-note-draft");const j=P.link?.url||"",G=P.link?.title||"";f(T,P.text||"",!0),f(_,P.tags||[],!0),f(m,{url:j||"",title:G||""},!0),f(v,"finish")}},B=A(()=>a()&&n(v)==="finish"),w=async()=>{if(n(m)?.title||n(m)?.url||n(T)||n(_).length>0){if(n(p)){const P=i(n(p));if(!P?.data)return;if((P.data.link?.url!==n(m)?.url||P.data.link?.title!==n(m)?.title||P.data.text!==n(T)||JSON.stringify(P.data.tags)!==JSON.stringify(n(_)))&&n(h)==="idle"){f(h,"loading");try{await o(n(p),{link:va(n(m)),text:n(T),tags:n(_).slice()})}finally{f(h,"idle")}}}else if(n(h)==="idle"){f(h,"loading");try{f(p,await r({link:va(n(m)),text:n(T),tags:n(_).slice()}),!0),c("noteId",n(p))}catch(P){console.error("Error creating note:",P)}finally{f(h,"idle")}}}else if(n(p)&&n(h)==="idle"){f(h,"loading");try{await s(n(p)),f(p,""),u("noteId")}finally{f(h,"idle")}}};Be(()=>{n(B)&&n(h)!=="loading"&&w()}),Se(()=>{S()}),Se(()=>()=>{n(_).length>0&&d([...n(_)])}),Se(()=>()=>{n(p)&&u("noteId")});var C=ce(),R=M(C);{var L=P=>{yg(P,{mode:"add",get link(){return n(m)},set link(j){f(m,j,!0)},get text(){return n(T)},set text(j){f(T,j,!0)},get tags(){return n(_)},set tags(j){f(_,j,!0)}})};U(R,P=>{n(B)&&P(L)})}g(t,C),ve()}const Sg="modulepreload",Cg=function(t){return"/"+t},Rs={},bt=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let d=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=d(a.map(c=>{if(c=Cg(c),c in Rs)return;Rs[c]=!0;const u=c.endsWith(".css"),v=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${v}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Sg,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var kg=E('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function Tg(t){var e=kg(),a=D(b(e),2);Dt(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=Re("Reload");g(r,s)},$$slots:{default:!0}}),g(t,e)}var xg=E('<div class="p-uzefkz"><!></div>');function Eg(t,e){fe(e,!0);let a=I(!1);const{getDialogPageHeight:r}=ss(),o=A(r);Se(()=>{const d=setTimeout(()=>{f(a,!0)},250);return()=>{clearTimeout(d)}});var s=xg(),i=b(s);{var l=d=>{Ma(d,{})};U(i,d=>{n(a)&&d(l)})}xe(()=>Ja(s,`min-height: ${n(o)??""}px;`)),g(t,s),ve()}function Nt(t,e){fe(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>bt(()=>import("./aDoa_V8fm.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>bt(()=>import("./aBu5qDwnN.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>bt(()=>import("./a425JyaR-.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>bt(()=>import("./aBol2W6eK.js"),__vite__mapDeps([8,9])),"./Pages/ChangeTags.svelte":()=>bt(()=>import("./aq8hWMR8f.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>bt(()=>import("./aC4Z6RWQy.js"),__vite__mapDeps([10,4,3,11,12])),"./Pages/Exit.svelte":()=>bt(()=>import("./aTXyBTsBY.js"),__vite__mapDeps([13,14])),"./Pages/ExportData.svelte":()=>bt(()=>import("./aBob50iAE.js"),__vite__mapDeps([15,16,17,18,19,20])),"./Pages/Extension.svelte":()=>bt(()=>import("./aBtyA5gTJ.js"),__vite__mapDeps([21,18,19,22])),"./Pages/ImportData.svelte":()=>bt(()=>import("./aDoEo5KQZ.js"),__vite__mapDeps([23,24])),"./Pages/Install.svelte":()=>bt(()=>import("./aC6lDqmHl.js"),__vite__mapDeps([25,26])),"./Pages/InstallSuccess.svelte":()=>bt(()=>import("./a97Ar9SV0.js"),__vite__mapDeps([27,28])),"./Pages/Note.svelte":()=>bt(()=>import("./aCu5kJElk.js"),__vite__mapDeps([29,30])),"./Pages/Settings.svelte":()=>bt(()=>import("./aDl5OsXFN.js"),__vite__mapDeps([31,18,19,16,17,32])),"./Pages/Signin.svelte":()=>bt(()=>import("./aBRLAuhmG.js"),__vite__mapDeps([33,4,3,11,34])),"./Pages/Signup.svelte":()=>bt(()=>import("./aBYtJ7R2N.js"),__vite__mapDeps([35,11,4,3,34])),"./Pages/Subscription.svelte":()=>bt(()=>import("./aCxDj277B.js"),__vite__mapDeps([36,37])),"./Pages/Sync.svelte":()=>bt(()=>import("./aD9NV8eIA.js"),__vite__mapDeps([38,39]))}),o=async l=>{const d=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[d]){const c=r[d]();return a[l]={promise:c},a[l].module=await c,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=ce(),i=M(s);Bc(i,()=>o(e.page),l=>{Eg(l,{})},(l,d)=>{const c=A(()=>n(d).default);var u=ce(),v=M(u);Wc(v,()=>n(c),(h,p)=>{p(h,{get params(){return e.params},get hidden(){return e.hidden}})}),g(l,u)},l=>{Tg(l)}),g(t,s),ve()}var tr,dl,ul;class Pg{constructor(e){ze(this,tr);Lt(this,"data");Lt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),ot(this,tr,dl).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,ot(this,tr,ul).call(this)),e}isEmpty(){return this.data.length===0}}tr=new WeakSet,dl=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},ul=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class Ng{constructor(e,a){Lt(this,"heap");Lt(this,"done");Lt(this,"cache",[]);this.heap=new Pg(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var Ag=E("<span>Back to notes</span>"),Mg=E('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),Dg=E("<span>Back to notes</span>"),Ig=E('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),Lg=E('<p class="f">No notes in bin</p>'),Rg=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),Og=E('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),Fg=E('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),zg=E('<div class="e p-1jdj5w3"><!></div>'),Bg=E('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),jg=E('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),Hg=E('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function Ug(t,e){fe(e,!0);const{getScrollContainer:a}=vo(),{createHandleClickDialogPage:r,createDialogPageHref:o}=Zt(),{getSelectedTags:s}=Hn(),{getFeedOrder:i}=Fi(),{checkNotesInArchive:l,checkNotesInBin:d,checkNotes:c,isInitedNotes:u}=Ot(),{getSelectedMetaTags:v}=fo(),{replaceSearchParams:h,getHref:p}=Kt();ns();const{getFiltredNotesLength:m,getFiltredNotes:T,getUpdatedFiltredNotesTimestamp:_}=Na();let S=A(v),B=A(m),w=A(T),C=A(_),R=A(u),L=54,P=I(0),j=I(0),G=I(0),V=I(null),q=A(a),ne=null,X=null,z=A(()=>n(S).has(et.ARCHIVED)?"archive":n(S).has(et.BIN)?"bin":"notes");const ae=A(s);Be(()=>{n(ae),n(le),n(q)?.scrollTo(0,0)});const{enable:ye}=os(),te=()=>{ye(),ne||(ne=requestAnimationFrame(()=>{const ie=n(q)?.scrollTop||0;f(G,ie,!0);const $=Math.ceil(n(P)/L);f(j,Math.floor(ie/(L*$))*(L*$)),ne=null}))},H=()=>{X||(X=requestAnimationFrame(()=>{f(P,window.innerHeight-180||0,!0);const ie=n(q)?.scrollTop||0;f(G,ie,!0);const $=Math.ceil(n(P)/L);f(j,Math.floor(ie/(L*$))*(L*$)),X=null}))};Se(()=>{const ie=$=>{Ls()&&($.key==="ArrowDown"||$.key==="ArrowUp")&&($.preventDefault(),$.key==="ArrowDown"?xv():$.key==="ArrowUp"&&Ev())};return document.addEventListener("keydown",ie),()=>{document.removeEventListener("keydown",ie)}}),Se(()=>{H(),te()});const J=()=>{te()};Be(()=>(n(q)?.addEventListener("scroll",J),window.addEventListener("resize",H),()=>{n(q)?.removeEventListener("scroll",J),window.removeEventListener("resize",H)}));const le=A(i);Be(()=>{n(le),n(C),f(V,new Ng(n(w),(ie,$)=>{if(!ie||!$||!ie.data||!$.data)return 0;if(ie.data.pinnedAt&&!$.data.pinnedAt)return-1;if(!ie.data.pinnedAt&&$.data.pinnedAt)return 1;if(ie.data.pinnedAt&&$.data.pinnedAt){if(ie.data.pinnedAt<$.data.pinnedAt)return 1;if(ie.data.pinnedAt>$.data.pinnedAt)return-1}switch(n(le)){case"newest":return ie.data.updatedAt<$.data.updatedAt?1:ie.data.updatedAt>$.data.updatedAt?-1:(ie.data.link?.title||"").localeCompare($.data.link?.title||"");case"oldest":return ie.data.updatedAt>$.data.updatedAt?1:ie.data.updatedAt<$.data.updatedAt?-1:(ie.data.link?.title||"").localeCompare($.data.link?.title||"");case"AtoZ":return(ie.data.link?.title||"").localeCompare($.data.link?.title||"");case"ZtoA":return($.data.link?.title||"").localeCompare(ie.data.link?.title||"");default:return 0}}),!0)});const oe=A(()=>n(B)*L);let ue=A(()=>{n(C);const ie=Math.ceil(n(P)/L);let $=Math.floor(n(j)/L);return $=$-Math.min($,ie),n(V)?.get($,$+ie*3)||[]}),Q=A(()=>L*Math.ceil(n(P)/L));const O=A(()=>n(j)-Math.min(n(j),n(Q)));Be(()=>{Ls()});var ge=Hg(),ke=b(ge),re=b(ke);{var we=ie=>{Ma(ie,{})},Ce=ie=>{var $=ce(),Te=M($);{var je=x=>{var k=Mg(),N=D(M(k),2),W=b(N);{let K=A(()=>p(""));Dt(W,{element:"a",get href(){return n(K)},onClick:pe=>{pe.preventDefault(),h("")},children:(pe,Ee)=>{var se=Ag();g(pe,se)},$$slots:{default:!0}})}g(x,k)},y=x=>{var k=ce(),N=M(k);{var W=pe=>{var Ee=Ig(),se=D(M(Ee),2),ee=b(se);{let Y=A(()=>p(""));Dt(ee,{element:"a",get href(){return n(Y)},onClick:Z=>{Z.preventDefault(),h("")},children:(Z,me)=>{var Ne=Dg();g(Z,Ne)},$$slots:{default:!0}})}g(pe,Ee)},K=pe=>{var Ee=ce(),se=M(Ee);{var ee=Z=>{var me=zg(),Ne=b(me);{var Xe=Pe=>{var Ve=Lg();g(Pe,Ve)},Oe=Pe=>{var Ve=Fg(),Fe=b(Ve),He=b(Fe);{let Ge=A(()=>o(be.NewNote)),Me=A(()=>r(be.NewNote));Dt(He,{element:"a",get href(){return n(Ge)},get onClick(){return n(Me)},children:(Ue,ct)=>{var rt=Rg(),Qe=M(rt);he(Qe,()=>({"--size":"18px","--color":"#b0b0b0"})),_e(Qe.lastChild,{name:"plus"}),g(Ue,rt)},$$slots:{default:!0}})}var Ke=D(Fe,4),Ae=b(Ke);{let Ge=A(()=>o(be.ImportData)),Me=A(()=>r(be.ImportData));Dt(Ae,{element:"a",get href(){return n(Ge)},get onClick(){return n(Me)},children:(Ue,ct)=>{var rt=Og(),Qe=M(rt);he(Qe,()=>({"--size":"18px","--color":"#b0b0b0"})),_e(Qe.lastChild,{name:"import"}),g(Ue,rt)},$$slots:{default:!0}})}g(Pe,Ve)};U(Ne,Pe=>{n(z)==="bin"?Pe(Xe):Pe(Oe,!1)})}g(Z,me)},Y=Z=>{var me=ce(),Ne=M(me);{var Xe=Pe=>{var Ve=Bg();g(Pe,Ve)},Oe=Pe=>{var Ve=jg(),Fe=b(Ve);On(Fe,23,()=>n(ue),He=>He.data,(He,Ke,Ae)=>{var Ge=ce(),Me=M(Ge);{var Ue=ct=>{{let rt=A(()=>n(ue)[n(Ae)+1]?.id),Qe=A(()=>n(ue)[n(Ae)-1]?.id),Ft=A(()=>n(Ae)*L<n(G)-n(O)-L/2||n(Ae)*L>n(G)-n(O)+Math.floor(n(P)/L)*L),pt=A(()=>(n(Ae)+5)*L<n(G)-n(O)-L/2||(n(Ae)+5)*L>n(G)-n(O)+Math.floor(n(P)/L)*L);Bv(ct,{get nextNoteId(){return n(rt)},get prevNoteId(){return n(Qe)},get mode(){return n(z)},get focusHidden(){return n(Ft)},get showMenuUp(){return n(pt)},get noteId(){return n(Ke).id},get noteData(){return n(Ke).data}})}};U(Me,ct=>{n(Ke).data&&ct(Ue)})}g(He,Ge)}),xe(He=>{Ja(Ve,He),Ja(Fe,`transform: translateY(${n(O)??""}px);`)},[()=>`--minHeight: ${Math.max((n(oe)>n(P),n(oe)),0)}px`]),g(Pe,Ve)};U(Ne,Pe=>{n(ue).length===0?Pe(Xe):Pe(Oe,!1)},!0)}g(Z,me)};U(se,Z=>{!d()&&!l()&&!c()?Z(ee):Z(Y,!1)},!0)}g(pe,Ee)};U(N,pe=>{n(z)==="archive"&&!l()?pe(W):pe(K,!1)},!0)}g(x,k)};U(Te,x=>{n(z)==="bin"&&!d()?x(je):x(y,!1)},!0)}g(ie,$)};U(re,ie=>{n(R)?ie(Ce,!1):ie(we)})}g(t,ge),ve()}var Wg=E('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function qg(t){var e=Wg(),a=D(M(e),2),r=b(a);Ug(r,{}),g(t,e)}function Vg(t,e){fe(e,!0);const a=Un();let r=De(e,"animationRef",7),o=De(e,"dialog",7);il(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let c=0,u=0,v=()=>1;if(r().current){r().current.pause();let p=Number(r().current.currentTime);br()&&(p=Number(p)+50,r().current.currentTime=Math.min(Math.max(Fn-1,p),p));const m=r().current.effect?.getComputedTiming().progress||0;v=()=>m,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(p=>requestAnimationFrame(p)),u=1-v();const h=u*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-u)*.1}`),a.swipingRatio=Math.abs(1-u)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${h}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:c,currentPosition:h,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:c,width:u})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-c/u)*.1}`),o().style.transform=`translate3d(${c}px, 0, 0)`,a.swipingRatio=Math.abs(1-c/u)*25)},onFinish:({swipeVelocity:c,currentPosition:u,width:v,actionThreshold:h,initialPosition:p})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const m=()=>Math.abs(p+u)/v*100;let T=null;if(c<=-sa?T="open":c>=sa?T="close":T=Math.abs(m())>h?"close":"open",r().progress=sl(m()/100),T==="close"){const _=(1-(r().progress||0))*Fn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const _=(r().progress||1)*Fn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),ve()}var Kg=E('<div class="d p-1c7pbur"> </div>'),Yg=E('<button class="e f p-1c7pbur"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Gg=E('<a class="e g p-1c7pbur"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Xg=E('<div><div class="a p-1c7pbur"><div class="b p-1c7pbur"><div class="c p-1c7pbur"><!> <!> <!></div></div></div> <!> <!></div>'),Jg=E("<dialog><!></dialog> <!>",1);function Zg(t,e){fe(e,!0);const{isScrolling:a,enable:r}=os();let o=I(null),s=I(null),i={};const l=Un(),{checkLeftEnd:d,checkLeftStart:c,setLeftEnd:u,setLeftStart:v,getCountDialog:h}=dn(),p=A(c),m=A(d);let T=A(()=>l.working);const _=()=>{e.dialogState!=="opened"&&e.onStartOpening()},S=()=>{e.onClose()},B=()=>{e.onSwipe()},w=ne=>{ne.preventDefault(),S()};Se(()=>(n(o)?.addEventListener("close",S),n(o)?.addEventListener("cancel",w),()=>{n(o)?.removeEventListener("close",S),n(o)?.removeEventListener("cancel",w)})),Be(()=>{h()>0&&(l.swipingRatio=25)}),Be(()=>{e.dialogState==="opening"?Vt(()=>{requestAnimationFrame(()=>{if(!n(o))return;const ne=(i.progress||1)*Fn,X=n(o).style.transform||`translate3d(${n(p)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const z=n(o)?.animate([{transform:X},{transform:"translate3d(0, 0, 0)"}],{duration:ne,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=z,z&&(z.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=oa().duration,z.cancel(),i.current=void 0,i.progress=void 0,n(p)&&v(!1)})})}):e.dialogState==="closing"&&Vt(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const ne=(1-(i.progress||0))*Fn,X=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const z=n(o)?.animate([{transform:X},{transform:`translate3d(${n(m)?"-100%":"100%"}, 0, 0)`}],{duration:ne,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=z,z&&(z.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=oa().duration,z.cancel(),i.current=void 0,i.progress=void 0,n(m)&&u(!1)})})})});const C=()=>{r()},R=A(a);Se(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),br()&&n(o).getBoundingClientRect(),!n(T)){e.onOpened();return}e.onStartOpening()}});var L=Jg(),P=M(L),j=b(P);{var G=ne=>{var X=Xg(),z=b(X),ae=b(z),ye=b(ae),te=b(ye);{var H=ge=>{var ke=Kg(),re=b(ke);xe(()=>lt(re,e.title)),g(ge,ke)};U(te,ge=>{e.title&&ge(H)})}var J=D(te,2);{var le=ge=>{var ke=Yg();ke.__click=S;var re=b(ke);he(re,()=>({"--size":"32px"})),_e(re.lastChild,{name:"back"});var we=D(re,2);ht(we,{children:(Ce,ie)=>{var $=Re("back");g(Ce,$)}}),g(ge,ke)};U(J,ge=>{e.blocked||ge(le)})}var oe=D(J,2);{var de=ge=>{var ke=Gg();ke.__click=function(...Ce){e.onOpenWindow?.apply(this,Ce)};var re=b(ke);he(re,()=>({"--scale":"0.7","--size":"32px"})),_e(re.lastChild,{name:"open-window"});var we=D(re,2);ht(we,{children:(Ce,ie)=>{var $=Re("open window");g(Ce,$)}}),xe(()=>st(ke,"href",e.openWindowHref)),g(ge,ke)};U(oe,ge=>{e.onOpenWindow&&ge(de)})}var ue=D(z,2);Ie(ue,()=>e.children);var Q=D(ue,2);{var O=ge=>{is(ge,{})};U(Q,ge=>{e.dialogState==="opened"&&ge(O)})}tt(X,ge=>f(s,ge),()=>n(s)),xe(()=>at(X,1,it({o:!0,p:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-1c7pbur")),cn("scroll",X,C),g(ne,X)};U(j,ne=>{e.dialogState!=="preOpening"&&ne(G)})}tt(P,ne=>f(o,ne),()=>n(o));var V=D(P,2);{var q=ne=>{Vg(ne,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:_,onClose:S,onSwipe:B,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};U(V,ne=>{n(s)&&!n(R)&&!e.blocked&&!e.hidden&&ne(q)})}xe(()=>at(P,1,it({h:!0,i:n(T),j:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",k:e.hidden,l:e.dialogState==="opened",m:n(p),n:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-1c7pbur")),g(t,L),ve()}gt(["click"]);function Qg(t,e){fe(e,!0);let a=De(e,"hidden",3,!1),r=De(e,"onClosed",3,()=>{}),o=I(0);Se(()=>{const S=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",S),S(),()=>{window.removeEventListener("resize",S)}});const{dialogDec:s,dialogInc:i}=dn(),l=Un();Se(()=>(i(),()=>{s()}));let d=I("closed");const c=()=>{f(d,"opening")},u=()=>{f(d,"swiping")},v=()=>{f(d,"opened")},h=()=>{e.onClose(),f(d,"closing")},p=()=>{f(d,"closed"),r()()};Be(()=>{e.shown&&n(d)==="closed"?f(d,"preOpening"):!e.shown&&n(d)==="opened"&&f(d,"closing")}),Be(()=>{n(d)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(d)==="opened"||n(d)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var m=ce(),T=M(m);{var _=S=>{Zg(S,{get dialogWidth(){return n(o)},get dialogState(){return n(d)},get title(){return e.title},onStartOpening:c,onOpened:v,onClose:h,onClosed:p,onSwipe:u,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(B,w)=>{var C=ce(),R=M(C);Ie(R,()=>e.children),g(B,C)},$$slots:{default:!0}})};U(T,S=>{n(d)!=="closed"&&S(_)})}g(t,m),ve()}const $g=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};Se(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Se(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var eh=E('<button class="d e p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),th=E('<div class="f p-2jn3ll"> </div>'),nh=E('<button class="d g p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),ah=E('<dialog><div class="a p-2jn3ll"><div class="b p-2jn3ll"><div class="c p-2jn3ll"><div><!></div> <!> <div><!></div></div></div> <!></div></dialog> <!>',1);function rh(t,e){fe(e,!0);let a=De(e,"blockedDialog",3,!1),r=De(e,"hiddenDialog",3,!1),o=De(e,"isDesktopAnimationOff",3,!1),s=I(null),i=I(null),l=I(!1);$g({getDialog:()=>n(s),onOpen:()=>e.onOpen(),onStartClose:()=>e.onStartClose(),onClose:()=>e.onClose()});const d=Un();Be(()=>{e.stateDialog==="closing"&&(d.working?n(s)?.addEventListener("transitionend",()=>{n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:c}=ss(),u=A(c);Se(()=>{setTimeout(()=>{f(l,!0)},50)});var v=ah(),h=M(v),p=b(h),m=b(p),T=b(m),_=b(T),S=b(_);{var B=V=>{var q=eh();q.__click=()=>{e.onStartBack()};var ne=b(q);he(ne,()=>({"--size":"28px"})),_e(ne.lastChild,{name:"back"});var X=D(ne,2);ht(X,{children:(z,ae)=>{var ye=Re("back");g(z,ye)}}),g(V,q)};U(S,V=>{(!(a()||r())||a())&&e.onStartBack&&V(B)})}var w=D(_,2);{var C=V=>{var q=th(),ne=b(q);xe(()=>lt(ne,e.title)),g(V,q)};U(w,V=>{e.title&&V(C)})}var R=D(w,2),L=b(R);{var P=V=>{var q=nh();q.__click=()=>{e.onStartClose()};var ne=b(q);he(ne,()=>({"--size":"28px"})),_e(ne.lastChild,{name:"close"});var X=D(ne,2);ht(X,{children:(z,ae)=>{var ye=Re("close");g(z,ye)}}),g(V,q)};U(L,V=>{a()||r()||V(P)})}var j=D(m,2);Ie(j,()=>e.children),tt(p,V=>f(i,V),()=>n(i)),tt(h,V=>f(s,V),()=>n(s));var G=D(h,2);ls(G,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose}}),xe(()=>{Ja(h,`height: ${n(u)+74}px`),at(h,1,it({h:!0,i:e.stateDialog==="open",j:n(l),k:d.working,l:o(),m:r()}),"p-2jn3ll")}),g(t,v),ve()}gt(["click"]);const oh=({onStartClose:t,onClosed:e})=>{let a=I("close");return{get state(){return n(a)},set state(i){f(a,i,!0)},handleStartClose:(i=!1)=>{i||(f(a,"closing"),t?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function sh(t,e){fe(e,!0);let a=De(e,"blockedDialog",3,!1),r=De(e,"hiddenDialog",3,!1),o=De(e,"onStartClose",3,()=>{}),s=De(e,"onClosed",3,()=>{}),i=oh({onStartClose:()=>o()(),onClosed:()=>s()()});const{dialogDec:l,dialogInc:d}=dn();Se(()=>(d(),()=>{l()})),Be(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const c=p=>{p.key==="Escape"&&a()&&(p.preventDefault(),p.stopPropagation())};Se(()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}));var u=ce(),v=M(u);{var h=p=>{rh(p,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(m,T)=>{var _=ce(),S=M(_);Ie(S,()=>e.children),g(m,_)},$$slots:{default:!0}})};U(v,p=>{i.state!=="close"&&p(h)})}g(t,u),ve()}const Os=(t,e=Ye,a=Ye,r)=>{let o=Nr(()=>xl(r?.(),!1));var s=ce(),i=M(s);{var l=c=>{_t(c,{children:(u,v)=>{Nt(u,{get hidden(){return n(o)},get page(){return be.Settings}})},$$slots:{default:!0}})},d=c=>{var u=ce(),v=M(u);{var h=m=>{_t(m,{children:(T,_)=>{bg(T,{})},$$slots:{default:!0}})},p=m=>{var T=ce(),_=M(T);{var S=w=>{_t(w,{children:(C,R)=>{Nt(C,{get params(){return a()},get hidden(){return n(o)},get page(){return be.Note}})},$$slots:{default:!0}})},B=w=>{var C=ce(),R=M(C);{var L=j=>{_t(j,{children:(G,V)=>{Nt(G,{get hidden(){return n(o)},get page(){return be.ImportData}})},$$slots:{default:!0}})},P=j=>{var G=ce(),V=M(G);{var q=X=>{_t(X,{children:(z,ae)=>{Nt(z,{get hidden(){return n(o)},get page(){return be.ExportData}})},$$slots:{default:!0}})},ne=X=>{var z=ce(),ae=M(z);{var ye=H=>{_t(H,{children:(J,le)=>{ag(J,{})},$$slots:{default:!0}})},te=H=>{var J=ce(),le=M(J);{var oe=ue=>{_t(ue,{children:(Q,O)=>{Nt(Q,{get hidden(){return n(o)},get page(){return be.Install}})},$$slots:{default:!0}})},de=ue=>{var Q=ce(),O=M(Q);{var ge=re=>{_t(re,{children:(we,Ce)=>{Nt(we,{get hidden(){return n(o)},get page(){return be.InstallSuccess}})},$$slots:{default:!0}})},ke=re=>{var we=ce(),Ce=M(we);{var ie=Te=>{_t(Te,{children:(je,y)=>{Nt(je,{get hidden(){return n(o)},get page(){return be.Auth}})},$$slots:{default:!0}})},$=Te=>{var je=ce(),y=M(je);{var x=N=>{_t(N,{children:(W,K)=>{Nt(W,{get hidden(){return n(o)},get page(){return be.Signup}})},$$slots:{default:!0}})},k=N=>{var W=ce(),K=M(W);{var pe=se=>{_t(se,{children:(ee,Y)=>{Nt(ee,{get hidden(){return n(o)},get page(){return be.Signin}})},$$slots:{default:!0}})},Ee=se=>{var ee=ce(),Y=M(ee);{var Z=Ne=>{_t(Ne,{children:(Xe,Oe)=>{Nt(Xe,{get hidden(){return n(o)},get page(){return be.AccessKeys}})},$$slots:{default:!0}})},me=Ne=>{var Xe=ce(),Oe=M(Xe);{var Pe=Fe=>{_t(Fe,{children:(He,Ke)=>{Nt(He,{get hidden(){return n(o)},get page(){return be.Account}})},$$slots:{default:!0}})},Ve=Fe=>{var He=ce(),Ke=M(He);{var Ae=Me=>{_t(Me,{children:(Ue,ct)=>{Nt(Ue,{get hidden(){return n(o)},get page(){return be.ConfirmAccessKey}})},$$slots:{default:!0}})},Ge=Me=>{var Ue=ce(),ct=M(Ue);{var rt=Ft=>{_t(Ft,{children:(pt,Et)=>{Nt(pt,{get hidden(){return n(o)},get page(){return be.Exit}})},$$slots:{default:!0}})},Qe=Ft=>{var pt=ce(),Et=M(pt);{var go=Pt=>{var un=ce(),zt=M(un);{var Bt=Qt=>{_t(Qt,{children:(hn,cs)=>{Nt(hn,{get hidden(){return n(o)},get page(){return be.Sync}})},$$slots:{default:!0}})},ho=Qt=>{var hn=ce(),cs=M(hn);{var fl=Da=>{_t(Da,{children:(Rr,ds)=>{Nt(Rr,{get hidden(){return n(o)},get page(){return be.Subscription}})},$$slots:{default:!0}})},vl=Da=>{var Rr=ce(),ds=M(Rr);{var gl=Ia=>{_t(Ia,{children:(po,pl)=>{Nt(po,{get hidden(){return n(o)},get page(){return be.About}})},$$slots:{default:!0}})},hl=Ia=>{_t(Ia,{children:(po,pl)=>{Qv(po,{})},$$slots:{default:!0}})};U(ds,Ia=>{e()===be.About?Ia(gl):Ia(hl,!1)},!0)}g(Da,Rr)};U(cs,Da=>{e()===be.Subscription?Da(fl):Da(vl,!1)},!0)}g(Qt,hn)};U(zt,Qt=>{e()===be.Sync?Qt(Bt):Qt(ho,!1)},!0)}g(Pt,un)};U(Et,Pt=>{e(),be.Extension,Pt(go,!1)},!0)}g(Ft,pt)};U(ct,Ft=>{e()===be.Exit?Ft(rt):Ft(Qe,!1)},!0)}g(Me,Ue)};U(Ke,Me=>{e()===be.ConfirmAccessKey?Me(Ae):Me(Ge,!1)},!0)}g(Fe,He)};U(Oe,Fe=>{e()===be.Account?Fe(Pe):Fe(Ve,!1)},!0)}g(Ne,Xe)};U(Y,Ne=>{e()===be.AccessKeys?Ne(Z):Ne(me,!1)},!0)}g(se,ee)};U(K,se=>{e()===be.Signin?se(pe):se(Ee,!1)},!0)}g(N,W)};U(y,N=>{e()===be.Signup?N(x):N(k,!1)},!0)}g(Te,je)};U(Ce,Te=>{e()===be.Auth?Te(ie):Te($,!1)},!0)}g(re,we)};U(O,re=>{e()===be.InstallSuccess?re(ge):re(ke,!1)},!0)}g(ue,Q)};U(le,ue=>{e()===be.Install?ue(oe):ue(de,!1)},!0)}g(H,J)};U(ae,H=>{e()===be.AccountSetup?H(ye):H(te,!1)},!0)}g(X,z)};U(V,X=>{e()===be.ExportData?X(q):X(ne,!1)},!0)}g(j,G)};U(R,j=>{e()===be.ImportData?j(L):j(P,!1)},!0)}g(w,C)};U(_,w=>{e()===be.Note?w(S):w(B,!1)},!0)}g(m,T)};U(v,m=>{e()===be.NewNote?m(h):m(p,!1)},!0)}g(c,u)};U(i,c=>{e()===be.Settings?c(l):c(d,!1)})}g(t,s)};var ih=E("<!> <!>",1);function lh(t,e){fe(e,!0);let a=A(()=>({...e.openWindowHref?{openWindowHref:e.openWindowHref}:{},...e.onOpenWindow?{onOpenWindow:e.onOpenWindow}:{}}));const{checkBlockedDialog:r,checkClosableDialog:o}=dn(),{sidebarClose:s,getSidebarState:i}=Dr(),l=A(r),d=A(o),{getDialogPages:c}=Zt(),{getAccount:u}=rs();let v=A(c),h=A(()=>u()!==void 0);const{checkMobileSize:p}=Aa();let m=I(ut([]));const T=A(p),{clearDialogPages:_,popDialogPage:S}=Zt(),{checkLeftStart:B}=dn();let w=A(B);Be(()=>{c().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const C=()=>{S()},R=()=>{_()};Be(()=>{n(v),n(T),Vt(()=>{if(n(T))n(v).length>=n(m).length||n(w)?f(m,n(v).map(X=>({page:X,shown:!0})),!0):f(m,n(m).map((X,z)=>({page:X.page,shown:z<n(v).length})),!0);else if(n(v).length>=n(m).length)f(m,n(v).map(X=>({page:X,shown:!0})),!0);else{if(n(v).length===0){f(m,[{page:n(m)[n(m).length-1].page,shown:!1}],!0);return}f(m,n(v).map(X=>({page:X,shown:!0})),!0)}})});const L=()=>{f(m,n(v).map(X=>({page:X,shown:!0})),!0)};var P=ih(),j=M(P);{var G=X=>{qg(X)};U(j,X=>{n(h)&&X(G)})}var V=D(j,2);{var q=X=>{var z=ce(),ae=M(z);On(ae,19,()=>n(m),ye=>ye.page,(ye,te,H)=>{const J=A(()=>n(te).page.split("?")[1]),le=A(()=>n(te).page.split("?")[0]),oe=A(()=>n(H)!==n(m).length-1&&!!n(m)[n(H)+1]?.shown),de=A(()=>n(H)===0);{let ue=A(()=>Es[n(le)]||""),Q=A(()=>n(l)||n(de)&&!n(d));Qg(ye,Ro({get shown(){return n(te).shown},get title(){return n(ue)},get hidden(){return n(oe)},get blocked(){return n(Q)},onClose:C,onClosed:L},()=>n(a),{children:(O,ge)=>{Os(O,()=>n(le),()=>n(J),()=>n(oe))},$$slots:{default:!0}}))}}),g(X,z)},ne=X=>{var z=ce(),ae=M(z);{var ye=te=>{const H=A(()=>n(m)[n(m).length-1].page.split("?")[1]),J=A(()=>n(m)[n(m).length-1].page.split("?")[0]),le=A(()=>n(m)[n(m).length-1].shown),oe=A(()=>n(m).length===1);{let de=A(()=>Es[n(J)]||""),ue=A(()=>n(l)||!n(d)),Q=A(()=>n(l)||n(oe)?void 0:C);sh(te,{get shownDialog(){return n(le)},get title(){return n(de)},get blockedDialog(){return n(ue)},hiddenDialog:!1,get onStartBack(){return n(Q)},onStartClose:R,onClosed:L,children:(O,ge)=>{Os(O,()=>n(J),()=>n(H))},$$slots:{default:!0}})}};U(ae,te=>{n(m).length>0&&te(ye)},!0)}g(X,z)};U(V,X=>{p()?X(q):X(ne,!1)})}g(t,P),ve()}function ch(t,e){fe(e,!1);let a=0;Se(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),ts(),ve()}const dh=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var uh=E('<div><button class="d p-11qzo3t"><!> <span class="e p-11qzo3t"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),fh=E('<!> <!> <!> <!> <main><div class="a p-11qzo3t"><div class="b p-11qzo3t"><!></div></div> <div class="c p-11qzo3t"><!></div></main> <!>',1);function vh(t,e){fe(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=Kt(),{hasDialogPage:s}=Zt(),{setScrollContainer:i}=vo(),{getAccount:l,init:d}=rs(),{isInitedNotes:c}=Ot(),{isInitedSettings:u}=Za(),{getDialogPages:v}=Zt(),{createBroadcastChannel:h,tabId:p}=uo(),m=h(),{getSidebarState:T}=Dr(),{setClosableDialog:_}=dn(),{getViewMode:S}=Za(),B=()=>{dh()?a(`${tn}=${be.AccountSetup}`):a(`${tn}=${be.Install}`)};Se(()=>{d(x=>{x===void 0?B():(s(be.AccountSetup)&&a(""),x?f(P,x):f(P,null))});const y=async x=>{const k=JSON.parse(x.data);if(k.tabId&&k.tabId===p)return;const N=k;N.type==="initLocalAccount"||N.type==="initCloudAccount"||N.type==="updateAccount"||N.type==="disconnectCloudAccount"?a(""):N.type==="exit"&&B()};return m.addEventListener(y),()=>m.removeEventListener(y)});const w=Un();Se(async()=>{await new Promise(y=>setTimeout(y,60)),await xi(),w.working=!0});let C=I(!1),R=0,L=A(()=>v().length>0),P=A(l),j=A(c),G=A(u),V=I(null);const q=()=>{n(V)&&n(V).scrollTo({top:0})};Be(()=>{_(n(P)!==void 0)}),Be(()=>{i(n(V))});const ne=()=>{if(n(V)){const y=n(V).scrollTop||0;y===0?f(C,!1):!n(C)&&R>y?f(C,!0):n(C)&&R+50<y&&f(C,!1),R=y}},X=()=>{ne()};Be(()=>(n(V)?.addEventListener("scroll",X),window.addEventListener("resize",X),()=>{n(V)?.removeEventListener("scroll",X),window.removeEventListener("resize",X)}));const z=A(T);let ae=A(()=>w.swipingRatio);const ye=()=>{const y=new URLSearchParams(o());if(s(be.NewNote)){const x=y.get("noteId")||"";return r(x?y.toString().replace(be.NewNote,`${be.Note}?id=${encodeURIComponent(x)}`):y)}return r(y)},te=async()=>{},H=A(S),J=A(()=>n(H)==="popup"||n(H)==="sidebar"?{onOpenWindow:te,openWindowHref:ye()}:{});var le=fh(),oe=M(le);ch(oe,{});var de=D(oe,2);Pu(de,{});var ue=D(de,2);is(ue,{});var Q=D(ue,2);Xu(Q,{});var O=D(Q,2),ge=b(O),ke=b(ge),re=b(ke);{var we=y=>{Xv(y,Ro(()=>n(J)))};U(re,y=>{n(G)&&n(P)!==void 0&&y(we)})}var Ce=D(ge,2),ie=b(Ce);{var $=y=>{lh(y,Ro(()=>n(J)))};U(ie,y=>{n(j)&&n(G)&&y($)})}tt(O,y=>f(V,y),()=>n(V));var Te=D(O,2);{var je=y=>{var x=uh(),k=b(x);k.__click=q;var N=b(k);ht(N,{children:(pe,Ee)=>{var se=Re("top");g(pe,se)}});var W=D(N,2),K=b(W);he(K,()=>({"--rotate":"90deg","--size":"28px"})),_e(K.lastChild,{name:"back"}),xe(()=>{Ja(x,`--swiping-ratio: ${n(ae)}; --transition-timing-default: ${w.duration}s;`),at(x,1,it({i:!0,g:w.working&&!w.isSwiping,j:n(L)||n(z)!=="closed"}),"p-11qzo3t")}),g(y,x)};U(Te,y=>{n(C)&&y(je)})}xe(()=>{Ja(O,`--swiping-ratio: ${n(ae)}; --transition-timing-default: ${w.duration}s;`),at(O,1,it({f:!0,g:w.working&&!w.isSwiping,h:n(z)!=="closed"}),"p-11qzo3t")}),g(t,le),ve()}gt(["click"]);function gh(t){tu(t,{children:(e,a)=>{vh(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Rc(gh,{target:document.getElementById("app")});export{yt as $,A,Dt as B,Kt as C,rs as D,ts as E,Cr as F,cn as G,eg as H,_e as I,Ot as J,Aa as K,Ma as L,Za as M,ll as N,Ps as O,be as P,yh as Q,Yn as R,tt as S,Ch as T,Sh as U,ht as V,du as W,uu as X,tn as Y,br as Z,Vt as _,f as a,va as a0,yg as a1,uo as a2,_h as a3,wh as a4,dh as a5,mh as a6,De as a7,Ja as a8,bh as a9,I as b,b as c,he as d,On as e,E as f,n as g,st as h,g as i,U as j,at as k,it as l,ve as m,M as n,Se as o,fe as p,lt as q,gt as r,D as s,xe as t,Zt as u,dn as v,ut as w,Be as x,ce as y,Re as z};
