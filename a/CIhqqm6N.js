const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/DI6QBWKd.js","a/BAW-HnOs.css","a/DcVKyvpR.js","a/9q_jSmK4.js","a/BEGDcNQV.js","a/CjhdjYO4.css","a/CnsCVwfm.js","a/D5mnDQ30.css","a/DbpV6HBw.js","a/DgPIJwnn.css","a/vm8kQGdt.js","a/B_UsPGEu.css","a/d5zF0KPa.js","a/Cpa8lgv9.js","a/Bd6Vds6r.js","a/j0KFa_-O.css","a/hu7yjlv8.css","a/DJfSDZ3N.js","a/Dqy1MUrC.js","a/DdyZLl37.js","a/D0S1kURo.css","a/B_Zcg-eh.css","a/HOTUjnfJ.css","a/BbSki02y.js","a/Bs6Vrlio.css","a/CQsDuqvu.js","a/Bso39p1d.css","a/DT1k_Xk3.js","a/B8JVha0x.css","a/oANtR90j.js","a/BVuu1lAR.js","a/CebV7XwJ.css","a/BlydIZbO.js","a/DaxC3cdO.css","a/BVvhQVjJ.js","a/Bib31qW-.css","a/YokMiKcX.js","a/Br15UghP.css","a/BqEJxc__.js","a/CTzb1Nvm.css","a/DswjGbL3.js","a/1JBO3KHP.css"])))=>i.map(i=>d[i]);
var Ms=Object.defineProperty;var Ma=t=>{throw TypeError(t)};var Is=(t,e,n)=>e in t?Ms(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ht=(t,e,n)=>Is(t,typeof e!="symbol"?e+"":e,n),Wr=(t,e,n)=>e.has(t)||Ma("Cannot "+n);var B=(t,e,n)=>(Wr(t,e,"read from private field"),n?n.call(t):e.get(t)),_e=(t,e,n)=>e.has(t)?Ma("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),oe=(t,e,n,r)=>(Wr(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Oe=(t,e,n)=>(Wr(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const no=!1;var va=Array.isArray,Os=Array.prototype.indexOf,ha=Array.from,Qr=Object.defineProperty,Ln=Object.getOwnPropertyDescriptor,ro=Object.getOwnPropertyDescriptors,Rs=Object.prototype,Fs=Array.prototype,ga=Object.getPrototypeOf,Ia=Object.isExtensible;const ye=()=>{};function zs(t){return typeof t?.then=="function"}function Hs(t){return t()}function $r(t){for(var e=0;e<t.length;e++)t[e]()}function ao(){var t,e,n=new Promise((r,o)=>{t=r,e=o});return{promise:n,resolve:t,reject:e}}function Us(t,e,n=!1){return t===void 0?n?e():e:t}const Qe=2,pa=4,Tr=8,bn=16,zt=32,Sn=64,_a=128,dt=256,Er=512,Ye=1024,st=2048,en=4096,mt=8192,kn=16384,ma=32768,Wn=65536,Oa=1<<17,js=1<<18,Yn=1<<19,oo=1<<20,ea=1<<21,Nr=1<<22,pn=1<<23,_n=Symbol("$state"),Vs=Symbol("legacy props"),qs=Symbol(""),Nn=new class extends Error{constructor(){super(...arguments);ht(this,"name","StaleReactionError");ht(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function so(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ws(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ys(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ks(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Gs(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Xs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Zs(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Js(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Qs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function $s(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ei(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Lr=1,Br=2,io=4,ti=8,ni=16,ri=1,ai=2,oi=4,si=8,ii=16,li=1,ci=2,Le=Symbol(),ui="http://www.w3.org/1999/xhtml";let di=!1;function lo(t){return t===this.v}function fi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function co(t){return!fi(t,this.v)}let Kn=!1,vi=!1;function hi(){Kn=!0}let Se=null;function Qt(t){Se=t}function Be(t){return uo().get(t)}function Me(t,e){return uo().set(t,e),e}function Q(t,e=!1,n){Se={p:Se,c:null,e:null,s:t,x:null,l:Kn&&!e?{s:null,u:null,$:[]}:null}}function $(t){var e=Se,n=e.e;if(n!==null){e.e=null;for(var r of n)xo(r)}return t!==void 0&&(e.x=t),Se=e.p,t??{}}function Gn(){return!Kn||Se!==null&&Se.l===null}function uo(t){return Se===null&&so(),Se.c??(Se.c=new Map(gi(Se)||void 0))}function gi(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let un=[];function fo(){var t=un;un=[],$r(t)}function $t(t){if(un.length===0&&!Bn){var e=un;queueMicrotask(()=>{e===un&&fo()})}un.push(t)}function pi(){for(;un.length>0;)fo()}const _i=new WeakMap;function vo(t){var e=de;if(e===null)return ce.f|=pn,t;if((e.f&ma)===0){if((e.f&_a)===0)throw!e.parent&&t instanceof Error&&ho(t),t;e.b.error(t)}else Un(t,e)}function Un(t,e){for(;e!==null;){if((e.f&_a)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&ho(t),t}function ho(t){const e=_i.get(t);e&&(Qr(t,"message",{value:e.message}),Qr(t,"stack",{value:e.stack}))}const pr=new Set;let Ce=null,yr=null,pt=null,ta=new Set,At=[],Mr=null,na=!1,Bn=!1;var On,Rn,dn,ir,Fn,zn,fn,Hn,lr,cr,ft,ra,br,aa;const xr=class xr{constructor(){_e(this,ft);ht(this,"current",new Map);_e(this,On,new Map);_e(this,Rn,new Set);_e(this,dn,0);_e(this,ir,null);_e(this,Fn,[]);_e(this,zn,[]);_e(this,fn,[]);_e(this,Hn,[]);_e(this,lr,[]);_e(this,cr,[]);ht(this,"skipped_effects",new Set)}process(e){At=[],yr=null,this.apply();for(const a of e)Oe(this,ft,ra).call(this,a);if(B(this,dn)===0){var n=pt;Oe(this,ft,aa).call(this);var r=B(this,zn),o=B(this,fn);oe(this,zn,[]),oe(this,fn,[]),oe(this,Hn,[]),yr=this,Ce=null,pt=n,Ra(r),Ra(o),yr=null,B(this,ir)?.resolve()}else Oe(this,ft,br).call(this,B(this,zn)),Oe(this,ft,br).call(this,B(this,fn)),Oe(this,ft,br).call(this,B(this,Hn));pt=null;for(const a of B(this,Fn))or(a);oe(this,Fn,[])}capture(e,n){B(this,On).has(e)||B(this,On).set(e,n),this.current.set(e,e.v),pt?.set(e,e.v)}activate(){Ce=this}deactivate(){Ce=null,pt=null}flush(){if(At.length>0){if(this.activate(),po(),Ce!==null&&Ce!==this)return}else B(this,dn)===0&&Oe(this,ft,aa).call(this);this.deactivate();for(const e of ta)if(ta.delete(e),e(),Ce!==null)break}increment(){oe(this,dn,B(this,dn)+1)}decrement(){oe(this,dn,B(this,dn)-1);for(const e of B(this,lr))Ze(e,st),yn(e);for(const e of B(this,cr))Ze(e,en),yn(e);this.flush()}add_callback(e){B(this,Rn).add(e)}settled(){return(B(this,ir)??oe(this,ir,ao())).promise}static ensure(){if(Ce===null){const e=Ce=new xr;pr.add(Ce),Bn||xr.enqueue(()=>{Ce===e&&e.flush()})}return Ce}static enqueue(e){$t(e)}apply(){}};On=new WeakMap,Rn=new WeakMap,dn=new WeakMap,ir=new WeakMap,Fn=new WeakMap,zn=new WeakMap,fn=new WeakMap,Hn=new WeakMap,lr=new WeakMap,cr=new WeakMap,ft=new WeakSet,ra=function(e){e.f^=Ye;for(var n=e.first;n!==null;){var r=n.f,o=(r&(zt|Sn))!==0,a=o&&(r&Ye)!==0,i=a||(r&mt)!==0||this.skipped_effects.has(n);if(!i&&n.fn!==null){o?n.f^=Ye:(r&pa)!==0?B(this,fn).push(n):(r&Ye)===0&&((r&Nr)!==0&&n.b?.is_pending()?B(this,Fn).push(n):Fr(n)&&((n.f&bn)!==0&&B(this,Hn).push(n),or(n)));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}},br=function(e){for(const n of e)((n.f&st)!==0?B(this,lr):B(this,cr)).push(n),Ze(n,Ye);e.length=0},aa=function(){var e;for(const n of B(this,Rn))n();if(B(this,Rn).clear(),pr.size>1){B(this,On).clear();let n=!0;for(const r of pr){if(r===this){n=!1;continue}const o=[];for(const[i,l]of this.current){if(r.current.has(i))if(n&&l!==r.current.get(i))r.current.set(i,l);else continue;o.push(i)}if(o.length===0)continue;const a=[...r.current.keys()].filter(i=>!this.current.has(i));if(a.length>0){for(const i of o)_o(i,a);if(At.length>0){Ce=r,r.apply();for(const i of At)Oe(e=r,ft,ra).call(e,i);At=[],r.deactivate()}}}Ce=null}pr.delete(this)};let Bt=xr;function go(t){var e=Bn;Bn=!0;try{for(var n;;){if(pi(),At.length===0&&(Ce?.flush(),At.length===0))return Mr=null,n;po()}}finally{Bn=e}}function po(){var t=In;na=!0;try{var e=0;for(Ha(!0);At.length>0;){var n=Bt.ensure();if(e++>1e3){var r,o;mi()}n.process(At),Zt.clear()}}finally{na=!1,Ha(t),Mr=null}}function mi(){try{Xs()}catch(t){Un(t,Mr)}}let ln=null;function Ra(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(kn|mt))===0&&Fr(r)&&(ln=[],or(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?To(r):r.fn=null),ln?.length>0)){Zt.clear();for(const o of ln)or(o);ln=[]}}ln=null}}function _o(t,e){if(t.reactions!==null)for(const n of t.reactions){const r=n.f;(r&Qe)!==0?_o(n,e):(r&(Nr|bn))!==0&&mo(n,e)&&(Ze(n,st),yn(n))}}function mo(t,e){if(t.deps!==null){for(const n of t.deps)if(e.includes(n)||(n.f&Qe)!==0&&mo(n,e))return!0}return!1}function yn(t){for(var e=Mr=t;e.parent!==null;){e=e.parent;var n=e.f;if(na&&e===de&&(n&bn)!==0)return;if((n&(Sn|zt))!==0){if((n&Ye)===0)return;e.f^=Ye}}At.push(e)}function wi(t){let e=0,n=Rt(0),r;return()=>{Ii()&&(s(n),Rr(()=>(e===0&&(r=tn(()=>t(()=>nr(n)))),e+=1,()=>{$t(()=>{e-=1,e===0&&(r?.(),r=void 0,nr(n))})})))}}var yi=Wn|Yn|_a;function bi(t,e,n){new Si(t,e,n)}var gt,ct,fa,Pt,vn,xt,ut,tt,Dt,Yt,hn,Kt,gn,Gt,Dr,Ar,Je,ki,Ci,Sr,kr,oa;class Si{constructor(e,n,r){_e(this,Je);ht(this,"parent");_e(this,gt,!1);_e(this,ct);_e(this,fa,null);_e(this,Pt);_e(this,vn);_e(this,xt);_e(this,ut,null);_e(this,tt,null);_e(this,Dt,null);_e(this,Yt,null);_e(this,hn,0);_e(this,Kt,0);_e(this,gn,!1);_e(this,Gt,null);_e(this,Dr,()=>{B(this,Gt)&&Mt(B(this,Gt),B(this,hn))});_e(this,Ar,wi(()=>(oe(this,Gt,Rt(B(this,hn))),()=>{oe(this,Gt,null)})));oe(this,ct,e),oe(this,Pt,n),oe(this,vn,r),this.parent=de.b,oe(this,gt,!!B(this,Pt).pending),oe(this,xt,Xn(()=>{de.b=this;{try{oe(this,ut,We(()=>r(B(this,ct))))}catch(o){this.error(o)}B(this,Kt)>0?Oe(this,Je,kr).call(this):oe(this,gt,!1)}},yi))}is_pending(){return B(this,gt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!B(this,Pt).pending}update_pending_count(e){Oe(this,Je,oa).call(this,e),oe(this,hn,B(this,hn)+e),ta.add(B(this,Dr))}get_effect_pending(){return B(this,Ar).call(this),s(B(this,Gt))}error(e){var n=B(this,Pt).onerror;let r=B(this,Pt).failed;if(B(this,gn)||!n&&!r)throw e;B(this,ut)&&(ot(B(this,ut)),oe(this,ut,null)),B(this,tt)&&(ot(B(this,tt)),oe(this,tt,null)),B(this,Dt)&&(ot(B(this,Dt)),oe(this,Dt,null));var o=!1,a=!1;const i=()=>{if(o){return}o=!0,a&&ei(),Bt.ensure(),oe(this,hn,0),B(this,Dt)!==null&&Tt(B(this,Dt),()=>{oe(this,Dt,null)}),oe(this,gt,this.has_pending_snippet()),oe(this,ut,Oe(this,Je,Sr).call(this,()=>(oe(this,gn,!1),We(()=>B(this,vn).call(this,B(this,ct)))))),B(this,Kt)>0?Oe(this,Je,kr).call(this):oe(this,gt,!1)};var l=ce;try{Ke(null),a=!0,n?.(e,i),a=!1}catch(c){Un(c,B(this,xt)&&B(this,xt).parent)}finally{Ke(l)}r&&$t(()=>{oe(this,Dt,Oe(this,Je,Sr).call(this,()=>{oe(this,gn,!0);try{return We(()=>{r(B(this,ct),()=>e,()=>i)})}catch(c){return Un(c,B(this,xt).parent),null}finally{oe(this,gn,!1)}}))})}}gt=new WeakMap,ct=new WeakMap,fa=new WeakMap,Pt=new WeakMap,vn=new WeakMap,xt=new WeakMap,ut=new WeakMap,tt=new WeakMap,Dt=new WeakMap,Yt=new WeakMap,hn=new WeakMap,Kt=new WeakMap,gn=new WeakMap,Gt=new WeakMap,Dr=new WeakMap,Ar=new WeakMap,Je=new WeakSet,ki=function(){try{oe(this,ut,We(()=>B(this,vn).call(this,B(this,ct))))}catch(e){this.error(e)}oe(this,gt,!1)},Ci=function(){const e=B(this,Pt).pending;e&&(oe(this,tt,We(()=>e(B(this,ct)))),Bt.enqueue(()=>{oe(this,ut,Oe(this,Je,Sr).call(this,()=>(Bt.ensure(),We(()=>B(this,vn).call(this,B(this,ct)))))),B(this,Kt)>0?Oe(this,Je,kr).call(this):(Tt(B(this,tt),()=>{oe(this,tt,null)}),oe(this,gt,!1))}))},Sr=function(e){var n=de,r=ce,o=Se;vt(B(this,xt)),Ke(B(this,xt)),Qt(B(this,xt).ctx);try{return e()}catch(a){return vo(a),null}finally{vt(n),Ke(r),Qt(o)}},kr=function(){const e=B(this,Pt).pending;B(this,ut)!==null&&(oe(this,Yt,document.createDocumentFragment()),Ei(B(this,ut),B(this,Yt))),B(this,tt)===null&&oe(this,tt,We(()=>e(B(this,ct))))},oa=function(e){var n;if(!this.has_pending_snippet()){this.parent&&Oe(n=this.parent,Je,oa).call(n,e);return}oe(this,Kt,B(this,Kt)+e),B(this,Kt)===0&&(oe(this,gt,!1),B(this,tt)&&Tt(B(this,tt),()=>{oe(this,tt,null)}),B(this,Yt)&&(B(this,ct).before(B(this,Yt)),oe(this,Yt,null)),$t(()=>{Bt.ensure().flush()}))};function Ei(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var o=n===r?null:dr(n);e.append(n),n=o}}function Pi(t,e,n){const r=Gn()?ur:Ir;if(e.length===0){n(t.map(r));return}var o=Ce,a=de,i=xi();Promise.all(e.map(l=>Di(l))).then(l=>{i();try{n([...t.map(r),...l])}catch(c){(a.f&kn)===0&&Un(c,a)}o?.deactivate(),sa()}).catch(l=>{Un(l,a)})}function xi(){var t=de,e=ce,n=Se,r=Ce;return function(){vt(t),Ke(e),Qt(n),r?.activate()}}function sa(){vt(null),Ke(null),Qt(null)}function ur(t){var e=Qe|st,n=ce!==null&&(ce.f&Qe)!==0?ce:null;return de===null||n!==null&&(n.f&dt)!==0?e|=dt:de.f|=Yn,{ctx:Se,deps:null,effects:null,equals:lo,f:e,fn:t,reactions:null,rv:0,v:Le,wv:0,parent:n??de,ac:null}}function Di(t,e){let n=de;n===null&&Ws();var r=n.b,o=void 0,a=Rt(Le),i=!ce,l=new Map;return zi(()=>{var c=ao();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(sa)}catch(h){c.reject(h),sa()}var u=Ce,d=r.is_pending();i&&(r.update_pending_count(1),d||(u.increment(),l.get(u)?.reject(Nn),l.delete(u),l.set(u,c)));const v=(h,g=void 0)=>{if(d||u.activate(),g)g!==Nn&&(a.f|=pn,Mt(a,g));else{(a.f&pn)!==0&&(a.f^=pn),Mt(a,h);for(const[f,p]of l){if(l.delete(f),f===u)break;p.reject(Nn)}}i&&(r.update_pending_count(-1),d||u.decrement())};c.promise.then(v,h=>v(null,h||"unknown"))}),Po(()=>{for(const c of l.values())c.reject(Nn)}),new Promise(c=>{function u(d){function v(){d===o?c(a):u(o)}d.then(v,v)}u(o)})}function R(t){const e=ur(t);return Bo(e),e}function Ir(t){const e=ur(t);return e.equals=co,e}function wo(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ot(e[n])}}function Ai(t){for(var e=t.parent;e!==null;){if((e.f&Qe)===0)return e;e=e.parent}return null}function wa(t){var e,n=de;vt(Ai(t));try{wo(t),e=Ro(t)}finally{vt(n)}return e}function yo(t){var e=wa(t);if(t.equals(e)||(t.v=e,t.wv=Io()),!En)if(pt!==null)pt.set(t,t.v);else{var n=(Xt||(t.f&dt)!==0)&&t.deps!==null?en:Ye;Ze(t,n)}}const Zt=new Map;function Rt(t,e){var n={f:0,v:t,reactions:null,equals:lo,rv:0,wv:0};return n}function z(t,e){const n=Rt(t);return Bo(n),n}function ia(t,e=!1,n=!0){var o;const r=Rt(t);return e||(r.equals=co),Kn&&n&&Se!==null&&Se.l!==null&&((o=Se.l).s??(o.s=[])).push(r),r}function y(t,e,n=!1){ce!==null&&(!_t||(ce.f&Oa)!==0)&&Gn()&&(ce.f&(Qe|bn|Nr|Oa))!==0&&!It?.includes(t)&&$s();let r=n?Fe(e):e;return Mt(t,r)}function Mt(t,e){if(!t.equals(e)){var n=t.v;En?Zt.set(t,e):Zt.set(t,n),t.v=e;var r=Bt.ensure();r.capture(t,n),(t.f&Qe)!==0&&((t.f&st)!==0&&wa(t),Ze(t,(t.f&dt)===0?Ye:en)),t.wv=Io(),bo(t,st),Gn()&&de!==null&&(de.f&Ye)!==0&&(de.f&(zt|Sn))===0&&(lt===null?ji([t]):lt.push(t))}return e}function nr(t){y(t,t.v+1)}function bo(t,e){var n=t.reactions;if(n!==null)for(var r=Gn(),o=n.length,a=0;a<o;a++){var i=n[a],l=i.f;if(!(!r&&i===de)){var c=(l&st)===0;c&&Ze(i,e),(l&Qe)!==0?bo(i,en):c&&((l&bn)!==0&&ln!==null&&ln.push(i),yn(i))}}}function Fe(t){if(typeof t!="object"||t===null||_n in t)return t;const e=ga(t);if(e!==Rs&&e!==Fs)return t;var n=new Map,r=va(t),o=z(0),a=mn,i=l=>{if(mn===a)return l();var c=ce,u=mn;Ke(null),ja(a);var d=l();return Ke(c),ja(u),d};return r&&n.set("length",z(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Js();var d=n.get(c);return d===void 0?d=i(()=>{var v=z(u.value);return n.set(c,v),v}):y(d,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const d=i(()=>z(Le));n.set(c,d),nr(o)}}else y(u,Le),nr(o);return!0},get(l,c,u){if(c===_n)return t;var d=n.get(c),v=c in l;if(d===void 0&&(!v||Ln(l,c)?.writable)&&(d=i(()=>{var g=Fe(v?l[c]:Le),f=z(g);return f}),n.set(c,d)),d!==void 0){var h=s(d);return h===Le?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=n.get(c);d&&(u.value=s(d))}else if(u===void 0){var v=n.get(c),h=v?.v;if(v!==void 0&&h!==Le)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){if(c===_n)return!0;var u=n.get(c),d=u!==void 0&&u.v!==Le||Reflect.has(l,c);if(u!==void 0||de!==null&&(!d||Ln(l,c)?.writable)){u===void 0&&(u=i(()=>{var h=d?Fe(l[c]):Le,g=z(h);return g}),n.set(c,u));var v=s(u);if(v===Le)return!1}return d},set(l,c,u,d){var v=n.get(c),h=c in l;if(r&&c==="length")for(var g=u;g<v.v;g+=1){var f=n.get(g+"");f!==void 0?y(f,Le):g in l&&(f=i(()=>z(Le)),n.set(g+"",f))}if(v===void 0)(!h||Ln(l,c)?.writable)&&(v=i(()=>z(void 0)),y(v,Fe(u)),n.set(c,v));else{h=v.v!==Le;var p=i(()=>Fe(u));y(v,p)}var w=Reflect.getOwnPropertyDescriptor(l,c);if(w?.set&&w.set.call(d,u),!h){if(r&&typeof c=="string"){var S=n.get("length"),k=Number(c);Number.isInteger(k)&&k>=S.v&&y(S,k+1)}nr(o)}return!0},ownKeys(l){s(o);var c=Reflect.ownKeys(l).filter(v=>{var h=n.get(v);return h===void 0||h.v!==Le});for(var[u,d]of n)d.v!==Le&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Qs()}})}var Fa,So,ko,Co;function Ti(){if(Fa===void 0){Fa=window,So=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;ko=Ln(e,"firstChild").get,Co=Ln(e,"nextSibling").get,Ia(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ia(n)&&(n.__t=void 0)}}function Cn(t=""){return document.createTextNode(t)}function jn(t){return ko.call(t)}function dr(t){return Co.call(t)}function P(t,e){return jn(t)}function L(t,e=!1){{var n=jn(t);return n instanceof Comment&&n.data===""?dr(n):n}}function F(t,e=1,n=!1){let r=t;for(;e--;)r=dr(r);return r}function Ni(t){t.textContent=""}function ya(){return!1}let za=!1;function Li(){za||(za=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Or(t){var e=ce,n=de;Ke(null),vt(null);try{return t()}finally{Ke(e),vt(n)}}function Bi(t,e,n,r=n){t.addEventListener(e,()=>Or(n));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),Li()}function Eo(t){de===null&&ce===null&&Gs(),ce!==null&&(ce.f&dt)!==0&&de===null&&Ks(),En&&Ys()}function Mi(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Lt(t,e,n,r=!0){var o=de;o!==null&&(o.f&mt)!==0&&(t|=mt);var a={ctx:Se,deps:null,nodes_start:null,nodes_end:null,f:t|st,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{or(a),a.f|=ma}catch(c){throw ot(a),c}else e!==null&&yn(a);if(r){var i=a;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Yn)===0&&(i=i.first),i!==null&&(i.parent=o,o!==null&&Mi(i,o),ce!==null&&(ce.f&Qe)!==0&&(t&Sn)===0)){var l=ce;(l.effects??(l.effects=[])).push(i)}}return a}function Ii(){return ce!==null&&!_t}function Po(t){const e=Lt(Tr,null,!1);return Ze(e,Ye),e.teardown=t,e}function Te(t){Eo();var e=de.f,n=!ce&&(e&zt)!==0&&(e&ma)===0;if(n){var r=Se;(r.e??(r.e=[])).push(t)}else return xo(t)}function xo(t){return Lt(pa|oo,t,!1)}function Oi(t){return Eo(),Lt(Tr|oo,t,!0)}function Ri(t){Bt.ensure();const e=Lt(Sn|Yn,t,!0);return(n={})=>new Promise(r=>{n.outro?Tt(e,()=>{ot(e),r(void 0)}):(ot(e),r(void 0))})}function Fi(t){return Lt(pa,t,!1)}function zi(t){return Lt(Nr|Yn,t,!0)}function Rr(t,e=0){return Lt(Tr|e,t,!0)}function ue(t,e=[],n=[]){Pi(e,n,r=>{Lt(Tr,()=>t(...r.map(s)),!0)})}function Xn(t,e=0){var n=Lt(bn|e,t,!0);return n}function We(t,e=!0){return Lt(zt|Yn,t,!0,e)}function Do(t){var e=t.teardown;if(e!==null){const n=En,r=ce;Ua(!0),Ke(null);try{e.call(null)}finally{Ua(n),Ke(r)}}}function Ao(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const o=n.ac;o!==null&&Or(()=>{o.abort(Nn)});var r=n.next;(n.f&Sn)!==0?n.parent=null:ot(n,e),n=r}}function Hi(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&zt)===0&&ot(e),e=n}}function ot(t,e=!0){var n=!1;(e||(t.f&js)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Ui(t.nodes_start,t.nodes_end),n=!0),Ao(t,e&&!n),Pr(t,0),Ze(t,kn);var r=t.transitions;if(r!==null)for(const a of r)a.stop();Do(t);var o=t.parent;o!==null&&o.first!==null&&To(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Ui(t,e){for(;t!==null;){var n=t===e?null:dr(t);t.remove(),t=n}}function To(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Tt(t,e){var n=[];ba(t,n,!0),No(n,()=>{ot(t),e&&e()})}function No(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var o of t)o.out(r)}else e()}function ba(t,e,n){if((t.f&mt)===0){if(t.f^=mt,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var o=r.next,a=(r.f&Wn)!==0||(r.f&zt)!==0;ba(r,e,a?n:!1),r=o}}}function Mn(t){Lo(t,!0)}function Lo(t,e){if((t.f&mt)!==0){t.f^=mt,(t.f&Ye)===0&&(Ze(t,st),yn(t));for(var n=t.first;n!==null;){var r=n.next,o=(n.f&Wn)!==0||(n.f&zt)!==0;Lo(n,o?e:!1),n=r}if(t.transitions!==null)for(const a of t.transitions)(a.is_global||e)&&a.in()}}let In=!1;function Ha(t){In=t}let En=!1;function Ua(t){En=t}let ce=null,_t=!1;function Ke(t){ce=t}let de=null;function vt(t){de=t}let It=null;function Bo(t){ce!==null&&(It===null?It=[t]:It.push(t))}let Xe=null,at=0,lt=null;function ji(t){lt=t}let Mo=1,ar=0,mn=ar;function ja(t){mn=t}let Xt=!1;function Io(){return++Mo}function Fr(t){var e=t.f;if((e&st)!==0)return!0;if((e&en)!==0){var n=t.deps,r=(e&dt)!==0;if(n!==null){var o,a,i=(e&Er)!==0,l=r&&de!==null&&!Xt,c=n.length;if((i||l)&&(de===null||(de.f&kn)===0)){var u=t,d=u.parent;for(o=0;o<c;o++)a=n[o],(i||!a?.reactions?.includes(u))&&(a.reactions??(a.reactions=[])).push(u);i&&(u.f^=Er),l&&d!==null&&(d.f&dt)===0&&(u.f^=dt)}for(o=0;o<c;o++)if(a=n[o],Fr(a)&&yo(a),a.wv>t.wv)return!0}(!r||de!==null&&!Xt)&&Ze(t,Ye)}return!1}function Oo(t,e,n=!0){var r=t.reactions;if(r!==null&&!It?.includes(t))for(var o=0;o<r.length;o++){var a=r[o];(a.f&Qe)!==0?Oo(a,e,!1):e===a&&(n?Ze(a,st):(a.f&Ye)!==0&&Ze(a,en),yn(a))}}function Ro(t){var p;var e=Xe,n=at,r=lt,o=ce,a=Xt,i=It,l=Se,c=_t,u=mn,d=t.f;Xe=null,at=0,lt=null,Xt=(d&dt)!==0&&(_t||!In||ce===null),ce=(d&(zt|Sn))===0?t:null,It=null,Qt(t.ctx),_t=!1,mn=++ar,t.ac!==null&&(Or(()=>{t.ac.abort(Nn)}),t.ac=null);try{t.f|=ea;var v=t.fn,h=v(),g=t.deps;if(Xe!==null){var f;if(Pr(t,at),g!==null&&at>0)for(g.length=at+Xe.length,f=0;f<Xe.length;f++)g[at+f]=Xe[f];else t.deps=g=Xe;if(!Xt||(d&Qe)!==0&&t.reactions!==null)for(f=at;f<g.length;f++)((p=g[f]).reactions??(p.reactions=[])).push(t)}else g!==null&&at<g.length&&(Pr(t,at),g.length=at);if(Gn()&&lt!==null&&!_t&&g!==null&&(t.f&(Qe|en|st))===0)for(f=0;f<lt.length;f++)Oo(lt[f],t);return o!==null&&o!==t&&(ar++,lt!==null&&(r===null?r=lt:r.push(...lt))),(t.f&pn)!==0&&(t.f^=pn),h}catch(w){return vo(w)}finally{t.f^=ea,Xe=e,at=n,lt=r,ce=o,Xt=a,It=i,Qt(l),_t=c,mn=u}}function Vi(t,e){let n=e.reactions;if(n!==null){var r=Os.call(n,t);if(r!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(e.f&Qe)!==0&&(Xe===null||!Xe.includes(e))&&(Ze(e,en),(e.f&(dt|Er))===0&&(e.f^=Er),wo(e),Pr(e,0))}function Pr(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Vi(t,n[r])}function or(t){var e=t.f;if((e&kn)===0){Ze(t,Ye);var n=de,r=In;de=t,In=!0;try{(e&bn)!==0?Hi(t):Ao(t),Do(t);var o=Ro(t);t.teardown=typeof o=="function"?o:null,t.wv=Mo;var a;no&&vi&&(t.f&st)!==0&&t.deps}finally{In=r,de=n}}}async function Fo(){await Promise.resolve(),go()}function s(t){var e=t.f,n=(e&Qe)!==0;if(ce!==null&&!_t){var r=de!==null&&(de.f&kn)!==0;if(!r&&!It?.includes(t)){var o=ce.deps;if((ce.f&ea)!==0)t.rv<ar&&(t.rv=ar,Xe===null&&o!==null&&o[at]===t?at++:Xe===null?Xe=[t]:(!Xt||!Xe.includes(t))&&Xe.push(t));else{(ce.deps??(ce.deps=[])).push(t);var a=t.reactions;a===null?t.reactions=[ce]:a.includes(ce)||a.push(ce)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&dt)===0&&(i.f^=dt)}if(En){if(Zt.has(t))return Zt.get(t);if(n){i=t;var c=i.v;return((i.f&Ye)===0&&i.reactions!==null||zo(i))&&(c=wa(i)),Zt.set(i,c),c}}else if(n){if(i=t,pt?.has(i))return pt.get(i);Fr(i)&&yo(i)}if(pt?.has(t))return pt.get(t);if((t.f&pn)!==0)throw t.v;return t.v}function zo(t){if(t.v===Le)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Zt.has(e)||(e.f&Qe)!==0&&zo(e))return!0;return!1}function tn(t){var e=_t;try{return _t=!0,t()}finally{_t=e}}const qi=-7169;function Ze(t,e){t.f=t.f&qi|e}function Wi(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(_n in t)la(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&_n in n&&la(n)}}}function la(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{la(t[r],e)}catch{}const n=ga(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=ro(n);for(let o in r){const a=r[o].get;if(a)try{a.call(t)}catch{}}}}}const Yi=["touchstart","touchmove"];function Ki(t){return Yi.includes(t)}const Ho=new Set,ca=new Set;function Gi(t,e,n,r={}){function o(a){if(r.capture||Qn.call(e,a),!a.cancelBubble)return Or(()=>n?.call(this,a))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?$t(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function Sa(t,e,n,r,o){var a={capture:r,passive:o},i=Gi(t,e,n,a);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Po(()=>{e.removeEventListener(t,i,a)})}function it(t){for(var e=0;e<t.length;e++)Ho.add(t[e]);for(var n of ca)n(t)}let Va=null;function Qn(t){var e=this,n=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],a=o[0]||t.target;Va=t;var i=0,l=Va===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(a=o[i]||t.target,a!==e){Qr(t,"currentTarget",{configurable:!0,get(){return a||n}});var d=ce,v=de;Ke(null),vt(null);try{for(var h,g=[];a!==null;){var f=a.assignedSlot||a.parentNode||a.host||null;try{var p=a["__"+r];if(p!=null&&(!a.disabled||t.target===a))if(va(p)){var[w,...S]=p;w.apply(a,[t,...S])}else p.call(a,t)}catch(k){h?g.push(k):h=k}if(t.cancelBubble||f===e||f===null)break;a=f}if(h){for(let k of g)queueMicrotask(()=>{throw k});throw h}}finally{t.__root=e,delete t.currentTarget,Ke(d),vt(v)}}}function Uo(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function sr(t,e){var n=de;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function H(t,e){var n=(e&li)!==0,r=(e&ci)!==0,o,a=!t.startsWith("<!>");return()=>{o===void 0&&(o=Uo(a?t:"<!>"+t),n||(o=jn(o)));var i=r||So?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=jn(i),c=i.lastChild;sr(l,c)}else sr(i,i);return i}}function Xi(t,e,n="svg"){var r=!t.startsWith("<!>"),o=`<${n}>${r?t:"<!>"+t}</${n}>`,a;return()=>{if(!a){var i=Uo(o),l=jn(i);a=jn(l)}var c=a.cloneNode(!0);return sr(c,c),c}}function Zi(t,e){return Xi(t,e,"svg")}function De(t=""){{var e=Cn(t+"");return sr(e,e),e}}function U(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Cn();return t.append(e,n),sr(e,n),t}function _(t,e){t!==null&&t.before(e)}function Dd(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function Jt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Ji(t,e){return Qi(t,e)}const Tn=new Map;function Qi(t,{target:e,anchor:n,props:r={},events:o,context:a,intro:i=!0}){Ti();var l=new Set,c=v=>{for(var h=0;h<v.length;h++){var g=v[h];if(!l.has(g)){l.add(g);var f=Ki(g);e.addEventListener(g,Qn,{passive:f});var p=Tn.get(g);p===void 0?(document.addEventListener(g,Qn,{passive:f}),Tn.set(g,1)):Tn.set(g,p+1)}}};c(ha(Ho)),ca.add(c);var u=void 0,d=Ri(()=>{var v=n??e.appendChild(Cn());return bi(v,{pending:()=>{}},h=>{if(a){Q({});var g=Se;g.c=a}o&&(r.$$events=o),u=t(h,r)||{},a&&$()}),()=>{for(var h of l){e.removeEventListener(h,Qn);var g=Tn.get(h);--g===0?(document.removeEventListener(h,Qn),Tn.delete(h)):Tn.set(h,g)}ca.delete(c),v!==n&&v.parentNode?.removeChild(v)}});return $i.set(u,d),u}let $i=new WeakMap;const Yr=0,_r=1,Kr=2;function jo(t,e,n,r,o){var a=t,i=Gn(),l=Se,c=Le,u,d,v,h=i?Rt(void 0):ia(void 0,!1,!1),g=i?Rt(void 0):ia(void 0,!1,!1),f=!1;function p(S,k){f=!0,k&&(vt(w),Ke(w),Qt(l));try{S===Yr&&n&&(u?Mn(u):u=We(()=>n(a))),S===_r&&r&&(d?Mn(d):d=We(()=>r(a,h))),S===Kr&&o&&(v?Mn(v):v=We(()=>o(a,g))),S!==Yr&&u&&Tt(u,()=>u=null),S!==_r&&d&&Tt(d,()=>d=null),S!==Kr&&v&&Tt(v,()=>v=null)}finally{k&&(Qt(null),Ke(null),vt(null),Bn||go())}}var w=Xn(()=>{if(c!==(c=e())){if(zs(c)){var S=c;f=!1,S.then(k=>{S===c&&(Mt(h,k),p(_r,!0))},k=>{if(S===c&&(Mt(g,k),p(Kr,!0),!o))throw g.v}),$t(()=>{f||p(Yr,!0)})}else Mt(h,c),p(_r,!1);return()=>c=Le}})}function V(t,e,n=!1){var r=t,o=null,a=null,i=Le,l=n?Wn:0,c=!1;const u=(g,f=!0)=>{c=!0,h(f,g)};var d=null;function v(){d!==null&&(d.lastChild.remove(),r.before(d),d=null);var g=i?o:a,f=i?a:o;g&&Mn(g),f&&Tt(f,()=>{i?a=null:o=null})}const h=(g,f)=>{if(i!==(i=g)){var p=ya(),w=r;if(p&&(d=document.createDocumentFragment(),d.append(w=Cn())),i?o??(o=f&&We(()=>f(w))):a??(a=f&&We(()=>f(w))),p){var S=Ce,k=i?o:a,m=i?a:o;k&&S.skipped_effects.delete(k),m&&S.skipped_effects.add(m),S.add_callback(v)}else v()}};Xn(()=>{c=!1,e(u),c||h(null,null)},l)}function be(t,e){Rr(()=>{var n=e();for(var r in n){var o=n[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function el(t,e,n){for(var r=t.items,o=[],a=e.length,i=0;i<a;i++)ba(e[i].e,o,!0);var l=a>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;Ni(c),c.append(n),r.clear(),Et(t,e[0].prev,e[a-1].next)}No(o,()=>{for(var u=0;u<a;u++){var d=e[u];l||(r.delete(d.k),Et(t,d.prev,d.next)),ot(d.e,!l)}})}function zr(t,e,n,r,o,a=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&io)!==0;if(c){var u=t;i=u.appendChild(Cn())}var d=null,v=!1,h=new Map,g=Ir(()=>{var S=n();return va(S)?S:S==null?[]:ha(S)}),f,p;function w(){tl(p,f,l,h,i,o,e,r,n),a!==null&&(f.length===0?d?Mn(d):d=We(()=>a(i)):d!==null&&Tt(d,()=>{d=null}))}Xn(()=>{p??(p=de),f=s(g);var S=f.length;if(!(v&&S===0)){v=S===0;var k,m,x,N;if(ya()){var C=new Set,A=Ce;for(m=0;m<S;m+=1){x=f[m],N=r(x,m);var T=l.items.get(N)??h.get(N);T?(e&(Lr|Br))!==0&&Vo(T,x,m,e):(k=qo(null,l,null,null,x,N,m,o,e,n,!0),h.set(N,k)),C.add(N)}for(const[q,J]of l.items)C.has(q)||A.skipped_effects.add(J.e);A.add_callback(w)}else w();s(g)}})}function tl(t,e,n,r,o,a,i,l,c){var u=(i&ti)!==0,d=(i&(Lr|Br))!==0,v=e.length,h=n.items,g=n.first,f=g,p,w=null,S,k=[],m=[],x,N,C,A;if(u)for(A=0;A<v;A+=1)x=e[A],N=l(x,A),C=h.get(N),C!==void 0&&(C.a?.measure(),(S??(S=new Set)).add(C));for(A=0;A<v;A+=1){if(x=e[A],N=l(x,A),C=h.get(N),C===void 0){var T=r.get(N);if(T!==void 0){r.delete(N),h.set(N,T);var q=w?w.next:f;Et(n,w,T),Et(n,T,q),Gr(T,q,o),w=T}else{var J=f?f.e.nodes_start:o;w=qo(J,n,w,w===null?n.first:w.next,x,N,A,a,i,c)}h.set(N,w),k=[],m=[],f=w.next;continue}if(d&&Vo(C,x,A,i),(C.e.f&mt)!==0&&(Mn(C.e),u&&(C.a?.unfix(),(S??(S=new Set)).delete(C))),C!==f){if(p!==void 0&&p.has(C)){if(k.length<m.length){var ve=m[0],ie;w=ve.prev;var ne=k[0],W=k[k.length-1];for(ie=0;ie<k.length;ie+=1)Gr(k[ie],ve,o);for(ie=0;ie<m.length;ie+=1)p.delete(m[ie]);Et(n,ne.prev,W.next),Et(n,w,ne),Et(n,W,ve),f=ve,w=W,A-=1,k=[],m=[]}else p.delete(C),Gr(C,f,o),Et(n,C.prev,C.next),Et(n,C,w===null?n.first:w.next),Et(n,w,C),w=C;continue}for(k=[],m=[];f!==null&&f.k!==N;)(f.e.f&mt)===0&&(p??(p=new Set)).add(f),m.push(f),f=f.next;if(f===null)continue;C=f}k.push(C),w=C,f=C.next}if(f!==null||p!==void 0){for(var Z=p===void 0?[]:ha(p);f!==null;)(f.e.f&mt)===0&&Z.push(f),f=f.next;var re=Z.length;if(re>0){var te=(i&io)!==0&&v===0?o:null;if(u){for(A=0;A<re;A+=1)Z[A].a?.measure();for(A=0;A<re;A+=1)Z[A].a?.fix()}el(n,Z,te)}}u&&$t(()=>{if(S!==void 0)for(C of S)C.a?.apply()}),t.first=n.first&&n.first.e,t.last=w&&w.e;for(var G of r.values())ot(G.e);r.clear()}function Vo(t,e,n,r){(r&Lr)!==0&&Mt(t.v,e),(r&Br)!==0?Mt(t.i,n):t.i=n}function qo(t,e,n,r,o,a,i,l,c,u,d){var v=(c&Lr)!==0,h=(c&ni)===0,g=v?h?ia(o,!1,!1):Rt(o):o,f=(c&Br)===0?i:Rt(i),p={i:f,v:g,k:a,a:null,e:null,prev:n,next:r};try{if(t===null){var w=document.createDocumentFragment();w.append(t=Cn())}return p.e=We(()=>l(t,g,f,u),di),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?d||(e.first=p):(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function Gr(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,a=t.e.nodes_start;a!==null&&a!==r;){var i=dr(a);o.before(a),a=i}}function Et(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function he(t,e,...n){var r=t,o=ye,a;Xn(()=>{o!==(o=e())&&(a&&(ot(a),a=null),a=We(()=>o(r,...n)))},Wn)}function Wo(t,e,n){var r=t,o,a,i=null,l=null;function c(){a&&(Tt(a),a=null),i&&(i.lastChild.remove(),r.before(i),i=null),a=l,l=null}Xn(()=>{if(o!==(o=e())){var u=ya();if(o){var d=r;u&&(i=document.createDocumentFragment(),i.append(d=Cn()),a&&Ce.skipped_effects.add(a)),l=We(()=>n(d,o))}u?Ce.add_callback(c):c()}},Wn)}function Yo(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=Yo(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function nl(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=Yo(t))&&(r&&(r+=" "),r+=e);return r}function me(t){return typeof t=="object"?nl(t):t??""}const qa=[...` 	
\r\f \v\uFEFF`];function rl(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var a=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+a;(i===0||qa.includes(r[i-1]))&&(l===r.length||qa.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function al(t,e){return t==null?null:String(t)}function we(t,e,n,r,o,a){var i=t.__className;if(i!==n||i===void 0){var l=rl(n,r,a);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(a&&o!==a)for(var c in a){var u=!!a[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return a}function Vn(t,e,n,r){var o=t.__style;if(o!==e){var a=al(e);a==null?t.removeAttribute("style"):t.style.cssText=a,t.__style=e}return r}const ol=Symbol("is custom element"),sl=Symbol("is html");function Ad(t,e){var n=ka(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Td(t,e){var n=ka(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function xe(t,e,n,r){var o=ka(t);o[e]!==(o[e]=n)&&(e==="loading"&&(t[qs]=n),n==null?t.removeAttribute(e):typeof n!="string"&&il(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function ka(t){return t.__attributes??(t.__attributes={[ol]:t.nodeName.includes("-"),[sl]:t.namespaceURI===ui})}var Wa=new Map;function il(t){var e=t.getAttribute("is")||t.nodeName,n=Wa.get(e);if(n)return n;Wa.set(e,n=[]);for(var r,o=t,a=Element.prototype;a!==o;){r=ro(o);for(var i in r)r[i].set&&n.push(i);o=ga(o)}return n}function ll(t,e,n=e){var r=new WeakSet;Bi(t,"input",async o=>{var a=o?t.defaultValue:t.value;if(a=Xr(t)?Zr(a):a,n(a),Ce!==null&&r.add(Ce),await Fo(),a!==(a=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=a??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),tn(e)==null&&t.value&&(n(Xr(t)?Zr(t.value):t.value),Ce!==null&&r.add(Ce)),Rr(()=>{var o=e();if(t===document.activeElement){var a=yr??Ce;if(r.has(a))return}Xr(t)&&o===Zr(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Xr(t){var e=t.type;return e==="number"||e==="range"}function Zr(t){return t===""?null:+t}function Ya(t,e){return t===e||t?.[_n]===e}function Nt(t={},e,n,r){return Fi(()=>{var o,a;return Rr(()=>{o=a,a=[],tn(()=>{t!==n(...a)&&(e(t,...a),o&&Ya(n(...o),t)&&e(null,...o))})}),()=>{$t(()=>{a&&Ya(n(...a),t)&&e(null,...a)})}}),t}function Ca(t=!1){const e=Se,n=e.l.u;if(!n)return;let r=()=>Wi(e.s);if(t){let o=0,a={};const i=ur(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==a[u]&&(a[u]=c[u],l=!0);return l&&o++,o});r=()=>s(i)}n.b.length&&Oi(()=>{Ka(e,r),$r(n.b)}),Te(()=>{const o=tn(()=>n.m.map(Hs));return()=>{for(const a of o)typeof a=="function"&&a()}}),n.a.length&&Te(()=>{Ka(e,r),$r(n.a)})}function Ka(t,e){if(t.l.s)for(const n of t.l.s)s(n);e()}let mr=!1;function cl(t){var e=mr;try{return mr=!1,[t(),mr]}finally{mr=e}}function le(t,e,n,r){var o=!Kn||(n&ai)!==0,a=(n&si)!==0,i=(n&ii)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?tn(r):r),l),d;if(a){var v=_n in t||Vs in t;d=Ln(t,e)?.set??(v&&e in t?m=>t[e]=m:void 0)}var h,g=!1;a?[h,g]=cl(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=u(),d&&(o&&Zs(),d(h)));var f;if(o?f=()=>{var m=t[e];return m===void 0?u():(c=!0,m)}:f=()=>{var m=t[e];return m!==void 0&&(l=void 0),m===void 0?l:m},o&&(n&oi)===0)return f;if(d){var p=t.$$legacy;return(function(m,x){return arguments.length>0?((!o||!x||p||g)&&d(x?f():m),m):f()})}var w=!1,S=((n&ri)!==0?ur:Ir)(()=>(w=!1,f()));a&&s(S);var k=de;return(function(m,x){if(arguments.length>0){const N=x?s(S):o&&a?Fe(m):m;return y(S,N),w=!0,l!==void 0&&(l=N),m}return En&&w||(k.f&kn)!==0?S.v:s(S)})}function Ee(t){Se===null&&so(),Kn&&Se.l!==null?ul(Se).m.push(t):Te(()=>{const e=tn(t);if(typeof e=="function")return e})}function ul(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const dl="5";var to;typeof window<"u"&&((to=window.__svelte??(window.__svelte={})).v??(to.v=new Set)).add(dl);hi();const Ko={};function fl(t){Me(Ko,t)}function Go(){const t=Be(Ko);if(!t)throw new Error("No SearchContext found");return t}const Xo={};function vl(t){Me(Xo,t)}function wt(){const t=Be(Xo);if(!t)throw new Error("No AppHistoryContext found");return t}function hl(t,e){Q(e,!0);const{replace:n,getAppHistory:r}=wt(),o=R(r),a="search",i=Fe({value:new URLSearchParams(r().search).get(a)||""}),l=d=>{const v=new URLSearchParams(s(o).search),h=s(o).pathname;(v.get(a)||"")!==d&&(d===""?v.delete(a):v.set(a,d),n(`${h}${v.size>0?`?${v.toString()}`:""}`))};Te(()=>{const d=i.value;tn(()=>{l(d)})}),fl(i);var c=U(),u=L(c);he(u,()=>e.children??ye),_(t,c),$()}const Zo={};function gl(t){Me(Zo,t)}function Jo(){const t=Be(Zo);if(!t)throw new Error("No TagSearchContext found");return t}function pl(t,e){Q(e,!0);const n=Fe({value:""});gl(n);var r=U(),o=L(r);he(o,()=>e.children??ye),_(t,r),$()}const Qo={};function _l(t){Me(Qo,t)}function $o(){const t=Be(Qo);if(!t)throw new Error("No FeedOrderContext found");return t}function ml(t,e){Q(e,!0);const{navigate:n,getAppHistory:r}=wt(),o=R(r),a="feedOrder";let i=z(Fe(new URLSearchParams(r().search).get(a)||"newest"));_l({getFeedOrder:()=>s(i),setFeedOrder:v=>{y(i,v,!0);const h=new URLSearchParams(s(o).search);v==="newest"?h.delete(a):h.set(a,v),n(`${s(o).pathname}${h.size>0?`?${h.toString()}`:""}`)}});var u=U(),d=L(u);he(d,()=>e.children??ye),_(t,u),$()}const es={};function wl(t){Me(es,t)}function Ea(){const t=Be(es);if(!t)throw new Error("No SidebarContext found");return t}function yl(t,e){Q(e,!0);const n=(d,v)=>{if(!v)return d;if(v.type==="closed")return{type:"closed"};switch(d.type){case"opened":return v.type==="close"?{type:"closing"}:v.type==="swipe"?{type:"openSwiping"}:d;case"closed":return v.type==="open"?{type:"opening"}:v.type==="swipe"?{type:"closeSwiping"}:d;case"openSwiping":return v.type==="open"?{type:"opening"}:v.type==="close"?{type:"closing"}:d;case"closeSwiping":return v.type==="open"?{type:"opening"}:v.type==="close"?{type:"closing"}:d;case"opening":return v.type==="opened"?{type:"opened"}:d;default:return d}};let r=z(Fe(n({type:"closed"})));const o=d=>{y(r,n(s(r),d),!0)};wl({sidebarOpen:()=>{o({type:"open"})},sidebarClose:()=>{o({type:"close"})},handleComputeState:o,getSidebarState:()=>s(r)});var c=U(),u=L(c);he(u,()=>e.children??ye),_(t,c),$()}const ts={};function bl(t){Me(ts,t)}function ns(){const t=Be(ts);if(!t)throw new Error("No SelectedTagsContext found");return t}const rs=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function Sl(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const kl=(t,e)=>{if(t.size!==e.size)return!0;for(const n of t)if(!e.has(n))return!0;return!1};function Cl(t,e){Q(e,!0);const{getAppHistory:n,replace:r}=wt(),o=R(n),a=R(()=>n().search),i="selectedTags",l=()=>new Set(new URLSearchParams(n().search).get(i)?.split(",")||[]);let c=z(Fe(l()));const u=()=>{const p=l();if(kl(p,s(c))){const w=new URLSearchParams(s(o).search),S=s(o).pathname;s(c).size===0?w.delete(i):w.set(i,Array.from(s(c)).join(",")),r(`${S}${w.size>0?`?${w.toString()}`:""}`)}};Te(()=>{s(a),s(c),tn(()=>{u()})}),bl({getSelectedTags:()=>s(c),addTag:p=>{s(c).has(p)||y(c,new Set([...s(c),p]),!0)},removeTag:p=>{const w=new Set(s(c));w.delete(p),y(c,w,!0)}});var g=U(),f=L(g);he(f,()=>e.children??ye),_(t,g),$()}const as={};function El(t){Me(as,t)}function Pa(){const t=Be(as);if(!t)throw new Error("No LocalDBContext found");return t}const os={};function Pl(t){Me(os,t)}function xl(){const t=Be(os);if(!t)throw new Error("No SettingsContext found");return t}const ss={};function Dl(t){Me(ss,t)}function Hr(){const t=Be(ss);if(!t)throw new Error("No BroadcastContext found");return t}const Al="AppStorage",Tl=1,$n="account",Cr="settings",kt="notes",Ct="tags",Nl="syncLog",nn="success",rn="error",ze=(t,e,n)=>{t?.addEventListener(e,n)},Ga=(t,e)=>new Promise((n,r)=>{const a=t?.transaction(e,"readonly")?.objectStore(e).getAll();ze(a,nn,()=>{const i=a?.result||[];n(i)}),ze(a,rn,i=>{r(i)})}),ua=(t,e,n)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);ze(i,nn,()=>{const l=i?.result?.data;r(l)}),ze(i,rn,l=>{o(l)})}),rr=(t,e,n,r)=>new Promise((o,a)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:r});ze(c,nn,()=>{o()}),ze(c,rn,u=>{a(u)})}),Jr=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(a=>{const i=o?.put(a);return new Promise((l,c)=>{ze(i,nn,()=>{l()}),ze(i,rn,u=>{c(u)})})}))},Ll=(t,e,n)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);ze(l,nn,()=>{r()}),ze(l,rn,c=>{o(c)})}),wr=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(a=>{const i=o?.delete(a);return new Promise((l,c)=>{ze(i,nn,()=>{l()}),ze(i,rn,u=>{c(u)})})}))},cn=(t,e)=>new Promise((n,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();ze(i,nn,()=>{n()}),ze(i,rn,l=>{r(l)})});function Bl(t,e){Q(e,!0);let n=z(Fe({showFavicon:!1}));const{getDB:r}=Pa(),{createBroadcastChannel:o,tabId:a}=Hr(),i=o(),l=R(r),c=async()=>{const p=await ua(s(l),Cr,"default");p&&y(n,p,!0)},u=async()=>{c()},d=async p=>{const w=JSON.parse(p.data),S=w;if(w.tabId&&w.tabId===a){S.type==="exit"&&(y(n,{showFavicon:!1},!0),cn(s(l),Cr));return}S.type==="updateSettings"?c():S.type==="exit"&&y(n,{showFavicon:!1},!0)},v=()=>s(n).showFavicon,h=async p=>{s(n).showFavicon=p,await rr(s(l),Cr,"default",{showFavicon:p}),i.postMessage({type:"updateSettings"})};Ee(()=>(u(),i.addEventListener(d),()=>{i.removeEventListener(d)})),Pl({getFaviconEnabled:v,setFaviconShown:h});var g=U(),f=L(g);he(f,()=>e.children??ye),_(t,g),$()}const is={};function Ml(t){Me(is,t)}function xa(){const t=Be(is);if(!t)throw new Error("No AccountContext found");return t}function Il(t,e){Q(e,!0);let n=z(void 0);const{getDB:r}=Pa(),{createBroadcastChannel:o,tabId:a}=Hr(),i=R(r),l=o(),c=async()=>{const m=await ua(s(i),$n,"default");y(n,m,!0)},u=m=>rr(s(i),$n,"default",m),d=async m=>{const x=await ua(s(i),$n,"default");x!==void 0&&y(n,x,!0),m(x)},v=async m=>{const x=JSON.parse(m.data);if(x.tabId&&x.tabId===a)return;const N=x;N.type==="initLocalAccount"?y(n,null):N.type==="initCloudAccount"?c():N.type==="disconnectCloudAccount"?y(n,null):N.type==="exit"?y(n,void 0):N.type==="updateAccount"&&c()};Ee(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),Ml({init:d,getAccount:()=>s(n),initLocalAccount:async()=>{y(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async m=>{const x={encryptedClientKey:m.encryptedClientKey||"",subscriptionExpires:m.subscriptionExpires||-1,lastSync:-1};await u(x),y(n,x,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{y(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async m=>{if(!s(n))throw new Error("No account to update subscription for");const x={...s(n),subscriptionExpires:m};await u(x),l.postMessage({type:"updateAccount"})},exitApp:async()=>{y(n,void 0),l.postMessage({type:"exit"}),await cn(s(i),$n)}});var S=U(),k=L(S);he(k,()=>e.children??ye),_(t,S),$()}const ls={};function Ol(t){Me(ls,t)}function Ur(){const t=Be(ls);if(!t)throw new Error("No NotesContext found");return t}const Rl=()=>crypto.randomUUID(),Fl=t=>{const e=new Map;for(const n of t||[])for(const r of n?.data.tags||[])e.set(r,{name:r,count:(e.get(r)?.count||0)+1});return e};function zl(t,e){Q(e,!0);const{getDB:n}=Pa(),{createBroadcastChannel:r,tabId:o}=Hr(),a=R(n),i=r(),l=720*60*60*1e3;let c=z(0),u=z(!1),d=z(()=>new Map),v=z(()=>[]),h=z(()=>new Map);const g=()=>s(u),f=()=>s(c)>0,p=()=>{s(c)>0&&y(c,s(c)-1)},w=D=>{const I=s(v)(),b=s(h)(),E={...D};I.push(E),b.set(E.id,E),y(v,()=>I),y(h,()=>b)},S=D=>{const I=s(v)(),b=s(h)(),E=b.get(D.id);E&&(E.data=D.data),y(v,()=>I),y(h,()=>b)},k=D=>{const I=s(v)(),b=s(h)(),E=b.get(D);b.has(D)&&b.delete(D),E?.data?.type==="draft"&&b.delete("draft"),E&&(E.data=void 0),y(v,()=>I),y(h,()=>b)},m=()=>{y(v,()=>[]),y(d,()=>new Map),y(h,()=>new Map)},x=()=>s(v),N=D=>{const I=s(d)();for(const b of D){const E=I.get(b);E?E.count++:I.set(b,{name:b,count:1})}y(d,()=>I)},C=D=>{const I=s(d)();for(const b of D){const E=I.get(b);E&&(E.count--,E.count<=0&&I.delete(b))}y(d,()=>I)},A=async()=>{const[D,I]=await Promise.all([Ga(s(a),kt),Ga(s(a),Ct).then(ae=>ae.reduce((Ne,Ae)=>Ne.set(Ae.name,Ae),new Map))]),b=[],E=[],j=new Map;let se=0;for(const ae of D)ae.data.deletedAt&&Date.now()-ae.data.deletedAt>l?b.push(ae.id):(E.push(ae),j.set(ae.id,ae),ae.data.deletedAt&&(se+=1),ae.data.type==="draft"&&j.set("draft",ae));y(c,se,!0);const ee=Fl(E),ge=new Map;ee.entries().forEach(([ae,Ne])=>{const Ae=I.get(ae);ge.set(ae,{...Ae,...Ne})}),await wr(s(a),kt,b),await cn(s(a),Ct),await Jr(s(a),Ct,Array.from(ge.values()).map(ae=>({id:ae.name,data:{pinned:ae.pinned}}))),y(v,()=>E),y(h,()=>j),y(d,()=>ge),y(u,!0)},T=async()=>{const D=s(h)(),I=D.get("draft");if(I)return I;const b={id:Rl(),data:{type:"draft",url:"",name:"",text:"",tags:[],draft:{url:"",name:"",text:"",tags:[],createdAt:Date.now(),updatedAt:Date.now()},createdAt:Date.now(),updatedAt:Date.now()}};return await rr(s(a),kt,b.id,{...b.data}),D.set("draft",b),w(b),i.postMessage({type:"createNoteDraft",data:{note:b}}),b},q=async D=>{const b=s(h)().get(D);if(!b||!b.data)return;const E=s(d)(),j=b.data.tags;C(j),k(D),i.postMessage({type:"deleteNote",data:{id:D}}),p(),await Ll(s(a),kt,D),await wr(s(a),Ct,j.filter(se=>{const ee=E.get(se);return ee?ee.count<=1:!1}))},J=async(D,I)=>{const b={id:I.id,data:{...I.data}},E=s(d)(),j=I.data.tags.filter(ee=>!D.data.tags.includes(ee)),se=D.data.tags.filter(ee=>!I.data.tags.includes(ee));await rr(s(a),kt,b.id,{...b.data}),await Jr(s(a),Ct,j.filter(ee=>!E.has(ee)).map(ee=>({id:ee,data:{}}))),await wr(s(a),Ct,se.filter(ee=>{const ge=E.get(ee);return ge?ge.count<=1:!1})),S(b),C(se),N(j),i.postMessage({type:"updateNote",data:{note:b,tagsToAdd:j,tagsToDelete:se}})},ve=async D=>{const I=s(h)(),b=ne(D);if(!b||!b.data)return;const E=I.get("draft");E&&E.id===b.id&&I.delete("draft");const j={id:D,data:{type:"note",name:b.data.draft?.name??b.data.name,url:b.data.draft?.url??b.data.url,text:b.data.draft?.text??b.data.text,tags:b.data.draft?.tags??b.data.tags,updatedAt:Date.now(),createdAt:b.data.createdAt,pinnedAt:b.data.pinnedAt,deletedAt:b.data.deletedAt,draft:void 0}};return J(b,j)},ie=async()=>{m(),i.postMessage({type:"clearNotes"}),await cn(s(a),kt),await cn(s(a),Ct)},ne=D=>{const I=s(h)();return D?I.get(D):I.get("draft")},W=async(D,I)=>{const E=s(h)().get(D);if(!E||!E.data)return;const j={id:D,data:{...E.data,pinnedAt:I?Date.now():void 0}};return J(E,j)},Z=async D=>{const b=s(h)().get(D);if(!b||!b.data)return;const E={id:D,data:{...b.data,deletedAt:Date.now()}};y(c,s(c)+1),await J(b,E)},re=async D=>{const b=s(h)().get(D);if(!b||!b.data)return;const E={id:D,data:{...b.data,deletedAt:0}};p(),await J(b,E)},te=async(D,I)=>{const b=s(d)();b.set(D,{name:D,count:b.get(D)?.count||0,pinned:I}),await rr(s(a),Ct,D,{pinned:I}),i.postMessage({type:"pinTag",data:{tag:D,pinned:I}}),y(d,()=>b)},G=async D=>{const I=s(h)(),b={};D.forEach(E=>{const j=I.get(E.id);(!j||j&&j.data&&j.data.updatedAt<E.data.updatedAt)&&(b[E.id]=E)}),await Jr(s(a),kt,Object.values(b)),await A(),i.postMessage({type:"reloadNotes"})},K=async()=>{const D=[];s(v)().forEach(b=>{b&&b.data&&b.data.deletedAt&&D.push(b.id)}),y(c,0),await wr(s(a),kt,D),await A(),i.postMessage({type:"emptyBin"})},X=async(D,I)=>{if(D===""){const se=s(h)().get("draft");se?D=se.id:D=(await T()).id}const b=ne(D);if(!b||!b.data)return;const E={id:D,data:{...b.data,draft:{...I,tags:I.tags,createdAt:b.data.draft?.createdAt||Date.now(),updatedAt:Date.now()}}};return await J(b,E),b.id},M=async D=>{const I=s(h)(),b=ne(D);if(!b||!b.data||!b.data.draft)return;if(b.data.type==="draft"){D===I.get("draft")?.id&&I.delete("draft"),await q(D);return}const E={id:D,data:{...b.data,draft:void 0}};return J(b,E)},O=async D=>{const I=JSON.parse(D.data),b=I;if(I.tabId&&I.tabId===o){b.type==="exit"&&(m(),await cn(s(a),kt),await cn(s(a),Ct));return}if(b.type==="createNoteDraft"){const E=b.data.note;s(h)().set("draft",E),w(E)}else if(b.type==="updateNote"){const E=b.data,se=s(h)().get(E.note.id);if(!se||!se.data)return;se.data.deletedAt&&!E.note.data.deletedAt?p():!se.data.deletedAt&&E.note.data.deletedAt&&y(c,s(c)+1),S(E.note),C(E.tagsToAdd),N(E.tagsToDelete)}else if(b.type==="deleteNote"){const E=b.data.id,se=s(h)().get(E);if(!se)return;p(),k(E),C(se?.data?.tags||[])}else if(b.type==="pinTag"){const E=b.data.tag,j=b.data.pinned,se=s(d)(),ee=se.get(E);ee&&(ee.pinned=j,se.set(E,ee))}else b.type==="clearNotes"?m():b.type==="reloadNotes"||b.type==="emptyBin"?A():b.type==="exit"&&m()};Ee(()=>(A(),i.addEventListener(O),()=>{i.removeEventListener(O)})),Ol({isInitedNotes:g,putNoteDraft:X,deleteNoteDraft:M,deleteNote:q,pinNote:W,getGetNotes:x,importNotes:G,clearNotes:ie,getNoteById:ne,getGetMapTags:()=>s(d),pinTag:te,moveNoteToBin:Z,restoreNoteFromBin:re,checkNotesInBin:f,emptyBin:K,saveNoteDraft:ve,countNotesInBin:()=>s(c)});var fe=U(),pe=L(fe);he(pe,()=>e.children??ye),_(t,fe),$()}const cs={},Hl=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function Ul(t){Me(cs,t)}function Zn(){const t=Be(cs);if(!t)throw new Error("No AnimationSettingsContext found");return t}function jl(t,e){Q(e,!0);let n=Fe(Hl());Ul(n);var r=U(),o=L(r);he(o,()=>e.children??ye),_(t,r),$()}const us={};function Vl(t){Me(us,t)}function ds(){const t=Be(us);if(!t)throw new Error("No ScrollingContext found");return t}function ql(t,e){Q(e,!0);let n=z(!1);const r=()=>s(n),o=rs(()=>{y(n,!1)},100);Vl({isScrolling:r,enable:()=>{y(n,!0),o()}});var i=U(),l=L(i);he(l,()=>e.children??ye),_(t,i),$()}const fs={};function Wl(t){Me(fs,t)}function Jn(){const t=Be(fs);if(!t)throw new Error("No MobileSizeContext found");return t}function Yl(t,e){Q(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let r=z(Fe(n())),o=Zn();const a=rs(()=>{o.working=!0},16),i=()=>{o.working=!1,a(),requestAnimationFrame(()=>{y(r,n(),!0)})};Wl({checkMobileSize:()=>s(r)}),Ee(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=U(),u=L(c);he(u,()=>e.children??ye),_(t,c),$()}const vs={};function Kl(t){Me(vs,t)}function fr(){const t=Be(vs);if(!t)throw new Error("No DialogContext found");return t}function Gl(t,e){Q(e,!0);let n=z(0),r=z(!1),o=z(!1);Kl({checkExistedDialog:()=>s(n)>0,showDialog:()=>{y(n,s(n)+1)},hideDialog:()=>{y(n,s(n)-1)},blockDialog:f=>{y(r,f,!0),f||y(o,!1)},checkBlockedDialog:()=>s(r),unBlockBackDialog:f=>{y(o,f,!0)},checkUnBlockedBackDialog:()=>s(o)});var h=U(),g=L(h);he(g,()=>e.children??ye),_(t,h),$()}const hs={};function Xl(t){Me(hs,t)}function Da(){const t=Be(hs);if(!t)throw new Error("No ScrollContainerContext found");return t}function Zl(t,e){Q(e,!0);let n=z(null);Xl({setScrollContainer:l=>{y(n,l,!0)},getScrollContainer:()=>s(n)});var a=U(),i=L(a);he(i,()=>e.children??ye),_(t,a),$()}const gs={};function Jl(t){Me(gs,t)}function Aa(){const t=Be(gs);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Ql(t,e){Q(e,!0);let n=z(200);Jl({setDialogPageHeight:l=>{y(n,l,!0)},getDialogPageHeight:()=>s(n)});var a=U(),i=L(a);he(i,()=>e.children??ye),_(t,a),$()}const $l=[$n,Cr,kt,Ct,Nl];function ec(){return new Promise((t,e)=>{const n=indexedDB.open(Al,Tl);ze(n,"upgradeneeded",()=>{const r=n.result;for(const o of $l)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),ze(n,nn,()=>{const r=n.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),ze(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),ze(n,rn,()=>{e()})})}function tc(t,e){Q(e,!0);let n=z(null);Ee(()=>{ec().then(l=>{y(n,l,!0)})}),El({getDB:()=>s(n)});var o=U(),a=L(o);{var i=l=>{var c=U(),u=L(c);he(u,()=>e.children??ye),_(l,c)};V(a,l=>{s(n)&&l(i)})}_(t,o),$()}const ps={};function nc(t){Me(ps,t)}function Ft(){const t=Be(ps);if(!t)throw new Error("No StackPagesContext found");return t}function rc(t,e){Q(e,!0);const{getAppHistory:n,navigate:r}=wt(),o=()=>new URLSearchParams(n().search).get("stackPages")?.split(",")||[];let a=z(Fe(o()));const i=w=>{const S=o();if(!S.includes(w)){S.push(w);const k=new URLSearchParams(n().search);k.set("stackPages",S.join(",")),y(a,S,!0),r(`${n().pathname}?${k.toString()}`)}};nc({pushStackPages:i,hasStackPage:w=>o().includes(w),updateStackPages:()=>{y(a,o(),!0)},popStackPages:()=>{const w=s(a).slice(0,-1);y(a,w,!0)},getStackPages:()=>{const w=o();return w.length>=s(a).length?w.reduce((S,k)=>[...S,{page:k,shown:!0}],[]):s(a).reduce((S,k,m)=>[...S,{page:k,shown:w.length===0?!1:m!==s(a).length-1}],[])},clearStackPages:()=>{y(a,[],!0)},getPageUrl:(w,S)=>{if(S?.full)return`/${w}`;const k=o();k.includes(w)||k.push(w);const m=new URLSearchParams(n().search);return m.set("stackPages",k.join(",")),`${n().pathname}?${m}`},createHandlePage:(w,S)=>k=>{if(k.preventDefault(),S?.full){r(w);return}i(w)},getStackPagesFormUrl:o});var f=U(),p=L(f);he(p,()=>e.children??ye),_(t,f),$()}function ac(t,e){Q(e,!0);const n=g=>g.startsWith("/")?g:`/${g}`,r=Fe({historyStack:[],pathname:n(window.location.pathname),search:window.location.search,historyLength:0}),o=()=>{r.pathname=n(document.location.pathname),r.search=document.location.search,r.historyLength=Math.max(0,r.historyLength-=1)},a=g=>{const[f,p]=g.split("?");r.pathname=n(f),r.search=p?`?${p}`:"",r.historyLength+=1,r.historyStack.push(`${window.location.pathname}${window.location.search}`),window.history.replaceState(null,"",g)},i=g=>{const[f,p]=g.split("?");r.pathname=n(f),r.search=p?`?${p}`:"",window.history.replaceState(null,"",g)};vl({getAppHistory:()=>r,navigate:a,replace:i,addSearchParam:(g,f)=>{const p=new URLSearchParams(r.search);p.append(g,f),i(`${r.pathname}${p.size>0?`?${p.toString()}`:""}`)},deleteSearchParam:g=>{const f=new URLSearchParams(r.search);f.delete(g),r.historyStack=r.historyStack.map(p=>{const w=new URLSearchParams(p.split("?")[1]);return w.delete(g),`${p.split("?")[0]}${f.size>0?`?${w.toString()}`:""}`}),i(`${r.pathname}${f.size>0?`?${f.toString()}`:""}`)},back:g=>{const{fallback:f="/",to:p}=g||{},[w,S]=f.split("?");if(r.historyLength<=0){const k=window.location.pathname,m=window.location.search;if(!m.includes("stackPages"))window.history.replaceState(null,"",f),r.historyLength=0,r.pathname=n(w),r.search=S?`?${S}`:"";else{const x=new URLSearchParams(m),N=x.get("stackPages")?.split(",")||[],C=N.slice(0,p&&N.includes(p)?N.indexOf(p)+1:-1);C.length===0?x.delete("stackPages"):x.set("stackPages",C.join(","));const A=`${k}${x.toString()?`?${x.toString()}`:""}`;window.history.replaceState(null,"",A),r.search=x.toString()?`?${x.toString()}`:""}}else if(r.historyStack.length>0){const m=new URLSearchParams(r.search).get("stackPages")?.split(",")||[];p&&m.includes(p)&&(r.historyStack=r.historyStack.slice(0,-(m.length-(m.indexOf(p)+1))+1),r.historyLength=r.historyStack.length);const x=r.historyStack.pop();if(x){const[N,C]=x.split("?");window.history.replaceState(null,"",x),r.historyLength=Math.max(0,r.historyLength-=1),r.pathname=n(N),r.search=C?`?${C}`:""}}},closeDialogStack:()=>{const g=r.historyStack.findIndex(p=>p.includes("stackPages")),f=g===-1?r.historyStack.slice(0):r.historyStack.slice(0,g);if(f.length>0){const p=f.pop();if(p){const[w,S]=p.split("?");window.history.replaceState(null,"",p),r.historyLength=Math.max(0,f.length),r.pathname=n(w),r.search=S?`?${S}`:"",r.historyStack=f}}else{const p=r.search,w=new URLSearchParams(p);w.delete("stackPages"),window.history.replaceState(null,"",w.toString()?"/?"+w.toString():"/"),r.historyLength=0,r.pathname="/",r.search=w.toString()?"?"+w.toString():"",r.historyStack=[]}}}),Ee(()=>(window.addEventListener("popstate",o),()=>{window.removeEventListener("popstate",o)}));var v=U(),h=L(v);he(h,()=>e.children??ye),_(t,v),$()}const _s={};function oc(t){Me(_s,t)}function sc(){const t=Be(_s);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function ic(t,e){Q(e,!0);let n=Fe({value:!1});const r=()=>n.value;Ee(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),oc({getIsKeyboardVisible:r});var o=U(),a=L(o);he(a,()=>e.children??ye),_(t,o),$()}function lc(t,e){Q(e,!0);const n=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};Dl({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=U(),a=L(o);he(a,()=>e.children??ye),_(t,o),$()}function cc(t,e){jl(t,{children:(n,r)=>{ql(n,{children:(o,a)=>{Yl(o,{children:(i,l)=>{Gl(i,{children:(c,u)=>{Zl(c,{children:(d,v)=>{Ql(d,{children:(h,g)=>{ic(h,{children:(f,p)=>{ac(f,{children:(w,S)=>{rc(w,{children:(k,m)=>{tc(k,{children:(x,N)=>{lc(x,{children:(C,A)=>{var T=U(),q=L(T);he(q,()=>e.children??ye),_(C,T)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function uc(t,e){cc(t,{children:(n,r)=>{pl(n,{children:(o,a)=>{hl(o,{children:(i,l)=>{ml(i,{children:(c,u)=>{yl(c,{children:(d,v)=>{Cl(d,{children:(h,g)=>{Bl(h,{children:(f,p)=>{Il(f,{children:(w,S)=>{zl(w,{children:(k,m)=>{var x=U(),N=L(x);he(N,()=>e.children??ye),_(k,x)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let Wt=z(""),sn=z(null),er=z(null),tr=z(null);function wn(t,e){y(Wt,""),setTimeout(()=>{y(Wt,t,!0),e?.onFinish&&y(er,e.onFinish,!0),e?.onCancel&&y(tr,e.onCancel,!0)},16)}const dc=(t,e,n,r,o)=>{t.preventDefault(),s(e)&&(y(n,null),s(e)(),y(e,null)),y(r,""),s(o)?.style.removeProperty("opacity")};var fc=H('<button type="button" class="undoButton svelte-1vxmgq5">undo</button>'),vc=H('<div class="notification svelte-1vxmgq5"><span> </span> <!></div>'),hc=H("<div><!></div>");function gc(t,e){Q(e,!0),Te(()=>{s(Wt);const a=s(tr)?2e3:800;s(Wt)&&(s(sn)?.getBoundingClientRect(),s(sn)?.style.setProperty("opacity","1"));const i=setTimeout(()=>{s(sn)?.style.removeProperty("opacity")},a),l=setTimeout(()=>{y(Wt,""),s(er)&&s(er)(),y(er,null),y(tr,null),s(sn)?.style.removeProperty("opacity")},a+400);return()=>{clearTimeout(i),clearTimeout(l)}});var n=hc(),r=P(n);{var o=a=>{var i=vc(),l=P(i),c=P(l),u=F(l,2);{var d=v=>{var h=fc();h.__click=[dc,tr,er,Wt,sn],_(v,h)};V(u,v=>{s(tr)&&v(d)})}Nt(i,v=>y(sn,v),()=>s(sn)),ue(()=>Jt(c,s(Wt))),_(a,i)};V(r,a=>{s(Wt)&&a(o)})}_(t,n),$()}it(["click"]);var pc=H('<span class="vh svelte-s92gzo"><!></span>');function nt(t,e){var n=pc(),r=P(n);he(r,()=>e.children),_(t,n)}var _c=Zi('<svg class="svelte-18et5h9"><use></use></svg>');function ke(t,e){let n=le(e,"name",8,"");var r=_c(),o=P(r);ue(()=>xe(o,"href",`#icon-${n()??""}`)),_(t,r)}const mc=(t,e,n,r)=>{const o=e().type;o==="closed"?n():o==="opened"&&r()};var wc=H('<button class="buttonMenu svelte-bpktnw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ms(t,e){Q(e,!1);const{sidebarOpen:n,getSidebarState:r,sidebarClose:o}=Ea();Ca();var a=wc();a.__click=[mc,r,n,o];var i=P(a);be(i,()=>({"--size":"36px"})),ke(i.lastChild,{name:"sidebarMenu"});var l=F(i,2);nt(l,{children:(c,u)=>{var d=De("Menu");_(c,d)}}),_(t,a),$()}it(["click"]);var yc=(t,e)=>e.onChange?.(t.target?.value||""),bc=H('<input class="svelte-15lr19w"/>');function da(t,e){Q(e,!0);let n=le(e,"value",15,"");var r=bc();r.__input=[yc,e],ue(()=>xe(r,"placeholder",e.placeholder)),Sa("focus",r,function(...o){e.onFocus?.apply(this,o)}),ll(r,n),_(t,r),$()}it(["input"]);function ws(t,e){Q(e,!0),Ee(()=>{const n=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),$()}var Sc=H('<dialog><div class="dialogInner svelte-1x410nl"><!></div></dialog> <!>',1);function Ta(t,e){Q(e,!0);let n=z(null),r=z(null),o=z(!1),{showDialog:a,hideDialog:i}=fr();const l=f=>{f?.preventDefault();const p=setTimeout(()=>{e.onClosed()},150);s(n)?.addEventListener("transitionend",()=>{clearTimeout(p),e.onClosed()},{once:!0}),y(o,!1)};Te(()=>{e.startClose&&l()}),Ee(()=>(s(n)?.showModal(),s(n)?.getClientRects(),y(o,!0),s(n)?.addEventListener("cancel",l),s(n)?.addEventListener("close",l),()=>{s(n)?.removeEventListener("cancel",l),s(n)?.removeEventListener("close",l)})),Ee(()=>(a(),()=>{i()}));var c=Sc(),u=L(c),d=P(u),v=P(d);he(v,()=>e.children),Nt(d,f=>y(r,f),()=>s(r)),Nt(u,f=>y(n,f),()=>s(n));var h=F(u,2);{var g=f=>{ws(f,{get dialog(){return s(n)},get dialogInner(){return s(r)},onClose:l})};V(h,f=>{s(n)&&s(r)&&f(g)})}ue(()=>we(u,1,me(["dialog",{shown:s(o)}]),"svelte-1x410nl")),_(t,c),$()}var kc=H("<div><!></div>");function ys(t,e){Q(e,!0);let n=z(!1),r=z(null);const o=()=>{const u=setTimeout(()=>{e.onClosed()},150);s(r)?.addEventListener("transitionend",()=>{clearTimeout(u),e.onClosed()},{once:!0}),y(n,!1)},a=u=>{u.target!==s(r)&&!s(r)?.contains(u.target)&&o()},i=u=>{u.target!==s(r)&&!s(r)?.contains(u.target)&&o()};Ee(()=>{s(r)?.getClientRects(),y(n,!0);const u=setTimeout(()=>{document.addEventListener("focusin",a),document.addEventListener("click",i)},0);return()=>{clearTimeout(u),document.removeEventListener("focusin",a),document.removeEventListener("click",i)}}),Te(()=>{e.startClose&&o()});var l=kc(),c=P(l);he(c,()=>e.children),Nt(l,u=>y(r,u),()=>s(r)),ue(()=>we(l,1,me(["menu",{top:e.positionTop,shown:s(n)}]),"svelte-ujw4xi")),_(t,l),$()}const Cc=(t,e)=>{s(e)||y(e,!0)};var Ec=(t,e)=>e("newest"),Pc=(t,e)=>e("oldest"),xc=(t,e)=>e("AtoZ"),Dc=(t,e)=>e("ZtoA"),Ac=H("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),Tc=H('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Nc=H('<div class="orderMenu svelte-14zj87s"><button><!> <!></button> <!></div>');function Lc(t,e){Q(e,!0);const n=(k,m=ye)=>{var x=Ac(),N=P(x);N.__click=[Ec,d];var C=F(N,2);C.__click=[Pc,d];var A=F(C,2);A.__click=[xc,d];var T=F(A,2);T.__click=[Dc,d],ue(()=>{we(x,1,me(["menu",{menuDialog:m()}]),"svelte-14zj87s"),we(N,1,me(["menuButton",{menuButtonDialog:m(),current:s(u)==="newest"}]),"svelte-14zj87s"),we(C,1,me(["menuButton",{menuButtonDialog:m(),current:s(u)==="oldest"}]),"svelte-14zj87s"),we(A,1,me(["menuButton",{menuButtonDialog:m(),current:s(u)==="AtoZ"}]),"svelte-14zj87s"),we(T,1,me(["menuButton",{menuButtonDialog:m(),current:s(u)==="ZtoA"}]),"svelte-14zj87s")}),_(k,x)};let r=z(!1),o=z(!1);const{checkMobileSize:a}=Jn(),{getFeedOrder:i,setFeedOrder:l}=$o();let c=R(a),u=R(i);const d=k=>{y(o,!0),l(k)},v=()=>{y(r,!1),y(o,!1)};Ee(()=>{const k=m=>{m.key==="Escape"&&y(o,!0)};return document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)});var h=Nc(),g=P(h);g.__click=[Cc,r],we(g,1,me(["button","buttonMenu"]),"svelte-14zj87s");var f=P(g);ke(f,{name:"filter"});var p=F(f,2);nt(p,{children:(k,m)=>{var x=De("show feed order menu");_(k,x)}});var w=F(g,2);{var S=k=>{var m=U(),x=L(m);{var N=A=>{Ta(A,{get startClose(){return s(o)},onClosed:v,children:(T,q)=>{n(T,()=>!0)},$$slots:{default:!0}})},C=A=>{var T=Tc(),q=L(T);be(q,()=>({"--right":"20px","--top":"60px"})),ys(q.lastChild,{get startClose(){return s(o)},onClosed:v,children:(J,ve)=>{n(J,()=>!1)},$$slots:{default:!0}}),_(A,T)};V(x,A=>{s(c)?A(N):A(C,!1)})}_(k,m)};V(w,k=>{s(r)&&k(S)})}_(t,h),$()}it(["click"]);var Y=(t=>(t.NewNote="newNote",t.EditNote="editNote",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.Start="start",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t))(Y||{}),Bc=H("<a><!></a>"),Mc=H("<button><!></button>");function Ot(t,e){let n=le(e,"type",3,"standard"),r=le(e,"typeButton",3,"button"),o=le(e,"element",3,"button"),a=le(e,"href",3,""),i=le(e,"fullWidth",3,!1),l=le(e,"withoutMinWidth",3,!1);var c=U(),u=L(c);{var d=h=>{var g=Bc();g.__click=function(...p){e.onClick?.apply(this,p)};var f=P(g);he(f,()=>e.children??ye),ue(()=>{xe(g,"href",a()),we(g,1,me(["button","a",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(h,g)},v=h=>{var g=Mc();g.__click=function(...p){e.onClick?.apply(this,p)};var f=P(g);he(f,()=>e.children??ye),ue(()=>{xe(g,"type",r()),we(g,1,me(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(h,g)};V(u,h=>{o()==="a"?h(d):h(v,!1)})}_(t,c)}it(["click"]);var Ic=H('<div class="block svelte-1dzbsx4"><span class="title svelte-1dzbsx4"> </span> <div class="controls svelte-1dzbsx4"><!> <!></div></div>');function bs(t,e){Q(e,!0);let n=le(e,"buttonCancelTitle",3,"Cancel"),r=le(e,"buttonConfirmTitle",3,"Confirm"),o=z(!1),a=z(!1);const i=()=>{y(o,!0)},l=()=>{y(o,!0),y(a,!0)};Ta(t,{get startClose(){return s(o)},onClosed:()=>{s(a)?e.onConfirm():e.onCancel()},children:(u,d)=>{var v=Ic(),h=P(v),g=P(h),f=F(h,2),p=P(f);Ot(p,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(S,k)=>{var m=De();ue(()=>Jt(m,n())),_(S,m)},$$slots:{default:!0}});var w=F(p,2);Ot(w,{onClick:l,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(S,k)=>{var m=De();ue(()=>Jt(m,r())),_(S,m)},$$slots:{default:!0}}),ue(()=>Jt(g,e.title)),_(u,v)},$$slots:{default:!0}}),$()}const Oc=(t,e)=>{y(e,!0)};var Rc=(t,e)=>{e("/",{full:!0})(t)},Fc=H('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),zc=(t,e)=>{e(Y.Bin,{full:!0})(t)},Hc=H('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),Uc=H('<button class="emptyBinButton svelte-13t3afu" type="button">Empty bin</button>'),jc=H('<a class="buttonAdd svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></a>'),Vc=H('<div class="header svelte-13t3afu"><div class="top svelte-13t3afu"><div class="menu svelte-13t3afu"><a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="mobile svelte-13t3afu"><!></div> <!></div> <div class="bottom svelte-13t3afu"><div><div class="sidebarSearchWrapper"><!></div></div> <div class="right svelte-13t3afu"><div class="filter svelte-13t3afu"><div class="feedSearchWrapper svelte-13t3afu"><!></div> <!></div></div></div></div> <!>',1);function qc(t,e){Q(e,!0);const{createHandlePage:n,getPageUrl:r}=Ft(),o=Go(),a=Jo(),{getScrollContainer:i}=Da();let l=R(i);const{emptyBin:c,checkNotesInBin:u}=Ur(),{getAppHistory:d}=wt(),v=R(u),h=R(()=>d().pathname);let g=z(!1);const f=()=>{s(l)&&s(l).scrollTo({top:0,behavior:"smooth"})};var p=Vc(),w=L(p),S=P(w),k=P(S),m=P(k),x=R(()=>n(Y.Settings));m.__click=function(...E){s(x)?.apply(this,E)};var N=P(m);be(N,()=>({"--rotate":"30deg","--size":"20px"})),ke(N.lastChild,{name:"settings"});var C=F(m,2),A=R(()=>n(Y.Sync));C.__click=function(...E){s(A)?.apply(this,E)};var T=P(C);be(T,()=>({"--size":"20px"})),ke(T.lastChild,{name:"sync"});var q=F(C,2);{var J=E=>{var j=Fc();j.__click=[Rc,n];var se=P(j);be(se,()=>({"--size":"18px"})),ke(se.lastChild,{name:"note"}),ue(ee=>xe(j,"href",ee),[()=>r("/",{full:!0})]),_(E,j)},ve=E=>{var j=U(),se=L(j);{var ee=ge=>{var ae=Hc();ae.__click=[zc,n];var Ne=P(ae);be(Ne,()=>({"--size":"20px"})),ke(Ne.lastChild,{name:"bin"}),ue(Ae=>xe(ae,"href",Ae),[()=>r(Y.Bin,{full:!0})]),_(ge,ae)};V(se,ge=>{s(v)&&ge(ee)},!0)}_(E,j)};V(q,E=>{s(h)===`/${Y.Bin}`?E(J):E(ve,!1)})}var ie=F(k,2),ne=P(ie);ms(ne,{});var W=F(ie,2);{var Z=E=>{var j=U(),se=L(j);{var ee=ge=>{var ae=Uc();ae.__click=[Oc,g],_(ge,ae)};V(se,ge=>{s(v)&&ge(ee)})}_(E,j)},re=E=>{var j=jc(),se=R(()=>n(Y.NewNote));j.__click=function(...ge){s(se)?.apply(this,ge)};var ee=P(j);be(ee,()=>({"--size":"16px","--color":"#b0b0b0"})),ke(ee.lastChild,{name:"plus"}),ue(ge=>xe(j,"href",ge),[()=>r(Y.NewNote)]),_(E,j)};V(W,E=>{s(h)===`/${Y.Bin}`?E(Z):E(re,!1)})}var te=F(S,2),G=P(te);we(G,1,me(["left"]),"svelte-13t3afu");var K=P(G),X=P(K);da(X,{placeholder:"Search tag",get value(){return a.value},set value(E){a.value=E}});var M=F(G,2),O=P(M),fe=P(O),pe=P(fe);da(pe,{onFocus:f,placeholder:"Search",get value(){return o.value},set value(E){o.value=E}});var D=F(fe,2);Lc(D,{});var I=F(w,2);{var b=E=>{bs(E,{title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:()=>{c(),y(g,!1)},onCancel:()=>{y(g,!1)}})};V(I,E=>{s(g)&&E(b)})}ue((E,j)=>{xe(m,"href",E),xe(C,"href",j)},[()=>r(Y.Settings),()=>r(Y.Sync)]),_(t,p),$()}it(["click"]);function Wc(t,e){Q(e,!0);const{getIsKeyboardVisible:n}=sc();let r=le(e,"dialog",7);const o=R(n),a=Zn();let i=null;const l=()=>{e.dialogState==="swiping"&&e.onClose()};Te(()=>(e.dialogState==="swiping"&&(i=setTimeout(l,3e3)),()=>{i&&(clearTimeout(i),i=null)}));let c=null,u=null;const d=3,v=50,h=5,g=.6,f=.3,p=.35,w=.95;let S=0,k=0,m=0,x=!1,N=!1,C=0,A=0,T=0;const q=()=>{S=0,k=0,x=!1,N=!1,C=0,A=0,T=0,m=0,c=null,u!==null&&(cancelAnimationFrame(u),u=null),i&&(clearTimeout(i),i=null)},J=K=>{r()&&e.dialogState==="opened"&&(S=K.touches[0].clientX,k=K.touches[0].clientY,m=performance.now(),x=!0,N=!1)},ve=K=>e.dialogState==="opened"&&K>0||e.dialogState==="swiping"&&K>0,ie=()=>{if(r()){r().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const K=window.getComputedStyle(r()),X=K.transform||K.webkitTransform||"";if(A=r().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(C=0),X&&X!=="none")try{C=new DOMMatrix(X).m41}catch{}N=!0}catch{q()}}},ne=()=>{if(!r())return;const X=Math.abs(C+T*A/100)/A;r().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-X)})`)},W=()=>{if(u=null,!c||!x||!r()||s(o)){q();return}const K=[...c.touches].reduce((E,j)=>E+j.clientX,0)/c.touches.length,X=[...c.touches].reduce((E,j)=>E+j.clientY,0)/c.touches.length,M=K-S,O=X-k,fe=Math.abs(M)>Math.abs(O),pe=Math.abs(M)>d;if(!N)if(fe&&pe&&ve(M))try{ie()}catch{q();return}else return;let D=C+M*w;D=Math.max(0,Math.min(A,D)),!(D<0)&&(r().style.setProperty("--transition-timing","0s"),r().style.transform=`translate3d(${D}px, 0, 0)`,a.swipingRatio=Math.abs(1-D/A),T=(D-C)/A*100,e.dialogState==="swiping"&&(i&&clearTimeout(i),i=setTimeout(l,3e3)),ne())},Z=K=>{if(!x)return;c=K,u===null&&(u=requestAnimationFrame(W));const X=K.touches[0].clientX-S,M=K.touches[0].clientY-k,O=Math.abs(X)>Math.abs(M);N&&O&&K.preventDefault()},re=K=>{const X=Math.abs(K);if(X>=g)return h;if(X>=f){const M=(X-f)/(g-f);return v-M*(v-h)}else return v},te=(K,X)=>{if(Math.abs(K)>=g)return p*.5;const O=Math.abs(T)/100;return X?p*Math.max(.5,1-O):p*Math.max(.5,O)},G=K=>{if(u!==null&&(cancelAnimationFrame(u),u=null),!x||!r()){q();return}if(!N){q();return}let X=0;if(K?.changedTouches?.[0]){const D=K.changedTouches[0].clientX,b=performance.now()-m;b>0&&(X=(D-S)/b)}const M=re(X);let O=null;e.dialogState==="swiping"&&(O=Math.abs(T)>M||X<-f?"close":"open");const fe=e.dialogState==="swiping"&&O==="close",pe=te(X,fe);a.duration=pe-.02,r().style.setProperty("--transition-timing",`${pe}s`),r().offsetWidth,r().style.transform="",O==="open"?e.onOpen():O==="close"&&e.onClose(),r()?.style.removeProperty("--backdrop-bg"),q()};Ee(()=>(r().addEventListener("touchstart",J,{passive:!0}),r().addEventListener("touchmove",Z,{passive:!1}),r().addEventListener("touchend",G,{passive:!0}),r().addEventListener("touchcancel",G,{passive:!0}),()=>{r().removeEventListener("touchstart",J),r().removeEventListener("touchmove",Z),r().removeEventListener("touchend",G),r().removeEventListener("touchcancel",G),u!==null&&cancelAnimationFrame(u)})),$()}var Yc=(t,e)=>{e.onStartClose()},Kc=H('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Gc=H('<dialog><div class="dialogInner svelte-vr2o0t"><div class="header svelte-vr2o0t"><div><!></div></div> <!></div></dialog> <!>',1);function Xc(t,e){Q(e,!0);let n=350;const{isScrolling:r,enable:o}=ds();let a=z(null),i=z(null);const l=Zn(),c=C=>{C.preventDefault(),e.onStartClose()};Ee(()=>(s(a)?.addEventListener("close",e.onClosed),s(a)?.addEventListener("cancel",c),()=>{s(a)?.removeEventListener("close",e.onClosed),s(a)?.removeEventListener("cancel",c)}));const u=()=>{s(a)?.style.removeProperty("--transition-timing"),s(a)?.style.removeProperty("transform"),s(a)?.style.removeProperty("--backdrop-bg")},d=()=>{o()},v=R(r);Te(()=>{if(e.dialogState,!!s(a))switch(e.dialogState){case"opening":{s(a).open||s(a).showModal(),s(a).getBoundingClientRect();const C=setTimeout(()=>{u()},n+1),A=()=>{clearTimeout(C),u()};return s(a)?.addEventListener("transitionend",A,{once:!0}),e.onOpened(),()=>{clearTimeout(C),s(a)?.removeEventListener("transitionend",A)}}case"closing":{const C=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),A=()=>{clearTimeout(C),e.onClosed()};return s(a)?.addEventListener("transitionend",A,{once:!0}),()=>{clearTimeout(C),s(a)?.removeEventListener("transitionend",A)}}case"opened":u()}});var h=Gc(),g=L(h),f=P(g),p=P(f),w=P(p),S=P(w);{var k=C=>{var A=Kc();we(A,1,me(["navigateButton","buttonBack"]),"svelte-vr2o0t"),A.__click=[Yc,e];var T=P(A);be(T,()=>({"--size":"36px"})),ke(T.lastChild,{name:"back"});var q=F(T,2);nt(q,{children:(J,ve)=>{var ie=De("back");_(J,ie)}}),_(C,A)};V(S,C=>{(!(e.blocked||e.hidden)||e.blocked&&e.unBlockedBack)&&C(k)})}var m=F(p,2);he(m,()=>e.children),Nt(f,C=>y(i,C),()=>s(i)),Nt(g,C=>y(a,C),()=>s(a));var x=F(g,2);{var N=C=>{Wc(C,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return s(a)}})};V(x,C=>{(!s(v)&&e.dialogState==="opened"||e.dialogState==="swiping")&&(!e.blocked||e.unBlockedBack)&&C(N)})}ue(()=>we(g,1,me([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:l.working&&(!l.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-vr2o0t")),Sa("scroll",f,d),_(t,h),$()}it(["click"]);const Xa=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function Zc(t,e){Q(e,!0);let n=le(e,"blocked",3,!1),r=le(e,"hiddenDialog",3,!1),o=le(e,"unBlockedBack",3,!1),a=le(e,"onStartClose",3,()=>{}),i=le(e,"onClose",3,()=>{});const l=Zn();let c=z(Fe(Xa({type:"closed"})));const u=m=>{y(c,Xa(s(c),m),!0)},d=()=>{n()&&!o()||(a()(),u({type:"close"}))},v=()=>{u({type:"open"})},h=()=>{u({type:"opened"}),l.swipingRatio=1,l.duration=.2},g=()=>{i()(),u({type:"closed"}),l.swipingRatio=1,l.duration=.2},f=()=>{u({type:"swipe"})};Te(()=>{s(c).type==="swiping"?l.isSwiping=!0:l.isSwiping=!1,s(c).type==="closed"&&e.shownDialog?v():s(c).type==="opened"&&!e.shownDialog&&d()});var p={handleComputeState:u},w=U(),S=L(w);{var k=m=>{Xc(m,{onSwipe:f,onOpened:h,onClosed:g,onStartClose:d,onStartOpen:v,get dialogState(){return s(c).type},get hidden(){return r()},get blocked(){return n()},get unBlockedBack(){return o()},children:(x,N)=>{var C=U(),A=L(C);he(A,()=>e.children),_(x,C)},$$slots:{default:!0}})};V(S,m=>{s(c).type!=="closed"&&m(k)})}return _(t,w),$(p)}const Jc=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const o=i=>{i.preventDefault(),n()},a=()=>{r?.()};Ee(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",a),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",a)}}),Ee(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Qc=(t,e)=>{e.onStartBack()},$c=H('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),eu=(t,e)=>{e.onStartClose()},tu=H('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),nu=H('<dialog><div class="dialogInner svelte-rt409n"><div class="header svelte-rt409n"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function ru(t,e){Q(e,!0);let n=le(e,"blockedDialog",3,!1),r=le(e,"hiddenDialog",3,!1),o=le(e,"isDesktopAnimationOff",3,!1),a=z(null),i=z(null);Jc({getDialog:()=>s(a),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const l=Zn();Te(()=>{e.stateDialog==="closing"&&(l.working?s(a)?.addEventListener("transitionend",()=>{s(a)?.close()},{once:!0}):s(a)?.close())});const{getDialogPageHeight:c}=Aa(),u=R(c);var d=nu(),v=L(d),h=P(v),g=P(h),f=P(g),p=P(f);{var w=C=>{var A=$c();we(A,1,me(["navigateButton","buttonBack"]),"svelte-rt409n"),A.__click=[Qc,e];var T=P(A);be(T,()=>({"--size":"28px"})),ke(T.lastChild,{name:"back"});var q=F(T,2);nt(q,{children:(J,ve)=>{var ie=De("back");_(J,ie)}}),_(C,A)};V(p,C=>{(!(n()||r())||n()&&e.unBlockedBack)&&e.onStartBack&&C(w)})}var S=F(f,2),k=P(S);{var m=C=>{var A=tu();we(A,1,me(["navigateButton","buttonClose"]),"svelte-rt409n"),A.__click=[eu,e];var T=P(A);be(T,()=>({"--size":"28px"})),ke(T.lastChild,{name:"close"});var q=F(T,2);nt(q,{children:(J,ve)=>{var ie=De("close");_(J,ie)}}),_(C,A)};V(k,C=>{n()||r()||C(m)})}var x=F(g,2);he(x,()=>e.children),Nt(h,C=>y(i,C),()=>s(i)),Nt(v,C=>y(a,C),()=>s(a));var N=F(v,2);ws(N,{get dialog(){return s(a)},get dialogInner(){return s(i)},get onClose(){return e.onStartClose}}),ue(()=>{Vn(v,`height: ${s(u)+74}px`),we(v,1,me([{open:e.stateDialog==="open",isAnimationOn:l.working,isDesktopAnimationOff:o(),hiddenDialog:r()}]),"svelte-rt409n")}),_(t,d),$()}it(["click"]);const au=({onStartClose:t,onClose:e})=>{let n=z("close");return{get state(){return s(n)},set state(i){y(n,i,!0)},handleStartClose:(i=!1)=>{i||(y(n,"closing"),t?.())},handleOpen:()=>{y(n,"open")},handleClose:()=>{y(n,"close"),e?.()}}};function ou(t,e){Q(e,!0);let n=le(e,"blockedDialog",3,!1),r=le(e,"hiddenDialog",3,!1),o=le(e,"onStartClose",3,()=>{}),a=le(e,"onClose",3,()=>{}),i=au({onStartClose:o(),onClose:a()});Te(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=v=>{v.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||n())&&(v.preventDefault(),v.stopPropagation())};Ee(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=U(),u=L(c);{var d=v=>{ru(v,{get stateDialog(){return i.state},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(h,g)=>{var f=U(),p=L(f);he(p,()=>e.children),_(h,f)},$$slots:{default:!0}})};V(u,v=>{i.state!=="close"&&v(d)})}_(t,c),$()}function su(t,e){Q(e,!0);let n=le(e,"blockedDialog",3,!1),r=le(e,"hiddenDialog",3,!1),o=le(e,"isLastDialog",3,!1),a=le(e,"onStartClose",3,()=>{}),i=le(e,"onClose",3,()=>{});const l=R(()=>o()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=fr();Ee(()=>(c(),()=>{u()}));const{checkMobileSize:d}=Jn();var v=U(),h=L(v);{var g=p=>{Zc(p,{get shownDialog(){return e.shownDialog},get blocked(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return e.onStartBack},get onClose(){return i()}})},f=p=>{ou(p,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return s(l)},get onStartClose(){return a()},get onClose(){return i()}})};V(h,p=>{d()?p(g):p(f,!1)})}_(t,v),$()}function Za(t,e){Q(e,!0);const{back:n,closeDialogStack:r}=wt(),{popStackPages:o}=Ft();let a=le(e,"blocked",3,!1),i=le(e,"isLastDialog",3,!1),l=le(e,"onBack",3,()=>{});const{checkBlockedDialog:c,checkUnBlockedBackDialog:u}=fr(),d=R(()=>a()||e.hidden||c()),v=R(()=>u()&&!i());su(t,{get shownDialog(){return e.shown},get blockedDialog(){return s(d)},get unBlockedBack(){return s(v)},get hiddenDialog(){return e.hidden},get isLastDialog(){return i()},onStartBack:()=>{(!s(d)||s(d)&&s(v))&&e.shown&&(n(),l()())},onStartClose:()=>{(!s(d)||s(d)&&s(v))&&e.shown&&r()},onClose:()=>{o()},children:(p,w)=>{var S=U(),k=L(S);he(k,()=>e.children),_(p,S)},$$slots:{default:!0}}),$()}var iu=H('<h1 class="svelte-1ky72l5"><!></h1>');function lu(t,e){var n=iu(),r=P(n);he(r,()=>e.children),_(t,n)}var cu=H('<div class="block svelte-ujk4k"><!> <div class="container svelte-ujk4k"><!> <!></div></div>');function uu(t,e){Q(e,!0);const{blockDialog:n}=fr(),{pushStackPages:r}=Ft(),{closeDialogStack:o}=wt(),{initLocalAccount:a}=xa();let i=z("idle");const l=()=>{y(i,"loading"),r(Y.Auth)},c=async()=>{y(i,"loading"),Sl(),await a(),n(!1),o()};Te(()=>{n(s(i)==="idle"||s(i)==="loading")}),Ee(()=>(n(!0),()=>{n(!1)}));var u=cu(),d=P(u);lu(d,{children:(f,p)=>{var w=De("use app");_(f,w)}});var v=F(d,2),h=P(v);Ot(h,{onClick:l,fullWidth:!0,children:(f,p)=>{var w=De("cloud account");_(f,w)},$$slots:{default:!0}});var g=F(h,2);Ot(g,{onClick:c,fullWidth:!0,type:"secondary",children:(f,p)=>{var w=De("without account");_(f,w)},$$slots:{default:!0}}),_(t,u),$()}var du=H('<div class="svelte-1x9a4ve"><!></div>');function Re(t,e){Q(e,!0);const{setDialogPageHeight:n}=Aa();let r=z(null);Ee(()=>{s(r)&&(s(r).getBoundingClientRect(),s(r).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(s(r))return i.observe(s(r)),()=>{s(r)&&i.unobserve(s(r)),i.disconnect()}});var o=du(),a=P(o);he(a,()=>e.children),Nt(o,i=>y(r,i),()=>s(r)),_(t,o),$()}var fu=H('<div class="svelte-stjbkr"><p class="svelte-stjbkr">Page not found</p> <!></div>');function vu(t,e){Q(e,!1);const{navigate:n}=wt(),r=i=>{i.preventDefault(),n("/")};Ca();var o=fu(),a=F(P(o),2);Ot(a,{element:"a",href:"/",onClick:r,children:(i,l)=>{var c=De("close");_(i,c)},$$slots:{default:!0}}),_(t,o),$()}const hu="modulepreload",gu=function(t){return"/"+t},Ja={},Ue=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(n.map(u=>{if(u=gu(u),u in Ja)return;Ja[u]=!0;const d=u.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${v}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":hu,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((g,f)=>{h.addEventListener("load",g),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};var pu=H('<div class="svelte-10xfz1h"><p class="svelte-10xfz1h">Something went wrong. Please reload the page</p> <!></div>');function _u(t){var e=pu(),n=F(P(e),2);Ot(n,{onClick:()=>location.reload(),children:(r,o)=>{var a=De("Reload");_(r,a)},$$slots:{default:!0}}),_(t,e)}var mu=H('<div><!> <div class="loader svelte-m0sno1"></div></div>');function Ss(t,e){Q(e,!0);let n=z(!1);Ee(()=>{const a=setTimeout(()=>{y(n,!0)},200);return()=>{clearTimeout(a)}});var r=mu(),o=P(r);he(o,()=>e.children??ye),ue(()=>we(r,1,me(["block",{shown:s(n)}]),"svelte-m0sno1")),_(t,r),$()}var wu=H('<div class="svelte-1mu1b44"><!></div>');function yu(t,e){Q(e,!0);const{getDialogPageHeight:n}=Aa(),r=R(n);var o=wu(),a=P(o);Ss(a,{}),ue(()=>Vn(o,`min-height: ${s(r)??""}px;`)),_(t,o),$()}function qe(t,e){Q(e,!0);const n={},r=Object.assign({"./Pages/About.svelte":()=>Ue(()=>import("./DI6QBWKd.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>Ue(()=>import("./DcVKyvpR.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>Ue(()=>import("./CnsCVwfm.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>Ue(()=>import("./DbpV6HBw.js"),__vite__mapDeps([8,9])),"./Pages/ClearStore.svelte":()=>Ue(()=>import("./vm8kQGdt.js"),__vite__mapDeps([10,11])),"./Pages/ConfirmAccessKey.svelte":()=>Ue(()=>import("./d5zF0KPa.js"),__vite__mapDeps([12,4,3,13,14,15,16])),"./Pages/EditNote.svelte":()=>Ue(()=>import("./DJfSDZ3N.js"),__vite__mapDeps([17,18,19,14,15,20,21,22])),"./Pages/Exit.svelte":()=>Ue(()=>import("./BbSki02y.js"),__vite__mapDeps([23,24])),"./Pages/ExportData.svelte":()=>Ue(()=>import("./CQsDuqvu.js"),__vite__mapDeps([25,26])),"./Pages/ImportData.svelte":()=>Ue(()=>import("./DT1k_Xk3.js"),__vite__mapDeps([27,19,14,15,20,28])),"./Pages/NewNote.svelte":()=>Ue(()=>import("./oANtR90j.js"),__vite__mapDeps([29,18,19,14,15,20,21])),"./Pages/Settings.svelte":()=>Ue(()=>import("./BVuu1lAR.js"),__vite__mapDeps([30,31])),"./Pages/Signin.svelte":()=>Ue(()=>import("./BlydIZbO.js"),__vite__mapDeps([32,4,3,13,33])),"./Pages/Signup.svelte":()=>Ue(()=>import("./BVvhQVjJ.js"),__vite__mapDeps([34,13,4,3,35])),"./Pages/Subscription.svelte":()=>Ue(()=>import("./YokMiKcX.js"),__vite__mapDeps([36,37])),"./Pages/Sync.svelte":()=>Ue(()=>import("./BqEJxc__.js"),__vite__mapDeps([38,39]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(r[c]){const u=r[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var a=U(),i=L(a);jo(i,()=>o(e.page),l=>{yu(l,{})},(l,c)=>{const u=R(()=>s(c).default);var d=U(),v=L(d);Wo(v,()=>s(u),(h,g)=>{g(h,{get params(){return e.params},get hidden(){return e.hidden}})}),_(l,d)},l=>{_u(l)}),_(t,a),$()}var bu=H('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ks(t,e){let n=R(()=>e.style==="selected"?"45deg":"0deg");var r=bu();r.__click=function(...c){e.onClick?.apply(this,c)};var o=P(r),a=F(o);be(a,()=>({"--size":e.size==="small"?"10px":"12px","--rotate":s(n)})),ke(a.lastChild,{name:"plus"});var i=F(a,2);{var l=c=>{nt(c,{children:(u,d)=>{var v=De("add tag");_(u,v)}})};V(i,c=>{e.title===void 0&&c(l)})}ue(()=>{xe(r,"type",e.type),we(r,1,me([{selectedTag:e.style==="selected",small:e.size==="small",empty:e.title===void 0}]),"svelte-uu8a24"),Jt(o,`${e.title??""} `)}),_(t,r)}it(["click"]);var Su=H("<div></div>");function Qa(t,e){Q(e,!0);let n=le(e,"mobile",3,!1);var r=Su();zr(r,20,()=>e.tags,o=>o,(o,a)=>{ks(o,{get title(){return a},onClick:()=>e.handleTagClick(a)})}),ue(()=>we(r,1,me(["tags",{mobile:n()}]),"svelte-1c53r32")),_(t,r),$()}var ku=H("<div></div>");function $a(t,e){Q(e,!0);var n=U(),r=L(n);{var o=a=>{var i=ku();we(i,1,me(["tags","selectedTags"]),"svelte-58z9m1"),zr(i,20,()=>e.selectedTags,l=>l,(l,c)=>{ks(l,{get title(){return c},onClick:()=>e.handleSelectedTagClick(c),style:"selected"})}),_(a,i)};V(r,a=>{e.selectedTags.size>0&&a(o)})}_(t,n),$()}var Cu=(t,e,n)=>{e(),n("/",{full:!0})(t)},Eu=H('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Pu=(t,e,n)=>{e(),n(Y.Bin,{full:!0})(t)},xu=H('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Du=H('<div class="sidebarFixed svelte-ltt61h"><div class="nav svelte-ltt61h"><!> <div class="menu svelte-ltt61h"><a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="searchWrapper svelte-ltt61h"><!></div> <!></div> <!>',1),Au=H('<div class="sidebar svelte-ltt61h"><div class="sidebarFixed svelte-ltt61h"><!></div> <!></div>');function Tu(t,e){Q(e,!0);const{checkMobileSize:n}=Jn(),{sidebarClose:r}=Ea(),{getAppHistory:o}=wt(),{getPageUrl:a,createHandlePage:i,getStackPagesFormUrl:l}=Ft(),c=Jo(),u=R(()=>o().pathname),{getSelectedTags:d,addTag:v,removeTag:h}=ns();let g=R(d);const{checkNotesInBin:f}=Ur();let p=le(e,"getNotes",3,()=>[]),w=le(e,"mode",3,"notes"),S=null;function k(){return S||(S=Ue(()=>import("./DswjGbL3.js"),__vite__mapDeps([40,41]))),S}const m=W=>{v(W)},x=W=>{h(W)},N=()=>{if(s(g).has("inbox"))return[];const W=[],Z=Array.from(s(g).values());for(const re of p()()||[])if(re.data&&!(re.data.deletedAt&&w()==="notes")&&!(!re.data.deletedAt&&w()==="bin")){if(s(g).size===0){for(const te of re?.data?.tags||[])W.includes(te)||W.push(te);for(const te of re?.data?.draft?.tags||[])W.includes(te)||W.push(te);continue}if(re.data&&Z.every(te=>re.data?.tags.includes(te)))for(const te of re.data.tags)!s(g).has(te)&&!W.includes(te)&&W.push(te);if(re&&re.data.draft&&Z.every(te=>re.data?.draft?.tags.includes(te)))for(const te of re.data.draft.tags)!s(g).has(te)&&!W.includes(te)&&W.push(te)}return W};let C=R(()=>N().filter(W=>c.value===""||W.toLowerCase().indexOf(c.value.toLowerCase())!==-1).sort((W,Z)=>W==="inbox"?-1:Z==="inbox"?1:W.localeCompare(Z))),A=R(n);Ee(()=>{s(A)&&k()});const{checkExistedDialog:T}=fr();let q=R(()=>l().length>0||T());var J=U(),ve=L(J);{var ie=W=>{var Z=U(),re=L(Z);jo(re,k,null,(te,G)=>{const K=R(()=>s(G).default);var X=U(),M=L(X);Wo(M,()=>s(K),(O,fe)=>{fe(O,{get blocked(){return s(q)},children:(pe,D)=>{var I=Du(),b=L(I),E=P(b),j=P(E);ms(j,{});var se=F(j,2),ee=P(se),ge=R(()=>i(Y.Settings));ee.__click=function(...Pe){s(ge)?.apply(this,Pe)};var ae=P(ee);be(ae,()=>({"--size":"24px"})),ke(ae.lastChild,{name:"settings"});var Ne=F(ae,2);nt(Ne,{children:(Pe,Ge)=>{var Ve=De("Settings");_(Pe,Ve)}});var Ae=F(ee,2),$e=R(()=>i(Y.Sync));Ae.__click=function(...Pe){s($e)?.apply(this,Pe)};var He=P(Ae);be(He,()=>({"--size":"24px"})),ke(He.lastChild,{name:"sync"});var je=F(He,2);nt(je,{children:(Pe,Ge)=>{var Ve=De("Sync");_(Pe,Ve)}});var Ie=F(Ae,2);{var yt=Pe=>{var Ge=Eu();Ge.__click=[Cu,r,i];var Ve=P(Ge);be(Ve,()=>({"--size":"24px"})),ke(Ve.lastChild,{name:"note"});var jt=F(Ve,2);nt(jt,{children:(St,an)=>{var on=De("Notes");_(St,on)}}),ue(St=>xe(Ge,"href",St),[()=>a("/",{full:!0})]),_(Pe,Ge)},et=Pe=>{var Ge=U(),Ve=L(Ge);{var jt=St=>{var an=xu();an.__click=[Pu,r,i];var on=P(an);be(on,()=>({"--size":"24px"})),ke(on.lastChild,{name:"bin"});var Vt=F(on,2);nt(Vt,{children:(qt,jr)=>{var Vr=De("Bin");_(qt,Vr)}}),ue(qt=>xe(an,"href",qt),[()=>a(Y.Bin,{full:!0})]),_(St,an)};V(Ve,St=>{f()&&St(jt)},!0)}_(Pe,Ge)};V(Ie,Pe=>{s(u)===`/${Y.Bin}`?Pe(yt):Pe(et,!1)})}var rt=F(E,2),bt=P(rt);da(bt,{placeholder:"Search tag",get value(){return c.value},set value(Pe){c.value=Pe}});var Ht=F(rt,2);$a(Ht,{get selectedTags(){return s(g)},handleSelectedTagClick:x});var Ut=F(b,2);Qa(Ut,{get tags(){return s(C)},handleTagClick:m,mobile:!0}),ue((Pe,Ge)=>{xe(ee,"href",Pe),xe(Ae,"href",Ge)},[()=>a(Y.Settings),()=>a(Y.Sync)]),_(pe,I)},$$slots:{default:!0}})}),_(te,X)}),_(W,Z)},ne=W=>{var Z=Au(),re=P(Z),te=P(re);$a(te,{get selectedTags(){return s(g)},handleSelectedTagClick:x});var G=F(re,2);Qa(G,{get tags(){return s(C)},handleTagClick:m}),_(W,Z)};V(ve,W=>{s(A)?W(ie):W(ne,!1)})}_(t,J),$()}it(["click"]);const Nu=(t,e,n,r)=>{e.noteData.pinnedAt?(n(e.noteId,!1),wn("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),wn("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),y(r,!0)},Lu=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),wn("Link copied"),y(n,!0)};var Bu=H('<li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),Mu=(t,e,n)=>{y(e,!0),y(n,!0)},Iu=H('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),Ou=(t,e,n)=>{y(e,!0),y(n,!0)},Ru=(t,e,n)=>{y(e,!0),y(n,!0)},Fu=H('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete from bin</button></li>',1),zu=H('<ul class="menu svelte-8ve3pe"><!> <li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),Hu=H('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Uu=H("<!> <!>",1);function ju(t,e){Q(e,!0);const n=(T,q=ye)=>{var J=zu(),ve=P(J);{var ie=X=>{var M=Bu(),O=P(M);O.__click=[Lu,e,u];var fe=P(O);be(fe,()=>({"--size":"22px"})),ke(fe.lastChild,{name:"copy"}),ue(()=>we(O,1,me(["button",{buttonMenuDialog:q()}]),"svelte-8ve3pe")),_(X,M)};V(ve,X=>{q()&&e.noteData.url&&X(ie)})}var ne=F(ve,2),W=P(ne);W.__click=[Nu,e,a,u];var Z=P(W);{let X=R(()=>e.noteData.pinnedAt?"pin-cancel":"pin");be(Z,()=>({"--size":"22px"})),ke(Z.lastChild,{get name(){return s(X)}})}var re=F(Z),te=F(ne,2);{var G=X=>{var M=Iu(),O=P(M);O.__click=[Mu,d,u];var fe=P(O),pe=P(fe);be(pe,()=>({"--size":"18px"})),ke(pe.lastChild,{name:"bin"}),ue(()=>we(O,1,me(["button",{buttonMenuDialog:q()}]),"svelte-8ve3pe")),_(X,M)},K=X=>{var M=Fu(),O=L(M),fe=P(O);fe.__click=[Ou,v,u];var pe=P(fe),D=P(pe);be(D,()=>({"--size":"18px"})),ke(D.lastChild,{name:"bin-cancel"});var I=F(O,2),b=P(I);b.__click=[Ru,h,u];var E=P(b),j=P(E);be(j,()=>({"--size":"18px"})),ke(j.lastChild,{name:"bin"}),ue(()=>{we(fe,1,me(["button",{buttonMenuDialog:q()}]),"svelte-8ve3pe"),we(b,1,me(["button",{buttonMenuDialog:q()}]),"svelte-8ve3pe")}),_(X,M)};V(te,X=>{l()==="notes"?X(G):X(K,!1)})}ue(()=>{we(W,1,me(["button",{buttonMenuDialog:q()}]),"svelte-8ve3pe"),Jt(re,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),_(T,J)},{moveNoteToBin:r,deleteNote:o,pinNote:a,restoreNoteFromBin:i}=Ur();let l=le(e,"mode",3,"notes"),c=le(e,"shownMenu",15),u=z(!1),d=z(!1),v=z(!1),h=z(!1);const{checkMobileSize:g}=Jn();let f=R(g);const p=()=>{o(e.noteId),wn("Draft deleted")},w=async()=>{r(e.noteId),wn("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},S=()=>{i(e.noteId),wn("Note restored from bin",{onCancel:()=>{r(e.noteId)}})},k=()=>{s(d)?(y(d,!1),e.noteData.type==="draft"?p():w()):s(v)&&(y(v,!1),S()),c(!1),y(u,!1)};var m=Uu(),x=L(m);{var N=T=>{var q=U(),J=L(q);{var ve=ne=>{Ta(ne,{get startClose(){return s(u)},onClosed:k,children:(W,Z)=>{n(W,()=>!0)},$$slots:{default:!0}})},ie=ne=>{var W=Hu(),Z=L(W);be(Z,()=>({"--bottom":"-90px","--right":"20px"})),ys(Z.lastChild,{get startClose(){return s(u)},get positionTop(){return e.showMenuUp},onClosed:k,children:(re,te)=>{n(re,()=>!1)},$$slots:{default:!0}}),_(ne,W)};V(J,ne=>{s(f)?ne(ve):ne(ie,!1)})}_(T,q)};V(x,T=>{c()&&T(N)})}var C=F(x,2);{var A=T=>{bs(T,{title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:()=>{o(e.noteId),y(h,!1)},onCancel:()=>{y(h,!1)}})};V(C,T=>{s(h)&&T(A)})}_(t,m),$()}it(["click"]);const Vu=(t,e)=>{y(e,!0)},qu=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),wn("Link copied"),y(n,!1)},Wu=(t,e)=>{y(e,!0)},Yu=(t,e)=>{y(e,!1)},Ku=(t,e,n,r)=>{t.preventDefault(),e.noteData.type==="draft"?n(`${Y.NewNote}`):n(`${Y.EditNote}?id=${e.noteId}`),y(r,!1)};var Gu=H('<div class="iconPlaceholder svelte-1jg44o9"></div>'),Xu=H('<img loading="lazy" class="noteIcon" height="16" width="16" alt=""/>'),Zu=H('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ju=H('<div class="noteIconWrapper svelte-1jg44o9"><!></div>'),Qu=H('<button class="button svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),$u=(t,e)=>{y(e,!1)},ed=H('<!> <a target="_blank" rel="noopener noreferrer" class="button openLink svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),td=H('<li><!> <a class="noteLink svelte-1jg44o9" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function nd(t,e){Q(e,!0);const{pushStackPages:n}=Ft(),{getFaviconEnabled:r}=xl();let o=le(e,"mode",3,"notes"),a=z(!1),i=z(!1),l=z(!1),c=R(r);const{checkMobileSize:u}=Jn(),d=T=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(T).host}.ico`}catch{return""}},v=e.noteData.url||e.noteData.draft?.url||"";var h=td();h.__focusin=[Wu,i],h.__focusout=[Yu,i];var g=P(h);{var f=T=>{var q=Ju(),J=P(q);{var ve=ne=>{var W=U(),Z=L(W);{var re=G=>{var K=Gu();_(G,K)},te=G=>{var K=Xu();ue(X=>xe(K,"src",X),[()=>d(v)]),Sa("error",K,()=>{y(l,!0)}),_(G,K)};V(Z,G=>{s(l)?G(re):G(te,!1)})}_(ne,W)},ie=ne=>{var W=Zu(),Z=L(W);be(Z,()=>({"--size":"16px"})),ke(Z.lastChild,{name:"note"}),_(ne,W)};V(J,ne=>{v?ne(ve):ne(ie,!1)})}_(T,q)};V(g,T=>{s(c)&&T(f)})}var p=F(g,2);p.__click=[Ku,e,n,i];var w=P(p),S=F(p,2),k=P(S);{var m=T=>{var q=ed(),J=L(q);{var ve=Z=>{var re=Qu();re.__click=[qu,e,i];var te=P(re);be(te,()=>({"--size":"20px"})),ke(te.lastChild,{name:"copy"});var G=F(te,2);nt(G,{children:(K,X)=>{var M=De("copy link");_(K,M)}}),ue(()=>xe(re,"tabindex",e.focusHidden?-1:0)),_(Z,re)};V(J,Z=>{u()||Z(ve)})}var ie=F(J,2);ie.__click=[$u,i];var ne=P(ie);be(ne,()=>({"--size":"18px"})),ke(ne.lastChild,{name:"open"});var W=F(ne,2);nt(W,{children:(Z,re)=>{var te=De();ue(()=>Jt(te,e.noteData.draft?.name||e.noteData.name||"unknown")),_(Z,te)}}),ue(()=>{xe(ie,"href",v),xe(ie,"tabindex",e.focusHidden?-1:0)}),_(T,q)};V(k,T=>{v&&T(m)})}var x=F(k,2);x.__click=[Vu,a],we(x,1,me(["button","buttonMenu"]),"svelte-1jg44o9");var N=P(x);be(N,()=>({"--size":"18px","--rotate":"90deg"})),ke(N.lastChild,{name:"menu"});var C=F(N,2);nt(C,{children:(T,q)=>{var J=De("show menu");_(T,J)}});var A=F(S,2);ju(A,{get mode(){return o()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return s(a)},set shownMenu(T){y(a,T,!0)}}),ue((T,q)=>{we(h,1,T,"svelte-1jg44o9"),xe(p,"tabindex",e.focusHidden?-1:0),xe(p,"href",q),Jt(w,e.noteData?.draft?.name||e.noteData?.name||"unknown"),we(S,1,me(["noteMenuWrapper",{noteMenuWrapperActive:s(i)}]),"svelte-1jg44o9"),xe(x,"tabindex",e.focusHidden?-1:0)},[()=>me(["record",{pinned:!!e.noteData.pinnedAt,draft:!!e.noteData.draft}]),()=>`/?stackPages=${encodeURIComponent(`${Y.EditNote}?id=${e.noteId}`)}`]),_(t,h),$()}it(["focusin","focusout","click"]);var qn,Cs,Es;class rd{constructor(e){_e(this,qn);ht(this,"data");ht(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),Oe(this,qn,Cs).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,Oe(this,qn,Es).call(this)),e}isEmpty(){return this.data.length===0}}qn=new WeakSet,Cs=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(n,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},Es=function(){let e=0;const n=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let a=e;if(r<n&&this.compare(this.data[r],this.data[a])<0&&(a=r),o<n&&this.compare(this.data[o],this.data[a])<0&&(a=o),a===e)break;[this.data[e],this.data[a]]=[this.data[a],this.data[e]],e=a}};class ad{constructor(e,n){ht(this,"heap");ht(this,"done");ht(this,"cache",[]);this.heap=new rd(n);for(const r of e)this.heap.insert(r);this.done=!1}get(e,n){const r=this.cache.slice(e,n);for(;r.length<n-e&&!this.heap.isEmpty();){const o=this.heap.extractMin();o!==void 0&&(this.cache.push(o),r.push(o))}return this.heap.isEmpty()&&(this.done=!0),r}}var od=H('<p class="message">No notes in bin</p>'),sd=H('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),id=H('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),ld=H('<p class="message">No notes found</p> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div> <div>or</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),cd=H('<div class="emptyStore svelte-106i4nx"><!></div>'),ud=H("<span>Back to notes</span>"),dd=H('<div class="emptyMessage svelte-106i4nx">No notes in bin</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),fd=H('<div class="emptyMessage svelte-106i4nx">No notes found</div>'),vd=H('<div class="feed svelte-106i4nx"><ul class="svelte-106i4nx"></ul></div>'),hd=H('<div class="wrapperFeed svelte-106i4nx"><div class="wrapperContainer svelte-106i4nx"><!></div></div>');function gd(t,e){Q(e,!0);let n=le(e,"getNotes",3,()=>[]),r=le(e,"mode",3,"notes");const{getScrollContainer:o}=Da(),{createHandlePage:a,getPageUrl:i}=Ft(),{getSelectedTags:l}=ns(),{getFeedOrder:c}=$o(),u=Go();let d=54,v=z(0),h=z(0),g=z(0),f=z(0),p=[],w=z(0),S=z(null),k=R(o),m=null,x=null;const N=R(l);Te(()=>{s(N),s(J),s(k)?.scrollTo(0,0)});const{enable:C}=ds(),A=()=>{C(),m||(m=requestAnimationFrame(()=>{const M=s(k)?.scrollTop||0;y(g,M,!0);const O=Math.ceil(s(v)/d);y(h,Math.floor(M/(d*O))*(d*O)),m=null}))},T=()=>{x||(x=requestAnimationFrame(()=>{y(v,window.innerHeight-180||0,!0);const M=s(k)?.scrollTop||0;y(g,M,!0);const O=Math.ceil(s(v)/d);y(h,Math.floor(M/(d*O))*(d*O)),x=null}))};Ee(()=>{T(),A()});const q=()=>{A()};Te(()=>(s(k)?.addEventListener("scroll",q),window.addEventListener("resize",T),()=>{s(k)?.removeEventListener("scroll",q),window.removeEventListener("resize",T)}));const J=R(c);Te(()=>{const M=n()()||[],O=[],fe=Array.from(s(N).values());for(let pe=M.length-1;pe>=0;pe--){if(!M[pe]||!M[pe].data)continue;const D=M[pe];r()==="notes"&&D?.data.deletedAt||r()==="bin"&&!D?.data.deletedAt||s(N).size&&fe.some(I=>!D.data?.tags.includes(I))&&(!D.data.draft||fe.some(I=>!D.data?.draft?.tags.includes(I)))||u&&!(D.data.name.toLowerCase().includes(u.value.toLowerCase())||D.data.url.toLowerCase().includes(u.value.toLowerCase())||D.data.text.toLowerCase().includes(u.value.toLowerCase()))||O.push(D)}y(f,O.length,!0),p=O,y(w,Date.now(),!0)}),Te(()=>{s(J),s(w),y(S,new ad(p,(M,O)=>{if(!M||!O||!M.data||!O.data)return 0;if(M.data.pinnedAt&&!O.data.pinnedAt)return-1;if(!M.data.pinnedAt&&O.data.pinnedAt)return 1;if(M.data.pinnedAt&&O.data.pinnedAt){if(M.data.pinnedAt<O.data.pinnedAt)return 1;if(M.data.pinnedAt>O.data.pinnedAt)return-1}if(M.data.draft&&!O.data.draft)return-1;if(!M.data.draft&&O.data.draft)return 1;if(M.data.draft&&O.data.draft){if(M.data.draft.updatedAt<O.data.draft.updatedAt)return 1;if(M.data.draft.updatedAt>O.data.draft.updatedAt)return-1}switch(s(J)){case"newest":return M.data.updatedAt<O.data.updatedAt?1:-1;case"oldest":return M.data.updatedAt>O.data.updatedAt?1:-1;case"AtoZ":return M.data.name.localeCompare(O.data.name);case"ZtoA":return O.data.name.localeCompare(M.data.name);default:return 0}}),!0)});const ve=R(()=>s(f)*d);let ne=R(()=>{s(w);const M=Math.ceil(s(v)/d);let O=Math.floor(s(h)/d);return O=O-Math.min(O,M),s(S)?.get(O,O+M*3)||[]}),W=R(()=>d*Math.ceil(s(v)/d));const Z=R(()=>s(h)-Math.min(s(h),s(W)));var re=hd(),te=P(re),G=P(te);{var K=M=>{Ss(M,{})},X=M=>{var O=U(),fe=L(O);{var pe=I=>{var b=cd(),E=P(b);{var j=ee=>{var ge=od();_(ee,ge)},se=ee=>{var ge=ld(),ae=F(L(ge),2),Ne=P(ae);{let He=R(()=>i(Y.NewNote)),je=R(()=>a(Y.NewNote));Ot(Ne,{element:"a",get href(){return s(He)},get onClick(){return s(je)},children:(Ie,yt)=>{var et=sd(),rt=L(et);be(rt,()=>({"--size":"18px","--color":"#b0b0b0"})),ke(rt.lastChild,{name:"plus"}),_(Ie,et)},$$slots:{default:!0}})}var Ae=F(ae,4),$e=P(Ae);{let He=R(()=>i(Y.ImportData)),je=R(()=>a(Y.ImportData));Ot($e,{element:"a",get href(){return s(He)},get onClick(){return s(je)},children:(Ie,yt)=>{var et=id(),rt=L(et);be(rt,()=>({"--size":"18px","--color":"#b0b0b0"})),ke(rt.lastChild,{name:"import"}),_(Ie,et)},$$slots:{default:!0}})}_(ee,ge)};V(E,ee=>{r()==="bin"?ee(j):ee(se,!1)})}_(I,b)},D=I=>{var b=U(),E=L(b);{var j=ee=>{var ge=dd(),ae=F(L(ge),2),Ne=P(ae);{let Ae=R(()=>i("/",{full:!0})),$e=R(()=>a("/",{full:!0}));Ot(Ne,{element:"a",get href(){return s(Ae)},get onClick(){return s($e)},children:(He,je)=>{var Ie=ud();_(He,Ie)},$$slots:{default:!0}})}_(ee,ge)},se=ee=>{var ge=U(),ae=L(ge);{var Ne=$e=>{var He=fd();_($e,He)},Ae=$e=>{var He=vd(),je=P(He);zr(je,23,()=>s(ne),Ie=>Ie.data,(Ie,yt,et)=>{var rt=U(),bt=L(rt);{var Ht=Ut=>{{let Pe=R(()=>s(et)*d<s(g)-s(Z)-d/2||s(et)*d>s(g)-s(Z)+Math.floor(s(v)/d)*d),Ge=R(()=>(s(et)+3)*d<s(g)-s(Z)-d/2||(s(et)+3)*d>s(g)-s(Z)+Math.floor(s(v)/d)*d);nd(Ut,{get mode(){return r()},get focusHidden(){return s(Pe)},get showMenuUp(){return s(Ge)},get noteId(){return s(yt).id},get noteData(){return s(yt).data}})}};V(bt,Ut=>{s(yt).data&&Ut(Ht)})}_(Ie,rt)}),ue(Ie=>{Vn(He,`min-height: ${Ie??""}px`),Vn(je,`transform: translateY(${s(Z)??""}px);`)},[()=>Math.max((s(ve)>s(v),s(ve)),0)]),_($e,He)};V(ae,$e=>{s(ne).length===0?$e(Ne):$e(Ae,!1)},!0)}_(ee,ge)};V(E,ee=>{r()==="bin"&&e.countNotesInBin()===0?ee(j):ee(se,!1)},!0)}_(I,b)};V(fe,I=>{(n()()||[]).length===0||r()==="notes"&&(n()()||[]).length-e.countNotesInBin()===0?I(pe):I(D,!1)},!0)}_(M,O)};V(G,M=>{e.readyNotes?M(X,!1):M(K)})}_(t,re),$()}var pd=H('<!> <div class="content svelte-k57gez"><!></div>',1);function _d(t,e){Q(e,!0);const{getAppHistory:n}=wt(),{getGetNotes:r,isInitedNotes:o,countNotesInBin:a}=Ur(),i=R(o),l=R(r),c=R(()=>n().pathname);var u=pd(),d=L(u);{let g=R(()=>s(c)==="/bin"?"bin":"notes");Tu(d,{get mode(){return s(g)},get getNotes(){return s(l)}})}var v=F(d,2),h=P(v);{let g=R(()=>s(c)==="/bin"?"bin":"notes");gd(h,{get mode(){return s(g)},get getNotes(){return s(l)},get countNotesInBin(){return a},get readyNotes(){return s(i)}})}_(t,u),$()}const eo=(t,e=ye,n=ye,r)=>{let o=Ir(()=>Us(r?.(),!1));var a=U(),i=L(a);{var l=u=>{Re(u,{children:(d,v)=>{qe(d,{get hidden(){return s(o)},get page(){return Y.Settings}})},$$slots:{default:!0}})},c=u=>{var d=U(),v=L(d);{var h=f=>{Re(f,{children:(p,w)=>{qe(p,{get hidden(){return s(o)},get page(){return Y.NewNote}})},$$slots:{default:!0}})},g=f=>{var p=U(),w=L(p);{var S=m=>{Re(m,{children:(x,N)=>{qe(x,{get params(){return n()},get hidden(){return s(o)},get page(){return Y.EditNote}})},$$slots:{default:!0}})},k=m=>{var x=U(),N=L(x);{var C=T=>{Re(T,{children:(q,J)=>{qe(q,{get hidden(){return s(o)},get page(){return Y.ImportData}})},$$slots:{default:!0}})},A=T=>{var q=U(),J=L(q);{var ve=ne=>{Re(ne,{children:(W,Z)=>{qe(W,{get hidden(){return s(o)},get page(){return Y.ExportData}})},$$slots:{default:!0}})},ie=ne=>{var W=U(),Z=L(W);{var re=G=>{Re(G,{children:(K,X)=>{qe(K,{get hidden(){return s(o)},get page(){return Y.ClearStore}})},$$slots:{default:!0}})},te=G=>{var K=U(),X=L(K);{var M=fe=>{Re(fe,{children:(pe,D)=>{uu(pe,{})},$$slots:{default:!0}})},O=fe=>{var pe=U(),D=L(pe);{var I=E=>{Re(E,{children:(j,se)=>{qe(j,{get hidden(){return s(o)},get page(){return Y.Auth}})},$$slots:{default:!0}})},b=E=>{var j=U(),se=L(j);{var ee=ae=>{Re(ae,{children:(Ne,Ae)=>{qe(Ne,{get hidden(){return s(o)},get page(){return Y.Signup}})},$$slots:{default:!0}})},ge=ae=>{var Ne=U(),Ae=L(Ne);{var $e=je=>{Re(je,{children:(Ie,yt)=>{qe(Ie,{get hidden(){return s(o)},get page(){return Y.Signin}})},$$slots:{default:!0}})},He=je=>{var Ie=U(),yt=L(Ie);{var et=bt=>{Re(bt,{children:(Ht,Ut)=>{qe(Ht,{get hidden(){return s(o)},get page(){return Y.AccessKeys}})},$$slots:{default:!0}})},rt=bt=>{var Ht=U(),Ut=L(Ht);{var Pe=Ve=>{Re(Ve,{children:(jt,St)=>{qe(jt,{get hidden(){return s(o)},get page(){return Y.Account}})},$$slots:{default:!0}})},Ge=Ve=>{var jt=U(),St=L(jt);{var an=Vt=>{Re(Vt,{children:(qt,jr)=>{qe(qt,{get hidden(){return s(o)},get page(){return Y.ConfirmAccessKey}})},$$slots:{default:!0}})},on=Vt=>{var qt=U(),jr=L(qt);{var Vr=Pn=>{Re(Pn,{children:(vr,Na)=>{qe(vr,{get hidden(){return s(o)},get page(){return Y.Exit}})},$$slots:{default:!0}})},Ps=Pn=>{var vr=U(),Na=L(vr);{var xs=xn=>{Re(xn,{children:(hr,La)=>{qe(hr,{get hidden(){return s(o)},get page(){return Y.Sync}})},$$slots:{default:!0}})},Ds=xn=>{var hr=U(),La=L(hr);{var As=Dn=>{Re(Dn,{children:(gr,Ba)=>{qe(gr,{get hidden(){return s(o)},get page(){return Y.Subscription}})},$$slots:{default:!0}})},Ts=Dn=>{var gr=U(),Ba=L(gr);{var Ns=An=>{Re(An,{children:(qr,Bs)=>{qe(qr,{get hidden(){return s(o)},get page(){return Y.About}})},$$slots:{default:!0}})},Ls=An=>{Re(An,{children:(qr,Bs)=>{vu(qr,{})},$$slots:{default:!0}})};V(Ba,An=>{e()===Y.About?An(Ns):An(Ls,!1)},!0)}_(Dn,gr)};V(La,Dn=>{e()===Y.Subscription?Dn(As):Dn(Ts,!1)},!0)}_(xn,hr)};V(Na,xn=>{e()===Y.Sync?xn(xs):xn(Ds,!1)},!0)}_(Pn,vr)};V(jr,Pn=>{e()===Y.Exit?Pn(Vr):Pn(Ps,!1)},!0)}_(Vt,qt)};V(St,Vt=>{e()===Y.ConfirmAccessKey?Vt(an):Vt(on,!1)},!0)}_(Ve,jt)};V(Ut,Ve=>{e()===Y.Account?Ve(Pe):Ve(Ge,!1)},!0)}_(bt,Ht)};V(yt,bt=>{e()===Y.AccessKeys?bt(et):bt(rt,!1)},!0)}_(je,Ie)};V(Ae,je=>{e()===Y.Signin?je($e):je(He,!1)},!0)}_(ae,Ne)};V(se,ae=>{e()===Y.Signup?ae(ee):ae(ge,!1)},!0)}_(E,j)};V(D,E=>{e()===Y.Auth?E(I):E(b,!1)},!0)}_(fe,pe)};V(X,fe=>{e()===Y.Start?fe(M):fe(O,!1)},!0)}_(G,K)};V(Z,G=>{e()===Y.ClearStore?G(re):G(te,!1)},!0)}_(ne,W)};V(J,ne=>{e()===Y.ExportData?ne(ve):ne(ie,!1)},!0)}_(T,q)};V(N,T=>{e()===Y.ImportData?T(C):T(A,!1)},!0)}_(m,x)};V(w,m=>{e()===Y.EditNote?m(S):m(k,!1)},!0)}_(f,p)};V(v,f=>{e()===Y.NewNote?f(h):f(g,!1)},!0)}_(u,d)};V(i,u=>{e()===Y.Settings?u(l):u(c,!1)})}_(t,a)};var md=H("<!> <!>",1);function wd(t,e){Q(e,!0);const{getStackPages:n,popStackPages:r}=Ft(),{getAccount:o}=xa();let a=R(n),i=R(()=>o()!==void 0);const{checkMobileSize:l}=Jn();var c=md(),u=L(c);{var d=f=>{_d(f,{})};V(u,f=>{s(i)&&f(d)})}var v=F(u,2);{var h=f=>{var p=U(),w=L(p);zr(w,19,()=>s(a),S=>S.page,(S,k,m)=>{const x=R(()=>s(k).page.split("?")[1]),N=R(()=>s(k).page.split("?")[0]);{let C=R(()=>s(m)!==s(a).length-1&&!!s(a)[s(m)+1]?.shown),A=R(()=>s(m)===0);Za(S,{get shown(){return s(k).shown},get hidden(){return s(C)},get isLastDialog(){return s(A)},children:(T,q)=>{{let J=R(()=>s(m)!==s(a).length-1&&!!s(a)[s(m)+1]?.shown);eo(T,()=>s(N),()=>s(x),()=>s(J))}},$$slots:{default:!0}})}}),_(f,p)},g=f=>{var p=U(),w=L(p);{var S=k=>{const m=R(()=>s(a)[s(a).length-1].page.split("?")[1]),x=R(()=>s(a)[s(a).length-1].page.split("?")[0]);{let N=R(()=>s(a).length===1);Za(k,{onBack:()=>r(),get shown(){return s(a)[s(a).length-1].shown},hidden:!1,get isLastDialog(){return s(N)},children:(C,A)=>{eo(C,()=>s(x),()=>s(m))},$$slots:{default:!0}})}};V(w,k=>{s(a).length>0&&k(S)},!0)}_(f,p)};V(v,f=>{l()?f(h):f(g,!1)})}_(t,c),$()}function yd(t,e){Q(e,!1);let n=0;Ee(()=>{document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const a=r.touches[0].clientX-n;(n<50&&a>0||n>window.innerWidth-50&&a<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Ca(),$()}const bd=(t,e)=>{s(e)&&s(e).scrollTo({top:0})};var Sd=H('<div><button class="buttonTop svelte-1n46o8q"><!> <span class="icon svelte-1n46o8q"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),kd=H('<!> <!> <main><div class="wrapperHeader svelte-1n46o8q"><!></div> <div class="container svelte-1n46o8q"><!></div></main> <!>',1);function Cd(t,e){Q(e,!0);const{navigate:n}=wt(),{hasStackPage:r,pushStackPages:o,clearStackPages:a}=Ft(),{setScrollContainer:i}=Da(),{getAccount:l,init:c}=xa(),{getStackPagesFormUrl:u}=Ft(),{createBroadcastChannel:d,tabId:v}=Hr(),h=d(),{getSidebarState:g}=Ea();Ee(()=>{c(K=>{K===void 0?(n("/"),o("start")):(r("start")&&(a(),n("/")),K?y(k,K):y(k,null))});const G=async K=>{const X=JSON.parse(K.data);if(X.tabId&&X.tabId===v)return;const M=X;M.type==="initLocalAccount"||M.type==="initCloudAccount"||M.type==="updateAccount"||M.type==="disconnectCloudAccount"?(a(),n("/")):M.type==="exit"&&(a(),n("/"),o("start"))};return h.addEventListener(G),()=>h.removeEventListener(G)});const f=Zn();Ee(async()=>{await new Promise(G=>setTimeout(G,100)),await Fo(),f.working=!0});let p=z(!1),w=0,S=R(()=>u().length>0),k=R(l),m=z(null);Te(()=>{i(s(m))});const x=()=>{if(s(m)){const G=s(m).scrollTop||0;G===0?y(p,!1):!s(p)&&w>G?y(p,!0):s(p)&&w+50<G&&y(p,!1),w=G}},N=()=>{x()};Te(()=>(s(m)?.addEventListener("scroll",N),window.addEventListener("resize",N),()=>{s(m)?.removeEventListener("scroll",N),window.removeEventListener("resize",N)}));const C=R(g);var A=kd(),T=L(A);yd(T,{});var q=F(T,2);gc(q,{});var J=F(q,2),ve=P(J),ie=P(ve);{var ne=G=>{qc(G,{})};V(ie,G=>{s(k)!==void 0&&G(ne)})}var W=F(ve,2),Z=P(W);wd(Z,{}),Nt(J,G=>y(m,G),()=>s(m));var re=F(J,2);{var te=G=>{var K=Sd(),X=P(K);X.__click=[bd,m];var M=P(X);nt(M,{children:(pe,D)=>{var I=De("top");_(pe,I)}});var O=F(M,2),fe=P(O);be(fe,()=>({"--rotate":"90deg","--size":"28px"})),ke(fe.lastChild,{name:"back"}),ue(()=>{Vn(K,`--swiping-ratio: ${f.swipingRatio}; --transition-timing-default: ${f.duration}s;`),we(K,1,me(["wrapperButtonTop",{isAnimationOn:f.working&&!f.isSwiping,open:s(S)||s(C).type!=="closed"}]),"svelte-1n46o8q")}),_(G,K)};V(re,G=>{s(p)&&G(te)})}ue(()=>{Vn(J,`--swiping-ratio: ${f.swipingRatio}; --transition-timing-default: ${f.duration}s;`),we(J,1,me(["main",{isAnimationOn:f.working&&!f.isSwiping,open:s(S)||s(C).type!=="closed"}]),"svelte-1n46o8q")}),_(t,A),$()}it(["click"]);function Ed(t){uc(t,{children:(e,n)=>{Cd(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Ji(Ed,{target:document.getElementById("app")});export{Ea as $,xa as A,Ot as B,Ur as C,Sa as D,Ca as E,Dd as F,le as G,lu as H,ke as I,we as J,me as K,Ss as L,Ad as M,Td as N,Vn as O,Y as P,Rl as Q,Jn as R,Nt as S,Sl as T,ks as U,nt as V,ll as W,Hr as X,xl as Y,Zn as Z,sc as _,be as a,ds as a0,he as a1,ws as a2,xe as b,P as c,_ as d,zr as e,H as f,s as g,Ft as h,fr as i,z as j,Fe as k,y as l,V as m,$ as n,Ee as o,Q as p,U as q,L as r,F as s,ue as t,Te as u,it as v,De as w,Jt as x,R as y,wt as z};
