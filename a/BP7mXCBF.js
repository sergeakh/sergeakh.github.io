import{F as z,p as N,G as K,f as y,e as Q,r as E,J as I,K as F,s as b,t as M,b as k,g as n,M as V,N as X,x as Y,c as u,d,O as W,n as q,v as Z,C as tt,z as et,i as at,u as st,j as U,o as rt,m as $,l as L,B as j,w as S,q as P,L as ot}from"./BqxBc7Lq.js";const lt=f=>{const s=Math.floor(Date.now()/1e3),a={};f.forEach(e=>{if(!e)return;const t=e.data.tags||["Imported"];if(t.length===0){a.ROOT||(a.ROOT=[]),a.ROOT.push(e);return}t.forEach(i=>{a[i]||(a[i]=[]),a[i].push(e)})});let l=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>Bookmarks</TITLE>
<H1>Bookmarks</H1>
<DL><p>
<DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}" PERSONAL_TOOLBAR_FOLDER="true">Bookmarks bar</H3>
<DL><p>`;return Object.keys(a).forEach(e=>{e!=="ROOT"&&e!=="other"&&(l+=`
    <DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}">${e}</H3>
    <DL><p>`,a[e].forEach(t=>{const i=t.data.name.replace(/"/g,"&quot;");l+=`
        <DT><A HREF="${t.data.url}" ADD_DATE="${Math.floor(t.data.createdAt/1e3)||s}">${i}</A>`}),l+=`
    </DL><p>`)}),a.ROOT&&a.ROOT.forEach(e=>{const t=e.data.name.replace(/"/g,"&quot;");l+=`
    <DT><A HREF="${e.data.url}" ADD_DATE="${Math.floor(e.data.createdAt/1e3)||s}">${t}</A>`}),l+=`
</DL><p>`,a.other&&a.other.forEach(e=>{const t=e.data.name.replace(/"/g,"&quot;");l+=`
    <DT><A HREF="${e.data.url}" ADD_DATE="${Math.floor(e.data.createdAt/1e3)||s}">${t}</A>`}),l+="</DL><p>",l},nt=async f=>{const s="notes-export.json",a=JSON.stringify({notes:f}),l=new Blob([a],{type:"application/json"}),e=URL.createObjectURL(l),t=document.createElement("a");t.href=e,t.download=s,document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t),URL.revokeObjectURL(e)},0)},ct=(f,s,a)=>{s(f.target.value),a.onChange(s())};var it=y('<input type="radio"/> <label> </label>',1),dt=y('<div class="wrapper svelte-yu87bd"><fieldset class="switcher svelte-yu87bd"><!> <div class="wrapSwitcherStatus svelte-yu87bd"><div class="switcherStatus svelte-yu87bd"></div></div></fieldset></div>');function vt(f,s){const a=z();N(s,!0);let l=K(s,"value",7);const e=`switcher-${a}`;var t=dt(),i=u(t),C=u(i);Q(C,17,()=>s.items,p=>p.title,(p,v)=>{var R=it(),r=E(R);I(r,1,F(["vh","input"]),"svelte-yu87bd"),r.__change=[ct,l,s];var o=b(r,2);I(o,1,F(["switcherButton"]),"svelte-yu87bd");var m=u(o);M(()=>{k(r,"id",`${n(v).title}-${a}`),k(r,"name",e),V(r,n(v).value),X(r,n(v).value===l()),k(r,"aria-label",n(v).title),k(o,"for",`${n(v).title}-${a}`),k(o,"title",n(v).title),k(o,"aria-label",n(v).title),Y(m,n(v).title)}),d(p,R)});var H=b(C,2),w=u(H);M(p=>W(w,p),[()=>`transform: translateX(${s.items.findIndex(p=>p.value===l())*100}%)`]),d(f,t),q()}Z(["change"]);var ut=y('<h4 class="message svelte-1rr554k">Export data</h4> <div class="format-switcher svelte-1rr554k"><!> <p class="format-description svelte-1rr554k"><!></p></div> <div class="buttonContainer svelte-1rr554k"><!></div>',1),ft=y('<p class="message svelte-1rr554k">Exporting data...</p> <div class="buttonContainer svelte-1rr554k"><!></div>',1),pt=y('<p class="message svelte-1rr554k">Data exported successfully!</p> <div class="buttonContainer svelte-1rr554k"><!></div>',1),ht=y('<div class="content svelte-1rr554k"><!></div>');function Tt(f,s){N(s,!0);const{getGetNotes:a}=tt(),{closeDialogStack:l}=et(),{blockDialog:e}=at();let t=U("idle"),i=U("sync");const C=()=>{l()};st(()=>{e(n(t)==="loading")}),rt(()=>()=>{e(!1)});const H=async()=>{L(t,"loading"),setTimeout(async()=>{const r=(a()()||[]).filter(o=>o.data);if(n(i)==="sync")await nt(r).finally(async()=>{await new Promise(o=>setTimeout(o,500)),L(t,"success")});else try{const o=lt(r),m=new Blob([o],{type:"text/html"}),T=URL.createObjectURL(m),h=document.createElement("a");h.href=T,h.download=`bookmarks_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(T),L(t,"success")}catch{L(t,"success")}},0)};var w=ht(),p=u(w);{var v=r=>{var o=ut(),m=b(E(o),2),T=u(m);vt(T,{items:[{title:"Sync",value:"sync"},{title:"Bookmarks",value:"bookmarks"}],get value(){return n(i)},onChange:c=>{L(i,c,!0)}});var h=b(T,2),_=u(h);{var D=c=>{var g=S("App format for sync or backup");d(c,g)},O=c=>{var g=S("Browser bookmarks format (exports only bookmarks, not notes)");d(c,g)};$(_,c=>{n(i)==="sync"?c(D):c(O,!1)})}var x=b(m,2),A=u(x);j(A,{onClick:H,children:(c,g)=>{var B=S("Export");d(c,B)},$$slots:{default:!0}}),d(r,o)},R=r=>{var o=P(),m=E(o);{var T=_=>{var D=ft(),O=b(E(D),2),x=u(O);ot(x,{}),d(_,D)},h=_=>{var D=P(),O=E(D);{var x=A=>{var c=pt(),g=b(E(c),2),B=u(g);j(B,{onClick:C,children:(G,mt)=>{var J=S("Close");d(G,J)},$$slots:{default:!0}}),d(A,c)};$(O,A=>{n(t)==="success"&&A(x)},!0)}d(_,D)};$(m,_=>{n(t)==="loading"?_(T):_(h,!1)},!0)}d(r,o)};$(p,r=>{n(t)==="idle"?r(v):r(R,!1)})}d(f,w),q()}export{Tt as default};
