const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aC7Vl3nEv.js","a/a3TquqTin.css","a/aBX_PGt4b.js","a/a9q_jSmK4.js","a/aBEGDcNQV.js","a/aBrkJtqMH.css","a/aDp9qSCAl.js","a/aDB02xhFr.css","a/aBmLHvOB3.js","a/aB82teprR.css","a/aDJWYn_7Q.js","a/a54d_SC5m.css","a/aBrVJ-ZMw.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/aCUAMdYVd.js","a/aY1d2PU1k.css","a/axep99twN.js","a/aBUbJtIqo.js","a/aBUzlYYyV.css","a/aBlmo2At2.css","a/aDBd7XgEh.js","a/aCSKiTxDI.css","a/aCnEh9W-4.js","a/aBpR5g6jV.css","a/aDsb9_snD.js","a/aBem4Ctjp.css","a/aCNvQ6LEN.js","a/axh7oTZ9j.js","a/aDeSckOjU.css","a/aB7df454N.js","a/aBdnakgrk.css","a/aBTRh37Lt.js","a/aDa9Ga8F-.css","a/auM1VN1S7.js","a/aCH18nfIo.css","a/aDbp_RLJ3.js","a/aBgOyFybG.js","a/aCb6DfA6m.css","a/aBZkY4_rJ.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var il=Object.defineProperty;var Qo=t=>{throw TypeError(t)};var ll=(t,e,a)=>e in t?il(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Nt=(t,e,a)=>ll(t,typeof e!="symbol"?e+"":e,a),$r=(t,e,a)=>e.has(t)||Qo("Cannot "+a);var I=(t,e,a)=>($r(t,e,"read from private field"),a?a.call(t):e.get(t)),Ne=(t,e,a)=>e.has(t)?Qo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),Te=(t,e,a,r)=>($r(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),Ke=(t,e,a)=>($r(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const cl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};cl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const dl=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};dl();const oo=!1;var bs=Array.isArray,ul=Array.prototype.indexOf,Do=Array.from,fl=Object.defineProperty,Hn=Object.getOwnPropertyDescriptor,Ss=Object.getOwnPropertyDescriptors,vl=Object.prototype,hl=Array.prototype,Io=Object.getPrototypeOf,$o=Object.isExtensible;function Ya(t){return typeof t=="function"}const je=()=>{};function gl(t){return typeof t?.then=="function"}function pl(t){return t()}function so(t){for(var e=0;e<t.length;e++)t[e]()}function Cs(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function ml(t,e,a=!1){return t===void 0?a?e():e:t}const Ct=2,Ro=4,Hr=8,_l=1<<24,En=16,Pn=32,fa=64,Ur=128,nn=512,Tt=1024,Ot=2048,Nn=4096,Ut=8192,yn=16384,Lo=32768,Xn=65536,es=1<<17,xs=1<<18,Ua=1<<19,Ts=1<<20,da=32768,io=1<<21,Oo=1<<22,Un=1<<23,Wn=Symbol("$state"),ks=Symbol("legacy props"),wl=Symbol(""),xa=new class extends Error{constructor(){super(...arguments);Nt(this,"name","StaleReactionError");Nt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Es(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function yl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function bl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Sl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Cl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function xl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Tl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function kl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function El(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Pl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Nl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ps=1,Ns=2,As=4,Al=8,Ml=16,Dl=1,Il=2,Rl=4,Ll=8,Ol=16,Fl=1,zl=2,bt=Symbol(),jl="http://www.w3.org/1999/xhtml";function Ms(t){return t===this.v}function Bl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Ds(t){return!Bl(t,this.v)}let Wa=!1,Hl=!1;function Ul(){Wa=!0}let Ge=null;function Oa(t){Ge=t}function st(t){return Is().get(t)}function it(t,e){return Is().set(t,e),e}function le(t,e=!1,a){Ge={p:Ge,i:!1,c:null,e:null,s:t,x:null,l:Wa&&!e?{s:null,u:null,$:[]}:null}}function ce(t){var e=Ge,a=e.e;if(a!==null){e.e=null;for(var r of a)$s(r)}return t!==void 0&&(e.x=t),e.i=!0,Ge=e.p,t??{}}function Va(){return!Wa||Ge!==null&&Ge.l===null}function Is(t){return Ge===null&&Es(),Ge.c??(Ge.c=new Map(Wl(Ge)||void 0))}function Wl(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let na=[];function Rs(){var t=na;na=[],so(t)}function va(t){if(na.length===0&&!Ea){var e=na;queueMicrotask(()=>{e===na&&Rs()})}na.push(t)}function Vl(){for(;na.length>0;)Rs()}function Ls(t){var e=He;if(e===null)return Re.f|=Un,t;if((e.f&Lo)===0){if((e.f&Ur)===0)throw t;e.b.error(t)}else Fa(t,e)}function Fa(t,e){for(;e!==null;){if((e.f&Ur)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Sr=new Set;let Ve=null,Er=null,Zt=null,Xt=[],Wr=null,lo=!1,Ea=!1;var Ma,Da,ra,oa,cr,Ia,Ra,gt,co,$n,uo,Os,Fs;const Or=class Or{constructor(){Ne(this,gt);Nt(this,"committed",!1);Nt(this,"current",new Map);Nt(this,"previous",new Map);Ne(this,Ma,new Set);Ne(this,Da,new Set);Ne(this,ra,0);Ne(this,oa,0);Ne(this,cr,null);Ne(this,Ia,[]);Ne(this,Ra,[]);Nt(this,"skipped_effects",new Set);Nt(this,"is_fork",!1)}is_deferred(){return this.is_fork||I(this,oa)>0}process(e){Xt=[],Er=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)Ke(this,gt,co).call(this,r,a);this.is_fork||Ke(this,gt,Os).call(this),this.is_deferred()?(Ke(this,gt,$n).call(this,a.effects),Ke(this,gt,$n).call(this,a.render_effects),Ke(this,gt,$n).call(this,a.block_effects)):(Er=this,Ve=null,ts(a.render_effects),ts(a.effects),Er=null,I(this,cr)?.resolve()),Zt=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&Un)===0&&(this.current.set(e,e.v),Zt?.set(e,e.v))}activate(){Ve=this,this.apply()}deactivate(){Ve===this&&(Ve=null,Zt=null)}flush(){if(this.activate(),Xt.length>0){if(js(),Ve!==null&&Ve!==this)return}else I(this,ra)===0&&this.process([]);this.deactivate()}discard(){for(const e of I(this,Da))e(this);I(this,Da).clear()}increment(e){Te(this,ra,I(this,ra)+1),e&&Te(this,oa,I(this,oa)+1)}decrement(e){Te(this,ra,I(this,ra)-1),e&&Te(this,oa,I(this,oa)-1),this.revive()}revive(){for(const e of I(this,Ia))kt(e,Ot),ua(e);for(const e of I(this,Ra))kt(e,Nn),ua(e);Te(this,Ia,[]),Te(this,Ra,[]),this.flush()}oncommit(e){I(this,Ma).add(e)}ondiscard(e){I(this,Da).add(e)}settled(){return(I(this,cr)??Te(this,cr,Cs())).promise}static ensure(){if(Ve===null){const e=Ve=new Or;Sr.add(Ve),Ea||Or.enqueue(()=>{Ve===e&&e.flush()})}return Ve}static enqueue(e){va(e)}apply(){}};Ma=new WeakMap,Da=new WeakMap,ra=new WeakMap,oa=new WeakMap,cr=new WeakMap,Ia=new WeakMap,Ra=new WeakMap,gt=new WeakSet,co=function(e,a){e.f^=Tt;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Pn|fa))!==0,i=s&&(o&Tt)!==0,l=i||(o&Ut)!==0||this.skipped_effects.has(r);if((r.f&Ur)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){s?r.f^=Tt:(o&Ro)!==0?a.effects.push(r):gr(r)&&((r.f&En)!==0&&a.block_effects.push(r),or(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===a.effect&&(Ke(this,gt,$n).call(this,a.effects),Ke(this,gt,$n).call(this,a.render_effects),Ke(this,gt,$n).call(this,a.block_effects),a=a.parent),r=u.next,u=u.parent}},$n=function(e){for(const a of e)((a.f&Ot)!==0?I(this,Ia):I(this,Ra)).push(a),Ke(this,gt,uo).call(this,a.deps),kt(a,Tt)},uo=function(e){if(e!==null)for(const a of e)(a.f&Ct)===0||(a.f&da)===0||(a.f^=da,Ke(this,gt,uo).call(this,a.deps))},Os=function(){if(I(this,oa)===0){for(const e of I(this,Ma))e();I(this,Ma).clear()}I(this,ra)===0&&Ke(this,gt,Fs).call(this)},Fs=function(){var s;if(Sr.size>1){this.previous.clear();var e=Zt,a=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const i of Sr){if(i===this){a=!1;continue}const l=[];for(const[u,d]of this.current){if(i.current.has(u))if(a&&d!==i.current.get(u))i.current.set(u,d);else continue;l.push(u)}if(l.length===0)continue;const c=[...i.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var o=Xt;Xt=[];const u=new Set,d=new Map;for(const v of l)Bs(v,c,u,d);if(Xt.length>0){Ve=i,i.apply();for(const v of Xt)Ke(s=i,gt,co).call(s,v,r);i.deactivate()}Xt=o}}Ve=null,Zt=e}this.committed=!0,Sr.delete(this)};let fn=Or;function zs(t){var e=Ea;Ea=!0;try{for(var a;;){if(Vl(),Xt.length===0&&(Ve?.flush(),Xt.length===0))return Wr=null,a;js()}}finally{Ea=e}}function js(){var t=Kn;lo=!0;var e=null;try{var a=0;for(Dr(!0);Xt.length>0;){var r=fn.ensure();if(a++>1e3){var o,s;ql()}r.process(Xt),Vn.clear()}}finally{lo=!1,Dr(t),Wr=null}}function ql(){try{xl()}catch(t){Fa(t,Wr)}}let mn=null;function ts(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(yn|Ut))===0&&gr(r)&&(mn=new Set,or(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?ni(r):r.fn=null),mn?.size>0)){Vn.clear();for(const o of mn){if((o.f&(yn|Ut))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)mn.has(i)&&(mn.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(yn|Ut))===0&&or(c)}}mn.clear()}}mn=null}}function Bs(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Ct)!==0?Bs(o,e,a,r):(s&(Oo|En))!==0&&(s&Ot)===0&&Hs(o,e,r)&&(kt(o,Ot),ua(o))}}function Hs(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Ct)!==0&&Hs(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function ua(t){for(var e=Wr=t;e.parent!==null;){e=e.parent;var a=e.f;if(lo&&e===He&&(a&En)!==0&&(a&xs)===0)return;if((a&(fa|Pn))!==0){if((a&Tt)===0)return;e.f^=Tt}}Xt.push(e)}function Kl(t){let e=0,a=hn(0),r;return()=>{ar()&&(n(a),qr(()=>(e===0&&(r=Ft(()=>t(()=>qn(a)))),e+=1,()=>{va(()=>{e-=1,e===0&&(r?.(),r=void 0,qn(a))})})))}}var Yl=Xn|Ua|Ur;function Xl(t,e,a){new Gl(t,e,a)}var qt,Kt,Mo,ln,sa,cn,Yt,It,dn,wn,On,ia,Fn,la,zn,Fr,yt,Zl,Jl,fo,Pr,Nr,vo;class Gl{constructor(e,a,r){Ne(this,yt);Nt(this,"parent");Ne(this,qt,!1);Ne(this,Kt);Ne(this,Mo,null);Ne(this,ln);Ne(this,sa);Ne(this,cn);Ne(this,Yt,null);Ne(this,It,null);Ne(this,dn,null);Ne(this,wn,null);Ne(this,On,null);Ne(this,ia,0);Ne(this,Fn,0);Ne(this,la,!1);Ne(this,zn,null);Ne(this,Fr,Kl(()=>(Te(this,zn,hn(I(this,ia))),()=>{Te(this,zn,null)})));Te(this,Kt,e),Te(this,ln,a),Te(this,sa,r),this.parent=He.b,Te(this,qt,!!I(this,ln).pending),Te(this,cn,qa(()=>{He.b=this;{var o=Ke(this,yt,fo).call(this);try{Te(this,Yt,Gt(()=>r(o)))}catch(s){this.error(s)}I(this,Fn)>0?Ke(this,yt,Nr).call(this):Te(this,qt,!1)}return()=>{I(this,On)?.remove()}},Yl))}is_pending(){return I(this,qt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!I(this,ln).pending}update_pending_count(e){Ke(this,yt,vo).call(this,e),Te(this,ia,I(this,ia)+e),I(this,zn)&&Sn(I(this,zn),I(this,ia))}get_effect_pending(){return I(this,Fr).call(this),n(I(this,zn))}error(e){var a=I(this,ln).onerror;let r=I(this,ln).failed;if(I(this,la)||!a&&!r)throw e;I(this,Yt)&&(Lt(I(this,Yt)),Te(this,Yt,null)),I(this,It)&&(Lt(I(this,It)),Te(this,It,null)),I(this,dn)&&(Lt(I(this,dn)),Te(this,dn,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&Nl(),fn.ensure(),Te(this,ia,0),I(this,dn)!==null&&Pa(I(this,dn),()=>{Te(this,dn,null)}),Te(this,qt,this.has_pending_snippet()),Te(this,Yt,Ke(this,yt,Pr).call(this,()=>(Te(this,la,!1),Gt(()=>I(this,sa).call(this,I(this,Kt)))))),I(this,Fn)>0?Ke(this,yt,Nr).call(this):Te(this,qt,!1)};var l=Re;try{Rt(null),s=!0,a?.(e,i),s=!1}catch(c){Fa(c,I(this,cn)&&I(this,cn).parent)}finally{Rt(l)}r&&va(()=>{Te(this,dn,Ke(this,yt,Pr).call(this,()=>{fn.ensure(),Te(this,la,!0);try{return Gt(()=>{r(I(this,Kt),()=>e,()=>i)})}catch(c){return Fa(c,I(this,cn).parent),null}finally{Te(this,la,!1)}}))})}}qt=new WeakMap,Kt=new WeakMap,Mo=new WeakMap,ln=new WeakMap,sa=new WeakMap,cn=new WeakMap,Yt=new WeakMap,It=new WeakMap,dn=new WeakMap,wn=new WeakMap,On=new WeakMap,ia=new WeakMap,Fn=new WeakMap,la=new WeakMap,zn=new WeakMap,Fr=new WeakMap,yt=new WeakSet,Zl=function(){try{Te(this,Yt,Gt(()=>I(this,sa).call(this,I(this,Kt))))}catch(e){this.error(e)}Te(this,qt,!1)},Jl=function(){const e=I(this,ln).pending;e&&(Te(this,It,Gt(()=>e(I(this,Kt)))),fn.enqueue(()=>{var a=Ke(this,yt,fo).call(this);Te(this,Yt,Ke(this,yt,Pr).call(this,()=>(fn.ensure(),Gt(()=>I(this,sa).call(this,a))))),I(this,Fn)>0?Ke(this,yt,Nr).call(this):(Pa(I(this,It),()=>{Te(this,It,null)}),Te(this,qt,!1))}))},fo=function(){var e=I(this,Kt);return I(this,qt)&&(Te(this,On,kn()),I(this,Kt).before(I(this,On)),e=I(this,On)),e},Pr=function(e){var a=He,r=Re,o=Ge;gn(I(this,cn)),Rt(I(this,cn)),Oa(I(this,cn).ctx);try{return e()}catch(s){return Ls(s),null}finally{gn(a),Rt(r),Oa(o)}},Nr=function(){const e=I(this,ln).pending;I(this,Yt)!==null&&(Te(this,wn,document.createDocumentFragment()),I(this,wn).append(I(this,On)),oi(I(this,Yt),I(this,wn))),I(this,It)===null&&Te(this,It,Gt(()=>e(I(this,Kt))))},vo=function(e){var a;if(!this.has_pending_snippet()){this.parent&&Ke(a=this.parent,yt,vo).call(a,e);return}Te(this,Fn,I(this,Fn)+e),I(this,Fn)===0&&(Te(this,qt,!1),I(this,It)&&Pa(I(this,It),()=>{Te(this,It,null)}),I(this,wn)&&(I(this,Kt).before(I(this,wn)),Te(this,wn,null)))};function Ql(t,e,a){for(var r=[],o=e.length,s=0;s<o;s++)zo(e[s].e,r,!0);ai(r,()=>{var i=r.length===0&&a!==null;if(i){var l=a,c=l.parentNode;sc(c),c.append(l),t.items.clear(),Qt(t,e[0].prev,e[o-1].next)}for(var u=0;u<o;u++){var d=e[u];i||(t.items.delete(d.k),Qt(t,d.prev,d.next)),Lt(d.e,!i)}t.first===e[0]&&(t.first=e[0].prev)})}function bn(t,e,a,r,o,s=null){var i=t,l=new Map,c=null,u=(e&As)!==0,d=(e&Ps)!==0,v=(e&Ns)!==0;if(u){var h=t;i=h.appendChild(kn())}var g=null,m=vr(()=>{var S=a();return bs(S)?S:S==null?[]:Do(S)}),x,y=!0;function C(){$l(w,x,i,e,r),g!==null&&(x.length===0?(g.fragment?(i.before(g.fragment),g.fragment=null):jo(g.effect),j.first=g.effect):Pa(g.effect,()=>{g=null}))}var j=qa(()=>{x=n(m);for(var S=x.length,B=new Set,M=Ve,D=null,z=Zs(),J=0;J<S;J+=1){var G=x[J],K=r(G,J),ee=y?null:l.get(K);ee?(d&&Sn(ee.v,G),v?Sn(ee.i,J):ee.i=J,z&&M.skipped_effects.delete(ee.e)):(ee=ec(y?i:null,D,G,K,J,o,e,a),y&&(ee.o=!0,D===null?c=ee:D.next=ee,D=ee),l.set(K,ee)),B.add(K)}if(S===0&&s&&!g)if(y)g={fragment:null,effect:Gt(()=>s(i))};else{var Y=document.createDocumentFragment(),T=kn();Y.append(T),g={fragment:Y,effect:Gt(()=>s(T))}}if(!y)if(z){for(const[te,ue]of l)B.has(te)||M.skipped_effects.add(ue.e);M.oncommit(C),M.ondiscard(()=>{})}else C();n(m)}),w={effect:j,items:l,first:c};y=!1}function $l(t,e,a,r,o){var s=(r&Al)!==0,i=e.length,l=t.items,c=t.first,u,d=null,v,h=[],g=[],m,x,y,C;if(s)for(C=0;C<i;C+=1)m=e[C],x=o(m,C),y=l.get(x),y.o&&(y.a?.measure(),(v??(v=new Set)).add(y));for(C=0;C<i;C+=1){if(m=e[C],x=o(m,C),y=l.get(x),t.first??(t.first=y),!y.o){y.o=!0;var j=d?d.next:c;Qt(t,d,y),Qt(t,y,j),eo(y,j,a),d=y,h=[],g=[],c=d.next;continue}if((y.e.f&Ut)!==0&&(jo(y.e),s&&(y.a?.unfix(),(v??(v=new Set)).delete(y))),y!==c){if(u!==void 0&&u.has(y)){if(h.length<g.length){var w=g[0],S;d=w.prev;var B=h[0],M=h[h.length-1];for(S=0;S<h.length;S+=1)eo(h[S],w,a);for(S=0;S<g.length;S+=1)u.delete(g[S]);Qt(t,B.prev,M.next),Qt(t,d,B),Qt(t,M,w),c=w,d=M,C-=1,h=[],g=[]}else u.delete(y),eo(y,c,a),Qt(t,y.prev,y.next),Qt(t,y,d===null?t.first:d.next),Qt(t,d,y),d=y;continue}for(h=[],g=[];c!==null&&c.k!==x;)(c.e.f&Ut)===0&&(u??(u=new Set)).add(c),g.push(c),c=c.next;if(c===null)continue;y=c}h.push(y),d=y,c=y.next}let D=l.size>i;if(c!==null||u!==void 0){for(var z=u===void 0?[]:Do(u);c!==null;)(c.e.f&Ut)===0&&z.push(c),c=c.next;var J=z.length;if(D=l.size-J>i,J>0){var G=(r&As)!==0&&i===0?a:null;if(s){for(C=0;C<J;C+=1)z[C].a?.measure();for(C=0;C<J;C+=1)z[C].a?.fix()}Ql(t,z,G)}}if(D)for(const K of l.values())K.o||(Qt(t,d,K),d=K);t.effect.last=d&&d.e,s&&va(()=>{if(v!==void 0)for(y of v)y.a?.apply()})}function ec(t,e,a,r,o,s,i,l){var c=(i&Ps)!==0,u=(i&Ml)===0,d=c?u?go(a,!1,!1):hn(a):a,v=(i&Ns)===0?o:hn(o),h={i:v,v:d,k:r,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var g=document.createDocumentFragment();g.append(t=kn())}return h.e=Gt(()=>s(t,d,v,l)),e!==null&&(e.next=h),h}finally{}}function eo(t,e,a){for(var r=t.next?t.next.e.nodes_start:a,o=e?e.e.nodes_start:a,s=t.e.nodes_start;s!==null&&s!==r;){var i=hr(s);o.before(s),s=i}}function Qt(t,e,a){e===null?(t.first=a,t.effect.first=a&&a.e):(e.e.next&&(e.e.next.prev=null),e.next=a,e.e.next=a&&a.e),a!==null&&(a.e.prev&&(a.e.prev.next=null),a.prev=e,a.e.prev=e&&e.e)}function tc(t,e,a,r){const o=Va()?fr:vr;if(a.length===0&&t.length===0){r(e.map(o));return}var s=Ve,i=He,l=Us();function c(){Promise.all(a.map(u=>nc(u))).then(u=>{l();try{r([...e.map(o),...u])}catch(d){(i.f&yn)===0&&Fa(d,i)}s?.deactivate(),nr()}).catch(u=>{Fa(u,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return c()}finally{s?.deactivate(),nr()}}):c()}function Us(){var t=He,e=Re,a=Ge,r=Ve;return function(s=!0){gn(t),Rt(e),Oa(a),s&&r?.activate()}}function nr(){gn(null),Rt(null),Oa(null)}function fr(t){var e=Ct|Ot,a=Re!==null&&(Re.f&Ct)!==0?Re:null;return He!==null&&(He.f|=Ua),{ctx:Ge,deps:null,effects:null,equals:Ms,f:e,fn:t,reactions:null,rv:0,v:bt,wv:0,parent:a??He,ac:null}}function nc(t,e){let a=He;a===null&&yl();var r=a.b,o=void 0,s=hn(bt),i=!Re,l=new Map;return vc(()=>{var c=Cs();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===Ve&&u.committed&&u.deactivate(),nr()})}catch(h){c.reject(h),nr()}var u=Ve;if(i){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(xa),l.delete(u),l.set(u,c)}const v=(h,g=void 0)=>{if(u.activate(),g)g!==xa&&(s.f|=Un,Sn(s,g));else{(s.f&Un)!==0&&(s.f^=Un),Sn(s,h);for(const[m,x]of l){if(l.delete(m),m===u)break;x.reject(xa)}}i&&(r.update_pending_count(-1),u.decrement(d))};c.promise.then(v,h=>v(null,h||"unknown"))}),Qs(()=>{for(const c of l.values())c.reject(xa)}),new Promise(c=>{function u(d){function v(){d===o?c(s):u(o)}d.then(v,v)}u(o)})}function E(t){const e=fr(t);return si(e),e}function vr(t){const e=fr(t);return e.equals=Ds,e}function Ws(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Lt(e[a])}}function ac(t){for(var e=t.parent;e!==null;){if((e.f&Ct)===0)return(e.f&yn)===0?e:null;e=e.parent}return null}function Fo(t){var e,a=He;gn(ac(t));try{t.f&=~da,Ws(t),e=di(t)}finally{gn(a)}return e}function Vs(t){var e=Fo(t);if(t.equals(e)||(Ve?.is_fork||(t.v=e),t.wv=li()),!ha)if(Zt!==null)(ar()||Ve?.is_fork)&&Zt.set(t,e);else{var a=(t.f&nn)===0?Nn:Tt;kt(t,a)}}let ho=new Set;const Vn=new Map;let qs=!1;function hn(t,e){var a={f:0,v:t,reactions:null,equals:Ms,rv:0,wv:0};return a}function O(t,e){const a=hn(t);return si(a),a}function go(t,e=!1,a=!0){var o;const r=hn(t);return e||(r.equals=Ds),Wa&&a&&Ge!==null&&Ge.l!==null&&((o=Ge.l).s??(o.s=[])).push(r),r}function f(t,e,a=!1){Re!==null&&(!vn||(Re.f&es)!==0)&&Va()&&(Re.f&(Ct|En|Oo|es))!==0&&!Cn?.includes(t)&&Pl();let r=a?St(e):e;return Sn(t,r)}function Sn(t,e){if(!t.equals(e)){var a=t.v;ha?Vn.set(t,e):Vn.set(t,a),t.v=e;var r=fn.ensure();r.capture(t,a),(t.f&Ct)!==0&&((t.f&Ot)!==0&&Fo(t),kt(t,(t.f&nn)!==0?Tt:Nn)),t.wv=li(),Ks(t,Ot),Va()&&He!==null&&(He.f&Tt)!==0&&(He.f&(Pn|fa))===0&&(Vt===null?pc([t]):Vt.push(t)),!r.is_fork&&ho.size>0&&!qs&&rc()}return e}function rc(){qs=!1;var t=Kn;Dr(!0);const e=Array.from(ho);try{for(const a of e)(a.f&Tt)!==0&&kt(a,Nn),gr(a)&&or(a)}finally{Dr(t)}ho.clear()}function qn(t){f(t,t.v+1)}function Ks(t,e){var a=t.reactions;if(a!==null)for(var r=Va(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===He)){var c=(l&Ot)===0;if(c&&kt(i,e),(l&Ct)!==0){var u=i;Zt?.delete(u),(l&da)===0&&(l&nn&&(i.f|=da),Ks(u,Nn))}else c&&((l&En)!==0&&mn!==null&&mn.add(i),ua(i))}}}function St(t){if(typeof t!="object"||t===null||Wn in t)return t;const e=Io(t);if(e!==vl&&e!==hl)return t;var a=new Map,r=bs(t),o=O(0),s=xn,i=l=>{if(xn===s)return l();var c=Re,u=xn;Rt(null),os(s);var d=l();return Rt(c),os(u),d};return r&&a.set("length",O(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&kl();var d=a.get(c);return d===void 0?d=i(()=>{var v=O(u.value);return a.set(c,v),v}):f(d,u.value,!0),!0},deleteProperty(l,c){var u=a.get(c);if(u===void 0){if(c in l){const d=i(()=>O(bt));a.set(c,d),qn(o)}}else f(u,bt),qn(o);return!0},get(l,c,u){if(c===Wn)return t;var d=a.get(c),v=c in l;if(d===void 0&&(!v||Hn(l,c)?.writable)&&(d=i(()=>{var g=St(v?l[c]:bt),m=O(g);return m}),a.set(c,d)),d!==void 0){var h=n(d);return h===bt?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=a.get(c);d&&(u.value=n(d))}else if(u===void 0){var v=a.get(c),h=v?.v;if(v!==void 0&&h!==bt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){if(c===Wn)return!0;var u=a.get(c),d=u!==void 0&&u.v!==bt||Reflect.has(l,c);if(u!==void 0||He!==null&&(!d||Hn(l,c)?.writable)){u===void 0&&(u=i(()=>{var h=d?St(l[c]):bt,g=O(h);return g}),a.set(c,u));var v=n(u);if(v===bt)return!1}return d},set(l,c,u,d){var v=a.get(c),h=c in l;if(r&&c==="length")for(var g=u;g<v.v;g+=1){var m=a.get(g+"");m!==void 0?f(m,bt):g in l&&(m=i(()=>O(bt)),a.set(g+"",m))}if(v===void 0)(!h||Hn(l,c)?.writable)&&(v=i(()=>O(void 0)),f(v,St(u)),a.set(c,v));else{h=v.v!==bt;var x=i(()=>St(u));f(v,x)}var y=Reflect.getOwnPropertyDescriptor(l,c);if(y?.set&&y.set.call(d,u),!h){if(r&&typeof c=="string"){var C=a.get("length"),j=Number(c);Number.isInteger(j)&&j>=C.v&&f(C,j+1)}qn(o)}return!0},ownKeys(l){n(o);var c=Reflect.ownKeys(l).filter(v=>{var h=a.get(v);return h===void 0||h.v!==bt});for(var[u,d]of a)d.v!==bt&&!(u in l)&&c.push(u);return c},setPrototypeOf(){El()}})}var ns,Ys,Xs,Gs;function oc(){if(ns===void 0){ns=window,Ys=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;Xs=Hn(e,"firstChild").get,Gs=Hn(e,"nextSibling").get,$o(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),$o(a)&&(a.__t=void 0)}}function kn(t=""){return document.createTextNode(t)}function za(t){return Xs.call(t)}function hr(t){return Gs.call(t)}function b(t,e){return za(t)}function R(t,e=!1){{var a=za(t);return a instanceof Comment&&a.data===""?hr(a):a}}function L(t,e=1,a=!1){let r=t;for(;e--;)r=hr(r);return r}function sc(t){t.textContent=""}function Zs(){return!1}let as=!1;function ic(){as||(as=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Vr(t){var e=Re,a=He;Rt(null),gn(null);try{return t()}finally{Rt(e),gn(a)}}function lc(t,e,a,r=a){t.addEventListener(e,()=>Vr(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),ic()}function Js(t){He===null&&(Re===null&&Cl(),Sl()),ha&&bl()}function cc(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function pn(t,e,a){var r=He;r!==null&&(r.f&Ut)!==0&&(t|=Ut);var o={ctx:Ge,deps:null,nodes_start:null,nodes_end:null,f:t|Ot|nn,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(a)try{or(o),o.f|=Lo}catch(l){throw Lt(o),l}else e!==null&&ua(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&Ua)===0&&(s=s.first,(t&En)!==0&&(t&Xn)!==0&&s!==null&&(s.f|=Xn)),s!==null&&(s.parent=r,r!==null&&cc(s,r),Re!==null&&(Re.f&Ct)!==0&&(t&fa)===0)){var i=Re;(i.effects??(i.effects=[])).push(s)}return o}function ar(){return Re!==null&&!vn}function Qs(t){const e=pn(Hr,null,!1);return kt(e,Tt),e.teardown=t,e}function ze(t){Js();var e=He.f,a=!Re&&(e&Pn)!==0&&(e&Lo)===0;if(a){var r=Ge;(r.e??(r.e=[])).push(t)}else return $s(t)}function $s(t){return pn(Ro|Ts,t,!1)}function dc(t){return Js(),pn(Hr|Ts,t,!0)}function uc(t){fn.ensure();const e=pn(fa|Ua,t,!0);return(a={})=>new Promise(r=>{a.outro?Pa(e,()=>{Lt(e),r(void 0)}):(Lt(e),r(void 0))})}function fc(t){return pn(Ro,t,!1)}function vc(t){return pn(Oo|Ua,t,!0)}function qr(t,e=0){return pn(Hr|e,t,!0)}function me(t,e=[],a=[],r=[]){tc(r,e,a,o=>{pn(Hr,()=>t(...o.map(n)),!0)})}function qa(t,e=0){var a=pn(En|e,t,!0);return a}function Gt(t){return pn(Pn|Ua,t,!0)}function ei(t){var e=t.teardown;if(e!==null){const a=ha,r=Re;rs(!0),Rt(null);try{e.call(null)}finally{rs(a),Rt(r)}}}function ti(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&Vr(()=>{o.abort(xa)});var r=a.next;(a.f&fa)!==0?a.parent=null:Lt(a,e),a=r}}function hc(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&Pn)===0&&Lt(e),e=a}}function Lt(t,e=!0){var a=!1;(e||(t.f&xs)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(gc(t.nodes_start,t.nodes_end),a=!0),ti(t,e&&!a),Ir(t,0),kt(t,yn);var r=t.transitions;if(r!==null)for(const s of r)s.stop();ei(t);var o=t.parent;o!==null&&o.first!==null&&ni(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function gc(t,e){for(;t!==null;){var a=t===e?null:hr(t);t.remove(),t=a}}function ni(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function Pa(t,e,a=!0){var r=[];zo(t,r,!0),ai(r,()=>{a&&Lt(t),e&&e()})}function ai(t,e){var a=t.length;if(a>0){var r=()=>--a||e();for(var o of t)o.out(r)}else e()}function zo(t,e,a){if((t.f&Ut)===0){if(t.f^=Ut,t.transitions!==null)for(const i of t.transitions)(i.is_global||a)&&e.push(i);for(var r=t.first;r!==null;){var o=r.next,s=(r.f&Xn)!==0||(r.f&Pn)!==0&&(t.f&En)!==0;zo(r,e,s?a:!1),r=o}}}function jo(t){ri(t,!0)}function ri(t,e){if((t.f&Ut)!==0){t.f^=Ut,(t.f&Tt)===0&&(kt(t,Ot),ua(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&Xn)!==0||(a.f&Pn)!==0;ri(a,o?e:!1),a=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function oi(t,e){for(var a=t.nodes_start,r=t.nodes_end;a!==null;){var o=a===r?null:hr(a);e.append(a),a=o}}let Kn=!1;function Dr(t){Kn=t}let ha=!1;function rs(t){ha=t}let Re=null,vn=!1;function Rt(t){Re=t}let He=null;function gn(t){He=t}let Cn=null;function si(t){Re!==null&&(Cn===null?Cn=[t]:Cn.push(t))}let At=null,jt=0,Vt=null;function pc(t){Vt=t}let ii=1,rr=0,xn=rr;function os(t){xn=t}function li(){return++ii}function gr(t){var e=t.f;if((e&Ot)!==0)return!0;if(e&Ct&&(t.f&=~da),(e&Nn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(gr(s)&&Vs(s),s.wv>t.wv)return!0}(e&nn)!==0&&Zt===null&&kt(t,Tt)}return!1}function ci(t,e,a=!0){var r=t.reactions;if(r!==null&&!Cn?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Ct)!==0?ci(s,e,!1):e===s&&(a?kt(s,Ot):(s.f&Tt)!==0&&kt(s,Nn),ua(s))}}function di(t){var m;var e=At,a=jt,r=Vt,o=Re,s=Cn,i=Ge,l=vn,c=xn,u=t.f;At=null,jt=0,Vt=null,Re=(u&(Pn|fa))===0?t:null,Cn=null,Oa(t.ctx),vn=!1,xn=++rr,t.ac!==null&&(Vr(()=>{t.ac.abort(xa)}),t.ac=null);try{t.f|=io;var d=t.fn,v=d(),h=t.deps;if(At!==null){var g;if(Ir(t,jt),h!==null&&jt>0)for(h.length=jt+At.length,g=0;g<At.length;g++)h[jt+g]=At[g];else t.deps=h=At;if(Kn&&ar()&&(t.f&nn)!==0)for(g=jt;g<h.length;g++)((m=h[g]).reactions??(m.reactions=[])).push(t)}else h!==null&&jt<h.length&&(Ir(t,jt),h.length=jt);if(Va()&&Vt!==null&&!vn&&h!==null&&(t.f&(Ct|Nn|Ot))===0)for(g=0;g<Vt.length;g++)ci(Vt[g],t);return o!==null&&o!==t&&(rr++,Vt!==null&&(r===null?r=Vt:r.push(...Vt))),(t.f&Un)!==0&&(t.f^=Un),v}catch(x){return Ls(x)}finally{t.f^=io,At=e,jt=a,Vt=r,Re=o,Cn=s,Oa(i),vn=l,xn=c}}function mc(t,e){let a=e.reactions;if(a!==null){var r=ul.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&Ct)!==0&&(At===null||!At.includes(e))&&(kt(e,Nn),(e.f&nn)!==0&&(e.f^=nn,e.f&=~da),Ws(e),Ir(e,0))}function Ir(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)mc(t,a[r])}function or(t){var e=t.f;if((e&yn)===0){kt(t,Tt);var a=He,r=Kn;He=t,Kn=!0;try{(e&(En|_l))!==0?hc(t):ti(t),ei(t);var o=di(t);t.teardown=typeof o=="function"?o:null,t.wv=ii;var s;oo&&Hl&&(t.f&Ot)!==0&&t.deps}finally{Kn=r,He=a}}}async function ui(){await Promise.resolve(),zs()}function n(t){var e=t.f,a=(e&Ct)!==0;if(Re!==null&&!vn){var r=He!==null&&(He.f&yn)!==0;if(!r&&!Cn?.includes(t)){var o=Re.deps;if((Re.f&io)!==0)t.rv<rr&&(t.rv=rr,At===null&&o!==null&&o[jt]===t?jt++:At===null?At=[t]:At.includes(t)||At.push(t));else{(Re.deps??(Re.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Re]:s.includes(Re)||s.push(Re)}}}if(ha){if(Vn.has(t))return Vn.get(t);if(a){var i=t,l=i.v;return((i.f&Tt)===0&&i.reactions!==null||vi(i))&&(l=Fo(i)),Vn.set(i,l),l}}else a&&(!Zt?.has(t)||Ve?.is_fork&&!ar())&&(i=t,gr(i)&&Vs(i),Kn&&ar()&&(i.f&nn)===0&&fi(i));if(Zt?.has(t))return Zt.get(t);if((t.f&Un)!==0)throw t.v;return t.v}function fi(t){if(t.deps!==null){t.f^=nn;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&Ct)!==0&&(e.f&nn)===0&&fi(e)}}function vi(t){if(t.v===bt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Vn.has(e)||(e.f&Ct)!==0&&vi(e))return!0;return!1}function Ft(t){var e=vn;try{return vn=!0,t()}finally{vn=e}}const _c=-7169;function kt(t,e){t.f=t.f&_c|e}function wc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Wn in t)po(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&Wn in a&&po(a)}}}function po(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{po(t[r],e)}catch{}const a=Io(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Ss(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const yc=["touchstart","touchmove"];function bc(t){return yc.includes(t)}const hi=new Set,mo=new Set;function Sc(t,e,a,r={}){function o(s){if(r.capture||Ga.call(e,s),!s.cancelBubble)return Vr(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?va(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function an(t,e,a,r,o){var s={capture:r,passive:o},i=Sc(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Qs(()=>{e.removeEventListener(t,i,s)})}function lt(t){for(var e=0;e<t.length;e++)hi.add(t[e]);for(var a of mo)a(t)}let ss=null;function Ga(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;ss=t;var i=0,l=ss===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){fl(t,"currentTarget",{configurable:!0,get(){return s||a}});var d=Re,v=He;Rt(null),gn(null);try{for(var h,g=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var x=s["__"+r];x!=null&&(!s.disabled||t.target===s)&&x.call(s,t)}catch(y){h?g.push(y):h=y}if(t.cancelBubble||m===e||m===null)break;s=m}if(h){for(let y of g)queueMicrotask(()=>{throw y});throw h}}finally{t.__root=e,delete t.currentTarget,Rt(d),gn(v)}}}function gi(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function sr(t,e){var a=He;a.nodes_start===null&&(a.nodes_start=t,a.nodes_end=e)}function N(t,e){var a=(e&Fl)!==0,r=(e&zl)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=gi(s?t:"<!>"+t),a||(o=za(o)));var i=r||Ys?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=za(i),c=i.lastChild;sr(l,c)}else sr(i,i);return i}}function Cc(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=gi(o),l=za(i);s=za(l)}var c=s.cloneNode(!0);return sr(c,c),c}}function xc(t,e){return Cc(t,e,"svg")}function Ae(t=""){{var e=kn(t+"");return sr(e,e),e}}function ie(){var t=document.createDocumentFragment(),e=document.createComment(""),a=kn();return t.append(e,a),sr(e,a),t}function p(t,e){t!==null&&t.before(e)}function Ch(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function ut(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Tc(t,e){return kc(t,e)}const Sa=new Map;function kc(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){oc();var l=new Set,c=v=>{for(var h=0;h<v.length;h++){var g=v[h];if(!l.has(g)){l.add(g);var m=bc(g);e.addEventListener(g,Ga,{passive:m});var x=Sa.get(g);x===void 0?(document.addEventListener(g,Ga,{passive:m}),Sa.set(g,1)):Sa.set(g,x+1)}}};c(Do(hi)),mo.add(c);var u=void 0,d=uc(()=>{var v=a??e.appendChild(kn());return Xl(v,{pending:()=>{}},h=>{if(s){le({});var g=Ge;g.c=s}o&&(r.$$events=o),u=t(h,r)||{},s&&ce()}),()=>{for(var h of l){e.removeEventListener(h,Ga);var g=Sa.get(h);--g===0?(document.removeEventListener(h,Ga),Sa.delete(h)):Sa.set(h,g)}mo.delete(c),v!==a&&v.parentNode?.removeChild(v)}});return Ec.set(u,d),u}let Ec=new WeakMap;var en,un,Ht,ca,dr,ur,zr;class Kr{constructor(e,a=!0){Nt(this,"anchor");Ne(this,en,new Map);Ne(this,un,new Map);Ne(this,Ht,new Map);Ne(this,ca,new Set);Ne(this,dr,!0);Ne(this,ur,()=>{var e=Ve;if(I(this,en).has(e)){var a=I(this,en).get(e),r=I(this,un).get(a);if(r)jo(r),I(this,ca).delete(a);else{var o=I(this,Ht).get(a);o&&(I(this,un).set(a,o.effect),I(this,Ht).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of I(this,en)){if(I(this,en).delete(s),s===e)break;const l=I(this,Ht).get(i);l&&(Lt(l.effect),I(this,Ht).delete(i))}for(const[s,i]of I(this,un)){if(s===a||I(this,ca).has(s))continue;const l=()=>{if(Array.from(I(this,en).values()).includes(s)){var u=document.createDocumentFragment();oi(i,u),u.append(kn()),I(this,Ht).set(s,{effect:i,fragment:u})}else Lt(i);I(this,ca).delete(s),I(this,un).delete(s)};I(this,dr)||!r?(I(this,ca).add(s),Pa(i,l,!1)):l()}}});Ne(this,zr,e=>{I(this,en).delete(e);const a=Array.from(I(this,en).values());for(const[r,o]of I(this,Ht))a.includes(r)||(Lt(o.effect),I(this,Ht).delete(r))});this.anchor=e,Te(this,dr,a)}ensure(e,a){var r=Ve,o=Zs();if(a&&!I(this,un).has(e)&&!I(this,Ht).has(e))if(o){var s=document.createDocumentFragment(),i=kn();s.append(i),I(this,Ht).set(e,{effect:Gt(()=>a(i)),fragment:s})}else I(this,un).set(e,Gt(()=>a(this.anchor)));if(I(this,en).set(r,e),o){for(const[l,c]of I(this,un))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of I(this,Ht))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(I(this,ur)),r.ondiscard(I(this,zr))}else I(this,ur).call(this)}}en=new WeakMap,un=new WeakMap,Ht=new WeakMap,ca=new WeakMap,dr=new WeakMap,ur=new WeakMap,zr=new WeakMap;const Pc=0,to=1;function Nc(t,e,a,r,o){var s=Va(),i=bt,l=s?hn(i):go(i,!1,!1),c=s?hn(i):go(i,!1,!1),u=new Kr(t);qa(()=>{var d=e(),v=!1;if(gl(d)){var h=Us(),g=!1;const m=x=>{if(!v){g=!0,h(!1),fn.ensure();try{x()}finally{nr(),Ea||zs()}}};d.then(x=>{m(()=>{Sn(l,x),u.ensure(to,r&&(y=>r(y,l)))})},x=>{m(()=>{if(Sn(c,x),u.ensure(to,o&&(y=>o(y,c))),!o)throw c.v})}),va(()=>{g||m(()=>{u.ensure(Pc,a)})})}else Sn(l,d),u.ensure(to,r&&(m=>r(m,l)));return()=>{v=!0}})}function U(t,e,a=!1){var r=new Kr(t),o=a?Xn:0;function s(i,l){r.ensure(i,l)}qa(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function ve(t,e){qr(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function ke(t,e,...a){var r=new Kr(t);qa(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},Xn)}function Ac(t,e,a){var r=new Kr(t);qa(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},Xn)}function pi(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=pi(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function Mc(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=pi(t))&&(r&&(r+=" "),r+=e);return r}function rt(t){return typeof t=="object"?Mc(t):t??""}const is=[...` 	
\r\fÂ \v\uFEFF`];function Dc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||is.includes(r[i-1]))&&(l===r.length||is.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Ic(t,e){return t==null?null:String(t)}function $e(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=Dc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function ja(t,e,a,r){var o=t.__style;if(o!==e){var s=Ic(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Rc=Symbol("is custom element"),Lc=Symbol("is html");function xh(t,e){var a=Bo(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Oc(t,e){var a=Bo(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function Qe(t,e,a,r){var o=Bo(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[wl]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Fc(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Bo(t){return t.__attributes??(t.__attributes={[Rc]:t.nodeName.includes("-"),[Lc]:t.namespaceURI===jl})}var ls=new Map;function Fc(t){var e=t.getAttribute("is")||t.nodeName,a=ls.get(e);if(a)return a;ls.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Ss(o);for(var i in r)r[i].set&&a.push(i);o=Io(o)}return a}function mi(t,e,a=e){var r=new WeakSet;lc(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=no(t)?ao(s):s,a(s),Ve!==null&&r.add(Ve),await ui(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),Ft(e)==null&&t.value&&(a(no(t)?ao(t.value):t.value),Ve!==null&&r.add(Ve)),qr(()=>{var o=e();if(t===document.activeElement){var s=Er??Ve;if(r.has(s))return}no(t)&&o===ao(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function no(t){var e=t.type;return e==="number"||e==="range"}function ao(t){return t===""?null:+t}function cs(t,e){return t===e||t?.[Wn]===e}function et(t={},e,a,r){return fc(()=>{var o,s;return qr(()=>{o=s,s=[],Ft(()=>{t!==a(...s)&&(e(t,...s),o&&cs(a(...o),t)&&e(null,...o))})}),()=>{va(()=>{s&&cs(a(...s),t)&&e(null,...s)})}}),t}function Yr(t=!1){const e=Ge,a=e.l.u;if(!a)return;let r=()=>wc(e.s);if(t){let o=0,s={};const i=fr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&dc(()=>{ds(e,r),so(a.b)}),ze(()=>{const o=Ft(()=>a.m.map(pl));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&ze(()=>{ds(e,r),so(a.a)})}function ds(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Cr=!1;function zc(t){var e=Cr;try{return Cr=!1,[t(),Cr]}finally{Cr=e}}const jc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Bc(t,e,a){return new Proxy({props:t,exclude:e},jc)}const Hc={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(Ya(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];Ya(o)&&(o=o());const s=Hn(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(Ya(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=Hn(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===Wn||e===ks)return!1;for(let a of t.props)if(Ya(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(Ya(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function _o(...t){return new Proxy({props:t},Hc)}function Pe(t,e,a,r){var o=!Wa||(a&Il)!==0,s=(a&Ll)!==0,i=(a&Ol)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?Ft(r):r),l),d;if(s){var v=Wn in t||ks in t;d=Hn(t,e)?.set??(v&&e in t?w=>t[e]=w:void 0)}var h,g=!1;s?[h,g]=zc(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=u(),d&&(o&&Tl(),d(h)));var m;if(o?m=()=>{var w=t[e];return w===void 0?u():(c=!0,w)}:m=()=>{var w=t[e];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(a&Rl)===0)return m;if(d){var x=t.$$legacy;return(function(w,S){return arguments.length>0?((!o||!S||x||g)&&d(S?m():w),w):m()})}var y=!1,C=((a&Dl)!==0?fr:vr)(()=>(y=!1,m()));s&&n(C);var j=He;return(function(w,S){if(arguments.length>0){const B=S?n(C):o&&s?St(w):w;return f(C,B),y=!0,l!==void 0&&(l=B),w}return ha&&y||(j.f&yn)!==0?C.v:n(C)})}function pe(t){Ge===null&&Es(),Wa&&Ge.l!==null?Uc(Ge).m.push(t):ze(()=>{const e=Ft(t);if(typeof e=="function")return e})}function Uc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Wc="5";var ys;typeof window<"u"&&((ys=window.__svelte??(window.__svelte={})).v??(ys.v=new Set)).add(Wc);Ul();const _i={};function Vc(t){it(_i,t)}function Ho(){const t=st(_i);if(!t)throw new Error("No FeedSearchContext found");return t}const wi={};function qc(t){it(wi,t)}function Jt(){const t=st(wi);if(!t)throw new Error("No SearchParamsContext found");return t}function Kc(t,e){le(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Jt(),s="feedSearch",i=E(()=>o().get(s)||""),l=E(()=>n(i));Vc({getFeedSearch:()=>n(l),setFeedSearch:d=>{d===""?r(s):a(s,d)}});var c=ie(),u=R(c);ke(u,()=>e.children??je),p(t,c),ce()}const yi={};function Yc(t){it(yi,t)}function Xc(){const t=st(yi);if(!t)throw new Error("No TagsSearchContext found");return t}function Gc(t,e){le(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Jt(),s="tagsSearch",i=E(()=>o().get(s)||""),l=E(()=>n(i));Yc({getTagsSearch:()=>n(l),setTagsSearch:d=>{d===""?r(s):a(s,d)}});var c=ie(),u=R(c);ke(u,()=>e.children??je),p(t,c),ce()}const bi={};function Zc(t){it(bi,t)}function Si(){const t=st(bi);if(!t)throw new Error("No FeedOrderContext found");return t}function Jc(t,e){le(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Jt(),s="feedOrder",i=E(()=>o().get(s)||"newest"),l=E(()=>n(i));Zc({getFeedOrder:()=>n(l),setFeedOrder:d=>{d==="newest"?r(s):a(s,d)}});var c=ie(),u=R(c);ke(u,()=>e.children??je),p(t,c),ce()}const Ci={};function Qc(t){it(Ci,t)}function pr(){const t=st(Ci);if(!t)throw new Error("No SidebarContext found");return t}function $c(t,e){le(e,!0);let a=O("closed");Qc({sidebarOpen:()=>{f(a,"preOpening")},sidebarClose:()=>{f(a,"closing")},getSidebarState:()=>n(a),setSidebarState:u=>{f(a,u,!0)}});var l=ie(),c=R(l);ke(c,()=>e.children??je),p(t,l),ce()}const xi={};function ed(t){it(xi,t)}function An(){const t=st(xi);if(!t)throw new Error("No SelectedTagsContext found");return t}function td(t,e){le(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Jt(),s=E(a),i="selectedTags";let l=E(()=>n(s).get(i)||""),c=E(()=>new Set(n(l).split(",").map(y=>decodeURIComponent(y)).filter(y=>y!=="")));ed({getSelectedTags:()=>n(c),addTag:y=>{n(c).has(y)||r(i,[...n(c),y].map(C=>encodeURIComponent(C)).join(","))},removeTag:y=>{n(c).has(y)&&n(c).size===1?o(i):n(c).has(y)&&r(i,[...n(c)].filter(C=>C!==y).map(C=>encodeURIComponent(C)).join(","))},clearTags:()=>{o(i)},setSelectedTags:y=>{y.size===0?o(i):r(i,[...y].map(C=>encodeURIComponent(C)).join(","))}});var m=ie(),x=R(m);ke(x,()=>e.children??je),p(t,m),ce()}const Ti={};function nd(t){it(Ti,t)}function ga(){const t=st(Ti);if(!t)throw new Error("No SelectedNotesContext found");return t}var ad=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],rd=["difference","intersection","symmetricDifference","union"],us=!1,La,tn,jn,jr,Ba,ki,Ei;const Br=class Br extends Set{constructor(a){super();Ne(this,Ba);Ne(this,La,new Map);Ne(this,tn,O(0));Ne(this,jn,O(0));Ne(this,jr,xn||-1);if(a){for(var r of a)super.add(r);I(this,jn).v=super.size}us||Ke(this,Ba,Ei).call(this)}has(a){var r=super.has(a),o=I(this,La),s=o.get(a);if(s===void 0){if(!r)return n(I(this,tn)),!1;s=Ke(this,Ba,ki).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),f(I(this,jn),super.size),qn(I(this,tn))),this}delete(a){var r=super.delete(a),o=I(this,La),s=o.get(a);return s!==void 0&&(o.delete(a),f(s,!1)),r&&(f(I(this,jn),super.size),qn(I(this,tn))),r}clear(){if(super.size!==0){super.clear();var a=I(this,La);for(var r of a.values())f(r,!1);a.clear(),f(I(this,jn),0),qn(I(this,tn))}}keys(){return this.values()}values(){return n(I(this,tn)),super.values()}entries(){return n(I(this,tn)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(I(this,jn))}};La=new WeakMap,tn=new WeakMap,jn=new WeakMap,jr=new WeakMap,Ba=new WeakSet,ki=function(a){return xn===I(this,jr)?O(a):hn(a)},Ei=function(){us=!0;var a=Br.prototype,r=Set.prototype;for(const o of ad)a[o]=function(...s){return n(I(this,tn)),r[o].apply(this,s)};for(const o of rd)a[o]=function(...s){n(I(this,tn));var i=r[o].apply(this,s);return new Br(i)}};let wo=Br;function od(t,e){le(e,!0);let a=new wo,r=O("single");const o=()=>a,s=g=>{a.clear(),g.forEach(m=>a.add(m))},i=g=>{a.add(g)},l=g=>{a.delete(g)},c=()=>{a.clear()};nd({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:c,getMode:()=>n(r),changeMode:g=>{f(r,g,!0),g==="single"&&c()}});var v=ie(),h=R(v);ke(h,()=>e.children??je),p(t,v),ce()}const Pi={};function sd(t){it(Pi,t)}function Uo(){const t=st(Pi);if(!t)throw new Error("No LocalDBContext found");return t}const Ni={};function id(t){it(Ni,t)}function yo(){const t=st(Ni);if(!t)throw new Error("No SettingsContext found");return t}const Ai={};function ld(t){it(Ai,t)}function Xr(){const t=st(Ai);if(!t)throw new Error("No BroadcastContext found");return t}const cd="AppStorage",dd=1,Za="account",Ja="settings",Ye="notes",Dt="tags",ud="syncLog",Gn="success",Zn="error",wt=(t,e,a)=>{t?.addEventListener(e,a)},fs=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();wt(s,Gn,()=>{const i=s?.result||[];a(i)}),wt(s,Zn,i=>{r(i)})}),Rr=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);wt(i,Gn,()=>{const l=i?.result?.data;r(l)}),wt(i,Zn,l=>{o(l)})}),aa=(t,e,a,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});wt(c,Gn,()=>{o()}),wt(c,Zn,u=>{s(u)})}),ct=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{wt(i,Gn,()=>{l()}),wt(i,Zn,u=>{c(u)})})}))},ro=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);wt(l,Gn,()=>{r()}),wt(l,Zn,c=>{o(c)})}),Xa=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{wt(i,Gn,()=>{l()}),wt(i,Zn,u=>{c(u)})})}))},Ta=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();wt(i,Gn,()=>{a()}),wt(i,Zn,l=>{r(l)})});function fd(t,e){le(e,!0);const{deleteSearchParam:a}=Jt(),r="viewMode";let s=St((()=>{const D=new URLSearchParams(window.location.search).get(r)||"tab";return D==="popup"||D==="window"||D==="tab"||D==="sidebar"?D:"tab"})());pe(()=>{a(r)});let i=O(!1),l=O(St({showFavicon:!0,recordMode:"note"}));const{getDB:c}=Uo(),{createBroadcastChannel:u,tabId:d}=Xr(),v=u(),h=E(c),g=async()=>{const M=await Rr(n(h),Ja,"default");M&&f(l,M,!0)},m=async()=>{await g(),f(i,!0)},x=async M=>{const D=JSON.parse(M.data),z=D;if(D.tabId&&D.tabId===d){z.type==="exit"&&(f(l,{showFavicon:!0,recordMode:"note"},!0),Ta(n(h),Ja));return}z.type==="updateSettings"?g():z.type==="exit"&&f(l,{showFavicon:!0,recordMode:"note"},!0)},y=()=>n(l).showFavicon,C=()=>n(l).recordMode,j=async M=>{n(l).showFavicon=M,await aa(n(h),Ja,"default",{...n(l)}),v.postMessage({type:"updateSettings"})},w=async M=>{n(l).recordMode=M,await aa(n(h),Ja,"default",{...n(l)}),v.postMessage({type:"updateSettings"})};pe(()=>(m(),v.addEventListener(x),()=>{v.removeEventListener(x)})),id({getFaviconEnabled:y,getRecordMode:C,setRecordMode:w,setFaviconShown:j,isInitedSettings:()=>n(i),getViewMode:()=>s});var S=ie(),B=R(S);ke(B,()=>e.children??je),p(t,S),ce()}const Mi={};function vd(t){it(Mi,t)}function Di(){const t=st(Mi);if(!t)throw new Error("No AccountContext found");return t}function hd(t,e){le(e,!0);let a=O(void 0);const{getDB:r}=Uo(),{createBroadcastChannel:o,tabId:s}=Xr(),i=E(r),l=o(),c=async()=>{const w=await Rr(n(i),Za,"default");f(a,w,!0)},u=w=>aa(n(i),Za,"default",w),d=async w=>{const S=await Rr(n(i),Za,"default");S!==void 0&&f(a,S,!0),w(S)},v=async w=>{const S=JSON.parse(w.data);if(S.tabId&&S.tabId===s)return;const B=S;B.type==="initLocalAccount"?f(a,null):B.type==="initCloudAccount"?c():B.type==="disconnectCloudAccount"?f(a,null):B.type==="exit"?f(a,void 0):B.type==="updateAccount"&&c()};pe(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),vd({init:d,getAccount:()=>n(a),initLocalAccount:async()=>{f(a,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async w=>{const S={encryptedClientKey:w.encryptedClientKey||"",subscriptionExpires:w.subscriptionExpires||-1,lastSync:-1};await u(S),f(a,S,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{f(a,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async w=>{if(!n(a))throw new Error("No account to update subscription for");const S={...n(a),subscriptionExpires:w};await u(S),l.postMessage({type:"updateAccount"})},exitApp:async()=>{f(a,void 0),l.postMessage({type:"exit"}),await Ta(n(i),Za)}});var C=ie(),j=R(C);ke(j,()=>e.children??je),p(t,C),ce()}const Ii={};function gd(t){it(Ii,t)}function zt(){const t=st(Ii);if(!t)throw new Error("No NotesContext found");return t}const Rn=()=>crypto.randomUUID(),pd=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},Ri=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function Th(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const pt=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function md(t,e){le(e,!0);const{getDB:a}=Uo(),{createBroadcastChannel:r,tabId:o}=Xr(),s=E(a),i=r(),l=720*60*60*1e3;let c=O(!1),u=O(()=>new Map),d=O(()=>[]),v=O(()=>new Map);const h=()=>n(c),g=()=>n(d)().some(_=>_.data&&!_.data.deletedAt&&!_.data.archivedAt),m=()=>n(d)().some(_=>_.data&&_.data.deletedAt),x=()=>n(d)().some(_=>_.data&&_.data.archivedAt&&!_.data.deletedAt),y=_=>{const A=n(d)(),k=n(v)(),F=k.get(_.id);F?F.data=_.data:(A.push(_),k.set(_.id,_)),f(d,()=>A),f(v,()=>k)},C=_=>{const A=n(d)(),k=n(v)(),F=k.get(_);k.has(_)&&k.delete(_),F&&(F.data=void 0),f(d,()=>A),f(v,()=>k)},j=_=>{const A=n(d)(),k=n(v)();for(const F of _){const X=k.get(F);k.has(F)&&k.delete(F),X&&(X.data=void 0)}f(d,()=>A),f(v,()=>k)},w=()=>{f(d,()=>[]),f(u,()=>new Map),f(v,()=>new Map)},S=()=>n(d),B=_=>{const A=n(u)();for(const k of _)A.get(k)||A.set(k,{name:k});f(u,()=>A)},M=async()=>{const[_,A]=await Promise.all([fs(n(s),Ye),fs(n(s),Dt).then($=>$.reduce((Q,ae)=>Q.set(ae.id,ae.data),new Map))]),k=[],F=[],X=new Map;for(const $ of _)$.data.deletedAt&&Date.now()-$.data.deletedAt>l?k.push($.id):(F.push($),X.set($.id,$));const W=pd(F),de=[],_e=new Map(A);[...W.values()].forEach($=>{_e.set($,{name:$,pinned:A.get($)?.pinned||!1}),A.has($)||de.push($)});const re=[];[...A.keys()].forEach($=>{W.has($)||re.push($)}),await Xa(n(s),Ye,k),await Xa(n(s),Dt,re),await ct(n(s),Dt,de.map($=>({id:$,data:{pinned:_e.get($)?.pinned||!1}}))),f(d,()=>F),f(v,()=>X),f(u,()=>_e),f(c,!0)},D=async _=>{const A=n(u)(),k=_.data.tags.filter(F=>!A.has(F))||[];return await aa(n(s),Ye,_.id,{..._.data}),k.length>0&&(await ct(n(s),Dt,k.map(F=>({id:F,data:{pinned:!1}}))||[]),B(k)),y(_),i.postMessage({type:"putNote",data:{id:_.id}}),_.id},z=async({link:_,text:A,tags:k})=>{const F={id:Rn(),data:{link:pt(_),text:A,tags:pt(k),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await D(F),F.id},J=async(_,{link:A,text:k,tags:F})=>{const X=T(_);if(!X||!X.data)return;const W={id:_,data:{...X.data,link:pt(A),text:k,tags:pt(F),updatedAt:Date.now()}};await D(W)},G=async(_,{link:A,text:k,tags:F})=>{const X=T(_);if(!X||!X.data)return;const W=Rn(),de={id:_,data:{...X.data,link:A,text:k,tags:F,updatedAt:Date.now(),history:[...(X.data.history||[]).slice(-49),{id:W,link:pt(X.data.link),text:X.data.text,tags:pt(X.data.tags),updatedAt:X.data.updatedAt}]}};return await D(de),W},K=async(_,A)=>{const k=T(_);if(!k||!k.data)return;const F=k.data.history?.find?.(W=>W.id===A);if(!F)return;const X={id:_,data:{...k.data,link:pt(F.link),text:F.text,tags:pt(F.tags),updatedAt:F.updatedAt,history:k.data.history?.filter?.(W=>W.id!==A)||[]}};await D(X)},ee=async _=>{const k=n(v)().get(_);!k||!k.data||(C(_),await ro(n(s),Ye,_),i.postMessage({type:"deleteNote",data:{id:_}}))},Y=async()=>{await Ta(n(s),Ye),await Ta(n(s),Dt),w(),i.postMessage({type:"clearNotes"})},T=_=>n(v)().get(_),te=async(_,A)=>{const F=n(v)().get(_);if(!F||!F.data)return;const X={id:_,data:{...F.data,pinnedAt:A?Date.now():void 0}};D(X)},ue=async _=>{const k=n(v)().get(_);if(!k||!k.data)return;const F={id:_,data:{...k.data,deletedAt:Date.now()}};await D(F)},V=async _=>{const k=n(v)().get(_);if(!k||!k.data)return;const F={id:_,data:{...k.data,archivedAt:Date.now()}};await D(F)},Z=async({noteIds:_})=>{const A=n(v)(),k=n(d)();for(const X of _){const W=A.get(X);W?.data&&(W.data.deletedAt=Date.now())}return await ct(n(s),Ye,_.map(X=>{const W=A.get(X);return{id:X,data:W?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>k),{cancel:async()=>{for(const X of _){const W=A.get(X);W?.data&&(W.data.deletedAt=0)}await ct(n(s),Ye,_.map(X=>{const W=A.get(X);return{id:X,data:W?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>k)}}},oe=async({noteIds:_})=>{const A=n(v)(),k=n(d)();for(const X of _){const W=A.get(X);W?.data&&(W.data.archivedAt=Date.now())}return await ct(n(s),Ye,_.map(X=>{const W=A.get(X);return{id:X,data:W?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>k),{cancel:async()=>{for(const X of _){const W=A.get(X);W?.data&&(W.data.archivedAt=0)}await ct(n(s),Ye,_.map(X=>{const W=A.get(X);return{id:X,data:W?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>k)}}},we=async({noteIds:_})=>{const A=n(v)(),k=n(d)(),F=[];for(const W of _){const de=A.get(W);de?.data&&(F.push({id:W,data:pt(de.data)}),de.data.archivedAt=0)}return await ct(n(s),Ye,_.map(W=>{const de=A.get(W);return{id:W,data:de?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>k),{cancel:async()=>{for(const W of F){const de=A.get(W.id);de?.data&&(de.data=W.data)}await ct(n(s),Ye,_.map(W=>{const de=A.get(W);return{id:W,data:de?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>k)}}},xe=async({noteIds:_})=>{const A=n(v)(),k=n(d)(),F=[];for(const W of _){const de=A.get(W);de?.data&&(F.push({id:W,data:pt(de.data)}),de.data.deletedAt=0)}return await ct(n(s),Ye,_.map(W=>{const de=A.get(W);return{id:W,data:de?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>k),{cancel:async()=>{for(const W of F){const de=A.get(W.id);de?.data&&(de.data=W.data)}await ct(n(s),Ye,_.map(W=>{const de=A.get(W);return{id:W,data:de?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>A),f(d,()=>k)}}},Me=async _=>{const k=n(v)().get(_);if(!k||!k.data)return;const F={id:_,data:{...k.data,deletedAt:0}};await D(F)},De=async _=>{const k=n(v)().get(_);if(!k||!k.data)return;const F={id:_,data:{...k.data,archivedAt:0}};await D(F)},Ie=async(_,A)=>{const k=n(u)();k.set(_,{name:_,pinned:A}),await aa(n(s),Dt,_,{pinned:A}),i.postMessage({type:"pinTag",data:{tag:_,pinned:A}}),f(u,()=>k)},P=async({noteIds:_})=>{const A=n(u)(),k=n(d)();j(_),await Xa(n(s),Ye,_),i.postMessage({type:"reloadNotes"}),f(d,()=>k),f(u,()=>A)},ne=async _=>{const A=n(v)(),k={};_.forEach(F=>{const X=A.get(F.id),W=[];if(X&&X.data){let de=0,_e=0;for(;de<F.data.history.length&&_e<X.data.history.length;){const re=F.data.history[de],$=X.data.history[_e];re.id===$.id?(re.updatedAt>$.updatedAt?W.push(re):W.push($),de+=1,_e+=1):re.updatedAt<$.updatedAt?(W.push(re),de+=1):re.updatedAt>$.updatedAt?(W.push($),_e+=1):(W.push($),de+=1,_e+=1)}X.data.updatedAt>F.data.updatedAt?k[X.id]={id:X.id,data:{...X.data,history:W}}:k[F.id]={id:F.id,data:{...F.data,history:W}}}else k[F.id]=F}),await ct(n(s),Ye,Object.values(k)),await M(),i.postMessage({type:"reloadNotes"})},he=async()=>{const _=[];n(d)().forEach(k=>{k&&k.data&&k.data.deletedAt&&_.push(k.id)}),await Xa(n(s),Ye,_),await M(),i.postMessage({type:"emptyBin"})},be=async(_,A)=>{const k=n(v)(),F=n(d)(),X=[],W=[];for(const _e of A){const re=k.get(_e);re?.data&&(X.push({id:_e,data:pt(re.data)}),W.push({id:_e,data:{...re.data,tags:re.data.tags.filter($=>$!==_),history:[...re.data.history||[],{id:Rn(),link:pt(re.data.link),text:re.data.text,tags:re.data.tags,updatedAt:Date.now()}]}}))}for(const _e of W){const re=k.get(_e.id);re?.data&&(re.data=_e.data)}return await ct(n(s),Ye,W.map(_e=>({id:_e.id,data:_e.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(d,()=>F),{cancel:async()=>{for(const _e of X){const re=k.get(_e.id);re?.data&&(re.data=_e.data)}await ct(n(s),Ye,X.map(_e=>({id:_e.id,data:_e.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(d,()=>F)}}},Ee=async(_,A,k)=>{const F=n(v)(),X=n(d)(),W=n(u)(),de=[],_e=[];for(const Q of k){const ae=F.get(Q);ae?.data&&(de.push({id:Q,data:pt(ae.data)}),_e.push({id:Q,data:{...ae.data,tags:ae.data.tags.map(ge=>ge!==_?ge:A),history:[...ae.data.history||[],{id:Rn(),link:pt(ae.data.link),text:ae.data.text,tags:ae.data.tags,updatedAt:Date.now()}]}}))}for(const Q of _e){const ae=F.get(Q.id);ae?.data&&(ae.data=Q.data)}const re=W.has(A);return await Promise.all([(async()=>{if(!re){const Q=W.get(_)?.pinned||!1;W.set(A,{name:A,pinned:Q}),await aa(n(s),Dt,A,{pinned:Q})}})(),ct(n(s),Ye,_e.map(Q=>({id:Q.id,data:Q.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>F),f(d,()=>X),f(u,()=>W),{cancel:async()=>{for(const Q of de){const ae=F.get(Q.id);ae?.data&&(ae.data=Q.data)}await Promise.all([(async()=>{re||(W.delete(A),await ro(n(s),Dt,A))})(),ct(n(s),Ye,de.map(Q=>({id:Q.id,data:Q.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>F),f(d,()=>X),f(u,()=>W)}}},Se=async(_,A)=>{const k=n(v)(),F=n(d)(),X=n(u)(),W=[],de=[];for(const $ of A){const Q=k.get($);Q?.data&&(W.push({id:$,data:pt(Q.data)}),de.push({id:$,data:{...Q.data,tags:[...new Set([...Q.data.tags,_])],history:[...Q.data.history||[],{id:Rn(),link:pt(Q.data.link),text:Q.data.text,tags:Q.data.tags,updatedAt:Date.now()}]}}))}for(const $ of de){const Q=k.get($.id);Q?.data&&(Q.data=$.data)}const _e=X.has(_);return await Promise.all([(async()=>{_e||(X.set(_,{name:_,pinned:!1}),await aa(n(s),Dt,_,{pinned:!1}))})(),ct(n(s),Ye,de.map($=>({id:$.id,data:$.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(d,()=>F),f(u,()=>X),{cancel:async()=>{for(const $ of W){const Q=k.get($.id);Q?.data&&(Q.data=$.data)}await Promise.all([(async()=>{_e||(X.delete(_),await ro(n(s),Dt,_))})(),ct(n(s),Ye,W.map($=>({id:$.id,data:$.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(d,()=>F),f(u,()=>X)}}},H=async(_,A,k)=>{const F=n(v)(),X=n(d)(),W=n(u)(),de=[],_e=[];for(const ae of k){const ge=F.get(ae);ge?.data&&(de.push({id:ae,data:pt(ge.data)}),_e.push({id:ae,data:{...ge.data,tags:[...new Set([...ge.data.tags.filter(Be=>!_.includes(Be)),...A])],history:[...ge.data.history||[],{id:Rn(),link:pt(ge.data.link),text:ge.data.text,tags:ge.data.tags,updatedAt:Date.now()}]}}))}for(const ae of _e){const ge=F.get(ae.id);ge?.data&&(ge.data=ae.data)}const re=n(u)(),$=A.filter(ae=>!re.has(ae));return await Promise.all([(async()=>{if($.length>0)return ct(n(s),Dt,$.map(ae=>({id:ae,data:{pinned:!1}})))})(),ct(n(s),Ye,_e.map(ae=>({id:ae.id,data:ae.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>F),f(d,()=>X),f(u,()=>W),{cancel:async()=>{for(const ae of de){const ge=F.get(ae.id);ge?.data&&(ge.data=ae.data)}await Promise.all([(async()=>{if($.length>0){for(const ae of $)W.delete(ae);return Xa(n(s),Dt,$)}})(),ct(n(s),Ye,de.map(ae=>({id:ae.id,data:ae.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>F),f(d,()=>X),f(u,()=>W)}}},q=async _=>{const A=JSON.parse(_.data),k=A;if(A.tabId&&A.tabId===o){k.type==="exit"&&(w(),await Ta(n(s),Ye),await Ta(n(s),Dt));return}if(k.type==="putNote"){const X=k.data.id;if(!X)return;const W=await Rr(n(s),Ye,X);if(!W)return;y({id:X,data:W})}else if(k.type==="deleteNote"){const F=k.data.id;if(!F)return;C(F)}else if(k.type==="pinTag"){const F=k.data.tag,X=k.data.pinned,W=n(u)();W.set(F,{name:F,pinned:X}),f(u,()=>W)}else k.type==="clearNotes"?w():k.type==="reloadNotes"||k.type==="emptyBin"?M():k.type==="exit"&&w()};pe(()=>(M(),i.addEventListener(q),()=>{i.removeEventListener(q)})),gd({isInitedNotes:h,createNote:z,updateNote:J,deleteNote:ee,saveNote:G,revertNote:K,pinNote:te,moveNoteToBin:ue,moveNoteToArchive:V,getGetNotes:S,importNotes:ne,clearNotes:Y,getNoteById:T,getGetMapTags:()=>n(u),pinTag:Ie,restoreNoteFromBin:Me,moveNoteFromArchive:De,checkNotes:g,checkNotesInBin:m,checkNotesInArchive:x,emptyBin:he,moveNotesToBin:Z,moveNotesToArchive:oe,moveNotesFromArchive:we,deleteNotes:P,restoreNotesFromBin:xe,deleteTag:be,renameTag:Ee,addTag:Se,changeTags:H});var se=ie(),Ce=R(se);ke(Ce,()=>e.children??je),p(t,se),ce()}const Li={};function _d(t){it(Li,t)}function pa(){const t=st(Li);if(!t)throw new Error("No FeedContext found");return t}const Oi={};var Xe=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(Xe||{});function wd(t){it(Oi,t)}function Gr(){const t=st(Oi);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function yd(t,e){le(e,!0);const a=Ho(),{getSelectedTags:r}=An(),{getSelectedMetaTags:o}=Gr(),{getGetNotes:s}=zt();let i=E(r),l=E(o),c=O(0),u=[],d=O(0),v=E(()=>n(l).has(Xe.ARCHIVED)),h=E(()=>n(l).has(Xe.BIN));ze(()=>{const x=s()()||[],y=[],C=Array.from(n(i).values());for(let j=x.length-1;j>=0;j--){if(!x[j]||!x[j].data)continue;const w=x[j];if(!n(v)&&!n(h)&&(w?.data.deletedAt||w?.data.archivedAt)||n(v)&&(w?.data.deletedAt||!w?.data.archivedAt)||n(h)&&!w?.data.deletedAt)continue;const S=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(w.data.link?.title.toLowerCase().includes(S)||w.data.link?.url.toLowerCase().includes(S)||w.data.text.toLowerCase().includes(S)||w.data.tags.map(B=>B.toLowerCase()).join(" ").includes(S)))){if(n(l).has(Xe.INBOX)){if(w.data.tags.length>0)continue}else if(n(i).size&&C.some(B=>!w.data.tags.includes(B)))continue;y.push(w)}}f(c,y.length,!0),u=y,f(d,Date.now(),!0)}),_d({getFiltredNotesLength:()=>n(c),getFiltredNotes:()=>(n(d),u),getUpdatedFiltredNotesTimestamp:()=>n(d)});var g=ie(),m=R(g);ke(m,()=>e.children??je),p(t,g),ce()}function bd(t,e){le(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Jt(),s=E(a),i="selectedMetaTags";let l=E(()=>n(s).get(i)||""),c=E(()=>new Set(n(l).split(",").map(y=>decodeURIComponent(y)).filter(y=>y!=="")));wd({getSelectedMetaTags:()=>n(c),addMetaTag:y=>{n(c).has(y)||r(i,[...n(c),y].map(C=>encodeURIComponent(C)).join(","))},removeMetaTag:y=>{n(c).has(y)&&n(c).size===1?o(i):n(c).has(y)&&r(i,[...n(c)].filter(C=>C!==y).map(C=>encodeURIComponent(C)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:y=>{y.size===0?o(i):r(i,[...y].map(C=>encodeURIComponent(C)).join(","))}});var m=ie(),x=R(m);ke(x,()=>e.children??je),p(t,m),ce()}const Fi={},Na=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function Sd(t){it(Fi,t)}function Jn(){const t=st(Fi);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Cd(t,e){le(e,!0);let a=St(Na());Sd(a);var r=ie(),o=R(r);ke(o,()=>e.children??je),p(t,r),ce()}const zi={};function xd(t){it(zi,t)}function Wo(){const t=st(zi);if(!t)throw new Error("No ScrollingContext found");return t}function Td(t,e){le(e,!0);let a=O(!1);const r=()=>n(a),o=Ri(()=>{f(a,!1)},100);xd({isScrolling:r,enable:()=>{f(a,!0),o()}});var i=ie(),l=R(i);ke(l,()=>e.children??je),p(t,i),ce()}const ji={};function kd(t){it(ji,t)}function Mn(){const t=st(ji);if(!t)throw new Error("No MobileSizeContext found");return t}function Ed(t,e){le(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=O(St(a())),o=Jn();const s=Ri(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{f(r,a(),!0)})};kd({checkMobileSize:()=>n(r)}),pe(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=ie(),u=R(c);ke(u,()=>e.children??je),p(t,c),ce()}const Bi={};function Pd(t){it(Bi,t)}function rn(){const t=st(Bi);if(!t)throw new Error("No DialogContext found");return t}function Nd(t,e){le(e,!0);let a=O(0),r=O(!1),o=O(!0),s=O(!1),i=O(!1);Pd({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{f(a,n(a)+1)},dialogDec:()=>{f(a,n(a)-1)},blockDialog:B=>{f(r,B,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:B=>{f(o,B,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:B=>{f(s,B,!0)},setLeftEnd:B=>{f(i,B,!0)},getCountDialog:()=>n(a)});var w=ie(),S=R(w);ke(S,()=>e.children??je),p(t,w),ce()}const Hi={};function Ad(t){it(Hi,t)}function Zr(){const t=st(Hi);if(!t)throw new Error("No ScrollContainerContext found");return t}function Md(t,e){le(e,!0);let a=O(null);Ad({setScrollContainer:l=>{f(a,l,!0)},getScrollContainer:()=>n(a)});var s=ie(),i=R(s);ke(i,()=>e.children??je),p(t,s),ce()}const Ui={};function Dd(t){it(Ui,t)}function Vo(){const t=st(Ui);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Id(t,e){le(e,!0);let a=O(200);Dd({setDialogPageHeight:l=>{f(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=ie(),i=R(s);ke(i,()=>e.children??je),p(t,s),ce()}const Rd=[Za,Ja,Ye,Dt,ud];function Ld(){return new Promise((t,e)=>{const a=indexedDB.open(cd,dd);wt(a,"upgradeneeded",()=>{const r=a.result;for(const o of Rd)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),wt(a,Gn,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),wt(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),wt(a,Zn,()=>{e()})})}function Od(t,e){le(e,!0);let a=O(null);pe(()=>{Ld().then(l=>{f(a,l,!0)}).catch(l=>{})}),sd({getDB:()=>n(a)});var o=ie(),s=R(o);{var i=l=>{var c=ie(),u=R(c);ke(u,()=>e.children??je),p(l,c)};U(s,l=>{n(a)&&l(i)})}p(t,o),ce()}const $t="dialogPages",Wi={};function Fd(t){it(Wi,t)}function on(){const t=st(Wi);if(!t)throw new Error("No DialogPagesContext found");return t}function zd(t,e){le(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Jt(),s=E(a);let i=E(()=>n(s).get($t)||""),l=E(()=>n(i).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const c=()=>n(l),u=w=>{if(w.length===0){o($t);return}r($t,w.map(S=>encodeURIComponent(S)).join(","))},d=w=>{r($t,[...n(l),w].map(S=>encodeURIComponent(S)).join(","))};Fd({setDialogPages:u,getDialogPages:c,pushDialogPage:d,popDialogPage:()=>{const w=n(l)[n(l).length-1];return n(l).length<=1?(o($t),w):(r($t,n(l).slice(0,-1).map(S=>encodeURIComponent(S)).join(",")),w)},replaceDialogPage:w=>{r($t,[...n(l).slice(0,-1),w].map(S=>encodeURIComponent(S)).join(","))},hasDialogPage:w=>n(l).find(S=>{const[B]=S.split("?");return B===w})!==void 0,clearDialogPages:()=>{o($t)},createDialogPageHref:w=>{const S=new URLSearchParams(n(s).toString());return S.set($t,[...c(),w].map(B=>encodeURIComponent(B)).join(",")),`${window.location.pathname}?${S.toString()}`},createHandleClickDialogPage:w=>S=>{S.preventDefault(),d(w)}});var C=ie(),j=R(C);ke(j,()=>e.children??je),p(t,C),ce()}function jd(t,e){le(e,!0);let a=O(St(new URLSearchParams(window.location.search)));const r=v=>{const h=window.location.pathname;f(a,v,!0),window.history.replaceState(null,"",`${h}${v.size>0?`?${v.toString()}`:""}`)};qc({getSearchParams:()=>n(a),replaceSearchParams:v=>{const h=new URLSearchParams(v);r(h)},setSearchParam:(v,h)=>{const g=new URLSearchParams(n(a));g.set(v,h),r(g)},deleteSearchParam:v=>{const h=new URLSearchParams(n(a));h.delete(v),r(h)},getHref:v=>{const h=new URLSearchParams(v);return`${window.location.pathname}${h.toString().length>0?`?${h.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var u=ie(),d=R(u);ke(d,()=>e.children??je),p(t,u),ce()}const Vi={};function Bd(t){it(Vi,t)}function Hd(){const t=st(Vi);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Ud(t,e){le(e,!0);let a=St({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";pe(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l);let c=null;const u=d=>{o()&&(c&&clearTimeout(c),c=setTimeout(()=>{o()&&d.target!==document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur?.()},120))};return document.addEventListener("touchstart",u,{passive:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l),document.removeEventListener("touchstart",u)}}),Bd({getIsKeyboardVisible:r});var s=ie(),i=R(s);ke(i,()=>e.children??je),p(t,s),ce()}function Wd(t,e){le(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};ld({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=ie(),s=R(o);ke(s,()=>e.children??je),p(t,o),ce()}function Vd(t,e){Od(t,{children:(a,r)=>{Wd(a,{children:(o,s)=>{Cd(o,{children:(i,l)=>{Td(i,{children:(c,u)=>{Ed(c,{children:(d,v)=>{Nd(d,{children:(h,g)=>{Md(h,{children:(m,x)=>{Id(m,{children:(y,C)=>{Ud(y,{children:(j,w)=>{jd(j,{children:(S,B)=>{zd(S,{children:(M,D)=>{var z=ie(),J=R(z);ke(J,()=>e.children??je),p(M,z)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function qd(t,e){Vd(t,{children:(a,r)=>{Gc(a,{children:(o,s)=>{Kc(o,{children:(i,l)=>{Jc(i,{children:(c,u)=>{$c(c,{children:(d,v)=>{bd(d,{children:(h,g)=>{td(h,{children:(m,x)=>{od(m,{children:(y,C)=>{fd(y,{children:(j,w)=>{hd(j,{children:(S,B)=>{md(S,{children:(M,D)=>{yd(M,{children:(z,J)=>{var G=ie(),K=R(G);ke(K,()=>e.children??je),p(z,G)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const ht=t=>{const a=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(i=>i instanceof HTMLElement?i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement?!i.disabled&&i.offsetParent!==null:i.offsetParent!==null:!1),r=a.indexOf(t);if(r===-1)return{next:null,prev:null};const o=a[r+1],s=a[r-1];return{next:o,prev:s}};let xt=O(""),Dn=O(null),ka=O(null),_n=O(null),In=O(St([])),xr=O(null),Ln=null;function _t(t,e){f(xt,""),Ln=null,f(ka,null),f(_n,null),setTimeout(()=>{f(xt,t,!0),e?.onFinish&&f(ka,e.onFinish,!0),e?.cancel&&(f(_n,e.cancel.onCancel,!0),Ln=e.cancel.nextFocusRef)},16)}var Kd=N('<button type="button" class="c p-1i0azn2">undo</button>'),Yd=N('<div class="a p-1i0azn2"><div class="b p-1i0azn2"><span> </span> <!></div></div>'),Xd=N("<div><!></div>");function qo(t,e){le(e,!0);const a=Rn();pe(()=>(f(In,[...n(In),a],!0),()=>{const c=n(In).indexOf(a);c!==-1&&f(In,n(In).filter((u,d)=>d!==c),!0)}));const r=c=>{if(c.key==="Tab"&&c.shiftKey){if(Ln&&n(xt)){c.preventDefault();const{prev:u}=ht(Ln);u?.focus(),f(xt,"")}}else if(c.key==="Tab"&&!c.shiftKey)Ln&&n(xt)&&(c.preventDefault(),f(xt,""),Ln?.focus());else if(c.key==="Escape"&&n(xt)){if(c.preventDefault(),Ln){const{prev:u}=ht(Ln);u?.focus()}f(xt,"")}};pe(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)})),ze(()=>{n(xt);const c=n(_n)?2e3:800;n(xt)&&(n(Dn)?.getBoundingClientRect(),n(Dn)?.style.setProperty("opacity","1"));const u=setTimeout(()=>{n(Dn)?.style.removeProperty("opacity")},c),d=setTimeout(()=>{f(xt,""),n(ka)&&n(ka)(),f(ka,null),f(_n,null),n(Dn)?.style.removeProperty("opacity")},c+400);return()=>{clearTimeout(u),clearTimeout(d)}});const o=c=>{c.preventDefault(),n(_n)&&(f(ka,null),n(_n)(),f(_n,null)),f(xt,""),n(Dn)?.style.removeProperty("opacity")};ze(()=>{n(xt)&&n(_n)&&n(xr)&&setTimeout(()=>{n(xr)?.focus()},151)}),ze(()=>{n(In),Ft(()=>{f(xt,""),n(Dn)?.style.removeProperty("opacity")})});var s=Xd(),i=b(s);{var l=c=>{var u=Yd(),d=b(u),v=b(d),h=b(v),g=L(v,2);{var m=x=>{var y=Kd();y.__click=o,et(y,C=>f(xr,C),()=>n(xr)),p(x,y)};U(g,x=>{n(_n)&&x(m)})}et(d,x=>f(Dn,x),()=>n(Dn)),me(()=>ut(h,n(xt))),p(c,u)};U(i,c=>{n(xt)&&n(In)[n(In).length-1]===a&&c(l)})}p(t,s),ce()}lt(["click"]);var Gd=N('<span class="a p-lxk90o"><!></span>');function ft(t,e){var a=Gd(),r=b(a);ke(r,()=>e.children),p(t,a)}var Zd=xc('<svg class="p-1yv1ibq"><use></use></svg>');function ye(t,e){let a=Pe(e,"name",8,"");var r=Zd(),o=b(r);me(()=>Qe(o,"href",`#icon-${a()??""}`)),p(t,r)}var Jd=N('<button class="a p-18m1f7k"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function qi(t,e){le(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=pr(),{getDialogPages:s}=on(),{checkExistedDialog:i}=rn();let l=E(()=>s().length>0||i());const c=h=>{if(h.preventDefault(),n(l))return;const g=r();g==="closed"?a():g==="opened"&&o()};var u=Jd();u.__click=c;var d=b(u);ve(d,()=>({"--size":"32px"})),ye(d.lastChild,{name:"sidebarMenu"});var v=L(d,2);ft(v,{children:(h,g)=>{var m=Ae("Menu");p(h,m)}}),p(t,u),ce()}lt(["click"]);var Qd=N('<button class="b p-9fi5nt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),$d=N('<div class="a p-9fi5nt"><input class="p-9fi5nt"/> <!></div>');function bo(t,e){le(e,!0);let a=Pe(e,"value",15,""),r=Pe(e,"ref",15,null);const o=u=>{u.key==="Escape"&&(a(""),e.onChange?.(""))};pe(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=$d(),i=b(s);i.__input=u=>e.onChange?.(u.target?.value||""),et(i,u=>r(u),()=>r());var l=L(i,2);{var c=u=>{var d=Qd();d.__click=()=>{a(""),e.onChange?.("")};var v=b(d);ve(v,()=>({"--size":"20px"})),ye(v.lastChild,{name:"close"});var h=L(v,2);ft(h,{children:(g,m)=>{var x=Ae("Clear");p(g,x)}}),p(u,d)};U(l,u=>{a()&&u(c)})}me(()=>Qe(i,"placeholder",e.placeholder)),an("focus",i,function(...u){e.onFocus?.apply(this,u)}),mi(i,a),p(t,s),ce()}lt(["input","click"]);function Ko(t,e){le(e,!0),pe(()=>{const a=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("click",a,{capture:!0}),()=>{document.removeEventListener("click",a,{capture:!0})}}),ce()}function eu(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const Ki=eu(),tu=()=>{const t=navigator.userAgent;return/android/i.test(t)},nu=tu(),kh=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},Eh=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},ir=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let Ca=O(St([]));var au=N("<dialog><div><!></div></dialog> <!>",1);function mr(t,e){le(e,!0);const a=Rn(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;pe(()=>(f(Ca,[...n(Ca),a],!0),()=>{const w=n(Ca).indexOf(a);w!==-1&&f(Ca,n(Ca).filter((S,B)=>B!==w),!0)}));let o=Pe(e,"onClosed",3,()=>{}),s=Pe(e,"blocked",3,!1),i=O(null),l=O(null),c=O(!1),{dialogInc:u,dialogDec:d}=rn();const v=()=>{const w=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(w),o()()},{once:!0}),f(c,!1)};ze(()=>{e.startClose&&v()}),pe(()=>{n(i)?.showModal(),n(i)?.getClientRects(),f(c,!0);const w=S=>{S?.preventDefault(),s()||v()};return n(i)?.addEventListener("cancel",w),n(i)?.addEventListener("close",w),()=>{n(i)?.removeEventListener("cancel",w),n(i)?.removeEventListener("close",w)}}),pe(()=>(u(),()=>{d()})),pe(()=>{const w=S=>{S.key==="Escape"&&s()&&S.preventDefault()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}});function h(){setTimeout(()=>{if(Ki||!n(i)||!n(l))return;const w=window.visualViewport;if(w)if(w.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}pe(()=>(h(),window.visualViewport?.addEventListener("resize",h),window.visualViewport?.addEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{window.visualViewport?.removeEventListener("resize",h),window.visualViewport?.removeEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h)}));var g=au(),m=R(g),x=b(m),y=b(x);ke(y,()=>e.children),et(x,w=>f(l,w),()=>n(l)),et(m,w=>f(i,w),()=>n(i));var C=L(m,2);{var j=w=>{Ko(w,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:v})};U(C,w=>{n(i)&&n(l)&&!s()&&w(j)})}me(()=>{$e(m,1,rt({a:!0,b:n(c),c:n(Ca).length>1}),"p-1x14yml"),$e(x,1,rt({d:!0,b:n(c)}),"p-1x14yml")}),p(t,g),ce()}var ru=N("<div><!></div>");function ou(t,e){le(e,!0);let a=O(!1),r=O(null);const o=()=>{const d=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),f(a,!1)},s=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},i=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},l=d=>{d.key==="Escape"&&o()};pe(()=>{n(r)?.getClientRects(),f(a,!0);const d=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),ze(()=>{e.startClose&&o()});var c=ru(),u=b(c);ke(u,()=>e.children),et(c,d=>f(r,d),()=>n(r)),me(()=>$e(c,1,rt({a:!0,b:n(a)}),"p-1unpq18")),p(t,c),ce()}var su=N("<ul><!></ul>"),iu=N("<ul><!></ul>");function Jr(t,e){le(e,!0);let a=Pe(e,"ref",15);const{checkMobileSize:r}=Mn();let o=r();var s=ie(),i=R(s);{var l=u=>{mr(u,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(d,v)=>{var h=su(),g=b(h);ke(g,()=>e.children),et(h,m=>a(m),()=>a()),me(()=>$e(h,1,rt({a:!0,b:o}),"p-1sp2xya")),p(d,h)},$$slots:{default:!0}})},c=u=>{ou(u,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(d,v)=>{var h=iu(),g=b(h);ke(g,()=>e.children),et(h,m=>a(m),()=>a()),me(()=>$e(h,1,rt({a:!0,b:o}),"p-1sp2xya")),p(d,h)},$$slots:{default:!0}})};U(i,u=>{o?u(l):u(c,!1)})}p(t,s),ce()}var lu=N("<button><!></button>"),cu=N("<a><!></a>");function at(t,e){let a=Pe(e,"dangerous",3,!1),r=Pe(e,"type",3,"button"),o=Pe(e,"href",3,"");var s=ie(),i=R(s);{var l=u=>{var d=lu();d.__click=function(...h){e.onClick?.apply(this,h)},d.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=b(d);ke(v,()=>e.children??je),me(()=>$e(d,1,rt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")),p(u,d)},c=u=>{var d=cu();d.__click=function(...h){e.onClick?.apply(this,h)},d.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=b(d);ke(v,()=>e.children??je),me(()=>{Qe(d,"href",o()),$e(d,1,rt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")}),p(u,d)};U(i,u=>{r()==="button"?u(l):u(c,!1)})}p(t,s)}lt(["click","keydown"]);var du=N('<li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li>',1),uu=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),fu=N('<div class="a p-cjxu92"><button><!> <!></button> <!></div>');function vu(t,e){le(e,!0);let a=O(!1),r=O(!1);const{checkMobileSize:o}=Mn(),{getFeedOrder:s,setFeedOrder:i}=Si();let l=E(o),c=E(s);const u=()=>{n(a)||f(a,!0)},d=j=>{f(r,!0),i(j)},v=()=>{f(a,!1),f(r,!1)};pe(()=>{const j=w=>{w.key==="Escape"&&f(r,!0)};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)});var h=fu(),g=b(h);g.__click=u,$e(g,1,rt({b:!0,c:!0}),"p-cjxu92");var m=b(g);ye(m,{name:"filter"});var x=L(m,2);ft(x,{children:(j,w)=>{var S=Ae("show feed order menu");p(j,S)}});var y=L(g,2);{var C=j=>{var w=uu(),S=R(w);ve(S,()=>({"--right":"0px","--top":"44px"})),Jr(S.lastChild,{get startClose(){return n(r)},onClosed:v,children:(B,M)=>{var D=du(),z=R(D),J=b(z);{let ue=E(()=>n(c)==="newest");at(J,{get active(){return n(ue)},get dialogMode(){return n(l)},onClick:()=>d("newest"),children:(V,Z)=>{var oe=Ae("Newest");p(V,oe)},$$slots:{default:!0}})}var G=L(z,2),K=b(G);{let ue=E(()=>n(c)==="oldest");at(K,{get active(){return n(ue)},get dialogMode(){return n(l)},onClick:()=>d("oldest"),children:(V,Z)=>{var oe=Ae("Oldest");p(V,oe)},$$slots:{default:!0}})}var ee=L(G,2),Y=b(ee);{let ue=E(()=>n(c)==="AtoZ");at(Y,{get active(){return n(ue)},get dialogMode(){return n(l)},onClick:()=>d("AtoZ"),children:(V,Z)=>{var oe=Ae("A to Z");p(V,oe)},$$slots:{default:!0}})}var T=L(ee,2),te=b(T);{let ue=E(()=>n(c)==="ZtoA");at(te,{get active(){return n(ue)},get dialogMode(){return n(l)},onClick:()=>d("ZtoA"),children:(V,Z)=>{var oe=Ae("Z to A");p(V,oe)},$$slots:{default:!0}})}p(B,D)},$$slots:{default:!0}}),p(j,w)};U(y,j=>{n(a)&&j(C)})}p(t,h),ce()}lt(["click"]);var fe=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t.Welcome="welcome",t))(fe||{});const vs={settings:"Settings",importData:"Import data",exportData:"Export data",account:"Account",sync:"Sync",accountSetup:"Account setup",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success",welcome:""};var hu=N('<div><!> <div class="a p-t68rxw"></div></div>');function Ka(t,e){le(e,!0);let a=O(!1);pe(()=>{const s=setTimeout(()=>{f(a,!0)},200);return()=>{clearTimeout(s)}});var r=hu(),o=b(r);ke(o,()=>e.children??je),me(()=>$e(r,1,rt({b:!0,c:n(a)}),"p-t68rxw")),p(t,r),ce()}var gu=N("<a><!></a>"),pu=N("<button><!></button>");function Mt(t,e){let a=Pe(e,"type",3,"standard"),r=Pe(e,"typeButton",3,"button"),o=Pe(e,"element",3,"button"),s=Pe(e,"href",3,""),i=Pe(e,"fullWidth",3,!1),l=Pe(e,"withoutMinWidth",3,!1);var c=ie(),u=R(c);{var d=h=>{var g=gu();g.__click=function(...x){e.onClick?.apply(this,x)};var m=b(g);ke(m,()=>e.children??je),me(()=>{Qe(g,"target",e.target),Qe(g,"rel",e.rel),Qe(g,"href",s()),$e(g,1,rt({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),p(h,g)},v=h=>{var g=pu();g.__click=function(...x){e.onClick?.apply(this,x)};var m=b(g);ke(m,()=>e.children??je),me(()=>{Qe(g,"type",r()),$e(g,1,rt({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),p(h,g)};U(u,h=>{o()==="a"?h(d):h(v,!1)})}p(t,c)}lt(["click"]);let So=O(!1),Tr=O(!1),Co=O(""),xo=O("Cancel"),To=O("Confirm"),ko,Ar=O(void 0),Eo,Po=O("dangerous");function Aa(t){f(So,!0),f(Co,t.title,!0),t.buttonCancelTitle&&f(xo,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&f(To,t.buttonConfirmTitle,!0),ko=t.onConfirm,f(Ar,t.onCancel,!0),Eo=t.onClosed,t.type?f(Po,t.type,!0):f(Po,"dangerous")}var mu=N('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),_u=N('<div class="a p-1jlul5o"><!></div>');function wu(t,e){le(e,!0);let a=O(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{f(a,!0)},250)};pe(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(Ar)?.(),f(Tr,!0)},l=async()=>{s(),await ko?.(),f(Tr,!0),o=!0},c=()=>{clearTimeout(r),f(a,!1),f(So,!1),f(Tr,!1),f(Co,""),f(xo,"Cancel"),f(To,"Confirm"),f(Ar,void 0),ko=void 0,Eo&&Eo(o),o=!1};var u=ie(),d=R(u);{var v=h=>{mr(h,{get blocked(){return n(a)},get startClose(){return n(Tr)},onClosed:c,children:(g,m)=>{var x=_u(),y=b(x);{var C=w=>{Ka(w,{})},j=w=>{var S=mu(),B=R(S),M=b(B),D=L(B,2),z=b(D);{var J=K=>{Mt(K,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(ee,Y)=>{var T=Ae();me(()=>ut(T,n(xo))),p(ee,T)},$$slots:{default:!0}})};U(z,K=>{n(Ar)&&K(J)})}var G=L(z,2);Mt(G,{onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(Po)},children:(K,ee)=>{var Y=Ae();me(()=>ut(Y,n(To))),p(K,Y)},$$slots:{default:!0}}),me(()=>ut(M,n(Co))),p(w,S)};U(y,w=>{n(a)?w(C):w(j,!1)})}p(g,x)},$$slots:{default:!0}})};U(d,h=>{n(So)&&h(v)})}p(t,u),ce()}const lr=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,c=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var yu=N('<div class="a p-rp2pt7"><a class="b p-rp2pt7"><span class="c p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function bu(t,e){le(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=on(),{checkExistedDialog:i}=rn(),l=()=>{o.length===0&&!i()&&s(fe.NewNote)};pe(()=>lr({key:"n",action:l})),Yr();var c=yu(),u=b(c),d=E(()=>r(fe.NewNote));u.__click=function(...y){n(d)?.apply(this,y)};var v=b(u),h=b(v);ve(h,()=>({"--size":"32px","--color":"#b0b0b0"})),ye(h.lastChild,{name:"add"});var g=L(h,2);ft(g,{children:(y,C)=>{var j=Ae("Add note");p(y,j)}});var m=L(v,2),x=b(m);ve(x,()=>({"--size":"16px","--color":"#b0b0b0"})),ye(x.lastChild,{name:"plus"}),me(y=>Qe(u,"href",y),[()=>a(fe.NewNote)]),p(t,c),ce()}lt(["click"]);var Su=N("<button><!></button>");function Qa(t,e){le(e,!0);let a=Pe(e,"type",3,"button"),r=!1,o=O(null);ze(()=>{e.onRef&&e.onRef(n(o))});const s=d=>{(d.key==="Enter"||d.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=d=>{(d.pointerType==="mouse"&&d.button===0||d.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(d)};var c=Su();c.__keydown=s,c.__click=i,c.__pointerdown=l,c.__touchstart=function(...d){e.onTouchStart?.apply(this,d)};var u=b(c);ke(u,()=>e.children??je),et(c,d=>f(o,d),()=>n(o)),me(()=>{Qe(c,"type",a()),$e(c,1,rt({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-pgzded")}),p(t,c),ce()}lt(["keydown","click","pointerdown","touchstart"]);var Cu=N('<div class="b p-1pt17hy"> </div>'),xu=N('<div class="a p-1pt17hy"><input/> <!></div>');function Yo(t,e){le(e,!0);let a=Pe(e,"value",15,""),r=Pe(e,"error",3,""),o=Pe(e,"ref",15,null);var s=xu(),i=b(s);i.__input=function(...d){e.onInput?.apply(this,d)};let l;et(i,d=>o(d),()=>o());var c=L(i,2);{var u=d=>{var v=Cu(),h=b(v);me(()=>ut(h,r())),p(d,v)};U(c,d=>{r()&&d(u)})}me(()=>{Qe(i,"placeholder",e.placeholder),l=$e(i,1,"p-1pt17hy",null,l,{error:!!r()})}),an("blur",i,function(...d){e.onBlur?.apply(this,d)}),an("focus",i,function(...d){e.onFocus?.apply(this,d)}),mi(i,a),p(t,s),ce()}lt(["input"]);var Tu=N('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),ku=N('<form class="a p-y9ylet"><!></form>');function Eu(t,e){le(e,!0);const{renameTag:a}=zt(),{getSelectedTags:r,setSelectedTags:o}=An(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=ga(),{getFiltredNotes:c}=pa();let u=O(!1),d=O(!1),v,h=!1,g=O(null),m=O(St(e.tag)),x=e.nextFocusRef;pe(()=>(n(g)&&n(g).focus(),()=>{v&&clearTimeout(v)}));const y=()=>{v=setTimeout(()=>{f(d,!0)},250)},C=()=>{f(u,!0)},j=async()=>{if(n(m).trim()===e.tag){C();return}if(n(m).trim()!=="")try{y();const B=r(),M=[...B].map(K=>K===e.tag?n(m).trim():K),D=new Set(s()),z=c(),J=D.size?[...D]:z.map(K=>K.id),{cancel:G}=await a(e.tag,n(m).trim(),J);l(),o(new Set(M)),_t("Tag renamed",{cancel:{nextFocusRef:x,onCancel:async()=>{await G(),o(B),i(D),setTimeout(()=>{const{prev:K}=ht(x);K?.focus()},16)}}}),h=!0}finally{f(u,!0)}},w=()=>{e.onClosed?.(h)},S=B=>{B.preventDefault(),j()};mr(t,{get blocked(){return n(d)},get startClose(){return n(u)},onClosed:w,children:(B,M)=>{var D=ku(),z=b(D);{var J=K=>{Ka(K,{})},G=K=>{var ee=Tu(),Y=R(ee),T=b(Y),te=L(Y,2);Yo(te,{placeholder:"Enter new tag name",get ref(){return n(g)},set ref(oe){f(g,oe,!0)},get value(){return n(m)},set value(oe){f(m,oe,!0)}});var ue=L(te,2),V=b(ue);Mt(V,{onClick:C,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(oe,we)=>{var xe=Ae("Cancel");p(oe,xe)},$$slots:{default:!0}});var Z=L(V,2);Mt(Z,{onClick:j,fullWidth:!0,withoutMinWidth:!0,children:(oe,we)=>{var xe=Ae("OK");p(oe,xe)},$$slots:{default:!0}}),me(()=>ut(T,`Rename "${e.tag??""}" for selected notes`)),p(K,ee)};U(z,K=>{n(d)?K(J):K(G,!1)})}an("submit",D,S),p(B,D)},$$slots:{default:!0}}),ce()}let Bn=O(!1),ea=O(!1),Bt=O(""),ta=O(0),$a=O(0),er=O(0),Mr,Lr=()=>({bottom:0,right:0,height:0}),Wt=O(null),No=O(null);function Pu(t){if(n(Bn)){f(ea,!0),n(Bt)!==t.tag&&(Mr=()=>{const a=t.getRect();f(Bn,!0),f(Bt,t.tag,!0),f(ta,a.bottom,!0),f($a,a.right,!0),f(er,a.height,!0),Lr=t.getRect,f(Wt,t.focusRef,!0)});return}const e=t.getRect();f(Bn,!0),f(Bt,t.tag,!0),f(ta,e.bottom,!0),f($a,e.right,!0),f(er,e.height,!0),Lr=t.getRect,f(Wt,t.focusRef,!0)}const Nu=()=>n(Bn),Au=()=>n(No);var Mu=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),Du=N('<li class="p-16hbyw2"><!></li>'),Iu=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Ru=N('<li class="p-16hbyw2"><!></li>'),Lu=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),Ou=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),Fu=N('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),zu=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ju=N("<!> <!>",1);function Bu(t,e){le(e,!0);const{getScrollContainer:a}=Zr(),{pinTag:r,getGetMapTags:o,deleteTag:s}=zt(),{checkMobileSize:i}=Mn(),{getSelectedTags:l,removeTag:c,setSelectedTags:u}=An(),{getSelectedNotes:d,setSelectedNotes:v,clearNotes:h}=ga(),{getFiltredNotes:g}=pa();let m=O(!1);ze(()=>{n(Bn),Ft(()=>{f(m,o()().get(n(Bt))?.pinned||!1,!0)})});let x=O(!1);const y=()=>{r(n(Bt),!0),f(ea,!0);let V=n(Wt),Z=ht(V)?.next;_t("Tag pinned",{cancel:{nextFocusRef:Z,onCancel:async()=>{r(n(Bt),!1),setTimeout(()=>{const{prev:oe}=ht(Z);oe?.focus()},16)}}})},C=()=>{r(n(Bt),!1),f(ea,!0);let V=n(Wt),Z=ht(V)?.next;_t("Tag unpinned",{cancel:{nextFocusRef:Z,onCancel:async()=>{r(n(Bt),!0),setTimeout(()=>{const{prev:oe}=ht(Z);oe?.focus()},16)}}})},j=()=>{f(Bn,!1),f(ea,!1),f(ta,0),f($a,0),f(er,0),Lr=()=>({bottom:0,right:0,height:0}),f(Wt,null),Mr&&setTimeout(()=>{Mr?.(),Mr=void 0})};let w=E(()=>window.innerHeight-n(ta)<100?n(ta)-n(er)-98+"px":n(ta)+5+"px"),S=E(a);const B=V=>{V.key==="Tab"&&V.shiftKey&&(V.preventDefault(),n(Wt)?.focus())},M=V=>{V.key==="Tab"&&!V.shiftKey&&n(Wt)&&(V.preventDefault(),ht(n(Wt))?.next?.focus())};pe(()=>{const V=Z=>{Z.key==="Escape"&&n(Bn)&&n(Wt)?.focus()};return window.addEventListener("keydown",V),()=>{window.removeEventListener("keydown",V)}});const D=()=>{f(ea,!0);let V=n(Wt),Z=ht(V)?.next;Aa({title:`Are you sure to delete "${n(Bt)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const oe=Array.from(n(G)),we=new Set(d()),xe=g(),Me=we.size?[...we]:xe.map(Ie=>Ie.id);n(G).has(n(Bt))&&(we.size===0||xe.length===we.size)&&c(n(Bt)),h();const{cancel:De}=await s(n(Bt),Me);_t("Tag deleted",{cancel:{nextFocusRef:Z,onCancel:async()=>{await De(),u(new Set(oe)),v(new Set(we)),setTimeout(()=>{const{prev:Ie}=ht(Z);Ie?.focus()},16)}}})},onCancel:async()=>{},onClosed:oe=>{setTimeout(()=>{oe||V?.focus()},16)}})};let z=()=>{};const J=()=>{f(ea,!0),f(x,!0);let V=n(Wt);z=()=>{f(x,!1),setTimeout(()=>{V?.focus()},16)}};ze(()=>{const V=()=>{const Z=Lr();f(ta,Z.bottom,!0),f($a,Z.right,!0),f(er,Z.height,!0)};return n(S)?.addEventListener("scroll",V),window.addEventListener("resize",V),()=>{n(S)?.removeEventListener("scroll",V),window.removeEventListener("resize",V)}});let G=E(l),K=E(i);var ee=ju(),Y=R(ee);{var T=V=>{var Z=zu(),oe=R(Z);ve(oe,()=>({"--left":n($a)-36+"px","--top":n(w),"--transform-origin":"top left"})),Jr(oe.lastChild,{get startClose(){return n(ea)},onClosed:j,get ref(){return n(No)},set ref(we){f(No,we,!0)},children:(we,xe)=>{var Me=Fu(),De=R(Me);{var Ie=Se=>{var H=Du(),q=b(H);at(q,{onClick:y,onKeydown:B,get dialogMode(){return n(K)},children:(se,Ce)=>{var _=Mu(),A=R(_);ve(A,()=>({"--size":"20px"})),ye(A.lastChild,{name:"pin"}),p(se,_)},$$slots:{default:!0}}),p(Se,H)},P=Se=>{var H=Ru(),q=b(H);at(q,{onClick:C,onKeydown:B,get dialogMode(){return n(K)},children:(se,Ce)=>{var _=Iu(),A=R(_);ve(A,()=>({"--size":"20px"})),ye(A.lastChild,{name:"pin-cancel"}),p(se,_)},$$slots:{default:!0}}),p(Se,H)};U(De,Se=>{n(m)?Se(P,!1):Se(Ie)})}var ne=L(De,2),he=b(ne);at(he,{onClick:J,get dialogMode(){return n(K)},children:(Se,H)=>{var q=Lu(),se=R(q);ve(se,()=>({"--size":"20px"})),ye(se.lastChild,{name:"pen"}),p(Se,q)},$$slots:{default:!0}});var be=L(ne,2),Ee=b(be);at(Ee,{onClick:D,onKeydown:M,dangerous:!0,get dialogMode(){return n(K)},children:(Se,H)=>{var q=Ou(),se=R(q);ve(se,()=>({"--size":"20px"})),ye(se.lastChild,{name:"bin"}),p(Se,q)},$$slots:{default:!0}}),p(we,Me)},$$slots:{default:!0}}),p(V,Z)};U(Y,V=>{n(Bn)&&V(T)})}var te=L(Y,2);{var ue=V=>{{let Z=E(()=>ht(n(Wt))?.next||null);Eu(V,{get tag(){return n(Bt)},get nextFocusRef(){return n(Z)},onClosed:oe=>{z(oe)}})}};U(te,V=>{n(x)&&V(ue)})}p(t,ee),ce()}var Hu=N('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Uu=N('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),Wu=N("<!> <span> </span> <!>",1),Vu=N('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function tr(t,e){le(e,!0);let{getGetMapTags:a}=zt(),r=O(null),o=E(Nu);const s=()=>{if(n(r)){const v=n(r).getBoundingClientRect();return{bottom:v.bottom,right:v.right,height:v.height}}return{bottom:0,right:0,height:0}},i=v=>{v.stopPropagation(),v.preventDefault(),Pu({tag:e.tag,getRect:s,focusRef:n(r)})},l=v=>{v.key==="Tab"&&!v.shiftKey&&n(o)&&(v.preventDefault(),Au()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let c=E(()=>a()().get(e.tag)?.pinned||!1);var u=Vu(),d=b(u);ve(d,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),Qa(d.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(v,h)=>{var g=Wu(),m=R(g);{var x=S=>{var B=Hu(),M=b(B);ve(M,()=>({"--size":"18px"})),ye(M.lastChild,{name:"pin"}),p(S,B)};U(m,S=>{n(c)&&S(x)})}var y=L(m,2),C=b(y),j=L(y,2);{var w=S=>{var B=Uu();B.__click=i,B.__keydown=l;var M=b(B),D=b(M);ve(D,()=>({"--size":"16px"})),ye(D.lastChild,{name:"menu"});var z=L(D,2);ft(z,{children:(J,G)=>{var K=Ae("Tag options");p(J,K)}}),et(B,J=>f(r,J),()=>n(r)),me(()=>$e(B,1,rt({c:!0,d:e.type==="selected"}),"p-9jjlcl")),p(S,B)};U(j,S=>{e.hideMenu||S(w)})}me(()=>ut(C,e.tag)),p(v,g)},$$slots:{default:!0}}),p(t,u),ce()}lt(["click","keydown"]);var qu=N('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function hs(t,e){le(e,!0);let a=Pe(e,"mobile",3,!1);const{getGetMapTags:r}=zt();let s=E(()=>{const g=r()();return[...e.tags].sort((m,x)=>g.get(m)?.pinned?-1:g.get(x)?.pinned?1:m.localeCompare(x))}),i=E(()=>n(s).filter(g=>r()().get(g)?.pinned)),l=E(()=>n(s).filter(g=>!r()().get(g)?.pinned));var c=qu(),u=b(c),d=b(u);bn(d,16,()=>n(i),g=>g,(g,m)=>{tr(g,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})});var v=L(d,2);bn(v,17,()=>e.metaTags,g=>"meta"+g,(g,m)=>{tr(g,{hideMenu:!0,get tag(){return n(m)},onClick:()=>{e.handleMetaTagClick(n(m))}})});var h=L(v,2);bn(h,16,()=>n(l),g=>g,(g,m)=>{tr(g,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})}),me(()=>$e(u,1,rt({b:!0,c:a()}),"p-lawyrs")),p(t,c),ce()}var Ku=N('<div class="b c p-1i0uzbi"><div class="d p-1i0uzbi"><button class="e p-1i0uzbi"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),Yu=N('<div class="a p-1i0uzbi"><!></div>');function gs(t,e){le(e,!0);let a=O(null);const r=c=>{f(a,c,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};ze(()=>{n(a)&&n(a).focus()});var s=Yu(),i=b(s);{var l=c=>{var u=Ku(),d=b(u),v=b(d);v.__click=o;var h=b(v);ve(h,()=>({"--size":"20px"})),ye(h.lastChild,{name:"close"});var g=L(h,2);ft(g,{children:(y,C)=>{var j=Ae("Clear");p(y,j)}});var m=L(d,2);bn(m,19,()=>e.metaTags,y=>"meta_"+y,(y,C,j)=>{{let w=E(()=>n(j)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);tr(y,{hideMenu:!0,type:"selected",get tag(){return n(C)},onClick:()=>{e.handleMetaTagClick(n(C))},get onRef(){return n(w)}})}});var x=L(m,2);bn(x,18,()=>e.selectedTags,y=>y,(y,C,j)=>{{let w=E(()=>n(j)===e.selectedTags.size-1?r:void 0);tr(y,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return C},onClick:()=>{e.handleSelectedTagClick(C)},get onRef(){return n(w)}})}}),p(c,u)};U(i,c=>{e.selectedTags.size+e.metaTags.size>0&&c(l)})}p(t,s),ce()}lt(["click"]);const Ao=(t,e,a,r)=>{if(t.has(Xe.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},Tn=200,Xu=t=>t<.5?2*t*t:-1+(4-2*t)*t,Yi=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,Xu(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},Gu=t=>{const{getIsKeyboardVisible:a}=Hd();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=v=>({x:v.clientX,y:v.clientY,time:performance.now()}),c=v=>{r=[l(v.touches[0])],o=!0},u=v=>{if(!o||s)return;r.push(l(v.touches[0]));const h=performance.now()-150;r=r.filter(D=>D.time>=h);const g=r.at(-1),m=r[0];if(!g||!m)return;const x=m.x,y=m.y,C=g.x,j=g.y,w=C-x,S=j-y,B=Math.abs(w)>Math.abs(S),M=Math.abs(w)>3;B&&M&&!a()&&(s=!0,v.preventDefault(),t([...r]),i())},d=()=>{i()};pe(()=>(document.addEventListener("touchstart",c,{passive:!0}),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",d,{passive:!0}),document.addEventListener("touchcancel",d,{passive:!0}),()=>{document.removeEventListener("touchstart",c),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",d),document.removeEventListener("touchcancel",d)}))},ps=5,ms=.6,Yn=.3;function Xi(t,e){le(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,c=0,u=0,d=null,v=null;const h=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,c=0,u=0,d!==null&&(cancelAnimationFrame(d),d=null),v&&(clearTimeout(v),v=null)},g=()=>{e.onCancel(),h()},m=()=>{v&&clearTimeout(v),v=setTimeout(g,5e3)};Gu(async M=>{if(!o)try{const D=M.at(-1);if(!D)throw new Error("No points available for swipe initialization");const z=await e.onInit();if(!z)return;s=z.initialPosition,i=z.currentPosition,l=z.minPosition,c=z.maxPosition,u=z.width,r=D.x,a=M,o=!0,m()}catch{h()}});const y=M=>Math.max(l,Math.min(c,M)),C=()=>{if(d=null,!o){h();return}const M=a.at(-1),D=a[0];if(!M||!D)return;let z=M.x-r;r=M.x;const J=y(i+z);J!==i&&(i=J,e.onUpdate({initialPosition:s,newPosition:J,width:u,minPosition:l,maxPosition:c}))},j=M=>{if(!o){h();return}a.push({x:M.touches[0].clientX,y:M.touches[0].clientY,time:performance.now()});const D=performance.now()-150;a=a.filter(K=>K.time>=D),d===null&&(d=requestAnimationFrame(C)),m();const z=M.touches[0].clientX-a[0].x,J=M.touches[0].clientY-a[0].y;Math.abs(z)>Math.abs(J)&&M.cancelable&&M.preventDefault()},w=M=>{const D=Math.abs(M);if(D>=ms)return ps;if(D>=Yn){const z=(D-Yn)/(ms-Yn);return e.baseActionThreshold-z*(e.baseActionThreshold-ps)}else return e.baseActionThreshold},S=M=>{if(!o){h();return}let D=0;a.push({x:M.changedTouches[0].clientX,y:M.changedTouches[0].clientY,time:performance.now()}),C(),d!==null&&(cancelAnimationFrame(d),d=null);const z=a[0],J=a[a.length-1],G=J.x-z.x,K=J.time-z.time;K>0&&(D=G/K);const ee=w(D);e.onFinish({swipeVelocity:D,currentPosition:i,minPosition:l,maxPosition:c,initialPosition:s,width:u,actionThreshold:ee}),h()},B=()=>{g()};pe(()=>(document.addEventListener("touchmove",j,{passive:!1}),document.addEventListener("touchend",S,{passive:!0}),document.addEventListener("touchcancel",B,{passive:!0}),()=>{document.removeEventListener("touchmove",j),document.removeEventListener("touchend",S),document.removeEventListener("touchcancel",B),d!==null&&cancelAnimationFrame(d),v&&clearTimeout(v)})),ce()}function Zu(t,e){le(e,!0);const a=Jn();let r=Pe(e,"animationRef",7),o=Pe(e,"dialog",7);Xi(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const u=-e.dialogWidth*.7,d=0;let v=e.sidebarState==="closed"?u:d,h=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let x=()=>1;if(r().current){r().current.pause();let y=Number(r().current.currentTime);ir()&&(y=Number(y)+50,r().current.currentTime=Math.min(Math.max(Tn-1,y),y));const C=r().current.effect?.getComputedTiming().progress||0;x=()=>C,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(y=>requestAnimationFrame(y)),h=Math.abs(1-x())}h=e.sidebarState==="closed"?h:1-h,o().style.setProperty("--backdrop-bg",`${h*.1}`),o()&&!o().open&&(o().showModal(),ir()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=h*-25;const g=h*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let m=e.sidebarState==="closed"?u:d;return e.sidebarState==="opened"||e.sidebarState==="closed"||(m=g),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:v,currentPosition:m,minPosition:u,maxPosition:d,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:u,width:d})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const v=1-Math.abs(u/d)/7*10;o().style.transform=`translate3d(${u}px, 0, 0)`,a.swipingRatio=v*-25,o().style.setProperty("--backdrop-bg",`${v*.1}`)},onFinish:({swipeVelocity:u,currentPosition:d,initialPosition:v,width:h,actionThreshold:g})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let m="close";const x=Math.abs(d-v)/h*100/7*10;if(x===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(x===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?m=Math.abs(x)>g||u>Yn?"open":"close":e.sidebarState==="swipingClose"&&(m=Math.abs(x)>g&&u<=Yn||u<-Yn?"close":"open");let y=Yi(Math.abs(x)/100);e.sidebarState==="swipingClose"&&m==="close"&&(y=1-y);const C=(m==="open"?1-y:y)*Tn;a.duration=C/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${m==="open"?.1:0}`),m==="open"?e.onOpen():m==="close"&&e.onClose()}}),ce()}var Ju=N("<dialog><div><!> <!></div></dialog> <!> <!>",1);function Qu(t,e){le(e,!0);const{getSidebarState:a,setSidebarState:r}=pr();let o=O(0);pe(()=>{const T=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",T),T(),()=>{window.removeEventListener("resize",T)}});const s=Jn(),{isScrolling:i}=Wo();let l=O(null),c=O(null),u={},d=E(a);const v=()=>{e.blocked||r("closing")},h=T=>{r(T==="open"?"swipingOpen":"swipingClose")},g=()=>{r("opened")},m=()=>{r("preOpening")},x=()=>{n(l)?.close(),r("closed")},y=T=>{T.preventDefault(),v()};pe(()=>(n(l)?.addEventListener("close",x),n(l)?.addEventListener("cancel",y),()=>{n(l)?.removeEventListener("close",x),n(l)?.removeEventListener("cancel",y)}));const C=E(i);let j=E(()=>s.working);const w=T=>{T?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=Na().duration};ze(()=>{n(d)==="opening"?Ft(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const T=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const te=n(l)?.animate([{transform:T},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||Tn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});u.current=te,te&&(te.onfinish=()=>{g(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=Na().duration,te.cancel(),u.current=void 0})})}):n(d)==="closing"&&Ft(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const T=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const te=n(l)?.animate([{transform:T},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||Tn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});u.current=te,te&&(te.onfinish=()=>{x(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=Na().duration,te.cancel(),u.current=void 0})})})}),ze(()=>{n(d)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),ir()&&n(l)?.getBoundingClientRect()),r("opening"))}),pe(()=>{n(d)==="opened"&&r("preOpening")});var S=Ju(),B=R(S),M=b(B),D=b(M);ke(D,()=>e.children);var z=L(D,2);{var J=T=>{qo(T,{})};U(z,T=>{n(d)==="opened"&&T(J)})}et(M,T=>f(c,T),()=>n(c)),et(B,T=>f(l,T),()=>n(l));var G=L(B,2);{var K=T=>{Ko(T,{get dialog(){return n(l)},get dialogInner(){return n(c)},onClose:v})};U(G,T=>{n(c)&&n(d)==="opened"&&!e.blocked&&T(K)})}var ee=L(G,2);{var Y=T=>{Zu(T,{onCancelSwipe:w,onOpen:m,onClose:v,onSwipe:h,get dialogWidth(){return n(o)},get animationRef(){return u},get dialog(){return n(l)},get sidebarState(){return n(d)}})};U(ee,T=>{!n(C)&&!e.blocked&&T(Y)})}me(()=>{$e(B,1,rt({a:!0,b:n(j),c:n(d)==="opened"||n(d)==="opening"||n(d)==="closing"||n(d)==="swipingClose",d:n(d)==="opened"||n(d)==="opening"||n(d)==="swipingOpen"}),"p-1gucilc"),$e(M,1,rt({e:!0,f:n(d)==="swipingOpen",g:n(d)!=="opened"}),"p-1gucilc")}),p(t,S),ce()}var $u=N('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),ef=N('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function tf(t,e){le(e,!0);const{checkMobileSize:a}=Mn(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=pr(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:c}=on(),{getTagsSearch:u,setTagsSearch:d}=Xc(),{getSelectedTags:v,addTag:h,removeTag:g,clearTags:m}=An(),{getSelectedMetaTags:x,addMetaTag:y,removeMetaTag:C,clearSelectedMetaTags:j}=Gr();let w=E(v),S=E(x);const{getGetNotes:B,checkNotesInArchive:M,checkNotesInBin:D}=zt(),z=E(B),J=P=>{h(P)},G=P=>{y(P)},K=P=>{g(P)},ee=P=>{C(P)};let Y=E(()=>n(w).size===0&&!n(S).has(Xe.INBOX)&&(n(z)()||[]).some(P=>(!n(S).has(Xe.ARCHIVED)&&!n(S).has(Xe.BIN)&&P?.data&&!P.data.deletedAt&&!P.data.archivedAt||n(S).has(Xe.ARCHIVED)&&P?.data&&!P.data.deletedAt&&P.data.archivedAt||n(S).has(Xe.BIN)&&P?.data&&P.data.deletedAt)&&P?.data?.tags.length===0)),T=E(()=>Ao(n(S),n(w),n(z)()||[],P=>!(P?.data&&(P.data.deletedAt||P.data.archivedAt)&&!n(S).has(Xe.ARCHIVED)&&!n(S).has(Xe.BIN)||P?.data&&(P.data.deletedAt||!P.data.archivedAt)&&n(S).has(Xe.ARCHIVED)||P?.data&&!P.data.deletedAt&&n(S).has(Xe.BIN)))),te=E(()=>n(T).filter(P=>u()===""||P.toLowerCase().indexOf(u().toLowerCase())!==-1)),ue=E(a);const{checkExistedDialog:V}=rn();let Z=E(()=>i().length>0||V());const oe=()=>{if(n(ue)){if(n(Z))return;o()==="opened"?r():o()==="closed"&&s()}};pe(()=>lr({key:"b",meta:!0,action:oe})),pe(()=>lr({key:"b",ctrl:!0,action:oe}));let we=E(()=>[...n(Y)&&n(S).size===0?[Xe.INBOX]:[],...n(S).size===0?[...M()&&n(w).size===0?[Xe.ARCHIVED]:[],...D()&&n(w).size===0?[Xe.BIN]:[]]:[]].filter(P=>u()===""||P.toLowerCase().indexOf(u().toLowerCase())!==-1).sort((P,ne)=>P===Xe.INBOX?-1:ne===Xe.INBOX?1:P.localeCompare(ne)));var xe=ie(),Me=R(xe);{var De=P=>{Qu(P,{get blocked(){return n(Z)},children:(ne,he)=>{var be=$u(),Ee=R(be),Se=b(Ee),H=b(Se);qi(H,{});var q=L(H,2),se=b(q),Ce=E(()=>c(fe.Settings));se.__click=function(...Q){n(Ce)?.apply(this,Q)};var _=b(se);ve(_,()=>({"--size":"24px"})),ye(_.lastChild,{name:"settings"});var A=L(_,2);ft(A,{children:(Q,ae)=>{var ge=Ae("Settings");p(Q,ge)}});var k=L(se,2),F=E(()=>c(fe.Sync));k.__click=function(...Q){n(F)?.apply(this,Q)};var X=b(k);ve(X,()=>({"--size":"24px"})),ye(X.lastChild,{name:"sync"});var W=L(X,2);ft(W,{children:(Q,ae)=>{var ge=Ae("Sync");p(Q,ge)}});var de=L(Se,2),_e=b(de);{let Q=E(u);bo(_e,{placeholder:"Search tag",get value(){return n(Q)},onChange:ae=>{d(ae)}})}var re=L(de,2);{let Q=E(()=>n(S).has(Xe.BIN));gs(re,{get clearTags(){return m},get clearMetaTags(){return j},get hideTagMenu(){return n(Q)},handleMetaTagClick:ee,get metaTags(){return n(S)},get selectedTags(){return n(w)},handleSelectedTagClick:K})}var $=L(Ee,2);{let Q=E(()=>n(S).has(Xe.BIN));hs($,{get hideTagMenu(){return n(Q)},get metaTags(){return n(we)},get tags(){return n(te)},handleMetaTagClick:G,handleTagClick:J,mobile:!0})}me((Q,ae)=>{Qe(se,"href",Q),Qe(k,"href",ae)},[()=>l(fe.Settings),()=>l(fe.Sync)]),p(ne,be)},$$slots:{default:!0}})},Ie=P=>{var ne=ef(),he=b(ne),be=b(he);{let se=E(u);bo(be,{placeholder:"Search tag",get value(){return n(se)},onChange:Ce=>{d(Ce)}})}var Ee=L(he,2),Se=b(Ee),H=b(Se);{let se=E(()=>n(S).has(Xe.BIN));gs(H,{get metaTags(){return n(S)},get clearTags(){return m},get clearMetaTags(){return j},get hideTagMenu(){return n(se)},get selectedTags(){return n(w)},handleMetaTagClick:ee,handleSelectedTagClick:K})}var q=L(Se,2);{let se=E(()=>n(S).has(Xe.BIN));hs(q,{get metaTags(){return n(we)},get hideTagMenu(){return n(se)},get tags(){return n(te)},handleMetaTagClick:G,handleTagClick:J})}p(P,ne)};U(Me,P=>{n(ue)?P(De):P(Ie,!1)})}p(t,xe),ce()}lt(["click"]);var nf=N('<button class="a p-11odwi4"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function af(t,e){le(e,!0);let a=Pe(e,"ref",15);var r=nf();r.__click=function(...i){e.onClick?.apply(this,i)};var o=b(r);ve(o,()=>({"--rotate":"-90deg"})),ye(o.lastChild,{name:"menu"});var s=L(o,2);ft(s,{children:(i,l)=>{var c=Ae();me(()=>ut(c,e.title)),p(i,c)}}),et(r,i=>a(i),()=>a()),p(t,r),ce()}lt(["click"]);const rf=t=>{try{new URL(t)}catch{return!1}return!0};var of=N('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),sf=N('<form class="a p-y9ylet"><!></form>');function lf(t,e){le(e,!0);const{addTag:a}=zt(),{getSelectedTags:r}=An(),{getSelectedNotes:o}=ga(),{getFiltredNotes:s}=pa();let i=O(!1),l=O(!1),c,u=!1,d=O(null),v=O(""),h=e.nextFocusRef;pe(()=>(n(d)&&n(d).focus(),()=>{c&&clearTimeout(c)}));const g=()=>{c=setTimeout(()=>{f(l,!0)},250)},m=()=>{f(i,!0)},x=async()=>{if(r().has(n(v).trim())){m();return}if(n(v).trim()!=="")try{g();const w=new Set(o()),S=w.size?[...w]:s().map(M=>M.id),{cancel:B}=await a(n(v).trim(),S);_t("Tag added",{cancel:{nextFocusRef:h,onCancel:async()=>{await B(),setTimeout(()=>{const{prev:M}=ht(h);M?.focus()},16)}}}),u=!0}finally{f(i,!0)}},y=()=>{e.onClosed?.(u)},C=j=>{j.preventDefault(),x()};mr(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:y,children:(j,w)=>{var S=sf(),B=b(S);{var M=z=>{Ka(z,{})},D=z=>{var J=of(),G=L(R(J),2);Yo(G,{placeholder:"Enter new tag name",get ref(){return n(d)},set ref(T){f(d,T,!0)},get value(){return n(v)},set value(T){f(v,T,!0)}});var K=L(G,2),ee=b(K);Mt(ee,{onClick:m,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(T,te)=>{var ue=Ae("Cancel");p(T,ue)},$$slots:{default:!0}});var Y=L(ee,2);Mt(Y,{onClick:x,fullWidth:!0,withoutMinWidth:!0,children:(T,te)=>{var ue=Ae("OK");p(T,ue)},$$slots:{default:!0}}),p(z,J)};U(B,z=>{n(l)?z(M):z(D,!1)})}an("submit",S,C),p(j,S)},$$slots:{default:!0}}),ce()}var cf=N('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),df=N('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),uf=N('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!></div> <!></div>');function ff(t,e){le(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=zt(),{getSelectedTags:s}=An();let i=O(null),l=O(""),c=O(null);const u=E(a);let d=Pe(e,"shownTagInput",15);const v=()=>n(u)?e.mode==="exit"?Ao(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let g=E(()=>{const T=s(),te=new Set(Ao(new Set,new Set(e.selectedTags.length>0?e.selectedTags:T),o()()||[]));return v().filter(V=>e.selectedTags.some(Z=>V===Z)?!1:n(l)===""||V.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((V,Z)=>T.has(V)&&T.has(Z)?V.localeCompare(Z):T.has(V)?-1:T.has(Z)?1:te.has(V)&&te.has(Z)?V.localeCompare(Z):te.has(V)?-1:te.has(Z)?1:0)});const m=T=>{if(!e.selectedTags.includes(T)){if(e.mode!=="exit"||n(g).includes(T)){e.onChangeTags([...e.selectedTags,T]),f(l,"");return}n(i)?.focus()}},x=T=>{const te=e.selectedTags.filter(ue=>ue!==T);te.length===0?e.onChangeTags([]):e.onChangeTags(te)},y=T=>{T.preventDefault(),n(l)!==""?m(n(l)):d(!1)};ze(()=>{n(i)&&d()&&n(i).focus(),d()||f(l,"")});const C=T=>{T.preventDefault()},j=T=>{T.preventDefault(),T.stopPropagation(),T.stopImmediatePropagation()};var w=uf(),S=b(w),B=b(S);bn(B,17,()=>e.selectedTags,T=>T+"-tags_selected",(T,te)=>{Qa(T,{onPointerDown:C,onTouchStart:j,onClick:()=>{x(n(te))},type:"button",style:"selected",children:(ue,V)=>{var Z=Ae();me(()=>ut(Z,n(te))),p(ue,Z)},$$slots:{default:!0}})});var M=L(B,2);{var D=T=>{var te=ie(),ue=R(te);bn(ue,17,()=>n(g).filter(V=>V.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),V=>V+"-tags_suggested",(V,Z)=>{Qa(V,{onPointerDown:C,onTouchStart:j,onClick:()=>{m(n(Z))},children:(oe,we)=>{var xe=Ae();me(()=>ut(xe,n(Z))),p(oe,xe)},$$slots:{default:!0}})}),p(T,te)};U(M,T=>{d()&&T(D)})}var z=L(M,2);{var J=T=>{Qa(T,{onPointerDown:C,onTouchStart:j,onClick:()=>{m(n(l)),f(l,"")},children:(te,ue)=>{var V=Ae();me(()=>ut(V,n(l))),p(te,V)},$$slots:{default:!0}})};U(z,T=>{n(l)!==""&&(e.mode!=="exit"||n(g).find(te=>te.toLowerCase()===n(l).toLowerCase()))&&T(J)})}var G=L(z,2);{var K=T=>{Qa(T,{mode:"empty",onPointerDown:C,onTouchStart:j,onClick:()=>{d(!0)},children:(te,ue)=>{var V=cf(),Z=b(V);ve(Z,()=>({"--size":"12px"})),ye(Z.lastChild,{name:"plus"});var oe=L(Z,2);ft(oe,{children:(we,xe)=>{var Me=Ae("add tag");p(we,Me)}}),p(te,V)},$$slots:{default:!0}})};U(G,T=>{d()||T(K)})}var ee=L(S,2);{var Y=T=>{var te=df(),ue=b(te),V=b(ue);Yo(V,{placeholder:"tag",get ref(){return n(i)},set ref(oe){f(i,oe,!0)},get value(){return n(l)},set value(oe){f(l,oe,!0)}});var Z=L(ue,2);Z.__pointerdown=C,Z.__touchstart=j,Z.__click=()=>{n(i)?.blur(),n(l)!==""&&m(n(l)),d(!1),f(l,"")},an("submit",te,y),p(T,te)};U(ee,T=>{d()&&T(Y)})}et(w,T=>f(c,T),()=>n(c)),p(t,w),ce()}lt(["pointerdown","touchstart","click"]);var vf=N('<div class="c p-y9ylet"><!> <!></div>'),hf=N('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),gf=N('<form class="a p-y9ylet"><!></form>');function pf(t,e){le(e,!0);const{changeTags:a,getNoteById:r}=zt(),{getSelectedTags:o}=An(),{getSelectedNotes:s}=ga(),{getFiltredNotes:i}=pa();let l=O(!1),c=O(!1),u,d=!1,v=O(!1),h=e.nextFocusRef,m=(()=>{const D=[...o()],z=s();if(z.size===0)return D;const J=Array.from(z);let G=new Set(r(J[0])?.data.tags||[]);for(let K=1;K<J.length;K++){const ee=new Set(r(J[K])?.data.tags||[]),Y=new Set([]);ee.forEach(T=>{G.has(T)&&Y.add(T)}),G=Y}return Array.from(G)})(),x=O(St(m));pe(()=>()=>{u&&clearTimeout(u)});const y=()=>{u=setTimeout(()=>{f(c,!0)},250)},C=()=>{f(l,!0)},j=async()=>{const D=m,z=new Set(s()),J=z.size?[...z]:i().map(G=>G.id);try{y();const{cancel:G}=await a([...D],n(x),J);_t("Tags changed",{cancel:{nextFocusRef:h,onCancel:async()=>{await G(),setTimeout(()=>{const{prev:K}=ht(h);K?.focus()},16)}}}),d=!0}finally{f(l,!0)}},w=D=>{D.key==="Escape"&&n(v)&&(f(v,!1),D.preventDefault(),D.stopPropagation())};pe(()=>(document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)));const S=()=>{e.onClosed?.(d)},B=D=>{f(x,D,!0)},M=D=>{D.preventDefault(),j()};mr(t,{get blocked(){return n(c)},get startClose(){return n(l)},onClosed:S,children:(D,z)=>{var J=gf(),G=b(J);{var K=Y=>{Ka(Y,{})},ee=Y=>{var T=hf(),te=L(R(T),2);ff(te,{get selectedTags(){return n(x)},onChangeTags:B,get shownTagInput(){return n(v)},set shownTagInput(Z){f(v,Z,!0)}});var ue=L(te,2);{var V=Z=>{var oe=vf(),we=b(oe);Mt(we,{onClick:C,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(Me,De)=>{var Ie=Ae("Cancel");p(Me,Ie)},$$slots:{default:!0}});var xe=L(we,2);Mt(xe,{onClick:j,fullWidth:!0,withoutMinWidth:!0,children:(Me,De)=>{var Ie=Ae("OK");p(Me,Ie)},$$slots:{default:!0}}),p(Z,oe)};U(ue,Z=>{n(v)||Z(V)})}p(Y,T)};U(G,Y=>{n(c)?Y(K):Y(ee,!1)})}an("submit",J,M),p(D,J)},$$slots:{default:!0}}),ce()}var mf=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),_f=N('<li class="p-antir2"><!></li>'),wf=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select mode',1),yf=N('<li class="p-antir2"><!></li>'),bf=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),Sf=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),Cf=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),xf=N('<li class="p-antir2"><!></li>'),Tf=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),kf=N('<li class="p-antir2"><!></li>'),Ef=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),Pf=N('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <li class="p-antir2"><!></li>',1),Nf=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),Af=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),Mf=N('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),Df=N("<!> <!> <!> <!>",1),If=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Rf=N('<div class="a p-antir2"><!></div> <!> <!> <!>',1);function Lf(t,e){le(e,!0);const{checkMobileSize:a}=Mn(),{getSelectedTags:r,setSelectedTags:o,clearTags:s}=An(),{moveNotesToBin:i,moveNotesToArchive:l,moveNotesFromArchive:c,restoreNotesFromBin:u,deleteNotes:d}=zt(),{getFiltredNotes:v}=pa(),{getMode:h,changeMode:g,getSelectedNotes:m,setSelectedNotes:x,clearNotes:y}=ga();let C=E(r),j=O(!1),w=O(!1),S=O(!1),B=O(!1),M=E(a),D=O(null),z=O(null);const J=()=>{n(j)||f(j,!0)},G=()=>{f(j,!1),f(w,!1)};ze(()=>{!n(j)&&!n(S)&&!n(B)&&f(D,ht(n(z)).next,!0)}),pe(()=>{const H=q=>{q.key==="Escape"&&n(j)&&n(z)?.focus()};return window.addEventListener("keydown",H),()=>{window.removeEventListener("keydown",H)}});let K=()=>{};const ee=()=>{f(w,!0),f(S,!0);let H=n(z);K=()=>{f(S,!1),setTimeout(()=>{H?.focus()},16)}};let Y=()=>{};const T=()=>{f(w,!0),f(B,!0);let H=n(z);Y=()=>{f(B,!1),setTimeout(()=>{H?.focus()},16)}},te=async()=>{const H=Array.from(n(C)),q=new Set(m()),se=q.size?[...q]:v().map(_=>_.id),{cancel:Ce}=await i({noteIds:se});s(),y(),_t("Notes moved to bin",{cancel:{nextFocusRef:n(D),onCancel:async()=>{await Ce(),o(new Set(H)),x(q),setTimeout(()=>{const{prev:_}=ht(n(D));_?.focus()},16)}}}),f(w,!0)},ue=async()=>{const H=Array.from(n(C)),q=new Set(m()),se=q.size?[...q]:v().map(_=>_.id),{cancel:Ce}=await l({noteIds:se});s(),y(),_t("Notes moved to archive",{cancel:{nextFocusRef:n(D),onCancel:async()=>{await Ce(),o(new Set(H)),x(q),setTimeout(()=>{const{prev:_}=ht(n(D));_?.focus()},16)}}}),f(w,!0)},V=async()=>{const H=Array.from(n(C)),q=new Set(m()),se=q.size?[...q]:v().map(_=>_.id),{cancel:Ce}=await c({noteIds:se});s(),y(),_t("Notes moved from archive",{cancel:{nextFocusRef:n(D),onCancel:async()=>{await Ce(),o(new Set(H)),x(q),setTimeout(()=>{const{prev:_}=ht(n(D));_?.focus()},16)}}}),f(w,!0)},Z=async()=>{const H=Array.from(n(C)),q=new Set(m()),se=q.size?[...q]:v().map(_=>_.id),{cancel:Ce}=await u({noteIds:se});s(),y(),_t("Notes restored",{cancel:{nextFocusRef:n(D),onCancel:async()=>{await Ce(),o(new Set(H)),x(q),setTimeout(()=>{const{prev:_}=ht(n(D));_?.focus()},16)}}}),f(w,!0)},oe=()=>{const H=new Set(m()),q=H.size?[...H]:v().map(se=>se.id);f(w,!0),Aa({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{f(w,!0),s(),y(),await d({noteIds:q})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(z)?.focus()},16)}})},we=()=>{const H=v(),q=Array.from(m()),se=[];for(const _ of H)_.data&&_.data?.link&&rf(_.data?.link.url)&&(q.includes(_.id)||q.length===0)&&se.push(_.data?.link.url);const Ce=()=>{for(const _ of se)if(!window.open(_,"_blank")){Aa({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(z)?.focus()},16)}});break}};se.length<=10?Ce():Aa({title:`Are you sure to open ${se.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{Ce()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(z)?.focus()},16)}}),f(w,!0)};let xe=E(()=>h()==="multiple");var Me=Rf(),De=R(Me),Ie=b(De);af(Ie,{title:"notes menu",onClick:J,get ref(){return n(z)},set ref(H){f(z,H,!0)}});var P=L(De,2);{var ne=H=>{var q=If(),se=R(q);ve(se,()=>({"--right":"0","--top":"44px"})),Jr(se.lastChild,{get startClose(){return n(w)},onClosed:G,children:(Ce,_)=>{var A=Df(),k=R(A);{var F=Q=>{var ae=_f(),ge=b(ae);at(ge,{onClick:we,get dialogMode(){return n(M)},children:(Be,tt)=>{var nt=mf(),Le=R(nt);ve(Le,()=>({"--size":"20px"})),ye(Le.lastChild,{name:"open"}),p(Be,nt)},$$slots:{default:!0}}),p(Q,ae)};U(k,Q=>{Ki||nu||Q(F)})}var X=L(k,2);{var W=Q=>{var ae=yf(),ge=b(ae);at(ge,{onClick:()=>{f(w,!0),g("multiple")},get dialogMode(){return n(M)},children:(Be,tt)=>{var nt=wf(),Le=R(nt);ve(Le,()=>({"--size":"20px"})),ye(Le.lastChild,{name:"check"}),p(Be,nt)},$$slots:{default:!0}}),p(Q,ae)};U(X,Q=>{n(xe)||Q(W)})}var de=L(X,2);{var _e=Q=>{var ae=Pf(),ge=R(ae),Be=b(ge);at(Be,{onClick:ee,get dialogMode(){return n(M)},children:(We,ot)=>{var qe=bf(),Je=R(qe);ve(Je,()=>({"--size":"20px","--rotate":"45deg"})),ye(Je.lastChild,{name:"close"}),p(We,qe)},$$slots:{default:!0}});var tt=L(ge,2),nt=b(tt);at(nt,{onClick:T,get dialogMode(){return n(M)},children:(We,ot)=>{var qe=Sf(),Je=R(qe);ve(Je,()=>({"--size":"20px"})),ye(Je.lastChild,{name:"pen"}),p(We,qe)},$$slots:{default:!0}});var Le=L(tt,2);{var Ue=We=>{var ot=xf(),qe=b(ot);at(qe,{onClick:ue,get dialogMode(){return n(M)},children:(Je,sn)=>{var Et=Cf(),Pt=R(Et);ve(Pt,()=>({"--size":"20px"})),ye(Pt.lastChild,{name:"archive"}),p(Je,Et)},$$slots:{default:!0}}),p(We,ot)},Oe=We=>{var ot=kf(),qe=b(ot);at(qe,{onClick:V,get dialogMode(){return n(M)},children:(Je,sn)=>{var Et=Tf(),Pt=R(Et);ve(Pt,()=>({"--size":"20px"})),ye(Pt.lastChild,{name:"archive-cancel"}),p(Je,Et)},$$slots:{default:!0}}),p(We,ot)};U(Le,We=>{e.mode==="notes"?We(Ue):We(Oe,!1)})}var Fe=L(Le,2),Ze=b(Fe);at(Ze,{onClick:te,get dialogMode(){return n(M)},dangerous:!0,children:(We,ot)=>{var qe=Ef(),Je=R(qe);ve(Je,()=>({"--size":"20px"})),ye(Je.lastChild,{name:"bin"}),p(We,qe)},$$slots:{default:!0}}),p(Q,ae)};U(de,Q=>{(e.mode==="notes"||e.mode==="archive")&&Q(_e)})}var re=L(de,2);{var $=Q=>{var ae=Mf(),ge=R(ae),Be=b(ge);at(Be,{onClick:Z,get dialogMode(){return n(M)},children:(Le,Ue)=>{var Oe=Nf(),Fe=R(Oe);ve(Fe,()=>({"--size":"20px"})),ye(Fe.lastChild,{name:"bin-cancel"}),p(Le,Oe)},$$slots:{default:!0}});var tt=L(ge,2),nt=b(tt);at(nt,{onClick:oe,get dialogMode(){return n(M)},dangerous:!0,children:(Le,Ue)=>{var Oe=Af(),Fe=R(Oe);ve(Fe,()=>({"--size":"20px"})),ye(Fe.lastChild,{name:"bin"}),p(Le,Oe)},$$slots:{default:!0}}),p(Q,ae)};U(re,Q=>{e.mode==="bin"&&Q($)})}p(Ce,A)},$$slots:{default:!0}}),p(H,q)};U(P,H=>{n(j)&&H(ne)})}var he=L(P,2);{var be=H=>{lf(H,{get nextFocusRef(){return n(D)},onClosed:q=>{K(q)}})};U(he,H=>{n(S)&&H(be)})}var Ee=L(he,2);{var Se=H=>{pf(H,{get nextFocusRef(){return n(D)},onClosed:q=>{Y(q)}})};U(Ee,H=>{n(B)&&H(Se)})}p(t,Me),ce()}var Of=N('<label class="a p-uuy4jt"><input class="b p-uuy4jt" type="checkbox"/> <span class="c p-uuy4jt"><span class="d p-uuy4jt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></span> <!></label>');function Gi(t,e){le(e,!0);const a=()=>{e.onChange(!e.checked)};var r=Of(),o=b(r);o.__change=a;var s=L(o,2),i=b(s),l=b(i);ve(l,()=>({"--size":"16px"})),ye(l.lastChild,{name:"check"});var c=L(s,2);ft(c,{children:(u,d)=>{var v=Ae("Toggle switch");p(u,v)}}),me(()=>Oc(o,e.checked)),p(t,r),ce()}lt(["change"]);var Ff=N('<div class="g e p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),zf=N('<div class="g p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),jf=N('<a class="i j p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Bf=N('<div class="h p-1336jx2"><!> <!></div>'),Hf=N('<!> <div class="p p-1336jx2"><!></div>',1),Uf=N('<div class="r p-1336jx2"><div class="s p-1336jx2"><!> <span> </span></div> <button class="t p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),Wf=N('<div class="a p-1336jx2"><div class="b p-1336jx2"><div class="c p-1336jx2"><a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-1336jx2"><!></div> <div class="f p-1336jx2"><!></div></div> <div class="k p-1336jx2"><div class="l p-1336jx2"><!></div> <div class="m p-1336jx2"><div class="n p-1336jx2"><div class="o p-1336jx2"><!></div> <!></div> <div class="q p-1336jx2"><!></div></div></div></div>');function Vf(t,e){le(e,!0);const{getFeedSearch:a,setFeedSearch:r}=Ho(),{getScrollContainer:o}=Zr();let s=E(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:c,checkNotes:u}=zt(),{replaceSearchParams:d}=Jt(),{createDialogPageHref:v,createHandleClickDialogPage:h,getDialogPages:g}=on(),{checkExistedDialog:m}=rn(),{getMode:x,clearNotes:y,setSelectedNotes:C,getSelectedNotes:j,changeMode:w}=ga(),{checkMobileSize:S}=Mn(),{getFiltredNotes:B}=pa(),{getSelectedMetaTags:M}=Gr();let D=E(M),z=O(null);const J=E(l);let K=E(()=>{const re=B()||[],$=j();return re.every(Q=>$.has(Q.id))});const ee=()=>{n(s)&&n(s).scrollTo({top:0})},Y=()=>{Aa({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),d("")},onCancel:async()=>{}})},T=()=>{g().length===0&&!m()&&n(z)?.focus()};pe(()=>lr({key:"k",meta:!0,action:T})),pe(()=>lr({key:"k",ctrl:!0,action:T})),ze(()=>{const re=B()||[];Ft(()=>{const $=j();C(new Set(re.filter(Q=>$.has(Q.id)).map(Q=>Q.id)))})});let te=E(()=>n(D).has(Xe.ARCHIVED)?"archive":n(D).has(Xe.BIN)?"bin":"notes");var ue=Wf(),V=b(ue),Z=b(V),oe=b(Z),we=E(()=>h(fe.Settings));oe.__click=function(...re){n(we)?.apply(this,re)};var xe=b(oe);ve(xe,()=>({"--rotate":"30deg","--size":"20px"})),ye(xe.lastChild,{name:"settings"});var Me=L(oe,2),De=E(()=>h(fe.Sync));Me.__click=function(...re){n(De)?.apply(this,re)};var Ie=b(Me);ve(Ie,()=>({"--size":"20px"})),ye(Ie.lastChild,{name:"sync"});var P=L(Z,2),ne=b(P);qi(ne,{});var he=L(P,2),be=b(he);{var Ee=re=>{var $=ie(),Q=R($);{var ae=ge=>{var Be=ie(),tt=R(Be);{var nt=Ue=>{var Oe=Ff(),Fe=b(Oe);Fe.__click=Y;var Ze=b(Fe);ve(Ze,()=>({"--scale":"1.2","--size":"20px"})),ye(Ze.lastChild,{name:"clear"});var We=L(Ze);ft(We,{children:(ot,qe)=>{var Je=Ae("Empty bin");p(ot,Je)}}),p(Ue,Oe)},Le=Ue=>{var Oe=zf(),Fe=b(Oe);Fe.__click=Y;var Ze=b(Fe);ve(Ze,()=>({"--scale":"0.9","--size":"20px"})),ye(Ze.lastChild,{name:"clear"}),p(Ue,Oe)};U(tt,Ue=>{S()?Ue(nt):Ue(Le,!1)})}p(ge,Be)};U(Q,ge=>{n(J)&&ge(ae)})}p(re,$)},Se=re=>{var $=ie(),Q=R($);{var ae=ge=>{var Be=Bf(),tt=b(Be);{var nt=Ue=>{var Oe=jf();Oe.__click=function(...We){e.onOpenWindow?.apply(this,We)};var Fe=b(Oe);ve(Fe,()=>({"--scale":"0.7","--size":"32px"})),ye(Fe.lastChild,{name:"open-window"});var Ze=L(Fe,2);ft(Ze,{children:(We,ot)=>{var qe=Ae("open window");p(We,qe)}}),me(()=>Qe(Oe,"href",e.openWindowHref)),p(Ue,Oe)};U(tt,Ue=>{e.onOpenWindow&&Ue(nt)})}var Le=L(tt,2);bu(Le,{}),p(ge,Be)};U(Q,ge=>{n(te)==="notes"&&ge(ae)},!0)}p(re,$)};U(be,re=>{n(te)==="bin"?re(Ee):re(Se,!1)})}var H=L(V,2),q=b(H),se=b(q);tf(se,{});var Ce=L(q,2),_=b(Ce),A=b(_),k=b(A);{let re=E(a);bo(k,{onFocus:ee,placeholder:"Search",get value(){return n(re)},onChange:$=>{r($)},get ref(){return n(z)},set ref($){f(z,$,!0)}})}var F=L(A,2);{var X=re=>{var $=Hf(),Q=R($);vu(Q,{});var ae=L(Q,2),ge=b(ae);Lf(ge,{get mode(){return n(te)}}),p(re,$)};U(F,re=>{(n(te)==="notes"&&u()||n(te)==="bin"&&l()||n(te)==="archive"&&c())&&re(X)})}var W=L(_,2),de=b(W);{var _e=re=>{var $=ie(),Q=R($);{var ae=ge=>{var Be=Uf(),tt=b(Be),nt=b(tt);Gi(nt,{get checked(){return n(K)},onChange:Ze=>{if(Ze){const We=B()||[];C(new Set(We.map(ot=>ot.id)))}else y()}});var Le=L(nt,2),Ue=b(Le),Oe=L(tt,2);Oe.__click=Ze=>{Ze.preventDefault(),w("single")};var Fe=b(Oe);ve(Fe,()=>({"--size":"16px"})),ye(Fe.lastChild,{name:"close"}),me(Ze=>ut(Ue,`Selected ${Ze??""}`),[()=>j().size]),p(ge,Be)};U(Q,ge=>{x()==="multiple"&&ge(ae)})}p(re,$)};U(de,re=>{(n(te)==="notes"&&u()||n(te)==="bin"&&l()||n(te)==="archive"&&c())&&re(_e)})}me((re,$)=>{Qe(oe,"href",re),Qe(Me,"href",$)},[()=>v(fe.Settings),()=>v(fe.Sync)]),p(t,ue),ce()}lt(["click"]);var qf=N('<div class="p-gkgqyo"><!></div>');function dt(t,e){le(e,!0);const{setDialogPageHeight:a}=Vo();let r=O(null);pe(()=>{n(r);const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;a(u)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=qf(),s=b(o);ke(s,()=>e.children),et(o,i=>f(r,i),()=>n(r)),p(t,o),ce()}var Kf=N('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function Yf(t,e){le(e,!1);const{replaceSearchParams:a,getHref:r}=Jt(),o=l=>{l.preventDefault(),a("")};Yr();var s=Kf(),i=L(b(s),2);{let l=vr(()=>r(""));Mt(i,{element:"a",get href(){return n(l)},onClick:o,children:(c,u)=>{var d=Ae("close");p(c,d)},$$slots:{default:!0}})}p(t,s),ce()}const Xf="modulepreload",Gf=function(t){return"/"+t},_s={},vt=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(a.map(u=>{if(u=Gf(u),u in _s)return;_s[u]=!0;const d=u.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${v}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Xf,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((g,m)=>{h.addEventListener("load",g),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Zf=N('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function Jf(t){var e=Zf(),a=L(b(e),2);Mt(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=Ae("Reload");p(r,s)},$$slots:{default:!0}}),p(t,e)}var Qf=N('<div class="p-uzefkz"><!></div>');function $f(t,e){le(e,!0);let a=O(!1);const{getDialogPageHeight:r}=Vo(),o=E(r);pe(()=>{const c=setTimeout(()=>{f(a,!0)},250);return()=>{clearTimeout(c)}});var s=Qf(),i=b(s);{var l=c=>{Ka(c,{})};U(i,c=>{n(a)&&c(l)})}me(()=>ja(s,`min-height: ${n(o)??""}px;`)),p(t,s),ce()}function mt(t,e){le(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>vt(()=>import("./aC7Vl3nEv.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>vt(()=>import("./aBX_PGt4b.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>vt(()=>import("./aDp9qSCAl.js"),__vite__mapDeps([6,3,7])),"./Pages/AccountSetup.svelte":()=>vt(()=>import("./aBmLHvOB3.js"),__vite__mapDeps([8,9])),"./Pages/Auth.svelte":()=>vt(()=>import("./aDJWYn_7Q.js"),__vite__mapDeps([10,11])),"./Pages/ChangeTags.svelte":()=>vt(()=>import("./aCGlS6vy_.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>vt(()=>import("./aBrVJ-ZMw.js"),__vite__mapDeps([12,4,3,13,14])),"./Pages/Exit.svelte":()=>vt(()=>import("./aCUAMdYVd.js"),__vite__mapDeps([15,16])),"./Pages/ExportData.svelte":()=>vt(()=>import("./axep99twN.js"),__vite__mapDeps([17,18,19,20])),"./Pages/ImportData.svelte":()=>vt(()=>import("./aDBd7XgEh.js"),__vite__mapDeps([21,22])),"./Pages/Install.svelte":()=>vt(()=>import("./aCnEh9W-4.js"),__vite__mapDeps([23,24])),"./Pages/InstallSuccess.svelte":()=>vt(()=>import("./aDsb9_snD.js"),__vite__mapDeps([25,26])),"./Pages/NewNote.svelte":()=>vt(()=>import("./aCNvQ6LEN.js"),__vite__mapDeps([27,28,29])),"./Pages/Note.svelte":()=>vt(()=>import("./aB7df454N.js"),__vite__mapDeps([30,28,29,31])),"./Pages/Settings.svelte":()=>vt(()=>import("./aBTRh37Lt.js"),__vite__mapDeps([32,18,19,33])),"./Pages/Signin.svelte":()=>vt(()=>import("./auM1VN1S7.js"),__vite__mapDeps([34,4,3,13,35])),"./Pages/Signup.svelte":()=>vt(()=>import("./aDbp_RLJ3.js"),__vite__mapDeps([36,13,4,3,35])),"./Pages/Subscription.svelte":()=>vt(()=>import("./aBgOyFybG.js"),__vite__mapDeps([37,38])),"./Pages/Sync.svelte":()=>vt(()=>import("./aBZkY4_rJ.js"),__vite__mapDeps([39,40]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[c]){const u=r[c]();return a[l]={promise:u},a[l].module=await u,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=ie(),i=R(s);Nc(i,()=>o(e.page),l=>{$f(l,{})},(l,c)=>{const u=E(()=>n(c).default);var d=ie(),v=R(d);Ac(v,()=>n(u),(h,g)=>{g(h,{get params(){return e.params},get hidden(){return e.hidden}})}),p(l,d)},l=>{Jf(l)}),p(t,s),ce()}var ev=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),tv=N('<li class="p-1ljon4s"><!></li>'),nv=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),av=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),rv=N('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),ov=N('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),sv=N('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),iv=N(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),lv=N('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),cv=N('<!> <li class="p-1ljon4s"><!></li> <!>',1),dv=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function uv(t,e){le(e,!0);const{moveNoteToBin:a,moveNoteFromArchive:r,moveNoteToArchive:o,deleteNote:s,pinNote:i,restoreNoteFromBin:l}=zt();let c=Pe(e,"mode",3,"notes"),u=Pe(e,"shownMenu",15),d=O(!1),v=O(!1),h=O(!1),g=O(!1),m=O(!1);const{checkMobileSize:x}=Mn(),y=async()=>{a(e.noteId),_t("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{l(e.noteId)}}})},C=async()=>{o(e.noteId),_t("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{r(e.noteId)}}})},j=async()=>{r(e.noteId),_t("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{o(e.noteId)}}})},w=()=>{l(e.noteId),_t("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{a(e.noteId)}}})},S=()=>{e.noteData.pinnedAt?(i(e.noteId,!1),_t("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId,!0)}}})):(i(e.noteId,!0),_t("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId,!1)}}})),f(d,!0)},B=()=>{n(v)?(f(v,!1),y()):n(m)?(f(m,!1),w()):n(h)?(f(h,!1),C()):n(g)&&(f(g,!1),j()),u(!1),f(d,!1)},M=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),_t("copied"),f(d,!0))},D=()=>{f(d,!0),Aa({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await s(e.noteId)},onCancel:async()=>{}})};let z=E(x);var J=ie(),G=R(J);{var K=ee=>{var Y=dv(),T=R(Y);ve(T,()=>({"--bottom":e.showMenuUp?"100%":"-129px","--right":"10px"})),Jr(T.lastChild,{get startClose(){return n(d)},onClosed:B,children:(te,ue)=>{var V=cv(),Z=R(V);{var oe=P=>{var ne=tv(),he=b(ne);at(he,{onClick:M,get dialogMode(){return n(z)},children:(be,Ee)=>{var Se=ev(),H=R(Se);ve(H,()=>({"--size":"20px"})),ye(H.lastChild,{name:"copy"}),p(be,Se)},$$slots:{default:!0}}),p(P,ne)};U(Z,P=>{n(z)&&e.noteData.link?.url&&P(oe)})}var we=L(Z,2),xe=b(we);at(xe,{onClick:S,get dialogMode(){return n(z)},children:(P,ne)=>{var he=nv(),be=R(he);{let Se=E(()=>e.noteData.pinnedAt?"pin-cancel":"pin");ve(be,()=>({"--size":"20px"})),ye(be.lastChild,{get name(){return n(Se)}})}var Ee=L(be);me(()=>ut(Ee,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)),p(P,he)},$$slots:{default:!0}});var Me=L(we,2);{var De=P=>{var ne=ov(),he=R(ne),be=b(he);at(be,{onClick:()=>{f(h,c()==="notes"),f(g,c()==="archive"),f(d,!0)},get dialogMode(){return n(z)},children:(H,q)=>{var se=av(),Ce=R(se);{let A=E(()=>c()==="archive"?"archive-cancel":"archive");ve(Ce,()=>({"--size":"20px"})),ye(Ce.lastChild,{get name(){return n(A)}})}var _=L(Ce);me(()=>ut(_,` ${c()==="archive"?"Unarchive":"Archive"}`)),p(H,se)},$$slots:{default:!0}});var Ee=L(he,2),Se=b(Ee);at(Se,{onClick:()=>{f(v,!0),f(d,!0)},get dialogMode(){return n(z)},dangerous:!0,children:(H,q)=>{var se=rv(),Ce=R(se),_=b(Ce);ve(_,()=>({"--size":"20px"})),ye(_.lastChild,{name:"bin"}),p(H,se)},$$slots:{default:!0}}),p(P,ne)},Ie=P=>{var ne=lv(),he=R(ne),be=b(he);at(be,{onClick:()=>{f(m,!0),f(d,!0)},get dialogMode(){return n(z)},children:(H,q)=>{var se=sv(),Ce=R(se),_=b(Ce);ve(_,()=>({"--size":"20px"})),ye(_.lastChild,{name:"bin-cancel"}),p(H,se)},$$slots:{default:!0}});var Ee=L(he,2),Se=b(Ee);at(Se,{onClick:D,get dialogMode(){return n(z)},dangerous:!0,children:(H,q)=>{var se=iv(),Ce=R(se),_=b(Ce);ve(_,()=>({"--size":"20px"})),ye(_.lastChild,{name:"bin"}),p(H,se)},$$slots:{default:!0}}),p(P,ne)};U(Me,P=>{c()==="notes"||c()==="archive"?P(De):P(Ie,!1)})}p(te,V)},$$slots:{default:!0}}),p(ee,Y)};U(G,ee=>{u()&&ee(K)})}p(t,J),ce()}var fv=N('<div class="a p-1hg9kpf"></div>'),vv=N('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function hv(t,e){le(e,!0);const a=u=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(u).host}.ico`}catch{return""}};let r=O(!1),o=E(()=>a(e.url));var s=ie(),i=R(s);{var l=u=>{var d=fv();p(u,d)},c=u=>{var d=vv();me(v=>Qe(d,"src",v),[()=>a(e.url)]),an("error",d,()=>{f(r,!0)}),p(u,d)};U(i,u=>{n(r)||!n(o)?u(l):u(c,!1)})}p(t,s),ce()}var gv=N('<a target="_blank" rel="noopener noreferrer" class="a p-7mmq8e"><!> <!></a>'),pv=N('<button class="a p-7mmq8e"><!> <!></button>');function kr(t,e){le(e,!0);let a=Pe(e,"tabindex",3,0),r=Pe(e,"onclick",3,()=>{}),o=Pe(e,"ref",15);var s=ie(),i=R(s);{var l=u=>{var d=gv();d.__click=function(...g){r()?.apply(this,g)};var v=b(d);ke(v,()=>e.children);var h=L(v,2);ft(h,{children:(g,m)=>{var x=Ae();me(()=>ut(x,e.title)),p(g,x)}}),et(d,g=>o(g),()=>o()),me(()=>{Qe(d,"href",e.href),Qe(d,"tabindex",a())}),p(u,d)},c=u=>{var d=ie(),v=R(d);{var h=g=>{var m=pv();m.__click=function(...C){r()?.apply(this,C)};var x=b(m);ke(x,()=>e.children);var y=L(x,2);ft(y,{children:(C,j)=>{var w=Ae();me(()=>ut(w,e.title)),p(C,w)}}),et(m,C=>o(C),()=>o()),me(()=>Qe(m,"tabindex",a())),p(g,m)};U(v,g=>{e.elem==="button"&&g(h)},!0)}p(u,d)};U(i,u=>{e.elem==="a"?u(l):u(c,!1)})}p(t,s),ce()}lt(["click"]);let Qn=O(null);var mv=N('<div class="a p-1t3doe5"><!></div>'),_v=N('<div class="b p-1t3doe5"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),wv=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),yv=N('<div class="c p-1t3doe5"><!></div>'),bv=N('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),Sv=N('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),Cv=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),xv=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Tv=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),kv=N("<!> <!>",1),Ev=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Pv=N("<li><!> <!> <!> <!> <div><!> <!></div> <!></li>");function Nv(t,e){le(e,!0);const{pushDialogPage:a}=on(),{getFaviconEnabled:r,getRecordMode:o}=yo(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:c}=ga(),{getSearchParams:u,getHref:d}=Jt();let v=Pe(e,"mode",3,"notes"),h=O(!1),g=O(!1),m=E(r),x=E(o),y=O(null),C=O(null);const{checkMobileSize:j}=Mn(),w=()=>{f(h,!0)},S=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),_t("copied"))};ze(()=>{n(Qn)===n(C)?f(g,!0):f(g,!1)});const B=P=>{P.preventDefault(),a(`${fe.Note}?id=${encodeURIComponent(e.noteId)}`),f(Qn,null)},M=e.noteData.link?.url||"";let D=E(()=>n(h)&&n(y)?ht(n(y)).next:null);const z=P=>{P?l(e.noteId):c(e.noteId)};pe(()=>{const P=ne=>{n(C)&&n(Qn)===n(C)&&!(n(C)===ne.target||n(C).contains(ne.target))&&f(Qn,null)};return document.addEventListener("click",P),()=>{document.removeEventListener("click",P)}});const J=()=>{const P=new URLSearchParams(u());return P.set($t,`${fe.Note}?id=${encodeURIComponent(e.noteId)}`),d(P)};var G=Pv(),K=b(G);{var ee=P=>{var ne=mv(),he=b(ne);{let be=E(()=>i().has(e.noteId));Gi(he,{get checked(){return n(be)},onChange:z})}p(P,ne)};U(K,P=>{s()==="multiple"&&P(ee)})}var Y=L(K,2);{var T=P=>{var ne=_v(),he=b(ne);ve(he,()=>({"--size":"18px"})),ye(he.lastChild,{name:"pin"}),p(P,ne)};U(Y,P=>{e.noteData.pinnedAt&&P(T)})}var te=L(Y,2);{var ue=P=>{var ne=yv(),he=b(ne);{var be=Se=>{hv(Se,{get url(){return M}})},Ee=Se=>{var H=wv(),q=R(H);ve(q,()=>({"--size":"16px"})),ye(q.lastChild,{name:"note"}),p(Se,H)};U(he,Se=>{M?Se(be):Se(Ee,!1)})}p(P,ne)};U(te,P=>{n(m)&&P(ue)})}var V=L(te,2);{var Z=P=>{var ne=bv();ne.__click=B;var he=b(ne);me((be,Ee)=>{Qe(ne,"tabindex",e.focusHidden?-1:0),Qe(ne,"href",be),ut(he,Ee)},[J,()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),an("focus",ne,()=>{f(Qn,n(C),!0)}),p(P,ne)},oe=P=>{var ne=Sv(),he=b(ne);me(be=>{Qe(ne,"tabindex",e.focusHidden?-1:0),Qe(ne,"href",M),ut(he,be)},[()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),an("focus",ne,()=>{f(Qn,n(C),!0)}),p(P,ne)};U(V,P=>{n(x)==="note"||!M?P(Z):P(oe,!1)})}var we=L(V,2);we.__focusin=()=>{f(Qn,n(C),!0)};var xe=b(we);{var Me=P=>{var ne=kv(),he=R(ne);{var be=q=>{{let se=E(()=>e.focusHidden?-1:0);kr(q,{elem:"button",onclick:S,get tabindex(){return n(se)},title:"copy link",children:(Ce,_)=>{var A=Cv(),k=R(A);ve(k,()=>({"--size":"20px"})),ye(k.lastChild,{name:"copy"}),p(Ce,A)},$$slots:{default:!0}})}};U(he,q=>{j()||q(be)})}var Ee=L(he,2);{var Se=q=>{{let se=E(()=>e.focusHidden?-1:0),Ce=E(()=>e.noteData.link?.title||"unknown");kr(q,{elem:"a",get href(){return M},get tabindex(){return n(se)},get title(){return n(Ce)},children:(_,A)=>{var k=xv(),F=R(k);ve(F,()=>({"--size":"18px"})),ye(F.lastChild,{name:"open"}),p(_,k)},$$slots:{default:!0}})}},H=q=>{{let se=E(J),Ce=E(()=>e.focusHidden?-1:0);kr(q,{title:"edit",elem:"a",get href(){return n(se)},get tabindex(){return n(Ce)},onclick:B,children:(_,A)=>{var k=Tv(),F=R(k);ve(F,()=>({"--size":"18px"})),ye(F.lastChild,{name:"pen"}),p(_,k)},$$slots:{default:!0}})}};U(Ee,q=>{n(x)==="note"?q(Se):q(H,!1)})}p(P,ne)};U(xe,P=>{M&&P(Me)})}var De=L(xe,2);{let P=E(()=>e.focusHidden?-1:0);kr(De,{title:"show menu",elem:"button",get tabindex(){return n(P)},onclick:w,get ref(){return n(y)},set ref(ne){f(y,ne,!0)},children:(ne,he)=>{var be=Ev(),Ee=R(be);ve(Ee,()=>({"--size":"18px","--rotate":"90deg"})),ye(Ee.lastChild,{name:"menu"}),p(ne,be)},$$slots:{default:!0}})}var Ie=L(we,2);uv(Ie,{get nextFocusRef(){return n(D)},get mode(){return v()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(h)},set shownMenu(P){f(h,P,!0)}}),et(G,P=>f(C,P),()=>n(C)),me(()=>{$e(G,1,rt({e:!0,f:n(g)}),"p-1t3doe5"),$e(we,1,rt({g:!0,h:n(g)}),"p-1t3doe5")}),p(t,G),ce()}lt(["click","focusin"]);var Ha,Zi,Ji;class Av{constructor(e){Ne(this,Ha);Nt(this,"data");Nt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),Ke(this,Ha,Zi).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,Ke(this,Ha,Ji).call(this)),e}isEmpty(){return this.data.length===0}}Ha=new WeakSet,Zi=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},Ji=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class Mv{constructor(e,a){Nt(this,"heap");Nt(this,"done");Nt(this,"cache",[]);this.heap=new Av(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var Dv=N("<span>Back to notes</span>"),Iv=N('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),Rv=N("<span>Back to notes</span>"),Lv=N('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),Ov=N('<p class="f">No notes in bin</p>'),Fv=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),zv=N('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),jv=N('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),Bv=N('<div class="e p-1jdj5w3"><!></div>'),Hv=N('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),Uv=N('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),Wv=N('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function Vv(t,e){le(e,!0);const{getScrollContainer:a}=Zr(),{createHandleClickDialogPage:r,createDialogPageHref:o}=on(),{getSelectedTags:s}=An(),{getFeedOrder:i}=Si(),{checkNotesInArchive:l,checkNotesInBin:c,getGetNotes:u,isInitedNotes:d}=zt(),{getSelectedMetaTags:v}=Gr(),{replaceSearchParams:h,getHref:g}=Jt();Ho();const{getFiltredNotesLength:m,getFiltredNotes:x,getUpdatedFiltredNotesTimestamp:y}=pa();let C=E(v),j=E(m),w=E(x),S=E(y),B=E(d),M=54,D=O(0),z=O(0),J=O(0),G=O(null),K=E(a),ee=null,Y=null,T=E(()=>n(C).has(Xe.ARCHIVED)?"archive":n(C).has(Xe.BIN)?"bin":"notes");const te=E(s);ze(()=>{n(te),n(we),n(K)?.scrollTo(0,0)});const{enable:ue}=Wo(),V=()=>{ue(),ee||(ee=requestAnimationFrame(()=>{const H=n(K)?.scrollTop||0;f(J,H,!0);const q=Math.ceil(n(D)/M);f(z,Math.floor(H/(M*q))*(M*q)),ee=null}))},Z=()=>{Y||(Y=requestAnimationFrame(()=>{f(D,window.innerHeight-180||0,!0);const H=n(K)?.scrollTop||0;f(J,H,!0);const q=Math.ceil(n(D)/M);f(z,Math.floor(H/(M*q))*(M*q)),Y=null}))};pe(()=>{Z(),V()});const oe=()=>{V()};ze(()=>(n(K)?.addEventListener("scroll",oe),window.addEventListener("resize",Z),()=>{n(K)?.removeEventListener("scroll",oe),window.removeEventListener("resize",Z)}));const we=E(i);ze(()=>{n(we),n(S),f(G,new Mv(n(w),(H,q)=>{if(!H||!q||!H.data||!q.data)return 0;if(H.data.pinnedAt&&!q.data.pinnedAt)return-1;if(!H.data.pinnedAt&&q.data.pinnedAt)return 1;if(H.data.pinnedAt&&q.data.pinnedAt){if(H.data.pinnedAt<q.data.pinnedAt)return 1;if(H.data.pinnedAt>q.data.pinnedAt)return-1}switch(n(we)){case"newest":return H.data.updatedAt<q.data.updatedAt?1:H.data.updatedAt>q.data.updatedAt?-1:(H.data.link?.title||"").localeCompare(q.data.link?.title||"");case"oldest":return H.data.updatedAt>q.data.updatedAt?1:H.data.updatedAt<q.data.updatedAt?-1:(H.data.link?.title||"").localeCompare(q.data.link?.title||"");case"AtoZ":return(H.data.link?.title||"").localeCompare(q.data.link?.title||"");case"ZtoA":return(q.data.link?.title||"").localeCompare(H.data.link?.title||"");default:return 0}}),!0)});const xe=E(()=>n(j)*M);let De=E(()=>{n(S);const H=Math.ceil(n(D)/M);let q=Math.floor(n(z)/M);return q=q-Math.min(q,H),n(G)?.get(q,q+H*3)||[]}),Ie=E(()=>M*Math.ceil(n(D)/M));const P=E(()=>n(z)-Math.min(n(z),n(Ie)));var ne=Wv(),he=b(ne),be=b(he);{var Ee=H=>{Ka(H,{})},Se=H=>{var q=ie(),se=R(q);{var Ce=A=>{var k=Iv(),F=L(R(k),2),X=b(F);{let W=E(()=>g(""));Mt(X,{element:"a",get href(){return n(W)},onClick:de=>{de.preventDefault(),h("")},children:(de,_e)=>{var re=Dv();p(de,re)},$$slots:{default:!0}})}p(A,k)},_=A=>{var k=ie(),F=R(k);{var X=de=>{var _e=Lv(),re=L(R(_e),2),$=b(re);{let Q=E(()=>g(""));Mt($,{element:"a",get href(){return n(Q)},onClick:ae=>{ae.preventDefault(),h("")},children:(ae,ge)=>{var Be=Rv();p(ae,Be)},$$slots:{default:!0}})}p(de,_e)},W=de=>{var _e=ie(),re=R(_e);{var $=ae=>{var ge=Bv(),Be=b(ge);{var tt=Le=>{var Ue=Ov();p(Le,Ue)},nt=Le=>{var Ue=jv(),Oe=b(Ue),Fe=b(Oe);{let ot=E(()=>o(fe.NewNote)),qe=E(()=>r(fe.NewNote));Mt(Fe,{element:"a",get href(){return n(ot)},get onClick(){return n(qe)},children:(Je,sn)=>{var Et=Fv(),Pt=R(Et);ve(Pt,()=>({"--size":"18px","--color":"#b0b0b0"})),ye(Pt.lastChild,{name:"plus"}),p(Je,Et)},$$slots:{default:!0}})}var Ze=L(Oe,4),We=b(Ze);{let ot=E(()=>o(fe.ImportData)),qe=E(()=>r(fe.ImportData));Mt(We,{element:"a",get href(){return n(ot)},get onClick(){return n(qe)},children:(Je,sn)=>{var Et=zv(),Pt=R(Et);ve(Pt,()=>({"--size":"18px","--color":"#b0b0b0"})),ye(Pt.lastChild,{name:"import"}),p(Je,Et)},$$slots:{default:!0}})}p(Le,Ue)};U(Be,Le=>{n(T)==="bin"?Le(tt):Le(nt,!1)})}p(ae,ge)},Q=ae=>{var ge=ie(),Be=R(ge);{var tt=Le=>{var Ue=Hv();p(Le,Ue)},nt=Le=>{var Ue=Uv(),Oe=b(Ue);bn(Oe,23,()=>n(De),Fe=>Fe.data,(Fe,Ze,We)=>{var ot=ie(),qe=R(ot);{var Je=sn=>{{let Et=E(()=>n(We)*M<n(J)-n(P)-M/2||n(We)*M>n(J)-n(P)+Math.floor(n(D)/M)*M),Pt=E(()=>(n(We)+3)*M<n(J)-n(P)-M/2||(n(We)+3)*M>n(J)-n(P)+Math.floor(n(D)/M)*M);Nv(sn,{get mode(){return n(T)},get focusHidden(){return n(Et)},get showMenuUp(){return n(Pt)},get noteId(){return n(Ze).id},get noteData(){return n(Ze).data}})}};U(qe,sn=>{n(Ze).data&&sn(Je)})}p(Fe,ot)}),me(Fe=>{ja(Ue,Fe),ja(Oe,`transform: translateY(${n(P)??""}px);`)},[()=>`--minHeight: ${Math.max((n(xe)>n(D),n(xe)),0)}px`]),p(Le,Ue)};U(Be,Le=>{n(De).length===0?Le(tt):Le(nt,!1)},!0)}p(ae,ge)};U(re,ae=>{u()().length===0?ae($):ae(Q,!1)},!0)}p(de,_e)};U(F,de=>{n(T)==="archive"&&!l()?de(X):de(W,!1)},!0)}p(A,k)};U(se,A=>{n(T)==="bin"&&!c()?A(Ce):A(_,!1)},!0)}p(H,q)};U(be,H=>{n(B)?H(Se,!1):H(Ee)})}p(t,ne),ce()}var qv=N('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function Kv(t){var e=qv(),a=L(R(e),2),r=b(a);Vv(r,{}),p(t,e)}var Yv=N('<h1 class="p-1n0ziuh"><!></h1>');function Xv(t,e){var a=Yv(),r=b(a);ke(r,()=>e.children),p(t,a)}const Gv=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var Zv=N('<div class="a p-cpqc1p"><!> <p class="b p-cpqc1p">Enjoy using the app!</p> <div class="c p-cpqc1p"><!></div></div>');function Jv(t,e){le(e,!1);const{pushDialogPage:a}=on(),r=()=>{Gv()?a(fe.AccountSetup):a(fe.Install)};pe(()=>{}),Yr();var o=Zv(),s=b(o);Xv(s,{children:(c,u)=>{var d=Ae("Welcome");p(c,d)}});var i=L(s,4),l=b(i);Mt(l,{onClick:r,fullWidth:!0,children:(c,u)=>{var d=Ae("Start");p(c,d)},$$slots:{default:!0}}),p(t,o),ce()}function Qv(t,e){le(e,!0);const a=Jn();let r=Pe(e,"animationRef",7),o=Pe(e,"dialog",7);Xi(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let u=0,d=0,v=()=>1;if(r().current){r().current.pause();let g=Number(r().current.currentTime);ir()&&(g=Number(g)+50,r().current.currentTime=Math.min(Math.max(Tn-1,g),g));const m=r().current.effect?.getComputedTiming().progress||0;v=()=>m,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(g=>requestAnimationFrame(g)),d=1-v();const h=d*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-d)*.1}`),a.swipingRatio=Math.abs(1-d)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${h}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:u,currentPosition:h,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:u,width:d})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-u/d)*.1}`),o().style.transform=`translate3d(${u}px, 0, 0)`,a.swipingRatio=Math.abs(1-u/d)*25)},onFinish:({swipeVelocity:u,currentPosition:d,width:v,actionThreshold:h,initialPosition:g})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const m=()=>Math.abs(g+d)/v*100;let x=null;if(u<=-Yn?x="open":u>=Yn?x="close":x=Math.abs(m())>h?"close":"open",r().progress=Yi(m()/100),x==="close"){const y=(1-(r().progress||0))*Tn;a.duration=y/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const y=(r().progress||1)*Tn;a.duration=y/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),ce()}var $v=N('<div class="c p-b75woj"> </div>'),eh=N('<button class="d e p-b75woj"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),th=N('<a class="d f p-b75woj"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),nh=N('<div><div class="a p-b75woj"><div class="b p-b75woj"><!> <!> <!></div></div> <!> <!></div>'),ah=N("<dialog><!></dialog> <!>",1);function rh(t,e){le(e,!0);const{isScrolling:a,enable:r}=Wo();let o=O(null),s=O(null),i={};const l=Jn(),{checkLeftEnd:c,checkLeftStart:u,setLeftEnd:d,setLeftStart:v,getCountDialog:h}=rn(),g=E(u),m=E(c);let x=E(()=>l.working);const y=()=>{e.dialogState!=="opened"&&e.onStartOpening()},C=()=>{e.onClose()},j=()=>{e.onSwipe()},w=ee=>{ee.preventDefault(),C()};pe(()=>(n(o)?.addEventListener("close",C),n(o)?.addEventListener("cancel",w),()=>{n(o)?.removeEventListener("close",C),n(o)?.removeEventListener("cancel",w)})),ze(()=>{h()>0&&(l.swipingRatio=25)}),ze(()=>{e.dialogState==="opening"?Ft(()=>{requestAnimationFrame(()=>{if(!n(o))return;const ee=(i.progress||1)*Tn,Y=n(o).style.transform||`translate3d(${n(g)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const T=n(o)?.animate([{transform:Y},{transform:"translate3d(0, 0, 0)"}],{duration:ee,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=T,T&&(T.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=Na().duration,T.cancel(),i.current=void 0,i.progress=void 0,n(g)&&v(!1)})})}):e.dialogState==="closing"&&Ft(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const ee=(1-(i.progress||0))*Tn,Y=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const T=n(o)?.animate([{transform:Y},{transform:`translate3d(${n(m)?"-100%":"100%"}, 0, 0)`}],{duration:ee,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=T,T&&(T.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=Na().duration,T.cancel(),i.current=void 0,i.progress=void 0,n(m)&&d(!1)})})})});const S=()=>{r()},B=E(a);pe(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),ir()&&n(o).getBoundingClientRect(),!n(x)){e.onOpened();return}e.onStartOpening()}});var M=ah(),D=R(M),z=b(D);{var J=ee=>{var Y=nh(),T=b(Y),te=b(T),ue=b(te);{var V=P=>{var ne=$v(),he=b(ne);me(()=>ut(he,e.title)),p(P,ne)};U(ue,P=>{e.title&&P(V)})}var Z=L(ue,2);{var oe=P=>{var ne=eh();ne.__click=C;var he=b(ne);ve(he,()=>({"--size":"32px"})),ye(he.lastChild,{name:"back"});var be=L(he,2);ft(be,{children:(Ee,Se)=>{var H=Ae("back");p(Ee,H)}}),p(P,ne)};U(Z,P=>{e.blocked||P(oe)})}var we=L(Z,2);{var xe=P=>{var ne=th();ne.__click=function(...Ee){e.onOpenWindow?.apply(this,Ee)};var he=b(ne);ve(he,()=>({"--scale":"0.7","--size":"32px"})),ye(he.lastChild,{name:"open-window"});var be=L(he,2);ft(be,{children:(Ee,Se)=>{var H=Ae("open window");p(Ee,H)}}),me(()=>Qe(ne,"href",e.openWindowHref)),p(P,ne)};U(we,P=>{e.onOpenWindow&&P(xe)})}var Me=L(T,2);ke(Me,()=>e.children);var De=L(Me,2);{var Ie=P=>{qo(P,{})};U(De,P=>{e.dialogState==="opened"&&P(Ie)})}et(Y,P=>f(s,P),()=>n(s)),me(()=>$e(Y,1,rt({n:!0,o:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-b75woj")),an("scroll",Y,S),p(ee,Y)};U(z,ee=>{e.dialogState!=="preOpening"&&ee(J)})}et(D,ee=>f(o,ee),()=>n(o));var G=L(D,2);{var K=ee=>{Qv(ee,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:y,onClose:C,onSwipe:j,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};U(G,ee=>{n(s)&&!n(B)&&!e.blocked&&!e.hidden&&ee(K)})}me(()=>$e(D,1,rt({g:!0,h:n(x),i:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",j:e.hidden,k:e.dialogState==="opened",l:n(g),m:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-b75woj")),p(t,M),ce()}lt(["click"]);function oh(t,e){le(e,!0);let a=Pe(e,"hidden",3,!1),r=Pe(e,"onClosed",3,()=>{}),o=O(0);pe(()=>{const C=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",C),C(),()=>{window.removeEventListener("resize",C)}});const{dialogDec:s,dialogInc:i}=rn(),l=Jn();pe(()=>(i(),()=>{s()}));let c=O("closed");const u=()=>{f(c,"opening")},d=()=>{f(c,"swiping")},v=()=>{f(c,"opened")},h=()=>{e.onClose(),f(c,"closing")},g=()=>{f(c,"closed"),r()()};ze(()=>{e.shown&&n(c)==="closed"?f(c,"preOpening"):!e.shown&&n(c)==="opened"&&f(c,"closing")}),ze(()=>{n(c)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(c)==="opened"||n(c)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var m=ie(),x=R(m);{var y=C=>{rh(C,{get dialogWidth(){return n(o)},get dialogState(){return n(c)},get title(){return e.title},onStartOpening:u,onOpened:v,onClose:h,onClosed:g,onSwipe:d,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(j,w)=>{var S=ie(),B=R(S);ke(B,()=>e.children),p(j,S)},$$slots:{default:!0}})};U(x,C=>{n(c)!=="closed"&&C(y)})}p(t,m),ce()}const sh=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};pe(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),pe(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var ih=N('<button class="d e p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),lh=N('<div class="f p-2jn3ll"> </div>'),ch=N('<button class="d g p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),dh=N('<dialog><div class="a p-2jn3ll"><div class="b p-2jn3ll"><div class="c p-2jn3ll"><div><!></div> <!> <div><!></div></div></div> <!></div></dialog> <!>',1);function uh(t,e){le(e,!0);let a=Pe(e,"blockedDialog",3,!1),r=Pe(e,"hiddenDialog",3,!1),o=Pe(e,"isDesktopAnimationOff",3,!1),s=O(null),i=O(null),l=O(!1);sh({getDialog:()=>n(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=Jn();ze(()=>{e.stateDialog==="closing"&&(c.working?n(s)?.addEventListener("transitionend",()=>{n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:u}=Vo(),d=E(u);pe(()=>{setTimeout(()=>{f(l,!0)},50)});var v=dh(),h=R(v),g=b(h),m=b(g),x=b(m),y=b(x),C=b(y);{var j=G=>{var K=ih();K.__click=()=>{e.onStartBack()};var ee=b(K);ve(ee,()=>({"--size":"28px"})),ye(ee.lastChild,{name:"back"});var Y=L(ee,2);ft(Y,{children:(T,te)=>{var ue=Ae("back");p(T,ue)}}),p(G,K)};U(C,G=>{(!(a()||r())||a())&&e.onStartBack&&G(j)})}var w=L(y,2);{var S=G=>{var K=lh(),ee=b(K);me(()=>ut(ee,e.title)),p(G,K)};U(w,G=>{e.title&&G(S)})}var B=L(w,2),M=b(B);{var D=G=>{var K=ch();K.__click=()=>{e.onStartClose()};var ee=b(K);ve(ee,()=>({"--size":"28px"})),ye(ee.lastChild,{name:"close"});var Y=L(ee,2);ft(Y,{children:(T,te)=>{var ue=Ae("close");p(T,ue)}}),p(G,K)};U(M,G=>{a()||r()||G(D)})}var z=L(m,2);ke(z,()=>e.children),et(g,G=>f(i,G),()=>n(i)),et(h,G=>f(s,G),()=>n(s));var J=L(h,2);Ko(J,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose}}),me(()=>{ja(h,`height: ${n(d)+74}px`),$e(h,1,rt({h:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o(),m:r()}),"p-2jn3ll")}),p(t,v),ce()}lt(["click"]);const fh=({onStartClose:t,onClosed:e})=>{let a=O("close");return{get state(){return n(a)},set state(i){f(a,i,!0)},handleStartClose:(i=!1)=>{i||(f(a,"closing"),t?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function vh(t,e){le(e,!0);let a=Pe(e,"blockedDialog",3,!1),r=Pe(e,"hiddenDialog",3,!1),o=Pe(e,"onStartClose",3,()=>{}),s=Pe(e,"onClosed",3,()=>{}),i=fh({onStartClose:o(),onClosed:s()});const{dialogDec:l,dialogInc:c}=rn();pe(()=>(c(),()=>{l()})),ze(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const u=g=>{g.key==="Escape"&&a()&&(g.preventDefault(),g.stopPropagation())};pe(()=>(document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}));var d=ie(),v=R(d);{var h=g=>{uh(g,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(m,x)=>{var y=ie(),C=R(y);ke(C,()=>e.children),p(m,y)},$$slots:{default:!0}})};U(v,g=>{i.state!=="close"&&g(h)})}p(t,d),ce()}const ws=(t,e=je,a=je,r)=>{let o=vr(()=>ml(r?.(),!1));var s=ie(),i=R(s);{var l=u=>{dt(u,{children:(d,v)=>{mt(d,{get hidden(){return n(o)},get page(){return fe.Settings}})},$$slots:{default:!0}})},c=u=>{var d=ie(),v=R(d);{var h=m=>{dt(m,{children:(x,y)=>{mt(x,{get hidden(){return n(o)},get page(){return fe.NewNote}})},$$slots:{default:!0}})},g=m=>{var x=ie(),y=R(x);{var C=w=>{dt(w,{children:(S,B)=>{mt(S,{get params(){return a()},get hidden(){return n(o)},get page(){return fe.Note}})},$$slots:{default:!0}})},j=w=>{var S=ie(),B=R(S);{var M=z=>{dt(z,{children:(J,G)=>{mt(J,{get hidden(){return n(o)},get page(){return fe.ImportData}})},$$slots:{default:!0}})},D=z=>{var J=ie(),G=R(J);{var K=Y=>{dt(Y,{children:(T,te)=>{mt(T,{get hidden(){return n(o)},get page(){return fe.ExportData}})},$$slots:{default:!0}})},ee=Y=>{var T=ie(),te=R(T);{var ue=Z=>{dt(Z,{children:(oe,we)=>{mt(oe,{get hidden(){return n(o)},get page(){return fe.AccountSetup}})},$$slots:{default:!0}})},V=Z=>{var oe=ie(),we=R(oe);{var xe=De=>{dt(De,{children:(Ie,P)=>{mt(Ie,{get hidden(){return n(o)},get page(){return fe.Install}})},$$slots:{default:!0}})},Me=De=>{var Ie=ie(),P=R(Ie);{var ne=be=>{dt(be,{children:(Ee,Se)=>{mt(Ee,{get hidden(){return n(o)},get page(){return fe.InstallSuccess}})},$$slots:{default:!0}})},he=be=>{var Ee=ie(),Se=R(Ee);{var H=se=>{dt(se,{children:(Ce,_)=>{Jv(Ce,{})},$$slots:{default:!0}})},q=se=>{var Ce=ie(),_=R(Ce);{var A=F=>{dt(F,{children:(X,W)=>{mt(X,{get hidden(){return n(o)},get page(){return fe.Auth}})},$$slots:{default:!0}})},k=F=>{var X=ie(),W=R(X);{var de=re=>{dt(re,{children:($,Q)=>{mt($,{get hidden(){return n(o)},get page(){return fe.Signup}})},$$slots:{default:!0}})},_e=re=>{var $=ie(),Q=R($);{var ae=Be=>{dt(Be,{children:(tt,nt)=>{mt(tt,{get hidden(){return n(o)},get page(){return fe.Signin}})},$$slots:{default:!0}})},ge=Be=>{var tt=ie(),nt=R(tt);{var Le=Oe=>{dt(Oe,{children:(Fe,Ze)=>{mt(Fe,{get hidden(){return n(o)},get page(){return fe.AccessKeys}})},$$slots:{default:!0}})},Ue=Oe=>{var Fe=ie(),Ze=R(Fe);{var We=qe=>{dt(qe,{children:(Je,sn)=>{mt(Je,{get hidden(){return n(o)},get page(){return fe.Account}})},$$slots:{default:!0}})},ot=qe=>{var Je=ie(),sn=R(Je);{var Et=ma=>{dt(ma,{children:(_r,Xo)=>{mt(_r,{get hidden(){return n(o)},get page(){return fe.ConfirmAccessKey}})},$$slots:{default:!0}})},Pt=ma=>{var _r=ie(),Xo=R(_r);{var Qi=_a=>{dt(_a,{children:(wr,Go)=>{mt(wr,{get hidden(){return n(o)},get page(){return fe.Exit}})},$$slots:{default:!0}})},$i=_a=>{var wr=ie(),Go=R(wr);{var el=wa=>{dt(wa,{children:(yr,Zo)=>{mt(yr,{get hidden(){return n(o)},get page(){return fe.Sync}})},$$slots:{default:!0}})},tl=wa=>{var yr=ie(),Zo=R(yr);{var nl=ya=>{dt(ya,{children:(br,Jo)=>{mt(br,{get hidden(){return n(o)},get page(){return fe.Subscription}})},$$slots:{default:!0}})},al=ya=>{var br=ie(),Jo=R(br);{var rl=ba=>{dt(ba,{children:(Qr,sl)=>{mt(Qr,{get hidden(){return n(o)},get page(){return fe.About}})},$$slots:{default:!0}})},ol=ba=>{dt(ba,{children:(Qr,sl)=>{Yf(Qr,{})},$$slots:{default:!0}})};U(Jo,ba=>{e()===fe.About?ba(rl):ba(ol,!1)},!0)}p(ya,br)};U(Zo,ya=>{e()===fe.Subscription?ya(nl):ya(al,!1)},!0)}p(wa,yr)};U(Go,wa=>{e()===fe.Sync?wa(el):wa(tl,!1)},!0)}p(_a,wr)};U(Xo,_a=>{e()===fe.Exit?_a(Qi):_a($i,!1)},!0)}p(ma,_r)};U(sn,ma=>{e()===fe.ConfirmAccessKey?ma(Et):ma(Pt,!1)},!0)}p(qe,Je)};U(Ze,qe=>{e()===fe.Account?qe(We):qe(ot,!1)},!0)}p(Oe,Fe)};U(nt,Oe=>{e()===fe.AccessKeys?Oe(Le):Oe(Ue,!1)},!0)}p(Be,tt)};U(Q,Be=>{e()===fe.Signin?Be(ae):Be(ge,!1)},!0)}p(re,$)};U(W,re=>{e()===fe.Signup?re(de):re(_e,!1)},!0)}p(F,X)};U(_,F=>{e()===fe.Auth?F(A):F(k,!1)},!0)}p(se,Ce)};U(Se,se=>{e()===fe.Welcome?se(H):se(q,!1)},!0)}p(be,Ee)};U(P,be=>{e()===fe.InstallSuccess?be(ne):be(he,!1)},!0)}p(De,Ie)};U(we,De=>{e()===fe.Install?De(xe):De(Me,!1)},!0)}p(Z,oe)};U(te,Z=>{e()===fe.AccountSetup?Z(ue):Z(V,!1)},!0)}p(Y,T)};U(G,Y=>{e()===fe.ExportData?Y(K):Y(ee,!1)},!0)}p(z,J)};U(B,z=>{e()===fe.ImportData?z(M):z(D,!1)},!0)}p(w,S)};U(y,w=>{e()===fe.Note?w(C):w(j,!1)},!0)}p(m,x)};U(v,m=>{e()===fe.NewNote?m(h):m(g,!1)},!0)}p(u,d)};U(i,u=>{e()===fe.Settings?u(l):u(c,!1)})}p(t,s)};var hh=N("<!> <!>",1);function gh(t,e){le(e,!0);const a=Bc(e,["$$slots","$$events","$$legacy"]),{checkBlockedDialog:r,checkClosableDialog:o}=rn(),{sidebarClose:s,getSidebarState:i}=pr(),l=E(r),c=E(o),{getDialogPages:u}=on(),{getAccount:d}=Di();let v=E(u),h=E(()=>d()!==void 0);const{checkMobileSize:g}=Mn();let m=O(St([]));const x=E(g),{clearDialogPages:y,popDialogPage:C}=on(),{checkLeftStart:j}=rn();let w=E(j);ze(()=>{u().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const S=()=>{C()},B=()=>{y()};ze(()=>{n(v),n(x),Ft(()=>{if(n(x))n(v).length>=n(m).length||n(w)?f(m,n(v).map(Y=>({page:Y,shown:!0})),!0):f(m,n(m).map((Y,T)=>({page:Y.page,shown:T<n(v).length})),!0);else if(n(v).length>=n(m).length)f(m,n(v).map(Y=>({page:Y,shown:!0})),!0);else{if(n(v).length===0){f(m,[{page:n(m)[n(m).length-1].page,shown:!1}],!0);return}f(m,n(v).map(Y=>({page:Y,shown:!0})),!0)}})});const M=()=>{f(m,n(v).map(Y=>({page:Y,shown:!0})),!0)};var D=hh(),z=R(D);{var J=Y=>{Kv(Y)};U(z,Y=>{n(h)&&Y(J)})}var G=L(z,2);{var K=Y=>{var T=ie(),te=R(T);bn(te,19,()=>n(m),ue=>ue.page,(ue,V,Z)=>{const oe=E(()=>n(V).page.split("?")[1]),we=E(()=>n(V).page.split("?")[0]),xe=E(()=>n(Z)!==n(m).length-1&&!!n(m)[n(Z)+1]?.shown),Me=E(()=>n(Z)===0);{let De=E(()=>vs[n(we)]||""),Ie=E(()=>n(l)||n(Me)&&!n(c));oh(ue,_o({get shown(){return n(V).shown},get title(){return n(De)},get hidden(){return n(xe)},get blocked(){return n(Ie)},onClose:S,onClosed:M},()=>a,{children:(P,ne)=>{ws(P,()=>n(we),()=>n(oe),()=>n(xe))},$$slots:{default:!0}}))}}),p(Y,T)},ee=Y=>{var T=ie(),te=R(T);{var ue=V=>{const Z=E(()=>n(m)[n(m).length-1].page.split("?")[1]),oe=E(()=>n(m)[n(m).length-1].page.split("?")[0]),we=E(()=>n(m)[n(m).length-1].shown),xe=E(()=>n(m).length===1);{let Me=E(()=>vs[n(oe)]||""),De=E(()=>n(l)||!n(c)),Ie=E(()=>n(l)||n(xe)?void 0:S);vh(V,{get shownDialog(){return n(we)},get title(){return n(Me)},get blockedDialog(){return n(De)},hiddenDialog:!1,get onStartBack(){return n(Ie)},onStartClose:B,onClosed:M,children:(P,ne)=>{ws(P,()=>n(oe),()=>n(Z))},$$slots:{default:!0}})}};U(te,V=>{n(m).length>0&&V(ue)},!0)}p(Y,T)};U(G,Y=>{g()?Y(K):Y(ee,!1)})}p(t,D),ce()}function ph(t,e){le(e,!1);let a=0;pe(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),Yr(),ce()}var mh=N('<div><button class="d p-11qzo3t"><!> <span class="e p-11qzo3t"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),_h=N('<!> <!> <!> <!> <main><div class="a p-11qzo3t"><div class="b p-11qzo3t"><!></div></div> <div class="c p-11qzo3t"><!></div></main> <!>',1);function wh(t,e){le(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=Jt(),{hasDialogPage:s}=on(),{setScrollContainer:i}=Zr(),{getAccount:l,init:c}=Di(),{isInitedNotes:u}=zt(),{isInitedSettings:d}=yo(),{getDialogPages:v}=on(),{createBroadcastChannel:h,tabId:g}=Xr(),m=h(),{getSidebarState:x}=pr(),{setClosableDialog:y}=rn(),{getViewMode:C}=yo(),j=()=>{a(`${$t}=${fe.Welcome}`)};pe(()=>{c(A=>{A===void 0?j():((s(fe.Welcome)||s(fe.AccountSetup))&&a(""),A?f(D,A):f(D,null))});const _=async A=>{const k=JSON.parse(A.data);if(k.tabId&&k.tabId===g)return;const F=k;F.type==="initLocalAccount"||F.type==="initCloudAccount"||F.type==="updateAccount"||F.type==="disconnectCloudAccount"?a(""):F.type==="exit"&&j()};return m.addEventListener(_),()=>m.removeEventListener(_)});const w=Jn();pe(async()=>{await new Promise(_=>setTimeout(_,250)),await ui(),w.working=!0});let S=O(!1),B=0,M=E(()=>v().length>0),D=E(l),z=E(u),J=E(d),G=O(null);const K=()=>{n(G)&&n(G).scrollTo({top:0})};ze(()=>{y(n(D)!==void 0)}),ze(()=>{i(n(G))});const ee=()=>{if(n(G)){const _=n(G).scrollTop||0;_===0?f(S,!1):!n(S)&&B>_?f(S,!0):n(S)&&B+50<_&&f(S,!1),B=_}},Y=()=>{ee()};ze(()=>(n(G)?.addEventListener("scroll",Y),window.addEventListener("resize",Y),()=>{n(G)?.removeEventListener("scroll",Y),window.removeEventListener("resize",Y)}));const T=E(x);let te=E(()=>w.swipingRatio);const ue=()=>{const _=new URLSearchParams(o());if(s(fe.NewNote)){const A=_.get("noteId")||"";return r(A?_.toString().replace(fe.NewNote,`${fe.Note}?id=${encodeURIComponent(A)}`):_)}return r(_)},V=async()=>{const _=await chrome.windows.getCurrent();if(!_)return;const A=420,k=700,F=(_.left||0)+(_.width||0)-A-10,X=(_.top||0)+90;await chrome.windows.create({url:ue(),type:"popup",width:A,height:k,left:F,top:X}),window.close()},Z=E(C),oe=E(()=>n(Z)==="popup"||n(Z)==="sidebar"?{onOpenWindow:V,openWindowHref:ue()}:{});var we=_h(),xe=R(we);ph(xe,{});var Me=L(xe,2);wu(Me,{});var De=L(Me,2);qo(De,{});var Ie=L(De,2);Bu(Ie,{});var P=L(Ie,2),ne=b(P),he=b(ne),be=b(he);{var Ee=_=>{Vf(_,_o(()=>n(oe)))};U(be,_=>{n(J)&&n(D)!==void 0&&_(Ee)})}var Se=L(ne,2),H=b(Se);{var q=_=>{gh(_,_o(()=>n(oe)))};U(H,_=>{n(z)&&n(J)&&_(q)})}et(P,_=>f(G,_),()=>n(G));var se=L(P,2);{var Ce=_=>{var A=mh(),k=b(A);k.__click=K;var F=b(k);ft(F,{children:(de,_e)=>{var re=Ae("top");p(de,re)}});var X=L(F,2),W=b(X);ve(W,()=>({"--rotate":"90deg","--size":"28px"})),ye(W.lastChild,{name:"back"}),me(()=>{ja(A,`--swiping-ratio: ${n(te)}; --transition-timing-default: ${w.duration}s;`),$e(A,1,rt({i:!0,g:w.working&&!w.isSwiping,j:n(M)||n(T)!=="closed"}),"p-11qzo3t")}),p(_,A)};U(se,_=>{n(S)&&_(Ce)})}me(()=>{ja(P,`--swiping-ratio: ${n(te)}; --transition-timing-default: ${w.duration}s;`),$e(P,1,rt({f:!0,g:w.working&&!w.isSwiping,h:n(T)!=="closed"}),"p-11qzo3t")}),p(t,we),ce()}lt(["click"]);function yh(t){qd(t,{children:(e,a)=>{wh(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Tc(yh,{target:document.getElementById("app")});export{pt as $,E as A,Mt as B,Jt as C,Di as D,Jn as E,Na as F,Yr as G,Xv as H,ye as I,Yo as J,an as K,Ka as L,zt as M,Mn as N,ff as O,fe as P,Rn as Q,et as R,Eh as S,kh as T,eu as U,ft as V,tu as W,$t as X,ir as Y,yo as Z,Ft as _,f as a,bs as a0,Io as a1,vl as a2,Pe as a3,Jr as a4,at as a5,kr as a6,_t as a7,hv as a8,Xr as a9,xh as aa,Oc as ab,Gv as ac,Ch as ad,ja as ae,Th as af,O as b,b as c,ve as d,bn as e,N as f,n as g,Qe as h,p as i,U as j,$e as k,rt as l,ce as m,R as n,pe as o,le as p,ut as q,lt as r,L as s,me as t,on as u,rn as v,St as w,ze as x,ie as y,Ae as z};
