const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aD2mbYvYG.js","a/a3TquqTin.css","a/a6SsksiLU.js","a/a9q_jSmK4.js","a/aBEGDcNQV.js","a/aBrkJtqMH.css","a/aRDuWq5Sz.js","a/aDB02xhFr.css","a/aTzbeVbL9.js","a/a54d_SC5m.css","a/aC3GzIhfm.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/aD4cPYyck.js","a/aY1d2PU1k.css","a/aBvFy98ar.js","a/abDxyDAZA.js","a/aC2dX6fIB.css","a/aEnIjitR9.js","a/aBeWFm1o7.css","a/aBlmo2At2.css","a/aDWaD3Hlc.js","a/aCeh8XjKC.css","a/aB7-DWNwV.js","a/a2arbkmgI.css","a/aC4aOoG09.js","a/aBpR5g6jV.css","a/aD-IHKT8x.js","a/aBem4Ctjp.css","a/ahiEW7au2.js","a/aBdnakgrk.css","a/aBYklvQSV.js","a/aDa9Ga8F-.css","a/a_royFrMo.js","a/aCH18nfIo.css","a/aBVw3FfyP.js","a/aD1_i9byZ.js","a/aCb6DfA6m.css","a/aCIycoPCD.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var fl=Object.defineProperty;var as=t=>{throw TypeError(t)};var vl=(t,e,a)=>e in t?fl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Nt=(t,e,a)=>vl(t,typeof e!="symbol"?e+"":e,a),so=(t,e,a)=>e.has(t)||as("Cannot "+a);var O=(t,e,a)=>(so(t,e,"read from private field"),a?a.call(t):e.get(t)),Ie=(t,e,a)=>e.has(t)?as("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),Me=(t,e,a,r)=>(so(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),tt=(t,e,a)=>(so(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const gl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};gl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const hl=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};hl();const fo=!1;var zo=Array.isArray,pl=Array.prototype.indexOf,Gr=Array.from,ml=Object.defineProperty,qn=Object.getOwnPropertyDescriptor,Ps=Object.getOwnPropertyDescriptors,Ns=Object.prototype,_l=Array.prototype,Yr=Object.getPrototypeOf,rs=Object.isExtensible;function Za(t){return typeof t=="function"}const je=()=>{};function wl(t){return typeof t?.then=="function"}function yl(t){return t()}function vo(t){for(var e=0;e<t.length;e++)t[e]()}function As(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function bl(t,e,a=!1){return t===void 0?a?e():e:t}const bt=2,jo=4,Xr=8,Sl=1<<24,Pn=16,Nn=32,ha=64,Jr=128,an=512,xt=1024,Ft=2048,fn=4096,qt=8192,bn=16384,Bo=32768,Jn=65536,os=1<<17,Ms=1<<18,Ga=1<<19,Ds=1<<20,yn=1<<25,fa=32768,go=1<<21,Ho=1<<22,Vn=1<<23,Wn=Symbol("$state"),Is=Symbol("legacy props"),Cl=Symbol(""),Na=new class extends Error{constructor(){super(...arguments);Nt(this,"name","StaleReactionError");Nt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Rs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function xl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Tl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function El(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function kl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Pl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Nl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Al(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ml(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Dl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Il(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Rl=1,Ll=2,Ls=4,Ol=8,Fl=16,zl=1,jl=2,Bl=4,Hl=8,Ul=16,ql=1,Vl=2,wt=Symbol(),Wl="http://www.w3.org/1999/xhtml";function Os(t){return t===this.v}function Kl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Fs(t){return!Kl(t,this.v)}let Ya=!1,Gl=!1;function Yl(){Ya=!0}const Xl=[];function ss(t,e=!1,a=!1){return Dr(t,new Map,"",Xl,null,a)}function Dr(t,e,a,r,o=null,s=!1){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(zo(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var c=0;c<t.length;c+=1){var u=t[c];c in t&&(l[c]=Dr(u,e,a,r,null,s))}return l}if(Yr(t)===Ns){l={},e.set(t,l),o!==null&&e.set(o,l);for(var d in t)l[d]=Dr(t[d],e,a,r,null,s);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return Dr(t.toJSON(),e,a,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Ze=null;function Ba(t){Ze=t}function it(t){return zs().get(t)}function lt(t,e){return zs().set(t,e),e}function de(t,e=!1,a){Ze={p:Ze,i:!1,c:null,e:null,s:t,x:null,l:Ya&&!e?{s:null,u:null,$:[]}:null}}function ue(t){var e=Ze,a=e.e;if(a!==null){e.e=null;for(var r of a)ri(r)}return t!==void 0&&(e.x=t),e.i=!0,Ze=e.p,t??{}}function Xa(){return!Ya||Ze!==null&&Ze.l===null}function zs(t){return Ze===null&&Rs(),Ze.c??(Ze.c=new Map(Jl(Ze)||void 0))}function Jl(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let aa=[];function js(){var t=aa;aa=[],vo(t)}function pa(t){if(aa.length===0&&!Ia){var e=aa;queueMicrotask(()=>{e===aa&&js()})}aa.push(t)}function Zl(){for(;aa.length>0;)js()}function Bs(t){var e=He;if(e===null)return Le.f|=Vn,t;if((e.f&Bo)===0){if((e.f&Jr)===0)throw t;e.b.error(t)}else Ha(t,e)}function Ha(t,e){for(;e!==null;){if((e.f&Jr)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Pr=new Set;let Ue=null,Ir=null,Qt=null,Jt=[],Zr=null,ho=!1,Ia=!1;var La,Oa,ra,oa,gr,Fa,za,yt,po,$a,mo,Hs,Us;const Ur=class Ur{constructor(){Ie(this,yt);Nt(this,"committed",!1);Nt(this,"current",new Map);Nt(this,"previous",new Map);Ie(this,La,new Set);Ie(this,Oa,new Set);Ie(this,ra,0);Ie(this,oa,0);Ie(this,gr,null);Ie(this,Fa,new Set);Ie(this,za,new Set);Nt(this,"skipped_effects",new Set);Nt(this,"is_fork",!1)}is_deferred(){return this.is_fork||O(this,oa)>0}process(e){Jt=[],Ir=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)tt(this,yt,po).call(this,r,a);this.is_fork||tt(this,yt,Hs).call(this),this.is_deferred()?(tt(this,yt,$a).call(this,a.effects),tt(this,yt,$a).call(this,a.render_effects)):(Ir=this,Ue=null,is(a.render_effects),is(a.effects),Ir=null,O(this,gr)?.resolve()),Qt=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&Vn)===0&&(this.current.set(e,e.v),Qt?.set(e,e.v))}activate(){Ue=this,this.apply()}deactivate(){Ue===this&&(Ue=null,Qt=null)}flush(){if(this.activate(),Jt.length>0){if(Vs(),Ue!==null&&Ue!==this)return}else O(this,ra)===0&&this.process([]);this.deactivate()}discard(){for(const e of O(this,Oa))e(this);O(this,Oa).clear()}increment(e){Me(this,ra,O(this,ra)+1),e&&Me(this,oa,O(this,oa)+1)}decrement(e){Me(this,ra,O(this,ra)-1),e&&Me(this,oa,O(this,oa)-1),this.revive()}revive(){for(const e of O(this,Fa))O(this,za).delete(e),Et(e,Ft),va(e);for(const e of O(this,za))Et(e,fn),va(e);this.flush()}oncommit(e){O(this,La).add(e)}ondiscard(e){O(this,Oa).add(e)}settled(){return(O(this,gr)??Me(this,gr,As())).promise}static ensure(){if(Ue===null){const e=Ue=new Ur;Pr.add(Ue),Ia||Ur.enqueue(()=>{Ue===e&&e.flush()})}return Ue}static enqueue(e){pa(e)}apply(){}};La=new WeakMap,Oa=new WeakMap,ra=new WeakMap,oa=new WeakMap,gr=new WeakMap,Fa=new WeakMap,za=new WeakMap,yt=new WeakSet,po=function(e,a){e.f^=xt;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Nn|ha))!==0,i=s&&(o&xt)!==0,l=i||(o&qt)!==0||this.skipped_effects.has(r);if((r.f&Jr)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=xt:(o&jo)!==0?a.effects.push(r):yr(r)&&((r.f&Pn)!==0&&O(this,Fa).add(r),cr(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===a.effect&&(tt(this,yt,$a).call(this,a.effects),tt(this,yt,$a).call(this,a.render_effects),a=a.parent),r=u.next,u=u.parent}},$a=function(e){for(const a of e)(a.f&Ft)!==0?O(this,Fa).add(a):(a.f&fn)!==0&&O(this,za).add(a),tt(this,yt,mo).call(this,a.deps),Et(a,xt)},mo=function(e){if(e!==null)for(const a of e)(a.f&bt)===0||(a.f&fa)===0||(a.f^=fa,tt(this,yt,mo).call(this,a.deps))},Hs=function(){if(O(this,oa)===0){for(const e of O(this,La))e();O(this,La).clear()}O(this,ra)===0&&tt(this,yt,Us).call(this)},Us=function(){var s;if(Pr.size>1){this.previous.clear();var e=Qt,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Pr){if(i===this){a=!1;continue}const l=[];for(const[u,d]of this.current){if(i.current.has(u))if(a&&d!==i.current.get(u))i.current.set(u,d);else continue;l.push(u)}if(l.length===0)continue;const c=[...i.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var o=Jt;Jt=[];const u=new Set,d=new Map;for(const v of l)Ws(v,c,u,d);if(Jt.length>0){Ue=i,i.apply();for(const v of Jt)tt(s=i,yt,po).call(s,v,r);i.deactivate()}Jt=o}}Ue=null,Qt=e}this.committed=!0,Pr.delete(this)};let dn=Ur;function qs(t){var e=Ia;Ia=!0;try{for(var a;;){if(Zl(),Jt.length===0&&(Ue?.flush(),Jt.length===0))return Zr=null,a;Vs()}}finally{Ia=e}}function Vs(){var t=ua;ho=!0;var e=null;try{var a=0;for(zr(!0);Jt.length>0;){var r=dn.ensure();if(a++>1e3){var o,s;Ql()}r.process(Jt),Kn.clear()}}finally{ho=!1,zr(t),Zr=null}}function Ql(){try{Pl()}catch(t){Ha(t,Zr)}}let mn=null;function is(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(bn|qt))===0&&yr(r)&&(mn=new Set,cr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?ii(r):r.fn=null),mn?.size>0)){Kn.clear();for(const o of mn){if((o.f&(bn|qt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)mn.has(i)&&(mn.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(bn|qt))===0&&cr(c)}}mn.clear()}}mn=null}}function Ws(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&bt)!==0?Ws(o,e,a,r):(s&(Ho|Pn))!==0&&(s&Ft)===0&&Ks(o,e,r)&&(Et(o,Ft),va(o))}}function Ks(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&bt)!==0&&Ks(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function va(t){for(var e=Zr=t;e.parent!==null;){e=e.parent;var a=e.f;if(ho&&e===He&&(a&Pn)!==0&&(a&Ms)===0)return;if((a&(ha|Nn))!==0){if((a&xt)===0)return;e.f^=xt}}Jt.push(e)}function $l(t){let e=0,a=vn(0),r;return()=>{ir()&&(n(a),$r(()=>(e===0&&(r=zt(()=>t(()=>Gn(a)))),e+=1,()=>{pa(()=>{e-=1,e===0&&(r?.(),r=void 0,Gn(a))})})))}}var ec=Jn|Ga|Jr;function tc(t,e,a){new nc(t,e,a)}var Gt,Yt,Fo,on,sa,sn,Xt,Rt,ln,wn,Fn,ia,zn,la,jn,qr,_t,ac,rc,_o,Rr,Lr,wo;class nc{constructor(e,a,r){Ie(this,_t);Nt(this,"parent");Ie(this,Gt,!1);Ie(this,Yt);Ie(this,Fo,null);Ie(this,on);Ie(this,sa);Ie(this,sn);Ie(this,Xt,null);Ie(this,Rt,null);Ie(this,ln,null);Ie(this,wn,null);Ie(this,Fn,null);Ie(this,ia,0);Ie(this,zn,0);Ie(this,la,!1);Ie(this,jn,null);Ie(this,qr,$l(()=>(Me(this,jn,vn(O(this,ia))),()=>{Me(this,jn,null)})));Me(this,Yt,e),Me(this,on,a),Me(this,sa,r),this.parent=He.b,Me(this,Gt,!!O(this,on).pending),Me(this,sn,Ja(()=>{He.b=this;{var o=tt(this,_t,_o).call(this);try{Me(this,Xt,Zt(()=>r(o)))}catch(s){this.error(s)}O(this,zn)>0?tt(this,_t,Lr).call(this):Me(this,Gt,!1)}return()=>{O(this,Fn)?.remove()}},ec))}is_pending(){return O(this,Gt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!O(this,on).pending}update_pending_count(e){tt(this,_t,wo).call(this,e),Me(this,ia,O(this,ia)+e),O(this,jn)&&Sn(O(this,jn),O(this,ia))}get_effect_pending(){return O(this,qr).call(this),n(O(this,jn))}error(e){var a=O(this,on).onerror;let r=O(this,on).failed;if(O(this,la)||!a&&!r)throw e;O(this,Xt)&&(Ot(O(this,Xt)),Me(this,Xt,null)),O(this,Rt)&&(Ot(O(this,Rt)),Me(this,Rt,null)),O(this,ln)&&(Ot(O(this,ln)),Me(this,ln,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&Il(),dn.ensure(),Me(this,ia,0),O(this,ln)!==null&&da(O(this,ln),()=>{Me(this,ln,null)}),Me(this,Gt,this.has_pending_snippet()),Me(this,Xt,tt(this,_t,Rr).call(this,()=>(Me(this,la,!1),Zt(()=>O(this,sa).call(this,O(this,Yt)))))),O(this,zn)>0?tt(this,_t,Lr).call(this):Me(this,Gt,!1)};var l=Le;try{Lt(null),s=!0,a?.(e,i),s=!1}catch(c){Ha(c,O(this,sn)&&O(this,sn).parent)}finally{Lt(l)}r&&pa(()=>{Me(this,ln,tt(this,_t,Rr).call(this,()=>{dn.ensure(),Me(this,la,!0);try{return Zt(()=>{r(O(this,Yt),()=>e,()=>i)})}catch(c){return Ha(c,O(this,sn).parent),null}finally{Me(this,la,!1)}}))})}}Gt=new WeakMap,Yt=new WeakMap,Fo=new WeakMap,on=new WeakMap,sa=new WeakMap,sn=new WeakMap,Xt=new WeakMap,Rt=new WeakMap,ln=new WeakMap,wn=new WeakMap,Fn=new WeakMap,ia=new WeakMap,zn=new WeakMap,la=new WeakMap,jn=new WeakMap,qr=new WeakMap,_t=new WeakSet,ac=function(){try{Me(this,Xt,Zt(()=>O(this,sa).call(this,O(this,Yt))))}catch(e){this.error(e)}Me(this,Gt,!1)},rc=function(){const e=O(this,on).pending;e&&(Me(this,Rt,Zt(()=>e(O(this,Yt)))),dn.enqueue(()=>{var a=tt(this,_t,_o).call(this);Me(this,Xt,tt(this,_t,Rr).call(this,()=>(dn.ensure(),Zt(()=>O(this,sa).call(this,a))))),O(this,zn)>0?tt(this,_t,Lr).call(this):(da(O(this,Rt),()=>{Me(this,Rt,null)}),Me(this,Gt,!1))}))},_o=function(){var e=O(this,Yt);return O(this,Gt)&&(Me(this,Fn,Cn()),O(this,Yt).before(O(this,Fn)),e=O(this,Fn)),e},Rr=function(e){var a=He,r=Le,o=Ze;gn(O(this,sn)),Lt(O(this,sn)),Ba(O(this,sn).ctx);try{return e()}catch(s){return Bs(s),null}finally{gn(a),Lt(r),Ba(o)}},Lr=function(){const e=O(this,on).pending;O(this,Xt)!==null&&(Me(this,wn,document.createDocumentFragment()),O(this,wn).append(O(this,Fn)),di(O(this,Xt),O(this,wn))),O(this,Rt)===null&&Me(this,Rt,Zt(()=>e(O(this,Yt))))},wo=function(e){var a;if(!this.has_pending_snippet()){this.parent&&tt(a=this.parent,_t,wo).call(a,e);return}Me(this,zn,O(this,zn)+e),O(this,zn)===0&&(Me(this,Gt,!1),O(this,Rt)&&da(O(this,Rt),()=>{Me(this,Rt,null)}),O(this,wn)&&(O(this,Yt).before(O(this,wn)),Me(this,wn,null)))};function oc(t,e,a,r){const o=Xa()?mr:_r;if(a.length===0&&t.length===0){r(e.map(o));return}var s=Ue,i=He,l=Gs();function c(){Promise.all(a.map(u=>sc(u))).then(u=>{l();try{r([...e.map(o),...u])}catch(d){(i.f&bn)===0&&Ha(d,i)}s?.deactivate(),sr()}).catch(u=>{Ha(u,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return c()}finally{s?.deactivate(),sr()}}):c()}function Gs(){var t=He,e=Le,a=Ze,r=Ue;return function(s=!0){gn(t),Lt(e),Ba(a),s&&r?.activate()}}function sr(){gn(null),Lt(null),Ba(null)}function mr(t){var e=bt|Ft,a=Le!==null&&(Le.f&bt)!==0?Le:null;return He!==null&&(He.f|=Ga),{ctx:Ze,deps:null,effects:null,equals:Os,f:e,fn:t,reactions:null,rv:0,v:wt,wv:0,parent:a??He,ac:null}}function sc(t,e){let a=He;a===null&&xl();var r=a.b,o=void 0,s=vn(wt),i=!Le,l=new Map;return mc(()=>{var c=As();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===Ue&&u.committed&&u.deactivate(),sr()})}catch(g){c.reject(g),sr()}var u=Ue;if(i){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(Na),l.delete(u),l.set(u,c)}const v=(g,h=void 0)=>{if(u.activate(),h)h!==Na&&(s.f|=Vn,Sn(s,h));else{(s.f&Vn)!==0&&(s.f^=Vn),Sn(s,g);for(const[m,x]of l){if(l.delete(m),m===u)break;x.reject(Na)}}i&&(r.update_pending_count(-1),u.decrement(d))};c.promise.then(v,g=>v(null,g||"unknown"))}),ai(()=>{for(const c of l.values())c.reject(Na)}),new Promise(c=>{function u(d){function v(){d===o?c(s):u(o)}d.then(v,v)}u(o)})}function N(t){const e=mr(t);return ui(e),e}function _r(t){const e=mr(t);return e.equals=Fs,e}function Ys(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Ot(e[a])}}function ic(t){for(var e=t.parent;e!==null;){if((e.f&bt)===0)return(e.f&bn)===0?e:null;e=e.parent}return null}function Uo(t){var e,a=He;gn(ic(t));try{t.f&=~fa,Ys(t),e=hi(t)}finally{gn(a)}return e}function Xs(t){var e=Uo(t);if(t.equals(e)||(Ue?.is_fork||(t.v=e),t.wv=vi()),!ma)if(Qt!==null)(ir()||Ue?.is_fork)&&Qt.set(t,e);else{var a=(t.f&an)===0?fn:xt;Et(t,a)}}let yo=new Set;const Kn=new Map;let Js=!1;function vn(t,e){var a={f:0,v:t,reactions:null,equals:Os,rv:0,wv:0};return a}function M(t,e){const a=vn(t);return ui(a),a}function bo(t,e=!1,a=!0){var o;const r=vn(t);return e||(r.equals=Fs),Ya&&a&&Ze!==null&&Ze.l!==null&&((o=Ze.l).s??(o.s=[])).push(r),r}function f(t,e,a=!1){Le!==null&&(!un||(Le.f&os)!==0)&&Xa()&&(Le.f&(bt|Pn|Ho|os))!==0&&!xn?.includes(t)&&Dl();let r=a?ct(e):e;return Sn(t,r)}function Sn(t,e){if(!t.equals(e)){var a=t.v;ma?Kn.set(t,e):Kn.set(t,a),t.v=e;var r=dn.ensure();r.capture(t,a),(t.f&bt)!==0&&((t.f&Ft)!==0&&Uo(t),Et(t,(t.f&an)!==0?xt:fn)),t.wv=vi(),Zs(t,Ft),Xa()&&He!==null&&(He.f&xt)!==0&&(He.f&(Nn|ha))===0&&(Wt===null?yc([t]):Wt.push(t)),!r.is_fork&&yo.size>0&&!Js&&lc()}return e}function lc(){Js=!1;var t=ua;zr(!0);const e=Array.from(yo);try{for(const a of e)(a.f&xt)!==0&&Et(a,fn),yr(a)&&cr(a)}finally{zr(t)}yo.clear()}function Gn(t){f(t,t.v+1)}function Zs(t,e){var a=t.reactions;if(a!==null)for(var r=Xa(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===He)){var c=(l&Ft)===0;if(c&&Et(i,e),(l&bt)!==0){var u=i;Qt?.delete(u),(l&fa)===0&&(l&an&&(i.f|=fa),Zs(u,fn))}else c&&((l&Pn)!==0&&mn!==null&&mn.add(i),va(i))}}}function ct(t){if(typeof t!="object"||t===null||Wn in t)return t;const e=Yr(t);if(e!==Ns&&e!==_l)return t;var a=new Map,r=zo(t),o=M(0),s=Tn,i=l=>{if(Tn===s)return l();var c=Le,u=Tn;Lt(null),us(s);var d=l();return Lt(c),us(u),d};return r&&a.set("length",M(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Al();var d=a.get(c);return d===void 0?d=i(()=>{var v=M(u.value);return a.set(c,v),v}):f(d,u.value,!0),!0},deleteProperty(l,c){var u=a.get(c);if(u===void 0){if(c in l){const d=i(()=>M(wt));a.set(c,d),Gn(o)}}else f(u,wt),Gn(o);return!0},get(l,c,u){if(c===Wn)return t;var d=a.get(c),v=c in l;if(d===void 0&&(!v||qn(l,c)?.writable)&&(d=i(()=>{var h=ct(v?l[c]:wt),m=M(h);return m}),a.set(c,d)),d!==void 0){var g=n(d);return g===wt?void 0:g}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=a.get(c);d&&(u.value=n(d))}else if(u===void 0){var v=a.get(c),g=v?.v;if(v!==void 0&&g!==wt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return u},has(l,c){if(c===Wn)return!0;var u=a.get(c),d=u!==void 0&&u.v!==wt||Reflect.has(l,c);if(u!==void 0||He!==null&&(!d||qn(l,c)?.writable)){u===void 0&&(u=i(()=>{var g=d?ct(l[c]):wt,h=M(g);return h}),a.set(c,u));var v=n(u);if(v===wt)return!1}return d},set(l,c,u,d){var v=a.get(c),g=c in l;if(r&&c==="length")for(var h=u;h<v.v;h+=1){var m=a.get(h+"");m!==void 0?f(m,wt):h in l&&(m=i(()=>M(wt)),a.set(h+"",m))}if(v===void 0)(!g||qn(l,c)?.writable)&&(v=i(()=>M(void 0)),f(v,ct(u)),a.set(c,v));else{g=v.v!==wt;var x=i(()=>ct(u));f(v,x)}var _=Reflect.getOwnPropertyDescriptor(l,c);if(_?.set&&_.set.call(d,u),!g){if(r&&typeof c=="string"){var y=a.get("length"),F=Number(c);Number.isInteger(F)&&F>=y.v&&f(y,F+1)}Gn(o)}return!0},ownKeys(l){n(o);var c=Reflect.ownKeys(l).filter(v=>{var g=a.get(v);return g===void 0||g.v!==wt});for(var[u,d]of a)d.v!==wt&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Ml()}})}var ls,Qs,$s,ei;function cc(){if(ls===void 0){ls=window,Qs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;$s=qn(e,"firstChild").get,ei=qn(e,"nextSibling").get,rs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),rs(a)&&(a.__t=void 0)}}function Cn(t=""){return document.createTextNode(t)}function Ua(t){return $s.call(t)}function wr(t){return ei.call(t)}function b(t,e){return Ua(t)}function D(t,e=!1){{var a=Ua(t);return a instanceof Comment&&a.data===""?wr(a):a}}function I(t,e=1,a=!1){let r=t;for(;e--;)r=wr(r);return r}function dc(t){t.textContent=""}function ti(){return!1}let cs=!1;function uc(){cs||(cs=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Qr(t){var e=Le,a=He;Lt(null),gn(null);try{return t()}finally{Lt(e),gn(a)}}function fc(t,e,a,r=a){t.addEventListener(e,()=>Qr(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),uc()}function ni(t){He===null&&(Le===null&&kl(),El()),ma&&Tl()}function vc(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function hn(t,e,a){var r=He;r!==null&&(r.f&qt)!==0&&(t|=qt);var o={ctx:Ze,deps:null,nodes:null,f:t|Ft|an,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{cr(o),o.f|=Bo}catch(l){throw Ot(o),l}else e!==null&&va(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&Ga)===0&&(s=s.first,(t&Pn)!==0&&(t&Jn)!==0&&s!==null&&(s.f|=Jn)),s!==null&&(s.parent=r,r!==null&&vc(s,r),Le!==null&&(Le.f&bt)!==0&&(t&ha)===0)){var i=Le;(i.effects??(i.effects=[])).push(s)}return o}function ir(){return Le!==null&&!un}function ai(t){const e=hn(Xr,null,!1);return Et(e,xt),e.teardown=t,e}function Oe(t){ni();var e=He.f,a=!Le&&(e&Nn)!==0&&(e&Bo)===0;if(a){var r=Ze;(r.e??(r.e=[])).push(t)}else return ri(t)}function ri(t){return hn(jo|Ds,t,!1)}function gc(t){return ni(),hn(Xr|Ds,t,!0)}function hc(t){dn.ensure();const e=hn(ha|Ga,t,!0);return(a={})=>new Promise(r=>{a.outro?da(e,()=>{Ot(e),r(void 0)}):(Ot(e),r(void 0))})}function pc(t){return hn(jo,t,!1)}function mc(t){return hn(Ho|Ga,t,!0)}function $r(t,e=0){return hn(Xr|e,t,!0)}function xe(t,e=[],a=[],r=[]){oc(r,e,a,o=>{hn(Xr,()=>t(...o.map(n)),!0)})}function Ja(t,e=0){var a=hn(Pn|e,t,!0);return a}function Zt(t){return hn(Nn|Ga,t,!0)}function oi(t){var e=t.teardown;if(e!==null){const a=ma,r=Le;ds(!0),Lt(null);try{e.call(null)}finally{ds(a),Lt(r)}}}function si(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&Qr(()=>{o.abort(Na)});var r=a.next;(a.f&ha)!==0?a.parent=null:Ot(a,e),a=r}}function _c(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&Nn)===0&&Ot(e),e=a}}function Ot(t,e=!0){var a=!1;(e||(t.f&Ms)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(wc(t.nodes.start,t.nodes.end),a=!0),si(t,e&&!a),jr(t,0),Et(t,bn);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();oi(t);var o=t.parent;o!==null&&o.first!==null&&ii(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function wc(t,e){for(;t!==null;){var a=t===e?null:wr(t);t.remove(),t=a}}function ii(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function da(t,e,a=!0){var r=[];li(t,r,!0);var o=()=>{a&&Ot(t),e&&e()},s=r.length;if(s>0){var i=()=>--s||o();for(var l of r)l.out(i)}else o()}function li(t,e,a){if((t.f&qt)===0){t.f^=qt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&e.push(l);for(var o=t.first;o!==null;){var s=o.next,i=(o.f&Jn)!==0||(o.f&Nn)!==0&&(t.f&Pn)!==0;li(o,e,i?a:!1),o=s}}}function qo(t){ci(t,!0)}function ci(t,e){if((t.f&qt)!==0){t.f^=qt,(t.f&xt)===0&&(Et(t,Ft),va(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&Jn)!==0||(a.f&Nn)!==0;ci(a,o?e:!1),a=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)(i.is_global||e)&&i.in()}}function di(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var o=a===r?null:wr(a);e.append(a),a=o}}let ua=!1;function zr(t){ua=t}let ma=!1;function ds(t){ma=t}let Le=null,un=!1;function Lt(t){Le=t}let He=null;function gn(t){He=t}let xn=null;function ui(t){Le!==null&&(xn===null?xn=[t]:xn.push(t))}let At=null,Bt=0,Wt=null;function yc(t){Wt=t}let fi=1,lr=0,Tn=lr;function us(t){Tn=t}function vi(){return++fi}function yr(t){var e=t.f;if((e&Ft)!==0)return!0;if(e&bt&&(t.f&=~fa),(e&fn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(yr(s)&&Xs(s),s.wv>t.wv)return!0}(e&an)!==0&&Qt===null&&Et(t,xt)}return!1}function gi(t,e,a=!0){var r=t.reactions;if(r!==null&&!xn?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&bt)!==0?gi(s,e,!1):e===s&&(a?Et(s,Ft):(s.f&xt)!==0&&Et(s,fn),va(s))}}function hi(t){var m;var e=At,a=Bt,r=Wt,o=Le,s=xn,i=Ze,l=un,c=Tn,u=t.f;At=null,Bt=0,Wt=null,Le=(u&(Nn|ha))===0?t:null,xn=null,Ba(t.ctx),un=!1,Tn=++lr,t.ac!==null&&(Qr(()=>{t.ac.abort(Na)}),t.ac=null);try{t.f|=go;var d=t.fn,v=d(),g=t.deps;if(At!==null){var h;if(jr(t,Bt),g!==null&&Bt>0)for(g.length=Bt+At.length,h=0;h<At.length;h++)g[Bt+h]=At[h];else t.deps=g=At;if(ir()&&(t.f&an)!==0)for(h=Bt;h<g.length;h++)((m=g[h]).reactions??(m.reactions=[])).push(t)}else g!==null&&Bt<g.length&&(jr(t,Bt),g.length=Bt);if(Xa()&&Wt!==null&&!un&&g!==null&&(t.f&(bt|fn|Ft))===0)for(h=0;h<Wt.length;h++)gi(Wt[h],t);return o!==null&&o!==t&&(lr++,Wt!==null&&(r===null?r=Wt:r.push(...Wt))),(t.f&Vn)!==0&&(t.f^=Vn),v}catch(x){return Bs(x)}finally{t.f^=go,At=e,Bt=a,Wt=r,Le=o,xn=s,Ba(i),un=l,Tn=c}}function bc(t,e){let a=e.reactions;if(a!==null){var r=pl.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&bt)!==0&&(At===null||!At.includes(e))&&(Et(e,fn),(e.f&an)!==0&&(e.f^=an,e.f&=~fa),Ys(e),jr(e,0))}function jr(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)bc(t,a[r])}function cr(t){var e=t.f;if((e&bn)===0){Et(t,xt);var a=He,r=ua;He=t,ua=!0;try{(e&(Pn|Sl))!==0?_c(t):si(t),oi(t);var o=hi(t);t.teardown=typeof o=="function"?o:null,t.wv=fi;var s;fo&&Gl&&(t.f&Ft)!==0&&t.deps}finally{ua=r,He=a}}}async function pi(){await Promise.resolve(),qs()}function n(t){var e=t.f,a=(e&bt)!==0;if(Le!==null&&!un){var r=He!==null&&(He.f&bn)!==0;if(!r&&!xn?.includes(t)){var o=Le.deps;if((Le.f&go)!==0)t.rv<lr&&(t.rv=lr,At===null&&o!==null&&o[Bt]===t?Bt++:At===null?At=[t]:At.includes(t)||At.push(t));else{(Le.deps??(Le.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Le]:s.includes(Le)||s.push(Le)}}}if(ma){if(Kn.has(t))return Kn.get(t);if(a){var i=t,l=i.v;return((i.f&xt)===0&&i.reactions!==null||_i(i))&&(l=Uo(i)),Kn.set(i,l),l}}else a&&(!Qt?.has(t)||Ue?.is_fork&&!ir())&&(i=t,yr(i)&&Xs(i),ua&&ir()&&(i.f&an)===0&&mi(i));if(Qt?.has(t))return Qt.get(t);if((t.f&Vn)!==0)throw t.v;return t.v}function mi(t){if(t.deps!==null){t.f^=an;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&bt)!==0&&(e.f&an)===0&&mi(e)}}function _i(t){if(t.v===wt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Kn.has(e)||(e.f&bt)!==0&&_i(e))return!0;return!1}function zt(t){var e=un;try{return un=!0,t()}finally{un=e}}const Sc=-7169;function Et(t,e){t.f=t.f&Sc|e}function Cc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Wn in t)So(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&Wn in a&&So(a)}}}function So(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{So(t[r],e)}catch{}const a=Yr(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Ps(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const xc=["touchstart","touchmove"];function Tc(t){return xc.includes(t)}const wi=new Set,Co=new Set;function Ec(t,e,a,r={}){function o(s){if(r.capture||er.call(e,s),!s.cancelBubble)return Qr(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?pa(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function rn(t,e,a,r,o){var s={capture:r,passive:o},i=Ec(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ai(()=>{e.removeEventListener(t,i,s)})}function st(t){for(var e=0;e<t.length;e++)wi.add(t[e]);for(var a of Co)a(t)}let fs=null;function er(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;fs=t;var i=0,l=fs===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){ml(t,"currentTarget",{configurable:!0,get(){return s||a}});var d=Le,v=He;Lt(null),gn(null);try{for(var g,h=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var x=s["__"+r];x!=null&&(!s.disabled||t.target===s)&&x.call(s,t)}catch(_){g?h.push(_):g=_}if(t.cancelBubble||m===e||m===null)break;s=m}if(g){for(let _ of h)queueMicrotask(()=>{throw _});throw g}}finally{t.__root=e,delete t.currentTarget,Lt(d),gn(v)}}}function yi(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function dr(t,e){var a=He;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function T(t,e){var a=(e&ql)!==0,r=(e&Vl)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=yi(s?t:"<!>"+t),a||(o=Ua(o)));var i=r||Qs?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=Ua(i),c=i.lastChild;dr(l,c)}else dr(i,i);return i}}function kc(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=yi(o),l=Ua(i);s=Ua(l)}var c=s.cloneNode(!0);return dr(c,c),c}}function Pc(t,e){return kc(t,e,"svg")}function De(t=""){{var e=Cn(t+"");return dr(e,e),e}}function ce(){var t=document.createDocumentFragment(),e=document.createComment(""),a=Cn();return t.append(e,a),dr(e,a),t}function p(t,e){t!==null&&t.before(e)}function Jg(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function ot(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Nc(t,e){return Ac(t,e)}const Ta=new Map;function Ac(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){cc();var l=new Set,c=v=>{for(var g=0;g<v.length;g++){var h=v[g];if(!l.has(h)){l.add(h);var m=Tc(h);e.addEventListener(h,er,{passive:m});var x=Ta.get(h);x===void 0?(document.addEventListener(h,er,{passive:m}),Ta.set(h,1)):Ta.set(h,x+1)}}};c(Gr(wi)),Co.add(c);var u=void 0,d=hc(()=>{var v=a??e.appendChild(Cn());return tc(v,{pending:()=>{}},g=>{if(s){de({});var h=Ze;h.c=s}o&&(r.$$events=o),u=t(g,r)||{},s&&ue()}),()=>{for(var g of l){e.removeEventListener(g,er);var h=Ta.get(g);--h===0?(document.removeEventListener(g,er),Ta.delete(g)):Ta.set(g,h)}Co.delete(c),v!==a&&v.parentNode?.removeChild(v)}});return Mc.set(u,d),u}let Mc=new WeakMap;var tn,cn,Ut,ca,hr,pr,Vr;class eo{constructor(e,a=!0){Nt(this,"anchor");Ie(this,tn,new Map);Ie(this,cn,new Map);Ie(this,Ut,new Map);Ie(this,ca,new Set);Ie(this,hr,!0);Ie(this,pr,()=>{var e=Ue;if(O(this,tn).has(e)){var a=O(this,tn).get(e),r=O(this,cn).get(a);if(r)qo(r),O(this,ca).delete(a);else{var o=O(this,Ut).get(a);o&&(O(this,cn).set(a,o.effect),O(this,Ut).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of O(this,tn)){if(O(this,tn).delete(s),s===e)break;const l=O(this,Ut).get(i);l&&(Ot(l.effect),O(this,Ut).delete(i))}for(const[s,i]of O(this,cn)){if(s===a||O(this,ca).has(s))continue;const l=()=>{if(Array.from(O(this,tn).values()).includes(s)){var u=document.createDocumentFragment();di(i,u),u.append(Cn()),O(this,Ut).set(s,{effect:i,fragment:u})}else Ot(i);O(this,ca).delete(s),O(this,cn).delete(s)};O(this,hr)||!r?(O(this,ca).add(s),da(i,l,!1)):l()}}});Ie(this,Vr,e=>{O(this,tn).delete(e);const a=Array.from(O(this,tn).values());for(const[r,o]of O(this,Ut))a.includes(r)||(Ot(o.effect),O(this,Ut).delete(r))});this.anchor=e,Me(this,hr,a)}ensure(e,a){var r=Ue,o=ti();if(a&&!O(this,cn).has(e)&&!O(this,Ut).has(e))if(o){var s=document.createDocumentFragment(),i=Cn();s.append(i),O(this,Ut).set(e,{effect:Zt(()=>a(i)),fragment:s})}else O(this,cn).set(e,Zt(()=>a(this.anchor)));if(O(this,tn).set(r,e),o){for(const[l,c]of O(this,cn))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of O(this,Ut))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(O(this,pr)),r.ondiscard(O(this,Vr))}else O(this,pr).call(this)}}tn=new WeakMap,cn=new WeakMap,Ut=new WeakMap,ca=new WeakMap,hr=new WeakMap,pr=new WeakMap,Vr=new WeakMap;const Dc=0,io=1;function Ic(t,e,a,r,o){var s=Xa(),i=wt,l=s?vn(i):bo(i,!1,!1),c=s?vn(i):bo(i,!1,!1),u=new eo(t);Ja(()=>{var d=e(),v=!1;if(wl(d)){var g=Gs(),h=!1;const m=x=>{if(!v){h=!0,g(!1),dn.ensure();try{x()}finally{sr(),Ia||qs()}}};d.then(x=>{m(()=>{Sn(l,x),u.ensure(io,r&&(_=>r(_,l)))})},x=>{m(()=>{if(Sn(c,x),u.ensure(io,o&&(_=>o(_,c))),!o)throw c.v})}),pa(()=>{h||m(()=>{u.ensure(Dc,a)})})}else Sn(l,d),u.ensure(io,r&&(m=>r(m,l)));return()=>{v=!0}})}function U(t,e,a=!1){var r=new eo(t),o=a?Jn:0;function s(i,l){r.ensure(i,l)}Ja(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function pe(t,e){$r(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Rc(t,e,a){for(var r=[],o=e.length,s,i=e.length,l=0;l<o;l++){let v=e[l];da(v,()=>{if(s){if(s.pending.delete(v),s.done.add(v),s.pending.size===0){var g=t.outrogroups;xo(Gr(s.done)),g.delete(s),g.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var c=r.length===0&&a!==null;if(c){var u=a,d=u.parentNode;dc(d),d.append(u),t.items.clear()}xo(e,!c)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function xo(t,e=!0){for(var a=0;a<t.length;a++)Ot(t[a],e)}var vs;function En(t,e,a,r,o,s=null){var i=t,l=new Map,c=(e&Ls)!==0;if(c){var u=t;i=u.appendChild(Cn())}var d=null,v=_r(()=>{var y=a();return zo(y)?y:y==null?[]:Gr(y)}),g,h=!0;function m(){_.fallback=d,Lc(_,g,i,e,r),d!==null&&(g.length===0?(d.f&yn)===0?qo(d):(d.f^=yn,tr(d,null,i)):da(d,()=>{d=null}))}var x=Ja(()=>{g=n(v);for(var y=g.length,F=new Set,w=Ue,S=ti(),A=0;A<y;A+=1){var E=g[A],k=r(E,A),z=h?null:l.get(k);z?(z.v&&Sn(z.v,E),z.i&&Sn(z.i,A),S&&w.skipped_effects.delete(z.e)):(z=Oc(l,h?i:vs??(vs=Cn()),E,k,A,o,e,a),h||(z.e.f|=yn),l.set(k,z)),F.add(k)}if(y===0&&s&&!d&&(h?d=Zt(()=>s(i)):(d=Zt(()=>s(vs??(vs=Cn()))),d.f|=yn)),!h)if(S){for(const[K,V]of l)F.has(K)||w.skipped_effects.add(V.e);w.oncommit(m),w.ondiscard(()=>{})}else m();n(v)}),_={effect:x,items:l,outrogroups:null,fallback:d};h=!1}function Lc(t,e,a,r,o){var s=(r&Ol)!==0,i=e.length,l=t.items,c=t.effect.first,u,d=null,v,g=[],h=[],m,x,_,y;if(s)for(y=0;y<i;y+=1)m=e[y],x=o(m,y),_=l.get(x).e,(_.f&yn)===0&&(_.nodes?.a?.measure(),(v??(v=new Set)).add(_));for(y=0;y<i;y+=1){if(m=e[y],x=o(m,y),_=l.get(x).e,t.outrogroups!==null)for(const V of t.outrogroups)V.pending.delete(_),V.done.delete(_);if((_.f&yn)!==0)if(_.f^=yn,_===c)tr(_,null,a);else{var F=d?d.next:c;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Dn(t,d,_),Dn(t,_,F),tr(_,F,a),d=_,g=[],h=[],c=d.next;continue}if((_.f&qt)!==0&&(qo(_),s&&(_.nodes?.a?.unfix(),(v??(v=new Set)).delete(_))),_!==c){if(u!==void 0&&u.has(_)){if(g.length<h.length){var w=h[0],S;d=w.prev;var A=g[0],E=g[g.length-1];for(S=0;S<g.length;S+=1)tr(g[S],w,a);for(S=0;S<h.length;S+=1)u.delete(h[S]);Dn(t,A.prev,E.next),Dn(t,d,A),Dn(t,E,w),c=w,d=E,y-=1,g=[],h=[]}else u.delete(_),tr(_,c,a),Dn(t,_.prev,_.next),Dn(t,_,d===null?t.effect.first:d.next),Dn(t,d,_),d=_;continue}for(g=[],h=[];c!==null&&c!==_;)(u??(u=new Set)).add(c),h.push(c),c=c.next;if(c===null)continue}(_.f&yn)===0&&g.push(_),d=_,c=_.next}if(t.outrogroups!==null){for(const V of t.outrogroups)V.pending.size===0&&(xo(Gr(V.done)),t.outrogroups?.delete(V));t.outrogroups.size===0&&(t.outrogroups=null)}if(c!==null||u!==void 0){var k=[];if(u!==void 0)for(_ of u)(_.f&qt)===0&&k.push(_);for(;c!==null;)(c.f&qt)===0&&c!==t.fallback&&k.push(c),c=c.next;var z=k.length;if(z>0){var K=(r&Ls)!==0&&i===0?a:null;if(s){for(y=0;y<z;y+=1)k[y].nodes?.a?.measure();for(y=0;y<z;y+=1)k[y].nodes?.a?.fix()}Rc(t,k,K)}}s&&pa(()=>{if(v!==void 0)for(_ of v)_.nodes?.a?.apply()})}function Oc(t,e,a,r,o,s,i,l){var c=(i&Rl)!==0?(i&Fl)===0?bo(a,!1,!1):vn(a):null,u=(i&Ll)!==0?vn(o):null;return{v:c,i:u,e:Zt(()=>(s(e,c??a,u??o,l),()=>{t.delete(r)}))}}function tr(t,e,a){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,s=e&&(e.f&yn)===0?e.nodes.start:a;r!==null;){var i=wr(r);if(s.before(r),r===o)return;r=i}}function Dn(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function Ae(t,e,...a){var r=new eo(t);Ja(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},Jn)}function Fc(t,e,a){var r=new eo(t);Ja(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},Jn)}function bi(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=bi(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function zc(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=bi(t))&&(r&&(r+=" "),r+=e);return r}function rt(t){return typeof t=="object"?zc(t):t??""}const gs=[...` 	
\r\fÂ \v\uFEFF`];function jc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||gs.includes(r[i-1]))&&(l===r.length||gs.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Bc(t,e){return t==null?null:String(t)}function Qe(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=jc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function qa(t,e,a,r){var o=t.__style;if(o!==e){var s=Bc(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Hc=Symbol("is custom element"),Uc=Symbol("is html");function Zg(t,e){var a=Vo(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function qc(t,e){var a=Vo(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function at(t,e,a,r){var o=Vo(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[Cl]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Vc(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Vo(t){return t.__attributes??(t.__attributes={[Hc]:t.nodeName.includes("-"),[Uc]:t.namespaceURI===Wl})}var hs=new Map;function Vc(t){var e=t.getAttribute("is")||t.nodeName,a=hs.get(e);if(a)return a;hs.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Ps(o);for(var i in r)r[i].set&&a.push(i);o=Yr(o)}return a}function Si(t,e,a=e){var r=new WeakSet;fc(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=lo(t)?co(s):s,a(s),Ue!==null&&r.add(Ue),await pi(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),zt(e)==null&&t.value&&(a(lo(t)?co(t.value):t.value),Ue!==null&&r.add(Ue)),$r(()=>{var o=e();if(t===document.activeElement){var s=Ir??Ue;if(r.has(s))return}lo(t)&&o===co(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function lo(t){var e=t.type;return e==="number"||e==="range"}function co(t){return t===""?null:+t}function ps(t,e){return t===e||t?.[Wn]===e}function Ge(t={},e,a,r){return pc(()=>{var o,s;return $r(()=>{o=s,s=[],zt(()=>{t!==a(...s)&&(e(t,...s),o&&ps(a(...o),t)&&e(null,...o))})}),()=>{pa(()=>{s&&ps(a(...s),t)&&e(null,...s)})}}),t}function Wo(t=!1){const e=Ze,a=e.l.u;if(!a)return;let r=()=>Cc(e.s);if(t){let o=0,s={};const i=mr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&gc(()=>{ms(e,r),vo(a.b)}),Oe(()=>{const o=zt(()=>a.m.map(yl));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&Oe(()=>{ms(e,r),vo(a.a)})}function ms(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Nr=!1;function Wc(t){var e=Nr;try{return Nr=!1,[t(),Nr]}finally{Nr=e}}const Kc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Gc(t,e,a){return new Proxy({props:t,exclude:e},Kc)}const Yc={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(Za(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];Za(o)&&(o=o());const s=qn(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(Za(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=qn(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===Wn||e===Is)return!1;for(let a of t.props)if(Za(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(Za(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function To(...t){return new Proxy({props:t},Yc)}function Ne(t,e,a,r){var o=!Ya||(a&jl)!==0,s=(a&Hl)!==0,i=(a&Ul)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?zt(r):r),l),d;if(s){var v=Wn in t||Is in t;d=qn(t,e)?.set??(v&&e in t?w=>t[e]=w:void 0)}var g,h=!1;s?[g,h]=Wc(()=>t[e]):g=t[e],g===void 0&&r!==void 0&&(g=u(),d&&(o&&Nl(),d(g)));var m;if(o?m=()=>{var w=t[e];return w===void 0?u():(c=!0,w)}:m=()=>{var w=t[e];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(a&Bl)===0)return m;if(d){var x=t.$$legacy;return(function(w,S){return arguments.length>0?((!o||!S||x||h)&&d(S?m():w),w):m()})}var _=!1,y=((a&zl)!==0?mr:_r)(()=>(_=!1,m()));s&&n(y);var F=He;return(function(w,S){if(arguments.length>0){const A=S?n(y):o&&s?ct(w):w;return f(y,A),_=!0,l!==void 0&&(l=A),w}return ma&&_||(F.f&bn)!==0?y.v:n(y)})}function Ce(t){Ze===null&&Rs(),Ya&&Ze.l!==null?Xc(Ze).m.push(t):Oe(()=>{const e=zt(t);if(typeof e=="function")return e})}function Xc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Jc="5";var ks;typeof window<"u"&&((ks=window.__svelte??(window.__svelte={})).v??(ks.v=new Set)).add(Jc);Yl();const Ci={};function Zc(t){lt(Ci,t)}function Ko(){const t=it(Ci);if(!t)throw new Error("No FeedSearchContext found");return t}const xi={};function Qc(t){lt(xi,t)}function jt(){const t=it(xi);if(!t)throw new Error("No SearchParamsContext found");return t}function $c(t,e){de(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=jt(),s="feedSearch",i=N(()=>o().get(s)||""),l=N(()=>n(i));Zc({getFeedSearch:()=>n(l),setFeedSearch:d=>{d===""?r(s):a(s,d)}});var c=ce(),u=D(c);Ae(u,()=>e.children??je),p(t,c),ue()}const Ti={};function ed(t){lt(Ti,t)}function td(){const t=it(Ti);if(!t)throw new Error("No TagsSearchContext found");return t}function nd(t,e){de(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=jt(),s="tagsSearch",i=N(()=>o().get(s)||""),l=N(()=>n(i));ed({getTagsSearch:()=>n(l),setTagsSearch:d=>{d===""?r(s):a(s,d)}});var c=ce(),u=D(c);Ae(u,()=>e.children??je),p(t,c),ue()}const Ei={};function ad(t){lt(Ei,t)}function ki(){const t=it(Ei);if(!t)throw new Error("No FeedOrderContext found");return t}function rd(t,e){de(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=jt(),s="feedOrder",i=N(()=>o().get(s)||"newest"),l=N(()=>n(i));ad({getFeedOrder:()=>n(l),setFeedOrder:d=>{d==="newest"?r(s):a(s,d)}});var c=ce(),u=D(c);Ae(u,()=>e.children??je),p(t,c),ue()}const Pi={};function od(t){lt(Pi,t)}function br(){const t=it(Pi);if(!t)throw new Error("No SidebarContext found");return t}function sd(t,e){de(e,!0);let a=M("closed");od({sidebarOpen:()=>{f(a,"preOpening")},sidebarClose:()=>{f(a,"closing")},getSidebarState:()=>n(a),setSidebarState:u=>{f(a,u,!0)}});var l=ce(),c=D(l);Ae(c,()=>e.children??je),p(t,l),ue()}const Ni={};function id(t){lt(Ni,t)}function An(){const t=it(Ni);if(!t)throw new Error("No SelectedTagsContext found");return t}function ld(t,e){de(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=jt(),s=N(a),i="selectedTags";let l=N(()=>n(s).get(i)||""),c=N(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));id({getSelectedTags:()=>n(c),addTag:_=>{n(c).has(_)||r(i,[...n(c),_].map(y=>encodeURIComponent(y)).join(","))},removeTag:_=>{n(c).has(_)&&n(c).size===1?o(i):n(c).has(_)&&r(i,[...n(c)].filter(y=>y!==_).map(y=>encodeURIComponent(y)).join(","))},clearTags:()=>{o(i)},setSelectedTags:_=>{_.size===0?o(i):r(i,[..._].map(y=>encodeURIComponent(y)).join(","))}});var m=ce(),x=D(m);Ae(x,()=>e.children??je),p(t,m),ue()}const Ai={};function cd(t){lt(Ai,t)}function _a(){const t=it(Ai);if(!t)throw new Error("No SelectedNotesContext found");return t}var dd=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],ud=["difference","intersection","symmetricDifference","union"],_s=!1,ja,nn,Bn,Wr,Wa,Mi,Di;const Kr=class Kr extends Set{constructor(a){super();Ie(this,Wa);Ie(this,ja,new Map);Ie(this,nn,M(0));Ie(this,Bn,M(0));Ie(this,Wr,Tn||-1);if(a){for(var r of a)super.add(r);O(this,Bn).v=super.size}_s||tt(this,Wa,Di).call(this)}has(a){var r=super.has(a),o=O(this,ja),s=o.get(a);if(s===void 0){if(!r)return n(O(this,nn)),!1;s=tt(this,Wa,Mi).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),f(O(this,Bn),super.size),Gn(O(this,nn))),this}delete(a){var r=super.delete(a),o=O(this,ja),s=o.get(a);return s!==void 0&&(o.delete(a),f(s,!1)),r&&(f(O(this,Bn),super.size),Gn(O(this,nn))),r}clear(){if(super.size!==0){super.clear();var a=O(this,ja);for(var r of a.values())f(r,!1);a.clear(),f(O(this,Bn),0),Gn(O(this,nn))}}keys(){return this.values()}values(){return n(O(this,nn)),super.values()}entries(){return n(O(this,nn)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(O(this,Bn))}};ja=new WeakMap,nn=new WeakMap,Bn=new WeakMap,Wr=new WeakMap,Wa=new WeakSet,Mi=function(a){return Tn===O(this,Wr)?M(a):vn(a)},Di=function(){_s=!0;var a=Kr.prototype,r=Set.prototype;for(const o of dd)a[o]=function(...s){return n(O(this,nn)),r[o].apply(this,s)};for(const o of ud)a[o]=function(...s){n(O(this,nn));var i=r[o].apply(this,s);return new Kr(i)}};let Eo=Kr;function fd(t,e){de(e,!0);let a=new Eo,r=M("single");const o=()=>a,s=h=>{a.clear(),h.forEach(m=>a.add(m))},i=h=>{a.add(h)},l=h=>{a.delete(h)},c=()=>{a.clear()};cd({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:c,getMode:()=>n(r),changeMode:h=>{f(r,h,!0),h==="single"&&c()}});var v=ce(),g=D(v);Ae(g,()=>e.children??je),p(t,v),ue()}const Ii={};function vd(t){lt(Ii,t)}function Go(){const t=it(Ii);if(!t)throw new Error("No LocalDBContext found");return t}const Ri={};function gd(t){lt(Ri,t)}function Va(){const t=it(Ri);if(!t)throw new Error("No SettingsContext found");return t}const Li={};function hd(t){lt(Li,t)}function to(){const t=it(Li);if(!t)throw new Error("No BroadcastContext found");return t}const pd="AppStorage",md=1,nr="account",ka="settings",We="notes",It="tags",_d="syncLog",Qn="success",$n="error",mt=(t,e,a)=>{t?.addEventListener(e,a)},ws=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();mt(s,Qn,()=>{const i=s?.result||[];a(i)}),mt(s,$n,i=>{r(i)})}),Br=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);mt(i,Qn,()=>{const l=i?.result?.data;r(l)}),mt(i,$n,l=>{o(l)})}),Hn=(t,e,a,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});mt(c,Qn,()=>{o()}),mt(c,$n,u=>{s(u)})}),ut=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{mt(i,Qn,()=>{l()}),mt(i,$n,u=>{c(u)})})}))},uo=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);mt(l,Qn,()=>{r()}),mt(l,$n,c=>{o(c)})}),Qa=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{mt(i,Qn,()=>{l()}),mt(i,$n,u=>{c(u)})})}))},Aa=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();mt(i,Qn,()=>{a()}),mt(i,$n,l=>{r(l)})}),Kt="dialogPages",Oi={};function wd(t){lt(Oi,t)}function $t(){const t=it(Oi);if(!t)throw new Error("No DialogPagesContext found");return t}function yd(t,e){de(e,!0);const{deleteSearchParam:a}=jt(),{clearDialogPages:r}=$t(),o="viewMode";let i=ct((()=>{const z=new URLSearchParams(window.location.search).get(o)||"tab";return z==="popup"||z==="window"||z==="tab"||z==="sidebar"?z:"tab"})());Ce(()=>{a(o)});let l=M(!1),c=M(ct({showFavicon:!0,recordMode:"note",generateTagsEnabled:!1}));const{getDB:u}=Go(),{createBroadcastChannel:d,tabId:v}=to(),g=d(),h=N(u),m=async()=>{const k=await Br(n(h),ka,"default");k&&f(c,k,!0)},x=async()=>{await m(),f(l,!0)},_=async k=>{const z=JSON.parse(k.data),K=z;if(z.tabId&&z.tabId===v){K.type==="exit"&&(f(c,{showFavicon:!0,recordMode:"note",generateTagsEnabled:!1},!0),Aa(n(h),ka));return}K.type==="updateSettings"?m():K.type==="exit"&&f(c,{showFavicon:!0,recordMode:"note",generateTagsEnabled:!1},!0)},y=()=>n(c).showFavicon,F=()=>n(c).recordMode,w=async k=>{n(c).showFavicon=k,await Hn(n(h),ka,"default",{...n(c)}),g.postMessage({type:"updateSettings"})},S=async k=>{n(c).recordMode=k,await Hn(n(h),ka,"default",{...n(c)}),g.postMessage({type:"updateSettings"})};Ce(()=>(x(),g.addEventListener(_),()=>{g.removeEventListener(_)})),gd({getFaviconEnabled:y,getRecordMode:F,setRecordMode:S,setFaviconShown:w,isInitedSettings:()=>n(l),getViewMode:()=>i,setGenerateTagsEnabled:async k=>{n(c).generateTagsEnabled=k,await Hn(n(h),ka,"default",{...n(c)}),g.postMessage({type:"updateSettings"})},getGenerateTagsEnabled:()=>n(c).generateTagsEnabled});var A=ce(),E=D(A);Ae(E,()=>e.children??je),p(t,A),ue()}const Fi={};function bd(t){lt(Fi,t)}function Yo(){const t=it(Fi);if(!t)throw new Error("No AccountContext found");return t}function Sd(t,e){de(e,!0);let a=M(void 0);const{getDB:r}=Go(),{createBroadcastChannel:o,tabId:s}=to(),i=N(r),l=o(),c=async()=>{const w=await Br(n(i),nr,"default");f(a,w,!0)},u=w=>Hn(n(i),nr,"default",w),d=async w=>{const S=await Br(n(i),nr,"default");S!==void 0&&f(a,S,!0),w(S)},v=async w=>{const S=JSON.parse(w.data);if(S.tabId&&S.tabId===s)return;const A=S;A.type==="initLocalAccount"?f(a,null):A.type==="initCloudAccount"?c():A.type==="disconnectCloudAccount"?f(a,null):A.type==="exit"?f(a,void 0):A.type==="updateAccount"&&c()};Ce(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),bd({init:d,getAccount:()=>n(a),initLocalAccount:async()=>{f(a,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async w=>{const S={encryptedClientKey:w.encryptedClientKey||"",subscriptionExpires:w.subscriptionExpires||-1,lastSync:-1};await u(S),f(a,S,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{f(a,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async w=>{if(!n(a))throw new Error("No account to update subscription for");const S={...n(a),subscriptionExpires:w};await u(S),l.postMessage({type:"updateAccount"})},exitApp:async()=>{f(a,void 0),l.postMessage({type:"exit"}),await Aa(n(i),nr)}});var y=ce(),F=D(y);Ae(F,()=>e.children??je),p(t,y),ue()}const zi={};function Cd(t){lt(zi,t)}function kt(){const t=it(zi);if(!t)throw new Error("No NotesContext found");return t}const Ln=()=>crypto.randomUUID(),xd=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},ji=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function Qg(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const ht=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function Td(t,e){de(e,!0);const{getDB:a}=Go(),{createBroadcastChannel:r,tabId:o}=to(),s=N(a),i=r(),l=720*60*60*1e3;let c=M(!1),u=M(()=>new Map),d=M(()=>[]),v=M(()=>new Map);const g=()=>n(c),h=()=>n(d)().some(C=>C.data&&!C.data.deletedAt&&!C.data.archivedAt),m=()=>n(d)().some(C=>C.data&&C.data.deletedAt),x=()=>n(d)().some(C=>C.data&&C.data.archivedAt&&!C.data.deletedAt),_=C=>{const j=n(d)(),P=n(v)(),B=P.get(C.id);B?B.data=C.data:(j.push(C),P.set(C.id,C)),f(d,()=>j),f(v,()=>P)},y=C=>{const j=n(d)(),P=n(v)(),B=P.get(C);P.has(C)&&P.delete(C),B&&(B.data=void 0),f(d,()=>j),f(v,()=>P)},F=C=>{const j=n(d)(),P=n(v)();for(const B of C){const Q=P.get(B);P.has(B)&&P.delete(B),Q&&(Q.data=void 0)}f(d,()=>j),f(v,()=>P)},w=()=>{f(d,()=>[]),f(u,()=>new Map),f(v,()=>new Map)},S=()=>n(d),A=C=>{const j=n(u)();for(const P of C)j.get(P)||j.set(P,{name:P});f(u,()=>j)},E=async()=>{const[C,j]=await Promise.all([ws(n(s),We),ws(n(s),It).then(X=>X.reduce((ne,le)=>ne.set(le.id,le.data),new Map))]),P=[],B=[],Q=new Map;for(const X of C)X.data.deletedAt&&Date.now()-X.data.deletedAt>l?P.push(X.id):(B.push(X),Q.set(X.id,X));const G=xd(B),ve=[],ke=new Map(j);[...G.values()].forEach(X=>{ke.set(X,{name:X,pinned:j.get(X)?.pinned||!1}),j.has(X)||ve.push(X)});const ie=[];[...j.keys()].forEach(X=>{G.has(X)||ie.push(X)}),await Qa(n(s),We,P),await Qa(n(s),It,ie),await ut(n(s),It,ve.map(X=>({id:X,data:{pinned:ke.get(X)?.pinned||!1}}))),f(d,()=>B),f(v,()=>Q),f(u,()=>ke),f(c,!0)},k=async C=>{const j=n(u)(),P=C.data.tags.filter(B=>!j.has(B))||[];return await Hn(n(s),We,C.id,{...C.data}),P.length>0&&(await ut(n(s),It,P.map(B=>({id:B,data:{pinned:!1}}))||[]),A(P)),_(C),i.postMessage({type:"putNote",data:{id:C.id}}),C.id},z=async({link:C,text:j,tags:P})=>{const B={id:Ln(),data:{link:ht(C),text:j,tags:ht(P),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await k(B),B.id},K=async(C,{link:j,text:P,tags:B})=>{const Q=q(C);if(!Q||!Q.data)return;const G={id:C,data:{...Q.data,link:ht(j),text:P,tags:ht(B),updatedAt:Date.now()}};await k(G)},V=async(C,{link:j,text:P,tags:B})=>{const Q=q(C);if(!Q||!Q.data)return;const G=Ln(),ve={id:C,data:{...Q.data,link:j,text:P,tags:B,updatedAt:Date.now(),history:[...(Q.data.history||[]).slice(-49),{id:G,link:ht(Q.data.link),text:Q.data.text,tags:ht(Q.data.tags),updatedAt:Q.data.updatedAt}]}};return await k(ve),G},W=async(C,j)=>{const P=q(C);if(!P||!P.data)return;const B=P.data.history?.find?.(G=>G.id===j);if(!B)return;const Q={id:C,data:{...P.data,link:ht(B.link),text:B.text,tags:ht(B.tags),updatedAt:B.updatedAt,history:P.data.history?.filter?.(G=>G.id!==j)||[]}};await k(Q)},oe=async C=>{const P=n(v)().get(C);!P||!P.data||(y(C),await uo(n(s),We,C),i.postMessage({type:"deleteNote",data:{id:C}}))},J=async()=>{await Aa(n(s),We),await Aa(n(s),It),w(),i.postMessage({type:"clearNotes"})},q=C=>n(v)().get(C),fe=async(C,j)=>{const B=n(v)().get(C);if(!B||!B.data)return;const Q={id:C,data:{...B.data,pinnedAt:j?Date.now():void 0}};k(Q)},R=async C=>{const P=n(v)().get(C);if(!P||!P.data)return;const B={id:C,data:{...P.data,deletedAt:Date.now()}};await k(B)},ee=async C=>{const P=n(v)().get(C);if(!P||!P.data)return;const B={id:C,data:{...P.data,archivedAt:Date.now()}};await k(B)},re=async({noteIds:C})=>{const j=n(v)(),P=n(d)();for(const Q of C){const G=j.get(Q);G?.data&&(G.data.deletedAt=Date.now())}return await ut(n(s),We,C.map(Q=>{const G=j.get(Q);return{id:Q,data:G?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>j),f(d,()=>P),{cancel:async()=>{for(const Q of C){const G=j.get(Q);G?.data&&(G.data.deletedAt=0)}await ut(n(s),We,C.map(Q=>{const G=j.get(Q);return{id:Q,data:G?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>j),f(d,()=>P)}}},te=async({noteIds:C})=>{const j=n(v)(),P=n(d)();for(const Q of C){const G=j.get(Q);G?.data&&(G.data.archivedAt=Date.now())}return await ut(n(s),We,C.map(Q=>{const G=j.get(Q);return{id:Q,data:G?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>j),f(d,()=>P),{cancel:async()=>{for(const Q of C){const G=j.get(Q);G?.data&&(G.data.archivedAt=0)}await ut(n(s),We,C.map(Q=>{const G=j.get(Q);return{id:Q,data:G?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>j),f(d,()=>P)}}},H=async({noteIds:C})=>{const j=n(v)(),P=n(d)(),B=[];for(const G of C){const ve=j.get(G);ve?.data&&(B.push({id:G,data:ht(ve.data)}),ve.data.archivedAt=0)}return await ut(n(s),We,C.map(G=>{const ve=j.get(G);return{id:G,data:ve?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>j),f(d,()=>P),{cancel:async()=>{for(const G of B){const ve=j.get(G.id);ve?.data&&(ve.data=G.data)}await ut(n(s),We,C.map(G=>{const ve=j.get(G);return{id:G,data:ve?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>j),f(d,()=>P)}}},se=async({noteIds:C})=>{const j=n(v)(),P=n(d)(),B=[];for(const G of C){const ve=j.get(G);ve?.data&&(B.push({id:G,data:ht(ve.data)}),ve.data.deletedAt=0)}return await ut(n(s),We,C.map(G=>{const ve=j.get(G);return{id:G,data:ve?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>j),f(d,()=>P),{cancel:async()=>{for(const G of B){const ve=j.get(G.id);ve?.data&&(ve.data=G.data)}await ut(n(s),We,C.map(G=>{const ve=j.get(G);return{id:G,data:ve?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>j),f(d,()=>P)}}},we=async C=>{const P=n(v)().get(C);if(!P||!P.data)return;const B={id:C,data:{...P.data,deletedAt:0}};await k(B)},he=async C=>{const P=n(v)().get(C);if(!P||!P.data)return;const B={id:C,data:{...P.data,archivedAt:0}};await k(B)},me=async(C,j)=>{const P=n(u)();P.set(C,{name:C,pinned:j}),await Hn(n(s),It,C,{pinned:j}),i.postMessage({type:"pinTag",data:{tag:C,pinned:j}}),f(u,()=>P)},L=async({noteIds:C})=>{const j=n(u)(),P=n(d)();F(C),await Qa(n(s),We,C),i.postMessage({type:"reloadNotes"}),f(d,()=>P),f(u,()=>j)},Z=async C=>{const j=n(v)(),P={};C.forEach(B=>{const Q=j.get(B.id),G=[];if(Q&&Q.data){let ve=0,ke=0;for(;ve<B.data.history.length&&ke<Q.data.history.length;){const ie=B.data.history[ve],X=Q.data.history[ke];ie.id===X.id?(ie.updatedAt>X.updatedAt?G.push(ie):G.push(X),ve+=1,ke+=1):ie.updatedAt<X.updatedAt?(G.push(ie),ve+=1):ie.updatedAt>X.updatedAt?(G.push(X),ke+=1):(G.push(X),ve+=1,ke+=1)}Q.data.updatedAt>B.data.updatedAt?P[Q.id]={id:Q.id,data:{...Q.data,history:G}}:P[B.id]={id:B.id,data:{...B.data,history:G}}}else P[B.id]=B}),await ut(n(s),We,Object.values(P)),await E(),i.postMessage({type:"reloadNotes"})},ye=async()=>{const C=[];n(d)().forEach(P=>{P&&P.data&&P.data.deletedAt&&C.push(P.id)}),await Qa(n(s),We,C),await E(),i.postMessage({type:"emptyBin"})},Te=async(C,j)=>{const P=n(v)(),B=n(d)(),Q=[],G=[];for(const ke of j){const ie=P.get(ke);ie?.data&&(Q.push({id:ke,data:ht(ie.data)}),G.push({id:ke,data:{...ie.data,tags:ie.data.tags.filter(X=>X!==C),history:[...ie.data.history||[],{id:Ln(),link:ht(ie.data.link),text:ie.data.text,tags:ie.data.tags,updatedAt:Date.now()}]}}))}for(const ke of G){const ie=P.get(ke.id);ie?.data&&(ie.data=ke.data)}return await ut(n(s),We,G.map(ke=>({id:ke.id,data:ke.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>B),{cancel:async()=>{for(const ke of Q){const ie=P.get(ke.id);ie?.data&&(ie.data=ke.data)}await ut(n(s),We,Q.map(ke=>({id:ke.id,data:ke.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>B)}}},Ee=async(C,j,P)=>{const B=n(v)(),Q=n(d)(),G=n(u)(),ve=[],ke=[];for(const ne of P){const le=B.get(ne);le?.data&&(ve.push({id:ne,data:ht(le.data)}),ke.push({id:ne,data:{...le.data,tags:le.data.tags.map(Pe=>Pe!==C?Pe:j),history:[...le.data.history||[],{id:Ln(),link:ht(le.data.link),text:le.data.text,tags:le.data.tags,updatedAt:Date.now()}]}}))}for(const ne of ke){const le=B.get(ne.id);le?.data&&(le.data=ne.data)}const ie=G.has(j);return await Promise.all([(async()=>{if(!ie){const ne=G.get(C)?.pinned||!1;G.set(j,{name:j,pinned:ne}),await Hn(n(s),It,j,{pinned:ne})}})(),ut(n(s),We,ke.map(ne=>({id:ne.id,data:ne.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>Q),f(u,()=>G),{cancel:async()=>{for(const ne of ve){const le=B.get(ne.id);le?.data&&(le.data=ne.data)}await Promise.all([(async()=>{ie||(G.delete(j),await uo(n(s),It,j))})(),ut(n(s),We,ve.map(ne=>({id:ne.id,data:ne.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>Q),f(u,()=>G)}}},ae=async(C,j)=>{const P=n(v)(),B=n(d)(),Q=n(u)(),G=[],ve=[];for(const X of j){const ne=P.get(X);ne?.data&&(G.push({id:X,data:ht(ne.data)}),ve.push({id:X,data:{...ne.data,tags:[...new Set([...ne.data.tags,C])],history:[...ne.data.history||[],{id:Ln(),link:ht(ne.data.link),text:ne.data.text,tags:ne.data.tags,updatedAt:Date.now()}]}}))}for(const X of ve){const ne=P.get(X.id);ne?.data&&(ne.data=X.data)}const ke=Q.has(C);return await Promise.all([(async()=>{ke||(Q.set(C,{name:C,pinned:!1}),await Hn(n(s),It,C,{pinned:!1}))})(),ut(n(s),We,ve.map(X=>({id:X.id,data:X.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>B),f(u,()=>Q),{cancel:async()=>{for(const X of G){const ne=P.get(X.id);ne?.data&&(ne.data=X.data)}await Promise.all([(async()=>{ke||(Q.delete(C),await uo(n(s),It,C))})(),ut(n(s),We,G.map(X=>({id:X.id,data:X.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>B),f(u,()=>Q)}}},$=async(C,j,P)=>{const B=n(v)(),Q=n(d)(),G=n(u)(),ve=[],ke=[];for(const le of P){const Pe=B.get(le);Pe?.data&&(ve.push({id:le,data:ht(Pe.data)}),ke.push({id:le,data:{...Pe.data,tags:[...new Set([...Pe.data.tags.filter(Be=>!C.includes(Be)),...j])],history:[...Pe.data.history||[],{id:Ln(),link:ht(Pe.data.link),text:Pe.data.text,tags:Pe.data.tags,updatedAt:Date.now()}]}}))}for(const le of ke){const Pe=B.get(le.id);Pe?.data&&(Pe.data=le.data)}const ie=n(u)(),X=j.filter(le=>!ie.has(le));return await Promise.all([(async()=>{if(X.length>0)return ut(n(s),It,X.map(le=>({id:le,data:{pinned:!1}})))})(),ut(n(s),We,ke.map(le=>({id:le.id,data:le.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>Q),f(u,()=>G),{cancel:async()=>{for(const le of ve){const Pe=B.get(le.id);Pe?.data&&(Pe.data=le.data)}await Promise.all([(async()=>{if(X.length>0){for(const le of X)G.delete(le);return Qa(n(s),It,X)}})(),ut(n(s),We,ve.map(le=>({id:le.id,data:le.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>Q),f(u,()=>G)}}},Y=async C=>{const j=JSON.parse(C.data),P=j;if(j.tabId&&j.tabId===o){P.type==="exit"&&(w(),await Aa(n(s),We),await Aa(n(s),It));return}if(P.type==="putNote"){const Q=P.data.id;if(!Q)return;const G=await Br(n(s),We,Q);if(!G)return;_({id:Q,data:G})}else if(P.type==="deleteNote"){const B=P.data.id;if(!B)return;y(B)}else if(P.type==="pinTag"){const B=P.data.tag,Q=P.data.pinned,G=n(u)();G.set(B,{name:B,pinned:Q}),f(u,()=>G)}else P.type==="clearNotes"?w():P.type==="reloadNotes"||P.type==="emptyBin"?E():P.type==="exit"&&w()};Ce(()=>(E(),i.addEventListener(Y),()=>{i.removeEventListener(Y)})),Cd({isInitedNotes:g,createNote:z,updateNote:K,deleteNote:oe,saveNote:V,revertNote:W,pinNote:fe,moveNoteToBin:R,moveNoteToArchive:ee,getGetNotes:S,importNotes:Z,clearNotes:J,getNoteById:q,getGetMapTags:()=>n(u),pinTag:me,restoreNoteFromBin:we,moveNoteFromArchive:he,checkNotes:h,checkNotesInBin:m,checkNotesInArchive:x,emptyBin:ye,moveNotesToBin:re,moveNotesToArchive:te,moveNotesFromArchive:H,deleteNotes:L,restoreNotesFromBin:se,deleteTag:Te,renameTag:Ee,addTag:ae,changeTags:$});var be=ce(),ge=D(be);Ae(ge,()=>e.children??je),p(t,be),ue()}const Bi={};function Ed(t){lt(Bi,t)}function wa(){const t=it(Bi);if(!t)throw new Error("No FeedContext found");return t}const Hi={};var Ke=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(Ke||{});function kd(t){lt(Hi,t)}function no(){const t=it(Hi);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function Pd(t,e){de(e,!0);const a=Ko(),{getSelectedTags:r}=An(),{getSelectedMetaTags:o}=no(),{getGetNotes:s}=kt();let i=N(r),l=N(o),c=M(0),u=[],d=M(0),v=N(()=>n(l).has(Ke.ARCHIVED)),g=N(()=>n(l).has(Ke.BIN));Oe(()=>{const x=s()()||[],_=[],y=Array.from(n(i).values());for(let F=x.length-1;F>=0;F--){if(!x[F]||!x[F].data)continue;const w=x[F];if(!n(v)&&!n(g)&&(w?.data.deletedAt||w?.data.archivedAt)||n(v)&&(w?.data.deletedAt||!w?.data.archivedAt)||n(g)&&!w?.data.deletedAt)continue;const S=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(w.data.link?.title.toLowerCase().includes(S)||w.data.link?.url.toLowerCase().includes(S)||w.data.text.toLowerCase().includes(S)||w.data.tags.map(A=>A.toLowerCase()).join(" ").includes(S)))){if(n(l).has(Ke.INBOX)){if(w.data.tags.length>0)continue}else if(n(i).size&&y.some(A=>!w.data.tags.includes(A)))continue;_.push(w)}}f(c,_.length,!0),u=_,f(d,Date.now(),!0)}),Ed({getFiltredNotesLength:()=>n(c),getFiltredNotes:()=>(n(d),u),getUpdatedFiltredNotesTimestamp:()=>n(d)});var h=ce(),m=D(h);Ae(m,()=>e.children??je),p(t,h),ue()}function Nd(t,e){de(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=jt(),s=N(a),i="selectedMetaTags";let l=N(()=>n(s).get(i)||""),c=N(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));kd({getSelectedMetaTags:()=>n(c),addMetaTag:_=>{n(c).has(_)||r(i,[...n(c),_].map(y=>encodeURIComponent(y)).join(","))},removeMetaTag:_=>{n(c).has(_)&&n(c).size===1?o(i):n(c).has(_)&&r(i,[...n(c)].filter(y=>y!==_).map(y=>encodeURIComponent(y)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:_=>{_.size===0?o(i):r(i,[..._].map(y=>encodeURIComponent(y)).join(","))}});var m=ce(),x=D(m);Ae(x,()=>e.children??je),p(t,m),ue()}const Ui={},Yn=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function Ad(t){lt(Ui,t)}function Mn(){const t=it(Ui);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Md(t,e){de(e,!0);let a=ct(Yn());Ad(a);var r=ce(),o=D(r);Ae(o,()=>e.children??je),p(t,r),ue()}const qi={};function Dd(t){lt(qi,t)}function Xo(){const t=it(qi);if(!t)throw new Error("No ScrollingContext found");return t}function Id(t,e){de(e,!0);let a=M(!1);const r=()=>n(a),o=ji(()=>{f(a,!1)},100);Dd({isScrolling:r,enable:()=>{f(a,!0),o()}});var i=ce(),l=D(i);Ae(l,()=>e.children??je),p(t,i),ue()}const Vi={};function Rd(t){lt(Vi,t)}function Sr(){const t=it(Vi);if(!t)throw new Error("No MobileSizeContext found");return t}function Ld(t,e){de(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=M(ct(a())),o=Mn();const s=ji(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{f(r,a(),!0)})};Rd({checkMobileSize:()=>n(r)}),Ce(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=ce(),u=D(c);Ae(u,()=>e.children??je),p(t,c),ue()}const Wi={};function Od(t){lt(Wi,t)}function en(){const t=it(Wi);if(!t)throw new Error("No DialogContext found");return t}function Fd(t,e){de(e,!0);let a=M(0),r=M(!1),o=M(!0),s=M(!1),i=M(!1);Od({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{f(a,n(a)+1)},dialogDec:()=>{f(a,n(a)-1)},blockDialog:A=>{f(r,A,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:A=>{f(o,A,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:A=>{f(s,A,!0)},setLeftEnd:A=>{f(i,A,!0)},getCountDialog:()=>n(a)});var w=ce(),S=D(w);Ae(S,()=>e.children??je),p(t,w),ue()}const Ki={};function zd(t){lt(Ki,t)}function ao(){const t=it(Ki);if(!t)throw new Error("No ScrollContainerContext found");return t}function jd(t,e){de(e,!0);let a=M(null);zd({setScrollContainer:l=>{f(a,l,!0)},getScrollContainer:()=>n(a)});var s=ce(),i=D(s);Ae(i,()=>e.children??je),p(t,s),ue()}const Gi={};function Bd(t){lt(Gi,t)}function Jo(){const t=it(Gi);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Hd(t,e){de(e,!0);let a=M(200);Bd({setDialogPageHeight:l=>{f(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=ce(),i=D(s);Ae(i,()=>e.children??je),p(t,s),ue()}const Ud=[nr,ka,We,It,_d];function qd(){return new Promise((t,e)=>{const a=indexedDB.open(pd,md);mt(a,"upgradeneeded",()=>{const r=a.result;for(const o of Ud)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),mt(a,Qn,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),mt(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),mt(a,$n,()=>{e()})})}function Vd(t,e){de(e,!0);let a=M(null);Ce(()=>{qd().then(l=>{f(a,l,!0)}).catch(l=>{})}),vd({getDB:()=>n(a)});var o=ce(),s=D(o);{var i=l=>{var c=ce(),u=D(c);Ae(u,()=>e.children??je),p(l,c)};U(s,l=>{n(a)&&l(i)})}p(t,o),ue()}function Wd(t,e){de(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=jt(),s=N(a);let i=N(()=>n(s).get(Kt)||""),l=N(()=>n(i).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const c=()=>n(l),u=w=>{if(w.length===0){o(Kt);return}r(Kt,w.map(S=>encodeURIComponent(S)).join(","))},d=w=>{r(Kt,[...n(l),w].map(S=>encodeURIComponent(S)).join(","))};wd({setDialogPages:u,getDialogPages:c,pushDialogPage:d,popDialogPage:()=>{const w=n(l)[n(l).length-1];return n(l).length<=1?(o(Kt),w):(r(Kt,n(l).slice(0,-1).map(S=>encodeURIComponent(S)).join(",")),w)},replaceDialogPage:w=>{r(Kt,[...n(l).slice(0,-1),w].map(S=>encodeURIComponent(S)).join(","))},hasDialogPage:w=>n(l).find(S=>{const[A]=S.split("?");return A===w})!==void 0,clearDialogPages:()=>{o(Kt)},createDialogPageHref:w=>{const S=new URLSearchParams(n(s).toString());return S.set(Kt,[...c(),w].map(A=>encodeURIComponent(A)).join(",")),`${window.location.pathname}?${S.toString()}`},createHandleClickDialogPage:w=>S=>{S.preventDefault(),d(w)}});var y=ce(),F=D(y);Ae(F,()=>e.children??je),p(t,y),ue()}function Kd(t,e){de(e,!0);let a=M(ct(new URLSearchParams(window.location.search)));const r=v=>{const g=window.location.pathname;f(a,v,!0),window.history.replaceState(null,"",`${g}${v.size>0?`?${v.toString()}`:""}`)};Qc({getSearchParams:()=>n(a),replaceSearchParams:v=>{const g=new URLSearchParams(v);r(g)},setSearchParam:(v,g)=>{const h=new URLSearchParams(n(a));h.set(v,g),r(h)},deleteSearchParam:v=>{const g=new URLSearchParams(n(a));g.delete(v),r(g)},getHref:v=>{const g=new URLSearchParams(v);return`${window.location.pathname}${g.toString().length>0?`?${g.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var u=ce(),d=D(u);Ae(d,()=>e.children??je),p(t,u),ue()}const Yi={};function Gd(t){lt(Yi,t)}function Yd(){const t=it(Yi);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Xd(t,e){de(e,!0);let a=ct({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";Ce(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l);let c=null;const u=d=>{o()&&(c&&clearTimeout(c),c=setTimeout(()=>{o()&&d.target!==document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur?.()},120))};return document.addEventListener("touchstart",u,{passive:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l),document.removeEventListener("touchstart",u)}}),Gd({getIsKeyboardVisible:r});var s=ce(),i=D(s);Ae(i,()=>e.children??je),p(t,s),ue()}function Jd(t,e){de(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};hd({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=ce(),s=D(o);Ae(s,()=>e.children??je),p(t,o),ue()}function Zd(t,e){Vd(t,{children:(a,r)=>{Jd(a,{children:(o,s)=>{Md(o,{children:(i,l)=>{Id(i,{children:(c,u)=>{Ld(c,{children:(d,v)=>{Fd(d,{children:(g,h)=>{jd(g,{children:(m,x)=>{Hd(m,{children:(_,y)=>{Xd(_,{children:(F,w)=>{Kd(F,{children:(S,A)=>{Wd(S,{children:(E,k)=>{var z=ce(),K=D(z);Ae(K,()=>e.children??je),p(E,z)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Qd(t,e){Zd(t,{children:(a,r)=>{nd(a,{children:(o,s)=>{$c(o,{children:(i,l)=>{rd(i,{children:(c,u)=>{sd(c,{children:(d,v)=>{Nd(d,{children:(g,h)=>{ld(g,{children:(m,x)=>{fd(m,{children:(_,y)=>{yd(_,{children:(F,w)=>{Sd(F,{children:(S,A)=>{Td(S,{children:(E,k)=>{Pd(E,{children:(z,K)=>{var V=ce(),W=D(V);Ae(W,()=>e.children??je),p(z,V)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const vt=t=>{const a=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(i=>i instanceof HTMLElement?i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement?!i.disabled&&i.offsetParent!==null:i.offsetParent!==null:!1),r=a.indexOf(t);if(r===-1)return{next:null,prev:null};const o=a[r+1],s=a[r-1];return{next:o,prev:s}};let Ct=M(""),In=M(null),Ma=M(null),_n=M(null),Rn=M(ct([])),Ar=M(null),On=null;function gt(t,e){f(Ct,""),On=null,f(Ma,null),f(_n,null),setTimeout(()=>{f(Ct,t,!0),e?.onFinish&&f(Ma,e.onFinish,!0),e?.cancel&&(f(_n,e.cancel.onCancel,!0),On=e.cancel.nextFocusRef)},16)}var $d=T('<button type="button" class="c p-18jfd2t">undo</button>'),eu=T('<div class="a p-18jfd2t"><div class="b p-18jfd2t"><span> </span> <!></div></div>'),tu=T("<div><!></div>");function Zo(t,e){de(e,!0);const a=Ln();Ce(()=>(f(Rn,[...n(Rn),a],!0),()=>{const c=n(Rn).indexOf(a);c!==-1&&f(Rn,n(Rn).filter((u,d)=>d!==c),!0)}));const r=c=>{if(c.key==="Tab"&&c.shiftKey){if(On&&n(Ct)){c.preventDefault();const{prev:u}=vt(On);u?.focus(),f(Ct,"")}}else if(c.key==="Tab"&&!c.shiftKey)On&&n(Ct)&&(c.preventDefault(),f(Ct,""),On?.focus());else if(c.key==="Escape"&&n(Ct)){if(c.preventDefault(),On){const{prev:u}=vt(On);u?.focus()}f(Ct,"")}};Ce(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)})),Oe(()=>{n(Ct);const c=n(_n)?2e3:800;n(Ct)&&(n(In)?.getBoundingClientRect(),n(In)?.style.setProperty("opacity","1"));const u=setTimeout(()=>{n(In)?.style.removeProperty("opacity")},c),d=setTimeout(()=>{f(Ct,""),n(Ma)&&n(Ma)(),f(Ma,null),f(_n,null),n(In)?.style.removeProperty("opacity")},c+400);return()=>{clearTimeout(u),clearTimeout(d)}});const o=c=>{c.preventDefault(),n(_n)&&(f(Ma,null),n(_n)(),f(_n,null)),f(Ct,""),n(In)?.style.removeProperty("opacity")};Oe(()=>{n(Ct)&&n(_n)&&n(Ar)&&setTimeout(()=>{n(Ar)?.focus()},151)}),Oe(()=>{n(Rn),zt(()=>{f(Ct,""),n(In)?.style.removeProperty("opacity")})});var s=tu(),i=b(s);{var l=c=>{var u=eu(),d=b(u),v=b(d),g=b(v),h=I(v,2);{var m=x=>{var _=$d();_.__click=o,Ge(_,y=>f(Ar,y),()=>n(Ar)),p(x,_)};U(h,x=>{n(_n)&&x(m)})}Ge(d,x=>f(In,x),()=>n(In)),xe(()=>ot(g,n(Ct))),p(c,u)};U(i,c=>{n(Ct)&&n(Rn)[n(Rn).length-1]===a&&c(l)})}p(t,s),ue()}st(["click"]);var nu=T('<span class="a p-lxk90o"><!></span>');function dt(t,e){var a=nu(),r=b(a);Ae(r,()=>e.children),p(t,a)}var au=Pc('<svg class="p-1yv1ibq"><use></use></svg>');function Se(t,e){let a=Ne(e,"name",8,"");var r=au(),o=b(r);xe(()=>at(o,"href",`#icon-${a()??""}`)),p(t,r)}var ru=T('<button class="a p-18m1f7k"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Xi(t,e){de(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=br(),{getDialogPages:s}=$t(),{checkExistedDialog:i}=en();let l=N(()=>s().length>0||i());const c=g=>{if(g.preventDefault(),n(l))return;const h=r();h==="closed"?a():h==="opened"&&o()};var u=ru();u.__click=c;var d=b(u);pe(d,()=>({"--size":"32px"})),Se(d.lastChild,{name:"sidebarMenu"});var v=I(d,2);dt(v,{children:(g,h)=>{var m=De("Menu");p(g,m)}}),p(t,u),ue()}st(["click"]);var ou=T('<button class="b p-9fi5nt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),su=T('<div class="a p-9fi5nt"><input class="p-9fi5nt"/> <!></div>');function ko(t,e){de(e,!0);let a=Ne(e,"value",15,""),r=Ne(e,"ref",15,null);const o=u=>{u.key==="Escape"&&(a(""),e.onChange?.(""))};Ce(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=su(),i=b(s);i.__input=u=>e.onChange?.(u.target?.value||""),Ge(i,u=>r(u),()=>r());var l=I(i,2);{var c=u=>{var d=ou();d.__click=()=>{a(""),e.onChange?.("")};var v=b(d);pe(v,()=>({"--size":"20px"})),Se(v.lastChild,{name:"close"});var g=I(v,2);dt(g,{children:(h,m)=>{var x=De("Clear");p(h,x)}}),p(u,d)};U(l,u=>{a()&&u(c)})}xe(()=>at(i,"placeholder",e.placeholder)),rn("focus",i,function(...u){e.onFocus?.apply(this,u)}),Si(i,a),p(t,s),ue()}st(["input","click"]);function Qo(t,e){de(e,!0),Ce(()=>{const a=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("click",a,{capture:!0}),()=>{document.removeEventListener("click",a,{capture:!0})}}),ue()}function iu(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const Zn=iu(),lu=()=>{const t=navigator.userAgent;return/android/i.test(t)},ga=lu(),$g=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},eh=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},ur=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let Ea=M(ct([]));var cu=T("<dialog><div><!></div></dialog> <!>",1);function Cr(t,e){de(e,!0);const a=Ln(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;Ce(()=>(f(Ea,[...n(Ea),a],!0),()=>{const w=n(Ea).indexOf(a);w!==-1&&f(Ea,n(Ea).filter((S,A)=>A!==w),!0)}));let o=Ne(e,"onClosed",3,()=>{}),s=Ne(e,"blocked",3,!1),i=M(null),l=M(null),c=M(!1),{dialogInc:u,dialogDec:d}=en();const v=()=>{const w=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(w),o()()},{once:!0}),f(c,!1)};Oe(()=>{e.startClose&&v()}),Ce(()=>{n(i)?.showModal(),n(i)?.getClientRects(),f(c,!0);const w=S=>{S?.preventDefault(),s()||v()};return n(i)?.addEventListener("cancel",w),n(i)?.addEventListener("close",w),()=>{n(i)?.removeEventListener("cancel",w),n(i)?.removeEventListener("close",w)}}),Ce(()=>(u(),()=>{d()})),Ce(()=>{const w=S=>{S.key==="Escape"&&s()&&S.preventDefault()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}});function g(){setTimeout(()=>{if(Zn||!n(i)||!n(l))return;const w=window.visualViewport;if(w)if(w.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}Ce(()=>(g(),window.visualViewport?.addEventListener("resize",g),window.visualViewport?.addEventListener("scroll",g),document.addEventListener("focusin",g),document.addEventListener("focusout",g),()=>{window.visualViewport?.removeEventListener("resize",g),window.visualViewport?.removeEventListener("scroll",g),document.addEventListener("focusin",g),document.addEventListener("focusout",g)}));var h=cu(),m=D(h),x=b(m),_=b(x);Ae(_,()=>e.children),Ge(x,w=>f(l,w),()=>n(l)),Ge(m,w=>f(i,w),()=>n(i));var y=I(m,2);{var F=w=>{Qo(w,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:v})};U(y,w=>{n(i)&&n(l)&&!s()&&w(F)})}xe(()=>{Qe(m,1,rt({a:!0,b:n(c),c:n(Ea).length>1}),"p-1x14yml"),Qe(x,1,rt({d:!0,b:n(c)}),"p-1x14yml")}),p(t,h),ue()}var du=T("<div><!></div>");function uu(t,e){de(e,!0);let a=M(!1),r=M(null);const o=()=>{const d=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),f(a,!1)},s=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},i=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},l=d=>{d.key==="Escape"&&o()};Ce(()=>{n(r)?.getClientRects(),f(a,!0);const d=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),Oe(()=>{e.startClose&&o()});var c=du(),u=b(c);Ae(u,()=>e.children),Ge(c,d=>f(r,d),()=>n(r)),xe(()=>Qe(c,1,rt({a:!0,b:n(a)}),"p-1unpq18")),p(t,c),ue()}var fu=T("<ul><!></ul>"),vu=T("<ul><!></ul>");function xr(t,e){de(e,!0);let a=Ne(e,"ref",15),r=Zn||ga;var o=ce(),s=D(o);{var i=c=>{Cr(c,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(u,d)=>{var v=fu(),g=b(v);Ae(g,()=>e.children),Ge(v,h=>a(h),()=>a()),xe(()=>Qe(v,1,rt({a:!0,b:r}),"p-1sp2xya")),p(u,v)},$$slots:{default:!0}})},l=c=>{uu(c,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(u,d)=>{var v=vu(),g=b(v);Ae(g,()=>e.children),Ge(v,h=>a(h),()=>a()),xe(()=>Qe(v,1,rt({a:!0,b:r}),"p-1sp2xya")),p(u,v)},$$slots:{default:!0}})};U(s,c=>{r?c(i):c(l,!1)})}p(t,o),ue()}var gu=T("<button><!></button>"),hu=T("<a><!></a>");function nt(t,e){let a=Ne(e,"dangerous",3,!1),r=Ne(e,"type",3,"button"),o=Ne(e,"href",3,"");var s=ce(),i=D(s);{var l=u=>{var d=gu();d.__click=function(...g){e.onClick?.apply(this,g)},d.__keydown=function(...g){e.onKeydown?.apply(this,g)};var v=b(d);Ae(v,()=>e.children??je),xe(()=>Qe(d,1,rt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")),p(u,d)},c=u=>{var d=hu();d.__click=function(...g){e.onClick?.apply(this,g)},d.__keydown=function(...g){e.onKeydown?.apply(this,g)};var v=b(d);Ae(v,()=>e.children??je),xe(()=>{at(d,"href",o()),Qe(d,1,rt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")}),p(u,d)};U(i,u=>{r()==="button"?u(l):u(c,!1)})}p(t,s)}st(["click","keydown"]);var pu=T('<li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li>',1),mu=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),_u=T('<div class="a p-cjxu92"><button><!> <!></button> <!></div>');function wu(t,e){de(e,!0);let a=M(!1),r=M(!1);const{getFeedOrder:o,setFeedOrder:s}=ki();let i=Zn||ga,l=N(o);const c=()=>{n(a)||f(a,!0)},u=y=>{f(r,!0),s(y)},d=()=>{f(a,!1),f(r,!1)};Ce(()=>{const y=F=>{F.key==="Escape"&&f(r,!0)};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)});var v=_u(),g=b(v);g.__click=c,Qe(g,1,rt({b:!0,c:!0}),"p-cjxu92");var h=b(g);Se(h,{name:"filter"});var m=I(h,2);dt(m,{children:(y,F)=>{var w=De("show feed order menu");p(y,w)}});var x=I(g,2);{var _=y=>{var F=mu(),w=D(F);pe(w,()=>({"--right":"0px","--top":"44px"})),xr(w.lastChild,{get startClose(){return n(r)},onClosed:d,children:(S,A)=>{var E=pu(),k=D(E),z=b(k);{let fe=N(()=>n(l)==="newest");nt(z,{get active(){return n(fe)},get dialogMode(){return i},onClick:()=>u("newest"),children:(R,ee)=>{var re=De("Newest");p(R,re)},$$slots:{default:!0}})}var K=I(k,2),V=b(K);{let fe=N(()=>n(l)==="oldest");nt(V,{get active(){return n(fe)},get dialogMode(){return i},onClick:()=>u("oldest"),children:(R,ee)=>{var re=De("Oldest");p(R,re)},$$slots:{default:!0}})}var W=I(K,2),oe=b(W);{let fe=N(()=>n(l)==="AtoZ");nt(oe,{get active(){return n(fe)},get dialogMode(){return i},onClick:()=>u("AtoZ"),children:(R,ee)=>{var re=De("A to Z");p(R,re)},$$slots:{default:!0}})}var J=I(W,2),q=b(J);{let fe=N(()=>n(l)==="ZtoA");nt(q,{get active(){return n(fe)},get dialogMode(){return i},onClick:()=>u("ZtoA"),children:(R,ee)=>{var re=De("Z to A");p(R,re)},$$slots:{default:!0}})}p(S,E)},$$slots:{default:!0}}),p(y,F)};U(x,y=>{n(a)&&y(_)})}p(t,v),ue()}st(["click"]);var _e=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t.Extension="extension",t))(_e||{});const ys={settings:"Settings",importData:"Import",exportData:"Export",account:"Account",sync:"Sync",accountSetup:"",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success",extension:"Extension"};var yu=T('<div><!> <div class="a p-y3zt6o"></div></div>');function ya(t,e){de(e,!0);let a=M(!1);Ce(()=>{const s=setTimeout(()=>{f(a,!0)},200);return()=>{clearTimeout(s)}});var r=yu(),o=b(r);Ae(o,()=>e.children??je),xe(()=>Qe(r,1,rt({b:!0,c:n(a)}),"p-y3zt6o")),p(t,r),ue()}var bu=T("<a><!></a>"),Su=T("<button><!></button>");function Tt(t,e){let a=Ne(e,"type",3,"standard"),r=Ne(e,"typeButton",3,"button"),o=Ne(e,"element",3,"button"),s=Ne(e,"href",3,""),i=Ne(e,"fullWidth",3,!1),l=Ne(e,"withoutMinWidth",3,!1);var c=ce(),u=D(c);{var d=g=>{var h=bu();h.__click=function(...x){e.onClick?.apply(this,x)};var m=b(h);Ae(m,()=>e.children??je),xe(()=>{at(h,"target",e.target),at(h,"rel",e.rel),at(h,"href",s()),Qe(h,1,rt({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),p(g,h)},v=g=>{var h=Su();h.__click=function(...x){e.onClick?.apply(this,x)};var m=b(h);Ae(m,()=>e.children??je),xe(()=>{at(h,"type",r()),Qe(h,1,rt({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),p(g,h)};U(u,g=>{o()==="a"?g(d):g(v,!1)})}p(t,c)}st(["click"]);let Po=M(!1),Mr=M(!1),No=M(""),Ao=M("Cancel"),Mo=M("Confirm"),Do,Or=M(void 0),Io,Ro=M("dangerous");function Ra(t){f(Po,!0),f(No,t.title,!0),t.buttonCancelTitle&&f(Ao,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&f(Mo,t.buttonConfirmTitle,!0),Do=t.onConfirm,f(Or,t.onCancel,!0),Io=t.onClosed,t.type?f(Ro,t.type,!0):f(Ro,"dangerous")}var Cu=T('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),xu=T('<div class="a p-1jlul5o"><!></div>');function Tu(t,e){de(e,!0);let a=M(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{f(a,!0)},250)};Ce(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(Or)?.(),f(Mr,!0)},l=async()=>{s(),await Do?.(),f(Mr,!0),o=!0},c=()=>{clearTimeout(r),f(a,!1),f(Po,!1),f(Mr,!1),f(No,""),f(Ao,"Cancel"),f(Mo,"Confirm"),f(Or,void 0),Do=void 0,Io&&Io(o),o=!1};var u=ce(),d=D(u);{var v=g=>{Cr(g,{get blocked(){return n(a)},get startClose(){return n(Mr)},onClosed:c,children:(h,m)=>{var x=xu(),_=b(x);{var y=w=>{ya(w,{})},F=w=>{var S=Cu(),A=D(S),E=b(A),k=I(A,2),z=b(k);{var K=W=>{Tt(W,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(oe,J)=>{var q=De();xe(()=>ot(q,n(Ao))),p(oe,q)},$$slots:{default:!0}})};U(z,W=>{n(Or)&&W(K)})}var V=I(z,2);Tt(V,{onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(Ro)},children:(W,oe)=>{var J=De();xe(()=>ot(J,n(Mo))),p(W,J)},$$slots:{default:!0}}),xe(()=>ot(E,n(No))),p(w,S)};U(_,w=>{n(a)?w(y):w(F,!1)})}p(h,x)},$$slots:{default:!0}})};U(d,g=>{n(Po)&&g(v)})}p(t,u),ue()}const fr=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,c=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var Eu=T('<div class="a p-rp2pt7"><a class="b p-rp2pt7"><span class="c p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function ku(t,e){de(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=$t(),{checkExistedDialog:i}=en(),l=()=>{o.length===0&&!i()&&s(_e.NewNote)};Ce(()=>fr({key:"n",action:l})),Wo();var c=Eu(),u=b(c),d=N(()=>r(_e.NewNote));u.__click=function(..._){n(d)?.apply(this,_)};var v=b(u),g=b(v);pe(g,()=>({"--size":"32px","--color":"#b0b0b0"})),Se(g.lastChild,{name:"add"});var h=I(g,2);dt(h,{children:(_,y)=>{var F=De("Add note");p(_,F)}});var m=I(v,2),x=b(m);pe(x,()=>({"--size":"16px","--color":"#b0b0b0"})),Se(x.lastChild,{name:"plus"}),xe(_=>at(u,"href",_),[()=>a(_e.NewNote)]),p(t,c),ue()}st(["click"]);var Pu=T("<button><!></button>");function Pa(t,e){de(e,!0);let a=Ne(e,"type",3,"button"),r=!1,o=M(null);Oe(()=>{e.onRef&&e.onRef(n(o))});const s=d=>{(d.key==="Enter"||d.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=d=>{(d.pointerType==="mouse"&&d.button===0||d.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(d)};var c=Pu();c.__keydown=s,c.__click=i,c.__pointerdown=l,c.__touchstart=function(...d){e.onTouchStart?.apply(this,d)};var u=b(c);Ae(u,()=>e.children??je),Ge(c,d=>f(o,d),()=>n(o)),xe(()=>{at(c,"type",a()),c.disabled=e.disabled,Qe(c,1,rt({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-pgzded")}),p(t,c),ue()}st(["keydown","click","pointerdown","touchstart"]);var Nu=T('<div class="b p-1pt17hy"> </div>'),Au=T('<div class="a p-1pt17hy"><input/> <!></div>');function vr(t,e){de(e,!0);let a=Ne(e,"value",15,""),r=Ne(e,"error",3,""),o=Ne(e,"ref",15,null);var s=Au(),i=b(s);i.__input=function(...d){e.onInput?.apply(this,d)};let l;Ge(i,d=>o(d),()=>o());var c=I(i,2);{var u=d=>{var v=Nu(),g=b(v);xe(()=>ot(g,r())),p(d,v)};U(c,d=>{r()&&d(u)})}xe(()=>{at(i,"placeholder",e.placeholder),l=Qe(i,1,"p-1pt17hy",null,l,{error:!!r()})}),rn("blur",i,function(...d){e.onBlur?.apply(this,d)}),rn("focus",i,function(...d){e.onFocus?.apply(this,d)}),Si(i,a),p(t,s),ue()}st(["input"]);var Mu=T('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Du=T('<form class="a p-y9ylet"><!></form>');function Iu(t,e){de(e,!0);const{renameTag:a}=kt(),{getSelectedTags:r,setSelectedTags:o}=An(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=_a(),{getFiltredNotes:c}=wa();let u=M(!1),d=M(!1),v,g=!1,h=M(null),m=M(ct(e.tag)),x=e.nextFocusRef;Ce(()=>(n(h)&&n(h).focus(),()=>{v&&clearTimeout(v)}));const _=()=>{v=setTimeout(()=>{f(d,!0)},250)},y=()=>{f(u,!0)},F=async()=>{if(n(m).trim()===e.tag){y();return}if(n(m).trim()!=="")try{_();const A=r(),E=[...A].map(W=>W===e.tag?n(m).trim():W),k=new Set(s()),z=c(),K=k.size?[...k]:z.map(W=>W.id),{cancel:V}=await a(e.tag,n(m).trim(),K);l(),o(new Set(E)),gt("Tag renamed",{cancel:{nextFocusRef:x,onCancel:async()=>{await V(),o(A),i(k),setTimeout(()=>{const{prev:W}=vt(x);W?.focus()},16)}}}),g=!0}finally{f(u,!0)}},w=()=>{e.onClosed?.(g)},S=A=>{A.preventDefault(),F()};Cr(t,{get blocked(){return n(d)},get startClose(){return n(u)},onClosed:w,children:(A,E)=>{var k=Du(),z=b(k);{var K=W=>{ya(W,{})},V=W=>{var oe=Mu(),J=D(oe),q=b(J),fe=I(J,2);vr(fe,{placeholder:"Enter new tag name",get ref(){return n(h)},set ref(te){f(h,te,!0)},get value(){return n(m)},set value(te){f(m,te,!0)}});var R=I(fe,2),ee=b(R);Tt(ee,{onClick:y,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(te,H)=>{var se=De("Cancel");p(te,se)},$$slots:{default:!0}});var re=I(ee,2);Tt(re,{onClick:F,fullWidth:!0,withoutMinWidth:!0,children:(te,H)=>{var se=De("OK");p(te,se)},$$slots:{default:!0}}),xe(()=>ot(q,`Rename "${e.tag??""}" for selected notes`)),p(W,oe)};U(z,W=>{n(d)?W(K):W(V,!1)})}rn("submit",k,S),p(A,k)},$$slots:{default:!0}}),ue()}let Un=M(!1),ta=M(!1),Ht=M(""),na=M(0),ar=M(0),rr=M(0),Fr,Hr=()=>({bottom:0,right:0,height:0}),Vt=M(null),Lo=M(null);function Ru(t){if(n(Un)){f(ta,!0),n(Ht)!==t.tag&&(Fr=()=>{const a=t.getRect();f(Un,!0),f(Ht,t.tag,!0),f(na,a.bottom,!0),f(ar,a.right,!0),f(rr,a.height,!0),Hr=t.getRect,f(Vt,t.focusRef,!0)});return}const e=t.getRect();f(Un,!0),f(Ht,t.tag,!0),f(na,e.bottom,!0),f(ar,e.right,!0),f(rr,e.height,!0),Hr=t.getRect,f(Vt,t.focusRef,!0)}const Lu=()=>n(Un),Ou=()=>n(Lo);var Fu=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),zu=T('<li class="p-16hbyw2"><!></li>'),ju=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Bu=T('<li class="p-16hbyw2"><!></li>'),Hu=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),Uu=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),qu=T('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),Vu=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Wu=T("<!> <!>",1);function Ku(t,e){de(e,!0);const{getScrollContainer:a}=ao(),{pinTag:r,getGetMapTags:o,deleteTag:s}=kt(),{getSelectedTags:i,removeTag:l,setSelectedTags:c}=An(),{getSelectedNotes:u,setSelectedNotes:d,clearNotes:v}=_a(),{getFiltredNotes:g}=wa();let h=M(!1);Oe(()=>{n(Un),zt(()=>{f(h,o()().get(n(Ht))?.pinned||!1,!0)})});let m=M(!1);const x=()=>{r(n(Ht),!0),f(ta,!0);let R=n(Vt),ee=vt(R)?.next;gt("Tag pinned",{cancel:{nextFocusRef:ee,onCancel:async()=>{r(n(Ht),!1),setTimeout(()=>{const{prev:re}=vt(ee);re?.focus()},16)}}})},_=()=>{r(n(Ht),!1),f(ta,!0);let R=n(Vt),ee=vt(R)?.next;gt("Tag unpinned",{cancel:{nextFocusRef:ee,onCancel:async()=>{r(n(Ht),!0),setTimeout(()=>{const{prev:re}=vt(ee);re?.focus()},16)}}})},y=()=>{f(Un,!1),f(ta,!1),f(na,0),f(ar,0),f(rr,0),Hr=()=>({bottom:0,right:0,height:0}),f(Vt,null),Fr&&setTimeout(()=>{Fr?.(),Fr=void 0})};let F=N(()=>window.innerHeight-n(na)<100?n(na)-n(rr)-98+"px":n(na)+5+"px"),w=N(a);const S=R=>{R.key==="Tab"&&R.shiftKey&&(R.preventDefault(),n(Vt)?.focus())},A=R=>{R.key==="Tab"&&!R.shiftKey&&n(Vt)&&(R.preventDefault(),vt(n(Vt))?.next?.focus())};Ce(()=>{const R=ee=>{ee.key==="Escape"&&n(Un)&&n(Vt)?.focus()};return window.addEventListener("keydown",R),()=>{window.removeEventListener("keydown",R)}});const E=()=>{f(ta,!0);let R=n(Vt),ee=vt(R)?.next;Ra({title:`Are you sure to delete "${n(Ht)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const re=Array.from(n(K)),te=new Set(u()),H=g(),se=te.size?[...te]:H.map(he=>he.id);n(K).has(n(Ht))&&(te.size===0||H.length===te.size)&&l(n(Ht)),v();const{cancel:we}=await s(n(Ht),se);gt("Tag deleted",{cancel:{nextFocusRef:ee,onCancel:async()=>{await we(),c(new Set(re)),d(new Set(te)),setTimeout(()=>{const{prev:he}=vt(ee);he?.focus()},16)}}})},onCancel:async()=>{},onClosed:re=>{setTimeout(()=>{re||R?.focus()},16)}})};let k=()=>{};const z=()=>{f(ta,!0),f(m,!0);let R=n(Vt);k=()=>{f(m,!1),setTimeout(()=>{R?.focus()},16)}};Oe(()=>{const R=()=>{const ee=Hr();f(na,ee.bottom,!0),f(ar,ee.right,!0),f(rr,ee.height,!0)};return n(w)?.addEventListener("scroll",R),window.addEventListener("resize",R),()=>{n(w)?.removeEventListener("scroll",R),window.removeEventListener("resize",R)}});let K=N(i),V=Zn||ga;var W=Wu(),oe=D(W);{var J=R=>{var ee=Vu(),re=D(ee);pe(re,()=>({"--left":n(ar)-36+"px","--top":n(F),"--transform-origin":"top left"})),xr(re.lastChild,{get startClose(){return n(ta)},onClosed:y,get ref(){return n(Lo)},set ref(te){f(Lo,te,!0)},children:(te,H)=>{var se=qu(),we=D(se);{var he=Ee=>{var ae=zu(),$=b(ae);nt($,{onClick:x,onKeydown:S,get dialogMode(){return V},children:(Y,be)=>{var ge=Fu(),C=D(ge);pe(C,()=>({"--size":"20px"})),Se(C.lastChild,{name:"pin"}),p(Y,ge)},$$slots:{default:!0}}),p(Ee,ae)},me=Ee=>{var ae=Bu(),$=b(ae);nt($,{onClick:_,onKeydown:S,get dialogMode(){return V},children:(Y,be)=>{var ge=ju(),C=D(ge);pe(C,()=>({"--size":"20px"})),Se(C.lastChild,{name:"pin-cancel"}),p(Y,ge)},$$slots:{default:!0}}),p(Ee,ae)};U(we,Ee=>{n(h)?Ee(me,!1):Ee(he)})}var L=I(we,2),Z=b(L);nt(Z,{onClick:z,get dialogMode(){return V},children:(Ee,ae)=>{var $=Hu(),Y=D($);pe(Y,()=>({"--size":"20px"})),Se(Y.lastChild,{name:"pen"}),p(Ee,$)},$$slots:{default:!0}});var ye=I(L,2),Te=b(ye);nt(Te,{onClick:E,onKeydown:A,dangerous:!0,get dialogMode(){return V},children:(Ee,ae)=>{var $=Uu(),Y=D($);pe(Y,()=>({"--size":"20px"})),Se(Y.lastChild,{name:"bin"}),p(Ee,$)},$$slots:{default:!0}}),p(te,se)},$$slots:{default:!0}}),p(R,ee)};U(oe,R=>{n(Un)&&R(J)})}var q=I(oe,2);{var fe=R=>{{let ee=N(()=>vt(n(Vt))?.next||null);Iu(R,{get tag(){return n(Ht)},get nextFocusRef(){return n(ee)},onClosed:re=>{k(re)}})}};U(q,R=>{n(m)&&R(fe)})}p(t,W),ue()}var Gu=T('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Yu=T('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),Xu=T("<!> <span> </span> <!>",1),Ju=T('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function or(t,e){de(e,!0);let{getGetMapTags:a}=kt(),r=M(null),o=N(Lu);const s=()=>{if(n(r)){const v=n(r).getBoundingClientRect();return{bottom:v.bottom,right:v.right,height:v.height}}return{bottom:0,right:0,height:0}},i=v=>{v.stopPropagation(),v.preventDefault(),Ru({tag:e.tag,getRect:s,focusRef:n(r)})},l=v=>{v.key==="Tab"&&!v.shiftKey&&n(o)&&(v.preventDefault(),Ou()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let c=N(()=>a()().get(e.tag)?.pinned||!1);var u=Ju(),d=b(u);pe(d,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),Pa(d.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(v,g)=>{var h=Xu(),m=D(h);{var x=S=>{var A=Gu(),E=b(A);pe(E,()=>({"--size":"18px"})),Se(E.lastChild,{name:"pin"}),p(S,A)};U(m,S=>{n(c)&&S(x)})}var _=I(m,2),y=b(_),F=I(_,2);{var w=S=>{var A=Yu();A.__click=i,A.__keydown=l;var E=b(A),k=b(E);pe(k,()=>({"--size":"16px"})),Se(k.lastChild,{name:"menu"});var z=I(k,2);dt(z,{children:(K,V)=>{var W=De("Tag options");p(K,W)}}),Ge(A,K=>f(r,K),()=>n(r)),xe(()=>Qe(A,1,rt({c:!0,d:e.type==="selected"}),"p-9jjlcl")),p(S,A)};U(F,S=>{e.hideMenu||S(w)})}xe(()=>ot(y,e.tag)),p(v,h)},$$slots:{default:!0}}),p(t,u),ue()}st(["click","keydown"]);var Zu=T('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function bs(t,e){de(e,!0);let a=Ne(e,"mobile",3,!1);const{getGetMapTags:r}=kt();let s=N(()=>{const h=r()();return[...e.tags].sort((m,x)=>h.get(m)?.pinned?-1:h.get(x)?.pinned?1:m.localeCompare(x))}),i=N(()=>n(s).filter(h=>r()().get(h)?.pinned)),l=N(()=>n(s).filter(h=>!r()().get(h)?.pinned));var c=Zu(),u=b(c),d=b(u);En(d,16,()=>n(i),h=>h,(h,m)=>{or(h,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})});var v=I(d,2);En(v,17,()=>e.metaTags,h=>"meta"+h,(h,m)=>{or(h,{hideMenu:!0,get tag(){return n(m)},onClick:()=>{e.handleMetaTagClick(n(m))}})});var g=I(v,2);En(g,16,()=>n(l),h=>h,(h,m)=>{or(h,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})}),xe(()=>Qe(u,1,rt({b:!0,c:a()}),"p-lawyrs")),p(t,c),ue()}var Qu=T('<div class="b c p-1i0uzbi"><div class="d p-1i0uzbi"><button class="e p-1i0uzbi"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),$u=T('<div class="a p-1i0uzbi"><!></div>');function Ss(t,e){de(e,!0);let a=M(null);const r=c=>{f(a,c,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};Oe(()=>{n(a)&&n(a).focus()});var s=$u(),i=b(s);{var l=c=>{var u=Qu(),d=b(u),v=b(d);v.__click=o;var g=b(v);pe(g,()=>({"--size":"20px"})),Se(g.lastChild,{name:"close"});var h=I(g,2);dt(h,{children:(_,y)=>{var F=De("Clear");p(_,F)}});var m=I(d,2);En(m,19,()=>e.metaTags,_=>"meta_"+_,(_,y,F)=>{{let w=N(()=>n(F)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);or(_,{hideMenu:!0,type:"selected",get tag(){return n(y)},onClick:()=>{e.handleMetaTagClick(n(y))},get onRef(){return n(w)}})}});var x=I(m,2);En(x,18,()=>e.selectedTags,_=>_,(_,y,F)=>{{let w=N(()=>n(F)===e.selectedTags.size-1?r:void 0);or(_,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return y},onClick:()=>{e.handleSelectedTagClick(y)},get onRef(){return n(w)}})}}),p(c,u)};U(i,c=>{e.selectedTags.size+e.metaTags.size>0&&c(l)})}p(t,s),ue()}st(["click"]);const Oo=(t,e,a,r)=>{if(t.has(Ke.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},kn=200,ef=t=>t<.5?2*t*t:-1+(4-2*t)*t,Ji=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,ef(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},tf=t=>{const{getIsKeyboardVisible:a}=Yd();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=v=>({x:v.clientX,y:v.clientY,time:performance.now()}),c=v=>{r=[l(v.touches[0])],o=!0},u=v=>{if(!o||s)return;r.push(l(v.touches[0]));const g=performance.now()-150;r=r.filter(k=>k.time>=g);const h=r.at(-1),m=r[0];if(!h||!m)return;const x=m.x,_=m.y,y=h.x,F=h.y,w=y-x,S=F-_,A=Math.abs(w)>Math.abs(S),E=Math.abs(w)>3;A&&E&&!a()&&(s=!0,v.preventDefault(),t([...r]),i())},d=()=>{i()};Ce(()=>(document.addEventListener("touchstart",c,{passive:!0}),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",d,{passive:!0}),document.addEventListener("touchcancel",d,{passive:!0}),()=>{document.removeEventListener("touchstart",c),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",d),document.removeEventListener("touchcancel",d)}))},Cs=5,xs=.6,Xn=.3;function Zi(t,e){de(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,c=0,u=0,d=null,v=null;const g=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,c=0,u=0,d!==null&&(cancelAnimationFrame(d),d=null),v&&(clearTimeout(v),v=null)},h=()=>{e.onCancel(),g()},m=()=>{v&&clearTimeout(v),v=setTimeout(h,5e3)};tf(async E=>{if(!o)try{const k=E.at(-1);if(!k)throw new Error("No points available for swipe initialization");const z=await e.onInit();if(!z)return;s=z.initialPosition,i=z.currentPosition,l=z.minPosition,c=z.maxPosition,u=z.width,r=k.x,a=E,o=!0,m()}catch{g()}});const _=E=>Math.max(l,Math.min(c,E)),y=()=>{if(d=null,!o){g();return}const E=a.at(-1),k=a[0];if(!E||!k)return;let z=E.x-r;r=E.x;const K=_(i+z);K!==i&&(i=K,e.onUpdate({initialPosition:s,newPosition:K,width:u,minPosition:l,maxPosition:c}))},F=E=>{if(!o){g();return}a.push({x:E.touches[0].clientX,y:E.touches[0].clientY,time:performance.now()});const k=performance.now()-150;a=a.filter(W=>W.time>=k),d===null&&(d=requestAnimationFrame(y)),m();const z=E.touches[0].clientX-a[0].x,K=E.touches[0].clientY-a[0].y;Math.abs(z)>Math.abs(K)&&E.cancelable&&E.preventDefault()},w=E=>{const k=Math.abs(E);if(k>=xs)return Cs;if(k>=Xn){const z=(k-Xn)/(xs-Xn);return e.baseActionThreshold-z*(e.baseActionThreshold-Cs)}else return e.baseActionThreshold},S=E=>{if(!o){g();return}let k=0;a.push({x:E.changedTouches[0].clientX,y:E.changedTouches[0].clientY,time:performance.now()}),y(),d!==null&&(cancelAnimationFrame(d),d=null);const z=a[0],K=a[a.length-1],V=K.x-z.x,W=K.time-z.time;W>0&&(k=V/W);const oe=w(k);e.onFinish({swipeVelocity:k,currentPosition:i,minPosition:l,maxPosition:c,initialPosition:s,width:u,actionThreshold:oe}),g()},A=()=>{h()};Ce(()=>(document.addEventListener("touchmove",F,{passive:!1}),document.addEventListener("touchend",S,{passive:!0}),document.addEventListener("touchcancel",A,{passive:!0}),()=>{document.removeEventListener("touchmove",F),document.removeEventListener("touchend",S),document.removeEventListener("touchcancel",A),d!==null&&cancelAnimationFrame(d),v&&clearTimeout(v)})),ue()}function nf(t,e){de(e,!0);const a=Mn();let r=Ne(e,"animationRef",7),o=Ne(e,"dialog",7);Zi(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const u=-e.dialogWidth*.7,d=0;let v=e.sidebarState==="closed"?u:d,g=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let x=()=>1;if(r().current){r().current.pause();let _=Number(r().current.currentTime);ur()&&(_=Number(_)+50,r().current.currentTime=Math.min(Math.max(kn-1,_),_));const y=r().current.effect?.getComputedTiming().progress||0;x=()=>y,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(_=>requestAnimationFrame(_)),g=Math.abs(1-x())}g=e.sidebarState==="closed"?g:1-g,o().style.setProperty("--backdrop-bg",`${g*.1}`),o()&&!o().open&&(o().showModal(),ur()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=g*-25;const h=g*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let m=e.sidebarState==="closed"?u:d;return e.sidebarState==="opened"||e.sidebarState==="closed"||(m=h),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:v,currentPosition:m,minPosition:u,maxPosition:d,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:u,width:d})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const v=1-Math.abs(u/d)/7*10;o().style.transform=`translate3d(${u}px, 0, 0)`,a.swipingRatio=v*-25,o().style.setProperty("--backdrop-bg",`${v*.1}`)},onFinish:({swipeVelocity:u,currentPosition:d,initialPosition:v,width:g,actionThreshold:h})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let m="close";const x=Math.abs(d-v)/g*100/7*10;if(x===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(x===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?m=Math.abs(x)>h||u>Xn?"open":"close":e.sidebarState==="swipingClose"&&(m=Math.abs(x)>h&&u<=Xn||u<-Xn?"close":"open");let _=Ji(Math.abs(x)/100);e.sidebarState==="swipingClose"&&m==="close"&&(_=1-_);const y=(m==="open"?1-_:_)*kn;a.duration=y/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${m==="open"?.1:0}`),m==="open"?e.onOpen():m==="close"&&e.onClose()}}),ue()}var af=T("<dialog><div><!> <!></div></dialog> <!> <!>",1);function rf(t,e){de(e,!0);const{getSidebarState:a,setSidebarState:r}=br();let o=M(0);Ce(()=>{const q=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",q),q(),()=>{window.removeEventListener("resize",q)}});const s=Mn(),{isScrolling:i}=Xo();let l=M(null),c=M(null),u={},d=N(a);const v=()=>{e.blocked||r("closing")},g=q=>{r(q==="open"?"swipingOpen":"swipingClose")},h=()=>{r("opened")},m=()=>{r("preOpening")},x=()=>{n(l)?.close(),r("closed")},_=q=>{q.preventDefault(),v()};Ce(()=>(n(l)?.addEventListener("close",x),n(l)?.addEventListener("cancel",_),()=>{n(l)?.removeEventListener("close",x),n(l)?.removeEventListener("cancel",_)}));const y=N(i);let F=N(()=>s.working);const w=q=>{q?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=Yn().duration};Oe(()=>{n(d)==="opening"?zt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const q=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const fe=n(l)?.animate([{transform:q},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||kn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});u.current=fe,fe&&(fe.onfinish=()=>{h(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=Yn().duration,fe.cancel(),u.current=void 0})})}):n(d)==="closing"&&zt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const q=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const fe=n(l)?.animate([{transform:q},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||kn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});u.current=fe,fe&&(fe.onfinish=()=>{x(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=Yn().duration,fe.cancel(),u.current=void 0})})})}),Oe(()=>{n(d)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),ur()&&n(l)?.getBoundingClientRect()),r("opening"))}),Ce(()=>{n(d)==="opened"&&r("preOpening")});var S=af(),A=D(S),E=b(A),k=b(E);Ae(k,()=>e.children);var z=I(k,2);{var K=q=>{Zo(q,{})};U(z,q=>{n(d)==="opened"&&q(K)})}Ge(E,q=>f(c,q),()=>n(c)),Ge(A,q=>f(l,q),()=>n(l));var V=I(A,2);{var W=q=>{Qo(q,{get dialog(){return n(l)},get dialogInner(){return n(c)},onClose:v})};U(V,q=>{n(c)&&n(d)==="opened"&&!e.blocked&&q(W)})}var oe=I(V,2);{var J=q=>{nf(q,{onCancelSwipe:w,onOpen:m,onClose:v,onSwipe:g,get dialogWidth(){return n(o)},get animationRef(){return u},get dialog(){return n(l)},get sidebarState(){return n(d)}})};U(oe,q=>{!n(y)&&!e.blocked&&q(J)})}xe(()=>{Qe(A,1,rt({a:!0,b:n(F),c:n(d)==="opened"||n(d)==="opening"||n(d)==="closing"||n(d)==="swipingClose",d:n(d)==="opened"||n(d)==="opening"||n(d)==="swipingOpen"}),"p-1gucilc"),Qe(E,1,rt({e:!0,f:n(d)==="swipingOpen",g:n(d)!=="opened"}),"p-1gucilc")}),p(t,S),ue()}var of=T('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),sf=T('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function lf(t,e){de(e,!0);const{checkMobileSize:a}=Sr(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=br(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:c}=$t(),{getTagsSearch:u,setTagsSearch:d}=td(),{getSelectedTags:v,addTag:g,removeTag:h,clearTags:m}=An(),{getSelectedMetaTags:x,addMetaTag:_,removeMetaTag:y,clearSelectedMetaTags:F}=no();let w=N(v),S=N(x);const{getGetNotes:A,checkNotesInArchive:E,checkNotesInBin:k}=kt(),z=N(A),K=L=>{g(L)},V=L=>{_(L)},W=L=>{h(L)},oe=L=>{y(L)};let J=N(()=>n(w).size===0&&!n(S).has(Ke.INBOX)&&(n(z)()||[]).some(L=>(!n(S).has(Ke.ARCHIVED)&&!n(S).has(Ke.BIN)&&L?.data&&!L.data.deletedAt&&!L.data.archivedAt||n(S).has(Ke.ARCHIVED)&&L?.data&&!L.data.deletedAt&&L.data.archivedAt||n(S).has(Ke.BIN)&&L?.data&&L.data.deletedAt)&&L?.data?.tags.length===0)),q=N(()=>Oo(n(S),n(w),n(z)()||[],L=>!(L?.data&&(L.data.deletedAt||L.data.archivedAt)&&!n(S).has(Ke.ARCHIVED)&&!n(S).has(Ke.BIN)||L?.data&&(L.data.deletedAt||!L.data.archivedAt)&&n(S).has(Ke.ARCHIVED)||L?.data&&!L.data.deletedAt&&n(S).has(Ke.BIN)))),fe=N(()=>n(q).filter(L=>u()===""||L.toLowerCase().indexOf(u().toLowerCase())!==-1)),R=N(a);const{checkExistedDialog:ee}=en();let re=N(()=>i().length>0||ee());const te=()=>{if(n(R)){if(n(re))return;o()==="opened"?r():o()==="closed"&&s()}};Ce(()=>fr({key:"b",meta:!0,action:te})),Ce(()=>fr({key:"b",ctrl:!0,action:te}));let H=N(()=>[...n(J)&&n(S).size===0?[Ke.INBOX]:[],...n(S).size===0?[...E()&&n(w).size===0?[Ke.ARCHIVED]:[],...k()&&n(w).size===0?[Ke.BIN]:[]]:[]].filter(L=>u()===""||L.toLowerCase().indexOf(u().toLowerCase())!==-1).sort((L,Z)=>L===Ke.INBOX?-1:Z===Ke.INBOX?1:L.localeCompare(Z)));var se=ce(),we=D(se);{var he=L=>{rf(L,{get blocked(){return n(re)},children:(Z,ye)=>{var Te=of(),Ee=D(Te),ae=b(Ee),$=b(ae);Xi($,{});var Y=I($,2),be=b(Y),ge=N(()=>c(_e.Settings));be.__click=function(...ne){n(ge)?.apply(this,ne)};var C=b(be);pe(C,()=>({"--size":"24px"})),Se(C.lastChild,{name:"settings"});var j=I(C,2);dt(j,{children:(ne,le)=>{var Pe=De("Settings");p(ne,Pe)}});var P=I(be,2),B=N(()=>c(_e.Sync));P.__click=function(...ne){n(B)?.apply(this,ne)};var Q=b(P);pe(Q,()=>({"--size":"24px"})),Se(Q.lastChild,{name:"sync"});var G=I(Q,2);dt(G,{children:(ne,le)=>{var Pe=De("Sync");p(ne,Pe)}});var ve=I(ae,2),ke=b(ve);{let ne=N(u);ko(ke,{placeholder:"Search tag",get value(){return n(ne)},onChange:le=>{d(le)}})}var ie=I(ve,2);{let ne=N(()=>n(S).has(Ke.BIN));Ss(ie,{get clearTags(){return m},get clearMetaTags(){return F},get hideTagMenu(){return n(ne)},handleMetaTagClick:oe,get metaTags(){return n(S)},get selectedTags(){return n(w)},handleSelectedTagClick:W})}var X=I(Ee,2);{let ne=N(()=>n(S).has(Ke.BIN));bs(X,{get hideTagMenu(){return n(ne)},get metaTags(){return n(H)},get tags(){return n(fe)},handleMetaTagClick:V,handleTagClick:K,mobile:!0})}xe((ne,le)=>{at(be,"href",ne),at(P,"href",le)},[()=>l(_e.Settings),()=>l(_e.Sync)]),p(Z,Te)},$$slots:{default:!0}})},me=L=>{var Z=sf(),ye=b(Z),Te=b(ye);{let be=N(u);ko(Te,{placeholder:"Search tag",get value(){return n(be)},onChange:ge=>{d(ge)}})}var Ee=I(ye,2),ae=b(Ee),$=b(ae);{let be=N(()=>n(S).has(Ke.BIN));Ss($,{get metaTags(){return n(S)},get clearTags(){return m},get clearMetaTags(){return F},get hideTagMenu(){return n(be)},get selectedTags(){return n(w)},handleMetaTagClick:oe,handleSelectedTagClick:W})}var Y=I(ae,2);{let be=N(()=>n(S).has(Ke.BIN));bs(Y,{get metaTags(){return n(H)},get hideTagMenu(){return n(be)},get tags(){return n(fe)},handleMetaTagClick:V,handleTagClick:K})}p(L,Z)};U(we,L=>{n(R)?L(he):L(me,!1)})}p(t,se),ue()}st(["click"]);var cf=T('<button class="a p-11odwi4"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function df(t,e){de(e,!0);let a=Ne(e,"ref",15);var r=cf();r.__click=function(...i){e.onClick?.apply(this,i)};var o=b(r);pe(o,()=>({"--rotate":"-90deg"})),Se(o.lastChild,{name:"menu"});var s=I(o,2);dt(s,{children:(i,l)=>{var c=De();xe(()=>ot(c,e.title)),p(i,c)}}),Ge(r,i=>a(i),()=>a()),p(t,r),ue()}st(["click"]);const uf=t=>{try{new URL(t)}catch{return!1}return!0};var ff=T('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),vf=T('<form class="a p-y9ylet"><!></form>');function gf(t,e){de(e,!0);const{addTag:a}=kt(),{getSelectedTags:r}=An(),{getSelectedNotes:o}=_a(),{getFiltredNotes:s}=wa();let i=M(!1),l=M(!1),c,u=!1,d=M(null),v=M(""),g=e.nextFocusRef;Ce(()=>(n(d)&&n(d).focus(),()=>{c&&clearTimeout(c)}));const h=()=>{c=setTimeout(()=>{f(l,!0)},250)},m=()=>{f(i,!0)},x=async()=>{if(r().has(n(v).trim())){m();return}if(n(v).trim()!=="")try{h();const w=new Set(o()),S=w.size?[...w]:s().map(E=>E.id),{cancel:A}=await a(n(v).trim(),S);gt("Tag added",{cancel:{nextFocusRef:g,onCancel:async()=>{await A(),setTimeout(()=>{const{prev:E}=vt(g);E?.focus()},16)}}}),u=!0}finally{f(i,!0)}},_=()=>{e.onClosed?.(u)},y=F=>{F.preventDefault(),x()};Cr(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:_,children:(F,w)=>{var S=vf(),A=b(S);{var E=z=>{ya(z,{})},k=z=>{var K=ff(),V=I(D(K),2);vr(V,{placeholder:"Enter new tag name",get ref(){return n(d)},set ref(q){f(d,q,!0)},get value(){return n(v)},set value(q){f(v,q,!0)}});var W=I(V,2),oe=b(W);Tt(oe,{onClick:m,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(q,fe)=>{var R=De("Cancel");p(q,R)},$$slots:{default:!0}});var J=I(oe,2);Tt(J,{onClick:x,fullWidth:!0,withoutMinWidth:!0,children:(q,fe)=>{var R=De("OK");p(q,R)},$$slots:{default:!0}}),p(z,K)};U(A,z=>{n(l)?z(E):z(k,!1)})}rn("submit",S,y),p(F,S)},$$slots:{default:!0}}),ue()}var hf=T('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),pf=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),mf=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),_f=T("<div><!></div>"),wf=T('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),yf=T('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!> <!></div> <!></div>');function Qi(t,e){de(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=kt(),{getSelectedTags:s}=An();let i=M(null),l=M(""),c=M(null);const u=N(a);let d=Ne(e,"shownTagInput",15);const v=()=>n(u)?e.mode==="exit"?Oo(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let h=N(()=>{const R=s(),ee=new Set(Oo(new Set,new Set(e.selectedTags.length>0?e.selectedTags:R),o()()||[]));return v().filter(te=>e.selectedTags.some(H=>te===H)?!1:n(l)===""||te.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((te,H)=>R.has(te)&&R.has(H)?te.localeCompare(H):R.has(te)?-1:R.has(H)?1:ee.has(te)&&ee.has(H)?te.localeCompare(H):ee.has(te)?-1:ee.has(H)?1:0)});const m=R=>{if(!e.selectedTags.includes(R)){if(e.mode!=="exit"||n(h).includes(R)){e.onChangeTags([...e.selectedTags,R]),f(l,"");return}n(i)?.focus()}},x=R=>{const ee=e.selectedTags.filter(re=>re!==R);ee.length===0?e.onChangeTags([]):e.onChangeTags(ee)},_=R=>{R.preventDefault(),n(l)!==""?m(n(l)):d(!1)};Oe(()=>{n(i)&&d()&&n(i).focus(),d()||f(l,"")});const y=R=>{R.preventDefault()},F=R=>{R.preventDefault(),R.stopPropagation(),R.stopImmediatePropagation()};var w=yf(),S=b(w),A=b(S);En(A,17,()=>e.selectedTags,R=>R+"-tags_selected",(R,ee)=>{Pa(R,{onPointerDown:y,onTouchStart:F,onClick:()=>{x(n(ee))},type:"button",style:"selected",children:(re,te)=>{var H=De();xe(()=>ot(H,n(ee))),p(re,H)},$$slots:{default:!0}})});var E=I(A,2);{var k=R=>{var ee=ce(),re=D(ee);En(re,17,()=>n(h).filter(te=>te.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),te=>te+"-tags_suggested",(te,H)=>{Pa(te,{onPointerDown:y,onTouchStart:F,onClick:()=>{m(n(H))},children:(se,we)=>{var he=De();xe(()=>ot(he,n(H))),p(se,he)},$$slots:{default:!0}})}),p(R,ee)};U(E,R=>{d()&&R(k)})}var z=I(E,2);{var K=R=>{Pa(R,{onPointerDown:y,onTouchStart:F,onClick:()=>{m(n(l)),f(l,"")},children:(ee,re)=>{var te=De();xe(()=>ot(te,n(l))),p(ee,te)},$$slots:{default:!0}})};U(z,R=>{n(l)!==""&&(e.mode!=="exit"||n(h).find(ee=>ee.toLowerCase()===n(l).toLowerCase()))&&R(K)})}var V=I(z,2);{var W=R=>{Pa(R,{mode:"empty",onPointerDown:y,onTouchStart:F,onClick:()=>{d(!0)},children:(ee,re)=>{var te=hf(),H=b(te);pe(H,()=>({"--size":"12px"})),Se(H.lastChild,{name:"plus"});var se=I(H,2);dt(se,{children:(we,he)=>{var me=De("add tag");p(we,me)}}),p(ee,te)},$$slots:{default:!0}})};U(V,R=>{d()||R(W)})}var oe=I(V,2);{var J=R=>{Pa(R,{mode:"empty",onPointerDown:y,onTouchStart:F,get onClick(){return e.onGenTags},get disabled(){return e.generatingTags},children:(ee,re)=>{var te=_f(),H=b(te);{var se=he=>{var me=pf(),L=D(me);pe(L,()=>({"--size":"12px"})),ya(L.lastChild,{}),p(he,me)},we=he=>{var me=mf(),L=D(me);pe(L,()=>({"--size":"12px"})),Se(L.lastChild,{name:"stars"});var Z=I(L,2);dt(Z,{children:(ye,Te)=>{var Ee=De("gen tags");p(ye,Ee)}}),p(he,me)};U(H,he=>{e.generatingTags?he(se):he(we,!1)})}p(ee,te)},$$slots:{default:!0}})};U(oe,R=>{e.genTagsEnabled&&e.onGenTags&&R(J)})}var q=I(S,2);{var fe=R=>{var ee=wf(),re=b(ee),te=b(re);vr(te,{placeholder:"tag",get ref(){return n(i)},set ref(se){f(i,se,!0)},get value(){return n(l)},set value(se){f(l,se,!0)}});var H=I(re,2);H.__pointerdown=y,H.__touchstart=F,H.__click=()=>{n(i)?.blur(),n(l)!==""&&m(n(l)),d(!1),f(l,"")},rn("submit",ee,_),p(R,ee)};U(q,R=>{d()&&R(fe)})}Ge(w,R=>f(c,R),()=>n(c)),p(t,w),ue()}st(["pointerdown","touchstart","click"]);var bf=T('<div class="c p-y9ylet"><!> <!></div>'),Sf=T('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),Cf=T('<form class="a p-y9ylet"><!></form>');function xf(t,e){de(e,!0);const{changeTags:a,getNoteById:r}=kt(),{getSelectedTags:o}=An(),{getSelectedNotes:s}=_a(),{getFiltredNotes:i}=wa();let l=M(!1),c=M(!1),u,d=!1,v=M(!1),g=e.nextFocusRef,m=(()=>{const k=[...o()],z=s();if(z.size===0)return k;const K=Array.from(z);let V=new Set(r(K[0])?.data.tags||[]);for(let W=1;W<K.length;W++){const oe=new Set(r(K[W])?.data.tags||[]),J=new Set([]);oe.forEach(q=>{V.has(q)&&J.add(q)}),V=J}return Array.from(V)})(),x=M(ct(m));Ce(()=>()=>{u&&clearTimeout(u)});const _=()=>{u=setTimeout(()=>{f(c,!0)},250)},y=()=>{f(l,!0)},F=async()=>{const k=m,z=new Set(s()),K=z.size?[...z]:i().map(V=>V.id);try{_();const{cancel:V}=await a([...k],n(x),K);gt("Tags changed",{cancel:{nextFocusRef:g,onCancel:async()=>{await V(),setTimeout(()=>{const{prev:W}=vt(g);W?.focus()},16)}}}),d=!0}finally{f(l,!0)}},w=k=>{k.key==="Escape"&&n(v)&&(f(v,!1),k.preventDefault(),k.stopPropagation())};Ce(()=>(document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)));const S=()=>{e.onClosed?.(d)},A=k=>{f(x,k,!0)},E=k=>{k.preventDefault(),F()};Cr(t,{get blocked(){return n(c)},get startClose(){return n(l)},onClosed:S,children:(k,z)=>{var K=Cf(),V=b(K);{var W=J=>{ya(J,{})},oe=J=>{var q=Sf(),fe=I(D(q),2);Qi(fe,{get selectedTags(){return n(x)},onChangeTags:A,get shownTagInput(){return n(v)},set shownTagInput(re){f(v,re,!0)}});var R=I(fe,2);{var ee=re=>{var te=bf(),H=b(te);Tt(H,{onClick:y,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(we,he)=>{var me=De("Cancel");p(we,me)},$$slots:{default:!0}});var se=I(H,2);Tt(se,{onClick:F,fullWidth:!0,withoutMinWidth:!0,children:(we,he)=>{var me=De("OK");p(we,me)},$$slots:{default:!0}}),p(re,te)};U(R,re=>{n(v)||re(ee)})}p(J,q)};U(V,J=>{n(c)?J(W):J(oe,!1)})}rn("submit",K,E),p(k,K)},$$slots:{default:!0}}),ue()}var Tf=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),Ef=T('<li class="p-antir2"><!></li>'),kf=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select mode',1),Pf=T('<li class="p-antir2"><!></li>'),Nf=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),Af=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),Mf=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),Df=T('<li class="p-antir2"><!></li>'),If=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),Rf=T('<li class="p-antir2"><!></li>'),Lf=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),Of=T('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <li class="p-antir2"><!></li>',1),Ff=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),zf=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),jf=T('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),Bf=T("<!> <!> <!> <!>",1),Hf=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Uf=T('<div class="a p-antir2"><!></div> <!> <!> <!>',1);function qf(t,e){de(e,!0);const{getSelectedTags:a,setSelectedTags:r,clearTags:o}=An(),{moveNotesToBin:s,moveNotesToArchive:i,moveNotesFromArchive:l,restoreNotesFromBin:c,deleteNotes:u}=kt(),{getFiltredNotes:d}=wa(),{getMode:v,changeMode:g,getSelectedNotes:h,setSelectedNotes:m,clearNotes:x}=_a();let _=N(a),y=M(!1),F=M(!1),w=M(!1),S=M(!1),A=M(null),E=M(null);const k=()=>{n(y)||f(y,!0)},z=()=>{f(y,!1),f(F,!1)};Oe(()=>{!n(y)&&!n(w)&&!n(S)&&f(A,vt(n(E)).next,!0)}),Ce(()=>{const ae=$=>{$.key==="Escape"&&n(y)&&n(E)?.focus()};return window.addEventListener("keydown",ae),()=>{window.removeEventListener("keydown",ae)}});let K=()=>{};const V=()=>{f(F,!0),f(w,!0);let ae=n(E);K=()=>{f(w,!1),setTimeout(()=>{ae?.focus()},16)}};let W=()=>{};const oe=()=>{f(F,!0),f(S,!0);let ae=n(E);W=()=>{f(S,!1),setTimeout(()=>{ae?.focus()},16)}},J=async()=>{const ae=Array.from(n(_)),$=new Set(h()),Y=$.size?[...$]:d().map(ge=>ge.id),{cancel:be}=await s({noteIds:Y});o(),x(),gt("Notes moved to bin",{cancel:{nextFocusRef:n(A),onCancel:async()=>{await be(),r(new Set(ae)),m($),setTimeout(()=>{const{prev:ge}=vt(n(A));ge?.focus()},16)}}}),f(F,!0)},q=async()=>{const ae=Array.from(n(_)),$=new Set(h()),Y=$.size?[...$]:d().map(ge=>ge.id),{cancel:be}=await i({noteIds:Y});o(),x(),gt("Notes moved to archive",{cancel:{nextFocusRef:n(A),onCancel:async()=>{await be(),r(new Set(ae)),m($),setTimeout(()=>{const{prev:ge}=vt(n(A));ge?.focus()},16)}}}),f(F,!0)},fe=async()=>{const ae=Array.from(n(_)),$=new Set(h()),Y=$.size?[...$]:d().map(ge=>ge.id),{cancel:be}=await l({noteIds:Y});o(),x(),gt("Notes moved from archive",{cancel:{nextFocusRef:n(A),onCancel:async()=>{await be(),r(new Set(ae)),m($),setTimeout(()=>{const{prev:ge}=vt(n(A));ge?.focus()},16)}}}),f(F,!0)},R=async()=>{const ae=Array.from(n(_)),$=new Set(h()),Y=$.size?[...$]:d().map(ge=>ge.id),{cancel:be}=await c({noteIds:Y});o(),x(),gt("Notes restored",{cancel:{nextFocusRef:n(A),onCancel:async()=>{await be(),r(new Set(ae)),m($),setTimeout(()=>{const{prev:ge}=vt(n(A));ge?.focus()},16)}}}),f(F,!0)},ee=()=>{const ae=new Set(h()),$=ae.size?[...ae]:d().map(Y=>Y.id);f(F,!0),Ra({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{f(F,!0),o(),x(),await u({noteIds:$})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(E)?.focus()},16)}})},re=()=>{const ae=d(),$=Array.from(h()),Y=[];for(const ge of ae)ge.data&&ge.data?.link&&uf(ge.data?.link.url)&&($.includes(ge.id)||$.length===0)&&Y.push(ge.data?.link.url);const be=()=>{for(const ge of Y)if(!window.open(ge,"_blank")){Ra({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(E)?.focus()},16)}});break}};Y.length<=10?be():Ra({title:`Are you sure to open ${Y.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{be()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(E)?.focus()},16)}}),f(F,!0)};let te=N(()=>v()==="multiple"),H=Zn||ga;var se=Uf(),we=D(se),he=b(we);df(he,{title:"notes menu",onClick:k,get ref(){return n(E)},set ref(ae){f(E,ae,!0)}});var me=I(we,2);{var L=ae=>{var $=Hf(),Y=D($);pe(Y,()=>({"--right":"0","--top":"44px"})),xr(Y.lastChild,{get startClose(){return n(F)},onClosed:z,children:(be,ge)=>{var C=Bf(),j=D(C);{var P=X=>{var ne=Ef(),le=b(ne);nt(le,{onClick:re,get dialogMode(){return H},children:(Pe,Be)=>{var Ye=Tf(),Xe=D(Ye);pe(Xe,()=>({"--size":"20px"})),Se(Xe.lastChild,{name:"open"}),p(Pe,Ye)},$$slots:{default:!0}}),p(X,ne)};U(j,X=>{Zn||ga||X(P)})}var B=I(j,2);{var Q=X=>{var ne=Pf(),le=b(ne);nt(le,{onClick:()=>{f(F,!0),g("multiple")},get dialogMode(){return H},children:(Pe,Be)=>{var Ye=kf(),Xe=D(Ye);pe(Xe,()=>({"--size":"20px"})),Se(Xe.lastChild,{name:"check"}),p(Pe,Ye)},$$slots:{default:!0}}),p(X,ne)};U(B,X=>{n(te)||X(Q)})}var G=I(B,2);{var ve=X=>{var ne=Of(),le=D(ne),Pe=b(le);nt(Pe,{onClick:V,get dialogMode(){return H},children:(Re,et)=>{var Je=Nf(),qe=D(Je);pe(qe,()=>({"--size":"20px","--rotate":"45deg"})),Se(qe.lastChild,{name:"close"}),p(Re,Je)},$$slots:{default:!0}});var Be=I(le,2),Ye=b(Be);nt(Ye,{onClick:oe,get dialogMode(){return H},children:(Re,et)=>{var Je=Af(),qe=D(Je);pe(qe,()=>({"--size":"20px"})),Se(qe.lastChild,{name:"pen"}),p(Re,Je)},$$slots:{default:!0}});var Xe=I(Be,2);{var $e=Re=>{var et=Df(),Je=b(et);nt(Je,{onClick:q,get dialogMode(){return H},children:(qe,Mt)=>{var Dt=Mf(),Pt=D(Dt);pe(Pt,()=>({"--size":"20px"})),Se(Pt.lastChild,{name:"archive"}),p(qe,Dt)},$$slots:{default:!0}}),p(Re,et)},ze=Re=>{var et=Rf(),Je=b(et);nt(Je,{onClick:fe,get dialogMode(){return H},children:(qe,Mt)=>{var Dt=If(),Pt=D(Dt);pe(Pt,()=>({"--size":"20px"})),Se(Pt.lastChild,{name:"archive-cancel"}),p(qe,Dt)},$$slots:{default:!0}}),p(Re,et)};U(Xe,Re=>{e.mode==="notes"?Re($e):Re(ze,!1)})}var Fe=I(Xe,2),Ve=b(Fe);nt(Ve,{onClick:J,get dialogMode(){return H},dangerous:!0,children:(Re,et)=>{var Je=Lf(),qe=D(Je);pe(qe,()=>({"--size":"20px"})),Se(qe.lastChild,{name:"bin"}),p(Re,Je)},$$slots:{default:!0}}),p(X,ne)};U(G,X=>{(e.mode==="notes"||e.mode==="archive")&&X(ve)})}var ke=I(G,2);{var ie=X=>{var ne=jf(),le=D(ne),Pe=b(le);nt(Pe,{onClick:R,get dialogMode(){return H},children:(Xe,$e)=>{var ze=Ff(),Fe=D(ze);pe(Fe,()=>({"--size":"20px"})),Se(Fe.lastChild,{name:"bin-cancel"}),p(Xe,ze)},$$slots:{default:!0}});var Be=I(le,2),Ye=b(Be);nt(Ye,{onClick:ee,get dialogMode(){return H},dangerous:!0,children:(Xe,$e)=>{var ze=zf(),Fe=D(ze);pe(Fe,()=>({"--size":"20px"})),Se(Fe.lastChild,{name:"bin"}),p(Xe,ze)},$$slots:{default:!0}}),p(X,ne)};U(ke,X=>{e.mode==="bin"&&X(ie)})}p(be,C)},$$slots:{default:!0}}),p(ae,$)};U(me,ae=>{n(y)&&ae(L)})}var Z=I(me,2);{var ye=ae=>{gf(ae,{get nextFocusRef(){return n(A)},onClosed:$=>{K($)}})};U(Z,ae=>{n(w)&&ae(ye)})}var Te=I(Z,2);{var Ee=ae=>{xf(ae,{get nextFocusRef(){return n(A)},onClosed:$=>{W($)}})};U(Te,ae=>{n(S)&&ae(Ee)})}p(t,se),ue()}var Vf=T('<label class="a p-uuy4jt"><input class="b p-uuy4jt" type="checkbox"/> <span class="c p-uuy4jt"><span class="d p-uuy4jt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></span> <!></label>');function $i(t,e){de(e,!0);const a=()=>{e.onChange(!e.checked)};var r=Vf(),o=b(r);o.__change=a;var s=I(o,2),i=b(s),l=b(i);pe(l,()=>({"--size":"16px"})),Se(l.lastChild,{name:"check"});var c=I(s,2);dt(c,{children:(u,d)=>{var v=De("Toggle switch");p(u,v)}}),xe(()=>qc(o,e.checked)),p(t,r),ue()}st(["change"]);var Wf=T('<div class="g e p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),Kf=T('<div class="g p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),Gf=T('<a class="i j p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Yf=T('<div class="h p-1336jx2"><!> <!></div>'),Xf=T('<!> <div class="p p-1336jx2"><!></div>',1),Jf=T('<div class="r p-1336jx2"><div class="s p-1336jx2"><!> <span> </span></div> <button class="t p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),Zf=T('<div class="a p-1336jx2"><div class="b p-1336jx2"><div class="c p-1336jx2"><a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-1336jx2"><!></div> <div class="f p-1336jx2"><!></div></div> <div class="k p-1336jx2"><div class="l p-1336jx2"><!></div> <div class="m p-1336jx2"><div class="n p-1336jx2"><div class="o p-1336jx2"><!></div> <!></div> <div class="q p-1336jx2"><!></div></div></div></div>');function Qf(t,e){de(e,!0);const{getFeedSearch:a,setFeedSearch:r}=Ko(),{getScrollContainer:o}=ao();let s=N(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:c,checkNotes:u}=kt(),{replaceSearchParams:d}=jt(),{createDialogPageHref:v,createHandleClickDialogPage:g,getDialogPages:h}=$t(),{checkExistedDialog:m}=en(),{getMode:x,clearNotes:_,setSelectedNotes:y,getSelectedNotes:F,changeMode:w}=_a(),{checkMobileSize:S}=Sr(),{getFiltredNotes:A}=wa(),{getSelectedMetaTags:E}=no();let k=N(E),z=M(null);const K=N(l);let W=N(()=>{const ie=A()||[],X=F();return ie.every(ne=>X.has(ne.id))});const oe=()=>{n(s)&&n(s).scrollTo({top:0})},J=()=>{Ra({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),d("")},onCancel:async()=>{}})},q=()=>{h().length===0&&!m()&&n(z)?.focus()};Ce(()=>fr({key:"k",meta:!0,action:q})),Ce(()=>fr({key:"k",ctrl:!0,action:q})),Oe(()=>{const ie=A()||[];zt(()=>{const X=F();y(new Set(ie.filter(ne=>X.has(ne.id)).map(ne=>ne.id)))})});let fe=N(()=>n(k).has(Ke.ARCHIVED)?"archive":n(k).has(Ke.BIN)?"bin":"notes");var R=Zf(),ee=b(R),re=b(ee),te=b(re),H=N(()=>g(_e.Settings));te.__click=function(...ie){n(H)?.apply(this,ie)};var se=b(te);pe(se,()=>({"--rotate":"30deg","--size":"20px"})),Se(se.lastChild,{name:"settings"});var we=I(te,2),he=N(()=>g(_e.Sync));we.__click=function(...ie){n(he)?.apply(this,ie)};var me=b(we);pe(me,()=>({"--size":"20px"})),Se(me.lastChild,{name:"sync"});var L=I(re,2),Z=b(L);Xi(Z,{});var ye=I(L,2),Te=b(ye);{var Ee=ie=>{var X=ce(),ne=D(X);{var le=Pe=>{var Be=ce(),Ye=D(Be);{var Xe=ze=>{var Fe=Wf(),Ve=b(Fe);Ve.__click=J;var Re=b(Ve);pe(Re,()=>({"--scale":"1.2","--size":"20px"})),Se(Re.lastChild,{name:"clear"});var et=I(Re);dt(et,{children:(Je,qe)=>{var Mt=De("Empty bin");p(Je,Mt)}}),p(ze,Fe)},$e=ze=>{var Fe=Kf(),Ve=b(Fe);Ve.__click=J;var Re=b(Ve);pe(Re,()=>({"--scale":"0.9","--size":"20px"})),Se(Re.lastChild,{name:"clear"}),p(ze,Fe)};U(Ye,ze=>{S()?ze(Xe):ze($e,!1)})}p(Pe,Be)};U(ne,Pe=>{n(K)&&Pe(le)})}p(ie,X)},ae=ie=>{var X=ce(),ne=D(X);{var le=Pe=>{var Be=Yf(),Ye=b(Be);{var Xe=ze=>{var Fe=Gf();Fe.__click=function(...et){e.onOpenWindow?.apply(this,et)};var Ve=b(Fe);pe(Ve,()=>({"--scale":"0.7","--size":"32px"})),Se(Ve.lastChild,{name:"open-window"});var Re=I(Ve,2);dt(Re,{children:(et,Je)=>{var qe=De("open window");p(et,qe)}}),xe(()=>at(Fe,"href",e.openWindowHref)),p(ze,Fe)};U(Ye,ze=>{e.onOpenWindow&&ze(Xe)})}var $e=I(Ye,2);ku($e,{}),p(Pe,Be)};U(ne,Pe=>{n(fe)==="notes"&&Pe(le)},!0)}p(ie,X)};U(Te,ie=>{n(fe)==="bin"?ie(Ee):ie(ae,!1)})}var $=I(ee,2),Y=b($),be=b(Y);lf(be,{});var ge=I(Y,2),C=b(ge),j=b(C),P=b(j);{let ie=N(a);ko(P,{onFocus:oe,placeholder:"Search",get value(){return n(ie)},onChange:X=>{r(X)},get ref(){return n(z)},set ref(X){f(z,X,!0)}})}var B=I(j,2);{var Q=ie=>{var X=Xf(),ne=D(X);wu(ne,{});var le=I(ne,2),Pe=b(le);qf(Pe,{get mode(){return n(fe)}}),p(ie,X)};U(B,ie=>{(n(fe)==="notes"&&u()||n(fe)==="bin"&&l()||n(fe)==="archive"&&c())&&ie(Q)})}var G=I(C,2),ve=b(G);{var ke=ie=>{var X=ce(),ne=D(X);{var le=Pe=>{var Be=Jf(),Ye=b(Be),Xe=b(Ye);$i(Xe,{get checked(){return n(W)},onChange:Re=>{if(Re){const et=A()||[];y(new Set(et.map(Je=>Je.id)))}else _()}});var $e=I(Xe,2),ze=b($e),Fe=I(Ye,2);Fe.__click=Re=>{Re.preventDefault(),w("single")};var Ve=b(Fe);pe(Ve,()=>({"--size":"16px"})),Se(Ve.lastChild,{name:"close"}),xe(Re=>ot(ze,`Selected ${Re??""}`),[()=>F().size]),p(Pe,Be)};U(ne,Pe=>{x()==="multiple"&&Pe(le)})}p(ie,X)};U(ve,ie=>{(n(fe)==="notes"&&u()||n(fe)==="bin"&&l()||n(fe)==="archive"&&c())&&ie(ke)})}xe((ie,X)=>{at(te,"href",ie),at(we,"href",X)},[()=>v(_e.Settings),()=>v(_e.Sync)]),p(t,R),ue()}st(["click"]);var $f=T('<div class="p-gkgqyo"><!></div>');function ft(t,e){de(e,!0);const{setDialogPageHeight:a}=Jo();let r=M(null);Ce(()=>{n(r);const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;a(u)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=$f(),s=b(o);Ae(s,()=>e.children),Ge(o,i=>f(r,i),()=>n(r)),p(t,o),ue()}var ev=T('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function tv(t,e){de(e,!1);const{replaceSearchParams:a,getHref:r}=jt(),o=l=>{l.preventDefault(),a("")};Wo();var s=ev(),i=I(b(s),2);{let l=_r(()=>r(""));Tt(i,{element:"a",get href(){return n(l)},onClick:o,children:(c,u)=>{var d=De("close");p(c,d)},$$slots:{default:!0}})}p(t,s),ue()}var nv=T('<h1 class="p-1n0ziuh"><!></h1>');function av(t,e){var a=nv(),r=b(a);Ae(r,()=>e.children),p(t,a)}var rv=T('<!> <div class="b p-193tby9"><!> <!></div>',1),ov=T('<div class="a p-193tby9"><!></div>');function sv(t,e){de(e,!0);const{blockDialog:a,setLeftEnd:r}=en(),{pushDialogPage:o}=$t(),{initLocalAccount:s}=Yo(),{replaceSearchParams:i}=jt(),l=Mn(),c=()=>{o(_e.Auth)},u=async()=>{l.duration=0,l.swipingRatio=-25,requestAnimationFrame(()=>{l.duration=Yn().duration,l.swipingRatio=Yn().swipingRatio,s(),a(!1),r(!0),i("")})};var d=ov(),v=b(d);{var g=h=>{var m=rv(),x=D(m);av(x,{children:(w,S)=>{var A=De("Welcome");p(w,A)}});var _=I(x,2),y=b(_);Tt(y,{onClick:c,fullWidth:!0,children:(w,S)=>{var A=De("Cloud account");p(w,A)},$$slots:{default:!0}});var F=I(y,2);Tt(F,{onClick:u,fullWidth:!0,type:"secondary",children:(w,S)=>{var A=De("Local account");p(w,A)},$$slots:{default:!0}}),p(h,m)};U(v,h=>{h(g)})}p(t,d),ue()}var iv=T('<div class="a p-1hg9kpf"></div>'),lv=T('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function el(t,e){de(e,!0);const a=u=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(u).host}.ico`}catch{return""}};let r=M(!1),o=N(()=>a(e.url));var s=ce(),i=D(s);{var l=u=>{var d=iv();p(u,d)},c=u=>{var d=lv();xe(v=>at(d,"src",v),[()=>a(e.url)]),rn("error",d,()=>{f(r,!0)}),p(u,d)};U(i,u=>{n(r)||!n(o)?u(l):u(c,!1)})}p(t,s),ue()}var cv=T('<a target="_blank" rel="noopener noreferrer" class="a p-7mmq8e"><!> <!></a>'),dv=T('<button class="a p-7mmq8e"><!> <!></button>');function Da(t,e){de(e,!0);let a=Ne(e,"tabindex",3,0),r=Ne(e,"onclick",3,()=>{}),o=Ne(e,"ref",15);var s=ce(),i=D(s);{var l=u=>{var d=cv();d.__click=function(...h){r()?.apply(this,h)};var v=b(d);Ae(v,()=>e.children);var g=I(v,2);dt(g,{children:(h,m)=>{var x=De();xe(()=>ot(x,e.title)),p(h,x)}}),Ge(d,h=>o(h),()=>o()),xe(()=>{at(d,"href",e.href),at(d,"tabindex",a())}),p(u,d)},c=u=>{var d=ce(),v=D(d);{var g=h=>{var m=dv();m.__click=function(...y){r()?.apply(this,y)};var x=b(m);Ae(x,()=>e.children);var _=I(x,2);dt(_,{children:(y,F)=>{var w=De();xe(()=>ot(w,e.title)),p(y,w)}}),Ge(m,y=>o(y),()=>o()),xe(()=>at(m,"tabindex",a())),p(h,m)};U(v,h=>{e.elem==="button"&&h(g)},!0)}p(u,d)};U(i,u=>{e.elem==="a"?u(l):u(c,!1)})}p(t,s),ue()}st(["click"]);var uv=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Edit',1),fv=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),vv=T('<li class="p-1jbq6g9"><!></li> <li class="p-1jbq6g9"><!></li>',1),gv=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function hv(t,e){de(e,!0);let a=Ne(e,"shownMenu",15),r=M(!1),o=M(!1),s=M(!1);const i=async()=>{e.onEdit()},l=()=>{n(o)?(f(o,!1),i()):n(s)&&(f(s,!1),e.onDelete()),a(!1),f(r,!1)};let c=Zn||ga;var u=ce(),d=D(u);{var v=g=>{var h=gv(),m=D(h);pe(m,()=>({"--top":"90%","--right":"0px"})),xr(m.lastChild,{get startClose(){return n(r)},onClosed:l,children:(x,_)=>{var y=vv(),F=D(y),w=b(F);nt(w,{onClick:()=>{f(o,!0),f(r,!0)},get dialogMode(){return c},children:(E,k)=>{var z=uv(),K=D(z);pe(K,()=>({"--size":"20px"})),Se(K.lastChild,{name:"pen"}),p(E,z)},$$slots:{default:!0}});var S=I(F,2),A=b(S);nt(A,{onClick:()=>{f(s,!0),f(r,!0)},get dialogMode(){return c},children:(E,k)=>{var z=fv(),K=D(z);pe(K,()=>({"--size":"20px"})),Se(K.lastChild,{name:"bin"}),p(E,z)},$$slots:{default:!0}}),p(x,y)},$$slots:{default:!0}}),p(g,h)};U(d,g=>{a()&&g(v)})}p(t,u),ue()}var pv=T('<div class="b p-ptbuqy"><!> <!> <div class="c p-ptbuqy"><button class="p-ptbuqy">Cancel</button> <button class="p-ptbuqy">Done</button></div></div>'),mv=T('<div class="e p-ptbuqy"><!></div>'),_v=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),wv=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),yv=T('<div class="d p-ptbuqy"><div><!> <a class="f p-ptbuqy" target="_blank" rel="noopener noreferrer"> </a> <div><!> <!></div> <!></div></div>'),bv=T('<div class="g p-ptbuqy"><button class="h p-ptbuqy">Add link</button></div>'),Sv=T('<div class="a p-ptbuqy"><!></div>');function Cv(t,e){de(e,!0);let a=Ne(e,"shownUrlInput",15);const{getFaviconEnabled:r}=Va();let o=N(r),s=M(null),i=M(null),l=M(ct(e.url)),c=M(ct(e.title)),u=M(null),d=M(null),v=M(!1);const g=S=>{f(l,S.target.value||"",!0)},h=S=>{f(c,S.target.value||"",!0)};Oe(()=>{a()&&n(s)?.focus()});const m=()=>{f(v,!0)},x=()=>{e.url&&(navigator.clipboard.writeText(e.url),gt("copied"))};var _=Sv(),y=b(_);{var F=S=>{var A=pv(),E=b(A);vr(E,{get value(){return n(l)},onInput:g,placeholder:"url",get ref(){return n(s)},set ref(W){f(s,W,!0)}});var k=I(E,2);vr(k,{get value(){return n(c)},onInput:h,placeholder:"title"});var z=I(k,2),K=b(z);K.__click=()=>{f(l,e.url,!0),f(c,e.title,!0),a(!1)};var V=I(K,2);V.__click=()=>{let W=n(l).trim();W!==""&&/^[[a-zA-Z]+?:\/\//.test(W)===!1&&(W="https://"+W,f(l,W,!0)),e.onChangeUrl(W,n(c)),a(!1)},p(S,A)},w=S=>{var A=ce(),E=D(A);{var k=K=>{var V=yv(),W=b(V);Qe(W,1,rt({i:!0}),"p-ptbuqy");var oe=b(W);{var J=H=>{var se=mv(),we=b(se);el(we,{get url(){return e.url}}),p(H,se)};U(oe,H=>{n(o)&&H(J)})}var q=I(oe,2),fe=b(q),R=I(q,2);Qe(R,1,rt({j:!0}),"p-ptbuqy");var ee=b(R);Da(ee,{title:"copy link",elem:"button",onclick:x,children:(H,se)=>{var we=_v(),he=D(we);pe(he,()=>({"--size":"20px"})),Se(he.lastChild,{name:"copy"}),p(H,we)},$$slots:{default:!0}});var re=I(ee,2);Da(re,{title:"show menu",elem:"button",onclick:m,get ref(){return n(d)},set ref(H){f(d,H,!0)},children:(H,se)=>{var we=wv(),he=D(we);pe(he,()=>({"--size":"18px","--rotate":"90deg"})),Se(he.lastChild,{name:"menu"}),p(H,we)},$$slots:{default:!0}});var te=I(R,2);hv(te,{onDelete:()=>{f(c,""),f(l,""),e.onDeleteUrl()},onEdit:()=>{a(!0)},get shownMenu(){return n(v)},set shownMenu(H){f(v,H,!0)}}),Ge(W,H=>f(u,H),()=>n(u)),xe(()=>{at(q,"href",e.url),ot(fe,e.title||"unknown")}),p(K,V)},z=K=>{var V=bv(),W=b(V);W.__click=()=>{a(!0)},p(K,V)};U(E,K=>{e.url?K(k):K(z,!1)})}p(S,A)};U(y,S=>{a()?S(F):S(w,!1)})}Ge(_,S=>f(i,S),()=>n(i)),p(t,_),ue()}st(["click"]);var xv=T('<div class="e p-vlmfrv">Note</div>'),Tv=T("<span> </span>"),Ev=T('<div class="i p-vlmfrv"><!></div>'),kv=T('<!> <div class="a p-vlmfrv"><div class="b"><div class="c"><div class="d p-vlmfrv"><!> <div class="f p-vlmfrv" role="textbox" aria-label="note" tabindex="0" contenteditable="true" placeholder="Note"> </div></div></div></div> <div class="g h p-vlmfrv"><!> <div class="j p-vlmfrv"><!></div></div></div>',1);function Pv(t,e){de(e,!0);const{checkMobileSize:a}=Sr(),{getGenerateTagsEnabled:r}=Va(),{getGetMapTags:o}=kt();let s=Ne(e,"link",15,void 0),i=Ne(e,"text",15,""),l=Ne(e,"tags",31,()=>ct([])),c=M(null),u=M(!1),d=M(!1),v=N(()=>[...o()().keys()]),g=M(!1);const h=H=>{let se="",we=!0;function he(me){for(let L=0;L<me.length;L++){const Z=me[L];if(Z.nodeName==="BR"){se+=`
`,we=!0;continue}Z.nodeName==="DIV"&&we===!1&&(se+=`
`),we=!1,Z.nodeType===3&&Z.textContent&&(se+=Z.textContent),he(Z.childNodes)}}he(H.currentTarget.childNodes),se===`
`&&(se=se.slice(0,-1)),i(se)},m=H=>{H.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(n(u)&&(f(u,!1),H.preventDefault(),H.stopPropagation()),n(d)&&(f(d,!1),H.preventDefault(),H.stopPropagation()))};Ce(()=>(a(),document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)));const x=(H,se)=>{s({url:H,title:se})},_=()=>{s(void 0)},y=H=>{l(H)},F=i();Ce(()=>{if(n(c)&&e.mode==="add"){n(c).focus();const H=document.createRange();H.selectNodeContents(n(c)),H.collapse(!1);const se=window.getSelection();se?.removeAllRanges(),se?.addRange(H)}});let w=N(r);const S=async()=>{const H={type:"object",properties:{tags:{type:"array",items:{type:"string"}}},required:["tags"]};f(g,!0);const we=await(await LanguageModel.create({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}],temperature:.2,topK:2,initialPrompts:[{role:"system",content:`
						You are a tagging assistant.
						Your task is to suggest relevant tags for bookmarks.

						Rules:
						- Use existing tags if they are relevant.
					    - If no existing tags are relevant, suggest new ones,
						  but avoid synonyms of existing tags.
						- Do not invent overly generic tags.
						- Prefer short, lowercase, single-word tags.
						- All tags must be in English.
						- Return 3 to 5 tags.
						- Output ONLY a JSON array of strings.
					`}]})).prompt(`
			Page information:
			Title: ${s()?.title||"N/A"}
			URL: ${s()?.url||"N/A"}
			Note content: ${i()||"N/A"}
			All existing tags: ${n(v).length>0?n(v).join(", "):"N/A"}
		`.slice(0,2e3),{responseConstraint:H});f(g,!1);const he=Array.from(new Set([...l(),...JSON.parse(we).tags]));l(he)};var A=kv(),E=D(A);{let H=N(()=>s()?.url||""),se=N(()=>s()?.title||"");Cv(E,{get url(){return n(H)},get title(){return n(se)},onChangeUrl:x,onDeleteUrl:_,get shownUrlInput(){return n(d)},set shownUrlInput(we){f(d,we,!0)}})}var k=I(E,2),z=b(k),K=b(z),V=b(K),W=b(V);{var oe=H=>{var se=xv();p(H,se)};U(W,H=>{i()||H(oe)})}var J=I(W,2);J.__input=h;var q=b(J);Ge(J,H=>f(c,H),()=>n(c));var fe=I(z,2),R=b(fe);{var ee=H=>{var se=Ev(),we=b(se);{var he=me=>{var L=Tv(),Z=b(L);xe(ye=>ot(Z,`updated: ${ye??""}`),[()=>new Date(e.updatedAt).toLocaleString()]),p(me,L)};U(we,me=>{e.updatedAt&&me(he)})}p(H,se)};U(R,H=>{e.mode==="edit"&&H(ee)})}var re=I(R,2),te=b(re);Qi(te,{get selectedTags(){return l()},onChangeTags:y,get genTagsEnabled(){return n(w)},onGenTags:S,get generatingTags(){return n(g)},get shownTagInput(){return n(u)},set shownTagInput(H){f(u,H,!0)}}),xe(()=>ot(q,F)),p(t,A),ue()}st(["input"]);function Nv(t,e){de(e,!0);const{isInitedNotes:a,createNote:r,updateNote:o,deleteNote:s,getNoteById:i}=kt(),{getViewMode:l}=Va(),{setSearchParam:c,deleteSearchParam:u}=jt();let d=M("loading"),v=M("idle"),g=M(""),h=M(void 0),m=M(""),x=M(ct([]));const _=()=>{{const E=JSON.parse(localStorage.getItem("new-note-draft")||"{}");localStorage.removeItem("new-note-draft");const k=E.link?.url||"",z=E.link?.title||"";f(m,E.text||"",!0),f(x,E.tags||[],!0),f(h,{url:k||"",title:z||""},!0),f(d,"finish")}},y=N(()=>a()&&n(d)==="finish"),F=async()=>{if(n(h)?.title||n(h)?.url||n(m)||n(x).length>0){if(n(g)){const E=i(n(g));if(!E?.data)return;if((E.data.link?.url!==n(h)?.url||E.data.link?.title!==n(h)?.title||E.data.text!==n(m)||JSON.stringify(E.data.tags)!==JSON.stringify(n(x)))&&n(v)==="idle"){f(v,"loading");try{await o(n(g),{link:ss(n(h)),text:n(m),tags:n(x).slice()})}finally{f(v,"idle")}}}else if(n(v)==="idle"){f(v,"loading");try{f(g,await r({link:ss(n(h)),text:n(m),tags:n(x).slice()}),!0),c("noteId",n(g))}catch{}finally{f(v,"idle")}}}else if(n(g)&&n(v)==="idle"){f(v,"loading");try{await s(n(g)),f(g,""),u("noteId")}finally{f(v,"idle")}}};Oe(()=>{n(y)&&n(v)!=="loading"&&F()}),Ce(()=>{_()}),Ce(()=>()=>{n(g)&&u("noteId")});var w=ce(),S=D(w);{var A=E=>{Pv(E,{mode:"add",get link(){return n(h)},set link(k){f(h,k,!0)},get text(){return n(m)},set text(k){f(m,k,!0)},get tags(){return n(x)},set tags(k){f(x,k,!0)}})};U(S,E=>{n(y)&&E(A)})}p(t,w),ue()}const Av="modulepreload",Mv=function(t){return"/"+t},Ts={},pt=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(a.map(u=>{if(u=Mv(u),u in Ts)return;Ts[u]=!0;const d=u.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${v}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":Av,d||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((h,m)=>{g.addEventListener("load",h),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Dv=T('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function Iv(t){var e=Dv(),a=I(b(e),2);Tt(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=De("Reload");p(r,s)},$$slots:{default:!0}}),p(t,e)}var Rv=T('<div class="p-uzefkz"><!></div>');function Lv(t,e){de(e,!0);let a=M(!1);const{getDialogPageHeight:r}=Jo(),o=N(r);Ce(()=>{const c=setTimeout(()=>{f(a,!0)},250);return()=>{clearTimeout(c)}});var s=Rv(),i=b(s);{var l=c=>{ya(c,{})};U(i,c=>{n(a)&&c(l)})}xe(()=>qa(s,`min-height: ${n(o)??""}px;`)),p(t,s),ue()}function St(t,e){de(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>pt(()=>import("./aD2mbYvYG.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>pt(()=>import("./a6SsksiLU.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>pt(()=>import("./aRDuWq5Sz.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>pt(()=>import("./aTzbeVbL9.js"),__vite__mapDeps([8,9])),"./Pages/ChangeTags.svelte":()=>pt(()=>import("./aD548GR4s.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>pt(()=>import("./aC3GzIhfm.js"),__vite__mapDeps([10,4,3,11,12])),"./Pages/Exit.svelte":()=>pt(()=>import("./aD4cPYyck.js"),__vite__mapDeps([13,14])),"./Pages/ExportData.svelte":()=>pt(()=>import("./aBvFy98ar.js"),__vite__mapDeps([15,16,17,18,19,20])),"./Pages/Extension.svelte":()=>pt(()=>import("./aDWaD3Hlc.js"),__vite__mapDeps([21,18,19,22])),"./Pages/ImportData.svelte":()=>pt(()=>import("./aB7-DWNwV.js"),__vite__mapDeps([23,24])),"./Pages/Install.svelte":()=>pt(()=>import("./aC4aOoG09.js"),__vite__mapDeps([25,26])),"./Pages/InstallSuccess.svelte":()=>pt(()=>import("./aD-IHKT8x.js"),__vite__mapDeps([27,28])),"./Pages/Note.svelte":()=>pt(()=>import("./ahiEW7au2.js"),__vite__mapDeps([29,30])),"./Pages/Settings.svelte":()=>pt(()=>import("./aBYklvQSV.js"),__vite__mapDeps([31,18,19,16,17,32])),"./Pages/Signin.svelte":()=>pt(()=>import("./a_royFrMo.js"),__vite__mapDeps([33,4,3,11,34])),"./Pages/Signup.svelte":()=>pt(()=>import("./aBVw3FfyP.js"),__vite__mapDeps([35,11,4,3,34])),"./Pages/Subscription.svelte":()=>pt(()=>import("./aD1_i9byZ.js"),__vite__mapDeps([36,37])),"./Pages/Sync.svelte":()=>pt(()=>import("./aCIycoPCD.js"),__vite__mapDeps([38,39]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[c]){const u=r[c]();return a[l]={promise:u},a[l].module=await u,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=ce(),i=D(s);Ic(i,()=>o(e.page),l=>{Lv(l,{})},(l,c)=>{const u=N(()=>n(c).default);var d=ce(),v=D(d);Fc(v,()=>n(u),(g,h)=>{h(g,{get params(){return e.params},get hidden(){return e.hidden}})}),p(l,d)},l=>{Iv(l)}),p(t,s),ue()}var Ov=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),Fv=T('<li class="p-1ljon4s"><!></li>'),zv=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),jv=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),Bv=T('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),Hv=T('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Uv=T('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),qv=T(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),Vv=T('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Wv=T('<!> <li class="p-1ljon4s"><!></li> <!>',1),Kv=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Gv(t,e){de(e,!0);const{moveNoteToBin:a,moveNoteFromArchive:r,moveNoteToArchive:o,deleteNote:s,pinNote:i,restoreNoteFromBin:l}=kt();let c=Ne(e,"mode",3,"notes"),u=Ne(e,"shownMenu",15),d=M(!1),v=M(!1),g=M(!1),h=M(!1),m=M(!1);const x=async()=>{a(e.noteId),gt("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{l(e.noteId)}}})},_=async()=>{o(e.noteId),gt("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{r(e.noteId)}}})},y=async()=>{r(e.noteId),gt("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{o(e.noteId)}}})},F=()=>{l(e.noteId),gt("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{a(e.noteId)}}})},w=()=>{e.noteData.pinnedAt?(i(e.noteId,!1),gt("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId,!0)}}})):(i(e.noteId,!0),gt("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId,!1)}}})),f(d,!0)},S=()=>{n(v)?(f(v,!1),x()):n(m)?(f(m,!1),F()):n(g)?(f(g,!1),_()):n(h)&&(f(h,!1),y()),u(!1),f(d,!1)},A=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),gt("copied"),f(d,!0))},E=()=>{f(d,!0),Ra({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await s(e.noteId)},onCancel:async()=>{}})};let k=Zn||ga;var z=ce(),K=D(z);{var V=W=>{var oe=Kv(),J=D(oe);pe(J,()=>({"--bottom":e.showMenuUp?"100%":"auto","--top":e.showMenuUp?"auto":"100%","--right":"10px"})),xr(J.lastChild,{get startClose(){return n(d)},onClosed:S,children:(q,fe)=>{var R=Wv(),ee=D(R);{var re=me=>{var L=Fv(),Z=b(L);nt(Z,{onClick:A,get dialogMode(){return k},children:(ye,Te)=>{var Ee=Ov(),ae=D(Ee);pe(ae,()=>({"--size":"20px"})),Se(ae.lastChild,{name:"copy"}),p(ye,Ee)},$$slots:{default:!0}}),p(me,L)};U(ee,me=>{k&&e.noteData.link?.url&&me(re)})}var te=I(ee,2),H=b(te);nt(H,{onClick:w,get dialogMode(){return k},children:(me,L)=>{var Z=zv(),ye=D(Z);{let Ee=N(()=>e.noteData.pinnedAt?"pin-cancel":"pin");pe(ye,()=>({"--size":"20px"})),Se(ye.lastChild,{get name(){return n(Ee)}})}var Te=I(ye);xe(()=>ot(Te,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)),p(me,Z)},$$slots:{default:!0}});var se=I(te,2);{var we=me=>{var L=Hv(),Z=D(L),ye=b(Z);nt(ye,{onClick:()=>{f(g,c()==="notes"),f(h,c()==="archive"),f(d,!0)},get dialogMode(){return k},children:(ae,$)=>{var Y=jv(),be=D(Y);{let C=N(()=>c()==="archive"?"archive-cancel":"archive");pe(be,()=>({"--size":"20px"})),Se(be.lastChild,{get name(){return n(C)}})}var ge=I(be);xe(()=>ot(ge,` ${c()==="archive"?"Unarchive":"Archive"}`)),p(ae,Y)},$$slots:{default:!0}});var Te=I(Z,2),Ee=b(Te);nt(Ee,{onClick:()=>{f(v,!0),f(d,!0)},get dialogMode(){return k},dangerous:!0,children:(ae,$)=>{var Y=Bv(),be=D(Y),ge=b(be);pe(ge,()=>({"--size":"20px"})),Se(ge.lastChild,{name:"bin"}),p(ae,Y)},$$slots:{default:!0}}),p(me,L)},he=me=>{var L=Vv(),Z=D(L),ye=b(Z);nt(ye,{onClick:()=>{f(m,!0),f(d,!0)},get dialogMode(){return k},children:(ae,$)=>{var Y=Uv(),be=D(Y),ge=b(be);pe(ge,()=>({"--size":"20px"})),Se(ge.lastChild,{name:"bin-cancel"}),p(ae,Y)},$$slots:{default:!0}});var Te=I(Z,2),Ee=b(Te);nt(Ee,{onClick:E,get dialogMode(){return k},dangerous:!0,children:(ae,$)=>{var Y=qv(),be=D(Y),ge=b(be);pe(ge,()=>({"--size":"20px"})),Se(ge.lastChild,{name:"bin"}),p(ae,Y)},$$slots:{default:!0}}),p(me,L)};U(se,me=>{c()==="notes"||c()==="archive"?me(we):me(he,!1)})}p(q,R)},$$slots:{default:!0}}),p(W,oe)};U(K,W=>{u()&&W(V)})}p(t,z),ue()}let ea=M(null);var Yv=T('<div class="a p-1t3doe5"><!></div>'),Xv=T('<div class="b p-1t3doe5"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Jv=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Zv=T('<div class="c p-1t3doe5"><!></div>'),Qv=T('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),$v=T('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),eg=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),tg=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ng=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ag=T("<!> <!>",1),rg=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),og=T("<li><!> <!> <!> <!> <div><!> <!></div> <!></li>");function sg(t,e){de(e,!0);const{pushDialogPage:a}=$t(),{getFaviconEnabled:r,getRecordMode:o}=Va(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:c}=_a(),{getSearchParams:u,getHref:d}=jt();let v=Ne(e,"mode",3,"notes"),g=M(!1),h=M(!1),m=N(r),x=N(o),_=M(null),y=M(null);const{checkMobileSize:F}=Sr(),w=()=>{f(g,!0)},S=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),gt("copied"))};Oe(()=>{n(ea)===n(y)?f(h,!0):f(h,!1)});const A=L=>{L.preventDefault(),a(`${_e.Note}?id=${encodeURIComponent(e.noteId)}`),f(ea,null)},E=e.noteData.link?.url||"";let k=N(()=>n(g)&&n(_)?vt(n(_)).next:null);const z=L=>{L?l(e.noteId):c(e.noteId)};Ce(()=>{const L=Z=>{n(y)&&n(ea)===n(y)&&!(n(y)===Z.target||n(y).contains(Z.target))&&f(ea,null)};return document.addEventListener("click",L),()=>{document.removeEventListener("click",L)}});const K=()=>{const L=new URLSearchParams(u());return L.set(Kt,`${_e.Note}?id=${encodeURIComponent(e.noteId)}`),d(L)};var V=og(),W=b(V);{var oe=L=>{var Z=Yv(),ye=b(Z);{let Te=N(()=>i().has(e.noteId));$i(ye,{get checked(){return n(Te)},onChange:z})}p(L,Z)};U(W,L=>{s()==="multiple"&&L(oe)})}var J=I(W,2);{var q=L=>{var Z=Xv(),ye=b(Z);pe(ye,()=>({"--size":"18px"})),Se(ye.lastChild,{name:"pin"}),p(L,Z)};U(J,L=>{e.noteData.pinnedAt&&L(q)})}var fe=I(J,2);{var R=L=>{var Z=Zv(),ye=b(Z);{var Te=ae=>{el(ae,{get url(){return E}})},Ee=ae=>{var $=Jv(),Y=D($);pe(Y,()=>({"--size":"16px"})),Se(Y.lastChild,{name:"note"}),p(ae,$)};U(ye,ae=>{E?ae(Te):ae(Ee,!1)})}p(L,Z)};U(fe,L=>{n(m)&&L(R)})}var ee=I(fe,2);{var re=L=>{var Z=Qv();Z.__click=A;var ye=b(Z);xe((Te,Ee)=>{at(Z,"tabindex",e.focusHidden?-1:0),at(Z,"href",Te),ot(ye,Ee)},[K,()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),rn("focus",Z,()=>{f(ea,n(y),!0)}),p(L,Z)},te=L=>{var Z=$v(),ye=b(Z);xe(Te=>{at(Z,"tabindex",e.focusHidden?-1:0),at(Z,"href",E),ot(ye,Te)},[()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),rn("focus",Z,()=>{f(ea,n(y),!0)}),p(L,Z)};U(ee,L=>{n(x)==="note"||!E?L(re):L(te,!1)})}var H=I(ee,2);H.__focusin=()=>{f(ea,n(y),!0)};var se=b(H);{var we=L=>{var Z=ag(),ye=D(Z);{var Te=Y=>{{let be=N(()=>e.focusHidden?-1:0);Da(Y,{elem:"button",onclick:S,get tabindex(){return n(be)},title:"copy link",children:(ge,C)=>{var j=eg(),P=D(j);pe(P,()=>({"--size":"20px"})),Se(P.lastChild,{name:"copy"}),p(ge,j)},$$slots:{default:!0}})}};U(ye,Y=>{F()||Y(Te)})}var Ee=I(ye,2);{var ae=Y=>{{let be=N(()=>e.focusHidden?-1:0),ge=N(()=>e.noteData.link?.title||"unknown");Da(Y,{elem:"a",get href(){return E},get tabindex(){return n(be)},get title(){return n(ge)},children:(C,j)=>{var P=tg(),B=D(P);pe(B,()=>({"--size":"18px"})),Se(B.lastChild,{name:"open"}),p(C,P)},$$slots:{default:!0}})}},$=Y=>{{let be=N(K),ge=N(()=>e.focusHidden?-1:0);Da(Y,{title:"edit",elem:"a",get href(){return n(be)},get tabindex(){return n(ge)},onclick:A,children:(C,j)=>{var P=ng(),B=D(P);pe(B,()=>({"--size":"18px"})),Se(B.lastChild,{name:"pen"}),p(C,P)},$$slots:{default:!0}})}};U(Ee,Y=>{n(x)==="note"?Y(ae):Y($,!1)})}p(L,Z)};U(se,L=>{E&&L(we)})}var he=I(se,2);{let L=N(()=>e.focusHidden?-1:0);Da(he,{title:"show menu",elem:"button",get tabindex(){return n(L)},onclick:w,get ref(){return n(_)},set ref(Z){f(_,Z,!0)},children:(Z,ye)=>{var Te=rg(),Ee=D(Te);pe(Ee,()=>({"--size":"18px","--rotate":"90deg"})),Se(Ee.lastChild,{name:"menu"}),p(Z,Te)},$$slots:{default:!0}})}var me=I(H,2);Gv(me,{get nextFocusRef(){return n(k)},get mode(){return v()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(g)},set shownMenu(L){f(g,L,!0)}}),Ge(V,L=>f(y,L),()=>n(y)),xe(()=>{Qe(V,1,rt({e:!0,f:n(h)}),"p-1t3doe5"),Qe(H,1,rt({g:!0,h:n(h)}),"p-1t3doe5")}),p(t,V),ue()}st(["click","focusin"]);var Ka,tl,nl;class ig{constructor(e){Ie(this,Ka);Nt(this,"data");Nt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),tt(this,Ka,tl).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,tt(this,Ka,nl).call(this)),e}isEmpty(){return this.data.length===0}}Ka=new WeakSet,tl=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},nl=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class lg{constructor(e,a){Nt(this,"heap");Nt(this,"done");Nt(this,"cache",[]);this.heap=new ig(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var cg=T("<span>Back to notes</span>"),dg=T('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),ug=T("<span>Back to notes</span>"),fg=T('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),vg=T('<p class="f">No notes in bin</p>'),gg=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),hg=T('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),pg=T('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),mg=T('<div class="e p-1jdj5w3"><!></div>'),_g=T('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),wg=T('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),yg=T('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function bg(t,e){de(e,!0);const{getScrollContainer:a}=ao(),{createHandleClickDialogPage:r,createDialogPageHref:o}=$t(),{getSelectedTags:s}=An(),{getFeedOrder:i}=ki(),{checkNotesInArchive:l,checkNotesInBin:c,checkNotes:u,isInitedNotes:d}=kt(),{getSelectedMetaTags:v}=no(),{replaceSearchParams:g,getHref:h}=jt();Ko();const{getFiltredNotesLength:m,getFiltredNotes:x,getUpdatedFiltredNotesTimestamp:_}=wa();let y=N(v),F=N(m),w=N(x),S=N(_),A=N(d),E=54,k=M(0),z=M(0),K=M(0),V=M(null),W=N(a),oe=null,J=null,q=N(()=>n(y).has(Ke.ARCHIVED)?"archive":n(y).has(Ke.BIN)?"bin":"notes");const fe=N(s);Oe(()=>{n(fe),n(H),n(W)?.scrollTo(0,0)});const{enable:R}=Xo(),ee=()=>{R(),oe||(oe=requestAnimationFrame(()=>{const $=n(W)?.scrollTop||0;f(K,$,!0);const Y=Math.ceil(n(k)/E);f(z,Math.floor($/(E*Y))*(E*Y)),oe=null}))},re=()=>{J||(J=requestAnimationFrame(()=>{f(k,window.innerHeight-180||0,!0);const $=n(W)?.scrollTop||0;f(K,$,!0);const Y=Math.ceil(n(k)/E);f(z,Math.floor($/(E*Y))*(E*Y)),J=null}))};Ce(()=>{re(),ee()});const te=()=>{ee()};Oe(()=>(n(W)?.addEventListener("scroll",te),window.addEventListener("resize",re),()=>{n(W)?.removeEventListener("scroll",te),window.removeEventListener("resize",re)}));const H=N(i);Oe(()=>{n(H),n(S),f(V,new lg(n(w),($,Y)=>{if(!$||!Y||!$.data||!Y.data)return 0;if($.data.pinnedAt&&!Y.data.pinnedAt)return-1;if(!$.data.pinnedAt&&Y.data.pinnedAt)return 1;if($.data.pinnedAt&&Y.data.pinnedAt){if($.data.pinnedAt<Y.data.pinnedAt)return 1;if($.data.pinnedAt>Y.data.pinnedAt)return-1}switch(n(H)){case"newest":return $.data.updatedAt<Y.data.updatedAt?1:$.data.updatedAt>Y.data.updatedAt?-1:($.data.link?.title||"").localeCompare(Y.data.link?.title||"");case"oldest":return $.data.updatedAt>Y.data.updatedAt?1:$.data.updatedAt<Y.data.updatedAt?-1:($.data.link?.title||"").localeCompare(Y.data.link?.title||"");case"AtoZ":return($.data.link?.title||"").localeCompare(Y.data.link?.title||"");case"ZtoA":return(Y.data.link?.title||"").localeCompare($.data.link?.title||"");default:return 0}}),!0)});const se=N(()=>n(F)*E);let he=N(()=>{n(S);const $=Math.ceil(n(k)/E);let Y=Math.floor(n(z)/E);return Y=Y-Math.min(Y,$),n(V)?.get(Y,Y+$*3)||[]}),me=N(()=>E*Math.ceil(n(k)/E));const L=N(()=>n(z)-Math.min(n(z),n(me)));var Z=yg(),ye=b(Z),Te=b(ye);{var Ee=$=>{ya($,{})},ae=$=>{var Y=ce(),be=D(Y);{var ge=j=>{var P=dg(),B=I(D(P),2),Q=b(B);{let G=N(()=>h(""));Tt(Q,{element:"a",get href(){return n(G)},onClick:ve=>{ve.preventDefault(),g("")},children:(ve,ke)=>{var ie=cg();p(ve,ie)},$$slots:{default:!0}})}p(j,P)},C=j=>{var P=ce(),B=D(P);{var Q=ve=>{var ke=fg(),ie=I(D(ke),2),X=b(ie);{let ne=N(()=>h(""));Tt(X,{element:"a",get href(){return n(ne)},onClick:le=>{le.preventDefault(),g("")},children:(le,Pe)=>{var Be=ug();p(le,Be)},$$slots:{default:!0}})}p(ve,ke)},G=ve=>{var ke=ce(),ie=D(ke);{var X=le=>{var Pe=mg(),Be=b(Pe);{var Ye=$e=>{var ze=vg();p($e,ze)},Xe=$e=>{var ze=pg(),Fe=b(ze),Ve=b(Fe);{let Je=N(()=>o(_e.NewNote)),qe=N(()=>r(_e.NewNote));Tt(Ve,{element:"a",get href(){return n(Je)},get onClick(){return n(qe)},children:(Mt,Dt)=>{var Pt=gg(),pn=D(Pt);pe(pn,()=>({"--size":"18px","--color":"#b0b0b0"})),Se(pn.lastChild,{name:"plus"}),p(Mt,Pt)},$$slots:{default:!0}})}var Re=I(Fe,4),et=b(Re);{let Je=N(()=>o(_e.ImportData)),qe=N(()=>r(_e.ImportData));Tt(et,{element:"a",get href(){return n(Je)},get onClick(){return n(qe)},children:(Mt,Dt)=>{var Pt=hg(),pn=D(Pt);pe(pn,()=>({"--size":"18px","--color":"#b0b0b0"})),Se(pn.lastChild,{name:"import"}),p(Mt,Pt)},$$slots:{default:!0}})}p($e,ze)};U(Be,$e=>{n(q)==="bin"?$e(Ye):$e(Xe,!1)})}p(le,Pe)},ne=le=>{var Pe=ce(),Be=D(Pe);{var Ye=$e=>{var ze=_g();p($e,ze)},Xe=$e=>{var ze=wg(),Fe=b(ze);En(Fe,23,()=>n(he),Ve=>Ve.data,(Ve,Re,et)=>{var Je=ce(),qe=D(Je);{var Mt=Dt=>{{let Pt=N(()=>n(et)*E<n(K)-n(L)-E/2||n(et)*E>n(K)-n(L)+Math.floor(n(k)/E)*E),pn=N(()=>(n(et)+3)*E<n(K)-n(L)-E/2||(n(et)+3)*E>n(K)-n(L)+Math.floor(n(k)/E)*E);sg(Dt,{get mode(){return n(q)},get focusHidden(){return n(Pt)},get showMenuUp(){return n(pn)},get noteId(){return n(Re).id},get noteData(){return n(Re).data}})}};U(qe,Dt=>{n(Re).data&&Dt(Mt)})}p(Ve,Je)}),xe(Ve=>{qa(ze,Ve),qa(Fe,`transform: translateY(${n(L)??""}px);`)},[()=>`--minHeight: ${Math.max((n(se)>n(k),n(se)),0)}px`]),p($e,ze)};U(Be,$e=>{n(he).length===0?$e(Ye):$e(Xe,!1)},!0)}p(le,Pe)};U(ie,le=>{!c()&&!l()&&!u()?le(X):le(ne,!1)},!0)}p(ve,ke)};U(B,ve=>{n(q)==="archive"&&!l()?ve(Q):ve(G,!1)},!0)}p(j,P)};U(be,j=>{n(q)==="bin"&&!c()?j(ge):j(C,!1)},!0)}p($,Y)};U(Te,$=>{n(A)?$(ae,!1):$(Ee)})}p(t,Z),ue()}var Sg=T('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function Cg(t){var e=Sg(),a=I(D(e),2),r=b(a);bg(r,{}),p(t,e)}function xg(t,e){de(e,!0);const a=Mn();let r=Ne(e,"animationRef",7),o=Ne(e,"dialog",7);Zi(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let u=0,d=0,v=()=>1;if(r().current){r().current.pause();let h=Number(r().current.currentTime);ur()&&(h=Number(h)+50,r().current.currentTime=Math.min(Math.max(kn-1,h),h));const m=r().current.effect?.getComputedTiming().progress||0;v=()=>m,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(h=>requestAnimationFrame(h)),d=1-v();const g=d*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-d)*.1}`),a.swipingRatio=Math.abs(1-d)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${g}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:u,currentPosition:g,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:u,width:d})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-u/d)*.1}`),o().style.transform=`translate3d(${u}px, 0, 0)`,a.swipingRatio=Math.abs(1-u/d)*25)},onFinish:({swipeVelocity:u,currentPosition:d,width:v,actionThreshold:g,initialPosition:h})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const m=()=>Math.abs(h+d)/v*100;let x=null;if(u<=-Xn?x="open":u>=Xn?x="close":x=Math.abs(m())>g?"close":"open",r().progress=Ji(m()/100),x==="close"){const _=(1-(r().progress||0))*kn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const _=(r().progress||1)*kn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),ue()}var Tg=T('<div class="d p-oxlraq"> </div>'),Eg=T('<button class="e f p-oxlraq"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),kg=T('<a class="e g p-oxlraq"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Pg=T('<div><div class="a p-oxlraq"><div class="b p-oxlraq"><div class="c p-oxlraq"><!> <!> <!></div></div></div> <!> <!></div>'),Ng=T("<dialog><!></dialog> <!>",1);function Ag(t,e){de(e,!0);const{isScrolling:a,enable:r}=Xo();let o=M(null),s=M(null),i={};const l=Mn(),{checkLeftEnd:c,checkLeftStart:u,setLeftEnd:d,setLeftStart:v,getCountDialog:g}=en(),h=N(u),m=N(c);let x=N(()=>l.working);const _=()=>{e.dialogState!=="opened"&&e.onStartOpening()},y=()=>{e.onClose()},F=()=>{e.onSwipe()},w=oe=>{oe.preventDefault(),y()};Ce(()=>(n(o)?.addEventListener("close",y),n(o)?.addEventListener("cancel",w),()=>{n(o)?.removeEventListener("close",y),n(o)?.removeEventListener("cancel",w)})),Oe(()=>{g()>0&&(l.swipingRatio=25)}),Oe(()=>{e.dialogState==="opening"?zt(()=>{requestAnimationFrame(()=>{if(!n(o))return;const oe=(i.progress||1)*kn,J=n(o).style.transform||`translate3d(${n(h)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const q=n(o)?.animate([{transform:J},{transform:"translate3d(0, 0, 0)"}],{duration:oe,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=q,q&&(q.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=Yn().duration,q.cancel(),i.current=void 0,i.progress=void 0,n(h)&&v(!1)})})}):e.dialogState==="closing"&&zt(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const oe=(1-(i.progress||0))*kn,J=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const q=n(o)?.animate([{transform:J},{transform:`translate3d(${n(m)?"-100%":"100%"}, 0, 0)`}],{duration:oe,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=q,q&&(q.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=Yn().duration,q.cancel(),i.current=void 0,i.progress=void 0,n(m)&&d(!1)})})})});const S=()=>{r()},A=N(a);Ce(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),ur()&&n(o).getBoundingClientRect(),!n(x)){e.onOpened();return}e.onStartOpening()}});var E=Ng(),k=D(E),z=b(k);{var K=oe=>{var J=Pg(),q=b(J),fe=b(q),R=b(fe),ee=b(R);{var re=Z=>{var ye=Tg(),Te=b(ye);xe(()=>ot(Te,e.title)),p(Z,ye)};U(ee,Z=>{e.title&&Z(re)})}var te=I(ee,2);{var H=Z=>{var ye=Eg();ye.__click=y;var Te=b(ye);pe(Te,()=>({"--size":"32px"})),Se(Te.lastChild,{name:"back"});var Ee=I(Te,2);dt(Ee,{children:(ae,$)=>{var Y=De("back");p(ae,Y)}}),p(Z,ye)};U(te,Z=>{e.blocked||Z(H)})}var se=I(te,2);{var we=Z=>{var ye=kg();ye.__click=function(...ae){e.onOpenWindow?.apply(this,ae)};var Te=b(ye);pe(Te,()=>({"--scale":"0.7","--size":"32px"})),Se(Te.lastChild,{name:"open-window"});var Ee=I(Te,2);dt(Ee,{children:(ae,$)=>{var Y=De("open window");p(ae,Y)}}),xe(()=>at(ye,"href",e.openWindowHref)),p(Z,ye)};U(se,Z=>{e.onOpenWindow&&Z(we)})}var he=I(q,2);Ae(he,()=>e.children);var me=I(he,2);{var L=Z=>{Zo(Z,{})};U(me,Z=>{e.dialogState==="opened"&&Z(L)})}Ge(J,Z=>f(s,Z),()=>n(s)),xe(()=>Qe(J,1,rt({o:!0,p:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-oxlraq")),rn("scroll",J,S),p(oe,J)};U(z,oe=>{e.dialogState!=="preOpening"&&oe(K)})}Ge(k,oe=>f(o,oe),()=>n(o));var V=I(k,2);{var W=oe=>{xg(oe,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:_,onClose:y,onSwipe:F,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};U(V,oe=>{n(s)&&!n(A)&&!e.blocked&&!e.hidden&&oe(W)})}xe(()=>Qe(k,1,rt({h:!0,i:n(x),j:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",k:e.hidden,l:e.dialogState==="opened",m:n(h),n:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-oxlraq")),p(t,E),ue()}st(["click"]);function Mg(t,e){de(e,!0);let a=Ne(e,"hidden",3,!1),r=Ne(e,"onClosed",3,()=>{}),o=M(0);Ce(()=>{const y=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",y),y(),()=>{window.removeEventListener("resize",y)}});const{dialogDec:s,dialogInc:i}=en(),l=Mn();Ce(()=>(i(),()=>{s()}));let c=M("closed");const u=()=>{f(c,"opening")},d=()=>{f(c,"swiping")},v=()=>{f(c,"opened")},g=()=>{e.onClose(),f(c,"closing")},h=()=>{f(c,"closed"),r()()};Oe(()=>{e.shown&&n(c)==="closed"?f(c,"preOpening"):!e.shown&&n(c)==="opened"&&f(c,"closing")}),Oe(()=>{n(c)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(c)==="opened"||n(c)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var m=ce(),x=D(m);{var _=y=>{Ag(y,{get dialogWidth(){return n(o)},get dialogState(){return n(c)},get title(){return e.title},onStartOpening:u,onOpened:v,onClose:g,onClosed:h,onSwipe:d,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(F,w)=>{var S=ce(),A=D(S);Ae(A,()=>e.children),p(F,S)},$$slots:{default:!0}})};U(x,y=>{n(c)!=="closed"&&y(_)})}p(t,m),ue()}const Dg=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};Ce(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Ce(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Ig=T('<button class="d e p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Rg=T('<div class="f p-2jn3ll"> </div>'),Lg=T('<button class="d g p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Og=T('<dialog><div class="a p-2jn3ll"><div class="b p-2jn3ll"><div class="c p-2jn3ll"><div><!></div> <!> <div><!></div></div></div> <!></div></dialog> <!>',1);function Fg(t,e){de(e,!0);let a=Ne(e,"blockedDialog",3,!1),r=Ne(e,"hiddenDialog",3,!1),o=Ne(e,"isDesktopAnimationOff",3,!1),s=M(null),i=M(null),l=M(!1);Dg({getDialog:()=>n(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=Mn();Oe(()=>{e.stateDialog==="closing"&&(c.working?n(s)?.addEventListener("transitionend",()=>{n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:u}=Jo(),d=N(u);Ce(()=>{setTimeout(()=>{f(l,!0)},50)});var v=Og(),g=D(v),h=b(g),m=b(h),x=b(m),_=b(x),y=b(_);{var F=V=>{var W=Ig();W.__click=()=>{e.onStartBack()};var oe=b(W);pe(oe,()=>({"--size":"28px"})),Se(oe.lastChild,{name:"back"});var J=I(oe,2);dt(J,{children:(q,fe)=>{var R=De("back");p(q,R)}}),p(V,W)};U(y,V=>{(!(a()||r())||a())&&e.onStartBack&&V(F)})}var w=I(_,2);{var S=V=>{var W=Rg(),oe=b(W);xe(()=>ot(oe,e.title)),p(V,W)};U(w,V=>{e.title&&V(S)})}var A=I(w,2),E=b(A);{var k=V=>{var W=Lg();W.__click=()=>{e.onStartClose()};var oe=b(W);pe(oe,()=>({"--size":"28px"})),Se(oe.lastChild,{name:"close"});var J=I(oe,2);dt(J,{children:(q,fe)=>{var R=De("close");p(q,R)}}),p(V,W)};U(E,V=>{a()||r()||V(k)})}var z=I(m,2);Ae(z,()=>e.children),Ge(h,V=>f(i,V),()=>n(i)),Ge(g,V=>f(s,V),()=>n(s));var K=I(g,2);Qo(K,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose}}),xe(()=>{qa(g,`height: ${n(d)+74}px`),Qe(g,1,rt({h:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o(),m:r()}),"p-2jn3ll")}),p(t,v),ue()}st(["click"]);const zg=({onStartClose:t,onClosed:e})=>{let a=M("close");return{get state(){return n(a)},set state(i){f(a,i,!0)},handleStartClose:(i=!1)=>{i||(f(a,"closing"),t?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function jg(t,e){de(e,!0);let a=Ne(e,"blockedDialog",3,!1),r=Ne(e,"hiddenDialog",3,!1),o=Ne(e,"onStartClose",3,()=>{}),s=Ne(e,"onClosed",3,()=>{}),i=zg({onStartClose:o(),onClosed:s()});const{dialogDec:l,dialogInc:c}=en();Ce(()=>(c(),()=>{l()})),Oe(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const u=h=>{h.key==="Escape"&&a()&&(h.preventDefault(),h.stopPropagation())};Ce(()=>(document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}));var d=ce(),v=D(d);{var g=h=>{Fg(h,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(m,x)=>{var _=ce(),y=D(_);Ae(y,()=>e.children),p(m,_)},$$slots:{default:!0}})};U(v,h=>{i.state!=="close"&&h(g)})}p(t,d),ue()}const Es=(t,e=je,a=je,r)=>{let o=_r(()=>bl(r?.(),!1));var s=ce(),i=D(s);{var l=u=>{ft(u,{children:(d,v)=>{St(d,{get hidden(){return n(o)},get page(){return _e.Settings}})},$$slots:{default:!0}})},c=u=>{var d=ce(),v=D(d);{var g=m=>{ft(m,{children:(x,_)=>{Nv(x,{})},$$slots:{default:!0}})},h=m=>{var x=ce(),_=D(x);{var y=w=>{ft(w,{children:(S,A)=>{St(S,{get params(){return a()},get hidden(){return n(o)},get page(){return _e.Note}})},$$slots:{default:!0}})},F=w=>{var S=ce(),A=D(S);{var E=z=>{ft(z,{children:(K,V)=>{St(K,{get hidden(){return n(o)},get page(){return _e.ImportData}})},$$slots:{default:!0}})},k=z=>{var K=ce(),V=D(K);{var W=J=>{ft(J,{children:(q,fe)=>{St(q,{get hidden(){return n(o)},get page(){return _e.ExportData}})},$$slots:{default:!0}})},oe=J=>{var q=ce(),fe=D(q);{var R=re=>{ft(re,{children:(te,H)=>{sv(te,{})},$$slots:{default:!0}})},ee=re=>{var te=ce(),H=D(te);{var se=he=>{ft(he,{children:(me,L)=>{St(me,{get hidden(){return n(o)},get page(){return _e.Install}})},$$slots:{default:!0}})},we=he=>{var me=ce(),L=D(me);{var Z=Te=>{ft(Te,{children:(Ee,ae)=>{St(Ee,{get hidden(){return n(o)},get page(){return _e.InstallSuccess}})},$$slots:{default:!0}})},ye=Te=>{var Ee=ce(),ae=D(Ee);{var $=be=>{ft(be,{children:(ge,C)=>{St(ge,{get hidden(){return n(o)},get page(){return _e.Auth}})},$$slots:{default:!0}})},Y=be=>{var ge=ce(),C=D(ge);{var j=B=>{ft(B,{children:(Q,G)=>{St(Q,{get hidden(){return n(o)},get page(){return _e.Signup}})},$$slots:{default:!0}})},P=B=>{var Q=ce(),G=D(Q);{var ve=ie=>{ft(ie,{children:(X,ne)=>{St(X,{get hidden(){return n(o)},get page(){return _e.Signin}})},$$slots:{default:!0}})},ke=ie=>{var X=ce(),ne=D(X);{var le=Be=>{ft(Be,{children:(Ye,Xe)=>{St(Ye,{get hidden(){return n(o)},get page(){return _e.AccessKeys}})},$$slots:{default:!0}})},Pe=Be=>{var Ye=ce(),Xe=D(Ye);{var $e=Fe=>{ft(Fe,{children:(Ve,Re)=>{St(Ve,{get hidden(){return n(o)},get page(){return _e.Account}})},$$slots:{default:!0}})},ze=Fe=>{var Ve=ce(),Re=D(Ve);{var et=qe=>{ft(qe,{children:(Mt,Dt)=>{St(Mt,{get hidden(){return n(o)},get page(){return _e.ConfirmAccessKey}})},$$slots:{default:!0}})},Je=qe=>{var Mt=ce(),Dt=D(Mt);{var Pt=ba=>{ft(ba,{children:(Tr,$o)=>{St(Tr,{get hidden(){return n(o)},get page(){return _e.Exit}})},$$slots:{default:!0}})},pn=ba=>{var Tr=ce(),$o=D(Tr);{var al=ro=>{var es=ce(),rl=D(es);{var ol=Sa=>{ft(Sa,{children:(Er,ts)=>{St(Er,{get hidden(){return n(o)},get page(){return _e.Sync}})},$$slots:{default:!0}})},sl=Sa=>{var Er=ce(),ts=D(Er);{var il=Ca=>{ft(Ca,{children:(kr,ns)=>{St(kr,{get hidden(){return n(o)},get page(){return _e.Subscription}})},$$slots:{default:!0}})},ll=Ca=>{var kr=ce(),ns=D(kr);{var cl=xa=>{ft(xa,{children:(oo,ul)=>{St(oo,{get hidden(){return n(o)},get page(){return _e.About}})},$$slots:{default:!0}})},dl=xa=>{ft(xa,{children:(oo,ul)=>{tv(oo,{})},$$slots:{default:!0}})};U(ns,xa=>{e()===_e.About?xa(cl):xa(dl,!1)},!0)}p(Ca,kr)};U(ts,Ca=>{e()===_e.Subscription?Ca(il):Ca(ll,!1)},!0)}p(Sa,Er)};U(rl,Sa=>{e()===_e.Sync?Sa(ol):Sa(sl,!1)},!0)}p(ro,es)};U($o,ro=>{e(),_e.Extension,ro(al,!1)},!0)}p(ba,Tr)};U(Dt,ba=>{e()===_e.Exit?ba(Pt):ba(pn,!1)},!0)}p(qe,Mt)};U(Re,qe=>{e()===_e.ConfirmAccessKey?qe(et):qe(Je,!1)},!0)}p(Fe,Ve)};U(Xe,Fe=>{e()===_e.Account?Fe($e):Fe(ze,!1)},!0)}p(Be,Ye)};U(ne,Be=>{e()===_e.AccessKeys?Be(le):Be(Pe,!1)},!0)}p(ie,X)};U(G,ie=>{e()===_e.Signin?ie(ve):ie(ke,!1)},!0)}p(B,Q)};U(C,B=>{e()===_e.Signup?B(j):B(P,!1)},!0)}p(be,ge)};U(ae,be=>{e()===_e.Auth?be($):be(Y,!1)},!0)}p(Te,Ee)};U(L,Te=>{e()===_e.InstallSuccess?Te(Z):Te(ye,!1)},!0)}p(he,me)};U(H,he=>{e()===_e.Install?he(se):he(we,!1)},!0)}p(re,te)};U(fe,re=>{e()===_e.AccountSetup?re(R):re(ee,!1)},!0)}p(J,q)};U(V,J=>{e()===_e.ExportData?J(W):J(oe,!1)},!0)}p(z,K)};U(A,z=>{e()===_e.ImportData?z(E):z(k,!1)},!0)}p(w,S)};U(_,w=>{e()===_e.Note?w(y):w(F,!1)},!0)}p(m,x)};U(v,m=>{e()===_e.NewNote?m(g):m(h,!1)},!0)}p(u,d)};U(i,u=>{e()===_e.Settings?u(l):u(c,!1)})}p(t,s)};var Bg=T("<!> <!>",1);function Hg(t,e){de(e,!0);const a=Gc(e,["$$slots","$$events","$$legacy"]),{checkBlockedDialog:r,checkClosableDialog:o}=en(),{sidebarClose:s,getSidebarState:i}=br(),l=N(r),c=N(o),{getDialogPages:u}=$t(),{getAccount:d}=Yo();let v=N(u),g=N(()=>d()!==void 0);const{checkMobileSize:h}=Sr();let m=M(ct([]));const x=N(h),{clearDialogPages:_,popDialogPage:y}=$t(),{checkLeftStart:F}=en();let w=N(F);Oe(()=>{u().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const S=()=>{y()},A=()=>{_()};Oe(()=>{n(v),n(x),zt(()=>{if(n(x))n(v).length>=n(m).length||n(w)?f(m,n(v).map(J=>({page:J,shown:!0})),!0):f(m,n(m).map((J,q)=>({page:J.page,shown:q<n(v).length})),!0);else if(n(v).length>=n(m).length)f(m,n(v).map(J=>({page:J,shown:!0})),!0);else{if(n(v).length===0){f(m,[{page:n(m)[n(m).length-1].page,shown:!1}],!0);return}f(m,n(v).map(J=>({page:J,shown:!0})),!0)}})});const E=()=>{f(m,n(v).map(J=>({page:J,shown:!0})),!0)};var k=Bg(),z=D(k);{var K=J=>{Cg(J)};U(z,J=>{n(g)&&J(K)})}var V=I(z,2);{var W=J=>{var q=ce(),fe=D(q);En(fe,19,()=>n(m),R=>R.page,(R,ee,re)=>{const te=N(()=>n(ee).page.split("?")[1]),H=N(()=>n(ee).page.split("?")[0]),se=N(()=>n(re)!==n(m).length-1&&!!n(m)[n(re)+1]?.shown),we=N(()=>n(re)===0);{let he=N(()=>ys[n(H)]||""),me=N(()=>n(l)||n(we)&&!n(c));Mg(R,To({get shown(){return n(ee).shown},get title(){return n(he)},get hidden(){return n(se)},get blocked(){return n(me)},onClose:S,onClosed:E},()=>a,{children:(L,Z)=>{Es(L,()=>n(H),()=>n(te),()=>n(se))},$$slots:{default:!0}}))}}),p(J,q)},oe=J=>{var q=ce(),fe=D(q);{var R=ee=>{const re=N(()=>n(m)[n(m).length-1].page.split("?")[1]),te=N(()=>n(m)[n(m).length-1].page.split("?")[0]),H=N(()=>n(m)[n(m).length-1].shown),se=N(()=>n(m).length===1);{let we=N(()=>ys[n(te)]||""),he=N(()=>n(l)||!n(c)),me=N(()=>n(l)||n(se)?void 0:S);jg(ee,{get shownDialog(){return n(H)},get title(){return n(we)},get blockedDialog(){return n(he)},hiddenDialog:!1,get onStartBack(){return n(me)},onStartClose:A,onClosed:E,children:(L,Z)=>{Es(L,()=>n(te),()=>n(re))},$$slots:{default:!0}})}};U(fe,ee=>{n(m).length>0&&ee(R)},!0)}p(J,q)};U(V,J=>{h()?J(W):J(oe,!1)})}p(t,k),ue()}function Ug(t,e){de(e,!1);let a=0;Ce(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),Wo(),ue()}const qg=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var Vg=T('<div><button class="d p-11qzo3t"><!> <span class="e p-11qzo3t"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),Wg=T('<!> <!> <!> <!> <main><div class="a p-11qzo3t"><div class="b p-11qzo3t"><!></div></div> <div class="c p-11qzo3t"><!></div></main> <!>',1);function Kg(t,e){de(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=jt(),{hasDialogPage:s}=$t(),{setScrollContainer:i}=ao(),{getAccount:l,init:c}=Yo(),{isInitedNotes:u}=kt(),{isInitedSettings:d}=Va(),{getDialogPages:v}=$t(),{createBroadcastChannel:g,tabId:h}=to(),m=g(),{getSidebarState:x}=br(),{setClosableDialog:_}=en(),{getViewMode:y}=Va(),F=()=>{qg()?a(`${Kt}=${_e.AccountSetup}`):a(`${Kt}=${_e.Install}`)};Ce(()=>{c(j=>{j===void 0?F():(s(_e.AccountSetup)&&a(""),j?f(k,j):f(k,null))});const C=async j=>{const P=JSON.parse(j.data);if(P.tabId&&P.tabId===h)return;const B=P;B.type==="initLocalAccount"||B.type==="initCloudAccount"||B.type==="updateAccount"||B.type==="disconnectCloudAccount"?a(""):B.type==="exit"&&F()};return m.addEventListener(C),()=>m.removeEventListener(C)});const w=Mn();Ce(async()=>{await new Promise(C=>setTimeout(C,250)),await pi(),w.working=!0});let S=M(!1),A=0,E=N(()=>v().length>0),k=N(l),z=N(u),K=N(d),V=M(null);const W=()=>{n(V)&&n(V).scrollTo({top:0})};Oe(()=>{_(n(k)!==void 0)}),Oe(()=>{i(n(V))});const oe=()=>{if(n(V)){const C=n(V).scrollTop||0;C===0?f(S,!1):!n(S)&&A>C?f(S,!0):n(S)&&A+50<C&&f(S,!1),A=C}},J=()=>{oe()};Oe(()=>(n(V)?.addEventListener("scroll",J),window.addEventListener("resize",J),()=>{n(V)?.removeEventListener("scroll",J),window.removeEventListener("resize",J)}));const q=N(x);let fe=N(()=>w.swipingRatio);const R=()=>{const C=new URLSearchParams(o());if(s(_e.NewNote)){const j=C.get("noteId")||"";return r(j?C.toString().replace(_e.NewNote,`${_e.Note}?id=${encodeURIComponent(j)}`):C)}return r(C)},ee=async()=>{const C=await chrome.windows.getCurrent();if(!C)return;const j=420,P=700,B=(C.left||0)+(C.width||0)-j-10,Q=(C.top||0)+90;await chrome.windows.create({url:R(),type:"popup",width:j,height:P,left:B,top:Q}),window.close()},re=N(y),te=N(()=>n(re)==="popup"||n(re)==="sidebar"?{onOpenWindow:ee,openWindowHref:R()}:{});var H=Wg(),se=D(H);Ug(se,{});var we=I(se,2);Tu(we,{});var he=I(we,2);Zo(he,{});var me=I(he,2);Ku(me,{});var L=I(me,2),Z=b(L),ye=b(Z),Te=b(ye);{var Ee=C=>{Qf(C,To(()=>n(te)))};U(Te,C=>{n(K)&&n(k)!==void 0&&C(Ee)})}var ae=I(Z,2),$=b(ae);{var Y=C=>{Hg(C,To(()=>n(te)))};U($,C=>{n(z)&&n(K)&&C(Y)})}Ge(L,C=>f(V,C),()=>n(V));var be=I(L,2);{var ge=C=>{var j=Vg(),P=b(j);P.__click=W;var B=b(P);dt(B,{children:(ve,ke)=>{var ie=De("top");p(ve,ie)}});var Q=I(B,2),G=b(Q);pe(G,()=>({"--rotate":"90deg","--size":"28px"})),Se(G.lastChild,{name:"back"}),xe(()=>{qa(j,`--swiping-ratio: ${n(fe)}; --transition-timing-default: ${w.duration}s;`),Qe(j,1,rt({i:!0,g:w.working&&!w.isSwiping,j:n(E)||n(q)!=="closed"}),"p-11qzo3t")}),p(C,j)};U(be,C=>{n(S)&&C(ge)})}xe(()=>{qa(L,`--swiping-ratio: ${n(fe)}; --transition-timing-default: ${w.duration}s;`),Qe(L,1,rt({f:!0,g:w.working&&!w.isSwiping,h:n(q)!=="closed"}),"p-11qzo3t")}),p(t,H),ue()}st(["click"]);function Gg(t){Qd(t,{children:(e,a)=>{Kg(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Nc(Gg,{target:document.getElementById("app")});export{Pv as $,N as A,Tt as B,jt as C,Yo as D,Wo as E,vr as F,rn as G,av as H,Se as I,kt as J,Sr as K,ya as L,Va as M,Qi as N,Ln as O,_e as P,Ge as Q,eh as R,$g as S,iu as T,lu as U,dt as V,Kt as W,ur as X,zt as Y,ht as Z,ss as _,f as a,to as a0,Zg as a1,qc as a2,qg as a3,Jg as a4,Ne as a5,qa as a6,Qg as a7,M as b,b as c,pe as d,En as e,T as f,n as g,at as h,p as i,U as j,Qe as k,rt as l,ue as m,D as n,Ce as o,de as p,ot as q,st as r,I as s,xe as t,$t as u,en as v,ct as w,Oe as x,ce as y,De as z};
