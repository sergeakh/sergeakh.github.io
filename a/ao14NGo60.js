const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aaAgPVzZz.js","a/a3TquqTin.css","a/aCpvr3YBk.js","a/a9q_jSmK4.js","a/aBEGDcNQV.js","a/aBrkJtqMH.css","a/aDupHBlIz.js","a/aDB02xhFr.css","a/aDtgH2BL2.js","a/a54d_SC5m.css","a/aBbI7d9Ih.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/ax1uyCwib.js","a/aY1d2PU1k.css","a/aCcO59oaW.js","a/aCqmJB6_o.js","a/aC2dX6fIB.css","a/aDwHK4Kuu.js","a/aBeWFm1o7.css","a/aBlmo2At2.css","a/aDg--xMM_.js","a/aCeh8XjKC.css","a/anxw3LcZi.js","a/a2arbkmgI.css","a/ah-vmgF9S.js","a/aBpR5g6jV.css","a/aDbiyKNUi.js","a/aBem4Ctjp.css","a/ablhppRyV.js","a/aBdnakgrk.css","a/aI0a7VS2B.js","a/aB5Vv7TwJ.css","a/agkPWrE3g.js","a/aCH18nfIo.css","a/aC6OUrAV4.js","a/a3UHpjjb5.js","a/aCb6DfA6m.css","a/aC5abSOqQ.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var vl=Object.defineProperty;var ls=t=>{throw TypeError(t)};var gl=(t,e,a)=>e in t?vl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Lt=(t,e,a)=>gl(t,typeof e!="symbol"?e+"":e,a),go=(t,e,a)=>e.has(t)||ls("Cannot "+a);var j=(t,e,a)=>(go(t,e,"read from private field"),a?a.call(t):e.get(t)),Ie=(t,e,a)=>e.has(t)?ls("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),Me=(t,e,a,r)=>(go(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),et=(t,e,a)=>(go(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const hl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};hl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const pl=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};pl();const wo=!1;var Wo=Array.isArray,ml=Array.prototype.indexOf,eo=Array.from,_l=Object.defineProperty,Jn=Object.getOwnPropertyDescriptor,Is=Object.getOwnPropertyDescriptors,Ls=Object.prototype,wl=Array.prototype,to=Object.getPrototypeOf,cs=Object.isExtensible;function rr(t){return typeof t=="function"}const je=()=>{};function yl(t){return typeof t?.then=="function"}function bl(t){return t()}function yo(t){for(var e=0;e<t.length;e++)t[e]()}function Rs(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function Sl(t,e,a=!1){return t===void 0?a?e():e:t}const Tt=2,Ko=4,no=8,Cl=1<<24,On=16,Fn=32,Ca=64,ao=128,fn=512,Pt=1024,qt=2048,yn=4096,Xt=8192,Nn=16384,Go=32768,aa=65536,ds=1<<17,Os=1<<18,er=1<<19,Fs=1<<20,En=1<<25,ba=32768,bo=1<<21,Yo=1<<22,Zn=1<<23,Qn=Symbol("$state"),zs=Symbol("legacy props"),xl=Symbol(""),La=new class extends Error{constructor(){super(...arguments);Lt(this,"name","StaleReactionError");Lt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function js(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Tl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function kl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function El(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Pl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Nl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Al(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ml(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Dl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Il(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ll(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Rl=1,Ol=2,Bs=4,Fl=8,zl=16,jl=1,Bl=2,Hl=4,Ul=8,ql=16,Vl=1,Wl=2,Ct=Symbol(),Kl="http://www.w3.org/1999/xhtml";function Hs(t){return t===this.v}function Gl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Us(t){return!Gl(t,this.v)}let tr=!1,Yl=!1;function Xl(){tr=!0}const Jl=[];function Ra(t,e=!1,a=!1){return jr(t,new Map,"",Jl,null,a)}function jr(t,e,a,r,o=null,s=!1){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Wo(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var c=0;c<t.length;c+=1){var d=t[c];c in t&&(l[c]=jr(d,e,a,r,null,s))}return l}if(to(t)===Ls){l={},e.set(t,l),o!==null&&e.set(o,l);for(var u in t)l[u]=jr(t[u],e,a,r,null,s);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return jr(t.toJSON(),e,a,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Ze=null;function Ka(t){Ze=t}function ct(t){return qs().get(t)}function dt(t,e){return qs().set(t,e),e}function de(t,e=!1,a){Ze={p:Ze,i:!1,c:null,e:null,s:t,x:null,l:tr&&!e?{s:null,u:null,$:[]}:null}}function ue(t){var e=Ze,a=e.e;if(a!==null){e.e=null;for(var r of a)ci(r)}return t!==void 0&&(e.x=t),e.i=!0,Ze=e.p,t??{}}function nr(){return!tr||Ze!==null&&Ze.l===null}function qs(t){return Ze===null&&js(),Ze.c??(Ze.c=new Map(Zl(Ze)||void 0))}function Zl(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let fa=[];function Vs(){var t=fa;fa=[],yo(t)}function xa(t){if(fa.length===0&&!ja){var e=fa;queueMicrotask(()=>{e===fa&&Vs()})}fa.push(t)}function Ql(){for(;fa.length>0;)Vs()}function Ws(t){var e=He;if(e===null)return Le.f|=Zn,t;if((e.f&Go)===0){if((e.f&ao)===0)throw t;e.b.error(t)}else Ga(t,e)}function Ga(t,e){for(;e!==null;){if((e.f&ao)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Rr=new Set;let Ue=null,Br=null,ln=null,on=[],ro=null,So=!1,ja=!1;var Ha,Ua,va,ga,Sr,qa,Va,xt,Co,sr,xo,Ks,Gs;const Xr=class Xr{constructor(){Ie(this,xt);Lt(this,"committed",!1);Lt(this,"current",new Map);Lt(this,"previous",new Map);Ie(this,Ha,new Set);Ie(this,Ua,new Set);Ie(this,va,0);Ie(this,ga,0);Ie(this,Sr,null);Ie(this,qa,new Set);Ie(this,Va,new Set);Lt(this,"skipped_effects",new Set);Lt(this,"is_fork",!1)}is_deferred(){return this.is_fork||j(this,ga)>0}process(e){on=[],Br=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)et(this,xt,Co).call(this,r,a);this.is_fork||et(this,xt,Ks).call(this),this.is_deferred()?(et(this,xt,sr).call(this,a.effects),et(this,xt,sr).call(this,a.render_effects)):(Br=this,Ue=null,us(a.render_effects),us(a.effects),Br=null,j(this,Sr)?.resolve()),ln=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&Zn)===0&&(this.current.set(e,e.v),ln?.set(e,e.v))}activate(){Ue=this,this.apply()}deactivate(){Ue===this&&(Ue=null,ln=null)}flush(){if(this.activate(),on.length>0){if(Xs(),Ue!==null&&Ue!==this)return}else j(this,va)===0&&this.process([]);this.deactivate()}discard(){for(const e of j(this,Ua))e(this);j(this,Ua).clear()}increment(e){Me(this,va,j(this,va)+1),e&&Me(this,ga,j(this,ga)+1)}decrement(e){Me(this,va,j(this,va)-1),e&&Me(this,ga,j(this,ga)-1),this.revive()}revive(){for(const e of j(this,qa))j(this,Va).delete(e),At(e,qt),Sa(e);for(const e of j(this,Va))At(e,yn),Sa(e);this.flush()}oncommit(e){j(this,Ha).add(e)}ondiscard(e){j(this,Ua).add(e)}settled(){return(j(this,Sr)??Me(this,Sr,Rs())).promise}static ensure(){if(Ue===null){const e=Ue=new Xr;Rr.add(Ue),ja||Xr.enqueue(()=>{Ue===e&&e.flush()})}return Ue}static enqueue(e){xa(e)}apply(){}};Ha=new WeakMap,Ua=new WeakMap,va=new WeakMap,ga=new WeakMap,Sr=new WeakMap,qa=new WeakMap,Va=new WeakMap,xt=new WeakSet,Co=function(e,a){e.f^=Pt;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Fn|Ca))!==0,i=s&&(o&Pt)!==0,l=i||(o&Xt)!==0||this.skipped_effects.has(r);if((r.f&ao)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=Pt:(o&Ko)!==0?a.effects.push(r):Pr(r)&&((r.f&On)!==0&&j(this,qa).add(r),pr(r));var c=r.first;if(c!==null){r=c;continue}}var d=r.parent;for(r=r.next;r===null&&d!==null;)d===a.effect&&(et(this,xt,sr).call(this,a.effects),et(this,xt,sr).call(this,a.render_effects),a=a.parent),r=d.next,d=d.parent}},sr=function(e){for(const a of e)(a.f&qt)!==0?j(this,qa).add(a):(a.f&yn)!==0&&j(this,Va).add(a),et(this,xt,xo).call(this,a.deps),At(a,Pt)},xo=function(e){if(e!==null)for(const a of e)(a.f&Tt)===0||(a.f&ba)===0||(a.f^=ba,et(this,xt,xo).call(this,a.deps))},Ks=function(){if(j(this,ga)===0){for(const e of j(this,Ha))e();j(this,Ha).clear()}j(this,va)===0&&et(this,xt,Gs).call(this)},Gs=function(){var s;if(Rr.size>1){this.previous.clear();var e=ln,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Rr){if(i===this){a=!1;continue}const l=[];for(const[d,u]of this.current){if(i.current.has(d))if(a&&u!==i.current.get(d))i.current.set(d,u);else continue;l.push(d)}if(l.length===0)continue;const c=[...i.current.keys()].filter(d=>!this.current.has(d));if(c.length>0){var o=on;on=[];const d=new Set,u=new Map;for(const v of l)Js(v,c,d,u);if(on.length>0){Ue=i,i.apply();for(const v of on)et(s=i,xt,Co).call(s,v,r);i.deactivate()}on=o}}Ue=null,ln=e}this.committed=!0,Rr.delete(this)};let _n=Xr;function Ys(t){var e=ja;ja=!0;try{for(var a;;){if(Ql(),on.length===0&&(Ue?.flush(),on.length===0))return ro=null,a;Xs()}}finally{ja=e}}function Xs(){var t=ya;So=!0;var e=null;try{var a=0;for(Wr(!0);on.length>0;){var r=_n.ensure();if(a++>1e3){var o,s;$l()}r.process(on),$n.clear()}}finally{So=!1,Wr(t),ro=null}}function $l(){try{Nl()}catch(t){Ga(t,ro)}}let xn=null;function us(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(Nn|Xt))===0&&Pr(r)&&(xn=new Set,pr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?fi(r):r.fn=null),xn?.size>0)){$n.clear();for(const o of xn){if((o.f&(Nn|Xt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)xn.has(i)&&(xn.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(Nn|Xt))===0&&pr(c)}}xn.clear()}}xn=null}}function Js(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Tt)!==0?Js(o,e,a,r):(s&(Yo|On))!==0&&(s&qt)===0&&Zs(o,e,r)&&(At(o,qt),Sa(o))}}function Zs(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Tt)!==0&&Zs(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function Sa(t){for(var e=ro=t;e.parent!==null;){e=e.parent;var a=e.f;if(So&&e===He&&(a&On)!==0&&(a&Os)===0)return;if((a&(Ca|Fn))!==0){if((a&Pt)===0)return;e.f^=Pt}}on.push(e)}function ec(t){let e=0,a=bn(0),r;return()=>{gr()&&(n(a),so(()=>(e===0&&(r=Vt(()=>t(()=>ea(a)))),e+=1,()=>{xa(()=>{e-=1,e===0&&(r?.(),r=void 0,ea(a))})})))}}var tc=aa|er|ao;function nc(t,e,a){new ac(t,e,a)}var nn,an,Vo,gn,ha,hn,rn,Bt,pn,kn,Wn,pa,Kn,ma,Gn,Jr,St,rc,oc,To,Hr,Ur,ko;class ac{constructor(e,a,r){Ie(this,St);Lt(this,"parent");Ie(this,nn,!1);Ie(this,an);Ie(this,Vo,null);Ie(this,gn);Ie(this,ha);Ie(this,hn);Ie(this,rn,null);Ie(this,Bt,null);Ie(this,pn,null);Ie(this,kn,null);Ie(this,Wn,null);Ie(this,pa,0);Ie(this,Kn,0);Ie(this,ma,!1);Ie(this,Gn,null);Ie(this,Jr,ec(()=>(Me(this,Gn,bn(j(this,pa))),()=>{Me(this,Gn,null)})));Me(this,an,e),Me(this,gn,a),Me(this,ha,r),this.parent=He.b,Me(this,nn,!!j(this,gn).pending),Me(this,hn,ar(()=>{He.b=this;{var o=et(this,St,To).call(this);try{Me(this,rn,sn(()=>r(o)))}catch(s){this.error(s)}j(this,Kn)>0?et(this,St,Ur).call(this):Me(this,nn,!1)}return()=>{j(this,Wn)?.remove()}},tc))}is_pending(){return j(this,nn)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!j(this,gn).pending}update_pending_count(e){et(this,St,ko).call(this,e),Me(this,pa,j(this,pa)+e),j(this,Gn)&&An(j(this,Gn),j(this,pa))}get_effect_pending(){return j(this,Jr).call(this),n(j(this,Gn))}error(e){var a=j(this,gn).onerror;let r=j(this,gn).failed;if(j(this,ma)||!a&&!r)throw e;j(this,rn)&&(Ut(j(this,rn)),Me(this,rn,null)),j(this,Bt)&&(Ut(j(this,Bt)),Me(this,Bt,null)),j(this,pn)&&(Ut(j(this,pn)),Me(this,pn,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&Ll(),_n.ensure(),Me(this,pa,0),j(this,pn)!==null&&wa(j(this,pn),()=>{Me(this,pn,null)}),Me(this,nn,this.has_pending_snippet()),Me(this,rn,et(this,St,Hr).call(this,()=>(Me(this,ma,!1),sn(()=>j(this,ha).call(this,j(this,an)))))),j(this,Kn)>0?et(this,St,Ur).call(this):Me(this,nn,!1)};var l=Le;try{Ht(null),s=!0,a?.(e,i),s=!1}catch(c){Ga(c,j(this,hn)&&j(this,hn).parent)}finally{Ht(l)}r&&xa(()=>{Me(this,pn,et(this,St,Hr).call(this,()=>{_n.ensure(),Me(this,ma,!0);try{return sn(()=>{r(j(this,an),()=>e,()=>i)})}catch(c){return Ga(c,j(this,hn).parent),null}finally{Me(this,ma,!1)}}))})}}nn=new WeakMap,an=new WeakMap,Vo=new WeakMap,gn=new WeakMap,ha=new WeakMap,hn=new WeakMap,rn=new WeakMap,Bt=new WeakMap,pn=new WeakMap,kn=new WeakMap,Wn=new WeakMap,pa=new WeakMap,Kn=new WeakMap,ma=new WeakMap,Gn=new WeakMap,Jr=new WeakMap,St=new WeakSet,rc=function(){try{Me(this,rn,sn(()=>j(this,ha).call(this,j(this,an))))}catch(e){this.error(e)}Me(this,nn,!1)},oc=function(){const e=j(this,gn).pending;e&&(Me(this,Bt,sn(()=>e(j(this,an)))),_n.enqueue(()=>{var a=et(this,St,To).call(this);Me(this,rn,et(this,St,Hr).call(this,()=>(_n.ensure(),sn(()=>j(this,ha).call(this,a))))),j(this,Kn)>0?et(this,St,Ur).call(this):(wa(j(this,Bt),()=>{Me(this,Bt,null)}),Me(this,nn,!1))}))},To=function(){var e=j(this,an);return j(this,nn)&&(Me(this,Wn,Mn()),j(this,an).before(j(this,Wn)),e=j(this,Wn)),e},Hr=function(e){var a=He,r=Le,o=Ze;Sn(j(this,hn)),Ht(j(this,hn)),Ka(j(this,hn).ctx);try{return e()}catch(s){return Ws(s),null}finally{Sn(a),Ht(r),Ka(o)}},Ur=function(){const e=j(this,gn).pending;j(this,rn)!==null&&(Me(this,kn,document.createDocumentFragment()),j(this,kn).append(j(this,Wn)),hi(j(this,rn),j(this,kn))),j(this,Bt)===null&&Me(this,Bt,sn(()=>e(j(this,an))))},ko=function(e){var a;if(!this.has_pending_snippet()){this.parent&&et(a=this.parent,St,ko).call(a,e);return}Me(this,Kn,j(this,Kn)+e),j(this,Kn)===0&&(Me(this,nn,!1),j(this,Bt)&&wa(j(this,Bt),()=>{Me(this,Bt,null)}),j(this,kn)&&(j(this,an).before(j(this,kn)),Me(this,kn,null)))};function sc(t,e,a,r){const o=nr()?Tr:kr;if(a.length===0&&t.length===0){r(e.map(o));return}var s=Ue,i=He,l=Qs();function c(){Promise.all(a.map(d=>ic(d))).then(d=>{l();try{r([...e.map(o),...d])}catch(u){(i.f&Nn)===0&&Ga(u,i)}s?.deactivate(),vr()}).catch(d=>{Ga(d,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return c()}finally{s?.deactivate(),vr()}}):c()}function Qs(){var t=He,e=Le,a=Ze,r=Ue;return function(s=!0){Sn(t),Ht(e),Ka(a),s&&r?.activate()}}function vr(){Sn(null),Ht(null),Ka(null)}function Tr(t){var e=Tt|qt,a=Le!==null&&(Le.f&Tt)!==0?Le:null;return He!==null&&(He.f|=er),{ctx:Ze,deps:null,effects:null,equals:Hs,f:e,fn:t,reactions:null,rv:0,v:Ct,wv:0,parent:a??He,ac:null}}function ic(t,e){let a=He;a===null&&Tl();var r=a.b,o=void 0,s=bn(Ct),i=!Le,l=new Map;return _c(()=>{var c=Rs();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{d===Ue&&d.committed&&d.deactivate(),vr()})}catch(h){c.reject(h),vr()}var d=Ue;if(i){var u=!r.is_pending();r.update_pending_count(1),d.increment(u),l.get(d)?.reject(La),l.delete(d),l.set(d,c)}const v=(h,p=void 0)=>{if(d.activate(),p)p!==La&&(s.f|=Zn,An(s,p));else{(s.f&Zn)!==0&&(s.f^=Zn),An(s,h);for(const[m,E]of l){if(l.delete(m),m===d)break;E.reject(La)}}i&&(r.update_pending_count(-1),d.decrement(u))};c.promise.then(v,h=>v(null,h||"unknown"))}),li(()=>{for(const c of l.values())c.reject(La)}),new Promise(c=>{function d(u){function v(){u===o?c(s):d(o)}u.then(v,v)}d(o)})}function M(t){const e=Tr(t);return pi(e),e}function kr(t){const e=Tr(t);return e.equals=Us,e}function $s(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Ut(e[a])}}function lc(t){for(var e=t.parent;e!==null;){if((e.f&Tt)===0)return(e.f&Nn)===0?e:null;e=e.parent}return null}function Xo(t){var e,a=He;Sn(lc(t));try{t.f&=~ba,$s(t),e=yi(t)}finally{Sn(a)}return e}function ei(t){var e=Xo(t);if(t.equals(e)||(Ue?.is_fork||(t.v=e),t.wv=_i()),!Ta)if(ln!==null)(gr()||Ue?.is_fork)&&ln.set(t,e);else{var a=(t.f&fn)===0?yn:Pt;At(t,a)}}let Eo=new Set;const $n=new Map;let ti=!1;function bn(t,e){var a={f:0,v:t,reactions:null,equals:Hs,rv:0,wv:0};return a}function R(t,e){const a=bn(t);return pi(a),a}function Po(t,e=!1,a=!0){var o;const r=bn(t);return e||(r.equals=Us),tr&&a&&Ze!==null&&Ze.l!==null&&((o=Ze.l).s??(o.s=[])).push(r),r}function f(t,e,a=!1){Le!==null&&(!wn||(Le.f&ds)!==0)&&nr()&&(Le.f&(Tt|On|Yo|ds))!==0&&!Dn?.includes(t)&&Il();let r=a?it(e):e;return An(t,r)}function An(t,e){if(!t.equals(e)){var a=t.v;Ta?$n.set(t,e):$n.set(t,a),t.v=e;var r=_n.ensure();r.capture(t,a),(t.f&Tt)!==0&&((t.f&qt)!==0&&Xo(t),At(t,(t.f&fn)!==0?Pt:yn)),t.wv=_i(),ni(t,qt),nr()&&He!==null&&(He.f&Pt)!==0&&(He.f&(Fn|Ca))===0&&(en===null?bc([t]):en.push(t)),!r.is_fork&&Eo.size>0&&!ti&&cc()}return e}function cc(){ti=!1;var t=ya;Wr(!0);const e=Array.from(Eo);try{for(const a of e)(a.f&Pt)!==0&&At(a,yn),Pr(a)&&pr(a)}finally{Wr(t)}Eo.clear()}function ea(t){f(t,t.v+1)}function ni(t,e){var a=t.reactions;if(a!==null)for(var r=nr(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===He)){var c=(l&qt)===0;if(c&&At(i,e),(l&Tt)!==0){var d=i;ln?.delete(d),(l&ba)===0&&(l&fn&&(i.f|=ba),ni(d,yn))}else c&&((l&On)!==0&&xn!==null&&xn.add(i),Sa(i))}}}function it(t){if(typeof t!="object"||t===null||Qn in t)return t;const e=to(t);if(e!==Ls&&e!==wl)return t;var a=new Map,r=Wo(t),o=R(0),s=In,i=l=>{if(In===s)return l();var c=Le,d=In;Ht(null),hs(s);var u=l();return Ht(c),hs(d),u};return r&&a.set("length",R(t.length)),new Proxy(t,{defineProperty(l,c,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Ml();var u=a.get(c);return u===void 0?u=i(()=>{var v=R(d.value);return a.set(c,v),v}):f(u,d.value,!0),!0},deleteProperty(l,c){var d=a.get(c);if(d===void 0){if(c in l){const u=i(()=>R(Ct));a.set(c,u),ea(o)}}else f(d,Ct),ea(o);return!0},get(l,c,d){if(c===Qn)return t;var u=a.get(c),v=c in l;if(u===void 0&&(!v||Jn(l,c)?.writable)&&(u=i(()=>{var p=it(v?l[c]:Ct),m=R(p);return m}),a.set(c,u)),u!==void 0){var h=n(u);return h===Ct?void 0:h}return Reflect.get(l,c,d)},getOwnPropertyDescriptor(l,c){var d=Reflect.getOwnPropertyDescriptor(l,c);if(d&&"value"in d){var u=a.get(c);u&&(d.value=n(u))}else if(d===void 0){var v=a.get(c),h=v?.v;if(v!==void 0&&h!==Ct)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return d},has(l,c){if(c===Qn)return!0;var d=a.get(c),u=d!==void 0&&d.v!==Ct||Reflect.has(l,c);if(d!==void 0||He!==null&&(!u||Jn(l,c)?.writable)){d===void 0&&(d=i(()=>{var h=u?it(l[c]):Ct,p=R(h);return p}),a.set(c,d));var v=n(d);if(v===Ct)return!1}return u},set(l,c,d,u){var v=a.get(c),h=c in l;if(r&&c==="length")for(var p=d;p<v.v;p+=1){var m=a.get(p+"");m!==void 0?f(m,Ct):p in l&&(m=i(()=>R(Ct)),a.set(p+"",m))}if(v===void 0)(!h||Jn(l,c)?.writable)&&(v=i(()=>R(void 0)),f(v,it(d)),a.set(c,v));else{h=v.v!==Ct;var E=i(()=>it(d));f(v,E)}var _=Reflect.getOwnPropertyDescriptor(l,c);if(_?.set&&_.set.call(u,d),!h){if(r&&typeof c=="string"){var x=a.get("length"),H=Number(c);Number.isInteger(H)&&H>=x.v&&f(x,H+1)}ea(o)}return!0},ownKeys(l){n(o);var c=Reflect.ownKeys(l).filter(v=>{var h=a.get(v);return h===void 0||h.v!==Ct});for(var[d,u]of a)u.v!==Ct&&!(d in l)&&c.push(d);return c},setPrototypeOf(){Dl()}})}var fs,ai,ri,oi;function dc(){if(fs===void 0){fs=window,ai=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;ri=Jn(e,"firstChild").get,oi=Jn(e,"nextSibling").get,cs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),cs(a)&&(a.__t=void 0)}}function Mn(t=""){return document.createTextNode(t)}function Ya(t){return ri.call(t)}function Er(t){return oi.call(t)}function b(t,e){return Ya(t)}function D(t,e=!1){{var a=Ya(t);return a instanceof Comment&&a.data===""?Er(a):a}}function L(t,e=1,a=!1){let r=t;for(;e--;)r=Er(r);return r}function uc(t){t.textContent=""}function si(){return!1}let vs=!1;function fc(){vs||(vs=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function oo(t){var e=Le,a=He;Ht(null),Sn(null);try{return t()}finally{Ht(e),Sn(a)}}function vc(t,e,a,r=a){t.addEventListener(e,()=>oo(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),fc()}function ii(t){He===null&&(Le===null&&Pl(),El()),Ta&&kl()}function gc(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function Cn(t,e,a){var r=He;r!==null&&(r.f&Xt)!==0&&(t|=Xt);var o={ctx:Ze,deps:null,nodes:null,f:t|qt|fn,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{pr(o),o.f|=Go}catch(l){throw Ut(o),l}else e!==null&&Sa(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&er)===0&&(s=s.first,(t&On)!==0&&(t&aa)!==0&&s!==null&&(s.f|=aa)),s!==null&&(s.parent=r,r!==null&&gc(s,r),Le!==null&&(Le.f&Tt)!==0&&(t&Ca)===0)){var i=Le;(i.effects??(i.effects=[])).push(s)}return o}function gr(){return Le!==null&&!wn}function li(t){const e=Cn(no,null,!1);return At(e,Pt),e.teardown=t,e}function Re(t){ii();var e=He.f,a=!Le&&(e&Fn)!==0&&(e&Go)===0;if(a){var r=Ze;(r.e??(r.e=[])).push(t)}else return ci(t)}function ci(t){return Cn(Ko|Fs,t,!1)}function hc(t){return ii(),Cn(no|Fs,t,!0)}function pc(t){_n.ensure();const e=Cn(Ca|er,t,!0);return(a={})=>new Promise(r=>{a.outro?wa(e,()=>{Ut(e),r(void 0)}):(Ut(e),r(void 0))})}function mc(t){return Cn(Ko,t,!1)}function _c(t){return Cn(Yo|er,t,!0)}function so(t,e=0){return Cn(no|e,t,!0)}function Se(t,e=[],a=[],r=[]){sc(r,e,a,o=>{Cn(no,()=>t(...o.map(n)),!0)})}function ar(t,e=0){var a=Cn(On|e,t,!0);return a}function sn(t){return Cn(Fn|er,t,!0)}function di(t){var e=t.teardown;if(e!==null){const a=Ta,r=Le;gs(!0),Ht(null);try{e.call(null)}finally{gs(a),Ht(r)}}}function ui(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&oo(()=>{o.abort(La)});var r=a.next;(a.f&Ca)!==0?a.parent=null:Ut(a,e),a=r}}function wc(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&Fn)===0&&Ut(e),e=a}}function Ut(t,e=!0){var a=!1;(e||(t.f&Os)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(yc(t.nodes.start,t.nodes.end),a=!0),ui(t,e&&!a),Kr(t,0),At(t,Nn);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();di(t);var o=t.parent;o!==null&&o.first!==null&&fi(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function yc(t,e){for(;t!==null;){var a=t===e?null:Er(t);t.remove(),t=a}}function fi(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function wa(t,e,a=!0){var r=[];vi(t,r,!0);var o=()=>{a&&Ut(t),e&&e()},s=r.length;if(s>0){var i=()=>--s||o();for(var l of r)l.out(i)}else o()}function vi(t,e,a){if((t.f&Xt)===0){t.f^=Xt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&e.push(l);for(var o=t.first;o!==null;){var s=o.next,i=(o.f&aa)!==0||(o.f&Fn)!==0&&(t.f&On)!==0;vi(o,e,i?a:!1),o=s}}}function Jo(t){gi(t,!0)}function gi(t,e){if((t.f&Xt)!==0){t.f^=Xt,(t.f&Pt)===0&&(At(t,qt),Sa(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&aa)!==0||(a.f&Fn)!==0;gi(a,o?e:!1),a=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)(i.is_global||e)&&i.in()}}function hi(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var o=a===r?null:Er(a);e.append(a),a=o}}let ya=!1;function Wr(t){ya=t}let Ta=!1;function gs(t){Ta=t}let Le=null,wn=!1;function Ht(t){Le=t}let He=null;function Sn(t){He=t}let Dn=null;function pi(t){Le!==null&&(Dn===null?Dn=[t]:Dn.push(t))}let Rt=null,Kt=0,en=null;function bc(t){en=t}let mi=1,hr=0,In=hr;function hs(t){In=t}function _i(){return++mi}function Pr(t){var e=t.f;if((e&qt)!==0)return!0;if(e&Tt&&(t.f&=~ba),(e&yn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(Pr(s)&&ei(s),s.wv>t.wv)return!0}(e&fn)!==0&&ln===null&&At(t,Pt)}return!1}function wi(t,e,a=!0){var r=t.reactions;if(r!==null&&!Dn?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Tt)!==0?wi(s,e,!1):e===s&&(a?At(s,qt):(s.f&Pt)!==0&&At(s,yn),Sa(s))}}function yi(t){var m;var e=Rt,a=Kt,r=en,o=Le,s=Dn,i=Ze,l=wn,c=In,d=t.f;Rt=null,Kt=0,en=null,Le=(d&(Fn|Ca))===0?t:null,Dn=null,Ka(t.ctx),wn=!1,In=++hr,t.ac!==null&&(oo(()=>{t.ac.abort(La)}),t.ac=null);try{t.f|=bo;var u=t.fn,v=u(),h=t.deps;if(Rt!==null){var p;if(Kr(t,Kt),h!==null&&Kt>0)for(h.length=Kt+Rt.length,p=0;p<Rt.length;p++)h[Kt+p]=Rt[p];else t.deps=h=Rt;if(gr()&&(t.f&fn)!==0)for(p=Kt;p<h.length;p++)((m=h[p]).reactions??(m.reactions=[])).push(t)}else h!==null&&Kt<h.length&&(Kr(t,Kt),h.length=Kt);if(nr()&&en!==null&&!wn&&h!==null&&(t.f&(Tt|yn|qt))===0)for(p=0;p<en.length;p++)wi(en[p],t);return o!==null&&o!==t&&(hr++,en!==null&&(r===null?r=en:r.push(...en))),(t.f&Zn)!==0&&(t.f^=Zn),v}catch(E){return Ws(E)}finally{t.f^=bo,Rt=e,Kt=a,en=r,Le=o,Dn=s,Ka(i),wn=l,In=c}}function Sc(t,e){let a=e.reactions;if(a!==null){var r=ml.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&Tt)!==0&&(Rt===null||!Rt.includes(e))&&(At(e,yn),(e.f&fn)!==0&&(e.f^=fn,e.f&=~ba),$s(e),Kr(e,0))}function Kr(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)Sc(t,a[r])}function pr(t){var e=t.f;if((e&Nn)===0){At(t,Pt);var a=He,r=ya;He=t,ya=!0;try{(e&(On|Cl))!==0?wc(t):ui(t),di(t);var o=yi(t);t.teardown=typeof o=="function"?o:null,t.wv=mi;var s;wo&&Yl&&(t.f&qt)!==0&&t.deps}finally{ya=r,He=a}}}async function bi(){await Promise.resolve(),Ys()}function n(t){var e=t.f,a=(e&Tt)!==0;if(Le!==null&&!wn){var r=He!==null&&(He.f&Nn)!==0;if(!r&&!Dn?.includes(t)){var o=Le.deps;if((Le.f&bo)!==0)t.rv<hr&&(t.rv=hr,Rt===null&&o!==null&&o[Kt]===t?Kt++:Rt===null?Rt=[t]:Rt.includes(t)||Rt.push(t));else{(Le.deps??(Le.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Le]:s.includes(Le)||s.push(Le)}}}if(Ta){if($n.has(t))return $n.get(t);if(a){var i=t,l=i.v;return((i.f&Pt)===0&&i.reactions!==null||Ci(i))&&(l=Xo(i)),$n.set(i,l),l}}else a&&(!ln?.has(t)||Ue?.is_fork&&!gr())&&(i=t,Pr(i)&&ei(i),ya&&gr()&&(i.f&fn)===0&&Si(i));if(ln?.has(t))return ln.get(t);if((t.f&Zn)!==0)throw t.v;return t.v}function Si(t){if(t.deps!==null){t.f^=fn;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&Tt)!==0&&(e.f&fn)===0&&Si(e)}}function Ci(t){if(t.v===Ct)return!0;if(t.deps===null)return!1;for(const e of t.deps)if($n.has(e)||(e.f&Tt)!==0&&Ci(e))return!0;return!1}function Vt(t){var e=wn;try{return wn=!0,t()}finally{wn=e}}const Cc=-7169;function At(t,e){t.f=t.f&Cc|e}function xc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Qn in t)No(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&Qn in a&&No(a)}}}function No(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{No(t[r],e)}catch{}const a=to(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Is(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Tc=["touchstart","touchmove"];function kc(t){return Tc.includes(t)}const xi=new Set,Ao=new Set;function Ec(t,e,a,r={}){function o(s){if(r.capture||ir.call(e,s),!s.cancelBubble)return oo(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?xa(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function vn(t,e,a,r,o){var s={capture:r,passive:o},i=Ec(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&li(()=>{e.removeEventListener(t,i,s)})}function ot(t){for(var e=0;e<t.length;e++)xi.add(t[e]);for(var a of Ao)a(t)}let ps=null;function ir(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;ps=t;var i=0,l=ps===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var d=o.indexOf(e);if(d===-1)return;c<=d&&(i=c)}if(s=o[i]||t.target,s!==e){_l(t,"currentTarget",{configurable:!0,get(){return s||a}});var u=Le,v=He;Ht(null),Sn(null);try{for(var h,p=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var E=s["__"+r];E!=null&&(!s.disabled||t.target===s)&&E.call(s,t)}catch(_){h?p.push(_):h=_}if(t.cancelBubble||m===e||m===null)break;s=m}if(h){for(let _ of p)queueMicrotask(()=>{throw _});throw h}}finally{t.__root=e,delete t.currentTarget,Ht(u),Sn(v)}}}function Ti(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function mr(t,e){var a=He;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function P(t,e){var a=(e&Vl)!==0,r=(e&Wl)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=Ti(s?t:"<!>"+t),a||(o=Ya(o)));var i=r||ai?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=Ya(i),c=i.lastChild;mr(l,c)}else mr(i,i);return i}}function Pc(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=Ti(o),l=Ya(i);s=Ya(l)}var c=s.cloneNode(!0);return mr(c,c),c}}function Nc(t,e){return Pc(t,e,"svg")}function De(t=""){{var e=Mn(t+"");return mr(e,e),e}}function ce(){var t=document.createDocumentFragment(),e=document.createComment(""),a=Mn();return t.append(e,a),mr(e,a),t}function g(t,e){t!==null&&t.before(e)}function lh(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function rt(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Ac(t,e){return Mc(t,e)}const Da=new Map;function Mc(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){dc();var l=new Set,c=v=>{for(var h=0;h<v.length;h++){var p=v[h];if(!l.has(p)){l.add(p);var m=kc(p);e.addEventListener(p,ir,{passive:m});var E=Da.get(p);E===void 0?(document.addEventListener(p,ir,{passive:m}),Da.set(p,1)):Da.set(p,E+1)}}};c(eo(xi)),Ao.add(c);var d=void 0,u=pc(()=>{var v=a??e.appendChild(Mn());return nc(v,{pending:()=>{}},h=>{if(s){de({});var p=Ze;p.c=s}o&&(r.$$events=o),d=t(h,r)||{},s&&ue()}),()=>{for(var h of l){e.removeEventListener(h,ir);var p=Da.get(h);--p===0?(document.removeEventListener(h,ir),Da.delete(h)):Da.set(h,p)}Ao.delete(c),v!==a&&v.parentNode?.removeChild(v)}});return Dc.set(d,u),d}let Dc=new WeakMap;var dn,mn,Yt,_a,Cr,xr,Zr;class io{constructor(e,a=!0){Lt(this,"anchor");Ie(this,dn,new Map);Ie(this,mn,new Map);Ie(this,Yt,new Map);Ie(this,_a,new Set);Ie(this,Cr,!0);Ie(this,xr,()=>{var e=Ue;if(j(this,dn).has(e)){var a=j(this,dn).get(e),r=j(this,mn).get(a);if(r)Jo(r),j(this,_a).delete(a);else{var o=j(this,Yt).get(a);o&&(j(this,mn).set(a,o.effect),j(this,Yt).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of j(this,dn)){if(j(this,dn).delete(s),s===e)break;const l=j(this,Yt).get(i);l&&(Ut(l.effect),j(this,Yt).delete(i))}for(const[s,i]of j(this,mn)){if(s===a||j(this,_a).has(s))continue;const l=()=>{if(Array.from(j(this,dn).values()).includes(s)){var d=document.createDocumentFragment();hi(i,d),d.append(Mn()),j(this,Yt).set(s,{effect:i,fragment:d})}else Ut(i);j(this,_a).delete(s),j(this,mn).delete(s)};j(this,Cr)||!r?(j(this,_a).add(s),wa(i,l,!1)):l()}}});Ie(this,Zr,e=>{j(this,dn).delete(e);const a=Array.from(j(this,dn).values());for(const[r,o]of j(this,Yt))a.includes(r)||(Ut(o.effect),j(this,Yt).delete(r))});this.anchor=e,Me(this,Cr,a)}ensure(e,a){var r=Ue,o=si();if(a&&!j(this,mn).has(e)&&!j(this,Yt).has(e))if(o){var s=document.createDocumentFragment(),i=Mn();s.append(i),j(this,Yt).set(e,{effect:sn(()=>a(i)),fragment:s})}else j(this,mn).set(e,sn(()=>a(this.anchor)));if(j(this,dn).set(r,e),o){for(const[l,c]of j(this,mn))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of j(this,Yt))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(j(this,xr)),r.ondiscard(j(this,Zr))}else j(this,xr).call(this)}}dn=new WeakMap,mn=new WeakMap,Yt=new WeakMap,_a=new WeakMap,Cr=new WeakMap,xr=new WeakMap,Zr=new WeakMap;const Ic=0,ho=1;function Lc(t,e,a,r,o){var s=nr(),i=Ct,l=s?bn(i):Po(i,!1,!1),c=s?bn(i):Po(i,!1,!1),d=new io(t);ar(()=>{var u=e(),v=!1;if(yl(u)){var h=Qs(),p=!1;const m=E=>{if(!v){p=!0,h(!1),_n.ensure();try{E()}finally{vr(),ja||Ys()}}};u.then(E=>{m(()=>{An(l,E),d.ensure(ho,r&&(_=>r(_,l)))})},E=>{m(()=>{if(An(c,E),d.ensure(ho,o&&(_=>o(_,c))),!o)throw c.v})}),xa(()=>{p||m(()=>{d.ensure(Ic,a)})})}else An(l,u),d.ensure(ho,r&&(m=>r(m,l)));return()=>{v=!0}})}function q(t,e,a=!1){var r=new io(t),o=a?aa:0;function s(i,l){r.ensure(i,l)}ar(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function ge(t,e){so(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Rc(t,e,a){for(var r=[],o=e.length,s,i=e.length,l=0;l<o;l++){let v=e[l];wa(v,()=>{if(s){if(s.pending.delete(v),s.done.add(v),s.pending.size===0){var h=t.outrogroups;Mo(eo(s.done)),h.delete(s),h.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var c=r.length===0&&a!==null;if(c){var d=a,u=d.parentNode;uc(u),u.append(d),t.items.clear()}Mo(e,!c)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function Mo(t,e=!0){for(var a=0;a<t.length;a++)Ut(t[a],e)}var ms;function Ln(t,e,a,r,o,s=null){var i=t,l=new Map,c=(e&Bs)!==0;if(c){var d=t;i=d.appendChild(Mn())}var u=null,v=kr(()=>{var x=a();return Wo(x)?x:x==null?[]:eo(x)}),h,p=!0;function m(){_.fallback=u,Oc(_,h,i,e,r),u!==null&&(h.length===0?(u.f&En)===0?Jo(u):(u.f^=En,lr(u,null,i)):wa(u,()=>{u=null}))}var E=ar(()=>{h=n(v);for(var x=h.length,H=new Set,w=Ue,T=si(),O=0;O<x;O+=1){var I=h[O],A=r(I,O),B=p?null:l.get(A);B?(B.v&&An(B.v,I),B.i&&An(B.i,O),T&&w.skipped_effects.delete(B.e)):(B=Fc(l,p?i:ms??(ms=Mn()),I,A,O,o,e,a),p||(B.e.f|=En),l.set(A,B)),H.add(A)}if(x===0&&s&&!u&&(p?u=sn(()=>s(i)):(u=sn(()=>s(ms??(ms=Mn()))),u.f|=En)),!p)if(T){for(const[Y,U]of l)H.has(Y)||w.skipped_effects.add(U.e);w.oncommit(m),w.ondiscard(()=>{})}else m();n(v)}),_={effect:E,items:l,outrogroups:null,fallback:u};p=!1}function Oc(t,e,a,r,o){var s=(r&Fl)!==0,i=e.length,l=t.items,c=t.effect.first,d,u=null,v,h=[],p=[],m,E,_,x;if(s)for(x=0;x<i;x+=1)m=e[x],E=o(m,x),_=l.get(E).e,(_.f&En)===0&&(_.nodes?.a?.measure(),(v??(v=new Set)).add(_));for(x=0;x<i;x+=1){if(m=e[x],E=o(m,x),_=l.get(E).e,t.outrogroups!==null)for(const U of t.outrogroups)U.pending.delete(_),U.done.delete(_);if((_.f&En)!==0)if(_.f^=En,_===c)lr(_,null,a);else{var H=u?u.next:c;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Bn(t,u,_),Bn(t,_,H),lr(_,H,a),u=_,h=[],p=[],c=u.next;continue}if((_.f&Xt)!==0&&(Jo(_),s&&(_.nodes?.a?.unfix(),(v??(v=new Set)).delete(_))),_!==c){if(d!==void 0&&d.has(_)){if(h.length<p.length){var w=p[0],T;u=w.prev;var O=h[0],I=h[h.length-1];for(T=0;T<h.length;T+=1)lr(h[T],w,a);for(T=0;T<p.length;T+=1)d.delete(p[T]);Bn(t,O.prev,I.next),Bn(t,u,O),Bn(t,I,w),c=w,u=I,x-=1,h=[],p=[]}else d.delete(_),lr(_,c,a),Bn(t,_.prev,_.next),Bn(t,_,u===null?t.effect.first:u.next),Bn(t,u,_),u=_;continue}for(h=[],p=[];c!==null&&c!==_;)(d??(d=new Set)).add(c),p.push(c),c=c.next;if(c===null)continue}(_.f&En)===0&&h.push(_),u=_,c=_.next}if(t.outrogroups!==null){for(const U of t.outrogroups)U.pending.size===0&&(Mo(eo(U.done)),t.outrogroups?.delete(U));t.outrogroups.size===0&&(t.outrogroups=null)}if(c!==null||d!==void 0){var A=[];if(d!==void 0)for(_ of d)(_.f&Xt)===0&&A.push(_);for(;c!==null;)(c.f&Xt)===0&&c!==t.fallback&&A.push(c),c=c.next;var B=A.length;if(B>0){var Y=(r&Bs)!==0&&i===0?a:null;if(s){for(x=0;x<B;x+=1)A[x].nodes?.a?.measure();for(x=0;x<B;x+=1)A[x].nodes?.a?.fix()}Rc(t,A,Y)}}s&&xa(()=>{if(v!==void 0)for(_ of v)_.nodes?.a?.apply()})}function Fc(t,e,a,r,o,s,i,l){var c=(i&Rl)!==0?(i&zl)===0?Po(a,!1,!1):bn(a):null,d=(i&Ol)!==0?bn(o):null;return{v:c,i:d,e:sn(()=>(s(e,c??a,d??o,l),()=>{t.delete(r)}))}}function lr(t,e,a){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,s=e&&(e.f&En)===0?e.nodes.start:a;r!==null;){var i=Er(r);if(s.before(r),r===o)return;r=i}}function Bn(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function Ae(t,e,...a){var r=new io(t);ar(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},aa)}function zc(t,e,a){var r=new io(t);ar(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},aa)}function ki(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=ki(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function jc(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=ki(t))&&(r&&(r+=" "),r+=e);return r}function nt(t){return typeof t=="object"?jc(t):t??""}const _s=[...` 	
\r\fÂ \v\uFEFF`];function Bc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||_s.includes(r[i-1]))&&(l===r.length||_s.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Hc(t,e){return t==null?null:String(t)}function Qe(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=Bc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var c in s){var d=!!s[c];(o==null||d!==!!o[c])&&t.classList.toggle(c,d)}return s}function Xa(t,e,a,r){var o=t.__style;if(o!==e){var s=Hc(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Uc=Symbol("is custom element"),qc=Symbol("is html");function ch(t,e){var a=Zo(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Vc(t,e){var a=Zo(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function tt(t,e,a,r){var o=Zo(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[xl]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Wc(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Zo(t){return t.__attributes??(t.__attributes={[Uc]:t.nodeName.includes("-"),[qc]:t.namespaceURI===Kl})}var ws=new Map;function Wc(t){var e=t.getAttribute("is")||t.nodeName,a=ws.get(e);if(a)return a;ws.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Is(o);for(var i in r)r[i].set&&a.push(i);o=to(o)}return a}function Ei(t,e,a=e){var r=new WeakSet;vc(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=po(t)?mo(s):s,a(s),Ue!==null&&r.add(Ue),await bi(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var d=t.value.length;i===l&&l===c&&d>c?(t.selectionStart=d,t.selectionEnd=d):(t.selectionStart=i,t.selectionEnd=Math.min(l,d))}}}),Vt(e)==null&&t.value&&(a(po(t)?mo(t.value):t.value),Ue!==null&&r.add(Ue)),so(()=>{var o=e();if(t===document.activeElement){var s=Br??Ue;if(r.has(s))return}po(t)&&o===mo(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function po(t){var e=t.type;return e==="number"||e==="range"}function mo(t){return t===""?null:+t}function ys(t,e){return t===e||t?.[Qn]===e}function Xe(t={},e,a,r){return mc(()=>{var o,s;return so(()=>{o=s,s=[],Vt(()=>{t!==a(...s)&&(e(t,...s),o&&ys(a(...o),t)&&e(null,...o))})}),()=>{xa(()=>{s&&ys(a(...s),t)&&e(null,...s)})}}),t}function Qo(t=!1){const e=Ze,a=e.l.u;if(!a)return;let r=()=>xc(e.s);if(t){let o=0,s={};const i=Tr(()=>{let l=!1;const c=e.s;for(const d in c)c[d]!==s[d]&&(s[d]=c[d],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&hc(()=>{bs(e,r),yo(a.b)}),Re(()=>{const o=Vt(()=>a.m.map(bl));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&Re(()=>{bs(e,r),yo(a.a)})}function bs(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Or=!1;function Kc(t){var e=Or;try{return Or=!1,[t(),Or]}finally{Or=e}}const Gc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Yc(t,e,a){return new Proxy({props:t,exclude:e},Gc)}const Xc={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(rr(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];rr(o)&&(o=o());const s=Jn(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(rr(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=Jn(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===Qn||e===zs)return!1;for(let a of t.props)if(rr(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(rr(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function Do(...t){return new Proxy({props:t},Xc)}function Ne(t,e,a,r){var o=!tr||(a&Bl)!==0,s=(a&Ul)!==0,i=(a&ql)!==0,l=r,c=!0,d=()=>(c&&(c=!1,l=i?Vt(r):r),l),u;if(s){var v=Qn in t||zs in t;u=Jn(t,e)?.set??(v&&e in t?w=>t[e]=w:void 0)}var h,p=!1;s?[h,p]=Kc(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=d(),u&&(o&&Al(),u(h)));var m;if(o?m=()=>{var w=t[e];return w===void 0?d():(c=!0,w)}:m=()=>{var w=t[e];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(a&Hl)===0)return m;if(u){var E=t.$$legacy;return(function(w,T){return arguments.length>0?((!o||!T||E||p)&&u(T?m():w),w):m()})}var _=!1,x=((a&jl)!==0?Tr:kr)(()=>(_=!1,m()));s&&n(x);var H=He;return(function(w,T){if(arguments.length>0){const O=T?n(x):o&&s?it(w):w;return f(x,O),_=!0,l!==void 0&&(l=O),w}return Ta&&_||(H.f&Nn)!==0?x.v:n(x)})}function ye(t){Ze===null&&js(),tr&&Ze.l!==null?Jc(Ze).m.push(t):Re(()=>{const e=Vt(t);if(typeof e=="function")return e})}function Jc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Zc="5";var Ds;typeof window<"u"&&((Ds=window.__svelte??(window.__svelte={})).v??(Ds.v=new Set)).add(Zc);Xl();const Pi={};function Qc(t){dt(Pi,t)}function $o(){const t=ct(Pi);if(!t)throw new Error("No FeedSearchContext found");return t}const Ni={};function $c(t){dt(Ni,t)}function Wt(){const t=ct(Ni);if(!t)throw new Error("No SearchParamsContext found");return t}function ed(t,e){de(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Wt(),s="feedSearch",i=M(()=>o().get(s)||""),l=M(()=>n(i));Qc({getFeedSearch:()=>n(l),setFeedSearch:u=>{u===""?r(s):a(s,u)}});var c=ce(),d=D(c);Ae(d,()=>e.children??je),g(t,c),ue()}const Ai={};function td(t){dt(Ai,t)}function nd(){const t=ct(Ai);if(!t)throw new Error("No TagsSearchContext found");return t}function ad(t,e){de(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Wt(),s="tagsSearch",i=M(()=>o().get(s)||""),l=M(()=>n(i));td({getTagsSearch:()=>n(l),setTagsSearch:u=>{u===""?r(s):a(s,u)}});var c=ce(),d=D(c);Ae(d,()=>e.children??je),g(t,c),ue()}const Mi={};function rd(t){dt(Mi,t)}function Di(){const t=ct(Mi);if(!t)throw new Error("No FeedOrderContext found");return t}function od(t,e){de(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Wt(),s="feedOrder",i=M(()=>o().get(s)||"newest"),l=M(()=>n(i));rd({getFeedOrder:()=>n(l),setFeedOrder:u=>{u==="newest"?r(s):a(s,u)}});var c=ce(),d=D(c);Ae(d,()=>e.children??je),g(t,c),ue()}const Ii={};function sd(t){dt(Ii,t)}function Nr(){const t=ct(Ii);if(!t)throw new Error("No SidebarContext found");return t}function id(t,e){de(e,!0);let a=R("closed");sd({sidebarOpen:()=>{f(a,"preOpening")},sidebarClose:()=>{f(a,"closing")},getSidebarState:()=>n(a),setSidebarState:d=>{f(a,d,!0)}});var l=ce(),c=D(l);Ae(c,()=>e.children??je),g(t,l),ue()}const Li={};function ld(t){dt(Li,t)}function zn(){const t=ct(Li);if(!t)throw new Error("No SelectedTagsContext found");return t}function cd(t,e){de(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Wt(),s=M(a),i="selectedTags";let l=M(()=>n(s).get(i)||""),c=M(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));ld({getSelectedTags:()=>n(c),addTag:_=>{n(c).has(_)||r(i,[...n(c),_].map(x=>encodeURIComponent(x)).join(","))},removeTag:_=>{n(c).has(_)&&n(c).size===1?o(i):n(c).has(_)&&r(i,[...n(c)].filter(x=>x!==_).map(x=>encodeURIComponent(x)).join(","))},clearTags:()=>{o(i)},setSelectedTags:_=>{_.size===0?o(i):r(i,[..._].map(x=>encodeURIComponent(x)).join(","))}});var m=ce(),E=D(m);Ae(E,()=>e.children??je),g(t,m),ue()}const Ri={};function dd(t){dt(Ri,t)}function ka(){const t=ct(Ri);if(!t)throw new Error("No SelectedNotesContext found");return t}var ud=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],fd=["difference","intersection","symmetricDifference","union"],Ss=!1,Wa,un,Yn,Qr,Qa,Oi,Fi;const $r=class $r extends Set{constructor(a){super();Ie(this,Qa);Ie(this,Wa,new Map);Ie(this,un,R(0));Ie(this,Yn,R(0));Ie(this,Qr,In||-1);if(a){for(var r of a)super.add(r);j(this,Yn).v=super.size}Ss||et(this,Qa,Fi).call(this)}has(a){var r=super.has(a),o=j(this,Wa),s=o.get(a);if(s===void 0){if(!r)return n(j(this,un)),!1;s=et(this,Qa,Oi).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),f(j(this,Yn),super.size),ea(j(this,un))),this}delete(a){var r=super.delete(a),o=j(this,Wa),s=o.get(a);return s!==void 0&&(o.delete(a),f(s,!1)),r&&(f(j(this,Yn),super.size),ea(j(this,un))),r}clear(){if(super.size!==0){super.clear();var a=j(this,Wa);for(var r of a.values())f(r,!1);a.clear(),f(j(this,Yn),0),ea(j(this,un))}}keys(){return this.values()}values(){return n(j(this,un)),super.values()}entries(){return n(j(this,un)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(j(this,Yn))}};Wa=new WeakMap,un=new WeakMap,Yn=new WeakMap,Qr=new WeakMap,Qa=new WeakSet,Oi=function(a){return In===j(this,Qr)?R(a):bn(a)},Fi=function(){Ss=!0;var a=$r.prototype,r=Set.prototype;for(const o of ud)a[o]=function(...s){return n(j(this,un)),r[o].apply(this,s)};for(const o of fd)a[o]=function(...s){n(j(this,un));var i=r[o].apply(this,s);return new $r(i)}};let Io=$r;function vd(t,e){de(e,!0);let a=new Io,r=R("single");const o=()=>a,s=p=>{a.clear(),p.forEach(m=>a.add(m))},i=p=>{a.add(p)},l=p=>{a.delete(p)},c=()=>{a.clear()};dd({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:c,getMode:()=>n(r),changeMode:p=>{f(r,p,!0),p==="single"&&c()}});var v=ce(),h=D(v);Ae(h,()=>e.children??je),g(t,v),ue()}const zi={};function gd(t){dt(zi,t)}function es(){const t=ct(zi);if(!t)throw new Error("No LocalDBContext found");return t}const ji={};function hd(t){dt(ji,t)}function Ja(){const t=ct(ji);if(!t)throw new Error("No SettingsContext found");return t}const Bi={};function pd(t){dt(Bi,t)}function lo(){const t=ct(Bi);if(!t)throw new Error("No BroadcastContext found");return t}const md="AppStorage",_d=1,cr="account",la="settings",Ge="notes",jt="tags",wd="syncLog",ra="success",oa="error",bt=(t,e,a)=>{t?.addEventListener(e,a)},Cs=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();bt(s,ra,()=>{const i=s?.result||[];a(i)}),bt(s,oa,i=>{r(i)})}),Gr=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);bt(i,ra,()=>{const l=i?.result?.data;r(l)}),bt(i,oa,l=>{o(l)})}),Pn=(t,e,a,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});bt(c,ra,()=>{o()}),bt(c,oa,d=>{s(d)})}),gt=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{bt(i,ra,()=>{l()}),bt(i,oa,d=>{c(d)})})}))},_o=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);bt(l,ra,()=>{r()}),bt(l,oa,c=>{o(c)})}),or=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{bt(i,ra,()=>{l()}),bt(i,oa,d=>{c(d)})})}))},Oa=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();bt(i,ra,()=>{a()}),bt(i,oa,l=>{r(l)})}),tn="dialogPages",Hi={};function yd(t){dt(Hi,t)}function Jt(){const t=ct(Hi);if(!t)throw new Error("No DialogPagesContext found");return t}var me=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t.Extension="extension",t))(me||{});const xs={settings:"Settings",importData:"Import",exportData:"Export",account:"Account",sync:"Sync",accountSetup:"",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success",extension:"Extension"};function bd(t,e){de(e,!0);const{deleteSearchParam:a}=Wt(),{clearDialogPages:r,getDialogPages:o}=Jt(),s="viewMode";let l=it((()=>{const V=new URLSearchParams(window.location.search).get(s)||"tab";return V==="popup"||V==="window"||V==="tab"||V==="sidebar"?V:"tab"})());ye(()=>{a(s)});let c=R(!1),d=R(it({showFavicon:!0,recordMode:"note",generateTagsEnabled:!0,previousTags:[]}));const{getDB:u}=es(),{createBroadcastChannel:v,tabId:h}=lo(),p=v(),m=M(u),E=async()=>{const U=await Gr(n(m),la,"default");U&&f(d,U,!0)},_=async()=>{await E(),f(c,!0)},x=async U=>{const V=JSON.parse(U.data),Q=V;if(V.tabId&&V.tabId===h){Q.type==="exit"&&(f(d,{showFavicon:!0,recordMode:"note",generateTagsEnabled:!0,previousTags:[]},!0),Oa(n(m),la));return}Q.type==="updateSettings"?E():Q.type==="exit"&&f(d,{showFavicon:!0,recordMode:"note",generateTagsEnabled:!0,previousTags:[]},!0)},H=()=>n(d).showFavicon,w=()=>n(d).recordMode,T=async U=>{n(d).showFavicon=U,await Pn(n(m),la,"default",Ra(n(d))),p.postMessage({type:"updateSettings"})},O=async U=>{n(d).recordMode=U,await Pn(n(m),la,"default",Ra(n(d))),p.postMessage({type:"updateSettings"})},I=async U=>{n(d).previousTags=U,await Pn(n(m),la,"default",Ra(n(d))),p.postMessage({type:"updateSettings"})},A=()=>n(d).previousTags||[];ye(()=>(_(),p.addEventListener(x),()=>{p.removeEventListener(x)})),hd({getFaviconEnabled:H,getRecordMode:w,setRecordMode:O,setFaviconShown:T,isInitedSettings:()=>n(c),getViewMode:()=>l,setGenerateTagsEnabled:async U=>{n(d).generateTagsEnabled=U,await Pn(n(m),la,"default",Ra(n(d))),p.postMessage({type:"updateSettings"})},getGenerateTagsEnabled:()=>n(d).generateTagsEnabled,setPreviousTags:I,getPreviousTags:A});var B=ce(),Y=D(B);Ae(Y,()=>e.children??je),g(t,B),ue()}const Ui={};function Sd(t){dt(Ui,t)}function ts(){const t=ct(Ui);if(!t)throw new Error("No AccountContext found");return t}function Cd(t,e){de(e,!0);let a=R(void 0);const{getDB:r}=es(),{createBroadcastChannel:o,tabId:s}=lo(),i=M(r),l=o(),c=async()=>{const w=await Gr(n(i),cr,"default");f(a,w,!0)},d=w=>Pn(n(i),cr,"default",w),u=async w=>{const T=await Gr(n(i),cr,"default");T!==void 0&&f(a,T,!0),w(T)},v=async w=>{const T=JSON.parse(w.data);if(T.tabId&&T.tabId===s)return;const O=T;O.type==="initLocalAccount"?f(a,null):O.type==="initCloudAccount"?c():O.type==="disconnectCloudAccount"?f(a,null):O.type==="exit"?f(a,void 0):O.type==="updateAccount"&&c()};ye(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),Sd({init:u,getAccount:()=>n(a),initLocalAccount:async()=>{f(a,null),await d(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async w=>{const T={encryptedClientKey:w.encryptedClientKey||"",subscriptionExpires:w.subscriptionExpires||-1,lastSync:-1};await d(T),f(a,T,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{f(a,null),await d(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async w=>{if(!n(a))throw new Error("No account to update subscription for");const T={...n(a),subscriptionExpires:w};await d(T),l.postMessage({type:"updateAccount"})},exitApp:async()=>{f(a,void 0),l.postMessage({type:"exit"}),await Oa(n(i),cr)}});var x=ce(),H=D(x);Ae(H,()=>e.children??je),g(t,x),ue()}const qi={};function xd(t){dt(qi,t)}function Ot(){const t=ct(qi);if(!t)throw new Error("No NotesContext found");return t}const qn=()=>crypto.randomUUID(),Td=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},Vi=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function dh(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const wt=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function kd(t,e){de(e,!0);const{getDB:a}=es(),{createBroadcastChannel:r,tabId:o}=lo(),s=M(a),i=r(),l=720*60*60*1e3;let c=R(!1),d=R(()=>new Map),u=R(()=>[]),v=R(()=>new Map);const h=()=>n(c),p=()=>n(u)().some(y=>y.data&&!y.data.deletedAt&&!y.data.archivedAt),m=()=>n(u)().some(y=>y.data&&y.data.deletedAt),E=()=>n(u)().some(y=>y.data&&y.data.archivedAt&&!y.data.deletedAt),_=y=>{const S=n(u)(),C=n(v)(),k=C.get(y.id);k?k.data=y.data:(S.push(y),C.set(y.id,y)),f(u,()=>S),f(v,()=>C)},x=y=>{const S=n(u)(),C=n(v)(),k=C.get(y);C.has(y)&&C.delete(y),k&&(k.data=void 0),f(u,()=>S),f(v,()=>C)},H=y=>{const S=n(u)(),C=n(v)();for(const k of y){const z=C.get(k);C.has(k)&&C.delete(k),z&&(z.data=void 0)}f(u,()=>S),f(v,()=>C)},w=()=>{f(u,()=>[]),f(d,()=>new Map),f(v,()=>new Map)},T=()=>n(u),O=y=>{const S=n(d)();for(const C of y)S.get(C)||S.set(C,{name:C});f(d,()=>S)},I=async()=>{const[y,S]=await Promise.all([Cs(n(s),Ge),Cs(n(s),jt).then(X=>X.reduce((ee,ae)=>ee.set(ae.id,ae.data),new Map))]),C=[],k=[],z=new Map;for(const X of y)X.data.deletedAt&&Date.now()-X.data.deletedAt>l?C.push(X.id):(k.push(X),z.set(X.id,X));const W=Td(k),te=[],fe=new Map(S);[...W.values()].forEach(X=>{fe.set(X,{name:X,pinned:S.get(X)?.pinned||!1}),S.has(X)||te.push(X)});const ne=[];[...S.keys()].forEach(X=>{W.has(X)||ne.push(X)}),await or(n(s),Ge,C),await or(n(s),jt,ne),await gt(n(s),jt,te.map(X=>({id:X,data:{pinned:fe.get(X)?.pinned||!1}}))),f(u,()=>k),f(v,()=>z),f(d,()=>fe),f(c,!0)},A=async y=>{const S=n(d)(),C=y.data.tags.filter(k=>!S.has(k))||[];return await Pn(n(s),Ge,y.id,{...y.data}),C.length>0&&(await gt(n(s),jt,C.map(k=>({id:k,data:{pinned:!1}}))||[]),O(C)),_(y),i.postMessage({type:"putNote",data:{id:y.id}}),y.id},B=async({link:y,text:S,tags:C})=>{const k={id:qn(),data:{link:wt(y),text:S,tags:wt(C),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await A(k),k.id},Y=async(y,{link:S,text:C,tags:k})=>{const z=K(y);if(!z||!z.data)return;const W={id:y,data:{...z.data,link:wt(S),text:C,tags:wt(k),updatedAt:Date.now()}};await A(W)},U=async(y,{link:S,text:C,tags:k})=>{const z=K(y);if(!z||!z.data)return;const W=qn(),te={id:y,data:{...z.data,link:S,text:C,tags:k,updatedAt:Date.now(),history:[...(z.data.history||[]).slice(-49),{id:W,link:wt(z.data.link),text:z.data.text,tags:wt(z.data.tags),updatedAt:z.data.updatedAt}]}};return await A(te),W},V=async(y,S)=>{const C=K(y);if(!C||!C.data)return;const k=C.data.history?.find?.(W=>W.id===S);if(!k)return;const z={id:y,data:{...C.data,link:wt(k.link),text:k.text,tags:wt(k.tags),updatedAt:k.updatedAt,history:C.data.history?.filter?.(W=>W.id!==S)||[]}};await A(z)},Q=async y=>{const C=n(v)().get(y);!C||!C.data||(x(y),await _o(n(s),Ge,y),i.postMessage({type:"deleteNote",data:{id:y}}))},J=async()=>{await Oa(n(s),Ge),await Oa(n(s),jt),w(),i.postMessage({type:"clearNotes"})},K=y=>n(v)().get(y),ve=async(y,S)=>{const k=n(v)().get(y);if(!k||!k.data)return;const z={id:y,data:{...k.data,pinnedAt:S?Date.now():void 0}};A(z)},_e=async y=>{const C=n(v)().get(y);if(!C||!C.data)return;const k={id:y,data:{...C.data,deletedAt:Date.now()}};await A(k)},Z=async y=>{const C=n(v)().get(y);if(!C||!C.data)return;const k={id:y,data:{...C.data,archivedAt:Date.now()}};await A(k)},F=async({noteIds:y})=>{const S=n(v)(),C=n(u)();for(const z of y){const W=S.get(z);W?.data&&(W.data.deletedAt=Date.now())}return await gt(n(s),Ge,y.map(z=>{const W=S.get(z);return{id:z,data:W?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C),{cancel:async()=>{for(const z of y){const W=S.get(z);W?.data&&(W.data.deletedAt=0)}await gt(n(s),Ge,y.map(z=>{const W=S.get(z);return{id:z,data:W?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C)}}},$=async({noteIds:y})=>{const S=n(v)(),C=n(u)();for(const z of y){const W=S.get(z);W?.data&&(W.data.archivedAt=Date.now())}return await gt(n(s),Ge,y.map(z=>{const W=S.get(z);return{id:z,data:W?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C),{cancel:async()=>{for(const z of y){const W=S.get(z);W?.data&&(W.data.archivedAt=0)}await gt(n(s),Ge,y.map(z=>{const W=S.get(z);return{id:z,data:W?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C)}}},se=async({noteIds:y})=>{const S=n(v)(),C=n(u)(),k=[];for(const W of y){const te=S.get(W);te?.data&&(k.push({id:W,data:wt(te.data)}),te.data.archivedAt=0)}return await gt(n(s),Ge,y.map(W=>{const te=S.get(W);return{id:W,data:te?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C),{cancel:async()=>{for(const W of k){const te=S.get(W.id);te?.data&&(te.data=W.data)}await gt(n(s),Ge,y.map(W=>{const te=S.get(W);return{id:W,data:te?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C)}}},re=async({noteIds:y})=>{const S=n(v)(),C=n(u)(),k=[];for(const W of y){const te=S.get(W);te?.data&&(k.push({id:W,data:wt(te.data)}),te.data.deletedAt=0)}return await gt(n(s),Ge,y.map(W=>{const te=S.get(W);return{id:W,data:te?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C),{cancel:async()=>{for(const W of k){const te=S.get(W.id);te?.data&&(te.data=W.data)}await gt(n(s),Ge,y.map(W=>{const te=S.get(W);return{id:W,data:te?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C)}}},le=async y=>{const C=n(v)().get(y);if(!C||!C.data)return;const k={id:y,data:{...C.data,deletedAt:0}};await A(k)},we=async y=>{const C=n(v)().get(y);if(!C||!C.data)return;const k={id:y,data:{...C.data,archivedAt:0}};await A(k)},Te=async(y,S)=>{const C=n(d)();C.set(y,{name:y,pinned:S}),await Pn(n(s),jt,y,{pinned:S}),i.postMessage({type:"pinTag",data:{tag:y,pinned:S}}),f(d,()=>C)},N=async({noteIds:y})=>{const S=n(d)(),C=n(u)();H(y),await or(n(s),Ge,y),i.postMessage({type:"reloadNotes"}),f(u,()=>C),f(d,()=>S)},G=async y=>{const S=n(v)(),C={};y.forEach(k=>{const z=S.get(k.id),W=[];if(z&&z.data){let te=0,fe=0;for(;te<k.data.history.length&&fe<z.data.history.length;){const ne=k.data.history[te],X=z.data.history[fe];ne.id===X.id?(ne.updatedAt>X.updatedAt?W.push(ne):W.push(X),te+=1,fe+=1):ne.updatedAt<X.updatedAt?(W.push(ne),te+=1):ne.updatedAt>X.updatedAt?(W.push(X),fe+=1):(W.push(X),te+=1,fe+=1)}z.data.updatedAt>k.data.updatedAt?C[z.id]={id:z.id,data:{...z.data,history:W}}:C[k.id]={id:k.id,data:{...k.data,history:W}}}else C[k.id]=k}),await gt(n(s),Ge,Object.values(C)),await I(),i.postMessage({type:"reloadNotes"})},he=async()=>{const y=[];n(u)().forEach(C=>{C&&C.data&&C.data.deletedAt&&y.push(C.id)}),await or(n(s),Ge,y),await I(),i.postMessage({type:"emptyBin"})},be=async(y,S)=>{const C=n(v)(),k=n(u)(),z=[],W=[];for(const fe of S){const ne=C.get(fe);ne?.data&&(z.push({id:fe,data:wt(ne.data)}),W.push({id:fe,data:{...ne.data,tags:ne.data.tags.filter(X=>X!==y),history:[...ne.data.history||[],{id:qn(),link:wt(ne.data.link),text:ne.data.text,tags:ne.data.tags,updatedAt:Date.now()}]}}))}for(const fe of W){const ne=C.get(fe.id);ne?.data&&(ne.data=fe.data)}return await gt(n(s),Ge,W.map(fe=>({id:fe.id,data:fe.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>C),f(u,()=>k),{cancel:async()=>{for(const fe of z){const ne=C.get(fe.id);ne?.data&&(ne.data=fe.data)}await gt(n(s),Ge,z.map(fe=>({id:fe.id,data:fe.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>C),f(u,()=>k)}}},ke=async(y,S,C)=>{const k=n(v)(),z=n(u)(),W=n(d)(),te=[],fe=[];for(const ee of C){const ae=k.get(ee);ae?.data&&(te.push({id:ee,data:wt(ae.data)}),fe.push({id:ee,data:{...ae.data,tags:ae.data.tags.map(xe=>xe!==y?xe:S),history:[...ae.data.history||[],{id:qn(),link:wt(ae.data.link),text:ae.data.text,tags:ae.data.tags,updatedAt:Date.now()}]}}))}for(const ee of fe){const ae=k.get(ee.id);ae?.data&&(ae.data=ee.data)}const ne=W.has(S);return await Promise.all([(async()=>{if(!ne){const ee=W.get(y)?.pinned||!1;W.set(S,{name:S,pinned:ee}),await Pn(n(s),jt,S,{pinned:ee})}})(),gt(n(s),Ge,fe.map(ee=>({id:ee.id,data:ee.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(u,()=>z),f(d,()=>W),{cancel:async()=>{for(const ee of te){const ae=k.get(ee.id);ae?.data&&(ae.data=ee.data)}await Promise.all([(async()=>{ne||(W.delete(S),await _o(n(s),jt,S))})(),gt(n(s),Ge,te.map(ee=>({id:ee.id,data:ee.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(u,()=>z),f(d,()=>W)}}},Ce=async(y,S)=>{const C=n(v)(),k=n(u)(),z=n(d)(),W=[],te=[];for(const X of S){const ee=C.get(X);ee?.data&&(W.push({id:X,data:wt(ee.data)}),te.push({id:X,data:{...ee.data,tags:[...new Set([...ee.data.tags,y])],history:[...ee.data.history||[],{id:qn(),link:wt(ee.data.link),text:ee.data.text,tags:ee.data.tags,updatedAt:Date.now()}]}}))}for(const X of te){const ee=C.get(X.id);ee?.data&&(ee.data=X.data)}const fe=z.has(y);return await Promise.all([(async()=>{fe||(z.set(y,{name:y,pinned:!1}),await Pn(n(s),jt,y,{pinned:!1}))})(),gt(n(s),Ge,te.map(X=>({id:X.id,data:X.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>C),f(u,()=>k),f(d,()=>z),{cancel:async()=>{for(const X of W){const ee=C.get(X.id);ee?.data&&(ee.data=X.data)}await Promise.all([(async()=>{fe||(z.delete(y),await _o(n(s),jt,y))})(),gt(n(s),Ge,W.map(X=>({id:X.id,data:X.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>C),f(u,()=>k),f(d,()=>z)}}},ie=async(y,S,C)=>{const k=n(v)(),z=n(u)(),W=n(d)(),te=[],fe=[];for(const ae of C){const xe=k.get(ae);xe?.data&&(te.push({id:ae,data:wt(xe.data)}),fe.push({id:ae,data:{...xe.data,tags:[...new Set([...xe.data.tags.filter($e=>!y.includes($e)),...S])],history:[...xe.data.history||[],{id:qn(),link:wt(xe.data.link),text:xe.data.text,tags:xe.data.tags,updatedAt:Date.now()}]}}))}for(const ae of fe){const xe=k.get(ae.id);xe?.data&&(xe.data=ae.data)}const ne=n(d)(),X=S.filter(ae=>!ne.has(ae));return await Promise.all([(async()=>{if(X.length>0)return gt(n(s),jt,X.map(ae=>({id:ae,data:{pinned:!1}})))})(),gt(n(s),Ge,fe.map(ae=>({id:ae.id,data:ae.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(u,()=>z),f(d,()=>W),{cancel:async()=>{for(const ae of te){const xe=k.get(ae.id);xe?.data&&(xe.data=ae.data)}await Promise.all([(async()=>{if(X.length>0){for(const ae of X)W.delete(ae);return or(n(s),jt,X)}})(),gt(n(s),Ge,te.map(ae=>({id:ae.id,data:ae.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(u,()=>z),f(d,()=>W)}}},oe=async y=>{const S=JSON.parse(y.data),C=S;if(S.tabId&&S.tabId===o){C.type==="exit"&&(w(),await Oa(n(s),Ge),await Oa(n(s),jt));return}if(C.type==="putNote"){const z=C.data.id;if(!z)return;const W=await Gr(n(s),Ge,z);if(!W)return;_({id:z,data:W})}else if(C.type==="deleteNote"){const k=C.data.id;if(!k)return;x(k)}else if(C.type==="pinTag"){const k=C.data.tag,z=C.data.pinned,W=n(d)();W.set(k,{name:k,pinned:z}),f(d,()=>W)}else C.type==="clearNotes"?w():C.type==="reloadNotes"||C.type==="emptyBin"?I():C.type==="exit"&&w()};ye(()=>(I(),i.addEventListener(oe),()=>{i.removeEventListener(oe)})),xd({isInitedNotes:h,createNote:B,updateNote:Y,deleteNote:Q,saveNote:U,revertNote:V,pinNote:ve,moveNoteToBin:_e,moveNoteToArchive:Z,getGetNotes:T,importNotes:G,clearNotes:J,getNoteById:K,getGetMapTags:()=>n(d),pinTag:Te,restoreNoteFromBin:le,moveNoteFromArchive:we,checkNotes:p,checkNotesInBin:m,checkNotesInArchive:E,emptyBin:he,moveNotesToBin:F,moveNotesToArchive:$,moveNotesFromArchive:se,deleteNotes:N,restoreNotesFromBin:re,deleteTag:be,renameTag:ke,addTag:Ce,changeTags:ie});var Ee=ce(),qe=D(Ee);Ae(qe,()=>e.children??je),g(t,Ee),ue()}const Wi={};function Ed(t){dt(Wi,t)}function Ea(){const t=ct(Wi);if(!t)throw new Error("No FeedContext found");return t}const Ki={};var Ye=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(Ye||{});function Pd(t){dt(Ki,t)}function co(){const t=ct(Ki);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function Nd(t,e){de(e,!0);const a=$o(),{getSelectedTags:r}=zn(),{getSelectedMetaTags:o}=co(),{getGetNotes:s}=Ot();let i=M(r),l=M(o),c=R(0),d=[],u=R(0),v=M(()=>n(l).has(Ye.ARCHIVED)),h=M(()=>n(l).has(Ye.BIN));Re(()=>{const E=s()()||[],_=[],x=Array.from(n(i).values());for(let H=E.length-1;H>=0;H--){if(!E[H]||!E[H].data)continue;const w=E[H];if(!n(v)&&!n(h)&&(w?.data.deletedAt||w?.data.archivedAt)||n(v)&&(w?.data.deletedAt||!w?.data.archivedAt)||n(h)&&!w?.data.deletedAt)continue;const T=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(w.data.link?.title.toLowerCase().includes(T)||w.data.link?.url.toLowerCase().includes(T)||w.data.text.toLowerCase().includes(T)||w.data.tags.map(O=>O.toLowerCase()).join(" ").includes(T)))){if(n(l).has(Ye.INBOX)){if(w.data.tags.length>0)continue}else if(n(i).size&&x.some(O=>!w.data.tags.includes(O)))continue;_.push(w)}}f(c,_.length,!0),d=_,f(u,Date.now(),!0)}),Ed({getFiltredNotesLength:()=>n(c),getFiltredNotes:()=>(n(u),d),getUpdatedFiltredNotesTimestamp:()=>n(u)});var p=ce(),m=D(p);Ae(m,()=>e.children??je),g(t,p),ue()}function Ad(t,e){de(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Wt(),s=M(a),i="selectedMetaTags";let l=M(()=>n(s).get(i)||""),c=M(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));Pd({getSelectedMetaTags:()=>n(c),addMetaTag:_=>{n(c).has(_)||r(i,[...n(c),_].map(x=>encodeURIComponent(x)).join(","))},removeMetaTag:_=>{n(c).has(_)&&n(c).size===1?o(i):n(c).has(_)&&r(i,[...n(c)].filter(x=>x!==_).map(x=>encodeURIComponent(x)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:_=>{_.size===0?o(i):r(i,[..._].map(x=>encodeURIComponent(x)).join(","))}});var m=ce(),E=D(m);Ae(E,()=>e.children??je),g(t,m),ue()}const Gi={},ta=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function Md(t){dt(Gi,t)}function jn(){const t=ct(Gi);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Dd(t,e){de(e,!0);let a=it(ta());Md(a);var r=ce(),o=D(r);Ae(o,()=>e.children??je),g(t,r),ue()}const Yi={};function Id(t){dt(Yi,t)}function ns(){const t=ct(Yi);if(!t)throw new Error("No ScrollingContext found");return t}function Ld(t,e){de(e,!0);let a=R(!1);const r=()=>n(a),o=Vi(()=>{f(a,!1)},100);Id({isScrolling:r,enable:()=>{f(a,!0),o()}});var i=ce(),l=D(i);Ae(l,()=>e.children??je),g(t,i),ue()}const Xi={};function Rd(t){dt(Xi,t)}function Pa(){const t=ct(Xi);if(!t)throw new Error("No MobileSizeContext found");return t}function Od(t,e){de(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=R(it(a())),o=jn();const s=Vi(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{f(r,a(),!0)})};Rd({checkMobileSize:()=>n(r)}),ye(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=ce(),d=D(c);Ae(d,()=>e.children??je),g(t,c),ue()}const Ji={};function Fd(t){dt(Ji,t)}function cn(){const t=ct(Ji);if(!t)throw new Error("No DialogContext found");return t}function zd(t,e){de(e,!0);let a=R(0),r=R(!1),o=R(!0),s=R(!1),i=R(!1);Fd({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{f(a,n(a)+1)},dialogDec:()=>{f(a,n(a)-1)},blockDialog:O=>{f(r,O,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:O=>{f(o,O,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:O=>{f(s,O,!0)},setLeftEnd:O=>{f(i,O,!0)},getCountDialog:()=>n(a)});var w=ce(),T=D(w);Ae(T,()=>e.children??je),g(t,w),ue()}const Zi={};function jd(t){dt(Zi,t)}function uo(){const t=ct(Zi);if(!t)throw new Error("No ScrollContainerContext found");return t}function Bd(t,e){de(e,!0);let a=R(null);jd({setScrollContainer:l=>{f(a,l,!0)},getScrollContainer:()=>n(a)});var s=ce(),i=D(s);Ae(i,()=>e.children??je),g(t,s),ue()}const Qi={};function Hd(t){dt(Qi,t)}function as(){const t=ct(Qi);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Ud(t,e){de(e,!0);let a=R(200);Hd({setDialogPageHeight:l=>{f(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=ce(),i=D(s);Ae(i,()=>e.children??je),g(t,s),ue()}const qd=[cr,la,Ge,jt,wd];function Vd(){return new Promise((t,e)=>{const a=indexedDB.open(md,_d);bt(a,"upgradeneeded",()=>{const r=a.result;for(const o of qd)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),bt(a,ra,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),bt(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),bt(a,oa,()=>{e()})})}function Wd(t,e){de(e,!0);let a=R(null);ye(()=>{Vd().then(l=>{f(a,l,!0)}).catch(l=>{})}),gd({getDB:()=>n(a)});var o=ce(),s=D(o);{var i=l=>{var c=ce(),d=D(c);Ae(d,()=>e.children??je),g(l,c)};q(s,l=>{n(a)&&l(i)})}g(t,o),ue()}function Kd(t,e){de(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Wt(),s=M(a);let i=M(()=>n(s).get(tn)||""),l=M(()=>n(i).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const c=()=>n(l),d=w=>{if(w.length===0){o(tn);return}r(tn,w.map(T=>encodeURIComponent(T)).join(","))},u=w=>{r(tn,[...n(l),w].map(T=>encodeURIComponent(T)).join(","))};yd({setDialogPages:d,getDialogPages:c,pushDialogPage:u,popDialogPage:()=>{const w=n(l)[n(l).length-1];return n(l).length<=1?(o(tn),w):(r(tn,n(l).slice(0,-1).map(T=>encodeURIComponent(T)).join(",")),w)},replaceDialogPage:w=>{r(tn,[...n(l).slice(0,-1),w].map(T=>encodeURIComponent(T)).join(","))},hasDialogPage:w=>n(l).find(T=>{const[O]=T.split("?");return O===w})!==void 0,clearDialogPages:()=>{o(tn)},createDialogPageHref:w=>{const T=new URLSearchParams(n(s).toString());return T.set(tn,[...c(),w].map(O=>encodeURIComponent(O)).join(",")),`${window.location.pathname}?${T.toString()}`},createHandleClickDialogPage:w=>T=>{T.preventDefault(),u(w)}});var x=ce(),H=D(x);Ae(H,()=>e.children??je),g(t,x),ue()}function Gd(t,e){de(e,!0);let a=R(it(new URLSearchParams(window.location.search)));const r=v=>{const h=window.location.pathname;f(a,v,!0),window.history.replaceState(null,"",`${h}${v.size>0?`?${v.toString()}`:""}`)};$c({getSearchParams:()=>n(a),replaceSearchParams:v=>{const h=new URLSearchParams(v);r(h)},setSearchParam:(v,h)=>{const p=new URLSearchParams(n(a));p.set(v,h),r(p)},deleteSearchParam:v=>{const h=new URLSearchParams(n(a));h.delete(v),r(h)},getHref:v=>{const h=new URLSearchParams(v);return`${window.location.pathname}${h.toString().length>0?`?${h.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var d=ce(),u=D(d);Ae(u,()=>e.children??je),g(t,d),ue()}const $i={};function Yd(t){dt($i,t)}function Xd(){const t=ct($i);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Jd(t,e){de(e,!0);let a=it({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";ye(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l);let c=null;const d=u=>{o()&&(c&&clearTimeout(c),c=setTimeout(()=>{o()&&u.target!==document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur?.()},120))};return document.addEventListener("touchstart",d,{passive:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l),document.removeEventListener("touchstart",d)}}),Yd({getIsKeyboardVisible:r});var s=ce(),i=D(s);Ae(i,()=>e.children??je),g(t,s),ue()}function Zd(t,e){de(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};pd({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=ce(),s=D(o);Ae(s,()=>e.children??je),g(t,o),ue()}function Qd(t,e){Wd(t,{children:(a,r)=>{Zd(a,{children:(o,s)=>{Dd(o,{children:(i,l)=>{Ld(i,{children:(c,d)=>{Od(c,{children:(u,v)=>{zd(u,{children:(h,p)=>{Bd(h,{children:(m,E)=>{Ud(m,{children:(_,x)=>{Jd(_,{children:(H,w)=>{Gd(H,{children:(T,O)=>{Kd(T,{children:(I,A)=>{var B=ce(),Y=D(B);Ae(Y,()=>e.children??je),g(I,B)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function $d(t,e){Qd(t,{children:(a,r)=>{ad(a,{children:(o,s)=>{ed(o,{children:(i,l)=>{od(i,{children:(c,d)=>{id(c,{children:(u,v)=>{Ad(u,{children:(h,p)=>{cd(h,{children:(m,E)=>{vd(m,{children:(_,x)=>{bd(_,{children:(H,w)=>{Cd(H,{children:(T,O)=>{kd(T,{children:(I,A)=>{Nd(I,{children:(B,Y)=>{var U=ce(),V=D(U);Ae(V,()=>e.children??je),g(B,U)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const mt=t=>{const a=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(i=>i instanceof HTMLElement?i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement?!i.disabled&&i.offsetParent!==null:i.offsetParent!==null:!1),r=a.indexOf(t);if(r===-1)return{next:null,prev:null};const o=a[r+1],s=a[r-1];return{next:o,prev:s}};let Et=R(""),Hn=R(null),Fa=R(null),Tn=R(null),Un=R(it([])),Fr=R(null),Vn=null;function st(t,e){f(Et,""),Vn=null,f(Fa,null),f(Tn,null),setTimeout(()=>{f(Et,t,!0),e?.onFinish&&f(Fa,e.onFinish,!0),e?.cancel&&(f(Tn,e.cancel.onCancel,!0),Vn=e.cancel.nextFocusRef)},16)}var eu=P('<button type="button" class="c p-18jfd2t">undo</button>'),tu=P('<div class="a p-18jfd2t"><div class="b p-18jfd2t"><span> </span> <!></div></div>'),nu=P("<div><!></div>");function rs(t,e){de(e,!0);const a=qn();ye(()=>(f(Un,[...n(Un),a],!0),()=>{const c=n(Un).indexOf(a);c!==-1&&f(Un,n(Un).filter((d,u)=>u!==c),!0)}));const r=c=>{if(c.key==="Tab"&&c.shiftKey){if(Vn&&n(Et)){c.preventDefault();const{prev:d}=mt(Vn);d?.focus(),f(Et,"")}}else if(c.key==="Tab"&&!c.shiftKey)Vn&&n(Et)&&(c.preventDefault(),f(Et,""),Vn?.focus());else if(c.key==="Escape"&&n(Et)){if(c.preventDefault(),Vn){const{prev:d}=mt(Vn);d?.focus()}f(Et,"")}};ye(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)})),Re(()=>{n(Et);const c=n(Tn)?2e3:800;n(Et)&&(n(Hn)?.getBoundingClientRect(),n(Hn)?.style.setProperty("opacity","1"));const d=setTimeout(()=>{n(Hn)?.style.removeProperty("opacity")},c),u=setTimeout(()=>{f(Et,""),n(Fa)&&n(Fa)(),f(Fa,null),f(Tn,null),n(Hn)?.style.removeProperty("opacity")},c+400);return()=>{clearTimeout(d),clearTimeout(u)}});const o=c=>{c.preventDefault(),n(Tn)&&(f(Fa,null),n(Tn)(),f(Tn,null)),f(Et,""),n(Hn)?.style.removeProperty("opacity")};Re(()=>{n(Et)&&n(Tn)&&n(Fr)&&setTimeout(()=>{n(Fr)?.focus()},151)}),Re(()=>{n(Un),Vt(()=>{f(Et,""),n(Hn)?.style.removeProperty("opacity")})});var s=nu(),i=b(s);{var l=c=>{var d=tu(),u=b(d),v=b(u),h=b(v),p=L(v,2);{var m=E=>{var _=eu();_.__click=o,Xe(_,x=>f(Fr,x),()=>n(Fr)),g(E,_)};q(p,E=>{n(Tn)&&E(m)})}Xe(u,E=>f(Hn,E),()=>n(Hn)),Se(()=>rt(h,n(Et))),g(c,d)};q(i,c=>{n(Et)&&n(Un)[n(Un).length-1]===a&&c(l)})}g(t,s),ue()}ot(["click"]);var au=P('<span class="a p-lxk90o"><!></span>');function lt(t,e){var a=au(),r=b(a);Ae(r,()=>e.children),g(t,a)}var ru=Nc('<svg class="p-1yv1ibq"><use></use></svg>');function pe(t,e){let a=Ne(e,"name",8,"");var r=ru(),o=b(r);Se(()=>tt(o,"href",`#icon-${a()??""}`)),g(t,r)}var ou=P('<button class="a p-18m1f7k"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function el(t,e){de(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=Nr(),{getDialogPages:s}=Jt(),{checkExistedDialog:i}=cn();let l=M(()=>s().length>0||i());const c=h=>{if(h.preventDefault(),n(l))return;const p=r();p==="closed"?a():p==="opened"&&o()};var d=ou();d.__click=c;var u=b(d);ge(u,()=>({"--size":"32px"})),pe(u.lastChild,{name:"sidebarMenu"});var v=L(u,2);lt(v,{children:(h,p)=>{var m=De("Menu");g(h,m)}}),g(t,d),ue()}ot(["click"]);var su=P('<button class="b p-9fi5nt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),iu=P('<div class="a p-9fi5nt"><input class="p-9fi5nt"/> <!></div>');function Lo(t,e){de(e,!0);let a=Ne(e,"value",15,""),r=Ne(e,"ref",15,null);const o=d=>{d.key==="Escape"&&(a(""),e.onChange?.(""))};ye(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=iu(),i=b(s);i.__input=d=>e.onChange?.(d.target?.value||""),Xe(i,d=>r(d),()=>r());var l=L(i,2);{var c=d=>{var u=su();u.__click=()=>{a(""),e.onChange?.("")};var v=b(u);ge(v,()=>({"--size":"20px"})),pe(v.lastChild,{name:"close"});var h=L(v,2);lt(h,{children:(p,m)=>{var E=De("Clear");g(p,E)}}),g(d,u)};q(l,d=>{a()&&d(c)})}Se(()=>tt(i,"placeholder",e.placeholder)),vn("focus",i,function(...d){e.onFocus?.apply(this,d)}),Ei(i,a),g(t,s),ue()}ot(["input","click"]);function os(t,e){de(e,!0),ye(()=>{const a=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("click",a,{capture:!0}),()=>{document.removeEventListener("click",a,{capture:!0})}}),ue()}function lu(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const Za=lu(),cu=()=>{const t=navigator.userAgent;return/android/i.test(t)},_r=cu(),uh=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},fh=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},wr=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let Ia=R(it([]));var du=P("<dialog><div><!></div></dialog> <!>",1);function Ar(t,e){de(e,!0);const a=qn(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;ye(()=>(f(Ia,[...n(Ia),a],!0),()=>{const w=n(Ia).indexOf(a);w!==-1&&f(Ia,n(Ia).filter((T,O)=>O!==w),!0)}));let o=Ne(e,"onClosed",3,()=>{}),s=Ne(e,"blocked",3,!1),i=R(null),l=R(null),c=R(!1),{dialogInc:d,dialogDec:u}=cn();const v=()=>{const w=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(w),o()()},{once:!0}),f(c,!1)};Re(()=>{e.startClose&&v()}),ye(()=>{n(i)?.showModal(),n(i)?.getClientRects(),f(c,!0);const w=T=>{T?.preventDefault(),s()||v()};return n(i)?.addEventListener("cancel",w),n(i)?.addEventListener("close",w),()=>{n(i)?.removeEventListener("cancel",w),n(i)?.removeEventListener("close",w)}}),ye(()=>(d(),()=>{u()})),ye(()=>{const w=T=>{T.key==="Escape"&&s()&&T.preventDefault()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}});function h(){setTimeout(()=>{if(Za||!n(i)||!n(l))return;const w=window.visualViewport;if(w)if(w.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}ye(()=>(h(),window.visualViewport?.addEventListener("resize",h),window.visualViewport?.addEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{window.visualViewport?.removeEventListener("resize",h),window.visualViewport?.removeEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h)}));var p=du(),m=D(p),E=b(m),_=b(E);Ae(_,()=>e.children),Xe(E,w=>f(l,w),()=>n(l)),Xe(m,w=>f(i,w),()=>n(i));var x=L(m,2);{var H=w=>{os(w,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:v})};q(x,w=>{n(i)&&n(l)&&!s()&&w(H)})}Se(()=>{Qe(m,1,nt({a:!0,b:n(c),c:n(Ia).length>1}),"p-1x14yml"),Qe(E,1,nt({d:!0,b:n(c)}),"p-1x14yml")}),g(t,p),ue()}var uu=P("<div><!></div>");function fu(t,e){de(e,!0);let a=R(!1),r=R(null);const o=()=>{const u=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(u),e.onClosed()},{once:!0}),f(a,!1)},s=u=>{u.target!==n(r)&&!n(r)?.contains(u.target)&&o()},i=u=>{u.target!==n(r)&&!n(r)?.contains(u.target)&&o()},l=u=>{u.key==="Escape"&&o()};ye(()=>{n(r)?.getClientRects(),f(a,!0);const u=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(u),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),Re(()=>{e.startClose&&o()});var c=uu(),d=b(c);Ae(d,()=>e.children),Xe(c,u=>f(r,u),()=>n(r)),Se(()=>Qe(c,1,nt({a:!0,b:n(a)}),"p-1unpq18")),g(t,c),ue()}var vu=P("<ul><!></ul>"),gu=P("<ul><!></ul>");function Mr(t,e){de(e,!0);let a=Ne(e,"ref",15);var r=ce(),o=D(r);{var s=l=>{Ar(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(c,d)=>{var u=vu(),v=b(u);Ae(v,()=>e.children),Xe(u,h=>a(h),()=>a()),Se(()=>Qe(u,1,nt({a:!0,b:e.isMobile}),"p-1sp2xya")),g(c,u)},$$slots:{default:!0}})},i=l=>{fu(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(c,d)=>{var u=gu(),v=b(u);Ae(v,()=>e.children),Xe(u,h=>a(h),()=>a()),Se(()=>Qe(u,1,nt({a:!0,b:e.isMobile}),"p-1sp2xya")),g(c,u)},$$slots:{default:!0}})};q(o,l=>{e.isMobile?l(s):l(i,!1)})}g(t,r),ue()}var hu=P("<button><!></button>"),pu=P("<a><!></a>");function ze(t,e){let a=Ne(e,"dangerous",3,!1),r=Ne(e,"type",3,"button"),o=Ne(e,"href",3,"");var s=ce(),i=D(s);{var l=d=>{var u=hu();u.__click=function(...h){e.onClick?.apply(this,h)},u.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=b(u);Ae(v,()=>e.children??je),Se(()=>Qe(u,1,nt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")),g(d,u)},c=d=>{var u=pu();u.__click=function(...h){e.onClick?.apply(this,h)},u.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=b(u);Ae(v,()=>e.children??je),Se(()=>{tt(u,"href",o()),Qe(u,1,nt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")}),g(d,u)};q(i,d=>{r()==="button"?d(l):d(c,!1)})}g(t,s)}ot(["click","keydown"]);var mu=P('<li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li>',1),_u=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),wu=P('<div class="a p-cjxu92"><button><!> <!></button> <!></div>');function yu(t,e){de(e,!0);let a=R(!1),r=R(!1);const{getFeedOrder:o,setFeedOrder:s}=Di();let i=Za||_r,l=M(o);const c=()=>{n(a)||f(a,!0)},d=x=>{f(r,!0),s(x)},u=()=>{f(a,!1),f(r,!1)};ye(()=>{const x=H=>{H.key==="Escape"&&f(r,!0)};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)});var v=wu(),h=b(v);h.__click=c,Qe(h,1,nt({b:!0,c:!0}),"p-cjxu92");var p=b(h);pe(p,{name:"filter"});var m=L(p,2);lt(m,{children:(x,H)=>{var w=De("show feed order menu");g(x,w)}});var E=L(h,2);{var _=x=>{var H=_u(),w=D(H);ge(w,()=>({"--right":"0px","--top":"44px"})),Mr(w.lastChild,{get startClose(){return n(r)},onClosed:u,get isMobile(){return i},children:(T,O)=>{var I=mu(),A=D(I),B=b(A);{let ve=M(()=>n(l)==="newest");ze(B,{get active(){return n(ve)},get dialogMode(){return i},onClick:()=>d("newest"),children:(_e,Z)=>{var F=De("Newest");g(_e,F)},$$slots:{default:!0}})}var Y=L(A,2),U=b(Y);{let ve=M(()=>n(l)==="oldest");ze(U,{get active(){return n(ve)},get dialogMode(){return i},onClick:()=>d("oldest"),children:(_e,Z)=>{var F=De("Oldest");g(_e,F)},$$slots:{default:!0}})}var V=L(Y,2),Q=b(V);{let ve=M(()=>n(l)==="AtoZ");ze(Q,{get active(){return n(ve)},get dialogMode(){return i},onClick:()=>d("AtoZ"),children:(_e,Z)=>{var F=De("A to Z");g(_e,F)},$$slots:{default:!0}})}var J=L(V,2),K=b(J);{let ve=M(()=>n(l)==="ZtoA");ze(K,{get active(){return n(ve)},get dialogMode(){return i},onClick:()=>d("ZtoA"),children:(_e,Z)=>{var F=De("Z to A");g(_e,F)},$$slots:{default:!0}})}g(T,I)},$$slots:{default:!0}}),g(x,H)};q(E,x=>{n(a)&&x(_)})}g(t,v),ue()}ot(["click"]);var bu=P('<div><!> <div class="a p-y3zt6o"></div></div>');function Na(t,e){de(e,!0);let a=R(!1);ye(()=>{const s=setTimeout(()=>{f(a,!0)},200);return()=>{clearTimeout(s)}});var r=bu(),o=b(r);Ae(o,()=>e.children??je),Se(()=>Qe(r,1,nt({b:!0,c:n(a)}),"p-y3zt6o")),g(t,r),ue()}var Su=P("<a><!></a>"),Cu=P("<button><!></button>");function Nt(t,e){let a=Ne(e,"type",3,"standard"),r=Ne(e,"typeButton",3,"button"),o=Ne(e,"element",3,"button"),s=Ne(e,"href",3,""),i=Ne(e,"fullWidth",3,!1),l=Ne(e,"withoutMinWidth",3,!1);var c=ce(),d=D(c);{var u=h=>{var p=Su();p.__click=function(...E){e.onClick?.apply(this,E)};var m=b(p);Ae(m,()=>e.children??je),Se(()=>{tt(p,"target",e.target),tt(p,"rel",e.rel),tt(p,"href",s()),Qe(p,1,nt({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),g(h,p)},v=h=>{var p=Cu();p.__click=function(...E){e.onClick?.apply(this,E)};var m=b(p);Ae(m,()=>e.children??je),Se(()=>{tt(p,"type",r()),Qe(p,1,nt({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),g(h,p)};q(d,h=>{o()==="a"?h(u):h(v,!1)})}g(t,c)}ot(["click"]);let Ro=R(!1),zr=R(!1),Oo=R(""),Fo=R("Cancel"),zo=R("Confirm"),jo,qr=R(void 0),Bo,Ho=R("dangerous");function Ba(t){f(Ro,!0),f(Oo,t.title,!0),t.buttonCancelTitle&&f(Fo,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&f(zo,t.buttonConfirmTitle,!0),jo=t.onConfirm,f(qr,t.onCancel,!0),Bo=t.onClosed,t.type?f(Ho,t.type,!0):f(Ho,"dangerous")}var xu=P('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),Tu=P('<div class="a p-1jlul5o"><!></div>');function ku(t,e){de(e,!0);let a=R(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{f(a,!0)},250)};ye(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(qr)?.(),f(zr,!0)},l=async()=>{s(),await jo?.(),f(zr,!0),o=!0},c=()=>{clearTimeout(r),f(a,!1),f(Ro,!1),f(zr,!1),f(Oo,""),f(Fo,"Cancel"),f(zo,"Confirm"),f(qr,void 0),jo=void 0,Bo&&Bo(o),o=!1};var d=ce(),u=D(d);{var v=h=>{Ar(h,{get blocked(){return n(a)},get startClose(){return n(zr)},onClosed:c,children:(p,m)=>{var E=Tu(),_=b(E);{var x=w=>{Na(w,{})},H=w=>{var T=xu(),O=D(T),I=b(O),A=L(O,2),B=b(A);{var Y=V=>{Nt(V,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(Q,J)=>{var K=De();Se(()=>rt(K,n(Fo))),g(Q,K)},$$slots:{default:!0}})};q(B,V=>{n(qr)&&V(Y)})}var U=L(B,2);Nt(U,{onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(Ho)},children:(V,Q)=>{var J=De();Se(()=>rt(J,n(zo))),g(V,J)},$$slots:{default:!0}}),Se(()=>rt(I,n(Oo))),g(w,T)};q(_,w=>{n(a)?w(x):w(H,!1)})}g(p,E)},$$slots:{default:!0}})};q(u,h=>{n(Ro)&&h(v)})}g(t,d),ue()}const yr=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,c=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var Eu=P('<div class="a p-rp2pt7"><a class="b p-rp2pt7"><span class="c p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function Pu(t,e){de(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=Jt(),{checkExistedDialog:i}=cn(),l=()=>{o.length===0&&!i()&&s(me.NewNote)};ye(()=>yr({key:"n",action:l})),Qo();var c=Eu(),d=b(c),u=M(()=>r(me.NewNote));d.__click=function(..._){n(u)?.apply(this,_)};var v=b(d),h=b(v);ge(h,()=>({"--size":"32px","--color":"#b0b0b0"})),pe(h.lastChild,{name:"add"});var p=L(h,2);lt(p,{children:(_,x)=>{var H=De("Add note");g(_,H)}});var m=L(v,2),E=b(m);ge(E,()=>({"--size":"16px","--color":"#b0b0b0"})),pe(E.lastChild,{name:"plus"}),Se(_=>tt(d,"href",_),[()=>a(me.NewNote)]),g(t,c),ue()}ot(["click"]);var Nu=P("<button><!></button>");function ca(t,e){de(e,!0);let a=Ne(e,"type",3,"button"),r=!1,o=R(null);Re(()=>{e.onRef&&e.onRef(n(o))});const s=u=>{(u.key==="Enter"||u.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=u=>{(u.pointerType==="mouse"&&u.button===0||u.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(u)};var c=Nu();c.__keydown=s,c.__click=i,c.__pointerdown=l,c.__touchstart=function(...u){e.onTouchStart?.apply(this,u)};var d=b(c);Ae(d,()=>e.children??je),Xe(c,u=>f(o,u),()=>n(o)),Se(()=>{tt(c,"type",a()),c.disabled=e.disabled,Qe(c,1,nt({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-pgzded")}),g(t,c),ue()}ot(["keydown","click","pointerdown","touchstart"]);var Au=P('<div class="b p-1pt17hy"> </div>'),Mu=P('<div class="a p-1pt17hy"><input/> <!></div>');function br(t,e){de(e,!0);let a=Ne(e,"value",15,""),r=Ne(e,"error",3,""),o=Ne(e,"ref",15,null);var s=Mu(),i=b(s);i.__input=function(...u){e.onInput?.apply(this,u)};let l;Xe(i,u=>o(u),()=>o());var c=L(i,2);{var d=u=>{var v=Au(),h=b(v);Se(()=>rt(h,r())),g(u,v)};q(c,u=>{r()&&u(d)})}Se(()=>{tt(i,"placeholder",e.placeholder),l=Qe(i,1,"p-1pt17hy",null,l,{error:!!r()})}),vn("blur",i,function(...u){e.onBlur?.apply(this,u)}),vn("focus",i,function(...u){e.onFocus?.apply(this,u)}),Ei(i,a),g(t,s),ue()}ot(["input"]);var Du=P('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Iu=P('<form class="a p-y9ylet"><!></form>');function Lu(t,e){de(e,!0);const{renameTag:a}=Ot(),{getSelectedTags:r,setSelectedTags:o}=zn(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=ka(),{getFiltredNotes:c}=Ea();let d=R(!1),u=R(!1),v,h=!1,p=R(null),m=R(it(e.tag)),E=e.nextFocusRef;ye(()=>(n(p)&&n(p).focus(),()=>{v&&clearTimeout(v)}));const _=()=>{v=setTimeout(()=>{f(u,!0)},250)},x=()=>{f(d,!0)},H=async()=>{if(n(m).trim()===e.tag){x();return}if(n(m).trim()!=="")try{_();const O=r(),I=[...O].map(V=>V===e.tag?n(m).trim():V),A=new Set(s()),B=c(),Y=A.size?[...A]:B.map(V=>V.id),{cancel:U}=await a(e.tag,n(m).trim(),Y);l(),o(new Set(I)),st("Tag renamed",{cancel:{nextFocusRef:E,onCancel:async()=>{await U(),o(O),i(A),setTimeout(()=>{const{prev:V}=mt(E);V?.focus()},16)}}}),h=!0}finally{f(d,!0)}},w=()=>{e.onClosed?.(h)},T=O=>{O.preventDefault(),H()};Ar(t,{get blocked(){return n(u)},get startClose(){return n(d)},onClosed:w,children:(O,I)=>{var A=Iu(),B=b(A);{var Y=V=>{Na(V,{})},U=V=>{var Q=Du(),J=D(Q),K=b(J),ve=L(J,2);br(ve,{placeholder:"Enter new tag name",get ref(){return n(p)},set ref($){f(p,$,!0)},get value(){return n(m)},set value($){f(m,$,!0)}});var _e=L(ve,2),Z=b(_e);Nt(Z,{onClick:x,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:($,se)=>{var re=De("Cancel");g($,re)},$$slots:{default:!0}});var F=L(Z,2);Nt(F,{onClick:H,fullWidth:!0,withoutMinWidth:!0,children:($,se)=>{var re=De("OK");g($,re)},$$slots:{default:!0}}),Se(()=>rt(K,`Rename "${e.tag??""}" for selected notes`)),g(V,Q)};q(B,V=>{n(u)?V(Y):V(U,!1)})}vn("submit",A,T),g(O,A)},$$slots:{default:!0}}),ue()}let Xn=R(!1),da=R(!1),Gt=R(""),ua=R(0),dr=R(0),ur=R(0),Vr,Yr=()=>({bottom:0,right:0,height:0}),$t=R(null),Uo=R(null);function Ru(t){if(n(Xn)){f(da,!0),n(Gt)!==t.tag&&(Vr=()=>{const a=t.getRect();f(Xn,!0),f(Gt,t.tag,!0),f(ua,a.bottom,!0),f(dr,a.right,!0),f(ur,a.height,!0),Yr=t.getRect,f($t,t.focusRef,!0)});return}const e=t.getRect();f(Xn,!0),f(Gt,t.tag,!0),f(ua,e.bottom,!0),f(dr,e.right,!0),f(ur,e.height,!0),Yr=t.getRect,f($t,t.focusRef,!0)}const Ou=()=>n(Xn),Fu=()=>n(Uo);var zu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),ju=P('<li class="p-16hbyw2"><!></li>'),Bu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Hu=P('<li class="p-16hbyw2"><!></li>'),Uu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),qu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),Vu=P('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),Wu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ku=P("<!> <!>",1);function Gu(t,e){de(e,!0);const{getScrollContainer:a}=uo(),{pinTag:r,getGetMapTags:o,deleteTag:s}=Ot(),{checkMobileSize:i}=Pa(),{getSelectedTags:l,removeTag:c,setSelectedTags:d}=zn(),{getSelectedNotes:u,setSelectedNotes:v,clearNotes:h}=ka(),{getFiltredNotes:p}=Ea();let m=R(!1);Re(()=>{n(Xn),Vt(()=>{f(m,o()().get(n(Gt))?.pinned||!1,!0)})});let E=R(!1);const _=()=>{r(n(Gt),!0),f(da,!0);let Z=n($t),F=mt(Z)?.next;st("Tag pinned",{cancel:{nextFocusRef:F,onCancel:async()=>{r(n(Gt),!1),setTimeout(()=>{const{prev:$}=mt(F);$?.focus()},16)}}})},x=()=>{r(n(Gt),!1),f(da,!0);let Z=n($t),F=mt(Z)?.next;st("Tag unpinned",{cancel:{nextFocusRef:F,onCancel:async()=>{r(n(Gt),!0),setTimeout(()=>{const{prev:$}=mt(F);$?.focus()},16)}}})},H=()=>{f(Xn,!1),f(da,!1),f(ua,0),f(dr,0),f(ur,0),Yr=()=>({bottom:0,right:0,height:0}),f($t,null),Vr&&setTimeout(()=>{Vr?.(),Vr=void 0})};let w=M(()=>window.innerHeight-n(ua)<100?n(ua)-n(ur)-98+"px":n(ua)+5+"px"),T=M(a);const O=Z=>{Z.key==="Tab"&&Z.shiftKey&&(Z.preventDefault(),n($t)?.focus())},I=Z=>{Z.key==="Tab"&&!Z.shiftKey&&n($t)&&(Z.preventDefault(),mt(n($t))?.next?.focus())};ye(()=>{const Z=F=>{F.key==="Escape"&&n(Xn)&&n($t)?.focus()};return window.addEventListener("keydown",Z),()=>{window.removeEventListener("keydown",Z)}});const A=()=>{f(da,!0);let Z=n($t),F=mt(Z)?.next;Ba({title:`Are you sure to delete "${n(Gt)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const $=Array.from(n(U)),se=new Set(u()),re=p(),le=se.size?[...se]:re.map(Te=>Te.id);n(U).has(n(Gt))&&(se.size===0||re.length===se.size)&&c(n(Gt)),h();const{cancel:we}=await s(n(Gt),le);st("Tag deleted",{cancel:{nextFocusRef:F,onCancel:async()=>{await we(),d(new Set($)),v(new Set(se)),setTimeout(()=>{const{prev:Te}=mt(F);Te?.focus()},16)}}})},onCancel:async()=>{},onClosed:$=>{setTimeout(()=>{$||Z?.focus()},16)}})};let B=()=>{};const Y=()=>{f(da,!0),f(E,!0);let Z=n($t);B=()=>{f(E,!1),setTimeout(()=>{Z?.focus()},16)}};Re(()=>{const Z=()=>{const F=Yr();f(ua,F.bottom,!0),f(dr,F.right,!0),f(ur,F.height,!0)};return n(T)?.addEventListener("scroll",Z),window.addEventListener("resize",Z),()=>{n(T)?.removeEventListener("scroll",Z),window.removeEventListener("resize",Z)}});let U=M(l),V=M(i);var Q=Ku(),J=D(Q);{var K=Z=>{var F=Wu(),$=D(F);ge($,()=>({"--left":n(dr)-36+"px","--top":n(w),"--transform-origin":"top left"})),Mr($.lastChild,{get startClose(){return n(da)},onClosed:H,get isMobile(){return n(V)},get ref(){return n(Uo)},set ref(se){f(Uo,se,!0)},children:(se,re)=>{var le=Vu(),we=D(le);{var Te=Ce=>{var ie=ju(),oe=b(ie);ze(oe,{onClick:_,onKeydown:O,get dialogMode(){return n(V)},children:(Ee,qe)=>{var y=zu(),S=D(y);ge(S,()=>({"--size":"20px"})),pe(S.lastChild,{name:"pin"}),g(Ee,y)},$$slots:{default:!0}}),g(Ce,ie)},N=Ce=>{var ie=Hu(),oe=b(ie);ze(oe,{onClick:x,onKeydown:O,get dialogMode(){return n(V)},children:(Ee,qe)=>{var y=Bu(),S=D(y);ge(S,()=>({"--size":"20px"})),pe(S.lastChild,{name:"pin-cancel"}),g(Ee,y)},$$slots:{default:!0}}),g(Ce,ie)};q(we,Ce=>{n(m)?Ce(N,!1):Ce(Te)})}var G=L(we,2),he=b(G);ze(he,{onClick:Y,get dialogMode(){return n(V)},children:(Ce,ie)=>{var oe=Uu(),Ee=D(oe);ge(Ee,()=>({"--size":"20px"})),pe(Ee.lastChild,{name:"pen"}),g(Ce,oe)},$$slots:{default:!0}});var be=L(G,2),ke=b(be);ze(ke,{onClick:A,onKeydown:I,dangerous:!0,get dialogMode(){return n(V)},children:(Ce,ie)=>{var oe=qu(),Ee=D(oe);ge(Ee,()=>({"--size":"20px"})),pe(Ee.lastChild,{name:"bin"}),g(Ce,oe)},$$slots:{default:!0}}),g(se,le)},$$slots:{default:!0}}),g(Z,F)};q(J,Z=>{n(Xn)&&Z(K)})}var ve=L(J,2);{var _e=Z=>{{let F=M(()=>mt(n($t))?.next||null);Lu(Z,{get tag(){return n(Gt)},get nextFocusRef(){return n(F)},onClosed:$=>{B($)}})}};q(ve,Z=>{n(E)&&Z(_e)})}g(t,Q),ue()}var Yu=P('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Xu=P('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),Ju=P("<!> <span> </span> <!>",1),Zu=P('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function fr(t,e){de(e,!0);let{getGetMapTags:a}=Ot(),r=R(null),o=M(Ou);const s=()=>{if(n(r)){const v=n(r).getBoundingClientRect();return{bottom:v.bottom,right:v.right,height:v.height}}return{bottom:0,right:0,height:0}},i=v=>{v.stopPropagation(),v.preventDefault(),Ru({tag:e.tag,getRect:s,focusRef:n(r)})},l=v=>{v.key==="Tab"&&!v.shiftKey&&n(o)&&(v.preventDefault(),Fu()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let c=M(()=>a()().get(e.tag)?.pinned||!1);var d=Zu(),u=b(d);ge(u,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),ca(u.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(v,h)=>{var p=Ju(),m=D(p);{var E=T=>{var O=Yu(),I=b(O);ge(I,()=>({"--size":"18px"})),pe(I.lastChild,{name:"pin"}),g(T,O)};q(m,T=>{n(c)&&T(E)})}var _=L(m,2),x=b(_),H=L(_,2);{var w=T=>{var O=Xu();O.__click=i,O.__keydown=l;var I=b(O),A=b(I);ge(A,()=>({"--size":"16px"})),pe(A.lastChild,{name:"menu"});var B=L(A,2);lt(B,{children:(Y,U)=>{var V=De("Tag options");g(Y,V)}}),Xe(O,Y=>f(r,Y),()=>n(r)),Se(()=>Qe(O,1,nt({c:!0,d:e.type==="selected"}),"p-9jjlcl")),g(T,O)};q(H,T=>{e.hideMenu||T(w)})}Se(()=>rt(x,e.tag)),g(v,p)},$$slots:{default:!0}}),g(t,d),ue()}ot(["click","keydown"]);var Qu=P('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function Ts(t,e){de(e,!0);let a=Ne(e,"mobile",3,!1);const{getGetMapTags:r}=Ot();let s=M(()=>{const p=r()();return[...e.tags].sort((m,E)=>p.get(m)?.pinned?-1:p.get(E)?.pinned?1:m.localeCompare(E))}),i=M(()=>n(s).filter(p=>r()().get(p)?.pinned)),l=M(()=>n(s).filter(p=>!r()().get(p)?.pinned));var c=Qu(),d=b(c),u=b(d);Ln(u,16,()=>n(i),p=>p,(p,m)=>{fr(p,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})});var v=L(u,2);Ln(v,17,()=>e.metaTags,p=>"meta"+p,(p,m)=>{fr(p,{hideMenu:!0,get tag(){return n(m)},onClick:()=>{e.handleMetaTagClick(n(m))}})});var h=L(v,2);Ln(h,16,()=>n(l),p=>p,(p,m)=>{fr(p,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})}),Se(()=>Qe(d,1,nt({b:!0,c:a()}),"p-lawyrs")),g(t,c),ue()}var $u=P('<div class="b c p-1i0uzbi"><div class="d p-1i0uzbi"><button class="e p-1i0uzbi"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),ef=P('<div class="a p-1i0uzbi"><!></div>');function ks(t,e){de(e,!0);let a=R(null);const r=c=>{f(a,c,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};Re(()=>{n(a)&&n(a).focus()});var s=ef(),i=b(s);{var l=c=>{var d=$u(),u=b(d),v=b(u);v.__click=o;var h=b(v);ge(h,()=>({"--size":"20px"})),pe(h.lastChild,{name:"close"});var p=L(h,2);lt(p,{children:(_,x)=>{var H=De("Clear");g(_,H)}});var m=L(u,2);Ln(m,19,()=>e.metaTags,_=>"meta_"+_,(_,x,H)=>{{let w=M(()=>n(H)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);fr(_,{hideMenu:!0,type:"selected",get tag(){return n(x)},onClick:()=>{e.handleMetaTagClick(n(x))},get onRef(){return n(w)}})}});var E=L(m,2);Ln(E,18,()=>e.selectedTags,_=>_,(_,x,H)=>{{let w=M(()=>n(H)===e.selectedTags.size-1?r:void 0);fr(_,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return x},onClick:()=>{e.handleSelectedTagClick(x)},get onRef(){return n(w)}})}}),g(c,d)};q(i,c=>{e.selectedTags.size+e.metaTags.size>0&&c(l)})}g(t,s),ue()}ot(["click"]);const qo=(t,e,a,r)=>{if(t.has(Ye.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},Rn=200,tf=t=>t<.5?2*t*t:-1+(4-2*t)*t,tl=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,tf(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},nf=t=>{const{getIsKeyboardVisible:a}=Xd();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=v=>({x:v.clientX,y:v.clientY,time:performance.now()}),c=v=>{r=[l(v.touches[0])],o=!0},d=v=>{if(!o||s)return;r.push(l(v.touches[0]));const h=performance.now()-150;r=r.filter(A=>A.time>=h);const p=r.at(-1),m=r[0];if(!p||!m)return;const E=m.x,_=m.y,x=p.x,H=p.y,w=x-E,T=H-_,O=Math.abs(w)>Math.abs(T),I=Math.abs(w)>3;O&&I&&!a()&&(s=!0,v.preventDefault(),t([...r]),i())},u=()=>{i()};ye(()=>(document.addEventListener("touchstart",c,{passive:!0}),document.addEventListener("touchmove",d,{passive:!1}),document.addEventListener("touchend",u,{passive:!0}),document.addEventListener("touchcancel",u,{passive:!0}),()=>{document.removeEventListener("touchstart",c),document.removeEventListener("touchmove",d),document.removeEventListener("touchend",u),document.removeEventListener("touchcancel",u)}))},Es=5,Ps=.6,na=.3;function nl(t,e){de(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,c=0,d=0,u=null,v=null;const h=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,c=0,d=0,u!==null&&(cancelAnimationFrame(u),u=null),v&&(clearTimeout(v),v=null)},p=()=>{e.onCancel(),h()},m=()=>{v&&clearTimeout(v),v=setTimeout(p,5e3)};nf(async I=>{if(!o)try{const A=I.at(-1);if(!A)throw new Error("No points available for swipe initialization");const B=await e.onInit();if(!B)return;s=B.initialPosition,i=B.currentPosition,l=B.minPosition,c=B.maxPosition,d=B.width,r=A.x,a=I,o=!0,m()}catch{h()}});const _=I=>Math.max(l,Math.min(c,I)),x=()=>{if(u=null,!o){h();return}const I=a.at(-1),A=a[0];if(!I||!A)return;let B=I.x-r;r=I.x;const Y=_(i+B);Y!==i&&(i=Y,e.onUpdate({initialPosition:s,newPosition:Y,width:d,minPosition:l,maxPosition:c}))},H=I=>{if(!o){h();return}a.push({x:I.touches[0].clientX,y:I.touches[0].clientY,time:performance.now()});const A=performance.now()-150;a=a.filter(V=>V.time>=A),u===null&&(u=requestAnimationFrame(x)),m();const B=I.touches[0].clientX-a[0].x,Y=I.touches[0].clientY-a[0].y;Math.abs(B)>Math.abs(Y)&&I.cancelable&&I.preventDefault()},w=I=>{const A=Math.abs(I);if(A>=Ps)return Es;if(A>=na){const B=(A-na)/(Ps-na);return e.baseActionThreshold-B*(e.baseActionThreshold-Es)}else return e.baseActionThreshold},T=I=>{if(!o){h();return}let A=0;a.push({x:I.changedTouches[0].clientX,y:I.changedTouches[0].clientY,time:performance.now()}),x(),u!==null&&(cancelAnimationFrame(u),u=null);const B=a[0],Y=a[a.length-1],U=Y.x-B.x,V=Y.time-B.time;V>0&&(A=U/V);const Q=w(A);e.onFinish({swipeVelocity:A,currentPosition:i,minPosition:l,maxPosition:c,initialPosition:s,width:d,actionThreshold:Q}),h()},O=()=>{p()};ye(()=>(document.addEventListener("touchmove",H,{passive:!1}),document.addEventListener("touchend",T,{passive:!0}),document.addEventListener("touchcancel",O,{passive:!0}),()=>{document.removeEventListener("touchmove",H),document.removeEventListener("touchend",T),document.removeEventListener("touchcancel",O),u!==null&&cancelAnimationFrame(u),v&&clearTimeout(v)})),ue()}function af(t,e){de(e,!0);const a=jn();let r=Ne(e,"animationRef",7),o=Ne(e,"dialog",7);nl(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const d=-e.dialogWidth*.7,u=0;let v=e.sidebarState==="closed"?d:u,h=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let E=()=>1;if(r().current){r().current.pause();let _=Number(r().current.currentTime);wr()&&(_=Number(_)+50,r().current.currentTime=Math.min(Math.max(Rn-1,_),_));const x=r().current.effect?.getComputedTiming().progress||0;E=()=>x,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(_=>requestAnimationFrame(_)),h=Math.abs(1-E())}h=e.sidebarState==="closed"?h:1-h,o().style.setProperty("--backdrop-bg",`${h*.1}`),o()&&!o().open&&(o().showModal(),wr()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=h*-25;const p=h*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let m=e.sidebarState==="closed"?d:u;return e.sidebarState==="opened"||e.sidebarState==="closed"||(m=p),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:v,currentPosition:m,minPosition:d,maxPosition:u,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:d,width:u})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const v=1-Math.abs(d/u)/7*10;o().style.transform=`translate3d(${d}px, 0, 0)`,a.swipingRatio=v*-25,o().style.setProperty("--backdrop-bg",`${v*.1}`)},onFinish:({swipeVelocity:d,currentPosition:u,initialPosition:v,width:h,actionThreshold:p})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let m="close";const E=Math.abs(u-v)/h*100/7*10;if(E===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(E===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?m=Math.abs(E)>p||d>na?"open":"close":e.sidebarState==="swipingClose"&&(m=Math.abs(E)>p&&d<=na||d<-na?"close":"open");let _=tl(Math.abs(E)/100);e.sidebarState==="swipingClose"&&m==="close"&&(_=1-_);const x=(m==="open"?1-_:_)*Rn;a.duration=x/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${m==="open"?.1:0}`),m==="open"?e.onOpen():m==="close"&&e.onClose()}}),ue()}var rf=P("<dialog><div><!> <!></div></dialog> <!> <!>",1);function of(t,e){de(e,!0);const{getSidebarState:a,setSidebarState:r}=Nr();let o=R(0);ye(()=>{const K=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",K),K(),()=>{window.removeEventListener("resize",K)}});const s=jn(),{isScrolling:i}=ns();let l=R(null),c=R(null),d={},u=M(a);const v=()=>{e.blocked||r("closing")},h=K=>{r(K==="open"?"swipingOpen":"swipingClose")},p=()=>{r("opened")},m=()=>{r("preOpening")},E=()=>{n(l)?.close(),r("closed")},_=K=>{K.preventDefault(),v()};ye(()=>(n(l)?.addEventListener("close",E),n(l)?.addEventListener("cancel",_),()=>{n(l)?.removeEventListener("close",E),n(l)?.removeEventListener("cancel",_)}));const x=M(i);let H=M(()=>s.working);const w=K=>{K?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ta().duration};Re(()=>{n(u)==="opening"?Vt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const K=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const ve=n(l)?.animate([{transform:K},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||Rn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});d.current=ve,ve&&(ve.onfinish=()=>{p(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ta().duration,ve.cancel(),d.current=void 0})})}):n(u)==="closing"&&Vt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const K=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const ve=n(l)?.animate([{transform:K},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||Rn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});d.current=ve,ve&&(ve.onfinish=()=>{E(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ta().duration,ve.cancel(),d.current=void 0})})})}),Re(()=>{n(u)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),wr()&&n(l)?.getBoundingClientRect()),r("opening"))}),ye(()=>{n(u)==="opened"&&r("preOpening")});var T=rf(),O=D(T),I=b(O),A=b(I);Ae(A,()=>e.children);var B=L(A,2);{var Y=K=>{rs(K,{})};q(B,K=>{n(u)==="opened"&&K(Y)})}Xe(I,K=>f(c,K),()=>n(c)),Xe(O,K=>f(l,K),()=>n(l));var U=L(O,2);{var V=K=>{os(K,{get dialog(){return n(l)},get dialogInner(){return n(c)},onClose:v})};q(U,K=>{n(c)&&n(u)==="opened"&&!e.blocked&&K(V)})}var Q=L(U,2);{var J=K=>{af(K,{onCancelSwipe:w,onOpen:m,onClose:v,onSwipe:h,get dialogWidth(){return n(o)},get animationRef(){return d},get dialog(){return n(l)},get sidebarState(){return n(u)}})};q(Q,K=>{!n(x)&&!e.blocked&&K(J)})}Se(()=>{Qe(O,1,nt({a:!0,b:n(H),c:n(u)==="opened"||n(u)==="opening"||n(u)==="closing"||n(u)==="swipingClose",d:n(u)==="opened"||n(u)==="opening"||n(u)==="swipingOpen"}),"p-1gucilc"),Qe(I,1,nt({e:!0,f:n(u)==="swipingOpen",g:n(u)!=="opened"}),"p-1gucilc")}),g(t,T),ue()}var sf=P('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),lf=P('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function cf(t,e){de(e,!0);const{checkMobileSize:a}=Pa(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=Nr(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:c}=Jt(),{getTagsSearch:d,setTagsSearch:u}=nd(),{getSelectedTags:v,addTag:h,removeTag:p,clearTags:m}=zn(),{getSelectedMetaTags:E,addMetaTag:_,removeMetaTag:x,clearSelectedMetaTags:H}=co();let w=M(v),T=M(E);const{getGetNotes:O,checkNotesInArchive:I,checkNotesInBin:A}=Ot(),B=M(O),Y=N=>{h(N)},U=N=>{_(N)},V=N=>{p(N)},Q=N=>{x(N)};let J=M(()=>n(w).size===0&&!n(T).has(Ye.INBOX)&&(n(B)()||[]).some(N=>(!n(T).has(Ye.ARCHIVED)&&!n(T).has(Ye.BIN)&&N?.data&&!N.data.deletedAt&&!N.data.archivedAt||n(T).has(Ye.ARCHIVED)&&N?.data&&!N.data.deletedAt&&N.data.archivedAt||n(T).has(Ye.BIN)&&N?.data&&N.data.deletedAt)&&N?.data?.tags.length===0)),K=M(()=>qo(n(T),n(w),n(B)()||[],N=>!(N?.data&&(N.data.deletedAt||N.data.archivedAt)&&!n(T).has(Ye.ARCHIVED)&&!n(T).has(Ye.BIN)||N?.data&&(N.data.deletedAt||!N.data.archivedAt)&&n(T).has(Ye.ARCHIVED)||N?.data&&!N.data.deletedAt&&n(T).has(Ye.BIN)))),ve=M(()=>n(K).filter(N=>d()===""||N.toLowerCase().indexOf(d().toLowerCase())!==-1)),_e=M(a);const{checkExistedDialog:Z}=cn();let F=M(()=>i().length>0||Z());const $=()=>{if(n(_e)){if(n(F))return;o()==="opened"?r():o()==="closed"&&s()}};ye(()=>yr({key:"b",meta:!0,action:$})),ye(()=>yr({key:"b",ctrl:!0,action:$}));let se=M(()=>[...n(J)&&n(T).size===0?[Ye.INBOX]:[],...n(T).size===0?[...I()&&n(w).size===0?[Ye.ARCHIVED]:[],...A()&&n(w).size===0?[Ye.BIN]:[]]:[]].filter(N=>d()===""||N.toLowerCase().indexOf(d().toLowerCase())!==-1).sort((N,G)=>N===Ye.INBOX?-1:G===Ye.INBOX?1:N.localeCompare(G)));var re=ce(),le=D(re);{var we=N=>{of(N,{get blocked(){return n(F)},children:(G,he)=>{var be=sf(),ke=D(be),Ce=b(ke),ie=b(Ce);el(ie,{});var oe=L(ie,2),Ee=b(oe),qe=M(()=>c(me.Settings));Ee.__click=function(...ee){n(qe)?.apply(this,ee)};var y=b(Ee);ge(y,()=>({"--size":"24px"})),pe(y.lastChild,{name:"settings"});var S=L(y,2);lt(S,{children:(ee,ae)=>{var xe=De("Settings");g(ee,xe)}});var C=L(Ee,2),k=M(()=>c(me.Sync));C.__click=function(...ee){n(k)?.apply(this,ee)};var z=b(C);ge(z,()=>({"--size":"24px"})),pe(z.lastChild,{name:"sync"});var W=L(z,2);lt(W,{children:(ee,ae)=>{var xe=De("Sync");g(ee,xe)}});var te=L(Ce,2),fe=b(te);{let ee=M(d);Lo(fe,{placeholder:"Search tag",get value(){return n(ee)},onChange:ae=>{u(ae)}})}var ne=L(te,2);{let ee=M(()=>n(T).has(Ye.BIN));ks(ne,{get clearTags(){return m},get clearMetaTags(){return H},get hideTagMenu(){return n(ee)},handleMetaTagClick:Q,get metaTags(){return n(T)},get selectedTags(){return n(w)},handleSelectedTagClick:V})}var X=L(ke,2);{let ee=M(()=>n(T).has(Ye.BIN));Ts(X,{get hideTagMenu(){return n(ee)},get metaTags(){return n(se)},get tags(){return n(ve)},handleMetaTagClick:U,handleTagClick:Y,mobile:!0})}Se((ee,ae)=>{tt(Ee,"href",ee),tt(C,"href",ae)},[()=>l(me.Settings),()=>l(me.Sync)]),g(G,be)},$$slots:{default:!0}})},Te=N=>{var G=lf(),he=b(G),be=b(he);{let Ee=M(d);Lo(be,{placeholder:"Search tag",get value(){return n(Ee)},onChange:qe=>{u(qe)}})}var ke=L(he,2),Ce=b(ke),ie=b(Ce);{let Ee=M(()=>n(T).has(Ye.BIN));ks(ie,{get metaTags(){return n(T)},get clearTags(){return m},get clearMetaTags(){return H},get hideTagMenu(){return n(Ee)},get selectedTags(){return n(w)},handleMetaTagClick:Q,handleSelectedTagClick:V})}var oe=L(Ce,2);{let Ee=M(()=>n(T).has(Ye.BIN));Ts(oe,{get metaTags(){return n(se)},get hideTagMenu(){return n(Ee)},get tags(){return n(ve)},handleMetaTagClick:U,handleTagClick:Y})}g(N,G)};q(le,N=>{n(_e)?N(we):N(Te,!1)})}g(t,re),ue()}ot(["click"]);var df=P('<button class="a p-11odwi4"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function uf(t,e){de(e,!0);let a=Ne(e,"ref",15);var r=df();r.__click=function(...i){e.onClick?.apply(this,i)};var o=b(r);ge(o,()=>({"--rotate":"-90deg"})),pe(o.lastChild,{name:"menu"});var s=L(o,2);lt(s,{children:(i,l)=>{var c=De();Se(()=>rt(c,e.title)),g(i,c)}}),Xe(r,i=>a(i),()=>a()),g(t,r),ue()}ot(["click"]);const Ns=t=>{try{new URL(t)}catch{return!1}return!0};var ff=P('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),vf=P('<form class="a p-y9ylet"><!></form>');function gf(t,e){de(e,!0);const{addTag:a}=Ot(),{getSelectedTags:r}=zn(),{getSelectedNotes:o}=ka(),{getFiltredNotes:s}=Ea();let i=R(!1),l=R(!1),c,d=!1,u=R(null),v=R(""),h=e.nextFocusRef;ye(()=>(n(u)&&n(u).focus(),()=>{c&&clearTimeout(c)}));const p=()=>{c=setTimeout(()=>{f(l,!0)},250)},m=()=>{f(i,!0)},E=async()=>{if(r().has(n(v).trim())){m();return}if(n(v).trim()!=="")try{p();const w=new Set(o()),T=w.size?[...w]:s().map(I=>I.id),{cancel:O}=await a(n(v).trim(),T);st("Tag added",{cancel:{nextFocusRef:h,onCancel:async()=>{await O(),setTimeout(()=>{const{prev:I}=mt(h);I?.focus()},16)}}}),d=!0}finally{f(i,!0)}},_=()=>{e.onClosed?.(d)},x=H=>{H.preventDefault(),E()};Ar(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:_,children:(H,w)=>{var T=vf(),O=b(T);{var I=B=>{Na(B,{})},A=B=>{var Y=ff(),U=L(D(Y),2);br(U,{placeholder:"Enter new tag name",get ref(){return n(u)},set ref(K){f(u,K,!0)},get value(){return n(v)},set value(K){f(v,K,!0)}});var V=L(U,2),Q=b(V);Nt(Q,{onClick:m,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(K,ve)=>{var _e=De("Cancel");g(K,_e)},$$slots:{default:!0}});var J=L(Q,2);Nt(J,{onClick:E,fullWidth:!0,withoutMinWidth:!0,children:(K,ve)=>{var _e=De("OK");g(K,_e)},$$slots:{default:!0}}),g(B,Y)};q(O,B=>{n(l)?B(I):B(A,!1)})}vn("submit",T,x),g(H,T)},$$slots:{default:!0}}),ue()}var hf=P('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),pf=P('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),mf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),_f=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),wf=P("<div><!></div>"),yf=P('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),bf=P('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!> <!> <!></div> <!></div>');function al(t,e){de(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=Ot(),{getSelectedTags:s}=zn();let i=R(null),l=R(""),c=R(null);const d=M(a);let u=Ne(e,"shownTagInput",15);const v=()=>n(d)?e.mode==="exit"?qo(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let p=M(()=>{const F=s(),$=new Set(qo(new Set,new Set(e.selectedTags.length>0?e.selectedTags:F),o()()||[]));return v().filter(re=>e.selectedTags.some(le=>re===le)?!1:n(l)===""||re.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((re,le)=>F.has(re)&&F.has(le)?re.localeCompare(le):F.has(re)?-1:F.has(le)?1:$.has(re)&&$.has(le)?re.localeCompare(le):$.has(re)?-1:$.has(le)?1:0)});const m=F=>{if(!e.selectedTags.includes(F)){if(e.mode!=="exit"||n(p).includes(F)){e.onChangeTags([...e.selectedTags,F]),f(l,"");return}n(i)?.focus()}},E=F=>{const $=e.selectedTags.filter(se=>se!==F);e.onRejectedTag&&e.onRejectedTag(F),$.length===0?e.onChangeTags([]):e.onChangeTags($)},_=F=>{F.preventDefault(),n(l)!==""?m(n(l)):u(!1)};Re(()=>{n(i)&&u()&&n(i).focus(),u()||f(l,"")});const x=F=>{F.preventDefault()},H=F=>{F.preventDefault(),F.stopPropagation(),F.stopImmediatePropagation()};var w=bf(),T=b(w),O=b(T);Ln(O,17,()=>e.selectedTags,F=>F+"-tags_selected",(F,$)=>{ca(F,{onPointerDown:x,onTouchStart:H,onClick:()=>{E(n($))},type:"button",style:"selected",children:(se,re)=>{var le=De();Se(()=>rt(le,n($))),g(se,le)},$$slots:{default:!0}})});var I=L(O,2);{var A=F=>{var $=ce(),se=D($);Ln(se,17,()=>n(p).filter(re=>re.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),re=>re+"-tags_suggested",(re,le)=>{ca(re,{onPointerDown:x,onTouchStart:H,onClick:()=>{m(n(le))},children:(we,Te)=>{var N=De();Se(()=>rt(N,n(le))),g(we,N)},$$slots:{default:!0}})}),g(F,$)};q(I,F=>{u()&&F(A)})}var B=L(I,2);{var Y=F=>{ca(F,{onPointerDown:x,onTouchStart:H,onClick:()=>{m(n(l)),f(l,"")},children:($,se)=>{var re=De();Se(()=>rt(re,n(l))),g($,re)},$$slots:{default:!0}})};q(B,F=>{n(l)!==""&&(e.mode!=="exit"||n(p).find($=>$.toLowerCase()===n(l).toLowerCase()))&&F(Y)})}var U=L(B,2);{var V=F=>{ca(F,{mode:"empty",onPointerDown:x,onTouchStart:H,onClick:()=>{u(!0)},children:($,se)=>{var re=hf(),le=b(re);ge(le,()=>({"--size":"12px"})),pe(le.lastChild,{name:"plus"});var we=L(le,2);lt(we,{children:(Te,N)=>{var G=De("add tag");g(Te,G)}}),g($,re)},$$slots:{default:!0}})};q(U,F=>{u()||F(V)})}var Q=L(U,2);{var J=F=>{ca(F,{mode:"empty",onPointerDown:x,onTouchStart:H,get onClick(){return e.onUsePreviousTags},children:($,se)=>{var re=pf(),le=b(re);ge(le,()=>({"--size":"12px"})),pe(le.lastChild,{name:"back"});var we=L(le,2);lt(we,{children:(Te,N)=>{var G=De("use previous tags");g(Te,G)}}),g($,re)},$$slots:{default:!0}})};q(Q,F=>{e.previousTagsEnabled&&e.onUsePreviousTags&&F(J)})}var K=L(Q,2);{var ve=F=>{ca(F,{mode:"empty",onPointerDown:x,onTouchStart:H,get onClick(){return e.onGenTags},get disabled(){return e.generatingTags},children:($,se)=>{var re=wf(),le=b(re);{var we=N=>{var G=mf(),he=D(G);ge(he,()=>({"--size":"12px"})),Na(he.lastChild,{}),g(N,G)},Te=N=>{var G=_f(),he=D(G);ge(he,()=>({"--size":"12px","--rotate":"180deg"})),pe(he.lastChild,{name:"stars"});var be=L(he,2);lt(be,{children:(ke,Ce)=>{var ie=De("gen tags");g(ke,ie)}}),g(N,G)};q(le,N=>{e.generatingTags?N(we):N(Te,!1)})}g($,re)},$$slots:{default:!0}})};q(K,F=>{e.genTagsEnabled&&e.onGenTags&&F(ve)})}var _e=L(T,2);{var Z=F=>{var $=yf(),se=b($),re=b(se);br(re,{placeholder:"tag",get ref(){return n(i)},set ref(we){f(i,we,!0)},get value(){return n(l)},set value(we){f(l,we,!0)}});var le=L(se,2);le.__pointerdown=x,le.__touchstart=H,le.__click=()=>{n(i)?.blur(),n(l)!==""&&m(n(l)),u(!1),f(l,"")},vn("submit",$,_),g(F,$)};q(_e,F=>{u()&&F(Z)})}Xe(w,F=>f(c,F),()=>n(c)),g(t,w),ue()}ot(["pointerdown","touchstart","click"]);var Sf=P('<div class="c p-y9ylet"><!> <!></div>'),Cf=P('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),xf=P('<form class="a p-y9ylet"><!></form>');function Tf(t,e){de(e,!0);const{changeTags:a,getNoteById:r}=Ot(),{getSelectedTags:o}=zn(),{getSelectedNotes:s}=ka(),{getFiltredNotes:i}=Ea();let l=R(!1),c=R(!1),d,u=!1,v=R(!1),h=e.nextFocusRef,m=(()=>{const A=[...o()],B=s();if(B.size===0)return A;const Y=Array.from(B);let U=new Set(r(Y[0])?.data.tags||[]);for(let V=1;V<Y.length;V++){const Q=new Set(r(Y[V])?.data.tags||[]),J=new Set([]);Q.forEach(K=>{U.has(K)&&J.add(K)}),U=J}return Array.from(U)})(),E=R(it(m));ye(()=>()=>{d&&clearTimeout(d)});const _=()=>{d=setTimeout(()=>{f(c,!0)},250)},x=()=>{f(l,!0)},H=async()=>{const A=m,B=new Set(s()),Y=B.size?[...B]:i().map(U=>U.id);try{_();const{cancel:U}=await a([...A],n(E),Y);st("Tags changed",{cancel:{nextFocusRef:h,onCancel:async()=>{await U(),setTimeout(()=>{const{prev:V}=mt(h);V?.focus()},16)}}}),u=!0}finally{f(l,!0)}},w=A=>{A.key==="Escape"&&n(v)&&(f(v,!1),A.preventDefault(),A.stopPropagation())};ye(()=>(document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)));const T=()=>{e.onClosed?.(u)},O=A=>{f(E,A,!0)},I=A=>{A.preventDefault(),H()};Ar(t,{get blocked(){return n(c)},get startClose(){return n(l)},onClosed:T,children:(A,B)=>{var Y=xf(),U=b(Y);{var V=J=>{Na(J,{})},Q=J=>{var K=Cf(),ve=L(D(K),2);al(ve,{get selectedTags(){return n(E)},onChangeTags:O,get shownTagInput(){return n(v)},set shownTagInput(F){f(v,F,!0)}});var _e=L(ve,2);{var Z=F=>{var $=Sf(),se=b($);Nt(se,{onClick:x,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(le,we)=>{var Te=De("Cancel");g(le,Te)},$$slots:{default:!0}});var re=L(se,2);Nt(re,{onClick:H,fullWidth:!0,withoutMinWidth:!0,children:(le,we)=>{var Te=De("OK");g(le,Te)},$$slots:{default:!0}}),g(F,$)};q(_e,F=>{n(v)||F(Z)})}g(J,K)};q(U,J=>{n(c)?J(V):J(Q,!1)})}vn("submit",Y,I),g(A,Y)},$$slots:{default:!0}}),ue()}var kf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),Ef=P('<li class="p-antir2"><!></li>'),Pf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy links',1),Nf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy',1),Af=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share links',1),Mf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),Df=P('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),If=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select mode',1),Lf=P('<li class="p-antir2"><!></li>'),Rf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),Of=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),Ff=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),zf=P('<li class="p-antir2"><!></li>'),jf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),Bf=P('<li class="p-antir2"><!></li>'),Hf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),Uf=P('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <li class="p-antir2"><!></li>',1),qf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),Vf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),Wf=P('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),Kf=P('<!> <li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <!> <!> <!>',1),Gf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Yf=P('<div class="a p-antir2"><!></div> <!> <!> <!>',1);function Xf(t,e){de(e,!0);const{getSelectedTags:a,setSelectedTags:r,clearTags:o}=zn(),{moveNotesToBin:s,moveNotesToArchive:i,moveNotesFromArchive:l,restoreNotesFromBin:c,deleteNotes:d}=Ot(),{getFiltredNotes:u}=Ea(),{getMode:v,changeMode:h,getSelectedNotes:p,setSelectedNotes:m,clearNotes:E}=ka();let _=navigator?.share&&navigator.canShare?.({url:"https://example.com",title:"example",text:"example"}),x=M(a),H=R(!1),w=R(!1),T=R(!1),O=R(!1),I=R(null),A=R(null);const B=()=>{n(H)||f(H,!0)},Y=()=>{f(H,!1),f(w,!1)};Re(()=>{!n(H)&&!n(T)&&!n(O)&&f(I,mt(n(A)).next,!0)}),ye(()=>{const y=S=>{S.key==="Escape"&&n(H)&&n(A)?.focus()};return window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}});let U=()=>{};const V=()=>{f(w,!0),f(T,!0);let y=n(A);U=()=>{f(T,!1),setTimeout(()=>{y?.focus()},16)}};let Q=()=>{};const J=()=>{f(w,!0),f(O,!0);let y=n(A);Q=()=>{f(O,!1),setTimeout(()=>{y?.focus()},16)}},K=async()=>{const y=Array.from(n(x)),S=new Set(p()),C=S.size?[...S]:u().map(z=>z.id),{cancel:k}=await s({noteIds:C});o(),E(),st("Notes moved to bin",{cancel:{nextFocusRef:n(I),onCancel:async()=>{await k(),r(new Set(y)),m(S),setTimeout(()=>{const{prev:z}=mt(n(I));z?.focus()},16)}}}),f(w,!0)},ve=async()=>{const y=Array.from(n(x)),S=new Set(p()),C=S.size?[...S]:u().map(z=>z.id),{cancel:k}=await i({noteIds:C});o(),E(),st("Notes moved to archive",{cancel:{nextFocusRef:n(I),onCancel:async()=>{await k(),r(new Set(y)),m(S),setTimeout(()=>{const{prev:z}=mt(n(I));z?.focus()},16)}}}),f(w,!0)},_e=async()=>{const y=Array.from(n(x)),S=new Set(p()),C=S.size?[...S]:u().map(z=>z.id),{cancel:k}=await l({noteIds:C});o(),E(),st("Notes moved from archive",{cancel:{nextFocusRef:n(I),onCancel:async()=>{await k(),r(new Set(y)),m(S),setTimeout(()=>{const{prev:z}=mt(n(I));z?.focus()},16)}}}),f(w,!0)},Z=async()=>{const y=Array.from(n(x)),S=new Set(p()),C=S.size?[...S]:u().map(z=>z.id),{cancel:k}=await c({noteIds:C});o(),E(),st("Notes restored",{cancel:{nextFocusRef:n(I),onCancel:async()=>{await k(),r(new Set(y)),m(S),setTimeout(()=>{const{prev:z}=mt(n(I));z?.focus()},16)}}}),f(w,!0)},F=()=>{const y=new Set(p()),S=y.size?[...y]:u().map(C=>C.id);f(w,!0),Ba({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{f(w,!0),o(),E(),await d({noteIds:S})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(A)?.focus()},16)}})},$=()=>{const y=u(),S=Array.from(p()),C=[];for(const z of y)z.data&&z.data?.link&&Ns(z.data?.link.url)&&(S.includes(z.id)||S.length===0)&&C.push(z.data?.link.url);const k=()=>{for(const z of C)if(!window.open(z,"_blank")){Ba({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(A)?.focus()},16)}});break}};C.length<=10?k():Ba({title:`Are you sure to open ${C.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{k()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(A)?.focus()},16)}}),f(w,!0)},se=()=>{const y=u(),S=Array.from(p());let C="";for(const k of y)k.data&&k.data?.link&&Ns(k.data?.link.url)&&(S.includes(k.id)||S.length===0)&&(C+=k.data?.link.url+`
`);navigator.clipboard.writeText(C),st("Copied links"),f(w,!0)},re=()=>{const y=u(),S=Array.from(p());let C="";for(const k of y)k.data&&(S.includes(k.id)||S.length===0)&&(k.data?.link?.url&&(C+=k.data?.link.url+`
`),k.data?.text&&(C+=`
`+k.data?.text+`
`),C+=`---------------------

`);navigator.clipboard.writeText(C),st("Copied"),f(w,!0)},le=()=>{const y=u(),S=Array.from(p());let C="";for(const k of y)k.data&&(S.includes(k.id)||S.length===0)&&k.data?.link?.url&&(C+=k.data?.link.url+`
`);navigator.share({text:C}).catch(k=>{}),f(w,!0)},we=()=>{const y=u(),S=Array.from(p());let C="";for(const k of y)k.data&&(S.includes(k.id)||S.length===0)&&(k.data?.link?.url&&(C+=k.data?.link.url+`
`),k.data?.text&&(C+=`
`+k.data?.text+`
`),C+=`---------------------

`);navigator.share({text:C}).catch(k=>{}),f(w,!0)};let Te=M(()=>v()==="multiple"),N=Za||_r;var G=Yf(),he=D(G),be=b(he);uf(be,{title:"notes menu",onClick:B,get ref(){return n(A)},set ref(y){f(A,y,!0)}});var ke=L(he,2);{var Ce=y=>{var S=Gf(),C=D(S);ge(C,()=>({"--right":"0","--top":"44px"})),Mr(C.lastChild,{get startClose(){return n(w)},onClosed:Y,get isMobile(){return N},children:(k,z)=>{var W=Kf(),te=D(W);{var fe=Pe=>{var Oe=Ef(),Fe=b(Oe);ze(Fe,{onClick:$,get dialogMode(){return N},children:(Be,ut)=>{var ft=kf(),Je=D(ft);ge(Je,()=>({"--size":"20px"})),pe(Je.lastChild,{name:"open"}),g(Be,ft)},$$slots:{default:!0}}),g(Pe,Oe)};q(te,Pe=>{Za||_r||Pe(fe)})}var ne=L(te,2),X=b(ne);ze(X,{onClick:se,get dialogMode(){return N},children:(Pe,Oe)=>{var Fe=Pf(),Be=D(Fe);ge(Be,()=>({"--size":"20px"})),pe(Be.lastChild,{name:"copy"}),g(Pe,Fe)},$$slots:{default:!0}});var ee=L(ne,2),ae=b(ee);ze(ae,{onClick:re,get dialogMode(){return N},children:(Pe,Oe)=>{var Fe=Nf(),Be=D(Fe);ge(Be,()=>({"--size":"20px"})),pe(Be.lastChild,{name:"copyN"}),g(Pe,Fe)},$$slots:{default:!0}});var xe=L(ee,2);{var $e=Pe=>{var Oe=Df(),Fe=D(Oe),Be=b(Fe);ze(Be,{onClick:le,get dialogMode(){return N},children:(Je,Dt)=>{var vt=Af(),_t=D(vt);ge(_t,()=>({"--size":"20px"})),pe(_t.lastChild,{name:"shareL"}),g(Je,vt)},$$slots:{default:!0}});var ut=L(Fe,2),ft=b(ut);ze(ft,{onClick:we,get dialogMode(){return N},children:(Je,Dt)=>{var vt=Mf(),_t=D(vt);ge(_t,()=>({"--size":"20px"})),pe(_t.lastChild,{name:"share"}),g(Je,vt)},$$slots:{default:!0}}),g(Pe,Oe)};q(xe,Pe=>{_&&Pe($e)})}var ht=L(xe,2);{var Mt=Pe=>{var Oe=Lf(),Fe=b(Oe);ze(Fe,{onClick:()=>{f(w,!0),h("multiple")},get dialogMode(){return N},children:(Be,ut)=>{var ft=If(),Je=D(ft);ge(Je,()=>({"--size":"20px"})),pe(Je.lastChild,{name:"check"}),g(Be,ft)},$$slots:{default:!0}}),g(Pe,Oe)};q(ht,Pe=>{n(Te)||Pe(Mt)})}var at=L(ht,2);{var We=Pe=>{var Oe=Uf(),Fe=D(Oe),Be=b(Fe);ze(Be,{onClick:V,get dialogMode(){return N},children:(Ft,Zt)=>{var It=Rf(),zt=D(It);ge(zt,()=>({"--size":"20px","--rotate":"45deg"})),pe(zt.lastChild,{name:"close"}),g(Ft,It)},$$slots:{default:!0}});var ut=L(Fe,2),ft=b(ut);ze(ft,{onClick:J,get dialogMode(){return N},children:(Ft,Zt)=>{var It=Of(),zt=D(It);ge(zt,()=>({"--size":"20px"})),pe(zt.lastChild,{name:"pen"}),g(Ft,It)},$$slots:{default:!0}});var Je=L(ut,2);{var Dt=Ft=>{var Zt=zf(),It=b(Zt);ze(It,{onClick:ve,get dialogMode(){return N},children:(zt,fo)=>{var sa=Ff(),Qt=D(sa);ge(Qt,()=>({"--size":"20px"})),pe(Qt.lastChild,{name:"archive"}),g(zt,sa)},$$slots:{default:!0}}),g(Ft,Zt)},vt=Ft=>{var Zt=Bf(),It=b(Zt);ze(It,{onClick:_e,get dialogMode(){return N},children:(zt,fo)=>{var sa=jf(),Qt=D(sa);ge(Qt,()=>({"--size":"20px"})),pe(Qt.lastChild,{name:"archive-cancel"}),g(zt,sa)},$$slots:{default:!0}}),g(Ft,Zt)};q(Je,Ft=>{e.mode==="notes"?Ft(Dt):Ft(vt,!1)})}var _t=L(Je,2),Dr=b(_t);ze(Dr,{onClick:K,get dialogMode(){return N},dangerous:!0,children:(Ft,Zt)=>{var It=Hf(),zt=D(It);ge(zt,()=>({"--size":"20px"})),pe(zt.lastChild,{name:"bin"}),g(Ft,It)},$$slots:{default:!0}}),g(Pe,Oe)};q(at,Pe=>{(e.mode==="notes"||e.mode==="archive")&&Pe(We)})}var Ve=L(at,2);{var Ke=Pe=>{var Oe=Wf(),Fe=D(Oe),Be=b(Fe);ze(Be,{onClick:Z,get dialogMode(){return N},children:(Je,Dt)=>{var vt=qf(),_t=D(vt);ge(_t,()=>({"--size":"20px"})),pe(_t.lastChild,{name:"bin-cancel"}),g(Je,vt)},$$slots:{default:!0}});var ut=L(Fe,2),ft=b(ut);ze(ft,{onClick:F,get dialogMode(){return N},dangerous:!0,children:(Je,Dt)=>{var vt=Vf(),_t=D(vt);ge(_t,()=>({"--size":"20px"})),pe(_t.lastChild,{name:"bin"}),g(Je,vt)},$$slots:{default:!0}}),g(Pe,Oe)};q(Ve,Pe=>{e.mode==="bin"&&Pe(Ke)})}g(k,W)},$$slots:{default:!0}}),g(y,S)};q(ke,y=>{n(H)&&y(Ce)})}var ie=L(ke,2);{var oe=y=>{gf(y,{get nextFocusRef(){return n(I)},onClosed:S=>{U(S)}})};q(ie,y=>{n(T)&&y(oe)})}var Ee=L(ie,2);{var qe=y=>{Tf(y,{get nextFocusRef(){return n(I)},onClosed:S=>{Q(S)}})};q(Ee,y=>{n(O)&&y(qe)})}g(t,G),ue()}var Jf=P('<label class="a p-uuy4jt"><input class="b p-uuy4jt" type="checkbox"/> <span class="c p-uuy4jt"><span class="d p-uuy4jt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></span> <!></label>');function rl(t,e){de(e,!0);const a=()=>{e.onChange(!e.checked)};var r=Jf(),o=b(r);o.__change=a;var s=L(o,2),i=b(s),l=b(i);ge(l,()=>({"--size":"16px"})),pe(l.lastChild,{name:"check"});var c=L(s,2);lt(c,{children:(d,u)=>{var v=De("Toggle switch");g(d,v)}}),Se(()=>Vc(o,e.checked)),g(t,r),ue()}ot(["change"]);var Zf=P('<div class="g e p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),Qf=P('<div class="g p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),$f=P('<a class="i j p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),ev=P('<div class="h p-1336jx2"><!> <!></div>'),tv=P('<!> <div class="p p-1336jx2"><!></div>',1),nv=P('<div class="r p-1336jx2"><div class="s p-1336jx2"><!> <span> </span></div> <button class="t p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),av=P('<div class="a p-1336jx2"><div class="b p-1336jx2"><div class="c p-1336jx2"><a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-1336jx2"><!></div> <div class="f p-1336jx2"><!></div></div> <div class="k p-1336jx2"><div class="l p-1336jx2"><!></div> <div class="m p-1336jx2"><div class="n p-1336jx2"><div class="o p-1336jx2"><!></div> <!></div> <div class="q p-1336jx2"><!></div></div></div></div>');function rv(t,e){de(e,!0);const{getFeedSearch:a,setFeedSearch:r}=$o(),{getScrollContainer:o}=uo();let s=M(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:c,checkNotes:d}=Ot(),{replaceSearchParams:u}=Wt(),{createDialogPageHref:v,createHandleClickDialogPage:h,getDialogPages:p}=Jt(),{checkExistedDialog:m}=cn(),{getMode:E,clearNotes:_,setSelectedNotes:x,getSelectedNotes:H,changeMode:w}=ka(),{checkMobileSize:T}=Pa(),{getFiltredNotes:O}=Ea(),{getSelectedMetaTags:I}=co();let A=M(I),B=R(null);const Y=M(l);let V=M(()=>{const ne=O()||[],X=H();return ne.every(ee=>X.has(ee.id))});const Q=()=>{n(s)&&n(s).scrollTo({top:0})},J=()=>{Ba({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),u("")},onCancel:async()=>{}})},K=()=>{p().length===0&&!m()&&n(B)?.focus()};ye(()=>yr({key:"k",meta:!0,action:K})),ye(()=>yr({key:"k",ctrl:!0,action:K})),Re(()=>{const ne=O()||[];Vt(()=>{const X=H();x(new Set(ne.filter(ee=>X.has(ee.id)).map(ee=>ee.id)))})});let ve=M(()=>n(A).has(Ye.ARCHIVED)?"archive":n(A).has(Ye.BIN)?"bin":"notes");var _e=av(),Z=b(_e),F=b(Z),$=b(F),se=M(()=>h(me.Settings));$.__click=function(...ne){n(se)?.apply(this,ne)};var re=b($);ge(re,()=>({"--rotate":"30deg","--size":"20px"})),pe(re.lastChild,{name:"settings"});var le=L($,2),we=M(()=>h(me.Sync));le.__click=function(...ne){n(we)?.apply(this,ne)};var Te=b(le);ge(Te,()=>({"--size":"20px"})),pe(Te.lastChild,{name:"sync"});var N=L(F,2),G=b(N);el(G,{});var he=L(N,2),be=b(he);{var ke=ne=>{var X=ce(),ee=D(X);{var ae=xe=>{var $e=ce(),ht=D($e);{var Mt=We=>{var Ve=Zf(),Ke=b(Ve);Ke.__click=J;var Pe=b(Ke);ge(Pe,()=>({"--scale":"1.2","--size":"20px"})),pe(Pe.lastChild,{name:"clear"});var Oe=L(Pe);lt(Oe,{children:(Fe,Be)=>{var ut=De("Empty bin");g(Fe,ut)}}),g(We,Ve)},at=We=>{var Ve=Qf(),Ke=b(Ve);Ke.__click=J;var Pe=b(Ke);ge(Pe,()=>({"--scale":"0.9","--size":"20px"})),pe(Pe.lastChild,{name:"clear"}),g(We,Ve)};q(ht,We=>{T()?We(Mt):We(at,!1)})}g(xe,$e)};q(ee,xe=>{n(Y)&&xe(ae)})}g(ne,X)},Ce=ne=>{var X=ce(),ee=D(X);{var ae=xe=>{var $e=ev(),ht=b($e);{var Mt=We=>{var Ve=$f();Ve.__click=function(...Oe){e.onOpenWindow?.apply(this,Oe)};var Ke=b(Ve);ge(Ke,()=>({"--scale":"0.7","--size":"32px"})),pe(Ke.lastChild,{name:"open-window"});var Pe=L(Ke,2);lt(Pe,{children:(Oe,Fe)=>{var Be=De("open window");g(Oe,Be)}}),Se(()=>tt(Ve,"href",e.openWindowHref)),g(We,Ve)};q(ht,We=>{e.onOpenWindow&&We(Mt)})}var at=L(ht,2);Pu(at,{}),g(xe,$e)};q(ee,xe=>{n(ve)==="notes"&&xe(ae)},!0)}g(ne,X)};q(be,ne=>{n(ve)==="bin"?ne(ke):ne(Ce,!1)})}var ie=L(Z,2),oe=b(ie),Ee=b(oe);cf(Ee,{});var qe=L(oe,2),y=b(qe),S=b(y),C=b(S);{let ne=M(a);Lo(C,{onFocus:Q,placeholder:"Search",get value(){return n(ne)},onChange:X=>{r(X)},get ref(){return n(B)},set ref(X){f(B,X,!0)}})}var k=L(S,2);{var z=ne=>{var X=tv(),ee=D(X);yu(ee,{});var ae=L(ee,2),xe=b(ae);Xf(xe,{get mode(){return n(ve)}}),g(ne,X)};q(k,ne=>{(n(ve)==="notes"&&d()||n(ve)==="bin"&&l()||n(ve)==="archive"&&c())&&ne(z)})}var W=L(y,2),te=b(W);{var fe=ne=>{var X=ce(),ee=D(X);{var ae=xe=>{var $e=nv(),ht=b($e),Mt=b(ht);rl(Mt,{get checked(){return n(V)},onChange:Pe=>{if(Pe){const Oe=O()||[];x(new Set(Oe.map(Fe=>Fe.id)))}else _()}});var at=L(Mt,2),We=b(at),Ve=L(ht,2);Ve.__click=Pe=>{Pe.preventDefault(),w("single")};var Ke=b(Ve);ge(Ke,()=>({"--size":"16px"})),pe(Ke.lastChild,{name:"close"}),Se(Pe=>rt(We,`Selected ${Pe??""}`),[()=>H().size]),g(xe,$e)};q(ee,xe=>{E()==="multiple"&&xe(ae)})}g(ne,X)};q(te,ne=>{(n(ve)==="notes"&&d()||n(ve)==="bin"&&l()||n(ve)==="archive"&&c())&&ne(fe)})}Se((ne,X)=>{tt($,"href",ne),tt(le,"href",X)},[()=>v(me.Settings),()=>v(me.Sync)]),g(t,_e),ue()}ot(["click"]);var ov=P('<div class="p-gkgqyo"><!></div>');function pt(t,e){de(e,!0);const{setDialogPageHeight:a}=as();let r=R(null);ye(()=>{n(r);const i=new ResizeObserver(l=>{for(let c of l){const d=c.contentRect.height;a(d)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=ov(),s=b(o);Ae(s,()=>e.children),Xe(o,i=>f(r,i),()=>n(r)),g(t,o),ue()}var sv=P('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function iv(t,e){de(e,!1);const{replaceSearchParams:a,getHref:r}=Wt(),o=l=>{l.preventDefault(),a("")};Qo();var s=sv(),i=L(b(s),2);{let l=kr(()=>r(""));Nt(i,{element:"a",get href(){return n(l)},onClick:o,children:(c,d)=>{var u=De("close");g(c,u)},$$slots:{default:!0}})}g(t,s),ue()}var lv=P('<h1 class="p-1n0ziuh"><!></h1>');function cv(t,e){var a=lv(),r=b(a);Ae(r,()=>e.children),g(t,a)}var dv=P('<!> <div class="b p-193tby9"><!> <!></div>',1),uv=P('<div class="a p-193tby9"><!></div>');function fv(t,e){de(e,!0);const{blockDialog:a,setLeftEnd:r}=cn(),{pushDialogPage:o}=Jt(),{initLocalAccount:s}=ts(),{replaceSearchParams:i}=Wt(),l=jn(),c=()=>{o(me.Auth)},d=async()=>{l.duration=0,l.swipingRatio=-25,requestAnimationFrame(()=>{l.duration=ta().duration,l.swipingRatio=ta().swipingRatio,s(),a(!1),r(!0),i("")})};var u=uv(),v=b(u);{var h=p=>{var m=dv(),E=D(m);cv(E,{children:(w,T)=>{var O=De("Welcome");g(w,O)}});var _=L(E,2),x=b(_);Nt(x,{onClick:c,fullWidth:!0,children:(w,T)=>{var O=De("Cloud account");g(w,O)},$$slots:{default:!0}});var H=L(x,2);Nt(H,{onClick:d,fullWidth:!0,type:"secondary",children:(w,T)=>{var O=De("Local account");g(w,O)},$$slots:{default:!0}}),g(p,m)};q(v,p=>{p(h)})}g(t,u),ue()}var vv=P('<div class="a p-1hg9kpf"></div>'),gv=P('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function ol(t,e){de(e,!0);const a=d=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(d).host}.ico`}catch{return""}};let r=R(!1),o=M(()=>a(e.url));var s=ce(),i=D(s);{var l=d=>{var u=vv();g(d,u)},c=d=>{var u=gv();Se(v=>tt(u,"src",v),[()=>a(e.url)]),vn("error",u,()=>{f(r,!0)}),g(d,u)};q(i,d=>{n(r)||!n(o)?d(l):d(c,!1)})}g(t,s),ue()}var hv=P('<a target="_blank" rel="noopener noreferrer" class="a p-7mmq8e"><!> <!></a>'),pv=P('<button class="a p-7mmq8e"><!> <!></button>');function za(t,e){de(e,!0);let a=Ne(e,"tabindex",3,0),r=Ne(e,"onclick",3,()=>{}),o=Ne(e,"ref",15);var s=ce(),i=D(s);{var l=d=>{var u=hv();u.__click=function(...p){r()?.apply(this,p)};var v=b(u);Ae(v,()=>e.children);var h=L(v,2);lt(h,{children:(p,m)=>{var E=De();Se(()=>rt(E,e.title)),g(p,E)}}),Xe(u,p=>o(p),()=>o()),Se(()=>{tt(u,"href",e.href),tt(u,"tabindex",a())}),g(d,u)},c=d=>{var u=ce(),v=D(u);{var h=p=>{var m=pv();m.__click=function(...x){r()?.apply(this,x)};var E=b(m);Ae(E,()=>e.children);var _=L(E,2);lt(_,{children:(x,H)=>{var w=De();Se(()=>rt(w,e.title)),g(x,w)}}),Xe(m,x=>o(x),()=>o()),Se(()=>tt(m,"tabindex",a())),g(p,m)};q(v,p=>{e.elem==="button"&&p(h)},!0)}g(d,u)};q(i,d=>{e.elem==="a"?d(l):d(c,!1)})}g(t,s),ue()}ot(["click"]);var mv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Edit',1),_v=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),wv=P('<li class="p-1jbq6g9"><!></li> <li class="p-1jbq6g9"><!></li>',1),yv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function bv(t,e){de(e,!0);let a=Ne(e,"shownMenu",15),r=R(!1),o=R(!1),s=R(!1);const i=async()=>{e.onEdit()},l=()=>{n(o)?(f(o,!1),i()):n(s)&&(f(s,!1),e.onDelete()),a(!1),f(r,!1)};let c=Za||_r;var d=ce(),u=D(d);{var v=h=>{var p=yv(),m=D(p);ge(m,()=>({"--top":"90%","--right":"0px"})),Mr(m.lastChild,{get startClose(){return n(r)},onClosed:l,get isMobile(){return c},children:(E,_)=>{var x=wv(),H=D(x),w=b(H);ze(w,{onClick:()=>{f(o,!0),f(r,!0)},get dialogMode(){return c},children:(I,A)=>{var B=mv(),Y=D(B);ge(Y,()=>({"--size":"20px"})),pe(Y.lastChild,{name:"pen"}),g(I,B)},$$slots:{default:!0}});var T=L(H,2),O=b(T);ze(O,{onClick:()=>{f(s,!0),f(r,!0)},get dialogMode(){return c},children:(I,A)=>{var B=_v(),Y=D(B);ge(Y,()=>({"--size":"20px"})),pe(Y.lastChild,{name:"bin"}),g(I,B)},$$slots:{default:!0}}),g(E,x)},$$slots:{default:!0}}),g(h,p)};q(u,h=>{a()&&h(v)})}g(t,d),ue()}var Sv=P('<div class="b p-ptbuqy"><!> <!> <div class="c p-ptbuqy"><button class="p-ptbuqy">Cancel</button> <button class="p-ptbuqy">Done</button></div></div>'),Cv=P('<div class="e p-ptbuqy"><!></div>'),xv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Tv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),kv=P('<div class="d p-ptbuqy"><div><!> <a class="f p-ptbuqy" target="_blank" rel="noopener noreferrer"> </a> <div><!> <!></div> <!></div></div>'),Ev=P('<div class="g p-ptbuqy"><button class="h p-ptbuqy">Add link</button></div>'),Pv=P('<div class="a p-ptbuqy"><!></div>');function Nv(t,e){de(e,!0);let a=Ne(e,"shownUrlInput",15);const{getFaviconEnabled:r}=Ja();let o=M(r),s=R(null),i=R(null),l=R(it(e.url)),c=R(it(e.title)),d=R(null),u=R(null),v=R(!1);const h=T=>{f(l,T.target.value||"",!0)},p=T=>{f(c,T.target.value||"",!0)};Re(()=>{a()&&n(s)?.focus()});const m=()=>{f(v,!0)},E=()=>{e.url&&(navigator.clipboard.writeText(e.url),st("copied"))};var _=Pv(),x=b(_);{var H=T=>{var O=Sv(),I=b(O);br(I,{get value(){return n(l)},onInput:h,placeholder:"url",get ref(){return n(s)},set ref(V){f(s,V,!0)}});var A=L(I,2);br(A,{get value(){return n(c)},onInput:p,placeholder:"title"});var B=L(A,2),Y=b(B);Y.__click=()=>{f(l,e.url,!0),f(c,e.title,!0),a(!1)};var U=L(Y,2);U.__click=()=>{let V=n(l).trim();V!==""&&/^[[a-zA-Z]+?:\/\//.test(V)===!1&&(V="https://"+V,f(l,V,!0)),e.onChangeUrl(V,n(c)),a(!1)},g(T,O)},w=T=>{var O=ce(),I=D(O);{var A=Y=>{var U=kv(),V=b(U);Qe(V,1,nt({i:!0}),"p-ptbuqy");var Q=b(V);{var J=se=>{var re=Cv(),le=b(re);ol(le,{get url(){return e.url}}),g(se,re)};q(Q,se=>{n(o)&&se(J)})}var K=L(Q,2),ve=b(K),_e=L(K,2);Qe(_e,1,nt({j:!0}),"p-ptbuqy");var Z=b(_e);za(Z,{title:"copy link",elem:"button",onclick:E,children:(se,re)=>{var le=xv(),we=D(le);ge(we,()=>({"--size":"20px"})),pe(we.lastChild,{name:"copy"}),g(se,le)},$$slots:{default:!0}});var F=L(Z,2);za(F,{title:"show menu",elem:"button",onclick:m,get ref(){return n(u)},set ref(se){f(u,se,!0)},children:(se,re)=>{var le=Tv(),we=D(le);ge(we,()=>({"--size":"18px","--rotate":"90deg"})),pe(we.lastChild,{name:"menu"}),g(se,le)},$$slots:{default:!0}});var $=L(_e,2);bv($,{onDelete:()=>{f(c,""),f(l,""),e.onDeleteUrl()},onEdit:()=>{a(!0)},get shownMenu(){return n(v)},set shownMenu(se){f(v,se,!0)}}),Xe(V,se=>f(d,se),()=>n(d)),Se(()=>{tt(K,"href",e.url),rt(ve,e.title||"unknown")}),g(Y,U)},B=Y=>{var U=Ev(),V=b(U);V.__click=()=>{a(!0)},g(Y,U)};q(I,Y=>{e.url?Y(A):Y(B,!1)})}g(T,O)};q(x,T=>{a()?T(H):T(w,!1)})}Xe(_,T=>f(i,T),()=>n(i)),g(t,_),ue()}ot(["click"]);var Av=P('<div class="e p-vlmfrv">Note</div>'),Mv=P("<span> </span>"),Dv=P('<div class="i p-vlmfrv"><!></div>'),Iv=P('<!> <div class="a p-vlmfrv"><div class="b"><div class="c"><div class="d p-vlmfrv"><!> <div class="f p-vlmfrv" role="textbox" aria-label="note" tabindex="0" contenteditable="true" placeholder="Note"> </div></div></div></div> <div class="g h p-vlmfrv"><!> <div class="j p-vlmfrv"><!></div></div></div>',1);function Lv(t,e){de(e,!0);const{checkMobileSize:a}=Pa(),{getGenerateTagsEnabled:r,getPreviousTags:o}=Ja(),{pushDialogPage:s}=Jt();let i=Ne(e,"link",15,void 0),l=Ne(e,"text",15,""),c=Ne(e,"tags",31,()=>it([])),d=R(null),u=R(!1),v=R(!1),h=R(it(new Set)),p=R(!1);const m=N=>{let G="",he=!0;function be(ke){for(let Ce=0;Ce<ke.length;Ce++){const ie=ke[Ce];if(ie.nodeName==="BR"){G+=`
`,he=!0;continue}ie.nodeName==="DIV"&&he===!1&&(G+=`
`),he=!1,ie.nodeType===3&&ie.textContent&&(G+=ie.textContent),be(ie.childNodes)}}be(N.currentTarget.childNodes),G===`
`&&(G=G.slice(0,-1)),l(G)},E=N=>{N.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(n(u)&&(f(u,!1),N.preventDefault(),N.stopPropagation()),n(v)&&(f(v,!1),N.preventDefault(),N.stopPropagation()))};ye(()=>(a(),document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)));const _=(N,G)=>{i({url:N,title:G})},x=()=>{i(void 0)},H=N=>{c(N)},w=o(),T=()=>{c([...new Set([...c(),...w])])},O=l();ye(()=>{if(n(d)&&e.mode==="add"){n(d).focus();const N=document.createRange();N.selectNodeContents(n(d)),N.collapse(!1);const G=window.getSelection();G?.removeAllRanges(),G?.addRange(N)}});let I=R("unknown");const A=async()=>{if(typeof LanguageModel>"u"){f(I,"unavailable");return}f(I,await LanguageModel.availability({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}]}),!0)};ye(()=>{A()});let B=M(r);const Y=async()=>{if(n(I)==="downloadable"||n(I)==="downloading"){s(me.Extension);return}const N={type:"object",properties:{tags:{type:"array",items:{type:"string"}}},required:["tags"]};f(p,!0);const he=await(await LanguageModel.create({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}],temperature:.2,topK:2,initialPrompts:[{role:"system",content:`
						You are a tagging assistant.
						Your task is to suggest relevant tags for bookmarks.

						Rules:
						- Do not use rejected tags.
						- Do not invent overly generic tags.
						- Prefer short, lowercase, single-word tags.
						- Use only single words for tags, no phrases, you can split into multiple tags.
						- Avoid special characters in tags.
						- All tags must be in English.
						- Return 3 to 5 tags.
						- Output ONLY a JSON array of strings.
					`}]})).prompt(`
			Page information:
			Title: ${i()?.title||"N/A"}.
			URL: ${i()?.url||"N/A"}.
			Note content: ${l()||"N/A"}.
			Rejected tags: ${n(h).size>0?Array.from(n(h)).join(", "):"N/A"}.
		`.slice(0,2e3),{responseConstraint:N});f(p,!1);const be=Array.from(new Set([...c(),...JSON.parse(he).tags]));c(be)};var U=Iv(),V=D(U);{let N=M(()=>i()?.url||""),G=M(()=>i()?.title||"");Nv(V,{get url(){return n(N)},get title(){return n(G)},onChangeUrl:_,onDeleteUrl:x,get shownUrlInput(){return n(v)},set shownUrlInput(he){f(v,he,!0)}})}var Q=L(V,2),J=b(Q),K=b(J),ve=b(K),_e=b(ve);{var Z=N=>{var G=Av();g(N,G)};q(_e,N=>{l()||N(Z)})}var F=L(_e,2);F.__input=m;var $=b(F);Xe(F,N=>f(d,N),()=>n(d));var se=L(J,2),re=b(se);{var le=N=>{var G=Dv(),he=b(G);{var be=ke=>{var Ce=Mv(),ie=b(Ce);Se(oe=>rt(ie,`updated: ${oe??""}`),[()=>new Date(e.updatedAt).toLocaleString()]),g(ke,Ce)};q(he,ke=>{e.updatedAt&&ke(be)})}g(N,G)};q(re,N=>{e.mode==="edit"&&N(le)})}var we=L(re,2),Te=b(we);{let N=M(()=>n(B)&&n(I)!=="unknown"&&n(I)!=="unavailable"),G=M(()=>e.mode==="add"&&w.length>0);al(Te,{get selectedTags(){return c()},onRejectedTag:he=>{f(h,new Set([...n(h),he]),!0)},onChangeTags:H,get genTagsEnabled(){return n(N)},onGenTags:Y,get generatingTags(){return n(p)},onUsePreviousTags:T,get previousTagsEnabled(){return n(G)},get shownTagInput(){return n(u)},set shownTagInput(he){f(u,he,!0)}})}Se(()=>rt($,O)),g(t,U),ue()}ot(["input"]);function Rv(t,e){de(e,!0);const{isInitedNotes:a,createNote:r,updateNote:o,deleteNote:s,getNoteById:i}=Ot(),{getViewMode:l,setPreviousTags:c}=Ja(),{setSearchParam:d,deleteSearchParam:u}=Wt();let v=R("loading"),h=R("idle"),p=R(""),m=R(void 0),E=R(""),_=R(it([]));const x=()=>{{const A=JSON.parse(localStorage.getItem("new-note-draft")||"{}");localStorage.removeItem("new-note-draft");const B=A.link?.url||"",Y=A.link?.title||"";f(E,A.text||"",!0),f(_,A.tags||[],!0),f(m,{url:B||"",title:Y||""},!0),f(v,"finish")}},H=M(()=>a()&&n(v)==="finish"),w=async()=>{if(n(m)?.title||n(m)?.url||n(E)||n(_).length>0){if(n(p)){const A=i(n(p));if(!A?.data)return;if((A.data.link?.url!==n(m)?.url||A.data.link?.title!==n(m)?.title||A.data.text!==n(E)||JSON.stringify(A.data.tags)!==JSON.stringify(n(_)))&&n(h)==="idle"){f(h,"loading");try{await o(n(p),{link:Ra(n(m)),text:n(E),tags:n(_).slice()})}finally{f(h,"idle")}}}else if(n(h)==="idle"){f(h,"loading");try{f(p,await r({link:Ra(n(m)),text:n(E),tags:n(_).slice()}),!0),d("noteId",n(p))}catch{}finally{f(h,"idle")}}}else if(n(p)&&n(h)==="idle"){f(h,"loading");try{await s(n(p)),f(p,""),u("noteId")}finally{f(h,"idle")}}};Re(()=>{n(H)&&n(h)!=="loading"&&w()}),ye(()=>{x()}),ye(()=>()=>{n(_).length>0&&c([...n(_)])}),ye(()=>()=>{n(p)&&u("noteId")});var T=ce(),O=D(T);{var I=A=>{Lv(A,{mode:"add",get link(){return n(m)},set link(B){f(m,B,!0)},get text(){return n(E)},set text(B){f(E,B,!0)},get tags(){return n(_)},set tags(B){f(_,B,!0)}})};q(O,A=>{n(H)&&A(I)})}g(t,T),ue()}const Ov="modulepreload",Fv=function(t){return"/"+t},As={},yt=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(a.map(d=>{if(d=Fv(d),d in As)return;As[d]=!0;const u=d.endsWith(".css"),v=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${v}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Ov,u||(h.as="script"),h.crossOrigin="",h.href=d,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var zv=P('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function jv(t){var e=zv(),a=L(b(e),2);Nt(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=De("Reload");g(r,s)},$$slots:{default:!0}}),g(t,e)}var Bv=P('<div class="p-uzefkz"><!></div>');function Hv(t,e){de(e,!0);let a=R(!1);const{getDialogPageHeight:r}=as(),o=M(r);ye(()=>{const c=setTimeout(()=>{f(a,!0)},250);return()=>{clearTimeout(c)}});var s=Bv(),i=b(s);{var l=c=>{Na(c,{})};q(i,c=>{n(a)&&c(l)})}Se(()=>Xa(s,`min-height: ${n(o)??""}px;`)),g(t,s),ue()}function kt(t,e){de(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>yt(()=>import("./aaAgPVzZz.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>yt(()=>import("./aCpvr3YBk.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>yt(()=>import("./aDupHBlIz.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>yt(()=>import("./aDtgH2BL2.js"),__vite__mapDeps([8,9])),"./Pages/ChangeTags.svelte":()=>yt(()=>import("./aBXyPMA5g.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>yt(()=>import("./aBbI7d9Ih.js"),__vite__mapDeps([10,4,3,11,12])),"./Pages/Exit.svelte":()=>yt(()=>import("./ax1uyCwib.js"),__vite__mapDeps([13,14])),"./Pages/ExportData.svelte":()=>yt(()=>import("./aCcO59oaW.js"),__vite__mapDeps([15,16,17,18,19,20])),"./Pages/Extension.svelte":()=>yt(()=>import("./aDg--xMM_.js"),__vite__mapDeps([21,18,19,22])),"./Pages/ImportData.svelte":()=>yt(()=>import("./anxw3LcZi.js"),__vite__mapDeps([23,24])),"./Pages/Install.svelte":()=>yt(()=>import("./ah-vmgF9S.js"),__vite__mapDeps([25,26])),"./Pages/InstallSuccess.svelte":()=>yt(()=>import("./aDbiyKNUi.js"),__vite__mapDeps([27,28])),"./Pages/Note.svelte":()=>yt(()=>import("./ablhppRyV.js"),__vite__mapDeps([29,30])),"./Pages/Settings.svelte":()=>yt(()=>import("./aI0a7VS2B.js"),__vite__mapDeps([31,18,19,16,17,32])),"./Pages/Signin.svelte":()=>yt(()=>import("./agkPWrE3g.js"),__vite__mapDeps([33,4,3,11,34])),"./Pages/Signup.svelte":()=>yt(()=>import("./aC6OUrAV4.js"),__vite__mapDeps([35,11,4,3,34])),"./Pages/Subscription.svelte":()=>yt(()=>import("./a3UHpjjb5.js"),__vite__mapDeps([36,37])),"./Pages/Sync.svelte":()=>yt(()=>import("./aC5abSOqQ.js"),__vite__mapDeps([38,39]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[c]){const d=r[c]();return a[l]={promise:d},a[l].module=await d,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=ce(),i=D(s);Lc(i,()=>o(e.page),l=>{Hv(l,{})},(l,c)=>{const d=M(()=>n(c).default);var u=ce(),v=D(u);zc(v,()=>n(d),(h,p)=>{p(h,{get params(){return e.params},get hidden(){return e.hidden}})}),g(l,u)},l=>{jv(l)}),g(t,s),ue()}var Uv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),qv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),Vv=P('<li class="p-1ljon4s"><!></li>'),Wv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy',1),Kv=P('<li class="p-1ljon4s"><!></li>'),Gv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),Yv=P('<li class="p-1ljon4s"><!></li>'),Xv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share link',1),Jv=P('<li class="p-1ljon4s"><!></li>'),Zv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),Qv=P('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),$v=P('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),eg=P('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),tg=P(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),ng=P('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),ag=P('<li class="p-1ljon4s"><!></li> <!> <!> <!> <!> <!>',1),rg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function og(t,e){de(e,!0);const{checkMobileSize:a}=Pa(),{moveNoteToBin:r,moveNoteFromArchive:o,moveNoteToArchive:s,deleteNote:i,pinNote:l,restoreNoteFromBin:c}=Ot();let d=Ne(e,"mode",3,"notes"),u=Ne(e,"shownMenu",15),v=R(!1),h=R(!1),p=R(!1),m=R(!1),E=R(!1),_=navigator?.share&&navigator.canShare?.({url:"https://example.com",title:"example",text:"example"});const x=async()=>{r(e.noteId),st("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{c(e.noteId)}}})},H=async()=>{s(e.noteId),st("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{o(e.noteId)}}})},w=async()=>{o(e.noteId),st("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{s(e.noteId)}}})},T=()=>{c(e.noteId),st("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{r(e.noteId)}}})},O=()=>{e.noteData.pinnedAt?(l(e.noteId,!1),st("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{l(e.noteId,!0)}}})):(l(e.noteId,!0),st("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{l(e.noteId,!1)}}})),f(v,!0)},I=()=>{n(h)?(f(h,!1),x()):n(E)?(f(E,!1),T()):n(p)?(f(p,!1),H()):n(m)&&(f(m,!1),w()),u(!1),f(v,!1)},A=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),st("Copied link"),f(v,!0))},B=()=>{let Z="";e.noteData.link?.url&&(Z+=e.noteData.link.url+`
`),e.noteData.text&&(Z+=`
`+e.noteData.text+`
`),navigator.clipboard.writeText(Z),st("Copied"),f(v,!0)},Y=()=>{f(v,!0),Ba({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await i(e.noteId)},onCancel:async()=>{}})},U=()=>{if(navigator.share){const Z={};let F="";e.noteData.link?.url&&(F+=e.noteData.link.url+`
`),e.noteData.text&&(F+=`
`+e.noteData.text+`
`),Z.text=F,navigator.share(Z).catch($=>{})}f(v,!0)},V=()=>{if(navigator.share){const Z={};e.noteData.link?.url&&(Z.url=e.noteData.link.url),e.noteData.link?.title&&(Z.title=e.noteData.link.title),navigator.share(Z).catch(F=>{})}f(v,!0)};let Q=Za||_r,J=M(a);var K=ce(),ve=D(K);{var _e=Z=>{var F=rg(),$=D(F);ge($,()=>({"--bottom":e.showMenuUp?"100%":"auto","--top":e.showMenuUp?"auto":"100%","--right":"10px"})),Mr($.lastChild,{get startClose(){return n(v)},onClosed:I,get isMobile(){return Q},children:(se,re)=>{var le=ag(),we=D(le),Te=b(we);ze(Te,{onClick:O,get dialogMode(){return Q},children:(S,C)=>{var k=Uv(),z=D(k);{let te=M(()=>e.noteData.pinnedAt?"pin-cancel":"pin");ge(z,()=>({"--size":"20px"})),pe(z.lastChild,{get name(){return n(te)}})}var W=L(z);Se(()=>rt(W,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)),g(S,k)},$$slots:{default:!0}});var N=L(we,2);{var G=S=>{var C=Vv(),k=b(C);ze(k,{onClick:A,get dialogMode(){return Q},children:(z,W)=>{var te=qv(),fe=D(te);ge(fe,()=>({"--size":"20px"})),pe(fe.lastChild,{name:"copy"}),g(z,te)},$$slots:{default:!0}}),g(S,C)};q(N,S=>{n(J)&&e.noteData.link?.url&&S(G)})}var he=L(N,2);{var be=S=>{var C=Kv(),k=b(C);ze(k,{onClick:B,get dialogMode(){return Q},children:(z,W)=>{var te=Wv(),fe=D(te);ge(fe,()=>({"--size":"20px"})),pe(fe.lastChild,{name:"copyN"}),g(z,te)},$$slots:{default:!0}}),g(S,C)};q(he,S=>{e.noteData.text&&S(be)})}var ke=L(he,2);{var Ce=S=>{var C=Yv(),k=b(C);ze(k,{onClick:U,get dialogMode(){return Q},children:(z,W)=>{var te=Gv(),fe=D(te);ge(fe,()=>({"--size":"20px"})),pe(fe.lastChild,{name:"share"}),g(z,te)},$$slots:{default:!0}}),g(S,C)};q(ke,S=>{_&&e.noteData.text&&S(Ce)})}var ie=L(ke,2);{var oe=S=>{var C=Jv(),k=b(C);ze(k,{onClick:V,get dialogMode(){return Q},children:(z,W)=>{var te=Xv(),fe=D(te);ge(fe,()=>({"--size":"20px"})),pe(fe.lastChild,{name:"shareL"}),g(z,te)},$$slots:{default:!0}}),g(S,C)};q(ie,S=>{_&&e.noteData.link?.url&&S(oe)})}var Ee=L(ie,2);{var qe=S=>{var C=$v(),k=D(C),z=b(k);ze(z,{onClick:()=>{f(p,d()==="notes"),f(m,d()==="archive"),f(v,!0)},get dialogMode(){return Q},children:(fe,ne)=>{var X=Zv(),ee=D(X);{let xe=M(()=>d()==="archive"?"archive-cancel":"archive");ge(ee,()=>({"--size":"20px"})),pe(ee.lastChild,{get name(){return n(xe)}})}var ae=L(ee);Se(()=>rt(ae,` ${d()==="archive"?"Unarchive":"Archive"}`)),g(fe,X)},$$slots:{default:!0}});var W=L(k,2),te=b(W);ze(te,{onClick:()=>{f(h,!0),f(v,!0)},get dialogMode(){return Q},dangerous:!0,children:(fe,ne)=>{var X=Qv(),ee=D(X),ae=b(ee);ge(ae,()=>({"--size":"20px"})),pe(ae.lastChild,{name:"bin"}),g(fe,X)},$$slots:{default:!0}}),g(S,C)},y=S=>{var C=ng(),k=D(C),z=b(k);ze(z,{onClick:()=>{f(E,!0),f(v,!0)},get dialogMode(){return Q},children:(fe,ne)=>{var X=eg(),ee=D(X),ae=b(ee);ge(ae,()=>({"--size":"20px"})),pe(ae.lastChild,{name:"bin-cancel"}),g(fe,X)},$$slots:{default:!0}});var W=L(k,2),te=b(W);ze(te,{onClick:Y,get dialogMode(){return Q},dangerous:!0,children:(fe,ne)=>{var X=tg(),ee=D(X),ae=b(ee);ge(ae,()=>({"--size":"20px"})),pe(ae.lastChild,{name:"bin"}),g(fe,X)},$$slots:{default:!0}}),g(S,C)};q(Ee,S=>{d()==="notes"||d()==="archive"?S(qe):S(y,!1)})}g(se,le)},$$slots:{default:!0}}),g(Z,F)};q(ve,Z=>{u()&&Z(_e)})}g(t,K),ue()}let ia=R(null);var sg=P('<div class="a p-1t3doe5"><!></div>'),ig=P('<div class="b p-1t3doe5"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),lg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),cg=P('<div class="c p-1t3doe5"><!></div>'),dg=P('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),ug=P('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),fg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),vg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),gg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),hg=P("<!> <!>",1),pg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),mg=P("<li><!> <!> <!> <!> <div><!> <!></div> <!></li>");function _g(t,e){de(e,!0);const{pushDialogPage:a}=Jt(),{getFaviconEnabled:r,getRecordMode:o}=Ja(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:c}=ka(),{getSearchParams:d,getHref:u}=Wt();let v=Ne(e,"mode",3,"notes"),h=R(!1),p=R(!1),m=M(r),E=M(o),_=R(null),x=R(null);const{checkMobileSize:H}=Pa(),w=()=>{f(h,!0)},T=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),st("copied"))};Re(()=>{n(ia)===n(x)?f(p,!0):f(p,!1)});const O=N=>{N.preventDefault(),a(`${me.Note}?id=${encodeURIComponent(e.noteId)}`),f(ia,null)},I=e.noteData.link?.url||"";let A=M(()=>n(h)&&n(_)?mt(n(_)).next:null);const B=N=>{N?l(e.noteId):c(e.noteId)};ye(()=>{const N=G=>{n(x)&&n(ia)===n(x)&&!(n(x)===G.target||n(x).contains(G.target))&&f(ia,null)};return document.addEventListener("click",N),()=>{document.removeEventListener("click",N)}});const Y=()=>{const N=new URLSearchParams(d());return N.set(tn,`${me.Note}?id=${encodeURIComponent(e.noteId)}`),u(N)};var U=mg(),V=b(U);{var Q=N=>{var G=sg(),he=b(G);{let be=M(()=>i().has(e.noteId));rl(he,{get checked(){return n(be)},onChange:B})}g(N,G)};q(V,N=>{s()==="multiple"&&N(Q)})}var J=L(V,2);{var K=N=>{var G=ig(),he=b(G);ge(he,()=>({"--size":"18px"})),pe(he.lastChild,{name:"pin"}),g(N,G)};q(J,N=>{e.noteData.pinnedAt&&N(K)})}var ve=L(J,2);{var _e=N=>{var G=cg(),he=b(G);{var be=Ce=>{ol(Ce,{get url(){return I}})},ke=Ce=>{var ie=lg(),oe=D(ie);ge(oe,()=>({"--size":"16px"})),pe(oe.lastChild,{name:"note"}),g(Ce,ie)};q(he,Ce=>{I?Ce(be):Ce(ke,!1)})}g(N,G)};q(ve,N=>{n(m)&&N(_e)})}var Z=L(ve,2);{var F=N=>{var G=dg();G.__click=O;var he=b(G);Se((be,ke)=>{tt(G,"tabindex",e.focusHidden?-1:0),tt(G,"href",be),rt(he,ke)},[Y,()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),vn("focus",G,()=>{f(ia,n(x),!0)}),g(N,G)},$=N=>{var G=ug(),he=b(G);Se(be=>{tt(G,"tabindex",e.focusHidden?-1:0),tt(G,"href",I),rt(he,be)},[()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),vn("focus",G,()=>{f(ia,n(x),!0)}),g(N,G)};q(Z,N=>{n(E)==="note"||!I?N(F):N($,!1)})}var se=L(Z,2);se.__focusin=()=>{f(ia,n(x),!0)};var re=b(se);{var le=N=>{var G=hg(),he=D(G);{var be=oe=>{{let Ee=M(()=>e.focusHidden?-1:0);za(oe,{elem:"button",onclick:T,get tabindex(){return n(Ee)},title:"copy link",children:(qe,y)=>{var S=fg(),C=D(S);ge(C,()=>({"--size":"20px"})),pe(C.lastChild,{name:"copy"}),g(qe,S)},$$slots:{default:!0}})}};q(he,oe=>{H()||oe(be)})}var ke=L(he,2);{var Ce=oe=>{{let Ee=M(()=>e.focusHidden?-1:0),qe=M(()=>e.noteData.link?.title||"unknown");za(oe,{elem:"a",get href(){return I},get tabindex(){return n(Ee)},get title(){return n(qe)},children:(y,S)=>{var C=vg(),k=D(C);ge(k,()=>({"--size":"18px"})),pe(k.lastChild,{name:"open"}),g(y,C)},$$slots:{default:!0}})}},ie=oe=>{{let Ee=M(Y),qe=M(()=>e.focusHidden?-1:0);za(oe,{title:"edit",elem:"a",get href(){return n(Ee)},get tabindex(){return n(qe)},onclick:O,children:(y,S)=>{var C=gg(),k=D(C);ge(k,()=>({"--size":"18px"})),pe(k.lastChild,{name:"pen"}),g(y,C)},$$slots:{default:!0}})}};q(ke,oe=>{n(E)==="note"?oe(Ce):oe(ie,!1)})}g(N,G)};q(re,N=>{I&&N(le)})}var we=L(re,2);{let N=M(()=>e.focusHidden?-1:0);za(we,{title:"show menu",elem:"button",get tabindex(){return n(N)},onclick:w,get ref(){return n(_)},set ref(G){f(_,G,!0)},children:(G,he)=>{var be=pg(),ke=D(be);ge(ke,()=>({"--size":"18px","--rotate":"90deg"})),pe(ke.lastChild,{name:"menu"}),g(G,be)},$$slots:{default:!0}})}var Te=L(se,2);og(Te,{get nextFocusRef(){return n(A)},get mode(){return v()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(h)},set shownMenu(N){f(h,N,!0)}}),Xe(U,N=>f(x,N),()=>n(x)),Se(()=>{Qe(U,1,nt({e:!0,f:n(p)}),"p-1t3doe5"),Qe(se,1,nt({g:!0,h:n(p)}),"p-1t3doe5")}),g(t,U),ue()}ot(["click","focusin"]);var $a,sl,il;class wg{constructor(e){Ie(this,$a);Lt(this,"data");Lt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),et(this,$a,sl).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,et(this,$a,il).call(this)),e}isEmpty(){return this.data.length===0}}$a=new WeakSet,sl=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},il=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class yg{constructor(e,a){Lt(this,"heap");Lt(this,"done");Lt(this,"cache",[]);this.heap=new wg(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var bg=P("<span>Back to notes</span>"),Sg=P('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),Cg=P("<span>Back to notes</span>"),xg=P('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),Tg=P('<p class="f">No notes in bin</p>'),kg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),Eg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),Pg=P('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),Ng=P('<div class="e p-1jdj5w3"><!></div>'),Ag=P('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),Mg=P('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),Dg=P('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function Ig(t,e){de(e,!0);const{getScrollContainer:a}=uo(),{createHandleClickDialogPage:r,createDialogPageHref:o}=Jt(),{getSelectedTags:s}=zn(),{getFeedOrder:i}=Di(),{checkNotesInArchive:l,checkNotesInBin:c,checkNotes:d,isInitedNotes:u}=Ot(),{getSelectedMetaTags:v}=co(),{replaceSearchParams:h,getHref:p}=Wt();$o();const{getFiltredNotesLength:m,getFiltredNotes:E,getUpdatedFiltredNotesTimestamp:_}=Ea();let x=M(v),H=M(m),w=M(E),T=M(_),O=M(u),I=54,A=R(0),B=R(0),Y=R(0),U=R(null),V=M(a),Q=null,J=null,K=M(()=>n(x).has(Ye.ARCHIVED)?"archive":n(x).has(Ye.BIN)?"bin":"notes");const ve=M(s);Re(()=>{n(ve),n(se),n(V)?.scrollTo(0,0)});const{enable:_e}=ns(),Z=()=>{_e(),Q||(Q=requestAnimationFrame(()=>{const ie=n(V)?.scrollTop||0;f(Y,ie,!0);const oe=Math.ceil(n(A)/I);f(B,Math.floor(ie/(I*oe))*(I*oe)),Q=null}))},F=()=>{J||(J=requestAnimationFrame(()=>{f(A,window.innerHeight-180||0,!0);const ie=n(V)?.scrollTop||0;f(Y,ie,!0);const oe=Math.ceil(n(A)/I);f(B,Math.floor(ie/(I*oe))*(I*oe)),J=null}))};ye(()=>{F(),Z()});const $=()=>{Z()};Re(()=>(n(V)?.addEventListener("scroll",$),window.addEventListener("resize",F),()=>{n(V)?.removeEventListener("scroll",$),window.removeEventListener("resize",F)}));const se=M(i);Re(()=>{n(se),n(T),f(U,new yg(n(w),(ie,oe)=>{if(!ie||!oe||!ie.data||!oe.data)return 0;if(ie.data.pinnedAt&&!oe.data.pinnedAt)return-1;if(!ie.data.pinnedAt&&oe.data.pinnedAt)return 1;if(ie.data.pinnedAt&&oe.data.pinnedAt){if(ie.data.pinnedAt<oe.data.pinnedAt)return 1;if(ie.data.pinnedAt>oe.data.pinnedAt)return-1}switch(n(se)){case"newest":return ie.data.updatedAt<oe.data.updatedAt?1:ie.data.updatedAt>oe.data.updatedAt?-1:(ie.data.link?.title||"").localeCompare(oe.data.link?.title||"");case"oldest":return ie.data.updatedAt>oe.data.updatedAt?1:ie.data.updatedAt<oe.data.updatedAt?-1:(ie.data.link?.title||"").localeCompare(oe.data.link?.title||"");case"AtoZ":return(ie.data.link?.title||"").localeCompare(oe.data.link?.title||"");case"ZtoA":return(oe.data.link?.title||"").localeCompare(ie.data.link?.title||"");default:return 0}}),!0)});const re=M(()=>n(H)*I);let we=M(()=>{n(T);const ie=Math.ceil(n(A)/I);let oe=Math.floor(n(B)/I);return oe=oe-Math.min(oe,ie),n(U)?.get(oe,oe+ie*3)||[]}),Te=M(()=>I*Math.ceil(n(A)/I));const N=M(()=>n(B)-Math.min(n(B),n(Te)));var G=Dg(),he=b(G),be=b(he);{var ke=ie=>{Na(ie,{})},Ce=ie=>{var oe=ce(),Ee=D(oe);{var qe=S=>{var C=Sg(),k=L(D(C),2),z=b(k);{let W=M(()=>p(""));Nt(z,{element:"a",get href(){return n(W)},onClick:te=>{te.preventDefault(),h("")},children:(te,fe)=>{var ne=bg();g(te,ne)},$$slots:{default:!0}})}g(S,C)},y=S=>{var C=ce(),k=D(C);{var z=te=>{var fe=xg(),ne=L(D(fe),2),X=b(ne);{let ee=M(()=>p(""));Nt(X,{element:"a",get href(){return n(ee)},onClick:ae=>{ae.preventDefault(),h("")},children:(ae,xe)=>{var $e=Cg();g(ae,$e)},$$slots:{default:!0}})}g(te,fe)},W=te=>{var fe=ce(),ne=D(fe);{var X=ae=>{var xe=Ng(),$e=b(xe);{var ht=at=>{var We=Tg();g(at,We)},Mt=at=>{var We=Pg(),Ve=b(We),Ke=b(Ve);{let Fe=M(()=>o(me.NewNote)),Be=M(()=>r(me.NewNote));Nt(Ke,{element:"a",get href(){return n(Fe)},get onClick(){return n(Be)},children:(ut,ft)=>{var Je=kg(),Dt=D(Je);ge(Dt,()=>({"--size":"18px","--color":"#b0b0b0"})),pe(Dt.lastChild,{name:"plus"}),g(ut,Je)},$$slots:{default:!0}})}var Pe=L(Ve,4),Oe=b(Pe);{let Fe=M(()=>o(me.ImportData)),Be=M(()=>r(me.ImportData));Nt(Oe,{element:"a",get href(){return n(Fe)},get onClick(){return n(Be)},children:(ut,ft)=>{var Je=Eg(),Dt=D(Je);ge(Dt,()=>({"--size":"18px","--color":"#b0b0b0"})),pe(Dt.lastChild,{name:"import"}),g(ut,Je)},$$slots:{default:!0}})}g(at,We)};q($e,at=>{n(K)==="bin"?at(ht):at(Mt,!1)})}g(ae,xe)},ee=ae=>{var xe=ce(),$e=D(xe);{var ht=at=>{var We=Ag();g(at,We)},Mt=at=>{var We=Mg(),Ve=b(We);Ln(Ve,23,()=>n(we),Ke=>Ke.data,(Ke,Pe,Oe)=>{var Fe=ce(),Be=D(Fe);{var ut=ft=>{{let Je=M(()=>n(Oe)*I<n(Y)-n(N)-I/2||n(Oe)*I>n(Y)-n(N)+Math.floor(n(A)/I)*I),Dt=M(()=>(n(Oe)+5)*I<n(Y)-n(N)-I/2||(n(Oe)+5)*I>n(Y)-n(N)+Math.floor(n(A)/I)*I);_g(ft,{get mode(){return n(K)},get focusHidden(){return n(Je)},get showMenuUp(){return n(Dt)},get noteId(){return n(Pe).id},get noteData(){return n(Pe).data}})}};q(Be,ft=>{n(Pe).data&&ft(ut)})}g(Ke,Fe)}),Se(Ke=>{Xa(We,Ke),Xa(Ve,`transform: translateY(${n(N)??""}px);`)},[()=>`--minHeight: ${Math.max((n(re)>n(A),n(re)),0)}px`]),g(at,We)};q($e,at=>{n(we).length===0?at(ht):at(Mt,!1)},!0)}g(ae,xe)};q(ne,ae=>{!c()&&!l()&&!d()?ae(X):ae(ee,!1)},!0)}g(te,fe)};q(k,te=>{n(K)==="archive"&&!l()?te(z):te(W,!1)},!0)}g(S,C)};q(Ee,S=>{n(K)==="bin"&&!c()?S(qe):S(y,!1)},!0)}g(ie,oe)};q(be,ie=>{n(O)?ie(Ce,!1):ie(ke)})}g(t,G),ue()}var Lg=P('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function Rg(t){var e=Lg(),a=L(D(e),2),r=b(a);Ig(r,{}),g(t,e)}function Og(t,e){de(e,!0);const a=jn();let r=Ne(e,"animationRef",7),o=Ne(e,"dialog",7);nl(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let d=0,u=0,v=()=>1;if(r().current){r().current.pause();let p=Number(r().current.currentTime);wr()&&(p=Number(p)+50,r().current.currentTime=Math.min(Math.max(Rn-1,p),p));const m=r().current.effect?.getComputedTiming().progress||0;v=()=>m,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(p=>requestAnimationFrame(p)),u=1-v();const h=u*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-u)*.1}`),a.swipingRatio=Math.abs(1-u)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${h}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:d,currentPosition:h,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:d,width:u})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-d/u)*.1}`),o().style.transform=`translate3d(${d}px, 0, 0)`,a.swipingRatio=Math.abs(1-d/u)*25)},onFinish:({swipeVelocity:d,currentPosition:u,width:v,actionThreshold:h,initialPosition:p})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const m=()=>Math.abs(p+u)/v*100;let E=null;if(d<=-na?E="open":d>=na?E="close":E=Math.abs(m())>h?"close":"open",r().progress=tl(m()/100),E==="close"){const _=(1-(r().progress||0))*Rn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const _=(r().progress||1)*Rn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),ue()}var Fg=P('<div class="d p-1c7pbur"> </div>'),zg=P('<button class="e f p-1c7pbur"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),jg=P('<a class="e g p-1c7pbur"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Bg=P('<div><div class="a p-1c7pbur"><div class="b p-1c7pbur"><div class="c p-1c7pbur"><!> <!> <!></div></div></div> <!> <!></div>'),Hg=P("<dialog><!></dialog> <!>",1);function Ug(t,e){de(e,!0);const{isScrolling:a,enable:r}=ns();let o=R(null),s=R(null),i={};const l=jn(),{checkLeftEnd:c,checkLeftStart:d,setLeftEnd:u,setLeftStart:v,getCountDialog:h}=cn(),p=M(d),m=M(c);let E=M(()=>l.working);const _=()=>{e.dialogState!=="opened"&&e.onStartOpening()},x=()=>{e.onClose()},H=()=>{e.onSwipe()},w=Q=>{Q.preventDefault(),x()};ye(()=>(n(o)?.addEventListener("close",x),n(o)?.addEventListener("cancel",w),()=>{n(o)?.removeEventListener("close",x),n(o)?.removeEventListener("cancel",w)})),Re(()=>{h()>0&&(l.swipingRatio=25)}),Re(()=>{e.dialogState==="opening"?Vt(()=>{requestAnimationFrame(()=>{if(!n(o))return;const Q=(i.progress||1)*Rn,J=n(o).style.transform||`translate3d(${n(p)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const K=n(o)?.animate([{transform:J},{transform:"translate3d(0, 0, 0)"}],{duration:Q,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=K,K&&(K.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ta().duration,K.cancel(),i.current=void 0,i.progress=void 0,n(p)&&v(!1)})})}):e.dialogState==="closing"&&Vt(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const Q=(1-(i.progress||0))*Rn,J=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const K=n(o)?.animate([{transform:J},{transform:`translate3d(${n(m)?"-100%":"100%"}, 0, 0)`}],{duration:Q,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=K,K&&(K.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ta().duration,K.cancel(),i.current=void 0,i.progress=void 0,n(m)&&u(!1)})})})});const T=()=>{r()},O=M(a);ye(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),wr()&&n(o).getBoundingClientRect(),!n(E)){e.onOpened();return}e.onStartOpening()}});var I=Hg(),A=D(I),B=b(A);{var Y=Q=>{var J=Bg(),K=b(J),ve=b(K),_e=b(ve),Z=b(_e);{var F=G=>{var he=Fg(),be=b(he);Se(()=>rt(be,e.title)),g(G,he)};q(Z,G=>{e.title&&G(F)})}var $=L(Z,2);{var se=G=>{var he=zg();he.__click=x;var be=b(he);ge(be,()=>({"--size":"32px"})),pe(be.lastChild,{name:"back"});var ke=L(be,2);lt(ke,{children:(Ce,ie)=>{var oe=De("back");g(Ce,oe)}}),g(G,he)};q($,G=>{e.blocked||G(se)})}var re=L($,2);{var le=G=>{var he=jg();he.__click=function(...Ce){e.onOpenWindow?.apply(this,Ce)};var be=b(he);ge(be,()=>({"--scale":"0.7","--size":"32px"})),pe(be.lastChild,{name:"open-window"});var ke=L(be,2);lt(ke,{children:(Ce,ie)=>{var oe=De("open window");g(Ce,oe)}}),Se(()=>tt(he,"href",e.openWindowHref)),g(G,he)};q(re,G=>{e.onOpenWindow&&G(le)})}var we=L(K,2);Ae(we,()=>e.children);var Te=L(we,2);{var N=G=>{rs(G,{})};q(Te,G=>{e.dialogState==="opened"&&G(N)})}Xe(J,G=>f(s,G),()=>n(s)),Se(()=>Qe(J,1,nt({o:!0,p:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-1c7pbur")),vn("scroll",J,T),g(Q,J)};q(B,Q=>{e.dialogState!=="preOpening"&&Q(Y)})}Xe(A,Q=>f(o,Q),()=>n(o));var U=L(A,2);{var V=Q=>{Og(Q,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:_,onClose:x,onSwipe:H,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};q(U,Q=>{n(s)&&!n(O)&&!e.blocked&&!e.hidden&&Q(V)})}Se(()=>Qe(A,1,nt({h:!0,i:n(E),j:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",k:e.hidden,l:e.dialogState==="opened",m:n(p),n:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-1c7pbur")),g(t,I),ue()}ot(["click"]);function qg(t,e){de(e,!0);let a=Ne(e,"hidden",3,!1),r=Ne(e,"onClosed",3,()=>{}),o=R(0);ye(()=>{const x=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",x),x(),()=>{window.removeEventListener("resize",x)}});const{dialogDec:s,dialogInc:i}=cn(),l=jn();ye(()=>(i(),()=>{s()}));let c=R("closed");const d=()=>{f(c,"opening")},u=()=>{f(c,"swiping")},v=()=>{f(c,"opened")},h=()=>{e.onClose(),f(c,"closing")},p=()=>{f(c,"closed"),r()()};Re(()=>{e.shown&&n(c)==="closed"?f(c,"preOpening"):!e.shown&&n(c)==="opened"&&f(c,"closing")}),Re(()=>{n(c)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(c)==="opened"||n(c)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var m=ce(),E=D(m);{var _=x=>{Ug(x,{get dialogWidth(){return n(o)},get dialogState(){return n(c)},get title(){return e.title},onStartOpening:d,onOpened:v,onClose:h,onClosed:p,onSwipe:u,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(H,w)=>{var T=ce(),O=D(T);Ae(O,()=>e.children),g(H,T)},$$slots:{default:!0}})};q(E,x=>{n(c)!=="closed"&&x(_)})}g(t,m),ue()}const Vg=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};ye(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),ye(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Wg=P('<button class="d e p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Kg=P('<div class="f p-2jn3ll"> </div>'),Gg=P('<button class="d g p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Yg=P('<dialog><div class="a p-2jn3ll"><div class="b p-2jn3ll"><div class="c p-2jn3ll"><div><!></div> <!> <div><!></div></div></div> <!></div></dialog> <!>',1);function Xg(t,e){de(e,!0);let a=Ne(e,"blockedDialog",3,!1),r=Ne(e,"hiddenDialog",3,!1),o=Ne(e,"isDesktopAnimationOff",3,!1),s=R(null),i=R(null),l=R(!1);Vg({getDialog:()=>n(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=jn();Re(()=>{e.stateDialog==="closing"&&(c.working?n(s)?.addEventListener("transitionend",()=>{n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:d}=as(),u=M(d);ye(()=>{setTimeout(()=>{f(l,!0)},50)});var v=Yg(),h=D(v),p=b(h),m=b(p),E=b(m),_=b(E),x=b(_);{var H=U=>{var V=Wg();V.__click=()=>{e.onStartBack()};var Q=b(V);ge(Q,()=>({"--size":"28px"})),pe(Q.lastChild,{name:"back"});var J=L(Q,2);lt(J,{children:(K,ve)=>{var _e=De("back");g(K,_e)}}),g(U,V)};q(x,U=>{(!(a()||r())||a())&&e.onStartBack&&U(H)})}var w=L(_,2);{var T=U=>{var V=Kg(),Q=b(V);Se(()=>rt(Q,e.title)),g(U,V)};q(w,U=>{e.title&&U(T)})}var O=L(w,2),I=b(O);{var A=U=>{var V=Gg();V.__click=()=>{e.onStartClose()};var Q=b(V);ge(Q,()=>({"--size":"28px"})),pe(Q.lastChild,{name:"close"});var J=L(Q,2);lt(J,{children:(K,ve)=>{var _e=De("close");g(K,_e)}}),g(U,V)};q(I,U=>{a()||r()||U(A)})}var B=L(m,2);Ae(B,()=>e.children),Xe(p,U=>f(i,U),()=>n(i)),Xe(h,U=>f(s,U),()=>n(s));var Y=L(h,2);os(Y,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose}}),Se(()=>{Xa(h,`height: ${n(u)+74}px`),Qe(h,1,nt({h:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o(),m:r()}),"p-2jn3ll")}),g(t,v),ue()}ot(["click"]);const Jg=({onStartClose:t,onClosed:e})=>{let a=R("close");return{get state(){return n(a)},set state(i){f(a,i,!0)},handleStartClose:(i=!1)=>{i||(f(a,"closing"),t?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function Zg(t,e){de(e,!0);let a=Ne(e,"blockedDialog",3,!1),r=Ne(e,"hiddenDialog",3,!1),o=Ne(e,"onStartClose",3,()=>{}),s=Ne(e,"onClosed",3,()=>{}),i=Jg({onStartClose:o(),onClosed:s()});const{dialogDec:l,dialogInc:c}=cn();ye(()=>(c(),()=>{l()})),Re(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const d=p=>{p.key==="Escape"&&a()&&(p.preventDefault(),p.stopPropagation())};ye(()=>(document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}));var u=ce(),v=D(u);{var h=p=>{Xg(p,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(m,E)=>{var _=ce(),x=D(_);Ae(x,()=>e.children),g(m,_)},$$slots:{default:!0}})};q(v,p=>{i.state!=="close"&&p(h)})}g(t,u),ue()}const Ms=(t,e=je,a=je,r)=>{let o=kr(()=>Sl(r?.(),!1));var s=ce(),i=D(s);{var l=d=>{pt(d,{children:(u,v)=>{kt(u,{get hidden(){return n(o)},get page(){return me.Settings}})},$$slots:{default:!0}})},c=d=>{var u=ce(),v=D(u);{var h=m=>{pt(m,{children:(E,_)=>{Rv(E,{})},$$slots:{default:!0}})},p=m=>{var E=ce(),_=D(E);{var x=w=>{pt(w,{children:(T,O)=>{kt(T,{get params(){return a()},get hidden(){return n(o)},get page(){return me.Note}})},$$slots:{default:!0}})},H=w=>{var T=ce(),O=D(T);{var I=B=>{pt(B,{children:(Y,U)=>{kt(Y,{get hidden(){return n(o)},get page(){return me.ImportData}})},$$slots:{default:!0}})},A=B=>{var Y=ce(),U=D(Y);{var V=J=>{pt(J,{children:(K,ve)=>{kt(K,{get hidden(){return n(o)},get page(){return me.ExportData}})},$$slots:{default:!0}})},Q=J=>{var K=ce(),ve=D(K);{var _e=F=>{pt(F,{children:($,se)=>{fv($,{})},$$slots:{default:!0}})},Z=F=>{var $=ce(),se=D($);{var re=we=>{pt(we,{children:(Te,N)=>{kt(Te,{get hidden(){return n(o)},get page(){return me.Install}})},$$slots:{default:!0}})},le=we=>{var Te=ce(),N=D(Te);{var G=be=>{pt(be,{children:(ke,Ce)=>{kt(ke,{get hidden(){return n(o)},get page(){return me.InstallSuccess}})},$$slots:{default:!0}})},he=be=>{var ke=ce(),Ce=D(ke);{var ie=Ee=>{pt(Ee,{children:(qe,y)=>{kt(qe,{get hidden(){return n(o)},get page(){return me.Auth}})},$$slots:{default:!0}})},oe=Ee=>{var qe=ce(),y=D(qe);{var S=k=>{pt(k,{children:(z,W)=>{kt(z,{get hidden(){return n(o)},get page(){return me.Signup}})},$$slots:{default:!0}})},C=k=>{var z=ce(),W=D(z);{var te=ne=>{pt(ne,{children:(X,ee)=>{kt(X,{get hidden(){return n(o)},get page(){return me.Signin}})},$$slots:{default:!0}})},fe=ne=>{var X=ce(),ee=D(X);{var ae=$e=>{pt($e,{children:(ht,Mt)=>{kt(ht,{get hidden(){return n(o)},get page(){return me.AccessKeys}})},$$slots:{default:!0}})},xe=$e=>{var ht=ce(),Mt=D(ht);{var at=Ve=>{pt(Ve,{children:(Ke,Pe)=>{kt(Ke,{get hidden(){return n(o)},get page(){return me.Account}})},$$slots:{default:!0}})},We=Ve=>{var Ke=ce(),Pe=D(Ke);{var Oe=Be=>{pt(Be,{children:(ut,ft)=>{kt(ut,{get hidden(){return n(o)},get page(){return me.ConfirmAccessKey}})},$$slots:{default:!0}})},Fe=Be=>{var ut=ce(),ft=D(ut);{var Je=vt=>{pt(vt,{children:(_t,Dr)=>{kt(_t,{get hidden(){return n(o)},get page(){return me.Exit}})},$$slots:{default:!0}})},Dt=vt=>{var _t=ce(),Dr=D(_t);{var Ft=Zt=>{var It=ce(),zt=D(It);{var fo=Qt=>{pt(Qt,{children:(Ir,ss)=>{kt(Ir,{get hidden(){return n(o)},get page(){return me.Sync}})},$$slots:{default:!0}})},sa=Qt=>{var Ir=ce(),ss=D(Ir);{var ll=Aa=>{pt(Aa,{children:(Lr,is)=>{kt(Lr,{get hidden(){return n(o)},get page(){return me.Subscription}})},$$slots:{default:!0}})},cl=Aa=>{var Lr=ce(),is=D(Lr);{var dl=Ma=>{pt(Ma,{children:(vo,fl)=>{kt(vo,{get hidden(){return n(o)},get page(){return me.About}})},$$slots:{default:!0}})},ul=Ma=>{pt(Ma,{children:(vo,fl)=>{iv(vo,{})},$$slots:{default:!0}})};q(is,Ma=>{e()===me.About?Ma(dl):Ma(ul,!1)},!0)}g(Aa,Lr)};q(ss,Aa=>{e()===me.Subscription?Aa(ll):Aa(cl,!1)},!0)}g(Qt,Ir)};q(zt,Qt=>{e()===me.Sync?Qt(fo):Qt(sa,!1)},!0)}g(Zt,It)};q(Dr,Zt=>{e(),me.Extension,Zt(Ft,!1)},!0)}g(vt,_t)};q(ft,vt=>{e()===me.Exit?vt(Je):vt(Dt,!1)},!0)}g(Be,ut)};q(Pe,Be=>{e()===me.ConfirmAccessKey?Be(Oe):Be(Fe,!1)},!0)}g(Ve,Ke)};q(Mt,Ve=>{e()===me.Account?Ve(at):Ve(We,!1)},!0)}g($e,ht)};q(ee,$e=>{e()===me.AccessKeys?$e(ae):$e(xe,!1)},!0)}g(ne,X)};q(W,ne=>{e()===me.Signin?ne(te):ne(fe,!1)},!0)}g(k,z)};q(y,k=>{e()===me.Signup?k(S):k(C,!1)},!0)}g(Ee,qe)};q(Ce,Ee=>{e()===me.Auth?Ee(ie):Ee(oe,!1)},!0)}g(be,ke)};q(N,be=>{e()===me.InstallSuccess?be(G):be(he,!1)},!0)}g(we,Te)};q(se,we=>{e()===me.Install?we(re):we(le,!1)},!0)}g(F,$)};q(ve,F=>{e()===me.AccountSetup?F(_e):F(Z,!1)},!0)}g(J,K)};q(U,J=>{e()===me.ExportData?J(V):J(Q,!1)},!0)}g(B,Y)};q(O,B=>{e()===me.ImportData?B(I):B(A,!1)},!0)}g(w,T)};q(_,w=>{e()===me.Note?w(x):w(H,!1)},!0)}g(m,E)};q(v,m=>{e()===me.NewNote?m(h):m(p,!1)},!0)}g(d,u)};q(i,d=>{e()===me.Settings?d(l):d(c,!1)})}g(t,s)};var Qg=P("<!> <!>",1);function $g(t,e){de(e,!0);const a=Yc(e,["$$slots","$$events","$$legacy"]),{checkBlockedDialog:r,checkClosableDialog:o}=cn(),{sidebarClose:s,getSidebarState:i}=Nr(),l=M(r),c=M(o),{getDialogPages:d}=Jt(),{getAccount:u}=ts();let v=M(d),h=M(()=>u()!==void 0);const{checkMobileSize:p}=Pa();let m=R(it([]));const E=M(p),{clearDialogPages:_,popDialogPage:x}=Jt(),{checkLeftStart:H}=cn();let w=M(H);Re(()=>{d().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const T=()=>{x()},O=()=>{_()};Re(()=>{n(v),n(E),Vt(()=>{if(n(E))n(v).length>=n(m).length||n(w)?f(m,n(v).map(J=>({page:J,shown:!0})),!0):f(m,n(m).map((J,K)=>({page:J.page,shown:K<n(v).length})),!0);else if(n(v).length>=n(m).length)f(m,n(v).map(J=>({page:J,shown:!0})),!0);else{if(n(v).length===0){f(m,[{page:n(m)[n(m).length-1].page,shown:!1}],!0);return}f(m,n(v).map(J=>({page:J,shown:!0})),!0)}})});const I=()=>{f(m,n(v).map(J=>({page:J,shown:!0})),!0)};var A=Qg(),B=D(A);{var Y=J=>{Rg(J)};q(B,J=>{n(h)&&J(Y)})}var U=L(B,2);{var V=J=>{var K=ce(),ve=D(K);Ln(ve,19,()=>n(m),_e=>_e.page,(_e,Z,F)=>{const $=M(()=>n(Z).page.split("?")[1]),se=M(()=>n(Z).page.split("?")[0]),re=M(()=>n(F)!==n(m).length-1&&!!n(m)[n(F)+1]?.shown),le=M(()=>n(F)===0);{let we=M(()=>xs[n(se)]||""),Te=M(()=>n(l)||n(le)&&!n(c));qg(_e,Do({get shown(){return n(Z).shown},get title(){return n(we)},get hidden(){return n(re)},get blocked(){return n(Te)},onClose:T,onClosed:I},()=>a,{children:(N,G)=>{Ms(N,()=>n(se),()=>n($),()=>n(re))},$$slots:{default:!0}}))}}),g(J,K)},Q=J=>{var K=ce(),ve=D(K);{var _e=Z=>{const F=M(()=>n(m)[n(m).length-1].page.split("?")[1]),$=M(()=>n(m)[n(m).length-1].page.split("?")[0]),se=M(()=>n(m)[n(m).length-1].shown),re=M(()=>n(m).length===1);{let le=M(()=>xs[n($)]||""),we=M(()=>n(l)||!n(c)),Te=M(()=>n(l)||n(re)?void 0:T);Zg(Z,{get shownDialog(){return n(se)},get title(){return n(le)},get blockedDialog(){return n(we)},hiddenDialog:!1,get onStartBack(){return n(Te)},onStartClose:O,onClosed:I,children:(N,G)=>{Ms(N,()=>n($),()=>n(F))},$$slots:{default:!0}})}};q(ve,Z=>{n(m).length>0&&Z(_e)},!0)}g(J,K)};q(U,J=>{p()?J(V):J(Q,!1)})}g(t,A),ue()}function eh(t,e){de(e,!1);let a=0;ye(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),Qo(),ue()}const th=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var nh=P('<div><button class="d p-11qzo3t"><!> <span class="e p-11qzo3t"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),ah=P('<!> <!> <!> <!> <main><div class="a p-11qzo3t"><div class="b p-11qzo3t"><!></div></div> <div class="c p-11qzo3t"><!></div></main> <!>',1);function rh(t,e){de(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=Wt(),{hasDialogPage:s}=Jt(),{setScrollContainer:i}=uo(),{getAccount:l,init:c}=ts(),{isInitedNotes:d}=Ot(),{isInitedSettings:u}=Ja(),{getDialogPages:v}=Jt(),{createBroadcastChannel:h,tabId:p}=lo(),m=h(),{getSidebarState:E}=Nr(),{setClosableDialog:_}=cn(),{getViewMode:x}=Ja(),H=()=>{th()?a(`${tn}=${me.AccountSetup}`):a(`${tn}=${me.Install}`)};ye(()=>{c(S=>{S===void 0?H():(s(me.AccountSetup)&&a(""),S?f(A,S):f(A,null))});const y=async S=>{const C=JSON.parse(S.data);if(C.tabId&&C.tabId===p)return;const k=C;k.type==="initLocalAccount"||k.type==="initCloudAccount"||k.type==="updateAccount"||k.type==="disconnectCloudAccount"?a(""):k.type==="exit"&&H()};return m.addEventListener(y),()=>m.removeEventListener(y)});const w=jn();ye(async()=>{await new Promise(y=>setTimeout(y,250)),await bi(),w.working=!0});let T=R(!1),O=0,I=M(()=>v().length>0),A=M(l),B=M(d),Y=M(u),U=R(null);const V=()=>{n(U)&&n(U).scrollTo({top:0})};Re(()=>{_(n(A)!==void 0)}),Re(()=>{i(n(U))});const Q=()=>{if(n(U)){const y=n(U).scrollTop||0;y===0?f(T,!1):!n(T)&&O>y?f(T,!0):n(T)&&O+50<y&&f(T,!1),O=y}},J=()=>{Q()};Re(()=>(n(U)?.addEventListener("scroll",J),window.addEventListener("resize",J),()=>{n(U)?.removeEventListener("scroll",J),window.removeEventListener("resize",J)}));const K=M(E);let ve=M(()=>w.swipingRatio);const _e=()=>{const y=new URLSearchParams(o());if(s(me.NewNote)){const S=y.get("noteId")||"";return r(S?y.toString().replace(me.NewNote,`${me.Note}?id=${encodeURIComponent(S)}`):y)}return r(y)},Z=async()=>{const y=await chrome.windows.getCurrent();if(!y)return;const S=420,C=700,k=(y.left||0)+(y.width||0)-S-10,z=(y.top||0)+90;await chrome.windows.create({url:_e(),type:"popup",width:S,height:C,left:k,top:z}),window.close()},F=M(x),$=M(()=>n(F)==="popup"||n(F)==="sidebar"?{onOpenWindow:Z,openWindowHref:_e()}:{});var se=ah(),re=D(se);eh(re,{});var le=L(re,2);ku(le,{});var we=L(le,2);rs(we,{});var Te=L(we,2);Gu(Te,{});var N=L(Te,2),G=b(N),he=b(G),be=b(he);{var ke=y=>{rv(y,Do(()=>n($)))};q(be,y=>{n(Y)&&n(A)!==void 0&&y(ke)})}var Ce=L(G,2),ie=b(Ce);{var oe=y=>{$g(y,Do(()=>n($)))};q(ie,y=>{n(B)&&n(Y)&&y(oe)})}Xe(N,y=>f(U,y),()=>n(U));var Ee=L(N,2);{var qe=y=>{var S=nh(),C=b(S);C.__click=V;var k=b(C);lt(k,{children:(te,fe)=>{var ne=De("top");g(te,ne)}});var z=L(k,2),W=b(z);ge(W,()=>({"--rotate":"90deg","--size":"28px"})),pe(W.lastChild,{name:"back"}),Se(()=>{Xa(S,`--swiping-ratio: ${n(ve)}; --transition-timing-default: ${w.duration}s;`),Qe(S,1,nt({i:!0,g:w.working&&!w.isSwiping,j:n(I)||n(K)!=="closed"}),"p-11qzo3t")}),g(y,S)};q(Ee,y=>{n(T)&&y(qe)})}Se(()=>{Xa(N,`--swiping-ratio: ${n(ve)}; --transition-timing-default: ${w.duration}s;`),Qe(N,1,nt({f:!0,g:w.working&&!w.isSwiping,h:n(K)!=="closed"}),"p-11qzo3t")}),g(t,se),ue()}ot(["click"]);function oh(t){$d(t,{children:(e,a)=>{rh(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Ac(oh,{target:document.getElementById("app")});export{Lv as $,M as A,Nt as B,Wt as C,ts as D,Qo as E,br as F,vn as G,cv as H,pe as I,Ot as J,Pa as K,Na as L,Ja as M,al as N,qn as O,me as P,Xe as Q,fh as R,uh as S,lu as T,cu as U,lt as V,tn as W,wr as X,Vt as Y,wt as Z,Ra as _,f as a,lo as a0,ch as a1,Vc as a2,th as a3,lh as a4,Ne as a5,Xa as a6,dh as a7,R as b,b as c,ge as d,Ln as e,P as f,n as g,tt as h,g as i,q as j,Qe as k,nt as l,ue as m,D as n,ye as o,de as p,rt as q,ot as r,L as s,Se as t,Jt as u,cn as v,it as w,Re as x,ce as y,De as z};
