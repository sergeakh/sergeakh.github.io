import{p as be,n as we,z as Ae,A as Pe,q as Se,o as ke,k,h as V,g as m,u as xe,f as c,i as o,c as J,d as e,j as Ce,l,H as X,x,s as $,B as j,v as p,P as ye,L as Ie}from"./aDxyDq0Ub.js";const ze=async()=>"getInstalledRelatedApps"in navigator?(await navigator?.getInstalledRelatedApps?.())?.some(f=>f.platform==="webapp")??!1:!1,q=()=>window.installPrompt;function $e(){const r=navigator.userAgent,f=/iPad|iPhone|iPod/.test(r);return f?!!f:!1}const Z=()=>{const r=navigator.userAgent;return/android/i.test(r)},F=()=>{const r=navigator.userAgent;return/chrome|crios/i.test(r)&&!/edg|edgios|edga|brave/i.test(r)&&!navigator.brave},oe=()=>{const r="serviceWorker"in navigator,f="onbeforeinstallprompt"in window;return r&&f},ne=()=>{const r=navigator.userAgent;return!!(/Safari/.test(r)&&!/Chrome/.test(r)&&!/CriOS/.test(r)&&!/FxiOS/.test(r))};var We=c('<p class="message svelte-1uagzbf">App is already installed.</p>'),Be=c('<p class="message svelte-1uagzbf">For install app, select the share button and select "Add to Home Screen".</p>'),Oe=c('<p class="message svelte-1uagzbf">Install app available on Safari.</p>'),Fe=c(`<p class="message svelte-1uagzbf">From the menu bar, choose File > Add to Dock. Or click the Share button in the Safari
				toolbar, then choose Add to Dock.</p>`),He=c('<p class="message svelte-1uagzbf">Installation is not supported in this browser. use Brave, Chrome or Edge.</p>'),De=c(`<p class="message svelte-1uagzbf">App is already installed or installation is not supported in this browser. use Brave,
					Chrome or Edge.</p>`),Ee=c('<p class="message svelte-1uagzbf">For better experience, install app from Chrome.</p>'),Le=c(`<!> <p class="message svelte-1uagzbf">You can install app to have a better experience and more reliable storage or you can use it in
			your browser and install later.</p> <!> <div class="container svelte-1uagzbf"><!> <!></div>`,1),Re=c('<!> <div class="loader svelte-1uagzbf"><!></div>',1),Te=c('<p class="message svelte-1uagzbf">Open the app from your device.</p>'),je=c('<!> <!> <div class="container svelte-1uagzbf"><!> <!></div>',1),qe=c('<div class="block svelte-1uagzbf"><!></div>');function Ye(r,f){be(f,!0);const{pushStackPages:le,clearStackPages:ie}=we(),{replace:ee,clearHistoryStack:ce}=Ae(),{getAccount:ae}=Pe(),{blockDialog:te}=Se();let h=V("idle"),H=V(!1),M=V(null);const ve=()=>{ae()===void 0?le(ye.AccountSetup):ie()},re=()=>{ve()},pe=async()=>{const i=q();try{i&&(k(h,"installing"),"onappinstalled"in window&&window.addEventListener("appinstalled",()=>{if(k(H,!0),!Z()){te(!1),ce();const v=ae();ee(v===void 0?"/?stackPages=welcome%2CinstallSuccess":"/?stackPages=installSuccess")}}),await i.prompt(),i.userChoice?.then(v=>{v.outcome==="accepted"?(window.installPrompt=null,Z()&&k(M,setTimeout(()=>{k(M,null),m(H)?k(h,"success"):k(h,"idle")},5e3),!0)):k(h,"idle")}))}catch(v){console.error("Error during install prompt:",v)}};ke(()=>(ze().then(i=>{k(H,i,!0)}),()=>{m(M)&&clearTimeout(m(M))})),xe(()=>{te(m(h)==="installing")});var se=qe(),de=J(se);{var ue=i=>{var v=Le(),Y=l(v);X(Y,{children:(a,s)=>{var d=x("install app");e(a,d)}});var G=$(Y,4);{var K=a=>{var s=We();e(a,s)},b=a=>{var s=p(),d=l(s);{var z=u=>{var A=p(),t=l(A);{var g=n=>{var S=Be();e(n,S)},P=n=>{var S=Oe();e(n,S)};o(t,n=>{ne()?n(g):n(P,!1)})}e(u,A)},w=u=>{var A=p(),t=l(A);{var g=n=>{var S=Fe();e(n,S)},P=n=>{var S=p(),ge=l(S);{var _e=B=>{var E=p(),N=l(E);{var Q=_=>{var O=He();e(_,O)},L=_=>{var O=p(),U=l(O);{var R=T=>{var he=De();e(T,he)};o(U,T=>{F()||T(R)},!0)}e(_,O)};o(N,_=>{oe()?_(L,!1):_(Q)})}e(B,E)},me=B=>{var E=p(),N=l(E);{var Q=L=>{var _=p(),O=l(_);{var U=R=>{var T=Ee();e(R,T)};o(O,R=>{!F()&&q()&&R(U)})}e(L,_)};o(N,L=>{Z()&&L(Q)},!0)}e(B,E)};o(ge,B=>{q()?B(me,!1):B(_e)},!0)}e(n,S)};o(t,n=>{ne()?n(g):n(P,!1)},!0)}e(u,A)};o(d,u=>{$e()?u(z):u(w,!1)},!0)}e(a,s)};o(G,a=>{m(H)||F()&&!q()&&oe()?a(K):a(b,!1)})}var C=$(G,2),y=J(C);{var D=a=>{j(a,{onClick:pe,fullWidth:!0,children:(s,d)=>{var z=x("install web app");e(s,z)},$$slots:{default:!0}})},I=a=>{var s=p(),d=l(s);{var z=w=>{j(w,{element:"a",target:"_blank",rel:"noopener noreferrer",href:`${window.location.origin}`,fullWidth:!0,children:(u,A)=>{var t=x("open app");e(u,t)},$$slots:{default:!0}})};o(d,w=>{(m(H)||F())&&w(z)},!0)}e(a,s)};o(y,a=>{q()?a(D):a(I,!1)})}var W=$(y,2);j(W,{onClick:re,fullWidth:!0,type:"secondary",children:(a,s)=>{var d=x("continue in browser");e(a,d)},$$slots:{default:!0}}),e(i,v)},fe=i=>{var v=p(),Y=l(v);{var G=b=>{var C=Re(),y=l(C);X(y,{children:(W,a)=>{var s=x("installing app...");e(W,s)}});var D=$(y,2),I=J(D);Ie(I,{}),e(b,C)},K=b=>{var C=p(),y=l(C);{var D=I=>{var W=je(),a=l(W);X(a,{children:(t,g)=>{var P=x("app installed successfully!");e(t,P)}});var s=$(a,2);{var d=t=>{var g=Te();e(t,g)};o(s,t=>{F()||t(d)})}var z=$(s,2),w=J(z);{var u=t=>{j(t,{element:"a",target:"_blank",rel:"noopener noreferrer",href:`${window.location.origin}`,fullWidth:!0,children:(g,P)=>{var n=x("open app");e(g,n)},$$slots:{default:!0}})};o(w,t=>{F()&&t(u)})}var A=$(w,2);j(A,{onClick:re,fullWidth:!0,type:"secondary",children:(t,g)=>{var P=x("continue in browser");e(t,P)},$$slots:{default:!0}}),e(I,W)};o(y,I=>{m(h)==="success"&&I(D)},!0)}e(b,C)};o(Y,b=>{m(h)==="installing"?b(G):b(K,!1)},!0)}e(i,v)};o(de,i=>{m(h)==="idle"?i(ue):i(fe,!1)})}e(r,se),Ce()}export{Ye as default};
