const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/D9xXDY_6.js","a/BAW-HnOs.css","a/DWeEU5eI.js","a/9q_jSmK4.js","a/BEGDcNQV.js","a/CjhdjYO4.css","a/Dxf4czsY.js","a/D5mnDQ30.css","a/BT5bDEC5.js","a/DgPIJwnn.css","a/mwYxHFzN.js","a/B_UsPGEu.css","a/DWUa9vjk.js","a/Cpa8lgv9.js","a/C0oCT9x_.js","a/j0KFa_-O.css","a/hu7yjlv8.css","a/RIDlryeo.js","a/d-4UT5Oh.js","a/BuEK7jxZ.js","a/EZ_l8VDb.css","a/B_Zcg-eh.css","a/HOTUjnfJ.css","a/CmldyFRg.js","a/Bs6Vrlio.css","a/BSUYNiSI.js","a/Bso39p1d.css","a/CZBw3cXV.js","a/CpyRRFtB.css","a/CCXDc9PN.js","a/By4Wek97.js","a/CebV7XwJ.css","a/DehMsFPW.js","a/DaxC3cdO.css","a/B4UsHhlc.js","a/Bib31qW-.css","a/b-yn0r5e.js","a/Br15UghP.css","a/Dqes_gp-.js","a/CTzb1Nvm.css","a/BW_TwkQc.js","a/1JBO3KHP.css"])))=>i.map(i=>d[i]);
var Bs=Object.defineProperty;var Ba=t=>{throw TypeError(t)};var Is=(t,e,n)=>e in t?Bs(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var gt=(t,e,n)=>Is(t,typeof e!="symbol"?e+"":e,n),Wr=(t,e,n)=>e.has(t)||Ba("Cannot "+n);var I=(t,e,n)=>(Wr(t,e,"read from private field"),n?n.call(t):e.get(t)),_e=(t,e,n)=>e.has(t)?Ba("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),oe=(t,e,n,r)=>(Wr(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Re=(t,e,n)=>(Wr(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const to=!1;var va=Array.isArray,Ms=Array.prototype.indexOf,ha=Array.from,Qr=Object.defineProperty,Ln=Object.getOwnPropertyDescriptor,no=Object.getOwnPropertyDescriptors,Os=Object.prototype,Rs=Array.prototype,ga=Object.getPrototypeOf,Ia=Object.isExtensible;const ye=()=>{};function Fs(t){return typeof t?.then=="function"}function zs(t){return t()}function $r(t){for(var e=0;e<t.length;e++)t[e]()}function ro(){var t,e,n=new Promise((r,o)=>{t=r,e=o});return{promise:n,resolve:t,reject:e}}function Hs(t,e,n=!1){return t===void 0?n?e():e:t}const Qe=2,_a=4,Nr=8,bn=16,Ht=32,Sn=64,pa=128,dt=256,Pr=512,Ye=1024,st=2048,tn=4096,wt=8192,kn=16384,ma=32768,Wn=65536,Ma=1<<17,js=1<<18,Yn=1<<19,ao=1<<20,ea=1<<21,Lr=1<<22,_n=1<<23,pn=Symbol("$state"),Us=Symbol("legacy props"),Vs=Symbol(""),Nn=new class extends Error{constructor(){super(...arguments);gt(this,"name","StaleReactionError");gt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function oo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function qs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ws(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ys(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ks(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Gs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Zs(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Xs(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Js(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Qs(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function $s(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Br=1,Ir=2,so=4,ei=8,ti=16,ni=1,ri=2,ai=4,oi=8,si=16,ii=1,li=2,Le=Symbol(),ci="http://www.w3.org/1999/xhtml";let ui=!1;function io(t){return t===this.v}function di(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function lo(t){return!di(t,this.v)}let Kn=!1,fi=!1;function vi(){Kn=!0}let Se=null;function $t(t){Se=t}function Ie(t){return co().get(t)}function Me(t,e){return co().set(t,e),e}function Q(t,e=!1,n){Se={p:Se,c:null,e:null,s:t,x:null,l:Kn&&!e?{s:null,u:null,$:[]}:null}}function $(t){var e=Se,n=e.e;if(n!==null){e.e=null;for(var r of n)Po(r)}return t!==void 0&&(e.x=t),Se=e.p,t??{}}function Gn(){return!Kn||Se!==null&&Se.l===null}function co(t){return Se===null&&oo(),Se.c??(Se.c=new Map(hi(Se)||void 0))}function hi(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let un=[];function uo(){var t=un;un=[],$r(t)}function en(t){if(un.length===0&&!Bn){var e=un;queueMicrotask(()=>{e===un&&uo()})}un.push(t)}function gi(){for(;un.length>0;)uo()}const _i=new WeakMap;function fo(t){var e=fe;if(e===null)return ue.f|=_n,t;if((e.f&ma)===0){if((e.f&pa)===0)throw!e.parent&&t instanceof Error&&vo(t),t;e.b.error(t)}else jn(t,e)}function jn(t,e){for(;e!==null;){if((e.f&pa)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&vo(t),t}function vo(t){const e=_i.get(t);e&&(Qr(t,"message",{value:e.message}),Qr(t,"stack",{value:e.stack}))}const pr=new Set;let Ce=null,br=null,pt=null,ta=new Set,Dt=[],Mr=null,na=!1,Bn=!1;var On,Rn,dn,cr,Fn,zn,fn,Hn,ur,dr,ft,ra,Sr,aa;const Ar=class Ar{constructor(){_e(this,ft);gt(this,"current",new Map);_e(this,On,new Map);_e(this,Rn,new Set);_e(this,dn,0);_e(this,cr,null);_e(this,Fn,[]);_e(this,zn,[]);_e(this,fn,[]);_e(this,Hn,[]);_e(this,ur,[]);_e(this,dr,[]);gt(this,"skipped_effects",new Set)}process(e){Dt=[],br=null,this.apply();for(const s of e)Re(this,ft,ra).call(this,s);if(I(this,dn)===0){var n=pt;Re(this,ft,aa).call(this);var r=I(this,zn),o=I(this,fn);oe(this,zn,[]),oe(this,fn,[]),oe(this,Hn,[]),br=this,Ce=null,pt=n,Oa(r),Oa(o),br=null,I(this,cr)?.resolve()}else Re(this,ft,Sr).call(this,I(this,zn)),Re(this,ft,Sr).call(this,I(this,fn)),Re(this,ft,Sr).call(this,I(this,Hn));pt=null;for(const s of I(this,Fn))ir(s);oe(this,Fn,[])}capture(e,n){I(this,On).has(e)||I(this,On).set(e,n),this.current.set(e,e.v),pt?.set(e,e.v)}activate(){Ce=this}deactivate(){Ce=null,pt=null}flush(){if(Dt.length>0){if(this.activate(),go(),Ce!==null&&Ce!==this)return}else I(this,dn)===0&&Re(this,ft,aa).call(this);this.deactivate();for(const e of ta)if(ta.delete(e),e(),Ce!==null)break}increment(){oe(this,dn,I(this,dn)+1)}decrement(){oe(this,dn,I(this,dn)-1);for(const e of I(this,ur))Xe(e,st),yn(e);for(const e of I(this,dr))Xe(e,tn),yn(e);this.flush()}add_callback(e){I(this,Rn).add(e)}settled(){return(I(this,cr)??oe(this,cr,ro())).promise}static ensure(){if(Ce===null){const e=Ce=new Ar;pr.add(Ce),Bn||Ar.enqueue(()=>{Ce===e&&e.flush()})}return Ce}static enqueue(e){en(e)}apply(){}};On=new WeakMap,Rn=new WeakMap,dn=new WeakMap,cr=new WeakMap,Fn=new WeakMap,zn=new WeakMap,fn=new WeakMap,Hn=new WeakMap,ur=new WeakMap,dr=new WeakMap,ft=new WeakSet,ra=function(e){e.f^=Ye;for(var n=e.first;n!==null;){var r=n.f,o=(r&(Ht|Sn))!==0,s=o&&(r&Ye)!==0,i=s||(r&wt)!==0||this.skipped_effects.has(n);if(!i&&n.fn!==null){o?n.f^=Ye:(r&_a)!==0?I(this,fn).push(n):(r&Ye)===0&&((r&Lr)!==0&&n.b?.is_pending()?I(this,Fn).push(n):zr(n)&&((n.f&bn)!==0&&I(this,Hn).push(n),ir(n)));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}},Sr=function(e){for(const n of e)((n.f&st)!==0?I(this,ur):I(this,dr)).push(n),Xe(n,Ye);e.length=0},aa=function(){var e;for(const n of I(this,Rn))n();if(I(this,Rn).clear(),pr.size>1){I(this,On).clear();let n=!0;for(const r of pr){if(r===this){n=!1;continue}const o=[];for(const[i,l]of this.current){if(r.current.has(i))if(n&&l!==r.current.get(i))r.current.set(i,l);else continue;o.push(i)}if(o.length===0)continue;const s=[...r.current.keys()].filter(i=>!this.current.has(i));if(s.length>0){for(const i of o)_o(i,s);if(Dt.length>0){Ce=r,r.apply();for(const i of Dt)Re(e=r,ft,ra).call(e,i);Dt=[],r.deactivate()}}}Ce=null}pr.delete(this)};let Mt=Ar;function ho(t){var e=Bn;Bn=!0;try{for(var n;;){if(gi(),Dt.length===0&&(Ce?.flush(),Dt.length===0))return Mr=null,n;go()}}finally{Bn=e}}function go(){var t=Mn;na=!0;try{var e=0;for(za(!0);Dt.length>0;){var n=Mt.ensure();if(e++>1e3){var r,o;pi()}n.process(Dt),Jt.clear()}}finally{na=!1,za(t),Mr=null}}function pi(){try{Gs()}catch(t){jn(t,Mr)}}let ln=null;function Oa(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(kn|wt))===0&&zr(r)&&(ln=[],ir(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Do(r):r.fn=null),ln?.length>0)){Jt.clear();for(const o of ln)ir(o);ln=[]}}ln=null}}function _o(t,e){if(t.reactions!==null)for(const n of t.reactions){const r=n.f;(r&Qe)!==0?_o(n,e):(r&(Lr|bn))!==0&&po(n,e)&&(Xe(n,st),yn(n))}}function po(t,e){if(t.deps!==null){for(const n of t.deps)if(e.includes(n)||(n.f&Qe)!==0&&po(n,e))return!0}return!1}function yn(t){for(var e=Mr=t;e.parent!==null;){e=e.parent;var n=e.f;if(na&&e===fe&&(n&bn)!==0)return;if((n&(Sn|Ht))!==0){if((n&Ye)===0)return;e.f^=Ye}}Dt.push(e)}function mi(t){let e=0,n=zt(0),r;return()=>{Ii()&&(a(n),Fr(()=>(e===0&&(r=ht(()=>t(()=>ar(n)))),e+=1,()=>{en(()=>{e-=1,e===0&&(r?.(),r=void 0,ar(n))})})))}}var wi=Wn|Yn|pa;function yi(t,e,n){new bi(t,e,n)}var _t,ct,fa,Pt,vn,xt,ut,tt,At,Kt,hn,Gt,gn,Zt,Dr,Tr,Je,Si,ki,kr,Cr,oa;class bi{constructor(e,n,r){_e(this,Je);gt(this,"parent");_e(this,_t,!1);_e(this,ct);_e(this,fa,null);_e(this,Pt);_e(this,vn);_e(this,xt);_e(this,ut,null);_e(this,tt,null);_e(this,At,null);_e(this,Kt,null);_e(this,hn,0);_e(this,Gt,0);_e(this,gn,!1);_e(this,Zt,null);_e(this,Dr,()=>{I(this,Zt)&&Ot(I(this,Zt),I(this,hn))});_e(this,Tr,mi(()=>(oe(this,Zt,zt(I(this,hn))),()=>{oe(this,Zt,null)})));oe(this,ct,e),oe(this,Pt,n),oe(this,vn,r),this.parent=fe.b,oe(this,_t,!!I(this,Pt).pending),oe(this,xt,Zn(()=>{fe.b=this;{try{oe(this,ut,We(()=>r(I(this,ct))))}catch(o){this.error(o)}I(this,Gt)>0?Re(this,Je,Cr).call(this):oe(this,_t,!1)}},wi))}is_pending(){return I(this,_t)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!I(this,Pt).pending}update_pending_count(e){Re(this,Je,oa).call(this,e),oe(this,hn,I(this,hn)+e),ta.add(I(this,Dr))}get_effect_pending(){return I(this,Tr).call(this),a(I(this,Zt))}error(e){var n=I(this,Pt).onerror;let r=I(this,Pt).failed;if(I(this,gn)||!n&&!r)throw e;I(this,ut)&&(ot(I(this,ut)),oe(this,ut,null)),I(this,tt)&&(ot(I(this,tt)),oe(this,tt,null)),I(this,At)&&(ot(I(this,At)),oe(this,At,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&$s(),Mt.ensure(),oe(this,hn,0),I(this,At)!==null&&Tt(I(this,At),()=>{oe(this,At,null)}),oe(this,_t,this.has_pending_snippet()),oe(this,ut,Re(this,Je,kr).call(this,()=>(oe(this,gn,!1),We(()=>I(this,vn).call(this,I(this,ct)))))),I(this,Gt)>0?Re(this,Je,Cr).call(this):oe(this,_t,!1)};var l=ue;try{Ke(null),s=!0,n?.(e,i),s=!1}catch(c){jn(c,I(this,xt)&&I(this,xt).parent)}finally{Ke(l)}r&&en(()=>{oe(this,At,Re(this,Je,kr).call(this,()=>{oe(this,gn,!0);try{return We(()=>{r(I(this,ct),()=>e,()=>i)})}catch(c){return jn(c,I(this,xt).parent),null}finally{oe(this,gn,!1)}}))})}}_t=new WeakMap,ct=new WeakMap,fa=new WeakMap,Pt=new WeakMap,vn=new WeakMap,xt=new WeakMap,ut=new WeakMap,tt=new WeakMap,At=new WeakMap,Kt=new WeakMap,hn=new WeakMap,Gt=new WeakMap,gn=new WeakMap,Zt=new WeakMap,Dr=new WeakMap,Tr=new WeakMap,Je=new WeakSet,Si=function(){try{oe(this,ut,We(()=>I(this,vn).call(this,I(this,ct))))}catch(e){this.error(e)}oe(this,_t,!1)},ki=function(){const e=I(this,Pt).pending;e&&(oe(this,tt,We(()=>e(I(this,ct)))),Mt.enqueue(()=>{oe(this,ut,Re(this,Je,kr).call(this,()=>(Mt.ensure(),We(()=>I(this,vn).call(this,I(this,ct)))))),I(this,Gt)>0?Re(this,Je,Cr).call(this):(Tt(I(this,tt),()=>{oe(this,tt,null)}),oe(this,_t,!1))}))},kr=function(e){var n=fe,r=ue,o=Se;vt(I(this,xt)),Ke(I(this,xt)),$t(I(this,xt).ctx);try{return e()}catch(s){return fo(s),null}finally{vt(n),Ke(r),$t(o)}},Cr=function(){const e=I(this,Pt).pending;I(this,ut)!==null&&(oe(this,Kt,document.createDocumentFragment()),Ci(I(this,ut),I(this,Kt))),I(this,tt)===null&&oe(this,tt,We(()=>e(I(this,ct))))},oa=function(e){var n;if(!this.has_pending_snippet()){this.parent&&Re(n=this.parent,Je,oa).call(n,e);return}oe(this,Gt,I(this,Gt)+e),I(this,Gt)===0&&(oe(this,_t,!1),I(this,tt)&&Tt(I(this,tt),()=>{oe(this,tt,null)}),I(this,Kt)&&(I(this,ct).before(I(this,Kt)),oe(this,Kt,null)),en(()=>{Mt.ensure().flush()}))};function Ci(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var o=n===r?null:vr(n);e.append(n),n=o}}function Ei(t,e,n){const r=Gn()?fr:Or;if(e.length===0){n(t.map(r));return}var o=Ce,s=fe,i=Pi();Promise.all(e.map(l=>xi(l))).then(l=>{i();try{n([...t.map(r),...l])}catch(c){(s.f&kn)===0&&jn(c,s)}o?.deactivate(),sa()}).catch(l=>{jn(l,s)})}function Pi(){var t=fe,e=ue,n=Se,r=Ce;return function(){vt(t),Ke(e),$t(n),r?.activate()}}function sa(){vt(null),Ke(null),$t(null)}function fr(t){var e=Qe|st,n=ue!==null&&(ue.f&Qe)!==0?ue:null;return fe===null||n!==null&&(n.f&dt)!==0?e|=dt:fe.f|=Yn,{ctx:Se,deps:null,effects:null,equals:io,f:e,fn:t,reactions:null,rv:0,v:Le,wv:0,parent:n??fe,ac:null}}function xi(t,e){let n=fe;n===null&&qs();var r=n.b,o=void 0,s=zt(Le),i=!ue,l=new Map;return Fi(()=>{var c=ro();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(sa)}catch(h){c.reject(h),sa()}var u=Ce,d=r.is_pending();i&&(r.update_pending_count(1),d||(u.increment(),l.get(u)?.reject(Nn),l.delete(u),l.set(u,c)));const f=(h,g=void 0)=>{if(d||u.activate(),g)g!==Nn&&(s.f|=_n,Ot(s,g));else{(s.f&_n)!==0&&(s.f^=_n),Ot(s,h);for(const[v,_]of l){if(l.delete(v),v===u)break;_.reject(Nn)}}i&&(r.update_pending_count(-1),d||u.decrement())};c.promise.then(f,h=>f(null,h||"unknown"))}),Eo(()=>{for(const c of l.values())c.reject(Nn)}),new Promise(c=>{function u(d){function f(){d===o?c(s):u(o)}d.then(f,f)}u(o)})}function O(t){const e=fr(t);return Lo(e),e}function Or(t){const e=fr(t);return e.equals=lo,e}function mo(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)ot(e[n])}}function Ai(t){for(var e=t.parent;e!==null;){if((e.f&Qe)===0)return e;e=e.parent}return null}function wa(t){var e,n=fe;vt(Ai(t));try{mo(t),e=Oo(t)}finally{vt(n)}return e}function wo(t){var e=wa(t);if(t.equals(e)||(t.v=e,t.wv=Io()),!En)if(pt!==null)pt.set(t,t.v);else{var n=(Xt||(t.f&dt)!==0)&&t.deps!==null?tn:Ye;Xe(t,n)}}const Jt=new Map;function zt(t,e){var n={f:0,v:t,reactions:null,equals:io,rv:0,wv:0};return n}function z(t,e){const n=zt(t);return Lo(n),n}function ia(t,e=!1,n=!0){var o;const r=zt(t);return e||(r.equals=lo),Kn&&n&&Se!==null&&Se.l!==null&&((o=Se.l).s??(o.s=[])).push(r),r}function m(t,e,n=!1){ue!==null&&(!mt||(ue.f&Ma)!==0)&&Gn()&&(ue.f&(Qe|bn|Lr|Ma))!==0&&!Rt?.includes(t)&&Qs();let r=n?Be(e):e;return Ot(t,r)}function Ot(t,e){if(!t.equals(e)){var n=t.v;En?Jt.set(t,e):Jt.set(t,n),t.v=e;var r=Mt.ensure();r.capture(t,n),(t.f&Qe)!==0&&((t.f&st)!==0&&wa(t),Xe(t,(t.f&dt)===0?Ye:tn)),t.wv=Io(),yo(t,st),Gn()&&fe!==null&&(fe.f&Ye)!==0&&(fe.f&(Ht|Sn))===0&&(lt===null?ji([t]):lt.push(t))}return e}function ar(t){m(t,t.v+1)}function yo(t,e){var n=t.reactions;if(n!==null)for(var r=Gn(),o=n.length,s=0;s<o;s++){var i=n[s],l=i.f;if(!(!r&&i===fe)){var c=(l&st)===0;c&&Xe(i,e),(l&Qe)!==0?yo(i,tn):c&&((l&bn)!==0&&ln!==null&&ln.push(i),yn(i))}}}function Be(t){if(typeof t!="object"||t===null||pn in t)return t;const e=ga(t);if(e!==Os&&e!==Rs)return t;var n=new Map,r=va(t),o=z(0),s=mn,i=l=>{if(mn===s)return l();var c=ue,u=mn;Ke(null),ja(s);var d=l();return Ke(c),ja(u),d};return r&&n.set("length",z(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Xs();var d=n.get(c);return d===void 0?d=i(()=>{var f=z(u.value);return n.set(c,f),f}):m(d,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const d=i(()=>z(Le));n.set(c,d),ar(o)}}else m(u,Le),ar(o);return!0},get(l,c,u){if(c===pn)return t;var d=n.get(c),f=c in l;if(d===void 0&&(!f||Ln(l,c)?.writable)&&(d=i(()=>{var g=Be(f?l[c]:Le),v=z(g);return v}),n.set(c,d)),d!==void 0){var h=a(d);return h===Le?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=n.get(c);d&&(u.value=a(d))}else if(u===void 0){var f=n.get(c),h=f?.v;if(f!==void 0&&h!==Le)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){if(c===pn)return!0;var u=n.get(c),d=u!==void 0&&u.v!==Le||Reflect.has(l,c);if(u!==void 0||fe!==null&&(!d||Ln(l,c)?.writable)){u===void 0&&(u=i(()=>{var h=d?Be(l[c]):Le,g=z(h);return g}),n.set(c,u));var f=a(u);if(f===Le)return!1}return d},set(l,c,u,d){var f=n.get(c),h=c in l;if(r&&c==="length")for(var g=u;g<f.v;g+=1){var v=n.get(g+"");v!==void 0?m(v,Le):g in l&&(v=i(()=>z(Le)),n.set(g+"",v))}if(f===void 0)(!h||Ln(l,c)?.writable)&&(f=i(()=>z(void 0)),m(f,Be(u)),n.set(c,f));else{h=f.v!==Le;var _=i(()=>Be(u));m(f,_)}var w=Reflect.getOwnPropertyDescriptor(l,c);if(w?.set&&w.set.call(d,u),!h){if(r&&typeof c=="string"){var k=n.get("length"),E=Number(c);Number.isInteger(E)&&E>=k.v&&m(k,E+1)}ar(o)}return!0},ownKeys(l){a(o);var c=Reflect.ownKeys(l).filter(f=>{var h=n.get(f);return h===void 0||h.v!==Le});for(var[u,d]of n)d.v!==Le&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Js()}})}var Ra,bo,So,ko;function Di(){if(Ra===void 0){Ra=window,bo=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;So=Ln(e,"firstChild").get,ko=Ln(e,"nextSibling").get,Ia(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ia(n)&&(n.__t=void 0)}}function Cn(t=""){return document.createTextNode(t)}function Un(t){return So.call(t)}function vr(t){return ko.call(t)}function A(t,e){return Un(t)}function B(t,e=!1){{var n=Un(t);return n instanceof Comment&&n.data===""?vr(n):n}}function j(t,e=1,n=!1){let r=t;for(;e--;)r=vr(r);return r}function Ti(t){t.textContent=""}function ya(){return!1}let Fa=!1;function Ni(){Fa||(Fa=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Rr(t){var e=ue,n=fe;Ke(null),vt(null);try{return t()}finally{Ke(e),vt(n)}}function Li(t,e,n,r=n){t.addEventListener(e,()=>Rr(n));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),Ni()}function Co(t){fe===null&&ue===null&&Ks(),ue!==null&&(ue.f&dt)!==0&&fe===null&&Ys(),En&&Ws()}function Bi(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Bt(t,e,n,r=!0){var o=fe;o!==null&&(o.f&wt)!==0&&(t|=wt);var s={ctx:Se,deps:null,nodes_start:null,nodes_end:null,f:t|st,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{ir(s),s.f|=ma}catch(c){throw ot(s),c}else e!==null&&yn(s);if(r){var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Yn)===0&&(i=i.first),i!==null&&(i.parent=o,o!==null&&Bi(i,o),ue!==null&&(ue.f&Qe)!==0&&(t&Sn)===0)){var l=ue;(l.effects??(l.effects=[])).push(i)}}return s}function Ii(){return ue!==null&&!mt}function Eo(t){const e=Bt(Nr,null,!1);return Xe(e,Ye),e.teardown=t,e}function Pe(t){Co();var e=fe.f,n=!ue&&(e&Ht)!==0&&(e&ma)===0;if(n){var r=Se;(r.e??(r.e=[])).push(t)}else return Po(t)}function Po(t){return Bt(_a|ao,t,!1)}function Mi(t){return Co(),Bt(Nr|ao,t,!0)}function Oi(t){Mt.ensure();const e=Bt(Sn|Yn,t,!0);return(n={})=>new Promise(r=>{n.outro?Tt(e,()=>{ot(e),r(void 0)}):(ot(e),r(void 0))})}function Ri(t){return Bt(_a,t,!1)}function Fi(t){return Bt(Lr|Yn,t,!0)}function Fr(t,e=0){return Bt(Nr|e,t,!0)}function de(t,e=[],n=[]){Ei(e,n,r=>{Bt(Nr,()=>t(...r.map(a)),!0)})}function Zn(t,e=0){var n=Bt(bn|e,t,!0);return n}function We(t,e=!0){return Bt(Ht|Yn,t,!0,e)}function xo(t){var e=t.teardown;if(e!==null){const n=En,r=ue;Ha(!0),Ke(null);try{e.call(null)}finally{Ha(n),Ke(r)}}}function Ao(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const o=n.ac;o!==null&&Rr(()=>{o.abort(Nn)});var r=n.next;(n.f&Sn)!==0?n.parent=null:ot(n,e),n=r}}function zi(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Ht)===0&&ot(e),e=n}}function ot(t,e=!0){var n=!1;(e||(t.f&js)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(Hi(t.nodes_start,t.nodes_end),n=!0),Ao(t,e&&!n),xr(t,0),Xe(t,kn);var r=t.transitions;if(r!==null)for(const s of r)s.stop();xo(t);var o=t.parent;o!==null&&o.first!==null&&Do(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function Hi(t,e){for(;t!==null;){var n=t===e?null:vr(t);t.remove(),t=n}}function Do(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Tt(t,e){var n=[];ba(t,n,!0),To(n,()=>{ot(t),e&&e()})}function To(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var o of t)o.out(r)}else e()}function ba(t,e,n){if((t.f&wt)===0){if(t.f^=wt,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var o=r.next,s=(r.f&Wn)!==0||(r.f&Ht)!==0;ba(r,e,s?n:!1),r=o}}}function In(t){No(t,!0)}function No(t,e){if((t.f&wt)!==0){t.f^=wt,(t.f&Ye)===0&&(Xe(t,st),yn(t));for(var n=t.first;n!==null;){var r=n.next,o=(n.f&Wn)!==0||(n.f&Ht)!==0;No(n,o?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let Mn=!1;function za(t){Mn=t}let En=!1;function Ha(t){En=t}let ue=null,mt=!1;function Ke(t){ue=t}let fe=null;function vt(t){fe=t}let Rt=null;function Lo(t){ue!==null&&(Rt===null?Rt=[t]:Rt.push(t))}let Ze=null,at=0,lt=null;function ji(t){lt=t}let Bo=1,sr=0,mn=sr;function ja(t){mn=t}let Xt=!1;function Io(){return++Bo}function zr(t){var e=t.f;if((e&st)!==0)return!0;if((e&tn)!==0){var n=t.deps,r=(e&dt)!==0;if(n!==null){var o,s,i=(e&Pr)!==0,l=r&&fe!==null&&!Xt,c=n.length;if((i||l)&&(fe===null||(fe.f&kn)===0)){var u=t,d=u.parent;for(o=0;o<c;o++)s=n[o],(i||!s?.reactions?.includes(u))&&(s.reactions??(s.reactions=[])).push(u);i&&(u.f^=Pr),l&&d!==null&&(d.f&dt)===0&&(u.f^=dt)}for(o=0;o<c;o++)if(s=n[o],zr(s)&&wo(s),s.wv>t.wv)return!0}(!r||fe!==null&&!Xt)&&Xe(t,Ye)}return!1}function Mo(t,e,n=!0){var r=t.reactions;if(r!==null&&!Rt?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Qe)!==0?Mo(s,e,!1):e===s&&(n?Xe(s,st):(s.f&Ye)!==0&&Xe(s,tn),yn(s))}}function Oo(t){var _;var e=Ze,n=at,r=lt,o=ue,s=Xt,i=Rt,l=Se,c=mt,u=mn,d=t.f;Ze=null,at=0,lt=null,Xt=(d&dt)!==0&&(mt||!Mn||ue===null),ue=(d&(Ht|Sn))===0?t:null,Rt=null,$t(t.ctx),mt=!1,mn=++sr,t.ac!==null&&(Rr(()=>{t.ac.abort(Nn)}),t.ac=null);try{t.f|=ea;var f=t.fn,h=f(),g=t.deps;if(Ze!==null){var v;if(xr(t,at),g!==null&&at>0)for(g.length=at+Ze.length,v=0;v<Ze.length;v++)g[at+v]=Ze[v];else t.deps=g=Ze;if(!Xt||(d&Qe)!==0&&t.reactions!==null)for(v=at;v<g.length;v++)((_=g[v]).reactions??(_.reactions=[])).push(t)}else g!==null&&at<g.length&&(xr(t,at),g.length=at);if(Gn()&&lt!==null&&!mt&&g!==null&&(t.f&(Qe|tn|st))===0)for(v=0;v<lt.length;v++)Mo(lt[v],t);return o!==null&&o!==t&&(sr++,lt!==null&&(r===null?r=lt:r.push(...lt))),(t.f&_n)!==0&&(t.f^=_n),h}catch(w){return fo(w)}finally{t.f^=ea,Ze=e,at=n,lt=r,ue=o,Xt=s,Rt=i,$t(l),mt=c,mn=u}}function Ui(t,e){let n=e.reactions;if(n!==null){var r=Ms.call(n,t);if(r!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(e.f&Qe)!==0&&(Ze===null||!Ze.includes(e))&&(Xe(e,tn),(e.f&(dt|Pr))===0&&(e.f^=Pr),mo(e),xr(e,0))}function xr(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Ui(t,n[r])}function ir(t){var e=t.f;if((e&kn)===0){Xe(t,Ye);var n=fe,r=Mn;fe=t,Mn=!0;try{(e&bn)!==0?zi(t):Ao(t),xo(t);var o=Oo(t);t.teardown=typeof o=="function"?o:null,t.wv=Bo;var s;to&&fi&&(t.f&st)!==0&&t.deps}finally{Mn=r,fe=n}}}async function Ro(){await Promise.resolve(),ho()}function a(t){var e=t.f,n=(e&Qe)!==0;if(ue!==null&&!mt){var r=fe!==null&&(fe.f&kn)!==0;if(!r&&!Rt?.includes(t)){var o=ue.deps;if((ue.f&ea)!==0)t.rv<sr&&(t.rv=sr,Ze===null&&o!==null&&o[at]===t?at++:Ze===null?Ze=[t]:(!Xt||!Ze.includes(t))&&Ze.push(t));else{(ue.deps??(ue.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[ue]:s.includes(ue)||s.push(ue)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&dt)===0&&(i.f^=dt)}if(En){if(Jt.has(t))return Jt.get(t);if(n){i=t;var c=i.v;return((i.f&Ye)===0&&i.reactions!==null||Fo(i))&&(c=wa(i)),Jt.set(i,c),c}}else if(n){if(i=t,pt?.has(i))return pt.get(i);zr(i)&&wo(i)}if(pt?.has(t))return pt.get(t);if((t.f&_n)!==0)throw t.v;return t.v}function Fo(t){if(t.v===Le)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Jt.has(e)||(e.f&Qe)!==0&&Fo(e))return!0;return!1}function ht(t){var e=mt;try{return mt=!0,t()}finally{mt=e}}const Vi=-7169;function Xe(t,e){t.f=t.f&Vi|e}function qi(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(pn in t)la(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&pn in n&&la(n)}}}function la(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{la(t[r],e)}catch{}const n=ga(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=no(n);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Wi=["touchstart","touchmove"];function Yi(t){return Wi.includes(t)}const zo=new Set,ca=new Set;function Ki(t,e,n,r={}){function o(s){if(r.capture||er.call(e,s),!s.cancelBubble)return Rr(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?en(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function Sa(t,e,n,r,o){var s={capture:r,passive:o},i=Ki(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Eo(()=>{e.removeEventListener(t,i,s)})}function it(t){for(var e=0;e<t.length;e++)zo.add(t[e]);for(var n of ca)n(t)}let Ua=null;function er(t){var e=this,n=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;Ua=t;var i=0,l=Ua===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){Qr(t,"currentTarget",{configurable:!0,get(){return s||n}});var d=ue,f=fe;Ke(null),vt(null);try{for(var h,g=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+r];if(_!=null&&(!s.disabled||t.target===s))if(va(_)){var[w,...k]=_;w.apply(s,[t,...k])}else _.call(s,t)}catch(E){h?g.push(E):h=E}if(t.cancelBubble||v===e||v===null)break;s=v}if(h){for(let E of g)queueMicrotask(()=>{throw E});throw h}}finally{t.__root=e,delete t.currentTarget,Ke(d),vt(f)}}}function Ho(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function lr(t,e){var n=fe;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function U(t,e){var n=(e&ii)!==0,r=(e&li)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=Ho(s?t:"<!>"+t),n||(o=Un(o)));var i=r||bo?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=Un(i),c=i.lastChild;lr(l,c)}else lr(i,i);return i}}function Gi(t,e,n="svg"){var r=!t.startsWith("<!>"),o=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=Ho(o),l=Un(i);s=Un(l)}var c=s.cloneNode(!0);return lr(c,c),c}}function Zi(t,e){return Gi(t,e,"svg")}function De(t=""){{var e=Cn(t+"");return lr(e,e),e}}function V(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Cn();return t.append(e,n),lr(e,n),t}function p(t,e){t!==null&&t.before(e)}function xd(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function Qt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Xi(t,e){return Ji(t,e)}const Tn=new Map;function Ji(t,{target:e,anchor:n,props:r={},events:o,context:s,intro:i=!0}){Di();var l=new Set,c=f=>{for(var h=0;h<f.length;h++){var g=f[h];if(!l.has(g)){l.add(g);var v=Yi(g);e.addEventListener(g,er,{passive:v});var _=Tn.get(g);_===void 0?(document.addEventListener(g,er,{passive:v}),Tn.set(g,1)):Tn.set(g,_+1)}}};c(ha(zo)),ca.add(c);var u=void 0,d=Oi(()=>{var f=n??e.appendChild(Cn());return yi(f,{pending:()=>{}},h=>{if(s){Q({});var g=Se;g.c=s}o&&(r.$$events=o),u=t(h,r)||{},s&&$()}),()=>{for(var h of l){e.removeEventListener(h,er);var g=Tn.get(h);--g===0?(document.removeEventListener(h,er),Tn.delete(h)):Tn.set(h,g)}ca.delete(c),f!==n&&f.parentNode?.removeChild(f)}});return Qi.set(u,d),u}let Qi=new WeakMap;const Yr=0,mr=1,Kr=2;function jo(t,e,n,r,o){var s=t,i=Gn(),l=Se,c=Le,u,d,f,h=i?zt(void 0):ia(void 0,!1,!1),g=i?zt(void 0):ia(void 0,!1,!1),v=!1;function _(k,E){v=!0,E&&(vt(w),Ke(w),$t(l));try{k===Yr&&n&&(u?In(u):u=We(()=>n(s))),k===mr&&r&&(d?In(d):d=We(()=>r(s,h))),k===Kr&&o&&(f?In(f):f=We(()=>o(s,g))),k!==Yr&&u&&Tt(u,()=>u=null),k!==mr&&d&&Tt(d,()=>d=null),k!==Kr&&f&&Tt(f,()=>f=null)}finally{E&&($t(null),Ke(null),vt(null),Bn||ho())}}var w=Zn(()=>{if(c!==(c=e())){if(Fs(c)){var k=c;v=!1,k.then(E=>{k===c&&(Ot(h,E),_(mr,!0))},E=>{if(k===c&&(Ot(g,E),_(Kr,!0),!o))throw g.v}),en(()=>{v||_(Yr,!0)})}else Ot(h,c),_(mr,!1);return()=>c=Le}})}function W(t,e,n=!1){var r=t,o=null,s=null,i=Le,l=n?Wn:0,c=!1;const u=(g,v=!0)=>{c=!0,h(v,g)};var d=null;function f(){d!==null&&(d.lastChild.remove(),r.before(d),d=null);var g=i?o:s,v=i?s:o;g&&In(g),v&&Tt(v,()=>{i?s=null:o=null})}const h=(g,v)=>{if(i!==(i=g)){var _=ya(),w=r;if(_&&(d=document.createDocumentFragment(),d.append(w=Cn())),i?o??(o=v&&We(()=>v(w))):s??(s=v&&We(()=>v(w))),_){var k=Ce,E=i?o:s,y=i?s:o;E&&k.skipped_effects.delete(E),y&&k.skipped_effects.add(y),k.add_callback(f)}else f()}};Zn(()=>{c=!1,e(u),c||h(null,null)},l)}function be(t,e){Fr(()=>{var n=e();for(var r in n){var o=n[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function $i(t,e,n){for(var r=t.items,o=[],s=e.length,i=0;i<s;i++)ba(e[i].e,o,!0);var l=s>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;Ti(c),c.append(n),r.clear(),Et(t,e[0].prev,e[s-1].next)}To(o,()=>{for(var u=0;u<s;u++){var d=e[u];l||(r.delete(d.k),Et(t,d.prev,d.next)),ot(d.e,!l)}})}function Hr(t,e,n,r,o,s=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&so)!==0;if(c){var u=t;i=u.appendChild(Cn())}var d=null,f=!1,h=new Map,g=Or(()=>{var k=n();return va(k)?k:k==null?[]:ha(k)}),v,_;function w(){el(_,v,l,h,i,o,e,r,n),s!==null&&(v.length===0?d?In(d):d=We(()=>s(i)):d!==null&&Tt(d,()=>{d=null}))}Zn(()=>{_??(_=fe),v=a(g);var k=v.length;if(!(f&&k===0)){f=k===0;var E,y,N,L;if(ya()){var P=new Set,S=Ce;for(y=0;y<k;y+=1){N=v[y],L=r(N,y);var x=l.items.get(L)??h.get(L);x?(e&(Br|Ir))!==0&&Uo(x,N,y,e):(E=Vo(null,l,null,null,N,L,y,o,e,n,!0),h.set(L,E)),P.add(L)}for(const[T,Z]of l.items)P.has(T)||S.skipped_effects.add(Z.e);S.add_callback(w)}else w();a(g)}})}function el(t,e,n,r,o,s,i,l,c){var u=(i&ei)!==0,d=(i&(Br|Ir))!==0,f=e.length,h=n.items,g=n.first,v=g,_,w=null,k,E=[],y=[],N,L,P,S;if(u)for(S=0;S<f;S+=1)N=e[S],L=l(N,S),P=h.get(L),P!==void 0&&(P.a?.measure(),(k??(k=new Set)).add(P));for(S=0;S<f;S+=1){if(N=e[S],L=l(N,S),P=h.get(L),P===void 0){var x=r.get(L);if(x!==void 0){r.delete(L),h.set(L,x);var T=w?w.next:v;Et(n,w,x),Et(n,x,T),Gr(x,T,o),w=x}else{var Z=v?v.e.nodes_start:o;w=Vo(Z,n,w,w===null?n.first:w.next,N,L,S,s,i,c)}h.set(L,w),E=[],y=[],v=w.next;continue}if(d&&Uo(P,N,S,i),(P.e.f&wt)!==0&&(In(P.e),u&&(P.a?.unfix(),(k??(k=new Set)).delete(P))),P!==v){if(_!==void 0&&_.has(P)){if(E.length<y.length){var ce=y[0],se;w=ce.prev;var ne=E[0],Y=E[E.length-1];for(se=0;se<E.length;se+=1)Gr(E[se],ce,o);for(se=0;se<y.length;se+=1)_.delete(y[se]);Et(n,ne.prev,Y.next),Et(n,w,ne),Et(n,Y,ce),v=ce,w=Y,S-=1,E=[],y=[]}else _.delete(P),Gr(P,v,o),Et(n,P.prev,P.next),Et(n,P,w===null?n.first:w.next),Et(n,w,P),w=P;continue}for(E=[],y=[];v!==null&&v.k!==L;)(v.e.f&wt)===0&&(_??(_=new Set)).add(v),y.push(v),v=v.next;if(v===null)continue;P=v}E.push(P),w=P,v=P.next}if(v!==null||_!==void 0){for(var X=_===void 0?[]:ha(_);v!==null;)(v.e.f&wt)===0&&X.push(v),v=v.next;var re=X.length;if(re>0){var H=(i&so)!==0&&f===0?o:null;if(u){for(S=0;S<re;S+=1)X[S].a?.measure();for(S=0;S<re;S+=1)X[S].a?.fix()}$i(n,X,H)}}u&&en(()=>{if(k!==void 0)for(P of k)P.a?.apply()}),t.first=n.first&&n.first.e,t.last=w&&w.e;for(var te of r.values())ot(te.e);r.clear()}function Uo(t,e,n,r){(r&Br)!==0&&Ot(t.v,e),(r&Ir)!==0?Ot(t.i,n):t.i=n}function Vo(t,e,n,r,o,s,i,l,c,u,d){var f=(c&Br)!==0,h=(c&ti)===0,g=f?h?ia(o,!1,!1):zt(o):o,v=(c&Ir)===0?i:zt(i),_={i:v,v:g,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var w=document.createDocumentFragment();w.append(t=Cn())}return _.e=We(()=>l(t,g,v,u),ui),_.e.prev=n&&n.e,_.e.next=r&&r.e,n===null?d||(e.first=_):(n.next=_,n.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function Gr(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var i=vr(s);o.before(s),s=i}}function Et(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function he(t,e,...n){var r=t,o=ye,s;Zn(()=>{o!==(o=e())&&(s&&(ot(s),s=null),s=We(()=>o(r,...n)))},Wn)}function qo(t,e,n){var r=t,o,s,i=null,l=null;function c(){s&&(Tt(s),s=null),i&&(i.lastChild.remove(),r.before(i),i=null),s=l,l=null}Zn(()=>{if(o!==(o=e())){var u=ya();if(o){var d=r;u&&(i=document.createDocumentFragment(),i.append(d=Cn()),s&&Ce.skipped_effects.add(s)),l=We(()=>n(d,o))}u?Ce.add_callback(c):c()}},Wn)}function Wo(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=Wo(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function tl(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=Wo(t))&&(r&&(r+=" "),r+=e);return r}function pe(t){return typeof t=="object"?tl(t):t??""}const Va=[...` 	
\r\f \v\uFEFF`];function nl(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||Va.includes(r[i-1]))&&(l===r.length||Va.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function rl(t,e){return t==null?null:String(t)}function me(t,e,n,r,o,s){var i=t.__className;if(i!==n||i===void 0){var l=nl(n,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function Vn(t,e,n,r){var o=t.__style;if(o!==e){var s=rl(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const al=Symbol("is custom element"),ol=Symbol("is html");function Ad(t,e){var n=ka(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Dd(t,e){var n=ka(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Ae(t,e,n,r){var o=ka(t);o[e]!==(o[e]=n)&&(e==="loading"&&(t[Vs]=n),n==null?t.removeAttribute(e):typeof n!="string"&&sl(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function ka(t){return t.__attributes??(t.__attributes={[al]:t.nodeName.includes("-"),[ol]:t.namespaceURI===ci})}var qa=new Map;function sl(t){var e=t.getAttribute("is")||t.nodeName,n=qa.get(e);if(n)return n;qa.set(e,n=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=no(o);for(var i in r)r[i].set&&n.push(i);o=ga(o)}return n}function il(t,e,n=e){var r=new WeakSet;Li(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=Zr(t)?Xr(s):s,n(s),Ce!==null&&r.add(Ce),await Ro(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),ht(e)==null&&t.value&&(n(Zr(t)?Xr(t.value):t.value),Ce!==null&&r.add(Ce)),Fr(()=>{var o=e();if(t===document.activeElement){var s=br??Ce;if(r.has(s))return}Zr(t)&&o===Xr(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Zr(t){var e=t.type;return e==="number"||e==="range"}function Xr(t){return t===""?null:+t}function Wa(t,e){return t===e||t?.[pn]===e}function Nt(t={},e,n,r){return Ri(()=>{var o,s;return Fr(()=>{o=s,s=[],ht(()=>{t!==n(...s)&&(e(t,...s),o&&Wa(n(...o),t)&&e(null,...o))})}),()=>{en(()=>{s&&Wa(n(...s),t)&&e(null,...s)})}}),t}function ll(t=!1){const e=Se,n=e.l.u;if(!n)return;let r=()=>qi(e.s);if(t){let o=0,s={};const i=fr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>a(i)}n.b.length&&Mi(()=>{Ya(e,r),$r(n.b)}),Pe(()=>{const o=ht(()=>n.m.map(zs));return()=>{for(const s of o)typeof s=="function"&&s()}}),n.a.length&&Pe(()=>{Ya(e,r),$r(n.a)})}function Ya(t,e){if(t.l.s)for(const n of t.l.s)a(n);e()}let wr=!1;function cl(t){var e=wr;try{return wr=!1,[t(),wr]}finally{wr=e}}function le(t,e,n,r){var o=!Kn||(n&ri)!==0,s=(n&oi)!==0,i=(n&si)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?ht(r):r),l),d;if(s){var f=pn in t||Us in t;d=Ln(t,e)?.set??(f&&e in t?y=>t[e]=y:void 0)}var h,g=!1;s?[h,g]=cl(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=u(),d&&(o&&Zs(),d(h)));var v;if(o?v=()=>{var y=t[e];return y===void 0?u():(c=!0,y)}:v=()=>{var y=t[e];return y!==void 0&&(l=void 0),y===void 0?l:y},o&&(n&ai)===0)return v;if(d){var _=t.$$legacy;return(function(y,N){return arguments.length>0?((!o||!N||_||g)&&d(N?v():y),y):v()})}var w=!1,k=((n&ni)!==0?fr:Or)(()=>(w=!1,v()));s&&a(k);var E=fe;return(function(y,N){if(arguments.length>0){const L=N?a(k):o&&s?Be(y):y;return m(k,L),w=!0,l!==void 0&&(l=L),y}return En&&w||(E.f&kn)!==0?k.v:a(k)})}function Ee(t){Se===null&&oo(),Kn&&Se.l!==null?ul(Se).m.push(t):Pe(()=>{const e=ht(t);if(typeof e=="function")return e})}function ul(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const dl="5";var eo;typeof window<"u"&&((eo=window.__svelte??(window.__svelte={})).v??(eo.v=new Set)).add(dl);vi();const Yo={};function fl(t){Me(Yo,t)}function Ko(){const t=Ie(Yo);if(!t)throw new Error("No SearchContext found");return t}const Go={};function vl(t){Me(Go,t)}function It(){const t=Ie(Go);if(!t)throw new Error("No AppHistoryContext found");return t}function hl(t,e){Q(e,!0);const{addSearchParam:n,deleteSearchParam:r,getAppLocation:o}=It(),s=O(()=>o().searchParams),i="search",l=Be({value:o().searchParams.get(i)||""}),c=f=>{(a(s).get(i)||"")!==f&&(f===""?r(i):n(i,f))};Pe(()=>{a(s);const f=l.value;ht(()=>{c(f)})}),fl(l);var u=V(),d=B(u);he(d,()=>e.children??ye),p(t,u),$()}const Zo={};function gl(t){Me(Zo,t)}function Xo(){const t=Ie(Zo);if(!t)throw new Error("No TagSearchContext found");return t}function _l(t,e){Q(e,!0);const n=Be({value:""});gl(n);var r=V(),o=B(r);he(o,()=>e.children??ye),p(t,r),$()}const Jo={};function pl(t){Me(Jo,t)}function Qo(){const t=Ie(Jo);if(!t)throw new Error("No FeedOrderContext found");return t}function ml(t,e){Q(e,!0);const{addSearchParam:n,deleteSearchParam:r,getAppLocation:o}=It(),s=O(()=>o().searchParams),i="feedOrder";let l=z(Be(o().searchParams.get(i)||"newest"));const c=g=>{(a(s).get(i)||"newest")!==g&&(g==="newest"?r(i):n(i,g))};Pe(()=>{a(s),a(l),ht(()=>{c(a(l))})}),pl({getFeedOrder:()=>a(l),setFeedOrder:g=>{m(l,g,!0)}});var f=V(),h=B(f);he(h,()=>e.children??ye),p(t,f),$()}const $o={};function wl(t){Me($o,t)}function Ca(){const t=Ie($o);if(!t)throw new Error("No SidebarContext found");return t}function yl(t,e){Q(e,!0);const n=(d,f)=>{if(!f)return d;if(f.type==="closed")return{type:"closed"};switch(d.type){case"opened":return f.type==="close"?{type:"closing"}:f.type==="swipe"?{type:"openSwiping"}:d;case"closed":return f.type==="open"?{type:"opening"}:f.type==="swipe"?{type:"closeSwiping"}:d;case"openSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"closeSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"opening":return f.type==="opened"?{type:"opened"}:d;default:return d}};let r=z(Be(n({type:"closed"})));const o=d=>{const f=ht(()=>a(r));m(r,n(f,d),!0)};wl({sidebarOpen:()=>{o({type:"open"})},sidebarClose:()=>{o({type:"close"})},handleComputeState:o,getSidebarState:()=>a(r)});var c=V(),u=B(c);he(u,()=>e.children??ye),p(t,c),$()}const es={};function bl(t){Me(es,t)}function ts(){const t=Ie(es);if(!t)throw new Error("No SelectedTagsContext found");return t}const ns=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function Sl(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const kl=(t,e)=>{if(t.size!==e.size)return!0;for(const n of t)if(!e.has(n))return!0;return!1};function Cl(t,e){Q(e,!0);const{getAppLocation:n,replace:r}=It(),o=O(n),s=O(()=>a(o).searchParams),i="selectedTags",l=()=>new Set(n().searchParams.get(i)?.split(",")||[]);let c=z(Be(l()));const u=()=>{const _=l();if(kl(_,a(c))){const w=a(o).pathname;a(c).size===0?a(s).delete(i):a(s).set(i,Array.from(a(c)).join(",")),r(`${w}${a(s).size>0?`?${a(s).toString()}`:""}`)}};Pe(()=>{a(s),a(c),ht(()=>{u()})}),bl({getSelectedTags:()=>a(c),addTag:_=>{a(c).has(_)||m(c,new Set([...a(c),_]),!0)},removeTag:_=>{const w=new Set(a(c));w.delete(_),m(c,w,!0)}});var g=V(),v=B(g);he(v,()=>e.children??ye),p(t,g),$()}const rs={};function El(t){Me(rs,t)}function Ea(){const t=Ie(rs);if(!t)throw new Error("No LocalDBContext found");return t}const as={};function Pl(t){Me(as,t)}function xl(){const t=Ie(as);if(!t)throw new Error("No SettingsContext found");return t}const os={};function Al(t){Me(os,t)}function Xn(){const t=Ie(os);if(!t)throw new Error("No BroadcastContext found");return t}const Dl="AppStorage",Tl=1,tr="account",Er="settings",kt="notes",Ct="tags",Nl="syncLog",nn="success",rn="error",ze=(t,e,n)=>{t?.addEventListener(e,n)},Ka=(t,e)=>new Promise((n,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();ze(s,nn,()=>{const i=s?.result||[];n(i)}),ze(s,rn,i=>{r(i)})}),ua=(t,e,n)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);ze(i,nn,()=>{const l=i?.result?.data;r(l)}),ze(i,rn,l=>{o(l)})}),or=(t,e,n,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:r});ze(c,nn,()=>{o()}),ze(c,rn,u=>{s(u)})}),Jr=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{ze(i,nn,()=>{l()}),ze(i,rn,u=>{c(u)})})}))},Ll=(t,e,n)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);ze(l,nn,()=>{r()}),ze(l,rn,c=>{o(c)})}),yr=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{ze(i,nn,()=>{l()}),ze(i,rn,u=>{c(u)})})}))},cn=(t,e)=>new Promise((n,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();ze(i,nn,()=>{n()}),ze(i,rn,l=>{r(l)})});function Bl(t,e){Q(e,!0);let n=z(Be({showFavicon:!1}));const{getDB:r}=Ea(),{createBroadcastChannel:o,tabId:s}=Xn(),i=o(),l=O(r),c=async()=>{const _=await ua(a(l),Er,"default");_&&m(n,_,!0)},u=async()=>{c()},d=async _=>{const w=JSON.parse(_.data),k=w;if(w.tabId&&w.tabId===s){k.type==="exit"&&(m(n,{showFavicon:!1},!0),cn(a(l),Er));return}k.type==="updateSettings"?c():k.type==="exit"&&m(n,{showFavicon:!1},!0)},f=()=>a(n).showFavicon,h=async _=>{a(n).showFavicon=_,await or(a(l),Er,"default",{showFavicon:_}),i.postMessage({type:"updateSettings"})};Ee(()=>(u(),i.addEventListener(d),()=>{i.removeEventListener(d)})),Pl({getFaviconEnabled:f,setFaviconShown:h});var g=V(),v=B(g);he(v,()=>e.children??ye),p(t,g),$()}const ss={};function Il(t){Me(ss,t)}function Pa(){const t=Ie(ss);if(!t)throw new Error("No AccountContext found");return t}function Ml(t,e){Q(e,!0);let n=z(void 0);const{getDB:r}=Ea(),{createBroadcastChannel:o,tabId:s}=Xn(),i=O(r),l=o(),c=async()=>{const y=await ua(a(i),tr,"default");m(n,y,!0)},u=y=>or(a(i),tr,"default",y),d=async y=>{const N=await ua(a(i),tr,"default");N!==void 0&&m(n,N,!0),y(N)},f=async y=>{const N=JSON.parse(y.data);if(N.tabId&&N.tabId===s)return;const L=N;L.type==="initLocalAccount"?m(n,null):L.type==="initCloudAccount"?c():L.type==="disconnectCloudAccount"?m(n,null):L.type==="exit"?m(n,void 0):L.type==="updateAccount"&&c()};Ee(()=>(l.addEventListener(f),()=>{l.removeEventListener(f)})),Il({init:d,getAccount:()=>a(n),initLocalAccount:async()=>{m(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async y=>{const N={encryptedClientKey:y.encryptedClientKey||"",subscriptionExpires:y.subscriptionExpires||-1,lastSync:-1};await u(N),m(n,N,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{m(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async y=>{if(!a(n))throw new Error("No account to update subscription for");const N={...a(n),subscriptionExpires:y};await u(N),l.postMessage({type:"updateAccount"})},exitApp:async()=>{m(n,void 0),l.postMessage({type:"exit"}),await cn(a(i),tr)}});var k=V(),E=B(k);he(E,()=>e.children??ye),p(t,k),$()}const is={};function Ol(t){Me(is,t)}function jr(){const t=Ie(is);if(!t)throw new Error("No NotesContext found");return t}const Rl=()=>crypto.randomUUID(),Fl=t=>{const e=new Map;for(const n of t||[])for(const r of n?.data.tags||[])e.set(r,{name:r,count:(e.get(r)?.count||0)+1});return e};function zl(t,e){Q(e,!0);const{getDB:n}=Ea(),{createBroadcastChannel:r,tabId:o}=Xn(),s=O(n),i=r(),l=720*60*60*1e3;let c=z(0),u=z(!1),d=z(()=>new Map),f=z(()=>[]),h=z(()=>new Map);const g=()=>a(u),v=()=>a(c)>0,_=()=>{a(c)>0&&m(c,a(c)-1)},w=D=>{const M=a(f)(),b=a(h)(),C={...D};M.push(C),b.set(C.id,C),m(f,()=>M),m(h,()=>b)},k=D=>{const M=a(f)(),b=a(h)(),C=b.get(D.id);C&&(C.data=D.data),m(f,()=>M),m(h,()=>b)},E=D=>{const M=a(f)(),b=a(h)(),C=b.get(D);b.has(D)&&b.delete(D),C?.data?.type==="draft"&&b.delete("draft"),C&&(C.data=void 0),m(f,()=>M),m(h,()=>b)},y=()=>{m(f,()=>[]),m(d,()=>new Map),m(h,()=>new Map)},N=()=>a(f),L=D=>{const M=a(d)();for(const b of D){const C=M.get(b);C?C.count++:M.set(b,{name:b,count:1})}m(d,()=>M)},P=D=>{const M=a(d)();for(const b of D){const C=M.get(b);C&&(C.count--,C.count<=0&&M.delete(b))}m(d,()=>M)},S=async()=>{const[D,M]=await Promise.all([Ka(a(s),kt),Ka(a(s),Ct).then(ae=>ae.reduce((Ne,Te)=>Ne.set(Te.name,Te),new Map))]),b=[],C=[],q=new Map;let ie=0;for(const ae of D)ae.data.deletedAt&&Date.now()-ae.data.deletedAt>l?b.push(ae.id):(C.push(ae),q.set(ae.id,ae),ae.data.deletedAt&&(ie+=1),ae.data.type==="draft"&&q.set("draft",ae));m(c,ie,!0);const ee=Fl(C),ge=new Map;ee.entries().forEach(([ae,Ne])=>{const Te=M.get(ae);ge.set(ae,{...Te,...Ne})}),await yr(a(s),kt,b),await cn(a(s),Ct),await Jr(a(s),Ct,Array.from(ge.values()).map(ae=>({id:ae.name,data:{pinned:ae.pinned}}))),m(f,()=>C),m(h,()=>q),m(d,()=>ge),m(u,!0)},x=async()=>{const D=a(h)(),M=D.get("draft");if(M)return M;const b={id:Rl(),data:{type:"draft",url:"",name:"",text:"",tags:[],draft:{url:"",name:"",text:"",tags:[],createdAt:Date.now(),updatedAt:Date.now()},createdAt:Date.now(),updatedAt:Date.now()}};return await or(a(s),kt,b.id,{...b.data}),D.set("draft",b),w(b),i.postMessage({type:"createNoteDraft",data:{note:b}}),b},T=async D=>{const b=a(h)().get(D);if(!b||!b.data)return;const C=a(d)(),q=b.data.tags;P(q),E(D),i.postMessage({type:"deleteNote",data:{id:D}}),_(),await Ll(a(s),kt,D),await yr(a(s),Ct,q.filter(ie=>{const ee=C.get(ie);return ee?ee.count<=1:!1}))},Z=async(D,M)=>{const b={id:M.id,data:{...M.data}},C=a(d)(),q=M.data.tags.filter(ee=>!D.data.tags.includes(ee)),ie=D.data.tags.filter(ee=>!M.data.tags.includes(ee));await or(a(s),kt,b.id,{...b.data}),await Jr(a(s),Ct,q.filter(ee=>!C.has(ee)).map(ee=>({id:ee,data:{}}))),await yr(a(s),Ct,ie.filter(ee=>{const ge=C.get(ee);return ge?ge.count<=1:!1})),k(b),P(ie),L(q),i.postMessage({type:"updateNote",data:{note:b,tagsToAdd:q,tagsToDelete:ie}})},ce=async D=>{const M=a(h)(),b=ne(D);if(!b||!b.data)return;const C=M.get("draft");C&&C.id===b.id&&M.delete("draft");const q={id:D,data:{type:"note",name:b.data.draft?.name??b.data.name,url:b.data.draft?.url??b.data.url,text:b.data.draft?.text??b.data.text,tags:b.data.draft?.tags??b.data.tags,updatedAt:Date.now(),createdAt:b.data.createdAt,pinnedAt:b.data.pinnedAt,deletedAt:b.data.deletedAt,draft:void 0}};return Z(b,q)},se=async()=>{y(),i.postMessage({type:"clearNotes"}),await cn(a(s),kt),await cn(a(s),Ct)},ne=D=>{const M=a(h)();return D?M.get(D):M.get("draft")},Y=async(D,M)=>{const C=a(h)().get(D);if(!C||!C.data)return;const q={id:D,data:{...C.data,pinnedAt:M?Date.now():void 0}};return Z(C,q)},X=async D=>{const b=a(h)().get(D);if(!b||!b.data)return;const C={id:D,data:{...b.data,deletedAt:Date.now()}};m(c,a(c)+1),await Z(b,C)},re=async D=>{const b=a(h)().get(D);if(!b||!b.data)return;const C={id:D,data:{...b.data,deletedAt:0}};_(),await Z(b,C)},H=async(D,M)=>{const b=a(d)();b.set(D,{name:D,count:b.get(D)?.count||0,pinned:M}),await or(a(s),Ct,D,{pinned:M}),i.postMessage({type:"pinTag",data:{tag:D,pinned:M}}),m(d,()=>b)},te=async D=>{const M=a(h)(),b={};D.forEach(C=>{const q=M.get(C.id);(!q||q&&q.data&&q.data.updatedAt<C.data.updatedAt)&&(b[C.id]=C)}),await Jr(a(s),kt,Object.values(b)),await S(),i.postMessage({type:"reloadNotes"})},J=async()=>{const D=[];a(f)().forEach(b=>{b&&b.data&&b.data.deletedAt&&D.push(b.id)}),m(c,0),await yr(a(s),kt,D),await S(),i.postMessage({type:"emptyBin"})},G=async(D,M)=>{if(D===""){const ie=a(h)().get("draft");ie?D=ie.id:D=(await x()).id}const b=ne(D);if(!b||!b.data)return;const C={id:D,data:{...b.data,draft:{...M,tags:M.tags,createdAt:b.data.draft?.createdAt||Date.now(),updatedAt:Date.now()}}};return await Z(b,C),b.id},R=async D=>{const M=a(h)(),b=ne(D);if(!b||!b.data||!b.data.draft)return;if(b.data.type==="draft"){D===M.get("draft")?.id&&M.delete("draft"),await T(D);return}const C={id:D,data:{...b.data,draft:void 0}};return Z(b,C)},F=async D=>{const M=JSON.parse(D.data),b=M;if(M.tabId&&M.tabId===o){b.type==="exit"&&(y(),await cn(a(s),kt),await cn(a(s),Ct));return}if(b.type==="createNoteDraft"){const C=b.data.note;a(h)().set("draft",C),w(C)}else if(b.type==="updateNote"){const C=b.data,ie=a(h)().get(C.note.id);if(!ie||!ie.data)return;ie.data.deletedAt&&!C.note.data.deletedAt?_():!ie.data.deletedAt&&C.note.data.deletedAt&&m(c,a(c)+1),k(C.note),P(C.tagsToAdd),L(C.tagsToDelete)}else if(b.type==="deleteNote"){const C=b.data.id,ie=a(h)().get(C);if(!ie)return;_(),E(C),P(ie?.data?.tags||[])}else if(b.type==="pinTag"){const C=b.data.tag,q=b.data.pinned,ie=a(d)(),ee=ie.get(C);ee&&(ee.pinned=q,ie.set(C,ee))}else b.type==="clearNotes"?y():b.type==="reloadNotes"||b.type==="emptyBin"?S():b.type==="exit"&&y()};Ee(()=>(S(),i.addEventListener(F),()=>{i.removeEventListener(F)})),Ol({isInitedNotes:g,putNoteDraft:G,deleteNoteDraft:R,deleteNote:T,pinNote:Y,getGetNotes:N,importNotes:te,clearNotes:se,getNoteById:ne,getGetMapTags:()=>a(d),pinTag:H,moveNoteToBin:X,restoreNoteFromBin:re,checkNotesInBin:v,emptyBin:J,saveNoteDraft:ce,countNotesInBin:()=>a(c)});var ve=V(),we=B(ve);he(we,()=>e.children??ye),p(t,ve),$()}const ls={},Hl=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function jl(t){Me(ls,t)}function Jn(){const t=Ie(ls);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Ul(t,e){Q(e,!0);let n=Be(Hl());jl(n);var r=V(),o=B(r);he(o,()=>e.children??ye),p(t,r),$()}const cs={};function Vl(t){Me(cs,t)}function us(){const t=Ie(cs);if(!t)throw new Error("No ScrollingContext found");return t}function ql(t,e){Q(e,!0);let n=z(!1);const r=()=>a(n),o=ns(()=>{m(n,!1)},100);Vl({isScrolling:r,enable:()=>{m(n,!0),o()}});var i=V(),l=B(i);he(l,()=>e.children??ye),p(t,i),$()}const ds={};function Wl(t){Me(ds,t)}function Qn(){const t=Ie(ds);if(!t)throw new Error("No MobileSizeContext found");return t}function Yl(t,e){Q(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let r=z(Be(n())),o=Jn();const s=ns(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{m(r,n(),!0)})};Wl({checkMobileSize:()=>a(r)}),Ee(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=V(),u=B(c);he(u,()=>e.children??ye),p(t,c),$()}const fs={};function Kl(t){Me(fs,t)}function $n(){const t=Ie(fs);if(!t)throw new Error("No DialogContext found");return t}function Gl(t,e){Q(e,!0);let n=z(0),r=z(!1),o=z(!1);Kl({checkExistedDialog:()=>a(n)>0,showDialog:()=>{m(n,a(n)+1)},hideDialog:()=>{m(n,a(n)-1)},blockDialog:v=>{m(r,v,!0),v||m(o,!1)},checkBlockedDialog:()=>a(r),unBlockBackDialog:v=>{m(o,v,!0)},checkUnBlockedBackDialog:()=>a(o)});var h=V(),g=B(h);he(g,()=>e.children??ye),p(t,h),$()}const vs={};function Zl(t){Me(vs,t)}function xa(){const t=Ie(vs);if(!t)throw new Error("No ScrollContainerContext found");return t}function Xl(t,e){Q(e,!0);let n=z(null);Zl({setScrollContainer:l=>{m(n,l,!0)},getScrollContainer:()=>a(n)});var s=V(),i=B(s);he(i,()=>e.children??ye),p(t,s),$()}const hs={};function Jl(t){Me(hs,t)}function Aa(){const t=Ie(hs);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Ql(t,e){Q(e,!0);let n=z(200);Jl({setDialogPageHeight:l=>{m(n,l,!0)},getDialogPageHeight:()=>a(n)});var s=V(),i=B(s);he(i,()=>e.children??ye),p(t,s),$()}const $l=[tr,Er,kt,Ct,Nl];function ec(){return new Promise((t,e)=>{const n=indexedDB.open(Dl,Tl);ze(n,"upgradeneeded",()=>{const r=n.result;for(const o of $l)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),ze(n,nn,()=>{const r=n.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),ze(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),ze(n,rn,()=>{e()})})}function tc(t,e){Q(e,!0);let n=z(null);Ee(()=>{ec().then(l=>{m(n,l,!0)}).catch(l=>{})}),El({getDB:()=>a(n)});var o=V(),s=B(o);{var i=l=>{var c=V(),u=B(c);he(u,()=>e.children??ye),p(l,c)};W(s,l=>{a(n)&&l(i)})}p(t,o),$()}const gs={};function nc(t){Me(gs,t)}function Lt(){const t=Ie(gs);if(!t)throw new Error("No StackPagesContext found");return t}function rc(t,e){Q(e,!0);const{createBroadcastChannel:n,tabId:r}=Xn(),o=n(),{getAppLocation:s,getAppHistoryStack:i,navigate:l,goBack:c,replace:u}=It(),d=O(s),f=O(()=>a(d).searchParams),h="stackPages",g=()=>a(f).get(h)?.split(",")||[];let v=z(Be([]));const _=()=>{const S=g();a(v).join(",")!==S.join(",")&&m(v,S,!0)};Pe(()=>{a(f),ht(()=>{_()})});const w=S=>{if(!a(v).find(x=>{const[T]=x.split("?");return T===S})){const x=new URLSearchParams(a(d).search),T=a(d).pathname;x.set(h,[...a(v),S].join(",")),l(`${T}${x.size>0?`?${x.toString()}`:""}`)}},k=S=>a(v).find(x=>{const[T]=x.split("?");return T===S})!==void 0,E=()=>{const S=i(),x=S.findIndex(T=>T.searchParams.has(h));if(S.length<=1||x===-1){const T=new URLSearchParams(a(d).search);T.delete(h),u(`${a(d).pathname}${T.size>0?`?${T.toString()}`:""}`)}else if(x===0){c(S.length-x+1);const T=new URLSearchParams(a(d).search);T.delete(h),u(`${a(d).pathname}${T.size>0?`?${T.toString()}`:""}`)}else c(S.length-x)},y=(S,x)=>{if(x?.full)return`/${S}`;const T=a(v).slice();T.includes(S)||T.push(S);const Z=new URLSearchParams(a(d).search);return Z.set(h,T.join(",")),`${a(d).pathname}?${Z}`},N=(S,x)=>T=>{if(T.preventDefault(),x?.full){l(S);return}w(S)};Ee(()=>{const S=x=>{const T=JSON.parse(x.data),Z=T;if(T.tabId&&T.tabId===r){if(Z.type==="navigateBack"&&a(v).length>0){const ce=new URLSearchParams(a(d).search);a(v).length>1?ce.set(h,a(v).slice(0,-1).join(",")):ce.delete(h),u(`${a(d).pathname}${ce.size>0?`?${ce.toString()}`:""}`)}return}};return o.addEventListener(S),()=>{o.removeEventListener(S)}}),nc({getStackPages:()=>a(v),pushStackPages:w,hasStackPage:k,clearStackPages:E,getPageUrl:y,createHandlePage:N,getStackPagesFormUrl:g});var L=V(),P=B(L);he(P,()=>e.children??ye),p(t,L),$()}function ac(t,e){Q(e,!0);const{createBroadcastChannel:n}=Xn(),r=n(),o=_=>_.startsWith("/")?_:`/${_}`,s=_=>{const[w,k]=_.split("?");return{href:o(_),pathname:o(w),search:k?`?${k}`:"",searchParams:new URLSearchParams(k)}};let i=z(Be([{href:`${o(window.location.pathname)}${window.location.search}`,pathname:o(window.location.pathname),search:window.location.search,searchParams:new URLSearchParams(window.location.search)}]));const l=_=>{a(i).push(s(_)),window.history.replaceState(null,"",_)},c=_=>{a(i)[a(i).length-1]=s(_),window.history.replaceState(null,"",_)};vl({getAppLocation:()=>a(i)[a(i).length-1],getAppHistoryStack:()=>a(i),navigate:l,replace:c,addSearchParam:(_,w)=>{const k=a(i)[a(i).length-1],E=k.searchParams;E.set(_,w),c(`${k.pathname}${E.size>0?`?${E.toString()}`:""}`)},deleteSearchParam:_=>{const w=a(i)[a(i).length-1],k=w.searchParams;k.delete(_),c(`${w.pathname}${k.size>0?`?${k.toString()}`:""}`)},back:_=>{const{to:w}=_||{};if(a(i).length>1){if(w){const E=a(i).findIndex(y=>y.href===w);if(E!==-1){m(i,a(i).slice(0,E+1),!0);const y=a(i)[a(i).length-1];window.history.replaceState(null,"",y.href)}else c(w);return}a(i).pop();const k=a(i)[a(i).length-1];window.history.replaceState(null,"",k.href)}else w?c(w):r.postMessage({type:"navigateBack"})},goBack:_=>{if(a(i).length>=_){m(i,a(i).slice(0,-_),!0);const w=a(i)[a(i).length-1];window.history.replaceState(null,"",w.href)}}});var g=V(),v=B(g);he(v,()=>e.children??ye),p(t,g),$()}const _s={};function oc(t){Me(_s,t)}function sc(){const t=Ie(_s);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function ic(t,e){Q(e,!0);let n=Be({value:!1});const r=()=>n.value;Ee(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),oc({getIsKeyboardVisible:r});var o=V(),s=B(o);he(s,()=>e.children??ye),p(t,o),$()}function lc(t,e){Q(e,!0);const n=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};Al({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=V(),s=B(o);he(s,()=>e.children??ye),p(t,o),$()}function cc(t,e){tc(t,{children:(n,r)=>{lc(n,{children:(o,s)=>{Ul(o,{children:(i,l)=>{ql(i,{children:(c,u)=>{Yl(c,{children:(d,f)=>{Gl(d,{children:(h,g)=>{Xl(h,{children:(v,_)=>{Ql(v,{children:(w,k)=>{ic(w,{children:(E,y)=>{ac(E,{children:(N,L)=>{rc(N,{children:(P,S)=>{var x=V(),T=B(x);he(T,()=>e.children??ye),p(P,x)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function uc(t,e){cc(t,{children:(n,r)=>{_l(n,{children:(o,s)=>{hl(o,{children:(i,l)=>{ml(i,{children:(c,u)=>{yl(c,{children:(d,f)=>{Cl(d,{children:(h,g)=>{Bl(h,{children:(v,_)=>{Ml(v,{children:(w,k)=>{zl(w,{children:(E,y)=>{var N=V(),L=B(N);he(L,()=>e.children??ye),p(E,N)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let Yt=z(""),sn=z(null),nr=z(null),rr=z(null);function wn(t,e){m(Yt,""),setTimeout(()=>{m(Yt,t,!0),e?.onFinish&&m(nr,e.onFinish,!0),e?.onCancel&&m(rr,e.onCancel,!0)},16)}const dc=(t,e,n,r,o)=>{t.preventDefault(),a(e)&&(m(n,null),a(e)(),m(e,null)),m(r,""),a(o)?.style.removeProperty("opacity")};var fc=U('<button type="button" class="undoButton svelte-1vxmgq5">undo</button>'),vc=U('<div class="notification svelte-1vxmgq5"><span> </span> <!></div>'),hc=U("<div><!></div>");function gc(t,e){Q(e,!0),Pe(()=>{a(Yt);const s=a(rr)?2e3:800;a(Yt)&&(a(sn)?.getBoundingClientRect(),a(sn)?.style.setProperty("opacity","1"));const i=setTimeout(()=>{a(sn)?.style.removeProperty("opacity")},s),l=setTimeout(()=>{m(Yt,""),a(nr)&&a(nr)(),m(nr,null),m(rr,null),a(sn)?.style.removeProperty("opacity")},s+400);return()=>{clearTimeout(i),clearTimeout(l)}});var n=hc(),r=A(n);{var o=s=>{var i=vc(),l=A(i),c=A(l),u=j(l,2);{var d=f=>{var h=fc();h.__click=[dc,rr,nr,Yt,sn],p(f,h)};W(u,f=>{a(rr)&&f(d)})}Nt(i,f=>m(sn,f),()=>a(sn)),de(()=>Qt(c,a(Yt))),p(s,i)};W(r,s=>{a(Yt)&&s(o)})}p(t,n),$()}it(["click"]);var _c=U('<span class="vh svelte-s92gzo"><!></span>');function nt(t,e){var n=_c(),r=A(n);he(r,()=>e.children),p(t,n)}var pc=Zi('<svg class="svelte-18et5h9"><use></use></svg>');function ke(t,e){let n=le(e,"name",8,"");var r=pc(),o=A(r);de(()=>Ae(o,"href",`#icon-${n()??""}`)),p(t,r)}const mc=(t,e,n,r,o)=>{if(a(e))return;const s=n().type;s==="closed"?r():s==="opened"&&o()};var wc=U('<button class="buttonMenu svelte-bpktnw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ps(t,e){Q(e,!0);const{sidebarOpen:n,getSidebarState:r,sidebarClose:o}=Ca(),{getStackPagesFormUrl:s}=Lt(),{checkExistedDialog:i}=$n();let l=O(()=>s().length>0||i());var c=wc();c.__click=[mc,l,r,n,o];var u=A(c);be(u,()=>({"--size":"36px"})),ke(u.lastChild,{name:"sidebarMenu"});var d=j(u,2);nt(d,{children:(f,h)=>{var g=De("Menu");p(f,g)}}),p(t,c),$()}it(["click"]);var yc=(t,e)=>e.onChange?.(t.target?.value||""),bc=U('<input class="svelte-15lr19w"/>');function da(t,e){Q(e,!0);let n=le(e,"value",15,"");var r=bc();r.__input=[yc,e],de(()=>Ae(r,"placeholder",e.placeholder)),Sa("focus",r,function(...o){e.onFocus?.apply(this,o)}),il(r,n),p(t,r),$()}it(["input"]);function ms(t,e){Q(e,!0),Ee(()=>{const n=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),$()}var Sc=U('<dialog><div class="dialogInner svelte-1x410nl"><!></div></dialog> <!>',1);function Da(t,e){Q(e,!0);let n=z(null),r=z(null),o=z(!1),{showDialog:s,hideDialog:i}=$n();const l=v=>{v?.preventDefault();const _=setTimeout(()=>{e.onClosed()},150);a(n)?.addEventListener("transitionend",()=>{clearTimeout(_),e.onClosed()},{once:!0}),m(o,!1)};Pe(()=>{e.startClose&&l()}),Ee(()=>(a(n)?.showModal(),a(n)?.getClientRects(),m(o,!0),a(n)?.addEventListener("cancel",l),a(n)?.addEventListener("close",l),()=>{a(n)?.removeEventListener("cancel",l),a(n)?.removeEventListener("close",l)})),Ee(()=>(s(),()=>{i()}));var c=Sc(),u=B(c),d=A(u),f=A(d);he(f,()=>e.children),Nt(d,v=>m(r,v),()=>a(r)),Nt(u,v=>m(n,v),()=>a(n));var h=j(u,2);{var g=v=>{ms(v,{get dialog(){return a(n)},get dialogInner(){return a(r)},onClose:l})};W(h,v=>{a(n)&&a(r)&&v(g)})}de(()=>me(u,1,pe(["dialog",{shown:a(o)}]),"svelte-1x410nl")),p(t,c),$()}var kc=U("<div><!></div>");function ws(t,e){Q(e,!0);let n=z(!1),r=z(null);const o=()=>{const u=setTimeout(()=>{e.onClosed()},150);a(r)?.addEventListener("transitionend",()=>{clearTimeout(u),e.onClosed()},{once:!0}),m(n,!1)},s=u=>{u.target!==a(r)&&!a(r)?.contains(u.target)&&o()},i=u=>{u.target!==a(r)&&!a(r)?.contains(u.target)&&o()};Ee(()=>{a(r)?.getClientRects(),m(n,!0);const u=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i)},0);return()=>{clearTimeout(u),document.removeEventListener("focusin",s),document.removeEventListener("click",i)}}),Pe(()=>{e.startClose&&o()});var l=kc(),c=A(l);he(c,()=>e.children),Nt(l,u=>m(r,u),()=>a(r)),de(()=>me(l,1,pe(["menu",{top:e.positionTop,shown:a(n)}]),"svelte-ujw4xi")),p(t,l),$()}const Cc=(t,e)=>{a(e)||m(e,!0)};var Ec=(t,e)=>e("newest"),Pc=(t,e)=>e("oldest"),xc=(t,e)=>e("AtoZ"),Ac=(t,e)=>e("ZtoA"),Dc=U("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),Tc=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Nc=U('<div class="orderMenu svelte-14zj87s"><button><!> <!></button> <!></div>');function Lc(t,e){Q(e,!0);const n=(E,y=ye)=>{var N=Dc(),L=A(N);L.__click=[Ec,d];var P=j(L,2);P.__click=[Pc,d];var S=j(P,2);S.__click=[xc,d];var x=j(S,2);x.__click=[Ac,d],de(()=>{me(N,1,pe(["menu",{menuDialog:y()}]),"svelte-14zj87s"),me(L,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="newest"}]),"svelte-14zj87s"),me(P,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="oldest"}]),"svelte-14zj87s"),me(S,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="AtoZ"}]),"svelte-14zj87s"),me(x,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="ZtoA"}]),"svelte-14zj87s")}),p(E,N)};let r=z(!1),o=z(!1);const{checkMobileSize:s}=Qn(),{getFeedOrder:i,setFeedOrder:l}=Qo();let c=O(s),u=O(i);const d=E=>{m(o,!0),l(E)},f=()=>{m(r,!1),m(o,!1)};Ee(()=>{const E=y=>{y.key==="Escape"&&m(o,!0)};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)});var h=Nc(),g=A(h);g.__click=[Cc,r],me(g,1,pe(["button","buttonMenu"]),"svelte-14zj87s");var v=A(g);ke(v,{name:"filter"});var _=j(v,2);nt(_,{children:(E,y)=>{var N=De("show feed order menu");p(E,N)}});var w=j(g,2);{var k=E=>{var y=V(),N=B(y);{var L=S=>{Da(S,{get startClose(){return a(o)},onClosed:f,children:(x,T)=>{n(x,()=>!0)},$$slots:{default:!0}})},P=S=>{var x=Tc(),T=B(x);be(T,()=>({"--right":"20px","--top":"60px"})),ws(T.lastChild,{get startClose(){return a(o)},onClosed:f,children:(Z,ce)=>{n(Z,()=>!1)},$$slots:{default:!0}}),p(S,x)};W(N,S=>{a(c)?S(L):S(P,!1)})}p(E,y)};W(w,E=>{a(r)&&E(k)})}p(t,h),$()}it(["click"]);var K=(t=>(t.NewNote="newNote",t.EditNote="editNote",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.Start="start",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t))(K||{}),Bc=U("<a><!></a>"),Ic=U("<button><!></button>");function Ft(t,e){let n=le(e,"type",3,"standard"),r=le(e,"typeButton",3,"button"),o=le(e,"element",3,"button"),s=le(e,"href",3,""),i=le(e,"fullWidth",3,!1),l=le(e,"withoutMinWidth",3,!1);var c=V(),u=B(c);{var d=h=>{var g=Bc();g.__click=function(..._){e.onClick?.apply(this,_)};var v=A(g);he(v,()=>e.children??ye),de(()=>{Ae(g,"href",s()),me(g,1,pe(["button","a",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),p(h,g)},f=h=>{var g=Ic();g.__click=function(..._){e.onClick?.apply(this,_)};var v=A(g);he(v,()=>e.children??ye),de(()=>{Ae(g,"type",r()),me(g,1,pe(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),p(h,g)};W(u,h=>{o()==="a"?h(d):h(f,!1)})}p(t,c)}it(["click"]);var Mc=U('<div class="block svelte-1dzbsx4"><span class="title svelte-1dzbsx4"> </span> <div class="controls svelte-1dzbsx4"><!> <!></div></div>');function ys(t,e){Q(e,!0);let n=le(e,"buttonCancelTitle",3,"Cancel"),r=le(e,"buttonConfirmTitle",3,"Confirm"),o=z(!1),s=z(!1);const i=()=>{m(o,!0)},l=()=>{m(o,!0),m(s,!0)};Da(t,{get startClose(){return a(o)},onClosed:()=>{a(s)?e.onConfirm():e.onCancel()},children:(u,d)=>{var f=Mc(),h=A(f),g=A(h),v=j(h,2),_=A(v);Ft(_,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(k,E)=>{var y=De();de(()=>Qt(y,n())),p(k,y)},$$slots:{default:!0}});var w=j(_,2);Ft(w,{onClick:l,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(k,E)=>{var y=De();de(()=>Qt(y,r())),p(k,y)},$$slots:{default:!0}}),de(()=>Qt(g,e.title)),p(u,f)},$$slots:{default:!0}}),$()}const Oc=(t,e)=>{m(e,!0)};var Rc=(t,e)=>{e("/",{full:!0})(t)},Fc=U('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),zc=(t,e)=>{e(K.Bin,{full:!0})(t)},Hc=U('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),jc=U('<button class="emptyBinButton svelte-13t3afu" type="button">Empty bin</button>'),Uc=U('<a class="buttonAdd svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></a>'),Vc=U('<div class="header svelte-13t3afu"><div class="top svelte-13t3afu"><div class="menu svelte-13t3afu"><a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="mobile svelte-13t3afu"><!></div> <!></div> <div class="bottom svelte-13t3afu"><div><div class="sidebarSearchWrapper"><!></div></div> <div class="right svelte-13t3afu"><div class="filter svelte-13t3afu"><div class="feedSearchWrapper svelte-13t3afu"><!></div> <!></div></div></div></div> <!>',1);function qc(t,e){Q(e,!0);const{createHandlePage:n,getPageUrl:r}=Lt(),o=Ko(),s=Xo(),{getScrollContainer:i}=xa();let l=O(i);const{emptyBin:c,checkNotesInBin:u}=jr(),{getAppLocation:d}=It(),f=O(u),h=O(()=>d().pathname);let g=z(!1);const v=()=>{a(l)&&a(l).scrollTo({top:0,behavior:"smooth"})};var _=Vc(),w=B(_),k=A(w),E=A(k),y=A(E),N=O(()=>n(K.Settings));y.__click=function(...C){a(N)?.apply(this,C)};var L=A(y);be(L,()=>({"--rotate":"30deg","--size":"20px"})),ke(L.lastChild,{name:"settings"});var P=j(y,2),S=O(()=>n(K.Sync));P.__click=function(...C){a(S)?.apply(this,C)};var x=A(P);be(x,()=>({"--size":"20px"})),ke(x.lastChild,{name:"sync"});var T=j(P,2);{var Z=C=>{var q=Fc();q.__click=[Rc,n];var ie=A(q);be(ie,()=>({"--size":"18px"})),ke(ie.lastChild,{name:"note"}),de(ee=>Ae(q,"href",ee),[()=>r("/",{full:!0})]),p(C,q)},ce=C=>{var q=V(),ie=B(q);{var ee=ge=>{var ae=Hc();ae.__click=[zc,n];var Ne=A(ae);be(Ne,()=>({"--size":"20px"})),ke(Ne.lastChild,{name:"bin"}),de(Te=>Ae(ae,"href",Te),[()=>r(K.Bin,{full:!0})]),p(ge,ae)};W(ie,ge=>{a(f)&&ge(ee)},!0)}p(C,q)};W(T,C=>{a(h)===`/${K.Bin}`?C(Z):C(ce,!1)})}var se=j(E,2),ne=A(se);ps(ne,{});var Y=j(se,2);{var X=C=>{var q=V(),ie=B(q);{var ee=ge=>{var ae=jc();ae.__click=[Oc,g],p(ge,ae)};W(ie,ge=>{a(f)&&ge(ee)})}p(C,q)},re=C=>{var q=Uc(),ie=O(()=>n(K.NewNote));q.__click=function(...ge){a(ie)?.apply(this,ge)};var ee=A(q);be(ee,()=>({"--size":"16px","--color":"#b0b0b0"})),ke(ee.lastChild,{name:"plus"}),de(ge=>Ae(q,"href",ge),[()=>r(K.NewNote)]),p(C,q)};W(Y,C=>{a(h)===`/${K.Bin}`?C(X):C(re,!1)})}var H=j(k,2),te=A(H);me(te,1,pe(["left"]),"svelte-13t3afu");var J=A(te),G=A(J);da(G,{placeholder:"Search tag",get value(){return s.value},set value(C){s.value=C}});var R=j(te,2),F=A(R),ve=A(F),we=A(ve);da(we,{onFocus:v,placeholder:"Search",get value(){return o.value},set value(C){o.value=C}});var D=j(ve,2);Lc(D,{});var M=j(w,2);{var b=C=>{ys(C,{title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:()=>{c(),m(g,!1)},onCancel:()=>{m(g,!1)}})};W(M,C=>{a(g)&&C(b)})}de((C,q)=>{Ae(y,"href",C),Ae(P,"href",q)},[()=>r(K.Settings),()=>r(K.Sync)]),p(t,_),$()}it(["click"]);function Wc(t,e){Q(e,!0);const{getIsKeyboardVisible:n}=sc();let r=le(e,"dialog",7);const o=O(n),s=Jn();let i=null;const l=()=>{e.dialogState==="swiping"&&e.onClose()};Pe(()=>(e.dialogState==="swiping"&&(i=setTimeout(l,3e3)),()=>{i&&(clearTimeout(i),i=null)}));let c=null,u=null;const d=3,f=50,h=5,g=.6,v=.3,_=.35,w=.95;let k=0,E=0,y=0,N=!1,L=!1,P=0,S=0,x=0;const T=()=>{k=0,E=0,N=!1,L=!1,P=0,S=0,x=0,y=0,c=null,u!==null&&(cancelAnimationFrame(u),u=null),i&&(clearTimeout(i),i=null)},Z=J=>{r()&&e.dialogState==="opened"&&(k=J.touches[0].clientX,E=J.touches[0].clientY,y=performance.now(),N=!0,L=!1)},ce=J=>e.dialogState==="opened"&&J>0||e.dialogState==="swiping"&&J>0,se=()=>{if(r()){r().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const J=window.getComputedStyle(r()),G=J.transform||J.webkitTransform||"";if(S=r().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(P=0),G&&G!=="none")try{P=new DOMMatrix(G).m41}catch{}L=!0}catch{T()}}},ne=()=>{if(!r())return;const G=Math.abs(P+x*S/100)/S;r().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-G)})`)},Y=()=>{if(u=null,!c||!N||!r()||a(o)){T();return}const J=[...c.touches].reduce((C,q)=>C+q.clientX,0)/c.touches.length,G=[...c.touches].reduce((C,q)=>C+q.clientY,0)/c.touches.length,R=J-k,F=G-E,ve=Math.abs(R)>Math.abs(F),we=Math.abs(R)>d;if(!L)if(ve&&we&&ce(R))try{se()}catch{T();return}else return;let D=P+R*w;D=Math.max(0,Math.min(S,D)),!(D<0)&&(r().style.setProperty("--transition-timing","0s"),r().style.transform=`translate3d(${D}px, 0, 0)`,s.swipingRatio=Math.abs(1-D/S),x=(D-P)/S*100,e.dialogState==="swiping"&&(i&&clearTimeout(i),i=setTimeout(l,3e3)),ne())},X=J=>{if(!N)return;c=J,u===null&&(u=requestAnimationFrame(Y));const G=J.touches[0].clientX-k,R=J.touches[0].clientY-E,F=Math.abs(G)>Math.abs(R);L&&F&&J.preventDefault()},re=J=>{const G=Math.abs(J);if(G>=g)return h;if(G>=v){const R=(G-v)/(g-v);return f-R*(f-h)}else return f},H=(J,G)=>{if(Math.abs(J)>=g)return _*.5;const F=Math.abs(x)/100;return G?_*Math.max(.5,1-F):_*Math.max(.5,F)},te=J=>{if(u!==null&&(cancelAnimationFrame(u),u=null),!N||!r()){T();return}if(!L){T();return}let G=0;if(J?.changedTouches?.[0]){const D=J.changedTouches[0].clientX,b=performance.now()-y;b>0&&(G=(D-k)/b)}const R=re(G);let F=null;e.dialogState==="swiping"&&(F=Math.abs(x)>R||G<-v?"close":"open");const ve=e.dialogState==="swiping"&&F==="close",we=H(G,ve);s.duration=we-.02,r().style.setProperty("--transition-timing",`${we}s`),r().offsetWidth,r().style.transform="",F==="open"?e.onOpen():F==="close"&&e.onClose(),r()?.style.removeProperty("--backdrop-bg"),T()};Ee(()=>(r().addEventListener("touchstart",Z,{passive:!0}),r().addEventListener("touchmove",X,{passive:!1}),r().addEventListener("touchend",te,{passive:!0}),r().addEventListener("touchcancel",te,{passive:!0}),()=>{r().removeEventListener("touchstart",Z),r().removeEventListener("touchmove",X),r().removeEventListener("touchend",te),r().removeEventListener("touchcancel",te),u!==null&&cancelAnimationFrame(u)})),$()}var Yc=(t,e)=>{e.onStartClose()},Kc=U('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Gc=U('<dialog><div class="dialogInner svelte-vr2o0t"><div class="header svelte-vr2o0t"><div><!></div></div> <!></div></dialog> <!>',1);function Zc(t,e){Q(e,!0);let n=350;const{isScrolling:r,enable:o}=us();let s=z(null),i=z(null);const l=Jn(),c=P=>{P.preventDefault(),e.onStartClose()};Ee(()=>(a(s)?.addEventListener("close",e.onClosed),a(s)?.addEventListener("cancel",c),()=>{a(s)?.removeEventListener("close",e.onClosed),a(s)?.removeEventListener("cancel",c)}));const u=()=>{a(s)?.style.removeProperty("--transition-timing"),a(s)?.style.removeProperty("transform"),a(s)?.style.removeProperty("--backdrop-bg")},d=()=>{o()},f=O(r);Pe(()=>{if(e.dialogState,!!a(s))switch(e.dialogState){case"opening":{a(s).open||a(s).showModal(),a(s).getBoundingClientRect();const P=setTimeout(()=>{u()},n+1),S=()=>{clearTimeout(P),u()};return a(s)?.addEventListener("transitionend",S,{once:!0}),e.onOpened(),()=>{clearTimeout(P),a(s)?.removeEventListener("transitionend",S)}}case"closing":{const P=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),S=()=>{clearTimeout(P),e.onClosed()};return a(s)?.addEventListener("transitionend",S,{once:!0}),()=>{clearTimeout(P),a(s)?.removeEventListener("transitionend",S)}}case"opened":u()}});var h=Gc(),g=B(h),v=A(g),_=A(v),w=A(_),k=A(w);{var E=P=>{var S=Kc();me(S,1,pe(["navigateButton","buttonBack"]),"svelte-vr2o0t"),S.__click=[Yc,e];var x=A(S);be(x,()=>({"--size":"36px"})),ke(x.lastChild,{name:"back"});var T=j(x,2);nt(T,{children:(Z,ce)=>{var se=De("back");p(Z,se)}}),p(P,S)};W(k,P=>{(!(e.blocked||e.hidden)||e.blocked&&e.unBlockedBack)&&P(E)})}var y=j(_,2);he(y,()=>e.children),Nt(v,P=>m(i,P),()=>a(i)),Nt(g,P=>m(s,P),()=>a(s));var N=j(g,2);{var L=P=>{Wc(P,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return a(s)}})};W(N,P=>{(!a(f)&&e.dialogState==="opened"||e.dialogState==="swiping")&&(!e.blocked||e.unBlockedBack)&&P(L)})}de(()=>me(g,1,pe([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:l.working&&(!l.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-vr2o0t")),Sa("scroll",v,d),p(t,h),$()}it(["click"]);const Ga=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function Xc(t,e){Q(e,!0);let n=le(e,"blocked",3,!1),r=le(e,"hiddenDialog",3,!1),o=le(e,"unBlockedBack",3,!1),s=le(e,"onStartClose",3,()=>{}),i=le(e,"onClose",3,()=>{});const l=Jn();let c=z(Be(Ga({type:"closed"})));const u=y=>{m(c,Ga(a(c),y),!0)},d=()=>{n()&&!o()||(s()(),u({type:"close"}))},f=()=>{u({type:"open"})},h=()=>{u({type:"opened"}),l.swipingRatio=1,l.duration=.2},g=()=>{i()(),u({type:"closed"}),l.swipingRatio=1,l.duration=.2},v=()=>{u({type:"swipe"})};Pe(()=>{a(c).type==="swiping"?l.isSwiping=!0:l.isSwiping=!1,a(c).type==="closed"&&e.shownDialog?f():a(c).type==="opened"&&!e.shownDialog&&d()});var _={handleComputeState:u},w=V(),k=B(w);{var E=y=>{Zc(y,{onSwipe:v,onOpened:h,onClosed:g,onStartClose:d,onStartOpen:f,get dialogState(){return a(c).type},get hidden(){return r()},get blocked(){return n()},get unBlockedBack(){return o()},children:(N,L)=>{var P=V(),S=B(P);he(S,()=>e.children),p(N,P)},$$slots:{default:!0}})};W(k,y=>{a(c).type!=="closed"&&y(E)})}return p(t,w),$(_)}const Jc=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const o=i=>{i.preventDefault(),n()},s=()=>{r?.()};Ee(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Ee(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Qc=(t,e)=>{e.onStartBack()},$c=U('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),eu=(t,e)=>{e.onStartClose()},tu=U('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),nu=U('<dialog><div class="dialogInner svelte-rt409n"><div class="header svelte-rt409n"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function ru(t,e){Q(e,!0);let n=le(e,"blockedDialog",3,!1),r=le(e,"hiddenDialog",3,!1),o=le(e,"isDesktopAnimationOff",3,!1),s=z(null),i=z(null);Jc({getDialog:()=>a(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const l=Jn();Pe(()=>{e.stateDialog==="closing"&&(l.working?a(s)?.addEventListener("transitionend",()=>{a(s)?.close()},{once:!0}):a(s)?.close())});const{getDialogPageHeight:c}=Aa(),u=O(c);var d=nu(),f=B(d),h=A(f),g=A(h),v=A(g),_=A(v);{var w=P=>{var S=$c();me(S,1,pe(["navigateButton","buttonBack"]),"svelte-rt409n"),S.__click=[Qc,e];var x=A(S);be(x,()=>({"--size":"28px"})),ke(x.lastChild,{name:"back"});var T=j(x,2);nt(T,{children:(Z,ce)=>{var se=De("back");p(Z,se)}}),p(P,S)};W(_,P=>{(!(n()||r())||n()&&e.unBlockedBack)&&e.onStartBack&&P(w)})}var k=j(v,2),E=A(k);{var y=P=>{var S=tu();me(S,1,pe(["navigateButton","buttonClose"]),"svelte-rt409n"),S.__click=[eu,e];var x=A(S);be(x,()=>({"--size":"28px"})),ke(x.lastChild,{name:"close"});var T=j(x,2);nt(T,{children:(Z,ce)=>{var se=De("close");p(Z,se)}}),p(P,S)};W(E,P=>{n()||r()||P(y)})}var N=j(g,2);he(N,()=>e.children),Nt(h,P=>m(i,P),()=>a(i)),Nt(f,P=>m(s,P),()=>a(s));var L=j(f,2);ms(L,{get dialog(){return a(s)},get dialogInner(){return a(i)},get onClose(){return e.onStartClose}}),de(()=>{Vn(f,`height: ${a(u)+74}px`),me(f,1,pe([{open:e.stateDialog==="open",isAnimationOn:l.working,isDesktopAnimationOff:o(),hiddenDialog:r()}]),"svelte-rt409n")}),p(t,d),$()}it(["click"]);const au=({onStartClose:t,onClose:e})=>{let n=z("close");return{get state(){return a(n)},set state(i){m(n,i,!0)},handleStartClose:(i=!1)=>{i||(m(n,"closing"),t?.())},handleOpen:()=>{m(n,"open")},handleClose:()=>{m(n,"close"),e?.()}}};function ou(t,e){Q(e,!0);let n=le(e,"blockedDialog",3,!1),r=le(e,"hiddenDialog",3,!1),o=le(e,"onStartClose",3,()=>{}),s=le(e,"onClose",3,()=>{}),i=au({onStartClose:o(),onClose:s()});Pe(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=f=>{f.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||n())&&(f.preventDefault(),f.stopPropagation())};Ee(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=V(),u=B(c);{var d=f=>{ru(f,{get stateDialog(){return i.state},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(h,g)=>{var v=V(),_=B(v);he(_,()=>e.children),p(h,v)},$$slots:{default:!0}})};W(u,f=>{i.state!=="close"&&f(d)})}p(t,c),$()}function su(t,e){Q(e,!0);let n=le(e,"blockedDialog",3,!1),r=le(e,"hiddenDialog",3,!1),o=le(e,"isLastDialog",3,!1),s=le(e,"onStartClose",3,()=>{}),i=le(e,"onClose",3,()=>{});const l=O(()=>o()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=$n();Ee(()=>(c(),()=>{u()}));const{checkMobileSize:d}=Qn();var f=V(),h=B(f);{var g=_=>{Xc(_,{get shownDialog(){return e.shownDialog},get blocked(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return e.onStartBack},get onClose(){return i()}})},v=_=>{ou(_,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return a(l)},get onStartClose(){return s()},get onClose(){return i()}})};W(h,_=>{d()?_(g):_(v,!1)})}p(t,f),$()}function Za(t,e){Q(e,!0);const{back:n}=It(),{clearStackPages:r}=Lt();let o=le(e,"blocked",3,!1),s=le(e,"isLastDialog",3,!1),i=le(e,"onBack",3,()=>{}),l=le(e,"onClosed",3,()=>{});const{checkBlockedDialog:c,checkUnBlockedBackDialog:u}=$n(),d=O(()=>o()||e.hidden||c()),f=O(()=>u()&&!s()),h=()=>{(!a(d)||a(d)&&a(f))&&e.shown&&(n(),i()())},g=()=>{((!a(d)||a(d)&&a(f))&&e.shown||!e.shown)&&r()},v=()=>{l()()};{let _=O(()=>a(d)&&e.shown);su(t,{get shownDialog(){return e.shown},get blockedDialog(){return a(_)},get unBlockedBack(){return a(f)},get hiddenDialog(){return e.hidden},get isLastDialog(){return s()},onStartBack:h,onStartClose:g,onClose:v,children:(w,k)=>{var E=V(),y=B(E);he(y,()=>e.children),p(w,E)},$$slots:{default:!0}})}$()}var iu=U('<h1 class="svelte-1ky72l5"><!></h1>');function lu(t,e){var n=iu(),r=A(n);he(r,()=>e.children),p(t,n)}var cu=U('<div class="block svelte-ujk4k"><!> <div class="container svelte-ujk4k"><!> <!></div></div>');function uu(t,e){Q(e,!0);const{blockDialog:n}=$n(),{pushStackPages:r,clearStackPages:o}=Lt(),{initLocalAccount:s}=Pa();let i=z("idle");const l=()=>{m(i,"loading"),r(K.Auth)},c=async()=>{m(i,"loading"),Sl(),await s(),n(!1),o()};Pe(()=>{n(a(i)==="idle"||a(i)==="loading")}),Ee(()=>(n(!0),()=>{n(!1)}));var u=cu(),d=A(u);lu(d,{children:(v,_)=>{var w=De("use app");p(v,w)}});var f=j(d,2),h=A(f);Ft(h,{onClick:l,fullWidth:!0,children:(v,_)=>{var w=De("cloud account");p(v,w)},$$slots:{default:!0}});var g=j(h,2);Ft(g,{onClick:c,fullWidth:!0,type:"secondary",children:(v,_)=>{var w=De("without account");p(v,w)},$$slots:{default:!0}}),p(t,u),$()}var du=U('<div class="svelte-1x9a4ve"><!></div>');function Fe(t,e){Q(e,!0);const{setDialogPageHeight:n}=Aa();let r=z(null);Ee(()=>{a(r)&&(a(r).getBoundingClientRect(),a(r).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(a(r))return i.observe(a(r)),()=>{a(r)&&i.unobserve(a(r)),i.disconnect()}});var o=du(),s=A(o);he(s,()=>e.children),Nt(o,i=>m(r,i),()=>a(r)),p(t,o),$()}var fu=U('<div class="svelte-stjbkr"><p class="svelte-stjbkr">Page not found</p> <!></div>');function vu(t,e){Q(e,!1);const{navigate:n}=It(),r=i=>{i.preventDefault(),n("/")};ll();var o=fu(),s=j(A(o),2);Ft(s,{element:"a",href:"/",onClick:r,children:(i,l)=>{var c=De("close");p(i,c)},$$slots:{default:!0}}),p(t,o),$()}const hu="modulepreload",gu=function(t){return"/"+t},Xa={},je=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(n.map(u=>{if(u=gu(u),u in Xa)return;Xa[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":hu,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((g,v)=>{h.addEventListener("load",g),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var _u=U('<div class="svelte-10xfz1h"><p class="svelte-10xfz1h">Something went wrong. Please reload the page</p> <!></div>');function pu(t){var e=_u(),n=j(A(e),2);Ft(n,{onClick:()=>location.reload(),children:(r,o)=>{var s=De("Reload");p(r,s)},$$slots:{default:!0}}),p(t,e)}var mu=U('<div><!> <div class="loader svelte-m0sno1"></div></div>');function bs(t,e){Q(e,!0);let n=z(!1);Ee(()=>{const s=setTimeout(()=>{m(n,!0)},200);return()=>{clearTimeout(s)}});var r=mu(),o=A(r);he(o,()=>e.children??ye),de(()=>me(r,1,pe(["block",{shown:a(n)}]),"svelte-m0sno1")),p(t,r),$()}var wu=U('<div class="svelte-1mu1b44"><!></div>');function yu(t,e){Q(e,!0);const{getDialogPageHeight:n}=Aa(),r=O(n);var o=wu(),s=A(o);bs(s,{}),de(()=>Vn(o,`min-height: ${a(r)??""}px;`)),p(t,o),$()}function qe(t,e){Q(e,!0);const n={},r=Object.assign({"./Pages/About.svelte":()=>je(()=>import("./D9xXDY_6.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>je(()=>import("./DWeEU5eI.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>je(()=>import("./Dxf4czsY.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>je(()=>import("./BT5bDEC5.js"),__vite__mapDeps([8,9])),"./Pages/ClearStore.svelte":()=>je(()=>import("./mwYxHFzN.js"),__vite__mapDeps([10,11])),"./Pages/ConfirmAccessKey.svelte":()=>je(()=>import("./DWUa9vjk.js"),__vite__mapDeps([12,4,3,13,14,15,16])),"./Pages/EditNote.svelte":()=>je(()=>import("./RIDlryeo.js"),__vite__mapDeps([17,18,19,14,15,20,21,22])),"./Pages/Exit.svelte":()=>je(()=>import("./CmldyFRg.js"),__vite__mapDeps([23,24])),"./Pages/ExportData.svelte":()=>je(()=>import("./BSUYNiSI.js"),__vite__mapDeps([25,26])),"./Pages/ImportData.svelte":()=>je(()=>import("./CZBw3cXV.js"),__vite__mapDeps([27,19,14,15,20,28])),"./Pages/NewNote.svelte":()=>je(()=>import("./CCXDc9PN.js"),__vite__mapDeps([29,18,19,14,15,20,21])),"./Pages/Settings.svelte":()=>je(()=>import("./By4Wek97.js"),__vite__mapDeps([30,31])),"./Pages/Signin.svelte":()=>je(()=>import("./DehMsFPW.js"),__vite__mapDeps([32,4,3,13,33])),"./Pages/Signup.svelte":()=>je(()=>import("./B4UsHhlc.js"),__vite__mapDeps([34,13,4,3,35])),"./Pages/Subscription.svelte":()=>je(()=>import("./b-yn0r5e.js"),__vite__mapDeps([36,37])),"./Pages/Sync.svelte":()=>je(()=>import("./Dqes_gp-.js"),__vite__mapDeps([38,39]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(r[c]){const u=r[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var s=V(),i=B(s);jo(i,()=>o(e.page),l=>{yu(l,{})},(l,c)=>{const u=O(()=>a(c).default);var d=V(),f=B(d);qo(f,()=>a(u),(h,g)=>{g(h,{get params(){return e.params},get hidden(){return e.hidden}})}),p(l,d)},l=>{pu(l)}),p(t,s),$()}var bu=U('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Ss(t,e){let n=O(()=>e.style==="selected"?"45deg":"0deg");var r=bu();r.__click=function(...c){e.onClick?.apply(this,c)};var o=A(r),s=j(o);be(s,()=>({"--size":e.size==="small"?"10px":"12px","--rotate":a(n)})),ke(s.lastChild,{name:"plus"});var i=j(s,2);{var l=c=>{nt(c,{children:(u,d)=>{var f=De("add tag");p(u,f)}})};W(i,c=>{e.title===void 0&&c(l)})}de(()=>{Ae(r,"type",e.type),me(r,1,pe([{selectedTag:e.style==="selected",small:e.size==="small",empty:e.title===void 0}]),"svelte-uu8a24"),Qt(o,`${e.title??""} `)}),p(t,r)}it(["click"]);var Su=U("<div></div>");function Ja(t,e){Q(e,!0);let n=le(e,"mobile",3,!1);var r=Su();Hr(r,20,()=>e.tags,o=>o,(o,s)=>{Ss(o,{get title(){return s},onClick:()=>e.handleTagClick(s)})}),de(()=>me(r,1,pe(["tags",{mobile:n()}]),"svelte-1c53r32")),p(t,r),$()}var ku=U("<div></div>");function Qa(t,e){Q(e,!0);var n=V(),r=B(n);{var o=s=>{var i=ku();me(i,1,pe(["tags","selectedTags"]),"svelte-58z9m1"),Hr(i,20,()=>e.selectedTags,l=>l,(l,c)=>{Ss(l,{get title(){return c},onClick:()=>e.handleSelectedTagClick(c),style:"selected"})}),p(s,i)};W(r,s=>{e.selectedTags.size>0&&s(o)})}p(t,n),$()}var Cu=(t,e,n)=>{e(),n("/",{full:!0})(t)},Eu=U('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Pu=(t,e,n)=>{e(),n(K.Bin,{full:!0})(t)},xu=U('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Au=U('<div class="sidebarFixed svelte-ltt61h"><div class="nav svelte-ltt61h"><!> <div class="menu svelte-ltt61h"><a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="searchWrapper svelte-ltt61h"><!></div> <!></div> <!>',1),Du=U('<div class="sidebar svelte-ltt61h"><div class="sidebarFixed svelte-ltt61h"><!></div> <!></div>');function Tu(t,e){Q(e,!0);const{checkMobileSize:n}=Qn(),{sidebarClose:r}=Ca(),{getAppLocation:o}=It(),{getPageUrl:s,createHandlePage:i,getStackPagesFormUrl:l}=Lt(),c=Xo(),u=O(()=>o().pathname),{getSelectedTags:d,addTag:f,removeTag:h}=ts();let g=O(d);const{checkNotesInBin:v}=jr();let _=le(e,"getNotes",3,()=>[]),w=le(e,"mode",3,"notes"),k=null;function E(){return k||(k=je(()=>import("./BW_TwkQc.js"),__vite__mapDeps([40,41]))),k}const y=Y=>{f(Y)},N=Y=>{h(Y)},L=()=>{if(a(g).has("inbox"))return[];const Y=[],X=Array.from(a(g).values());for(const re of _()()||[])if(re.data&&!(re.data.deletedAt&&w()==="notes")&&!(!re.data.deletedAt&&w()==="bin")){if(a(g).size===0){for(const H of re?.data?.tags||[])Y.includes(H)||Y.push(H);for(const H of re?.data?.draft?.tags||[])Y.includes(H)||Y.push(H);continue}if(re.data&&X.every(H=>re.data?.tags.includes(H)))for(const H of re.data.tags)!a(g).has(H)&&!Y.includes(H)&&Y.push(H);if(re&&re.data.draft&&X.every(H=>re.data?.draft?.tags.includes(H)))for(const H of re.data.draft.tags)!a(g).has(H)&&!Y.includes(H)&&Y.push(H)}return Y};let P=O(()=>L().filter(Y=>c.value===""||Y.toLowerCase().indexOf(c.value.toLowerCase())!==-1).sort((Y,X)=>Y==="inbox"?-1:X==="inbox"?1:Y.localeCompare(X))),S=O(n);Ee(()=>{a(S)&&E()});const{checkExistedDialog:x}=$n();let T=O(()=>l().length>0||x());var Z=V(),ce=B(Z);{var se=Y=>{var X=V(),re=B(X);jo(re,E,null,(H,te)=>{const J=O(()=>a(te).default);var G=V(),R=B(G);qo(R,()=>a(J),(F,ve)=>{ve(F,{get blocked(){return a(T)},children:(we,D)=>{var M=Au(),b=B(M),C=A(b),q=A(C);ps(q,{});var ie=j(q,2),ee=A(ie),ge=O(()=>i(K.Settings));ee.__click=function(...xe){a(ge)?.apply(this,xe)};var ae=A(ee);be(ae,()=>({"--size":"24px"})),ke(ae.lastChild,{name:"settings"});var Ne=j(ae,2);nt(Ne,{children:(xe,Ge)=>{var Ve=De("Settings");p(xe,Ve)}});var Te=j(ee,2),$e=O(()=>i(K.Sync));Te.__click=function(...xe){a($e)?.apply(this,xe)};var He=A(Te);be(He,()=>({"--size":"24px"})),ke(He.lastChild,{name:"sync"});var Ue=j(He,2);nt(Ue,{children:(xe,Ge)=>{var Ve=De("Sync");p(xe,Ve)}});var Oe=j(Te,2);{var yt=xe=>{var Ge=Eu();Ge.__click=[Cu,r,i];var Ve=A(Ge);be(Ve,()=>({"--size":"24px"})),ke(Ve.lastChild,{name:"note"});var Vt=j(Ve,2);nt(Vt,{children:(St,an)=>{var on=De("Notes");p(St,on)}}),de(St=>Ae(Ge,"href",St),[()=>s("/",{full:!0})]),p(xe,Ge)},et=xe=>{var Ge=V(),Ve=B(Ge);{var Vt=St=>{var an=xu();an.__click=[Pu,r,i];var on=A(an);be(on,()=>({"--size":"24px"})),ke(on.lastChild,{name:"bin"});var qt=j(on,2);nt(qt,{children:(Wt,Ur)=>{var Vr=De("Bin");p(Wt,Vr)}}),de(Wt=>Ae(an,"href",Wt),[()=>s(K.Bin,{full:!0})]),p(St,an)};W(Ve,St=>{v()&&St(Vt)},!0)}p(xe,Ge)};W(Oe,xe=>{a(u)===`/${K.Bin}`?xe(yt):xe(et,!1)})}var rt=j(C,2),bt=A(rt);da(bt,{placeholder:"Search tag",get value(){return c.value},set value(xe){c.value=xe}});var jt=j(rt,2);Qa(jt,{get selectedTags(){return a(g)},handleSelectedTagClick:N});var Ut=j(b,2);Ja(Ut,{get tags(){return a(P)},handleTagClick:y,mobile:!0}),de((xe,Ge)=>{Ae(ee,"href",xe),Ae(Te,"href",Ge)},[()=>s(K.Settings),()=>s(K.Sync)]),p(we,M)},$$slots:{default:!0}})}),p(H,G)}),p(Y,X)},ne=Y=>{var X=Du(),re=A(X),H=A(re);Qa(H,{get selectedTags(){return a(g)},handleSelectedTagClick:N});var te=j(re,2);Ja(te,{get tags(){return a(P)},handleTagClick:y}),p(Y,X)};W(ce,Y=>{a(S)?Y(se):Y(ne,!1)})}p(t,Z),$()}it(["click"]);const Nu=(t,e,n,r)=>{e.noteData.pinnedAt?(n(e.noteId,!1),wn("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),wn("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),m(r,!0)},Lu=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),wn("Link copied"),m(n,!0)};var Bu=U('<li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),Iu=(t,e,n)=>{m(e,!0),m(n,!0)},Mu=U('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),Ou=(t,e,n)=>{m(e,!0),m(n,!0)},Ru=(t,e,n)=>{m(e,!0),m(n,!0)},Fu=U('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete from bin</button></li>',1),zu=U('<ul class="menu svelte-8ve3pe"><!> <li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),Hu=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ju=U("<!> <!>",1);function Uu(t,e){Q(e,!0);const n=(x,T=ye)=>{var Z=zu(),ce=A(Z);{var se=G=>{var R=Bu(),F=A(R);F.__click=[Lu,e,u];var ve=A(F);be(ve,()=>({"--size":"22px"})),ke(ve.lastChild,{name:"copy"}),de(()=>me(F,1,pe(["button",{buttonMenuDialog:T()}]),"svelte-8ve3pe")),p(G,R)};W(ce,G=>{T()&&e.noteData.url&&G(se)})}var ne=j(ce,2),Y=A(ne);Y.__click=[Nu,e,s,u];var X=A(Y);{let G=O(()=>e.noteData.pinnedAt?"pin-cancel":"pin");be(X,()=>({"--size":"22px"})),ke(X.lastChild,{get name(){return a(G)}})}var re=j(X),H=j(ne,2);{var te=G=>{var R=Mu(),F=A(R);F.__click=[Iu,d,u];var ve=A(F),we=A(ve);be(we,()=>({"--size":"18px"})),ke(we.lastChild,{name:"bin"}),de(()=>me(F,1,pe(["button",{buttonMenuDialog:T()}]),"svelte-8ve3pe")),p(G,R)},J=G=>{var R=Fu(),F=B(R),ve=A(F);ve.__click=[Ou,f,u];var we=A(ve),D=A(we);be(D,()=>({"--size":"18px"})),ke(D.lastChild,{name:"bin-cancel"});var M=j(F,2),b=A(M);b.__click=[Ru,h,u];var C=A(b),q=A(C);be(q,()=>({"--size":"18px"})),ke(q.lastChild,{name:"bin"}),de(()=>{me(ve,1,pe(["button",{buttonMenuDialog:T()}]),"svelte-8ve3pe"),me(b,1,pe(["button",{buttonMenuDialog:T()}]),"svelte-8ve3pe")}),p(G,R)};W(H,G=>{l()==="notes"?G(te):G(J,!1)})}de(()=>{me(Y,1,pe(["button",{buttonMenuDialog:T()}]),"svelte-8ve3pe"),Qt(re,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),p(x,Z)},{moveNoteToBin:r,deleteNote:o,pinNote:s,restoreNoteFromBin:i}=jr();let l=le(e,"mode",3,"notes"),c=le(e,"shownMenu",15),u=z(!1),d=z(!1),f=z(!1),h=z(!1);const{checkMobileSize:g}=Qn();let v=O(g);const _=()=>{o(e.noteId),wn("Draft deleted")},w=async()=>{r(e.noteId),wn("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},k=()=>{i(e.noteId),wn("Note restored from bin",{onCancel:()=>{r(e.noteId)}})},E=()=>{a(d)?(m(d,!1),e.noteData.type==="draft"?_():w()):a(f)&&(m(f,!1),k()),c(!1),m(u,!1)};var y=ju(),N=B(y);{var L=x=>{var T=V(),Z=B(T);{var ce=ne=>{Da(ne,{get startClose(){return a(u)},onClosed:E,children:(Y,X)=>{n(Y,()=>!0)},$$slots:{default:!0}})},se=ne=>{var Y=Hu(),X=B(Y);be(X,()=>({"--bottom":"-90px","--right":"20px"})),ws(X.lastChild,{get startClose(){return a(u)},get positionTop(){return e.showMenuUp},onClosed:E,children:(re,H)=>{n(re,()=>!1)},$$slots:{default:!0}}),p(ne,Y)};W(Z,ne=>{a(v)?ne(ce):ne(se,!1)})}p(x,T)};W(N,x=>{c()&&x(L)})}var P=j(N,2);{var S=x=>{ys(x,{title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:()=>{o(e.noteId),m(h,!1)},onCancel:()=>{m(h,!1)}})};W(P,x=>{a(h)&&x(S)})}p(t,y),$()}it(["click"]);const Vu=(t,e)=>{m(e,!0)},qu=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),wn("Link copied"),m(n,!1)},Wu=(t,e)=>{m(e,!0)},Yu=(t,e)=>{m(e,!1)},Ku=(t,e,n,r)=>{t.preventDefault(),e.noteData.type==="draft"?n(`${K.NewNote}`):n(`${K.EditNote}?id=${e.noteId}`),m(r,!1)};var Gu=U('<div class="iconPlaceholder svelte-1jg44o9"></div>'),Zu=U('<img loading="lazy" class="noteIcon" height="16" width="16" alt=""/>'),Xu=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ju=U('<div class="noteIconWrapper svelte-1jg44o9"><!></div>'),Qu=U('<button class="button svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),$u=(t,e)=>{m(e,!1)},ed=U('<!> <a target="_blank" rel="noopener noreferrer" class="button openLink svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),td=U('<li><!> <a class="noteLink svelte-1jg44o9" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function nd(t,e){Q(e,!0);const{pushStackPages:n}=Lt(),{getFaviconEnabled:r}=xl();let o=le(e,"mode",3,"notes"),s=z(!1),i=z(!1),l=z(!1),c=O(r);const{checkMobileSize:u}=Qn(),d=x=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(x).host}.ico`}catch{return""}},f=e.noteData.url||e.noteData.draft?.url||"";var h=td();h.__focusin=[Wu,i],h.__focusout=[Yu,i];var g=A(h);{var v=x=>{var T=Ju(),Z=A(T);{var ce=ne=>{var Y=V(),X=B(Y);{var re=te=>{var J=Gu();p(te,J)},H=te=>{var J=Zu();de(G=>Ae(J,"src",G),[()=>d(f)]),Sa("error",J,()=>{m(l,!0)}),p(te,J)};W(X,te=>{a(l)?te(re):te(H,!1)})}p(ne,Y)},se=ne=>{var Y=Xu(),X=B(Y);be(X,()=>({"--size":"16px"})),ke(X.lastChild,{name:"note"}),p(ne,Y)};W(Z,ne=>{f?ne(ce):ne(se,!1)})}p(x,T)};W(g,x=>{a(c)&&x(v)})}var _=j(g,2);_.__click=[Ku,e,n,i];var w=A(_),k=j(_,2),E=A(k);{var y=x=>{var T=ed(),Z=B(T);{var ce=X=>{var re=Qu();re.__click=[qu,e,i];var H=A(re);be(H,()=>({"--size":"20px"})),ke(H.lastChild,{name:"copy"});var te=j(H,2);nt(te,{children:(J,G)=>{var R=De("copy link");p(J,R)}}),de(()=>Ae(re,"tabindex",e.focusHidden?-1:0)),p(X,re)};W(Z,X=>{u()||X(ce)})}var se=j(Z,2);se.__click=[$u,i];var ne=A(se);be(ne,()=>({"--size":"18px"})),ke(ne.lastChild,{name:"open"});var Y=j(ne,2);nt(Y,{children:(X,re)=>{var H=De();de(()=>Qt(H,e.noteData.draft?.name||e.noteData.name||"unknown")),p(X,H)}}),de(()=>{Ae(se,"href",f),Ae(se,"tabindex",e.focusHidden?-1:0)}),p(x,T)};W(E,x=>{f&&x(y)})}var N=j(E,2);N.__click=[Vu,s],me(N,1,pe(["button","buttonMenu"]),"svelte-1jg44o9");var L=A(N);be(L,()=>({"--size":"18px","--rotate":"90deg"})),ke(L.lastChild,{name:"menu"});var P=j(L,2);nt(P,{children:(x,T)=>{var Z=De("show menu");p(x,Z)}});var S=j(k,2);Uu(S,{get mode(){return o()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return a(s)},set shownMenu(x){m(s,x,!0)}}),de((x,T)=>{me(h,1,x,"svelte-1jg44o9"),Ae(_,"tabindex",e.focusHidden?-1:0),Ae(_,"href",T),Qt(w,e.noteData?.draft?.name||e.noteData?.name||"unknown"),me(k,1,pe(["noteMenuWrapper",{noteMenuWrapperActive:a(i)}]),"svelte-1jg44o9"),Ae(N,"tabindex",e.focusHidden?-1:0)},[()=>pe(["record",{pinned:!!e.noteData.pinnedAt,draft:!!e.noteData.draft}]),()=>`/?stackPages=${encodeURIComponent(`${K.EditNote}?id=${e.noteId}`)}`]),p(t,h),$()}it(["focusin","focusout","click"]);var qn,ks,Cs;class rd{constructor(e){_e(this,qn);gt(this,"data");gt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),Re(this,qn,ks).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,Re(this,qn,Cs).call(this)),e}isEmpty(){return this.data.length===0}}qn=new WeakSet,ks=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(n,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},Cs=function(){let e=0;const n=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<n&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<n&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class ad{constructor(e,n){gt(this,"heap");gt(this,"done");gt(this,"cache",[]);this.heap=new rd(n);for(const r of e)this.heap.insert(r);this.done=!1}get(e,n){const r=this.cache.slice(e,n);for(;r.length<n-e&&!this.heap.isEmpty();){const o=this.heap.extractMin();o!==void 0&&(this.cache.push(o),r.push(o))}return this.heap.isEmpty()&&(this.done=!0),r}}var od=U('<p class="message">No notes in bin</p>'),sd=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),id=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),ld=U('<p class="message">No notes found</p> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div> <div>or</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),cd=U('<div class="emptyStore svelte-106i4nx"><!></div>'),ud=U("<span>Back to notes</span>"),dd=U('<div class="emptyMessage svelte-106i4nx">No notes in bin</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),fd=U('<div class="emptyMessage svelte-106i4nx">No notes found</div>'),vd=U('<div class="feed svelte-106i4nx"><ul class="svelte-106i4nx"></ul></div>'),hd=U('<div class="wrapperFeed svelte-106i4nx"><div class="wrapperContainer svelte-106i4nx"><!></div></div>');function gd(t,e){Q(e,!0);let n=le(e,"getNotes",3,()=>[]),r=le(e,"mode",3,"notes");const{getScrollContainer:o}=xa(),{createHandlePage:s,getPageUrl:i}=Lt(),{getSelectedTags:l}=ts(),{getFeedOrder:c}=Qo(),u=Ko();let d=54,f=z(0),h=z(0),g=z(0),v=z(0),_=[],w=z(0),k=z(null),E=O(o),y=null,N=null;const L=O(l);Pe(()=>{a(L),a(Z),a(E)?.scrollTo(0,0)});const{enable:P}=us(),S=()=>{P(),y||(y=requestAnimationFrame(()=>{const R=a(E)?.scrollTop||0;m(g,R,!0);const F=Math.ceil(a(f)/d);m(h,Math.floor(R/(d*F))*(d*F)),y=null}))},x=()=>{N||(N=requestAnimationFrame(()=>{m(f,window.innerHeight-180||0,!0);const R=a(E)?.scrollTop||0;m(g,R,!0);const F=Math.ceil(a(f)/d);m(h,Math.floor(R/(d*F))*(d*F)),N=null}))};Ee(()=>{x(),S()});const T=()=>{S()};Pe(()=>(a(E)?.addEventListener("scroll",T),window.addEventListener("resize",x),()=>{a(E)?.removeEventListener("scroll",T),window.removeEventListener("resize",x)}));const Z=O(c);Pe(()=>{const R=n()()||[],F=[],ve=Array.from(a(L).values());for(let we=R.length-1;we>=0;we--){if(!R[we]||!R[we].data)continue;const D=R[we];r()==="notes"&&D?.data.deletedAt||r()==="bin"&&!D?.data.deletedAt||a(L).size&&ve.some(M=>!D.data?.tags.includes(M))&&(!D.data.draft||ve.some(M=>!D.data?.draft?.tags.includes(M)))||u&&!(D.data.name.toLowerCase().includes(u.value.toLowerCase())||D.data.url.toLowerCase().includes(u.value.toLowerCase())||D.data.text.toLowerCase().includes(u.value.toLowerCase()))||F.push(D)}m(v,F.length,!0),_=F,m(w,Date.now(),!0)}),Pe(()=>{a(Z),a(w),m(k,new ad(_,(R,F)=>{if(!R||!F||!R.data||!F.data)return 0;if(R.data.pinnedAt&&!F.data.pinnedAt)return-1;if(!R.data.pinnedAt&&F.data.pinnedAt)return 1;if(R.data.pinnedAt&&F.data.pinnedAt){if(R.data.pinnedAt<F.data.pinnedAt)return 1;if(R.data.pinnedAt>F.data.pinnedAt)return-1}if(R.data.draft&&!F.data.draft)return-1;if(!R.data.draft&&F.data.draft)return 1;if(R.data.draft&&F.data.draft){if(R.data.draft.updatedAt<F.data.draft.updatedAt)return 1;if(R.data.draft.updatedAt>F.data.draft.updatedAt)return-1}switch(a(Z)){case"newest":return R.data.updatedAt<F.data.updatedAt?1:-1;case"oldest":return R.data.updatedAt>F.data.updatedAt?1:-1;case"AtoZ":return R.data.name.localeCompare(F.data.name);case"ZtoA":return F.data.name.localeCompare(R.data.name);default:return 0}}),!0)});const ce=O(()=>a(v)*d);let ne=O(()=>{a(w);const R=Math.ceil(a(f)/d);let F=Math.floor(a(h)/d);return F=F-Math.min(F,R),a(k)?.get(F,F+R*3)||[]}),Y=O(()=>d*Math.ceil(a(f)/d));const X=O(()=>a(h)-Math.min(a(h),a(Y)));var re=hd(),H=A(re),te=A(H);{var J=R=>{bs(R,{})},G=R=>{var F=V(),ve=B(F);{var we=M=>{var b=cd(),C=A(b);{var q=ee=>{var ge=od();p(ee,ge)},ie=ee=>{var ge=ld(),ae=j(B(ge),2),Ne=A(ae);{let He=O(()=>i(K.NewNote)),Ue=O(()=>s(K.NewNote));Ft(Ne,{element:"a",get href(){return a(He)},get onClick(){return a(Ue)},children:(Oe,yt)=>{var et=sd(),rt=B(et);be(rt,()=>({"--size":"18px","--color":"#b0b0b0"})),ke(rt.lastChild,{name:"plus"}),p(Oe,et)},$$slots:{default:!0}})}var Te=j(ae,4),$e=A(Te);{let He=O(()=>i(K.ImportData)),Ue=O(()=>s(K.ImportData));Ft($e,{element:"a",get href(){return a(He)},get onClick(){return a(Ue)},children:(Oe,yt)=>{var et=id(),rt=B(et);be(rt,()=>({"--size":"18px","--color":"#b0b0b0"})),ke(rt.lastChild,{name:"import"}),p(Oe,et)},$$slots:{default:!0}})}p(ee,ge)};W(C,ee=>{r()==="bin"?ee(q):ee(ie,!1)})}p(M,b)},D=M=>{var b=V(),C=B(b);{var q=ee=>{var ge=dd(),ae=j(B(ge),2),Ne=A(ae);{let Te=O(()=>i("/",{full:!0})),$e=O(()=>s("/",{full:!0}));Ft(Ne,{element:"a",get href(){return a(Te)},get onClick(){return a($e)},children:(He,Ue)=>{var Oe=ud();p(He,Oe)},$$slots:{default:!0}})}p(ee,ge)},ie=ee=>{var ge=V(),ae=B(ge);{var Ne=$e=>{var He=fd();p($e,He)},Te=$e=>{var He=vd(),Ue=A(He);Hr(Ue,23,()=>a(ne),Oe=>Oe.data,(Oe,yt,et)=>{var rt=V(),bt=B(rt);{var jt=Ut=>{{let xe=O(()=>a(et)*d<a(g)-a(X)-d/2||a(et)*d>a(g)-a(X)+Math.floor(a(f)/d)*d),Ge=O(()=>(a(et)+3)*d<a(g)-a(X)-d/2||(a(et)+3)*d>a(g)-a(X)+Math.floor(a(f)/d)*d);nd(Ut,{get mode(){return r()},get focusHidden(){return a(xe)},get showMenuUp(){return a(Ge)},get noteId(){return a(yt).id},get noteData(){return a(yt).data}})}};W(bt,Ut=>{a(yt).data&&Ut(jt)})}p(Oe,rt)}),de(Oe=>{Vn(He,`min-height: ${Oe??""}px`),Vn(Ue,`transform: translateY(${a(X)??""}px);`)},[()=>Math.max((a(ce)>a(f),a(ce)),0)]),p($e,He)};W(ae,$e=>{a(ne).length===0?$e(Ne):$e(Te,!1)},!0)}p(ee,ge)};W(C,ee=>{r()==="bin"&&e.countNotesInBin()===0?ee(q):ee(ie,!1)},!0)}p(M,b)};W(ve,M=>{(n()()||[]).length===0||r()==="notes"&&(n()()||[]).length-e.countNotesInBin()===0?M(we):M(D,!1)},!0)}p(R,F)};W(te,R=>{e.readyNotes?R(G,!1):R(J)})}p(t,re),$()}var _d=U('<!> <div class="content svelte-k57gez"><!></div>',1);function pd(t,e){Q(e,!0);const{getAppLocation:n}=It(),{getGetNotes:r,isInitedNotes:o,countNotesInBin:s}=jr(),i=O(o),l=O(r),c=O(()=>n().pathname);var u=_d(),d=B(u);{let g=O(()=>a(c)==="/bin"?"bin":"notes");Tu(d,{get mode(){return a(g)},get getNotes(){return a(l)}})}var f=j(d,2),h=A(f);{let g=O(()=>a(c)==="/bin"?"bin":"notes");gd(h,{get mode(){return a(g)},get getNotes(){return a(l)},get countNotesInBin(){return s},get readyNotes(){return a(i)}})}p(t,u),$()}const $a=(t,e=ye,n=ye,r)=>{let o=Or(()=>Hs(r?.(),!1));var s=V(),i=B(s);{var l=u=>{Fe(u,{children:(d,f)=>{qe(d,{get hidden(){return a(o)},get page(){return K.Settings}})},$$slots:{default:!0}})},c=u=>{var d=V(),f=B(d);{var h=v=>{Fe(v,{children:(_,w)=>{qe(_,{get hidden(){return a(o)},get page(){return K.NewNote}})},$$slots:{default:!0}})},g=v=>{var _=V(),w=B(_);{var k=y=>{Fe(y,{children:(N,L)=>{qe(N,{get params(){return n()},get hidden(){return a(o)},get page(){return K.EditNote}})},$$slots:{default:!0}})},E=y=>{var N=V(),L=B(N);{var P=x=>{Fe(x,{children:(T,Z)=>{qe(T,{get hidden(){return a(o)},get page(){return K.ImportData}})},$$slots:{default:!0}})},S=x=>{var T=V(),Z=B(T);{var ce=ne=>{Fe(ne,{children:(Y,X)=>{qe(Y,{get hidden(){return a(o)},get page(){return K.ExportData}})},$$slots:{default:!0}})},se=ne=>{var Y=V(),X=B(Y);{var re=te=>{Fe(te,{children:(J,G)=>{qe(J,{get hidden(){return a(o)},get page(){return K.ClearStore}})},$$slots:{default:!0}})},H=te=>{var J=V(),G=B(J);{var R=ve=>{Fe(ve,{children:(we,D)=>{uu(we,{})},$$slots:{default:!0}})},F=ve=>{var we=V(),D=B(we);{var M=C=>{Fe(C,{children:(q,ie)=>{qe(q,{get hidden(){return a(o)},get page(){return K.Auth}})},$$slots:{default:!0}})},b=C=>{var q=V(),ie=B(q);{var ee=ae=>{Fe(ae,{children:(Ne,Te)=>{qe(Ne,{get hidden(){return a(o)},get page(){return K.Signup}})},$$slots:{default:!0}})},ge=ae=>{var Ne=V(),Te=B(Ne);{var $e=Ue=>{Fe(Ue,{children:(Oe,yt)=>{qe(Oe,{get hidden(){return a(o)},get page(){return K.Signin}})},$$slots:{default:!0}})},He=Ue=>{var Oe=V(),yt=B(Oe);{var et=bt=>{Fe(bt,{children:(jt,Ut)=>{qe(jt,{get hidden(){return a(o)},get page(){return K.AccessKeys}})},$$slots:{default:!0}})},rt=bt=>{var jt=V(),Ut=B(jt);{var xe=Ve=>{Fe(Ve,{children:(Vt,St)=>{qe(Vt,{get hidden(){return a(o)},get page(){return K.Account}})},$$slots:{default:!0}})},Ge=Ve=>{var Vt=V(),St=B(Vt);{var an=qt=>{Fe(qt,{children:(Wt,Ur)=>{qe(Wt,{get hidden(){return a(o)},get page(){return K.ConfirmAccessKey}})},$$slots:{default:!0}})},on=qt=>{var Wt=V(),Ur=B(Wt);{var Vr=Pn=>{Fe(Pn,{children:(hr,Ta)=>{qe(hr,{get hidden(){return a(o)},get page(){return K.Exit}})},$$slots:{default:!0}})},Es=Pn=>{var hr=V(),Ta=B(hr);{var Ps=xn=>{Fe(xn,{children:(gr,Na)=>{qe(gr,{get hidden(){return a(o)},get page(){return K.Sync}})},$$slots:{default:!0}})},xs=xn=>{var gr=V(),Na=B(gr);{var As=An=>{Fe(An,{children:(_r,La)=>{qe(_r,{get hidden(){return a(o)},get page(){return K.Subscription}})},$$slots:{default:!0}})},Ds=An=>{var _r=V(),La=B(_r);{var Ts=Dn=>{Fe(Dn,{children:(qr,Ls)=>{qe(qr,{get hidden(){return a(o)},get page(){return K.About}})},$$slots:{default:!0}})},Ns=Dn=>{Fe(Dn,{children:(qr,Ls)=>{vu(qr,{})},$$slots:{default:!0}})};W(La,Dn=>{e()===K.About?Dn(Ts):Dn(Ns,!1)},!0)}p(An,_r)};W(Na,An=>{e()===K.Subscription?An(As):An(Ds,!1)},!0)}p(xn,gr)};W(Ta,xn=>{e()===K.Sync?xn(Ps):xn(xs,!1)},!0)}p(Pn,hr)};W(Ur,Pn=>{e()===K.Exit?Pn(Vr):Pn(Es,!1)},!0)}p(qt,Wt)};W(St,qt=>{e()===K.ConfirmAccessKey?qt(an):qt(on,!1)},!0)}p(Ve,Vt)};W(Ut,Ve=>{e()===K.Account?Ve(xe):Ve(Ge,!1)},!0)}p(bt,jt)};W(yt,bt=>{e()===K.AccessKeys?bt(et):bt(rt,!1)},!0)}p(Ue,Oe)};W(Te,Ue=>{e()===K.Signin?Ue($e):Ue(He,!1)},!0)}p(ae,Ne)};W(ie,ae=>{e()===K.Signup?ae(ee):ae(ge,!1)},!0)}p(C,q)};W(D,C=>{e()===K.Auth?C(M):C(b,!1)},!0)}p(ve,we)};W(G,ve=>{e()===K.Start?ve(R):ve(F,!1)},!0)}p(te,J)};W(X,te=>{e()===K.ClearStore?te(re):te(H,!1)},!0)}p(ne,Y)};W(Z,ne=>{e()===K.ExportData?ne(ce):ne(se,!1)},!0)}p(x,T)};W(L,x=>{e()===K.ImportData?x(P):x(S,!1)},!0)}p(y,N)};W(w,y=>{e()===K.EditNote?y(k):y(E,!1)},!0)}p(v,_)};W(f,v=>{e()===K.NewNote?v(h):v(g,!1)},!0)}p(u,d)};W(i,u=>{e()===K.Settings?u(l):u(c,!1)})}p(t,s)};var md=U("<!> <!>",1);function wd(t,e){Q(e,!0);const{getStackPages:n}=Lt(),{getAccount:r}=Pa();let o=O(n),s=O(()=>r()!==void 0);const{checkMobileSize:i}=Qn();let l=z(Be([]));const c=O(i);Pe(()=>{a(o),a(c),ht(()=>{if(a(c))a(o).length>=a(l).length?m(l,a(o).map(w=>({page:w,shown:!0})),!0):m(l,a(l).map((w,k)=>({page:w.page,shown:k<a(o).length})),!0);else if(a(o).length>=a(l).length)m(l,a(o).map(w=>({page:w,shown:!0})),!0);else{if(a(o).length===0){m(l,[{page:a(l)[a(l).length-1].page,shown:!1}],!0);return}m(l,a(o).map(w=>({page:w,shown:!0})),!0)}})});const u=()=>{m(l,a(o).map(w=>({page:w,shown:!0})),!0)};var d=md(),f=B(d);{var h=w=>{pd(w,{})};W(f,w=>{a(s)&&w(h)})}var g=j(f,2);{var v=w=>{var k=V(),E=B(k);Hr(E,19,()=>a(l),y=>y.page,(y,N,L)=>{const P=O(()=>a(N).page.split("?")[1]),S=O(()=>a(N).page.split("?")[0]);{let x=O(()=>a(L)!==a(l).length-1&&!!a(l)[a(L)+1]?.shown),T=O(()=>a(L)===0);Za(y,{onClosed:u,get shown(){return a(N).shown},get hidden(){return a(x)},get isLastDialog(){return a(T)},children:(Z,ce)=>{{let se=O(()=>a(L)!==a(l).length-1&&!!a(l)[a(L)+1]?.shown);$a(Z,()=>a(S),()=>a(P),()=>a(se))}},$$slots:{default:!0}})}}),p(w,k)},_=w=>{var k=V(),E=B(k);{var y=N=>{const L=O(()=>a(l)[a(l).length-1].page.split("?")[1]),P=O(()=>a(l)[a(l).length-1].page.split("?")[0]);{let S=O(()=>a(l).length===1);Za(N,{onClosed:u,get shown(){return a(l)[a(l).length-1].shown},hidden:!1,get isLastDialog(){return a(S)},children:(x,T)=>{$a(x,()=>a(P),()=>a(L))},$$slots:{default:!0}})}};W(E,N=>{a(l).length>0&&N(y)},!0)}p(w,k)};W(g,w=>{i()?w(v):w(_,!1)})}p(t,d),$()}const yd=(t,e)=>{a(e)&&a(e).scrollTo({top:0})};var bd=U('<div><button class="buttonTop svelte-1n46o8q"><!> <span class="icon svelte-1n46o8q"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),Sd=U('<!> <main><div class="wrapperHeader svelte-1n46o8q"><!></div> <div class="container svelte-1n46o8q"><!></div></main> <!>',1);function kd(t,e){Q(e,!0);const{navigate:n}=It(),{hasStackPage:r,pushStackPages:o,clearStackPages:s}=Lt(),{setScrollContainer:i}=xa(),{getAccount:l,init:c}=Pa(),{getStackPagesFormUrl:u}=Lt(),{createBroadcastChannel:d,tabId:f}=Xn(),h=d(),{getSidebarState:g}=Ca();Ee(()=>{c(te=>{te===void 0?o("start"):(r("start")&&(s(),n("/")),te?m(E,te):m(E,null))});const H=async te=>{const J=JSON.parse(te.data);if(J.tabId&&J.tabId===f)return;const G=J;G.type==="initLocalAccount"||G.type==="initCloudAccount"||G.type==="updateAccount"||G.type==="disconnectCloudAccount"?(s(),n("/")):G.type==="exit"&&(s(),n("/"),setTimeout(()=>{o("start")}))};return h.addEventListener(H),()=>h.removeEventListener(H)});const v=Jn();Ee(async()=>{await new Promise(H=>setTimeout(H,100)),await Ro(),v.working=!0});let _=z(!1),w=0,k=O(()=>u().length>0),E=O(l),y=z(null);Pe(()=>{i(a(y))});const N=()=>{if(a(y)){const H=a(y).scrollTop||0;H===0?m(_,!1):!a(_)&&w>H?m(_,!0):a(_)&&w+50<H&&m(_,!1),w=H}},L=()=>{N()};Pe(()=>(a(y)?.addEventListener("scroll",L),window.addEventListener("resize",L),()=>{a(y)?.removeEventListener("scroll",L),window.removeEventListener("resize",L)}));const P=O(g);var S=Sd(),x=B(S);gc(x,{});var T=j(x,2),Z=A(T),ce=A(Z);{var se=H=>{qc(H,{})};W(ce,H=>{a(E)!==void 0&&H(se)})}var ne=j(Z,2),Y=A(ne);wd(Y,{}),Nt(T,H=>m(y,H),()=>a(y));var X=j(T,2);{var re=H=>{var te=bd(),J=A(te);J.__click=[yd,y];var G=A(J);nt(G,{children:(ve,we)=>{var D=De("top");p(ve,D)}});var R=j(G,2),F=A(R);be(F,()=>({"--rotate":"90deg","--size":"28px"})),ke(F.lastChild,{name:"back"}),de(()=>{Vn(te,`--swiping-ratio: ${v.swipingRatio}; --transition-timing-default: ${v.duration}s;`),me(te,1,pe(["wrapperButtonTop",{isAnimationOn:v.working&&!v.isSwiping,open:a(k)||a(P).type!=="closed"}]),"svelte-1n46o8q")}),p(H,te)};W(X,H=>{a(_)&&H(re)})}de(()=>{Vn(T,`--swiping-ratio: ${v.swipingRatio}; --transition-timing-default: ${v.duration}s;`),me(T,1,pe(["main",{isAnimationOn:v.working&&!v.isSwiping,open:a(k)||a(P).type!=="closed"}]),"svelte-1n46o8q")}),p(t,S),$()}it(["click"]);function Cd(t){uc(t,{children:(e,n)=>{kd(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Xi(Cd,{target:document.getElementById("app")});export{Ca as $,Pa as A,Ft as B,jr as C,Sa as D,ll as E,xd as F,le as G,lu as H,ke as I,me as J,pe as K,bs as L,Ad as M,Dd as N,Vn as O,K as P,Rl as Q,Qn as R,Nt as S,Sl as T,Ss as U,nt as V,il as W,Xn as X,xl as Y,Jn as Z,sc as _,be as a,us as a0,he as a1,ms as a2,Ae as b,A as c,p as d,Hr as e,U as f,a as g,Lt as h,$n as i,z as j,Be as k,m as l,W as m,$ as n,Ee as o,Q as p,V as q,B as r,j as s,de as t,Pe as u,it as v,De as w,Qt as x,O as y,It as z};
