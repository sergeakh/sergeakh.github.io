import{G as Q,p as N,J as z,f as y,e as K,r as E,K as B,M,s as D,t as U,b,g as l,N as V,O as X,x as Y,c as f,d,Q as W,n as q,v as Z,C as tt,z as et,i as at,u as st,j as F,o as rt,m as R,l as A,B as j,w as $,q as P,L as ot}from"./BnHyY52N.js";const lt=p=>{const s=Math.floor(Date.now()/1e3),a={};p.forEach(e=>{if(!e)return;const t=e.data.tags||["Imported"];if(t.length===0){a.ROOT||(a.ROOT=[]),a.ROOT.push(e);return}t.forEach(i=>{a[i]||(a[i]=[]),a[i].push(e)})});let o=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(a).forEach(e=>{e!=="ROOT"&&e!=="other"&&(o+=`
    <DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}">${e}</H3>
    <DL><p>`,a[e].forEach(t=>{const i=t.data.name.replace(/"/g,"&quot;");o+=`
        <DT><A HREF="${t.data.url}" ADD_DATE="${Math.floor(t.data.createdAt/1e3)||s}">${i}</A>`}),o+=`
    </DL><p>`)}),a.ROOT&&a.ROOT.forEach(e=>{const t=e.data.name.replace(/"/g,"&quot;");o+=`
    <DT><A HREF="${e.data.url}" ADD_DATE="${Math.floor(e.data.createdAt/1e3)||s}">${t}</A>`}),o+=`
</DL><p>`,a.other&&a.other.forEach(e=>{const t=e.data.name.replace(/"/g,"&quot;");o+=`
    <DT><A HREF="${e.data.url}" ADD_DATE="${Math.floor(e.data.createdAt/1e3)||s}">${t}</A>`}),o+="</DL><p>",o},nt=async p=>{const s="notes-export.json",a=JSON.stringify({notes:p}),o=new Blob([a],{type:"application/json"}),e=URL.createObjectURL(o),t=document.createElement("a");t.href=e,t.download=s,document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t),URL.revokeObjectURL(e)},0)},ct=(p,s,a)=>{s(p.target.value),a.onChange(s())};var it=y('<input type="radio"/> <label> </label>',1),dt=y('<div class="wrapper svelte-yu87bd"><fieldset class="switcher svelte-yu87bd"><!> <div class="wrapSwitcherStatus svelte-yu87bd"><div class="switcherStatus svelte-yu87bd"></div></div></fieldset></div>');function vt(p,s){const a=Q();N(s,!0);let o=z(s,"value",7);const e=`switcher-${a}`;var t=dt(),i=f(t),L=f(i);K(L,17,()=>s.items,h=>h.title,(h,v)=>{var w=it(),r=E(w);B(r,1,M(["vh","input"]),"svelte-yu87bd"),r.__change=[ct,o,s];var n=D(r,2);B(n,1,M(["switcherButton"]),"svelte-yu87bd");var m=f(n);U(()=>{b(r,"id",`${l(v).title}-${a}`),b(r,"name",e),V(r,l(v).value),X(r,l(v).value===o()),b(r,"aria-label",l(v).title),b(n,"for",`${l(v).title}-${a}`),b(n,"title",l(v).title),b(n,"aria-label",l(v).title),Y(m,l(v).title)}),d(h,w)});var S=D(L,2),C=f(S);U(h=>W(C,h),[()=>`transform: translateX(${s.items.findIndex(h=>h.value===o())*100}%)`]),d(p,t),q()}Z(["change"]);var ut=y('<h4 class="message svelte-1rr554k">Export data</h4> <div class="format-switcher svelte-1rr554k"><!> <p class="format-description svelte-1rr554k"><!></p></div> <div class="buttonContainer svelte-1rr554k"><!></div>',1),ft=y('<p class="message svelte-1rr554k">Exporting data...</p> <div class="buttonContainer svelte-1rr554k"><!></div>',1),pt=y('<p class="message svelte-1rr554k">Data exported successfully!</p> <div class="buttonContainer svelte-1rr554k"><!></div>',1),ht=y('<div class="content svelte-1rr554k"><!></div>');function Tt(p,s){N(s,!0);const{getGetNotes:a}=tt(),{closeDialogStack:o}=et(),{blockDialog:e}=at();let t=F("idle"),i=F("sync");const L=()=>{o()};st(()=>{e(l(t)==="loading")}),rt(()=>()=>{e(!1)});const S=async()=>{A(t,"loading"),setTimeout(async()=>{if(l(i)==="sync")await nt(a()()||[]).finally(async()=>{await new Promise(r=>setTimeout(r,500)),A(t,"success")});else try{const r=lt(a()()||[]),n=new Blob([r],{type:"text/html"}),m=URL.createObjectURL(n),u=document.createElement("a");u.href=m,u.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(m),A(t,"success")}catch{A(t,"success")}},0)};var C=ht(),h=f(C);{var v=r=>{var n=ut(),m=D(E(n),2),u=f(m);vt(u,{items:[{title:"Sync",value:"sync"},{title:"Bookmarks",value:"bookmarks"}],get value(){return l(i)},onChange:c=>{A(i,c,!0)}});var H=D(u,2),_=f(H);{var T=c=>{var g=$("App format for sync or backup");d(c,g)},k=c=>{var g=$("Browser bookmarks format (exports only bookmarks, not notes)");d(c,g)};R(_,c=>{l(i)==="sync"?c(T):c(k,!1)})}var O=D(m,2),x=f(O);j(x,{onClick:S,children:(c,g)=>{var I=$("Export");d(c,I)},$$slots:{default:!0}}),d(r,n)},w=r=>{var n=P(),m=E(n);{var u=_=>{var T=ft(),k=D(E(T),2),O=f(k);ot(O,{}),d(_,T)},H=_=>{var T=P(),k=E(T);{var O=x=>{var c=pt(),g=D(E(c),2),I=f(g);j(I,{onClick:L,children:(G,mt)=>{var J=$("Close");d(G,J)},$$slots:{default:!0}}),d(x,c)};R(k,x=>{l(t)==="success"&&x(O)},!0)}d(_,T)};R(m,_=>{l(t)==="loading"?_(u):_(H,!1)},!0)}d(r,n)};R(h,r=>{l(t)==="idle"?r(v):r(w,!1)})}d(p,C),q()}export{Tt as default};
