const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aDHNE1xHH.js","a/a3TquqTin.css","a/ajul9KFz9.js","a/a9q_jSmK4.js","a/aBEGDcNQV.js","a/aBrkJtqMH.css","a/av6VLYhdh.js","a/aDB02xhFr.css","a/aDrdqIeyQ.js","a/a54d_SC5m.css","a/aWz1fGPY1.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/aBwqZF37b.js","a/aY1d2PU1k.css","a/agQLnk6Oc.js","a/aC0pDz4Xa.js","a/aC2dX6fIB.css","a/awmtyBNte.js","a/aBeWFm1o7.css","a/aBlmo2At2.css","a/aCxPWBZfv.js","a/aCeh8XjKC.css","a/aCOA5dkaz.js","a/aBuZBN-f9.css","a/aB-yZFZML.js","a/aBpR5g6jV.css","a/aDAEhUa4P.js","a/aBem4Ctjp.css","a/aC2DjUKlT.js","a/aBdnakgrk.css","a/aD-hzvs5b.js","a/aB5Vv7TwJ.css","a/aCTfS-UEL.js","a/aCH18nfIo.css","a/aC4G1pmU-.js","a/aBmCDOmtp.js","a/aCb6DfA6m.css","a/aCZIc_1l7.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var gl=Object.defineProperty;var ls=t=>{throw TypeError(t)};var hl=(t,e,a)=>e in t?gl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Lt=(t,e,a)=>hl(t,typeof e!="symbol"?e+"":e,a),go=(t,e,a)=>e.has(t)||ls("Cannot "+a);var j=(t,e,a)=>(go(t,e,"read from private field"),a?a.call(t):e.get(t)),Ie=(t,e,a)=>e.has(t)?ls("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),Ae=(t,e,a,r)=>(go(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),tt=(t,e,a)=>(go(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const pl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};pl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const ml=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};ml();const wo=!1;var Vo=Array.isArray,_l=Array.prototype.indexOf,$r=Array.from,wl=Object.defineProperty,$n=Object.getOwnPropertyDescriptor,Ls=Object.getOwnPropertyDescriptors,Rs=Object.prototype,yl=Array.prototype,eo=Object.getPrototypeOf,cs=Object.isExtensible;function or(t){return typeof t=="function"}const je=()=>{};function bl(t){return typeof t?.then=="function"}function Sl(t){return t()}function yo(t){for(var e=0;e<t.length;e++)t[e]()}function Os(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function Cl(t,e,a=!1){return t===void 0?a?e():e:t}const Tt=2,Ko=4,to=8,xl=1<<24,zn=16,jn=32,Ta=64,no=128,vn=512,Mt=1024,Wt=2048,Cn=4096,Xt=8192,Mn=16384,Yo=32768,sa=65536,ds=1<<17,Fs=1<<18,tr=1<<19,zs=1<<20,An=1<<25,Ca=32768,bo=1<<21,Go=1<<22,ea=1<<23,ta=Symbol("$state"),js=Symbol("legacy props"),Tl=Symbol(""),Oa=new class extends Error{constructor(){super(...arguments);Lt(this,"name","StaleReactionError");Lt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Bs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function kl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function El(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Pl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Nl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Al(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ml(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Dl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Il(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ll(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Rl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ol=1,Fl=2,Hs=4,zl=8,jl=16,Bl=1,Hl=2,Ul=4,Wl=8,ql=16,Vl=1,Kl=2,Ct=Symbol(),Yl="http://www.w3.org/1999/xhtml";function Us(t){return t===this.v}function Gl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Ws(t){return!Gl(t,this.v)}let nr=!1,Xl=!1;function Jl(){nr=!0}const Zl=[];function fa(t,e=!1,a=!1){return zr(t,new Map,"",Zl,null,a)}function zr(t,e,a,r,o=null,s=!1){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(Vo(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var d=0;d<t.length;d+=1){var c=t[d];d in t&&(l[d]=zr(c,e,a,r,null,s))}return l}if(eo(t)===Rs){l={},e.set(t,l),o!==null&&e.set(o,l);for(var u in t)l[u]=zr(t[u],e,a,r,null,s);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return zr(t.toJSON(),e,a,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Qe=null;function Ya(t){Qe=t}function dt(t){return qs().get(t)}function ut(t,e){return qs().set(t,e),e}function fe(t,e=!1,a){Qe={p:Qe,i:!1,c:null,e:null,s:t,x:null,l:nr&&!e?{s:null,u:null,$:[]}:null}}function ve(t){var e=Qe,a=e.e;if(a!==null){e.e=null;for(var r of a)di(r)}return t!==void 0&&(e.x=t),e.i=!0,Qe=e.p,t??{}}function ar(){return!nr||Qe!==null&&Qe.l===null}function qs(t){return Qe===null&&Bs(),Qe.c??(Qe.c=new Map(Ql(Qe)||void 0))}function Ql(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let ga=[];function Vs(){var t=ga;ga=[],yo(t)}function ka(t){if(ga.length===0&&!Ba){var e=ga;queueMicrotask(()=>{e===ga&&Vs()})}ga.push(t)}function $l(){for(;ga.length>0;)Vs()}function Ks(t){var e=He;if(e===null)return Re.f|=ea,t;if((e.f&Yo)===0){if((e.f&no)===0)throw t;e.b.error(t)}else Ga(t,e)}function Ga(t,e){for(;e!==null;){if((e.f&no)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Lr=new Set;let Ue=null,jr=null,ln=null,on=[],ao=null,So=!1,Ba=!1;var Ua,Wa,ha,pa,Cr,qa,Va,xt,Co,ir,xo,Ys,Gs;const Gr=class Gr{constructor(){Ie(this,xt);Lt(this,"committed",!1);Lt(this,"current",new Map);Lt(this,"previous",new Map);Ie(this,Ua,new Set);Ie(this,Wa,new Set);Ie(this,ha,0);Ie(this,pa,0);Ie(this,Cr,null);Ie(this,qa,new Set);Ie(this,Va,new Set);Lt(this,"skipped_effects",new Set);Lt(this,"is_fork",!1)}is_deferred(){return this.is_fork||j(this,pa)>0}process(e){on=[],jr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)tt(this,xt,Co).call(this,r,a);this.is_fork||tt(this,xt,Ys).call(this),this.is_deferred()?(tt(this,xt,ir).call(this,a.effects),tt(this,xt,ir).call(this,a.render_effects)):(jr=this,Ue=null,us(a.render_effects),us(a.effects),jr=null,j(this,Cr)?.resolve()),ln=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&ea)===0&&(this.current.set(e,e.v),ln?.set(e,e.v))}activate(){Ue=this,this.apply()}deactivate(){Ue===this&&(Ue=null,ln=null)}flush(){if(this.activate(),on.length>0){if(Js(),Ue!==null&&Ue!==this)return}else j(this,ha)===0&&this.process([]);this.deactivate()}discard(){for(const e of j(this,Wa))e(this);j(this,Wa).clear()}increment(e){Ae(this,ha,j(this,ha)+1),e&&Ae(this,pa,j(this,pa)+1)}decrement(e){Ae(this,ha,j(this,ha)-1),e&&Ae(this,pa,j(this,pa)-1),this.revive()}revive(){for(const e of j(this,qa))j(this,Va).delete(e),It(e,Wt),xa(e);for(const e of j(this,Va))It(e,Cn),xa(e);this.flush()}oncommit(e){j(this,Ua).add(e)}ondiscard(e){j(this,Wa).add(e)}settled(){return(j(this,Cr)??Ae(this,Cr,Os())).promise}static ensure(){if(Ue===null){const e=Ue=new Gr;Lr.add(Ue),Ba||Gr.enqueue(()=>{Ue===e&&e.flush()})}return Ue}static enqueue(e){ka(e)}apply(){}};Ua=new WeakMap,Wa=new WeakMap,ha=new WeakMap,pa=new WeakMap,Cr=new WeakMap,qa=new WeakMap,Va=new WeakMap,xt=new WeakSet,Co=function(e,a){e.f^=Mt;for(var r=e.first;r!==null;){var o=r.f,s=(o&(jn|Ta))!==0,i=s&&(o&Mt)!==0,l=i||(o&Xt)!==0||this.skipped_effects.has(r);if((r.f&no)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=Mt:(o&Ko)!==0?a.effects.push(r):Nr(r)&&((r.f&zn)!==0&&j(this,qa).add(r),mr(r));var d=r.first;if(d!==null){r=d;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===a.effect&&(tt(this,xt,ir).call(this,a.effects),tt(this,xt,ir).call(this,a.render_effects),a=a.parent),r=c.next,c=c.parent}},ir=function(e){for(const a of e)(a.f&Wt)!==0?j(this,qa).add(a):(a.f&Cn)!==0&&j(this,Va).add(a),tt(this,xt,xo).call(this,a.deps),It(a,Mt)},xo=function(e){if(e!==null)for(const a of e)(a.f&Tt)===0||(a.f&Ca)===0||(a.f^=Ca,tt(this,xt,xo).call(this,a.deps))},Ys=function(){if(j(this,pa)===0){for(const e of j(this,Ua))e();j(this,Ua).clear()}j(this,ha)===0&&tt(this,xt,Gs).call(this)},Gs=function(){var s;if(Lr.size>1){this.previous.clear();var e=ln,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Lr){if(i===this){a=!1;continue}const l=[];for(const[c,u]of this.current){if(i.current.has(c))if(a&&u!==i.current.get(c))i.current.set(c,u);else continue;l.push(c)}if(l.length===0)continue;const d=[...i.current.keys()].filter(c=>!this.current.has(c));if(d.length>0){var o=on;on=[];const c=new Set,u=new Map;for(const v of l)Zs(v,d,c,u);if(on.length>0){Ue=i,i.apply();for(const v of on)tt(s=i,xt,Co).call(s,v,r);i.deactivate()}on=o}}Ue=null,ln=e}this.committed=!0,Lr.delete(this)};let bn=Gr;function Xs(t){var e=Ba;Ba=!0;try{for(var a;;){if($l(),on.length===0&&(Ue?.flush(),on.length===0))return ao=null,a;Js()}}finally{Ba=e}}function Js(){var t=Sa;So=!0;var e=null;try{var a=0;for(qr(!0);on.length>0;){var r=bn.ensure();if(a++>1e3){var o,s;ec()}r.process(on),na.clear()}}finally{So=!1,qr(t),ao=null}}function ec(){try{Al()}catch(t){Ga(t,ao)}}let En=null;function us(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(Mn|Xt))===0&&Nr(r)&&(En=new Set,mr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?vi(r):r.fn=null),En?.size>0)){na.clear();for(const o of En){if((o.f&(Mn|Xt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)En.has(i)&&(En.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const d=s[l];(d.f&(Mn|Xt))===0&&mr(d)}}En.clear()}}En=null}}function Zs(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Tt)!==0?Zs(o,e,a,r):(s&(Go|zn))!==0&&(s&Wt)===0&&Qs(o,e,r)&&(It(o,Wt),xa(o))}}function Qs(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Tt)!==0&&Qs(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function xa(t){for(var e=ao=t;e.parent!==null;){e=e.parent;var a=e.f;if(So&&e===He&&(a&zn)!==0&&(a&Fs)===0)return;if((a&(Ta|jn))!==0){if((a&Mt)===0)return;e.f^=Mt}}on.push(e)}function tc(t){let e=0,a=xn(0),r;return()=>{hr()&&(n(a),oo(()=>(e===0&&(r=qt(()=>t(()=>aa(a)))),e+=1,()=>{ka(()=>{e-=1,e===0&&(r?.(),r=void 0,aa(a))})})))}}var nc=sa|tr|no;function ac(t,e,a){new rc(t,e,a)}var nn,an,qo,pn,ma,mn,rn,Bt,_n,Nn,Gn,_a,Xn,wa,Jn,Xr,bt,oc,sc,To,Br,Hr,ko;class rc{constructor(e,a,r){Ie(this,bt);Lt(this,"parent");Ie(this,nn,!1);Ie(this,an);Ie(this,qo,null);Ie(this,pn);Ie(this,ma);Ie(this,mn);Ie(this,rn,null);Ie(this,Bt,null);Ie(this,_n,null);Ie(this,Nn,null);Ie(this,Gn,null);Ie(this,_a,0);Ie(this,Xn,0);Ie(this,wa,!1);Ie(this,Jn,null);Ie(this,Xr,tc(()=>(Ae(this,Jn,xn(j(this,_a))),()=>{Ae(this,Jn,null)})));Ae(this,an,e),Ae(this,pn,a),Ae(this,ma,r),this.parent=He.b,Ae(this,nn,!!j(this,pn).pending),Ae(this,mn,rr(()=>{He.b=this;{var o=tt(this,bt,To).call(this);try{Ae(this,rn,sn(()=>r(o)))}catch(s){this.error(s)}j(this,Xn)>0?tt(this,bt,Hr).call(this):Ae(this,nn,!1)}return()=>{j(this,Gn)?.remove()}},nc))}is_pending(){return j(this,nn)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!j(this,pn).pending}update_pending_count(e){tt(this,bt,ko).call(this,e),Ae(this,_a,j(this,_a)+e),j(this,Jn)&&Dn(j(this,Jn),j(this,_a))}get_effect_pending(){return j(this,Xr).call(this),n(j(this,Jn))}error(e){var a=j(this,pn).onerror;let r=j(this,pn).failed;if(j(this,wa)||!a&&!r)throw e;j(this,rn)&&(Ut(j(this,rn)),Ae(this,rn,null)),j(this,Bt)&&(Ut(j(this,Bt)),Ae(this,Bt,null)),j(this,_n)&&(Ut(j(this,_n)),Ae(this,_n,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&Rl(),bn.ensure(),Ae(this,_a,0),j(this,_n)!==null&&ba(j(this,_n),()=>{Ae(this,_n,null)}),Ae(this,nn,this.has_pending_snippet()),Ae(this,rn,tt(this,bt,Br).call(this,()=>(Ae(this,wa,!1),sn(()=>j(this,ma).call(this,j(this,an)))))),j(this,Xn)>0?tt(this,bt,Hr).call(this):Ae(this,nn,!1)};var l=Re;try{Ht(null),s=!0,a?.(e,i),s=!1}catch(d){Ga(d,j(this,mn)&&j(this,mn).parent)}finally{Ht(l)}r&&ka(()=>{Ae(this,_n,tt(this,bt,Br).call(this,()=>{bn.ensure(),Ae(this,wa,!0);try{return sn(()=>{r(j(this,an),()=>e,()=>i)})}catch(d){return Ga(d,j(this,mn).parent),null}finally{Ae(this,wa,!1)}}))})}}nn=new WeakMap,an=new WeakMap,qo=new WeakMap,pn=new WeakMap,ma=new WeakMap,mn=new WeakMap,rn=new WeakMap,Bt=new WeakMap,_n=new WeakMap,Nn=new WeakMap,Gn=new WeakMap,_a=new WeakMap,Xn=new WeakMap,wa=new WeakMap,Jn=new WeakMap,Xr=new WeakMap,bt=new WeakSet,oc=function(){try{Ae(this,rn,sn(()=>j(this,ma).call(this,j(this,an))))}catch(e){this.error(e)}Ae(this,nn,!1)},sc=function(){const e=j(this,pn).pending;e&&(Ae(this,Bt,sn(()=>e(j(this,an)))),bn.enqueue(()=>{var a=tt(this,bt,To).call(this);Ae(this,rn,tt(this,bt,Br).call(this,()=>(bn.ensure(),sn(()=>j(this,ma).call(this,a))))),j(this,Xn)>0?tt(this,bt,Hr).call(this):(ba(j(this,Bt),()=>{Ae(this,Bt,null)}),Ae(this,nn,!1))}))},To=function(){var e=j(this,an);return j(this,nn)&&(Ae(this,Gn,In()),j(this,an).before(j(this,Gn)),e=j(this,Gn)),e},Br=function(e){var a=He,r=Re,o=Qe;Tn(j(this,mn)),Ht(j(this,mn)),Ya(j(this,mn).ctx);try{return e()}catch(s){return Ks(s),null}finally{Tn(a),Ht(r),Ya(o)}},Hr=function(){const e=j(this,pn).pending;j(this,rn)!==null&&(Ae(this,Nn,document.createDocumentFragment()),j(this,Nn).append(j(this,Gn)),pi(j(this,rn),j(this,Nn))),j(this,Bt)===null&&Ae(this,Bt,sn(()=>e(j(this,an))))},ko=function(e){var a;if(!this.has_pending_snippet()){this.parent&&tt(a=this.parent,bt,ko).call(a,e);return}Ae(this,Xn,j(this,Xn)+e),j(this,Xn)===0&&(Ae(this,nn,!1),j(this,Bt)&&ba(j(this,Bt),()=>{Ae(this,Bt,null)}),j(this,Nn)&&(j(this,an).before(j(this,Nn)),Ae(this,Nn,null)))};function ic(t,e,a,r){const o=ar()?kr:Er;if(a.length===0&&t.length===0){r(e.map(o));return}var s=Ue,i=He,l=$s();function d(){Promise.all(a.map(c=>lc(c))).then(c=>{l();try{r([...e.map(o),...c])}catch(u){(i.f&Mn)===0&&Ga(u,i)}s?.deactivate(),gr()}).catch(c=>{Ga(c,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return d()}finally{s?.deactivate(),gr()}}):d()}function $s(){var t=He,e=Re,a=Qe,r=Ue;return function(s=!0){Tn(t),Ht(e),Ya(a),s&&r?.activate()}}function gr(){Tn(null),Ht(null),Ya(null)}function kr(t){var e=Tt|Wt,a=Re!==null&&(Re.f&Tt)!==0?Re:null;return He!==null&&(He.f|=tr),{ctx:Qe,deps:null,effects:null,equals:Us,f:e,fn:t,reactions:null,rv:0,v:Ct,wv:0,parent:a??He,ac:null}}function lc(t,e){let a=He;a===null&&kl();var r=a.b,o=void 0,s=xn(Ct),i=!Re,l=new Map;return wc(()=>{var d=Os();o=d.promise;try{Promise.resolve(t()).then(d.resolve,d.reject).then(()=>{c===Ue&&c.committed&&c.deactivate(),gr()})}catch(p){d.reject(p),gr()}var c=Ue;if(i){var u=!r.is_pending();r.update_pending_count(1),c.increment(u),l.get(c)?.reject(Oa),l.delete(c),l.set(c,d)}const v=(p,h=void 0)=>{if(c.activate(),h)h!==Oa&&(s.f|=ea,Dn(s,h));else{(s.f&ea)!==0&&(s.f^=ea),Dn(s,p);for(const[m,k]of l){if(l.delete(m),m===c)break;k.reject(Oa)}}i&&(r.update_pending_count(-1),c.decrement(u))};d.promise.then(v,p=>v(null,p||"unknown"))}),ci(()=>{for(const d of l.values())d.reject(Oa)}),new Promise(d=>{function c(u){function v(){u===o?d(s):c(o)}u.then(v,v)}c(o)})}function A(t){const e=kr(t);return mi(e),e}function Er(t){const e=kr(t);return e.equals=Ws,e}function ei(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Ut(e[a])}}function cc(t){for(var e=t.parent;e!==null;){if((e.f&Tt)===0)return(e.f&Mn)===0?e:null;e=e.parent}return null}function Xo(t){var e,a=He;Tn(cc(t));try{t.f&=~Ca,ei(t),e=bi(t)}finally{Tn(a)}return e}function ti(t){var e=Xo(t);if(t.equals(e)||(Ue?.is_fork||(t.v=e),t.wv=wi()),!Ea)if(ln!==null)(hr()||Ue?.is_fork)&&ln.set(t,e);else{var a=(t.f&vn)===0?Cn:Mt;It(t,a)}}let Eo=new Set;const na=new Map;let ni=!1;function xn(t,e){var a={f:0,v:t,reactions:null,equals:Us,rv:0,wv:0};return a}function I(t,e){const a=xn(t);return mi(a),a}function Po(t,e=!1,a=!0){var o;const r=xn(t);return e||(r.equals=Ws),nr&&a&&Qe!==null&&Qe.l!==null&&((o=Qe.l).s??(o.s=[])).push(r),r}function f(t,e,a=!1){Re!==null&&(!Sn||(Re.f&ds)!==0)&&ar()&&(Re.f&(Tt|zn|Go|ds))!==0&&!Ln?.includes(t)&&Ll();let r=a?lt(e):e;return Dn(t,r)}function Dn(t,e){if(!t.equals(e)){var a=t.v;Ea?na.set(t,e):na.set(t,a),t.v=e;var r=bn.ensure();r.capture(t,a),(t.f&Tt)!==0&&((t.f&Wt)!==0&&Xo(t),It(t,(t.f&vn)!==0?Mt:Cn)),t.wv=wi(),ai(t,Wt),ar()&&He!==null&&(He.f&Mt)!==0&&(He.f&(jn|Ta))===0&&(en===null?Sc([t]):en.push(t)),!r.is_fork&&Eo.size>0&&!ni&&dc()}return e}function dc(){ni=!1;var t=Sa;qr(!0);const e=Array.from(Eo);try{for(const a of e)(a.f&Mt)!==0&&It(a,Cn),Nr(a)&&mr(a)}finally{qr(t)}Eo.clear()}function aa(t){f(t,t.v+1)}function ai(t,e){var a=t.reactions;if(a!==null)for(var r=ar(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===He)){var d=(l&Wt)===0;if(d&&It(i,e),(l&Tt)!==0){var c=i;ln?.delete(c),(l&Ca)===0&&(l&vn&&(i.f|=Ca),ai(c,Cn))}else d&&((l&zn)!==0&&En!==null&&En.add(i),xa(i))}}}function lt(t){if(typeof t!="object"||t===null||ta in t)return t;const e=eo(t);if(e!==Rs&&e!==yl)return t;var a=new Map,r=Vo(t),o=I(0),s=Rn,i=l=>{if(Rn===s)return l();var d=Re,c=Rn;Ht(null),hs(s);var u=l();return Ht(d),hs(c),u};return r&&a.set("length",I(t.length)),new Proxy(t,{defineProperty(l,d,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Dl();var u=a.get(d);return u===void 0?u=i(()=>{var v=I(c.value);return a.set(d,v),v}):f(u,c.value,!0),!0},deleteProperty(l,d){var c=a.get(d);if(c===void 0){if(d in l){const u=i(()=>I(Ct));a.set(d,u),aa(o)}}else f(c,Ct),aa(o);return!0},get(l,d,c){if(d===ta)return t;var u=a.get(d),v=d in l;if(u===void 0&&(!v||$n(l,d)?.writable)&&(u=i(()=>{var h=lt(v?l[d]:Ct),m=I(h);return m}),a.set(d,u)),u!==void 0){var p=n(u);return p===Ct?void 0:p}return Reflect.get(l,d,c)},getOwnPropertyDescriptor(l,d){var c=Reflect.getOwnPropertyDescriptor(l,d);if(c&&"value"in c){var u=a.get(d);u&&(c.value=n(u))}else if(c===void 0){var v=a.get(d),p=v?.v;if(v!==void 0&&p!==Ct)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return c},has(l,d){if(d===ta)return!0;var c=a.get(d),u=c!==void 0&&c.v!==Ct||Reflect.has(l,d);if(c!==void 0||He!==null&&(!u||$n(l,d)?.writable)){c===void 0&&(c=i(()=>{var p=u?lt(l[d]):Ct,h=I(p);return h}),a.set(d,c));var v=n(c);if(v===Ct)return!1}return u},set(l,d,c,u){var v=a.get(d),p=d in l;if(r&&d==="length")for(var h=c;h<v.v;h+=1){var m=a.get(h+"");m!==void 0?f(m,Ct):h in l&&(m=i(()=>I(Ct)),a.set(h+"",m))}if(v===void 0)(!p||$n(l,d)?.writable)&&(v=i(()=>I(void 0)),f(v,lt(c)),a.set(d,v));else{p=v.v!==Ct;var k=i(()=>lt(c));f(v,k)}var _=Reflect.getOwnPropertyDescriptor(l,d);if(_?.set&&_.set.call(u,c),!p){if(r&&typeof d=="string"){var x=a.get("length"),H=Number(d);Number.isInteger(H)&&H>=x.v&&f(x,H+1)}aa(o)}return!0},ownKeys(l){n(o);var d=Reflect.ownKeys(l).filter(v=>{var p=a.get(v);return p===void 0||p.v!==Ct});for(var[c,u]of a)u.v!==Ct&&!(c in l)&&d.push(c);return d},setPrototypeOf(){Il()}})}var fs,ri,oi,si;function uc(){if(fs===void 0){fs=window,ri=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;oi=$n(e,"firstChild").get,si=$n(e,"nextSibling").get,cs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),cs(a)&&(a.__t=void 0)}}function In(t=""){return document.createTextNode(t)}function Xa(t){return oi.call(t)}function Pr(t){return si.call(t)}function b(t,e){return Xa(t)}function M(t,e=!1){{var a=Xa(t);return a instanceof Comment&&a.data===""?Pr(a):a}}function D(t,e=1,a=!1){let r=t;for(;e--;)r=Pr(r);return r}function fc(t){t.textContent=""}function ii(){return!1}let vs=!1;function vc(){vs||(vs=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function ro(t){var e=Re,a=He;Ht(null),Tn(null);try{return t()}finally{Ht(e),Tn(a)}}function gc(t,e,a,r=a){t.addEventListener(e,()=>ro(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),vc()}function li(t){He===null&&(Re===null&&Nl(),Pl()),Ea&&El()}function hc(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function kn(t,e,a){var r=He;r!==null&&(r.f&Xt)!==0&&(t|=Xt);var o={ctx:Qe,deps:null,nodes:null,f:t|Wt|vn,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{mr(o),o.f|=Yo}catch(l){throw Ut(o),l}else e!==null&&xa(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&tr)===0&&(s=s.first,(t&zn)!==0&&(t&sa)!==0&&s!==null&&(s.f|=sa)),s!==null&&(s.parent=r,r!==null&&hc(s,r),Re!==null&&(Re.f&Tt)!==0&&(t&Ta)===0)){var i=Re;(i.effects??(i.effects=[])).push(s)}return o}function hr(){return Re!==null&&!Sn}function ci(t){const e=kn(to,null,!1);return It(e,Mt),e.teardown=t,e}function Oe(t){li();var e=He.f,a=!Re&&(e&jn)!==0&&(e&Yo)===0;if(a){var r=Qe;(r.e??(r.e=[])).push(t)}else return di(t)}function di(t){return kn(Ko|zs,t,!1)}function pc(t){return li(),kn(to|zs,t,!0)}function mc(t){bn.ensure();const e=kn(Ta|tr,t,!0);return(a={})=>new Promise(r=>{a.outro?ba(e,()=>{Ut(e),r(void 0)}):(Ut(e),r(void 0))})}function _c(t){return kn(Ko,t,!1)}function wc(t){return kn(Go|tr,t,!0)}function oo(t,e=0){return kn(to|e,t,!0)}function xe(t,e=[],a=[],r=[]){ic(r,e,a,o=>{kn(to,()=>t(...o.map(n)),!0)})}function rr(t,e=0){var a=kn(zn|e,t,!0);return a}function sn(t){return kn(jn|tr,t,!0)}function ui(t){var e=t.teardown;if(e!==null){const a=Ea,r=Re;gs(!0),Ht(null);try{e.call(null)}finally{gs(a),Ht(r)}}}function fi(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&ro(()=>{o.abort(Oa)});var r=a.next;(a.f&Ta)!==0?a.parent=null:Ut(a,e),a=r}}function yc(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&jn)===0&&Ut(e),e=a}}function Ut(t,e=!0){var a=!1;(e||(t.f&Fs)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(bc(t.nodes.start,t.nodes.end),a=!0),fi(t,e&&!a),Vr(t,0),It(t,Mn);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();ui(t);var o=t.parent;o!==null&&o.first!==null&&vi(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function bc(t,e){for(;t!==null;){var a=t===e?null:Pr(t);t.remove(),t=a}}function vi(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function ba(t,e,a=!0){var r=[];gi(t,r,!0);var o=()=>{a&&Ut(t),e&&e()},s=r.length;if(s>0){var i=()=>--s||o();for(var l of r)l.out(i)}else o()}function gi(t,e,a){if((t.f&Xt)===0){t.f^=Xt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&e.push(l);for(var o=t.first;o!==null;){var s=o.next,i=(o.f&sa)!==0||(o.f&jn)!==0&&(t.f&zn)!==0;gi(o,e,i?a:!1),o=s}}}function Jo(t){hi(t,!0)}function hi(t,e){if((t.f&Xt)!==0){t.f^=Xt,(t.f&Mt)===0&&(It(t,Wt),xa(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&sa)!==0||(a.f&jn)!==0;hi(a,o?e:!1),a=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)(i.is_global||e)&&i.in()}}function pi(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var o=a===r?null:Pr(a);e.append(a),a=o}}let Sa=!1;function qr(t){Sa=t}let Ea=!1;function gs(t){Ea=t}let Re=null,Sn=!1;function Ht(t){Re=t}let He=null;function Tn(t){He=t}let Ln=null;function mi(t){Re!==null&&(Ln===null?Ln=[t]:Ln.push(t))}let Rt=null,Kt=0,en=null;function Sc(t){en=t}let _i=1,pr=0,Rn=pr;function hs(t){Rn=t}function wi(){return++_i}function Nr(t){var e=t.f;if((e&Wt)!==0)return!0;if(e&Tt&&(t.f&=~Ca),(e&Cn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(Nr(s)&&ti(s),s.wv>t.wv)return!0}(e&vn)!==0&&ln===null&&It(t,Mt)}return!1}function yi(t,e,a=!0){var r=t.reactions;if(r!==null&&!Ln?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Tt)!==0?yi(s,e,!1):e===s&&(a?It(s,Wt):(s.f&Mt)!==0&&It(s,Cn),xa(s))}}function bi(t){var m;var e=Rt,a=Kt,r=en,o=Re,s=Ln,i=Qe,l=Sn,d=Rn,c=t.f;Rt=null,Kt=0,en=null,Re=(c&(jn|Ta))===0?t:null,Ln=null,Ya(t.ctx),Sn=!1,Rn=++pr,t.ac!==null&&(ro(()=>{t.ac.abort(Oa)}),t.ac=null);try{t.f|=bo;var u=t.fn,v=u(),p=t.deps;if(Rt!==null){var h;if(Vr(t,Kt),p!==null&&Kt>0)for(p.length=Kt+Rt.length,h=0;h<Rt.length;h++)p[Kt+h]=Rt[h];else t.deps=p=Rt;if(hr()&&(t.f&vn)!==0)for(h=Kt;h<p.length;h++)((m=p[h]).reactions??(m.reactions=[])).push(t)}else p!==null&&Kt<p.length&&(Vr(t,Kt),p.length=Kt);if(ar()&&en!==null&&!Sn&&p!==null&&(t.f&(Tt|Cn|Wt))===0)for(h=0;h<en.length;h++)yi(en[h],t);return o!==null&&o!==t&&(pr++,en!==null&&(r===null?r=en:r.push(...en))),(t.f&ea)!==0&&(t.f^=ea),v}catch(k){return Ks(k)}finally{t.f^=bo,Rt=e,Kt=a,en=r,Re=o,Ln=s,Ya(i),Sn=l,Rn=d}}function Cc(t,e){let a=e.reactions;if(a!==null){var r=_l.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&Tt)!==0&&(Rt===null||!Rt.includes(e))&&(It(e,Cn),(e.f&vn)!==0&&(e.f^=vn,e.f&=~Ca),ei(e),Vr(e,0))}function Vr(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)Cc(t,a[r])}function mr(t){var e=t.f;if((e&Mn)===0){It(t,Mt);var a=He,r=Sa;He=t,Sa=!0;try{(e&(zn|xl))!==0?yc(t):fi(t),ui(t);var o=bi(t);t.teardown=typeof o=="function"?o:null,t.wv=_i;var s;wo&&Xl&&(t.f&Wt)!==0&&t.deps}finally{Sa=r,He=a}}}async function Si(){await Promise.resolve(),Xs()}function n(t){var e=t.f,a=(e&Tt)!==0;if(Re!==null&&!Sn){var r=He!==null&&(He.f&Mn)!==0;if(!r&&!Ln?.includes(t)){var o=Re.deps;if((Re.f&bo)!==0)t.rv<pr&&(t.rv=pr,Rt===null&&o!==null&&o[Kt]===t?Kt++:Rt===null?Rt=[t]:Rt.includes(t)||Rt.push(t));else{(Re.deps??(Re.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Re]:s.includes(Re)||s.push(Re)}}}if(Ea){if(na.has(t))return na.get(t);if(a){var i=t,l=i.v;return((i.f&Mt)===0&&i.reactions!==null||xi(i))&&(l=Xo(i)),na.set(i,l),l}}else a&&(!ln?.has(t)||Ue?.is_fork&&!hr())&&(i=t,Nr(i)&&ti(i),Sa&&hr()&&(i.f&vn)===0&&Ci(i));if(ln?.has(t))return ln.get(t);if((t.f&ea)!==0)throw t.v;return t.v}function Ci(t){if(t.deps!==null){t.f^=vn;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&Tt)!==0&&(e.f&vn)===0&&Ci(e)}}function xi(t){if(t.v===Ct)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(na.has(e)||(e.f&Tt)!==0&&xi(e))return!0;return!1}function qt(t){var e=Sn;try{return Sn=!0,t()}finally{Sn=e}}const xc=-7169;function It(t,e){t.f=t.f&xc|e}function Tc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ta in t)No(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&ta in a&&No(a)}}}function No(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{No(t[r],e)}catch{}const a=eo(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Ls(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const kc=["touchstart","touchmove"];function Ec(t){return kc.includes(t)}const Ti=new Set,Ao=new Set;function Pc(t,e,a,r={}){function o(s){if(r.capture||lr.call(e,s),!s.cancelBubble)return ro(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?ka(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function gn(t,e,a,r,o){var s={capture:r,passive:o},i=Pc(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ci(()=>{e.removeEventListener(t,i,s)})}function st(t){for(var e=0;e<t.length;e++)Ti.add(t[e]);for(var a of Ao)a(t)}let ps=null;function lr(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;ps=t;var i=0,l=ps===t&&t.__root;if(l){var d=o.indexOf(l);if(d!==-1&&(e===document||e===window)){t.__root=e;return}var c=o.indexOf(e);if(c===-1)return;d<=c&&(i=d)}if(s=o[i]||t.target,s!==e){wl(t,"currentTarget",{configurable:!0,get(){return s||a}});var u=Re,v=He;Ht(null),Tn(null);try{for(var p,h=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var k=s["__"+r];k!=null&&(!s.disabled||t.target===s)&&k.call(s,t)}catch(_){p?h.push(_):p=_}if(t.cancelBubble||m===e||m===null)break;s=m}if(p){for(let _ of h)queueMicrotask(()=>{throw _});throw p}}finally{t.__root=e,delete t.currentTarget,Ht(u),Tn(v)}}}function ki(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function _r(t,e){var a=He;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function P(t,e){var a=(e&Vl)!==0,r=(e&Kl)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=ki(s?t:"<!>"+t),a||(o=Xa(o)));var i=r||ri?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=Xa(i),d=i.lastChild;_r(l,d)}else _r(i,i);return i}}function Nc(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=ki(o),l=Xa(i);s=Xa(l)}var d=s.cloneNode(!0);return _r(d,d),d}}function Ac(t,e){return Nc(t,e,"svg")}function Me(t=""){{var e=In(t+"");return _r(e,e),e}}function ue(){var t=document.createDocumentFragment(),e=document.createComment(""),a=In();return t.append(e,a),_r(e,a),t}function g(t,e){t!==null&&t.before(e)}function sh(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function ot(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Mc(t,e){return Dc(t,e)}const La=new Map;function Dc(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){uc();var l=new Set,d=v=>{for(var p=0;p<v.length;p++){var h=v[p];if(!l.has(h)){l.add(h);var m=Ec(h);e.addEventListener(h,lr,{passive:m});var k=La.get(h);k===void 0?(document.addEventListener(h,lr,{passive:m}),La.set(h,1)):La.set(h,k+1)}}};d($r(Ti)),Ao.add(d);var c=void 0,u=mc(()=>{var v=a??e.appendChild(In());return ac(v,{pending:()=>{}},p=>{if(s){fe({});var h=Qe;h.c=s}o&&(r.$$events=o),c=t(p,r)||{},s&&ve()}),()=>{for(var p of l){e.removeEventListener(p,lr);var h=La.get(p);--h===0?(document.removeEventListener(p,lr),La.delete(p)):La.set(p,h)}Ao.delete(d),v!==a&&v.parentNode?.removeChild(v)}});return Ic.set(c,u),c}let Ic=new WeakMap;var un,wn,Gt,ya,xr,Tr,Jr;class so{constructor(e,a=!0){Lt(this,"anchor");Ie(this,un,new Map);Ie(this,wn,new Map);Ie(this,Gt,new Map);Ie(this,ya,new Set);Ie(this,xr,!0);Ie(this,Tr,()=>{var e=Ue;if(j(this,un).has(e)){var a=j(this,un).get(e),r=j(this,wn).get(a);if(r)Jo(r),j(this,ya).delete(a);else{var o=j(this,Gt).get(a);o&&(j(this,wn).set(a,o.effect),j(this,Gt).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of j(this,un)){if(j(this,un).delete(s),s===e)break;const l=j(this,Gt).get(i);l&&(Ut(l.effect),j(this,Gt).delete(i))}for(const[s,i]of j(this,wn)){if(s===a||j(this,ya).has(s))continue;const l=()=>{if(Array.from(j(this,un).values()).includes(s)){var c=document.createDocumentFragment();pi(i,c),c.append(In()),j(this,Gt).set(s,{effect:i,fragment:c})}else Ut(i);j(this,ya).delete(s),j(this,wn).delete(s)};j(this,xr)||!r?(j(this,ya).add(s),ba(i,l,!1)):l()}}});Ie(this,Jr,e=>{j(this,un).delete(e);const a=Array.from(j(this,un).values());for(const[r,o]of j(this,Gt))a.includes(r)||(Ut(o.effect),j(this,Gt).delete(r))});this.anchor=e,Ae(this,xr,a)}ensure(e,a){var r=Ue,o=ii();if(a&&!j(this,wn).has(e)&&!j(this,Gt).has(e))if(o){var s=document.createDocumentFragment(),i=In();s.append(i),j(this,Gt).set(e,{effect:sn(()=>a(i)),fragment:s})}else j(this,wn).set(e,sn(()=>a(this.anchor)));if(j(this,un).set(r,e),o){for(const[l,d]of j(this,wn))l===e?r.skipped_effects.delete(d):r.skipped_effects.add(d);for(const[l,d]of j(this,Gt))l===e?r.skipped_effects.delete(d.effect):r.skipped_effects.add(d.effect);r.oncommit(j(this,Tr)),r.ondiscard(j(this,Jr))}else j(this,Tr).call(this)}}un=new WeakMap,wn=new WeakMap,Gt=new WeakMap,ya=new WeakMap,xr=new WeakMap,Tr=new WeakMap,Jr=new WeakMap;const Lc=0,ho=1;function Rc(t,e,a,r,o){var s=ar(),i=Ct,l=s?xn(i):Po(i,!1,!1),d=s?xn(i):Po(i,!1,!1),c=new so(t);rr(()=>{var u=e(),v=!1;if(bl(u)){var p=$s(),h=!1;const m=k=>{if(!v){h=!0,p(!1),bn.ensure();try{k()}finally{gr(),Ba||Xs()}}};u.then(k=>{m(()=>{Dn(l,k),c.ensure(ho,r&&(_=>r(_,l)))})},k=>{m(()=>{if(Dn(d,k),c.ensure(ho,o&&(_=>o(_,d))),!o)throw d.v})}),ka(()=>{h||m(()=>{c.ensure(Lc,a)})})}else Dn(l,u),c.ensure(ho,r&&(m=>r(m,l)));return()=>{v=!0}})}function W(t,e,a=!1){var r=new so(t),o=a?sa:0;function s(i,l){r.ensure(i,l)}rr(()=>{var i=!1;e((l,d=!0)=>{i=!0,s(d,l)}),i||s(!1,null)},o)}function he(t,e){oo(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Oc(t,e,a){for(var r=[],o=e.length,s,i=e.length,l=0;l<o;l++){let v=e[l];ba(v,()=>{if(s){if(s.pending.delete(v),s.done.add(v),s.pending.size===0){var p=t.outrogroups;Mo($r(s.done)),p.delete(s),p.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var d=r.length===0&&a!==null;if(d){var c=a,u=c.parentNode;fc(u),u.append(c),t.items.clear()}Mo(e,!d)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function Mo(t,e=!0){for(var a=0;a<t.length;a++)Ut(t[a],e)}var ms;function On(t,e,a,r,o,s=null){var i=t,l=new Map,d=(e&Hs)!==0;if(d){var c=t;i=c.appendChild(In())}var u=null,v=Er(()=>{var x=a();return Vo(x)?x:x==null?[]:$r(x)}),p,h=!0;function m(){_.fallback=u,Fc(_,p,i,e,r),u!==null&&(p.length===0?(u.f&An)===0?Jo(u):(u.f^=An,cr(u,null,i)):ba(u,()=>{u=null}))}var k=rr(()=>{p=n(v);for(var x=p.length,H=new Set,w=Ue,T=ii(),O=0;O<x;O+=1){var L=p[O],N=r(L,O),U=h?null:l.get(N);U?(U.v&&Dn(U.v,L),U.i&&Dn(U.i,O),T&&w.skipped_effects.delete(U.e)):(U=zc(l,h?i:ms??(ms=In()),L,N,O,o,e,a),h||(U.e.f|=An),l.set(N,U)),H.add(N)}if(x===0&&s&&!u&&(h?u=sn(()=>s(i)):(u=sn(()=>s(ms??(ms=In()))),u.f|=An)),!h)if(T){for(const[Y,V]of l)H.has(Y)||w.skipped_effects.add(V.e);w.oncommit(m),w.ondiscard(()=>{})}else m();n(v)}),_={effect:k,items:l,outrogroups:null,fallback:u};h=!1}function Fc(t,e,a,r,o){var s=(r&zl)!==0,i=e.length,l=t.items,d=t.effect.first,c,u=null,v,p=[],h=[],m,k,_,x;if(s)for(x=0;x<i;x+=1)m=e[x],k=o(m,x),_=l.get(k).e,(_.f&An)===0&&(_.nodes?.a?.measure(),(v??(v=new Set)).add(_));for(x=0;x<i;x+=1){if(m=e[x],k=o(m,x),_=l.get(k).e,t.outrogroups!==null)for(const V of t.outrogroups)V.pending.delete(_),V.done.delete(_);if((_.f&An)!==0)if(_.f^=An,_===d)cr(_,null,a);else{var H=u?u.next:d;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),Un(t,u,_),Un(t,_,H),cr(_,H,a),u=_,p=[],h=[],d=u.next;continue}if((_.f&Xt)!==0&&(Jo(_),s&&(_.nodes?.a?.unfix(),(v??(v=new Set)).delete(_))),_!==d){if(c!==void 0&&c.has(_)){if(p.length<h.length){var w=h[0],T;u=w.prev;var O=p[0],L=p[p.length-1];for(T=0;T<p.length;T+=1)cr(p[T],w,a);for(T=0;T<h.length;T+=1)c.delete(h[T]);Un(t,O.prev,L.next),Un(t,u,O),Un(t,L,w),d=w,u=L,x-=1,p=[],h=[]}else c.delete(_),cr(_,d,a),Un(t,_.prev,_.next),Un(t,_,u===null?t.effect.first:u.next),Un(t,u,_),u=_;continue}for(p=[],h=[];d!==null&&d!==_;)(c??(c=new Set)).add(d),h.push(d),d=d.next;if(d===null)continue}(_.f&An)===0&&p.push(_),u=_,d=_.next}if(t.outrogroups!==null){for(const V of t.outrogroups)V.pending.size===0&&(Mo($r(V.done)),t.outrogroups?.delete(V));t.outrogroups.size===0&&(t.outrogroups=null)}if(d!==null||c!==void 0){var N=[];if(c!==void 0)for(_ of c)(_.f&Xt)===0&&N.push(_);for(;d!==null;)(d.f&Xt)===0&&d!==t.fallback&&N.push(d),d=d.next;var U=N.length;if(U>0){var Y=(r&Hs)!==0&&i===0?a:null;if(s){for(x=0;x<U;x+=1)N[x].nodes?.a?.measure();for(x=0;x<U;x+=1)N[x].nodes?.a?.fix()}Oc(t,N,Y)}}s&&ka(()=>{if(v!==void 0)for(_ of v)_.nodes?.a?.apply()})}function zc(t,e,a,r,o,s,i,l){var d=(i&Ol)!==0?(i&jl)===0?Po(a,!1,!1):xn(a):null,c=(i&Fl)!==0?xn(o):null;return{v:d,i:c,e:sn(()=>(s(e,d??a,c??o,l),()=>{t.delete(r)}))}}function cr(t,e,a){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,s=e&&(e.f&An)===0?e.nodes.start:a;r!==null;){var i=Pr(r);if(s.before(r),r===o)return;r=i}}function Un(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function Ne(t,e,...a){var r=new so(t);rr(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},sa)}function jc(t,e,a){var r=new so(t);rr(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},sa)}function Ei(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=Ei(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function Bc(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=Ei(t))&&(r&&(r+=" "),r+=e);return r}function at(t){return typeof t=="object"?Bc(t):t??""}const _s=[...` 	
\r\fÂ \v\uFEFF`];function Hc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||_s.includes(r[i-1]))&&(l===r.length||_s.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Uc(t,e){return t==null?null:String(t)}function $e(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=Hc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var d in s){var c=!!s[d];(o==null||c!==!!o[d])&&t.classList.toggle(d,c)}return s}function Ja(t,e,a,r){var o=t.__style;if(o!==e){var s=Uc(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Wc=Symbol("is custom element"),qc=Symbol("is html");function ih(t,e){var a=Zo(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Vc(t,e){var a=Zo(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function nt(t,e,a,r){var o=Zo(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[Tl]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Kc(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Zo(t){return t.__attributes??(t.__attributes={[Wc]:t.nodeName.includes("-"),[qc]:t.namespaceURI===Yl})}var ws=new Map;function Kc(t){var e=t.getAttribute("is")||t.nodeName,a=ws.get(e);if(a)return a;ws.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Ls(o);for(var i in r)r[i].set&&a.push(i);o=eo(o)}return a}function Pi(t,e,a=e){var r=new WeakSet;gc(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=po(t)?mo(s):s,a(s),Ue!==null&&r.add(Ue),await Si(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,d=t.value.length;if(t.value=s??"",l!==null){var c=t.value.length;i===l&&l===d&&c>d?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=i,t.selectionEnd=Math.min(l,c))}}}),qt(e)==null&&t.value&&(a(po(t)?mo(t.value):t.value),Ue!==null&&r.add(Ue)),oo(()=>{var o=e();if(t===document.activeElement){var s=jr??Ue;if(r.has(s))return}po(t)&&o===mo(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function po(t){var e=t.type;return e==="number"||e==="range"}function mo(t){return t===""?null:+t}function ys(t,e){return t===e||t?.[ta]===e}function Xe(t={},e,a,r){return _c(()=>{var o,s;return oo(()=>{o=s,s=[],qt(()=>{t!==a(...s)&&(e(t,...s),o&&ys(a(...o),t)&&e(null,...o))})}),()=>{ka(()=>{s&&ys(a(...s),t)&&e(null,...s)})}}),t}function Qo(t=!1){const e=Qe,a=e.l.u;if(!a)return;let r=()=>Tc(e.s);if(t){let o=0,s={};const i=kr(()=>{let l=!1;const d=e.s;for(const c in d)d[c]!==s[c]&&(s[c]=d[c],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&pc(()=>{bs(e,r),yo(a.b)}),Oe(()=>{const o=qt(()=>a.m.map(Sl));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&Oe(()=>{bs(e,r),yo(a.a)})}function bs(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Rr=!1;function Yc(t){var e=Rr;try{return Rr=!1,[t(),Rr]}finally{Rr=e}}const Gc={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(or(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];or(o)&&(o=o());const s=$n(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(or(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=$n(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===ta||e===js)return!1;for(let a of t.props)if(or(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(or(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function Do(...t){return new Proxy({props:t},Gc)}function Pe(t,e,a,r){var o=!nr||(a&Hl)!==0,s=(a&Wl)!==0,i=(a&ql)!==0,l=r,d=!0,c=()=>(d&&(d=!1,l=i?qt(r):r),l),u;if(s){var v=ta in t||js in t;u=$n(t,e)?.set??(v&&e in t?w=>t[e]=w:void 0)}var p,h=!1;s?[p,h]=Yc(()=>t[e]):p=t[e],p===void 0&&r!==void 0&&(p=c(),u&&(o&&Ml(),u(p)));var m;if(o?m=()=>{var w=t[e];return w===void 0?c():(d=!0,w)}:m=()=>{var w=t[e];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(a&Ul)===0)return m;if(u){var k=t.$$legacy;return(function(w,T){return arguments.length>0?((!o||!T||k||h)&&u(T?m():w),w):m()})}var _=!1,x=((a&Bl)!==0?kr:Er)(()=>(_=!1,m()));s&&n(x);var H=He;return(function(w,T){if(arguments.length>0){const O=T?n(x):o&&s?lt(w):w;return f(x,O),_=!0,l!==void 0&&(l=O),w}return Ea&&_||(H.f&Mn)!==0?x.v:n(x)})}function Se(t){Qe===null&&Bs(),nr&&Qe.l!==null?Xc(Qe).m.push(t):Oe(()=>{const e=qt(t);if(typeof e=="function")return e})}function Xc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Jc="5";var Is;typeof window<"u"&&((Is=window.__svelte??(window.__svelte={})).v??(Is.v=new Set)).add(Jc);Jl();const Ni={};function Zc(t){ut(Ni,t)}function $o(){const t=dt(Ni);if(!t)throw new Error("No FeedSearchContext found");return t}const Ai={};function Qc(t){ut(Ai,t)}function Vt(){const t=dt(Ai);if(!t)throw new Error("No SearchParamsContext found");return t}function $c(t,e){fe(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Vt(),s="feedSearch",i=A(()=>o().get(s)||""),l=A(()=>n(i));Zc({getFeedSearch:()=>n(l),setFeedSearch:u=>{u===""?r(s):a(s,u)}});var d=ue(),c=M(d);Ne(c,()=>e.children??je),g(t,d),ve()}const Mi={};function ed(t){ut(Mi,t)}function td(){const t=dt(Mi);if(!t)throw new Error("No TagsSearchContext found");return t}function nd(t,e){fe(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Vt(),s="tagsSearch",i=A(()=>o().get(s)||""),l=A(()=>n(i));ed({getTagsSearch:()=>n(l),setTagsSearch:u=>{u===""?r(s):a(s,u)}});var d=ue(),c=M(d);Ne(c,()=>e.children??je),g(t,d),ve()}const Di={};function ad(t){ut(Di,t)}function Ii(){const t=dt(Di);if(!t)throw new Error("No FeedOrderContext found");return t}function rd(t,e){fe(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Vt(),s="feedOrder",i=A(()=>o().get(s)||"newest"),l=A(()=>n(i));ad({getFeedOrder:()=>n(l),setFeedOrder:u=>{u==="newest"?r(s):a(s,u)}});var d=ue(),c=M(d);Ne(c,()=>e.children??je),g(t,d),ve()}const Li={};function od(t){ut(Li,t)}function Ar(){const t=dt(Li);if(!t)throw new Error("No SidebarContext found");return t}function sd(t,e){fe(e,!0);let a=I("closed");od({sidebarOpen:()=>{f(a,"preOpening")},sidebarClose:()=>{f(a,"closing")},getSidebarState:()=>n(a),setSidebarState:c=>{f(a,c,!0)}});var l=ue(),d=M(l);Ne(d,()=>e.children??je),g(t,l),ve()}const Ri={};function id(t){ut(Ri,t)}function Bn(){const t=dt(Ri);if(!t)throw new Error("No SelectedTagsContext found");return t}function ld(t,e){fe(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Vt(),s=A(a),i="selectedTags";let l=A(()=>n(s).get(i)||""),d=A(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));id({getSelectedTags:()=>n(d),addTag:_=>{n(d).has(_)||r(i,[...n(d),_].map(x=>encodeURIComponent(x)).join(","))},removeTag:_=>{n(d).has(_)&&n(d).size===1?o(i):n(d).has(_)&&r(i,[...n(d)].filter(x=>x!==_).map(x=>encodeURIComponent(x)).join(","))},clearTags:()=>{o(i)},setSelectedTags:_=>{_.size===0?o(i):r(i,[..._].map(x=>encodeURIComponent(x)).join(","))}});var m=ue(),k=M(m);Ne(k,()=>e.children??je),g(t,m),ve()}const Oi={};function cd(t){ut(Oi,t)}function Pa(){const t=dt(Oi);if(!t)throw new Error("No SelectedNotesContext found");return t}var dd=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],ud=["difference","intersection","symmetricDifference","union"],Ss=!1,Ka,fn,Zn,Zr,$a,Fi,zi;const Qr=class Qr extends Set{constructor(a){super();Ie(this,$a);Ie(this,Ka,new Map);Ie(this,fn,I(0));Ie(this,Zn,I(0));Ie(this,Zr,Rn||-1);if(a){for(var r of a)super.add(r);j(this,Zn).v=super.size}Ss||tt(this,$a,zi).call(this)}has(a){var r=super.has(a),o=j(this,Ka),s=o.get(a);if(s===void 0){if(!r)return n(j(this,fn)),!1;s=tt(this,$a,Fi).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),f(j(this,Zn),super.size),aa(j(this,fn))),this}delete(a){var r=super.delete(a),o=j(this,Ka),s=o.get(a);return s!==void 0&&(o.delete(a),f(s,!1)),r&&(f(j(this,Zn),super.size),aa(j(this,fn))),r}clear(){if(super.size!==0){super.clear();var a=j(this,Ka);for(var r of a.values())f(r,!1);a.clear(),f(j(this,Zn),0),aa(j(this,fn))}}keys(){return this.values()}values(){return n(j(this,fn)),super.values()}entries(){return n(j(this,fn)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(j(this,Zn))}};Ka=new WeakMap,fn=new WeakMap,Zn=new WeakMap,Zr=new WeakMap,$a=new WeakSet,Fi=function(a){return Rn===j(this,Zr)?I(a):xn(a)},zi=function(){Ss=!0;var a=Qr.prototype,r=Set.prototype;for(const o of dd)a[o]=function(...s){return n(j(this,fn)),r[o].apply(this,s)};for(const o of ud)a[o]=function(...s){n(j(this,fn));var i=r[o].apply(this,s);return new Qr(i)}};let Io=Qr;function fd(t,e){fe(e,!0);let a=new Io,r=I("single");const o=()=>a,s=h=>{a.clear(),h.forEach(m=>a.add(m))},i=h=>{a.add(h)},l=h=>{a.delete(h)},d=()=>{a.clear()};cd({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:d,getMode:()=>n(r),changeMode:h=>{f(r,h,!0),h==="single"&&d()}});var v=ue(),p=M(v);Ne(p,()=>e.children??je),g(t,v),ve()}const ji={};function vd(t){ut(ji,t)}function es(){const t=dt(ji);if(!t)throw new Error("No LocalDBContext found");return t}const Bi={};function gd(t){ut(Bi,t)}function Za(){const t=dt(Bi);if(!t)throw new Error("No SettingsContext found");return t}const Hi={};function hd(t){ut(Hi,t)}function io(){const t=dt(Hi);if(!t)throw new Error("No BroadcastContext found");return t}const pd="AppStorage",md=1,dr="account",Vn="settings",Ye="notes",jt="tags",_d="syncLog",ia="success",la="error",yt=(t,e,a)=>{t?.addEventListener(e,a)},Cs=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();yt(s,ia,()=>{const i=s?.result||[];a(i)}),yt(s,la,i=>{r(i)})}),Kr=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);yt(i,ia,()=>{const l=i?.result?.data;r(l)}),yt(i,la,l=>{o(l)})}),yn=(t,e,a,r)=>new Promise((o,s)=>{const d=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});yt(d,ia,()=>{o()}),yt(d,la,c=>{s(c)})}),vt=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,d)=>{yt(i,ia,()=>{l()}),yt(i,la,c=>{d(c)})})}))},_o=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);yt(l,ia,()=>{r()}),yt(l,la,d=>{o(d)})}),sr=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,d)=>{yt(i,ia,()=>{l()}),yt(i,la,c=>{d(c)})})}))},Fa=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();yt(i,ia,()=>{a()}),yt(i,la,l=>{r(l)})}),tn="dialogPages",Ui={};function wd(t){ut(Ui,t)}function Jt(){const t=dt(Ui);if(!t)throw new Error("No DialogPagesContext found");return t}var ye=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t.Extension="extension",t))(ye||{});const xs={settings:"Settings",importData:"Import",exportData:"Export",account:"Account",sync:"Sync",accountSetup:"",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success",extension:"Extension"},lh=()=>chrome,Ts=()=>LanguageModel;function yd(t,e){fe(e,!0);const{deleteSearchParam:a}=Vt(),{clearDialogPages:r,getDialogPages:o}=Jt(),s="viewMode";let l=lt((()=>{const re=new URLSearchParams(window.location.search).get(s)||"tab";return re==="popup"||re==="window"||re==="tab"||re==="sidebar"?re:"tab"})());Se(()=>{a(s)});let d=I(!1),c=I(lt({showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}}));const{getDB:u}=es(),{createBroadcastChannel:v,tabId:p}=io(),h=v(),m=A(u),k=async()=>{const B=await Kr(n(m),Vn,"default");B&&f(c,B,!0)},_=async()=>{await k(),f(d,!0)},x=async B=>{const re=JSON.parse(B.data),_e=re;if(re.tabId&&re.tabId===p){_e.type==="exit"&&(f(c,{showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}},!0),Fa(n(m),Vn));return}_e.type==="updateSettings"?k():_e.type==="exit"&&f(c,{showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}},!0)},H=()=>n(c).showFavicon,w=()=>n(c).recordMode,T=async B=>{n(c).showFavicon=B,await yn(n(m),Vn,"default",fa(n(c))),h.postMessage({type:"updateSettings"})},O=async B=>{n(c).recordMode=B,await yn(n(m),Vn,"default",fa(n(c))),h.postMessage({type:"updateSettings"})},L=async B=>{n(c).tags.prev=B,await yn(n(m),Vn,"default",fa(n(c))),h.postMessage({type:"updateSettings"})},N=()=>n(c).tags.prev||[],U=async B=>{n(c).tags.llm=B,await yn(n(m),Vn,"default",fa(n(c))),h.postMessage({type:"updateSettings"})},Y=()=>n(c).tags.llm,V=()=>n(c).tags.pageData,K=async B=>{n(c).tags.pageData=B,await yn(n(m),Vn,"default",fa(n(c))),h.postMessage({type:"updateSettings"})};Se(()=>(_(),h.addEventListener(x),()=>{h.removeEventListener(x)})),gd({getFaviconEnabled:H,getRecordMode:w,setRecordMode:O,setFaviconShown:T,isInitedSettings:()=>n(d),getViewMode:()=>l,setLlmTagsEnabled:U,getLlmTagsEnabled:Y,setPrevTags:L,getPrevTags:N,getPageDataForTagsEnabled:V,setPageDataForTagsEnabled:K});var Q=ue(),X=M(Q);Ne(X,()=>e.children??je),g(t,Q),ve()}const Wi={};function bd(t){ut(Wi,t)}function ts(){const t=dt(Wi);if(!t)throw new Error("No AccountContext found");return t}function Sd(t,e){fe(e,!0);let a=I(void 0);const{getDB:r}=es(),{createBroadcastChannel:o,tabId:s}=io(),i=A(r),l=o(),d=async()=>{const w=await Kr(n(i),dr,"default");f(a,w,!0)},c=w=>yn(n(i),dr,"default",w),u=async w=>{const T=await Kr(n(i),dr,"default");T!==void 0&&f(a,T,!0),w(T)},v=async w=>{const T=JSON.parse(w.data);if(T.tabId&&T.tabId===s)return;const O=T;O.type==="initLocalAccount"?f(a,null):O.type==="initCloudAccount"?d():O.type==="disconnectCloudAccount"?f(a,null):O.type==="exit"?f(a,void 0):O.type==="updateAccount"&&d()};Se(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),bd({init:u,getAccount:()=>n(a),initLocalAccount:async()=>{f(a,null),await c(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async w=>{const T={encryptedClientKey:w.encryptedClientKey||"",subscriptionExpires:w.subscriptionExpires||-1,lastSync:-1};await c(T),f(a,T,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{f(a,null),await c(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async w=>{if(!n(a))throw new Error("No account to update subscription for");const T={...n(a),subscriptionExpires:w};await c(T),l.postMessage({type:"updateAccount"})},exitApp:async()=>{f(a,void 0),l.postMessage({type:"exit"}),await Fa(n(i),dr)}});var x=ue(),H=M(x);Ne(H,()=>e.children??je),g(t,x),ve()}const qi={};function Cd(t){ut(qi,t)}function Ot(){const t=dt(qi);if(!t)throw new Error("No NotesContext found");return t}const Kn=()=>crypto.randomUUID(),xd=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},Vi=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function ch(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const _t=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function Td(t,e){fe(e,!0);const{getDB:a}=es(),{createBroadcastChannel:r,tabId:o}=io(),s=A(a),i=r(),l=720*60*60*1e3;let d=I(!1),c=I(()=>new Map),u=I(()=>[]),v=I(()=>new Map);const p=()=>n(d),h=()=>n(u)().some(y=>y.data&&!y.data.deletedAt&&!y.data.archivedAt),m=()=>n(u)().some(y=>y.data&&y.data.deletedAt),k=()=>n(u)().some(y=>y.data&&y.data.archivedAt&&!y.data.deletedAt),_=y=>{const S=n(u)(),C=n(v)(),E=C.get(y.id);E?E.data=y.data:(S.push(y),C.set(y.id,y)),f(u,()=>S),f(v,()=>C)},x=y=>{const S=n(u)(),C=n(v)(),E=C.get(y);C.has(y)&&C.delete(y),E&&(E.data=void 0),f(u,()=>S),f(v,()=>C)},H=y=>{const S=n(u)(),C=n(v)();for(const E of y){const z=C.get(E);C.has(E)&&C.delete(E),z&&(z.data=void 0)}f(u,()=>S),f(v,()=>C)},w=()=>{f(u,()=>[]),f(c,()=>new Map),f(v,()=>new Map)},T=()=>n(u),O=y=>{const S=n(c)();for(const C of y)S.get(C)||S.set(C,{name:C});f(c,()=>S)},L=async()=>{const[y,S]=await Promise.all([Cs(n(s),Ye),Cs(n(s),jt).then(G=>G.reduce((ne,se)=>ne.set(se.id,se.data),new Map))]),C=[],E=[],z=new Map;for(const G of y)G.data.deletedAt&&Date.now()-G.data.deletedAt>l?C.push(G.id):(E.push(G),z.set(G.id,G));const q=xd(E),te=[],ge=new Map(S);[...q.values()].forEach(G=>{ge.set(G,{name:G,pinned:S.get(G)?.pinned||!1}),S.has(G)||te.push(G)});const oe=[];[...S.keys()].forEach(G=>{q.has(G)||oe.push(G)}),await sr(n(s),Ye,C),await sr(n(s),jt,oe),await vt(n(s),jt,te.map(G=>({id:G,data:{pinned:ge.get(G)?.pinned||!1}}))),f(u,()=>E),f(v,()=>z),f(c,()=>ge),f(d,!0)},N=async y=>{const S=n(c)(),C=y.data.tags.filter(E=>!S.has(E))||[];return await yn(n(s),Ye,y.id,{...y.data}),C.length>0&&(await vt(n(s),jt,C.map(E=>({id:E,data:{pinned:!1}}))||[]),O(C)),_(y),i.postMessage({type:"putNote",data:{id:y.id}}),y.id},U=async({link:y,text:S,tags:C})=>{const E={id:Kn(),data:{link:_t(y),text:S,tags:_t(C),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await N(E),E.id},Y=async(y,{link:S,text:C,tags:E})=>{const z=B(y);if(!z||!z.data)return;const q={id:y,data:{...z.data,link:_t(S),text:C,tags:_t(E),updatedAt:Date.now()}};await N(q)},V=async(y,{link:S,text:C,tags:E})=>{const z=B(y);if(!z||!z.data)return;const q=Kn(),te={id:y,data:{...z.data,link:S,text:C,tags:E,updatedAt:Date.now(),history:[...(z.data.history||[]).slice(-49),{id:q,link:_t(z.data.link),text:z.data.text,tags:_t(z.data.tags),updatedAt:z.data.updatedAt}]}};return await N(te),q},K=async(y,S)=>{const C=B(y);if(!C||!C.data)return;const E=C.data.history?.find?.(q=>q.id===S);if(!E)return;const z={id:y,data:{...C.data,link:_t(E.link),text:E.text,tags:_t(E.tags),updatedAt:E.updatedAt,history:C.data.history?.filter?.(q=>q.id!==S)||[]}};await N(z)},Q=async y=>{const C=n(v)().get(y);!C||!C.data||(x(y),await _o(n(s),Ye,y),i.postMessage({type:"deleteNote",data:{id:y}}))},X=async()=>{await Fa(n(s),Ye),await Fa(n(s),jt),w(),i.postMessage({type:"clearNotes"})},B=y=>n(v)().get(y),re=async(y,S)=>{const E=n(v)().get(y);if(!E||!E.data)return;const z={id:y,data:{...E.data,pinnedAt:S?Date.now():void 0}};N(z)},_e=async y=>{const C=n(v)().get(y);if(!C||!C.data)return;const E={id:y,data:{...C.data,deletedAt:Date.now()}};await N(E)},J=async y=>{const C=n(v)().get(y);if(!C||!C.data)return;const E={id:y,data:{...C.data,archivedAt:Date.now()}};await N(E)},F=async({noteIds:y})=>{const S=n(v)(),C=n(u)();for(const z of y){const q=S.get(z);q?.data&&(q.data.deletedAt=Date.now())}return await vt(n(s),Ye,y.map(z=>{const q=S.get(z);return{id:z,data:q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C),{cancel:async()=>{for(const z of y){const q=S.get(z);q?.data&&(q.data.deletedAt=0)}await vt(n(s),Ye,y.map(z=>{const q=S.get(z);return{id:z,data:q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C)}}},Z=async({noteIds:y})=>{const S=n(v)(),C=n(u)();for(const z of y){const q=S.get(z);q?.data&&(q.data.archivedAt=Date.now())}return await vt(n(s),Ye,y.map(z=>{const q=S.get(z);return{id:z,data:q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C),{cancel:async()=>{for(const z of y){const q=S.get(z);q?.data&&(q.data.archivedAt=0)}await vt(n(s),Ye,y.map(z=>{const q=S.get(z);return{id:z,data:q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C)}}},le=async({noteIds:y})=>{const S=n(v)(),C=n(u)(),E=[];for(const q of y){const te=S.get(q);te?.data&&(E.push({id:q,data:_t(te.data)}),te.data.archivedAt=0)}return await vt(n(s),Ye,y.map(q=>{const te=S.get(q);return{id:q,data:te?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C),{cancel:async()=>{for(const q of E){const te=S.get(q.id);te?.data&&(te.data=q.data)}await vt(n(s),Ye,y.map(q=>{const te=S.get(q);return{id:q,data:te?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C)}}},ie=async({noteIds:y})=>{const S=n(v)(),C=n(u)(),E=[];for(const q of y){const te=S.get(q);te?.data&&(E.push({id:q,data:_t(te.data)}),te.data.deletedAt=0)}return await vt(n(s),Ye,y.map(q=>{const te=S.get(q);return{id:q,data:te?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C),{cancel:async()=>{for(const q of E){const te=S.get(q.id);te?.data&&(te.data=q.data)}await vt(n(s),Ye,y.map(q=>{const te=S.get(q);return{id:q,data:te?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(u,()=>C)}}},ce=async y=>{const C=n(v)().get(y);if(!C||!C.data)return;const E={id:y,data:{...C.data,deletedAt:0}};await N(E)},be=async y=>{const C=n(v)().get(y);if(!C||!C.data)return;const E={id:y,data:{...C.data,archivedAt:0}};await N(E)},ke=async(y,S)=>{const C=n(c)();C.set(y,{name:y,pinned:S}),await yn(n(s),jt,y,{pinned:S}),i.postMessage({type:"pinTag",data:{tag:y,pinned:S}}),f(c,()=>C)},R=async({noteIds:y})=>{const S=n(c)(),C=n(u)();H(y),await sr(n(s),Ye,y),i.postMessage({type:"reloadNotes"}),f(u,()=>C),f(c,()=>S)},$=async y=>{const S=n(v)(),C={};y.forEach(E=>{const z=S.get(E.id),q=[];if(z&&z.data){let te=0,ge=0;for(;te<E.data.history.length&&ge<z.data.history.length;){const oe=E.data.history[te],G=z.data.history[ge];oe.id===G.id?(oe.updatedAt>G.updatedAt?q.push(oe):q.push(G),te+=1,ge+=1):oe.updatedAt<G.updatedAt?(q.push(oe),te+=1):oe.updatedAt>G.updatedAt?(q.push(G),ge+=1):(q.push(G),te+=1,ge+=1)}z.data.updatedAt>E.data.updatedAt?C[z.id]={id:z.id,data:{...z.data,history:q}}:C[E.id]={id:E.id,data:{...E.data,history:q}}}else C[E.id]=E}),await vt(n(s),Ye,Object.values(C)),await L(),i.postMessage({type:"reloadNotes"})},Ce=async()=>{const y=[];n(u)().forEach(C=>{C&&C.data&&C.data.deletedAt&&y.push(C.id)}),await sr(n(s),Ye,y),await L(),i.postMessage({type:"emptyBin"})},ae=async(y,S)=>{const C=n(v)(),E=n(u)(),z=[],q=[];for(const ge of S){const oe=C.get(ge);oe?.data&&(z.push({id:ge,data:_t(oe.data)}),q.push({id:ge,data:{...oe.data,tags:oe.data.tags.filter(G=>G!==y),history:[...oe.data.history||[],{id:Kn(),link:_t(oe.data.link),text:oe.data.text,tags:oe.data.tags,updatedAt:Date.now()}]}}))}for(const ge of q){const oe=C.get(ge.id);oe?.data&&(oe.data=ge.data)}return await vt(n(s),Ye,q.map(ge=>({id:ge.id,data:ge.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>C),f(u,()=>E),{cancel:async()=>{for(const ge of z){const oe=C.get(ge.id);oe?.data&&(oe.data=ge.data)}await vt(n(s),Ye,z.map(ge=>({id:ge.id,data:ge.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>C),f(u,()=>E)}}},pe=async(y,S,C)=>{const E=n(v)(),z=n(u)(),q=n(c)(),te=[],ge=[];for(const ne of C){const se=E.get(ne);se?.data&&(te.push({id:ne,data:_t(se.data)}),ge.push({id:ne,data:{...se.data,tags:se.data.tags.map(Ee=>Ee!==y?Ee:S),history:[...se.data.history||[],{id:Kn(),link:_t(se.data.link),text:se.data.text,tags:se.data.tags,updatedAt:Date.now()}]}}))}for(const ne of ge){const se=E.get(ne.id);se?.data&&(se.data=ne.data)}const oe=q.has(S);return await Promise.all([(async()=>{if(!oe){const ne=q.get(y)?.pinned||!1;q.set(S,{name:S,pinned:ne}),await yn(n(s),jt,S,{pinned:ne})}})(),vt(n(s),Ye,ge.map(ne=>({id:ne.id,data:ne.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>E),f(u,()=>z),f(c,()=>q),{cancel:async()=>{for(const ne of te){const se=E.get(ne.id);se?.data&&(se.data=ne.data)}await Promise.all([(async()=>{oe||(q.delete(S),await _o(n(s),jt,S))})(),vt(n(s),Ye,te.map(ne=>({id:ne.id,data:ne.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>E),f(u,()=>z),f(c,()=>q)}}},we=async(y,S)=>{const C=n(v)(),E=n(u)(),z=n(c)(),q=[],te=[];for(const G of S){const ne=C.get(G);ne?.data&&(q.push({id:G,data:_t(ne.data)}),te.push({id:G,data:{...ne.data,tags:[...new Set([...ne.data.tags,y])],history:[...ne.data.history||[],{id:Kn(),link:_t(ne.data.link),text:ne.data.text,tags:ne.data.tags,updatedAt:Date.now()}]}}))}for(const G of te){const ne=C.get(G.id);ne?.data&&(ne.data=G.data)}const ge=z.has(y);return await Promise.all([(async()=>{ge||(z.set(y,{name:y,pinned:!1}),await yn(n(s),jt,y,{pinned:!1}))})(),vt(n(s),Ye,te.map(G=>({id:G.id,data:G.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>C),f(u,()=>E),f(c,()=>z),{cancel:async()=>{for(const G of q){const ne=C.get(G.id);ne?.data&&(ne.data=G.data)}await Promise.all([(async()=>{ge||(z.delete(y),await _o(n(s),jt,y))})(),vt(n(s),Ye,q.map(G=>({id:G.id,data:G.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>C),f(u,()=>E),f(c,()=>z)}}},de=async(y,S,C)=>{const E=n(v)(),z=n(u)(),q=n(c)(),te=[],ge=[];for(const se of C){const Ee=E.get(se);Ee?.data&&(te.push({id:se,data:_t(Ee.data)}),ge.push({id:se,data:{...Ee.data,tags:[...new Set([...Ee.data.tags.filter(Je=>!y.includes(Je)),...S])],history:[...Ee.data.history||[],{id:Kn(),link:_t(Ee.data.link),text:Ee.data.text,tags:Ee.data.tags,updatedAt:Date.now()}]}}))}for(const se of ge){const Ee=E.get(se.id);Ee?.data&&(Ee.data=se.data)}const oe=n(c)(),G=S.filter(se=>!oe.has(se));return await Promise.all([(async()=>{if(G.length>0)return vt(n(s),jt,G.map(se=>({id:se,data:{pinned:!1}})))})(),vt(n(s),Ye,ge.map(se=>({id:se.id,data:se.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>E),f(u,()=>z),f(c,()=>q),{cancel:async()=>{for(const se of te){const Ee=E.get(se.id);Ee?.data&&(Ee.data=se.data)}await Promise.all([(async()=>{if(G.length>0){for(const se of G)q.delete(se);return sr(n(s),jt,G)}})(),vt(n(s),Ye,te.map(se=>({id:se.id,data:se.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>E),f(u,()=>z),f(c,()=>q)}}},ee=async y=>{const S=JSON.parse(y.data),C=S;if(S.tabId&&S.tabId===o){C.type==="exit"&&(w(),await Fa(n(s),Ye),await Fa(n(s),jt));return}if(C.type==="putNote"){const z=C.data.id;if(!z)return;const q=await Kr(n(s),Ye,z);if(!q)return;_({id:z,data:q})}else if(C.type==="deleteNote"){const E=C.data.id;if(!E)return;x(E)}else if(C.type==="pinTag"){const E=C.data.tag,z=C.data.pinned,q=n(c)();q.set(E,{name:E,pinned:z}),f(c,()=>q)}else C.type==="clearNotes"?w():C.type==="reloadNotes"||C.type==="emptyBin"?L():C.type==="exit"&&w()};Se(()=>(L(),i.addEventListener(ee),()=>{i.removeEventListener(ee)})),Cd({isInitedNotes:p,createNote:U,updateNote:Y,deleteNote:Q,saveNote:V,revertNote:K,pinNote:re,moveNoteToBin:_e,moveNoteToArchive:J,getGetNotes:T,importNotes:$,clearNotes:X,getNoteById:B,getGetMapTags:()=>n(c),pinTag:ke,restoreNoteFromBin:ce,moveNoteFromArchive:be,checkNotes:h,checkNotesInBin:m,checkNotesInArchive:k,emptyBin:Ce,moveNotesToBin:F,moveNotesToArchive:Z,moveNotesFromArchive:le,deleteNotes:R,restoreNotesFromBin:ie,deleteTag:ae,renameTag:pe,addTag:we,changeTags:de});var Te=ue(),Le=M(Te);Ne(Le,()=>e.children??je),g(t,Te),ve()}const Ki={};function kd(t){ut(Ki,t)}function Na(){const t=dt(Ki);if(!t)throw new Error("No FeedContext found");return t}const Yi={};var Ge=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(Ge||{});function Ed(t){ut(Yi,t)}function lo(){const t=dt(Yi);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function Pd(t,e){fe(e,!0);const a=$o(),{getSelectedTags:r}=Bn(),{getSelectedMetaTags:o}=lo(),{getGetNotes:s}=Ot();let i=A(r),l=A(o),d=I(0),c=[],u=I(0),v=A(()=>n(l).has(Ge.ARCHIVED)),p=A(()=>n(l).has(Ge.BIN));Oe(()=>{const k=s()()||[],_=[],x=Array.from(n(i).values());for(let H=k.length-1;H>=0;H--){if(!k[H]||!k[H].data)continue;const w=k[H];if(!n(v)&&!n(p)&&(w?.data.deletedAt||w?.data.archivedAt)||n(v)&&(w?.data.deletedAt||!w?.data.archivedAt)||n(p)&&!w?.data.deletedAt)continue;const T=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(w.data.link?.title.toLowerCase().includes(T)||w.data.link?.url.toLowerCase().includes(T)||w.data.text.toLowerCase().includes(T)||w.data.tags.map(O=>O.toLowerCase()).join(" ").includes(T)))){if(n(l).has(Ge.INBOX)){if(w.data.tags.length>0)continue}else if(n(i).size&&x.some(O=>!w.data.tags.includes(O)))continue;_.push(w)}}f(d,_.length,!0),c=_,f(u,Date.now(),!0)}),kd({getFiltredNotesLength:()=>n(d),getFiltredNotes:()=>(n(u),c),getUpdatedFiltredNotesTimestamp:()=>n(u)});var h=ue(),m=M(h);Ne(m,()=>e.children??je),g(t,h),ve()}function Nd(t,e){fe(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Vt(),s=A(a),i="selectedMetaTags";let l=A(()=>n(s).get(i)||""),d=A(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));Ed({getSelectedMetaTags:()=>n(d),addMetaTag:_=>{n(d).has(_)||r(i,[...n(d),_].map(x=>encodeURIComponent(x)).join(","))},removeMetaTag:_=>{n(d).has(_)&&n(d).size===1?o(i):n(d).has(_)&&r(i,[...n(d)].filter(x=>x!==_).map(x=>encodeURIComponent(x)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:_=>{_.size===0?o(i):r(i,[..._].map(x=>encodeURIComponent(x)).join(","))}});var m=ue(),k=M(m);Ne(k,()=>e.children??je),g(t,m),ve()}const Gi={},ra=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function Ad(t){ut(Gi,t)}function Hn(){const t=dt(Gi);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Md(t,e){fe(e,!0);let a=lt(ra());Ad(a);var r=ue(),o=M(r);Ne(o,()=>e.children??je),g(t,r),ve()}const Xi={};function Dd(t){ut(Xi,t)}function ns(){const t=dt(Xi);if(!t)throw new Error("No ScrollingContext found");return t}function Id(t,e){fe(e,!0);let a=I(!1);const r=()=>n(a),o=Vi(()=>{f(a,!1)},100);Dd({isScrolling:r,enable:()=>{f(a,!0),o()}});var i=ue(),l=M(i);Ne(l,()=>e.children??je),g(t,i),ve()}const Ji={};function Ld(t){ut(Ji,t)}function Aa(){const t=dt(Ji);if(!t)throw new Error("No MobileSizeContext found");return t}function Rd(t,e){fe(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=I(lt(a())),o=Hn();const s=Vi(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{f(r,a(),!0)})};Ld({checkMobileSize:()=>n(r)}),Se(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var d=ue(),c=M(d);Ne(c,()=>e.children??je),g(t,d),ve()}const Zi={};function Od(t){ut(Zi,t)}function cn(){const t=dt(Zi);if(!t)throw new Error("No DialogContext found");return t}function Fd(t,e){fe(e,!0);let a=I(0),r=I(!1),o=I(!0),s=I(!1),i=I(!1);Od({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{f(a,n(a)+1)},dialogDec:()=>{f(a,n(a)-1)},blockDialog:O=>{f(r,O,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:O=>{f(o,O,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:O=>{f(s,O,!0)},setLeftEnd:O=>{f(i,O,!0)},getCountDialog:()=>n(a)});var w=ue(),T=M(w);Ne(T,()=>e.children??je),g(t,w),ve()}const Qi={};function zd(t){ut(Qi,t)}function co(){const t=dt(Qi);if(!t)throw new Error("No ScrollContainerContext found");return t}function jd(t,e){fe(e,!0);let a=I(null);zd({setScrollContainer:l=>{f(a,l,!0)},getScrollContainer:()=>n(a)});var s=ue(),i=M(s);Ne(i,()=>e.children??je),g(t,s),ve()}const $i={};function Bd(t){ut($i,t)}function as(){const t=dt($i);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Hd(t,e){fe(e,!0);let a=I(200);Bd({setDialogPageHeight:l=>{f(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=ue(),i=M(s);Ne(i,()=>e.children??je),g(t,s),ve()}const Ud=[dr,Vn,Ye,jt,_d];function Wd(){return new Promise((t,e)=>{const a=indexedDB.open(pd,md);yt(a,"upgradeneeded",()=>{const r=a.result;for(const o of Ud)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),yt(a,ia,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),yt(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),yt(a,la,()=>{e()})})}function qd(t,e){fe(e,!0);let a=I(null);Se(()=>{Wd().then(l=>{f(a,l,!0)}).catch(l=>{})}),vd({getDB:()=>n(a)});var o=ue(),s=M(o);{var i=l=>{var d=ue(),c=M(d);Ne(c,()=>e.children??je),g(l,d)};W(s,l=>{n(a)&&l(i)})}g(t,o),ve()}function Vd(t,e){fe(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Vt(),s=A(a);let i=A(()=>n(s).get(tn)||""),l=A(()=>n(i).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const d=()=>n(l),c=w=>{if(w.length===0){o(tn);return}r(tn,w.map(T=>encodeURIComponent(T)).join(","))},u=w=>{r(tn,[...n(l),w].map(T=>encodeURIComponent(T)).join(","))};wd({setDialogPages:c,getDialogPages:d,pushDialogPage:u,popDialogPage:()=>{const w=n(l)[n(l).length-1];return n(l).length<=1?(o(tn),w):(r(tn,n(l).slice(0,-1).map(T=>encodeURIComponent(T)).join(",")),w)},replaceDialogPage:w=>{r(tn,[...n(l).slice(0,-1),w].map(T=>encodeURIComponent(T)).join(","))},hasDialogPage:w=>n(l).find(T=>{const[O]=T.split("?");return O===w})!==void 0,clearDialogPages:()=>{o(tn)},createDialogPageHref:w=>{const T=new URLSearchParams(n(s).toString());return T.set(tn,[...d(),w].map(O=>encodeURIComponent(O)).join(",")),`${window.location.pathname}?${T.toString()}`},createHandleClickDialogPage:w=>T=>{T.preventDefault(),u(w)}});var x=ue(),H=M(x);Ne(H,()=>e.children??je),g(t,x),ve()}function Kd(t,e){fe(e,!0);let a=I(lt(new URLSearchParams(window.location.search)));const r=v=>{const p=window.location.pathname;f(a,v,!0),window.history.replaceState(null,"",`${p}${v.size>0?`?${v.toString()}`:""}`)};Qc({getSearchParams:()=>n(a),replaceSearchParams:v=>{const p=new URLSearchParams(v);r(p)},setSearchParam:(v,p)=>{const h=new URLSearchParams(n(a));h.set(v,p),r(h)},deleteSearchParam:v=>{const p=new URLSearchParams(n(a));p.delete(v),r(p)},getHref:v=>{const p=new URLSearchParams(v);return`${window.location.pathname}${p.toString().length>0?`?${p.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var c=ue(),u=M(c);Ne(u,()=>e.children??je),g(t,c),ve()}const el={};function Yd(t){ut(el,t)}function Gd(){const t=dt(el);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Xd(t,e){fe(e,!0);let a=lt({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";Se(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l);let d=null;const c=u=>{o()&&(d&&clearTimeout(d),d=setTimeout(()=>{o()&&u.target!==document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur?.()},120))};return document.addEventListener("touchstart",c,{passive:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l),document.removeEventListener("touchstart",c)}}),Yd({getIsKeyboardVisible:r});var s=ue(),i=M(s);Ne(i,()=>e.children??je),g(t,s),ve()}function Jd(t,e){fe(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};hd({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=ue(),s=M(o);Ne(s,()=>e.children??je),g(t,o),ve()}function Zd(t,e){qd(t,{children:(a,r)=>{Jd(a,{children:(o,s)=>{Md(o,{children:(i,l)=>{Id(i,{children:(d,c)=>{Rd(d,{children:(u,v)=>{Fd(u,{children:(p,h)=>{jd(p,{children:(m,k)=>{Hd(m,{children:(_,x)=>{Xd(_,{children:(H,w)=>{Kd(H,{children:(T,O)=>{Vd(T,{children:(L,N)=>{var U=ue(),Y=M(U);Ne(Y,()=>e.children??je),g(L,U)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Qd(t,e){Zd(t,{children:(a,r)=>{nd(a,{children:(o,s)=>{$c(o,{children:(i,l)=>{rd(i,{children:(d,c)=>{sd(d,{children:(u,v)=>{Nd(u,{children:(p,h)=>{ld(p,{children:(m,k)=>{fd(m,{children:(_,x)=>{yd(_,{children:(H,w)=>{Sd(H,{children:(T,O)=>{Td(T,{children:(L,N)=>{Pd(L,{children:(U,Y)=>{var V=ue(),K=M(V);Ne(K,()=>e.children??je),g(U,V)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const ht=t=>{const a=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(i=>i instanceof HTMLElement?i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement?!i.disabled&&i.offsetParent!==null:i.offsetParent!==null:!1),r=a.indexOf(t);if(r===-1)return{next:null,prev:null};const o=a[r+1],s=a[r-1];return{next:o,prev:s}};let At=I(""),Wn=I(null),za=I(null),Pn=I(null),qn=I(lt([])),Or=I(null),Yn=null;function it(t,e){f(At,""),Yn=null,f(za,null),f(Pn,null),setTimeout(()=>{f(At,t,!0),e?.onFinish&&f(za,e.onFinish,!0),e?.cancel&&(f(Pn,e.cancel.onCancel,!0),Yn=e.cancel.nextFocusRef)},16)}var $d=P('<button type="button" class="c p-18jfd2t">undo</button>'),eu=P('<div class="a p-18jfd2t"><div class="b p-18jfd2t"><span> </span> <!></div></div>'),tu=P("<div><!></div>");function rs(t,e){fe(e,!0);const a=Kn();Se(()=>(f(qn,[...n(qn),a],!0),()=>{const d=n(qn).indexOf(a);d!==-1&&f(qn,n(qn).filter((c,u)=>u!==d),!0)}));const r=d=>{if(d.key==="Tab"&&d.shiftKey){if(Yn&&n(At)){d.preventDefault();const{prev:c}=ht(Yn);c?.focus(),f(At,"")}}else if(d.key==="Tab"&&!d.shiftKey)Yn&&n(At)&&(d.preventDefault(),f(At,""),Yn?.focus());else if(d.key==="Escape"&&n(At)){if(d.preventDefault(),Yn){const{prev:c}=ht(Yn);c?.focus()}f(At,"")}};Se(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)})),Oe(()=>{n(At);const d=n(Pn)?2e3:800;n(At)&&(n(Wn)?.getBoundingClientRect(),n(Wn)?.style.setProperty("opacity","1"));const c=setTimeout(()=>{n(Wn)?.style.removeProperty("opacity")},d),u=setTimeout(()=>{f(At,""),n(za)&&n(za)(),f(za,null),f(Pn,null),n(Wn)?.style.removeProperty("opacity")},d+400);return()=>{clearTimeout(c),clearTimeout(u)}});const o=d=>{d.preventDefault(),n(Pn)&&(f(za,null),n(Pn)(),f(Pn,null)),f(At,""),n(Wn)?.style.removeProperty("opacity")};Oe(()=>{n(At)&&n(Pn)&&n(Or)&&setTimeout(()=>{n(Or)?.focus()},151)}),Oe(()=>{n(qn),qt(()=>{f(At,""),n(Wn)?.style.removeProperty("opacity")})});var s=tu(),i=b(s);{var l=d=>{var c=eu(),u=b(c),v=b(u),p=b(v),h=D(v,2);{var m=k=>{var _=$d();_.__click=o,Xe(_,x=>f(Or,x),()=>n(Or)),g(k,_)};W(h,k=>{n(Pn)&&k(m)})}Xe(u,k=>f(Wn,k),()=>n(Wn)),xe(()=>ot(p,n(At))),g(d,c)};W(i,d=>{n(At)&&n(qn)[n(qn).length-1]===a&&d(l)})}g(t,s),ve()}st(["click"]);var nu=P('<span class="a p-lxk90o"><!></span>');function ct(t,e){var a=nu(),r=b(a);Ne(r,()=>e.children),g(t,a)}var au=Ac('<svg class="p-1yv1ibq"><use></use></svg>');function me(t,e){let a=Pe(e,"name",8,"");var r=au(),o=b(r);xe(()=>nt(o,"href",`#icon-${a()??""}`)),g(t,r)}var ru=P('<button class="a p-18m1f7k"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function tl(t,e){fe(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=Ar(),{getDialogPages:s}=Jt(),{checkExistedDialog:i}=cn();let l=A(()=>s().length>0||i());const d=p=>{if(p.preventDefault(),n(l))return;const h=r();h==="closed"?a():h==="opened"&&o()};var c=ru();c.__click=d;var u=b(c);he(u,()=>({"--size":"32px"})),me(u.lastChild,{name:"sidebarMenu"});var v=D(u,2);ct(v,{children:(p,h)=>{var m=Me("Menu");g(p,m)}}),g(t,c),ve()}st(["click"]);var ou=P('<button class="b p-9fi5nt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),su=P('<div class="a p-9fi5nt"><input class="p-9fi5nt"/> <!></div>');function Lo(t,e){fe(e,!0);let a=Pe(e,"value",15,""),r=Pe(e,"ref",15,null);const o=c=>{c.key==="Escape"&&(a(""),e.onChange?.(""))};Se(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=su(),i=b(s);i.__input=c=>e.onChange?.(c.target?.value||""),Xe(i,c=>r(c),()=>r());var l=D(i,2);{var d=c=>{var u=ou();u.__click=()=>{a(""),e.onChange?.("")};var v=b(u);he(v,()=>({"--size":"20px"})),me(v.lastChild,{name:"close"});var p=D(v,2);ct(p,{children:(h,m)=>{var k=Me("Clear");g(h,k)}}),g(c,u)};W(l,c=>{a()&&c(d)})}xe(()=>nt(i,"placeholder",e.placeholder)),gn("focus",i,function(...c){e.onFocus?.apply(this,c)}),Pi(i,a),g(t,s),ve()}st(["input","click"]);function os(t,e){fe(e,!0),Se(()=>{const a=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("click",a,{capture:!0}),()=>{document.removeEventListener("click",a,{capture:!0})}}),ve()}function iu(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const Qa=iu(),lu=()=>{const t=navigator.userAgent;return/android/i.test(t)},wr=lu(),dh=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},uh=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},yr=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let Ra=I(lt([]));var cu=P("<dialog><div><!></div></dialog> <!>",1);function Mr(t,e){fe(e,!0);const a=Kn(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;Se(()=>(f(Ra,[...n(Ra),a],!0),()=>{const w=n(Ra).indexOf(a);w!==-1&&f(Ra,n(Ra).filter((T,O)=>O!==w),!0)}));let o=Pe(e,"onClosed",3,()=>{}),s=Pe(e,"blocked",3,!1),i=I(null),l=I(null),d=I(!1),{dialogInc:c,dialogDec:u}=cn();const v=()=>{const w=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(w),o()()},{once:!0}),f(d,!1)};Oe(()=>{e.startClose&&v()}),Se(()=>{n(i)?.showModal(),n(i)?.getClientRects(),f(d,!0);const w=T=>{T?.preventDefault(),s()||v()};return n(i)?.addEventListener("cancel",w),n(i)?.addEventListener("close",w),()=>{n(i)?.removeEventListener("cancel",w),n(i)?.removeEventListener("close",w)}}),Se(()=>(c(),()=>{u()})),Se(()=>{const w=T=>{T.key==="Escape"&&s()&&T.preventDefault()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}});function p(){setTimeout(()=>{if(Qa||!n(i)||!n(l))return;const w=window.visualViewport;if(w)if(w.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}Se(()=>(p(),window.visualViewport?.addEventListener("resize",p),window.visualViewport?.addEventListener("scroll",p),document.addEventListener("focusin",p),document.addEventListener("focusout",p),()=>{window.visualViewport?.removeEventListener("resize",p),window.visualViewport?.removeEventListener("scroll",p),document.addEventListener("focusin",p),document.addEventListener("focusout",p)}));var h=cu(),m=M(h),k=b(m),_=b(k);Ne(_,()=>e.children),Xe(k,w=>f(l,w),()=>n(l)),Xe(m,w=>f(i,w),()=>n(i));var x=D(m,2);{var H=w=>{os(w,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:v})};W(x,w=>{n(i)&&n(l)&&!s()&&w(H)})}xe(()=>{$e(m,1,at({a:!0,b:n(d),c:n(Ra).length>1}),"p-1x14yml"),$e(k,1,at({d:!0,b:n(d)}),"p-1x14yml")}),g(t,h),ve()}var du=P("<div><!></div>");function uu(t,e){fe(e,!0);let a=I(!1),r=I(null);const o=()=>{const u=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(u),e.onClosed()},{once:!0}),f(a,!1)},s=u=>{u.target!==n(r)&&!n(r)?.contains(u.target)&&o()},i=u=>{u.target!==n(r)&&!n(r)?.contains(u.target)&&o()},l=u=>{u.key==="Escape"&&o()};Se(()=>{n(r)?.getClientRects(),f(a,!0);const u=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(u),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),Oe(()=>{e.startClose&&o()});var d=du(),c=b(d);Ne(c,()=>e.children),Xe(d,u=>f(r,u),()=>n(r)),xe(()=>$e(d,1,at({a:!0,b:n(a)}),"p-1unpq18")),g(t,d),ve()}var fu=P("<ul><!></ul>"),vu=P("<ul><!></ul>");function Dr(t,e){fe(e,!0);let a=Pe(e,"ref",15);var r=ue(),o=M(r);{var s=l=>{Mr(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(d,c)=>{var u=fu(),v=b(u);Ne(v,()=>e.children),Xe(u,p=>a(p),()=>a()),xe(()=>$e(u,1,at({a:!0,b:e.isMobile}),"p-1sp2xya")),g(d,u)},$$slots:{default:!0}})},i=l=>{uu(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(d,c)=>{var u=vu(),v=b(u);Ne(v,()=>e.children),Xe(u,p=>a(p),()=>a()),xe(()=>$e(u,1,at({a:!0,b:e.isMobile}),"p-1sp2xya")),g(d,u)},$$slots:{default:!0}})};W(o,l=>{e.isMobile?l(s):l(i,!1)})}g(t,r),ve()}var gu=P("<button><!></button>"),hu=P("<a><!></a>");function ze(t,e){let a=Pe(e,"dangerous",3,!1),r=Pe(e,"type",3,"button"),o=Pe(e,"href",3,"");var s=ue(),i=M(s);{var l=c=>{var u=gu();u.__click=function(...p){e.onClick?.apply(this,p)},u.__keydown=function(...p){e.onKeydown?.apply(this,p)};var v=b(u);Ne(v,()=>e.children??je),xe(()=>$e(u,1,at({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")),g(c,u)},d=c=>{var u=hu();u.__click=function(...p){e.onClick?.apply(this,p)},u.__keydown=function(...p){e.onKeydown?.apply(this,p)};var v=b(u);Ne(v,()=>e.children??je),xe(()=>{nt(u,"href",o()),$e(u,1,at({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")}),g(c,u)};W(i,c=>{r()==="button"?c(l):c(d,!1)})}g(t,s)}st(["click","keydown"]);var pu=P('<li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li>',1),mu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),_u=P('<div class="a p-cjxu92"><button><!> <!></button> <!></div>');function wu(t,e){fe(e,!0);let a=I(!1),r=I(!1);const{getFeedOrder:o,setFeedOrder:s}=Ii();let i=Qa||wr,l=A(o);const d=()=>{n(a)||f(a,!0)},c=x=>{f(r,!0),s(x)},u=()=>{f(a,!1),f(r,!1)};Se(()=>{const x=H=>{H.key==="Escape"&&f(r,!0)};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)});var v=_u(),p=b(v);p.__click=d,$e(p,1,at({b:!0,c:!0}),"p-cjxu92");var h=b(p);me(h,{name:"filter"});var m=D(h,2);ct(m,{children:(x,H)=>{var w=Me("show feed order menu");g(x,w)}});var k=D(p,2);{var _=x=>{var H=mu(),w=M(H);he(w,()=>({"--right":"0px","--top":"44px"})),Dr(w.lastChild,{get startClose(){return n(r)},onClosed:u,get isMobile(){return i},children:(T,O)=>{var L=pu(),N=M(L),U=b(N);{let re=A(()=>n(l)==="newest");ze(U,{get active(){return n(re)},get dialogMode(){return i},onClick:()=>c("newest"),children:(_e,J)=>{var F=Me("Newest");g(_e,F)},$$slots:{default:!0}})}var Y=D(N,2),V=b(Y);{let re=A(()=>n(l)==="oldest");ze(V,{get active(){return n(re)},get dialogMode(){return i},onClick:()=>c("oldest"),children:(_e,J)=>{var F=Me("Oldest");g(_e,F)},$$slots:{default:!0}})}var K=D(Y,2),Q=b(K);{let re=A(()=>n(l)==="AtoZ");ze(Q,{get active(){return n(re)},get dialogMode(){return i},onClick:()=>c("AtoZ"),children:(_e,J)=>{var F=Me("A to Z");g(_e,F)},$$slots:{default:!0}})}var X=D(K,2),B=b(X);{let re=A(()=>n(l)==="ZtoA");ze(B,{get active(){return n(re)},get dialogMode(){return i},onClick:()=>c("ZtoA"),children:(_e,J)=>{var F=Me("Z to A");g(_e,F)},$$slots:{default:!0}})}g(T,L)},$$slots:{default:!0}}),g(x,H)};W(k,x=>{n(a)&&x(_)})}g(t,v),ve()}st(["click"]);var yu=P('<div><!> <div class="a p-y3zt6o"></div></div>');function Ma(t,e){fe(e,!0);let a=I(!1);Se(()=>{const s=setTimeout(()=>{f(a,!0)},200);return()=>{clearTimeout(s)}});var r=yu(),o=b(r);Ne(o,()=>e.children??je),xe(()=>$e(r,1,at({b:!0,c:n(a)}),"p-y3zt6o")),g(t,r),ve()}var bu=P("<a><!></a>"),Su=P("<button><!></button>");function Dt(t,e){let a=Pe(e,"type",3,"standard"),r=Pe(e,"typeButton",3,"button"),o=Pe(e,"element",3,"button"),s=Pe(e,"href",3,""),i=Pe(e,"fullWidth",3,!1),l=Pe(e,"withoutMinWidth",3,!1);var d=ue(),c=M(d);{var u=p=>{var h=bu();h.__click=function(...k){e.onClick?.apply(this,k)};var m=b(h);Ne(m,()=>e.children??je),xe(()=>{nt(h,"target",e.target),nt(h,"rel",e.rel),nt(h,"href",s()),$e(h,1,at({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),g(p,h)},v=p=>{var h=Su();h.__click=function(...k){e.onClick?.apply(this,k)};var m=b(h);Ne(m,()=>e.children??je),xe(()=>{nt(h,"type",r()),$e(h,1,at({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),g(p,h)};W(c,p=>{o()==="a"?p(u):p(v,!1)})}g(t,d)}st(["click"]);let Ro=I(!1),Fr=I(!1),Oo=I(""),Fo=I("Cancel"),zo=I("Confirm"),jo,Ur=I(void 0),Bo,Ho=I("dangerous");function Ha(t){f(Ro,!0),f(Oo,t.title,!0),t.buttonCancelTitle&&f(Fo,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&f(zo,t.buttonConfirmTitle,!0),jo=t.onConfirm,f(Ur,t.onCancel,!0),Bo=t.onClosed,t.type?f(Ho,t.type,!0):f(Ho,"dangerous")}var Cu=P('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),xu=P('<div class="a p-1jlul5o"><!></div>');function Tu(t,e){fe(e,!0);let a=I(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{f(a,!0)},250)};Se(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(Ur)?.(),f(Fr,!0)},l=async()=>{s(),await jo?.(),f(Fr,!0),o=!0},d=()=>{clearTimeout(r),f(a,!1),f(Ro,!1),f(Fr,!1),f(Oo,""),f(Fo,"Cancel"),f(zo,"Confirm"),f(Ur,void 0),jo=void 0,Bo&&Bo(o),o=!1};var c=ue(),u=M(c);{var v=p=>{Mr(p,{get blocked(){return n(a)},get startClose(){return n(Fr)},onClosed:d,children:(h,m)=>{var k=xu(),_=b(k);{var x=w=>{Ma(w,{})},H=w=>{var T=Cu(),O=M(T),L=b(O),N=D(O,2),U=b(N);{var Y=K=>{Dt(K,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(Q,X)=>{var B=Me();xe(()=>ot(B,n(Fo))),g(Q,B)},$$slots:{default:!0}})};W(U,K=>{n(Ur)&&K(Y)})}var V=D(U,2);Dt(V,{onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(Ho)},children:(K,Q)=>{var X=Me();xe(()=>ot(X,n(zo))),g(K,X)},$$slots:{default:!0}}),xe(()=>ot(L,n(Oo))),g(w,T)};W(_,w=>{n(a)?w(x):w(H,!1)})}g(h,k)},$$slots:{default:!0}})};W(u,p=>{n(Ro)&&p(v)})}g(t,c),ve()}const br=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,d=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!d){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var ku=P('<div class="a p-rp2pt7"><a class="b p-rp2pt7"><span class="c p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function Eu(t,e){fe(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=Jt(),{checkExistedDialog:i}=cn(),l=()=>{o.length===0&&!i()&&s(ye.NewNote)};Se(()=>br({key:"n",action:l})),Qo();var d=ku(),c=b(d),u=A(()=>r(ye.NewNote));c.__click=function(..._){n(u)?.apply(this,_)};var v=b(c),p=b(v);he(p,()=>({"--size":"32px","--color":"#b0b0b0"})),me(p.lastChild,{name:"add"});var h=D(p,2);ct(h,{children:(_,x)=>{var H=Me("Add note");g(_,H)}});var m=D(v,2),k=b(m);he(k,()=>({"--size":"16px","--color":"#b0b0b0"})),me(k.lastChild,{name:"plus"}),xe(_=>nt(c,"href",_),[()=>a(ye.NewNote)]),g(t,d),ve()}st(["click"]);var Pu=P("<button><!></button>");function da(t,e){fe(e,!0);let a=Pe(e,"type",3,"button"),r=!1,o=I(null);Oe(()=>{e.onRef&&e.onRef(n(o))});const s=u=>{(u.key==="Enter"||u.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=u=>{(u.pointerType==="mouse"&&u.button===0||u.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(u)};var d=Pu();d.__keydown=s,d.__click=i,d.__pointerdown=l,d.__touchstart=function(...u){e.onTouchStart?.apply(this,u)};var c=b(d);Ne(c,()=>e.children??je),Xe(d,u=>f(o,u),()=>n(o)),xe(()=>{nt(d,"type",a()),d.disabled=e.disabled,$e(d,1,at({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-pgzded")}),g(t,d),ve()}st(["keydown","click","pointerdown","touchstart"]);var Nu=P('<div class="b p-1pt17hy"> </div>'),Au=P('<div class="a p-1pt17hy"><input/> <!></div>');function Sr(t,e){fe(e,!0);let a=Pe(e,"value",15,""),r=Pe(e,"error",3,""),o=Pe(e,"ref",15,null);var s=Au(),i=b(s);i.__input=function(...u){e.onInput?.apply(this,u)};let l;Xe(i,u=>o(u),()=>o());var d=D(i,2);{var c=u=>{var v=Nu(),p=b(v);xe(()=>ot(p,r())),g(u,v)};W(d,u=>{r()&&u(c)})}xe(()=>{nt(i,"placeholder",e.placeholder),l=$e(i,1,"p-1pt17hy",null,l,{error:!!r()})}),gn("blur",i,function(...u){e.onBlur?.apply(this,u)}),gn("focus",i,function(...u){e.onFocus?.apply(this,u)}),Pi(i,a),g(t,s),ve()}st(["input"]);var Mu=P('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Du=P('<form class="a p-y9ylet"><!></form>');function Iu(t,e){fe(e,!0);const{renameTag:a}=Ot(),{getSelectedTags:r,setSelectedTags:o}=Bn(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=Pa(),{getFiltredNotes:d}=Na();let c=I(!1),u=I(!1),v,p=!1,h=I(null),m=I(lt(e.tag)),k=e.nextFocusRef;Se(()=>(n(h)&&n(h).focus(),()=>{v&&clearTimeout(v)}));const _=()=>{v=setTimeout(()=>{f(u,!0)},250)},x=()=>{f(c,!0)},H=async()=>{if(n(m).trim()===e.tag){x();return}if(n(m).trim()!=="")try{_();const O=r(),L=[...O].map(K=>K===e.tag?n(m).trim():K),N=new Set(s()),U=d(),Y=N.size?[...N]:U.map(K=>K.id),{cancel:V}=await a(e.tag,n(m).trim(),Y);l(),o(new Set(L)),it("Tag renamed",{cancel:{nextFocusRef:k,onCancel:async()=>{await V(),o(O),i(N),setTimeout(()=>{const{prev:K}=ht(k);K?.focus()},16)}}}),p=!0}finally{f(c,!0)}},w=()=>{e.onClosed?.(p)},T=O=>{O.preventDefault(),H()};Mr(t,{get blocked(){return n(u)},get startClose(){return n(c)},onClosed:w,children:(O,L)=>{var N=Du(),U=b(N);{var Y=K=>{Ma(K,{})},V=K=>{var Q=Mu(),X=M(Q),B=b(X),re=D(X,2);Sr(re,{placeholder:"Enter new tag name",get ref(){return n(h)},set ref(Z){f(h,Z,!0)},get value(){return n(m)},set value(Z){f(m,Z,!0)}});var _e=D(re,2),J=b(_e);Dt(J,{onClick:x,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(Z,le)=>{var ie=Me("Cancel");g(Z,ie)},$$slots:{default:!0}});var F=D(J,2);Dt(F,{onClick:H,fullWidth:!0,withoutMinWidth:!0,children:(Z,le)=>{var ie=Me("OK");g(Z,ie)},$$slots:{default:!0}}),xe(()=>ot(B,`Rename "${e.tag??""}" for selected notes`)),g(K,Q)};W(U,K=>{n(u)?K(Y):K(V,!1)})}gn("submit",N,T),g(O,N)},$$slots:{default:!0}}),ve()}let Qn=I(!1),ua=I(!1),Yt=I(""),va=I(0),ur=I(0),fr=I(0),Wr,Yr=()=>({bottom:0,right:0,height:0}),$t=I(null),Uo=I(null);function Lu(t){if(n(Qn)){f(ua,!0),n(Yt)!==t.tag&&(Wr=()=>{const a=t.getRect();f(Qn,!0),f(Yt,t.tag,!0),f(va,a.bottom,!0),f(ur,a.right,!0),f(fr,a.height,!0),Yr=t.getRect,f($t,t.focusRef,!0)});return}const e=t.getRect();f(Qn,!0),f(Yt,t.tag,!0),f(va,e.bottom,!0),f(ur,e.right,!0),f(fr,e.height,!0),Yr=t.getRect,f($t,t.focusRef,!0)}const Ru=()=>n(Qn),Ou=()=>n(Uo);var Fu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),zu=P('<li class="p-16hbyw2"><!></li>'),ju=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Bu=P('<li class="p-16hbyw2"><!></li>'),Hu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),Uu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),Wu=P('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),qu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Vu=P("<!> <!>",1);function Ku(t,e){fe(e,!0);const{getScrollContainer:a}=co(),{pinTag:r,getGetMapTags:o,deleteTag:s}=Ot(),{checkMobileSize:i}=Aa(),{getSelectedTags:l,removeTag:d,setSelectedTags:c}=Bn(),{getSelectedNotes:u,setSelectedNotes:v,clearNotes:p}=Pa(),{getFiltredNotes:h}=Na();let m=I(!1);Oe(()=>{n(Qn),qt(()=>{f(m,o()().get(n(Yt))?.pinned||!1,!0)})});let k=I(!1);const _=()=>{r(n(Yt),!0),f(ua,!0);let J=n($t),F=ht(J)?.next;it("Tag pinned",{cancel:{nextFocusRef:F,onCancel:async()=>{r(n(Yt),!1),setTimeout(()=>{const{prev:Z}=ht(F);Z?.focus()},16)}}})},x=()=>{r(n(Yt),!1),f(ua,!0);let J=n($t),F=ht(J)?.next;it("Tag unpinned",{cancel:{nextFocusRef:F,onCancel:async()=>{r(n(Yt),!0),setTimeout(()=>{const{prev:Z}=ht(F);Z?.focus()},16)}}})},H=()=>{f(Qn,!1),f(ua,!1),f(va,0),f(ur,0),f(fr,0),Yr=()=>({bottom:0,right:0,height:0}),f($t,null),Wr&&setTimeout(()=>{Wr?.(),Wr=void 0})};let w=A(()=>window.innerHeight-n(va)<100?n(va)-n(fr)-98+"px":n(va)+5+"px"),T=A(a);const O=J=>{J.key==="Tab"&&J.shiftKey&&(J.preventDefault(),n($t)?.focus())},L=J=>{J.key==="Tab"&&!J.shiftKey&&n($t)&&(J.preventDefault(),ht(n($t))?.next?.focus())};Se(()=>{const J=F=>{F.key==="Escape"&&n(Qn)&&n($t)?.focus()};return window.addEventListener("keydown",J),()=>{window.removeEventListener("keydown",J)}});const N=()=>{f(ua,!0);let J=n($t),F=ht(J)?.next;Ha({title:`Are you sure to delete "${n(Yt)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const Z=Array.from(n(V)),le=new Set(u()),ie=h(),ce=le.size?[...le]:ie.map(ke=>ke.id);n(V).has(n(Yt))&&(le.size===0||ie.length===le.size)&&d(n(Yt)),p();const{cancel:be}=await s(n(Yt),ce);it("Tag deleted",{cancel:{nextFocusRef:F,onCancel:async()=>{await be(),c(new Set(Z)),v(new Set(le)),setTimeout(()=>{const{prev:ke}=ht(F);ke?.focus()},16)}}})},onCancel:async()=>{},onClosed:Z=>{setTimeout(()=>{Z||J?.focus()},16)}})};let U=()=>{};const Y=()=>{f(ua,!0),f(k,!0);let J=n($t);U=()=>{f(k,!1),setTimeout(()=>{J?.focus()},16)}};Oe(()=>{const J=()=>{const F=Yr();f(va,F.bottom,!0),f(ur,F.right,!0),f(fr,F.height,!0)};return n(T)?.addEventListener("scroll",J),window.addEventListener("resize",J),()=>{n(T)?.removeEventListener("scroll",J),window.removeEventListener("resize",J)}});let V=A(l),K=A(i);var Q=Vu(),X=M(Q);{var B=J=>{var F=qu(),Z=M(F);he(Z,()=>({"--left":n(ur)-36+"px","--top":n(w),"--transform-origin":"top left"})),Dr(Z.lastChild,{get startClose(){return n(ua)},onClosed:H,get isMobile(){return n(K)},get ref(){return n(Uo)},set ref(le){f(Uo,le,!0)},children:(le,ie)=>{var ce=Wu(),be=M(ce);{var ke=we=>{var de=zu(),ee=b(de);ze(ee,{onClick:_,onKeydown:O,get dialogMode(){return n(K)},children:(Te,Le)=>{var y=Fu(),S=M(y);he(S,()=>({"--size":"20px"})),me(S.lastChild,{name:"pin"}),g(Te,y)},$$slots:{default:!0}}),g(we,de)},R=we=>{var de=Bu(),ee=b(de);ze(ee,{onClick:x,onKeydown:O,get dialogMode(){return n(K)},children:(Te,Le)=>{var y=ju(),S=M(y);he(S,()=>({"--size":"20px"})),me(S.lastChild,{name:"pin-cancel"}),g(Te,y)},$$slots:{default:!0}}),g(we,de)};W(be,we=>{n(m)?we(R,!1):we(ke)})}var $=D(be,2),Ce=b($);ze(Ce,{onClick:Y,get dialogMode(){return n(K)},children:(we,de)=>{var ee=Hu(),Te=M(ee);he(Te,()=>({"--size":"20px"})),me(Te.lastChild,{name:"pen"}),g(we,ee)},$$slots:{default:!0}});var ae=D($,2),pe=b(ae);ze(pe,{onClick:N,onKeydown:L,dangerous:!0,get dialogMode(){return n(K)},children:(we,de)=>{var ee=Uu(),Te=M(ee);he(Te,()=>({"--size":"20px"})),me(Te.lastChild,{name:"bin"}),g(we,ee)},$$slots:{default:!0}}),g(le,ce)},$$slots:{default:!0}}),g(J,F)};W(X,J=>{n(Qn)&&J(B)})}var re=D(X,2);{var _e=J=>{{let F=A(()=>ht(n($t))?.next||null);Iu(J,{get tag(){return n(Yt)},get nextFocusRef(){return n(F)},onClosed:Z=>{U(Z)}})}};W(re,J=>{n(k)&&J(_e)})}g(t,Q),ve()}var Yu=P('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Gu=P('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),Xu=P("<!> <span> </span> <!>",1),Ju=P('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function vr(t,e){fe(e,!0);let{getGetMapTags:a}=Ot(),r=I(null),o=A(Ru);const s=()=>{if(n(r)){const v=n(r).getBoundingClientRect();return{bottom:v.bottom,right:v.right,height:v.height}}return{bottom:0,right:0,height:0}},i=v=>{v.stopPropagation(),v.preventDefault(),Lu({tag:e.tag,getRect:s,focusRef:n(r)})},l=v=>{v.key==="Tab"&&!v.shiftKey&&n(o)&&(v.preventDefault(),Ou()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let d=A(()=>a()().get(e.tag)?.pinned||!1);var c=Ju(),u=b(c);he(u,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),da(u.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(v,p)=>{var h=Xu(),m=M(h);{var k=T=>{var O=Yu(),L=b(O);he(L,()=>({"--size":"18px"})),me(L.lastChild,{name:"pin"}),g(T,O)};W(m,T=>{n(d)&&T(k)})}var _=D(m,2),x=b(_),H=D(_,2);{var w=T=>{var O=Gu();O.__click=i,O.__keydown=l;var L=b(O),N=b(L);he(N,()=>({"--size":"16px"})),me(N.lastChild,{name:"menu"});var U=D(N,2);ct(U,{children:(Y,V)=>{var K=Me("Tag options");g(Y,K)}}),Xe(O,Y=>f(r,Y),()=>n(r)),xe(()=>$e(O,1,at({c:!0,d:e.type==="selected"}),"p-9jjlcl")),g(T,O)};W(H,T=>{e.hideMenu||T(w)})}xe(()=>ot(x,e.tag)),g(v,h)},$$slots:{default:!0}}),g(t,c),ve()}st(["click","keydown"]);var Zu=P('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function ks(t,e){fe(e,!0);let a=Pe(e,"mobile",3,!1);const{getGetMapTags:r}=Ot();let s=A(()=>{const h=r()();return[...e.tags].sort((m,k)=>h.get(m)?.pinned?-1:h.get(k)?.pinned?1:m.localeCompare(k))}),i=A(()=>n(s).filter(h=>r()().get(h)?.pinned)),l=A(()=>n(s).filter(h=>!r()().get(h)?.pinned));var d=Zu(),c=b(d),u=b(c);On(u,16,()=>n(i),h=>h,(h,m)=>{vr(h,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})});var v=D(u,2);On(v,17,()=>e.metaTags,h=>"meta"+h,(h,m)=>{vr(h,{hideMenu:!0,get tag(){return n(m)},onClick:()=>{e.handleMetaTagClick(n(m))}})});var p=D(v,2);On(p,16,()=>n(l),h=>h,(h,m)=>{vr(h,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})}),xe(()=>$e(c,1,at({b:!0,c:a()}),"p-lawyrs")),g(t,d),ve()}var Qu=P('<div class="b c p-1i0uzbi"><div class="d p-1i0uzbi"><button class="e p-1i0uzbi"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),$u=P('<div class="a p-1i0uzbi"><!></div>');function Es(t,e){fe(e,!0);let a=I(null);const r=d=>{f(a,d,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};Oe(()=>{n(a)&&n(a).focus()});var s=$u(),i=b(s);{var l=d=>{var c=Qu(),u=b(c),v=b(u);v.__click=o;var p=b(v);he(p,()=>({"--size":"20px"})),me(p.lastChild,{name:"close"});var h=D(p,2);ct(h,{children:(_,x)=>{var H=Me("Clear");g(_,H)}});var m=D(u,2);On(m,19,()=>e.metaTags,_=>"meta_"+_,(_,x,H)=>{{let w=A(()=>n(H)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);vr(_,{hideMenu:!0,type:"selected",get tag(){return n(x)},onClick:()=>{e.handleMetaTagClick(n(x))},get onRef(){return n(w)}})}});var k=D(m,2);On(k,18,()=>e.selectedTags,_=>_,(_,x,H)=>{{let w=A(()=>n(H)===e.selectedTags.size-1?r:void 0);vr(_,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return x},onClick:()=>{e.handleSelectedTagClick(x)},get onRef(){return n(w)}})}}),g(d,c)};W(i,d=>{e.selectedTags.size+e.metaTags.size>0&&d(l)})}g(t,s),ve()}st(["click"]);const Wo=(t,e,a,r)=>{if(t.has(Ge.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},Fn=200,ef=t=>t<.5?2*t*t:-1+(4-2*t)*t,nl=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,ef(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},tf=t=>{const{getIsKeyboardVisible:a}=Gd();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=v=>({x:v.clientX,y:v.clientY,time:performance.now()}),d=v=>{r=[l(v.touches[0])],o=!0},c=v=>{if(!o||s)return;r.push(l(v.touches[0]));const p=performance.now()-150;r=r.filter(N=>N.time>=p);const h=r.at(-1),m=r[0];if(!h||!m)return;const k=m.x,_=m.y,x=h.x,H=h.y,w=x-k,T=H-_,O=Math.abs(w)>Math.abs(T),L=Math.abs(w)>3;O&&L&&!a()&&(s=!0,v.preventDefault(),t([...r]),i())},u=()=>{i()};Se(()=>(document.addEventListener("touchstart",d,{passive:!0}),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchend",u,{passive:!0}),document.addEventListener("touchcancel",u,{passive:!0}),()=>{document.removeEventListener("touchstart",d),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",u),document.removeEventListener("touchcancel",u)}))},Ps=5,Ns=.6,oa=.3;function al(t,e){fe(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,d=0,c=0,u=null,v=null;const p=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,d=0,c=0,u!==null&&(cancelAnimationFrame(u),u=null),v&&(clearTimeout(v),v=null)},h=()=>{e.onCancel(),p()},m=()=>{v&&clearTimeout(v),v=setTimeout(h,5e3)};tf(async L=>{if(!o)try{const N=L.at(-1);if(!N)throw new Error("No points available for swipe initialization");const U=await e.onInit();if(!U)return;s=U.initialPosition,i=U.currentPosition,l=U.minPosition,d=U.maxPosition,c=U.width,r=N.x,a=L,o=!0,m()}catch{p()}});const _=L=>Math.max(l,Math.min(d,L)),x=()=>{if(u=null,!o){p();return}const L=a.at(-1),N=a[0];if(!L||!N)return;let U=L.x-r;r=L.x;const Y=_(i+U);Y!==i&&(i=Y,e.onUpdate({initialPosition:s,newPosition:Y,width:c,minPosition:l,maxPosition:d}))},H=L=>{if(!o){p();return}a.push({x:L.touches[0].clientX,y:L.touches[0].clientY,time:performance.now()});const N=performance.now()-150;a=a.filter(K=>K.time>=N),u===null&&(u=requestAnimationFrame(x)),m();const U=L.touches[0].clientX-a[0].x,Y=L.touches[0].clientY-a[0].y;Math.abs(U)>Math.abs(Y)&&L.cancelable&&L.preventDefault()},w=L=>{const N=Math.abs(L);if(N>=Ns)return Ps;if(N>=oa){const U=(N-oa)/(Ns-oa);return e.baseActionThreshold-U*(e.baseActionThreshold-Ps)}else return e.baseActionThreshold},T=L=>{if(!o){p();return}let N=0;a.push({x:L.changedTouches[0].clientX,y:L.changedTouches[0].clientY,time:performance.now()}),x(),u!==null&&(cancelAnimationFrame(u),u=null);const U=a[0],Y=a[a.length-1],V=Y.x-U.x,K=Y.time-U.time;K>0&&(N=V/K);const Q=w(N);e.onFinish({swipeVelocity:N,currentPosition:i,minPosition:l,maxPosition:d,initialPosition:s,width:c,actionThreshold:Q}),p()},O=()=>{h()};Se(()=>(document.addEventListener("touchmove",H,{passive:!1}),document.addEventListener("touchend",T,{passive:!0}),document.addEventListener("touchcancel",O,{passive:!0}),()=>{document.removeEventListener("touchmove",H),document.removeEventListener("touchend",T),document.removeEventListener("touchcancel",O),u!==null&&cancelAnimationFrame(u),v&&clearTimeout(v)})),ve()}function nf(t,e){fe(e,!0);const a=Hn();let r=Pe(e,"animationRef",7),o=Pe(e,"dialog",7);al(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const c=-e.dialogWidth*.7,u=0;let v=e.sidebarState==="closed"?c:u,p=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let k=()=>1;if(r().current){r().current.pause();let _=Number(r().current.currentTime);yr()&&(_=Number(_)+50,r().current.currentTime=Math.min(Math.max(Fn-1,_),_));const x=r().current.effect?.getComputedTiming().progress||0;k=()=>x,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(_=>requestAnimationFrame(_)),p=Math.abs(1-k())}p=e.sidebarState==="closed"?p:1-p,o().style.setProperty("--backdrop-bg",`${p*.1}`),o()&&!o().open&&(o().showModal(),yr()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=p*-25;const h=p*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let m=e.sidebarState==="closed"?c:u;return e.sidebarState==="opened"||e.sidebarState==="closed"||(m=h),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:v,currentPosition:m,minPosition:c,maxPosition:u,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:c,width:u})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const v=1-Math.abs(c/u)/7*10;o().style.transform=`translate3d(${c}px, 0, 0)`,a.swipingRatio=v*-25,o().style.setProperty("--backdrop-bg",`${v*.1}`)},onFinish:({swipeVelocity:c,currentPosition:u,initialPosition:v,width:p,actionThreshold:h})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let m="close";const k=Math.abs(u-v)/p*100/7*10;if(k===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(k===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?m=Math.abs(k)>h||c>oa?"open":"close":e.sidebarState==="swipingClose"&&(m=Math.abs(k)>h&&c<=oa||c<-oa?"close":"open");let _=nl(Math.abs(k)/100);e.sidebarState==="swipingClose"&&m==="close"&&(_=1-_);const x=(m==="open"?1-_:_)*Fn;a.duration=x/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${m==="open"?.1:0}`),m==="open"?e.onOpen():m==="close"&&e.onClose()}}),ve()}var af=P("<dialog><div><!> <!></div></dialog> <!> <!>",1);function rf(t,e){fe(e,!0);const{getSidebarState:a,setSidebarState:r}=Ar();let o=I(0);Se(()=>{const B=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",B),B(),()=>{window.removeEventListener("resize",B)}});const s=Hn(),{isScrolling:i}=ns();let l=I(null),d=I(null),c={},u=A(a);const v=()=>{e.blocked||r("closing")},p=B=>{r(B==="open"?"swipingOpen":"swipingClose")},h=()=>{r("opened")},m=()=>{r("preOpening")},k=()=>{n(l)?.close(),r("closed")},_=B=>{B.preventDefault(),v()};Se(()=>(n(l)?.addEventListener("close",k),n(l)?.addEventListener("cancel",_),()=>{n(l)?.removeEventListener("close",k),n(l)?.removeEventListener("cancel",_)}));const x=A(i);let H=A(()=>s.working);const w=B=>{B?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ra().duration};Oe(()=>{n(u)==="opening"?qt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const B=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const re=n(l)?.animate([{transform:B},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||Fn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});c.current=re,re&&(re.onfinish=()=>{h(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ra().duration,re.cancel(),c.current=void 0})})}):n(u)==="closing"&&qt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const B=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const re=n(l)?.animate([{transform:B},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||Fn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});c.current=re,re&&(re.onfinish=()=>{k(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ra().duration,re.cancel(),c.current=void 0})})})}),Oe(()=>{n(u)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),yr()&&n(l)?.getBoundingClientRect()),r("opening"))}),Se(()=>{n(u)==="opened"&&r("preOpening")});var T=af(),O=M(T),L=b(O),N=b(L);Ne(N,()=>e.children);var U=D(N,2);{var Y=B=>{rs(B,{})};W(U,B=>{n(u)==="opened"&&B(Y)})}Xe(L,B=>f(d,B),()=>n(d)),Xe(O,B=>f(l,B),()=>n(l));var V=D(O,2);{var K=B=>{os(B,{get dialog(){return n(l)},get dialogInner(){return n(d)},onClose:v})};W(V,B=>{n(d)&&n(u)==="opened"&&!e.blocked&&B(K)})}var Q=D(V,2);{var X=B=>{nf(B,{onCancelSwipe:w,onOpen:m,onClose:v,onSwipe:p,get dialogWidth(){return n(o)},get animationRef(){return c},get dialog(){return n(l)},get sidebarState(){return n(u)}})};W(Q,B=>{!n(x)&&!e.blocked&&B(X)})}xe(()=>{$e(O,1,at({a:!0,b:n(H),c:n(u)==="opened"||n(u)==="opening"||n(u)==="closing"||n(u)==="swipingClose",d:n(u)==="opened"||n(u)==="opening"||n(u)==="swipingOpen"}),"p-1gucilc"),$e(L,1,at({e:!0,f:n(u)==="swipingOpen",g:n(u)!=="opened"}),"p-1gucilc")}),g(t,T),ve()}var of=P('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),sf=P('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function lf(t,e){fe(e,!0);const{checkMobileSize:a}=Aa(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=Ar(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:d}=Jt(),{getTagsSearch:c,setTagsSearch:u}=td(),{getSelectedTags:v,addTag:p,removeTag:h,clearTags:m}=Bn(),{getSelectedMetaTags:k,addMetaTag:_,removeMetaTag:x,clearSelectedMetaTags:H}=lo();let w=A(v),T=A(k);const{getGetNotes:O,checkNotesInArchive:L,checkNotesInBin:N}=Ot(),U=A(O),Y=R=>{p(R)},V=R=>{_(R)},K=R=>{h(R)},Q=R=>{x(R)};let X=A(()=>n(w).size===0&&!n(T).has(Ge.INBOX)&&(n(U)()||[]).some(R=>(!n(T).has(Ge.ARCHIVED)&&!n(T).has(Ge.BIN)&&R?.data&&!R.data.deletedAt&&!R.data.archivedAt||n(T).has(Ge.ARCHIVED)&&R?.data&&!R.data.deletedAt&&R.data.archivedAt||n(T).has(Ge.BIN)&&R?.data&&R.data.deletedAt)&&R?.data?.tags.length===0)),B=A(()=>Wo(n(T),n(w),n(U)()||[],R=>!(R?.data&&(R.data.deletedAt||R.data.archivedAt)&&!n(T).has(Ge.ARCHIVED)&&!n(T).has(Ge.BIN)||R?.data&&(R.data.deletedAt||!R.data.archivedAt)&&n(T).has(Ge.ARCHIVED)||R?.data&&!R.data.deletedAt&&n(T).has(Ge.BIN)))),re=A(()=>n(B).filter(R=>c()===""||R.toLowerCase().indexOf(c().toLowerCase())!==-1)),_e=A(a);const{checkExistedDialog:J}=cn();let F=A(()=>i().length>0||J());const Z=()=>{if(n(_e)){if(n(F))return;o()==="opened"?r():o()==="closed"&&s()}};Se(()=>br({key:"b",meta:!0,action:Z})),Se(()=>br({key:"b",ctrl:!0,action:Z}));let le=A(()=>[...n(X)&&n(T).size===0?[Ge.INBOX]:[],...n(T).size===0?[...L()&&n(w).size===0?[Ge.ARCHIVED]:[],...N()&&n(w).size===0?[Ge.BIN]:[]]:[]].filter(R=>c()===""||R.toLowerCase().indexOf(c().toLowerCase())!==-1).sort((R,$)=>R===Ge.INBOX?-1:$===Ge.INBOX?1:R.localeCompare($)));var ie=ue(),ce=M(ie);{var be=R=>{rf(R,{get blocked(){return n(F)},children:($,Ce)=>{var ae=of(),pe=M(ae),we=b(pe),de=b(we);tl(de,{});var ee=D(de,2),Te=b(ee),Le=A(()=>d(ye.Settings));Te.__click=function(...ne){n(Le)?.apply(this,ne)};var y=b(Te);he(y,()=>({"--size":"24px"})),me(y.lastChild,{name:"settings"});var S=D(y,2);ct(S,{children:(ne,se)=>{var Ee=Me("Settings");g(ne,Ee)}});var C=D(Te,2),E=A(()=>d(ye.Sync));C.__click=function(...ne){n(E)?.apply(this,ne)};var z=b(C);he(z,()=>({"--size":"24px"})),me(z.lastChild,{name:"sync"});var q=D(z,2);ct(q,{children:(ne,se)=>{var Ee=Me("Sync");g(ne,Ee)}});var te=D(we,2),ge=b(te);{let ne=A(c);Lo(ge,{placeholder:"Search tag",get value(){return n(ne)},onChange:se=>{u(se)}})}var oe=D(te,2);{let ne=A(()=>n(T).has(Ge.BIN));Es(oe,{get clearTags(){return m},get clearMetaTags(){return H},get hideTagMenu(){return n(ne)},handleMetaTagClick:Q,get metaTags(){return n(T)},get selectedTags(){return n(w)},handleSelectedTagClick:K})}var G=D(pe,2);{let ne=A(()=>n(T).has(Ge.BIN));ks(G,{get hideTagMenu(){return n(ne)},get metaTags(){return n(le)},get tags(){return n(re)},handleMetaTagClick:V,handleTagClick:Y,mobile:!0})}xe((ne,se)=>{nt(Te,"href",ne),nt(C,"href",se)},[()=>l(ye.Settings),()=>l(ye.Sync)]),g($,ae)},$$slots:{default:!0}})},ke=R=>{var $=sf(),Ce=b($),ae=b(Ce);{let Te=A(c);Lo(ae,{placeholder:"Search tag",get value(){return n(Te)},onChange:Le=>{u(Le)}})}var pe=D(Ce,2),we=b(pe),de=b(we);{let Te=A(()=>n(T).has(Ge.BIN));Es(de,{get metaTags(){return n(T)},get clearTags(){return m},get clearMetaTags(){return H},get hideTagMenu(){return n(Te)},get selectedTags(){return n(w)},handleMetaTagClick:Q,handleSelectedTagClick:K})}var ee=D(we,2);{let Te=A(()=>n(T).has(Ge.BIN));ks(ee,{get metaTags(){return n(le)},get hideTagMenu(){return n(Te)},get tags(){return n(re)},handleMetaTagClick:V,handleTagClick:Y})}g(R,$)};W(ce,R=>{n(_e)?R(be):R(ke,!1)})}g(t,ie),ve()}st(["click"]);var cf=P('<button class="a p-11odwi4"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function df(t,e){fe(e,!0);let a=Pe(e,"ref",15);var r=cf();r.__click=function(...i){e.onClick?.apply(this,i)};var o=b(r);he(o,()=>({"--rotate":"-90deg"})),me(o.lastChild,{name:"menu"});var s=D(o,2);ct(s,{children:(i,l)=>{var d=Me();xe(()=>ot(d,e.title)),g(i,d)}}),Xe(r,i=>a(i),()=>a()),g(t,r),ve()}st(["click"]);const As=t=>{try{new URL(t)}catch{return!1}return!0};var uf=P('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),ff=P('<form class="a p-y9ylet"><!></form>');function vf(t,e){fe(e,!0);const{addTag:a}=Ot(),{getSelectedTags:r}=Bn(),{getSelectedNotes:o}=Pa(),{getFiltredNotes:s}=Na();let i=I(!1),l=I(!1),d,c=!1,u=I(null),v=I(""),p=e.nextFocusRef;Se(()=>(n(u)&&n(u).focus(),()=>{d&&clearTimeout(d)}));const h=()=>{d=setTimeout(()=>{f(l,!0)},250)},m=()=>{f(i,!0)},k=async()=>{if(r().has(n(v).trim())){m();return}if(n(v).trim()!=="")try{h();const w=new Set(o()),T=w.size?[...w]:s().map(L=>L.id),{cancel:O}=await a(n(v).trim(),T);it("Tag added",{cancel:{nextFocusRef:p,onCancel:async()=>{await O(),setTimeout(()=>{const{prev:L}=ht(p);L?.focus()},16)}}}),c=!0}finally{f(i,!0)}},_=()=>{e.onClosed?.(c)},x=H=>{H.preventDefault(),k()};Mr(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:_,children:(H,w)=>{var T=ff(),O=b(T);{var L=U=>{Ma(U,{})},N=U=>{var Y=uf(),V=D(M(Y),2);Sr(V,{placeholder:"Enter new tag name",get ref(){return n(u)},set ref(B){f(u,B,!0)},get value(){return n(v)},set value(B){f(v,B,!0)}});var K=D(V,2),Q=b(K);Dt(Q,{onClick:m,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(B,re)=>{var _e=Me("Cancel");g(B,_e)},$$slots:{default:!0}});var X=D(Q,2);Dt(X,{onClick:k,fullWidth:!0,withoutMinWidth:!0,children:(B,re)=>{var _e=Me("OK");g(B,_e)},$$slots:{default:!0}}),g(U,Y)};W(O,U=>{n(l)?U(L):U(N,!1)})}gn("submit",T,x),g(H,T)},$$slots:{default:!0}}),ve()}var gf=P('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),hf=P('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),pf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),mf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),_f=P("<div><!></div>"),wf=P('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),yf=P('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!> <!> <!></div> <!></div>');function rl(t,e){fe(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=Ot(),{getSelectedTags:s}=Bn();let i=I(null),l=I(""),d=I(null);const c=A(a);let u=Pe(e,"shownTagInput",15);const v=()=>n(c)?e.mode==="exit"?Wo(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let h=A(()=>{const F=s(),Z=new Set(Wo(new Set,new Set(e.selectedTags.length>0?e.selectedTags:F),o()()||[]));return v().filter(ie=>e.selectedTags.some(ce=>ie===ce)?!1:n(l)===""||ie.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((ie,ce)=>F.has(ie)&&F.has(ce)?ie.localeCompare(ce):F.has(ie)?-1:F.has(ce)?1:Z.has(ie)&&Z.has(ce)?ie.localeCompare(ce):Z.has(ie)?-1:Z.has(ce)?1:0)});const m=F=>{if(!e.selectedTags.includes(F)){if(e.mode!=="exit"||n(h).includes(F)){e.onChangeTags([...e.selectedTags,F]),f(l,"");return}n(i)?.focus()}},k=F=>{const Z=e.selectedTags.filter(le=>le!==F);e.onRejectedTag&&e.onRejectedTag(F),Z.length===0?e.onChangeTags([]):e.onChangeTags(Z)},_=F=>{F.preventDefault(),n(l)!==""?m(n(l)):u(!1)};Oe(()=>{n(i)&&u()&&n(i).focus(),u()||f(l,"")});const x=F=>{F.preventDefault()},H=F=>{F.preventDefault(),F.stopPropagation(),F.stopImmediatePropagation()};var w=yf(),T=b(w),O=b(T);On(O,17,()=>e.selectedTags,F=>F+"-tags_selected",(F,Z)=>{da(F,{onPointerDown:x,onTouchStart:H,onClick:()=>{k(n(Z))},type:"button",style:"selected",children:(le,ie)=>{var ce=Me();xe(()=>ot(ce,n(Z))),g(le,ce)},$$slots:{default:!0}})});var L=D(O,2);{var N=F=>{var Z=ue(),le=M(Z);On(le,17,()=>n(h).filter(ie=>ie.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),ie=>ie+"-tags_suggested",(ie,ce)=>{da(ie,{onPointerDown:x,onTouchStart:H,onClick:()=>{m(n(ce))},children:(be,ke)=>{var R=Me();xe(()=>ot(R,n(ce))),g(be,R)},$$slots:{default:!0}})}),g(F,Z)};W(L,F=>{u()&&F(N)})}var U=D(L,2);{var Y=F=>{da(F,{onPointerDown:x,onTouchStart:H,onClick:()=>{m(n(l)),f(l,"")},children:(Z,le)=>{var ie=Me();xe(()=>ot(ie,n(l))),g(Z,ie)},$$slots:{default:!0}})};W(U,F=>{n(l)!==""&&(e.mode!=="exit"||n(h).find(Z=>Z.toLowerCase()===n(l).toLowerCase()))&&F(Y)})}var V=D(U,2);{var K=F=>{da(F,{mode:"empty",onPointerDown:x,onTouchStart:H,onClick:()=>{u(!0)},children:(Z,le)=>{var ie=gf(),ce=b(ie);he(ce,()=>({"--size":"12px"})),me(ce.lastChild,{name:"plus"});var be=D(ce,2);ct(be,{children:(ke,R)=>{var $=Me("add tag");g(ke,$)}}),g(Z,ie)},$$slots:{default:!0}})};W(V,F=>{u()||F(K)})}var Q=D(V,2);{var X=F=>{da(F,{mode:"empty",onPointerDown:x,onTouchStart:H,get onClick(){return e.onUsePreviousTags},children:(Z,le)=>{var ie=hf(),ce=b(ie);he(ce,()=>({"--size":"12px"})),me(ce.lastChild,{name:"back"});var be=D(ce,2);ct(be,{children:(ke,R)=>{var $=Me("use previous tags");g(ke,$)}}),g(Z,ie)},$$slots:{default:!0}})};W(Q,F=>{e.previousTagsEnabled&&e.onUsePreviousTags&&F(X)})}var B=D(Q,2);{var re=F=>{da(F,{mode:"empty",onPointerDown:x,onTouchStart:H,get onClick(){return e.onGenTags},get disabled(){return e.generatingTags},children:(Z,le)=>{var ie=_f(),ce=b(ie);{var be=R=>{var $=pf(),Ce=M($);he(Ce,()=>({"--size":"12px"})),Ma(Ce.lastChild,{}),g(R,$)},ke=R=>{var $=mf(),Ce=M($);he(Ce,()=>({"--size":"12px","--rotate":"180deg"})),me(Ce.lastChild,{name:"stars"});var ae=D(Ce,2);ct(ae,{children:(pe,we)=>{var de=Me("gen tags");g(pe,de)}}),g(R,$)};W(ce,R=>{e.generatingTags?R(be):R(ke,!1)})}g(Z,ie)},$$slots:{default:!0}})};W(B,F=>{e.genTagsEnabled&&e.onGenTags&&F(re)})}var _e=D(T,2);{var J=F=>{var Z=wf(),le=b(Z),ie=b(le);Sr(ie,{placeholder:"tag",get ref(){return n(i)},set ref(be){f(i,be,!0)},get value(){return n(l)},set value(be){f(l,be,!0)}});var ce=D(le,2);ce.__pointerdown=x,ce.__touchstart=H,ce.__click=()=>{n(i)?.blur(),n(l)!==""&&m(n(l)),u(!1),f(l,"")},gn("submit",Z,_),g(F,Z)};W(_e,F=>{u()&&F(J)})}Xe(w,F=>f(d,F),()=>n(d)),g(t,w),ve()}st(["pointerdown","touchstart","click"]);var bf=P('<div class="c p-y9ylet"><!> <!></div>'),Sf=P('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),Cf=P('<form class="a p-y9ylet"><!></form>');function xf(t,e){fe(e,!0);const{changeTags:a,getNoteById:r}=Ot(),{getSelectedTags:o}=Bn(),{getSelectedNotes:s}=Pa(),{getFiltredNotes:i}=Na();let l=I(!1),d=I(!1),c,u=!1,v=I(!1),p=e.nextFocusRef,m=(()=>{const N=[...o()],U=s();if(U.size===0)return N;const Y=Array.from(U);let V=new Set(r(Y[0])?.data.tags||[]);for(let K=1;K<Y.length;K++){const Q=new Set(r(Y[K])?.data.tags||[]),X=new Set([]);Q.forEach(B=>{V.has(B)&&X.add(B)}),V=X}return Array.from(V)})(),k=I(lt(m));Se(()=>()=>{c&&clearTimeout(c)});const _=()=>{c=setTimeout(()=>{f(d,!0)},250)},x=()=>{f(l,!0)},H=async()=>{const N=m,U=new Set(s()),Y=U.size?[...U]:i().map(V=>V.id);try{_();const{cancel:V}=await a([...N],n(k),Y);it("Tags changed",{cancel:{nextFocusRef:p,onCancel:async()=>{await V(),setTimeout(()=>{const{prev:K}=ht(p);K?.focus()},16)}}}),u=!0}finally{f(l,!0)}},w=N=>{N.key==="Escape"&&n(v)&&(f(v,!1),N.preventDefault(),N.stopPropagation())};Se(()=>(document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)));const T=()=>{e.onClosed?.(u)},O=N=>{f(k,N,!0)},L=N=>{N.preventDefault(),H()};Mr(t,{get blocked(){return n(d)},get startClose(){return n(l)},onClosed:T,children:(N,U)=>{var Y=Cf(),V=b(Y);{var K=X=>{Ma(X,{})},Q=X=>{var B=Sf(),re=D(M(B),2);rl(re,{get selectedTags(){return n(k)},onChangeTags:O,get shownTagInput(){return n(v)},set shownTagInput(F){f(v,F,!0)}});var _e=D(re,2);{var J=F=>{var Z=bf(),le=b(Z);Dt(le,{onClick:x,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(ce,be)=>{var ke=Me("Cancel");g(ce,ke)},$$slots:{default:!0}});var ie=D(le,2);Dt(ie,{onClick:H,fullWidth:!0,withoutMinWidth:!0,children:(ce,be)=>{var ke=Me("OK");g(ce,ke)},$$slots:{default:!0}}),g(F,Z)};W(_e,F=>{n(v)||F(J)})}g(X,B)};W(V,X=>{n(d)?X(K):X(Q,!1)})}gn("submit",Y,L),g(N,Y)},$$slots:{default:!0}}),ve()}var Tf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),kf=P('<li class="p-antir2"><!></li>'),Ef=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy links',1),Pf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy',1),Nf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share links',1),Af=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),Mf=P('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),Df=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select mode',1),If=P('<li class="p-antir2"><!></li>'),Lf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),Rf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),Of=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),Ff=P('<li class="p-antir2"><!></li>'),zf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),jf=P('<li class="p-antir2"><!></li>'),Bf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),Hf=P('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <li class="p-antir2"><!></li>',1),Uf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),Wf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),qf=P('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),Vf=P('<!> <!> <li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <!> <!> <!>',1),Kf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Yf=P('<div class="a p-antir2"><!></div> <!> <!> <!>',1);function Gf(t,e){fe(e,!0);const{getSelectedTags:a,setSelectedTags:r,clearTags:o}=Bn(),{moveNotesToBin:s,moveNotesToArchive:i,moveNotesFromArchive:l,restoreNotesFromBin:d,deleteNotes:c}=Ot(),{getFiltredNotes:u}=Na(),{getMode:v,changeMode:p,getSelectedNotes:h,setSelectedNotes:m,clearNotes:k}=Pa();let _=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"}),x=A(a),H=I(!1),w=I(!1),T=I(!1),O=I(!1),L=I(null),N=I(null);const U=()=>{n(H)||f(H,!0)},Y=()=>{f(H,!1),f(w,!1)};Oe(()=>{!n(H)&&!n(T)&&!n(O)&&f(L,ht(n(N)).next,!0)}),Se(()=>{const y=S=>{S.key==="Escape"&&n(H)&&n(N)?.focus()};return window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}});let V=()=>{};const K=()=>{f(w,!0),f(T,!0);let y=n(N);V=()=>{f(T,!1),setTimeout(()=>{y?.focus()},16)}};let Q=()=>{};const X=()=>{f(w,!0),f(O,!0);let y=n(N);Q=()=>{f(O,!1),setTimeout(()=>{y?.focus()},16)}},B=async()=>{const y=Array.from(n(x)),S=new Set(h()),C=S.size?[...S]:u().map(z=>z.id),{cancel:E}=await s({noteIds:C});o(),k(),it("Notes moved to bin",{cancel:{nextFocusRef:n(L),onCancel:async()=>{await E(),r(new Set(y)),m(S),setTimeout(()=>{const{prev:z}=ht(n(L));z?.focus()},16)}}}),f(w,!0)},re=async()=>{const y=Array.from(n(x)),S=new Set(h()),C=S.size?[...S]:u().map(z=>z.id),{cancel:E}=await i({noteIds:C});o(),k(),it("Notes moved to archive",{cancel:{nextFocusRef:n(L),onCancel:async()=>{await E(),r(new Set(y)),m(S),setTimeout(()=>{const{prev:z}=ht(n(L));z?.focus()},16)}}}),f(w,!0)},_e=async()=>{const y=Array.from(n(x)),S=new Set(h()),C=S.size?[...S]:u().map(z=>z.id),{cancel:E}=await l({noteIds:C});o(),k(),it("Notes moved from archive",{cancel:{nextFocusRef:n(L),onCancel:async()=>{await E(),r(new Set(y)),m(S),setTimeout(()=>{const{prev:z}=ht(n(L));z?.focus()},16)}}}),f(w,!0)},J=async()=>{const y=Array.from(n(x)),S=new Set(h()),C=S.size?[...S]:u().map(z=>z.id),{cancel:E}=await d({noteIds:C});o(),k(),it("Notes restored",{cancel:{nextFocusRef:n(L),onCancel:async()=>{await E(),r(new Set(y)),m(S),setTimeout(()=>{const{prev:z}=ht(n(L));z?.focus()},16)}}}),f(w,!0)},F=()=>{const y=new Set(h()),S=y.size?[...y]:u().map(C=>C.id);f(w,!0),Ha({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{f(w,!0),o(),k(),await c({noteIds:S})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(N)?.focus()},16)}})},Z=()=>{const y=u(),S=Array.from(h()),C=[];for(const z of y)z.data&&z.data?.link&&As(z.data?.link.url)&&(S.includes(z.id)||S.length===0)&&C.push(z.data?.link.url);const E=()=>{for(const z of C)if(!window.open(z,"_blank")){Ha({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(N)?.focus()},16)}});break}};C.length<=10?E():Ha({title:`Are you sure to open ${C.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{E()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(N)?.focus()},16)}}),f(w,!0)},le=()=>{const y=u(),S=Array.from(h());let C="";for(const E of y)E.data&&E.data?.link&&As(E.data?.link.url)&&(S.includes(E.id)||S.length===0)&&(C+=E.data?.link.url+`
`);navigator.clipboard.writeText(C),it("Copied links"),f(w,!0)},ie=()=>{const y=u(),S=Array.from(h());let C="";for(const E of y)E.data&&(S.includes(E.id)||S.length===0)&&(E.data?.link?.url&&(C+=E.data?.link.url+`
`),E.data?.text&&(C+=`
`+E.data?.text+`
`),C+=`---------------------

`);navigator.clipboard.writeText(C),it("Copied"),f(w,!0)},ce=()=>{const y=u(),S=Array.from(h());let C="";for(const E of y)E.data&&(S.includes(E.id)||S.length===0)&&E.data?.link?.url&&(C+=E.data?.link.url+`
`);navigator.share({text:C}).catch(E=>{}),f(w,!0)},be=()=>{const y=u(),S=Array.from(h());let C="";for(const E of y)E.data&&(S.includes(E.id)||S.length===0)&&(E.data?.link?.url&&(C+=E.data?.link.url+`
`),E.data?.text&&(C+=`
`+E.data?.text+`
`),C+=`---------------------

`);navigator.share({text:C}).catch(E=>{}),f(w,!0)};let ke=A(()=>v()==="multiple"),R=Qa||wr;var $=Yf(),Ce=M($),ae=b(Ce);df(ae,{title:"notes menu",onClick:U,get ref(){return n(N)},set ref(y){f(N,y,!0)}});var pe=D(Ce,2);{var we=y=>{var S=Kf(),C=M(S);he(C,()=>({"--right":"0","--top":"44px"})),Dr(C.lastChild,{get startClose(){return n(w)},onClosed:Y,get isMobile(){return R},children:(E,z)=>{var q=Vf(),te=M(q);{var ge=De=>{var Be=kf(),Fe=b(Be);ze(Fe,{onClick:Z,get dialogMode(){return R},children:(Ve,St)=>{var ft=Tf(),Ze=M(ft);he(Ze,()=>({"--size":"20px"})),me(Ze.lastChild,{name:"open"}),g(Ve,ft)},$$slots:{default:!0}}),g(De,Be)};W(te,De=>{Qa||wr||De(ge)})}var oe=D(te,2);W(oe,De=>{});var G=D(oe,2),ne=b(G);ze(ne,{onClick:le,get dialogMode(){return R},children:(De,Be)=>{var Fe=Ef(),Ve=M(Fe);he(Ve,()=>({"--size":"20px"})),me(Ve.lastChild,{name:"copy"}),g(De,Fe)},$$slots:{default:!0}});var se=D(G,2),Ee=b(se);ze(Ee,{onClick:ie,get dialogMode(){return R},children:(De,Be)=>{var Fe=Pf(),Ve=M(Fe);he(Ve,()=>({"--size":"20px"})),me(Ve.lastChild,{name:"copy"}),g(De,Fe)},$$slots:{default:!0}});var Je=D(se,2);{var pt=De=>{var Be=Mf(),Fe=M(Be),Ve=b(Fe);ze(Ve,{onClick:ce,get dialogMode(){return R},children:(Ze,Zt)=>{var mt=Nf(),Et=M(mt);he(Et,()=>({"--size":"20px"})),me(Et.lastChild,{name:"share"}),g(Ze,mt)},$$slots:{default:!0}});var St=D(Fe,2),ft=b(St);ze(ft,{onClick:be,get dialogMode(){return R},children:(Ze,Zt)=>{var mt=Af(),Et=M(mt);he(Et,()=>({"--size":"20px"})),me(Et.lastChild,{name:"share"}),g(Ze,mt)},$$slots:{default:!0}}),g(De,Be)};W(Je,De=>{_&&De(pt)})}var kt=D(Je,2);{var rt=De=>{var Be=If(),Fe=b(Be);ze(Fe,{onClick:()=>{f(w,!0),p("multiple")},get dialogMode(){return R},children:(Ve,St)=>{var ft=Df(),Ze=M(ft);he(Ze,()=>({"--size":"20px"})),me(Ze.lastChild,{name:"check"}),g(Ve,ft)},$$slots:{default:!0}}),g(De,Be)};W(kt,De=>{n(ke)||De(rt)})}var We=D(kt,2);{var qe=De=>{var Be=Hf(),Fe=M(Be),Ve=b(Fe);ze(Ve,{onClick:K,get dialogMode(){return R},children:(Pt,dn)=>{var Ft=Lf(),zt=M(Ft);he(zt,()=>({"--size":"20px","--rotate":"45deg"})),me(zt.lastChild,{name:"close"}),g(Pt,Ft)},$$slots:{default:!0}});var St=D(Fe,2),ft=b(St);ze(ft,{onClick:X,get dialogMode(){return R},children:(Pt,dn)=>{var Ft=Rf(),zt=M(Ft);he(zt,()=>({"--size":"20px"})),me(zt.lastChild,{name:"pen"}),g(Pt,Ft)},$$slots:{default:!0}});var Ze=D(St,2);{var Zt=Pt=>{var dn=Ff(),Ft=b(dn);ze(Ft,{onClick:re,get dialogMode(){return R},children:(zt,fo)=>{var Qt=Of(),hn=M(Qt);he(hn,()=>({"--size":"20px"})),me(hn.lastChild,{name:"archive"}),g(zt,Qt)},$$slots:{default:!0}}),g(Pt,dn)},mt=Pt=>{var dn=jf(),Ft=b(dn);ze(Ft,{onClick:_e,get dialogMode(){return R},children:(zt,fo)=>{var Qt=zf(),hn=M(Qt);he(hn,()=>({"--size":"20px"})),me(hn.lastChild,{name:"archive-cancel"}),g(zt,Qt)},$$slots:{default:!0}}),g(Pt,dn)};W(Ze,Pt=>{e.mode==="notes"?Pt(Zt):Pt(mt,!1)})}var Et=D(Ze,2),uo=b(Et);ze(uo,{onClick:B,get dialogMode(){return R},dangerous:!0,children:(Pt,dn)=>{var Ft=Bf(),zt=M(Ft);he(zt,()=>({"--size":"20px"})),me(zt.lastChild,{name:"bin"}),g(Pt,Ft)},$$slots:{default:!0}}),g(De,Be)};W(We,De=>{(e.mode==="notes"||e.mode==="archive")&&De(qe)})}var Ke=D(We,2);{var et=De=>{var Be=qf(),Fe=M(Be),Ve=b(Fe);ze(Ve,{onClick:J,get dialogMode(){return R},children:(Ze,Zt)=>{var mt=Uf(),Et=M(mt);he(Et,()=>({"--size":"20px"})),me(Et.lastChild,{name:"bin-cancel"}),g(Ze,mt)},$$slots:{default:!0}});var St=D(Fe,2),ft=b(St);ze(ft,{onClick:F,get dialogMode(){return R},dangerous:!0,children:(Ze,Zt)=>{var mt=Wf(),Et=M(mt);he(Et,()=>({"--size":"20px"})),me(Et.lastChild,{name:"bin"}),g(Ze,mt)},$$slots:{default:!0}}),g(De,Be)};W(Ke,De=>{e.mode==="bin"&&De(et)})}g(E,q)},$$slots:{default:!0}}),g(y,S)};W(pe,y=>{n(H)&&y(we)})}var de=D(pe,2);{var ee=y=>{vf(y,{get nextFocusRef(){return n(L)},onClosed:S=>{V(S)}})};W(de,y=>{n(T)&&y(ee)})}var Te=D(de,2);{var Le=y=>{xf(y,{get nextFocusRef(){return n(L)},onClosed:S=>{Q(S)}})};W(Te,y=>{n(O)&&y(Le)})}g(t,$),ve()}var Xf=P('<label class="a p-uuy4jt"><input class="b p-uuy4jt" type="checkbox"/> <span class="c p-uuy4jt"><span class="d p-uuy4jt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></span> <!></label>');function ol(t,e){fe(e,!0);const a=()=>{e.onChange(!e.checked)};var r=Xf(),o=b(r);o.__change=a;var s=D(o,2),i=b(s),l=b(i);he(l,()=>({"--size":"16px"})),me(l.lastChild,{name:"check"});var d=D(s,2);ct(d,{children:(c,u)=>{var v=Me("Toggle switch");g(c,v)}}),xe(()=>Vc(o,e.checked)),g(t,r),ve()}st(["change"]);var Jf=P('<div class="g e p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),Zf=P('<div class="g p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),Qf=P('<a class="i j p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),$f=P('<div class="h p-1336jx2"><!> <!></div>'),ev=P('<!> <div class="p p-1336jx2"><!></div>',1),tv=P('<div class="r p-1336jx2"><div class="s p-1336jx2"><!> <span> </span></div> <button class="t p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),nv=P('<div class="a p-1336jx2"><div class="b p-1336jx2"><div class="c p-1336jx2"><a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-1336jx2"><!></div> <div class="f p-1336jx2"><!></div></div> <div class="k p-1336jx2"><div class="l p-1336jx2"><!></div> <div class="m p-1336jx2"><div class="n p-1336jx2"><div class="o p-1336jx2"><!></div> <!></div> <div class="q p-1336jx2"><!></div></div></div></div>');function av(t,e){fe(e,!0);const{getFeedSearch:a,setFeedSearch:r}=$o(),{getScrollContainer:o}=co();let s=A(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:d,checkNotes:c}=Ot(),{replaceSearchParams:u}=Vt(),{createDialogPageHref:v,createHandleClickDialogPage:p,getDialogPages:h}=Jt(),{checkExistedDialog:m}=cn(),{getMode:k,clearNotes:_,setSelectedNotes:x,getSelectedNotes:H,changeMode:w}=Pa(),{checkMobileSize:T}=Aa(),{getFiltredNotes:O}=Na(),{getSelectedMetaTags:L}=lo();let N=A(L),U=I(null);const Y=A(l);let K=A(()=>{const oe=O()||[],G=H();return oe.every(ne=>G.has(ne.id))});const Q=()=>{n(s)&&n(s).scrollTo({top:0})},X=()=>{Ha({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),u("")},onCancel:async()=>{}})},B=()=>{h().length===0&&!m()&&n(U)?.focus()};Se(()=>br({key:"k",meta:!0,action:B})),Se(()=>br({key:"k",ctrl:!0,action:B})),Oe(()=>{const oe=O()||[];qt(()=>{const G=H();x(new Set(oe.filter(ne=>G.has(ne.id)).map(ne=>ne.id)))})});let re=A(()=>n(N).has(Ge.ARCHIVED)?"archive":n(N).has(Ge.BIN)?"bin":"notes");var _e=nv(),J=b(_e),F=b(J),Z=b(F),le=A(()=>p(ye.Settings));Z.__click=function(...oe){n(le)?.apply(this,oe)};var ie=b(Z);he(ie,()=>({"--rotate":"30deg","--size":"20px"})),me(ie.lastChild,{name:"settings"});var ce=D(Z,2),be=A(()=>p(ye.Sync));ce.__click=function(...oe){n(be)?.apply(this,oe)};var ke=b(ce);he(ke,()=>({"--size":"20px"})),me(ke.lastChild,{name:"sync"});var R=D(F,2),$=b(R);tl($,{});var Ce=D(R,2),ae=b(Ce);{var pe=oe=>{var G=ue(),ne=M(G);{var se=Ee=>{var Je=ue(),pt=M(Je);{var kt=We=>{var qe=Jf(),Ke=b(qe);Ke.__click=X;var et=b(Ke);he(et,()=>({"--scale":"1.2","--size":"20px"})),me(et.lastChild,{name:"clear"});var De=D(et);ct(De,{children:(Be,Fe)=>{var Ve=Me("Empty bin");g(Be,Ve)}}),g(We,qe)},rt=We=>{var qe=Zf(),Ke=b(qe);Ke.__click=X;var et=b(Ke);he(et,()=>({"--scale":"0.9","--size":"20px"})),me(et.lastChild,{name:"clear"}),g(We,qe)};W(pt,We=>{T()?We(kt):We(rt,!1)})}g(Ee,Je)};W(ne,Ee=>{n(Y)&&Ee(se)})}g(oe,G)},we=oe=>{var G=ue(),ne=M(G);{var se=Ee=>{var Je=$f(),pt=b(Je);{var kt=We=>{var qe=Qf();qe.__click=function(...De){e.onOpenWindow?.apply(this,De)};var Ke=b(qe);he(Ke,()=>({"--scale":"0.7","--size":"32px"})),me(Ke.lastChild,{name:"open-window"});var et=D(Ke,2);ct(et,{children:(De,Be)=>{var Fe=Me("open window");g(De,Fe)}}),xe(()=>nt(qe,"href",e.openWindowHref)),g(We,qe)};W(pt,We=>{e.onOpenWindow&&We(kt)})}var rt=D(pt,2);Eu(rt,{}),g(Ee,Je)};W(ne,Ee=>{n(re)==="notes"&&Ee(se)},!0)}g(oe,G)};W(ae,oe=>{n(re)==="bin"?oe(pe):oe(we,!1)})}var de=D(J,2),ee=b(de),Te=b(ee);lf(Te,{});var Le=D(ee,2),y=b(Le),S=b(y),C=b(S);{let oe=A(a);Lo(C,{onFocus:Q,placeholder:"Search",get value(){return n(oe)},onChange:G=>{r(G)},get ref(){return n(U)},set ref(G){f(U,G,!0)}})}var E=D(S,2);{var z=oe=>{var G=ev(),ne=M(G);wu(ne,{});var se=D(ne,2),Ee=b(se);Gf(Ee,{get mode(){return n(re)}}),g(oe,G)};W(E,oe=>{(n(re)==="notes"&&c()||n(re)==="bin"&&l()||n(re)==="archive"&&d())&&oe(z)})}var q=D(y,2),te=b(q);{var ge=oe=>{var G=ue(),ne=M(G);{var se=Ee=>{var Je=tv(),pt=b(Je),kt=b(pt);ol(kt,{get checked(){return n(K)},onChange:et=>{if(et){const De=O()||[];x(new Set(De.map(Be=>Be.id)))}else _()}});var rt=D(kt,2),We=b(rt),qe=D(pt,2);qe.__click=et=>{et.preventDefault(),w("single")};var Ke=b(qe);he(Ke,()=>({"--size":"16px"})),me(Ke.lastChild,{name:"close"}),xe(et=>ot(We,`Selected ${et??""}`),[()=>H().size]),g(Ee,Je)};W(ne,Ee=>{k()==="multiple"&&Ee(se)})}g(oe,G)};W(te,oe=>{(n(re)==="notes"&&c()||n(re)==="bin"&&l()||n(re)==="archive"&&d())&&oe(ge)})}xe((oe,G)=>{nt(Z,"href",oe),nt(ce,"href",G)},[()=>v(ye.Settings),()=>v(ye.Sync)]),g(t,_e),ve()}st(["click"]);var rv=P('<div class="p-gkgqyo"><!></div>');function gt(t,e){fe(e,!0);const{setDialogPageHeight:a}=as();let r=I(null);Se(()=>{n(r);const i=new ResizeObserver(l=>{for(let d of l){const c=d.contentRect.height;a(c)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=rv(),s=b(o);Ne(s,()=>e.children),Xe(o,i=>f(r,i),()=>n(r)),g(t,o),ve()}var ov=P('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function sv(t,e){fe(e,!1);const{replaceSearchParams:a,getHref:r}=Vt(),o=l=>{l.preventDefault(),a("")};Qo();var s=ov(),i=D(b(s),2);{let l=Er(()=>r(""));Dt(i,{element:"a",get href(){return n(l)},onClick:o,children:(d,c)=>{var u=Me("close");g(d,u)},$$slots:{default:!0}})}g(t,s),ve()}var iv=P('<h1 class="p-1n0ziuh"><!></h1>');function lv(t,e){var a=iv(),r=b(a);Ne(r,()=>e.children),g(t,a)}var cv=P('<!> <div class="b p-193tby9"><!> <!></div>',1),dv=P('<div class="a p-193tby9"><!></div>');function uv(t,e){fe(e,!0);const{blockDialog:a,setLeftEnd:r}=cn(),{pushDialogPage:o}=Jt(),{initLocalAccount:s}=ts(),{replaceSearchParams:i}=Vt(),l=Hn(),d=()=>{o(ye.Auth)},c=async()=>{l.duration=0,l.swipingRatio=-25,requestAnimationFrame(()=>{l.duration=ra().duration,l.swipingRatio=ra().swipingRatio,s(),a(!1),r(!0),i("")})};var u=dv(),v=b(u);{var p=h=>{var m=cv(),k=M(m);lv(k,{children:(w,T)=>{var O=Me("Welcome");g(w,O)}});var _=D(k,2),x=b(_);Dt(x,{onClick:d,fullWidth:!0,children:(w,T)=>{var O=Me("Cloud account");g(w,O)},$$slots:{default:!0}});var H=D(x,2);Dt(H,{onClick:c,fullWidth:!0,type:"secondary",children:(w,T)=>{var O=Me("Local account");g(w,O)},$$slots:{default:!0}}),g(h,m)};W(v,h=>{h(p)})}g(t,u),ve()}var fv=P('<div class="a p-1hg9kpf"></div>'),vv=P('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function sl(t,e){fe(e,!0);const a=c=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(c).host}.ico`}catch{return""}};let r=I(!1),o=A(()=>a(e.url));var s=ue(),i=M(s);{var l=c=>{var u=fv();g(c,u)},d=c=>{var u=vv();xe(v=>nt(u,"src",v),[()=>a(e.url)]),gn("error",u,()=>{f(r,!0)}),g(c,u)};W(i,c=>{n(r)||!n(o)?c(l):c(d,!1)})}g(t,s),ve()}var gv=P('<a target="_blank" rel="noopener noreferrer" class="a p-7mmq8e"><!> <!></a>'),hv=P('<button class="a p-7mmq8e"><!> <!></button>');function ja(t,e){fe(e,!0);let a=Pe(e,"tabindex",3,0),r=Pe(e,"onclick",3,()=>{}),o=Pe(e,"ref",15);var s=ue(),i=M(s);{var l=c=>{var u=gv();u.__click=function(...h){r()?.apply(this,h)};var v=b(u);Ne(v,()=>e.children);var p=D(v,2);ct(p,{children:(h,m)=>{var k=Me();xe(()=>ot(k,e.title)),g(h,k)}}),Xe(u,h=>o(h),()=>o()),xe(()=>{nt(u,"href",e.href),nt(u,"tabindex",a())}),g(c,u)},d=c=>{var u=ue(),v=M(u);{var p=h=>{var m=hv();m.__click=function(...x){r()?.apply(this,x)};var k=b(m);Ne(k,()=>e.children);var _=D(k,2);ct(_,{children:(x,H)=>{var w=Me();xe(()=>ot(w,e.title)),g(x,w)}}),Xe(m,x=>o(x),()=>o()),xe(()=>nt(m,"tabindex",a())),g(h,m)};W(v,h=>{e.elem==="button"&&h(p)},!0)}g(c,u)};W(i,c=>{e.elem==="a"?c(l):c(d,!1)})}g(t,s),ve()}st(["click"]);var pv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Edit',1),mv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),_v=P('<li class="p-1jbq6g9"><!></li> <li class="p-1jbq6g9"><!></li>',1),wv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function yv(t,e){fe(e,!0);let a=Pe(e,"shownMenu",15),r=I(!1),o=I(!1),s=I(!1);const i=async()=>{e.onEdit()},l=()=>{n(o)?(f(o,!1),i()):n(s)&&(f(s,!1),e.onDelete()),a(!1),f(r,!1)};let d=Qa||wr;var c=ue(),u=M(c);{var v=p=>{var h=wv(),m=M(h);he(m,()=>({"--top":"90%","--right":"0px"})),Dr(m.lastChild,{get startClose(){return n(r)},onClosed:l,get isMobile(){return d},children:(k,_)=>{var x=_v(),H=M(x),w=b(H);ze(w,{onClick:()=>{f(o,!0),f(r,!0)},get dialogMode(){return d},children:(L,N)=>{var U=pv(),Y=M(U);he(Y,()=>({"--size":"20px"})),me(Y.lastChild,{name:"pen"}),g(L,U)},$$slots:{default:!0}});var T=D(H,2),O=b(T);ze(O,{onClick:()=>{f(s,!0),f(r,!0)},get dialogMode(){return d},children:(L,N)=>{var U=mv(),Y=M(U);he(Y,()=>({"--size":"20px"})),me(Y.lastChild,{name:"bin"}),g(L,U)},$$slots:{default:!0}}),g(k,x)},$$slots:{default:!0}}),g(p,h)};W(u,p=>{a()&&p(v)})}g(t,c),ve()}var bv=P('<div class="b p-ptbuqy"><!> <!> <div class="c p-ptbuqy"><button class="p-ptbuqy">Cancel</button> <button class="p-ptbuqy">Done</button></div></div>'),Sv=P('<div class="e p-ptbuqy"><!></div>'),Cv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),xv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Tv=P('<div class="d p-ptbuqy"><div><!> <a class="f p-ptbuqy" target="_blank" rel="noopener noreferrer"> </a> <div><!> <!></div> <!></div></div>'),kv=P('<div class="a p-ptbuqy"><!></div>');function Ev(t,e){fe(e,!0);let a=Pe(e,"shownUrlInput",15);const{getFaviconEnabled:r}=Za();let o=A(r),s=I(null),i=I(null),l=I(lt(e.url)),d=I(lt(e.title)),c=I(null),u=I(null),v=I(!1);const p=T=>{f(l,T.target.value||"",!0)},h=T=>{f(d,T.target.value||"",!0)};Oe(()=>{a()&&n(s)?.focus()});const m=()=>{f(v,!0)},k=()=>{e.url&&(navigator.clipboard.writeText(e.url),it("copied"))};var _=kv(),x=b(_);{var H=T=>{var O=bv(),L=b(O);Sr(L,{get value(){return n(l)},onInput:p,placeholder:"url",get ref(){return n(s)},set ref(K){f(s,K,!0)}});var N=D(L,2);Sr(N,{get value(){return n(d)},onInput:h,placeholder:"title"});var U=D(N,2),Y=b(U);Y.__click=()=>{f(l,e.url,!0),f(d,e.title,!0),a(!1)};var V=D(Y,2);V.__click=()=>{let K=n(l).trim();K!==""&&/^[[a-zA-Z]+?:\/\//.test(K)===!1&&(K="https://"+K,f(l,K,!0)),e.onChangeUrl(K,n(d)),a(!1)},g(T,O)},w=T=>{var O=ue(),L=M(O);{var N=Y=>{var V=Tv(),K=b(V);$e(K,1,at({i:!0}),"p-ptbuqy");var Q=b(K);{var X=le=>{var ie=Sv(),ce=b(ie);sl(ce,{get url(){return e.url}}),g(le,ie)};W(Q,le=>{n(o)&&le(X)})}var B=D(Q,2),re=b(B),_e=D(B,2);$e(_e,1,at({j:!0}),"p-ptbuqy");var J=b(_e);ja(J,{title:"copy link",elem:"button",onclick:k,children:(le,ie)=>{var ce=Cv(),be=M(ce);he(be,()=>({"--size":"20px"})),me(be.lastChild,{name:"copy"}),g(le,ce)},$$slots:{default:!0}});var F=D(J,2);ja(F,{title:"show menu",elem:"button",onclick:m,get ref(){return n(u)},set ref(le){f(u,le,!0)},children:(le,ie)=>{var ce=xv(),be=M(ce);he(be,()=>({"--size":"18px","--rotate":"90deg"})),me(be.lastChild,{name:"menu"}),g(le,ce)},$$slots:{default:!0}});var Z=D(_e,2);yv(Z,{onDelete:()=>{f(d,""),f(l,""),e.onDeleteUrl()},onEdit:()=>{a(!0)},get shownMenu(){return n(v)},set shownMenu(le){f(v,le,!0)}}),Xe(K,le=>f(c,le),()=>n(c)),xe(()=>{nt(B,"href",e.url),ot(re,e.title||"unknown")}),g(Y,V)},U=Y=>{};W(L,Y=>{e.url?Y(N):Y(U,!1)})}g(T,O)};W(x,T=>{a()?T(H):T(w,!1)})}Xe(_,T=>f(i,T),()=>n(i)),g(t,_),ve()}st(["click"]);var Pv=P('<div class="e p-vlmfrv">Note</div>'),Nv=P("<span> </span>"),Av=P('<div class="i p-vlmfrv"><!></div>'),Mv=P('<!> <div class="a p-vlmfrv"><div class="b"><div class="c"><div class="d p-vlmfrv"><!> <div class="f p-vlmfrv" role="textbox" aria-label="note" tabindex="0" contenteditable="true" placeholder="Note"> </div></div></div></div> <div class="g h p-vlmfrv"><!> <div class="j p-vlmfrv"><!></div></div></div>',1);function Dv(t,e){fe(e,!0);const{checkMobileSize:a}=Aa(),{getLlmTagsEnabled:r,getPrevTags:o,getPageDataForTagsEnabled:s}=Za(),{pushDialogPage:i}=Jt();let l=Pe(e,"link",15,void 0),d=Pe(e,"text",15,""),c=Pe(e,"tags",31,()=>lt([])),u=I(null),v=I(!1),p=I(!1),h=I(lt(new Set)),m=I(!1);const k=ae=>{let pe="",we=!0;function de(ee){for(let Te=0;Te<ee.length;Te++){const Le=ee[Te];if(Le.nodeName==="BR"){pe+=`
`,we=!0;continue}Le.nodeName==="DIV"&&we===!1&&(pe+=`
`),we=!1,Le.nodeType===3&&Le.textContent&&(pe+=Le.textContent),de(Le.childNodes)}}de(ae.currentTarget.childNodes),pe===`
`&&(pe=pe.slice(0,-1)),d(pe)},_=ae=>{ae.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(n(v)&&(f(v,!1),ae.preventDefault(),ae.stopPropagation()),n(p)&&(f(p,!1),ae.preventDefault(),ae.stopPropagation()))};Se(()=>(a(),document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)));const x=(ae,pe)=>{l({url:ae,title:pe})},H=()=>{l(void 0)},w=ae=>{c(ae)},T=o(),O=()=>{c([...new Set([...c(),...T])])},L=d();Se(()=>{if(n(u)&&e.mode==="add"){n(u).focus();const ae=document.createRange();ae.selectNodeContents(n(u)),ae.collapse(!1);const pe=window.getSelection();pe?.removeAllRanges(),pe?.addRange(ae)}});let N=I("unknown");const U=async()=>{if(typeof LanguageModel>"u"){f(N,"unavailable");return}f(N,await Ts().availability({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}]}),!0)};Se(()=>{U()});let Y=A(r),V=null;const K=async()=>V||(V=await Ts().create({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}],temperature:.2,topK:2,initialPrompts:[{role:"system",content:`
						You are a tagging assistant.
						Your task is to suggest relevant tags for bookmarks.

						Rules:
						- Use page content by priority to generate relevant tags.
						- Focus on the main topics and themes of the page and note content.
						- Prefer short, lowercase, single-word tags.
						- Use only single words for tags, no phrases, you can split into multiple tags.
						- Avoid special characters in tags.
						- All tags must be in English.
						- Add common tags related to the content like "music", "article", "video", "tutorial", "blog", etc. if relevant.
						- Return 3 to 5 tags.
						- Output ONLY a JSON array of strings.
					`}]}),V),Q=async()=>{if(n(N)==="downloadable"||n(N)==="downloading"){i(ye.Extension);return}f(m,!0);const ae=await K(),pe={type:"object",properties:{tags:{type:"array",items:{type:"string"}}},required:["tags"]},we=`
			Page information:
			Title: ${l()?.title||"N/A"}.
			URL: ${l()?.url||"N/A"}.
			Description: N/A.
			Note content: ${d()||"N/A"}.
			Dont return tags: ${[...n(h).size>0?Array.from(n(h)):[],...c().length>0?c():[]].join(", ")||"N/A"}.
			Page contents: N/A.
		`.slice(0,5e3),de=await ae.prompt(we,{responseConstraint:pe});c(Array.from(new Set([...c(),...(JSON.parse(de)?.tags||[]).map(ee=>ee.trim().toLowerCase()).filter(ee=>ee!=="")]))),f(m,!1)};var X=Mv(),B=M(X);{let ae=A(()=>l()?.url||""),pe=A(()=>l()?.title||"");Ev(B,{get url(){return n(ae)},get title(){return n(pe)},onChangeUrl:x,onDeleteUrl:H,get shownUrlInput(){return n(p)},set shownUrlInput(we){f(p,we,!0)}})}var re=D(B,2),_e=b(re),J=b(_e),F=b(J),Z=b(F);{var le=ae=>{var pe=Pv();g(ae,pe)};W(Z,ae=>{d()||ae(le)})}var ie=D(Z,2);ie.__input=k;var ce=b(ie);Xe(ie,ae=>f(u,ae),()=>n(u));var be=D(_e,2),ke=b(be);{var R=ae=>{var pe=Av(),we=b(pe);{var de=ee=>{var Te=Nv(),Le=b(Te);xe(y=>ot(Le,`updated: ${y??""}`),[()=>new Date(e.updatedAt).toLocaleString()]),g(ee,Te)};W(we,ee=>{e.updatedAt&&ee(de)})}g(ae,pe)};W(ke,ae=>{e.mode==="edit"&&ae(R)})}var $=D(ke,2),Ce=b($);{let ae=A(()=>n(Y)&&n(N)!=="unknown"&&n(N)!=="unavailable"),pe=A(()=>e.mode==="add"&&T.length>0);rl(Ce,{get selectedTags(){return c()},onRejectedTag:we=>{f(h,new Set([...n(h),we]),!0)},onChangeTags:w,get genTagsEnabled(){return n(ae)},onGenTags:Q,get generatingTags(){return n(m)},onUsePreviousTags:O,get previousTagsEnabled(){return n(pe)},get shownTagInput(){return n(v)},set shownTagInput(we){f(v,we,!0)}})}xe(()=>ot(ce,L)),g(t,X),ve()}st(["input"]);function Iv(t,e){fe(e,!0);const{isInitedNotes:a,createNote:r,updateNote:o,deleteNote:s,getNoteById:i}=Ot(),{getViewMode:l,setPrevTags:d}=Za(),{setSearchParam:c,deleteSearchParam:u}=Vt();let v=I("loading"),p=I("idle"),h=I(""),m=I(void 0),k=I(""),_=I(lt([]));const x=()=>{{const N=JSON.parse(localStorage.getItem("new-note-draft")||"{}");localStorage.removeItem("new-note-draft");const U=N.link?.url||"",Y=N.link?.title||"";f(k,N.text||"",!0),f(_,N.tags||[],!0),f(m,{url:U||"",title:Y||""},!0),f(v,"finish")}},H=A(()=>a()&&n(v)==="finish"),w=async()=>{if(n(m)?.title||n(m)?.url||n(k)||n(_).length>0){if(n(h)){const N=i(n(h));if(!N?.data)return;if((N.data.link?.url!==n(m)?.url||N.data.link?.title!==n(m)?.title||N.data.text!==n(k)||JSON.stringify(N.data.tags)!==JSON.stringify(n(_)))&&n(p)==="idle"){f(p,"loading");try{await o(n(h),{link:fa(n(m)),text:n(k),tags:n(_).slice()})}finally{f(p,"idle")}}}else if(n(p)==="idle"){f(p,"loading");try{f(h,await r({link:fa(n(m)),text:n(k),tags:n(_).slice()}),!0),c("noteId",n(h))}catch{}finally{f(p,"idle")}}}else if(n(h)&&n(p)==="idle"){f(p,"loading");try{await s(n(h)),f(h,""),u("noteId")}finally{f(p,"idle")}}};Oe(()=>{n(H)&&n(p)!=="loading"&&w()}),Se(()=>{x()}),Se(()=>()=>{n(_).length>0&&d([...n(_)])}),Se(()=>()=>{n(h)&&u("noteId")});var T=ue(),O=M(T);{var L=N=>{Dv(N,{mode:"add",get link(){return n(m)},set link(U){f(m,U,!0)},get text(){return n(k)},set text(U){f(k,U,!0)},get tags(){return n(_)},set tags(U){f(_,U,!0)}})};W(O,N=>{n(H)&&N(L)})}g(t,T),ve()}const Lv="modulepreload",Rv=function(t){return"/"+t},Ms={},wt=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let d=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=d(a.map(c=>{if(c=Rv(c),c in Ms)return;Ms[c]=!0;const u=c.endsWith(".css"),v=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${v}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":Lv,u||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((h,m)=>{p.addEventListener("load",h),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Ov=P('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function Fv(t){var e=Ov(),a=D(b(e),2);Dt(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=Me("Reload");g(r,s)},$$slots:{default:!0}}),g(t,e)}var zv=P('<div class="p-uzefkz"><!></div>');function jv(t,e){fe(e,!0);let a=I(!1);const{getDialogPageHeight:r}=as(),o=A(r);Se(()=>{const d=setTimeout(()=>{f(a,!0)},250);return()=>{clearTimeout(d)}});var s=zv(),i=b(s);{var l=d=>{Ma(d,{})};W(i,d=>{n(a)&&d(l)})}xe(()=>Ja(s,`min-height: ${n(o)??""}px;`)),g(t,s),ve()}function Nt(t,e){fe(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>wt(()=>import("./aDHNE1xHH.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>wt(()=>import("./ajul9KFz9.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>wt(()=>import("./av6VLYhdh.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>wt(()=>import("./aDrdqIeyQ.js"),__vite__mapDeps([8,9])),"./Pages/ChangeTags.svelte":()=>wt(()=>import("./aDdulldC1.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>wt(()=>import("./aWz1fGPY1.js"),__vite__mapDeps([10,4,3,11,12])),"./Pages/Exit.svelte":()=>wt(()=>import("./aBwqZF37b.js"),__vite__mapDeps([13,14])),"./Pages/ExportData.svelte":()=>wt(()=>import("./agQLnk6Oc.js"),__vite__mapDeps([15,16,17,18,19,20])),"./Pages/Extension.svelte":()=>wt(()=>import("./aCxPWBZfv.js"),__vite__mapDeps([21,18,19,22])),"./Pages/ImportData.svelte":()=>wt(()=>import("./aCOA5dkaz.js"),__vite__mapDeps([23,24])),"./Pages/Install.svelte":()=>wt(()=>import("./aB-yZFZML.js"),__vite__mapDeps([25,26])),"./Pages/InstallSuccess.svelte":()=>wt(()=>import("./aDAEhUa4P.js"),__vite__mapDeps([27,28])),"./Pages/Note.svelte":()=>wt(()=>import("./aC2DjUKlT.js"),__vite__mapDeps([29,30])),"./Pages/Settings.svelte":()=>wt(()=>import("./aD-hzvs5b.js"),__vite__mapDeps([31,18,19,16,17,32])),"./Pages/Signin.svelte":()=>wt(()=>import("./aCTfS-UEL.js"),__vite__mapDeps([33,4,3,11,34])),"./Pages/Signup.svelte":()=>wt(()=>import("./aC4G1pmU-.js"),__vite__mapDeps([35,11,4,3,34])),"./Pages/Subscription.svelte":()=>wt(()=>import("./aBmCDOmtp.js"),__vite__mapDeps([36,37])),"./Pages/Sync.svelte":()=>wt(()=>import("./aCZIc_1l7.js"),__vite__mapDeps([38,39]))}),o=async l=>{const d=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[d]){const c=r[d]();return a[l]={promise:c},a[l].module=await c,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=ue(),i=M(s);Rc(i,()=>o(e.page),l=>{jv(l,{})},(l,d)=>{const c=A(()=>n(d).default);var u=ue(),v=M(u);jc(v,()=>n(c),(p,h)=>{h(p,{get params(){return e.params},get hidden(){return e.hidden}})}),g(l,u)},l=>{Fv(l)}),g(t,s),ve()}var Bv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),Hv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),Uv=P('<li class="p-1ljon4s"><!></li>'),Wv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy',1),qv=P('<li class="p-1ljon4s"><!></li>'),Vv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),Kv=P('<li class="p-1ljon4s"><!></li>'),Yv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share link',1),Gv=P('<li class="p-1ljon4s"><!></li>'),Xv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),Jv=P('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),Zv=P('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Qv=P('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),$v=P(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),eg=P('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),tg=P('<li class="p-1ljon4s"><!></li> <!> <!> <!> <!> <!>',1),ng=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function ag(t,e){fe(e,!0);const{checkMobileSize:a}=Aa(),{moveNoteToBin:r,moveNoteFromArchive:o,moveNoteToArchive:s,deleteNote:i,pinNote:l,restoreNoteFromBin:d}=Ot();let c=Pe(e,"mode",3,"notes"),u=Pe(e,"shownMenu",15),v=I(!1),p=I(!1),h=I(!1),m=I(!1),k=I(!1),_=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"});const x=async()=>{r(e.noteId),it("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{d(e.noteId)}}})},H=async()=>{s(e.noteId),it("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{o(e.noteId)}}})},w=async()=>{o(e.noteId),it("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{s(e.noteId)}}})},T=()=>{d(e.noteId),it("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{r(e.noteId)}}})},O=()=>{e.noteData.pinnedAt?(l(e.noteId,!1),it("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{l(e.noteId,!0)}}})):(l(e.noteId,!0),it("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{l(e.noteId,!1)}}})),f(v,!0)},L=()=>{n(p)?(f(p,!1),x()):n(k)?(f(k,!1),T()):n(h)?(f(h,!1),H()):n(m)&&(f(m,!1),w()),u(!1),f(v,!1)},N=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),it("Copied link"),f(v,!0))},U=()=>{let J="";e.noteData.link?.url&&(J+=e.noteData.link.url+`
`),e.noteData.text&&(J+=`
`+e.noteData.text+`
`),navigator.clipboard.writeText(J),it("Copied"),f(v,!0)},Y=()=>{f(v,!0),Ha({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await i(e.noteId)},onCancel:async()=>{}})},V=()=>{if(navigator.share){const J={};let F="";e.noteData.link?.url&&(F+=e.noteData.link.url+`
`),e.noteData.text&&(F+=`
`+e.noteData.text+`
`),J.text=F,navigator.share(J).catch(Z=>{})}f(v,!0)},K=()=>{if(navigator.share){const J={};e.noteData.link?.url&&(J.url=e.noteData.link.url),e.noteData.link?.title&&(J.title=e.noteData.link.title),navigator.share(J).catch(F=>{})}f(v,!0)};let Q=Qa||wr,X=A(a);var B=ue(),re=M(B);{var _e=J=>{var F=ng(),Z=M(F);he(Z,()=>({"--bottom":e.showMenuUp?"100%":"auto","--top":e.showMenuUp?"auto":"100%","--right":"10px"})),Dr(Z.lastChild,{get startClose(){return n(v)},onClosed:L,get isMobile(){return Q},children:(le,ie)=>{var ce=tg(),be=M(ce),ke=b(be);ze(ke,{onClick:O,get dialogMode(){return Q},children:(S,C)=>{var E=Bv(),z=M(E);{let te=A(()=>e.noteData.pinnedAt?"pin-cancel":"pin");he(z,()=>({"--size":"20px"})),me(z.lastChild,{get name(){return n(te)}})}var q=D(z);xe(()=>ot(q,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)),g(S,E)},$$slots:{default:!0}});var R=D(be,2);{var $=S=>{var C=Uv(),E=b(C);ze(E,{onClick:N,get dialogMode(){return Q},children:(z,q)=>{var te=Hv(),ge=M(te);he(ge,()=>({"--size":"20px"})),me(ge.lastChild,{name:"copy"}),g(z,te)},$$slots:{default:!0}}),g(S,C)};W(R,S=>{n(X)&&e.noteData.link?.url&&S($)})}var Ce=D(R,2);{var ae=S=>{var C=qv(),E=b(C);ze(E,{onClick:U,get dialogMode(){return Q},children:(z,q)=>{var te=Wv(),ge=M(te);he(ge,()=>({"--size":"20px"})),me(ge.lastChild,{name:"copy"}),g(z,te)},$$slots:{default:!0}}),g(S,C)};W(Ce,S=>{e.noteData.text&&S(ae)})}var pe=D(Ce,2);{var we=S=>{var C=Kv(),E=b(C);ze(E,{onClick:V,get dialogMode(){return Q},children:(z,q)=>{var te=Vv(),ge=M(te);he(ge,()=>({"--size":"20px"})),me(ge.lastChild,{name:"share"}),g(z,te)},$$slots:{default:!0}}),g(S,C)};W(pe,S=>{_&&e.noteData.text&&S(we)})}var de=D(pe,2);{var ee=S=>{var C=Gv(),E=b(C);ze(E,{onClick:K,get dialogMode(){return Q},children:(z,q)=>{var te=Yv(),ge=M(te);he(ge,()=>({"--size":"20px"})),me(ge.lastChild,{name:"share"}),g(z,te)},$$slots:{default:!0}}),g(S,C)};W(de,S=>{_&&e.noteData.link?.url&&S(ee)})}var Te=D(de,2);{var Le=S=>{var C=Zv(),E=M(C),z=b(E);ze(z,{onClick:()=>{f(h,c()==="notes"),f(m,c()==="archive"),f(v,!0)},get dialogMode(){return Q},children:(ge,oe)=>{var G=Xv(),ne=M(G);{let Ee=A(()=>c()==="archive"?"archive-cancel":"archive");he(ne,()=>({"--size":"20px"})),me(ne.lastChild,{get name(){return n(Ee)}})}var se=D(ne);xe(()=>ot(se,` ${c()==="archive"?"Unarchive":"Archive"}`)),g(ge,G)},$$slots:{default:!0}});var q=D(E,2),te=b(q);ze(te,{onClick:()=>{f(p,!0),f(v,!0)},get dialogMode(){return Q},dangerous:!0,children:(ge,oe)=>{var G=Jv(),ne=M(G),se=b(ne);he(se,()=>({"--size":"20px"})),me(se.lastChild,{name:"bin"}),g(ge,G)},$$slots:{default:!0}}),g(S,C)},y=S=>{var C=eg(),E=M(C),z=b(E);ze(z,{onClick:()=>{f(k,!0),f(v,!0)},get dialogMode(){return Q},children:(ge,oe)=>{var G=Qv(),ne=M(G),se=b(ne);he(se,()=>({"--size":"20px"})),me(se.lastChild,{name:"bin-cancel"}),g(ge,G)},$$slots:{default:!0}});var q=D(E,2),te=b(q);ze(te,{onClick:Y,get dialogMode(){return Q},dangerous:!0,children:(ge,oe)=>{var G=$v(),ne=M(G),se=b(ne);he(se,()=>({"--size":"20px"})),me(se.lastChild,{name:"bin"}),g(ge,G)},$$slots:{default:!0}}),g(S,C)};W(Te,S=>{c()==="notes"||c()==="archive"?S(Le):S(y,!1)})}g(le,ce)},$$slots:{default:!0}}),g(J,F)};W(re,J=>{u()&&J(_e)})}g(t,B),ve()}let ca=I(null);var rg=P('<div class="a p-1t3doe5"><!></div>'),og=P('<div class="b p-1t3doe5"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),sg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ig=P('<div class="c p-1t3doe5"><!></div>'),lg=P('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),cg=P('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),dg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ug=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),fg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),vg=P("<!> <!>",1),gg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),hg=P("<li><!> <!> <!> <!> <div><!> <!></div> <!></li>");function pg(t,e){fe(e,!0);const{pushDialogPage:a}=Jt(),{getFaviconEnabled:r,getRecordMode:o}=Za(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:d}=Pa(),{getSearchParams:c,getHref:u}=Vt();let v=Pe(e,"mode",3,"notes"),p=I(!1),h=I(!1),m=A(r),k=A(o),_=I(null),x=I(null);const{checkMobileSize:H}=Aa(),w=()=>{f(p,!0)},T=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),it("copied"))};Oe(()=>{n(ca)===n(x)?f(h,!0):f(h,!1)});const O=R=>{R.preventDefault(),a(`${ye.Note}?id=${encodeURIComponent(e.noteId)}`),f(ca,null)},L=A(()=>e.noteData.link?.url||"");let N=A(()=>n(p)&&n(_)?ht(n(_)).next:null);const U=R=>{R?l(e.noteId):d(e.noteId)};Se(()=>{const R=$=>{n(x)&&n(ca)===n(x)&&!(n(x)===$.target||n(x).contains($.target))&&f(ca,null)};return document.addEventListener("click",R),()=>{document.removeEventListener("click",R)}});const Y=()=>{const R=new URLSearchParams(c());return R.set(tn,`${ye.Note}?id=${encodeURIComponent(e.noteId)}`),u(R)};var V=hg(),K=b(V);{var Q=R=>{var $=rg(),Ce=b($);{let ae=A(()=>i().has(e.noteId));ol(Ce,{get checked(){return n(ae)},onChange:U})}g(R,$)};W(K,R=>{s()==="multiple"&&R(Q)})}var X=D(K,2);{var B=R=>{var $=og(),Ce=b($);he(Ce,()=>({"--size":"18px"})),me(Ce.lastChild,{name:"pin"}),g(R,$)};W(X,R=>{e.noteData.pinnedAt&&R(B)})}var re=D(X,2);{var _e=R=>{var $=ig(),Ce=b($);{var ae=we=>{sl(we,{get url(){return n(L)}})},pe=we=>{var de=sg(),ee=M(de);he(ee,()=>({"--size":"16px"})),me(ee.lastChild,{name:"note"}),g(we,de)};W(Ce,we=>{n(L)?we(ae):we(pe,!1)})}g(R,$)};W(re,R=>{n(m)&&R(_e)})}var J=D(re,2);{var F=R=>{var $=lg();$.__click=O;var Ce=b($);xe((ae,pe)=>{nt($,"tabindex",e.focusHidden?-1:0),nt($,"href",ae),ot(Ce,pe)},[Y,()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),gn("focus",$,()=>{f(ca,n(x),!0)}),g(R,$)},Z=R=>{var $=cg(),Ce=b($);xe(ae=>{nt($,"tabindex",e.focusHidden?-1:0),nt($,"href",n(L)),ot(Ce,ae)},[()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),gn("focus",$,()=>{f(ca,n(x),!0)}),g(R,$)};W(J,R=>{n(k)==="note"||!n(L)?R(F):R(Z,!1)})}var le=D(J,2);le.__focusin=()=>{f(ca,n(x),!0)};var ie=b(le);{var ce=R=>{var $=vg(),Ce=M($);{var ae=ee=>{{let Te=A(()=>e.focusHidden?-1:0);ja(ee,{elem:"button",onclick:T,get tabindex(){return n(Te)},title:"copy link",children:(Le,y)=>{var S=dg(),C=M(S);he(C,()=>({"--size":"20px"})),me(C.lastChild,{name:"copy"}),g(Le,S)},$$slots:{default:!0}})}};W(Ce,ee=>{H()||ee(ae)})}var pe=D(Ce,2);{var we=ee=>{{let Te=A(()=>e.focusHidden?-1:0),Le=A(()=>e.noteData.link?.title||"unknown");ja(ee,{elem:"a",get href(){return n(L)},get tabindex(){return n(Te)},get title(){return n(Le)},children:(y,S)=>{var C=ug(),E=M(C);he(E,()=>({"--size":"18px"})),me(E.lastChild,{name:"open"}),g(y,C)},$$slots:{default:!0}})}},de=ee=>{{let Te=A(Y),Le=A(()=>e.focusHidden?-1:0);ja(ee,{title:"edit",elem:"a",get href(){return n(Te)},get tabindex(){return n(Le)},onclick:O,children:(y,S)=>{var C=fg(),E=M(C);he(E,()=>({"--size":"18px"})),me(E.lastChild,{name:"pen"}),g(y,C)},$$slots:{default:!0}})}};W(pe,ee=>{n(k)==="note"?ee(we):ee(de,!1)})}g(R,$)};W(ie,R=>{n(L)&&R(ce)})}var be=D(ie,2);{let R=A(()=>e.focusHidden?-1:0);ja(be,{title:"show menu",elem:"button",get tabindex(){return n(R)},onclick:w,get ref(){return n(_)},set ref($){f(_,$,!0)},children:($,Ce)=>{var ae=gg(),pe=M(ae);he(pe,()=>({"--size":"18px","--rotate":"90deg"})),me(pe.lastChild,{name:"menu"}),g($,ae)},$$slots:{default:!0}})}var ke=D(le,2);ag(ke,{get nextFocusRef(){return n(N)},get mode(){return v()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(p)},set shownMenu(R){f(p,R,!0)}}),Xe(V,R=>f(x,R),()=>n(x)),xe(()=>{$e(V,1,at({e:!0,f:n(h)}),"p-1t3doe5"),$e(le,1,at({g:!0,h:n(h)}),"p-1t3doe5")}),g(t,V),ve()}st(["click","focusin"]);var er,il,ll;class mg{constructor(e){Ie(this,er);Lt(this,"data");Lt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),tt(this,er,il).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,tt(this,er,ll).call(this)),e}isEmpty(){return this.data.length===0}}er=new WeakSet,il=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},ll=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class _g{constructor(e,a){Lt(this,"heap");Lt(this,"done");Lt(this,"cache",[]);this.heap=new mg(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var wg=P("<span>Back to notes</span>"),yg=P('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),bg=P("<span>Back to notes</span>"),Sg=P('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),Cg=P('<p class="f">No notes in bin</p>'),xg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),Tg=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),kg=P('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),Eg=P('<div class="e p-1jdj5w3"><!></div>'),Pg=P('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),Ng=P('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),Ag=P('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function Mg(t,e){fe(e,!0);const{getScrollContainer:a}=co(),{createHandleClickDialogPage:r,createDialogPageHref:o}=Jt(),{getSelectedTags:s}=Bn(),{getFeedOrder:i}=Ii(),{checkNotesInArchive:l,checkNotesInBin:d,checkNotes:c,isInitedNotes:u}=Ot(),{getSelectedMetaTags:v}=lo(),{replaceSearchParams:p,getHref:h}=Vt();$o();const{getFiltredNotesLength:m,getFiltredNotes:k,getUpdatedFiltredNotesTimestamp:_}=Na();let x=A(v),H=A(m),w=A(k),T=A(_),O=A(u),L=54,N=I(0),U=I(0),Y=I(0),V=I(null),K=A(a),Q=null,X=null,B=A(()=>n(x).has(Ge.ARCHIVED)?"archive":n(x).has(Ge.BIN)?"bin":"notes");const re=A(s);Oe(()=>{n(re),n(le),n(K)?.scrollTo(0,0)});const{enable:_e}=ns(),J=()=>{_e(),Q||(Q=requestAnimationFrame(()=>{const de=n(K)?.scrollTop||0;f(Y,de,!0);const ee=Math.ceil(n(N)/L);f(U,Math.floor(de/(L*ee))*(L*ee)),Q=null}))},F=()=>{X||(X=requestAnimationFrame(()=>{f(N,window.innerHeight-180||0,!0);const de=n(K)?.scrollTop||0;f(Y,de,!0);const ee=Math.ceil(n(N)/L);f(U,Math.floor(de/(L*ee))*(L*ee)),X=null}))};Se(()=>{F(),J()});const Z=()=>{J()};Oe(()=>(n(K)?.addEventListener("scroll",Z),window.addEventListener("resize",F),()=>{n(K)?.removeEventListener("scroll",Z),window.removeEventListener("resize",F)}));const le=A(i);Oe(()=>{n(le),n(T),f(V,new _g(n(w),(de,ee)=>{if(!de||!ee||!de.data||!ee.data)return 0;if(de.data.pinnedAt&&!ee.data.pinnedAt)return-1;if(!de.data.pinnedAt&&ee.data.pinnedAt)return 1;if(de.data.pinnedAt&&ee.data.pinnedAt){if(de.data.pinnedAt<ee.data.pinnedAt)return 1;if(de.data.pinnedAt>ee.data.pinnedAt)return-1}switch(n(le)){case"newest":return de.data.updatedAt<ee.data.updatedAt?1:de.data.updatedAt>ee.data.updatedAt?-1:(de.data.link?.title||"").localeCompare(ee.data.link?.title||"");case"oldest":return de.data.updatedAt>ee.data.updatedAt?1:de.data.updatedAt<ee.data.updatedAt?-1:(de.data.link?.title||"").localeCompare(ee.data.link?.title||"");case"AtoZ":return(de.data.link?.title||"").localeCompare(ee.data.link?.title||"");case"ZtoA":return(ee.data.link?.title||"").localeCompare(de.data.link?.title||"");default:return 0}}),!0)});const ie=A(()=>n(H)*L);let be=A(()=>{n(T);const de=Math.ceil(n(N)/L);let ee=Math.floor(n(U)/L);return ee=ee-Math.min(ee,de),n(V)?.get(ee,ee+de*3)||[]}),ke=A(()=>L*Math.ceil(n(N)/L));const R=A(()=>n(U)-Math.min(n(U),n(ke)));var $=Ag(),Ce=b($),ae=b(Ce);{var pe=de=>{Ma(de,{})},we=de=>{var ee=ue(),Te=M(ee);{var Le=S=>{var C=yg(),E=D(M(C),2),z=b(E);{let q=A(()=>h(""));Dt(z,{element:"a",get href(){return n(q)},onClick:te=>{te.preventDefault(),p("")},children:(te,ge)=>{var oe=wg();g(te,oe)},$$slots:{default:!0}})}g(S,C)},y=S=>{var C=ue(),E=M(C);{var z=te=>{var ge=Sg(),oe=D(M(ge),2),G=b(oe);{let ne=A(()=>h(""));Dt(G,{element:"a",get href(){return n(ne)},onClick:se=>{se.preventDefault(),p("")},children:(se,Ee)=>{var Je=bg();g(se,Je)},$$slots:{default:!0}})}g(te,ge)},q=te=>{var ge=ue(),oe=M(ge);{var G=se=>{var Ee=Eg(),Je=b(Ee);{var pt=rt=>{var We=Cg();g(rt,We)},kt=rt=>{var We=kg(),qe=b(We),Ke=b(qe);{let Be=A(()=>o(ye.NewNote)),Fe=A(()=>r(ye.NewNote));Dt(Ke,{element:"a",get href(){return n(Be)},get onClick(){return n(Fe)},children:(Ve,St)=>{var ft=xg(),Ze=M(ft);he(Ze,()=>({"--size":"18px","--color":"#b0b0b0"})),me(Ze.lastChild,{name:"plus"}),g(Ve,ft)},$$slots:{default:!0}})}var et=D(qe,4),De=b(et);{let Be=A(()=>o(ye.ImportData)),Fe=A(()=>r(ye.ImportData));Dt(De,{element:"a",get href(){return n(Be)},get onClick(){return n(Fe)},children:(Ve,St)=>{var ft=Tg(),Ze=M(ft);he(Ze,()=>({"--size":"18px","--color":"#b0b0b0"})),me(Ze.lastChild,{name:"import"}),g(Ve,ft)},$$slots:{default:!0}})}g(rt,We)};W(Je,rt=>{n(B)==="bin"?rt(pt):rt(kt,!1)})}g(se,Ee)},ne=se=>{var Ee=ue(),Je=M(Ee);{var pt=rt=>{var We=Pg();g(rt,We)},kt=rt=>{var We=Ng(),qe=b(We);On(qe,23,()=>n(be),Ke=>Ke.data,(Ke,et,De)=>{var Be=ue(),Fe=M(Be);{var Ve=St=>{{let ft=A(()=>n(De)*L<n(Y)-n(R)-L/2||n(De)*L>n(Y)-n(R)+Math.floor(n(N)/L)*L),Ze=A(()=>(n(De)+5)*L<n(Y)-n(R)-L/2||(n(De)+5)*L>n(Y)-n(R)+Math.floor(n(N)/L)*L);pg(St,{get mode(){return n(B)},get focusHidden(){return n(ft)},get showMenuUp(){return n(Ze)},get noteId(){return n(et).id},get noteData(){return n(et).data}})}};W(Fe,St=>{n(et).data&&St(Ve)})}g(Ke,Be)}),xe(Ke=>{Ja(We,Ke),Ja(qe,`transform: translateY(${n(R)??""}px);`)},[()=>`--minHeight: ${Math.max((n(ie)>n(N),n(ie)),0)}px`]),g(rt,We)};W(Je,rt=>{n(be).length===0?rt(pt):rt(kt,!1)},!0)}g(se,Ee)};W(oe,se=>{!d()&&!l()&&!c()?se(G):se(ne,!1)},!0)}g(te,ge)};W(E,te=>{n(B)==="archive"&&!l()?te(z):te(q,!1)},!0)}g(S,C)};W(Te,S=>{n(B)==="bin"&&!d()?S(Le):S(y,!1)},!0)}g(de,ee)};W(ae,de=>{n(O)?de(we,!1):de(pe)})}g(t,$),ve()}var Dg=P('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function Ig(t){var e=Dg(),a=D(M(e),2),r=b(a);Mg(r,{}),g(t,e)}function Lg(t,e){fe(e,!0);const a=Hn();let r=Pe(e,"animationRef",7),o=Pe(e,"dialog",7);al(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let c=0,u=0,v=()=>1;if(r().current){r().current.pause();let h=Number(r().current.currentTime);yr()&&(h=Number(h)+50,r().current.currentTime=Math.min(Math.max(Fn-1,h),h));const m=r().current.effect?.getComputedTiming().progress||0;v=()=>m,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(h=>requestAnimationFrame(h)),u=1-v();const p=u*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-u)*.1}`),a.swipingRatio=Math.abs(1-u)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${p}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:c,currentPosition:p,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:c,width:u})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-c/u)*.1}`),o().style.transform=`translate3d(${c}px, 0, 0)`,a.swipingRatio=Math.abs(1-c/u)*25)},onFinish:({swipeVelocity:c,currentPosition:u,width:v,actionThreshold:p,initialPosition:h})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const m=()=>Math.abs(h+u)/v*100;let k=null;if(c<=-oa?k="open":c>=oa?k="close":k=Math.abs(m())>p?"close":"open",r().progress=nl(m()/100),k==="close"){const _=(1-(r().progress||0))*Fn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const _=(r().progress||1)*Fn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),ve()}var Rg=P('<div class="d p-1c7pbur"> </div>'),Og=P('<button class="e f p-1c7pbur"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Fg=P('<a class="e g p-1c7pbur"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),zg=P('<div><div class="a p-1c7pbur"><div class="b p-1c7pbur"><div class="c p-1c7pbur"><!> <!> <!></div></div></div> <!> <!></div>'),jg=P("<dialog><!></dialog> <!>",1);function Bg(t,e){fe(e,!0);const{isScrolling:a,enable:r}=ns();let o=I(null),s=I(null),i={};const l=Hn(),{checkLeftEnd:d,checkLeftStart:c,setLeftEnd:u,setLeftStart:v,getCountDialog:p}=cn(),h=A(c),m=A(d);let k=A(()=>l.working);const _=()=>{e.dialogState!=="opened"&&e.onStartOpening()},x=()=>{e.onClose()},H=()=>{e.onSwipe()},w=Q=>{Q.preventDefault(),x()};Se(()=>(n(o)?.addEventListener("close",x),n(o)?.addEventListener("cancel",w),()=>{n(o)?.removeEventListener("close",x),n(o)?.removeEventListener("cancel",w)})),Oe(()=>{p()>0&&(l.swipingRatio=25)}),Oe(()=>{e.dialogState==="opening"?qt(()=>{requestAnimationFrame(()=>{if(!n(o))return;const Q=(i.progress||1)*Fn,X=n(o).style.transform||`translate3d(${n(h)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const B=n(o)?.animate([{transform:X},{transform:"translate3d(0, 0, 0)"}],{duration:Q,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=B,B&&(B.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ra().duration,B.cancel(),i.current=void 0,i.progress=void 0,n(h)&&v(!1)})})}):e.dialogState==="closing"&&qt(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const Q=(1-(i.progress||0))*Fn,X=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const B=n(o)?.animate([{transform:X},{transform:`translate3d(${n(m)?"-100%":"100%"}, 0, 0)`}],{duration:Q,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=B,B&&(B.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ra().duration,B.cancel(),i.current=void 0,i.progress=void 0,n(m)&&u(!1)})})})});const T=()=>{r()},O=A(a);Se(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),yr()&&n(o).getBoundingClientRect(),!n(k)){e.onOpened();return}e.onStartOpening()}});var L=jg(),N=M(L),U=b(N);{var Y=Q=>{var X=zg(),B=b(X),re=b(B),_e=b(re),J=b(_e);{var F=$=>{var Ce=Rg(),ae=b(Ce);xe(()=>ot(ae,e.title)),g($,Ce)};W(J,$=>{e.title&&$(F)})}var Z=D(J,2);{var le=$=>{var Ce=Og();Ce.__click=x;var ae=b(Ce);he(ae,()=>({"--size":"32px"})),me(ae.lastChild,{name:"back"});var pe=D(ae,2);ct(pe,{children:(we,de)=>{var ee=Me("back");g(we,ee)}}),g($,Ce)};W(Z,$=>{e.blocked||$(le)})}var ie=D(Z,2);{var ce=$=>{var Ce=Fg();Ce.__click=function(...we){e.onOpenWindow?.apply(this,we)};var ae=b(Ce);he(ae,()=>({"--scale":"0.7","--size":"32px"})),me(ae.lastChild,{name:"open-window"});var pe=D(ae,2);ct(pe,{children:(we,de)=>{var ee=Me("open window");g(we,ee)}}),xe(()=>nt(Ce,"href",e.openWindowHref)),g($,Ce)};W(ie,$=>{e.onOpenWindow&&$(ce)})}var be=D(B,2);Ne(be,()=>e.children);var ke=D(be,2);{var R=$=>{rs($,{})};W(ke,$=>{e.dialogState==="opened"&&$(R)})}Xe(X,$=>f(s,$),()=>n(s)),xe(()=>$e(X,1,at({o:!0,p:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-1c7pbur")),gn("scroll",X,T),g(Q,X)};W(U,Q=>{e.dialogState!=="preOpening"&&Q(Y)})}Xe(N,Q=>f(o,Q),()=>n(o));var V=D(N,2);{var K=Q=>{Lg(Q,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:_,onClose:x,onSwipe:H,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};W(V,Q=>{n(s)&&!n(O)&&!e.blocked&&!e.hidden&&Q(K)})}xe(()=>$e(N,1,at({h:!0,i:n(k),j:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",k:e.hidden,l:e.dialogState==="opened",m:n(h),n:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-1c7pbur")),g(t,L),ve()}st(["click"]);function Hg(t,e){fe(e,!0);let a=Pe(e,"hidden",3,!1),r=Pe(e,"onClosed",3,()=>{}),o=I(0);Se(()=>{const x=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",x),x(),()=>{window.removeEventListener("resize",x)}});const{dialogDec:s,dialogInc:i}=cn(),l=Hn();Se(()=>(i(),()=>{s()}));let d=I("closed");const c=()=>{f(d,"opening")},u=()=>{f(d,"swiping")},v=()=>{f(d,"opened")},p=()=>{e.onClose(),f(d,"closing")},h=()=>{f(d,"closed"),r()()};Oe(()=>{e.shown&&n(d)==="closed"?f(d,"preOpening"):!e.shown&&n(d)==="opened"&&f(d,"closing")}),Oe(()=>{n(d)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(d)==="opened"||n(d)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var m=ue(),k=M(m);{var _=x=>{Bg(x,{get dialogWidth(){return n(o)},get dialogState(){return n(d)},get title(){return e.title},onStartOpening:c,onOpened:v,onClose:p,onClosed:h,onSwipe:u,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(H,w)=>{var T=ue(),O=M(T);Ne(O,()=>e.children),g(H,T)},$$slots:{default:!0}})};W(k,x=>{n(d)!=="closed"&&x(_)})}g(t,m),ve()}const Ug=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};Se(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Se(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Wg=P('<button class="d e p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),qg=P('<div class="f p-2jn3ll"> </div>'),Vg=P('<button class="d g p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Kg=P('<dialog><div class="a p-2jn3ll"><div class="b p-2jn3ll"><div class="c p-2jn3ll"><div><!></div> <!> <div><!></div></div></div> <!></div></dialog> <!>',1);function Yg(t,e){fe(e,!0);let a=Pe(e,"blockedDialog",3,!1),r=Pe(e,"hiddenDialog",3,!1),o=Pe(e,"isDesktopAnimationOff",3,!1),s=I(null),i=I(null),l=I(!1);Ug({getDialog:()=>n(s),onOpen:()=>e.onOpen(),onStartClose:()=>e.onStartClose(),onClose:()=>e.onClose()});const d=Hn();Oe(()=>{e.stateDialog==="closing"&&(d.working?n(s)?.addEventListener("transitionend",()=>{n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:c}=as(),u=A(c);Se(()=>{setTimeout(()=>{f(l,!0)},50)});var v=Kg(),p=M(v),h=b(p),m=b(h),k=b(m),_=b(k),x=b(_);{var H=V=>{var K=Wg();K.__click=()=>{e.onStartBack()};var Q=b(K);he(Q,()=>({"--size":"28px"})),me(Q.lastChild,{name:"back"});var X=D(Q,2);ct(X,{children:(B,re)=>{var _e=Me("back");g(B,_e)}}),g(V,K)};W(x,V=>{(!(a()||r())||a())&&e.onStartBack&&V(H)})}var w=D(_,2);{var T=V=>{var K=qg(),Q=b(K);xe(()=>ot(Q,e.title)),g(V,K)};W(w,V=>{e.title&&V(T)})}var O=D(w,2),L=b(O);{var N=V=>{var K=Vg();K.__click=()=>{e.onStartClose()};var Q=b(K);he(Q,()=>({"--size":"28px"})),me(Q.lastChild,{name:"close"});var X=D(Q,2);ct(X,{children:(B,re)=>{var _e=Me("close");g(B,_e)}}),g(V,K)};W(L,V=>{a()||r()||V(N)})}var U=D(m,2);Ne(U,()=>e.children),Xe(h,V=>f(i,V),()=>n(i)),Xe(p,V=>f(s,V),()=>n(s));var Y=D(p,2);os(Y,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose}}),xe(()=>{Ja(p,`height: ${n(u)+74}px`),$e(p,1,at({h:!0,i:e.stateDialog==="open",j:n(l),k:d.working,l:o(),m:r()}),"p-2jn3ll")}),g(t,v),ve()}st(["click"]);const Gg=({onStartClose:t,onClosed:e})=>{let a=I("close");return{get state(){return n(a)},set state(i){f(a,i,!0)},handleStartClose:(i=!1)=>{i||(f(a,"closing"),t?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function Xg(t,e){fe(e,!0);let a=Pe(e,"blockedDialog",3,!1),r=Pe(e,"hiddenDialog",3,!1),o=Pe(e,"onStartClose",3,()=>{}),s=Pe(e,"onClosed",3,()=>{}),i=Gg({onStartClose:()=>o()(),onClosed:()=>s()()});const{dialogDec:l,dialogInc:d}=cn();Se(()=>(d(),()=>{l()})),Oe(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const c=h=>{h.key==="Escape"&&a()&&(h.preventDefault(),h.stopPropagation())};Se(()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}));var u=ue(),v=M(u);{var p=h=>{Yg(h,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(m,k)=>{var _=ue(),x=M(_);Ne(x,()=>e.children),g(m,_)},$$slots:{default:!0}})};W(v,h=>{i.state!=="close"&&h(p)})}g(t,u),ve()}const Ds=(t,e=je,a=je,r)=>{let o=Er(()=>Cl(r?.(),!1));var s=ue(),i=M(s);{var l=c=>{gt(c,{children:(u,v)=>{Nt(u,{get hidden(){return n(o)},get page(){return ye.Settings}})},$$slots:{default:!0}})},d=c=>{var u=ue(),v=M(u);{var p=m=>{gt(m,{children:(k,_)=>{Iv(k,{})},$$slots:{default:!0}})},h=m=>{var k=ue(),_=M(k);{var x=w=>{gt(w,{children:(T,O)=>{Nt(T,{get params(){return a()},get hidden(){return n(o)},get page(){return ye.Note}})},$$slots:{default:!0}})},H=w=>{var T=ue(),O=M(T);{var L=U=>{gt(U,{children:(Y,V)=>{Nt(Y,{get hidden(){return n(o)},get page(){return ye.ImportData}})},$$slots:{default:!0}})},N=U=>{var Y=ue(),V=M(Y);{var K=X=>{gt(X,{children:(B,re)=>{Nt(B,{get hidden(){return n(o)},get page(){return ye.ExportData}})},$$slots:{default:!0}})},Q=X=>{var B=ue(),re=M(B);{var _e=F=>{gt(F,{children:(Z,le)=>{uv(Z,{})},$$slots:{default:!0}})},J=F=>{var Z=ue(),le=M(Z);{var ie=be=>{gt(be,{children:(ke,R)=>{Nt(ke,{get hidden(){return n(o)},get page(){return ye.Install}})},$$slots:{default:!0}})},ce=be=>{var ke=ue(),R=M(ke);{var $=ae=>{gt(ae,{children:(pe,we)=>{Nt(pe,{get hidden(){return n(o)},get page(){return ye.InstallSuccess}})},$$slots:{default:!0}})},Ce=ae=>{var pe=ue(),we=M(pe);{var de=Te=>{gt(Te,{children:(Le,y)=>{Nt(Le,{get hidden(){return n(o)},get page(){return ye.Auth}})},$$slots:{default:!0}})},ee=Te=>{var Le=ue(),y=M(Le);{var S=E=>{gt(E,{children:(z,q)=>{Nt(z,{get hidden(){return n(o)},get page(){return ye.Signup}})},$$slots:{default:!0}})},C=E=>{var z=ue(),q=M(z);{var te=oe=>{gt(oe,{children:(G,ne)=>{Nt(G,{get hidden(){return n(o)},get page(){return ye.Signin}})},$$slots:{default:!0}})},ge=oe=>{var G=ue(),ne=M(G);{var se=Je=>{gt(Je,{children:(pt,kt)=>{Nt(pt,{get hidden(){return n(o)},get page(){return ye.AccessKeys}})},$$slots:{default:!0}})},Ee=Je=>{var pt=ue(),kt=M(pt);{var rt=qe=>{gt(qe,{children:(Ke,et)=>{Nt(Ke,{get hidden(){return n(o)},get page(){return ye.Account}})},$$slots:{default:!0}})},We=qe=>{var Ke=ue(),et=M(Ke);{var De=Fe=>{gt(Fe,{children:(Ve,St)=>{Nt(Ve,{get hidden(){return n(o)},get page(){return ye.ConfirmAccessKey}})},$$slots:{default:!0}})},Be=Fe=>{var Ve=ue(),St=M(Ve);{var ft=Zt=>{gt(Zt,{children:(mt,Et)=>{Nt(mt,{get hidden(){return n(o)},get page(){return ye.Exit}})},$$slots:{default:!0}})},Ze=Zt=>{var mt=ue(),Et=M(mt);{var uo=Pt=>{var dn=ue(),Ft=M(dn);{var zt=Qt=>{gt(Qt,{children:(hn,ss)=>{Nt(hn,{get hidden(){return n(o)},get page(){return ye.Sync}})},$$slots:{default:!0}})},fo=Qt=>{var hn=ue(),ss=M(hn);{var cl=Da=>{gt(Da,{children:(Ir,is)=>{Nt(Ir,{get hidden(){return n(o)},get page(){return ye.Subscription}})},$$slots:{default:!0}})},dl=Da=>{var Ir=ue(),is=M(Ir);{var ul=Ia=>{gt(Ia,{children:(vo,vl)=>{Nt(vo,{get hidden(){return n(o)},get page(){return ye.About}})},$$slots:{default:!0}})},fl=Ia=>{gt(Ia,{children:(vo,vl)=>{sv(vo,{})},$$slots:{default:!0}})};W(is,Ia=>{e()===ye.About?Ia(ul):Ia(fl,!1)},!0)}g(Da,Ir)};W(ss,Da=>{e()===ye.Subscription?Da(cl):Da(dl,!1)},!0)}g(Qt,hn)};W(Ft,Qt=>{e()===ye.Sync?Qt(zt):Qt(fo,!1)},!0)}g(Pt,dn)};W(Et,Pt=>{e(),ye.Extension,Pt(uo,!1)},!0)}g(Zt,mt)};W(St,Zt=>{e()===ye.Exit?Zt(ft):Zt(Ze,!1)},!0)}g(Fe,Ve)};W(et,Fe=>{e()===ye.ConfirmAccessKey?Fe(De):Fe(Be,!1)},!0)}g(qe,Ke)};W(kt,qe=>{e()===ye.Account?qe(rt):qe(We,!1)},!0)}g(Je,pt)};W(ne,Je=>{e()===ye.AccessKeys?Je(se):Je(Ee,!1)},!0)}g(oe,G)};W(q,oe=>{e()===ye.Signin?oe(te):oe(ge,!1)},!0)}g(E,z)};W(y,E=>{e()===ye.Signup?E(S):E(C,!1)},!0)}g(Te,Le)};W(we,Te=>{e()===ye.Auth?Te(de):Te(ee,!1)},!0)}g(ae,pe)};W(R,ae=>{e()===ye.InstallSuccess?ae($):ae(Ce,!1)},!0)}g(be,ke)};W(le,be=>{e()===ye.Install?be(ie):be(ce,!1)},!0)}g(F,Z)};W(re,F=>{e()===ye.AccountSetup?F(_e):F(J,!1)},!0)}g(X,B)};W(V,X=>{e()===ye.ExportData?X(K):X(Q,!1)},!0)}g(U,Y)};W(O,U=>{e()===ye.ImportData?U(L):U(N,!1)},!0)}g(w,T)};W(_,w=>{e()===ye.Note?w(x):w(H,!1)},!0)}g(m,k)};W(v,m=>{e()===ye.NewNote?m(p):m(h,!1)},!0)}g(c,u)};W(i,c=>{e()===ye.Settings?c(l):c(d,!1)})}g(t,s)};var Jg=P("<!> <!>",1);function Zg(t,e){fe(e,!0);let a=A(()=>({...e.openWindowHref?{openWindowHref:e.openWindowHref}:{},...e.onOpenWindow?{onOpenWindow:e.onOpenWindow}:{}}));const{checkBlockedDialog:r,checkClosableDialog:o}=cn(),{sidebarClose:s,getSidebarState:i}=Ar(),l=A(r),d=A(o),{getDialogPages:c}=Jt(),{getAccount:u}=ts();let v=A(c),p=A(()=>u()!==void 0);const{checkMobileSize:h}=Aa();let m=I(lt([]));const k=A(h),{clearDialogPages:_,popDialogPage:x}=Jt(),{checkLeftStart:H}=cn();let w=A(H);Oe(()=>{c().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const T=()=>{x()},O=()=>{_()};Oe(()=>{n(v),n(k),qt(()=>{if(n(k))n(v).length>=n(m).length||n(w)?f(m,n(v).map(X=>({page:X,shown:!0})),!0):f(m,n(m).map((X,B)=>({page:X.page,shown:B<n(v).length})),!0);else if(n(v).length>=n(m).length)f(m,n(v).map(X=>({page:X,shown:!0})),!0);else{if(n(v).length===0){f(m,[{page:n(m)[n(m).length-1].page,shown:!1}],!0);return}f(m,n(v).map(X=>({page:X,shown:!0})),!0)}})});const L=()=>{f(m,n(v).map(X=>({page:X,shown:!0})),!0)};var N=Jg(),U=M(N);{var Y=X=>{Ig(X)};W(U,X=>{n(p)&&X(Y)})}var V=D(U,2);{var K=X=>{var B=ue(),re=M(B);On(re,19,()=>n(m),_e=>_e.page,(_e,J,F)=>{const Z=A(()=>n(J).page.split("?")[1]),le=A(()=>n(J).page.split("?")[0]),ie=A(()=>n(F)!==n(m).length-1&&!!n(m)[n(F)+1]?.shown),ce=A(()=>n(F)===0);{let be=A(()=>xs[n(le)]||""),ke=A(()=>n(l)||n(ce)&&!n(d));Hg(_e,Do({get shown(){return n(J).shown},get title(){return n(be)},get hidden(){return n(ie)},get blocked(){return n(ke)},onClose:T,onClosed:L},()=>n(a),{children:(R,$)=>{Ds(R,()=>n(le),()=>n(Z),()=>n(ie))},$$slots:{default:!0}}))}}),g(X,B)},Q=X=>{var B=ue(),re=M(B);{var _e=J=>{const F=A(()=>n(m)[n(m).length-1].page.split("?")[1]),Z=A(()=>n(m)[n(m).length-1].page.split("?")[0]),le=A(()=>n(m)[n(m).length-1].shown),ie=A(()=>n(m).length===1);{let ce=A(()=>xs[n(Z)]||""),be=A(()=>n(l)||!n(d)),ke=A(()=>n(l)||n(ie)?void 0:T);Xg(J,{get shownDialog(){return n(le)},get title(){return n(ce)},get blockedDialog(){return n(be)},hiddenDialog:!1,get onStartBack(){return n(ke)},onStartClose:O,onClosed:L,children:(R,$)=>{Ds(R,()=>n(Z),()=>n(F))},$$slots:{default:!0}})}};W(re,J=>{n(m).length>0&&J(_e)},!0)}g(X,B)};W(V,X=>{h()?X(K):X(Q,!1)})}g(t,N),ve()}function Qg(t,e){fe(e,!1);let a=0;Se(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),Qo(),ve()}const $g=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var eh=P('<div><button class="d p-11qzo3t"><!> <span class="e p-11qzo3t"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),th=P('<!> <!> <!> <!> <main><div class="a p-11qzo3t"><div class="b p-11qzo3t"><!></div></div> <div class="c p-11qzo3t"><!></div></main> <!>',1);function nh(t,e){fe(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=Vt(),{hasDialogPage:s}=Jt(),{setScrollContainer:i}=co(),{getAccount:l,init:d}=ts(),{isInitedNotes:c}=Ot(),{isInitedSettings:u}=Za(),{getDialogPages:v}=Jt(),{createBroadcastChannel:p,tabId:h}=io(),m=p(),{getSidebarState:k}=Ar(),{setClosableDialog:_}=cn(),{getViewMode:x}=Za(),H=()=>{$g()?a(`${tn}=${ye.AccountSetup}`):a(`${tn}=${ye.Install}`)};Se(()=>{d(S=>{S===void 0?H():(s(ye.AccountSetup)&&a(""),S?f(N,S):f(N,null))});const y=async S=>{const C=JSON.parse(S.data);if(C.tabId&&C.tabId===h)return;const E=C;E.type==="initLocalAccount"||E.type==="initCloudAccount"||E.type==="updateAccount"||E.type==="disconnectCloudAccount"?a(""):E.type==="exit"&&H()};return m.addEventListener(y),()=>m.removeEventListener(y)});const w=Hn();Se(async()=>{await new Promise(y=>setTimeout(y,60)),await Si(),w.working=!0});let T=I(!1),O=0,L=A(()=>v().length>0),N=A(l),U=A(c),Y=A(u),V=I(null);const K=()=>{n(V)&&n(V).scrollTo({top:0})};Oe(()=>{_(n(N)!==void 0)}),Oe(()=>{i(n(V))});const Q=()=>{if(n(V)){const y=n(V).scrollTop||0;y===0?f(T,!1):!n(T)&&O>y?f(T,!0):n(T)&&O+50<y&&f(T,!1),O=y}},X=()=>{Q()};Oe(()=>(n(V)?.addEventListener("scroll",X),window.addEventListener("resize",X),()=>{n(V)?.removeEventListener("scroll",X),window.removeEventListener("resize",X)}));const B=A(k);let re=A(()=>w.swipingRatio);const _e=()=>{const y=new URLSearchParams(o());if(s(ye.NewNote)){const S=y.get("noteId")||"";return r(S?y.toString().replace(ye.NewNote,`${ye.Note}?id=${encodeURIComponent(S)}`):y)}return r(y)},J=async()=>{},F=A(x),Z=A(()=>n(F)==="popup"||n(F)==="sidebar"?{onOpenWindow:J,openWindowHref:_e()}:{});var le=th(),ie=M(le);Qg(ie,{});var ce=D(ie,2);Tu(ce,{});var be=D(ce,2);rs(be,{});var ke=D(be,2);Ku(ke,{});var R=D(ke,2),$=b(R),Ce=b($),ae=b(Ce);{var pe=y=>{av(y,Do(()=>n(Z)))};W(ae,y=>{n(Y)&&n(N)!==void 0&&y(pe)})}var we=D($,2),de=b(we);{var ee=y=>{Zg(y,Do(()=>n(Z)))};W(de,y=>{n(U)&&n(Y)&&y(ee)})}Xe(R,y=>f(V,y),()=>n(V));var Te=D(R,2);{var Le=y=>{var S=eh(),C=b(S);C.__click=K;var E=b(C);ct(E,{children:(te,ge)=>{var oe=Me("top");g(te,oe)}});var z=D(E,2),q=b(z);he(q,()=>({"--rotate":"90deg","--size":"28px"})),me(q.lastChild,{name:"back"}),xe(()=>{Ja(S,`--swiping-ratio: ${n(re)}; --transition-timing-default: ${w.duration}s;`),$e(S,1,at({i:!0,g:w.working&&!w.isSwiping,j:n(L)||n(B)!=="closed"}),"p-11qzo3t")}),g(y,S)};W(Te,y=>{n(T)&&y(Le)})}xe(()=>{Ja(R,`--swiping-ratio: ${n(re)}; --transition-timing-default: ${w.duration}s;`),$e(R,1,at({f:!0,g:w.working&&!w.isSwiping,h:n(B)!=="closed"}),"p-11qzo3t")}),g(t,le),ve()}st(["click"]);function ah(t){Qd(t,{children:(e,a)=>{nh(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Mc(ah,{target:document.getElementById("app")});export{_t as $,A,Dt as B,Vt as C,ts as D,Qo as E,Sr as F,gn as G,lv as H,me as I,Ot as J,Aa as K,Ma as L,Za as M,rl as N,Ts as O,ye as P,lh as Q,Kn as R,Xe as S,uh as T,dh as U,ct as V,iu as W,lu as X,tn as Y,yr as Z,qt as _,f as a,fa as a0,Dv as a1,io as a2,ih as a3,Vc as a4,$g as a5,sh as a6,Pe as a7,Ja as a8,ch as a9,I as b,b as c,he as d,On as e,P as f,n as g,nt as h,g as i,W as j,$e as k,at as l,ve as m,M as n,Se as o,fe as p,ot as q,st as r,D as s,xe as t,Jt as u,cn as v,lt as w,Oe as x,ue as y,Me as z};
