const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/DKlmiKu5.js","a/BAW-HnOs.css","a/DVU90ypC.js","a/9q_jSmK4.js","a/BEGDcNQV.js","a/CjhdjYO4.css","a/d3HzJb4x.js","a/D5mnDQ30.css","a/DCJew9xS.js","a/DgPIJwnn.css","a/eLPqwcYE.js","a/B_UsPGEu.css","a/0dEJLV1f.js","a/Cpa8lgv9.js","a/C5u7fhZT.js","a/j0KFa_-O.css","a/hu7yjlv8.css","a/DhGa8jrV.js","a/xIey50Qd.js","a/BmJLultA.js","a/EZ_l8VDb.css","a/B_Zcg-eh.css","a/HOTUjnfJ.css","a/C2tPnSMM.js","a/Bs6Vrlio.css","a/DoAxIeS1.js","a/D_JAf1TB.js","a/DWUfwQ_G.css","a/B8neLUb6.css","a/DAHSAoV2.js","a/Dz9AXCrV.css","a/B5l296Fi.js","a/4gzmSPsW.js","a/BTtUkV_W.css","a/DpQAdt9Q.js","a/DaxC3cdO.css","a/B7lhXq9S.js","a/Bib31qW-.css","a/CJX6sp9w.js","a/Br15UghP.css","a/CL-06lTK.js","a/CTzb1Nvm.css","a/DtIh40Vz.js","a/1JBO3KHP.css"])))=>i.map(i=>d[i]);
var Is=Object.defineProperty;var La=t=>{throw TypeError(t)};var Ms=(t,e,n)=>e in t?Is(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var pt=(t,e,n)=>Ms(t,typeof e!="symbol"?e+"":e,n),qr=(t,e,n)=>e.has(t)||La("Cannot "+n);var I=(t,e,n)=>(qr(t,e,"read from private field"),n?n.call(t):e.get(t)),ge=(t,e,n)=>e.has(t)?La("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),re=(t,e,n,r)=>(qr(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Oe=(t,e,n)=>(qr(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const eo=!1;var fa=Array.isArray,Os=Array.prototype.indexOf,va=Array.from,Jr=Object.defineProperty,Tn=Object.getOwnPropertyDescriptor,to=Object.getOwnPropertyDescriptors,Rs=Object.prototype,Fs=Array.prototype,ha=Object.getPrototypeOf,Ba=Object.isExtensible;const ye=()=>{};function zs(t){return typeof t?.then=="function"}function Hs(t){return t()}function Qr(t){for(var e=0;e<t.length;e++)t[e]()}function no(){var t,e,n=new Promise((r,o)=>{t=r,e=o});return{promise:n,resolve:t,reject:e}}function js(t,e,n=!1){return t===void 0?n?e():e:t}const $e=2,ga=4,Nr=8,wn=16,Ut=32,yn=64,pa=128,ft=256,Pr=512,We=1024,ot=2048,en=4096,yt=8192,bn=16384,_a=32768,Vn=65536,Ia=1<<17,Us=1<<18,qn=1<<19,ro=1<<20,$r=1<<21,Lr=1<<22,hn=1<<23,gn=Symbol("$state"),Vs=Symbol("legacy props"),qs=Symbol(""),Dn=new class extends Error{constructor(){super(...arguments);pt(this,"name","StaleReactionError");pt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function ao(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ws(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ys(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ks(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Gs(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Xs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Zs(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Js(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Qs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function $s(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ei(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Br=1,Ir=2,oo=4,ti=8,ni=16,ri=1,ai=2,oi=4,si=8,ii=16,li=1,ci=2,Ne=Symbol(),ui="http://www.w3.org/1999/xhtml";let di=!1;function so(t){return t===this.v}function fi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function io(t){return!fi(t,this.v)}let Wn=!1,vi=!1;function hi(){Wn=!0}let Se=null;function Qt(t){Se=t}function Be(t){return lo().get(t)}function Ie(t,e){return lo().set(t,e),e}function J(t,e=!1,n){Se={p:Se,c:null,e:null,s:t,x:null,l:Wn&&!e?{s:null,u:null,$:[]}:null}}function Q(t){var e=Se,n=e.e;if(n!==null){e.e=null;for(var r of n)Eo(r)}return t!==void 0&&(e.x=t),Se=e.p,t??{}}function Yn(){return!Wn||Se!==null&&Se.l===null}function lo(t){return Se===null&&ao(),Se.c??(Se.c=new Map(gi(Se)||void 0))}function gi(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let ln=[];function co(){var t=ln;ln=[],Qr(t)}function $t(t){if(ln.length===0&&!Nn){var e=ln;queueMicrotask(()=>{e===ln&&co()})}ln.push(t)}function pi(){for(;ln.length>0;)co()}const _i=new WeakMap;function uo(t){var e=ue;if(e===null)return le.f|=hn,t;if((e.f&_a)===0){if((e.f&pa)===0)throw!e.parent&&t instanceof Error&&fo(t),t;e.b.error(t)}else zn(t,e)}function zn(t,e){for(;e!==null;){if((e.f&pa)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&fo(t),t}function fo(t){const e=_i.get(t);e&&(Jr(t,"message",{value:e.message}),Jr(t,"stack",{value:e.stack}))}const _r=new Set;let Ce=null,br=null,mt=null,ea=new Set,Nt=[],Mr=null,ta=!1,Nn=!1;var In,Mn,cn,lr,On,Rn,un,Fn,cr,ur,vt,na,Sr,ra;const Ar=class Ar{constructor(){ge(this,vt);pt(this,"current",new Map);ge(this,In,new Map);ge(this,Mn,new Set);ge(this,cn,0);ge(this,lr,null);ge(this,On,[]);ge(this,Rn,[]);ge(this,un,[]);ge(this,Fn,[]);ge(this,cr,[]);ge(this,ur,[]);pt(this,"skipped_effects",new Set)}process(e){Nt=[],br=null,this.apply();for(const s of e)Oe(this,vt,na).call(this,s);if(I(this,cn)===0){var n=mt;Oe(this,vt,ra).call(this);var r=I(this,Rn),o=I(this,un);re(this,Rn,[]),re(this,un,[]),re(this,Fn,[]),br=this,Ce=null,mt=n,Ma(r),Ma(o),br=null,I(this,lr)?.resolve()}else Oe(this,vt,Sr).call(this,I(this,Rn)),Oe(this,vt,Sr).call(this,I(this,un)),Oe(this,vt,Sr).call(this,I(this,Fn));mt=null;for(const s of I(this,On))sr(s);re(this,On,[])}capture(e,n){I(this,In).has(e)||I(this,In).set(e,n),this.current.set(e,e.v),mt?.set(e,e.v)}activate(){Ce=this}deactivate(){Ce=null,mt=null}flush(){if(Nt.length>0){if(this.activate(),ho(),Ce!==null&&Ce!==this)return}else I(this,cn)===0&&Oe(this,vt,ra).call(this);this.deactivate();for(const e of ea)if(ea.delete(e),e(),Ce!==null)break}increment(){re(this,cn,I(this,cn)+1)}decrement(){re(this,cn,I(this,cn)-1);for(const e of I(this,cr))Je(e,ot),mn(e);for(const e of I(this,ur))Je(e,en),mn(e);this.flush()}add_callback(e){I(this,Mn).add(e)}settled(){return(I(this,lr)??re(this,lr,no())).promise}static ensure(){if(Ce===null){const e=Ce=new Ar;_r.add(Ce),Nn||Ar.enqueue(()=>{Ce===e&&e.flush()})}return Ce}static enqueue(e){$t(e)}apply(){}};In=new WeakMap,Mn=new WeakMap,cn=new WeakMap,lr=new WeakMap,On=new WeakMap,Rn=new WeakMap,un=new WeakMap,Fn=new WeakMap,cr=new WeakMap,ur=new WeakMap,vt=new WeakSet,na=function(e){e.f^=We;for(var n=e.first;n!==null;){var r=n.f,o=(r&(Ut|yn))!==0,s=o&&(r&We)!==0,i=s||(r&yt)!==0||this.skipped_effects.has(n);if(!i&&n.fn!==null){o?n.f^=We:(r&ga)!==0?I(this,un).push(n):(r&We)===0&&((r&Lr)!==0&&n.b?.is_pending()?I(this,On).push(n):zr(n)&&((n.f&wn)!==0&&I(this,Fn).push(n),sr(n)));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}},Sr=function(e){for(const n of e)((n.f&ot)!==0?I(this,cr):I(this,ur)).push(n),Je(n,We);e.length=0},ra=function(){var e;for(const n of I(this,Mn))n();if(I(this,Mn).clear(),_r.size>1){I(this,In).clear();let n=!0;for(const r of _r){if(r===this){n=!1;continue}const o=[];for(const[i,l]of this.current){if(r.current.has(i))if(n&&l!==r.current.get(i))r.current.set(i,l);else continue;o.push(i)}if(o.length===0)continue;const s=[...r.current.keys()].filter(i=>!this.current.has(i));if(s.length>0){for(const i of o)go(i,s);if(Nt.length>0){Ce=r,r.apply();for(const i of Nt)Oe(e=r,vt,na).call(e,i);Nt=[],r.deactivate()}}}Ce=null}_r.delete(this)};let Rt=Ar;function vo(t){var e=Nn;Nn=!0;try{for(var n;;){if(pi(),Nt.length===0&&(Ce?.flush(),Nt.length===0))return Mr=null,n;ho()}}finally{Nn=e}}function ho(){var t=Bn;ta=!0;try{var e=0;for(Fa(!0);Nt.length>0;){var n=Rt.ensure();if(e++>1e3){var r,o;mi()}n.process(Nt),Zt.clear()}}finally{ta=!1,Fa(t),Mr=null}}function mi(){try{Xs()}catch(t){zn(t,Mr)}}let on=null;function Ma(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(bn|yt))===0&&zr(r)&&(on=[],sr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Ao(r):r.fn=null),on?.length>0)){Zt.clear();for(const o of on)sr(o);on=[]}}on=null}}function go(t,e){if(t.reactions!==null)for(const n of t.reactions){const r=n.f;(r&$e)!==0?go(n,e):(r&(Lr|wn))!==0&&po(n,e)&&(Je(n,ot),mn(n))}}function po(t,e){if(t.deps!==null){for(const n of t.deps)if(e.includes(n)||(n.f&$e)!==0&&po(n,e))return!0}return!1}function mn(t){for(var e=Mr=t;e.parent!==null;){e=e.parent;var n=e.f;if(ta&&e===ue&&(n&wn)!==0)return;if((n&(yn|Ut))!==0){if((n&We)===0)return;e.f^=We}}Nt.push(e)}function wi(t){let e=0,n=jt(0),r;return()=>{Mi()&&(a(n),Fr(()=>(e===0&&(r=gt(()=>t(()=>rr(n)))),e+=1,()=>{$t(()=>{e-=1,e===0&&(r?.(),r=void 0,rr(n))})})))}}var yi=Vn|qn|pa;function bi(t,e,n){new Si(t,e,n)}var _t,ut,da,At,dn,Dt,dt,et,Tt,Yt,fn,Kt,vn,Gt,Dr,Tr,Qe,ki,Ci,kr,Cr,aa;class Si{constructor(e,n,r){ge(this,Qe);pt(this,"parent");ge(this,_t,!1);ge(this,ut);ge(this,da,null);ge(this,At);ge(this,dn);ge(this,Dt);ge(this,dt,null);ge(this,et,null);ge(this,Tt,null);ge(this,Yt,null);ge(this,fn,0);ge(this,Kt,0);ge(this,vn,!1);ge(this,Gt,null);ge(this,Dr,()=>{I(this,Gt)&&Ft(I(this,Gt),I(this,fn))});ge(this,Tr,wi(()=>(re(this,Gt,jt(I(this,fn))),()=>{re(this,Gt,null)})));re(this,ut,e),re(this,At,n),re(this,dn,r),this.parent=ue.b,re(this,_t,!!I(this,At).pending),re(this,Dt,Kn(()=>{ue.b=this;{try{re(this,dt,qe(()=>r(I(this,ut))))}catch(o){this.error(o)}I(this,Kt)>0?Oe(this,Qe,Cr).call(this):re(this,_t,!1)}},yi))}is_pending(){return I(this,_t)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!I(this,At).pending}update_pending_count(e){Oe(this,Qe,aa).call(this,e),re(this,fn,I(this,fn)+e),ea.add(I(this,Dr))}get_effect_pending(){return I(this,Tr).call(this),a(I(this,Gt))}error(e){var n=I(this,At).onerror;let r=I(this,At).failed;if(I(this,vn)||!n&&!r)throw e;I(this,dt)&&(at(I(this,dt)),re(this,dt,null)),I(this,et)&&(at(I(this,et)),re(this,et,null)),I(this,Tt)&&(at(I(this,Tt)),re(this,Tt,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&ei(),Rt.ensure(),re(this,fn,0),I(this,Tt)!==null&&Lt(I(this,Tt),()=>{re(this,Tt,null)}),re(this,_t,this.has_pending_snippet()),re(this,dt,Oe(this,Qe,kr).call(this,()=>(re(this,vn,!1),qe(()=>I(this,dn).call(this,I(this,ut)))))),I(this,Kt)>0?Oe(this,Qe,Cr).call(this):re(this,_t,!1)};var l=le;try{Ye(null),s=!0,n?.(e,i),s=!1}catch(c){zn(c,I(this,Dt)&&I(this,Dt).parent)}finally{Ye(l)}r&&$t(()=>{re(this,Tt,Oe(this,Qe,kr).call(this,()=>{re(this,vn,!0);try{return qe(()=>{r(I(this,ut),()=>e,()=>i)})}catch(c){return zn(c,I(this,Dt).parent),null}finally{re(this,vn,!1)}}))})}}_t=new WeakMap,ut=new WeakMap,da=new WeakMap,At=new WeakMap,dn=new WeakMap,Dt=new WeakMap,dt=new WeakMap,et=new WeakMap,Tt=new WeakMap,Yt=new WeakMap,fn=new WeakMap,Kt=new WeakMap,vn=new WeakMap,Gt=new WeakMap,Dr=new WeakMap,Tr=new WeakMap,Qe=new WeakSet,ki=function(){try{re(this,dt,qe(()=>I(this,dn).call(this,I(this,ut))))}catch(e){this.error(e)}re(this,_t,!1)},Ci=function(){const e=I(this,At).pending;e&&(re(this,et,qe(()=>e(I(this,ut)))),Rt.enqueue(()=>{re(this,dt,Oe(this,Qe,kr).call(this,()=>(Rt.ensure(),qe(()=>I(this,dn).call(this,I(this,ut)))))),I(this,Kt)>0?Oe(this,Qe,Cr).call(this):(Lt(I(this,et),()=>{re(this,et,null)}),re(this,_t,!1))}))},kr=function(e){var n=ue,r=le,o=Se;ht(I(this,Dt)),Ye(I(this,Dt)),Qt(I(this,Dt).ctx);try{return e()}catch(s){return uo(s),null}finally{ht(n),Ye(r),Qt(o)}},Cr=function(){const e=I(this,At).pending;I(this,dt)!==null&&(re(this,Yt,document.createDocumentFragment()),Ei(I(this,dt),I(this,Yt))),I(this,et)===null&&re(this,et,qe(()=>e(I(this,ut))))},aa=function(e){var n;if(!this.has_pending_snippet()){this.parent&&Oe(n=this.parent,Qe,aa).call(n,e);return}re(this,Kt,I(this,Kt)+e),I(this,Kt)===0&&(re(this,_t,!1),I(this,et)&&Lt(I(this,et),()=>{re(this,et,null)}),I(this,Yt)&&(I(this,ut).before(I(this,Yt)),re(this,Yt,null)),$t(()=>{Rt.ensure().flush()}))};function Ei(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var o=n===r?null:fr(n);e.append(n),n=o}}function Pi(t,e,n){const r=Yn()?dr:Or;if(e.length===0){n(t.map(r));return}var o=Ce,s=ue,i=xi();Promise.all(e.map(l=>Ai(l))).then(l=>{i();try{n([...t.map(r),...l])}catch(c){(s.f&bn)===0&&zn(c,s)}o?.deactivate(),oa()}).catch(l=>{zn(l,s)})}function xi(){var t=ue,e=le,n=Se,r=Ce;return function(){ht(t),Ye(e),Qt(n),r?.activate()}}function oa(){ht(null),Ye(null),Qt(null)}function dr(t){var e=$e|ot,n=le!==null&&(le.f&$e)!==0?le:null;return ue===null||n!==null&&(n.f&ft)!==0?e|=ft:ue.f|=qn,{ctx:Se,deps:null,effects:null,equals:so,f:e,fn:t,reactions:null,rv:0,v:Ne,wv:0,parent:n??ue,ac:null}}function Ai(t,e){let n=ue;n===null&&Ws();var r=n.b,o=void 0,s=jt(Ne),i=!le,l=new Map;return zi(()=>{var c=no();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(oa)}catch(h){c.reject(h),oa()}var u=Ce,d=r.is_pending();i&&(r.update_pending_count(1),d||(u.increment(),l.get(u)?.reject(Dn),l.delete(u),l.set(u,c)));const f=(h,g=void 0)=>{if(d||u.activate(),g)g!==Dn&&(s.f|=hn,Ft(s,g));else{(s.f&hn)!==0&&(s.f^=hn),Ft(s,h);for(const[v,p]of l){if(l.delete(v),v===u)break;p.reject(Dn)}}i&&(r.update_pending_count(-1),d||u.decrement())};c.promise.then(f,h=>f(null,h||"unknown"))}),Co(()=>{for(const c of l.values())c.reject(Dn)}),new Promise(c=>{function u(d){function f(){d===o?c(s):u(o)}d.then(f,f)}u(o)})}function R(t){const e=dr(t);return No(e),e}function Or(t){const e=dr(t);return e.equals=io,e}function _o(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)at(e[n])}}function Di(t){for(var e=t.parent;e!==null;){if((e.f&$e)===0)return e;e=e.parent}return null}function ma(t){var e,n=ue;ht(Di(t));try{_o(t),e=Mo(t)}finally{ht(n)}return e}function mo(t){var e=ma(t);if(t.equals(e)||(t.v=e,t.wv=Bo()),!kn)if(mt!==null)mt.set(t,t.v);else{var n=(Xt||(t.f&ft)!==0)&&t.deps!==null?en:We;Je(t,n)}}const Zt=new Map;function jt(t,e){var n={f:0,v:t,reactions:null,equals:so,rv:0,wv:0};return n}function z(t,e){const n=jt(t);return No(n),n}function sa(t,e=!1,n=!0){var o;const r=jt(t);return e||(r.equals=io),Wn&&n&&Se!==null&&Se.l!==null&&((o=Se.l).s??(o.s=[])).push(r),r}function m(t,e,n=!1){le!==null&&(!wt||(le.f&Ia)!==0)&&Yn()&&(le.f&($e|wn|Lr|Ia))!==0&&!zt?.includes(t)&&$s();let r=n?Le(e):e;return Ft(t,r)}function Ft(t,e){if(!t.equals(e)){var n=t.v;kn?Zt.set(t,e):Zt.set(t,n),t.v=e;var r=Rt.ensure();r.capture(t,n),(t.f&$e)!==0&&((t.f&ot)!==0&&ma(t),Je(t,(t.f&ft)===0?We:en)),t.wv=Bo(),wo(t,ot),Yn()&&ue!==null&&(ue.f&We)!==0&&(ue.f&(Ut|yn))===0&&(ct===null?Ui([t]):ct.push(t))}return e}function rr(t){m(t,t.v+1)}function wo(t,e){var n=t.reactions;if(n!==null)for(var r=Yn(),o=n.length,s=0;s<o;s++){var i=n[s],l=i.f;if(!(!r&&i===ue)){var c=(l&ot)===0;c&&Je(i,e),(l&$e)!==0?wo(i,en):c&&((l&wn)!==0&&on!==null&&on.push(i),mn(i))}}}function Le(t){if(typeof t!="object"||t===null||gn in t)return t;const e=ha(t);if(e!==Rs&&e!==Fs)return t;var n=new Map,r=fa(t),o=z(0),s=pn,i=l=>{if(pn===s)return l();var c=le,u=pn;Ye(null),Ha(s);var d=l();return Ye(c),Ha(u),d};return r&&n.set("length",z(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Js();var d=n.get(c);return d===void 0?d=i(()=>{var f=z(u.value);return n.set(c,f),f}):m(d,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const d=i(()=>z(Ne));n.set(c,d),rr(o)}}else m(u,Ne),rr(o);return!0},get(l,c,u){if(c===gn)return t;var d=n.get(c),f=c in l;if(d===void 0&&(!f||Tn(l,c)?.writable)&&(d=i(()=>{var g=Le(f?l[c]:Ne),v=z(g);return v}),n.set(c,d)),d!==void 0){var h=a(d);return h===Ne?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=n.get(c);d&&(u.value=a(d))}else if(u===void 0){var f=n.get(c),h=f?.v;if(f!==void 0&&h!==Ne)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){if(c===gn)return!0;var u=n.get(c),d=u!==void 0&&u.v!==Ne||Reflect.has(l,c);if(u!==void 0||ue!==null&&(!d||Tn(l,c)?.writable)){u===void 0&&(u=i(()=>{var h=d?Le(l[c]):Ne,g=z(h);return g}),n.set(c,u));var f=a(u);if(f===Ne)return!1}return d},set(l,c,u,d){var f=n.get(c),h=c in l;if(r&&c==="length")for(var g=u;g<f.v;g+=1){var v=n.get(g+"");v!==void 0?m(v,Ne):g in l&&(v=i(()=>z(Ne)),n.set(g+"",v))}if(f===void 0)(!h||Tn(l,c)?.writable)&&(f=i(()=>z(void 0)),m(f,Le(u)),n.set(c,f));else{h=f.v!==Ne;var p=i(()=>Le(u));m(f,p)}var w=Reflect.getOwnPropertyDescriptor(l,c);if(w?.set&&w.set.call(d,u),!h){if(r&&typeof c=="string"){var k=n.get("length"),E=Number(c);Number.isInteger(E)&&E>=k.v&&m(k,E+1)}rr(o)}return!0},ownKeys(l){a(o);var c=Reflect.ownKeys(l).filter(f=>{var h=n.get(f);return h===void 0||h.v!==Ne});for(var[u,d]of n)d.v!==Ne&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Qs()}})}var Oa,yo,bo,So;function Ti(){if(Oa===void 0){Oa=window,yo=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;bo=Tn(e,"firstChild").get,So=Tn(e,"nextSibling").get,Ba(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Ba(n)&&(n.__t=void 0)}}function Sn(t=""){return document.createTextNode(t)}function Hn(t){return bo.call(t)}function fr(t){return So.call(t)}function D(t,e){return Hn(t)}function B(t,e=!1){{var n=Hn(t);return n instanceof Comment&&n.data===""?fr(n):n}}function H(t,e=1,n=!1){let r=t;for(;e--;)r=fr(r);return r}function Ni(t){t.textContent=""}function wa(){return!1}let Ra=!1;function Li(){Ra||(Ra=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Rr(t){var e=le,n=ue;Ye(null),ht(null);try{return t()}finally{Ye(e),ht(n)}}function Bi(t,e,n,r=n){t.addEventListener(e,()=>Rr(n));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),Li()}function ko(t){ue===null&&le===null&&Gs(),le!==null&&(le.f&ft)!==0&&ue===null&&Ks(),kn&&Ys()}function Ii(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Mt(t,e,n,r=!0){var o=ue;o!==null&&(o.f&yt)!==0&&(t|=yt);var s={ctx:Se,deps:null,nodes_start:null,nodes_end:null,f:t|ot,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{sr(s),s.f|=_a}catch(c){throw at(s),c}else e!==null&&mn(s);if(r){var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&qn)===0&&(i=i.first),i!==null&&(i.parent=o,o!==null&&Ii(i,o),le!==null&&(le.f&$e)!==0&&(t&yn)===0)){var l=le;(l.effects??(l.effects=[])).push(i)}}return s}function Mi(){return le!==null&&!wt}function Co(t){const e=Mt(Nr,null,!1);return Je(e,We),e.teardown=t,e}function xe(t){ko();var e=ue.f,n=!le&&(e&Ut)!==0&&(e&_a)===0;if(n){var r=Se;(r.e??(r.e=[])).push(t)}else return Eo(t)}function Eo(t){return Mt(ga|ro,t,!1)}function Oi(t){return ko(),Mt(Nr|ro,t,!0)}function Ri(t){Rt.ensure();const e=Mt(yn|qn,t,!0);return(n={})=>new Promise(r=>{n.outro?Lt(e,()=>{at(e),r(void 0)}):(at(e),r(void 0))})}function Fi(t){return Mt(ga,t,!1)}function zi(t){return Mt(Lr|qn,t,!0)}function Fr(t,e=0){return Mt(Nr|e,t,!0)}function ce(t,e=[],n=[]){Pi(e,n,r=>{Mt(Nr,()=>t(...r.map(a)),!0)})}function Kn(t,e=0){var n=Mt(wn|e,t,!0);return n}function qe(t,e=!0){return Mt(Ut|qn,t,!0,e)}function Po(t){var e=t.teardown;if(e!==null){const n=kn,r=le;za(!0),Ye(null);try{e.call(null)}finally{za(n),Ye(r)}}}function xo(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const o=n.ac;o!==null&&Rr(()=>{o.abort(Dn)});var r=n.next;(n.f&yn)!==0?n.parent=null:at(n,e),n=r}}function Hi(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Ut)===0&&at(e),e=n}}function at(t,e=!0){var n=!1;(e||(t.f&Us)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ji(t.nodes_start,t.nodes_end),n=!0),xo(t,e&&!n),xr(t,0),Je(t,bn);var r=t.transitions;if(r!==null)for(const s of r)s.stop();Po(t);var o=t.parent;o!==null&&o.first!==null&&Ao(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ji(t,e){for(;t!==null;){var n=t===e?null:fr(t);t.remove(),t=n}}function Ao(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Lt(t,e){var n=[];ya(t,n,!0),Do(n,()=>{at(t),e&&e()})}function Do(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var o of t)o.out(r)}else e()}function ya(t,e,n){if((t.f&yt)===0){if(t.f^=yt,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var o=r.next,s=(r.f&Vn)!==0||(r.f&Ut)!==0;ya(r,e,s?n:!1),r=o}}}function Ln(t){To(t,!0)}function To(t,e){if((t.f&yt)!==0){t.f^=yt,(t.f&We)===0&&(Je(t,ot),mn(t));for(var n=t.first;n!==null;){var r=n.next,o=(n.f&Vn)!==0||(n.f&Ut)!==0;To(n,o?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let Bn=!1;function Fa(t){Bn=t}let kn=!1;function za(t){kn=t}let le=null,wt=!1;function Ye(t){le=t}let ue=null;function ht(t){ue=t}let zt=null;function No(t){le!==null&&(zt===null?zt=[t]:zt.push(t))}let Ze=null,rt=0,ct=null;function Ui(t){ct=t}let Lo=1,or=0,pn=or;function Ha(t){pn=t}let Xt=!1;function Bo(){return++Lo}function zr(t){var e=t.f;if((e&ot)!==0)return!0;if((e&en)!==0){var n=t.deps,r=(e&ft)!==0;if(n!==null){var o,s,i=(e&Pr)!==0,l=r&&ue!==null&&!Xt,c=n.length;if((i||l)&&(ue===null||(ue.f&bn)===0)){var u=t,d=u.parent;for(o=0;o<c;o++)s=n[o],(i||!s?.reactions?.includes(u))&&(s.reactions??(s.reactions=[])).push(u);i&&(u.f^=Pr),l&&d!==null&&(d.f&ft)===0&&(u.f^=ft)}for(o=0;o<c;o++)if(s=n[o],zr(s)&&mo(s),s.wv>t.wv)return!0}(!r||ue!==null&&!Xt)&&Je(t,We)}return!1}function Io(t,e,n=!0){var r=t.reactions;if(r!==null&&!zt?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&$e)!==0?Io(s,e,!1):e===s&&(n?Je(s,ot):(s.f&We)!==0&&Je(s,en),mn(s))}}function Mo(t){var p;var e=Ze,n=rt,r=ct,o=le,s=Xt,i=zt,l=Se,c=wt,u=pn,d=t.f;Ze=null,rt=0,ct=null,Xt=(d&ft)!==0&&(wt||!Bn||le===null),le=(d&(Ut|yn))===0?t:null,zt=null,Qt(t.ctx),wt=!1,pn=++or,t.ac!==null&&(Rr(()=>{t.ac.abort(Dn)}),t.ac=null);try{t.f|=$r;var f=t.fn,h=f(),g=t.deps;if(Ze!==null){var v;if(xr(t,rt),g!==null&&rt>0)for(g.length=rt+Ze.length,v=0;v<Ze.length;v++)g[rt+v]=Ze[v];else t.deps=g=Ze;if(!Xt||(d&$e)!==0&&t.reactions!==null)for(v=rt;v<g.length;v++)((p=g[v]).reactions??(p.reactions=[])).push(t)}else g!==null&&rt<g.length&&(xr(t,rt),g.length=rt);if(Yn()&&ct!==null&&!wt&&g!==null&&(t.f&($e|en|ot))===0)for(v=0;v<ct.length;v++)Io(ct[v],t);return o!==null&&o!==t&&(or++,ct!==null&&(r===null?r=ct:r.push(...ct))),(t.f&hn)!==0&&(t.f^=hn),h}catch(w){return uo(w)}finally{t.f^=$r,Ze=e,rt=n,ct=r,le=o,Xt=s,zt=i,Qt(l),wt=c,pn=u}}function Vi(t,e){let n=e.reactions;if(n!==null){var r=Os.call(n,t);if(r!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(e.f&$e)!==0&&(Ze===null||!Ze.includes(e))&&(Je(e,en),(e.f&(ft|Pr))===0&&(e.f^=Pr),_o(e),xr(e,0))}function xr(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Vi(t,n[r])}function sr(t){var e=t.f;if((e&bn)===0){Je(t,We);var n=ue,r=Bn;ue=t,Bn=!0;try{(e&wn)!==0?Hi(t):xo(t),Po(t);var o=Mo(t);t.teardown=typeof o=="function"?o:null,t.wv=Lo;var s;eo&&vi&&(t.f&ot)!==0&&t.deps}finally{Bn=r,ue=n}}}async function Oo(){await Promise.resolve(),vo()}function a(t){var e=t.f,n=(e&$e)!==0;if(le!==null&&!wt){var r=ue!==null&&(ue.f&bn)!==0;if(!r&&!zt?.includes(t)){var o=le.deps;if((le.f&$r)!==0)t.rv<or&&(t.rv=or,Ze===null&&o!==null&&o[rt]===t?rt++:Ze===null?Ze=[t]:(!Xt||!Ze.includes(t))&&Ze.push(t));else{(le.deps??(le.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[le]:s.includes(le)||s.push(le)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&ft)===0&&(i.f^=ft)}if(kn){if(Zt.has(t))return Zt.get(t);if(n){i=t;var c=i.v;return((i.f&We)===0&&i.reactions!==null||Ro(i))&&(c=ma(i)),Zt.set(i,c),c}}else if(n){if(i=t,mt?.has(i))return mt.get(i);zr(i)&&mo(i)}if(mt?.has(t))return mt.get(t);if((t.f&hn)!==0)throw t.v;return t.v}function Ro(t){if(t.v===Ne)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Zt.has(e)||(e.f&$e)!==0&&Ro(e))return!0;return!1}function gt(t){var e=wt;try{return wt=!0,t()}finally{wt=e}}const qi=-7169;function Je(t,e){t.f=t.f&qi|e}function Wi(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(gn in t)ia(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&gn in n&&ia(n)}}}function ia(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{ia(t[r],e)}catch{}const n=ha(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=to(n);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Yi=["touchstart","touchmove"];function Ki(t){return Yi.includes(t)}const Fo=new Set,la=new Set;function Gi(t,e,n,r={}){function o(s){if(r.capture||$n.call(e,s),!s.cancelBubble)return Rr(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?$t(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function ba(t,e,n,r,o){var s={capture:r,passive:o},i=Gi(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Co(()=>{e.removeEventListener(t,i,s)})}function st(t){for(var e=0;e<t.length;e++)Fo.add(t[e]);for(var n of la)n(t)}let ja=null;function $n(t){var e=this,n=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;ja=t;var i=0,l=ja===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){Jr(t,"currentTarget",{configurable:!0,get(){return s||n}});var d=le,f=ue;Ye(null),ht(null);try{for(var h,g=[];s!==null;){var v=s.assignedSlot||s.parentNode||s.host||null;try{var p=s["__"+r];if(p!=null&&(!s.disabled||t.target===s))if(fa(p)){var[w,...k]=p;w.apply(s,[t,...k])}else p.call(s,t)}catch(E){h?g.push(E):h=E}if(t.cancelBubble||v===e||v===null)break;s=v}if(h){for(let E of g)queueMicrotask(()=>{throw E});throw h}}finally{t.__root=e,delete t.currentTarget,Ye(d),ht(f)}}}function zo(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ir(t,e){var n=ue;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function U(t,e){var n=(e&li)!==0,r=(e&ci)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=zo(s?t:"<!>"+t),n||(o=Hn(o)));var i=r||yo?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=Hn(i),c=i.lastChild;ir(l,c)}else ir(i,i);return i}}function Xi(t,e,n="svg"){var r=!t.startsWith("<!>"),o=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=zo(o),l=Hn(i);s=Hn(l)}var c=s.cloneNode(!0);return ir(c,c),c}}function Zi(t,e){return Xi(t,e,"svg")}function Te(t=""){{var e=Sn(t+"");return ir(e,e),e}}function V(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Sn();return t.append(e,n),ir(e,n),t}function _(t,e){t!==null&&t.before(e)}function Dd(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function Jt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Ji(t,e){return Qi(t,e)}const An=new Map;function Qi(t,{target:e,anchor:n,props:r={},events:o,context:s,intro:i=!0}){Ti();var l=new Set,c=f=>{for(var h=0;h<f.length;h++){var g=f[h];if(!l.has(g)){l.add(g);var v=Ki(g);e.addEventListener(g,$n,{passive:v});var p=An.get(g);p===void 0?(document.addEventListener(g,$n,{passive:v}),An.set(g,1)):An.set(g,p+1)}}};c(va(Fo)),la.add(c);var u=void 0,d=Ri(()=>{var f=n??e.appendChild(Sn());return bi(f,{pending:()=>{}},h=>{if(s){J({});var g=Se;g.c=s}o&&(r.$$events=o),u=t(h,r)||{},s&&Q()}),()=>{for(var h of l){e.removeEventListener(h,$n);var g=An.get(h);--g===0?(document.removeEventListener(h,$n),An.delete(h)):An.set(h,g)}la.delete(c),f!==n&&f.parentNode?.removeChild(f)}});return $i.set(u,d),u}let $i=new WeakMap;const Wr=0,mr=1,Yr=2;function Ho(t,e,n,r,o){var s=t,i=Yn(),l=Se,c=Ne,u,d,f,h=i?jt(void 0):sa(void 0,!1,!1),g=i?jt(void 0):sa(void 0,!1,!1),v=!1;function p(k,E){v=!0,E&&(ht(w),Ye(w),Qt(l));try{k===Wr&&n&&(u?Ln(u):u=qe(()=>n(s))),k===mr&&r&&(d?Ln(d):d=qe(()=>r(s,h))),k===Yr&&o&&(f?Ln(f):f=qe(()=>o(s,g))),k!==Wr&&u&&Lt(u,()=>u=null),k!==mr&&d&&Lt(d,()=>d=null),k!==Yr&&f&&Lt(f,()=>f=null)}finally{E&&(Qt(null),Ye(null),ht(null),Nn||vo())}}var w=Kn(()=>{if(c!==(c=e())){if(zs(c)){var k=c;v=!1,k.then(E=>{k===c&&(Ft(h,E),p(mr,!0))},E=>{if(k===c&&(Ft(g,E),p(Yr,!0),!o))throw g.v}),$t(()=>{v||p(Wr,!0)})}else Ft(h,c),p(mr,!1);return()=>c=Ne}})}function q(t,e,n=!1){var r=t,o=null,s=null,i=Ne,l=n?Vn:0,c=!1;const u=(g,v=!0)=>{c=!0,h(v,g)};var d=null;function f(){d!==null&&(d.lastChild.remove(),r.before(d),d=null);var g=i?o:s,v=i?s:o;g&&Ln(g),v&&Lt(v,()=>{i?s=null:o=null})}const h=(g,v)=>{if(i!==(i=g)){var p=wa(),w=r;if(p&&(d=document.createDocumentFragment(),d.append(w=Sn())),i?o??(o=v&&qe(()=>v(w))):s??(s=v&&qe(()=>v(w))),p){var k=Ce,E=i?o:s,y=i?s:o;E&&k.skipped_effects.delete(E),y&&k.skipped_effects.add(y),k.add_callback(f)}else f()}};Kn(()=>{c=!1,e(u),c||h(null,null)},l)}function be(t,e){Fr(()=>{var n=e();for(var r in n){var o=n[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function el(t,e,n){for(var r=t.items,o=[],s=e.length,i=0;i<s;i++)ya(e[i].e,o,!0);var l=s>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;Ni(c),c.append(n),r.clear(),xt(t,e[0].prev,e[s-1].next)}Do(o,()=>{for(var u=0;u<s;u++){var d=e[u];l||(r.delete(d.k),xt(t,d.prev,d.next)),at(d.e,!l)}})}function Hr(t,e,n,r,o,s=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&oo)!==0;if(c){var u=t;i=u.appendChild(Sn())}var d=null,f=!1,h=new Map,g=Or(()=>{var k=n();return fa(k)?k:k==null?[]:va(k)}),v,p;function w(){tl(p,v,l,h,i,o,e,r,n),s!==null&&(v.length===0?d?Ln(d):d=qe(()=>s(i)):d!==null&&Lt(d,()=>{d=null}))}Kn(()=>{p??(p=ue),v=a(g);var k=v.length;if(!(f&&k===0)){f=k===0;var E,y,T,L;if(wa()){var P=new Set,S=Ce;for(y=0;y<k;y+=1){T=v[y],L=r(T,y);var x=l.items.get(L)??h.get(L);x?(e&(Br|Ir))!==0&&jo(x,T,y,e):(E=Uo(null,l,null,null,T,L,y,o,e,n,!0),h.set(L,E)),P.add(L)}for(const[N,G]of l.items)P.has(N)||S.skipped_effects.add(G.e);S.add_callback(w)}else w();a(g)}})}function tl(t,e,n,r,o,s,i,l,c){var u=(i&ti)!==0,d=(i&(Br|Ir))!==0,f=e.length,h=n.items,g=n.first,v=g,p,w=null,k,E=[],y=[],T,L,P,S;if(u)for(S=0;S<f;S+=1)T=e[S],L=l(T,S),P=h.get(L),P!==void 0&&(P.a?.measure(),(k??(k=new Set)).add(P));for(S=0;S<f;S+=1){if(T=e[S],L=l(T,S),P=h.get(L),P===void 0){var x=r.get(L);if(x!==void 0){r.delete(L),h.set(L,x);var N=w?w.next:v;xt(n,w,x),xt(n,x,N),Kr(x,N,o),w=x}else{var G=v?v.e.nodes_start:o;w=Uo(G,n,w,w===null?n.first:w.next,T,L,S,s,i,c)}h.set(L,w),E=[],y=[],v=w.next;continue}if(d&&jo(P,T,S,i),(P.e.f&yt)!==0&&(Ln(P.e),u&&(P.a?.unfix(),(k??(k=new Set)).delete(P))),P!==v){if(p!==void 0&&p.has(P)){if(E.length<y.length){var se=y[0],ae;w=se.prev;var j=E[0],te=E[E.length-1];for(ae=0;ae<E.length;ae+=1)Kr(E[ae],se,o);for(ae=0;ae<y.length;ae+=1)p.delete(y[ae]);xt(n,j.prev,te.next),xt(n,w,j),xt(n,te,se),v=se,w=te,S-=1,E=[],y=[]}else p.delete(P),Kr(P,v,o),xt(n,P.prev,P.next),xt(n,P,w===null?n.first:w.next),xt(n,w,P),w=P;continue}for(E=[],y=[];v!==null&&v.k!==L;)(v.e.f&yt)===0&&(p??(p=new Set)).add(v),y.push(v),v=v.next;if(v===null)continue;P=v}E.push(P),w=P,v=P.next}if(v!==null||p!==void 0){for(var $=p===void 0?[]:va(p);v!==null;)(v.e.f&yt)===0&&$.push(v),v=v.next;var he=$.length;if(he>0){var me=(i&oo)!==0&&f===0?o:null;if(u){for(S=0;S<he;S+=1)$[S].a?.measure();for(S=0;S<he;S+=1)$[S].a?.fix()}el(n,$,me)}}u&&$t(()=>{if(k!==void 0)for(P of k)P.a?.apply()}),t.first=n.first&&n.first.e,t.last=w&&w.e;for(var X of r.values())at(X.e);r.clear()}function jo(t,e,n,r){(r&Br)!==0&&Ft(t.v,e),(r&Ir)!==0?Ft(t.i,n):t.i=n}function Uo(t,e,n,r,o,s,i,l,c,u,d){var f=(c&Br)!==0,h=(c&ni)===0,g=f?h?sa(o,!1,!1):jt(o):o,v=(c&Ir)===0?i:jt(i),p={i:v,v:g,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var w=document.createDocumentFragment();w.append(t=Sn())}return p.e=qe(()=>l(t,g,v,u),di),p.e.prev=n&&n.e,p.e.next=r&&r.e,n===null?d||(e.first=p):(n.next=p,n.e.next=p.e),r!==null&&(r.prev=p,r.e.prev=p.e),p}finally{}}function Kr(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var i=fr(s);o.before(s),s=i}}function xt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function ve(t,e,...n){var r=t,o=ye,s;Kn(()=>{o!==(o=e())&&(s&&(at(s),s=null),s=qe(()=>o(r,...n)))},Vn)}function Vo(t,e,n){var r=t,o,s,i=null,l=null;function c(){s&&(Lt(s),s=null),i&&(i.lastChild.remove(),r.before(i),i=null),s=l,l=null}Kn(()=>{if(o!==(o=e())){var u=wa();if(o){var d=r;u&&(i=document.createDocumentFragment(),i.append(d=Sn()),s&&Ce.skipped_effects.add(s)),l=qe(()=>n(d,o))}u?Ce.add_callback(c):c()}},Vn)}function qo(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=qo(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function nl(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=qo(t))&&(r&&(r+=" "),r+=e);return r}function pe(t){return typeof t=="object"?nl(t):t??""}const Ua=[...` 	
\r\f \v\uFEFF`];function rl(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||Ua.includes(r[i-1]))&&(l===r.length||Ua.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function al(t,e){return t==null?null:String(t)}function _e(t,e,n,r,o,s){var i=t.__className;if(i!==n||i===void 0){var l=rl(n,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function jn(t,e,n,r){var o=t.__style;if(o!==e){var s=al(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const ol=Symbol("is custom element"),sl=Symbol("is html");function Td(t,e){var n=Sa(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Nd(t,e){var n=Sa(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function De(t,e,n,r){var o=Sa(t);o[e]!==(o[e]=n)&&(e==="loading"&&(t[qs]=n),n==null?t.removeAttribute(e):typeof n!="string"&&il(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Sa(t){return t.__attributes??(t.__attributes={[ol]:t.nodeName.includes("-"),[sl]:t.namespaceURI===ui})}var Va=new Map;function il(t){var e=t.getAttribute("is")||t.nodeName,n=Va.get(e);if(n)return n;Va.set(e,n=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=to(o);for(var i in r)r[i].set&&n.push(i);o=ha(o)}return n}function ll(t,e,n=e){var r=new WeakSet;Bi(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=Gr(t)?Xr(s):s,n(s),Ce!==null&&r.add(Ce),await Oo(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),gt(e)==null&&t.value&&(n(Gr(t)?Xr(t.value):t.value),Ce!==null&&r.add(Ce)),Fr(()=>{var o=e();if(t===document.activeElement){var s=br??Ce;if(r.has(s))return}Gr(t)&&o===Xr(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Gr(t){var e=t.type;return e==="number"||e==="range"}function Xr(t){return t===""?null:+t}function qa(t,e){return t===e||t?.[gn]===e}function Bt(t={},e,n,r){return Fi(()=>{var o,s;return Fr(()=>{o=s,s=[],gt(()=>{t!==n(...s)&&(e(t,...s),o&&qa(n(...o),t)&&e(null,...o))})}),()=>{$t(()=>{s&&qa(n(...s),t)&&e(null,...s)})}}),t}function Wo(t=!1){const e=Se,n=e.l.u;if(!n)return;let r=()=>Wi(e.s);if(t){let o=0,s={};const i=dr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>a(i)}n.b.length&&Oi(()=>{Wa(e,r),Qr(n.b)}),xe(()=>{const o=gt(()=>n.m.map(Hs));return()=>{for(const s of o)typeof s=="function"&&s()}}),n.a.length&&xe(()=>{Wa(e,r),Qr(n.a)})}function Wa(t,e){if(t.l.s)for(const n of t.l.s)a(n);e()}let wr=!1;function cl(t){var e=wr;try{return wr=!1,[t(),wr]}finally{wr=e}}function ie(t,e,n,r){var o=!Wn||(n&ai)!==0,s=(n&si)!==0,i=(n&ii)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?gt(r):r),l),d;if(s){var f=gn in t||Vs in t;d=Tn(t,e)?.set??(f&&e in t?y=>t[e]=y:void 0)}var h,g=!1;s?[h,g]=cl(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=u(),d&&(o&&Zs(),d(h)));var v;if(o?v=()=>{var y=t[e];return y===void 0?u():(c=!0,y)}:v=()=>{var y=t[e];return y!==void 0&&(l=void 0),y===void 0?l:y},o&&(n&oi)===0)return v;if(d){var p=t.$$legacy;return(function(y,T){return arguments.length>0?((!o||!T||p||g)&&d(T?v():y),y):v()})}var w=!1,k=((n&ri)!==0?dr:Or)(()=>(w=!1,v()));s&&a(k);var E=ue;return(function(y,T){if(arguments.length>0){const L=T?a(k):o&&s?Le(y):y;return m(k,L),w=!0,l!==void 0&&(l=L),y}return kn&&w||(E.f&bn)!==0?k.v:a(k)})}function Ee(t){Se===null&&ao(),Wn&&Se.l!==null?ul(Se).m.push(t):xe(()=>{const e=gt(t);if(typeof e=="function")return e})}function ul(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const dl="5";var $a;typeof window<"u"&&(($a=window.__svelte??(window.__svelte={})).v??($a.v=new Set)).add(dl);hi();const Yo={};function fl(t){Ie(Yo,t)}function Ko(){const t=Be(Yo);if(!t)throw new Error("No SearchContext found");return t}const Go={};function vl(t){Ie(Go,t)}function Ot(){const t=Be(Go);if(!t)throw new Error("No AppHistoryContext found");return t}function hl(t,e){J(e,!0);const{addSearchParam:n,deleteSearchParam:r,getAppLocation:o}=Ot(),s=R(()=>o().searchParams),i="search",l=Le({value:o().searchParams.get(i)||""}),c=f=>{(a(s).get(i)||"")!==f&&(f===""?r(i):n(i,f))};xe(()=>{a(s);const f=l.value;gt(()=>{c(f)})}),fl(l);var u=V(),d=B(u);ve(d,()=>e.children??ye),_(t,u),Q()}const Xo={};function gl(t){Ie(Xo,t)}function Zo(){const t=Be(Xo);if(!t)throw new Error("No TagSearchContext found");return t}function pl(t,e){J(e,!0);const n=Le({value:""});gl(n);var r=V(),o=B(r);ve(o,()=>e.children??ye),_(t,r),Q()}const Jo={};function _l(t){Ie(Jo,t)}function Qo(){const t=Be(Jo);if(!t)throw new Error("No FeedOrderContext found");return t}function ml(t,e){J(e,!0);const{addSearchParam:n,deleteSearchParam:r,getAppLocation:o}=Ot(),s=R(()=>o().searchParams),i="feedOrder";let l=z(Le(o().searchParams.get(i)||"newest"));const c=g=>{(a(s).get(i)||"newest")!==g&&(g==="newest"?r(i):n(i,g))};xe(()=>{a(s),a(l),gt(()=>{c(a(l))})}),_l({getFeedOrder:()=>a(l),setFeedOrder:g=>{m(l,g,!0)}});var f=V(),h=B(f);ve(h,()=>e.children??ye),_(t,f),Q()}const $o={};function wl(t){Ie($o,t)}function ka(){const t=Be($o);if(!t)throw new Error("No SidebarContext found");return t}function yl(t,e){J(e,!0);const n=(d,f)=>{if(!f)return d;if(f.type==="closed")return{type:"closed"};switch(d.type){case"opened":return f.type==="close"?{type:"closing"}:f.type==="swipe"?{type:"openSwiping"}:d;case"closed":return f.type==="open"?{type:"opening"}:f.type==="swipe"?{type:"closeSwiping"}:d;case"openSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"closeSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"opening":return f.type==="opened"?{type:"opened"}:d;default:return d}};let r=z(Le(n({type:"closed"})));const o=d=>{const f=gt(()=>a(r));m(r,n(f,d),!0)};wl({sidebarOpen:()=>{o({type:"open"})},sidebarClose:()=>{o({type:"close"})},handleComputeState:o,getSidebarState:()=>a(r)});var c=V(),u=B(c);ve(u,()=>e.children??ye),_(t,c),Q()}const es={};function bl(t){Ie(es,t)}function ts(){const t=Be(es);if(!t)throw new Error("No SelectedTagsContext found");return t}const ns=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function Sl(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const kl=(t,e)=>{if(t.size!==e.size)return!0;for(const n of t)if(!e.has(n))return!0;return!1};function Cl(t,e){J(e,!0);const{getAppLocation:n,replace:r}=Ot(),o=R(n),s=R(()=>a(o).searchParams),i="selectedTags",l=()=>new Set(n().searchParams.get(i)?.split(",")||[]);let c=z(Le(l()));const u=()=>{const p=l();if(kl(p,a(c))){const w=a(o).pathname;a(c).size===0?a(s).delete(i):a(s).set(i,Array.from(a(c)).join(",")),r(`${w}${a(s).size>0?`?${a(s).toString()}`:""}`)}};xe(()=>{a(s),a(c),gt(()=>{u()})}),bl({getSelectedTags:()=>a(c),addTag:p=>{a(c).has(p)||m(c,new Set([...a(c),p]),!0)},removeTag:p=>{const w=new Set(a(c));w.delete(p),m(c,w,!0)}});var g=V(),v=B(g);ve(v,()=>e.children??ye),_(t,g),Q()}const rs={};function El(t){Ie(rs,t)}function Ca(){const t=Be(rs);if(!t)throw new Error("No LocalDBContext found");return t}const as={};function Pl(t){Ie(as,t)}function xl(){const t=Be(as);if(!t)throw new Error("No SettingsContext found");return t}const os={};function Al(t){Ie(os,t)}function Gn(){const t=Be(os);if(!t)throw new Error("No BroadcastContext found");return t}const Dl="AppStorage",Tl=1,er="account",Er="settings",Et="notes",Pt="tags",Nl="syncLog",tn="success",nn="error",Fe=(t,e,n)=>{t?.addEventListener(e,n)},Ya=(t,e)=>new Promise((n,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();Fe(s,tn,()=>{const i=s?.result||[];n(i)}),Fe(s,nn,i=>{r(i)})}),ca=(t,e,n)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);Fe(i,tn,()=>{const l=i?.result?.data;r(l)}),Fe(i,nn,l=>{o(l)})}),ar=(t,e,n,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:r});Fe(c,tn,()=>{o()}),Fe(c,nn,u=>{s(u)})}),Zr=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{Fe(i,tn,()=>{l()}),Fe(i,nn,u=>{c(u)})})}))},Ll=(t,e,n)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);Fe(l,tn,()=>{r()}),Fe(l,nn,c=>{o(c)})}),yr=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{Fe(i,tn,()=>{l()}),Fe(i,nn,u=>{c(u)})})}))},sn=(t,e)=>new Promise((n,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();Fe(i,tn,()=>{n()}),Fe(i,nn,l=>{r(l)})});function Bl(t,e){J(e,!0);let n=z(Le({showFavicon:!1}));const{getDB:r}=Ca(),{createBroadcastChannel:o,tabId:s}=Gn(),i=o(),l=R(r),c=async()=>{const p=await ca(a(l),Er,"default");p&&m(n,p,!0)},u=async()=>{c()},d=async p=>{const w=JSON.parse(p.data),k=w;if(w.tabId&&w.tabId===s){k.type==="exit"&&(m(n,{showFavicon:!1},!0),sn(a(l),Er));return}k.type==="updateSettings"?c():k.type==="exit"&&m(n,{showFavicon:!1},!0)},f=()=>a(n).showFavicon,h=async p=>{a(n).showFavicon=p,await ar(a(l),Er,"default",{showFavicon:p}),i.postMessage({type:"updateSettings"})};Ee(()=>(u(),i.addEventListener(d),()=>{i.removeEventListener(d)})),Pl({getFaviconEnabled:f,setFaviconShown:h});var g=V(),v=B(g);ve(v,()=>e.children??ye),_(t,g),Q()}const ss={};function Il(t){Ie(ss,t)}function Ea(){const t=Be(ss);if(!t)throw new Error("No AccountContext found");return t}function Ml(t,e){J(e,!0);let n=z(void 0);const{getDB:r}=Ca(),{createBroadcastChannel:o,tabId:s}=Gn(),i=R(r),l=o(),c=async()=>{const y=await ca(a(i),er,"default");m(n,y,!0)},u=y=>ar(a(i),er,"default",y),d=async y=>{const T=await ca(a(i),er,"default");T!==void 0&&m(n,T,!0),y(T)},f=async y=>{const T=JSON.parse(y.data);if(T.tabId&&T.tabId===s)return;const L=T;L.type==="initLocalAccount"?m(n,null):L.type==="initCloudAccount"?c():L.type==="disconnectCloudAccount"?m(n,null):L.type==="exit"?m(n,void 0):L.type==="updateAccount"&&c()};Ee(()=>(l.addEventListener(f),()=>{l.removeEventListener(f)})),Il({init:d,getAccount:()=>a(n),initLocalAccount:async()=>{m(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async y=>{const T={encryptedClientKey:y.encryptedClientKey||"",subscriptionExpires:y.subscriptionExpires||-1,lastSync:-1};await u(T),m(n,T,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{m(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async y=>{if(!a(n))throw new Error("No account to update subscription for");const T={...a(n),subscriptionExpires:y};await u(T),l.postMessage({type:"updateAccount"})},exitApp:async()=>{m(n,void 0),l.postMessage({type:"exit"}),await sn(a(i),er)}});var k=V(),E=B(k);ve(E,()=>e.children??ye),_(t,k),Q()}const is={};function Ol(t){Ie(is,t)}function jr(){const t=Be(is);if(!t)throw new Error("No NotesContext found");return t}const Rl=()=>crypto.randomUUID(),Fl=t=>{const e=new Map;for(const n of t||[])for(const r of n?.data.tags||[])e.set(r,{name:r,count:(e.get(r)?.count||0)+1});return e};function zl(t,e){J(e,!0);const{getDB:n}=Ca(),{createBroadcastChannel:r,tabId:o}=Gn(),s=R(n),i=r(),l=720*60*60*1e3;let c=z(0),u=z(!1),d=z(()=>new Map),f=z(()=>[]),h=z(()=>new Map);const g=()=>a(u),v=()=>a(c)>0,p=()=>{a(c)>0&&m(c,a(c)-1)},w=A=>{const O=a(f)(),b=a(h)(),C={...A};O.push(C),b.set(C.id,C),m(f,()=>O),m(h,()=>b)},k=A=>{const O=a(f)(),b=a(h)(),C=b.get(A.id);C&&(C.data=A.data),m(f,()=>O),m(h,()=>b)},E=A=>{const O=a(f)(),b=a(h)(),C=b.get(A);b.has(A)&&b.delete(A),C?.data?.type==="draft"&&b.delete("draft"),C&&(C.data=void 0),m(f,()=>O),m(h,()=>b)},y=()=>{m(f,()=>[]),m(d,()=>new Map),m(h,()=>new Map)},T=()=>a(f),L=A=>{const O=a(d)();for(const b of A){const C=O.get(b);C?C.count++:O.set(b,{name:b,count:1})}m(d,()=>O)},P=A=>{const O=a(d)();for(const b of A){const C=O.get(b);C&&(C.count--,C.count<=0&&O.delete(b))}m(d,()=>O)},S=async()=>{const[A,O]=await Promise.all([Ya(a(s),Et),Ya(a(s),Pt).then(oe=>oe.reduce((Ae,ze)=>Ae.set(ze.name,ze),new Map))]),b=[],C=[],W=new Map;let ne=0;for(const oe of A)oe.data.deletedAt&&Date.now()-oe.data.deletedAt>l?b.push(oe.id):(C.push(oe),W.set(oe.id,oe),oe.data.deletedAt&&(ne+=1),oe.data.type==="draft"&&W.set("draft",oe));m(c,ne,!0);const ee=Fl(C),fe=new Map;ee.entries().forEach(([oe,Ae])=>{const ze=O.get(oe);fe.set(oe,{...ze,...Ae})}),await yr(a(s),Et,b),await sn(a(s),Pt),await Zr(a(s),Pt,Array.from(fe.values()).map(oe=>({id:oe.name,data:{pinned:oe.pinned}}))),m(f,()=>C),m(h,()=>W),m(d,()=>fe),m(u,!0)},x=async()=>{const A=a(h)(),O=A.get("draft");if(O)return O;const b={id:Rl(),data:{type:"draft",url:"",name:"",text:"",tags:[],draft:{url:"",name:"",text:"",tags:[],createdAt:Date.now(),updatedAt:Date.now()},createdAt:Date.now(),updatedAt:Date.now()}};return await ar(a(s),Et,b.id,{...b.data}),A.set("draft",b),w(b),i.postMessage({type:"createNoteDraft",data:{note:b}}),b},N=async A=>{const b=a(h)().get(A);if(!b||!b.data)return;const C=a(d)(),W=b.data.tags;P(W),E(A),i.postMessage({type:"deleteNote",data:{id:A}}),p(),await Ll(a(s),Et,A),await yr(a(s),Pt,W.filter(ne=>{const ee=C.get(ne);return ee?ee.count<=1:!1}))},G=async(A,O)=>{const b={id:O.id,data:{...O.data}},C=a(d)(),W=O.data.tags.filter(ee=>!A.data.tags.includes(ee)),ne=A.data.tags.filter(ee=>!O.data.tags.includes(ee));await ar(a(s),Et,b.id,{...b.data}),await Zr(a(s),Pt,W.filter(ee=>!C.has(ee)).map(ee=>({id:ee,data:{}}))),await yr(a(s),Pt,ne.filter(ee=>{const fe=C.get(ee);return fe?fe.count<=1:!1})),k(b),P(ne),L(W),i.postMessage({type:"updateNote",data:{note:b,tagsToAdd:W,tagsToDelete:ne}})},se=async A=>{const O=a(h)(),b=j(A);if(!b||!b.data)return;const C=O.get("draft");C&&C.id===b.id&&O.delete("draft");const W={id:A,data:{type:"note",name:b.data.draft?.name??b.data.name,url:b.data.draft?.url??b.data.url,text:b.data.draft?.text??b.data.text,tags:b.data.draft?.tags??b.data.tags,updatedAt:Date.now(),createdAt:b.data.createdAt,pinnedAt:b.data.pinnedAt,deletedAt:b.data.deletedAt,draft:void 0}};return G(b,W)},ae=async()=>{y(),i.postMessage({type:"clearNotes"}),await sn(a(s),Et),await sn(a(s),Pt)},j=A=>{const O=a(h)();return A?O.get(A):O.get("draft")},te=async(A,O)=>{const C=a(h)().get(A);if(!C||!C.data)return;const W={id:A,data:{...C.data,pinnedAt:O?Date.now():void 0}};return G(C,W)},$=async A=>{const b=a(h)().get(A);if(!b||!b.data)return;const C={id:A,data:{...b.data,deletedAt:Date.now()}};m(c,a(c)+1),await G(b,C)},he=async A=>{const b=a(h)().get(A);if(!b||!b.data)return;const C={id:A,data:{...b.data,deletedAt:0}};p(),await G(b,C)},me=async(A,O)=>{const b=a(d)();b.set(A,{name:A,count:b.get(A)?.count||0,pinned:O}),await ar(a(s),Pt,A,{pinned:O}),i.postMessage({type:"pinTag",data:{tag:A,pinned:O}}),m(d,()=>b)},X=async A=>{const O=a(h)(),b={};A.forEach(C=>{const W=O.get(C.id);(!W||W&&W.data&&W.data.updatedAt<C.data.updatedAt)&&(b[C.id]=C)}),await Zr(a(s),Et,Object.values(b)),await S(),i.postMessage({type:"reloadNotes"})},Y=async()=>{const A=[];a(f)().forEach(b=>{b&&b.data&&b.data.deletedAt&&A.push(b.id)}),m(c,0),await yr(a(s),Et,A),await S(),i.postMessage({type:"emptyBin"})},Z=async(A,O)=>{if(A===""){const ne=a(h)().get("draft");ne?A=ne.id:A=(await x()).id}const b=j(A);if(!b||!b.data)return;const C={id:A,data:{...b.data,draft:{...O,tags:O.tags,createdAt:b.data.draft?.createdAt||Date.now(),updatedAt:Date.now()}}};return await G(b,C),b.id},M=async A=>{const O=a(h)(),b=j(A);if(!b||!b.data||!b.data.draft)return;if(b.data.type==="draft"){A===O.get("draft")?.id&&O.delete("draft"),await N(A);return}const C={id:A,data:{...b.data,draft:void 0}};return G(b,C)},F=async A=>{const O=JSON.parse(A.data),b=O;if(O.tabId&&O.tabId===o){b.type==="exit"&&(y(),await sn(a(s),Et),await sn(a(s),Pt));return}if(b.type==="createNoteDraft"){const C=b.data.note;a(h)().set("draft",C),w(C)}else if(b.type==="updateNote"){const C=b.data,ne=a(h)().get(C.note.id);if(!ne||!ne.data)return;ne.data.deletedAt&&!C.note.data.deletedAt?p():!ne.data.deletedAt&&C.note.data.deletedAt&&m(c,a(c)+1),k(C.note),P(C.tagsToAdd),L(C.tagsToDelete)}else if(b.type==="deleteNote"){const C=b.data.id,ne=a(h)().get(C);if(!ne)return;p(),E(C),P(ne?.data?.tags||[])}else if(b.type==="pinTag"){const C=b.data.tag,W=b.data.pinned,ne=a(d)(),ee=ne.get(C);ee&&(ee.pinned=W,ne.set(C,ee))}else b.type==="clearNotes"?y():b.type==="reloadNotes"||b.type==="emptyBin"?S():b.type==="exit"&&y()};Ee(()=>(S(),i.addEventListener(F),()=>{i.removeEventListener(F)})),Ol({isInitedNotes:g,putNoteDraft:Z,deleteNoteDraft:M,deleteNote:N,pinNote:te,getGetNotes:T,importNotes:X,clearNotes:ae,getNoteById:j,getGetMapTags:()=>a(d),pinTag:me,moveNoteToBin:$,restoreNoteFromBin:he,checkNotesInBin:v,emptyBin:Y,saveNoteDraft:se,countNotesInBin:()=>a(c)});var de=V(),we=B(de);ve(we,()=>e.children??ye),_(t,de),Q()}const ls={},Hl=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function jl(t){Ie(ls,t)}function Xn(){const t=Be(ls);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Ul(t,e){J(e,!0);let n=Le(Hl());jl(n);var r=V(),o=B(r);ve(o,()=>e.children??ye),_(t,r),Q()}const cs={};function Vl(t){Ie(cs,t)}function us(){const t=Be(cs);if(!t)throw new Error("No ScrollingContext found");return t}function ql(t,e){J(e,!0);let n=z(!1);const r=()=>a(n),o=ns(()=>{m(n,!1)},100);Vl({isScrolling:r,enable:()=>{m(n,!0),o()}});var i=V(),l=B(i);ve(l,()=>e.children??ye),_(t,i),Q()}const ds={};function Wl(t){Ie(ds,t)}function Zn(){const t=Be(ds);if(!t)throw new Error("No MobileSizeContext found");return t}function Yl(t,e){J(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let r=z(Le(n())),o=Xn();const s=ns(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{m(r,n(),!0)})};Wl({checkMobileSize:()=>a(r)}),Ee(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=V(),u=B(c);ve(u,()=>e.children??ye),_(t,c),Q()}const fs={};function Kl(t){Ie(fs,t)}function Jn(){const t=Be(fs);if(!t)throw new Error("No DialogContext found");return t}function Gl(t,e){J(e,!0);let n=z(0),r=z(!1),o=z(!1);Kl({checkExistedDialog:()=>a(n)>0,showDialog:()=>{m(n,a(n)+1)},hideDialog:()=>{m(n,a(n)-1)},blockDialog:v=>{m(r,v,!0),v||m(o,!1)},checkBlockedDialog:()=>a(r),unBlockBackDialog:v=>{m(o,v,!0)},checkUnBlockedBackDialog:()=>a(o)});var h=V(),g=B(h);ve(g,()=>e.children??ye),_(t,h),Q()}const vs={};function Xl(t){Ie(vs,t)}function Pa(){const t=Be(vs);if(!t)throw new Error("No ScrollContainerContext found");return t}function Zl(t,e){J(e,!0);let n=z(null);Xl({setScrollContainer:l=>{m(n,l,!0)},getScrollContainer:()=>a(n)});var s=V(),i=B(s);ve(i,()=>e.children??ye),_(t,s),Q()}const hs={};function Jl(t){Ie(hs,t)}function xa(){const t=Be(hs);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Ql(t,e){J(e,!0);let n=z(200);Jl({setDialogPageHeight:l=>{m(n,l,!0)},getDialogPageHeight:()=>a(n)});var s=V(),i=B(s);ve(i,()=>e.children??ye),_(t,s),Q()}const $l=[er,Er,Et,Pt,Nl];function ec(){return new Promise((t,e)=>{const n=indexedDB.open(Dl,Tl);Fe(n,"upgradeneeded",()=>{const r=n.result;for(const o of $l)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),Fe(n,tn,()=>{const r=n.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),Fe(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),Fe(n,nn,()=>{e()})})}function tc(t,e){J(e,!0);let n=z(null);Ee(()=>{ec().then(l=>{m(n,l,!0)}).catch(l=>{})}),El({getDB:()=>a(n)});var o=V(),s=B(o);{var i=l=>{var c=V(),u=B(c);ve(u,()=>e.children??ye),_(l,c)};q(s,l=>{a(n)&&l(i)})}_(t,o),Q()}const gs={};function nc(t){Ie(gs,t)}function It(){const t=Be(gs);if(!t)throw new Error("No StackPagesContext found");return t}function rc(t,e){J(e,!0);const{createBroadcastChannel:n,tabId:r}=Gn(),o=n(),{getAppLocation:s,getAppHistoryStack:i,navigate:l,goBack:c,replace:u}=Ot(),d=R(s),f=R(()=>a(d).searchParams),h="stackPages",g=()=>a(f).get(h)?.split(",")||[];let v=z(Le([]));const p=()=>{const S=g();a(v).join(",")!==S.join(",")&&m(v,S,!0)};xe(()=>{a(f),gt(()=>{p()})});const w=S=>{if(!a(v).find(x=>{const[N]=x.split("?");return N===S})){const x=new URLSearchParams(a(d).search),N=a(d).pathname;x.set(h,[...a(v),S].join(",")),l(`${N}${x.size>0?`?${x.toString()}`:""}`)}},k=S=>a(v).find(x=>{const[N]=x.split("?");return N===S})!==void 0,E=()=>{const S=i(),x=S.findIndex(N=>N.searchParams.has(h));if(S.length<=1||x===-1){const N=new URLSearchParams(a(d).search);N.delete(h),u(`${a(d).pathname}${N.size>0?`?${N.toString()}`:""}`)}else if(x===0){c(S.length-x+1);const N=new URLSearchParams(a(d).search);N.delete(h),u(`${a(d).pathname}${N.size>0?`?${N.toString()}`:""}`)}else c(S.length-x)},y=(S,x)=>{if(x?.full)return`/${S}`;const N=a(v).slice();N.includes(S)||N.push(S);const G=new URLSearchParams(a(d).search);return G.set(h,N.join(",")),`${a(d).pathname}?${G}`},T=(S,x)=>N=>{if(N.preventDefault(),x?.full){l(S);return}w(S)};Ee(()=>{const S=x=>{const N=JSON.parse(x.data),G=N;if(N.tabId&&N.tabId===r){if(G.type==="navigateBack"&&a(v).length>0){const se=new URLSearchParams(a(d).search);a(v).length>1?se.set(h,a(v).slice(0,-1).join(",")):se.delete(h),u(`${a(d).pathname}${se.size>0?`?${se.toString()}`:""}`)}return}};return o.addEventListener(S),()=>{o.removeEventListener(S)}}),nc({getStackPages:()=>a(v),pushStackPages:w,hasStackPage:k,clearStackPages:E,getPageUrl:y,createHandlePage:T,getStackPagesFormUrl:g});var L=V(),P=B(L);ve(P,()=>e.children??ye),_(t,L),Q()}function ac(t,e){J(e,!0);const{createBroadcastChannel:n}=Gn(),r=n(),o=p=>p.startsWith("/")?p:`/${p}`,s=p=>{const[w,k]=p.split("?");return{href:o(p),pathname:o(w),search:k?`?${k}`:"",searchParams:new URLSearchParams(k)}};let i=z(Le([{href:`${o(window.location.pathname)}${window.location.search}`,pathname:o(window.location.pathname),search:window.location.search,searchParams:new URLSearchParams(window.location.search)}]));const l=p=>{a(i).push(s(p)),window.history.replaceState(null,"",p)},c=p=>{a(i)[a(i).length-1]=s(p),window.history.replaceState(null,"",p)};vl({getAppLocation:()=>a(i)[a(i).length-1],getAppHistoryStack:()=>a(i),navigate:l,replace:c,addSearchParam:(p,w)=>{const k=a(i)[a(i).length-1],E=k.searchParams;E.set(p,w),c(`${k.pathname}${E.size>0?`?${E.toString()}`:""}`)},deleteSearchParam:p=>{const w=a(i)[a(i).length-1],k=w.searchParams;k.delete(p),c(`${w.pathname}${k.size>0?`?${k.toString()}`:""}`)},back:p=>{const{to:w}=p||{};if(a(i).length>1){if(w){const E=a(i).findIndex(y=>y.href===w);if(E!==-1){m(i,a(i).slice(0,E+1),!0);const y=a(i)[a(i).length-1];window.history.replaceState(null,"",y.href)}else c(w);return}a(i).pop();const k=a(i)[a(i).length-1];window.history.replaceState(null,"",k.href)}else w?c(w):r.postMessage({type:"navigateBack"})},goBack:p=>{if(a(i).length>=p){m(i,a(i).slice(0,-p),!0);const w=a(i)[a(i).length-1];window.history.replaceState(null,"",w.href)}}});var g=V(),v=B(g);ve(v,()=>e.children??ye),_(t,g),Q()}const ps={};function oc(t){Ie(ps,t)}function sc(){const t=Be(ps);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function ic(t,e){J(e,!0);let n=Le({value:!1});const r=()=>n.value;Ee(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),oc({getIsKeyboardVisible:r});var o=V(),s=B(o);ve(s,()=>e.children??ye),_(t,o),Q()}function lc(t,e){J(e,!0);const n=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};Al({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=V(),s=B(o);ve(s,()=>e.children??ye),_(t,o),Q()}function cc(t,e){tc(t,{children:(n,r)=>{lc(n,{children:(o,s)=>{Ul(o,{children:(i,l)=>{ql(i,{children:(c,u)=>{Yl(c,{children:(d,f)=>{Gl(d,{children:(h,g)=>{Zl(h,{children:(v,p)=>{Ql(v,{children:(w,k)=>{ic(w,{children:(E,y)=>{ac(E,{children:(T,L)=>{rc(T,{children:(P,S)=>{var x=V(),N=B(x);ve(N,()=>e.children??ye),_(P,x)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function uc(t,e){cc(t,{children:(n,r)=>{pl(n,{children:(o,s)=>{hl(o,{children:(i,l)=>{ml(i,{children:(c,u)=>{yl(c,{children:(d,f)=>{Cl(d,{children:(h,g)=>{Bl(h,{children:(v,p)=>{Ml(v,{children:(w,k)=>{zl(w,{children:(E,y)=>{var T=V(),L=B(T);ve(L,()=>e.children??ye),_(E,T)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let Wt=z(""),an=z(null),tr=z(null),nr=z(null);function _n(t,e){m(Wt,""),setTimeout(()=>{m(Wt,t,!0),e?.onFinish&&m(tr,e.onFinish,!0),e?.onCancel&&m(nr,e.onCancel,!0)},16)}const dc=(t,e,n,r,o)=>{t.preventDefault(),a(e)&&(m(n,null),a(e)(),m(e,null)),m(r,""),a(o)?.style.removeProperty("opacity")};var fc=U('<button type="button" class="undoButton svelte-1vxmgq5">undo</button>'),vc=U('<div class="notification svelte-1vxmgq5"><span> </span> <!></div>'),hc=U("<div><!></div>");function gc(t,e){J(e,!0),xe(()=>{a(Wt);const s=a(nr)?2e3:800;a(Wt)&&(a(an)?.getBoundingClientRect(),a(an)?.style.setProperty("opacity","1"));const i=setTimeout(()=>{a(an)?.style.removeProperty("opacity")},s),l=setTimeout(()=>{m(Wt,""),a(tr)&&a(tr)(),m(tr,null),m(nr,null),a(an)?.style.removeProperty("opacity")},s+400);return()=>{clearTimeout(i),clearTimeout(l)}});var n=hc(),r=D(n);{var o=s=>{var i=vc(),l=D(i),c=D(l),u=H(l,2);{var d=f=>{var h=fc();h.__click=[dc,nr,tr,Wt,an],_(f,h)};q(u,f=>{a(nr)&&f(d)})}Bt(i,f=>m(an,f),()=>a(an)),ce(()=>Jt(c,a(Wt))),_(s,i)};q(r,s=>{a(Wt)&&s(o)})}_(t,n),Q()}st(["click"]);var pc=U('<span class="vh svelte-s92gzo"><!></span>');function tt(t,e){var n=pc(),r=D(n);ve(r,()=>e.children),_(t,n)}var _c=Zi('<svg class="svelte-18et5h9"><use></use></svg>');function ke(t,e){let n=ie(e,"name",8,"");var r=_c(),o=D(r);ce(()=>De(o,"href",`#icon-${n()??""}`)),_(t,r)}const mc=(t,e,n,r,o)=>{if(a(e))return;const s=n().type;s==="closed"?r():s==="opened"&&o()};var wc=U('<button class="buttonMenu svelte-bpktnw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function _s(t,e){J(e,!0);const{sidebarOpen:n,getSidebarState:r,sidebarClose:o}=ka(),{getStackPagesFormUrl:s}=It(),{checkExistedDialog:i}=Jn();let l=R(()=>s().length>0||i());var c=wc();c.__click=[mc,l,r,n,o];var u=D(c);be(u,()=>({"--size":"36px"})),ke(u.lastChild,{name:"sidebarMenu"});var d=H(u,2);tt(d,{children:(f,h)=>{var g=Te("Menu");_(f,g)}}),_(t,c),Q()}st(["click"]);var yc=(t,e)=>e.onChange?.(t.target?.value||""),bc=U('<input class="svelte-15lr19w"/>');function ua(t,e){J(e,!0);let n=ie(e,"value",15,"");var r=bc();r.__input=[yc,e],ce(()=>De(r,"placeholder",e.placeholder)),ba("focus",r,function(...o){e.onFocus?.apply(this,o)}),ll(r,n),_(t,r),Q()}st(["input"]);function ms(t,e){J(e,!0),Ee(()=>{const n=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),Q()}var Sc=U('<dialog><div class="dialogInner svelte-1x410nl"><!></div></dialog> <!>',1);function Aa(t,e){J(e,!0);let n=z(null),r=z(null),o=z(!1),{showDialog:s,hideDialog:i}=Jn();const l=v=>{v?.preventDefault();const p=setTimeout(()=>{e.onClosed()},150);a(n)?.addEventListener("transitionend",()=>{clearTimeout(p),e.onClosed()},{once:!0}),m(o,!1)};xe(()=>{e.startClose&&l()}),Ee(()=>(a(n)?.showModal(),a(n)?.getClientRects(),m(o,!0),a(n)?.addEventListener("cancel",l),a(n)?.addEventListener("close",l),()=>{a(n)?.removeEventListener("cancel",l),a(n)?.removeEventListener("close",l)})),Ee(()=>(s(),()=>{i()}));var c=Sc(),u=B(c),d=D(u),f=D(d);ve(f,()=>e.children),Bt(d,v=>m(r,v),()=>a(r)),Bt(u,v=>m(n,v),()=>a(n));var h=H(u,2);{var g=v=>{ms(v,{get dialog(){return a(n)},get dialogInner(){return a(r)},onClose:l})};q(h,v=>{a(n)&&a(r)&&v(g)})}ce(()=>_e(u,1,pe(["dialog",{shown:a(o)}]),"svelte-1x410nl")),_(t,c),Q()}var kc=U("<div><!></div>");function ws(t,e){J(e,!0);let n=z(!1),r=z(null);const o=()=>{const u=setTimeout(()=>{e.onClosed()},150);a(r)?.addEventListener("transitionend",()=>{clearTimeout(u),e.onClosed()},{once:!0}),m(n,!1)},s=u=>{u.target!==a(r)&&!a(r)?.contains(u.target)&&o()},i=u=>{u.target!==a(r)&&!a(r)?.contains(u.target)&&o()};Ee(()=>{a(r)?.getClientRects(),m(n,!0);const u=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i)},0);return()=>{clearTimeout(u),document.removeEventListener("focusin",s),document.removeEventListener("click",i)}}),xe(()=>{e.startClose&&o()});var l=kc(),c=D(l);ve(c,()=>e.children),Bt(l,u=>m(r,u),()=>a(r)),ce(()=>_e(l,1,pe(["menu",{top:e.positionTop,shown:a(n)}]),"svelte-ujw4xi")),_(t,l),Q()}const Cc=(t,e)=>{a(e)||m(e,!0)};var Ec=(t,e)=>e("newest"),Pc=(t,e)=>e("oldest"),xc=(t,e)=>e("AtoZ"),Ac=(t,e)=>e("ZtoA"),Dc=U("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),Tc=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Nc=U('<div class="orderMenu svelte-14zj87s"><button><!> <!></button> <!></div>');function Lc(t,e){J(e,!0);const n=(E,y=ye)=>{var T=Dc(),L=D(T);L.__click=[Ec,d];var P=H(L,2);P.__click=[Pc,d];var S=H(P,2);S.__click=[xc,d];var x=H(S,2);x.__click=[Ac,d],ce(()=>{_e(T,1,pe(["menu",{menuDialog:y()}]),"svelte-14zj87s"),_e(L,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="newest"}]),"svelte-14zj87s"),_e(P,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="oldest"}]),"svelte-14zj87s"),_e(S,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="AtoZ"}]),"svelte-14zj87s"),_e(x,1,pe(["menuButton",{menuButtonDialog:y(),current:a(u)==="ZtoA"}]),"svelte-14zj87s")}),_(E,T)};let r=z(!1),o=z(!1);const{checkMobileSize:s}=Zn(),{getFeedOrder:i,setFeedOrder:l}=Qo();let c=R(s),u=R(i);const d=E=>{m(o,!0),l(E)},f=()=>{m(r,!1),m(o,!1)};Ee(()=>{const E=y=>{y.key==="Escape"&&m(o,!0)};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)});var h=Nc(),g=D(h);g.__click=[Cc,r],_e(g,1,pe(["button","buttonMenu"]),"svelte-14zj87s");var v=D(g);ke(v,{name:"filter"});var p=H(v,2);tt(p,{children:(E,y)=>{var T=Te("show feed order menu");_(E,T)}});var w=H(g,2);{var k=E=>{var y=V(),T=B(y);{var L=S=>{Aa(S,{get startClose(){return a(o)},onClosed:f,children:(x,N)=>{n(x,()=>!0)},$$slots:{default:!0}})},P=S=>{var x=Tc(),N=B(x);be(N,()=>({"--right":"20px","--top":"60px"})),ws(N.lastChild,{get startClose(){return a(o)},onClosed:f,children:(G,se)=>{n(G,()=>!1)},$$slots:{default:!0}}),_(S,x)};q(T,S=>{a(c)?S(L):S(P,!1)})}_(E,y)};q(w,E=>{a(r)&&E(k)})}_(t,h),Q()}st(["click"]);var K=(t=>(t.NewNote="newNote",t.EditNote="editNote",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.Start="start",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t))(K||{}),Bc=U("<a><!></a>"),Ic=U("<button><!></button>");function Ht(t,e){let n=ie(e,"type",3,"standard"),r=ie(e,"typeButton",3,"button"),o=ie(e,"element",3,"button"),s=ie(e,"href",3,""),i=ie(e,"fullWidth",3,!1),l=ie(e,"withoutMinWidth",3,!1);var c=V(),u=B(c);{var d=h=>{var g=Bc();g.__click=function(...p){e.onClick?.apply(this,p)};var v=D(g);ve(v,()=>e.children??ye),ce(()=>{De(g,"href",s()),_e(g,1,pe(["button","a",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(h,g)},f=h=>{var g=Ic();g.__click=function(...p){e.onClick?.apply(this,p)};var v=D(g);ve(v,()=>e.children??ye),ce(()=>{De(g,"type",r()),_e(g,1,pe(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(h,g)};q(u,h=>{o()==="a"?h(d):h(f,!1)})}_(t,c)}st(["click"]);var Mc=U('<div class="block svelte-1dzbsx4"><span class="title svelte-1dzbsx4"> </span> <div class="controls svelte-1dzbsx4"><!> <!></div></div>');function ys(t,e){J(e,!0);let n=ie(e,"buttonCancelTitle",3,"Cancel"),r=ie(e,"buttonConfirmTitle",3,"Confirm"),o=z(!1),s=z(!1);const i=()=>{m(o,!0)},l=()=>{m(o,!0),m(s,!0)};Aa(t,{get startClose(){return a(o)},onClosed:()=>{a(s)?e.onConfirm():e.onCancel()},children:(u,d)=>{var f=Mc(),h=D(f),g=D(h),v=H(h,2),p=D(v);Ht(p,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(k,E)=>{var y=Te();ce(()=>Jt(y,n())),_(k,y)},$$slots:{default:!0}});var w=H(p,2);Ht(w,{onClick:l,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(k,E)=>{var y=Te();ce(()=>Jt(y,r())),_(k,y)},$$slots:{default:!0}}),ce(()=>Jt(g,e.title)),_(u,f)},$$slots:{default:!0}}),Q()}const Oc=(t,e)=>{m(e,!0)};var Rc=(t,e)=>{e("/",{full:!0})(t)},Fc=U('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),zc=(t,e)=>{e(K.Bin,{full:!0})(t)},Hc=U('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),jc=U('<button class="emptyBinButton svelte-13t3afu" type="button">Empty bin</button>'),Uc=U('<a class="buttonAdd svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></a>'),Vc=U('<div class="header svelte-13t3afu"><div class="top svelte-13t3afu"><div class="menu svelte-13t3afu"><a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="mobile svelte-13t3afu"><!></div> <!></div> <div class="bottom svelte-13t3afu"><div><div class="sidebarSearchWrapper"><!></div></div> <div class="right svelte-13t3afu"><div class="filter svelte-13t3afu"><div class="feedSearchWrapper svelte-13t3afu"><!></div> <!></div></div></div></div> <!>',1);function qc(t,e){J(e,!0);const{createHandlePage:n,getPageUrl:r}=It(),o=Ko(),s=Zo(),{getScrollContainer:i}=Pa();let l=R(i);const{emptyBin:c,checkNotesInBin:u}=jr(),{getAppLocation:d}=Ot(),f=R(u),h=R(()=>d().pathname);let g=z(!1);const v=()=>{a(l)&&a(l).scrollTo({top:0,behavior:"smooth"})};var p=Vc(),w=B(p),k=D(w),E=D(k),y=D(E),T=R(()=>n(K.Settings));y.__click=function(...C){a(T)?.apply(this,C)};var L=D(y);be(L,()=>({"--rotate":"30deg","--size":"20px"})),ke(L.lastChild,{name:"settings"});var P=H(y,2),S=R(()=>n(K.Sync));P.__click=function(...C){a(S)?.apply(this,C)};var x=D(P);be(x,()=>({"--size":"20px"})),ke(x.lastChild,{name:"sync"});var N=H(P,2);{var G=C=>{var W=Fc();W.__click=[Rc,n];var ne=D(W);be(ne,()=>({"--size":"18px"})),ke(ne.lastChild,{name:"note"}),ce(ee=>De(W,"href",ee),[()=>r("/",{full:!0})]),_(C,W)},se=C=>{var W=V(),ne=B(W);{var ee=fe=>{var oe=Hc();oe.__click=[zc,n];var Ae=D(oe);be(Ae,()=>({"--size":"20px"})),ke(Ae.lastChild,{name:"bin"}),ce(ze=>De(oe,"href",ze),[()=>r(K.Bin,{full:!0})]),_(fe,oe)};q(ne,fe=>{a(f)&&fe(ee)},!0)}_(C,W)};q(N,C=>{a(h)===`/${K.Bin}`?C(G):C(se,!1)})}var ae=H(E,2),j=D(ae);_s(j,{});var te=H(ae,2);{var $=C=>{var W=V(),ne=B(W);{var ee=fe=>{var oe=jc();oe.__click=[Oc,g],_(fe,oe)};q(ne,fe=>{a(f)&&fe(ee)})}_(C,W)},he=C=>{var W=Uc(),ne=R(()=>n(K.NewNote));W.__click=function(...fe){a(ne)?.apply(this,fe)};var ee=D(W);be(ee,()=>({"--size":"16px","--color":"#b0b0b0"})),ke(ee.lastChild,{name:"plus"}),ce(fe=>De(W,"href",fe),[()=>r(K.NewNote)]),_(C,W)};q(te,C=>{a(h)===`/${K.Bin}`?C($):C(he,!1)})}var me=H(k,2),X=D(me);_e(X,1,pe(["left"]),"svelte-13t3afu");var Y=D(X),Z=D(Y);ua(Z,{placeholder:"Search tag",get value(){return s.value},set value(C){s.value=C}});var M=H(X,2),F=D(M),de=D(F),we=D(de);ua(we,{onFocus:v,placeholder:"Search",get value(){return o.value},set value(C){o.value=C}});var A=H(de,2);Lc(A,{});var O=H(w,2);{var b=C=>{ys(C,{title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:()=>{c(),m(g,!1)},onCancel:()=>{m(g,!1)}})};q(O,C=>{a(g)&&C(b)})}ce((C,W)=>{De(y,"href",C),De(P,"href",W)},[()=>r(K.Settings),()=>r(K.Sync)]),_(t,p),Q()}st(["click"]);function Wc(t,e){J(e,!0);const{getIsKeyboardVisible:n}=sc();let r=ie(e,"dialog",7);const o=R(n),s=Xn();let i=null;const l=()=>{e.dialogState==="swiping"&&e.onClose()};xe(()=>(e.dialogState==="swiping"&&(i=setTimeout(l,3e3)),()=>{i&&(clearTimeout(i),i=null)}));let c=null,u=null;const d=3,f=50,h=5,g=.6,v=.3,p=.35,w=.95;let k=0,E=0,y=0,T=!1,L=!1,P=0,S=0,x=0;const N=()=>{k=0,E=0,T=!1,L=!1,P=0,S=0,x=0,y=0,c=null,u!==null&&(cancelAnimationFrame(u),u=null),i&&(clearTimeout(i),i=null)},G=Y=>{r()&&e.dialogState==="opened"&&(k=Y.touches[0].clientX,E=Y.touches[0].clientY,y=performance.now(),T=!0,L=!1)},se=Y=>e.dialogState==="opened"&&Y>0||e.dialogState==="swiping"&&Y>0,ae=()=>{if(r()){r().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const Y=window.getComputedStyle(r()),Z=Y.transform||Y.webkitTransform||"";if(S=r().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(P=0),Z&&Z!=="none")try{P=new DOMMatrix(Z).m41}catch{}L=!0}catch{N()}}},j=()=>{if(!r())return;const Z=Math.abs(P+x*S/100)/S;r().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-Z)})`)},te=()=>{if(u=null,!c||!T||!r()||a(o)){N();return}const Y=[...c.touches].reduce((C,W)=>C+W.clientX,0)/c.touches.length,Z=[...c.touches].reduce((C,W)=>C+W.clientY,0)/c.touches.length,M=Y-k,F=Z-E,de=Math.abs(M)>Math.abs(F),we=Math.abs(M)>d;if(!L)if(de&&we&&se(M))try{ae()}catch{N();return}else return;let A=P+M*w;A=Math.max(0,Math.min(S,A)),!(A<0)&&(r().style.setProperty("--transition-timing","0s"),r().style.transform=`translate3d(${A}px, 0, 0)`,s.swipingRatio=Math.abs(1-A/S),x=(A-P)/S*100,e.dialogState==="swiping"&&(i&&clearTimeout(i),i=setTimeout(l,3e3)),j())},$=Y=>{if(!T)return;c=Y,u===null&&(u=requestAnimationFrame(te));const Z=Y.touches[0].clientX-k,M=Y.touches[0].clientY-E,F=Math.abs(Z)>Math.abs(M);L&&F&&Y.preventDefault()},he=Y=>{const Z=Math.abs(Y);if(Z>=g)return h;if(Z>=v){const M=(Z-v)/(g-v);return f-M*(f-h)}else return f},me=(Y,Z)=>{if(Math.abs(Y)>=g)return p*.5;const F=Math.abs(x)/100;return Z?p*Math.max(.5,1-F):p*Math.max(.5,F)},X=Y=>{if(u!==null&&(cancelAnimationFrame(u),u=null),!T||!r()){N();return}if(!L){N();return}let Z=0;if(Y?.changedTouches?.[0]){const A=Y.changedTouches[0].clientX,b=performance.now()-y;b>0&&(Z=(A-k)/b)}const M=he(Z);let F=null;e.dialogState==="swiping"&&(F=Math.abs(x)>M||Z<-v?"close":"open");const de=e.dialogState==="swiping"&&F==="close",we=me(Z,de);s.duration=we-.02,r().style.setProperty("--transition-timing",`${we}s`),r().offsetWidth,r().style.transform="",F==="open"?e.onOpen():F==="close"&&e.onClose(),r()?.style.removeProperty("--backdrop-bg"),N()};Ee(()=>(r().addEventListener("touchstart",G,{passive:!0}),r().addEventListener("touchmove",$,{passive:!1}),r().addEventListener("touchend",X,{passive:!0}),r().addEventListener("touchcancel",X,{passive:!0}),()=>{r().removeEventListener("touchstart",G),r().removeEventListener("touchmove",$),r().removeEventListener("touchend",X),r().removeEventListener("touchcancel",X),u!==null&&cancelAnimationFrame(u)})),Q()}var Yc=(t,e)=>{e.onStartClose()},Kc=U('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Gc=U('<dialog><div class="dialogInner svelte-vr2o0t"><div class="header svelte-vr2o0t"><div><!></div></div> <!></div></dialog> <!>',1);function Xc(t,e){J(e,!0);let n=350;const{isScrolling:r,enable:o}=us();let s=z(null),i=z(null);const l=Xn(),c=P=>{P.preventDefault(),e.onStartClose()};Ee(()=>(a(s)?.addEventListener("close",e.onClosed),a(s)?.addEventListener("cancel",c),()=>{a(s)?.removeEventListener("close",e.onClosed),a(s)?.removeEventListener("cancel",c)}));const u=()=>{a(s)?.style.removeProperty("--transition-timing"),a(s)?.style.removeProperty("transform"),a(s)?.style.removeProperty("--backdrop-bg")},d=()=>{o()},f=R(r);xe(()=>{if(e.dialogState,!!a(s))switch(e.dialogState){case"opening":{a(s).open||a(s).showModal(),a(s).getBoundingClientRect();const P=setTimeout(()=>{u()},n+1),S=()=>{clearTimeout(P),u()};return a(s)?.addEventListener("transitionend",S,{once:!0}),e.onOpened(),()=>{clearTimeout(P),a(s)?.removeEventListener("transitionend",S)}}case"closing":{const P=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),S=()=>{clearTimeout(P),e.onClosed()};return a(s)?.addEventListener("transitionend",S,{once:!0}),()=>{clearTimeout(P),a(s)?.removeEventListener("transitionend",S)}}case"opened":u()}});var h=Gc(),g=B(h),v=D(g),p=D(v),w=D(p),k=D(w);{var E=P=>{var S=Kc();_e(S,1,pe(["navigateButton","buttonBack"]),"svelte-vr2o0t"),S.__click=[Yc,e];var x=D(S);be(x,()=>({"--size":"36px"})),ke(x.lastChild,{name:"back"});var N=H(x,2);tt(N,{children:(G,se)=>{var ae=Te("back");_(G,ae)}}),_(P,S)};q(k,P=>{(!(e.blocked||e.hidden)||e.blocked&&e.unBlockedBack)&&P(E)})}var y=H(p,2);ve(y,()=>e.children),Bt(v,P=>m(i,P),()=>a(i)),Bt(g,P=>m(s,P),()=>a(s));var T=H(g,2);{var L=P=>{Wc(P,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return a(s)}})};q(T,P=>{(!a(f)&&e.dialogState==="opened"||e.dialogState==="swiping")&&(!e.blocked||e.unBlockedBack)&&P(L)})}ce(()=>_e(g,1,pe([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:l.working&&(!l.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-vr2o0t")),ba("scroll",v,d),_(t,h),Q()}st(["click"]);const Ka=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function Zc(t,e){J(e,!0);let n=ie(e,"blocked",3,!1),r=ie(e,"hiddenDialog",3,!1),o=ie(e,"unBlockedBack",3,!1),s=ie(e,"onStartClose",3,()=>{}),i=ie(e,"onClose",3,()=>{});const l=Xn();let c=z(Le(Ka({type:"closed"})));const u=y=>{m(c,Ka(a(c),y),!0)},d=()=>{n()&&!o()||(s()(),u({type:"close"}))},f=()=>{u({type:"open"})},h=()=>{u({type:"opened"}),l.swipingRatio=1,l.duration=.2},g=()=>{i()(),u({type:"closed"}),l.swipingRatio=1,l.duration=.2},v=()=>{u({type:"swipe"})};xe(()=>{a(c).type==="swiping"?l.isSwiping=!0:l.isSwiping=!1,a(c).type==="closed"&&e.shownDialog?f():a(c).type==="opened"&&!e.shownDialog&&d()});var p={handleComputeState:u},w=V(),k=B(w);{var E=y=>{Xc(y,{onSwipe:v,onOpened:h,onClosed:g,onStartClose:d,onStartOpen:f,get dialogState(){return a(c).type},get hidden(){return r()},get blocked(){return n()},get unBlockedBack(){return o()},children:(T,L)=>{var P=V(),S=B(P);ve(S,()=>e.children),_(T,P)},$$slots:{default:!0}})};q(k,y=>{a(c).type!=="closed"&&y(E)})}return _(t,w),Q(p)}const Jc=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const o=i=>{i.preventDefault(),n()},s=()=>{r?.()};Ee(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Ee(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Qc=(t,e)=>{e.onStartBack()},$c=U('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),eu=(t,e)=>{e.onStartClose()},tu=U('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),nu=U('<dialog><div class="dialogInner svelte-rt409n"><div class="header svelte-rt409n"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function ru(t,e){J(e,!0);let n=ie(e,"blockedDialog",3,!1),r=ie(e,"hiddenDialog",3,!1),o=ie(e,"isDesktopAnimationOff",3,!1),s=z(null),i=z(null);Jc({getDialog:()=>a(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const l=Xn();xe(()=>{e.stateDialog==="closing"&&(l.working?a(s)?.addEventListener("transitionend",()=>{a(s)?.close()},{once:!0}):a(s)?.close())});const{getDialogPageHeight:c}=xa(),u=R(c);var d=nu(),f=B(d),h=D(f),g=D(h),v=D(g),p=D(v);{var w=P=>{var S=$c();_e(S,1,pe(["navigateButton","buttonBack"]),"svelte-rt409n"),S.__click=[Qc,e];var x=D(S);be(x,()=>({"--size":"28px"})),ke(x.lastChild,{name:"back"});var N=H(x,2);tt(N,{children:(G,se)=>{var ae=Te("back");_(G,ae)}}),_(P,S)};q(p,P=>{(!(n()||r())||n()&&e.unBlockedBack)&&e.onStartBack&&P(w)})}var k=H(v,2),E=D(k);{var y=P=>{var S=tu();_e(S,1,pe(["navigateButton","buttonClose"]),"svelte-rt409n"),S.__click=[eu,e];var x=D(S);be(x,()=>({"--size":"28px"})),ke(x.lastChild,{name:"close"});var N=H(x,2);tt(N,{children:(G,se)=>{var ae=Te("close");_(G,ae)}}),_(P,S)};q(E,P=>{n()||r()||P(y)})}var T=H(g,2);ve(T,()=>e.children),Bt(h,P=>m(i,P),()=>a(i)),Bt(f,P=>m(s,P),()=>a(s));var L=H(f,2);ms(L,{get dialog(){return a(s)},get dialogInner(){return a(i)},get onClose(){return e.onStartClose}}),ce(()=>{jn(f,`height: ${a(u)+74}px`),_e(f,1,pe([{open:e.stateDialog==="open",isAnimationOn:l.working,isDesktopAnimationOff:o(),hiddenDialog:r()}]),"svelte-rt409n")}),_(t,d),Q()}st(["click"]);const au=({onStartClose:t,onClose:e})=>{let n=z("close");return{get state(){return a(n)},set state(i){m(n,i,!0)},handleStartClose:(i=!1)=>{i||(m(n,"closing"),t?.())},handleOpen:()=>{m(n,"open")},handleClose:()=>{m(n,"close"),e?.()}}};function ou(t,e){J(e,!0);let n=ie(e,"blockedDialog",3,!1),r=ie(e,"hiddenDialog",3,!1),o=ie(e,"onStartClose",3,()=>{}),s=ie(e,"onClose",3,()=>{}),i=au({onStartClose:o(),onClose:s()});xe(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=f=>{f.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||n())&&(f.preventDefault(),f.stopPropagation())};Ee(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=V(),u=B(c);{var d=f=>{ru(f,{get stateDialog(){return i.state},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(h,g)=>{var v=V(),p=B(v);ve(p,()=>e.children),_(h,v)},$$slots:{default:!0}})};q(u,f=>{i.state!=="close"&&f(d)})}_(t,c),Q()}function su(t,e){J(e,!0);let n=ie(e,"blockedDialog",3,!1),r=ie(e,"hiddenDialog",3,!1),o=ie(e,"isLastDialog",3,!1),s=ie(e,"onStartClose",3,()=>{}),i=ie(e,"onClose",3,()=>{});const l=R(()=>o()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=Jn();Ee(()=>(c(),()=>{u()}));const{checkMobileSize:d}=Zn();var f=V(),h=B(f);{var g=p=>{Zc(p,{get shownDialog(){return e.shownDialog},get blocked(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return e.onStartBack},get onClose(){return i()}})},v=p=>{ou(p,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return a(l)},get onStartClose(){return s()},get onClose(){return i()}})};q(h,p=>{d()?p(g):p(v,!1)})}_(t,f),Q()}function Ga(t,e){J(e,!0);const{back:n}=Ot(),{clearStackPages:r}=It();let o=ie(e,"blocked",3,!1),s=ie(e,"isLastDialog",3,!1),i=ie(e,"onBack",3,()=>{}),l=ie(e,"onClosed",3,()=>{});const{checkBlockedDialog:c,checkUnBlockedBackDialog:u}=Jn(),d=R(()=>o()||e.hidden||c()),f=R(()=>u()&&!s()),h=()=>{(!a(d)||a(d)&&a(f))&&e.shown&&(n(),i()())},g=()=>{((!a(d)||a(d)&&a(f))&&e.shown||!e.shown)&&r()},v=()=>{l()()};{let p=R(()=>a(d)&&e.shown);su(t,{get shownDialog(){return e.shown},get blockedDialog(){return a(p)},get unBlockedBack(){return a(f)},get hiddenDialog(){return e.hidden},get isLastDialog(){return s()},onStartBack:h,onStartClose:g,onClose:v,children:(w,k)=>{var E=V(),y=B(E);ve(y,()=>e.children),_(w,E)},$$slots:{default:!0}})}Q()}var iu=U('<h1 class="svelte-1ky72l5"><!></h1>');function lu(t,e){var n=iu(),r=D(n);ve(r,()=>e.children),_(t,n)}var cu=U('<div class="block svelte-ujk4k"><!> <div class="container svelte-ujk4k"><!> <!></div></div>');function uu(t,e){J(e,!0);const{blockDialog:n}=Jn(),{pushStackPages:r,clearStackPages:o}=It(),{initLocalAccount:s}=Ea();let i=z("idle");const l=()=>{m(i,"loading"),r(K.Auth)},c=async()=>{m(i,"loading"),Sl(),await s(),n(!1),o()};xe(()=>{n(a(i)==="idle"||a(i)==="loading")}),Ee(()=>(n(!0),()=>{n(!1)}));var u=cu(),d=D(u);lu(d,{children:(v,p)=>{var w=Te("use app");_(v,w)}});var f=H(d,2),h=D(f);Ht(h,{onClick:l,fullWidth:!0,children:(v,p)=>{var w=Te("cloud account");_(v,w)},$$slots:{default:!0}});var g=H(h,2);Ht(g,{onClick:c,fullWidth:!0,type:"secondary",children:(v,p)=>{var w=Te("without account");_(v,w)},$$slots:{default:!0}}),_(t,u),Q()}var du=U('<div class="svelte-1x9a4ve"><!></div>');function Re(t,e){J(e,!0);const{setDialogPageHeight:n}=xa();let r=z(null);Ee(()=>{a(r)&&(a(r).getBoundingClientRect(),a(r).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(a(r))return i.observe(a(r)),()=>{a(r)&&i.unobserve(a(r)),i.disconnect()}});var o=du(),s=D(o);ve(s,()=>e.children),Bt(o,i=>m(r,i),()=>a(r)),_(t,o),Q()}var fu=U('<div class="svelte-stjbkr"><p class="svelte-stjbkr">Page not found</p> <!></div>');function vu(t,e){J(e,!1);const{navigate:n}=Ot(),r=i=>{i.preventDefault(),n("/")};Wo();var o=fu(),s=H(D(o),2);Ht(s,{element:"a",href:"/",onClick:r,children:(i,l)=>{var c=Te("close");_(i,c)},$$slots:{default:!0}}),_(t,o),Q()}const hu="modulepreload",gu=function(t){return"/"+t},Xa={},He=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(n.map(u=>{if(u=gu(u),u in Xa)return;Xa[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":hu,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((g,v)=>{h.addEventListener("load",g),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var pu=U('<div class="svelte-10xfz1h"><p class="svelte-10xfz1h">Something went wrong. Please reload the page</p> <!></div>');function _u(t){var e=pu(),n=H(D(e),2);Ht(n,{onClick:()=>location.reload(),children:(r,o)=>{var s=Te("Reload");_(r,s)},$$slots:{default:!0}}),_(t,e)}var mu=U('<div><!> <div class="loader svelte-m0sno1"></div></div>');function bs(t,e){J(e,!0);let n=z(!1);Ee(()=>{const s=setTimeout(()=>{m(n,!0)},200);return()=>{clearTimeout(s)}});var r=mu(),o=D(r);ve(o,()=>e.children??ye),ce(()=>_e(r,1,pe(["block",{shown:a(n)}]),"svelte-m0sno1")),_(t,r),Q()}var wu=U('<div class="svelte-1mu1b44"><!></div>');function yu(t,e){J(e,!0);const{getDialogPageHeight:n}=xa(),r=R(n);var o=wu(),s=D(o);bs(s,{}),ce(()=>jn(o,`min-height: ${a(r)??""}px;`)),_(t,o),Q()}function Ve(t,e){J(e,!0);const n={},r=Object.assign({"./Pages/About.svelte":()=>He(()=>import("./DKlmiKu5.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>He(()=>import("./DVU90ypC.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>He(()=>import("./d3HzJb4x.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>He(()=>import("./DCJew9xS.js"),__vite__mapDeps([8,9])),"./Pages/ClearStore.svelte":()=>He(()=>import("./eLPqwcYE.js"),__vite__mapDeps([10,11])),"./Pages/ConfirmAccessKey.svelte":()=>He(()=>import("./0dEJLV1f.js"),__vite__mapDeps([12,4,3,13,14,15,16])),"./Pages/EditNote.svelte":()=>He(()=>import("./DhGa8jrV.js"),__vite__mapDeps([17,18,19,14,15,20,21,22])),"./Pages/Exit.svelte":()=>He(()=>import("./C2tPnSMM.js"),__vite__mapDeps([23,24])),"./Pages/ExportData.svelte":()=>He(()=>import("./DoAxIeS1.js"),__vite__mapDeps([25,19,14,15,20,26,27,28])),"./Pages/ImportData.svelte":()=>He(()=>import("./DAHSAoV2.js"),__vite__mapDeps([29,19,14,15,20,30])),"./Pages/NewNote.svelte":()=>He(()=>import("./B5l296Fi.js"),__vite__mapDeps([31,18,19,14,15,20,21])),"./Pages/Settings.svelte":()=>He(()=>import("./4gzmSPsW.js"),__vite__mapDeps([32,26,27,33])),"./Pages/Signin.svelte":()=>He(()=>import("./DpQAdt9Q.js"),__vite__mapDeps([34,4,3,13,35])),"./Pages/Signup.svelte":()=>He(()=>import("./B7lhXq9S.js"),__vite__mapDeps([36,13,4,3,37])),"./Pages/Subscription.svelte":()=>He(()=>import("./CJX6sp9w.js"),__vite__mapDeps([38,39])),"./Pages/Sync.svelte":()=>He(()=>import("./CL-06lTK.js"),__vite__mapDeps([40,41]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(r[c]){const u=r[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var s=V(),i=B(s);Ho(i,()=>o(e.page),l=>{yu(l,{})},(l,c)=>{const u=R(()=>a(c).default);var d=V(),f=B(d);Vo(f,()=>a(u),(h,g)=>{g(h,{get params(){return e.params},get hidden(){return e.hidden}})}),_(l,d)},l=>{_u(l)}),_(t,s),Q()}var bu=U('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Ss(t,e){let n=R(()=>e.style==="selected"?"45deg":"0deg");var r=bu();r.__click=function(...c){e.onClick?.apply(this,c)};var o=D(r),s=H(o);be(s,()=>({"--size":e.size==="small"?"10px":"12px","--rotate":a(n)})),ke(s.lastChild,{name:"plus"});var i=H(s,2);{var l=c=>{tt(c,{children:(u,d)=>{var f=Te("add tag");_(u,f)}})};q(i,c=>{e.title===void 0&&c(l)})}ce(()=>{De(r,"type",e.type),_e(r,1,pe([{selectedTag:e.style==="selected",small:e.size==="small",empty:e.title===void 0}]),"svelte-uu8a24"),Jt(o,`${e.title??""} `)}),_(t,r)}st(["click"]);var Su=U("<div></div>");function Za(t,e){J(e,!0);let n=ie(e,"mobile",3,!1);var r=Su();Hr(r,20,()=>e.tags,o=>o,(o,s)=>{Ss(o,{get title(){return s},onClick:()=>e.handleTagClick(s)})}),ce(()=>_e(r,1,pe(["tags",{mobile:n()}]),"svelte-1c53r32")),_(t,r),Q()}var ku=U("<div></div>");function Ja(t,e){J(e,!0);var n=V(),r=B(n);{var o=s=>{var i=ku();_e(i,1,pe(["tags","selectedTags"]),"svelte-58z9m1"),Hr(i,20,()=>e.selectedTags,l=>l,(l,c)=>{Ss(l,{get title(){return c},onClick:()=>e.handleSelectedTagClick(c),style:"selected"})}),_(s,i)};q(r,s=>{e.selectedTags.size>0&&s(o)})}_(t,n),Q()}const Cu=(t,e,n)=>{if(t.has("inbox"))return[];const r=[],o=Array.from(t.values());for(const s of e)if(s.data&&!(n&&!n(s))){if(t.size===0){for(const i of s?.data?.tags||[])r.includes(i)||r.push(i);for(const i of s?.data?.draft?.tags||[])r.includes(i)||r.push(i);continue}if(s.data&&o.every(i=>s.data?.tags.includes(i)))for(const i of s.data.tags)!t.has(i)&&!r.includes(i)&&r.push(i);if(s&&s.data.draft&&o.every(i=>s.data?.draft?.tags.includes(i)))for(const i of s.data.draft.tags)!t.has(i)&&!r.includes(i)&&r.push(i)}return r};var Eu=(t,e,n)=>{e(),n("/",{full:!0})(t)},Pu=U('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),xu=(t,e,n)=>{e(),n(K.Bin,{full:!0})(t)},Au=U('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Du=U('<div class="sidebarFixed svelte-ltt61h"><div class="nav svelte-ltt61h"><!> <div class="menu svelte-ltt61h"><a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="searchWrapper svelte-ltt61h"><!></div> <!></div> <!>',1),Tu=U('<div class="sidebar svelte-ltt61h"><div class="sidebarFixed svelte-ltt61h"><!></div> <!></div>');function Nu(t,e){J(e,!0);const{checkMobileSize:n}=Zn(),{sidebarClose:r}=ka(),{getAppLocation:o}=Ot(),{getPageUrl:s,createHandlePage:i,getStackPagesFormUrl:l}=It(),c=Zo(),u=R(()=>o().pathname),{getSelectedTags:d,addTag:f,removeTag:h}=ts();let g=R(d);const{checkNotesInBin:v}=jr();let p=ie(e,"getNotes",3,()=>[]),w=ie(e,"mode",3,"notes"),k=null;function E(){return k||(k=He(()=>import("./DtIh40Vz.js"),__vite__mapDeps([42,43]))),k}const y=j=>{f(j)},T=j=>{h(j)};let L=R(()=>Cu(a(g),p()()||[],j=>!(j?.data&&j.data.deletedAt&&w()==="notes"||j?.data&&!j.data.deletedAt&&w()==="bin")).filter(j=>c.value===""||j.toLowerCase().indexOf(c.value.toLowerCase())!==-1).sort((j,te)=>j==="inbox"?-1:te==="inbox"?1:j.localeCompare(te))),P=R(n);Ee(()=>{a(P)&&E()});const{checkExistedDialog:S}=Jn();let x=R(()=>l().length>0||S());var N=V(),G=B(N);{var se=j=>{var te=V(),$=B(te);Ho($,E,null,(he,me)=>{const X=R(()=>a(me).default);var Y=V(),Z=B(Y);Vo(Z,()=>a(X),(M,F)=>{F(M,{get blocked(){return a(x)},children:(de,we)=>{var A=Du(),O=B(A),b=D(O),C=D(b);_s(C,{});var W=H(C,2),ne=D(W),ee=R(()=>i(K.Settings));ne.__click=function(...Pe){a(ee)?.apply(this,Pe)};var fe=D(ne);be(fe,()=>({"--size":"24px"})),ke(fe.lastChild,{name:"settings"});var oe=H(fe,2);tt(oe,{children:(Pe,Xe)=>{var nt=Te("Settings");_(Pe,nt)}});var Ae=H(ne,2),ze=R(()=>i(K.Sync));Ae.__click=function(...Pe){a(ze)?.apply(this,Pe)};var je=D(Ae);be(je,()=>({"--size":"24px"})),ke(je.lastChild,{name:"sync"});var Ke=H(je,2);tt(Ke,{children:(Pe,Xe)=>{var nt=Te("Sync");_(Pe,nt)}});var Ue=H(Ae,2);{var Me=Pe=>{var Xe=Pu();Xe.__click=[Eu,r,i];var nt=D(Xe);be(nt,()=>({"--size":"24px"})),ke(nt.lastChild,{name:"note"});var kt=H(nt,2);tt(kt,{children:(lt,qt)=>{var rn=Te("Notes");_(lt,rn)}}),ce(lt=>De(Xe,"href",lt),[()=>s("/",{full:!0})]),_(Pe,Xe)},bt=Pe=>{var Xe=V(),nt=B(Xe);{var kt=lt=>{var qt=Au();qt.__click=[xu,r,i];var rn=D(qt);be(rn,()=>({"--size":"24px"})),ke(rn.lastChild,{name:"bin"});var Ur=H(rn,2);tt(Ur,{children:(Ct,Qn)=>{var vr=Te("Bin");_(Ct,vr)}}),ce(Ct=>De(qt,"href",Ct),[()=>s(K.Bin,{full:!0})]),_(lt,qt)};q(nt,lt=>{v()&&lt(kt)},!0)}_(Pe,Xe)};q(Ue,Pe=>{a(u)===`/${K.Bin}`?Pe(Me):Pe(bt,!1)})}var Ge=H(b,2),it=D(Ge);ua(it,{placeholder:"Search tag",get value(){return c.value},set value(Pe){c.value=Pe}});var St=H(Ge,2);Ja(St,{get selectedTags(){return a(g)},handleSelectedTagClick:T});var Vt=H(O,2);Za(Vt,{get tags(){return a(L)},handleTagClick:y,mobile:!0}),ce((Pe,Xe)=>{De(ne,"href",Pe),De(Ae,"href",Xe)},[()=>s(K.Settings),()=>s(K.Sync)]),_(de,A)},$$slots:{default:!0}})}),_(he,Y)}),_(j,te)},ae=j=>{var te=Tu(),$=D(te),he=D($);Ja(he,{get selectedTags(){return a(g)},handleSelectedTagClick:T});var me=H($,2);Za(me,{get tags(){return a(L)},handleTagClick:y}),_(j,te)};q(G,j=>{a(P)?j(se):j(ae,!1)})}_(t,N),Q()}st(["click"]);const Lu=(t,e,n,r)=>{e.noteData.pinnedAt?(n(e.noteId,!1),_n("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),_n("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),m(r,!0)},Bu=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),_n("Link copied"),m(n,!0)};var Iu=U('<li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),Mu=(t,e,n)=>{m(e,!0),m(n,!0)},Ou=U('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),Ru=(t,e,n)=>{m(e,!0),m(n,!0)},Fu=(t,e,n)=>{m(e,!0),m(n,!0)},zu=U('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete from bin</button></li>',1),Hu=U('<ul class="menu svelte-8ve3pe"><!> <li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),ju=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Uu=U("<!> <!>",1);function Vu(t,e){J(e,!0);const n=(x,N=ye)=>{var G=Hu(),se=D(G);{var ae=Z=>{var M=Iu(),F=D(M);F.__click=[Bu,e,u];var de=D(F);be(de,()=>({"--size":"22px"})),ke(de.lastChild,{name:"copy"}),ce(()=>_e(F,1,pe(["button",{buttonMenuDialog:N()}]),"svelte-8ve3pe")),_(Z,M)};q(se,Z=>{N()&&e.noteData.url&&Z(ae)})}var j=H(se,2),te=D(j);te.__click=[Lu,e,s,u];var $=D(te);{let Z=R(()=>e.noteData.pinnedAt?"pin-cancel":"pin");be($,()=>({"--size":"22px"})),ke($.lastChild,{get name(){return a(Z)}})}var he=H($),me=H(j,2);{var X=Z=>{var M=Ou(),F=D(M);F.__click=[Mu,d,u];var de=D(F),we=D(de);be(we,()=>({"--size":"18px"})),ke(we.lastChild,{name:"bin"}),ce(()=>_e(F,1,pe(["button",{buttonMenuDialog:N()}]),"svelte-8ve3pe")),_(Z,M)},Y=Z=>{var M=zu(),F=B(M),de=D(F);de.__click=[Ru,f,u];var we=D(de),A=D(we);be(A,()=>({"--size":"18px"})),ke(A.lastChild,{name:"bin-cancel"});var O=H(F,2),b=D(O);b.__click=[Fu,h,u];var C=D(b),W=D(C);be(W,()=>({"--size":"18px"})),ke(W.lastChild,{name:"bin"}),ce(()=>{_e(de,1,pe(["button",{buttonMenuDialog:N()}]),"svelte-8ve3pe"),_e(b,1,pe(["button",{buttonMenuDialog:N()}]),"svelte-8ve3pe")}),_(Z,M)};q(me,Z=>{l()==="notes"?Z(X):Z(Y,!1)})}ce(()=>{_e(te,1,pe(["button",{buttonMenuDialog:N()}]),"svelte-8ve3pe"),Jt(he,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),_(x,G)},{moveNoteToBin:r,deleteNote:o,pinNote:s,restoreNoteFromBin:i}=jr();let l=ie(e,"mode",3,"notes"),c=ie(e,"shownMenu",15),u=z(!1),d=z(!1),f=z(!1),h=z(!1);const{checkMobileSize:g}=Zn();let v=R(g);const p=()=>{o(e.noteId),_n("Draft deleted")},w=async()=>{r(e.noteId),_n("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},k=()=>{i(e.noteId),_n("Note restored from bin",{onCancel:()=>{r(e.noteId)}})},E=()=>{a(d)?(m(d,!1),e.noteData.type==="draft"?p():w()):a(f)&&(m(f,!1),k()),c(!1),m(u,!1)};var y=Uu(),T=B(y);{var L=x=>{var N=V(),G=B(N);{var se=j=>{Aa(j,{get startClose(){return a(u)},onClosed:E,children:(te,$)=>{n(te,()=>!0)},$$slots:{default:!0}})},ae=j=>{var te=ju(),$=B(te);be($,()=>({"--bottom":"-90px","--right":"20px"})),ws($.lastChild,{get startClose(){return a(u)},get positionTop(){return e.showMenuUp},onClosed:E,children:(he,me)=>{n(he,()=>!1)},$$slots:{default:!0}}),_(j,te)};q(G,j=>{a(v)?j(se):j(ae,!1)})}_(x,N)};q(T,x=>{c()&&x(L)})}var P=H(T,2);{var S=x=>{ys(x,{title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:()=>{o(e.noteId),m(h,!1)},onCancel:()=>{m(h,!1)}})};q(P,x=>{a(h)&&x(S)})}_(t,y),Q()}st(["click"]);const qu=(t,e)=>{m(e,!0)},Wu=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),_n("Link copied"),m(n,!1)},Yu=(t,e)=>{m(e,!0)},Ku=(t,e)=>{m(e,!1)},Gu=(t,e,n,r)=>{t.preventDefault(),e.noteData.type==="draft"?n(`${K.NewNote}`):n(`${K.EditNote}?id=${e.noteId}`),m(r,!1)};var Xu=U('<div class="iconPlaceholder svelte-1jg44o9"></div>'),Zu=U('<img loading="lazy" class="noteIcon" height="16" width="16" alt=""/>'),Ju=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Qu=U('<div class="noteIconWrapper svelte-1jg44o9"><!></div>'),$u=U('<button class="button svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),ed=(t,e)=>{m(e,!1)},td=U('<!> <a target="_blank" rel="noopener noreferrer" class="button openLink svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),nd=U('<li><!> <a class="noteLink svelte-1jg44o9" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function rd(t,e){J(e,!0);const{pushStackPages:n}=It(),{getFaviconEnabled:r}=xl();let o=ie(e,"mode",3,"notes"),s=z(!1),i=z(!1),l=z(!1),c=R(r);const{checkMobileSize:u}=Zn(),d=x=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(x).host}.ico`}catch{return""}},f=e.noteData.url||e.noteData.draft?.url||"";var h=nd();h.__focusin=[Yu,i],h.__focusout=[Ku,i];var g=D(h);{var v=x=>{var N=Qu(),G=D(N);{var se=j=>{var te=V(),$=B(te);{var he=X=>{var Y=Xu();_(X,Y)},me=X=>{var Y=Zu();ce(Z=>De(Y,"src",Z),[()=>d(f)]),ba("error",Y,()=>{m(l,!0)}),_(X,Y)};q($,X=>{a(l)?X(he):X(me,!1)})}_(j,te)},ae=j=>{var te=Ju(),$=B(te);be($,()=>({"--size":"16px"})),ke($.lastChild,{name:"note"}),_(j,te)};q(G,j=>{f?j(se):j(ae,!1)})}_(x,N)};q(g,x=>{a(c)&&x(v)})}var p=H(g,2);p.__click=[Gu,e,n,i];var w=D(p),k=H(p,2),E=D(k);{var y=x=>{var N=td(),G=B(N);{var se=$=>{var he=$u();he.__click=[Wu,e,i];var me=D(he);be(me,()=>({"--size":"20px"})),ke(me.lastChild,{name:"copy"});var X=H(me,2);tt(X,{children:(Y,Z)=>{var M=Te("copy link");_(Y,M)}}),ce(()=>De(he,"tabindex",e.focusHidden?-1:0)),_($,he)};q(G,$=>{u()||$(se)})}var ae=H(G,2);ae.__click=[ed,i];var j=D(ae);be(j,()=>({"--size":"18px"})),ke(j.lastChild,{name:"open"});var te=H(j,2);tt(te,{children:($,he)=>{var me=Te();ce(()=>Jt(me,e.noteData.draft?.name||e.noteData.name||"unknown")),_($,me)}}),ce(()=>{De(ae,"href",f),De(ae,"tabindex",e.focusHidden?-1:0)}),_(x,N)};q(E,x=>{f&&x(y)})}var T=H(E,2);T.__click=[qu,s],_e(T,1,pe(["button","buttonMenu"]),"svelte-1jg44o9");var L=D(T);be(L,()=>({"--size":"18px","--rotate":"90deg"})),ke(L.lastChild,{name:"menu"});var P=H(L,2);tt(P,{children:(x,N)=>{var G=Te("show menu");_(x,G)}});var S=H(k,2);Vu(S,{get mode(){return o()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return a(s)},set shownMenu(x){m(s,x,!0)}}),ce((x,N)=>{_e(h,1,x,"svelte-1jg44o9"),De(p,"tabindex",e.focusHidden?-1:0),De(p,"href",N),Jt(w,e.noteData?.draft?.name||e.noteData?.name||"unknown"),_e(k,1,pe(["noteMenuWrapper",{noteMenuWrapperActive:a(i)}]),"svelte-1jg44o9"),De(T,"tabindex",e.focusHidden?-1:0)},[()=>pe(["record",{pinned:!!e.noteData.pinnedAt,draft:!!e.noteData.draft}]),()=>`/?stackPages=${encodeURIComponent(`${K.EditNote}?id=${e.noteId}`)}`]),_(t,h),Q()}st(["focusin","focusout","click"]);var Un,ks,Cs;class ad{constructor(e){ge(this,Un);pt(this,"data");pt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),Oe(this,Un,ks).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,Oe(this,Un,Cs).call(this)),e}isEmpty(){return this.data.length===0}}Un=new WeakSet,ks=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(n,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},Cs=function(){let e=0;const n=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<n&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<n&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class od{constructor(e,n){pt(this,"heap");pt(this,"done");pt(this,"cache",[]);this.heap=new ad(n);for(const r of e)this.heap.insert(r);this.done=!1}get(e,n){const r=this.cache.slice(e,n);for(;r.length<n-e&&!this.heap.isEmpty();){const o=this.heap.extractMin();o!==void 0&&(this.cache.push(o),r.push(o))}return this.heap.isEmpty()&&(this.done=!0),r}}var sd=U('<p class="message">No notes in bin</p>'),id=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),ld=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),cd=U('<p class="message">No notes found</p> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div> <div>or</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),ud=U('<div class="emptyStore svelte-106i4nx"><!></div>'),dd=U("<span>Back to notes</span>"),fd=U('<div class="emptyMessage svelte-106i4nx">No notes in bin</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),vd=U('<div class="emptyMessage svelte-106i4nx">No notes found</div>'),hd=U('<div class="feed svelte-106i4nx"><ul class="svelte-106i4nx"></ul></div>'),gd=U('<div class="wrapperFeed svelte-106i4nx"><div class="wrapperContainer svelte-106i4nx"><!></div></div>');function pd(t,e){J(e,!0);let n=ie(e,"getNotes",3,()=>[]),r=ie(e,"mode",3,"notes");const{getScrollContainer:o}=Pa(),{createHandlePage:s,getPageUrl:i}=It(),{getSelectedTags:l}=ts(),{getFeedOrder:c}=Qo(),u=Ko();let d=54,f=z(0),h=z(0),g=z(0),v=z(0),p=[],w=z(0),k=z(null),E=R(o),y=null,T=null;const L=R(l);xe(()=>{a(L),a(G),a(E)?.scrollTo(0,0)});const{enable:P}=us(),S=()=>{P(),y||(y=requestAnimationFrame(()=>{const M=a(E)?.scrollTop||0;m(g,M,!0);const F=Math.ceil(a(f)/d);m(h,Math.floor(M/(d*F))*(d*F)),y=null}))},x=()=>{T||(T=requestAnimationFrame(()=>{m(f,window.innerHeight-180||0,!0);const M=a(E)?.scrollTop||0;m(g,M,!0);const F=Math.ceil(a(f)/d);m(h,Math.floor(M/(d*F))*(d*F)),T=null}))};Ee(()=>{x(),S()});const N=()=>{S()};xe(()=>(a(E)?.addEventListener("scroll",N),window.addEventListener("resize",x),()=>{a(E)?.removeEventListener("scroll",N),window.removeEventListener("resize",x)}));const G=R(c);xe(()=>{const M=n()()||[],F=[],de=Array.from(a(L).values());for(let we=M.length-1;we>=0;we--){if(!M[we]||!M[we].data)continue;const A=M[we];r()==="notes"&&A?.data.deletedAt||r()==="bin"&&!A?.data.deletedAt||a(L).size&&de.some(O=>!A.data?.tags.includes(O))&&(!A.data.draft||de.some(O=>!A.data?.draft?.tags.includes(O)))||u&&!(A.data.name.toLowerCase().includes(u.value.toLowerCase())||A.data.url.toLowerCase().includes(u.value.toLowerCase())||A.data.text.toLowerCase().includes(u.value.toLowerCase()))||F.push(A)}m(v,F.length,!0),p=F,m(w,Date.now(),!0)}),xe(()=>{a(G),a(w),m(k,new od(p,(M,F)=>{if(!M||!F||!M.data||!F.data)return 0;if(M.data.pinnedAt&&!F.data.pinnedAt)return-1;if(!M.data.pinnedAt&&F.data.pinnedAt)return 1;if(M.data.pinnedAt&&F.data.pinnedAt){if(M.data.pinnedAt<F.data.pinnedAt)return 1;if(M.data.pinnedAt>F.data.pinnedAt)return-1}if(M.data.draft&&!F.data.draft)return-1;if(!M.data.draft&&F.data.draft)return 1;if(M.data.draft&&F.data.draft){if(M.data.draft.updatedAt<F.data.draft.updatedAt)return 1;if(M.data.draft.updatedAt>F.data.draft.updatedAt)return-1}switch(a(G)){case"newest":return M.data.updatedAt<F.data.updatedAt?1:-1;case"oldest":return M.data.updatedAt>F.data.updatedAt?1:-1;case"AtoZ":return M.data.name.localeCompare(F.data.name);case"ZtoA":return F.data.name.localeCompare(M.data.name);default:return 0}}),!0)});const se=R(()=>a(v)*d);let j=R(()=>{a(w);const M=Math.ceil(a(f)/d);let F=Math.floor(a(h)/d);return F=F-Math.min(F,M),a(k)?.get(F,F+M*3)||[]}),te=R(()=>d*Math.ceil(a(f)/d));const $=R(()=>a(h)-Math.min(a(h),a(te)));var he=gd(),me=D(he),X=D(me);{var Y=M=>{bs(M,{})},Z=M=>{var F=V(),de=B(F);{var we=O=>{var b=ud(),C=D(b);{var W=ee=>{var fe=sd();_(ee,fe)},ne=ee=>{var fe=cd(),oe=H(B(fe),2),Ae=D(oe);{let Ke=R(()=>i(K.NewNote)),Ue=R(()=>s(K.NewNote));Ht(Ae,{element:"a",get href(){return a(Ke)},get onClick(){return a(Ue)},children:(Me,bt)=>{var Ge=id(),it=B(Ge);be(it,()=>({"--size":"18px","--color":"#b0b0b0"})),ke(it.lastChild,{name:"plus"}),_(Me,Ge)},$$slots:{default:!0}})}var ze=H(oe,4),je=D(ze);{let Ke=R(()=>i(K.ImportData)),Ue=R(()=>s(K.ImportData));Ht(je,{element:"a",get href(){return a(Ke)},get onClick(){return a(Ue)},children:(Me,bt)=>{var Ge=ld(),it=B(Ge);be(it,()=>({"--size":"18px","--color":"#b0b0b0"})),ke(it.lastChild,{name:"import"}),_(Me,Ge)},$$slots:{default:!0}})}_(ee,fe)};q(C,ee=>{r()==="bin"?ee(W):ee(ne,!1)})}_(O,b)},A=O=>{var b=V(),C=B(b);{var W=ee=>{var fe=fd(),oe=H(B(fe),2),Ae=D(oe);{let ze=R(()=>i("/",{full:!0})),je=R(()=>s("/",{full:!0}));Ht(Ae,{element:"a",get href(){return a(ze)},get onClick(){return a(je)},children:(Ke,Ue)=>{var Me=dd();_(Ke,Me)},$$slots:{default:!0}})}_(ee,fe)},ne=ee=>{var fe=V(),oe=B(fe);{var Ae=je=>{var Ke=vd();_(je,Ke)},ze=je=>{var Ke=hd(),Ue=D(Ke);Hr(Ue,23,()=>a(j),Me=>Me.data,(Me,bt,Ge)=>{var it=V(),St=B(it);{var Vt=Pe=>{{let Xe=R(()=>a(Ge)*d<a(g)-a($)-d/2||a(Ge)*d>a(g)-a($)+Math.floor(a(f)/d)*d),nt=R(()=>(a(Ge)+3)*d<a(g)-a($)-d/2||(a(Ge)+3)*d>a(g)-a($)+Math.floor(a(f)/d)*d);rd(Pe,{get mode(){return r()},get focusHidden(){return a(Xe)},get showMenuUp(){return a(nt)},get noteId(){return a(bt).id},get noteData(){return a(bt).data}})}};q(St,Pe=>{a(bt).data&&Pe(Vt)})}_(Me,it)}),ce(Me=>{jn(Ke,`min-height: ${Me??""}px`),jn(Ue,`transform: translateY(${a($)??""}px);`)},[()=>Math.max((a(se)>a(f),a(se)),0)]),_(je,Ke)};q(oe,je=>{a(j).length===0?je(Ae):je(ze,!1)},!0)}_(ee,fe)};q(C,ee=>{r()==="bin"&&e.countNotesInBin()===0?ee(W):ee(ne,!1)},!0)}_(O,b)};q(de,O=>{(n()()||[]).length===0||r()==="notes"&&(n()()||[]).length-e.countNotesInBin()===0?O(we):O(A,!1)},!0)}_(M,F)};q(X,M=>{e.readyNotes?M(Z,!1):M(Y)})}_(t,he),Q()}var _d=U('<!> <div class="content svelte-k57gez"><!></div>',1);function md(t,e){J(e,!0);const{getAppLocation:n}=Ot(),{getGetNotes:r,isInitedNotes:o,countNotesInBin:s}=jr(),i=R(o),l=R(r),c=R(()=>n().pathname);var u=_d(),d=B(u);{let g=R(()=>a(c)==="/bin"?"bin":"notes");Nu(d,{get mode(){return a(g)},get getNotes(){return a(l)}})}var f=H(d,2),h=D(f);{let g=R(()=>a(c)==="/bin"?"bin":"notes");pd(h,{get mode(){return a(g)},get getNotes(){return a(l)},get countNotesInBin(){return s},get readyNotes(){return a(i)}})}_(t,u),Q()}const Qa=(t,e=ye,n=ye,r)=>{let o=Or(()=>js(r?.(),!1));var s=V(),i=B(s);{var l=u=>{Re(u,{children:(d,f)=>{Ve(d,{get hidden(){return a(o)},get page(){return K.Settings}})},$$slots:{default:!0}})},c=u=>{var d=V(),f=B(d);{var h=v=>{Re(v,{children:(p,w)=>{Ve(p,{get hidden(){return a(o)},get page(){return K.NewNote}})},$$slots:{default:!0}})},g=v=>{var p=V(),w=B(p);{var k=y=>{Re(y,{children:(T,L)=>{Ve(T,{get params(){return n()},get hidden(){return a(o)},get page(){return K.EditNote}})},$$slots:{default:!0}})},E=y=>{var T=V(),L=B(T);{var P=x=>{Re(x,{children:(N,G)=>{Ve(N,{get hidden(){return a(o)},get page(){return K.ImportData}})},$$slots:{default:!0}})},S=x=>{var N=V(),G=B(N);{var se=j=>{Re(j,{children:(te,$)=>{Ve(te,{get hidden(){return a(o)},get page(){return K.ExportData}})},$$slots:{default:!0}})},ae=j=>{var te=V(),$=B(te);{var he=X=>{Re(X,{children:(Y,Z)=>{Ve(Y,{get hidden(){return a(o)},get page(){return K.ClearStore}})},$$slots:{default:!0}})},me=X=>{var Y=V(),Z=B(Y);{var M=de=>{Re(de,{children:(we,A)=>{uu(we,{})},$$slots:{default:!0}})},F=de=>{var we=V(),A=B(we);{var O=C=>{Re(C,{children:(W,ne)=>{Ve(W,{get hidden(){return a(o)},get page(){return K.Auth}})},$$slots:{default:!0}})},b=C=>{var W=V(),ne=B(W);{var ee=oe=>{Re(oe,{children:(Ae,ze)=>{Ve(Ae,{get hidden(){return a(o)},get page(){return K.Signup}})},$$slots:{default:!0}})},fe=oe=>{var Ae=V(),ze=B(Ae);{var je=Ue=>{Re(Ue,{children:(Me,bt)=>{Ve(Me,{get hidden(){return a(o)},get page(){return K.Signin}})},$$slots:{default:!0}})},Ke=Ue=>{var Me=V(),bt=B(Me);{var Ge=St=>{Re(St,{children:(Vt,Pe)=>{Ve(Vt,{get hidden(){return a(o)},get page(){return K.AccessKeys}})},$$slots:{default:!0}})},it=St=>{var Vt=V(),Pe=B(Vt);{var Xe=kt=>{Re(kt,{children:(lt,qt)=>{Ve(lt,{get hidden(){return a(o)},get page(){return K.Account}})},$$slots:{default:!0}})},nt=kt=>{var lt=V(),qt=B(lt);{var rn=Ct=>{Re(Ct,{children:(Qn,vr)=>{Ve(Qn,{get hidden(){return a(o)},get page(){return K.ConfirmAccessKey}})},$$slots:{default:!0}})},Ur=Ct=>{var Qn=V(),vr=B(Qn);{var Es=Cn=>{Re(Cn,{children:(hr,Da)=>{Ve(hr,{get hidden(){return a(o)},get page(){return K.Exit}})},$$slots:{default:!0}})},Ps=Cn=>{var hr=V(),Da=B(hr);{var xs=En=>{Re(En,{children:(gr,Ta)=>{Ve(gr,{get hidden(){return a(o)},get page(){return K.Sync}})},$$slots:{default:!0}})},As=En=>{var gr=V(),Ta=B(gr);{var Ds=Pn=>{Re(Pn,{children:(pr,Na)=>{Ve(pr,{get hidden(){return a(o)},get page(){return K.Subscription}})},$$slots:{default:!0}})},Ts=Pn=>{var pr=V(),Na=B(pr);{var Ns=xn=>{Re(xn,{children:(Vr,Bs)=>{Ve(Vr,{get hidden(){return a(o)},get page(){return K.About}})},$$slots:{default:!0}})},Ls=xn=>{Re(xn,{children:(Vr,Bs)=>{vu(Vr,{})},$$slots:{default:!0}})};q(Na,xn=>{e()===K.About?xn(Ns):xn(Ls,!1)},!0)}_(Pn,pr)};q(Ta,Pn=>{e()===K.Subscription?Pn(Ds):Pn(Ts,!1)},!0)}_(En,gr)};q(Da,En=>{e()===K.Sync?En(xs):En(As,!1)},!0)}_(Cn,hr)};q(vr,Cn=>{e()===K.Exit?Cn(Es):Cn(Ps,!1)},!0)}_(Ct,Qn)};q(qt,Ct=>{e()===K.ConfirmAccessKey?Ct(rn):Ct(Ur,!1)},!0)}_(kt,lt)};q(Pe,kt=>{e()===K.Account?kt(Xe):kt(nt,!1)},!0)}_(St,Vt)};q(bt,St=>{e()===K.AccessKeys?St(Ge):St(it,!1)},!0)}_(Ue,Me)};q(ze,Ue=>{e()===K.Signin?Ue(je):Ue(Ke,!1)},!0)}_(oe,Ae)};q(ne,oe=>{e()===K.Signup?oe(ee):oe(fe,!1)},!0)}_(C,W)};q(A,C=>{e()===K.Auth?C(O):C(b,!1)},!0)}_(de,we)};q(Z,de=>{e()===K.Start?de(M):de(F,!1)},!0)}_(X,Y)};q($,X=>{e()===K.ClearStore?X(he):X(me,!1)},!0)}_(j,te)};q(G,j=>{e()===K.ExportData?j(se):j(ae,!1)},!0)}_(x,N)};q(L,x=>{e()===K.ImportData?x(P):x(S,!1)},!0)}_(y,T)};q(w,y=>{e()===K.EditNote?y(k):y(E,!1)},!0)}_(v,p)};q(f,v=>{e()===K.NewNote?v(h):v(g,!1)},!0)}_(u,d)};q(i,u=>{e()===K.Settings?u(l):u(c,!1)})}_(t,s)};var wd=U("<!> <!>",1);function yd(t,e){J(e,!0);const{getStackPages:n}=It(),{getAccount:r}=Ea();let o=R(n),s=R(()=>r()!==void 0);const{checkMobileSize:i}=Zn();let l=z(Le([]));const c=R(i);xe(()=>{a(o),a(c),gt(()=>{if(a(c))a(o).length>=a(l).length?m(l,a(o).map(w=>({page:w,shown:!0})),!0):m(l,a(l).map((w,k)=>({page:w.page,shown:k<a(o).length})),!0);else if(a(o).length>=a(l).length)m(l,a(o).map(w=>({page:w,shown:!0})),!0);else{if(a(o).length===0){m(l,[{page:a(l)[a(l).length-1].page,shown:!1}],!0);return}m(l,a(o).map(w=>({page:w,shown:!0})),!0)}})});const u=()=>{m(l,a(o).map(w=>({page:w,shown:!0})),!0)};var d=wd(),f=B(d);{var h=w=>{md(w,{})};q(f,w=>{a(s)&&w(h)})}var g=H(f,2);{var v=w=>{var k=V(),E=B(k);Hr(E,19,()=>a(l),y=>y.page,(y,T,L)=>{const P=R(()=>a(T).page.split("?")[1]),S=R(()=>a(T).page.split("?")[0]);{let x=R(()=>a(L)!==a(l).length-1&&!!a(l)[a(L)+1]?.shown),N=R(()=>a(L)===0);Ga(y,{onClosed:u,get shown(){return a(T).shown},get hidden(){return a(x)},get isLastDialog(){return a(N)},children:(G,se)=>{{let ae=R(()=>a(L)!==a(l).length-1&&!!a(l)[a(L)+1]?.shown);Qa(G,()=>a(S),()=>a(P),()=>a(ae))}},$$slots:{default:!0}})}}),_(w,k)},p=w=>{var k=V(),E=B(k);{var y=T=>{const L=R(()=>a(l)[a(l).length-1].page.split("?")[1]),P=R(()=>a(l)[a(l).length-1].page.split("?")[0]);{let S=R(()=>a(l).length===1);Ga(T,{onClosed:u,get shown(){return a(l)[a(l).length-1].shown},hidden:!1,get isLastDialog(){return a(S)},children:(x,N)=>{Qa(x,()=>a(P),()=>a(L))},$$slots:{default:!0}})}};q(E,T=>{a(l).length>0&&T(y)},!0)}_(w,k)};q(g,w=>{i()?w(v):w(p,!1)})}_(t,d),Q()}function bd(t,e){J(e,!1);let n=0;Ee(()=>{document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-n;(n<30&&s>0||n>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Wo(),Q()}const Sd=(t,e)=>{a(e)&&a(e).scrollTo({top:0})};var kd=U('<div><button class="buttonTop svelte-1n46o8q"><!> <span class="icon svelte-1n46o8q"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),Cd=U('<!> <!> <main><div class="wrapperHeader svelte-1n46o8q"><!></div> <div class="container svelte-1n46o8q"><!></div></main> <!>',1);function Ed(t,e){J(e,!0);const{navigate:n}=Ot(),{hasStackPage:r,pushStackPages:o,clearStackPages:s}=It(),{setScrollContainer:i}=Pa(),{getAccount:l,init:c}=Ea(),{getStackPagesFormUrl:u}=It(),{createBroadcastChannel:d,tabId:f}=Gn(),h=d(),{getSidebarState:g}=ka();Ee(()=>{c(Y=>{Y===void 0?o("start"):(r("start")&&(s(),n("/")),Y?m(E,Y):m(E,null))});const X=async Y=>{const Z=JSON.parse(Y.data);if(Z.tabId&&Z.tabId===f)return;const M=Z;M.type==="initLocalAccount"||M.type==="initCloudAccount"||M.type==="updateAccount"||M.type==="disconnectCloudAccount"?(s(),n("/")):M.type==="exit"&&(s(),n("/"),setTimeout(()=>{o("start")}))};return h.addEventListener(X),()=>h.removeEventListener(X)});const v=Xn();Ee(async()=>{await new Promise(X=>setTimeout(X,100)),await Oo(),v.working=!0});let p=z(!1),w=0,k=R(()=>u().length>0),E=R(l),y=z(null);xe(()=>{i(a(y))});const T=()=>{if(a(y)){const X=a(y).scrollTop||0;X===0?m(p,!1):!a(p)&&w>X?m(p,!0):a(p)&&w+50<X&&m(p,!1),w=X}},L=()=>{T()};xe(()=>(a(y)?.addEventListener("scroll",L),window.addEventListener("resize",L),()=>{a(y)?.removeEventListener("scroll",L),window.removeEventListener("resize",L)}));const P=R(g);var S=Cd(),x=B(S);bd(x,{});var N=H(x,2);gc(N,{});var G=H(N,2),se=D(G),ae=D(se);{var j=X=>{qc(X,{})};q(ae,X=>{a(E)!==void 0&&X(j)})}var te=H(se,2),$=D(te);yd($,{}),Bt(G,X=>m(y,X),()=>a(y));var he=H(G,2);{var me=X=>{var Y=kd(),Z=D(Y);Z.__click=[Sd,y];var M=D(Z);tt(M,{children:(we,A)=>{var O=Te("top");_(we,O)}});var F=H(M,2),de=D(F);be(de,()=>({"--rotate":"90deg","--size":"28px"})),ke(de.lastChild,{name:"back"}),ce(()=>{jn(Y,`--swiping-ratio: ${v.swipingRatio}; --transition-timing-default: ${v.duration}s;`),_e(Y,1,pe(["wrapperButtonTop",{isAnimationOn:v.working&&!v.isSwiping,open:a(k)||a(P).type!=="closed"}]),"svelte-1n46o8q")}),_(X,Y)};q(he,X=>{a(p)&&X(me)})}ce(()=>{jn(G,`--swiping-ratio: ${v.swipingRatio}; --transition-timing-default: ${v.duration}s;`),_e(G,1,pe(["main",{isAnimationOn:v.working&&!v.isSwiping,open:a(k)||a(P).type!=="closed"}]),"svelte-1n46o8q")}),_(t,S),Q()}st(["click"]);function Pd(t){uc(t,{children:(e,n)=>{Ed(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Ji(Pd,{target:document.getElementById("app")});export{sc as $,Ea as A,Ht as B,jr as C,ba as D,Wo as E,Dd as F,ie as G,lu as H,ke as I,_e as J,pe as K,bs as L,Td as M,Nd as N,jn as O,K as P,Zn as Q,Rl as R,Bt as S,Sl as T,Ss as U,tt as V,Cu as W,ll as X,Gn as Y,xl as Z,Xn as _,be as a,ka as a0,us as a1,ve as a2,ms as a3,De as b,D as c,_ as d,Hr as e,U as f,a as g,It as h,Jn as i,z as j,Le as k,m as l,q as m,Q as n,Ee as o,J as p,V as q,B as r,H as s,ce as t,xe as u,st as v,Te as w,Jt as x,R as y,Ot as z};
