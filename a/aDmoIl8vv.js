const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aCn0u7qCd.js","a/aj6zxmxGs.css","a/advzaLhxh.js","a/a9q_jSmK4.js","a/aBEGDcNQV.js","a/aBrkJtqMH.css","a/aVcvK_4Af.js","a/aHdDxvcNK.css","a/aC1h1L4o_.js","a/aBgAKudUz.css","a/atWsKy4A0.js","a/aB9dYFKaf.js","a/aDU96KTZi.css","a/aDAsuV2HA.js","a/aCpa8lgv9.js","a/aCJjUmBCW.js","a/aCovFy9VH.css","a/afGUkjeV7.css","a/aC0XWeELL.js","a/aCEBfkSMR.css","a/aDXxMy3AM.js","a/aH1vcnSUP.js","a/aDKwUMAZP.css","a/aCNOKxzCY.js","a/aBeWFm1o7.css","a/aDjSJDzG7.css","a/aBamYoFP8.js","a/aCXobA9i7.css","a/aDMq_iRoI.js","a/aBhtHFOya.css","a/ahJg-zQAa.js","a/aBem4Ctjp.css","a/aDCdDJLKn.js","a/aRd9X4qHE.js","a/aCg3filF1.css","a/aBnkEs8xx.js","a/aCWn1BM4V.css","a/aCyFZ3SMR.js","a/aCYqPgi-1.css","a/aDb7cHuSe.js","a/aCH18nfIo.css","a/aBXQYNu0I.js","a/aq8ybuQAF.js","a/aB29A_v-K.css","a/avPyZ_xET.js","a/aBBI8MgAY.css"])))=>i.map(i=>d[i]);
var Ci=Object.defineProperty;var wo=t=>{throw TypeError(t)};var Ei=(t,e,n)=>e in t?Ci(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ut=(t,e,n)=>Ei(t,typeof e!="symbol"?e+"":e,n),ba=(t,e,n)=>e.has(t)||wo("Cannot "+n);var A=(t,e,n)=>(ba(t,e,"read from private field"),n?n.call(t):e.get(t)),ke=(t,e,n)=>e.has(t)?wo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ve=(t,e,n,r)=>(ba(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Le=(t,e,n)=>(ba(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const qo=!1;var Ga=Array.isArray,ki=Array.prototype.indexOf,Xa=Array.from,Pa=Object.defineProperty,Yn=Object.getOwnPropertyDescriptor,Vo=Object.getOwnPropertyDescriptors,Pi=Object.prototype,Ti=Array.prototype,Za=Object.getPrototypeOf,bo=Object.isExtensible;const Te=()=>{};function xi(t){return typeof t?.then=="function"}function Di(t){return t()}function Ta(t){for(var e=0;e<t.length;e++)t[e]()}function Wo(){var t,e,n=new Promise((r,o)=>{t=r,e=o});return{promise:n,resolve:t,reject:e}}function Ai(t,e,n=!1){return t===void 0?n?e():e:t}const Ze=2,Ja=4,na=8,Xt=16,Zt=32,In=64,ra=128,et=1024,ct=2048,fn=4096,vt=8192,Vt=16384,Qa=32768,un=65536,So=1<<17,Ni=1<<18,ir=1<<19,Ko=1<<20,mt=256,Wr=512,Kr=32768,xa=1<<21,$a=1<<22,xn=1<<23,Dn=Symbol("$state"),Li=Symbol("legacy props"),Ii=Symbol(""),Wn=new class extends Error{constructor(){super(...arguments);ut(this,"name","StaleReactionError");ut(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Yo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Mi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Oi(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ri(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Bi(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Fi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function ji(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Hi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ui(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function qi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const aa=1,oa=2,Go=4,Vi=8,Wi=16,Ki=1,Yi=2,Gi=4,Xi=8,Zi=16,Ji=1,Qi=2,Ke=Symbol(),$i="http://www.w3.org/1999/xhtml";let el=!1;function Xo(t){return t===this.v}function tl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Zo(t){return!tl(t,this.v)}let lr=!1,nl=!1;function rl(){lr=!0}let De=null;function rr(t){De=t}function Ve(t){return Jo().get(t)}function je(t,e){return Jo().set(t,e),e}function ie(t,e=!1,n){De={p:De,c:null,e:null,s:t,x:null,l:lr&&!e?{s:null,u:null,$:[]}:null}}function le(t){var e=De,n=e.e;if(n!==null){e.e=null;for(var r of n)gs(r)}return t!==void 0&&(e.x=t),De=e.p,t??{}}function cr(){return!lr||De!==null&&De.l===null}function Jo(t){return De===null&&Yo(),De.c??(De.c=new Map(al(De)||void 0))}function al(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let Cn=[];function Qo(){var t=Cn;Cn=[],Ta(t)}function Mn(t){if(Cn.length===0&&!Gn){var e=Cn;queueMicrotask(()=>{e===Cn&&Qo()})}Cn.push(t)}function ol(){for(;Cn.length>0;)Qo()}const sl=new WeakMap;function $o(t){var e=be;if(e===null)return _e.f|=xn,t;if((e.f&Qa)===0){if((e.f&ra)===0)throw!e.parent&&t instanceof Error&&es(t),t;e.b.error(t)}else ar(t,e)}function ar(t,e){for(;e!==null;){if((e.f&ra)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&es(t),t}function es(t){const e=sl.get(t);e&&(Pa(t,"message",{value:e.message}),Pa(t,"stack",{value:e.stack}))}const Or=new Set;let xe=null,zr=null,Ct=null,Da=new Set,Lt=[],sa=null,Aa=!1,Gn=!1;var Qn,$n,er,En,br,tr,nr,Ye,Na,wn,La,ts;const $r=class $r{constructor(){ke(this,Ye);ut(this,"committed",!1);ut(this,"current",new Map);ke(this,Qn,new Map);ke(this,$n,new Set);ke(this,er,0);ke(this,En,0);ke(this,br,null);ke(this,tr,[]);ke(this,nr,[]);ut(this,"skipped_effects",new Set)}process(e){Lt=[],zr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)Le(this,Ye,Na).call(this,r,n);Le(this,Ye,La).call(this),A(this,En)>0?(Le(this,Ye,wn).call(this,n.effects),Le(this,Ye,wn).call(this,n.render_effects),Le(this,Ye,wn).call(this,n.block_effects)):(zr=this,xe=null,Co(n.render_effects),Co(n.effects),zr=null),Ct=null}capture(e,n){A(this,Qn).has(e)||A(this,Qn).set(e,n),this.current.set(e,e.v),Ct?.set(e,e.v)}activate(){xe=this}deactivate(){xe=null,Ct=null}flush(){if(Lt.length>0){if(this.activate(),rs(),xe!==null&&xe!==this)return}else Le(this,Ye,La).call(this);this.deactivate();for(const e of Da)if(Da.delete(e),e(),xe!==null)break}increment(e){ve(this,er,A(this,er)+1),e&&ve(this,En,A(this,En)+1)}decrement(e){ve(this,er,A(this,er)-1),e&&ve(this,En,A(this,En)-1);for(const n of A(this,tr))tt(n,ct),Nn(n);for(const n of A(this,nr))tt(n,fn),Nn(n);ve(this,tr,[]),ve(this,nr,[]),this.flush()}add_callback(e){A(this,$n).add(e)}settled(){return(A(this,br)??ve(this,br,Wo())).promise}static ensure(){if(xe===null){const e=xe=new $r;Or.add(xe),Gn||$r.enqueue(()=>{xe===e&&e.flush()})}return xe}static enqueue(e){Mn(e)}apply(){}};Qn=new WeakMap,$n=new WeakMap,er=new WeakMap,En=new WeakMap,br=new WeakMap,tr=new WeakMap,nr=new WeakMap,Ye=new WeakSet,Na=function(e,n){e.f^=et;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Zt|In))!==0,i=s&&(o&et)!==0,l=i||(o&vt)!==0||this.skipped_effects.has(r);if((r.f&ra)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){s?r.f^=et:(o&Ja)!==0?n.effects.push(r):ua(r)&&((r.f&Xt)!==0&&n.block_effects.push(r),Xr(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(Le(this,Ye,wn).call(this,n.effects),Le(this,Ye,wn).call(this,n.render_effects),Le(this,Ye,wn).call(this,n.block_effects),n=n.parent),r=u.next,u=u.parent}},wn=function(e){for(const n of e)((n.f&ct)!==0?A(this,tr):A(this,nr)).push(n),tt(n,et)},La=function(){if(A(this,En)===0){for(const e of A(this,$n))e();A(this,$n).clear()}A(this,er)===0&&Le(this,Ye,ts).call(this)},ts=function(){var o;if(Or.size>1){A(this,Qn).clear();var e=Ct,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Or){if(s===this){n=!1;continue}const i=[];for(const[c,u]of this.current){if(s.current.has(c))if(n&&u!==s.current.get(c))s.current.set(c,u);else continue;i.push(c)}if(i.length===0)continue;const l=[...s.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){const c=new Set,u=new Map;for(const d of i)as(d,l,c,u);if(Lt.length>0){xe=s,s.apply();for(const d of Lt)Le(o=s,Ye,Na).call(o,d,r);Lt=[],s.deactivate()}}}xe=null,Ct=e}this.committed=!0,Or.delete(this),A(this,br)?.resolve()};let qt=$r;function ns(t){var e=Gn;Gn=!0;try{for(var n;;){if(ol(),Lt.length===0&&(xe?.flush(),Lt.length===0))return sa=null,n;rs()}}finally{Gn=e}}function rs(){var t=Zn;Aa=!0;try{var e=0;for(Po(!0);Lt.length>0;){var n=qt.ensure();if(e++>1e3){var r,o;il()}n.process(Lt),sn.clear()}}finally{Aa=!1,Po(t),sa=null}}function il(){try{Fi()}catch(t){ar(t,sa)}}let zt=null;function Co(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Vt|vt))===0&&ua(r)&&(zt=new Set,Xr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?ys(r):r.fn=null),zt?.size>0)){sn.clear();for(const o of zt){if((o.f&(Vt|vt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)zt.has(i)&&(zt.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(Vt|vt))===0&&Xr(c)}}zt.clear()}}zt=null}}function as(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Ze)!==0?as(o,e,n,r):(s&($a|Xt))!==0&&(s&ct)===0&&os(o,e,r)&&(tt(o,ct),Nn(o))}}function os(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Ze)!==0&&os(o,e,n))return n.set(o,!0),!0}return n.set(t,!1),!1}function Nn(t){for(var e=sa=t;e.parent!==null;){e=e.parent;var n=e.f;if(Aa&&e===be&&(n&Xt)!==0)return;if((n&(In|Zt))!==0){if((n&et)===0)return;e.f^=et}}Lt.push(e)}function ll(t){let e=0,n=Yt(0),r;return()=>{Sl()&&(a(n),ca(()=>(e===0&&(r=Ot(()=>t(()=>pr(n)))),e+=1,()=>{Mn(()=>{e-=1,e===0&&(r?.(),r=void 0,pr(n))})})))}}var cl=un|ir|ra;function ul(t,e,n){new dl(t,e,n)}var pt,gt,Ya,xt,kn,Dt,_t,st,At,Ht,nn,Pn,rn,Tn,an,ea,ta,qe,fl,vl,Ia,jr,Hr,Ma;class dl{constructor(e,n,r){ke(this,qe);ut(this,"parent");ke(this,pt,!1);ke(this,gt);ke(this,Ya,null);ke(this,xt);ke(this,kn);ke(this,Dt);ke(this,_t,null);ke(this,st,null);ke(this,At,null);ke(this,Ht,null);ke(this,nn,null);ke(this,Pn,0);ke(this,rn,0);ke(this,Tn,!1);ke(this,an,null);ke(this,ea,()=>{A(this,an)&&Wt(A(this,an),A(this,Pn))});ke(this,ta,ll(()=>(ve(this,an,Yt(A(this,Pn))),()=>{ve(this,an,null)})));ve(this,gt,e),ve(this,xt,n),ve(this,kn,r),this.parent=be.b,ve(this,pt,!!A(this,xt).pending),ve(this,Dt,ur(()=>{be.b=this;{var o=Le(this,qe,Ia).call(this);try{ve(this,_t,St(()=>r(o)))}catch(s){this.error(s)}A(this,rn)>0?Le(this,qe,Hr).call(this):ve(this,pt,!1)}return()=>{A(this,nn)?.remove()}},cl))}is_pending(){return A(this,pt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!A(this,xt).pending}update_pending_count(e){Le(this,qe,Ma).call(this,e),ve(this,Pn,A(this,Pn)+e),Da.add(A(this,ea))}get_effect_pending(){return A(this,ta).call(this),a(A(this,an))}error(e){var n=A(this,xt).onerror;let r=A(this,xt).failed;if(A(this,Tn)||!n&&!r)throw e;A(this,_t)&&(lt(A(this,_t)),ve(this,_t,null)),A(this,st)&&(lt(A(this,st)),ve(this,st,null)),A(this,At)&&(lt(A(this,At)),ve(this,At,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&qi(),qt.ensure(),ve(this,Pn,0),A(this,At)!==null&&Xn(A(this,At),()=>{ve(this,At,null)}),ve(this,pt,this.has_pending_snippet()),ve(this,_t,Le(this,qe,jr).call(this,()=>(ve(this,Tn,!1),St(()=>A(this,kn).call(this,A(this,gt)))))),A(this,rn)>0?Le(this,qe,Hr).call(this):ve(this,pt,!1)};var l=_e;try{it(null),s=!0,n?.(e,i),s=!1}catch(c){ar(c,A(this,Dt)&&A(this,Dt).parent)}finally{it(l)}r&&Mn(()=>{ve(this,At,Le(this,qe,jr).call(this,()=>{qt.ensure(),ve(this,Tn,!0);try{return St(()=>{r(A(this,gt),()=>e,()=>i)})}catch(c){return ar(c,A(this,Dt).parent),null}finally{ve(this,Tn,!1)}}))})}}pt=new WeakMap,gt=new WeakMap,Ya=new WeakMap,xt=new WeakMap,kn=new WeakMap,Dt=new WeakMap,_t=new WeakMap,st=new WeakMap,At=new WeakMap,Ht=new WeakMap,nn=new WeakMap,Pn=new WeakMap,rn=new WeakMap,Tn=new WeakMap,an=new WeakMap,ea=new WeakMap,ta=new WeakMap,qe=new WeakSet,fl=function(){try{ve(this,_t,St(()=>A(this,kn).call(this,A(this,gt))))}catch(e){this.error(e)}ve(this,pt,!1)},vl=function(){const e=A(this,xt).pending;e&&(ve(this,st,St(()=>e(A(this,gt)))),qt.enqueue(()=>{var n=Le(this,qe,Ia).call(this);ve(this,_t,Le(this,qe,jr).call(this,()=>(qt.ensure(),St(()=>A(this,kn).call(this,n))))),A(this,rn)>0?Le(this,qe,Hr).call(this):(Xn(A(this,st),()=>{ve(this,st,null)}),ve(this,pt,!1))}))},Ia=function(){var e=A(this,gt);return A(this,pt)&&(ve(this,nn,dn()),A(this,gt).before(A(this,nn)),e=A(this,nn)),e},jr=function(e){var n=be,r=_e,o=De;It(A(this,Dt)),it(A(this,Dt)),rr(A(this,Dt).ctx);try{return e()}catch(s){return $o(s),null}finally{It(n),it(r),rr(o)}},Hr=function(){const e=A(this,xt).pending;A(this,_t)!==null&&(ve(this,Ht,document.createDocumentFragment()),A(this,Ht).append(A(this,nn)),Ss(A(this,_t),A(this,Ht))),A(this,st)===null&&ve(this,st,St(()=>e(A(this,gt))))},Ma=function(e){var n;if(!this.has_pending_snippet()){this.parent&&Le(n=this.parent,qe,Ma).call(n,e);return}ve(this,rn,A(this,rn)+e),A(this,rn)===0&&(ve(this,pt,!1),A(this,st)&&Xn(A(this,st),()=>{ve(this,st,null)}),A(this,Ht)&&(A(this,gt).before(A(this,Ht)),ve(this,Ht,null)))};function hl(t,e,n){const r=cr()?Er:ia;if(e.length===0){n(t.map(r));return}var o=xe,s=be,i=ss();Promise.all(e.map(l=>pl(l))).then(l=>{i();try{n([...t.map(r),...l])}catch(c){(s.f&Vt)===0&&ar(c,s)}o?.deactivate(),Yr()}).catch(l=>{ar(l,s)})}function ss(){var t=be,e=_e,n=De,r=xe;return function(){It(t),it(e),rr(n),r?.activate()}}function Yr(){It(null),it(null),rr(null)}function Er(t){var e=Ze|ct,n=_e!==null&&(_e.f&Ze)!==0?_e:null;return be===null||n!==null&&(n.f&mt)!==0?e|=mt:be.f|=ir,{ctx:De,deps:null,effects:null,equals:Xo,f:e,fn:t,reactions:null,rv:0,v:Ke,wv:0,parent:n??be,ac:null}}function pl(t,e){let n=be;n===null&&Mi();var r=n.b,o=void 0,s=Yt(Ke),i=!_e,l=new Map;return Pl(()=>{var c=Wo();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===xe&&u.committed&&u.deactivate(),Yr()})}catch(v){c.reject(v),Yr()}var u=xe;if(i){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(Wn),l.delete(u),l.set(u,c)}const f=(v,_=void 0)=>{if(u.activate(),_)_!==Wn&&(s.f|=xn,Wt(s,_));else{(s.f&xn)!==0&&(s.f^=xn),Wt(s,v);for(const[p,y]of l){if(l.delete(p),p===u)break;y.reject(Wn)}}i&&(r.update_pending_count(-1),u.decrement(d))};c.promise.then(f,v=>f(null,v||"unknown"))}),ps(()=>{for(const c of l.values())c.reject(Wn)}),new Promise(c=>{function u(d){function f(){d===o?c(s):u(o)}d.then(f,f)}u(o)})}function N(t){const e=Er(t);return Cs(e),e}function ia(t){const e=Er(t);return e.equals=Zo,e}function is(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)lt(e[n])}}function gl(t){for(var e=t.parent;e!==null;){if((e.f&Ze)===0)return e;e=e.parent}return null}function eo(t){var e,n=be;It(gl(t));try{t.f&=~Kr,is(t),e=Ts(t)}finally{It(n)}return e}function ls(t){var e=eo(t);if(t.equals(e)||(t.v=e,t.wv=ks()),!On)if(Ct!==null)Ct.set(t,t.v);else{var n=(on||(t.f&mt)!==0)&&t.deps!==null?fn:et;tt(t,n)}}const sn=new Map;function Yt(t,e){var n={f:0,v:t,reactions:null,equals:Xo,rv:0,wv:0};return n}function H(t,e){const n=Yt(t);return Cs(n),n}function Oa(t,e=!1,n=!0){var o;const r=Yt(t);return e||(r.equals=Zo),lr&&n&&De!==null&&De.l!==null&&((o=De.l).s??(o.s=[])).push(r),r}function h(t,e,n=!1){_e!==null&&(!Et||(_e.f&So)!==0)&&cr()&&(_e.f&(Ze|Xt|$a|So))!==0&&!Kt?.includes(t)&&Ui();let r=n?Ge(e):e;return Wt(t,r)}function Wt(t,e){if(!t.equals(e)){var n=t.v;On?sn.set(t,e):sn.set(t,n),t.v=e;var r=qt.ensure();r.capture(t,n),(t.f&Ze)!==0&&((t.f&ct)!==0&&eo(t),tt(t,(t.f&mt)===0?et:fn)),t.wv=ks(),cs(t,ct),cr()&&be!==null&&(be.f&et)!==0&&(be.f&(Zt|In))===0&&(ht===null?Dl([t]):ht.push(t))}return e}function pr(t){h(t,t.v+1)}function cs(t,e){var n=t.reactions;if(n!==null)for(var r=cr(),o=n.length,s=0;s<o;s++){var i=n[s],l=i.f;if(!(!r&&i===be)){var c=(l&ct)===0;c&&tt(i,e),(l&Ze)!==0?(l&Kr)===0&&(i.f|=Kr,cs(i,fn)):c&&((l&Xt)!==0&&zt!==null&&zt.add(i),Nn(i))}}}function Ge(t){if(typeof t!="object"||t===null||Dn in t)return t;const e=Za(t);if(e!==Pi&&e!==Ti)return t;var n=new Map,r=Ga(t),o=H(0),s=An,i=l=>{if(An===s)return l();var c=_e,u=An;it(null),xo(s);var d=l();return it(c),xo(u),d};return r&&n.set("length",H(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&ji();var d=n.get(c);return d===void 0?d=i(()=>{var f=H(u.value);return n.set(c,f),f}):h(d,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const d=i(()=>H(Ke));n.set(c,d),pr(o)}}else h(u,Ke),pr(o);return!0},get(l,c,u){if(c===Dn)return t;var d=n.get(c),f=c in l;if(d===void 0&&(!f||Yn(l,c)?.writable)&&(d=i(()=>{var _=Ge(f?l[c]:Ke),p=H(_);return p}),n.set(c,d)),d!==void 0){var v=a(d);return v===Ke?void 0:v}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=n.get(c);d&&(u.value=a(d))}else if(u===void 0){var f=n.get(c),v=f?.v;if(f!==void 0&&v!==Ke)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,c){if(c===Dn)return!0;var u=n.get(c),d=u!==void 0&&u.v!==Ke||Reflect.has(l,c);if(u!==void 0||be!==null&&(!d||Yn(l,c)?.writable)){u===void 0&&(u=i(()=>{var v=d?Ge(l[c]):Ke,_=H(v);return _}),n.set(c,u));var f=a(u);if(f===Ke)return!1}return d},set(l,c,u,d){var f=n.get(c),v=c in l;if(r&&c==="length")for(var _=u;_<f.v;_+=1){var p=n.get(_+"");p!==void 0?h(p,Ke):_ in l&&(p=i(()=>H(Ke)),n.set(_+"",p))}if(f===void 0)(!v||Yn(l,c)?.writable)&&(f=i(()=>H(void 0)),h(f,Ge(u)),n.set(c,f));else{v=f.v!==Ke;var y=i(()=>Ge(u));h(f,y)}var m=Reflect.getOwnPropertyDescriptor(l,c);if(m?.set&&m.set.call(d,u),!v){if(r&&typeof c=="string"){var T=n.get("length"),S=Number(c);Number.isInteger(S)&&S>=T.v&&h(T,S+1)}pr(o)}return!0},ownKeys(l){a(o);var c=Reflect.ownKeys(l).filter(f=>{var v=n.get(f);return v===void 0||v.v!==Ke});for(var[u,d]of n)d.v!==Ke&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Hi()}})}var Eo,us,ds,fs;function _l(){if(Eo===void 0){Eo=window,us=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;ds=Yn(e,"firstChild").get,fs=Yn(e,"nextSibling").get,bo(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),bo(n)&&(n.__t=void 0)}}function dn(t=""){return document.createTextNode(t)}function or(t){return ds.call(t)}function kr(t){return fs.call(t)}function b(t,e){return or(t)}function R(t,e=!1){{var n=or(t);return n instanceof Comment&&n.data===""?kr(n):n}}function U(t,e=1,n=!1){let r=t;for(;e--;)r=kr(r);return r}function ml(t){t.textContent=""}function vs(){return!1}let ko=!1;function yl(){ko||(ko=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function la(t){var e=_e,n=be;it(null),It(null);try{return t()}finally{it(e),It(n)}}function wl(t,e,n,r=n){t.addEventListener(e,()=>la(n));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),yl()}function hs(t){be===null&&_e===null&&Bi(),_e!==null&&(_e.f&mt)!==0&&be===null&&Ri(),On&&Oi()}function bl(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Mt(t,e,n,r=!0){var o=be;o!==null&&(o.f&vt)!==0&&(t|=vt);var s={ctx:De,deps:null,nodes_start:null,nodes_end:null,f:t|ct,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Xr(s),s.f|=Qa}catch(c){throw lt(s),c}else e!==null&&Nn(s);if(r){var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&ir)===0&&(i=i.first,(t&Xt)!==0&&(t&un)!==0&&i!==null&&(i.f|=un)),i!==null&&(i.parent=o,o!==null&&bl(i,o),_e!==null&&(_e.f&Ze)!==0&&(t&In)===0)){var l=_e;(l.effects??(l.effects=[])).push(i)}}return s}function Sl(){return _e!==null&&!Et}function ps(t){const e=Mt(na,null,!1);return tt(e,et),e.teardown=t,e}function Ae(t){hs();var e=be.f,n=!_e&&(e&Zt)!==0&&(e&Qa)===0;if(n){var r=De;(r.e??(r.e=[])).push(t)}else return gs(t)}function gs(t){return Mt(Ja|Ko,t,!1)}function Cl(t){return hs(),Mt(na|Ko,t,!0)}function El(t){qt.ensure();const e=Mt(In|ir,t,!0);return(n={})=>new Promise(r=>{n.outro?Xn(e,()=>{lt(e),r(void 0)}):(lt(e),r(void 0))})}function kl(t){return Mt(Ja,t,!1)}function Pl(t){return Mt($a|ir,t,!0)}function ca(t,e=0){return Mt(na|e,t,!0)}function fe(t,e=[],n=[]){hl(e,n,r=>{Mt(na,()=>t(...r.map(a)),!0)})}function ur(t,e=0){var n=Mt(Xt|e,t,!0);return n}function St(t,e=!0){return Mt(Zt|ir,t,!0,e)}function _s(t){var e=t.teardown;if(e!==null){const n=On,r=_e;To(!0),it(null);try{e.call(null)}finally{To(n),it(r)}}}function ms(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const o=n.ac;o!==null&&la(()=>{o.abort(Wn)});var r=n.next;(n.f&In)!==0?n.parent=null:lt(n,e),n=r}}function Tl(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Zt)===0&&lt(e),e=n}}function lt(t,e=!0){var n=!1;(e||(t.f&Ni)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(xl(t.nodes_start,t.nodes_end),n=!0),ms(t,e&&!n),Gr(t,0),tt(t,Vt);var r=t.transitions;if(r!==null)for(const s of r)s.stop();_s(t);var o=t.parent;o!==null&&o.first!==null&&ys(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function xl(t,e){for(;t!==null;){var n=t===e?null:kr(t);t.remove(),t=n}}function ys(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Xn(t,e,n=!0){var r=[];to(t,r,!0),ws(r,()=>{n&&lt(t),e&&e()})}function ws(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var o of t)o.out(r)}else e()}function to(t,e,n){if((t.f&vt)===0){if(t.f^=vt,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var o=r.next,s=(r.f&un)!==0||(r.f&Zt)!==0&&(t.f&Xt)!==0;to(r,e,s?n:!1),r=o}}}function no(t){bs(t,!0)}function bs(t,e){if((t.f&vt)!==0){t.f^=vt,(t.f&et)===0&&(tt(t,ct),Nn(t));for(var n=t.first;n!==null;){var r=n.next,o=(n.f&un)!==0||(n.f&Zt)!==0;bs(n,o?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function Ss(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var o=n===r?null:kr(n);e.append(n),n=o}}let Zn=!1;function Po(t){Zn=t}let On=!1;function To(t){On=t}let _e=null,Et=!1;function it(t){_e=t}let be=null;function It(t){be=t}let Kt=null;function Cs(t){_e!==null&&(Kt===null?Kt=[t]:Kt.push(t))}let $e=null,dt=0,ht=null;function Dl(t){ht=t}let Es=1,mr=0,An=mr;function xo(t){An=t}let on=!1;function ks(){return++Es}function ua(t){var e=t.f;if((e&ct)!==0)return!0;if((e&fn)!==0){var n=t.deps,r=(e&mt)!==0;if(e&Ze&&(t.f&=~Kr),n!==null){var o,s,i=(e&Wr)!==0,l=r&&be!==null&&!on,c=n.length;if((i||l)&&(be===null||(be.f&Vt)===0)){var u=t,d=u.parent;for(o=0;o<c;o++)s=n[o],(i||!s?.reactions?.includes(u))&&(s.reactions??(s.reactions=[])).push(u);i&&(u.f^=Wr),l&&d!==null&&(d.f&mt)===0&&(u.f^=mt)}for(o=0;o<c;o++)if(s=n[o],ua(s)&&ls(s),s.wv>t.wv)return!0}(!r||be!==null&&!on)&&tt(t,et)}return!1}function Ps(t,e,n=!0){var r=t.reactions;if(r!==null&&!Kt?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Ze)!==0?Ps(s,e,!1):e===s&&(n?tt(s,ct):(s.f&et)!==0&&tt(s,fn),Nn(s))}}function Ts(t){var y;var e=$e,n=dt,r=ht,o=_e,s=on,i=Kt,l=De,c=Et,u=An,d=t.f;$e=null,dt=0,ht=null,on=(d&mt)!==0&&(Et||!Zn||_e===null),_e=(d&(Zt|In))===0?t:null,Kt=null,rr(t.ctx),Et=!1,An=++mr,t.ac!==null&&(la(()=>{t.ac.abort(Wn)}),t.ac=null);try{t.f|=xa;var f=t.fn,v=f(),_=t.deps;if($e!==null){var p;if(Gr(t,dt),_!==null&&dt>0)for(_.length=dt+$e.length,p=0;p<$e.length;p++)_[dt+p]=$e[p];else t.deps=_=$e;if(!on||(d&Ze)!==0&&t.reactions!==null)for(p=dt;p<_.length;p++)((y=_[p]).reactions??(y.reactions=[])).push(t)}else _!==null&&dt<_.length&&(Gr(t,dt),_.length=dt);if(cr()&&ht!==null&&!Et&&_!==null&&(t.f&(Ze|fn|ct))===0)for(p=0;p<ht.length;p++)Ps(ht[p],t);return o!==null&&o!==t&&(mr++,ht!==null&&(r===null?r=ht:r.push(...ht))),(t.f&xn)!==0&&(t.f^=xn),v}catch(m){return $o(m)}finally{t.f^=xa,$e=e,dt=n,ht=r,_e=o,on=s,Kt=i,rr(l),Et=c,An=u}}function Al(t,e){let n=e.reactions;if(n!==null){var r=ki.call(n,t);if(r!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(e.f&Ze)!==0&&($e===null||!$e.includes(e))&&(tt(e,fn),(e.f&(mt|Wr))===0&&(e.f^=Wr),is(e),Gr(e,0))}function Gr(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Al(t,n[r])}function Xr(t){var e=t.f;if((e&Vt)===0){tt(t,et);var n=be,r=Zn;be=t,Zn=!0;try{(e&Xt)!==0?Tl(t):ms(t),_s(t);var o=Ts(t);t.teardown=typeof o=="function"?o:null,t.wv=Es;var s;qo&&nl&&(t.f&ct)!==0&&t.deps}finally{Zn=r,be=n}}}async function xs(){await Promise.resolve(),ns()}function a(t){var e=t.f,n=(e&Ze)!==0;if(_e!==null&&!Et){var r=be!==null&&(be.f&Vt)!==0;if(!r&&!Kt?.includes(t)){var o=_e.deps;if((_e.f&xa)!==0)t.rv<mr&&(t.rv=mr,$e===null&&o!==null&&o[dt]===t?dt++:$e===null?$e=[t]:(!on||!$e.includes(t))&&$e.push(t));else{(_e.deps??(_e.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[_e]:s.includes(_e)||s.push(_e)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&mt)===0&&(i.f^=mt)}if(On){if(sn.has(t))return sn.get(t);if(n){i=t;var c=i.v;return((i.f&et)===0&&i.reactions!==null||Ds(i))&&(c=eo(i)),sn.set(i,c),c}}else if(n){if(i=t,Ct?.has(i))return Ct.get(i);ua(i)&&ls(i)}if(Ct?.has(t))return Ct.get(t);if((t.f&xn)!==0)throw t.v;return t.v}function Ds(t){if(t.v===Ke)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(sn.has(e)||(e.f&Ze)!==0&&Ds(e))return!0;return!1}function Ot(t){var e=Et;try{return Et=!0,t()}finally{Et=e}}const Nl=-7169;function tt(t,e){t.f=t.f&Nl|e}function Ll(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Dn in t)Ra(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Dn in n&&Ra(n)}}}function Ra(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Ra(t[r],e)}catch{}const n=Za(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Vo(n);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Il=["touchstart","touchmove"];function Ml(t){return Il.includes(t)}const As=new Set,Ba=new Set;function Ol(t,e,n,r={}){function o(s){if(r.capture||dr.call(e,s),!s.cancelBubble)return la(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Mn(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function ro(t,e,n,r,o){var s={capture:r,passive:o},i=Ol(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ps(()=>{e.removeEventListener(t,i,s)})}function Xe(t){for(var e=0;e<t.length;e++)As.add(t[e]);for(var n of Ba)n(t)}let Do=null;function dr(t){var e=this,n=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;Do=t;var i=0,l=Do===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){Pa(t,"currentTarget",{configurable:!0,get(){return s||n}});var d=_e,f=be;it(null),It(null);try{for(var v,_=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var y=s["__"+r];if(y!=null&&(!s.disabled||t.target===s))if(Ga(y)){var[m,...T]=y;m.apply(s,[t,...T])}else y.call(s,t)}catch(S){v?_.push(S):v=S}if(t.cancelBubble||p===e||p===null)break;s=p}if(v){for(let S of _)queueMicrotask(()=>{throw S});throw v}}finally{t.__root=e,delete t.currentTarget,it(d),It(f)}}}function Ns(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function yr(t,e){var n=be;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function W(t,e){var n=(e&Ji)!==0,r=(e&Qi)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=Ns(s?t:"<!>"+t),n||(o=or(o)));var i=r||us?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=or(i),c=i.lastChild;yr(l,c)}else yr(i,i);return i}}function Rl(t,e,n="svg"){var r=!t.startsWith("<!>"),o=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=Ns(o),l=or(i);s=or(l)}var c=s.cloneNode(!0);return yr(c,c),c}}function Bl(t,e){return Rl(t,e,"svg")}function Ie(t=""){{var e=dn(t+"");return yr(e,e),e}}function $(){var t=document.createDocumentFragment(),e=document.createComment(""),n=dn();return t.append(e,n),yr(e,n),t}function g(t,e){t!==null&&t.before(e)}function ov(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function ln(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Fl(t,e){return zl(t,e)}const qn=new Map;function zl(t,{target:e,anchor:n,props:r={},events:o,context:s,intro:i=!0}){_l();var l=new Set,c=f=>{for(var v=0;v<f.length;v++){var _=f[v];if(!l.has(_)){l.add(_);var p=Ml(_);e.addEventListener(_,dr,{passive:p});var y=qn.get(_);y===void 0?(document.addEventListener(_,dr,{passive:p}),qn.set(_,1)):qn.set(_,y+1)}}};c(Xa(As)),Ba.add(c);var u=void 0,d=El(()=>{var f=n??e.appendChild(dn());return ul(f,{pending:()=>{}},v=>{if(s){ie({});var _=De;_.c=s}o&&(r.$$events=o),u=t(v,r)||{},s&&le()}),()=>{for(var v of l){e.removeEventListener(v,dr);var _=qn.get(v);--_===0?(document.removeEventListener(v,dr),qn.delete(v)):qn.set(v,_)}Ba.delete(c),f!==n&&f.parentNode?.removeChild(f)}});return jl.set(u,d),u}let jl=new WeakMap;var Ut,Nt,bt,Sr,Cr;class da{constructor(e,n=!0){ut(this,"anchor");ke(this,Ut,new Map);ke(this,Nt,new Map);ke(this,bt,new Map);ke(this,Sr,!0);ke(this,Cr,()=>{var e=xe;if(A(this,Ut).has(e)){var n=A(this,Ut).get(e),r=A(this,Nt).get(n);if(r)no(r);else{var o=A(this,bt).get(n);o&&(A(this,Nt).set(n,o.effect),A(this,bt).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of A(this,Ut)){if(A(this,Ut).delete(s),s===e)break;const l=A(this,bt).get(i);l&&(lt(l.effect),A(this,bt).delete(i))}for(const[s,i]of A(this,Nt)){if(s===n)continue;const l=()=>{if(Array.from(A(this,Ut).values()).includes(s)){var u=document.createDocumentFragment();Ss(i,u),u.append(dn()),A(this,bt).set(s,{effect:i,fragment:u})}else lt(i);A(this,Nt).delete(s)};A(this,Sr)||!r?Xn(i,l,!1):l()}}});this.anchor=e,ve(this,Sr,n)}ensure(e,n){var r=xe,o=vs();if(n&&!A(this,Nt).has(e)&&!A(this,bt).has(e))if(o){var s=document.createDocumentFragment(),i=dn();s.append(i),A(this,bt).set(e,{effect:St(()=>n(i)),fragment:s})}else A(this,Nt).set(e,St(()=>n(this.anchor)));if(A(this,Ut).set(r,e),o){for(const[l,c]of A(this,Nt))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of A(this,bt))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.add_callback(A(this,Cr))}else A(this,Cr).call(this)}}Ut=new WeakMap,Nt=new WeakMap,bt=new WeakMap,Sr=new WeakMap,Cr=new WeakMap;const Hl=0,Sa=1;function Ul(t,e,n,r,o){var s=cr(),i=Ke,l=s?Yt(i):Oa(i,!1,!1),c=s?Yt(i):Oa(i,!1,!1),u=new da(t);ur(()=>{var d=e(),f=!1;if(xi(d)){var v=ss(),_=!1;const p=y=>{if(!f){_=!0,v();try{y()}finally{Yr(),Gn||ns()}}};d.then(y=>{p(()=>{Wt(l,y),u.ensure(Sa,r&&(m=>r(m,l)))})},y=>{p(()=>{if(Wt(c,y),u.ensure(Sa,o&&(m=>o(m,c))),!o)throw c.v})}),Mn(()=>{_||p(()=>{u.ensure(Hl,n)})})}else Wt(l,d),u.ensure(Sa,r&&(p=>r(p,l)));return()=>{f=!0}})}function V(t,e,n=!1){var r=new da(t),o=n?un:0;function s(i,l){r.ensure(i,l)}ur(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function ue(t,e){ca(()=>{var n=e();for(var r in n){var o=n[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function ql(t,e,n){for(var r=t.items,o=[],s=e.length,i=0;i<s;i++)to(e[i].e,o,!0);var l=s>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;ml(c),c.append(n),r.clear(),Tt(t,e[0].prev,e[s-1].next)}ws(o,()=>{for(var u=0;u<s;u++){var d=e[u];l||(r.delete(d.k),Tt(t,d.prev,d.next)),lt(d.e,!l)}})}function fa(t,e,n,r,o,s=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&Go)!==0;if(c){var u=t;i=u.appendChild(dn())}var d=null,f=!1,v=new Map,_=ia(()=>{var T=n();return Ga(T)?T:T==null?[]:Xa(T)}),p,y;function m(){Vl(y,p,l,v,i,o,e,r,n),s!==null&&(p.length===0?d?no(d):d=St(()=>s(i)):d!==null&&Xn(d,()=>{d=null}))}ur(()=>{y??(y=be),p=a(_);var T=p.length;if(!(f&&T===0)){f=T===0;var S,C,w,P;if(vs()){var E=new Set,O=xe;for(C=0;C<T;C+=1){w=p[C],P=r(w,C);var x=l.items.get(P)??v.get(P);x?(e&(aa|oa))!==0&&Ls(x,w,C,e):(S=Is(null,l,null,null,w,P,C,o,e,n,!0),v.set(P,S)),E.add(P)}for(const[B,j]of l.items)E.has(B)||O.skipped_effects.add(j.e);O.add_callback(m)}else m();a(_)}})}function Vl(t,e,n,r,o,s,i,l,c){var u=(i&Vi)!==0,d=(i&(aa|oa))!==0,f=e.length,v=n.items,_=n.first,p=_,y,m=null,T,S=[],C=[],w,P,E,O;if(u)for(O=0;O<f;O+=1)w=e[O],P=l(w,O),E=v.get(P),E!==void 0&&(E.a?.measure(),(T??(T=new Set)).add(E));for(O=0;O<f;O+=1){if(w=e[O],P=l(w,O),E=v.get(P),E===void 0){var x=r.get(P);if(x!==void 0){r.delete(P),v.set(P,x);var B=m?m.next:p;Tt(n,m,x),Tt(n,x,B),Ca(x,B,o),m=x}else{var j=p?p.e.nodes_start:o;m=Is(j,n,m,m===null?n.first:m.next,w,P,O,s,i,c)}v.set(P,m),S=[],C=[],p=m.next;continue}if(d&&Ls(E,w,O,i),(E.e.f&vt)!==0&&(no(E.e),u&&(E.a?.unfix(),(T??(T=new Set)).delete(E))),E!==p){if(y!==void 0&&y.has(E)){if(S.length<C.length){var L=C[0],K;m=L.prev;var Z=S[0],I=S[S.length-1];for(K=0;K<S.length;K+=1)Ca(S[K],L,o);for(K=0;K<C.length;K+=1)y.delete(C[K]);Tt(n,Z.prev,I.next),Tt(n,m,Z),Tt(n,I,L),p=L,m=I,O-=1,S=[],C=[]}else y.delete(E),Ca(E,p,o),Tt(n,E.prev,E.next),Tt(n,E,m===null?n.first:m.next),Tt(n,m,E),m=E;continue}for(S=[],C=[];p!==null&&p.k!==P;)(p.e.f&vt)===0&&(y??(y=new Set)).add(p),C.push(p),p=p.next;if(p===null)continue;E=p}S.push(E),m=E,p=E.next}if(p!==null||y!==void 0){for(var ne=y===void 0?[]:Xa(y);p!==null;)(p.e.f&vt)===0&&ne.push(p),p=p.next;var te=ne.length;if(te>0){var X=(i&Go)!==0&&f===0?o:null;if(u){for(O=0;O<te;O+=1)ne[O].a?.measure();for(O=0;O<te;O+=1)ne[O].a?.fix()}ql(n,ne,X)}}u&&Mn(()=>{if(T!==void 0)for(E of T)E.a?.apply()}),t.first=n.first&&n.first.e,t.last=m&&m.e;for(var J of r.values())lt(J.e);r.clear()}function Ls(t,e,n,r){(r&aa)!==0&&Wt(t.v,e),(r&oa)!==0?Wt(t.i,n):t.i=n}function Is(t,e,n,r,o,s,i,l,c,u,d){var f=(c&aa)!==0,v=(c&Wi)===0,_=f?v?Oa(o,!1,!1):Yt(o):o,p=(c&oa)===0?i:Yt(i),y={i:p,v:_,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var m=document.createDocumentFragment();m.append(t=dn())}return y.e=St(()=>l(t,_,p,u),el),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?d||(e.first=y):(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function Ca(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var i=kr(s);o.before(s),s=i}}function Tt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Ce(t,e,...n){var r=new da(t);ur(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...n)))},un)}function Wl(t,e,n){var r=new da(t);ur(()=>{var o=e()??null;r.ensure(o,o&&(s=>n(s,o)))},un)}function Ms(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=Ms(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Kl(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=Ms(t))&&(r&&(r+=" "),r+=e);return r}function me(t){return typeof t=="object"?Kl(t):t??""}const Ao=[...` 	
\r\f \v\uFEFF`];function Yl(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||Ao.includes(r[i-1]))&&(l===r.length||Ao.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Gl(t,e){return t==null?null:String(t)}function ye(t,e,n,r,o,s){var i=t.__className;if(i!==n||i===void 0){var l=Yl(n,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function Ln(t,e,n,r){var o=t.__style;if(o!==e){var s=Gl(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Xl=Symbol("is custom element"),Zl=Symbol("is html");function sv(t,e){var n=ao(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function iv(t,e){var n=ao(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Re(t,e,n,r){var o=ao(t);o[e]!==(o[e]=n)&&(e==="loading"&&(t[Ii]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Jl(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function ao(t){return t.__attributes??(t.__attributes={[Xl]:t.nodeName.includes("-"),[Zl]:t.namespaceURI===$i})}var No=new Map;function Jl(t){var e=t.getAttribute("is")||t.nodeName,n=No.get(e);if(n)return n;No.set(e,n=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Vo(o);for(var i in r)r[i].set&&n.push(i);o=Za(o)}return n}function Ql(t,e,n=e){var r=new WeakSet;wl(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=Ea(t)?ka(s):s,n(s),xe!==null&&r.add(xe),await xs(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),Ot(e)==null&&t.value&&(n(Ea(t)?ka(t.value):t.value),xe!==null&&r.add(xe)),ca(()=>{var o=e();if(t===document.activeElement){var s=zr??xe;if(r.has(s))return}Ea(t)&&o===ka(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Ea(t){var e=t.type;return e==="number"||e==="range"}function ka(t){return t===""?null:+t}function Lo(t,e){return t===e||t?.[Dn]===e}function Je(t={},e,n,r){return kl(()=>{var o,s;return ca(()=>{o=s,s=[],Ot(()=>{t!==n(...s)&&(e(t,...s),o&&Lo(n(...o),t)&&e(null,...o))})}),()=>{Mn(()=>{s&&Lo(n(...s),t)&&e(null,...s)})}}),t}function va(t=!1){const e=De,n=e.l.u;if(!n)return;let r=()=>Ll(e.s);if(t){let o=0,s={};const i=Er(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>a(i)}n.b.length&&Cl(()=>{Io(e,r),Ta(n.b)}),Ae(()=>{const o=Ot(()=>n.m.map(Di));return()=>{for(const s of o)typeof s=="function"&&s()}}),n.a.length&&Ae(()=>{Io(e,r),Ta(n.a)})}function Io(t,e){if(t.l.s)for(const n of t.l.s)a(n);e()}let Rr=!1;function $l(t){var e=Rr;try{return Rr=!1,[t(),Rr]}finally{Rr=e}}function ge(t,e,n,r){var o=!lr||(n&Yi)!==0,s=(n&Xi)!==0,i=(n&Zi)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?Ot(r):r),l),d;if(s){var f=Dn in t||Li in t;d=Yn(t,e)?.set??(f&&e in t?C=>t[e]=C:void 0)}var v,_=!1;s?[v,_]=$l(()=>t[e]):v=t[e],v===void 0&&r!==void 0&&(v=u(),d&&(o&&zi(),d(v)));var p;if(o?p=()=>{var C=t[e];return C===void 0?u():(c=!0,C)}:p=()=>{var C=t[e];return C!==void 0&&(l=void 0),C===void 0?l:C},o&&(n&Gi)===0)return p;if(d){var y=t.$$legacy;return(function(C,w){return arguments.length>0?((!o||!w||y||_)&&d(w?p():C),C):p()})}var m=!1,T=((n&Ki)!==0?Er:ia)(()=>(m=!1,p()));s&&a(T);var S=be;return(function(C,w){if(arguments.length>0){const P=w?a(T):o&&s?Ge(C):C;return h(T,P),m=!0,l!==void 0&&(l=P),C}return On&&m||(S.f&Vt)!==0?T.v:a(T)})}function Se(t){De===null&&Yo(),lr&&De.l!==null?ec(De).m.push(t):Ae(()=>{const e=Ot(t);if(typeof e=="function")return e})}function ec(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const tc="5";var Uo;typeof window<"u"&&((Uo=window.__svelte??(window.__svelte={})).v??(Uo.v=new Set)).add(tc);rl();const Os={};function nc(t){je(Os,t)}function Rs(){const t=Ve(Os);if(!t)throw new Error("No FeedSearchContext found");return t}const Bs={};function rc(t){je(Bs,t)}function kt(){const t=Ve(Bs);if(!t)throw new Error("No AppHistoryContext found");return t}function ac(t,e){ie(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=kt(),s="feedSearch",i=N(()=>o().searchParams.get(s)||""),l=N(()=>a(i));nc({getFeedSearch:()=>a(l),setFeedSearch:d=>{d===""?r(s):n(s,d)}});var c=$(),u=R(c);Ce(u,()=>e.children??Te),g(t,c),le()}const Fs={};function oc(t){je(Fs,t)}function sc(){const t=Ve(Fs);if(!t)throw new Error("No TagsSearchContext found");return t}function ic(t,e){ie(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=kt(),s="tagsSearch",i=N(()=>o().searchParams.get(s)||""),l=N(()=>a(i));oc({getTagsSearch:()=>a(l),setTagsSearch:d=>{d===""?r(s):n(s,d)}});var c=$(),u=R(c);Ce(u,()=>e.children??Te),g(t,c),le()}const zs={};function lc(t){je(zs,t)}function js(){const t=Ve(zs);if(!t)throw new Error("No FeedOrderContext found");return t}function cc(t,e){ie(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=kt(),s="feedOrder",i=N(()=>o().searchParams.get(s)||"newest"),l=N(()=>a(i));lc({getFeedOrder:()=>a(l),setFeedOrder:d=>{d==="newest"?r(s):n(s,d)}});var c=$(),u=R(c);Ce(u,()=>e.children??Te),g(t,c),le()}const Hs={};function uc(t){je(Hs,t)}function ha(){const t=Ve(Hs);if(!t)throw new Error("No SidebarContext found");return t}function dc(t,e){ie(e,!0);const n=(d,f)=>{if(!f)return d;if(f.type==="closed")return{type:"closed"};switch(d.type){case"opened":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:f.type==="swipe"?{type:"openSwiping"}:d;case"closed":return f.type==="open"?{type:"opening"}:f.type==="swipe"?{type:"closeSwiping"}:d;case"openSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"closeSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"opening":return f.type==="opened"?{type:"opened"}:d;default:return d}};let r=H(Ge(n({type:"closed"})));const o=d=>{const f=Ot(()=>a(r));h(r,n(f,d),!0)};uc({sidebarOpen:()=>{o({type:"open"})},sidebarClose:()=>{o({type:"close"})},handleComputeState:o,getSidebarState:()=>a(r)});var c=$(),u=R(c);Ce(u,()=>e.children??Te),g(t,c),le()}const Us={};function fc(t){je(Us,t)}function oo(){const t=Ve(Us);if(!t)throw new Error("No SelectedTagsContext found");return t}function vc(t,e){ie(e,!0);const{getAppLocation:n,setSearchParam:r,deleteSearchParam:o}=kt(),s=N(n),i=N(()=>a(s).searchParams),l="selectedTags";let c=N(()=>a(i).get(l)||""),u=N(()=>new Set(a(c).split(",").map(T=>decodeURIComponent(T)).filter(T=>T!=="")));fc({getSelectedTags:()=>a(u),addTag:T=>{a(u).has(T)||r(l,[...a(u),T].map(S=>encodeURIComponent(S)).join(","))},removeTag:T=>{a(u).has(T)&&a(u).size===1?o(l):a(u).has(T)&&r(l,[...a(u)].filter(S=>S!==T).map(S=>encodeURIComponent(S)).join(","))},clearTags:()=>{o(l)},setSelectedTags:T=>{T.size===0?o(l):r(l,[...T].map(S=>encodeURIComponent(S)).join(","))}});var y=$(),m=R(y);Ce(m,()=>e.children??Te),g(t,y),le()}const qs={};function hc(t){je(qs,t)}function so(){const t=Ve(qs);if(!t)throw new Error("No LocalDBContext found");return t}const Vs={};function pc(t){je(Vs,t)}function gc(){const t=Ve(Vs);if(!t)throw new Error("No SettingsContext found");return t}const Ws={};function _c(t){je(Ws,t)}function pa(){const t=Ve(Ws);if(!t)throw new Error("No BroadcastContext found");return t}const mc="AppStorage",yc=1,fr="account",Ur="settings",Qe="notes",en="tags",wc="syncLog",vn="success",hn="error",He=(t,e,n)=>{t?.addEventListener(e,n)},Mo=(t,e)=>new Promise((n,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();He(s,vn,()=>{const i=s?.result||[];n(i)}),He(s,hn,i=>{r(i)})}),Zr=(t,e,n)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);He(i,vn,()=>{const l=i?.result?.data;r(l)}),He(i,hn,l=>{o(l)})}),Jr=(t,e,n,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:r});He(c,vn,()=>{o()}),He(c,hn,u=>{s(u)})}),_n=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{He(i,vn,()=>{l()}),He(i,hn,u=>{c(u)})})}))},bc=(t,e,n)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);He(l,vn,()=>{r()}),He(l,hn,c=>{o(c)})}),Br=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{He(i,vn,()=>{l()}),He(i,hn,u=>{c(u)})})}))},Kn=(t,e)=>new Promise((n,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();He(i,vn,()=>{n()}),He(i,hn,l=>{r(l)})});function Sc(t,e){ie(e,!0);let n=H(Ge({showFavicon:!0}));const{getDB:r}=so(),{createBroadcastChannel:o,tabId:s}=pa(),i=o(),l=N(r),c=async()=>{const y=await Zr(a(l),Ur,"default");y&&h(n,y,!0)},u=async()=>{c()},d=async y=>{const m=JSON.parse(y.data),T=m;if(m.tabId&&m.tabId===s){T.type==="exit"&&(h(n,{showFavicon:!0},!0),Kn(a(l),Ur));return}T.type==="updateSettings"?c():T.type==="exit"&&h(n,{showFavicon:!0},!0)},f=()=>a(n).showFavicon,v=async y=>{a(n).showFavicon=y,await Jr(a(l),Ur,"default",{showFavicon:y}),i.postMessage({type:"updateSettings"})};Se(()=>(u(),i.addEventListener(d),()=>{i.removeEventListener(d)})),pc({getFaviconEnabled:f,setFaviconShown:v});var _=$(),p=R(_);Ce(p,()=>e.children??Te),g(t,_),le()}const Ks={};function Cc(t){je(Ks,t)}function Ys(){const t=Ve(Ks);if(!t)throw new Error("No AccountContext found");return t}function Ec(t,e){ie(e,!0);let n=H(void 0);const{getDB:r}=so(),{createBroadcastChannel:o,tabId:s}=pa(),i=N(r),l=o(),c=async()=>{const C=await Zr(a(i),fr,"default");h(n,C,!0)},u=C=>Jr(a(i),fr,"default",C),d=async C=>{const w=await Zr(a(i),fr,"default");w!==void 0&&h(n,w,!0),C(w)},f=async C=>{const w=JSON.parse(C.data);if(w.tabId&&w.tabId===s)return;const P=w;P.type==="initLocalAccount"?h(n,null):P.type==="initCloudAccount"?c():P.type==="disconnectCloudAccount"?h(n,null):P.type==="exit"?h(n,void 0):P.type==="updateAccount"&&c()};Se(()=>(l.addEventListener(f),()=>{l.removeEventListener(f)})),Cc({init:d,getAccount:()=>a(n),initLocalAccount:async()=>{h(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async C=>{const w={encryptedClientKey:C.encryptedClientKey||"",subscriptionExpires:C.subscriptionExpires||-1,lastSync:-1};await u(w),h(n,w,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{h(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async C=>{if(!a(n))throw new Error("No account to update subscription for");const w={...a(n),subscriptionExpires:C};await u(w),l.postMessage({type:"updateAccount"})},exitApp:async()=>{h(n,void 0),l.postMessage({type:"exit"}),await Kn(a(i),fr)}});var T=$(),S=R(T);Ce(S,()=>e.children??Te),g(t,T),le()}const Gs={};function kc(t){je(Gs,t)}function Jt(){const t=Ve(Gs);if(!t)throw new Error("No NotesContext found");return t}const qr=()=>crypto.randomUUID(),Pc=t=>{const e=new Set;for(const n of t||[])for(const r of n?.data.tags||[])e.add(r);return e};function Tc(t,e){ie(e,!0);const{getDB:n}=so(),{createBroadcastChannel:r,tabId:o}=pa(),s=N(n),i=r(),l=720*60*60*1e3;let c=H(!1),u=H(()=>new Map),d=H(()=>[]),f=H(()=>new Map);const v=()=>a(c),_=()=>a(d)().some(k=>k.data&&k.data.deletedAt),p=()=>a(d)().some(k=>k.data&&k.data.archivedAt),y=k=>{const M=a(d)(),D=a(f)(),F=D.get(k.id);F?F.data=k.data:(M.push(k),D.set(k.id,k)),h(d,()=>M),h(f,()=>D)},m=k=>{const M=a(d)(),D=a(f)(),F=D.get(k);D.has(k)&&D.delete(k),F&&(F.data=void 0),h(d,()=>M),h(f,()=>D)},T=k=>{const M=a(d)(),D=a(f)();for(const F of k){const z=D.get(F);D.has(F)&&D.delete(F),z&&(z.data=void 0)}h(d,()=>M),h(f,()=>D)},S=()=>{h(d,()=>[]),h(u,()=>new Map),h(f,()=>new Map)},C=()=>a(d),w=k=>{const M=a(u)();for(const D of k)M.get(D)||M.set(D,{name:D});h(u,()=>M)},P=async()=>{const[k,M]=await Promise.all([Mo(a(s),Qe),Mo(a(s),en).then(se=>se.reduce((Ne,We)=>Ne.set(We.id,We.data),new Map))]),D=[],F=[],z=new Map;for(const se of k)se.data.deletedAt&&Date.now()-se.data.deletedAt>l?D.push(se.id):(F.push(se),z.set(se.id,se));const q=Pc(F),we=[],Me=new Map(M);q.values().forEach(se=>{Me.set(se,{name:se,pinned:M.get(se)?.pinned||!1}),M.has(se)||we.push(se)});const he=[];M.keys().forEach(se=>{q.has(se)||he.push(se)}),await Br(a(s),Qe,D),await Br(a(s),en,he),await _n(a(s),en,we.map(se=>({id:se,data:{pinned:Me.get(se)?.pinned||!1}}))),h(d,()=>F),h(f,()=>z),h(u,()=>Me),h(c,!0)},E=async k=>{const M=a(u)(),D=k.data.tags.filter(F=>!M.has(F))||[];return await Jr(a(s),Qe,k.id,{...k.data}),D.length>0&&(await _n(a(s),en,D.map(F=>({id:F,data:{pinned:!1}}))||[]),w(D)),y(k),i.postMessage({type:"putNote",data:{id:k.id}}),k.id},O=async({url:k,name:M,text:D,tags:F})=>{const z={id:qr(),data:{url:k,name:M,text:D,tags:F,history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await E(z),z.id},x=async(k,{url:M,name:D,text:F,tags:z})=>{const q=I(k);if(!q||!q.data)return;const we={id:k,data:{...q.data,url:M,name:D,text:F,tags:z,updatedAt:Date.now()}};await E(we)},B=async(k,{url:M,name:D,text:F,tags:z})=>{const q=I(k);if(!q||!q.data)return;const we=qr(),Me={id:k,data:{...q.data,url:M,name:D,text:F,tags:z,updatedAt:Date.now(),history:[...(q.data.history||[]).slice(-49),{id:we,name:q.data.name,url:q.data.url,text:q.data.text,tags:q.data.tags,updatedAt:q.data.updatedAt}]}};return await E(Me),we},j=async(k,M)=>{const D=I(k);if(!D||!D.data)return;const F=D.data.history?.find?.(q=>q.id===M);if(!F)return;const z={id:k,data:{...D.data,url:F.url,name:F.name,text:F.text,tags:F.tags,updatedAt:F.updatedAt,history:D.data.history?.filter?.(q=>q.id!==M)||[]}};await E(z)},L=async k=>{const D=a(f)().get(k);!D||!D.data||(m(k),await bc(a(s),Qe,k),i.postMessage({type:"deleteNote",data:{id:k}}))},K=async k=>{T(k),await Br(a(s),Qe,k),i.postMessage({type:"reloadNotes"})},Z=async()=>{await Kn(a(s),Qe),await Kn(a(s),en),S(),i.postMessage({type:"clearNotes"})},I=k=>a(f)().get(k),ne=async(k,M)=>{const F=a(f)().get(k);if(!F||!F.data)return;const z={id:k,data:{...F.data,pinnedAt:M?Date.now():void 0}};E(z)},te=async k=>{const D=a(f)().get(k);if(!D||!D.data)return;const F={id:k,data:{...D.data,deletedAt:Date.now()}};await E(F)},X=async k=>{const M=a(f)(),D=a(d)(),F=[];D.forEach(z=>{z.data&&k.every(q=>z?.data?.tags.includes(q))&&F.push(z.id)});for(const z of F){const q=M.get(z);q?.data&&(q.data.deletedAt=Date.now())}await _n(a(s),Qe,F.map(z=>{const q=M.get(z);return{id:z,data:q?.data}})),i.postMessage({type:"reloadNotes"}),h(f,()=>M),h(d,()=>D)},J=async k=>{const M=a(f)(),D=a(d)(),F=[];D.forEach(z=>{z.data&&k.every(q=>z?.data?.tags.includes(q))&&F.push(z.id)});for(const z of F){const q=M.get(z);q?.data&&(q.data.deletedAt=0)}await _n(a(s),Qe,F.map(z=>{const q=M.get(z);return{id:z,data:q?.data}})),i.postMessage({type:"reloadNotes"}),h(f,()=>M),h(d,()=>D)},ae=async k=>{const D=a(f)().get(k);if(!D||!D.data)return;const F={id:k,data:{...D.data,deletedAt:0}};await E(F)},Q=async(k,M)=>{const D=a(u)();D.set(k,{name:k,pinned:M}),await Jr(a(s),en,k,{pinned:M}),i.postMessage({type:"pinTag",data:{tag:k,pinned:M}}),h(u,()=>D)},Pe=async k=>{const M=a(u)(),D=a(d)(),F=[];D.forEach(z=>{z.data&&k.every(q=>z?.data?.tags.includes(q))&&F.push(z.id)}),await K(F),h(d,()=>D),h(u,()=>M)},Y=async k=>{const M=a(f)(),D={};k.forEach(F=>{const z=M.get(F.id),q=[];if(z&&z.data){let we=0,Me=0;for(;we<F.data.history.length&&Me<z.data.history.length;){const he=F.data.history[we],se=z.data.history[Me];he.id===se.id?(he.updatedAt>se.updatedAt?q.push(he):q.push(se),we+=1,Me+=1):he.updatedAt<se.updatedAt?(q.push(he),we+=1):he.updatedAt>se.updatedAt?(q.push(se),Me+=1):(q.push(se),we+=1,Me+=1)}z.data.updatedAt>F.data.updatedAt?D[z.id]={id:z.id,data:{...z.data,history:q}}:D[F.id]={id:F.id,data:{...F.data,history:q}}}else D[F.id]=F}),await _n(a(s),Qe,Object.values(D)),await P(),i.postMessage({type:"reloadNotes"})},G=async()=>{const k=[];a(d)().forEach(D=>{D&&D.data&&D.data.deletedAt&&k.push(D.id)}),await Br(a(s),Qe,k),await P(),i.postMessage({type:"emptyBin"})},oe=async(k,M=[])=>{const D=a(f)(),F=a(d)(),z=[];F.forEach(he=>{he.data&&he?.data?.tags.includes(k)&&M.every(se=>he?.data?.tags.includes(se))&&z.push(he.id)});const q=[],we=[];for(const he of z){const se=D.get(he);se?.data&&(q.push({id:he,data:{...se.data}}),we.push({id:he,data:{...se.data,tags:se.data.tags.filter(Ne=>Ne!==k),history:[...se.data.history||[],{id:qr(),name:se.data.name,url:se.data.url,text:se.data.text,tags:se.data.tags,updatedAt:Date.now()}]}}))}for(const he of we){const se=D.get(he.id);se?.data&&(se.data=he.data)}return await _n(a(s),Qe,we.map(he=>({id:he.id,data:he.data}))),i.postMessage({type:"reloadNotes"}),h(f,()=>D),h(d,()=>F),{cancel:async()=>{for(const he of q){const se=D.get(he.id);se?.data&&(se.data=he.data)}await _n(a(s),Qe,q.map(he=>({id:he.id,data:he.data}))),i.postMessage({type:"reloadNotes"}),h(f,()=>D),h(d,()=>F)}}},re=async k=>{const M=JSON.parse(k.data),D=M;if(M.tabId&&M.tabId===o){D.type==="exit"&&(S(),await Kn(a(s),Qe),await Kn(a(s),en));return}if(D.type==="putNote"){const z=D.data.id;if(!z)return;const q=await Zr(a(s),Qe,z);if(!q)return;y(q)}else if(D.type==="deleteNote"){const F=D.data.id;if(!F)return;m(F)}else if(D.type==="pinTag"){const F=D.data.tag,z=D.data.pinned,q=a(u)();q.set(F,{name:F,pinned:z}),h(u,()=>q)}else D.type==="clearNotes"?S():D.type==="reloadNotes"||D.type==="emptyBin"?P():D.type==="exit"&&S()};Se(()=>(P(),i.addEventListener(re),()=>{i.removeEventListener(re)})),kc({isInitedNotes:v,createNote:O,updateNote:x,deleteNote:L,saveNote:B,revertNote:j,pinNote:ne,moveNoteToBin:te,getGetNotes:C,importNotes:Y,clearNotes:Z,getNoteById:I,getGetMapTags:()=>a(u),pinTag:Q,restoreNoteFromBin:ae,checkNotesInBin:_,checkNotesInArchive:p,emptyBin:G,moveNotesToBinByTags:X,deleteNotesByTags:Pe,restoreNotesFromBinByTags:J,deleteTag:oe});var ce=$(),de=R(ce);Ce(de,()=>e.children??Te),g(t,ce),le()}const Xs={},xc=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function Dc(t){je(Xs,t)}function pn(){const t=Ve(Xs);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Ac(t,e){ie(e,!0);let n=Ge(xc());Dc(n);var r=$(),o=R(r);Ce(o,()=>e.children??Te),g(t,r),le()}const Zs={};function Nc(t){je(Zs,t)}function io(){const t=Ve(Zs);if(!t)throw new Error("No ScrollingContext found");return t}const Js=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function lv(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}function Lc(t,e){ie(e,!0);let n=H(!1);const r=()=>a(n),o=Js(()=>{h(n,!1)},100);Nc({isScrolling:r,enable:()=>{h(n,!0),o()}});var i=$(),l=R(i);Ce(l,()=>e.children??Te),g(t,i),le()}const Qs={};function Ic(t){je(Qs,t)}function Qt(){const t=Ve(Qs);if(!t)throw new Error("No MobileSizeContext found");return t}function Mc(t,e){ie(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let r=H(Ge(n())),o=pn();const s=Js(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{h(r,n(),!0)})};Ic({checkMobileSize:()=>a(r)}),Se(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=$(),u=R(c);Ce(u,()=>e.children??Te),g(t,c),le()}const $s={};function Oc(t){je($s,t)}function gn(){const t=Ve($s);if(!t)throw new Error("No DialogContext found");return t}function Rc(t,e){ie(e,!0);let n=H(0),r=H(!1),o=H(!0);Oc({checkExistedDialog:()=>a(n)>0,showDialog:()=>{h(n,a(n)+1)},hideDialog:()=>{h(n,a(n)-1)},blockDialog:p=>{h(r,p,!0)},checkBlockedDialog:()=>a(r),setClosableDialog:p=>{h(o,p,!0)},checkClosableDialog:()=>a(o)});var v=$(),_=R(v);Ce(_,()=>e.children??Te),g(t,v),le()}const ei={};function Bc(t){je(ei,t)}function ga(){const t=Ve(ei);if(!t)throw new Error("No ScrollContainerContext found");return t}function Fc(t,e){ie(e,!0);let n=H(null);Bc({setScrollContainer:l=>{h(n,l,!0)},getScrollContainer:()=>a(n)});var s=$(),i=R(s);Ce(i,()=>e.children??Te),g(t,s),le()}const ti={};function zc(t){je(ti,t)}function lo(){const t=Ve(ti);if(!t)throw new Error("No DialogPageHeightContext found");return t}function jc(t,e){ie(e,!0);let n=H(200);zc({setDialogPageHeight:l=>{h(n,l,!0)},getDialogPageHeight:()=>a(n)});var s=$(),i=R(s);Ce(i,()=>e.children??Te),g(t,s),le()}const Hc=[fr,Ur,Qe,en,wc];function Uc(){return new Promise((t,e)=>{const n=indexedDB.open(mc,yc);He(n,"upgradeneeded",()=>{const r=n.result;for(const o of Hc)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),He(n,vn,()=>{const r=n.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),He(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),He(n,hn,()=>{e()})})}function qc(t,e){ie(e,!0);let n=H(null);Se(()=>{Uc().then(l=>{h(n,l,!0)}).catch(l=>{})}),hc({getDB:()=>a(n)});var o=$(),s=R(o);{var i=l=>{var c=$(),u=R(c);Ce(u,()=>e.children??Te),g(l,c)};V(s,l=>{a(n)&&l(i)})}g(t,o),le()}const wt="dialogPages",ni={};function Vc(t){je(ni,t)}function yt(){const t=Ve(ni);if(!t)throw new Error("No DialogPagesContext found");return t}function Wc(t,e){ie(e,!0);const{getAppLocation:n,setSearchParam:r,deleteSearchParam:o}=kt(),s=N(n),i=N(()=>a(s).searchParams);let l=N(()=>a(i).get(wt)||""),c=N(()=>a(l).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const u=()=>a(c),d=w=>{if(w.length===0){o(wt);return}r(wt,w.map(P=>encodeURIComponent(P)).join(","))},f=w=>{r(wt,[...a(c),w].map(P=>encodeURIComponent(P)).join(","))};Vc({setDialogPages:d,getDialogPages:u,pushDialogPage:f,popDialogPage:()=>{const w=a(c)[a(c).length-1];return a(c).length<=1?(o(wt),w):(r(wt,a(c).slice(0,-1).map(P=>encodeURIComponent(P)).join(",")),w)},replaceDialogPage:w=>{r(wt,[...a(c).slice(0,-1),w].map(P=>encodeURIComponent(P)).join(","))},hasDialogPage:w=>a(c).find(P=>{const[E]=P.split("?");return E===w})!==void 0,clearDialogPages:()=>{o(wt)},createDialogPageHref:w=>{const P=new URLSearchParams(a(s).searchParams.toString());return P.set(wt,[...u(),w].map(E=>encodeURIComponent(E)).join(",")),`${a(s).pathname}?${P.toString()}`},createHandleClickDialogPage:w=>P=>{P.preventDefault(),f(w)}});var S=$(),C=R(S);Ce(C,()=>e.children??Te),g(t,S),le()}function Kc(t,e){ie(e,!0);const n=d=>d.startsWith("/")?d:`/${d}`,r=d=>{const[f,v]=d.split("?");return{href:n(d),pathname:n(f),search:v?`?${v}`:"",searchParams:new URLSearchParams(v)}};let o=H(Ge({href:`${n(window.location.pathname)}${window.location.search}`,pathname:n(window.location.pathname),search:window.location.search,searchParams:new URLSearchParams(window.location.search)}));const s=d=>{h(o,r(d),!0),window.history.replaceState(null,"",d)};rc({getAppLocation:()=>a(o),replace:s,setSearchParam:(d,f)=>{const v=a(o).searchParams;v.set(d,f),s(`${a(o).pathname}${v.size>0?`?${v.toString()}`:""}`)},deleteSearchParam:d=>{const f=a(o).searchParams;f.delete(d),s(`${a(o).pathname}${f.size>0?`?${f.toString()}`:""}`)}});var c=$(),u=R(c);Ce(u,()=>e.children??Te),g(t,c),le()}const Yc={};function Gc(t){je(Yc,t)}function Xc(t,e){ie(e,!0);let n=Ge({value:!1});const r=()=>n.value;Se(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),Gc({getIsKeyboardVisible:r});var o=$(),s=R(o);Ce(s,()=>e.children??Te),g(t,o),le()}function Zc(t,e){ie(e,!0);const n=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};_c({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=$(),s=R(o);Ce(s,()=>e.children??Te),g(t,o),le()}function Jc(t,e){qc(t,{children:(n,r)=>{Zc(n,{children:(o,s)=>{Ac(o,{children:(i,l)=>{Lc(i,{children:(c,u)=>{Mc(c,{children:(d,f)=>{Rc(d,{children:(v,_)=>{Fc(v,{children:(p,y)=>{jc(p,{children:(m,T)=>{Xc(m,{children:(S,C)=>{Kc(S,{children:(w,P)=>{Wc(w,{children:(E,O)=>{var x=$(),B=R(x);Ce(B,()=>e.children??Te),g(E,x)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Qc(t,e){Jc(t,{children:(n,r)=>{ic(n,{children:(o,s)=>{ac(o,{children:(i,l)=>{cc(i,{children:(c,u)=>{dc(c,{children:(d,f)=>{vc(d,{children:(v,_)=>{Sc(v,{children:(p,y)=>{Ec(p,{children:(m,T)=>{Tc(m,{children:(S,C)=>{var w=$(),P=R(w);Ce(P,()=>e.children??Te),g(S,w)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let tn=H(""),mn=H(null),vr=H(null),hr=H(null),yn=H(Ge([]));function Gt(t,e){h(tn,""),setTimeout(()=>{h(tn,t,!0),e?.onFinish&&h(vr,e.onFinish,!0),e?.onCancel&&h(hr,e.onCancel,!0)},16)}const $c=(t,e,n,r,o)=>{t.preventDefault(),a(e)&&(h(n,null),a(e)(),h(e,null)),h(r,""),a(o)?.style.removeProperty("opacity")};var eu=W('<button type="button" class="c p-1gssers">undo</button>'),tu=W('<div class="a p-1gssers"><div class="b p-1gssers"><span> </span> <!></div></div>'),nu=W("<div><!></div>");function ri(t,e){ie(e,!0);const n=qr();Se(()=>(h(yn,[...a(yn),n],!0),()=>{const i=a(yn).indexOf(n);i!==-1&&h(yn,a(yn).filter((l,c)=>c!==i),!0)})),Ae(()=>{a(tn);const i=a(hr)?2e3:800;a(tn)&&(a(mn)?.getBoundingClientRect(),a(mn)?.style.setProperty("opacity","1"));const l=setTimeout(()=>{a(mn)?.style.removeProperty("opacity")},i),c=setTimeout(()=>{h(tn,""),a(vr)&&a(vr)(),h(vr,null),h(hr,null),a(mn)?.style.removeProperty("opacity")},i+400);return()=>{clearTimeout(l),clearTimeout(c)}});var r=nu(),o=b(r);{var s=i=>{var l=tu(),c=b(l),u=b(c),d=b(u),f=U(u,2);{var v=_=>{var p=eu();p.__click=[$c,hr,vr,tn,mn],g(_,p)};V(f,_=>{a(hr)&&_(v)})}Je(c,_=>h(mn,_),()=>a(mn)),fe(()=>ln(d,a(tn))),g(i,l)};V(o,i=>{a(tn)&&a(yn)[a(yn).length-1]===n&&i(s)})}g(t,r),le()}Xe(["click"]);var ru=W('<span class="a p-lxk90o"><!></span>');function Ue(t,e){var n=ru(),r=b(n);Ce(r,()=>e.children),g(t,n)}var au=Bl('<svg class="p-gv09tg"><use></use></svg>');function pe(t,e){let n=ge(e,"name",8,"");var r=au(),o=b(r);fe(()=>Re(o,"href",`#icon-${n()??""}`)),g(t,r)}const ou=(t,e,n,r,o)=>{if(t.preventDefault(),a(e))return;const s=n().type;s==="closed"?r():s==="opened"&&o()};var su=W('<button class="a p-1w3orpk"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ai(t,e){ie(e,!0);const{sidebarOpen:n,getSidebarState:r,sidebarClose:o}=ha(),{getDialogPages:s}=yt(),{checkExistedDialog:i}=gn();let l=N(()=>s().length>0||i());var c=su();c.__click=[ou,l,r,n,o];var u=b(c);ue(u,()=>({"--size":"32px"})),pe(u.lastChild,{name:"sidebarMenu"});var d=U(u,2);Ue(d,{children:(f,v)=>{var _=Ie("Menu");g(f,_)}}),g(t,c),le()}Xe(["click"]);var iu=(t,e)=>e.onChange?.(t.target?.value||""),lu=(t,e,n)=>{e(""),n.onChange?.("")},cu=W('<button class="b p-wproeg"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),uu=W('<div class="a p-wproeg"><input class="p-wproeg"/> <!></div>');function Fa(t,e){ie(e,!0);let n=ge(e,"value",15,""),r=ge(e,"ref",15,null);const o=u=>{u.key==="Escape"&&(n(""),e.onChange?.(""))};Se(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=uu(),i=b(s);i.__input=[iu,e],Je(i,u=>r(u),()=>r());var l=U(i,2);{var c=u=>{var d=cu();d.__click=[lu,n,e];var f=b(d);ue(f,()=>({"--size":"20px"})),pe(f.lastChild,{name:"close"});var v=U(f,2);Ue(v,{children:(_,p)=>{var y=Ie("Clear");g(_,y)}}),g(u,d)};V(l,u=>{n()&&u(c)})}fe(()=>Re(i,"placeholder",e.placeholder)),ro("focus",i,function(...u){e.onFocus?.apply(this,u)}),Ql(i,n),g(t,s),le()}Xe(["input","click"]);function co(t,e){ie(e,!0),Se(()=>{const n=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),le()}var du=W('<dialog><div class="a p-y62pks"><!></div></dialog> <!>',1);function Pr(t,e){ie(e,!0);let n=ge(e,"onClosed",3,()=>{}),r=ge(e,"blocked",3,!1),o=H(null),s=H(null),i=H(!1),{showDialog:l,hideDialog:c}=gn();const u=()=>{const m=setTimeout(()=>{n()()},150);a(o)?.addEventListener("transitionend",()=>{clearTimeout(m),n()()},{once:!0}),h(i,!1)};Ae(()=>{e.startClose&&u()}),Se(()=>{a(o)?.showModal(),a(o)?.getClientRects(),h(i,!0);const m=T=>{T?.preventDefault(),r()||u()};return a(o)?.addEventListener("cancel",m),a(o)?.addEventListener("close",m),()=>{a(o)?.removeEventListener("cancel",m),a(o)?.removeEventListener("close",m)}}),Se(()=>(l(),()=>{c()})),Se(()=>{const m=T=>{T.key==="Escape"&&r()&&T.preventDefault()};return window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}});var d=du(),f=R(d),v=b(f),_=b(v);Ce(_,()=>e.children),Je(v,m=>h(s,m),()=>a(s)),Je(f,m=>h(o,m),()=>a(o));var p=U(f,2);{var y=m=>{co(m,{get dialog(){return a(o)},get dialogInner(){return a(s)},onClose:u})};V(p,m=>{a(o)&&a(s)&&!r()&&m(y)})}fe(()=>ye(f,1,me({b:!0,c:a(i)}),"p-y62pks")),g(t,d),le()}var fu=W("<div><!></div>");function _a(t,e){ie(e,!0);let n=ge(e,"transformOrigin",3,"top right"),r=H(!1),o=H(null);const s=()=>{const f=setTimeout(()=>{e.onClosed()},150);a(o)?.addEventListener("transitionend",()=>{clearTimeout(f),e.onClosed()},{once:!0}),h(r,!1)},i=f=>{f.target!==a(o)&&!a(o)?.contains(f.target)&&s()},l=f=>{f.target!==a(o)&&!a(o)?.contains(f.target)&&s()},c=f=>{f.key==="Escape"&&s()};Se(()=>{a(o)?.getClientRects(),h(r,!0);const f=setTimeout(()=>{document.addEventListener("focusin",i),document.addEventListener("click",l),document.addEventListener("keydown",c)},0);return()=>{clearTimeout(f),document.removeEventListener("focusin",i),document.removeEventListener("click",l),document.removeEventListener("keydown",c)}}),Ae(()=>{e.startClose&&s()});var u=fu(),d=b(u);Ce(d,()=>e.children),Je(u,f=>h(o,f),()=>a(o)),fe(()=>{Ln(u,`transform-origin: ${e.positionTop?"top right":n()};`),ye(u,1,me({a:!0,b:e.positionTop,c:a(r)}),"p-12kya4w")}),g(t,u),le()}const vu=(t,e)=>{a(e)||h(e,!0)};var hu=(t,e)=>e("newest"),pu=(t,e)=>e("oldest"),gu=(t,e)=>e("AtoZ"),_u=(t,e)=>e("ZtoA"),mu=W("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),yu=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),wu=W('<div class="a p-1sq20j9"><button><!> <!></button> <!></div>');function bu(t,e){ie(e,!0);const n=(S,C=Te)=>{var w=mu(),P=b(w);P.__click=[hu,d];var E=U(P,2);E.__click=[pu,d];var O=U(E,2);O.__click=[gu,d];var x=U(O,2);x.__click=[_u,d],fe(()=>{ye(w,1,me({b:!0,c:C()}),"p-1sq20j9"),ye(P,1,me({d:!0,e:C(),f:a(u)==="newest"}),"p-1sq20j9"),ye(E,1,me({d:!0,e:C(),f:a(u)==="oldest"}),"p-1sq20j9"),ye(O,1,me({d:!0,e:C(),f:a(u)==="AtoZ"}),"p-1sq20j9"),ye(x,1,me({d:!0,e:C(),f:a(u)==="ZtoA"}),"p-1sq20j9")}),g(S,w)};let r=H(!1),o=H(!1);const{checkMobileSize:s}=Qt(),{getFeedOrder:i,setFeedOrder:l}=js();let c=N(s),u=N(i);const d=S=>{h(o,!0),l(S)},f=()=>{h(r,!1),h(o,!1)};Se(()=>{const S=C=>{C.key==="Escape"&&h(o,!0)};return document.addEventListener("keydown",S),()=>document.removeEventListener("keydown",S)});var v=wu(),_=b(v);_.__click=[vu,r],ye(_,1,me({g:!0,h:!0}),"p-1sq20j9");var p=b(_);pe(p,{name:"filter"});var y=U(p,2);Ue(y,{children:(S,C)=>{var w=Ie("show feed order menu");g(S,w)}});var m=U(_,2);{var T=S=>{var C=$(),w=R(C);{var P=O=>{Pr(O,{get startClose(){return a(o)},onClosed:f,children:(x,B)=>{n(x,()=>!0)},$$slots:{default:!0}})},E=O=>{var x=yu(),B=R(x);ue(B,()=>({"--right":"20px","--top":"60px"})),_a(B.lastChild,{get startClose(){return a(o)},onClosed:f,children:(j,L)=>{n(j,()=>!1)},$$slots:{default:!0}}),g(O,x)};V(w,O=>{a(c)?O(P):O(E,!1)})}g(S,C)};V(m,S=>{a(r)&&S(T)})}g(t,v),le()}Xe(["click"]);var ee=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t.Install="install",t.InstallSuccess="installSuccess",t.Welcome="welcome",t))(ee||{}),Su=W('<div><!> <div class="a p-t68rxw"></div></div>');function uo(t,e){ie(e,!0);let n=H(!1);Se(()=>{const s=setTimeout(()=>{h(n,!0)},200);return()=>{clearTimeout(s)}});var r=Su(),o=b(r);Ce(o,()=>e.children??Te),fe(()=>ye(r,1,me({b:!0,c:a(n)}),"p-t68rxw")),g(t,r),le()}var Cu=W("<a><!></a>"),Eu=W("<button><!></button>");function cn(t,e){let n=ge(e,"type",3,"standard"),r=ge(e,"typeButton",3,"button"),o=ge(e,"element",3,"button"),s=ge(e,"href",3,""),i=ge(e,"fullWidth",3,!1),l=ge(e,"withoutMinWidth",3,!1);var c=$(),u=R(c);{var d=v=>{var _=Cu();_.__click=function(...y){e.onClick?.apply(this,y)};var p=b(_);Ce(p,()=>e.children??Te),fe(()=>{Re(_,"target",e.target),Re(_,"rel",e.rel),Re(_,"href",s()),ye(_,1,me({a:!0,b:!0,c:n()==="dangerous",d:n()==="secondary",e:i(),f:l()}),"p-16e3t4x")}),g(v,_)},f=v=>{var _=Eu();_.__click=function(...y){e.onClick?.apply(this,y)};var p=b(_);Ce(p,()=>e.children??Te),fe(()=>{Re(_,"type",r()),ye(_,1,me({a:!0,c:n()==="dangerous",d:n()==="secondary",e:i(),f:l()}),"p-16e3t4x")}),g(v,_)};V(u,v=>{o()==="a"?v(d):v(f,!1)})}g(t,c)}Xe(["click"]);let za=H(!1),Fr=H(!1),ja=H(""),Ha=H("Cancel"),Ua=H("Confirm"),qa,Va,Wa;function ma(t){h(za,!0),h(ja,t.title,!0),t.buttonCancelTitle&&h(Ha,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&h(Ua,t.buttonConfirmTitle,!0),qa=t.onConfirm,Va=t.onCancel,Wa=t.onClosed}var ku=W('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),Pu=W('<div class="a p-1jlul5o"><!></div>');function Tu(t){let e=H(!1),n,r=!1;const o=()=>{n=setTimeout(()=>{h(e,!0)},250)},s=async()=>{o(),await Va?.(),h(Fr,!0)},i=async()=>{o(),await qa?.(),h(Fr,!0),r=!0},l=()=>{clearTimeout(n),h(e,!1),h(za,!1),h(Fr,!1),h(ja,""),h(Ha,"Cancel"),h(Ua,"Confirm"),Va=void 0,qa=void 0,Wa&&Wa(r),r=!1};var c=$(),u=R(c);{var d=f=>{Pr(f,{get blocked(){return a(e)},get startClose(){return a(Fr)},onClosed:l,children:(v,_)=>{var p=Pu(),y=b(p);{var m=S=>{uo(S,{})},T=S=>{var C=ku(),w=R(C),P=b(w),E=U(w,2),O=b(E);cn(O,{onClick:s,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(B,j)=>{var L=Ie();fe(()=>ln(L,a(Ha))),g(B,L)},$$slots:{default:!0}});var x=U(O,2);cn(x,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(B,j)=>{var L=Ie();fe(()=>ln(L,a(Ua))),g(B,L)},$$slots:{default:!0}}),fe(()=>ln(P,a(ja))),g(S,C)};V(y,S=>{a(e)?S(m):S(T,!1)})}g(v,p)},$$slots:{default:!0}})};V(u,f=>{a(za)&&f(d)})}g(t,c)}const wr=t=>{const e=n=>{const r=n.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=n.key.toLowerCase(),i=n.metaKey,l=n.ctrlKey,c=n.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){n.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var xu=W('<div class="a p-ohatdy"><a class="b p-ohatdy"><span class="c p-ohatdy"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-ohatdy"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function Du(t,e){ie(e,!1);const{createDialogPageHref:n,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=yt(),{checkExistedDialog:i}=gn(),l=()=>{o.length===0&&!i()&&s(ee.NewNote)};Se(()=>wr({key:"n",action:l})),va();var c=xu(),u=b(c),d=N(()=>r(ee.NewNote));u.__click=function(...m){a(d)?.apply(this,m)};var f=b(u),v=b(f);ue(v,()=>({"--size":"32px","--color":"#b0b0b0"})),pe(v.lastChild,{name:"add"});var _=U(v,2);Ue(_,{children:(m,T)=>{var S=Ie("Add note");g(m,S)}});var p=U(f,2),y=b(p);ue(y,()=>({"--size":"16px","--color":"#b0b0b0"})),pe(y.lastChild,{name:"plus"}),fe(m=>Re(u,"href",m),[()=>n(ee.NewNote)]),g(t,c),le()}Xe(["click"]);var Au=W("<button><!></button>");function Nu(t,e){ie(e,!0);let n=ge(e,"type",3,"button"),r=!1,o=H(null);Ae(()=>{e.onRef&&e.onRef(a(o))});const s=u=>{(u.key==="Enter"||u.key===" ")&&(r=!0)},i=()=>{e.onClick(r),r&&(r=!1)};var l=Au();l.__keydown=s,l.__click=i;var c=b(l);Ce(c,()=>e.children??Te),Je(l,u=>h(o,u),()=>a(o)),fe(()=>{Re(l,"type",n()),ye(l,1,me({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-1y4f6v6")}),g(t,l),le()}Xe(["keydown","click"]);const Oo=t=>{const n=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(o=>o instanceof HTMLElement?o instanceof HTMLButtonElement||o instanceof HTMLInputElement||o instanceof HTMLSelectElement||o instanceof HTMLTextAreaElement?!o.disabled&&o.offsetParent!==null:o.offsetParent!==null:!1),r=t||document.activeElement;if(r){const o=n.indexOf(r);return n[o+1]}return null};let Jn=H(!1),bn=H(!1),ft=H(""),Sn=H(0),gr=H(0),_r=H(0),Vr,Qr=()=>({bottom:0,right:0,height:0}),jt=null,Ka=H(null);function Lu(t){if(a(Jn)){h(bn,!0),a(ft)!==t.tag&&(Vr=()=>{const n=t.getRect();h(Jn,!0),h(ft,t.tag,!0),h(Sn,n.bottom,!0),h(gr,n.right,!0),h(_r,n.height,!0),Qr=t.getRect,jt=t.focusRef});return}const e=t.getRect();h(Jn,!0),h(ft,t.tag,!0),h(Sn,e.bottom,!0),h(gr,e.right,!0),h(_r,e.height,!0),Qr=t.getRect,jt=t.focusRef}const Iu=()=>a(Jn),Mu=()=>a(Ka);var Ou=W('<li class="p-j39u7r"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin</button></li>'),Ru=W('<li class="p-j39u7r"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin</button></li>'),Bu=W('<ul><!> <li class="p-j39u7r"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete</button></li></ul>'),Fu=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function zu(t,e){ie(e,!0);const n=(x,B=Te)=>{var j=Bu(),L=b(j);{var K=X=>{var J=Ou(),ae=b(J);ae.__click=v,ae.__keydown=T;var Q=b(ae);ue(Q,()=>({"--size":"20px"})),pe(Q.lastChild,{name:"pin"}),fe(()=>ye(ae,1,me({c:!0,d:B()}),"p-j39u7r")),g(X,J)},Z=X=>{var J=Ru(),ae=b(J);ae.__click=_,ae.__keydown=T;var Q=b(ae);ue(Q,()=>({"--size":"20px"})),pe(Q.lastChild,{name:"pin-cancel"}),fe(()=>ye(ae,1,me({c:!0,d:B()}),"p-j39u7r")),g(X,J)};V(L,X=>{a(f)?X(Z,!1):X(K)})}var I=U(L,2),ne=b(I);ne.__click=C,ne.__keydown=S;var te=b(ne);ue(te,()=>({"--size":"20px"})),pe(te.lastChild,{name:"bin"}),Je(j,X=>h(Ka,X),()=>a(Ka)),fe(()=>{ye(j,1,me({a:!0,b:B()}),"p-j39u7r"),ye(ne,1,me({c:!0,e:!0,d:B()}),"p-j39u7r")}),g(x,j)},{getScrollContainer:r}=ga(),{pinTag:o,getGetMapTags:s,deleteTag:i}=Jt(),{checkMobileSize:l}=Qt(),{getSelectedTags:c,removeTag:u,setSelectedTags:d}=oo();let f=N(()=>s()().get(a(ft))?.pinned||!1);const v=()=>{o(a(ft),!0),jt?.focus(),h(bn,!0)},_=()=>{o(a(ft),!1),jt?.focus(),h(bn,!0)},p=()=>{h(Jn,!1),h(bn,!1),h(Sn,0),h(gr,0),h(_r,0),Qr=()=>({bottom:0,right:0,height:0}),jt=null,Vr&&setTimeout(()=>{Vr?.(),Vr=void 0})};let y=N(()=>window.innerHeight-a(Sn)<100?a(Sn)-a(_r)-98+"px":a(Sn)+5+"px"),m=N(r);const T=x=>{x.key==="Tab"&&x.shiftKey&&(x.preventDefault(),jt?.focus())},S=x=>{x.key==="Tab"&&!x.shiftKey&&jt&&(x.preventDefault(),Oo(jt)?.focus())},C=()=>{h(bn,!0);let x=jt,B=Oo(x);ma({title:a(w).has(a(ft))?`Are you sure to delete ${a(ft)} from selected notes?`:`Are you sure to delete ${a(ft)} from all notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const j=a(w).has(a(ft))?Array.from(a(w)).filter(Z=>Z!==a(ft)):[],L=Array.from(a(w));u(a(ft));const{cancel:K}=await i(a(ft),j);Gt("Tag deleted",{onCancel:async()=>{K(),d(new Set(L))}})},onCancel:async()=>{},onClosed:j=>{setTimeout(()=>{j?B&&B?.focus():x?.focus()},16)}})};Ae(()=>{const x=()=>{const B=Qr();h(Sn,B.bottom,!0),h(gr,B.right,!0),h(_r,B.height,!0)};return a(m)?.addEventListener("scroll",x),window.addEventListener("resize",x),()=>{a(m)?.removeEventListener("scroll",x),window.removeEventListener("resize",x)}});let w=N(c);var P=$(),E=R(P);{var O=x=>{var B=$(),j=R(B);{var L=Z=>{Pr(Z,{get startClose(){return a(bn)},onClosed:p,children:(I,ne)=>{n(I,()=>!0)},$$slots:{default:!0}})},K=Z=>{var I=Fu(),ne=R(I);ue(ne,()=>({"--left":a(gr)-36+"px","--top":a(y)})),_a(ne.lastChild,{transformOrigin:"top",get startClose(){return a(bn)},onClosed:p,children:(te,X)=>{n(te,()=>!1)},$$slots:{default:!0}}),g(Z,I)};V(j,Z=>{l()?Z(L):Z(K,!1)})}g(x,B)};V(E,x=>{a(Jn)&&x(O)})}g(t,P),le()}Xe(["click","keydown"]);const ju=(t,e,n,r)=>{t.stopPropagation(),t.preventDefault(),Lu({tag:e.tag,getRect:n,focusRef:a(r)})},Hu=(t,e)=>{t.key==="Tab"&&!t.shiftKey&&a(e)&&(t.preventDefault(),Mu()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};var Uu=W('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),qu=W('<button><span class="b p-zlrw5f"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),Vu=W("<!> <span> </span> <!>",1),Wu=W('<div class="a p-zlrw5f"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function oi(t,e){ie(e,!0);let{getGetMapTags:n}=Jt(),r=H(null),o=N(Iu);const s=()=>{if(a(r)){const d=a(r).getBoundingClientRect();return{bottom:d.bottom,right:d.right,height:d.height}}return{bottom:0,right:0,height:0}};let i=N(()=>e.mode==="notes"&&e.tag!=="inbox"),l=N(()=>n()().get(e.tag)?.pinned||!1);var c=Wu(),u=b(c);ue(u,()=>({"--paddingRight":a(i)?"30px":void 0})),Nu(u.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(d,f)=>{var v=Vu(),_=R(v);{var p=C=>{var w=Uu(),P=b(w);ue(P,()=>({"--size":"18px"})),pe(P.lastChild,{name:"pin"}),g(C,w)};V(_,C=>{a(l)&&C(p)})}var y=U(_,2),m=b(y),T=U(y,2);{var S=C=>{var w=qu();w.__click=[ju,e,s,r],w.__keydown=[Hu,o];var P=b(w),E=b(P);ue(E,()=>({"--size":"16px"})),pe(E.lastChild,{name:"menu"});var O=U(E,2);Ue(O,{children:(x,B)=>{var j=Ie("Tag options");g(x,j)}}),Je(w,x=>h(r,x),()=>a(r)),fe(()=>ye(w,1,me({c:!0,d:e.type==="selected"}),"p-zlrw5f")),g(C,w)};V(T,C=>{a(i)&&C(S)})}fe(()=>ln(m,e.tag)),g(d,v)},$$slots:{default:!0}}),g(t,c),le()}Xe(["click","keydown"]);var Ku=W('<div class="a p-1wrbv6c"><div></div></div>');function Ro(t,e){ie(e,!0);let n=ge(e,"mobile",3,!1);const{getGetMapTags:r}=Jt();let o=H(null),s=H(Ge({value:!1}));const i=f=>{h(o,f,!0)};let c=N(()=>{const f=r()();return[...e.tags].sort((v,_)=>v==="inbox"?-1:_==="inbox"?1:f.get(v)?.pinned?-1:f.get(_)?.pinned?1:v.localeCompare(_))});Ae(()=>{a(s),Ot(()=>{a(o)&&a(s).value&&a(o).focus()})});var u=Ku(),d=b(u);fa(d,22,()=>a(c),f=>f,(f,v,_)=>{{let p=N(()=>a(_)===0?i:void 0);oi(f,{get mode(){return e.mode},get tag(){return v},get onRef(){return a(p)},onClick:y=>{y?h(s,{value:!0},!0):h(s,{value:!1},!0),e.handleTagClick(v)}})}}),fe(()=>ye(d,1,me({b:!0,c:n()}),"p-1wrbv6c")),g(t,u),le()}const Yu=t=>{try{new URL(t)}catch{return!1}return!0},Gu=(t,e)=>{a(e)||h(e,!0)},Xu=(t,e,n,r)=>{for(const o of e())o!=="inbox"&&n(o,!0);h(r,!0)},Zu=(t,e,n,r)=>{for(const o of e())o!=="inbox"&&n(o,!1);h(r,!0)},Ju=(t,e,n,r,o,s)=>{const i=Array.from(e());n(i),r.clearTags(),Gt("Notes moved to bin",{onCancel:()=>{e(new Set(i)),o(i)}}),h(s,!0)},Qu=(t,e,n,r,o)=>{h(e,!0),ma({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{h(e,!0),n.clearTags(),await r(Array.from(o()))},onCancel:async()=>{}})},$u=(t,e,n,r,o,s)=>{const i=Array.from(e());n(i),r.clearTags(),Gt("Notes restored",{onCancel:()=>{e(new Set(i)),o(i)}}),h(s,!0)},ed=(t,e)=>{e.clearTags()},td=(t,e,n,r)=>{const o=e()(),s=Array.from(n());for(const i of o)i.data&&i.data?.url&&Yu(i.data?.url)&&s.every(l=>i.data?.tags.includes(l))&&window.open(i.data?.url,"_blank");h(r,!0)};var nd=W('<li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin</button></li>'),rd=W('<li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin</button></li>'),ad=W('<li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin</button></li>'),od=W('<li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore</button></li> <li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes</button></li>',1),sd=W('<ul><li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links</button></li> <!> <!> <!> <!></ul>'),id=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),ld=W('<div class="a p-1sr0kt2"><div class="b p-1sr0kt2"><button class="c p-1sr0kt2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <div class="d e p-1sr0kt2"><div class="f p-1sr0kt2"><button class="g p-1sr0kt2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></div> <!></div>');function Bo(t,e){ie(e,!0);const n=(j,L=Te)=>{var K=sd(),Z=b(K),I=b(Z);I.__click=[td,l,r,m];var ne=b(I);ue(ne,()=>({"--size":"22px"})),pe(ne.lastChild,{name:"open"});var te=U(Z,2);{var X=oe=>{var re=nd(),ce=b(re);ce.__click=[Xu,r,c,m];var de=b(ce);ue(de,()=>({"--size":"22px"})),pe(de.lastChild,{name:"pin"}),fe(()=>ye(ce,1,me({j:!0,k:L()}),"p-1sr0kt2")),g(oe,re)};V(te,oe=>{o()==="notes"&&a(E)&&[...r()].filter(re=>re!=="inbox").length>0&&oe(X)})}var J=U(te,2);{var ae=oe=>{var re=rd(),ce=b(re);ce.__click=[Zu,r,c,m];var de=b(ce);ue(de,()=>({"--size":"22px"})),pe(de.lastChild,{name:"pin-cancel"}),fe(()=>ye(ce,1,me({j:!0,k:L()}),"p-1sr0kt2")),g(oe,re)};V(J,oe=>{o()==="notes"&&a(P)&&[...r()].filter(re=>re!=="inbox").length>0&&oe(ae)})}var Q=U(J,2);{var Pe=oe=>{var re=ad(),ce=b(re);ce.__click=[Ju,r,u,e,d,m];var de=b(ce);ue(de,()=>({"--size":"22px"})),pe(de.lastChild,{name:"bin"}),fe(()=>ye(ce,1,me({j:!0,k:L()}),"p-1sr0kt2")),g(oe,re)};V(Q,oe=>{o()==="notes"&&oe(Pe)})}var Y=U(Q,2);{var G=oe=>{var re=od(),ce=R(re),de=b(ce);de.__click=[$u,r,d,e,u,m];var k=b(de);ue(k,()=>({"--size":"22px"})),pe(k.lastChild,{name:"bin-cancel"});var M=U(ce,2),D=b(M);D.__click=[Qu,m,e,f,r];var F=b(D);ue(F,()=>({"--size":"22px"})),pe(F.lastChild,{name:"bin"}),fe(()=>{ye(de,1,me({j:!0,k:L()}),"p-1sr0kt2"),ye(D,1,me({j:!0,k:L()}),"p-1sr0kt2")}),g(oe,re)};V(Y,oe=>{o()==="bin"&&oe(G)})}fe(()=>{ye(K,1,me({h:!0,i:L()}),"p-1sr0kt2"),ye(I,1,me({j:!0,k:L()}),"p-1sr0kt2")}),g(j,K)};let r=ge(e,"selectedTags",7),o=ge(e,"mode",3,"notes");const{checkMobileSize:s}=Qt(),{getGetMapTags:i,getGetNotes:l,pinTag:c,moveNotesToBinByTags:u,restoreNotesFromBinByTags:d,deleteNotesByTags:f}=Jt();let v=N(s),_=H(null),p=H(Ge({value:!1})),y=H(!1),m=H(!1);const T=j=>{h(_,j,!0)},S=()=>{h(y,!1),h(m,!1)},C=()=>{const j=i()();for(const L of r())if(L!=="inbox"&&j.get(L)?.pinned)return!0;return!1},w=()=>{const j=i()();for(const L of r())if(L!=="inbox"&&!j.get(L)?.pinned)return!0;return!1};let P=N(C),E=N(w);Ae(()=>{a(p),Ot(()=>{a(_)&&a(p).value&&a(_).focus()})});var O=$(),x=R(O);{var B=j=>{var L=ld(),K=b(L),Z=b(K);Z.__click=[Gu,y];var I=b(Z);ue(I,()=>({"--rotate":"-90deg","--size":"20px"})),pe(I.lastChild,{name:"menu"});var ne=U(I,2);Ue(ne,{children:(oe,re)=>{var ce=Ie("tags menu");g(oe,ce)}});var te=U(K,2),X=b(te),J=b(X);J.__click=[ed,e];var ae=b(J);ue(ae,()=>({"--size":"20px"})),pe(ae.lastChild,{name:"close"});var Q=U(ae,2);Ue(Q,{children:(oe,re)=>{var ce=Ie("Clear");g(oe,ce)}});var Pe=U(X,2);fa(Pe,18,r,oe=>oe,(oe,re,ce)=>{{let de=N(()=>a(ce)===r().size-1?T:void 0);oi(oe,{get mode(){return o()},type:"selected",get tag(){return re},onClick:k=>{k?h(p,{value:!0},!0):h(p,{value:!1},!0),e.handleSelectedTagClick(re)},get onRef(){return a(de)}})}});var Y=U(te,2);{var G=oe=>{var re=$(),ce=R(re);{var de=M=>{Pr(M,{get startClose(){return a(m)},onClosed:S,children:(D,F)=>{n(D,()=>!0)},$$slots:{default:!0}})},k=M=>{var D=id(),F=R(D);ue(F,()=>({"--right":"0","--top":"10px"})),_a(F.lastChild,{transformOrigin:"top",get startClose(){return a(m)},onClosed:S,children:(z,q)=>{n(z,()=>!1)},$$slots:{default:!0}}),g(M,D)};V(ce,M=>{a(v)?M(de):M(k,!1)})}g(oe,re)};V(Y,oe=>{a(y)&&oe(G)})}g(j,L)};V(x,j=>{r().size>0&&j(B)})}g(t,O),le()}Xe(["click"]);const cd=(t,e,n)=>{if(t.has("inbox"))return[];const r=[],o=Array.from(t.values());for(const s of e)if(s.data&&!(n&&!n(s))){if(t.size===0){for(const i of s?.data?.tags||[])r.includes(i)||r.push(i);continue}if(s.data&&o.every(i=>s.data?.tags.includes(i)))for(const i of s.data.tags||[])!t.has(i)&&!r.includes(i)&&r.push(i)}return r};function ud(t,e,n,r,o){const s={x:0,y:0},i={x:t,y:e},l={x:n,y:r},c={x:1,y:1},u=Vn(s,i,o),d=Vn(i,l,o),f=Vn(l,c,o),v=Vn(u,d,o),_=Vn(d,f,o),y=Vn(v,_,o),m=_,T=f,S=c,C=(m.x-y.x)/(S.x-y.x),w=(m.y-y.y)/(S.y-y.y),P=(T.x-y.x)/(S.x-y.x),E=(T.y-y.y)/(S.y-y.y);return[C,w,P,E]}function Vn(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}}function dd(t,e,n,r,o,s=1e-4){function i(d){const f=1-d;return 3*f*f*d*e+3*f*d*d*r+d*d*d*1}let l=0,c=1,u=0;for(;l<=c;){u=(l+c)/2;const d=i(u);if(Math.abs(d-o)<s)return u;d<o?l=u:c=u}return u}const fd=(t,e,n,r,o)=>{const s=dd(t,e,n,r,o),[i,l,c,u]=ud(t,e,n,r,s);return`cubic-bezier(${i}, ${l}, ${c}, ${u})`};function vd(t,e){ie(e,!0),pn();let n=ge(e,"dialog",7);const r=3,o=50,s=5,i=.6,l=.3,c=.35;let u=0,d=0,f=0,v=!1,_=!1,p=0,y=0,m=0;const T=()=>{u=0,d=0,v=!1,_=!1,p=0,y=0,m=0,f=0,S!==null&&(cancelAnimationFrame(S),S=null),C=null};let S=null,C=null;const w=L=>{n()&&(e.sidebarState!=="opened"&&e.sidebarState!=="closed"||(u=L.touches[0].clientX,d=L.touches[0].clientY,f=performance.now(),v=!0,_=!1))},P=L=>e.sidebarState==="closed"&&L>0||e.sidebarState==="closeSwiping"&&L>0||e.sidebarState==="opened"&&L<0||e.sidebarState==="openSwiping"&&L<0,E=()=>{if(n()){if(n().style.setProperty("--transition-timing","0s"),n().style.setProperty("--transition-timing-backdrop","0.05s"),!n().open&&e.sidebarState==="closed")try{n().showModal(),n().offsetWidth}catch{return}e.onSwipe();try{const L=window.getComputedStyle(n()),K=L.transform||L.webkitTransform||"";if(y=n().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?p=-y:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(p=0),K&&K!=="none")try{p=new DOMMatrix(K).m41}catch{}_=!0}catch{T()}}},O=()=>{if(S=null,!C||!v||!n())return;const{x:L,y:K}=C;C=null;const Z=L-u,I=K-d,ne=Math.abs(Z)>Math.abs(I),te=Math.abs(Z)>r;if(!_)if(ne&&te&&P(Z))try{E()}catch{T();return}else return;let X=p+Z;const J=-y*.7;let Q=Math.max(J,Math.min(0,X));n().style.setProperty("--transition-timing","0s"),n().style.setProperty("--transition-timing-backdrop","0.05s"),n().style.transform=`translate3d(${Q}px, 0, 0)`,m=(Q-p)/y*100},x=L=>{if(!v)return;const K=L.touches[0].clientX,Z=L.touches[0].clientY;C={x:K,y:Z},S===null&&(S=requestAnimationFrame(O)),_&&Math.abs(K-u)>Math.abs(Z-d)&&L.preventDefault()},B=L=>{const K=Math.abs(L);if(K>=i)return s;if(K>=l){const Z=(K-l)/(i-l);return o-Z*(o-s)}else return o},j=L=>{if(S!==null&&(cancelAnimationFrame(S),S=null),C=null,!v||!n()){T();return}if(!_){T();return}let K=0;if(L?.changedTouches?.[0]){const re=L.changedTouches[0].clientX,de=performance.now()-f;de>0&&(K=(re-u)/de)}const Z=B(K);let I=null;e.sidebarState==="closeSwiping"?I=Math.abs(m)>Z||K>l?"open":"close":e.sidebarState==="openSwiping"&&(I=Math.abs(m)>Z||K<-l?"close":"open");const ne=-y*.7,te=0,X=p+m/100*y,ae=Math.abs((I==="open"?te:ne)-X),Q=Math.abs(ne-te),Pe=Q>0?c*(ae/Q):c;let Y=1/0;Math.abs(K)>1e-6&&(Y=ae/Math.abs(K)/1e3);const G=.05;let oe=Math.min(Y,Math.max(G,Pe));(!isFinite(oe)||oe<=0)&&(oe=Math.max(G,Pe)),n().style.setProperty("--transition-timing",`${oe}s`),n().style.setProperty("--transition-timing-backdrop",`${oe}s`),n().style.setProperty("--transition-function",`${fd(.4,.2,.2,1,ae/(y*.7))}`),n().offsetWidth,n().style.transform="",I==="open"?e.onOpen():I==="close"&&e.onClose(),T()};Se(()=>(document.addEventListener("touchstart",w,{passive:!0}),document.addEventListener("touchmove",x,{passive:!1}),document.addEventListener("touchend",j,{passive:!0}),document.addEventListener("touchcancel",j,{passive:!0}),()=>{document.removeEventListener("touchstart",w),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",j),document.removeEventListener("touchcancel",j),S!==null&&cancelAnimationFrame(S)})),le()}var hd=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),pd=W('<dialog><div class="a p-1wu47o4"><!> <!></div></dialog> <!> <!>',1);function gd(t,e){ie(e,!0);const{getDialogPages:n}=yt(),{getSidebarState:r,handleComputeState:o}=ha();let s=350;const i=pn(),{isScrolling:l}=io();let c=H(null),u=H(null),d=N(r);Ae(()=>{n().length>0&&o({type:"close"})});const f=()=>{e.blocked||o({type:"close"})},v=()=>{e.blocked||o({type:"open"})},_=()=>{o({type:"opened"})},p=()=>{o({type:"closed"})},y=()=>{o({type:"swipe"})},m=I=>{I.preventDefault(),f()};Se(()=>(a(c)?.addEventListener("close",p),a(c)?.addEventListener("cancel",m),()=>{a(c)?.removeEventListener("close",p),a(c)?.removeEventListener("cancel",m)}));const T=()=>{a(c)?.style.removeProperty("--transition-timing"),a(c)?.style.removeProperty("--transition-timing-backdrop"),a(c)?.style.removeProperty("--transition-function"),a(c)?.style.removeProperty("transform"),a(c)?.style.removeProperty("--backdrop-bg")},S=N(l);Ae(()=>{if(a(d),!!a(c))switch(a(d).type==="openSwiping"||a(d).type==="closeSwiping"?i.isSwiping=!0:i.isSwiping=!1,a(d).type){case"closeSwiping":{const I=setTimeout(()=>{f()},2e4);return()=>{clearTimeout(I)}}case"openSwiping":{const I=setTimeout(()=>{v()},2e4);return()=>{clearTimeout(I)}}case"opening":{a(c).open||a(c).showModal(),a(c).getBoundingClientRect();const I=setTimeout(()=>{T()},s+1),ne=()=>{clearTimeout(I),T()};return a(c)?.addEventListener("transitionend",ne,{once:!0}),_(),()=>{clearTimeout(I),a(c)?.removeEventListener("transitionend",ne)}}case"closing":{const I=setTimeout(()=>{a(d).type==="closing"&&p()},s+1),ne=()=>{clearTimeout(I),p()};return a(c)?.addEventListener("transitionend",ne,{once:!0}),()=>{clearTimeout(I),a(c)?.removeEventListener("transitionend",ne)}}case"closed":a(c)?.close(),T();break;case"opened":T();break}}),Se(()=>{a(d).type==="opened"&&o({type:"open"})});var C=pd(),w=R(C),P=b(w),E=b(P);{var O=I=>{var ne=$(),te=R(ne);Ce(te,()=>e.children),g(I,ne)};V(E,I=>{a(d).type!=="closed"&&I(O)})}var x=U(E,2);{var B=I=>{var ne=hd(),te=R(ne);ue(te,()=>({"--left":"calc(30%)"})),ri(te.lastChild,{}),g(I,ne)};V(x,I=>{a(d).type==="opened"&&I(B)})}Je(P,I=>h(u,I),()=>a(u)),Je(w,I=>h(c,I),()=>a(c));var j=U(w,2);{var L=I=>{co(I,{get dialog(){return a(c)},get dialogInner(){return a(u)},onClose:f})};V(j,I=>{a(d).type==="opened"&&!e.blocked&&I(L)})}var K=U(j,2);{var Z=I=>{vd(I,{onClose:f,onOpen:v,onSwipe:y,get sidebarState(){return a(d).type},get dialog(){return a(c)}})};V(K,I=>{(!a(S)&&a(d).type==="closed"||a(d).type==="opened"||a(d).type==="openSwiping"||a(d).type==="closeSwiping")&&!e.blocked&&I(Z)})}fe(()=>ye(w,1,me({b:!0,c:a(d).type==="closed",d:a(d).type==="opened",e:i.working&&(!i.isSwiping||!e.blocked)}),"p-1wu47o4")),g(t,C),le()}var _d=(t,e,n)=>{t.preventDefault(),e(),n("/")},md=W('<a class="d p-pvf6gd" href="/"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),yd=(t,e,n)=>{t.preventDefault(),e(),n(`/${ee.Bin}`)},wd=W('<a class="d p-pvf6gd"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),bd=W('<div class="a p-pvf6gd"><div class="b p-pvf6gd"><!> <div class="c p-pvf6gd"><a class="d p-pvf6gd"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-pvf6gd"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="e p-pvf6gd"><!></div> <!></div> <!>',1),Sd=W('<div class="f p-pvf6gd"><div class="e p-pvf6gd"><!></div> <div class="g p-pvf6gd"><div class="a p-pvf6gd"><!></div> <!></div></div>');function Cd(t,e){ie(e,!0);const{checkMobileSize:n}=Qt(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=ha(),{getAppLocation:i,replace:l}=kt(),{getDialogPages:c,createDialogPageHref:u,createHandleClickDialogPage:d}=yt(),{getTagsSearch:f,setTagsSearch:v}=sc(),_=N(()=>i().pathname),{getSelectedTags:p,addTag:y,removeTag:m,clearTags:T}=oo();let S=N(p);const{checkNotesInBin:C,getGetNotes:w}=Jt(),P=N(w);let E=N(()=>a(_)==="/bin"?"bin":"notes");const O=Q=>{y(Q)},x=Q=>{m(Q)};let B=N(()=>a(S).size===0&&!a(S).has("inbox")&&(a(P)()||[]).some(Q=>(a(E)==="notes"&&Q?.data&&!Q.data.deletedAt||a(E)==="bin"&&Q?.data&&Q.data.deletedAt)&&Q?.data?.tags.length===0)),j=N(()=>cd(a(S),a(P)()||[],Q=>!(Q?.data&&Q.data.deletedAt&&a(E)==="notes"||Q?.data&&!Q.data.deletedAt&&a(E)==="bin"))),L=N(()=>[...a(B)?["inbox"]:[],...a(j)].filter(Q=>f()===""||Q.toLowerCase().indexOf(f().toLowerCase())!==-1)),K=N(n);const{checkExistedDialog:Z}=gn();let I=N(()=>c().length>0||Z());const ne=()=>{if(a(K)){if(a(I))return;o().type==="opened"?r():o().type==="closed"&&s()}};Se(()=>wr({key:"b",meta:!0,action:ne})),Se(()=>wr({key:"b",ctrl:!0,action:ne}));var te=$(),X=R(te);{var J=Q=>{gd(Q,{get blocked(){return a(I)},children:(Pe,Y)=>{var G=bd(),oe=R(G),re=b(oe),ce=b(re);ai(ce,{});var de=U(ce,2),k=b(de),M=N(()=>d(ee.Settings));k.__click=function(...Ee){a(M)?.apply(this,Ee)};var D=b(k);ue(D,()=>({"--size":"24px"})),pe(D.lastChild,{name:"settings"});var F=U(D,2);Ue(F,{children:(Ee,Fe)=>{var at=Ie("Settings");g(Ee,at)}});var z=U(k,2),q=N(()=>d(ee.Sync));z.__click=function(...Ee){a(q)?.apply(this,Ee)};var we=b(z);ue(we,()=>({"--size":"24px"})),pe(we.lastChild,{name:"sync"});var Me=U(we,2);Ue(Me,{children:(Ee,Fe)=>{var at=Ie("Sync");g(Ee,at)}});var he=U(z,2);{var se=Ee=>{var Fe=md();Fe.__click=[_d,r,l];var at=b(Fe);ue(at,()=>({"--size":"24px"})),pe(at.lastChild,{name:"note"});var Bt=U(at,2);Ue(Bt,{children:(Ft,ot)=>{var Pt=Ie("Notes");g(Ft,Pt)}}),g(Ee,Fe)},Ne=Ee=>{var Fe=$(),at=R(Fe);{var Bt=Ft=>{var ot=wd();ot.__click=[yd,r,l];var Pt=b(ot);ue(Pt,()=>({"--size":"24px"})),pe(Pt.lastChild,{name:"bin"});var Tr=U(Pt,2);Ue(Tr,{children:(ya,fo)=>{var $t=Ie("Bin");g(ya,$t)}}),fe(()=>Re(ot,"href",`/${ee.Bin}`)),g(Ft,ot)};V(at,Ft=>{C()&&Ft(Bt)},!0)}g(Ee,Fe)};V(he,Ee=>{a(_)===`/${ee.Bin}`?Ee(se):Ee(Ne,!1)})}var We=U(re,2),nt=b(We);{let Ee=N(f);Fa(nt,{placeholder:"Search tag",get value(){return a(Ee)},onChange:Fe=>{v(Fe)}})}var Rt=U(We,2);Bo(Rt,{get clearTags(){return T},get mode(){return a(E)},get selectedTags(){return a(S)},handleSelectedTagClick:x});var rt=U(oe,2);Ro(rt,{get mode(){return a(E)},get tags(){return a(L)},handleTagClick:O,mobile:!0}),fe((Ee,Fe)=>{Re(k,"href",Ee),Re(z,"href",Fe)},[()=>u(ee.Settings),()=>u(ee.Sync)]),g(Pe,G)},$$slots:{default:!0}})},ae=Q=>{var Pe=Sd(),Y=b(Pe),G=b(Y);{let k=N(f);Fa(G,{placeholder:"Search tag",get value(){return a(k)},onChange:M=>{v(M)}})}var oe=U(Y,2),re=b(oe),ce=b(re);Bo(ce,{get clearTags(){return T},get mode(){return a(E)},get selectedTags(){return a(S)},handleSelectedTagClick:x});var de=U(re,2);Ro(de,{get mode(){return a(E)},get tags(){return a(L)},handleTagClick:O}),g(Q,Pe)};V(X,Q=>{a(K)?Q(J):Q(ae,!1)})}g(t,te),le()}Xe(["click"]);const Ed=(t,e,n)=>{ma({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await e(),n("/")},onCancel:async()=>{}})};var kd=(t,e)=>{t.preventDefault(),e("/")},Pd=W('<a class="d p-22fuob" href="/"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),Td=(t,e)=>{t.preventDefault(),e(`/${ee.Bin}`)},xd=W('<a class="d p-22fuob"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),Dd=W('<button class="f p-22fuob" type="button">Empty bin</button>'),Ad=W('<div class="a p-22fuob"><div class="b p-22fuob"><div class="c p-22fuob"><a class="d p-22fuob"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-22fuob"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="e p-22fuob"><!></div> <!></div> <div class="g p-22fuob"><div class="h p-22fuob"><!></div> <div class="i p-22fuob"><div class="j p-22fuob"><div class="k p-22fuob"><!></div> <!></div></div></div></div>');function Nd(t,e){ie(e,!0);const{getFeedSearch:n,setFeedSearch:r}=Rs(),{getScrollContainer:o}=ga();let s=N(o);const{emptyBin:i,checkNotesInBin:l}=Jt(),{getAppLocation:c,replace:u}=kt(),{createDialogPageHref:d,createHandleClickDialogPage:f,getDialogPages:v}=yt(),{checkExistedDialog:_}=gn();let p=H(null);const y=N(l),m=N(()=>c().pathname),T=()=>{a(s)&&a(s).scrollTo({top:0,behavior:"smooth"})},S=()=>{v().length===0&&!_()&&a(p)?.focus()};Se(()=>wr({key:"k",meta:!0,action:S})),Se(()=>wr({key:"k",ctrl:!0,action:S}));var C=Ad(),w=b(C),P=b(w),E=b(P),O=N(()=>f(ee.Settings));E.__click=function(...k){a(O)?.apply(this,k)};var x=b(E);ue(x,()=>({"--rotate":"30deg","--size":"20px"})),pe(x.lastChild,{name:"settings"});var B=U(E,2),j=N(()=>f(ee.Sync));B.__click=function(...k){a(j)?.apply(this,k)};var L=b(B);ue(L,()=>({"--size":"20px"})),pe(L.lastChild,{name:"sync"});var K=U(B,2);{var Z=k=>{var M=Pd();M.__click=[kd,u];var D=b(M);ue(D,()=>({"--size":"18px"})),pe(D.lastChild,{name:"note"}),g(k,M)},I=k=>{var M=$(),D=R(M);{var F=z=>{var q=xd();q.__click=[Td,u];var we=b(q);ue(we,()=>({"--size":"24px"})),pe(we.lastChild,{name:"bin"}),fe(()=>Re(q,"href",`/${ee.Bin}`)),g(z,q)};V(D,z=>{a(y)&&z(F)},!0)}g(k,M)};V(K,k=>{a(m)===`/${ee.Bin}`?k(Z):k(I,!1)})}var ne=U(P,2),te=b(ne);ai(te,{});var X=U(ne,2);{var J=k=>{var M=$(),D=R(M);{var F=z=>{var q=Dd();q.__click=[Ed,i,u],g(z,q)};V(D,z=>{a(y)&&z(F)})}g(k,M)},ae=k=>{Du(k,{})};V(X,k=>{a(m)===`/${ee.Bin}`?k(J):k(ae,!1)})}var Q=U(w,2),Pe=b(Q),Y=b(Pe);Cd(Y,{});var G=U(Pe,2),oe=b(G),re=b(oe),ce=b(re);{let k=N(n);Fa(ce,{onFocus:T,placeholder:"Search",get value(){return a(k)},onChange:M=>{r(M)},get ref(){return a(p)},set ref(M){h(p,M,!0)}})}var de=U(re,2);bu(de,{}),fe((k,M)=>{Re(E,"href",k),Re(B,"href",M)},[()=>d(ee.Settings),()=>d(ee.Sync)]),g(t,C),le()}Xe(["click"]);function Ld(t,e){ie(e,!0);let n=ge(e,"dialog",7);const r=pn();let o=null;const s=()=>{e.dialogState==="swiping"&&e.onClose()};Ae(()=>(e.dialogState==="swiping"&&(o=setTimeout(s,3e3)),()=>{o&&(clearTimeout(o),o=null)}));let i=null,l=null;const c=3,u=50,d=5,f=.6,v=.3,_=.35,p=.95;let y=0,m=0,T=0,S=!1,C=!1,w=0,P=0,E=0;const O=()=>{y=0,m=0,S=!1,C=!1,w=0,P=0,E=0,T=0,i=null,l!==null&&(cancelAnimationFrame(l),l=null),o&&(clearTimeout(o),o=null)},x=X=>{n()&&e.dialogState==="opened"&&(y=X.touches[0].clientX,m=X.touches[0].clientY,T=performance.now(),S=!0,C=!1)},B=X=>e.dialogState==="opened"&&X>0||e.dialogState==="swiping"&&X>0,j=()=>{if(n()){n().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const X=window.getComputedStyle(n()),J=X.transform||X.webkitTransform||"";if(P=n().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(w=0),J&&J!=="none")try{w=new DOMMatrix(J).m41}catch{}C=!0}catch{O()}}},L=()=>{if(!n())return;const J=Math.abs(w+E*P/100)/P;n().style.setProperty("--backdrop-bg",`${.1*(1-J)}`)},K=()=>{if(l=null,!i||!S||!n()){O();return}const X=[...i.touches].reduce((ce,de)=>ce+de.clientX,0)/i.touches.length,J=[...i.touches].reduce((ce,de)=>ce+de.clientY,0)/i.touches.length,ae=X-y,Q=J-m,Pe=Math.abs(ae)>Math.abs(Q),Y=Math.abs(ae)>c;if(!C)if(Pe&&Y&&B(ae))try{j()}catch{O();return}else return;let G=w+ae*p;G=Math.max(0,Math.min(P,G)),!(G<0)&&(n().style.setProperty("--transition-timing","0s"),n().style.transform=`translate3d(${G}px, 0, 0)`,r.swipingRatio=Math.abs(1-G/P),E=(G-w)/P*100,e.dialogState==="swiping"&&(o&&clearTimeout(o),o=setTimeout(s,3e3)),L())},Z=X=>{if(!S)return;i=X,l===null&&(l=requestAnimationFrame(K));const J=X.touches[0].clientX-y,ae=X.touches[0].clientY-m,Q=Math.abs(J)>Math.abs(ae);C&&Q&&X.preventDefault()},I=X=>{const J=Math.abs(X);if(J>=f)return d;if(J>=v){const ae=(J-v)/(f-v);return u-ae*(u-d)}else return u},ne=(X,J)=>{if(Math.abs(X)>=f)return _*.5;const Q=Math.abs(E)/100;return J?_*Math.max(.5,1-Q):_*Math.max(.5,Q)},te=X=>{if(l!==null&&(cancelAnimationFrame(l),l=null),!S||!n()){O();return}if(!C){O();return}let J=0;if(X?.changedTouches?.[0]){const G=X.changedTouches[0].clientX,re=performance.now()-T;re>0&&(J=(G-y)/re)}const ae=I(J);let Q=null;e.dialogState==="swiping"&&(Q=Math.abs(E)>ae||J<-v?"close":"open");const Pe=e.dialogState==="swiping"&&Q==="close",Y=ne(J,Pe);r.duration=Y-.02,n().style.setProperty("--transition-timing",`${Y}s`),n().offsetWidth,n().style.transform="",Q==="open"?e.onOpen():Q==="close"&&e.onClose(),n()?.style.removeProperty("--backdrop-bg"),O()};Se(()=>(n().addEventListener("touchstart",x,{passive:!0}),n().addEventListener("touchmove",Z,{passive:!1}),n().addEventListener("touchend",te,{passive:!0}),n().addEventListener("touchcancel",te,{passive:!0}),()=>{n().removeEventListener("touchstart",x),n().removeEventListener("touchmove",Z),n().removeEventListener("touchend",te),n().removeEventListener("touchcancel",te),l!==null&&cancelAnimationFrame(l)})),le()}var Id=(t,e)=>{e.onStartClose()},Md=W('<button class="d e p-1ttsb5j"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Od=W('<dialog><div class="a p-1ttsb5j"><div class="b p-1ttsb5j"><div class="c p-1ttsb5j"><!></div></div> <!></div></dialog> <!>',1);function Rd(t,e){ie(e,!0);let n=350;const{isScrolling:r,enable:o}=io();let s=H(null),i=H(null);const l=pn(),c=E=>{E.preventDefault(),e.onStartClose()};Se(()=>(a(s)?.addEventListener("close",e.onClosed),a(s)?.addEventListener("cancel",c),()=>{a(s)?.removeEventListener("close",e.onClosed),a(s)?.removeEventListener("cancel",c)}));const u=()=>{a(s)?.style.removeProperty("--transition-timing"),a(s)?.style.removeProperty("transform"),a(s)?.style.removeProperty("--backdrop-bg")},d=()=>{o()},f=N(r);Ae(()=>{if(e.dialogState,!!a(s))switch(e.dialogState){case"opening":{a(s).open||a(s).showModal(),a(s).getBoundingClientRect();const E=setTimeout(()=>{u()},n+1),O=()=>{clearTimeout(E),u()};return a(s)?.addEventListener("transitionend",O,{once:!0}),e.onOpened(),()=>{clearTimeout(E),a(s)?.removeEventListener("transitionend",O)}}case"closing":{const E=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),O=()=>{clearTimeout(E),e.onClosed()};return a(s)?.addEventListener("transitionend",O,{once:!0}),()=>{clearTimeout(E),a(s)?.removeEventListener("transitionend",O)}}case"opened":u()}});var v=Od(),_=R(v),p=b(_),y=b(p),m=b(y),T=b(m);{var S=E=>{var O=Md();O.__click=[Id,e];var x=b(O);ue(x,()=>({"--size":"32px"})),pe(x.lastChild,{name:"back"});var B=U(x,2);Ue(B,{children:(j,L)=>{var K=Ie("back");g(j,K)}}),g(E,O)};V(T,E=>{e.blocked||E(S)})}var C=U(y,2);Ce(C,()=>e.children),Je(p,E=>h(i,E),()=>a(i)),Je(_,E=>h(s,E),()=>a(s));var w=U(_,2);{var P=E=>{Ld(E,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return a(s)}})};V(w,E=>{(!a(f)&&e.dialogState==="opened"||e.dialogState==="swiping")&&!e.blocked&&E(P)})}fe(()=>ye(_,1,me({f:!0,g:e.dialogState==="opened",h:e.hidden,i:l.working&&(!l.isSwiping||!e.hidden)}),"p-1ttsb5j")),ro("scroll",p,d),g(t,v),le()}Xe(["click"]);const Fo=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function Bd(t,e){ie(e,!0);let n=ge(e,"hiddenDialog",3,!1),r=ge(e,"onClose",3,()=>{});const o=pn();let s=H(Ge(Fo({type:"closed"})));const i=m=>{h(s,Fo(a(s),m),!0)},l=()=>{e.onStartClose&&(e.onStartClose(),i({type:"close"}))},c=()=>{i({type:"open"})},u=()=>{i({type:"opened"}),o.swipingRatio=1,o.duration=.2},d=()=>{r()(),i({type:"closed"}),o.swipingRatio=1,o.duration=.2},f=()=>{i({type:"swipe"})};Ae(()=>{a(s).type==="swiping"?o.isSwiping=!0:o.isSwiping=!1,a(s).type==="closed"&&e.shownDialog?c():a(s).type==="opened"&&!e.shownDialog&&l()});var v={handleComputeState:i},_=$(),p=R(_);{var y=m=>{{let T=N(()=>!e.onStartClose);Rd(m,{onSwipe:f,onOpened:u,onClosed:d,onStartClose:l,onStartOpen:c,get dialogState(){return a(s).type},get hidden(){return n()},get blocked(){return a(T)},children:(S,C)=>{var w=$(),P=R(w);Ce(P,()=>e.children),g(S,w)},$$slots:{default:!0}})}};V(p,m=>{a(s).type!=="closed"&&m(y)})}return g(t,_),le(v)}const Fd=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const o=i=>{i.preventDefault(),n()},s=()=>{r?.()};Se(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Se(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var zd=(t,e)=>{e.onStartBack()},jd=W('<button class="d e p-13n05nq"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Hd=(t,e)=>{e.onStartClose()},Ud=W('<button class="d f p-13n05nq"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),qd=W('<dialog><div class="a p-13n05nq"><div class="b p-13n05nq"><div class="c p-13n05nq"><div><!></div> <div><!></div></div></div> <!></div></dialog> <!>',1);function Vd(t,e){ie(e,!0);let n=ge(e,"blockedDialog",3,!1),r=ge(e,"hiddenDialog",3,!1),o=ge(e,"isDesktopAnimationOff",3,!1),s=H(null),i=H(null),l=H(!1);Fd({getDialog:()=>a(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=pn();Ae(()=>{e.stateDialog==="closing"&&(c.working?a(s)?.addEventListener("transitionend",()=>{a(s)?.close()},{once:!0}):a(s)?.close())});const{getDialogPageHeight:u}=lo(),d=N(u);Se(()=>{setTimeout(()=>{h(l,!0)},50)});var f=qd(),v=R(f),_=b(v),p=b(_),y=b(p),m=b(y),T=b(m);{var S=x=>{var B=jd();B.__click=[zd,e];var j=b(B);ue(j,()=>({"--size":"28px"})),pe(j.lastChild,{name:"back"});var L=U(j,2);Ue(L,{children:(K,Z)=>{var I=Ie("back");g(K,I)}}),g(x,B)};V(T,x=>{(!(n()||r())||n())&&e.onStartBack&&x(S)})}var C=U(m,2),w=b(C);{var P=x=>{var B=Ud();B.__click=[Hd,e];var j=b(B);ue(j,()=>({"--size":"28px"})),pe(j.lastChild,{name:"close"});var L=U(j,2);Ue(L,{children:(K,Z)=>{var I=Ie("close");g(K,I)}}),g(x,B)};V(w,x=>{n()||r()||x(P)})}var E=U(p,2);Ce(E,()=>e.children),Je(_,x=>h(i,x),()=>a(i)),Je(v,x=>h(s,x),()=>a(s));var O=U(v,2);co(O,{get dialog(){return a(s)},get dialogInner(){return a(i)},get onClose(){return e.onStartClose}}),fe(()=>{Ln(v,`height: ${a(d)+74}px`),ye(v,1,me({g:!0,h:e.stateDialog==="open",i:a(l),j:c.working,k:o(),l:r()}),"p-13n05nq")}),g(t,f),le()}Xe(["click"]);const Wd=({onStartClose:t,onClose:e})=>{let n=H("close");return{get state(){return a(n)},set state(i){h(n,i,!0)},handleStartClose:(i=!1)=>{i||(h(n,"closing"),t?.())},handleOpen:()=>{h(n,"open")},handleClose:()=>{h(n,"close"),e?.()}}};function Kd(t,e){ie(e,!0);let n=ge(e,"blockedDialog",3,!1),r=ge(e,"hiddenDialog",3,!1),o=ge(e,"onStartClose",3,()=>{}),s=ge(e,"onClose",3,()=>{}),i=Wd({onStartClose:o(),onClose:s()});Ae(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=f=>{f.key==="Escape"&&n()&&(f.preventDefault(),f.stopPropagation())};Se(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=$(),u=R(c);{var d=f=>{Vd(f,{get stateDialog(){return i.state},get blockedDialog(){return n()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(v,_)=>{var p=$(),y=R(p);Ce(y,()=>e.children),g(v,p)},$$slots:{default:!0}})};V(u,f=>{i.state!=="close"&&f(d)})}g(t,c),le()}function Yd(t,e){ie(e,!0);let n=ge(e,"blockedDialog",3,!1),r=ge(e,"hiddenDialog",3,!1),o=ge(e,"blockedBack",3,!1),s=ge(e,"onStartClose",3,()=>{}),i=ge(e,"onClose",3,()=>{});const l=N(()=>o()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=gn();Se(()=>(c(),()=>{u()}));const{checkMobileSize:d}=Qt();var f=$(),v=R(f);{var _=y=>{Bd(y,{get shownDialog(){return e.shownDialog},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return a(l)},get onClose(){return i()}})},p=y=>{Kd(y,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return a(l)},get onStartClose(){return s()},get onClose(){return i()}})};V(v,y=>{d()?y(_):y(p,!1)})}g(t,f),le()}function zo(t,e){ie(e,!0);const{clearDialogPages:n,popDialogPage:r}=yt(),{checkMobileSize:o}=Qt();let s=ge(e,"blocked",3,!1),i=ge(e,"isLastDialog",3,!1),l=ge(e,"onBack",3,()=>{}),c=ge(e,"onClosed",3,()=>{});const{checkBlockedDialog:u,checkClosableDialog:d}=gn(),f=N(()=>s()||u()),v=N(d),_=()=>{(!a(f)||a(f))&&e.shown&&(r(),l()())},p=()=>{((!a(f)||a(f)&&a(v))&&e.shown||!e.shown)&&n()},y=()=>{c()()};{let m=N(()=>a(f)&&e.shown||a(v)===!1),T=N(()=>a(f)||i()&&(a(v)===!1||!o()));Yd(t,{get shownDialog(){return e.shown},get blockedDialog(){return a(m)},get hiddenDialog(){return e.hidden},get blockedBack(){return a(T)},onStartBack:_,onStartClose:p,onClose:y,children:(S,C)=>{var w=$(),P=R(w);Ce(P,()=>e.children),g(S,w)},$$slots:{default:!0}})}le()}var Gd=W('<div class="p-ah4hnt"><!></div>');function Oe(t,e){ie(e,!0);const{setDialogPageHeight:n}=lo();let r=H(null);Se(()=>{a(r)&&(a(r).getBoundingClientRect(),a(r).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(a(r))return i.observe(a(r)),()=>{a(r)&&i.unobserve(a(r)),i.disconnect()}});var o=Gd(),s=b(o);Ce(s,()=>e.children),Je(o,i=>h(r,i),()=>a(r)),g(t,o),le()}var Xd=W('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function Zd(t,e){ie(e,!1);const{replace:n}=kt(),r=i=>{i.preventDefault(),n("/")};va();var o=Xd(),s=U(b(o),2);cn(s,{element:"a",href:"/",onClick:r,children:(i,l)=>{var c=Ie("close");g(i,c)},$$slots:{default:!0}}),g(t,o),le()}const Jd="modulepreload",Qd=function(t){return"/"+t},jo={},Be=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(n.map(u=>{if(u=Qd(u),u in jo)return;jo[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":Jd,d||(v.as="script"),v.crossOrigin="",v.href=u,l&&v.setAttribute("nonce",l),document.head.appendChild(v),d)return new Promise((_,p)=>{v.addEventListener("load",_),v.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var $d=W('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function ef(t){var e=$d(),n=U(b(e),2);cn(n,{onClick:()=>location.reload(),children:(r,o)=>{var s=Ie("Reload");g(r,s)},$$slots:{default:!0}}),g(t,e)}var tf=W('<div class="p-uzefkz"><!></div>');function nf(t,e){ie(e,!0);let n=H(!1);const{getDialogPageHeight:r}=lo(),o=N(r);Se(()=>{const c=setTimeout(()=>{h(n,!0)},250);return()=>{clearTimeout(c)}});var s=tf(),i=b(s);{var l=c=>{uo(c,{})};V(i,c=>{a(n)&&c(l)})}fe(()=>Ln(s,`min-height: ${a(o)??""}px;`)),g(t,s),le()}function ze(t,e){ie(e,!0);const n={},r=Object.assign({"./Pages/About.svelte":()=>Be(()=>import("./aCn0u7qCd.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>Be(()=>import("./advzaLhxh.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>Be(()=>import("./aVcvK_4Af.js"),__vite__mapDeps([6,3,7])),"./Pages/AccountSetup.svelte":()=>Be(()=>import("./aC1h1L4o_.js"),__vite__mapDeps([8,9])),"./Pages/Auth.svelte":()=>Be(()=>import("./atWsKy4A0.js"),__vite__mapDeps([10,9])),"./Pages/ChangeTags.svelte":()=>Be(()=>import("./a0DlVbJfy.js"),[]),"./Pages/ClearStore.svelte":()=>Be(()=>import("./aB9dYFKaf.js"),__vite__mapDeps([11,12])),"./Pages/ConfirmAccessKey.svelte":()=>Be(()=>import("./aDAsuV2HA.js"),__vite__mapDeps([13,4,3,14,15,16,17])),"./Pages/Exit.svelte":()=>Be(()=>import("./aC0XWeELL.js"),__vite__mapDeps([18,19])),"./Pages/ExportData.svelte":()=>Be(()=>import("./aDXxMy3AM.js"),__vite__mapDeps([20,21,15,16,22,23,24,25])),"./Pages/ImportData.svelte":()=>Be(()=>import("./aBamYoFP8.js"),__vite__mapDeps([26,21,15,16,22,27])),"./Pages/Install.svelte":()=>Be(()=>import("./aDMq_iRoI.js"),__vite__mapDeps([28,29])),"./Pages/InstallSuccess.svelte":()=>Be(()=>import("./ahJg-zQAa.js"),__vite__mapDeps([30,31])),"./Pages/NewNote.svelte":()=>Be(()=>import("./aDCdDJLKn.js"),__vite__mapDeps([32,33,21,15,16,22,34])),"./Pages/Note.svelte":()=>Be(()=>import("./aBnkEs8xx.js"),__vite__mapDeps([35,33,21,15,16,22,34,36])),"./Pages/Settings.svelte":()=>Be(()=>import("./aCyFZ3SMR.js"),__vite__mapDeps([37,23,24,38])),"./Pages/Signin.svelte":()=>Be(()=>import("./aDb7cHuSe.js"),__vite__mapDeps([39,4,3,14,40])),"./Pages/Signup.svelte":()=>Be(()=>import("./aBXQYNu0I.js"),__vite__mapDeps([41,14,4,3,40])),"./Pages/Subscription.svelte":()=>Be(()=>import("./aq8ybuQAF.js"),__vite__mapDeps([42,43])),"./Pages/Sync.svelte":()=>Be(()=>import("./avPyZ_xET.js"),__vite__mapDeps([44,45]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(r[c]){const u=r[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var s=$(),i=R(s);Ul(i,()=>o(e.page),l=>{nf(l,{})},(l,c)=>{const u=N(()=>a(c).default);var d=$(),f=R(d);Wl(f,()=>a(u),(v,_)=>{_(v,{get params(){return e.params},get hidden(){return e.hidden}})}),g(l,d)},l=>{ef(l)}),g(t,s),le()}const rf=(t,e,n,r)=>{e.noteData.pinnedAt?(n(e.noteId,!1),Gt("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),Gt("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),h(r,!0)},af=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),Gt("Link copied"),h(n,!0)},of=(t,e,n,r)=>{h(e,!0),ma({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await n(r.noteId)},onCancel:async()=>{}})};var sf=W('<li class="p-49y85j"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),lf=(t,e,n)=>{h(e,!0),h(n,!0)},cf=W('<li class="p-49y85j"><button><span class="b p-49y85j"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),uf=(t,e,n)=>{h(e,!0),h(n,!0)},df=W(`<li class="p-49y85j"><button><span class="b p-49y85j"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="p-49y85j"><button><span class="b c p-49y85j"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin</button></li>`,1),ff=W('<ul class="a p-49y85j"><!> <li class="p-49y85j"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),vf=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function hf(t,e){ie(e,!0);const n=(w,P=Te)=>{var E=ff(),O=b(E);{var x=te=>{var X=sf(),J=b(X);J.__click=[af,e,u];var ae=b(J);ue(ae,()=>({"--size":"20px"})),pe(ae.lastChild,{name:"copy"}),fe(()=>ye(J,1,me({d:!0,e:P()}),"p-49y85j")),g(te,X)};V(O,te=>{P()&&e.noteData.url&&te(x)})}var B=U(O,2),j=b(B);j.__click=[rf,e,s,u];var L=b(j);{let te=N(()=>e.noteData.pinnedAt?"pin-cancel":"pin");ue(L,()=>({"--size":"20px"})),pe(L.lastChild,{get name(){return a(te)}})}var K=U(L),Z=U(B,2);{var I=te=>{var X=cf(),J=b(X);J.__click=[lf,d,u];var ae=b(J),Q=b(ae);ue(Q,()=>({"--size":"20px"})),pe(Q.lastChild,{name:"bin"}),fe(()=>ye(J,1,me({c:!0,d:!0,e:P()}),"p-49y85j")),g(te,X)},ne=te=>{var X=df(),J=R(X),ae=b(J);ae.__click=[uf,f,u];var Q=b(ae),Pe=b(Q);ue(Pe,()=>({"--size":"20px"})),pe(Pe.lastChild,{name:"bin-cancel"});var Y=U(J,2),G=b(Y);G.__click=[of,u,o,e];var oe=b(G),re=b(oe);ue(re,()=>({"--size":"20px"})),pe(re.lastChild,{name:"bin"}),fe(()=>{ye(ae,1,me({d:!0,e:P()}),"p-49y85j"),ye(G,1,me({d:!0,e:P()}),"p-49y85j")}),g(te,X)};V(Z,te=>{l()==="notes"?te(I):te(ne,!1)})}fe(()=>{ye(j,1,me({d:!0,e:P()}),"p-49y85j"),ln(K,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),g(w,E)},{moveNoteToBin:r,deleteNote:o,pinNote:s,restoreNoteFromBin:i}=Jt();let l=ge(e,"mode",3,"notes"),c=ge(e,"shownMenu",15),u=H(!1),d=H(!1),f=H(!1);const{checkMobileSize:v}=Qt();let _=N(v);const p=async()=>{r(e.noteId),Gt("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},y=()=>{i(e.noteId),Gt("Note restored from bin",{onCancel:()=>{r(e.noteId)}})},m=()=>{a(d)?(h(d,!1),p()):a(f)&&(h(f,!1),y()),c(!1),h(u,!1)};var T=$(),S=R(T);{var C=w=>{var P=$(),E=R(P);{var O=B=>{Pr(B,{get startClose(){return a(u)},onClosed:m,children:(j,L)=>{n(j,()=>!0)},$$slots:{default:!0}})},x=B=>{var j=vf(),L=R(j);ue(L,()=>({"--bottom":"-100px","--right":"20px"})),_a(L.lastChild,{get startClose(){return a(u)},get positionTop(){return e.showMenuUp},onClosed:m,children:(K,Z)=>{n(K,()=>!1)},$$slots:{default:!0}}),g(B,j)};V(E,B=>{a(_)?B(O):B(x,!1)})}g(w,P)};V(S,w=>{c()&&w(C)})}g(t,T),le()}Xe(["click"]);const pf=(t,e)=>{h(e,!0)},gf=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),Gt("Link copied"),h(n,!1)},_f=(t,e)=>{h(e,!0)},mf=(t,e)=>{h(e,!1)},yf=(t,e,n,r)=>{t.preventDefault(),e(`${ee.Note}?id=${encodeURIComponent(n.noteId)}`),h(r,!1)};var wf=W('<div class="b p-1cnhpip"></div>'),bf=W('<img loading="lazy" class="c" height="16" width="16" alt=""/>'),Sf=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Cf=W('<div class="a p-1cnhpip"><!></div>'),Ef=W('<button class="e p-1cnhpip"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),kf=(t,e)=>{h(e,!1)},Pf=W('<!> <a target="_blank" rel="noopener noreferrer" class="e f p-1cnhpip"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),Tf=W('<li><!> <a class="d p-1cnhpip" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button class="e g p-1cnhpip"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function xf(t,e){ie(e,!0);const{pushDialogPage:n}=yt(),{getFaviconEnabled:r}=gc();let o=ge(e,"mode",3,"notes"),s=H(!1),i=H(!1),l=H(!1),c=N(r);const{checkMobileSize:u}=Qt(),d=x=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(x).host}.ico`}catch{return""}},f=e.noteData.url||"";var v=Tf();v.__focusin=[_f,i],v.__focusout=[mf,i];var _=b(v);{var p=x=>{var B=Cf(),j=b(B);{var L=Z=>{var I=$(),ne=R(I);{var te=J=>{var ae=wf();g(J,ae)},X=J=>{var ae=bf();fe(Q=>Re(ae,"src",Q),[()=>d(f)]),ro("error",ae,()=>{h(l,!0)}),g(J,ae)};V(ne,J=>{a(l)?J(te):J(X,!1)})}g(Z,I)},K=Z=>{var I=Sf(),ne=R(I);ue(ne,()=>({"--size":"16px"})),pe(ne.lastChild,{name:"note"}),g(Z,I)};V(j,Z=>{f?Z(L):Z(K,!1)})}g(x,B)};V(_,x=>{a(c)&&x(p)})}var y=U(_,2);y.__click=[yf,n,e,i];var m=b(y),T=U(y,2),S=b(T);{var C=x=>{var B=Pf(),j=R(B);{var L=ne=>{var te=Ef();te.__click=[gf,e,i];var X=b(te);ue(X,()=>({"--size":"20px"})),pe(X.lastChild,{name:"copy"});var J=U(X,2);Ue(J,{children:(ae,Q)=>{var Pe=Ie("copy link");g(ae,Pe)}}),fe(()=>Re(te,"tabindex",e.focusHidden?-1:0)),g(ne,te)};V(j,ne=>{u()||ne(L)})}var K=U(j,2);K.__click=[kf,i];var Z=b(K);ue(Z,()=>({"--size":"18px"})),pe(Z.lastChild,{name:"open"});var I=U(Z,2);Ue(I,{children:(ne,te)=>{var X=Ie();fe(()=>ln(X,e.noteData.name||"unknown")),g(ne,X)}}),fe(()=>{Re(K,"href",f),Re(K,"tabindex",e.focusHidden?-1:0)}),g(x,B)};V(S,x=>{f&&x(C)})}var w=U(S,2);w.__click=[pf,s];var P=b(w);ue(P,()=>({"--size":"18px","--rotate":"90deg"})),pe(P.lastChild,{name:"menu"});var E=U(P,2);Ue(E,{children:(x,B)=>{var j=Ie("show menu");g(x,j)}});var O=U(T,2);hf(O,{get mode(){return o()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return a(s)},set shownMenu(x){h(s,x,!0)}}),fe((x,B)=>{ye(v,1,x,"p-1cnhpip"),Re(y,"tabindex",e.focusHidden?-1:0),Re(y,"href",B),ln(m,e.noteData?.name||"unknown"),ye(T,1,me({j:!0,k:a(i)}),"p-1cnhpip"),Re(w,"tabindex",e.focusHidden?-1:0)},[()=>me({h:!0,i:!!e.noteData.pinnedAt}),()=>`/?${wt}=${encodeURIComponent(`${ee.Note}?id=${encodeURIComponent(e.noteId)}`)}`]),g(t,v),le()}Xe(["focusin","focusout","click"]);var sr,si,ii;class Df{constructor(e){ke(this,sr);ut(this,"data");ut(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),Le(this,sr,si).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,Le(this,sr,ii).call(this)),e}isEmpty(){return this.data.length===0}}sr=new WeakSet,si=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(n,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},ii=function(){let e=0;const n=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<n&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<n&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class Af{constructor(e,n){ut(this,"heap");ut(this,"done");ut(this,"cache",[]);this.heap=new Df(n);for(const r of e)this.heap.insert(r);this.done=!1}get(e,n){const r=this.cache.slice(e,n);for(;r.length<n-e&&!this.heap.isEmpty();){const o=this.heap.extractMin();o!==void 0&&(this.cache.push(o),r.push(o))}return this.heap.isEmpty()&&(this.done=!0),r}}var Nf=W('<p class="d">No notes in bin</p>'),Lf=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),If=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),Mf=W('<div class="e p-cdl57y"><div class="f p-cdl57y"><!></div> <div>or</div> <div class="f p-cdl57y"><!></div></div>'),Of=W('<div class="c p-cdl57y"><!></div>'),Rf=W("<span>Back to notes</span>"),Bf=W('<div class="g p-cdl57y">No notes in bin</div> <div class="f p-cdl57y"><!></div>',1),Ff=W('<div class="h"><div class="g p-cdl57y">No notes found</div></div>'),zf=W('<div class="i p-cdl57y"><ul class="p-cdl57y"></ul></div>'),jf=W('<div class="a p-cdl57y"><div class="b p-cdl57y"><!></div></div>');function Hf(t,e){ie(e,!0);let n=ge(e,"getNotes",3,()=>[]),r=ge(e,"mode",3,"notes");const{getScrollContainer:o}=ga(),{createHandleClickDialogPage:s,createDialogPageHref:i}=yt(),{getSelectedTags:l}=oo(),{getFeedOrder:c}=js(),{replace:u}=kt(),d=Rs();let f=54,v=H(0),_=H(0),p=H(0),y=H(0),m=[],T=H(0),S=H(null),C=N(o),w=null,P=null;const E=N(l);Ae(()=>{a(E),a(L),a(C)?.scrollTo(0,0)});const{enable:O}=io(),x=()=>{O(),w||(w=requestAnimationFrame(()=>{const Y=a(C)?.scrollTop||0;h(p,Y,!0);const G=Math.ceil(a(v)/f);h(_,Math.floor(Y/(f*G))*(f*G)),w=null}))},B=()=>{P||(P=requestAnimationFrame(()=>{h(v,window.innerHeight-180||0,!0);const Y=a(C)?.scrollTop||0;h(p,Y,!0);const G=Math.ceil(a(v)/f);h(_,Math.floor(Y/(f*G))*(f*G)),P=null}))};Se(()=>{B(),x()});const j=()=>{x()};Ae(()=>(a(C)?.addEventListener("scroll",j),window.addEventListener("resize",B),()=>{a(C)?.removeEventListener("scroll",j),window.removeEventListener("resize",B)}));const L=N(c);Ae(()=>{const Y=n()()||[],G=[],oe=Array.from(a(E).values());for(let re=Y.length-1;re>=0;re--){if(!Y[re]||!Y[re].data)continue;const ce=Y[re];if(!(r()==="notes"&&ce?.data.deletedAt)&&!(r()==="bin"&&!ce?.data.deletedAt)&&!(d&&!(ce.data.name.toLowerCase().includes(d.getFeedSearch().toLowerCase())||ce.data.url.toLowerCase().includes(d.getFeedSearch().toLowerCase())||ce.data.text.toLowerCase().includes(d.getFeedSearch().toLowerCase())))){if(a(E).has("inbox")){if(ce.data.tags.length>0)continue}else if(a(E).size&&oe.some(de=>!ce.data.tags.includes(de)))continue;G.push(ce)}}h(y,G.length,!0),m=G,h(T,Date.now(),!0)}),Ae(()=>{a(L),a(T),h(S,new Af(m,(Y,G)=>{if(!Y||!G||!Y.data||!G.data)return 0;if(Y.data.pinnedAt&&!G.data.pinnedAt)return-1;if(!Y.data.pinnedAt&&G.data.pinnedAt)return 1;if(Y.data.pinnedAt&&G.data.pinnedAt){if(Y.data.pinnedAt<G.data.pinnedAt)return 1;if(Y.data.pinnedAt>G.data.pinnedAt)return-1}switch(a(L)){case"newest":return Y.data.updatedAt<G.data.updatedAt?1:-1;case"oldest":return Y.data.updatedAt>G.data.updatedAt?1:-1;case"AtoZ":return Y.data.name.localeCompare(G.data.name);case"ZtoA":return G.data.name.localeCompare(Y.data.name);default:return 0}}),!0)});const K=N(()=>a(y)*f);let I=N(()=>{a(T);const Y=Math.ceil(a(v)/f);let G=Math.floor(a(_)/f);return G=G-Math.min(G,Y),a(S)?.get(G,G+Y*3)||[]}),ne=N(()=>f*Math.ceil(a(v)/f));const te=N(()=>a(_)-Math.min(a(_),a(ne)));var X=jf(),J=b(X),ae=b(J);{var Q=Y=>{uo(Y,{})},Pe=Y=>{var G=$(),oe=R(G);{var re=de=>{var k=Of(),M=b(k);{var D=z=>{var q=Nf();g(z,q)},F=z=>{var q=Mf(),we=b(q),Me=b(we);{let Ne=N(()=>i(ee.NewNote)),We=N(()=>s(ee.NewNote));cn(Me,{element:"a",get href(){return a(Ne)},get onClick(){return a(We)},children:(nt,Rt)=>{var rt=Lf(),Ee=R(rt);ue(Ee,()=>({"--size":"18px","--color":"#b0b0b0"})),pe(Ee.lastChild,{name:"plus"}),g(nt,rt)},$$slots:{default:!0}})}var he=U(we,4),se=b(he);{let Ne=N(()=>i(ee.ImportData)),We=N(()=>s(ee.ImportData));cn(se,{element:"a",get href(){return a(Ne)},get onClick(){return a(We)},children:(nt,Rt)=>{var rt=If(),Ee=R(rt);ue(Ee,()=>({"--size":"18px","--color":"#b0b0b0"})),pe(Ee.lastChild,{name:"import"}),g(nt,rt)},$$slots:{default:!0}})}g(z,q)};V(M,z=>{r()==="bin"?z(D):z(F,!1)})}g(de,k)},ce=de=>{var k=$(),M=R(k);{var D=z=>{var q=Bf(),we=U(R(q),2),Me=b(we);cn(Me,{element:"a",href:"/",onClick:he=>{he.preventDefault(),u("/")},children:(he,se)=>{var Ne=Rf();g(he,Ne)},$$slots:{default:!0}}),g(z,q)},F=z=>{var q=$(),we=R(q);{var Me=se=>{var Ne=Ff();g(se,Ne)},he=se=>{var Ne=zf(),We=b(Ne);fa(We,23,()=>a(I),nt=>nt.data,(nt,Rt,rt)=>{var Ee=$(),Fe=R(Ee);{var at=Bt=>{{let Ft=N(()=>a(rt)*f<a(p)-a(te)-f/2||a(rt)*f>a(p)-a(te)+Math.floor(a(v)/f)*f),ot=N(()=>(a(rt)+3)*f<a(p)-a(te)-f/2||(a(rt)+3)*f>a(p)-a(te)+Math.floor(a(v)/f)*f);xf(Bt,{get mode(){return r()},get focusHidden(){return a(Ft)},get showMenuUp(){return a(ot)},get noteId(){return a(Rt).id},get noteData(){return a(Rt).data}})}};V(Fe,Bt=>{a(Rt).data&&Bt(at)})}g(nt,Ee)}),fe(nt=>{Ln(Ne,`min-height: ${nt??""}px`),Ln(We,`transform: translateY(${a(te)??""}px);`)},[()=>Math.max((a(K)>a(v),a(K)),0)]),g(se,Ne)};V(we,se=>{a(I).length===0?se(Me):se(he,!1)},!0)}g(z,q)};V(M,z=>{r()==="bin"&&!e.checkNotesInBin()?z(D):z(F,!1)},!0)}g(de,k)};V(oe,de=>{(n()()||[]).length===0?de(re):de(ce,!1)},!0)}g(Y,G)};V(ae,Y=>{e.readyNotes?Y(Pe,!1):Y(Q)})}g(t,X),le()}var Uf=W('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function qf(t,e){ie(e,!0);const{getAppLocation:n}=kt(),{getGetNotes:r,isInitedNotes:o,checkNotesInBin:s}=Jt(),i=N(o),l=N(r),c=N(()=>n().pathname);var u=Uf(),d=U(R(u),2),f=b(d);{let v=N(()=>a(c)==="/bin"?"bin":"notes");Hf(f,{get mode(){return a(v)},get getNotes(){return a(l)},get checkNotesInBin(){return s},get readyNotes(){return a(i)}})}g(t,u),le()}var Vf=W('<h1 class="p-1n0ziuh"><!></h1>');function Wf(t,e){var n=Vf(),r=b(n);Ce(r,()=>e.children),g(t,n)}const Kf=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var Yf=W('<div class="a p-nk8iga"><!> <p class="b p-nk8iga">Enjoy using the app!</p> <div class="c p-nk8iga"><!></div></div>');function Gf(t,e){ie(e,!1);const{pushDialogPage:n}=yt(),r=()=>{Kf()?n(ee.AccountSetup):n(ee.Install)};va();var o=Yf(),s=b(o);Wf(s,{children:(c,u)=>{var d=Ie("Welcome");g(c,d)}});var i=U(s,4),l=b(i);cn(l,{onClick:r,fullWidth:!0,children:(c,u)=>{var d=Ie("Start");g(c,d)},$$slots:{default:!0}}),g(t,o),le()}const Ho=(t,e=Te,n=Te,r)=>{let o=ia(()=>Ai(r?.(),!1));var s=$(),i=R(s);{var l=u=>{Oe(u,{children:(d,f)=>{ze(d,{get hidden(){return a(o)},get page(){return ee.Settings}})},$$slots:{default:!0}})},c=u=>{var d=$(),f=R(d);{var v=p=>{Oe(p,{children:(y,m)=>{ze(y,{get hidden(){return a(o)},get page(){return ee.NewNote}})},$$slots:{default:!0}})},_=p=>{var y=$(),m=R(y);{var T=C=>{Oe(C,{children:(w,P)=>{ze(w,{get params(){return n()},get hidden(){return a(o)},get page(){return ee.Note}})},$$slots:{default:!0}})},S=C=>{var w=$(),P=R(w);{var E=x=>{Oe(x,{children:(B,j)=>{ze(B,{get hidden(){return a(o)},get page(){return ee.ImportData}})},$$slots:{default:!0}})},O=x=>{var B=$(),j=R(B);{var L=Z=>{Oe(Z,{children:(I,ne)=>{ze(I,{get hidden(){return a(o)},get page(){return ee.ExportData}})},$$slots:{default:!0}})},K=Z=>{var I=$(),ne=R(I);{var te=J=>{Oe(J,{children:(ae,Q)=>{ze(ae,{get hidden(){return a(o)},get page(){return ee.ClearStore}})},$$slots:{default:!0}})},X=J=>{var ae=$(),Q=R(ae);{var Pe=G=>{Oe(G,{children:(oe,re)=>{ze(oe,{get hidden(){return a(o)},get page(){return ee.AccountSetup}})},$$slots:{default:!0}})},Y=G=>{var oe=$(),re=R(oe);{var ce=k=>{Oe(k,{children:(M,D)=>{ze(M,{get hidden(){return a(o)},get page(){return ee.Install}})},$$slots:{default:!0}})},de=k=>{var M=$(),D=R(M);{var F=q=>{Oe(q,{children:(we,Me)=>{ze(we,{get hidden(){return a(o)},get page(){return ee.InstallSuccess}})},$$slots:{default:!0}})},z=q=>{var we=$(),Me=R(we);{var he=Ne=>{Oe(Ne,{children:(We,nt)=>{Gf(We,{})},$$slots:{default:!0}})},se=Ne=>{var We=$(),nt=R(We);{var Rt=Ee=>{Oe(Ee,{children:(Fe,at)=>{ze(Fe,{get hidden(){return a(o)},get page(){return ee.Auth}})},$$slots:{default:!0}})},rt=Ee=>{var Fe=$(),at=R(Fe);{var Bt=ot=>{Oe(ot,{children:(Pt,Tr)=>{ze(Pt,{get hidden(){return a(o)},get page(){return ee.Signup}})},$$slots:{default:!0}})},Ft=ot=>{var Pt=$(),Tr=R(Pt);{var ya=$t=>{Oe($t,{children:(xr,vo)=>{ze(xr,{get hidden(){return a(o)},get page(){return ee.Signin}})},$$slots:{default:!0}})},fo=$t=>{var xr=$(),vo=R(xr);{var li=Rn=>{Oe(Rn,{children:(Dr,ho)=>{ze(Dr,{get hidden(){return a(o)},get page(){return ee.AccessKeys}})},$$slots:{default:!0}})},ci=Rn=>{var Dr=$(),ho=R(Dr);{var ui=Bn=>{Oe(Bn,{children:(Ar,po)=>{ze(Ar,{get hidden(){return a(o)},get page(){return ee.Account}})},$$slots:{default:!0}})},di=Bn=>{var Ar=$(),po=R(Ar);{var fi=Fn=>{Oe(Fn,{children:(Nr,go)=>{ze(Nr,{get hidden(){return a(o)},get page(){return ee.ConfirmAccessKey}})},$$slots:{default:!0}})},vi=Fn=>{var Nr=$(),go=R(Nr);{var hi=zn=>{Oe(zn,{children:(Lr,_o)=>{ze(Lr,{get hidden(){return a(o)},get page(){return ee.Exit}})},$$slots:{default:!0}})},pi=zn=>{var Lr=$(),_o=R(Lr);{var gi=jn=>{Oe(jn,{children:(Ir,mo)=>{ze(Ir,{get hidden(){return a(o)},get page(){return ee.Sync}})},$$slots:{default:!0}})},_i=jn=>{var Ir=$(),mo=R(Ir);{var mi=Hn=>{Oe(Hn,{children:(Mr,yo)=>{ze(Mr,{get hidden(){return a(o)},get page(){return ee.Subscription}})},$$slots:{default:!0}})},yi=Hn=>{var Mr=$(),yo=R(Mr);{var wi=Un=>{Oe(Un,{children:(wa,Si)=>{ze(wa,{get hidden(){return a(o)},get page(){return ee.About}})},$$slots:{default:!0}})},bi=Un=>{Oe(Un,{children:(wa,Si)=>{Zd(wa,{})},$$slots:{default:!0}})};V(yo,Un=>{e()===ee.About?Un(wi):Un(bi,!1)},!0)}g(Hn,Mr)};V(mo,Hn=>{e()===ee.Subscription?Hn(mi):Hn(yi,!1)},!0)}g(jn,Ir)};V(_o,jn=>{e()===ee.Sync?jn(gi):jn(_i,!1)},!0)}g(zn,Lr)};V(go,zn=>{e()===ee.Exit?zn(hi):zn(pi,!1)},!0)}g(Fn,Nr)};V(po,Fn=>{e()===ee.ConfirmAccessKey?Fn(fi):Fn(vi,!1)},!0)}g(Bn,Ar)};V(ho,Bn=>{e()===ee.Account?Bn(ui):Bn(di,!1)},!0)}g(Rn,Dr)};V(vo,Rn=>{e()===ee.AccessKeys?Rn(li):Rn(ci,!1)},!0)}g($t,xr)};V(Tr,$t=>{e()===ee.Signin?$t(ya):$t(fo,!1)},!0)}g(ot,Pt)};V(at,ot=>{e()===ee.Signup?ot(Bt):ot(Ft,!1)},!0)}g(Ee,Fe)};V(nt,Ee=>{e()===ee.Auth?Ee(Rt):Ee(rt,!1)},!0)}g(Ne,We)};V(Me,Ne=>{e()===ee.Welcome?Ne(he):Ne(se,!1)},!0)}g(q,we)};V(D,q=>{e()===ee.InstallSuccess?q(F):q(z,!1)},!0)}g(k,M)};V(re,k=>{e()===ee.Install?k(ce):k(de,!1)},!0)}g(G,oe)};V(Q,G=>{e()===ee.AccountSetup?G(Pe):G(Y,!1)},!0)}g(J,ae)};V(ne,J=>{e()===ee.ClearStore?J(te):J(X,!1)},!0)}g(Z,I)};V(j,Z=>{e()===ee.ExportData?Z(L):Z(K,!1)},!0)}g(x,B)};V(P,x=>{e()===ee.ImportData?x(E):x(O,!1)},!0)}g(C,w)};V(m,C=>{e()===ee.Note?C(T):C(S,!1)},!0)}g(p,y)};V(f,p=>{e()===ee.NewNote?p(v):p(_,!1)},!0)}g(u,d)};V(i,u=>{e()===ee.Settings?u(l):u(c,!1)})}g(t,s)};var Xf=W("<!> <!>",1);function Zf(t,e){ie(e,!0);const{getDialogPages:n}=yt(),{getAccount:r}=Ys();let o=N(n),s=N(()=>r()!==void 0);const{checkMobileSize:i}=Qt();let l=H(Ge([]));const c=N(i);Ae(()=>{a(o),a(c),Ot(()=>{if(a(c))a(o).length>=a(l).length?h(l,a(o).map(m=>({page:m,shown:!0})),!0):h(l,a(l).map((m,T)=>({page:m.page,shown:T<a(o).length})),!0);else if(a(o).length>=a(l).length)h(l,a(o).map(m=>({page:m,shown:!0})),!0);else{if(a(o).length===0){h(l,[{page:a(l)[a(l).length-1].page,shown:!1}],!0);return}h(l,a(o).map(m=>({page:m,shown:!0})),!0)}})});const u=()=>{h(l,a(o).map(m=>({page:m,shown:!0})),!0)};var d=Xf(),f=R(d);{var v=m=>{qf(m,{})};V(f,m=>{a(s)&&m(v)})}var _=U(f,2);{var p=m=>{var T=$(),S=R(T);fa(S,19,()=>a(l),C=>C.page,(C,w,P)=>{const E=N(()=>a(w).page.split("?")[1]),O=N(()=>a(w).page.split("?")[0]);{let x=N(()=>a(P)!==a(l).length-1&&!!a(l)[a(P)+1]?.shown),B=N(()=>a(P)===0);zo(C,{onClosed:u,get shown(){return a(w).shown},get hidden(){return a(x)},get isLastDialog(){return a(B)},children:(j,L)=>{{let K=N(()=>a(P)!==a(l).length-1&&!!a(l)[a(P)+1]?.shown);Ho(j,()=>a(O),()=>a(E),()=>a(K))}},$$slots:{default:!0}})}}),g(m,T)},y=m=>{var T=$(),S=R(T);{var C=w=>{const P=N(()=>a(l)[a(l).length-1].page.split("?")[1]),E=N(()=>a(l)[a(l).length-1].page.split("?")[0]);{let O=N(()=>a(l).length===1);zo(w,{onClosed:u,get shown(){return a(l)[a(l).length-1].shown},hidden:!1,get isLastDialog(){return a(O)},children:(x,B)=>{Ho(x,()=>a(E),()=>a(P))},$$slots:{default:!0}})}};V(S,w=>{a(l).length>0&&w(C)},!0)}g(m,T)};V(_,m=>{i()?m(p):m(y,!1)})}g(t,d),le()}function Jf(t,e){ie(e,!1);let n=0;Se(()=>{document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-n;(n<30&&s>0||n>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),va(),le()}const Qf=(t,e)=>{a(e)&&a(e).scrollTo({top:0})};var $f=W('<div><button class="c p-1fqi25d"><!> <span class="d p-1fqi25d"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),ev=W('<!> <!> <!> <!> <main><div class="a p-1fqi25d"><!></div> <div class="b p-1fqi25d"><!></div></main> <!>',1);function tv(t,e){ie(e,!0);const{replace:n}=kt(),{hasDialogPage:r}=yt(),{setScrollContainer:o}=ga(),{getAccount:s,init:i}=Ys(),{isInitedNotes:l}=Jt(),{getDialogPages:c}=yt(),{createBroadcastChannel:u,tabId:d}=pa(),f=u(),{getSidebarState:v}=ha(),{setClosableDialog:_}=gn(),p=()=>{n(`/?${wt}=${ee.Welcome}`)};Se(()=>{i(G=>{G===void 0?p():((r(ee.Welcome)||r(ee.AccountSetup))&&n("/"),G?h(S,G):h(S,null))});const Y=async G=>{const oe=JSON.parse(G.data);if(oe.tabId&&oe.tabId===d)return;const re=oe;re.type==="initLocalAccount"||re.type==="initCloudAccount"||re.type==="updateAccount"||re.type==="disconnectCloudAccount"?n("/"):re.type==="exit"&&p()};return f.addEventListener(Y),()=>f.removeEventListener(Y)});const y=pn();Se(async()=>{await new Promise(Y=>setTimeout(Y,250)),await xs(),y.working=!0});let m=H(!1),T=0,S=N(s),C=N(l),w=H(null);Ae(()=>{_(a(S)!==void 0)}),Ae(()=>{o(a(w))});const P=()=>{if(a(w)){const Y=a(w).scrollTop||0;Y===0?h(m,!1):!a(m)&&T>Y?h(m,!0):a(m)&&T+50<Y&&h(m,!1),T=Y}},E=()=>{P()};Ae(()=>(a(w)?.addEventListener("scroll",E),window.addEventListener("resize",E),()=>{a(w)?.removeEventListener("scroll",E),window.removeEventListener("resize",E)}));const O=N(v);var x=ev(),B=R(x);Jf(B,{});var j=U(B,2);Tu(j);var L=U(j,2);ri(L,{});var K=U(L,2);zu(K,{});var Z=U(K,2),I=b(Z),ne=b(I);{var te=Y=>{Nd(Y,{})};V(ne,Y=>{a(S)!==void 0&&Y(te)})}var X=U(I,2),J=b(X);{var ae=Y=>{Zf(Y,{})};V(J,Y=>{a(C)&&Y(ae)})}Je(Z,Y=>h(w,Y),()=>a(w));var Q=U(Z,2);{var Pe=Y=>{var G=$f();ye(G,1,me({i:!0}),"p-1fqi25d");var oe=b(G);oe.__click=[Qf,w];var re=b(oe);Ue(re,{children:(k,M)=>{var D=Ie("top");g(k,D)}});var ce=U(re,2),de=b(ce);ue(de,()=>({"--rotate":"90deg","--size":"28px"})),pe(de.lastChild,{name:"back"}),fe(()=>Ln(G,`--swiping-ratio: ${y.swipingRatio}; --transition-timing-default: ${y.duration}s;`)),g(Y,G)};V(Q,Y=>{a(m)&&Y(Pe)})}fe(()=>{Ln(Z,`--swiping-ratio: ${y.swipingRatio}; --transition-timing-default: ${y.duration}s;`),ye(Z,1,me({e:!0,f:y.working&&!y.isSwiping,h:a(O).type!=="closed"}),"p-1fqi25d")}),g(t,x),le()}Xe(["click"]);function nv(t){Qc(t,{children:(e,n)=>{tv(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Fl(nv,{target:document.getElementById("app")});export{Kf as $,Ys as A,cn as B,va as C,Jt as D,ro as E,wt as F,ov as G,Wf as H,pe as I,ge as J,sv as K,uo as L,iv as M,Ln as N,Qt as O,ee as P,qr as Q,Je as R,ye as S,me as T,Ot as U,Ue as V,Nu as W,cd as X,Ql as Y,pa as Z,gc as _,ue as a,lv as a0,Re as b,b as c,g as d,fa as e,W as f,a as g,H as h,V as i,le as j,h as k,R as l,ln as m,yt as n,Se as o,ie as p,gn as q,Ge as r,U as s,fe as t,Ae as u,$ as v,Xe as w,Ie as x,N as y,kt as z};
