const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aBwgG3I2p.js","a/a3TquqTin.css","a/aCOt9NxlF.js","a/a9q_jSmK4.js","a/aBEGDcNQV.js","a/aBrkJtqMH.css","a/aAn8w8HRq.js","a/aDB02xhFr.css","a/aB17dWxh8.js","a/a54d_SC5m.css","a/aCdbfftle.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/a6mdFwNne.js","a/aY1d2PU1k.css","a/aCQGpQqXn.js","a/aBZ6OdFsc.js","a/aBUzlYYyV.css","a/aBlmo2At2.css","a/aLlq8j5-1.js","a/aCSKiTxDI.css","a/aCXrVwZvj.js","a/aBpR5g6jV.css","a/aCbX6_K3O.js","a/aBem4Ctjp.css","a/a7oxJ5Hlw.js","a/aBachEBfv.js","a/aDeSckOjU.css","a/aCZGVTO-T.js","a/aBdnakgrk.css","a/aCNVkVotU.js","a/aDa9Ga8F-.css","a/aCSgTYuuH.js","a/aCH18nfIo.css","a/aDBEYeKx5.js","a/aBD-ceTyF.js","a/aCb6DfA6m.css","a/aCqIAvQUB.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var nl=Object.defineProperty;var Jo=t=>{throw TypeError(t)};var al=(t,e,a)=>e in t?nl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var At=(t,e,a)=>al(t,typeof e!="symbol"?e+"":e,a),$r=(t,e,a)=>e.has(t)||Jo("Cannot "+a);var I=(t,e,a)=>($r(t,e,"read from private field"),a?a.call(t):e.get(t)),Ae=(t,e,a)=>e.has(t)?Jo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),Ee=(t,e,a,r)=>($r(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),Je=(t,e,a)=>($r(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const rl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};rl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const ol=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};ol();const ro=!1;var bs=Array.isArray,sl=Array.prototype.indexOf,Hr=Array.from,il=Object.defineProperty,Wn=Object.getOwnPropertyDescriptor,Ss=Object.getOwnPropertyDescriptors,ll=Object.prototype,cl=Array.prototype,Do=Object.getPrototypeOf,Qo=Object.isExtensible;function Ka(t){return typeof t=="function"}const je=()=>{};function dl(t){return typeof t?.then=="function"}function ul(t){return t()}function oo(t){for(var e=0;e<t.length;e++)t[e]()}function Cs(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function fl(t,e,a=!1){return t===void 0?a?e():e:t}const Ct=2,Io=4,Ur=8,vl=1<<24,Pn=16,Nn=32,ga=64,Wr=128,nn=512,xt=1024,Ot=2048,vn=4096,Ut=8192,bn=16384,Ro=32768,Gn=65536,$o=1<<17,Ts=1<<18,Ha=1<<19,xs=1<<20,yn=1<<25,fa=32768,so=1<<21,Lo=1<<22,Vn=1<<23,qn=Symbol("$state"),ks=Symbol("legacy props"),gl=Symbol(""),xa=new class extends Error{constructor(){super(...arguments);At(this,"name","StaleReactionError");At(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Es(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function hl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function pl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ml(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _l(t){throw new Error("https://svelte.dev/e/effect_orphan")}function wl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function yl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function bl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Sl(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Cl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Tl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const xl=1,kl=2,Ps=4,El=8,Pl=16,Nl=1,Al=2,Ml=4,Dl=8,Il=16,Rl=1,Ll=2,yt=Symbol(),Ol="http://www.w3.org/1999/xhtml";function Ns(t){return t===this.v}function Fl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function As(t){return!Fl(t,this.v)}let Ua=!1,zl=!1;function jl(){Ua=!0}let Xe=null;function La(t){Xe=t}function st(t){return Ms().get(t)}function it(t,e){return Ms().set(t,e),e}function le(t,e=!1,a){Xe={p:Xe,i:!1,c:null,e:null,s:t,x:null,l:Ua&&!e?{s:null,u:null,$:[]}:null}}function ce(t){var e=Xe,a=e.e;if(a!==null){e.e=null;for(var r of a)Js(r)}return t!==void 0&&(e.x=t),e.i=!0,Xe=e.p,t??{}}function Wa(){return!Ua||Xe!==null&&Xe.l===null}function Ms(t){return Xe===null&&Es(),Xe.c??(Xe.c=new Map(Bl(Xe)||void 0))}function Bl(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let ta=[];function Ds(){var t=ta;ta=[],oo(t)}function ha(t){if(ta.length===0&&!Pa){var e=ta;queueMicrotask(()=>{e===ta&&Ds()})}ta.push(t)}function Hl(){for(;ta.length>0;)Ds()}function Is(t){var e=He;if(e===null)return Re.f|=Vn,t;if((e.f&Ro)===0){if((e.f&Wr)===0)throw t;e.b.error(t)}else Oa(t,e)}function Oa(t,e){for(;e!==null;){if((e.f&Wr)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Sr=new Set;let Ve=null,Er=null,Qt=null,Zt=[],Vr=null,io=!1,Pa=!1;var Aa,Ma,aa,ra,dr,Da,Ia,St,lo,Xa,co,Rs,Ls;const Or=class Or{constructor(){Ae(this,St);At(this,"committed",!1);At(this,"current",new Map);At(this,"previous",new Map);Ae(this,Aa,new Set);Ae(this,Ma,new Set);Ae(this,aa,0);Ae(this,ra,0);Ae(this,dr,null);Ae(this,Da,new Set);Ae(this,Ia,new Set);At(this,"skipped_effects",new Set);At(this,"is_fork",!1)}is_deferred(){return this.is_fork||I(this,ra)>0}process(e){Zt=[],Er=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)Je(this,St,lo).call(this,r,a);this.is_fork||Je(this,St,Rs).call(this),this.is_deferred()?(Je(this,St,Xa).call(this,a.effects),Je(this,St,Xa).call(this,a.render_effects)):(Er=this,Ve=null,es(a.render_effects),es(a.effects),Er=null,I(this,dr)?.resolve()),Qt=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&Vn)===0&&(this.current.set(e,e.v),Qt?.set(e,e.v))}activate(){Ve=this,this.apply()}deactivate(){Ve===this&&(Ve=null,Qt=null)}flush(){if(this.activate(),Zt.length>0){if(Fs(),Ve!==null&&Ve!==this)return}else I(this,aa)===0&&this.process([]);this.deactivate()}discard(){for(const e of I(this,Ma))e(this);I(this,Ma).clear()}increment(e){Ee(this,aa,I(this,aa)+1),e&&Ee(this,ra,I(this,ra)+1)}decrement(e){Ee(this,aa,I(this,aa)-1),e&&Ee(this,ra,I(this,ra)-1),this.revive()}revive(){for(const e of I(this,Da))I(this,Ia).delete(e),Et(e,Ot),va(e);for(const e of I(this,Ia))Et(e,vn),va(e);this.flush()}oncommit(e){I(this,Aa).add(e)}ondiscard(e){I(this,Ma).add(e)}settled(){return(I(this,dr)??Ee(this,dr,Cs())).promise}static ensure(){if(Ve===null){const e=Ve=new Or;Sr.add(Ve),Pa||Or.enqueue(()=>{Ve===e&&e.flush()})}return Ve}static enqueue(e){ha(e)}apply(){}};Aa=new WeakMap,Ma=new WeakMap,aa=new WeakMap,ra=new WeakMap,dr=new WeakMap,Da=new WeakMap,Ia=new WeakMap,St=new WeakSet,lo=function(e,a){e.f^=xt;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Nn|ga))!==0,i=s&&(o&xt)!==0,l=i||(o&Ut)!==0||this.skipped_effects.has(r);if((r.f&Wr)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=xt:(o&Io)!==0?a.effects.push(r):pr(r)&&((r.f&Pn)!==0&&I(this,Da).add(r),sr(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===a.effect&&(Je(this,St,Xa).call(this,a.effects),Je(this,St,Xa).call(this,a.render_effects),a=a.parent),r=u.next,u=u.parent}},Xa=function(e){for(const a of e)(a.f&Ot)!==0?I(this,Da).add(a):(a.f&vn)!==0&&I(this,Ia).add(a),Je(this,St,co).call(this,a.deps),Et(a,xt)},co=function(e){if(e!==null)for(const a of e)(a.f&Ct)===0||(a.f&fa)===0||(a.f^=fa,Je(this,St,co).call(this,a.deps))},Rs=function(){if(I(this,ra)===0){for(const e of I(this,Aa))e();I(this,Aa).clear()}I(this,aa)===0&&Je(this,St,Ls).call(this)},Ls=function(){var s;if(Sr.size>1){this.previous.clear();var e=Qt,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Sr){if(i===this){a=!1;continue}const l=[];for(const[u,d]of this.current){if(i.current.has(u))if(a&&d!==i.current.get(u))i.current.set(u,d);else continue;l.push(u)}if(l.length===0)continue;const c=[...i.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var o=Zt;Zt=[];const u=new Set,d=new Map;for(const f of l)zs(f,c,u,d);if(Zt.length>0){Ve=i,i.apply();for(const f of Zt)Je(s=i,St,lo).call(s,f,r);i.deactivate()}Zt=o}}Ve=null,Qt=e}this.committed=!0,Sr.delete(this)};let un=Or;function Os(t){var e=Pa;Pa=!0;try{for(var a;;){if(Hl(),Zt.length===0&&(Ve?.flush(),Zt.length===0))return Vr=null,a;Fs()}}finally{Pa=e}}function Fs(){var t=da;io=!0;var e=null;try{var a=0;for(Dr(!0);Zt.length>0;){var r=un.ensure();if(a++>1e3){var o,s;Ul()}r.process(Zt),Kn.clear()}}finally{io=!1,Dr(t),Vr=null}}function Ul(){try{wl()}catch(t){Oa(t,Vr)}}let mn=null;function es(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(bn|Ut))===0&&pr(r)&&(mn=new Set,sr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?ei(r):r.fn=null),mn?.size>0)){Kn.clear();for(const o of mn){if((o.f&(bn|Ut))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)mn.has(i)&&(mn.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(bn|Ut))===0&&sr(c)}}mn.clear()}}mn=null}}function zs(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Ct)!==0?zs(o,e,a,r):(s&(Lo|Pn))!==0&&(s&Ot)===0&&js(o,e,r)&&(Et(o,Ot),va(o))}}function js(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Ct)!==0&&js(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function va(t){for(var e=Vr=t;e.parent!==null;){e=e.parent;var a=e.f;if(io&&e===He&&(a&Pn)!==0&&(a&Ts)===0)return;if((a&(ga|Nn))!==0){if((a&xt)===0)return;e.f^=xt}}Zt.push(e)}function Wl(t){let e=0,a=gn(0),r;return()=>{rr()&&(n(a),Kr(()=>(e===0&&(r=Ft(()=>t(()=>Yn(a)))),e+=1,()=>{ha(()=>{e-=1,e===0&&(r?.(),r=void 0,Yn(a))})})))}}var Vl=Gn|Ha|Wr;function ql(t,e,a){new Kl(t,e,a)}var Yt,Xt,Mo,sn,oa,ln,Gt,It,cn,wn,zn,sa,jn,ia,Bn,Fr,_t,Yl,Xl,uo,Pr,Nr,fo;class Kl{constructor(e,a,r){Ae(this,_t);At(this,"parent");Ae(this,Yt,!1);Ae(this,Xt);Ae(this,Mo,null);Ae(this,sn);Ae(this,oa);Ae(this,ln);Ae(this,Gt,null);Ae(this,It,null);Ae(this,cn,null);Ae(this,wn,null);Ae(this,zn,null);Ae(this,sa,0);Ae(this,jn,0);Ae(this,ia,!1);Ae(this,Bn,null);Ae(this,Fr,Wl(()=>(Ee(this,Bn,gn(I(this,sa))),()=>{Ee(this,Bn,null)})));Ee(this,Xt,e),Ee(this,sn,a),Ee(this,oa,r),this.parent=He.b,Ee(this,Yt,!!I(this,sn).pending),Ee(this,ln,Va(()=>{He.b=this;{var o=Je(this,_t,uo).call(this);try{Ee(this,Gt,Jt(()=>r(o)))}catch(s){this.error(s)}I(this,jn)>0?Je(this,_t,Nr).call(this):Ee(this,Yt,!1)}return()=>{I(this,zn)?.remove()}},Vl))}is_pending(){return I(this,Yt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!I(this,sn).pending}update_pending_count(e){Je(this,_t,fo).call(this,e),Ee(this,sa,I(this,sa)+e),I(this,Bn)&&Sn(I(this,Bn),I(this,sa))}get_effect_pending(){return I(this,Fr).call(this),n(I(this,Bn))}error(e){var a=I(this,sn).onerror;let r=I(this,sn).failed;if(I(this,ia)||!a&&!r)throw e;I(this,Gt)&&(Lt(I(this,Gt)),Ee(this,Gt,null)),I(this,It)&&(Lt(I(this,It)),Ee(this,It,null)),I(this,cn)&&(Lt(I(this,cn)),Ee(this,cn,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&Tl(),un.ensure(),Ee(this,sa,0),I(this,cn)!==null&&ca(I(this,cn),()=>{Ee(this,cn,null)}),Ee(this,Yt,this.has_pending_snippet()),Ee(this,Gt,Je(this,_t,Pr).call(this,()=>(Ee(this,ia,!1),Jt(()=>I(this,oa).call(this,I(this,Xt)))))),I(this,jn)>0?Je(this,_t,Nr).call(this):Ee(this,Yt,!1)};var l=Re;try{Rt(null),s=!0,a?.(e,i),s=!1}catch(c){Oa(c,I(this,ln)&&I(this,ln).parent)}finally{Rt(l)}r&&ha(()=>{Ee(this,cn,Je(this,_t,Pr).call(this,()=>{un.ensure(),Ee(this,ia,!0);try{return Jt(()=>{r(I(this,Xt),()=>e,()=>i)})}catch(c){return Oa(c,I(this,ln).parent),null}finally{Ee(this,ia,!1)}}))})}}Yt=new WeakMap,Xt=new WeakMap,Mo=new WeakMap,sn=new WeakMap,oa=new WeakMap,ln=new WeakMap,Gt=new WeakMap,It=new WeakMap,cn=new WeakMap,wn=new WeakMap,zn=new WeakMap,sa=new WeakMap,jn=new WeakMap,ia=new WeakMap,Bn=new WeakMap,Fr=new WeakMap,_t=new WeakSet,Yl=function(){try{Ee(this,Gt,Jt(()=>I(this,oa).call(this,I(this,Xt))))}catch(e){this.error(e)}Ee(this,Yt,!1)},Xl=function(){const e=I(this,sn).pending;e&&(Ee(this,It,Jt(()=>e(I(this,Xt)))),un.enqueue(()=>{var a=Je(this,_t,uo).call(this);Ee(this,Gt,Je(this,_t,Pr).call(this,()=>(un.ensure(),Jt(()=>I(this,oa).call(this,a))))),I(this,jn)>0?Je(this,_t,Nr).call(this):(ca(I(this,It),()=>{Ee(this,It,null)}),Ee(this,Yt,!1))}))},uo=function(){var e=I(this,Xt);return I(this,Yt)&&(Ee(this,zn,Cn()),I(this,Xt).before(I(this,zn)),e=I(this,zn)),e},Pr=function(e){var a=He,r=Re,o=Xe;hn(I(this,ln)),Rt(I(this,ln)),La(I(this,ln).ctx);try{return e()}catch(s){return Is(s),null}finally{hn(a),Rt(r),La(o)}},Nr=function(){const e=I(this,sn).pending;I(this,Gt)!==null&&(Ee(this,wn,document.createDocumentFragment()),I(this,wn).append(I(this,zn)),ai(I(this,Gt),I(this,wn))),I(this,It)===null&&Ee(this,It,Jt(()=>e(I(this,Xt))))},fo=function(e){var a;if(!this.has_pending_snippet()){this.parent&&Je(a=this.parent,_t,fo).call(a,e);return}Ee(this,jn,I(this,jn)+e),I(this,jn)===0&&(Ee(this,Yt,!1),I(this,It)&&ca(I(this,It),()=>{Ee(this,It,null)}),I(this,wn)&&(I(this,Xt).before(I(this,wn)),Ee(this,wn,null)))};function Gl(t,e,a,r){const o=Wa()?vr:gr;if(a.length===0&&t.length===0){r(e.map(o));return}var s=Ve,i=He,l=Bs();function c(){Promise.all(a.map(u=>Zl(u))).then(u=>{l();try{r([...e.map(o),...u])}catch(d){(i.f&bn)===0&&Oa(d,i)}s?.deactivate(),ar()}).catch(u=>{Oa(u,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return c()}finally{s?.deactivate(),ar()}}):c()}function Bs(){var t=He,e=Re,a=Xe,r=Ve;return function(s=!0){hn(t),Rt(e),La(a),s&&r?.activate()}}function ar(){hn(null),Rt(null),La(null)}function vr(t){var e=Ct|Ot,a=Re!==null&&(Re.f&Ct)!==0?Re:null;return He!==null&&(He.f|=Ha),{ctx:Xe,deps:null,effects:null,equals:Ns,f:e,fn:t,reactions:null,rv:0,v:yt,wv:0,parent:a??He,ac:null}}function Zl(t,e){let a=He;a===null&&hl();var r=a.b,o=void 0,s=gn(yt),i=!Re,l=new Map;return ic(()=>{var c=Cs();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===Ve&&u.committed&&u.deactivate(),ar()})}catch(g){c.reject(g),ar()}var u=Ve;if(i){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(xa),l.delete(u),l.set(u,c)}const f=(g,h=void 0)=>{if(u.activate(),h)h!==xa&&(s.f|=Vn,Sn(s,h));else{(s.f&Vn)!==0&&(s.f^=Vn),Sn(s,g);for(const[m,T]of l){if(l.delete(m),m===u)break;T.reject(xa)}}i&&(r.update_pending_count(-1),u.decrement(d))};c.promise.then(f,g=>f(null,g||"unknown"))}),Zs(()=>{for(const c of l.values())c.reject(xa)}),new Promise(c=>{function u(d){function f(){d===o?c(s):u(o)}d.then(f,f)}u(o)})}function E(t){const e=vr(t);return ri(e),e}function gr(t){const e=vr(t);return e.equals=As,e}function Hs(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Lt(e[a])}}function Jl(t){for(var e=t.parent;e!==null;){if((e.f&Ct)===0)return(e.f&bn)===0?e:null;e=e.parent}return null}function Oo(t){var e,a=He;hn(Jl(t));try{t.f&=~fa,Hs(t),e=li(t)}finally{hn(a)}return e}function Us(t){var e=Oo(t);if(t.equals(e)||(Ve?.is_fork||(t.v=e),t.wv=si()),!pa)if(Qt!==null)(rr()||Ve?.is_fork)&&Qt.set(t,e);else{var a=(t.f&nn)===0?vn:xt;Et(t,a)}}let vo=new Set;const Kn=new Map;let Ws=!1;function gn(t,e){var a={f:0,v:t,reactions:null,equals:Ns,rv:0,wv:0};return a}function z(t,e){const a=gn(t);return ri(a),a}function go(t,e=!1,a=!0){var o;const r=gn(t);return e||(r.equals=As),Ua&&a&&Xe!==null&&Xe.l!==null&&((o=Xe.l).s??(o.s=[])).push(r),r}function v(t,e,a=!1){Re!==null&&(!fn||(Re.f&$o)!==0)&&Wa()&&(Re.f&(Ct|Pn|Lo|$o))!==0&&!Tn?.includes(t)&&Cl();let r=a?bt(e):e;return Sn(t,r)}function Sn(t,e){if(!t.equals(e)){var a=t.v;pa?Kn.set(t,e):Kn.set(t,a),t.v=e;var r=un.ensure();r.capture(t,a),(t.f&Ct)!==0&&((t.f&Ot)!==0&&Oo(t),Et(t,(t.f&nn)!==0?xt:vn)),t.wv=si(),Vs(t,Ot),Wa()&&He!==null&&(He.f&xt)!==0&&(He.f&(Nn|ga))===0&&(qt===null?dc([t]):qt.push(t)),!r.is_fork&&vo.size>0&&!Ws&&Ql()}return e}function Ql(){Ws=!1;var t=da;Dr(!0);const e=Array.from(vo);try{for(const a of e)(a.f&xt)!==0&&Et(a,vn),pr(a)&&sr(a)}finally{Dr(t)}vo.clear()}function Yn(t){v(t,t.v+1)}function Vs(t,e){var a=t.reactions;if(a!==null)for(var r=Wa(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===He)){var c=(l&Ot)===0;if(c&&Et(i,e),(l&Ct)!==0){var u=i;Qt?.delete(u),(l&fa)===0&&(l&nn&&(i.f|=fa),Vs(u,vn))}else c&&((l&Pn)!==0&&mn!==null&&mn.add(i),va(i))}}}function bt(t){if(typeof t!="object"||t===null||qn in t)return t;const e=Do(t);if(e!==ll&&e!==cl)return t;var a=new Map,r=bs(t),o=z(0),s=xn,i=l=>{if(xn===s)return l();var c=Re,u=xn;Rt(null),rs(s);var d=l();return Rt(c),rs(u),d};return r&&a.set("length",z(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&bl();var d=a.get(c);return d===void 0?d=i(()=>{var f=z(u.value);return a.set(c,f),f}):v(d,u.value,!0),!0},deleteProperty(l,c){var u=a.get(c);if(u===void 0){if(c in l){const d=i(()=>z(yt));a.set(c,d),Yn(o)}}else v(u,yt),Yn(o);return!0},get(l,c,u){if(c===qn)return t;var d=a.get(c),f=c in l;if(d===void 0&&(!f||Wn(l,c)?.writable)&&(d=i(()=>{var h=bt(f?l[c]:yt),m=z(h);return m}),a.set(c,d)),d!==void 0){var g=n(d);return g===yt?void 0:g}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=a.get(c);d&&(u.value=n(d))}else if(u===void 0){var f=a.get(c),g=f?.v;if(f!==void 0&&g!==yt)return{enumerable:!0,configurable:!0,value:g,writable:!0}}return u},has(l,c){if(c===qn)return!0;var u=a.get(c),d=u!==void 0&&u.v!==yt||Reflect.has(l,c);if(u!==void 0||He!==null&&(!d||Wn(l,c)?.writable)){u===void 0&&(u=i(()=>{var g=d?bt(l[c]):yt,h=z(g);return h}),a.set(c,u));var f=n(u);if(f===yt)return!1}return d},set(l,c,u,d){var f=a.get(c),g=c in l;if(r&&c==="length")for(var h=u;h<f.v;h+=1){var m=a.get(h+"");m!==void 0?v(m,yt):h in l&&(m=i(()=>z(yt)),a.set(h+"",m))}if(f===void 0)(!g||Wn(l,c)?.writable)&&(f=i(()=>z(void 0)),v(f,bt(u)),a.set(c,f));else{g=f.v!==yt;var T=i(()=>bt(u));v(f,T)}var _=Reflect.getOwnPropertyDescriptor(l,c);if(_?.set&&_.set.call(d,u),!g){if(r&&typeof c=="string"){var b=a.get("length"),B=Number(c);Number.isInteger(B)&&B>=b.v&&v(b,B+1)}Yn(o)}return!0},ownKeys(l){n(o);var c=Reflect.ownKeys(l).filter(f=>{var g=a.get(f);return g===void 0||g.v!==yt});for(var[u,d]of a)d.v!==yt&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Sl()}})}var ts,qs,Ks,Ys;function $l(){if(ts===void 0){ts=window,qs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;Ks=Wn(e,"firstChild").get,Ys=Wn(e,"nextSibling").get,Qo(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Qo(a)&&(a.__t=void 0)}}function Cn(t=""){return document.createTextNode(t)}function Fa(t){return Ks.call(t)}function hr(t){return Ys.call(t)}function S(t,e){return Fa(t)}function R(t,e=!1){{var a=Fa(t);return a instanceof Comment&&a.data===""?hr(a):a}}function F(t,e=1,a=!1){let r=t;for(;e--;)r=hr(r);return r}function ec(t){t.textContent=""}function Xs(){return!1}let ns=!1;function tc(){ns||(ns=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function qr(t){var e=Re,a=He;Rt(null),hn(null);try{return t()}finally{Rt(e),hn(a)}}function nc(t,e,a,r=a){t.addEventListener(e,()=>qr(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),tc()}function Gs(t){He===null&&(Re===null&&_l(),ml()),pa&&pl()}function ac(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function pn(t,e,a){var r=He;r!==null&&(r.f&Ut)!==0&&(t|=Ut);var o={ctx:Xe,deps:null,nodes:null,f:t|Ot|nn,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{sr(o),o.f|=Ro}catch(l){throw Lt(o),l}else e!==null&&va(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&Ha)===0&&(s=s.first,(t&Pn)!==0&&(t&Gn)!==0&&s!==null&&(s.f|=Gn)),s!==null&&(s.parent=r,r!==null&&ac(s,r),Re!==null&&(Re.f&Ct)!==0&&(t&ga)===0)){var i=Re;(i.effects??(i.effects=[])).push(s)}return o}function rr(){return Re!==null&&!fn}function Zs(t){const e=pn(Ur,null,!1);return Et(e,xt),e.teardown=t,e}function ze(t){Gs();var e=He.f,a=!Re&&(e&Nn)!==0&&(e&Ro)===0;if(a){var r=Xe;(r.e??(r.e=[])).push(t)}else return Js(t)}function Js(t){return pn(Io|xs,t,!1)}function rc(t){return Gs(),pn(Ur|xs,t,!0)}function oc(t){un.ensure();const e=pn(ga|Ha,t,!0);return(a={})=>new Promise(r=>{a.outro?ca(e,()=>{Lt(e),r(void 0)}):(Lt(e),r(void 0))})}function sc(t){return pn(Io,t,!1)}function ic(t){return pn(Lo|Ha,t,!0)}function Kr(t,e=0){return pn(Ur|e,t,!0)}function pe(t,e=[],a=[],r=[]){Gl(r,e,a,o=>{pn(Ur,()=>t(...o.map(n)),!0)})}function Va(t,e=0){var a=pn(Pn|e,t,!0);return a}function Jt(t){return pn(Nn|Ha,t,!0)}function Qs(t){var e=t.teardown;if(e!==null){const a=pa,r=Re;as(!0),Rt(null);try{e.call(null)}finally{as(a),Rt(r)}}}function $s(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&qr(()=>{o.abort(xa)});var r=a.next;(a.f&ga)!==0?a.parent=null:Lt(a,e),a=r}}function lc(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&Nn)===0&&Lt(e),e=a}}function Lt(t,e=!0){var a=!1;(e||(t.f&Ts)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(cc(t.nodes.start,t.nodes.end),a=!0),$s(t,e&&!a),Ir(t,0),Et(t,bn);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();Qs(t);var o=t.parent;o!==null&&o.first!==null&&ei(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function cc(t,e){for(;t!==null;){var a=t===e?null:hr(t);t.remove(),t=a}}function ei(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function ca(t,e,a=!0){var r=[];ti(t,r,!0);var o=()=>{a&&Lt(t),e&&e()},s=r.length;if(s>0){var i=()=>--s||o();for(var l of r)l.out(i)}else o()}function ti(t,e,a){if((t.f&Ut)===0){t.f^=Ut;var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&e.push(l);for(var o=t.first;o!==null;){var s=o.next,i=(o.f&Gn)!==0||(o.f&Nn)!==0&&(t.f&Pn)!==0;ti(o,e,i?a:!1),o=s}}}function Fo(t){ni(t,!0)}function ni(t,e){if((t.f&Ut)!==0){t.f^=Ut,(t.f&xt)===0&&(Et(t,Ot),va(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&Gn)!==0||(a.f&Nn)!==0;ni(a,o?e:!1),a=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)(i.is_global||e)&&i.in()}}function ai(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var o=a===r?null:hr(a);e.append(a),a=o}}let da=!1;function Dr(t){da=t}let pa=!1;function as(t){pa=t}let Re=null,fn=!1;function Rt(t){Re=t}let He=null;function hn(t){He=t}let Tn=null;function ri(t){Re!==null&&(Tn===null?Tn=[t]:Tn.push(t))}let Mt=null,jt=0,qt=null;function dc(t){qt=t}let oi=1,or=0,xn=or;function rs(t){xn=t}function si(){return++oi}function pr(t){var e=t.f;if((e&Ot)!==0)return!0;if(e&Ct&&(t.f&=~fa),(e&vn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(pr(s)&&Us(s),s.wv>t.wv)return!0}(e&nn)!==0&&Qt===null&&Et(t,xt)}return!1}function ii(t,e,a=!0){var r=t.reactions;if(r!==null&&!Tn?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Ct)!==0?ii(s,e,!1):e===s&&(a?Et(s,Ot):(s.f&xt)!==0&&Et(s,vn),va(s))}}function li(t){var m;var e=Mt,a=jt,r=qt,o=Re,s=Tn,i=Xe,l=fn,c=xn,u=t.f;Mt=null,jt=0,qt=null,Re=(u&(Nn|ga))===0?t:null,Tn=null,La(t.ctx),fn=!1,xn=++or,t.ac!==null&&(qr(()=>{t.ac.abort(xa)}),t.ac=null);try{t.f|=so;var d=t.fn,f=d(),g=t.deps;if(Mt!==null){var h;if(Ir(t,jt),g!==null&&jt>0)for(g.length=jt+Mt.length,h=0;h<Mt.length;h++)g[jt+h]=Mt[h];else t.deps=g=Mt;if(rr()&&(t.f&nn)!==0)for(h=jt;h<g.length;h++)((m=g[h]).reactions??(m.reactions=[])).push(t)}else g!==null&&jt<g.length&&(Ir(t,jt),g.length=jt);if(Wa()&&qt!==null&&!fn&&g!==null&&(t.f&(Ct|vn|Ot))===0)for(h=0;h<qt.length;h++)ii(qt[h],t);return o!==null&&o!==t&&(or++,qt!==null&&(r===null?r=qt:r.push(...qt))),(t.f&Vn)!==0&&(t.f^=Vn),f}catch(T){return Is(T)}finally{t.f^=so,Mt=e,jt=a,qt=r,Re=o,Tn=s,La(i),fn=l,xn=c}}function uc(t,e){let a=e.reactions;if(a!==null){var r=sl.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&Ct)!==0&&(Mt===null||!Mt.includes(e))&&(Et(e,vn),(e.f&nn)!==0&&(e.f^=nn,e.f&=~fa),Hs(e),Ir(e,0))}function Ir(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)uc(t,a[r])}function sr(t){var e=t.f;if((e&bn)===0){Et(t,xt);var a=He,r=da;He=t,da=!0;try{(e&(Pn|vl))!==0?lc(t):$s(t),Qs(t);var o=li(t);t.teardown=typeof o=="function"?o:null,t.wv=oi;var s;ro&&zl&&(t.f&Ot)!==0&&t.deps}finally{da=r,He=a}}}async function ci(){await Promise.resolve(),Os()}function n(t){var e=t.f,a=(e&Ct)!==0;if(Re!==null&&!fn){var r=He!==null&&(He.f&bn)!==0;if(!r&&!Tn?.includes(t)){var o=Re.deps;if((Re.f&so)!==0)t.rv<or&&(t.rv=or,Mt===null&&o!==null&&o[jt]===t?jt++:Mt===null?Mt=[t]:Mt.includes(t)||Mt.push(t));else{(Re.deps??(Re.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Re]:s.includes(Re)||s.push(Re)}}}if(pa){if(Kn.has(t))return Kn.get(t);if(a){var i=t,l=i.v;return((i.f&xt)===0&&i.reactions!==null||ui(i))&&(l=Oo(i)),Kn.set(i,l),l}}else a&&(!Qt?.has(t)||Ve?.is_fork&&!rr())&&(i=t,pr(i)&&Us(i),da&&rr()&&(i.f&nn)===0&&di(i));if(Qt?.has(t))return Qt.get(t);if((t.f&Vn)!==0)throw t.v;return t.v}function di(t){if(t.deps!==null){t.f^=nn;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&Ct)!==0&&(e.f&nn)===0&&di(e)}}function ui(t){if(t.v===yt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Kn.has(e)||(e.f&Ct)!==0&&ui(e))return!0;return!1}function Ft(t){var e=fn;try{return fn=!0,t()}finally{fn=e}}const fc=-7169;function Et(t,e){t.f=t.f&fc|e}function vc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(qn in t)ho(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&qn in a&&ho(a)}}}function ho(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{ho(t[r],e)}catch{}const a=Do(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Ss(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const gc=["touchstart","touchmove"];function hc(t){return gc.includes(t)}const fi=new Set,po=new Set;function pc(t,e,a,r={}){function o(s){if(r.capture||Ga.call(e,s),!s.cancelBubble)return qr(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?ha(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function an(t,e,a,r,o){var s={capture:r,passive:o},i=pc(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Zs(()=>{e.removeEventListener(t,i,s)})}function lt(t){for(var e=0;e<t.length;e++)fi.add(t[e]);for(var a of po)a(t)}let os=null;function Ga(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;os=t;var i=0,l=os===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){il(t,"currentTarget",{configurable:!0,get(){return s||a}});var d=Re,f=He;Rt(null),hn(null);try{for(var g,h=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var T=s["__"+r];T!=null&&(!s.disabled||t.target===s)&&T.call(s,t)}catch(_){g?h.push(_):g=_}if(t.cancelBubble||m===e||m===null)break;s=m}if(g){for(let _ of h)queueMicrotask(()=>{throw _});throw g}}finally{t.__root=e,delete t.currentTarget,Rt(d),hn(f)}}}function vi(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ir(t,e){var a=He;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function P(t,e){var a=(e&Rl)!==0,r=(e&Ll)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=vi(s?t:"<!>"+t),a||(o=Fa(o)));var i=r||qs?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=Fa(i),c=i.lastChild;ir(l,c)}else ir(i,i);return i}}function mc(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=vi(o),l=Fa(i);s=Fa(l)}var c=s.cloneNode(!0);return ir(c,c),c}}function _c(t,e){return mc(t,e,"svg")}function Ne(t=""){{var e=Cn(t+"");return ir(e,e),e}}function ie(){var t=document.createDocumentFragment(),e=document.createComment(""),a=Cn();return t.append(e,a),ir(e,a),t}function p(t,e){t!==null&&t.before(e)}function bg(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function dt(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function wc(t,e){return yc(t,e)}const Ca=new Map;function yc(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){$l();var l=new Set,c=f=>{for(var g=0;g<f.length;g++){var h=f[g];if(!l.has(h)){l.add(h);var m=hc(h);e.addEventListener(h,Ga,{passive:m});var T=Ca.get(h);T===void 0?(document.addEventListener(h,Ga,{passive:m}),Ca.set(h,1)):Ca.set(h,T+1)}}};c(Hr(fi)),po.add(c);var u=void 0,d=oc(()=>{var f=a??e.appendChild(Cn());return ql(f,{pending:()=>{}},g=>{if(s){le({});var h=Xe;h.c=s}o&&(r.$$events=o),u=t(g,r)||{},s&&ce()}),()=>{for(var g of l){e.removeEventListener(g,Ga);var h=Ca.get(g);--h===0?(document.removeEventListener(g,Ga),Ca.delete(g)):Ca.set(g,h)}po.delete(c),f!==a&&f.parentNode?.removeChild(f)}});return bc.set(u,d),u}let bc=new WeakMap;var en,dn,Ht,la,ur,fr,zr;class Yr{constructor(e,a=!0){At(this,"anchor");Ae(this,en,new Map);Ae(this,dn,new Map);Ae(this,Ht,new Map);Ae(this,la,new Set);Ae(this,ur,!0);Ae(this,fr,()=>{var e=Ve;if(I(this,en).has(e)){var a=I(this,en).get(e),r=I(this,dn).get(a);if(r)Fo(r),I(this,la).delete(a);else{var o=I(this,Ht).get(a);o&&(I(this,dn).set(a,o.effect),I(this,Ht).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of I(this,en)){if(I(this,en).delete(s),s===e)break;const l=I(this,Ht).get(i);l&&(Lt(l.effect),I(this,Ht).delete(i))}for(const[s,i]of I(this,dn)){if(s===a||I(this,la).has(s))continue;const l=()=>{if(Array.from(I(this,en).values()).includes(s)){var u=document.createDocumentFragment();ai(i,u),u.append(Cn()),I(this,Ht).set(s,{effect:i,fragment:u})}else Lt(i);I(this,la).delete(s),I(this,dn).delete(s)};I(this,ur)||!r?(I(this,la).add(s),ca(i,l,!1)):l()}}});Ae(this,zr,e=>{I(this,en).delete(e);const a=Array.from(I(this,en).values());for(const[r,o]of I(this,Ht))a.includes(r)||(Lt(o.effect),I(this,Ht).delete(r))});this.anchor=e,Ee(this,ur,a)}ensure(e,a){var r=Ve,o=Xs();if(a&&!I(this,dn).has(e)&&!I(this,Ht).has(e))if(o){var s=document.createDocumentFragment(),i=Cn();s.append(i),I(this,Ht).set(e,{effect:Jt(()=>a(i)),fragment:s})}else I(this,dn).set(e,Jt(()=>a(this.anchor)));if(I(this,en).set(r,e),o){for(const[l,c]of I(this,dn))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of I(this,Ht))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(I(this,fr)),r.ondiscard(I(this,zr))}else I(this,fr).call(this)}}en=new WeakMap,dn=new WeakMap,Ht=new WeakMap,la=new WeakMap,ur=new WeakMap,fr=new WeakMap,zr=new WeakMap;const Sc=0,eo=1;function Cc(t,e,a,r,o){var s=Wa(),i=yt,l=s?gn(i):go(i,!1,!1),c=s?gn(i):go(i,!1,!1),u=new Yr(t);Va(()=>{var d=e(),f=!1;if(dl(d)){var g=Bs(),h=!1;const m=T=>{if(!f){h=!0,g(!1),un.ensure();try{T()}finally{ar(),Pa||Os()}}};d.then(T=>{m(()=>{Sn(l,T),u.ensure(eo,r&&(_=>r(_,l)))})},T=>{m(()=>{if(Sn(c,T),u.ensure(eo,o&&(_=>o(_,c))),!o)throw c.v})}),ha(()=>{h||m(()=>{u.ensure(Sc,a)})})}else Sn(l,d),u.ensure(eo,r&&(m=>r(m,l)));return()=>{f=!0}})}function U(t,e,a=!1){var r=new Yr(t),o=a?Gn:0;function s(i,l){r.ensure(i,l)}Va(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function ve(t,e){Kr(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Tc(t,e,a){for(var r=[],o=e.length,s,i=e.length,l=0;l<o;l++){let f=e[l];ca(f,()=>{if(s){if(s.pending.delete(f),s.done.add(f),s.pending.size===0){var g=t.outrogroups;mo(Hr(s.done)),g.delete(s),g.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var c=r.length===0&&a!==null;if(c){var u=a,d=u.parentNode;ec(d),d.append(u),t.items.clear()}mo(e,!c)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function mo(t,e=!0){for(var a=0;a<t.length;a++)Lt(t[a],e)}var ss;function kn(t,e,a,r,o,s=null){var i=t,l=new Map,c=(e&Ps)!==0;if(c){var u=t;i=u.appendChild(Cn())}var d=null,f=gr(()=>{var b=a();return bs(b)?b:b==null?[]:Hr(b)}),g,h=!0;function m(){_.fallback=d,xc(_,g,i,e,r),d!==null&&(g.length===0?(d.f&yn)===0?Fo(d):(d.f^=yn,Za(d,null,i)):ca(d,()=>{d=null}))}var T=Va(()=>{g=n(f);for(var b=g.length,B=new Set,w=Ve,C=Xs(),L=0;L<b;L+=1){var D=g[L],A=r(D,L),O=h?null:l.get(A);O?(O.v&&Sn(O.v,D),O.i&&Sn(O.i,L),C&&w.skipped_effects.delete(O.e)):(O=kc(l,h?i:ss??(ss=Cn()),D,A,L,o,e,a),h||(O.e.f|=yn),l.set(A,O)),B.add(A)}if(b===0&&s&&!d&&(h?d=Jt(()=>s(i)):(d=Jt(()=>s(ss??(ss=Cn()))),d.f|=yn)),!h)if(C){for(const[ee,Y]of l)B.has(ee)||w.skipped_effects.add(Y.e);w.oncommit(m),w.ondiscard(()=>{})}else m();n(f)}),_={effect:T,items:l,outrogroups:null,fallback:d};h=!1}function xc(t,e,a,r,o){var s=(r&El)!==0,i=e.length,l=t.items,c=t.effect.first,u,d=null,f,g=[],h=[],m,T,_,b;if(s)for(b=0;b<i;b+=1)m=e[b],T=o(m,b),_=l.get(T).e,(_.f&yn)===0&&(_.nodes?.a?.measure(),(f??(f=new Set)).add(_));for(b=0;b<i;b+=1){if(m=e[b],T=o(m,b),_=l.get(T).e,t.outrogroups!==null)for(const Y of t.outrogroups)Y.pending.delete(_),Y.done.delete(_);if((_.f&yn)!==0)if(_.f^=yn,_===c)Za(_,null,a);else{var B=d?d.next:c;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),In(t,d,_),In(t,_,B),Za(_,B,a),d=_,g=[],h=[],c=d.next;continue}if((_.f&Ut)!==0&&(Fo(_),s&&(_.nodes?.a?.unfix(),(f??(f=new Set)).delete(_))),_!==c){if(u!==void 0&&u.has(_)){if(g.length<h.length){var w=h[0],C;d=w.prev;var L=g[0],D=g[g.length-1];for(C=0;C<g.length;C+=1)Za(g[C],w,a);for(C=0;C<h.length;C+=1)u.delete(h[C]);In(t,L.prev,D.next),In(t,d,L),In(t,D,w),c=w,d=D,b-=1,g=[],h=[]}else u.delete(_),Za(_,c,a),In(t,_.prev,_.next),In(t,_,d===null?t.effect.first:d.next),In(t,d,_),d=_;continue}for(g=[],h=[];c!==null&&c!==_;)(u??(u=new Set)).add(c),h.push(c),c=c.next;if(c===null)continue}(_.f&yn)===0&&g.push(_),d=_,c=_.next}if(t.outrogroups!==null){for(const Y of t.outrogroups)Y.pending.size===0&&(mo(Hr(Y.done)),t.outrogroups?.delete(Y));t.outrogroups.size===0&&(t.outrogroups=null)}if(c!==null||u!==void 0){var A=[];if(u!==void 0)for(_ of u)(_.f&Ut)===0&&A.push(_);for(;c!==null;)(c.f&Ut)===0&&c!==t.fallback&&A.push(c),c=c.next;var O=A.length;if(O>0){var ee=(r&Ps)!==0&&i===0?a:null;if(s){for(b=0;b<O;b+=1)A[b].nodes?.a?.measure();for(b=0;b<O;b+=1)A[b].nodes?.a?.fix()}Tc(t,A,ee)}}s&&ha(()=>{if(f!==void 0)for(_ of f)_.nodes?.a?.apply()})}function kc(t,e,a,r,o,s,i,l){var c=(i&xl)!==0?(i&Pl)===0?go(a,!1,!1):gn(a):null,u=(i&kl)!==0?gn(o):null;return{v:c,i:u,e:Jt(()=>(s(e,c??a,u??o,l),()=>{t.delete(r)}))}}function Za(t,e,a){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,s=e&&(e.f&yn)===0?e.nodes.start:a;r!==null;){var i=hr(r);if(s.before(r),r===o)return;r=i}}function In(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function xe(t,e,...a){var r=new Yr(t);Va(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},Gn)}function Ec(t,e,a){var r=new Yr(t);Va(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},Gn)}function gi(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=gi(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function Pc(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=gi(t))&&(r&&(r+=" "),r+=e);return r}function rt(t){return typeof t=="object"?Pc(t):t??""}const is=[...` 	
\r\fÂ \v\uFEFF`];function Nc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||is.includes(r[i-1]))&&(l===r.length||is.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Ac(t,e){return t==null?null:String(t)}function $e(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=Nc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function za(t,e,a,r){var o=t.__style;if(o!==e){var s=Ac(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Mc=Symbol("is custom element"),Dc=Symbol("is html");function Sg(t,e){var a=zo(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Ic(t,e){var a=zo(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function Qe(t,e,a,r){var o=zo(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[gl]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Rc(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function zo(t){return t.__attributes??(t.__attributes={[Mc]:t.nodeName.includes("-"),[Dc]:t.namespaceURI===Ol})}var ls=new Map;function Rc(t){var e=t.getAttribute("is")||t.nodeName,a=ls.get(e);if(a)return a;ls.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Ss(o);for(var i in r)r[i].set&&a.push(i);o=Do(o)}return a}function hi(t,e,a=e){var r=new WeakSet;nc(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=to(t)?no(s):s,a(s),Ve!==null&&r.add(Ve),await ci(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),Ft(e)==null&&t.value&&(a(to(t)?no(t.value):t.value),Ve!==null&&r.add(Ve)),Kr(()=>{var o=e();if(t===document.activeElement){var s=Er??Ve;if(r.has(s))return}to(t)&&o===no(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function to(t){var e=t.type;return e==="number"||e==="range"}function no(t){return t===""?null:+t}function cs(t,e){return t===e||t?.[qn]===e}function et(t={},e,a,r){return sc(()=>{var o,s;return Kr(()=>{o=s,s=[],Ft(()=>{t!==a(...s)&&(e(t,...s),o&&cs(a(...o),t)&&e(null,...o))})}),()=>{ha(()=>{s&&cs(a(...s),t)&&e(null,...s)})}}),t}function jo(t=!1){const e=Xe,a=e.l.u;if(!a)return;let r=()=>vc(e.s);if(t){let o=0,s={};const i=vr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&rc(()=>{ds(e,r),oo(a.b)}),ze(()=>{const o=Ft(()=>a.m.map(ul));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&ze(()=>{ds(e,r),oo(a.a)})}function ds(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Cr=!1;function Lc(t){var e=Cr;try{return Cr=!1,[t(),Cr]}finally{Cr=e}}const Oc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Fc(t,e,a){return new Proxy({props:t,exclude:e},Oc)}const zc={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(Ka(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];Ka(o)&&(o=o());const s=Wn(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(Ka(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=Wn(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===qn||e===ks)return!1;for(let a of t.props)if(Ka(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(Ka(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function _o(...t){return new Proxy({props:t},zc)}function Pe(t,e,a,r){var o=!Ua||(a&Al)!==0,s=(a&Dl)!==0,i=(a&Il)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?Ft(r):r),l),d;if(s){var f=qn in t||ks in t;d=Wn(t,e)?.set??(f&&e in t?w=>t[e]=w:void 0)}var g,h=!1;s?[g,h]=Lc(()=>t[e]):g=t[e],g===void 0&&r!==void 0&&(g=u(),d&&(o&&yl(),d(g)));var m;if(o?m=()=>{var w=t[e];return w===void 0?u():(c=!0,w)}:m=()=>{var w=t[e];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(a&Ml)===0)return m;if(d){var T=t.$$legacy;return(function(w,C){return arguments.length>0?((!o||!C||T||h)&&d(C?m():w),w):m()})}var _=!1,b=((a&Nl)!==0?vr:gr)(()=>(_=!1,m()));s&&n(b);var B=He;return(function(w,C){if(arguments.length>0){const L=C?n(b):o&&s?bt(w):w;return v(b,L),_=!0,l!==void 0&&(l=L),w}return pa&&_||(B.f&bn)!==0?b.v:n(b)})}function _e(t){Xe===null&&Es(),Ua&&Xe.l!==null?jc(Xe).m.push(t):ze(()=>{const e=Ft(t);if(typeof e=="function")return e})}function jc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Bc="5";var ys;typeof window<"u"&&((ys=window.__svelte??(window.__svelte={})).v??(ys.v=new Set)).add(Bc);jl();const pi={};function Hc(t){it(pi,t)}function Bo(){const t=st(pi);if(!t)throw new Error("No FeedSearchContext found");return t}const mi={};function Uc(t){it(mi,t)}function Wt(){const t=st(mi);if(!t)throw new Error("No SearchParamsContext found");return t}function Wc(t,e){le(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Wt(),s="feedSearch",i=E(()=>o().get(s)||""),l=E(()=>n(i));Hc({getFeedSearch:()=>n(l),setFeedSearch:d=>{d===""?r(s):a(s,d)}});var c=ie(),u=R(c);xe(u,()=>e.children??je),p(t,c),ce()}const _i={};function Vc(t){it(_i,t)}function qc(){const t=st(_i);if(!t)throw new Error("No TagsSearchContext found");return t}function Kc(t,e){le(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Wt(),s="tagsSearch",i=E(()=>o().get(s)||""),l=E(()=>n(i));Vc({getTagsSearch:()=>n(l),setTagsSearch:d=>{d===""?r(s):a(s,d)}});var c=ie(),u=R(c);xe(u,()=>e.children??je),p(t,c),ce()}const wi={};function Yc(t){it(wi,t)}function yi(){const t=st(wi);if(!t)throw new Error("No FeedOrderContext found");return t}function Xc(t,e){le(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Wt(),s="feedOrder",i=E(()=>o().get(s)||"newest"),l=E(()=>n(i));Yc({getFeedOrder:()=>n(l),setFeedOrder:d=>{d==="newest"?r(s):a(s,d)}});var c=ie(),u=R(c);xe(u,()=>e.children??je),p(t,c),ce()}const bi={};function Gc(t){it(bi,t)}function mr(){const t=st(bi);if(!t)throw new Error("No SidebarContext found");return t}function Zc(t,e){le(e,!0);let a=z("closed");Gc({sidebarOpen:()=>{v(a,"preOpening")},sidebarClose:()=>{v(a,"closing")},getSidebarState:()=>n(a),setSidebarState:u=>{v(a,u,!0)}});var l=ie(),c=R(l);xe(c,()=>e.children??je),p(t,l),ce()}const Si={};function Jc(t){it(Si,t)}function An(){const t=st(Si);if(!t)throw new Error("No SelectedTagsContext found");return t}function Qc(t,e){le(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Wt(),s=E(a),i="selectedTags";let l=E(()=>n(s).get(i)||""),c=E(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));Jc({getSelectedTags:()=>n(c),addTag:_=>{n(c).has(_)||r(i,[...n(c),_].map(b=>encodeURIComponent(b)).join(","))},removeTag:_=>{n(c).has(_)&&n(c).size===1?o(i):n(c).has(_)&&r(i,[...n(c)].filter(b=>b!==_).map(b=>encodeURIComponent(b)).join(","))},clearTags:()=>{o(i)},setSelectedTags:_=>{_.size===0?o(i):r(i,[..._].map(b=>encodeURIComponent(b)).join(","))}});var m=ie(),T=R(m);xe(T,()=>e.children??je),p(t,m),ce()}const Ci={};function $c(t){it(Ci,t)}function ma(){const t=st(Ci);if(!t)throw new Error("No SelectedNotesContext found");return t}var ed=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],td=["difference","intersection","symmetricDifference","union"],us=!1,Ra,tn,Hn,jr,ja,Ti,xi;const Br=class Br extends Set{constructor(a){super();Ae(this,ja);Ae(this,Ra,new Map);Ae(this,tn,z(0));Ae(this,Hn,z(0));Ae(this,jr,xn||-1);if(a){for(var r of a)super.add(r);I(this,Hn).v=super.size}us||Je(this,ja,xi).call(this)}has(a){var r=super.has(a),o=I(this,Ra),s=o.get(a);if(s===void 0){if(!r)return n(I(this,tn)),!1;s=Je(this,ja,Ti).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),v(I(this,Hn),super.size),Yn(I(this,tn))),this}delete(a){var r=super.delete(a),o=I(this,Ra),s=o.get(a);return s!==void 0&&(o.delete(a),v(s,!1)),r&&(v(I(this,Hn),super.size),Yn(I(this,tn))),r}clear(){if(super.size!==0){super.clear();var a=I(this,Ra);for(var r of a.values())v(r,!1);a.clear(),v(I(this,Hn),0),Yn(I(this,tn))}}keys(){return this.values()}values(){return n(I(this,tn)),super.values()}entries(){return n(I(this,tn)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(I(this,Hn))}};Ra=new WeakMap,tn=new WeakMap,Hn=new WeakMap,jr=new WeakMap,ja=new WeakSet,Ti=function(a){return xn===I(this,jr)?z(a):gn(a)},xi=function(){us=!0;var a=Br.prototype,r=Set.prototype;for(const o of ed)a[o]=function(...s){return n(I(this,tn)),r[o].apply(this,s)};for(const o of td)a[o]=function(...s){n(I(this,tn));var i=r[o].apply(this,s);return new Br(i)}};let wo=Br;function nd(t,e){le(e,!0);let a=new wo,r=z("single");const o=()=>a,s=h=>{a.clear(),h.forEach(m=>a.add(m))},i=h=>{a.add(h)},l=h=>{a.delete(h)},c=()=>{a.clear()};$c({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:c,getMode:()=>n(r),changeMode:h=>{v(r,h,!0),h==="single"&&c()}});var f=ie(),g=R(f);xe(g,()=>e.children??je),p(t,f),ce()}const ki={};function ad(t){it(ki,t)}function Ho(){const t=st(ki);if(!t)throw new Error("No LocalDBContext found");return t}const Ei={};function rd(t){it(Ei,t)}function yo(){const t=st(Ei);if(!t)throw new Error("No SettingsContext found");return t}const Pi={};function od(t){it(Pi,t)}function Xr(){const t=st(Pi);if(!t)throw new Error("No BroadcastContext found");return t}const sd="AppStorage",id=1,Ja="account",Qa="settings",Ke="notes",Dt="tags",ld="syncLog",Zn="success",Jn="error",mt=(t,e,a)=>{t?.addEventListener(e,a)},fs=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();mt(s,Zn,()=>{const i=s?.result||[];a(i)}),mt(s,Jn,i=>{r(i)})}),Rr=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);mt(i,Zn,()=>{const l=i?.result?.data;r(l)}),mt(i,Jn,l=>{o(l)})}),na=(t,e,a,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});mt(c,Zn,()=>{o()}),mt(c,Jn,u=>{s(u)})}),ct=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{mt(i,Zn,()=>{l()}),mt(i,Jn,u=>{c(u)})})}))},ao=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);mt(l,Zn,()=>{r()}),mt(l,Jn,c=>{o(c)})}),Ya=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{mt(i,Zn,()=>{l()}),mt(i,Jn,u=>{c(u)})})}))},ka=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();mt(i,Zn,()=>{a()}),mt(i,Jn,l=>{r(l)})});function cd(t,e){le(e,!0);const{deleteSearchParam:a}=Wt(),r="viewMode";let s=bt((()=>{const A=new URLSearchParams(window.location.search).get(r)||"tab";return A==="popup"||A==="window"||A==="tab"||A==="sidebar"?A:"tab"})());_e(()=>{a(r)});let i=z(!1),l=z(bt({showFavicon:!0,recordMode:"note"}));const{getDB:c}=Ho(),{createBroadcastChannel:u,tabId:d}=Xr(),f=u(),g=E(c),h=async()=>{const D=await Rr(n(g),Qa,"default");D&&v(l,D,!0)},m=async()=>{await h(),v(i,!0)},T=async D=>{const A=JSON.parse(D.data),O=A;if(A.tabId&&A.tabId===d){O.type==="exit"&&(v(l,{showFavicon:!0,recordMode:"note"},!0),ka(n(g),Qa));return}O.type==="updateSettings"?h():O.type==="exit"&&v(l,{showFavicon:!0,recordMode:"note"},!0)},_=()=>n(l).showFavicon,b=()=>n(l).recordMode,B=async D=>{n(l).showFavicon=D,await na(n(g),Qa,"default",{...n(l)}),f.postMessage({type:"updateSettings"})},w=async D=>{n(l).recordMode=D,await na(n(g),Qa,"default",{...n(l)}),f.postMessage({type:"updateSettings"})};_e(()=>(m(),f.addEventListener(T),()=>{f.removeEventListener(T)})),rd({getFaviconEnabled:_,getRecordMode:b,setRecordMode:w,setFaviconShown:B,isInitedSettings:()=>n(i),getViewMode:()=>s});var C=ie(),L=R(C);xe(L,()=>e.children??je),p(t,C),ce()}const Ni={};function dd(t){it(Ni,t)}function Uo(){const t=st(Ni);if(!t)throw new Error("No AccountContext found");return t}function ud(t,e){le(e,!0);let a=z(void 0);const{getDB:r}=Ho(),{createBroadcastChannel:o,tabId:s}=Xr(),i=E(r),l=o(),c=async()=>{const w=await Rr(n(i),Ja,"default");v(a,w,!0)},u=w=>na(n(i),Ja,"default",w),d=async w=>{const C=await Rr(n(i),Ja,"default");C!==void 0&&v(a,C,!0),w(C)},f=async w=>{const C=JSON.parse(w.data);if(C.tabId&&C.tabId===s)return;const L=C;L.type==="initLocalAccount"?v(a,null):L.type==="initCloudAccount"?c():L.type==="disconnectCloudAccount"?v(a,null):L.type==="exit"?v(a,void 0):L.type==="updateAccount"&&c()};_e(()=>(l.addEventListener(f),()=>{l.removeEventListener(f)})),dd({init:d,getAccount:()=>n(a),initLocalAccount:async()=>{v(a,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async w=>{const C={encryptedClientKey:w.encryptedClientKey||"",subscriptionExpires:w.subscriptionExpires||-1,lastSync:-1};await u(C),v(a,C,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{v(a,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async w=>{if(!n(a))throw new Error("No account to update subscription for");const C={...n(a),subscriptionExpires:w};await u(C),l.postMessage({type:"updateAccount"})},exitApp:async()=>{v(a,void 0),l.postMessage({type:"exit"}),await ka(n(i),Ja)}});var b=ie(),B=R(b);xe(B,()=>e.children??je),p(t,b),ce()}const Ai={};function fd(t){it(Ai,t)}function zt(){const t=st(Ai);if(!t)throw new Error("No NotesContext found");return t}const On=()=>crypto.randomUUID(),vd=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},Mi=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function Cg(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const gt=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function gd(t,e){le(e,!0);const{getDB:a}=Ho(),{createBroadcastChannel:r,tabId:o}=Xr(),s=E(a),i=r(),l=720*60*60*1e3;let c=z(!1),u=z(()=>new Map),d=z(()=>[]),f=z(()=>new Map);const g=()=>n(c),h=()=>n(d)().some(y=>y.data&&!y.data.deletedAt&&!y.data.archivedAt),m=()=>n(d)().some(y=>y.data&&y.data.deletedAt),T=()=>n(d)().some(y=>y.data&&y.data.archivedAt&&!y.data.deletedAt),_=y=>{const M=n(d)(),k=n(f)(),j=k.get(y.id);j?j.data=y.data:(M.push(y),k.set(y.id,y)),v(d,()=>M),v(f,()=>k)},b=y=>{const M=n(d)(),k=n(f)(),j=k.get(y);k.has(y)&&k.delete(y),j&&(j.data=void 0),v(d,()=>M),v(f,()=>k)},B=y=>{const M=n(d)(),k=n(f)();for(const j of y){const K=k.get(j);k.has(j)&&k.delete(j),K&&(K.data=void 0)}v(d,()=>M),v(f,()=>k)},w=()=>{v(d,()=>[]),v(u,()=>new Map),v(f,()=>new Map)},C=()=>n(d),L=y=>{const M=n(u)();for(const k of y)M.get(k)||M.set(k,{name:k});v(u,()=>M)},D=async()=>{const[y,M]=await Promise.all([fs(n(s),Ke),fs(n(s),Dt).then(Q=>Q.reduce((Z,ne)=>Z.set(ne.id,ne.data),new Map))]),k=[],j=[],K=new Map;for(const Q of y)Q.data.deletedAt&&Date.now()-Q.data.deletedAt>l?k.push(Q.id):(j.push(Q),K.set(Q.id,Q));const W=vd(j),de=[],me=new Map(M);[...W.values()].forEach(Q=>{me.set(Q,{name:Q,pinned:M.get(Q)?.pinned||!1}),M.has(Q)||de.push(Q)});const ae=[];[...M.keys()].forEach(Q=>{W.has(Q)||ae.push(Q)}),await Ya(n(s),Ke,k),await Ya(n(s),Dt,ae),await ct(n(s),Dt,de.map(Q=>({id:Q,data:{pinned:me.get(Q)?.pinned||!1}}))),v(d,()=>j),v(f,()=>K),v(u,()=>me),v(c,!0)},A=async y=>{const M=n(u)(),k=y.data.tags.filter(j=>!M.has(j))||[];return await na(n(s),Ke,y.id,{...y.data}),k.length>0&&(await ct(n(s),Dt,k.map(j=>({id:j,data:{pinned:!1}}))||[]),L(k)),_(y),i.postMessage({type:"putNote",data:{id:y.id}}),y.id},O=async({link:y,text:M,tags:k})=>{const j={id:On(),data:{link:gt(y),text:M,tags:gt(k),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await A(j),j.id},ee=async(y,{link:M,text:k,tags:j})=>{const K=x(y);if(!K||!K.data)return;const W={id:y,data:{...K.data,link:gt(M),text:k,tags:gt(j),updatedAt:Date.now()}};await A(W)},Y=async(y,{link:M,text:k,tags:j})=>{const K=x(y);if(!K||!K.data)return;const W=On(),de={id:y,data:{...K.data,link:M,text:k,tags:j,updatedAt:Date.now(),history:[...(K.data.history||[]).slice(-49),{id:W,link:gt(K.data.link),text:K.data.text,tags:gt(K.data.tags),updatedAt:K.data.updatedAt}]}};return await A(de),W},J=async(y,M)=>{const k=x(y);if(!k||!k.data)return;const j=k.data.history?.find?.(W=>W.id===M);if(!j)return;const K={id:y,data:{...k.data,link:gt(j.link),text:j.text,tags:gt(j.tags),updatedAt:j.updatedAt,history:k.data.history?.filter?.(W=>W.id!==M)||[]}};await A(K)},re=async y=>{const k=n(f)().get(y);!k||!k.data||(b(y),await ao(n(s),Ke,y),i.postMessage({type:"deleteNote",data:{id:y}}))},X=async()=>{await ka(n(s),Ke),await ka(n(s),Dt),w(),i.postMessage({type:"clearNotes"})},x=y=>n(f)().get(y),$=async(y,M)=>{const j=n(f)().get(y);if(!j||!j.data)return;const K={id:y,data:{...j.data,pinnedAt:M?Date.now():void 0}};A(K)},ue=async y=>{const k=n(f)().get(y);if(!k||!k.data)return;const j={id:y,data:{...k.data,deletedAt:Date.now()}};await A(j)},V=async y=>{const k=n(f)().get(y);if(!k||!k.data)return;const j={id:y,data:{...k.data,archivedAt:Date.now()}};await A(j)},G=async({noteIds:y})=>{const M=n(f)(),k=n(d)();for(const K of y){const W=M.get(K);W?.data&&(W.data.deletedAt=Date.now())}return await ct(n(s),Ke,y.map(K=>{const W=M.get(K);return{id:K,data:W?.data}})),i.postMessage({type:"reloadNotes"}),v(f,()=>M),v(d,()=>k),{cancel:async()=>{for(const K of y){const W=M.get(K);W?.data&&(W.data.deletedAt=0)}await ct(n(s),Ke,y.map(K=>{const W=M.get(K);return{id:K,data:W?.data}})),i.postMessage({type:"reloadNotes"}),v(f,()=>M),v(d,()=>k)}}},oe=async({noteIds:y})=>{const M=n(f)(),k=n(d)();for(const K of y){const W=M.get(K);W?.data&&(W.data.archivedAt=Date.now())}return await ct(n(s),Ke,y.map(K=>{const W=M.get(K);return{id:K,data:W?.data}})),i.postMessage({type:"reloadNotes"}),v(f,()=>M),v(d,()=>k),{cancel:async()=>{for(const K of y){const W=M.get(K);W?.data&&(W.data.archivedAt=0)}await ct(n(s),Ke,y.map(K=>{const W=M.get(K);return{id:K,data:W?.data}})),i.postMessage({type:"reloadNotes"}),v(f,()=>M),v(d,()=>k)}}},we=async({noteIds:y})=>{const M=n(f)(),k=n(d)(),j=[];for(const W of y){const de=M.get(W);de?.data&&(j.push({id:W,data:gt(de.data)}),de.data.archivedAt=0)}return await ct(n(s),Ke,y.map(W=>{const de=M.get(W);return{id:W,data:de?.data}})),i.postMessage({type:"reloadNotes"}),v(f,()=>M),v(d,()=>k),{cancel:async()=>{for(const W of j){const de=M.get(W.id);de?.data&&(de.data=W.data)}await ct(n(s),Ke,y.map(W=>{const de=M.get(W);return{id:W,data:de?.data}})),i.postMessage({type:"reloadNotes"}),v(f,()=>M),v(d,()=>k)}}},Te=async({noteIds:y})=>{const M=n(f)(),k=n(d)(),j=[];for(const W of y){const de=M.get(W);de?.data&&(j.push({id:W,data:gt(de.data)}),de.data.deletedAt=0)}return await ct(n(s),Ke,y.map(W=>{const de=M.get(W);return{id:W,data:de?.data}})),i.postMessage({type:"reloadNotes"}),v(f,()=>M),v(d,()=>k),{cancel:async()=>{for(const W of j){const de=M.get(W.id);de?.data&&(de.data=W.data)}await ct(n(s),Ke,y.map(W=>{const de=M.get(W);return{id:W,data:de?.data}})),i.postMessage({type:"reloadNotes"}),v(f,()=>M),v(d,()=>k)}}},Me=async y=>{const k=n(f)().get(y);if(!k||!k.data)return;const j={id:y,data:{...k.data,deletedAt:0}};await A(j)},De=async y=>{const k=n(f)().get(y);if(!k||!k.data)return;const j={id:y,data:{...k.data,archivedAt:0}};await A(j)},Ie=async(y,M)=>{const k=n(u)();k.set(y,{name:y,pinned:M}),await na(n(s),Dt,y,{pinned:M}),i.postMessage({type:"pinTag",data:{tag:y,pinned:M}}),v(u,()=>k)},N=async({noteIds:y})=>{const M=n(u)(),k=n(d)();B(y),await Ya(n(s),Ke,y),i.postMessage({type:"reloadNotes"}),v(d,()=>k),v(u,()=>M)},te=async y=>{const M=n(f)(),k={};y.forEach(j=>{const K=M.get(j.id),W=[];if(K&&K.data){let de=0,me=0;for(;de<j.data.history.length&&me<K.data.history.length;){const ae=j.data.history[de],Q=K.data.history[me];ae.id===Q.id?(ae.updatedAt>Q.updatedAt?W.push(ae):W.push(Q),de+=1,me+=1):ae.updatedAt<Q.updatedAt?(W.push(ae),de+=1):ae.updatedAt>Q.updatedAt?(W.push(Q),me+=1):(W.push(Q),de+=1,me+=1)}K.data.updatedAt>j.data.updatedAt?k[K.id]={id:K.id,data:{...K.data,history:W}}:k[j.id]={id:j.id,data:{...j.data,history:W}}}else k[j.id]=j}),await ct(n(s),Ke,Object.values(k)),await D(),i.postMessage({type:"reloadNotes"})},ge=async()=>{const y=[];n(d)().forEach(k=>{k&&k.data&&k.data.deletedAt&&y.push(k.id)}),await Ya(n(s),Ke,y),await D(),i.postMessage({type:"emptyBin"})},be=async(y,M)=>{const k=n(f)(),j=n(d)(),K=[],W=[];for(const me of M){const ae=k.get(me);ae?.data&&(K.push({id:me,data:gt(ae.data)}),W.push({id:me,data:{...ae.data,tags:ae.data.tags.filter(Q=>Q!==y),history:[...ae.data.history||[],{id:On(),link:gt(ae.data.link),text:ae.data.text,tags:ae.data.tags,updatedAt:Date.now()}]}}))}for(const me of W){const ae=k.get(me.id);ae?.data&&(ae.data=me.data)}return await ct(n(s),Ke,W.map(me=>({id:me.id,data:me.data}))),i.postMessage({type:"reloadNotes"}),v(f,()=>k),v(d,()=>j),{cancel:async()=>{for(const me of K){const ae=k.get(me.id);ae?.data&&(ae.data=me.data)}await ct(n(s),Ke,K.map(me=>({id:me.id,data:me.data}))),i.postMessage({type:"reloadNotes"}),v(f,()=>k),v(d,()=>j)}}},ke=async(y,M,k)=>{const j=n(f)(),K=n(d)(),W=n(u)(),de=[],me=[];for(const Z of k){const ne=j.get(Z);ne?.data&&(de.push({id:Z,data:gt(ne.data)}),me.push({id:Z,data:{...ne.data,tags:ne.data.tags.map(he=>he!==y?he:M),history:[...ne.data.history||[],{id:On(),link:gt(ne.data.link),text:ne.data.text,tags:ne.data.tags,updatedAt:Date.now()}]}}))}for(const Z of me){const ne=j.get(Z.id);ne?.data&&(ne.data=Z.data)}const ae=W.has(M);return await Promise.all([(async()=>{if(!ae){const Z=W.get(y)?.pinned||!1;W.set(M,{name:M,pinned:Z}),await na(n(s),Dt,M,{pinned:Z})}})(),ct(n(s),Ke,me.map(Z=>({id:Z.id,data:Z.data})))]),i.postMessage({type:"reloadNotes"}),v(f,()=>j),v(d,()=>K),v(u,()=>W),{cancel:async()=>{for(const Z of de){const ne=j.get(Z.id);ne?.data&&(ne.data=Z.data)}await Promise.all([(async()=>{ae||(W.delete(M),await ao(n(s),Dt,M))})(),ct(n(s),Ke,de.map(Z=>({id:Z.id,data:Z.data})))]),i.postMessage({type:"reloadNotes"}),v(f,()=>j),v(d,()=>K),v(u,()=>W)}}},Se=async(y,M)=>{const k=n(f)(),j=n(d)(),K=n(u)(),W=[],de=[];for(const Q of M){const Z=k.get(Q);Z?.data&&(W.push({id:Q,data:gt(Z.data)}),de.push({id:Q,data:{...Z.data,tags:[...new Set([...Z.data.tags,y])],history:[...Z.data.history||[],{id:On(),link:gt(Z.data.link),text:Z.data.text,tags:Z.data.tags,updatedAt:Date.now()}]}}))}for(const Q of de){const Z=k.get(Q.id);Z?.data&&(Z.data=Q.data)}const me=K.has(y);return await Promise.all([(async()=>{me||(K.set(y,{name:y,pinned:!1}),await na(n(s),Dt,y,{pinned:!1}))})(),ct(n(s),Ke,de.map(Q=>({id:Q.id,data:Q.data})))]),i.postMessage({type:"reloadNotes"}),v(f,()=>k),v(d,()=>j),v(u,()=>K),{cancel:async()=>{for(const Q of W){const Z=k.get(Q.id);Z?.data&&(Z.data=Q.data)}await Promise.all([(async()=>{me||(K.delete(y),await ao(n(s),Dt,y))})(),ct(n(s),Ke,W.map(Q=>({id:Q.id,data:Q.data})))]),i.postMessage({type:"reloadNotes"}),v(f,()=>k),v(d,()=>j),v(u,()=>K)}}},H=async(y,M,k)=>{const j=n(f)(),K=n(d)(),W=n(u)(),de=[],me=[];for(const ne of k){const he=j.get(ne);he?.data&&(de.push({id:ne,data:gt(he.data)}),me.push({id:ne,data:{...he.data,tags:[...new Set([...he.data.tags.filter(Be=>!y.includes(Be)),...M])],history:[...he.data.history||[],{id:On(),link:gt(he.data.link),text:he.data.text,tags:he.data.tags,updatedAt:Date.now()}]}}))}for(const ne of me){const he=j.get(ne.id);he?.data&&(he.data=ne.data)}const ae=n(u)(),Q=M.filter(ne=>!ae.has(ne));return await Promise.all([(async()=>{if(Q.length>0)return ct(n(s),Dt,Q.map(ne=>({id:ne,data:{pinned:!1}})))})(),ct(n(s),Ke,me.map(ne=>({id:ne.id,data:ne.data})))]),i.postMessage({type:"reloadNotes"}),v(f,()=>j),v(d,()=>K),v(u,()=>W),{cancel:async()=>{for(const ne of de){const he=j.get(ne.id);he?.data&&(he.data=ne.data)}await Promise.all([(async()=>{if(Q.length>0){for(const ne of Q)W.delete(ne);return Ya(n(s),Dt,Q)}})(),ct(n(s),Ke,de.map(ne=>({id:ne.id,data:ne.data})))]),i.postMessage({type:"reloadNotes"}),v(f,()=>j),v(d,()=>K),v(u,()=>W)}}},q=async y=>{const M=JSON.parse(y.data),k=M;if(M.tabId&&M.tabId===o){k.type==="exit"&&(w(),await ka(n(s),Ke),await ka(n(s),Dt));return}if(k.type==="putNote"){const K=k.data.id;if(!K)return;const W=await Rr(n(s),Ke,K);if(!W)return;_({id:K,data:W})}else if(k.type==="deleteNote"){const j=k.data.id;if(!j)return;b(j)}else if(k.type==="pinTag"){const j=k.data.tag,K=k.data.pinned,W=n(u)();W.set(j,{name:j,pinned:K}),v(u,()=>W)}else k.type==="clearNotes"?w():k.type==="reloadNotes"||k.type==="emptyBin"?D():k.type==="exit"&&w()};_e(()=>(D(),i.addEventListener(q),()=>{i.removeEventListener(q)})),fd({isInitedNotes:g,createNote:O,updateNote:ee,deleteNote:re,saveNote:Y,revertNote:J,pinNote:$,moveNoteToBin:ue,moveNoteToArchive:V,getGetNotes:C,importNotes:te,clearNotes:X,getNoteById:x,getGetMapTags:()=>n(u),pinTag:Ie,restoreNoteFromBin:Me,moveNoteFromArchive:De,checkNotes:h,checkNotesInBin:m,checkNotesInArchive:T,emptyBin:ge,moveNotesToBin:G,moveNotesToArchive:oe,moveNotesFromArchive:we,deleteNotes:N,restoreNotesFromBin:Te,deleteTag:be,renameTag:ke,addTag:Se,changeTags:H});var se=ie(),Ce=R(se);xe(Ce,()=>e.children??je),p(t,se),ce()}const Di={};function hd(t){it(Di,t)}function _a(){const t=st(Di);if(!t)throw new Error("No FeedContext found");return t}const Ii={};var Ye=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(Ye||{});function pd(t){it(Ii,t)}function Gr(){const t=st(Ii);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function md(t,e){le(e,!0);const a=Bo(),{getSelectedTags:r}=An(),{getSelectedMetaTags:o}=Gr(),{getGetNotes:s}=zt();let i=E(r),l=E(o),c=z(0),u=[],d=z(0),f=E(()=>n(l).has(Ye.ARCHIVED)),g=E(()=>n(l).has(Ye.BIN));ze(()=>{const T=s()()||[],_=[],b=Array.from(n(i).values());for(let B=T.length-1;B>=0;B--){if(!T[B]||!T[B].data)continue;const w=T[B];if(!n(f)&&!n(g)&&(w?.data.deletedAt||w?.data.archivedAt)||n(f)&&(w?.data.deletedAt||!w?.data.archivedAt)||n(g)&&!w?.data.deletedAt)continue;const C=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(w.data.link?.title.toLowerCase().includes(C)||w.data.link?.url.toLowerCase().includes(C)||w.data.text.toLowerCase().includes(C)||w.data.tags.map(L=>L.toLowerCase()).join(" ").includes(C)))){if(n(l).has(Ye.INBOX)){if(w.data.tags.length>0)continue}else if(n(i).size&&b.some(L=>!w.data.tags.includes(L)))continue;_.push(w)}}v(c,_.length,!0),u=_,v(d,Date.now(),!0)}),hd({getFiltredNotesLength:()=>n(c),getFiltredNotes:()=>(n(d),u),getUpdatedFiltredNotesTimestamp:()=>n(d)});var h=ie(),m=R(h);xe(m,()=>e.children??je),p(t,h),ce()}function _d(t,e){le(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Wt(),s=E(a),i="selectedMetaTags";let l=E(()=>n(s).get(i)||""),c=E(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));pd({getSelectedMetaTags:()=>n(c),addMetaTag:_=>{n(c).has(_)||r(i,[...n(c),_].map(b=>encodeURIComponent(b)).join(","))},removeMetaTag:_=>{n(c).has(_)&&n(c).size===1?o(i):n(c).has(_)&&r(i,[...n(c)].filter(b=>b!==_).map(b=>encodeURIComponent(b)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:_=>{_.size===0?o(i):r(i,[..._].map(b=>encodeURIComponent(b)).join(","))}});var m=ie(),T=R(m);xe(T,()=>e.children??je),p(t,m),ce()}const Ri={},ua=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function wd(t){it(Ri,t)}function Mn(){const t=st(Ri);if(!t)throw new Error("No AnimationSettingsContext found");return t}function yd(t,e){le(e,!0);let a=bt(ua());wd(a);var r=ie(),o=R(r);xe(o,()=>e.children??je),p(t,r),ce()}const Li={};function bd(t){it(Li,t)}function Wo(){const t=st(Li);if(!t)throw new Error("No ScrollingContext found");return t}function Sd(t,e){le(e,!0);let a=z(!1);const r=()=>n(a),o=Mi(()=>{v(a,!1)},100);bd({isScrolling:r,enable:()=>{v(a,!0),o()}});var i=ie(),l=R(i);xe(l,()=>e.children??je),p(t,i),ce()}const Oi={};function Cd(t){it(Oi,t)}function Dn(){const t=st(Oi);if(!t)throw new Error("No MobileSizeContext found");return t}function Td(t,e){le(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=z(bt(a())),o=Mn();const s=Mi(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{v(r,a(),!0)})};Cd({checkMobileSize:()=>n(r)}),_e(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=ie(),u=R(c);xe(u,()=>e.children??je),p(t,c),ce()}const Fi={};function xd(t){it(Fi,t)}function $t(){const t=st(Fi);if(!t)throw new Error("No DialogContext found");return t}function kd(t,e){le(e,!0);let a=z(0),r=z(!1),o=z(!0),s=z(!1),i=z(!1);xd({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{v(a,n(a)+1)},dialogDec:()=>{v(a,n(a)-1)},blockDialog:L=>{v(r,L,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:L=>{v(o,L,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:L=>{v(s,L,!0)},setLeftEnd:L=>{v(i,L,!0)},getCountDialog:()=>n(a)});var w=ie(),C=R(w);xe(C,()=>e.children??je),p(t,w),ce()}const zi={};function Ed(t){it(zi,t)}function Zr(){const t=st(zi);if(!t)throw new Error("No ScrollContainerContext found");return t}function Pd(t,e){le(e,!0);let a=z(null);Ed({setScrollContainer:l=>{v(a,l,!0)},getScrollContainer:()=>n(a)});var s=ie(),i=R(s);xe(i,()=>e.children??je),p(t,s),ce()}const ji={};function Nd(t){it(ji,t)}function Vo(){const t=st(ji);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Ad(t,e){le(e,!0);let a=z(200);Nd({setDialogPageHeight:l=>{v(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=ie(),i=R(s);xe(i,()=>e.children??je),p(t,s),ce()}const Md=[Ja,Qa,Ke,Dt,ld];function Dd(){return new Promise((t,e)=>{const a=indexedDB.open(sd,id);mt(a,"upgradeneeded",()=>{const r=a.result;for(const o of Md)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),mt(a,Zn,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),mt(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),mt(a,Jn,()=>{e()})})}function Id(t,e){le(e,!0);let a=z(null);_e(()=>{Dd().then(l=>{v(a,l,!0)}).catch(l=>{})}),ad({getDB:()=>n(a)});var o=ie(),s=R(o);{var i=l=>{var c=ie(),u=R(c);xe(u,()=>e.children??je),p(l,c)};U(s,l=>{n(a)&&l(i)})}p(t,o),ce()}const Kt="dialogPages",Bi={};function Rd(t){it(Bi,t)}function rn(){const t=st(Bi);if(!t)throw new Error("No DialogPagesContext found");return t}function Ld(t,e){le(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Wt(),s=E(a);let i=E(()=>n(s).get(Kt)||""),l=E(()=>n(i).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const c=()=>n(l),u=w=>{if(w.length===0){o(Kt);return}r(Kt,w.map(C=>encodeURIComponent(C)).join(","))},d=w=>{r(Kt,[...n(l),w].map(C=>encodeURIComponent(C)).join(","))};Rd({setDialogPages:u,getDialogPages:c,pushDialogPage:d,popDialogPage:()=>{const w=n(l)[n(l).length-1];return n(l).length<=1?(o(Kt),w):(r(Kt,n(l).slice(0,-1).map(C=>encodeURIComponent(C)).join(",")),w)},replaceDialogPage:w=>{r(Kt,[...n(l).slice(0,-1),w].map(C=>encodeURIComponent(C)).join(","))},hasDialogPage:w=>n(l).find(C=>{const[L]=C.split("?");return L===w})!==void 0,clearDialogPages:()=>{o(Kt)},createDialogPageHref:w=>{const C=new URLSearchParams(n(s).toString());return C.set(Kt,[...c(),w].map(L=>encodeURIComponent(L)).join(",")),`${window.location.pathname}?${C.toString()}`},createHandleClickDialogPage:w=>C=>{C.preventDefault(),d(w)}});var b=ie(),B=R(b);xe(B,()=>e.children??je),p(t,b),ce()}function Od(t,e){le(e,!0);let a=z(bt(new URLSearchParams(window.location.search)));const r=f=>{const g=window.location.pathname;v(a,f,!0),window.history.replaceState(null,"",`${g}${f.size>0?`?${f.toString()}`:""}`)};Uc({getSearchParams:()=>n(a),replaceSearchParams:f=>{const g=new URLSearchParams(f);r(g)},setSearchParam:(f,g)=>{const h=new URLSearchParams(n(a));h.set(f,g),r(h)},deleteSearchParam:f=>{const g=new URLSearchParams(n(a));g.delete(f),r(g)},getHref:f=>{const g=new URLSearchParams(f);return`${window.location.pathname}${g.toString().length>0?`?${g.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var u=ie(),d=R(u);xe(d,()=>e.children??je),p(t,u),ce()}const Hi={};function Fd(t){it(Hi,t)}function zd(){const t=st(Hi);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function jd(t,e){le(e,!0);let a=bt({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";_e(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l);let c=null;const u=d=>{o()&&(c&&clearTimeout(c),c=setTimeout(()=>{o()&&d.target!==document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur?.()},120))};return document.addEventListener("touchstart",u,{passive:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l),document.removeEventListener("touchstart",u)}}),Fd({getIsKeyboardVisible:r});var s=ie(),i=R(s);xe(i,()=>e.children??je),p(t,s),ce()}function Bd(t,e){le(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};od({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=ie(),s=R(o);xe(s,()=>e.children??je),p(t,o),ce()}function Hd(t,e){Id(t,{children:(a,r)=>{Bd(a,{children:(o,s)=>{yd(o,{children:(i,l)=>{Sd(i,{children:(c,u)=>{Td(c,{children:(d,f)=>{kd(d,{children:(g,h)=>{Pd(g,{children:(m,T)=>{Ad(m,{children:(_,b)=>{jd(_,{children:(B,w)=>{Od(B,{children:(C,L)=>{Ld(C,{children:(D,A)=>{var O=ie(),ee=R(O);xe(ee,()=>e.children??je),p(D,O)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Ud(t,e){Hd(t,{children:(a,r)=>{Kc(a,{children:(o,s)=>{Wc(o,{children:(i,l)=>{Xc(i,{children:(c,u)=>{Zc(c,{children:(d,f)=>{_d(d,{children:(g,h)=>{Qc(g,{children:(m,T)=>{nd(m,{children:(_,b)=>{cd(_,{children:(B,w)=>{ud(B,{children:(C,L)=>{gd(C,{children:(D,A)=>{md(D,{children:(O,ee)=>{var Y=ie(),J=R(Y);xe(J,()=>e.children??je),p(O,Y)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const vt=t=>{const a=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(i=>i instanceof HTMLElement?i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement?!i.disabled&&i.offsetParent!==null:i.offsetParent!==null:!1),r=a.indexOf(t);if(r===-1)return{next:null,prev:null};const o=a[r+1],s=a[r-1];return{next:o,prev:s}};let Tt=z(""),Rn=z(null),Ea=z(null),_n=z(null),Ln=z(bt([])),Tr=z(null),Fn=null;function pt(t,e){v(Tt,""),Fn=null,v(Ea,null),v(_n,null),setTimeout(()=>{v(Tt,t,!0),e?.onFinish&&v(Ea,e.onFinish,!0),e?.cancel&&(v(_n,e.cancel.onCancel,!0),Fn=e.cancel.nextFocusRef)},16)}var Wd=P('<button type="button" class="c p-1i0azn2">undo</button>'),Vd=P('<div class="a p-1i0azn2"><div class="b p-1i0azn2"><span> </span> <!></div></div>'),qd=P("<div><!></div>");function qo(t,e){le(e,!0);const a=On();_e(()=>(v(Ln,[...n(Ln),a],!0),()=>{const c=n(Ln).indexOf(a);c!==-1&&v(Ln,n(Ln).filter((u,d)=>d!==c),!0)}));const r=c=>{if(c.key==="Tab"&&c.shiftKey){if(Fn&&n(Tt)){c.preventDefault();const{prev:u}=vt(Fn);u?.focus(),v(Tt,"")}}else if(c.key==="Tab"&&!c.shiftKey)Fn&&n(Tt)&&(c.preventDefault(),v(Tt,""),Fn?.focus());else if(c.key==="Escape"&&n(Tt)){if(c.preventDefault(),Fn){const{prev:u}=vt(Fn);u?.focus()}v(Tt,"")}};_e(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)})),ze(()=>{n(Tt);const c=n(_n)?2e3:800;n(Tt)&&(n(Rn)?.getBoundingClientRect(),n(Rn)?.style.setProperty("opacity","1"));const u=setTimeout(()=>{n(Rn)?.style.removeProperty("opacity")},c),d=setTimeout(()=>{v(Tt,""),n(Ea)&&n(Ea)(),v(Ea,null),v(_n,null),n(Rn)?.style.removeProperty("opacity")},c+400);return()=>{clearTimeout(u),clearTimeout(d)}});const o=c=>{c.preventDefault(),n(_n)&&(v(Ea,null),n(_n)(),v(_n,null)),v(Tt,""),n(Rn)?.style.removeProperty("opacity")};ze(()=>{n(Tt)&&n(_n)&&n(Tr)&&setTimeout(()=>{n(Tr)?.focus()},151)}),ze(()=>{n(Ln),Ft(()=>{v(Tt,""),n(Rn)?.style.removeProperty("opacity")})});var s=qd(),i=S(s);{var l=c=>{var u=Vd(),d=S(u),f=S(d),g=S(f),h=F(f,2);{var m=T=>{var _=Wd();_.__click=o,et(_,b=>v(Tr,b),()=>n(Tr)),p(T,_)};U(h,T=>{n(_n)&&T(m)})}et(d,T=>v(Rn,T),()=>n(Rn)),pe(()=>dt(g,n(Tt))),p(c,u)};U(i,c=>{n(Tt)&&n(Ln)[n(Ln).length-1]===a&&c(l)})}p(t,s),ce()}lt(["click"]);var Kd=P('<span class="a p-lxk90o"><!></span>');function ut(t,e){var a=Kd(),r=S(a);xe(r,()=>e.children),p(t,a)}var Yd=_c('<svg class="p-1yv1ibq"><use></use></svg>');function ye(t,e){let a=Pe(e,"name",8,"");var r=Yd(),o=S(r);pe(()=>Qe(o,"href",`#icon-${a()??""}`)),p(t,r)}var Xd=P('<button class="a p-18m1f7k"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Ui(t,e){le(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=mr(),{getDialogPages:s}=rn(),{checkExistedDialog:i}=$t();let l=E(()=>s().length>0||i());const c=g=>{if(g.preventDefault(),n(l))return;const h=r();h==="closed"?a():h==="opened"&&o()};var u=Xd();u.__click=c;var d=S(u);ve(d,()=>({"--size":"32px"})),ye(d.lastChild,{name:"sidebarMenu"});var f=F(d,2);ut(f,{children:(g,h)=>{var m=Ne("Menu");p(g,m)}}),p(t,u),ce()}lt(["click"]);var Gd=P('<button class="b p-9fi5nt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Zd=P('<div class="a p-9fi5nt"><input class="p-9fi5nt"/> <!></div>');function bo(t,e){le(e,!0);let a=Pe(e,"value",15,""),r=Pe(e,"ref",15,null);const o=u=>{u.key==="Escape"&&(a(""),e.onChange?.(""))};_e(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=Zd(),i=S(s);i.__input=u=>e.onChange?.(u.target?.value||""),et(i,u=>r(u),()=>r());var l=F(i,2);{var c=u=>{var d=Gd();d.__click=()=>{a(""),e.onChange?.("")};var f=S(d);ve(f,()=>({"--size":"20px"})),ye(f.lastChild,{name:"close"});var g=F(f,2);ut(g,{children:(h,m)=>{var T=Ne("Clear");p(h,T)}}),p(u,d)};U(l,u=>{a()&&u(c)})}pe(()=>Qe(i,"placeholder",e.placeholder)),an("focus",i,function(...u){e.onFocus?.apply(this,u)}),hi(i,a),p(t,s),ce()}lt(["input","click"]);function Ko(t,e){le(e,!0),_e(()=>{const a=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("click",a,{capture:!0}),()=>{document.removeEventListener("click",a,{capture:!0})}}),ce()}function Jd(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const Wi=Jd(),Qd=()=>{const t=navigator.userAgent;return/android/i.test(t)},$d=Qd(),Tg=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},xg=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},lr=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let Ta=z(bt([]));var eu=P("<dialog><div><!></div></dialog> <!>",1);function _r(t,e){le(e,!0);const a=On(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;_e(()=>(v(Ta,[...n(Ta),a],!0),()=>{const w=n(Ta).indexOf(a);w!==-1&&v(Ta,n(Ta).filter((C,L)=>L!==w),!0)}));let o=Pe(e,"onClosed",3,()=>{}),s=Pe(e,"blocked",3,!1),i=z(null),l=z(null),c=z(!1),{dialogInc:u,dialogDec:d}=$t();const f=()=>{const w=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(w),o()()},{once:!0}),v(c,!1)};ze(()=>{e.startClose&&f()}),_e(()=>{n(i)?.showModal(),n(i)?.getClientRects(),v(c,!0);const w=C=>{C?.preventDefault(),s()||f()};return n(i)?.addEventListener("cancel",w),n(i)?.addEventListener("close",w),()=>{n(i)?.removeEventListener("cancel",w),n(i)?.removeEventListener("close",w)}}),_e(()=>(u(),()=>{d()})),_e(()=>{const w=C=>{C.key==="Escape"&&s()&&C.preventDefault()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}});function g(){setTimeout(()=>{if(Wi||!n(i)||!n(l))return;const w=window.visualViewport;if(w)if(w.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}_e(()=>(g(),window.visualViewport?.addEventListener("resize",g),window.visualViewport?.addEventListener("scroll",g),document.addEventListener("focusin",g),document.addEventListener("focusout",g),()=>{window.visualViewport?.removeEventListener("resize",g),window.visualViewport?.removeEventListener("scroll",g),document.addEventListener("focusin",g),document.addEventListener("focusout",g)}));var h=eu(),m=R(h),T=S(m),_=S(T);xe(_,()=>e.children),et(T,w=>v(l,w),()=>n(l)),et(m,w=>v(i,w),()=>n(i));var b=F(m,2);{var B=w=>{Ko(w,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:f})};U(b,w=>{n(i)&&n(l)&&!s()&&w(B)})}pe(()=>{$e(m,1,rt({a:!0,b:n(c),c:n(Ta).length>1}),"p-1x14yml"),$e(T,1,rt({d:!0,b:n(c)}),"p-1x14yml")}),p(t,h),ce()}var tu=P("<div><!></div>");function nu(t,e){le(e,!0);let a=z(!1),r=z(null);const o=()=>{const d=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),v(a,!1)},s=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},i=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},l=d=>{d.key==="Escape"&&o()};_e(()=>{n(r)?.getClientRects(),v(a,!0);const d=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),ze(()=>{e.startClose&&o()});var c=tu(),u=S(c);xe(u,()=>e.children),et(c,d=>v(r,d),()=>n(r)),pe(()=>$e(c,1,rt({a:!0,b:n(a)}),"p-1unpq18")),p(t,c),ce()}var au=P("<ul><!></ul>"),ru=P("<ul><!></ul>");function Jr(t,e){le(e,!0);let a=Pe(e,"ref",15);const{checkMobileSize:r}=Dn();let o=r();var s=ie(),i=R(s);{var l=u=>{_r(u,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(d,f)=>{var g=au(),h=S(g);xe(h,()=>e.children),et(g,m=>a(m),()=>a()),pe(()=>$e(g,1,rt({a:!0,b:o}),"p-1sp2xya")),p(d,g)},$$slots:{default:!0}})},c=u=>{nu(u,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(d,f)=>{var g=ru(),h=S(g);xe(h,()=>e.children),et(g,m=>a(m),()=>a()),pe(()=>$e(g,1,rt({a:!0,b:o}),"p-1sp2xya")),p(d,g)},$$slots:{default:!0}})};U(i,u=>{o?u(l):u(c,!1)})}p(t,s),ce()}var ou=P("<button><!></button>"),su=P("<a><!></a>");function at(t,e){let a=Pe(e,"dangerous",3,!1),r=Pe(e,"type",3,"button"),o=Pe(e,"href",3,"");var s=ie(),i=R(s);{var l=u=>{var d=ou();d.__click=function(...g){e.onClick?.apply(this,g)},d.__keydown=function(...g){e.onKeydown?.apply(this,g)};var f=S(d);xe(f,()=>e.children??je),pe(()=>$e(d,1,rt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")),p(u,d)},c=u=>{var d=su();d.__click=function(...g){e.onClick?.apply(this,g)},d.__keydown=function(...g){e.onKeydown?.apply(this,g)};var f=S(d);xe(f,()=>e.children??je),pe(()=>{Qe(d,"href",o()),$e(d,1,rt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")}),p(u,d)};U(i,u=>{r()==="button"?u(l):u(c,!1)})}p(t,s)}lt(["click","keydown"]);var iu=P('<li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li>',1),lu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),cu=P('<div class="a p-cjxu92"><button><!> <!></button> <!></div>');function du(t,e){le(e,!0);let a=z(!1),r=z(!1);const{checkMobileSize:o}=Dn(),{getFeedOrder:s,setFeedOrder:i}=yi();let l=E(o),c=E(s);const u=()=>{n(a)||v(a,!0)},d=B=>{v(r,!0),i(B)},f=()=>{v(a,!1),v(r,!1)};_e(()=>{const B=w=>{w.key==="Escape"&&v(r,!0)};return document.addEventListener("keydown",B),()=>document.removeEventListener("keydown",B)});var g=cu(),h=S(g);h.__click=u,$e(h,1,rt({b:!0,c:!0}),"p-cjxu92");var m=S(h);ye(m,{name:"filter"});var T=F(m,2);ut(T,{children:(B,w)=>{var C=Ne("show feed order menu");p(B,C)}});var _=F(h,2);{var b=B=>{var w=lu(),C=R(w);ve(C,()=>({"--right":"0px","--top":"44px"})),Jr(C.lastChild,{get startClose(){return n(r)},onClosed:f,children:(L,D)=>{var A=iu(),O=R(A),ee=S(O);{let ue=E(()=>n(c)==="newest");at(ee,{get active(){return n(ue)},get dialogMode(){return n(l)},onClick:()=>d("newest"),children:(V,G)=>{var oe=Ne("Newest");p(V,oe)},$$slots:{default:!0}})}var Y=F(O,2),J=S(Y);{let ue=E(()=>n(c)==="oldest");at(J,{get active(){return n(ue)},get dialogMode(){return n(l)},onClick:()=>d("oldest"),children:(V,G)=>{var oe=Ne("Oldest");p(V,oe)},$$slots:{default:!0}})}var re=F(Y,2),X=S(re);{let ue=E(()=>n(c)==="AtoZ");at(X,{get active(){return n(ue)},get dialogMode(){return n(l)},onClick:()=>d("AtoZ"),children:(V,G)=>{var oe=Ne("A to Z");p(V,oe)},$$slots:{default:!0}})}var x=F(re,2),$=S(x);{let ue=E(()=>n(c)==="ZtoA");at($,{get active(){return n(ue)},get dialogMode(){return n(l)},onClick:()=>d("ZtoA"),children:(V,G)=>{var oe=Ne("Z to A");p(V,oe)},$$slots:{default:!0}})}p(L,A)},$$slots:{default:!0}}),p(B,w)};U(_,B=>{n(a)&&B(b)})}p(t,g),ce()}lt(["click"]);var fe=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t))(fe||{});const vs={settings:"Settings",importData:"Import data",exportData:"Export data",account:"Account",sync:"Sync",accountSetup:"",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success"};var uu=P('<div><!> <div class="a p-t68rxw"></div></div>');function qa(t,e){le(e,!0);let a=z(!1);_e(()=>{const s=setTimeout(()=>{v(a,!0)},200);return()=>{clearTimeout(s)}});var r=uu(),o=S(r);xe(o,()=>e.children??je),pe(()=>$e(r,1,rt({b:!0,c:n(a)}),"p-t68rxw")),p(t,r),ce()}var fu=P("<a><!></a>"),vu=P("<button><!></button>");function kt(t,e){let a=Pe(e,"type",3,"standard"),r=Pe(e,"typeButton",3,"button"),o=Pe(e,"element",3,"button"),s=Pe(e,"href",3,""),i=Pe(e,"fullWidth",3,!1),l=Pe(e,"withoutMinWidth",3,!1);var c=ie(),u=R(c);{var d=g=>{var h=fu();h.__click=function(...T){e.onClick?.apply(this,T)};var m=S(h);xe(m,()=>e.children??je),pe(()=>{Qe(h,"target",e.target),Qe(h,"rel",e.rel),Qe(h,"href",s()),$e(h,1,rt({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),p(g,h)},f=g=>{var h=vu();h.__click=function(...T){e.onClick?.apply(this,T)};var m=S(h);xe(m,()=>e.children??je),pe(()=>{Qe(h,"type",r()),$e(h,1,rt({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),p(g,h)};U(u,g=>{o()==="a"?g(d):g(f,!1)})}p(t,c)}lt(["click"]);let So=z(!1),xr=z(!1),Co=z(""),To=z("Cancel"),xo=z("Confirm"),ko,Ar=z(void 0),Eo,Po=z("dangerous");function Na(t){v(So,!0),v(Co,t.title,!0),t.buttonCancelTitle&&v(To,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&v(xo,t.buttonConfirmTitle,!0),ko=t.onConfirm,v(Ar,t.onCancel,!0),Eo=t.onClosed,t.type?v(Po,t.type,!0):v(Po,"dangerous")}var gu=P('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),hu=P('<div class="a p-1jlul5o"><!></div>');function pu(t,e){le(e,!0);let a=z(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{v(a,!0)},250)};_e(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(Ar)?.(),v(xr,!0)},l=async()=>{s(),await ko?.(),v(xr,!0),o=!0},c=()=>{clearTimeout(r),v(a,!1),v(So,!1),v(xr,!1),v(Co,""),v(To,"Cancel"),v(xo,"Confirm"),v(Ar,void 0),ko=void 0,Eo&&Eo(o),o=!1};var u=ie(),d=R(u);{var f=g=>{_r(g,{get blocked(){return n(a)},get startClose(){return n(xr)},onClosed:c,children:(h,m)=>{var T=hu(),_=S(T);{var b=w=>{qa(w,{})},B=w=>{var C=gu(),L=R(C),D=S(L),A=F(L,2),O=S(A);{var ee=J=>{kt(J,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(re,X)=>{var x=Ne();pe(()=>dt(x,n(To))),p(re,x)},$$slots:{default:!0}})};U(O,J=>{n(Ar)&&J(ee)})}var Y=F(O,2);kt(Y,{onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(Po)},children:(J,re)=>{var X=Ne();pe(()=>dt(X,n(xo))),p(J,X)},$$slots:{default:!0}}),pe(()=>dt(D,n(Co))),p(w,C)};U(_,w=>{n(a)?w(b):w(B,!1)})}p(h,T)},$$slots:{default:!0}})};U(d,g=>{n(So)&&g(f)})}p(t,u),ce()}const cr=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,c=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var mu=P('<div class="a p-rp2pt7"><a class="b p-rp2pt7"><span class="c p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function _u(t,e){le(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=rn(),{checkExistedDialog:i}=$t(),l=()=>{o.length===0&&!i()&&s(fe.NewNote)};_e(()=>cr({key:"n",action:l})),jo();var c=mu(),u=S(c),d=E(()=>r(fe.NewNote));u.__click=function(..._){n(d)?.apply(this,_)};var f=S(u),g=S(f);ve(g,()=>({"--size":"32px","--color":"#b0b0b0"})),ye(g.lastChild,{name:"add"});var h=F(g,2);ut(h,{children:(_,b)=>{var B=Ne("Add note");p(_,B)}});var m=F(f,2),T=S(m);ve(T,()=>({"--size":"16px","--color":"#b0b0b0"})),ye(T.lastChild,{name:"plus"}),pe(_=>Qe(u,"href",_),[()=>a(fe.NewNote)]),p(t,c),ce()}lt(["click"]);var wu=P("<button><!></button>");function $a(t,e){le(e,!0);let a=Pe(e,"type",3,"button"),r=!1,o=z(null);ze(()=>{e.onRef&&e.onRef(n(o))});const s=d=>{(d.key==="Enter"||d.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=d=>{(d.pointerType==="mouse"&&d.button===0||d.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(d)};var c=wu();c.__keydown=s,c.__click=i,c.__pointerdown=l,c.__touchstart=function(...d){e.onTouchStart?.apply(this,d)};var u=S(c);xe(u,()=>e.children??je),et(c,d=>v(o,d),()=>n(o)),pe(()=>{Qe(c,"type",a()),$e(c,1,rt({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-pgzded")}),p(t,c),ce()}lt(["keydown","click","pointerdown","touchstart"]);var yu=P('<div class="b p-1pt17hy"> </div>'),bu=P('<div class="a p-1pt17hy"><input/> <!></div>');function Yo(t,e){le(e,!0);let a=Pe(e,"value",15,""),r=Pe(e,"error",3,""),o=Pe(e,"ref",15,null);var s=bu(),i=S(s);i.__input=function(...d){e.onInput?.apply(this,d)};let l;et(i,d=>o(d),()=>o());var c=F(i,2);{var u=d=>{var f=yu(),g=S(f);pe(()=>dt(g,r())),p(d,f)};U(c,d=>{r()&&d(u)})}pe(()=>{Qe(i,"placeholder",e.placeholder),l=$e(i,1,"p-1pt17hy",null,l,{error:!!r()})}),an("blur",i,function(...d){e.onBlur?.apply(this,d)}),an("focus",i,function(...d){e.onFocus?.apply(this,d)}),hi(i,a),p(t,s),ce()}lt(["input"]);var Su=P('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Cu=P('<form class="a p-y9ylet"><!></form>');function Tu(t,e){le(e,!0);const{renameTag:a}=zt(),{getSelectedTags:r,setSelectedTags:o}=An(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=ma(),{getFiltredNotes:c}=_a();let u=z(!1),d=z(!1),f,g=!1,h=z(null),m=z(bt(e.tag)),T=e.nextFocusRef;_e(()=>(n(h)&&n(h).focus(),()=>{f&&clearTimeout(f)}));const _=()=>{f=setTimeout(()=>{v(d,!0)},250)},b=()=>{v(u,!0)},B=async()=>{if(n(m).trim()===e.tag){b();return}if(n(m).trim()!=="")try{_();const L=r(),D=[...L].map(J=>J===e.tag?n(m).trim():J),A=new Set(s()),O=c(),ee=A.size?[...A]:O.map(J=>J.id),{cancel:Y}=await a(e.tag,n(m).trim(),ee);l(),o(new Set(D)),pt("Tag renamed",{cancel:{nextFocusRef:T,onCancel:async()=>{await Y(),o(L),i(A),setTimeout(()=>{const{prev:J}=vt(T);J?.focus()},16)}}}),g=!0}finally{v(u,!0)}},w=()=>{e.onClosed?.(g)},C=L=>{L.preventDefault(),B()};_r(t,{get blocked(){return n(d)},get startClose(){return n(u)},onClosed:w,children:(L,D)=>{var A=Cu(),O=S(A);{var ee=J=>{qa(J,{})},Y=J=>{var re=Su(),X=R(re),x=S(X),$=F(X,2);Yo($,{placeholder:"Enter new tag name",get ref(){return n(h)},set ref(oe){v(h,oe,!0)},get value(){return n(m)},set value(oe){v(m,oe,!0)}});var ue=F($,2),V=S(ue);kt(V,{onClick:b,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(oe,we)=>{var Te=Ne("Cancel");p(oe,Te)},$$slots:{default:!0}});var G=F(V,2);kt(G,{onClick:B,fullWidth:!0,withoutMinWidth:!0,children:(oe,we)=>{var Te=Ne("OK");p(oe,Te)},$$slots:{default:!0}}),pe(()=>dt(x,`Rename "${e.tag??""}" for selected notes`)),p(J,re)};U(O,J=>{n(d)?J(ee):J(Y,!1)})}an("submit",A,C),p(L,A)},$$slots:{default:!0}}),ce()}let Un=z(!1),$n=z(!1),Bt=z(""),ea=z(0),er=z(0),tr=z(0),Mr,Lr=()=>({bottom:0,right:0,height:0}),Vt=z(null),No=z(null);function xu(t){if(n(Un)){v($n,!0),n(Bt)!==t.tag&&(Mr=()=>{const a=t.getRect();v(Un,!0),v(Bt,t.tag,!0),v(ea,a.bottom,!0),v(er,a.right,!0),v(tr,a.height,!0),Lr=t.getRect,v(Vt,t.focusRef,!0)});return}const e=t.getRect();v(Un,!0),v(Bt,t.tag,!0),v(ea,e.bottom,!0),v(er,e.right,!0),v(tr,e.height,!0),Lr=t.getRect,v(Vt,t.focusRef,!0)}const ku=()=>n(Un),Eu=()=>n(No);var Pu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),Nu=P('<li class="p-16hbyw2"><!></li>'),Au=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Mu=P('<li class="p-16hbyw2"><!></li>'),Du=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),Iu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),Ru=P('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),Lu=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ou=P("<!> <!>",1);function Fu(t,e){le(e,!0);const{getScrollContainer:a}=Zr(),{pinTag:r,getGetMapTags:o,deleteTag:s}=zt(),{checkMobileSize:i}=Dn(),{getSelectedTags:l,removeTag:c,setSelectedTags:u}=An(),{getSelectedNotes:d,setSelectedNotes:f,clearNotes:g}=ma(),{getFiltredNotes:h}=_a();let m=z(!1);ze(()=>{n(Un),Ft(()=>{v(m,o()().get(n(Bt))?.pinned||!1,!0)})});let T=z(!1);const _=()=>{r(n(Bt),!0),v($n,!0);let V=n(Vt),G=vt(V)?.next;pt("Tag pinned",{cancel:{nextFocusRef:G,onCancel:async()=>{r(n(Bt),!1),setTimeout(()=>{const{prev:oe}=vt(G);oe?.focus()},16)}}})},b=()=>{r(n(Bt),!1),v($n,!0);let V=n(Vt),G=vt(V)?.next;pt("Tag unpinned",{cancel:{nextFocusRef:G,onCancel:async()=>{r(n(Bt),!0),setTimeout(()=>{const{prev:oe}=vt(G);oe?.focus()},16)}}})},B=()=>{v(Un,!1),v($n,!1),v(ea,0),v(er,0),v(tr,0),Lr=()=>({bottom:0,right:0,height:0}),v(Vt,null),Mr&&setTimeout(()=>{Mr?.(),Mr=void 0})};let w=E(()=>window.innerHeight-n(ea)<100?n(ea)-n(tr)-98+"px":n(ea)+5+"px"),C=E(a);const L=V=>{V.key==="Tab"&&V.shiftKey&&(V.preventDefault(),n(Vt)?.focus())},D=V=>{V.key==="Tab"&&!V.shiftKey&&n(Vt)&&(V.preventDefault(),vt(n(Vt))?.next?.focus())};_e(()=>{const V=G=>{G.key==="Escape"&&n(Un)&&n(Vt)?.focus()};return window.addEventListener("keydown",V),()=>{window.removeEventListener("keydown",V)}});const A=()=>{v($n,!0);let V=n(Vt),G=vt(V)?.next;Na({title:`Are you sure to delete "${n(Bt)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const oe=Array.from(n(Y)),we=new Set(d()),Te=h(),Me=we.size?[...we]:Te.map(Ie=>Ie.id);n(Y).has(n(Bt))&&(we.size===0||Te.length===we.size)&&c(n(Bt)),g();const{cancel:De}=await s(n(Bt),Me);pt("Tag deleted",{cancel:{nextFocusRef:G,onCancel:async()=>{await De(),u(new Set(oe)),f(new Set(we)),setTimeout(()=>{const{prev:Ie}=vt(G);Ie?.focus()},16)}}})},onCancel:async()=>{},onClosed:oe=>{setTimeout(()=>{oe||V?.focus()},16)}})};let O=()=>{};const ee=()=>{v($n,!0),v(T,!0);let V=n(Vt);O=()=>{v(T,!1),setTimeout(()=>{V?.focus()},16)}};ze(()=>{const V=()=>{const G=Lr();v(ea,G.bottom,!0),v(er,G.right,!0),v(tr,G.height,!0)};return n(C)?.addEventListener("scroll",V),window.addEventListener("resize",V),()=>{n(C)?.removeEventListener("scroll",V),window.removeEventListener("resize",V)}});let Y=E(l),J=E(i);var re=Ou(),X=R(re);{var x=V=>{var G=Lu(),oe=R(G);ve(oe,()=>({"--left":n(er)-36+"px","--top":n(w),"--transform-origin":"top left"})),Jr(oe.lastChild,{get startClose(){return n($n)},onClosed:B,get ref(){return n(No)},set ref(we){v(No,we,!0)},children:(we,Te)=>{var Me=Ru(),De=R(Me);{var Ie=Se=>{var H=Nu(),q=S(H);at(q,{onClick:_,onKeydown:L,get dialogMode(){return n(J)},children:(se,Ce)=>{var y=Pu(),M=R(y);ve(M,()=>({"--size":"20px"})),ye(M.lastChild,{name:"pin"}),p(se,y)},$$slots:{default:!0}}),p(Se,H)},N=Se=>{var H=Mu(),q=S(H);at(q,{onClick:b,onKeydown:L,get dialogMode(){return n(J)},children:(se,Ce)=>{var y=Au(),M=R(y);ve(M,()=>({"--size":"20px"})),ye(M.lastChild,{name:"pin-cancel"}),p(se,y)},$$slots:{default:!0}}),p(Se,H)};U(De,Se=>{n(m)?Se(N,!1):Se(Ie)})}var te=F(De,2),ge=S(te);at(ge,{onClick:ee,get dialogMode(){return n(J)},children:(Se,H)=>{var q=Du(),se=R(q);ve(se,()=>({"--size":"20px"})),ye(se.lastChild,{name:"pen"}),p(Se,q)},$$slots:{default:!0}});var be=F(te,2),ke=S(be);at(ke,{onClick:A,onKeydown:D,dangerous:!0,get dialogMode(){return n(J)},children:(Se,H)=>{var q=Iu(),se=R(q);ve(se,()=>({"--size":"20px"})),ye(se.lastChild,{name:"bin"}),p(Se,q)},$$slots:{default:!0}}),p(we,Me)},$$slots:{default:!0}}),p(V,G)};U(X,V=>{n(Un)&&V(x)})}var $=F(X,2);{var ue=V=>{{let G=E(()=>vt(n(Vt))?.next||null);Tu(V,{get tag(){return n(Bt)},get nextFocusRef(){return n(G)},onClosed:oe=>{O(oe)}})}};U($,V=>{n(T)&&V(ue)})}p(t,re),ce()}var zu=P('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),ju=P('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),Bu=P("<!> <span> </span> <!>",1),Hu=P('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function nr(t,e){le(e,!0);let{getGetMapTags:a}=zt(),r=z(null),o=E(ku);const s=()=>{if(n(r)){const f=n(r).getBoundingClientRect();return{bottom:f.bottom,right:f.right,height:f.height}}return{bottom:0,right:0,height:0}},i=f=>{f.stopPropagation(),f.preventDefault(),xu({tag:e.tag,getRect:s,focusRef:n(r)})},l=f=>{f.key==="Tab"&&!f.shiftKey&&n(o)&&(f.preventDefault(),Eu()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let c=E(()=>a()().get(e.tag)?.pinned||!1);var u=Hu(),d=S(u);ve(d,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),$a(d.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(f,g)=>{var h=Bu(),m=R(h);{var T=C=>{var L=zu(),D=S(L);ve(D,()=>({"--size":"18px"})),ye(D.lastChild,{name:"pin"}),p(C,L)};U(m,C=>{n(c)&&C(T)})}var _=F(m,2),b=S(_),B=F(_,2);{var w=C=>{var L=ju();L.__click=i,L.__keydown=l;var D=S(L),A=S(D);ve(A,()=>({"--size":"16px"})),ye(A.lastChild,{name:"menu"});var O=F(A,2);ut(O,{children:(ee,Y)=>{var J=Ne("Tag options");p(ee,J)}}),et(L,ee=>v(r,ee),()=>n(r)),pe(()=>$e(L,1,rt({c:!0,d:e.type==="selected"}),"p-9jjlcl")),p(C,L)};U(B,C=>{e.hideMenu||C(w)})}pe(()=>dt(b,e.tag)),p(f,h)},$$slots:{default:!0}}),p(t,u),ce()}lt(["click","keydown"]);var Uu=P('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function gs(t,e){le(e,!0);let a=Pe(e,"mobile",3,!1);const{getGetMapTags:r}=zt();let s=E(()=>{const h=r()();return[...e.tags].sort((m,T)=>h.get(m)?.pinned?-1:h.get(T)?.pinned?1:m.localeCompare(T))}),i=E(()=>n(s).filter(h=>r()().get(h)?.pinned)),l=E(()=>n(s).filter(h=>!r()().get(h)?.pinned));var c=Uu(),u=S(c),d=S(u);kn(d,16,()=>n(i),h=>h,(h,m)=>{nr(h,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})});var f=F(d,2);kn(f,17,()=>e.metaTags,h=>"meta"+h,(h,m)=>{nr(h,{hideMenu:!0,get tag(){return n(m)},onClick:()=>{e.handleMetaTagClick(n(m))}})});var g=F(f,2);kn(g,16,()=>n(l),h=>h,(h,m)=>{nr(h,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})}),pe(()=>$e(u,1,rt({b:!0,c:a()}),"p-lawyrs")),p(t,c),ce()}var Wu=P('<div class="b c p-1i0uzbi"><div class="d p-1i0uzbi"><button class="e p-1i0uzbi"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),Vu=P('<div class="a p-1i0uzbi"><!></div>');function hs(t,e){le(e,!0);let a=z(null);const r=c=>{v(a,c,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};ze(()=>{n(a)&&n(a).focus()});var s=Vu(),i=S(s);{var l=c=>{var u=Wu(),d=S(u),f=S(d);f.__click=o;var g=S(f);ve(g,()=>({"--size":"20px"})),ye(g.lastChild,{name:"close"});var h=F(g,2);ut(h,{children:(_,b)=>{var B=Ne("Clear");p(_,B)}});var m=F(d,2);kn(m,19,()=>e.metaTags,_=>"meta_"+_,(_,b,B)=>{{let w=E(()=>n(B)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);nr(_,{hideMenu:!0,type:"selected",get tag(){return n(b)},onClick:()=>{e.handleMetaTagClick(n(b))},get onRef(){return n(w)}})}});var T=F(m,2);kn(T,18,()=>e.selectedTags,_=>_,(_,b,B)=>{{let w=E(()=>n(B)===e.selectedTags.size-1?r:void 0);nr(_,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return b},onClick:()=>{e.handleSelectedTagClick(b)},get onRef(){return n(w)}})}}),p(c,u)};U(i,c=>{e.selectedTags.size+e.metaTags.size>0&&c(l)})}p(t,s),ce()}lt(["click"]);const Ao=(t,e,a,r)=>{if(t.has(Ye.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},En=200,qu=t=>t<.5?2*t*t:-1+(4-2*t)*t,Vi=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,qu(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},Ku=t=>{const{getIsKeyboardVisible:a}=zd();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=f=>({x:f.clientX,y:f.clientY,time:performance.now()}),c=f=>{r=[l(f.touches[0])],o=!0},u=f=>{if(!o||s)return;r.push(l(f.touches[0]));const g=performance.now()-150;r=r.filter(A=>A.time>=g);const h=r.at(-1),m=r[0];if(!h||!m)return;const T=m.x,_=m.y,b=h.x,B=h.y,w=b-T,C=B-_,L=Math.abs(w)>Math.abs(C),D=Math.abs(w)>3;L&&D&&!a()&&(s=!0,f.preventDefault(),t([...r]),i())},d=()=>{i()};_e(()=>(document.addEventListener("touchstart",c,{passive:!0}),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",d,{passive:!0}),document.addEventListener("touchcancel",d,{passive:!0}),()=>{document.removeEventListener("touchstart",c),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",d),document.removeEventListener("touchcancel",d)}))},ps=5,ms=.6,Xn=.3;function qi(t,e){le(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,c=0,u=0,d=null,f=null;const g=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,c=0,u=0,d!==null&&(cancelAnimationFrame(d),d=null),f&&(clearTimeout(f),f=null)},h=()=>{e.onCancel(),g()},m=()=>{f&&clearTimeout(f),f=setTimeout(h,5e3)};Ku(async D=>{if(!o)try{const A=D.at(-1);if(!A)throw new Error("No points available for swipe initialization");const O=await e.onInit();if(!O)return;s=O.initialPosition,i=O.currentPosition,l=O.minPosition,c=O.maxPosition,u=O.width,r=A.x,a=D,o=!0,m()}catch{g()}});const _=D=>Math.max(l,Math.min(c,D)),b=()=>{if(d=null,!o){g();return}const D=a.at(-1),A=a[0];if(!D||!A)return;let O=D.x-r;r=D.x;const ee=_(i+O);ee!==i&&(i=ee,e.onUpdate({initialPosition:s,newPosition:ee,width:u,minPosition:l,maxPosition:c}))},B=D=>{if(!o){g();return}a.push({x:D.touches[0].clientX,y:D.touches[0].clientY,time:performance.now()});const A=performance.now()-150;a=a.filter(J=>J.time>=A),d===null&&(d=requestAnimationFrame(b)),m();const O=D.touches[0].clientX-a[0].x,ee=D.touches[0].clientY-a[0].y;Math.abs(O)>Math.abs(ee)&&D.cancelable&&D.preventDefault()},w=D=>{const A=Math.abs(D);if(A>=ms)return ps;if(A>=Xn){const O=(A-Xn)/(ms-Xn);return e.baseActionThreshold-O*(e.baseActionThreshold-ps)}else return e.baseActionThreshold},C=D=>{if(!o){g();return}let A=0;a.push({x:D.changedTouches[0].clientX,y:D.changedTouches[0].clientY,time:performance.now()}),b(),d!==null&&(cancelAnimationFrame(d),d=null);const O=a[0],ee=a[a.length-1],Y=ee.x-O.x,J=ee.time-O.time;J>0&&(A=Y/J);const re=w(A);e.onFinish({swipeVelocity:A,currentPosition:i,minPosition:l,maxPosition:c,initialPosition:s,width:u,actionThreshold:re}),g()},L=()=>{h()};_e(()=>(document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("touchend",C,{passive:!0}),document.addEventListener("touchcancel",L,{passive:!0}),()=>{document.removeEventListener("touchmove",B),document.removeEventListener("touchend",C),document.removeEventListener("touchcancel",L),d!==null&&cancelAnimationFrame(d),f&&clearTimeout(f)})),ce()}function Yu(t,e){le(e,!0);const a=Mn();let r=Pe(e,"animationRef",7),o=Pe(e,"dialog",7);qi(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const u=-e.dialogWidth*.7,d=0;let f=e.sidebarState==="closed"?u:d,g=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let T=()=>1;if(r().current){r().current.pause();let _=Number(r().current.currentTime);lr()&&(_=Number(_)+50,r().current.currentTime=Math.min(Math.max(En-1,_),_));const b=r().current.effect?.getComputedTiming().progress||0;T=()=>b,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(_=>requestAnimationFrame(_)),g=Math.abs(1-T())}g=e.sidebarState==="closed"?g:1-g,o().style.setProperty("--backdrop-bg",`${g*.1}`),o()&&!o().open&&(o().showModal(),lr()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=g*-25;const h=g*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let m=e.sidebarState==="closed"?u:d;return e.sidebarState==="opened"||e.sidebarState==="closed"||(m=h),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:f,currentPosition:m,minPosition:u,maxPosition:d,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:u,width:d})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const f=1-Math.abs(u/d)/7*10;o().style.transform=`translate3d(${u}px, 0, 0)`,a.swipingRatio=f*-25,o().style.setProperty("--backdrop-bg",`${f*.1}`)},onFinish:({swipeVelocity:u,currentPosition:d,initialPosition:f,width:g,actionThreshold:h})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let m="close";const T=Math.abs(d-f)/g*100/7*10;if(T===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(T===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?m=Math.abs(T)>h||u>Xn?"open":"close":e.sidebarState==="swipingClose"&&(m=Math.abs(T)>h&&u<=Xn||u<-Xn?"close":"open");let _=Vi(Math.abs(T)/100);e.sidebarState==="swipingClose"&&m==="close"&&(_=1-_);const b=(m==="open"?1-_:_)*En;a.duration=b/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${m==="open"?.1:0}`),m==="open"?e.onOpen():m==="close"&&e.onClose()}}),ce()}var Xu=P("<dialog><div><!> <!></div></dialog> <!> <!>",1);function Gu(t,e){le(e,!0);const{getSidebarState:a,setSidebarState:r}=mr();let o=z(0);_e(()=>{const x=()=>{v(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",x),x(),()=>{window.removeEventListener("resize",x)}});const s=Mn(),{isScrolling:i}=Wo();let l=z(null),c=z(null),u={},d=E(a);const f=()=>{e.blocked||r("closing")},g=x=>{r(x==="open"?"swipingOpen":"swipingClose")},h=()=>{r("opened")},m=()=>{r("preOpening")},T=()=>{n(l)?.close(),r("closed")},_=x=>{x.preventDefault(),f()};_e(()=>(n(l)?.addEventListener("close",T),n(l)?.addEventListener("cancel",_),()=>{n(l)?.removeEventListener("close",T),n(l)?.removeEventListener("cancel",_)}));const b=E(i);let B=E(()=>s.working);const w=x=>{x?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ua().duration};ze(()=>{n(d)==="opening"?Ft(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const x=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const $=n(l)?.animate([{transform:x},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||En,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});u.current=$,$&&($.onfinish=()=>{h(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ua().duration,$.cancel(),u.current=void 0})})}):n(d)==="closing"&&Ft(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const x=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const $=n(l)?.animate([{transform:x},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||En,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});u.current=$,$&&($.onfinish=()=>{T(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ua().duration,$.cancel(),u.current=void 0})})})}),ze(()=>{n(d)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),lr()&&n(l)?.getBoundingClientRect()),r("opening"))}),_e(()=>{n(d)==="opened"&&r("preOpening")});var C=Xu(),L=R(C),D=S(L),A=S(D);xe(A,()=>e.children);var O=F(A,2);{var ee=x=>{qo(x,{})};U(O,x=>{n(d)==="opened"&&x(ee)})}et(D,x=>v(c,x),()=>n(c)),et(L,x=>v(l,x),()=>n(l));var Y=F(L,2);{var J=x=>{Ko(x,{get dialog(){return n(l)},get dialogInner(){return n(c)},onClose:f})};U(Y,x=>{n(c)&&n(d)==="opened"&&!e.blocked&&x(J)})}var re=F(Y,2);{var X=x=>{Yu(x,{onCancelSwipe:w,onOpen:m,onClose:f,onSwipe:g,get dialogWidth(){return n(o)},get animationRef(){return u},get dialog(){return n(l)},get sidebarState(){return n(d)}})};U(re,x=>{!n(b)&&!e.blocked&&x(X)})}pe(()=>{$e(L,1,rt({a:!0,b:n(B),c:n(d)==="opened"||n(d)==="opening"||n(d)==="closing"||n(d)==="swipingClose",d:n(d)==="opened"||n(d)==="opening"||n(d)==="swipingOpen"}),"p-1gucilc"),$e(D,1,rt({e:!0,f:n(d)==="swipingOpen",g:n(d)!=="opened"}),"p-1gucilc")}),p(t,C),ce()}var Zu=P('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),Ju=P('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function Qu(t,e){le(e,!0);const{checkMobileSize:a}=Dn(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=mr(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:c}=rn(),{getTagsSearch:u,setTagsSearch:d}=qc(),{getSelectedTags:f,addTag:g,removeTag:h,clearTags:m}=An(),{getSelectedMetaTags:T,addMetaTag:_,removeMetaTag:b,clearSelectedMetaTags:B}=Gr();let w=E(f),C=E(T);const{getGetNotes:L,checkNotesInArchive:D,checkNotesInBin:A}=zt(),O=E(L),ee=N=>{g(N)},Y=N=>{_(N)},J=N=>{h(N)},re=N=>{b(N)};let X=E(()=>n(w).size===0&&!n(C).has(Ye.INBOX)&&(n(O)()||[]).some(N=>(!n(C).has(Ye.ARCHIVED)&&!n(C).has(Ye.BIN)&&N?.data&&!N.data.deletedAt&&!N.data.archivedAt||n(C).has(Ye.ARCHIVED)&&N?.data&&!N.data.deletedAt&&N.data.archivedAt||n(C).has(Ye.BIN)&&N?.data&&N.data.deletedAt)&&N?.data?.tags.length===0)),x=E(()=>Ao(n(C),n(w),n(O)()||[],N=>!(N?.data&&(N.data.deletedAt||N.data.archivedAt)&&!n(C).has(Ye.ARCHIVED)&&!n(C).has(Ye.BIN)||N?.data&&(N.data.deletedAt||!N.data.archivedAt)&&n(C).has(Ye.ARCHIVED)||N?.data&&!N.data.deletedAt&&n(C).has(Ye.BIN)))),$=E(()=>n(x).filter(N=>u()===""||N.toLowerCase().indexOf(u().toLowerCase())!==-1)),ue=E(a);const{checkExistedDialog:V}=$t();let G=E(()=>i().length>0||V());const oe=()=>{if(n(ue)){if(n(G))return;o()==="opened"?r():o()==="closed"&&s()}};_e(()=>cr({key:"b",meta:!0,action:oe})),_e(()=>cr({key:"b",ctrl:!0,action:oe}));let we=E(()=>[...n(X)&&n(C).size===0?[Ye.INBOX]:[],...n(C).size===0?[...D()&&n(w).size===0?[Ye.ARCHIVED]:[],...A()&&n(w).size===0?[Ye.BIN]:[]]:[]].filter(N=>u()===""||N.toLowerCase().indexOf(u().toLowerCase())!==-1).sort((N,te)=>N===Ye.INBOX?-1:te===Ye.INBOX?1:N.localeCompare(te)));var Te=ie(),Me=R(Te);{var De=N=>{Gu(N,{get blocked(){return n(G)},children:(te,ge)=>{var be=Zu(),ke=R(be),Se=S(ke),H=S(Se);Ui(H,{});var q=F(H,2),se=S(q),Ce=E(()=>c(fe.Settings));se.__click=function(...Z){n(Ce)?.apply(this,Z)};var y=S(se);ve(y,()=>({"--size":"24px"})),ye(y.lastChild,{name:"settings"});var M=F(y,2);ut(M,{children:(Z,ne)=>{var he=Ne("Settings");p(Z,he)}});var k=F(se,2),j=E(()=>c(fe.Sync));k.__click=function(...Z){n(j)?.apply(this,Z)};var K=S(k);ve(K,()=>({"--size":"24px"})),ye(K.lastChild,{name:"sync"});var W=F(K,2);ut(W,{children:(Z,ne)=>{var he=Ne("Sync");p(Z,he)}});var de=F(Se,2),me=S(de);{let Z=E(u);bo(me,{placeholder:"Search tag",get value(){return n(Z)},onChange:ne=>{d(ne)}})}var ae=F(de,2);{let Z=E(()=>n(C).has(Ye.BIN));hs(ae,{get clearTags(){return m},get clearMetaTags(){return B},get hideTagMenu(){return n(Z)},handleMetaTagClick:re,get metaTags(){return n(C)},get selectedTags(){return n(w)},handleSelectedTagClick:J})}var Q=F(ke,2);{let Z=E(()=>n(C).has(Ye.BIN));gs(Q,{get hideTagMenu(){return n(Z)},get metaTags(){return n(we)},get tags(){return n($)},handleMetaTagClick:Y,handleTagClick:ee,mobile:!0})}pe((Z,ne)=>{Qe(se,"href",Z),Qe(k,"href",ne)},[()=>l(fe.Settings),()=>l(fe.Sync)]),p(te,be)},$$slots:{default:!0}})},Ie=N=>{var te=Ju(),ge=S(te),be=S(ge);{let se=E(u);bo(be,{placeholder:"Search tag",get value(){return n(se)},onChange:Ce=>{d(Ce)}})}var ke=F(ge,2),Se=S(ke),H=S(Se);{let se=E(()=>n(C).has(Ye.BIN));hs(H,{get metaTags(){return n(C)},get clearTags(){return m},get clearMetaTags(){return B},get hideTagMenu(){return n(se)},get selectedTags(){return n(w)},handleMetaTagClick:re,handleSelectedTagClick:J})}var q=F(Se,2);{let se=E(()=>n(C).has(Ye.BIN));gs(q,{get metaTags(){return n(we)},get hideTagMenu(){return n(se)},get tags(){return n($)},handleMetaTagClick:Y,handleTagClick:ee})}p(N,te)};U(Me,N=>{n(ue)?N(De):N(Ie,!1)})}p(t,Te),ce()}lt(["click"]);var $u=P('<button class="a p-11odwi4"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ef(t,e){le(e,!0);let a=Pe(e,"ref",15);var r=$u();r.__click=function(...i){e.onClick?.apply(this,i)};var o=S(r);ve(o,()=>({"--rotate":"-90deg"})),ye(o.lastChild,{name:"menu"});var s=F(o,2);ut(s,{children:(i,l)=>{var c=Ne();pe(()=>dt(c,e.title)),p(i,c)}}),et(r,i=>a(i),()=>a()),p(t,r),ce()}lt(["click"]);const tf=t=>{try{new URL(t)}catch{return!1}return!0};var nf=P('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),af=P('<form class="a p-y9ylet"><!></form>');function rf(t,e){le(e,!0);const{addTag:a}=zt(),{getSelectedTags:r}=An(),{getSelectedNotes:o}=ma(),{getFiltredNotes:s}=_a();let i=z(!1),l=z(!1),c,u=!1,d=z(null),f=z(""),g=e.nextFocusRef;_e(()=>(n(d)&&n(d).focus(),()=>{c&&clearTimeout(c)}));const h=()=>{c=setTimeout(()=>{v(l,!0)},250)},m=()=>{v(i,!0)},T=async()=>{if(r().has(n(f).trim())){m();return}if(n(f).trim()!=="")try{h();const w=new Set(o()),C=w.size?[...w]:s().map(D=>D.id),{cancel:L}=await a(n(f).trim(),C);pt("Tag added",{cancel:{nextFocusRef:g,onCancel:async()=>{await L(),setTimeout(()=>{const{prev:D}=vt(g);D?.focus()},16)}}}),u=!0}finally{v(i,!0)}},_=()=>{e.onClosed?.(u)},b=B=>{B.preventDefault(),T()};_r(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:_,children:(B,w)=>{var C=af(),L=S(C);{var D=O=>{qa(O,{})},A=O=>{var ee=nf(),Y=F(R(ee),2);Yo(Y,{placeholder:"Enter new tag name",get ref(){return n(d)},set ref(x){v(d,x,!0)},get value(){return n(f)},set value(x){v(f,x,!0)}});var J=F(Y,2),re=S(J);kt(re,{onClick:m,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(x,$)=>{var ue=Ne("Cancel");p(x,ue)},$$slots:{default:!0}});var X=F(re,2);kt(X,{onClick:T,fullWidth:!0,withoutMinWidth:!0,children:(x,$)=>{var ue=Ne("OK");p(x,ue)},$$slots:{default:!0}}),p(O,ee)};U(L,O=>{n(l)?O(D):O(A,!1)})}an("submit",C,b),p(B,C)},$$slots:{default:!0}}),ce()}var of=P('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),sf=P('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),lf=P('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!></div> <!></div>');function cf(t,e){le(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=zt(),{getSelectedTags:s}=An();let i=z(null),l=z(""),c=z(null);const u=E(a);let d=Pe(e,"shownTagInput",15);const f=()=>n(u)?e.mode==="exit"?Ao(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let h=E(()=>{const x=s(),$=new Set(Ao(new Set,new Set(e.selectedTags.length>0?e.selectedTags:x),o()()||[]));return f().filter(V=>e.selectedTags.some(G=>V===G)?!1:n(l)===""||V.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((V,G)=>x.has(V)&&x.has(G)?V.localeCompare(G):x.has(V)?-1:x.has(G)?1:$.has(V)&&$.has(G)?V.localeCompare(G):$.has(V)?-1:$.has(G)?1:0)});const m=x=>{if(!e.selectedTags.includes(x)){if(e.mode!=="exit"||n(h).includes(x)){e.onChangeTags([...e.selectedTags,x]),v(l,"");return}n(i)?.focus()}},T=x=>{const $=e.selectedTags.filter(ue=>ue!==x);$.length===0?e.onChangeTags([]):e.onChangeTags($)},_=x=>{x.preventDefault(),n(l)!==""?m(n(l)):d(!1)};ze(()=>{n(i)&&d()&&n(i).focus(),d()||v(l,"")});const b=x=>{x.preventDefault()},B=x=>{x.preventDefault(),x.stopPropagation(),x.stopImmediatePropagation()};var w=lf(),C=S(w),L=S(C);kn(L,17,()=>e.selectedTags,x=>x+"-tags_selected",(x,$)=>{$a(x,{onPointerDown:b,onTouchStart:B,onClick:()=>{T(n($))},type:"button",style:"selected",children:(ue,V)=>{var G=Ne();pe(()=>dt(G,n($))),p(ue,G)},$$slots:{default:!0}})});var D=F(L,2);{var A=x=>{var $=ie(),ue=R($);kn(ue,17,()=>n(h).filter(V=>V.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),V=>V+"-tags_suggested",(V,G)=>{$a(V,{onPointerDown:b,onTouchStart:B,onClick:()=>{m(n(G))},children:(oe,we)=>{var Te=Ne();pe(()=>dt(Te,n(G))),p(oe,Te)},$$slots:{default:!0}})}),p(x,$)};U(D,x=>{d()&&x(A)})}var O=F(D,2);{var ee=x=>{$a(x,{onPointerDown:b,onTouchStart:B,onClick:()=>{m(n(l)),v(l,"")},children:($,ue)=>{var V=Ne();pe(()=>dt(V,n(l))),p($,V)},$$slots:{default:!0}})};U(O,x=>{n(l)!==""&&(e.mode!=="exit"||n(h).find($=>$.toLowerCase()===n(l).toLowerCase()))&&x(ee)})}var Y=F(O,2);{var J=x=>{$a(x,{mode:"empty",onPointerDown:b,onTouchStart:B,onClick:()=>{d(!0)},children:($,ue)=>{var V=of(),G=S(V);ve(G,()=>({"--size":"12px"})),ye(G.lastChild,{name:"plus"});var oe=F(G,2);ut(oe,{children:(we,Te)=>{var Me=Ne("add tag");p(we,Me)}}),p($,V)},$$slots:{default:!0}})};U(Y,x=>{d()||x(J)})}var re=F(C,2);{var X=x=>{var $=sf(),ue=S($),V=S(ue);Yo(V,{placeholder:"tag",get ref(){return n(i)},set ref(oe){v(i,oe,!0)},get value(){return n(l)},set value(oe){v(l,oe,!0)}});var G=F(ue,2);G.__pointerdown=b,G.__touchstart=B,G.__click=()=>{n(i)?.blur(),n(l)!==""&&m(n(l)),d(!1),v(l,"")},an("submit",$,_),p(x,$)};U(re,x=>{d()&&x(X)})}et(w,x=>v(c,x),()=>n(c)),p(t,w),ce()}lt(["pointerdown","touchstart","click"]);var df=P('<div class="c p-y9ylet"><!> <!></div>'),uf=P('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),ff=P('<form class="a p-y9ylet"><!></form>');function vf(t,e){le(e,!0);const{changeTags:a,getNoteById:r}=zt(),{getSelectedTags:o}=An(),{getSelectedNotes:s}=ma(),{getFiltredNotes:i}=_a();let l=z(!1),c=z(!1),u,d=!1,f=z(!1),g=e.nextFocusRef,m=(()=>{const A=[...o()],O=s();if(O.size===0)return A;const ee=Array.from(O);let Y=new Set(r(ee[0])?.data.tags||[]);for(let J=1;J<ee.length;J++){const re=new Set(r(ee[J])?.data.tags||[]),X=new Set([]);re.forEach(x=>{Y.has(x)&&X.add(x)}),Y=X}return Array.from(Y)})(),T=z(bt(m));_e(()=>()=>{u&&clearTimeout(u)});const _=()=>{u=setTimeout(()=>{v(c,!0)},250)},b=()=>{v(l,!0)},B=async()=>{const A=m,O=new Set(s()),ee=O.size?[...O]:i().map(Y=>Y.id);try{_();const{cancel:Y}=await a([...A],n(T),ee);pt("Tags changed",{cancel:{nextFocusRef:g,onCancel:async()=>{await Y(),setTimeout(()=>{const{prev:J}=vt(g);J?.focus()},16)}}}),d=!0}finally{v(l,!0)}},w=A=>{A.key==="Escape"&&n(f)&&(v(f,!1),A.preventDefault(),A.stopPropagation())};_e(()=>(document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)));const C=()=>{e.onClosed?.(d)},L=A=>{v(T,A,!0)},D=A=>{A.preventDefault(),B()};_r(t,{get blocked(){return n(c)},get startClose(){return n(l)},onClosed:C,children:(A,O)=>{var ee=ff(),Y=S(ee);{var J=X=>{qa(X,{})},re=X=>{var x=uf(),$=F(R(x),2);cf($,{get selectedTags(){return n(T)},onChangeTags:L,get shownTagInput(){return n(f)},set shownTagInput(G){v(f,G,!0)}});var ue=F($,2);{var V=G=>{var oe=df(),we=S(oe);kt(we,{onClick:b,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(Me,De)=>{var Ie=Ne("Cancel");p(Me,Ie)},$$slots:{default:!0}});var Te=F(we,2);kt(Te,{onClick:B,fullWidth:!0,withoutMinWidth:!0,children:(Me,De)=>{var Ie=Ne("OK");p(Me,Ie)},$$slots:{default:!0}}),p(G,oe)};U(ue,G=>{n(f)||G(V)})}p(X,x)};U(Y,X=>{n(c)?X(J):X(re,!1)})}an("submit",ee,D),p(A,ee)},$$slots:{default:!0}}),ce()}var gf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),hf=P('<li class="p-antir2"><!></li>'),pf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select mode',1),mf=P('<li class="p-antir2"><!></li>'),_f=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),wf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),yf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),bf=P('<li class="p-antir2"><!></li>'),Sf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),Cf=P('<li class="p-antir2"><!></li>'),Tf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),xf=P('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <li class="p-antir2"><!></li>',1),kf=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),Ef=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),Pf=P('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),Nf=P("<!> <!> <!> <!>",1),Af=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Mf=P('<div class="a p-antir2"><!></div> <!> <!> <!>',1);function Df(t,e){le(e,!0);const{checkMobileSize:a}=Dn(),{getSelectedTags:r,setSelectedTags:o,clearTags:s}=An(),{moveNotesToBin:i,moveNotesToArchive:l,moveNotesFromArchive:c,restoreNotesFromBin:u,deleteNotes:d}=zt(),{getFiltredNotes:f}=_a(),{getMode:g,changeMode:h,getSelectedNotes:m,setSelectedNotes:T,clearNotes:_}=ma();let b=E(r),B=z(!1),w=z(!1),C=z(!1),L=z(!1),D=E(a),A=z(null),O=z(null);const ee=()=>{n(B)||v(B,!0)},Y=()=>{v(B,!1),v(w,!1)};ze(()=>{!n(B)&&!n(C)&&!n(L)&&v(A,vt(n(O)).next,!0)}),_e(()=>{const H=q=>{q.key==="Escape"&&n(B)&&n(O)?.focus()};return window.addEventListener("keydown",H),()=>{window.removeEventListener("keydown",H)}});let J=()=>{};const re=()=>{v(w,!0),v(C,!0);let H=n(O);J=()=>{v(C,!1),setTimeout(()=>{H?.focus()},16)}};let X=()=>{};const x=()=>{v(w,!0),v(L,!0);let H=n(O);X=()=>{v(L,!1),setTimeout(()=>{H?.focus()},16)}},$=async()=>{const H=Array.from(n(b)),q=new Set(m()),se=q.size?[...q]:f().map(y=>y.id),{cancel:Ce}=await i({noteIds:se});s(),_(),pt("Notes moved to bin",{cancel:{nextFocusRef:n(A),onCancel:async()=>{await Ce(),o(new Set(H)),T(q),setTimeout(()=>{const{prev:y}=vt(n(A));y?.focus()},16)}}}),v(w,!0)},ue=async()=>{const H=Array.from(n(b)),q=new Set(m()),se=q.size?[...q]:f().map(y=>y.id),{cancel:Ce}=await l({noteIds:se});s(),_(),pt("Notes moved to archive",{cancel:{nextFocusRef:n(A),onCancel:async()=>{await Ce(),o(new Set(H)),T(q),setTimeout(()=>{const{prev:y}=vt(n(A));y?.focus()},16)}}}),v(w,!0)},V=async()=>{const H=Array.from(n(b)),q=new Set(m()),se=q.size?[...q]:f().map(y=>y.id),{cancel:Ce}=await c({noteIds:se});s(),_(),pt("Notes moved from archive",{cancel:{nextFocusRef:n(A),onCancel:async()=>{await Ce(),o(new Set(H)),T(q),setTimeout(()=>{const{prev:y}=vt(n(A));y?.focus()},16)}}}),v(w,!0)},G=async()=>{const H=Array.from(n(b)),q=new Set(m()),se=q.size?[...q]:f().map(y=>y.id),{cancel:Ce}=await u({noteIds:se});s(),_(),pt("Notes restored",{cancel:{nextFocusRef:n(A),onCancel:async()=>{await Ce(),o(new Set(H)),T(q),setTimeout(()=>{const{prev:y}=vt(n(A));y?.focus()},16)}}}),v(w,!0)},oe=()=>{const H=new Set(m()),q=H.size?[...H]:f().map(se=>se.id);v(w,!0),Na({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{v(w,!0),s(),_(),await d({noteIds:q})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(O)?.focus()},16)}})},we=()=>{const H=f(),q=Array.from(m()),se=[];for(const y of H)y.data&&y.data?.link&&tf(y.data?.link.url)&&(q.includes(y.id)||q.length===0)&&se.push(y.data?.link.url);const Ce=()=>{for(const y of se)if(!window.open(y,"_blank")){Na({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(O)?.focus()},16)}});break}};se.length<=10?Ce():Na({title:`Are you sure to open ${se.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{Ce()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(O)?.focus()},16)}}),v(w,!0)};let Te=E(()=>g()==="multiple");var Me=Mf(),De=R(Me),Ie=S(De);ef(Ie,{title:"notes menu",onClick:ee,get ref(){return n(O)},set ref(H){v(O,H,!0)}});var N=F(De,2);{var te=H=>{var q=Af(),se=R(q);ve(se,()=>({"--right":"0","--top":"44px"})),Jr(se.lastChild,{get startClose(){return n(w)},onClosed:Y,children:(Ce,y)=>{var M=Nf(),k=R(M);{var j=Z=>{var ne=hf(),he=S(ne);at(he,{onClick:we,get dialogMode(){return n(D)},children:(Be,tt)=>{var nt=gf(),Le=R(nt);ve(Le,()=>({"--size":"20px"})),ye(Le.lastChild,{name:"open"}),p(Be,nt)},$$slots:{default:!0}}),p(Z,ne)};U(k,Z=>{Wi||$d||Z(j)})}var K=F(k,2);{var W=Z=>{var ne=mf(),he=S(ne);at(he,{onClick:()=>{v(w,!0),h("multiple")},get dialogMode(){return n(D)},children:(Be,tt)=>{var nt=pf(),Le=R(nt);ve(Le,()=>({"--size":"20px"})),ye(Le.lastChild,{name:"check"}),p(Be,nt)},$$slots:{default:!0}}),p(Z,ne)};U(K,Z=>{n(Te)||Z(W)})}var de=F(K,2);{var me=Z=>{var ne=xf(),he=R(ne),Be=S(he);at(Be,{onClick:re,get dialogMode(){return n(D)},children:(We,ot)=>{var qe=_f(),Ze=R(qe);ve(Ze,()=>({"--size":"20px","--rotate":"45deg"})),ye(Ze.lastChild,{name:"close"}),p(We,qe)},$$slots:{default:!0}});var tt=F(he,2),nt=S(tt);at(nt,{onClick:x,get dialogMode(){return n(D)},children:(We,ot)=>{var qe=wf(),Ze=R(qe);ve(Ze,()=>({"--size":"20px"})),ye(Ze.lastChild,{name:"pen"}),p(We,qe)},$$slots:{default:!0}});var Le=F(tt,2);{var Ue=We=>{var ot=bf(),qe=S(ot);at(qe,{onClick:ue,get dialogMode(){return n(D)},children:(Ze,on)=>{var Pt=yf(),Nt=R(Pt);ve(Nt,()=>({"--size":"20px"})),ye(Nt.lastChild,{name:"archive"}),p(Ze,Pt)},$$slots:{default:!0}}),p(We,ot)},Oe=We=>{var ot=Cf(),qe=S(ot);at(qe,{onClick:V,get dialogMode(){return n(D)},children:(Ze,on)=>{var Pt=Sf(),Nt=R(Pt);ve(Nt,()=>({"--size":"20px"})),ye(Nt.lastChild,{name:"archive-cancel"}),p(Ze,Pt)},$$slots:{default:!0}}),p(We,ot)};U(Le,We=>{e.mode==="notes"?We(Ue):We(Oe,!1)})}var Fe=F(Le,2),Ge=S(Fe);at(Ge,{onClick:$,get dialogMode(){return n(D)},dangerous:!0,children:(We,ot)=>{var qe=Tf(),Ze=R(qe);ve(Ze,()=>({"--size":"20px"})),ye(Ze.lastChild,{name:"bin"}),p(We,qe)},$$slots:{default:!0}}),p(Z,ne)};U(de,Z=>{(e.mode==="notes"||e.mode==="archive")&&Z(me)})}var ae=F(de,2);{var Q=Z=>{var ne=Pf(),he=R(ne),Be=S(he);at(Be,{onClick:G,get dialogMode(){return n(D)},children:(Le,Ue)=>{var Oe=kf(),Fe=R(Oe);ve(Fe,()=>({"--size":"20px"})),ye(Fe.lastChild,{name:"bin-cancel"}),p(Le,Oe)},$$slots:{default:!0}});var tt=F(he,2),nt=S(tt);at(nt,{onClick:oe,get dialogMode(){return n(D)},dangerous:!0,children:(Le,Ue)=>{var Oe=Ef(),Fe=R(Oe);ve(Fe,()=>({"--size":"20px"})),ye(Fe.lastChild,{name:"bin"}),p(Le,Oe)},$$slots:{default:!0}}),p(Z,ne)};U(ae,Z=>{e.mode==="bin"&&Z(Q)})}p(Ce,M)},$$slots:{default:!0}}),p(H,q)};U(N,H=>{n(B)&&H(te)})}var ge=F(N,2);{var be=H=>{rf(H,{get nextFocusRef(){return n(A)},onClosed:q=>{J(q)}})};U(ge,H=>{n(C)&&H(be)})}var ke=F(ge,2);{var Se=H=>{vf(H,{get nextFocusRef(){return n(A)},onClosed:q=>{X(q)}})};U(ke,H=>{n(L)&&H(Se)})}p(t,Me),ce()}var If=P('<label class="a p-uuy4jt"><input class="b p-uuy4jt" type="checkbox"/> <span class="c p-uuy4jt"><span class="d p-uuy4jt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></span> <!></label>');function Ki(t,e){le(e,!0);const a=()=>{e.onChange(!e.checked)};var r=If(),o=S(r);o.__change=a;var s=F(o,2),i=S(s),l=S(i);ve(l,()=>({"--size":"16px"})),ye(l.lastChild,{name:"check"});var c=F(s,2);ut(c,{children:(u,d)=>{var f=Ne("Toggle switch");p(u,f)}}),pe(()=>Ic(o,e.checked)),p(t,r),ce()}lt(["change"]);var Rf=P('<div class="g e p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),Lf=P('<div class="g p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),Of=P('<a class="i j p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Ff=P('<div class="h p-1336jx2"><!> <!></div>'),zf=P('<!> <div class="p p-1336jx2"><!></div>',1),jf=P('<div class="r p-1336jx2"><div class="s p-1336jx2"><!> <span> </span></div> <button class="t p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),Bf=P('<div class="a p-1336jx2"><div class="b p-1336jx2"><div class="c p-1336jx2"><a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-1336jx2"><!></div> <div class="f p-1336jx2"><!></div></div> <div class="k p-1336jx2"><div class="l p-1336jx2"><!></div> <div class="m p-1336jx2"><div class="n p-1336jx2"><div class="o p-1336jx2"><!></div> <!></div> <div class="q p-1336jx2"><!></div></div></div></div>');function Hf(t,e){le(e,!0);const{getFeedSearch:a,setFeedSearch:r}=Bo(),{getScrollContainer:o}=Zr();let s=E(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:c,checkNotes:u}=zt(),{replaceSearchParams:d}=Wt(),{createDialogPageHref:f,createHandleClickDialogPage:g,getDialogPages:h}=rn(),{checkExistedDialog:m}=$t(),{getMode:T,clearNotes:_,setSelectedNotes:b,getSelectedNotes:B,changeMode:w}=ma(),{checkMobileSize:C}=Dn(),{getFiltredNotes:L}=_a(),{getSelectedMetaTags:D}=Gr();let A=E(D),O=z(null);const ee=E(l);let J=E(()=>{const ae=L()||[],Q=B();return ae.every(Z=>Q.has(Z.id))});const re=()=>{n(s)&&n(s).scrollTo({top:0})},X=()=>{Na({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),d("")},onCancel:async()=>{}})},x=()=>{h().length===0&&!m()&&n(O)?.focus()};_e(()=>cr({key:"k",meta:!0,action:x})),_e(()=>cr({key:"k",ctrl:!0,action:x})),ze(()=>{const ae=L()||[];Ft(()=>{const Q=B();b(new Set(ae.filter(Z=>Q.has(Z.id)).map(Z=>Z.id)))})});let $=E(()=>n(A).has(Ye.ARCHIVED)?"archive":n(A).has(Ye.BIN)?"bin":"notes");var ue=Bf(),V=S(ue),G=S(V),oe=S(G),we=E(()=>g(fe.Settings));oe.__click=function(...ae){n(we)?.apply(this,ae)};var Te=S(oe);ve(Te,()=>({"--rotate":"30deg","--size":"20px"})),ye(Te.lastChild,{name:"settings"});var Me=F(oe,2),De=E(()=>g(fe.Sync));Me.__click=function(...ae){n(De)?.apply(this,ae)};var Ie=S(Me);ve(Ie,()=>({"--size":"20px"})),ye(Ie.lastChild,{name:"sync"});var N=F(G,2),te=S(N);Ui(te,{});var ge=F(N,2),be=S(ge);{var ke=ae=>{var Q=ie(),Z=R(Q);{var ne=he=>{var Be=ie(),tt=R(Be);{var nt=Ue=>{var Oe=Rf(),Fe=S(Oe);Fe.__click=X;var Ge=S(Fe);ve(Ge,()=>({"--scale":"1.2","--size":"20px"})),ye(Ge.lastChild,{name:"clear"});var We=F(Ge);ut(We,{children:(ot,qe)=>{var Ze=Ne("Empty bin");p(ot,Ze)}}),p(Ue,Oe)},Le=Ue=>{var Oe=Lf(),Fe=S(Oe);Fe.__click=X;var Ge=S(Fe);ve(Ge,()=>({"--scale":"0.9","--size":"20px"})),ye(Ge.lastChild,{name:"clear"}),p(Ue,Oe)};U(tt,Ue=>{C()?Ue(nt):Ue(Le,!1)})}p(he,Be)};U(Z,he=>{n(ee)&&he(ne)})}p(ae,Q)},Se=ae=>{var Q=ie(),Z=R(Q);{var ne=he=>{var Be=Ff(),tt=S(Be);{var nt=Ue=>{var Oe=Of();Oe.__click=function(...We){e.onOpenWindow?.apply(this,We)};var Fe=S(Oe);ve(Fe,()=>({"--scale":"0.7","--size":"32px"})),ye(Fe.lastChild,{name:"open-window"});var Ge=F(Fe,2);ut(Ge,{children:(We,ot)=>{var qe=Ne("open window");p(We,qe)}}),pe(()=>Qe(Oe,"href",e.openWindowHref)),p(Ue,Oe)};U(tt,Ue=>{e.onOpenWindow&&Ue(nt)})}var Le=F(tt,2);_u(Le,{}),p(he,Be)};U(Z,he=>{n($)==="notes"&&he(ne)},!0)}p(ae,Q)};U(be,ae=>{n($)==="bin"?ae(ke):ae(Se,!1)})}var H=F(V,2),q=S(H),se=S(q);Qu(se,{});var Ce=F(q,2),y=S(Ce),M=S(y),k=S(M);{let ae=E(a);bo(k,{onFocus:re,placeholder:"Search",get value(){return n(ae)},onChange:Q=>{r(Q)},get ref(){return n(O)},set ref(Q){v(O,Q,!0)}})}var j=F(M,2);{var K=ae=>{var Q=zf(),Z=R(Q);du(Z,{});var ne=F(Z,2),he=S(ne);Df(he,{get mode(){return n($)}}),p(ae,Q)};U(j,ae=>{(n($)==="notes"&&u()||n($)==="bin"&&l()||n($)==="archive"&&c())&&ae(K)})}var W=F(y,2),de=S(W);{var me=ae=>{var Q=ie(),Z=R(Q);{var ne=he=>{var Be=jf(),tt=S(Be),nt=S(tt);Ki(nt,{get checked(){return n(J)},onChange:Ge=>{if(Ge){const We=L()||[];b(new Set(We.map(ot=>ot.id)))}else _()}});var Le=F(nt,2),Ue=S(Le),Oe=F(tt,2);Oe.__click=Ge=>{Ge.preventDefault(),w("single")};var Fe=S(Oe);ve(Fe,()=>({"--size":"16px"})),ye(Fe.lastChild,{name:"close"}),pe(Ge=>dt(Ue,`Selected ${Ge??""}`),[()=>B().size]),p(he,Be)};U(Z,he=>{T()==="multiple"&&he(ne)})}p(ae,Q)};U(de,ae=>{(n($)==="notes"&&u()||n($)==="bin"&&l()||n($)==="archive"&&c())&&ae(me)})}pe((ae,Q)=>{Qe(oe,"href",ae),Qe(Me,"href",Q)},[()=>f(fe.Settings),()=>f(fe.Sync)]),p(t,ue),ce()}lt(["click"]);var Uf=P('<div class="p-gkgqyo"><!></div>');function ft(t,e){le(e,!0);const{setDialogPageHeight:a}=Vo();let r=z(null);_e(()=>{n(r);const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;a(u)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=Uf(),s=S(o);xe(s,()=>e.children),et(o,i=>v(r,i),()=>n(r)),p(t,o),ce()}var Wf=P('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function Vf(t,e){le(e,!1);const{replaceSearchParams:a,getHref:r}=Wt(),o=l=>{l.preventDefault(),a("")};jo();var s=Wf(),i=F(S(s),2);{let l=gr(()=>r(""));kt(i,{element:"a",get href(){return n(l)},onClick:o,children:(c,u)=>{var d=Ne("close");p(c,d)},$$slots:{default:!0}})}p(t,s),ce()}var qf=P('<h1 class="p-1n0ziuh"><!></h1>');function Kf(t,e){var a=qf(),r=S(a);xe(r,()=>e.children),p(t,a)}var Yf=P('<!> <div class="b p-193tby9"><!> <!></div>',1),Xf=P('<div class="a p-193tby9"><!></div>');function Gf(t,e){le(e,!0);const{blockDialog:a,setLeftEnd:r}=$t(),{pushDialogPage:o}=rn(),{initLocalAccount:s}=Uo(),{replaceSearchParams:i}=Wt(),l=Mn(),c=()=>{o(fe.Auth)},u=async()=>{l.duration=0,l.swipingRatio=-25,requestAnimationFrame(()=>{l.duration=ua().duration,s(),a(!1),r(!0),i("")})};var d=Xf(),f=S(d);{var g=h=>{var m=Yf(),T=R(m);Kf(T,{children:(w,C)=>{var L=Ne("Welcome");p(w,L)}});var _=F(T,2),b=S(_);kt(b,{onClick:c,fullWidth:!0,children:(w,C)=>{var L=Ne("Cloud account");p(w,L)},$$slots:{default:!0}});var B=F(b,2);kt(B,{onClick:u,fullWidth:!0,type:"secondary",children:(w,C)=>{var L=Ne("Local account");p(w,L)},$$slots:{default:!0}}),p(h,m)};U(f,h=>{h(g)})}p(t,d),ce()}const Zf="modulepreload",Jf=function(t){return"/"+t},_s={},ht=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(a.map(u=>{if(u=Jf(u),u in _s)return;_s[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":Zf,d||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((h,m)=>{g.addEventListener("load",h),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Qf=P('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function $f(t){var e=Qf(),a=F(S(e),2);kt(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=Ne("Reload");p(r,s)},$$slots:{default:!0}}),p(t,e)}var ev=P('<div class="p-uzefkz"><!></div>');function tv(t,e){le(e,!0);let a=z(!1);const{getDialogPageHeight:r}=Vo(),o=E(r);_e(()=>{const c=setTimeout(()=>{v(a,!0)},250);return()=>{clearTimeout(c)}});var s=ev(),i=S(s);{var l=c=>{qa(c,{})};U(i,c=>{n(a)&&c(l)})}pe(()=>za(s,`min-height: ${n(o)??""}px;`)),p(t,s),ce()}function wt(t,e){le(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>ht(()=>import("./aBwgG3I2p.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>ht(()=>import("./aCOt9NxlF.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>ht(()=>import("./aAn8w8HRq.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>ht(()=>import("./aB17dWxh8.js"),__vite__mapDeps([8,9])),"./Pages/ChangeTags.svelte":()=>ht(()=>import("./aC8OEyyOy.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>ht(()=>import("./aCdbfftle.js"),__vite__mapDeps([10,4,3,11,12])),"./Pages/Exit.svelte":()=>ht(()=>import("./a6mdFwNne.js"),__vite__mapDeps([13,14])),"./Pages/ExportData.svelte":()=>ht(()=>import("./aCQGpQqXn.js"),__vite__mapDeps([15,16,17,18])),"./Pages/ImportData.svelte":()=>ht(()=>import("./aLlq8j5-1.js"),__vite__mapDeps([19,20])),"./Pages/Install.svelte":()=>ht(()=>import("./aCXrVwZvj.js"),__vite__mapDeps([21,22])),"./Pages/InstallSuccess.svelte":()=>ht(()=>import("./aCbX6_K3O.js"),__vite__mapDeps([23,24])),"./Pages/NewNote.svelte":()=>ht(()=>import("./a7oxJ5Hlw.js"),__vite__mapDeps([25,26,27])),"./Pages/Note.svelte":()=>ht(()=>import("./aCZGVTO-T.js"),__vite__mapDeps([28,26,27,29])),"./Pages/Settings.svelte":()=>ht(()=>import("./aCNVkVotU.js"),__vite__mapDeps([30,16,17,31])),"./Pages/Signin.svelte":()=>ht(()=>import("./aCSgTYuuH.js"),__vite__mapDeps([32,4,3,11,33])),"./Pages/Signup.svelte":()=>ht(()=>import("./aDBEYeKx5.js"),__vite__mapDeps([34,11,4,3,33])),"./Pages/Subscription.svelte":()=>ht(()=>import("./aBD-ceTyF.js"),__vite__mapDeps([35,36])),"./Pages/Sync.svelte":()=>ht(()=>import("./aCqIAvQUB.js"),__vite__mapDeps([37,38]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[c]){const u=r[c]();return a[l]={promise:u},a[l].module=await u,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=ie(),i=R(s);Cc(i,()=>o(e.page),l=>{tv(l,{})},(l,c)=>{const u=E(()=>n(c).default);var d=ie(),f=R(d);Ec(f,()=>n(u),(g,h)=>{h(g,{get params(){return e.params},get hidden(){return e.hidden}})}),p(l,d)},l=>{$f(l)}),p(t,s),ce()}var nv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),av=P('<li class="p-1ljon4s"><!></li>'),rv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),ov=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),sv=P('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),iv=P('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),lv=P('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),cv=P(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),dv=P('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),uv=P('<!> <li class="p-1ljon4s"><!></li> <!>',1),fv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function vv(t,e){le(e,!0);const{moveNoteToBin:a,moveNoteFromArchive:r,moveNoteToArchive:o,deleteNote:s,pinNote:i,restoreNoteFromBin:l}=zt();let c=Pe(e,"mode",3,"notes"),u=Pe(e,"shownMenu",15),d=z(!1),f=z(!1),g=z(!1),h=z(!1),m=z(!1);const{checkMobileSize:T}=Dn(),_=async()=>{a(e.noteId),pt("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{l(e.noteId)}}})},b=async()=>{o(e.noteId),pt("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{r(e.noteId)}}})},B=async()=>{r(e.noteId),pt("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{o(e.noteId)}}})},w=()=>{l(e.noteId),pt("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{a(e.noteId)}}})},C=()=>{e.noteData.pinnedAt?(i(e.noteId,!1),pt("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId,!0)}}})):(i(e.noteId,!0),pt("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId,!1)}}})),v(d,!0)},L=()=>{n(f)?(v(f,!1),_()):n(m)?(v(m,!1),w()):n(g)?(v(g,!1),b()):n(h)&&(v(h,!1),B()),u(!1),v(d,!1)},D=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),pt("copied"),v(d,!0))},A=()=>{v(d,!0),Na({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await s(e.noteId)},onCancel:async()=>{}})};let O=E(T);var ee=ie(),Y=R(ee);{var J=re=>{var X=fv(),x=R(X);ve(x,()=>({"--bottom":e.showMenuUp?"100%":"-129px","--right":"10px"})),Jr(x.lastChild,{get startClose(){return n(d)},onClosed:L,children:($,ue)=>{var V=uv(),G=R(V);{var oe=N=>{var te=av(),ge=S(te);at(ge,{onClick:D,get dialogMode(){return n(O)},children:(be,ke)=>{var Se=nv(),H=R(Se);ve(H,()=>({"--size":"20px"})),ye(H.lastChild,{name:"copy"}),p(be,Se)},$$slots:{default:!0}}),p(N,te)};U(G,N=>{n(O)&&e.noteData.link?.url&&N(oe)})}var we=F(G,2),Te=S(we);at(Te,{onClick:C,get dialogMode(){return n(O)},children:(N,te)=>{var ge=rv(),be=R(ge);{let Se=E(()=>e.noteData.pinnedAt?"pin-cancel":"pin");ve(be,()=>({"--size":"20px"})),ye(be.lastChild,{get name(){return n(Se)}})}var ke=F(be);pe(()=>dt(ke,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)),p(N,ge)},$$slots:{default:!0}});var Me=F(we,2);{var De=N=>{var te=iv(),ge=R(te),be=S(ge);at(be,{onClick:()=>{v(g,c()==="notes"),v(h,c()==="archive"),v(d,!0)},get dialogMode(){return n(O)},children:(H,q)=>{var se=ov(),Ce=R(se);{let M=E(()=>c()==="archive"?"archive-cancel":"archive");ve(Ce,()=>({"--size":"20px"})),ye(Ce.lastChild,{get name(){return n(M)}})}var y=F(Ce);pe(()=>dt(y,` ${c()==="archive"?"Unarchive":"Archive"}`)),p(H,se)},$$slots:{default:!0}});var ke=F(ge,2),Se=S(ke);at(Se,{onClick:()=>{v(f,!0),v(d,!0)},get dialogMode(){return n(O)},dangerous:!0,children:(H,q)=>{var se=sv(),Ce=R(se),y=S(Ce);ve(y,()=>({"--size":"20px"})),ye(y.lastChild,{name:"bin"}),p(H,se)},$$slots:{default:!0}}),p(N,te)},Ie=N=>{var te=dv(),ge=R(te),be=S(ge);at(be,{onClick:()=>{v(m,!0),v(d,!0)},get dialogMode(){return n(O)},children:(H,q)=>{var se=lv(),Ce=R(se),y=S(Ce);ve(y,()=>({"--size":"20px"})),ye(y.lastChild,{name:"bin-cancel"}),p(H,se)},$$slots:{default:!0}});var ke=F(ge,2),Se=S(ke);at(Se,{onClick:A,get dialogMode(){return n(O)},dangerous:!0,children:(H,q)=>{var se=cv(),Ce=R(se),y=S(Ce);ve(y,()=>({"--size":"20px"})),ye(y.lastChild,{name:"bin"}),p(H,se)},$$slots:{default:!0}}),p(N,te)};U(Me,N=>{c()==="notes"||c()==="archive"?N(De):N(Ie,!1)})}p($,V)},$$slots:{default:!0}}),p(re,X)};U(Y,re=>{u()&&re(J)})}p(t,ee),ce()}var gv=P('<div class="a p-1hg9kpf"></div>'),hv=P('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function pv(t,e){le(e,!0);const a=u=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(u).host}.ico`}catch{return""}};let r=z(!1),o=E(()=>a(e.url));var s=ie(),i=R(s);{var l=u=>{var d=gv();p(u,d)},c=u=>{var d=hv();pe(f=>Qe(d,"src",f),[()=>a(e.url)]),an("error",d,()=>{v(r,!0)}),p(u,d)};U(i,u=>{n(r)||!n(o)?u(l):u(c,!1)})}p(t,s),ce()}var mv=P('<a target="_blank" rel="noopener noreferrer" class="a p-7mmq8e"><!> <!></a>'),_v=P('<button class="a p-7mmq8e"><!> <!></button>');function kr(t,e){le(e,!0);let a=Pe(e,"tabindex",3,0),r=Pe(e,"onclick",3,()=>{}),o=Pe(e,"ref",15);var s=ie(),i=R(s);{var l=u=>{var d=mv();d.__click=function(...h){r()?.apply(this,h)};var f=S(d);xe(f,()=>e.children);var g=F(f,2);ut(g,{children:(h,m)=>{var T=Ne();pe(()=>dt(T,e.title)),p(h,T)}}),et(d,h=>o(h),()=>o()),pe(()=>{Qe(d,"href",e.href),Qe(d,"tabindex",a())}),p(u,d)},c=u=>{var d=ie(),f=R(d);{var g=h=>{var m=_v();m.__click=function(...b){r()?.apply(this,b)};var T=S(m);xe(T,()=>e.children);var _=F(T,2);ut(_,{children:(b,B)=>{var w=Ne();pe(()=>dt(w,e.title)),p(b,w)}}),et(m,b=>o(b),()=>o()),pe(()=>Qe(m,"tabindex",a())),p(h,m)};U(f,h=>{e.elem==="button"&&h(g)},!0)}p(u,d)};U(i,u=>{e.elem==="a"?u(l):u(c,!1)})}p(t,s),ce()}lt(["click"]);let Qn=z(null);var wv=P('<div class="a p-1t3doe5"><!></div>'),yv=P('<div class="b p-1t3doe5"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),bv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Sv=P('<div class="c p-1t3doe5"><!></div>'),Cv=P('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),Tv=P('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),xv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),kv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ev=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Pv=P("<!> <!>",1),Nv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Av=P("<li><!> <!> <!> <!> <div><!> <!></div> <!></li>");function Mv(t,e){le(e,!0);const{pushDialogPage:a}=rn(),{getFaviconEnabled:r,getRecordMode:o}=yo(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:c}=ma(),{getSearchParams:u,getHref:d}=Wt();let f=Pe(e,"mode",3,"notes"),g=z(!1),h=z(!1),m=E(r),T=E(o),_=z(null),b=z(null);const{checkMobileSize:B}=Dn(),w=()=>{v(g,!0)},C=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),pt("copied"))};ze(()=>{n(Qn)===n(b)?v(h,!0):v(h,!1)});const L=N=>{N.preventDefault(),a(`${fe.Note}?id=${encodeURIComponent(e.noteId)}`),v(Qn,null)},D=e.noteData.link?.url||"";let A=E(()=>n(g)&&n(_)?vt(n(_)).next:null);const O=N=>{N?l(e.noteId):c(e.noteId)};_e(()=>{const N=te=>{n(b)&&n(Qn)===n(b)&&!(n(b)===te.target||n(b).contains(te.target))&&v(Qn,null)};return document.addEventListener("click",N),()=>{document.removeEventListener("click",N)}});const ee=()=>{const N=new URLSearchParams(u());return N.set(Kt,`${fe.Note}?id=${encodeURIComponent(e.noteId)}`),d(N)};var Y=Av(),J=S(Y);{var re=N=>{var te=wv(),ge=S(te);{let be=E(()=>i().has(e.noteId));Ki(ge,{get checked(){return n(be)},onChange:O})}p(N,te)};U(J,N=>{s()==="multiple"&&N(re)})}var X=F(J,2);{var x=N=>{var te=yv(),ge=S(te);ve(ge,()=>({"--size":"18px"})),ye(ge.lastChild,{name:"pin"}),p(N,te)};U(X,N=>{e.noteData.pinnedAt&&N(x)})}var $=F(X,2);{var ue=N=>{var te=Sv(),ge=S(te);{var be=Se=>{pv(Se,{get url(){return D}})},ke=Se=>{var H=bv(),q=R(H);ve(q,()=>({"--size":"16px"})),ye(q.lastChild,{name:"note"}),p(Se,H)};U(ge,Se=>{D?Se(be):Se(ke,!1)})}p(N,te)};U($,N=>{n(m)&&N(ue)})}var V=F($,2);{var G=N=>{var te=Cv();te.__click=L;var ge=S(te);pe((be,ke)=>{Qe(te,"tabindex",e.focusHidden?-1:0),Qe(te,"href",be),dt(ge,ke)},[ee,()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),an("focus",te,()=>{v(Qn,n(b),!0)}),p(N,te)},oe=N=>{var te=Tv(),ge=S(te);pe(be=>{Qe(te,"tabindex",e.focusHidden?-1:0),Qe(te,"href",D),dt(ge,be)},[()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),an("focus",te,()=>{v(Qn,n(b),!0)}),p(N,te)};U(V,N=>{n(T)==="note"||!D?N(G):N(oe,!1)})}var we=F(V,2);we.__focusin=()=>{v(Qn,n(b),!0)};var Te=S(we);{var Me=N=>{var te=Pv(),ge=R(te);{var be=q=>{{let se=E(()=>e.focusHidden?-1:0);kr(q,{elem:"button",onclick:C,get tabindex(){return n(se)},title:"copy link",children:(Ce,y)=>{var M=xv(),k=R(M);ve(k,()=>({"--size":"20px"})),ye(k.lastChild,{name:"copy"}),p(Ce,M)},$$slots:{default:!0}})}};U(ge,q=>{B()||q(be)})}var ke=F(ge,2);{var Se=q=>{{let se=E(()=>e.focusHidden?-1:0),Ce=E(()=>e.noteData.link?.title||"unknown");kr(q,{elem:"a",get href(){return D},get tabindex(){return n(se)},get title(){return n(Ce)},children:(y,M)=>{var k=kv(),j=R(k);ve(j,()=>({"--size":"18px"})),ye(j.lastChild,{name:"open"}),p(y,k)},$$slots:{default:!0}})}},H=q=>{{let se=E(ee),Ce=E(()=>e.focusHidden?-1:0);kr(q,{title:"edit",elem:"a",get href(){return n(se)},get tabindex(){return n(Ce)},onclick:L,children:(y,M)=>{var k=Ev(),j=R(k);ve(j,()=>({"--size":"18px"})),ye(j.lastChild,{name:"pen"}),p(y,k)},$$slots:{default:!0}})}};U(ke,q=>{n(T)==="note"?q(Se):q(H,!1)})}p(N,te)};U(Te,N=>{D&&N(Me)})}var De=F(Te,2);{let N=E(()=>e.focusHidden?-1:0);kr(De,{title:"show menu",elem:"button",get tabindex(){return n(N)},onclick:w,get ref(){return n(_)},set ref(te){v(_,te,!0)},children:(te,ge)=>{var be=Nv(),ke=R(be);ve(ke,()=>({"--size":"18px","--rotate":"90deg"})),ye(ke.lastChild,{name:"menu"}),p(te,be)},$$slots:{default:!0}})}var Ie=F(we,2);vv(Ie,{get nextFocusRef(){return n(A)},get mode(){return f()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(g)},set shownMenu(N){v(g,N,!0)}}),et(Y,N=>v(b,N),()=>n(b)),pe(()=>{$e(Y,1,rt({e:!0,f:n(h)}),"p-1t3doe5"),$e(we,1,rt({g:!0,h:n(h)}),"p-1t3doe5")}),p(t,Y),ce()}lt(["click","focusin"]);var Ba,Yi,Xi;class Dv{constructor(e){Ae(this,Ba);At(this,"data");At(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),Je(this,Ba,Yi).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,Je(this,Ba,Xi).call(this)),e}isEmpty(){return this.data.length===0}}Ba=new WeakSet,Yi=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},Xi=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class Iv{constructor(e,a){At(this,"heap");At(this,"done");At(this,"cache",[]);this.heap=new Dv(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var Rv=P("<span>Back to notes</span>"),Lv=P('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),Ov=P("<span>Back to notes</span>"),Fv=P('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),zv=P('<p class="f">No notes in bin</p>'),jv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),Bv=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),Hv=P('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),Uv=P('<div class="e p-1jdj5w3"><!></div>'),Wv=P('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),Vv=P('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),qv=P('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function Kv(t,e){le(e,!0);const{getScrollContainer:a}=Zr(),{createHandleClickDialogPage:r,createDialogPageHref:o}=rn(),{getSelectedTags:s}=An(),{getFeedOrder:i}=yi(),{checkNotesInArchive:l,checkNotesInBin:c,checkNotes:u,isInitedNotes:d}=zt(),{getSelectedMetaTags:f}=Gr(),{replaceSearchParams:g,getHref:h}=Wt();Bo();const{getFiltredNotesLength:m,getFiltredNotes:T,getUpdatedFiltredNotesTimestamp:_}=_a();let b=E(f),B=E(m),w=E(T),C=E(_),L=E(d),D=54,A=z(0),O=z(0),ee=z(0),Y=z(null),J=E(a),re=null,X=null,x=E(()=>n(b).has(Ye.ARCHIVED)?"archive":n(b).has(Ye.BIN)?"bin":"notes");const $=E(s);ze(()=>{n($),n(we),n(J)?.scrollTo(0,0)});const{enable:ue}=Wo(),V=()=>{ue(),re||(re=requestAnimationFrame(()=>{const H=n(J)?.scrollTop||0;v(ee,H,!0);const q=Math.ceil(n(A)/D);v(O,Math.floor(H/(D*q))*(D*q)),re=null}))},G=()=>{X||(X=requestAnimationFrame(()=>{v(A,window.innerHeight-180||0,!0);const H=n(J)?.scrollTop||0;v(ee,H,!0);const q=Math.ceil(n(A)/D);v(O,Math.floor(H/(D*q))*(D*q)),X=null}))};_e(()=>{G(),V()});const oe=()=>{V()};ze(()=>(n(J)?.addEventListener("scroll",oe),window.addEventListener("resize",G),()=>{n(J)?.removeEventListener("scroll",oe),window.removeEventListener("resize",G)}));const we=E(i);ze(()=>{n(we),n(C),v(Y,new Iv(n(w),(H,q)=>{if(!H||!q||!H.data||!q.data)return 0;if(H.data.pinnedAt&&!q.data.pinnedAt)return-1;if(!H.data.pinnedAt&&q.data.pinnedAt)return 1;if(H.data.pinnedAt&&q.data.pinnedAt){if(H.data.pinnedAt<q.data.pinnedAt)return 1;if(H.data.pinnedAt>q.data.pinnedAt)return-1}switch(n(we)){case"newest":return H.data.updatedAt<q.data.updatedAt?1:H.data.updatedAt>q.data.updatedAt?-1:(H.data.link?.title||"").localeCompare(q.data.link?.title||"");case"oldest":return H.data.updatedAt>q.data.updatedAt?1:H.data.updatedAt<q.data.updatedAt?-1:(H.data.link?.title||"").localeCompare(q.data.link?.title||"");case"AtoZ":return(H.data.link?.title||"").localeCompare(q.data.link?.title||"");case"ZtoA":return(q.data.link?.title||"").localeCompare(H.data.link?.title||"");default:return 0}}),!0)});const Te=E(()=>n(B)*D);let De=E(()=>{n(C);const H=Math.ceil(n(A)/D);let q=Math.floor(n(O)/D);return q=q-Math.min(q,H),n(Y)?.get(q,q+H*3)||[]}),Ie=E(()=>D*Math.ceil(n(A)/D));const N=E(()=>n(O)-Math.min(n(O),n(Ie)));var te=qv(),ge=S(te),be=S(ge);{var ke=H=>{qa(H,{})},Se=H=>{var q=ie(),se=R(q);{var Ce=M=>{var k=Lv(),j=F(R(k),2),K=S(j);{let W=E(()=>h(""));kt(K,{element:"a",get href(){return n(W)},onClick:de=>{de.preventDefault(),g("")},children:(de,me)=>{var ae=Rv();p(de,ae)},$$slots:{default:!0}})}p(M,k)},y=M=>{var k=ie(),j=R(k);{var K=de=>{var me=Fv(),ae=F(R(me),2),Q=S(ae);{let Z=E(()=>h(""));kt(Q,{element:"a",get href(){return n(Z)},onClick:ne=>{ne.preventDefault(),g("")},children:(ne,he)=>{var Be=Ov();p(ne,Be)},$$slots:{default:!0}})}p(de,me)},W=de=>{var me=ie(),ae=R(me);{var Q=ne=>{var he=Uv(),Be=S(he);{var tt=Le=>{var Ue=zv();p(Le,Ue)},nt=Le=>{var Ue=Hv(),Oe=S(Ue),Fe=S(Oe);{let ot=E(()=>o(fe.NewNote)),qe=E(()=>r(fe.NewNote));kt(Fe,{element:"a",get href(){return n(ot)},get onClick(){return n(qe)},children:(Ze,on)=>{var Pt=jv(),Nt=R(Pt);ve(Nt,()=>({"--size":"18px","--color":"#b0b0b0"})),ye(Nt.lastChild,{name:"plus"}),p(Ze,Pt)},$$slots:{default:!0}})}var Ge=F(Oe,4),We=S(Ge);{let ot=E(()=>o(fe.ImportData)),qe=E(()=>r(fe.ImportData));kt(We,{element:"a",get href(){return n(ot)},get onClick(){return n(qe)},children:(Ze,on)=>{var Pt=Bv(),Nt=R(Pt);ve(Nt,()=>({"--size":"18px","--color":"#b0b0b0"})),ye(Nt.lastChild,{name:"import"}),p(Ze,Pt)},$$slots:{default:!0}})}p(Le,Ue)};U(Be,Le=>{n(x)==="bin"?Le(tt):Le(nt,!1)})}p(ne,he)},Z=ne=>{var he=ie(),Be=R(he);{var tt=Le=>{var Ue=Wv();p(Le,Ue)},nt=Le=>{var Ue=Vv(),Oe=S(Ue);kn(Oe,23,()=>n(De),Fe=>Fe.data,(Fe,Ge,We)=>{var ot=ie(),qe=R(ot);{var Ze=on=>{{let Pt=E(()=>n(We)*D<n(ee)-n(N)-D/2||n(We)*D>n(ee)-n(N)+Math.floor(n(A)/D)*D),Nt=E(()=>(n(We)+3)*D<n(ee)-n(N)-D/2||(n(We)+3)*D>n(ee)-n(N)+Math.floor(n(A)/D)*D);Mv(on,{get mode(){return n(x)},get focusHidden(){return n(Pt)},get showMenuUp(){return n(Nt)},get noteId(){return n(Ge).id},get noteData(){return n(Ge).data}})}};U(qe,on=>{n(Ge).data&&on(Ze)})}p(Fe,ot)}),pe(Fe=>{za(Ue,Fe),za(Oe,`transform: translateY(${n(N)??""}px);`)},[()=>`--minHeight: ${Math.max((n(Te)>n(A),n(Te)),0)}px`]),p(Le,Ue)};U(Be,Le=>{n(De).length===0?Le(tt):Le(nt,!1)},!0)}p(ne,he)};U(ae,ne=>{!c()&&!l()&&!u()?ne(Q):ne(Z,!1)},!0)}p(de,me)};U(j,de=>{n(x)==="archive"&&!l()?de(K):de(W,!1)},!0)}p(M,k)};U(se,M=>{n(x)==="bin"&&!c()?M(Ce):M(y,!1)},!0)}p(H,q)};U(be,H=>{n(L)?H(Se,!1):H(ke)})}p(t,te),ce()}var Yv=P('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function Xv(t){var e=Yv(),a=F(R(e),2),r=S(a);Kv(r,{}),p(t,e)}function Gv(t,e){le(e,!0);const a=Mn();let r=Pe(e,"animationRef",7),o=Pe(e,"dialog",7);qi(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let u=0,d=0,f=()=>1;if(r().current){r().current.pause();let h=Number(r().current.currentTime);lr()&&(h=Number(h)+50,r().current.currentTime=Math.min(Math.max(En-1,h),h));const m=r().current.effect?.getComputedTiming().progress||0;f=()=>m,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(h=>requestAnimationFrame(h)),d=1-f();const g=d*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-d)*.1}`),a.swipingRatio=Math.abs(1-d)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${g}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:u,currentPosition:g,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:u,width:d})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-u/d)*.1}`),o().style.transform=`translate3d(${u}px, 0, 0)`,a.swipingRatio=Math.abs(1-u/d)*25)},onFinish:({swipeVelocity:u,currentPosition:d,width:f,actionThreshold:g,initialPosition:h})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const m=()=>Math.abs(h+d)/f*100;let T=null;if(u<=-Xn?T="open":u>=Xn?T="close":T=Math.abs(m())>g?"close":"open",r().progress=Vi(m()/100),T==="close"){const _=(1-(r().progress||0))*En;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const _=(r().progress||1)*En;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),ce()}var Zv=P('<div class="c p-b75woj"> </div>'),Jv=P('<button class="d e p-b75woj"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Qv=P('<a class="d f p-b75woj"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),$v=P('<div><div class="a p-b75woj"><div class="b p-b75woj"><!> <!> <!></div></div> <!> <!></div>'),eg=P("<dialog><!></dialog> <!>",1);function tg(t,e){le(e,!0);const{isScrolling:a,enable:r}=Wo();let o=z(null),s=z(null),i={};const l=Mn(),{checkLeftEnd:c,checkLeftStart:u,setLeftEnd:d,setLeftStart:f,getCountDialog:g}=$t(),h=E(u),m=E(c);let T=E(()=>l.working);const _=()=>{e.dialogState!=="opened"&&e.onStartOpening()},b=()=>{e.onClose()},B=()=>{e.onSwipe()},w=re=>{re.preventDefault(),b()};_e(()=>(n(o)?.addEventListener("close",b),n(o)?.addEventListener("cancel",w),()=>{n(o)?.removeEventListener("close",b),n(o)?.removeEventListener("cancel",w)})),ze(()=>{g()>0&&(l.swipingRatio=25)}),ze(()=>{e.dialogState==="opening"?Ft(()=>{requestAnimationFrame(()=>{if(!n(o))return;const re=(i.progress||1)*En,X=n(o).style.transform||`translate3d(${n(h)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const x=n(o)?.animate([{transform:X},{transform:"translate3d(0, 0, 0)"}],{duration:re,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=x,x&&(x.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ua().duration,x.cancel(),i.current=void 0,i.progress=void 0,n(h)&&f(!1)})})}):e.dialogState==="closing"&&Ft(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const re=(1-(i.progress||0))*En,X=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const x=n(o)?.animate([{transform:X},{transform:`translate3d(${n(m)?"-100%":"100%"}, 0, 0)`}],{duration:re,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=x,x&&(x.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ua().duration,x.cancel(),i.current=void 0,i.progress=void 0,n(m)&&d(!1)})})})});const C=()=>{r()},L=E(a);_e(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),lr()&&n(o).getBoundingClientRect(),!n(T)){e.onOpened();return}e.onStartOpening()}});var D=eg(),A=R(D),O=S(A);{var ee=re=>{var X=$v(),x=S(X),$=S(x),ue=S($);{var V=N=>{var te=Zv(),ge=S(te);pe(()=>dt(ge,e.title)),p(N,te)};U(ue,N=>{e.title&&N(V)})}var G=F(ue,2);{var oe=N=>{var te=Jv();te.__click=b;var ge=S(te);ve(ge,()=>({"--size":"32px"})),ye(ge.lastChild,{name:"back"});var be=F(ge,2);ut(be,{children:(ke,Se)=>{var H=Ne("back");p(ke,H)}}),p(N,te)};U(G,N=>{e.blocked||N(oe)})}var we=F(G,2);{var Te=N=>{var te=Qv();te.__click=function(...ke){e.onOpenWindow?.apply(this,ke)};var ge=S(te);ve(ge,()=>({"--scale":"0.7","--size":"32px"})),ye(ge.lastChild,{name:"open-window"});var be=F(ge,2);ut(be,{children:(ke,Se)=>{var H=Ne("open window");p(ke,H)}}),pe(()=>Qe(te,"href",e.openWindowHref)),p(N,te)};U(we,N=>{e.onOpenWindow&&N(Te)})}var Me=F(x,2);xe(Me,()=>e.children);var De=F(Me,2);{var Ie=N=>{qo(N,{})};U(De,N=>{e.dialogState==="opened"&&N(Ie)})}et(X,N=>v(s,N),()=>n(s)),pe(()=>$e(X,1,rt({n:!0,o:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-b75woj")),an("scroll",X,C),p(re,X)};U(O,re=>{e.dialogState!=="preOpening"&&re(ee)})}et(A,re=>v(o,re),()=>n(o));var Y=F(A,2);{var J=re=>{Gv(re,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:_,onClose:b,onSwipe:B,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};U(Y,re=>{n(s)&&!n(L)&&!e.blocked&&!e.hidden&&re(J)})}pe(()=>$e(A,1,rt({g:!0,h:n(T),i:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",j:e.hidden,k:e.dialogState==="opened",l:n(h),m:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-b75woj")),p(t,D),ce()}lt(["click"]);function ng(t,e){le(e,!0);let a=Pe(e,"hidden",3,!1),r=Pe(e,"onClosed",3,()=>{}),o=z(0);_e(()=>{const b=()=>{v(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",b),b(),()=>{window.removeEventListener("resize",b)}});const{dialogDec:s,dialogInc:i}=$t(),l=Mn();_e(()=>(i(),()=>{s()}));let c=z("closed");const u=()=>{v(c,"opening")},d=()=>{v(c,"swiping")},f=()=>{v(c,"opened")},g=()=>{e.onClose(),v(c,"closing")},h=()=>{v(c,"closed"),r()()};ze(()=>{e.shown&&n(c)==="closed"?v(c,"preOpening"):!e.shown&&n(c)==="opened"&&v(c,"closing")}),ze(()=>{n(c)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(c)==="opened"||n(c)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var m=ie(),T=R(m);{var _=b=>{tg(b,{get dialogWidth(){return n(o)},get dialogState(){return n(c)},get title(){return e.title},onStartOpening:u,onOpened:f,onClose:g,onClosed:h,onSwipe:d,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(B,w)=>{var C=ie(),L=R(C);xe(L,()=>e.children),p(B,C)},$$slots:{default:!0}})};U(T,b=>{n(c)!=="closed"&&b(_)})}p(t,m),ce()}const ag=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};_e(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),_e(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var rg=P('<button class="d e p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),og=P('<div class="f p-2jn3ll"> </div>'),sg=P('<button class="d g p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),ig=P('<dialog><div class="a p-2jn3ll"><div class="b p-2jn3ll"><div class="c p-2jn3ll"><div><!></div> <!> <div><!></div></div></div> <!></div></dialog> <!>',1);function lg(t,e){le(e,!0);let a=Pe(e,"blockedDialog",3,!1),r=Pe(e,"hiddenDialog",3,!1),o=Pe(e,"isDesktopAnimationOff",3,!1),s=z(null),i=z(null),l=z(!1);ag({getDialog:()=>n(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=Mn();ze(()=>{e.stateDialog==="closing"&&(c.working?n(s)?.addEventListener("transitionend",()=>{n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:u}=Vo(),d=E(u);_e(()=>{setTimeout(()=>{v(l,!0)},50)});var f=ig(),g=R(f),h=S(g),m=S(h),T=S(m),_=S(T),b=S(_);{var B=Y=>{var J=rg();J.__click=()=>{e.onStartBack()};var re=S(J);ve(re,()=>({"--size":"28px"})),ye(re.lastChild,{name:"back"});var X=F(re,2);ut(X,{children:(x,$)=>{var ue=Ne("back");p(x,ue)}}),p(Y,J)};U(b,Y=>{(!(a()||r())||a())&&e.onStartBack&&Y(B)})}var w=F(_,2);{var C=Y=>{var J=og(),re=S(J);pe(()=>dt(re,e.title)),p(Y,J)};U(w,Y=>{e.title&&Y(C)})}var L=F(w,2),D=S(L);{var A=Y=>{var J=sg();J.__click=()=>{e.onStartClose()};var re=S(J);ve(re,()=>({"--size":"28px"})),ye(re.lastChild,{name:"close"});var X=F(re,2);ut(X,{children:(x,$)=>{var ue=Ne("close");p(x,ue)}}),p(Y,J)};U(D,Y=>{a()||r()||Y(A)})}var O=F(m,2);xe(O,()=>e.children),et(h,Y=>v(i,Y),()=>n(i)),et(g,Y=>v(s,Y),()=>n(s));var ee=F(g,2);Ko(ee,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose}}),pe(()=>{za(g,`height: ${n(d)+74}px`),$e(g,1,rt({h:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o(),m:r()}),"p-2jn3ll")}),p(t,f),ce()}lt(["click"]);const cg=({onStartClose:t,onClosed:e})=>{let a=z("close");return{get state(){return n(a)},set state(i){v(a,i,!0)},handleStartClose:(i=!1)=>{i||(v(a,"closing"),t?.())},handleOpen:()=>{v(a,"open")},handleClose:()=>{v(a,"close"),e?.()}}};function dg(t,e){le(e,!0);let a=Pe(e,"blockedDialog",3,!1),r=Pe(e,"hiddenDialog",3,!1),o=Pe(e,"onStartClose",3,()=>{}),s=Pe(e,"onClosed",3,()=>{}),i=cg({onStartClose:o(),onClosed:s()});const{dialogDec:l,dialogInc:c}=$t();_e(()=>(c(),()=>{l()})),ze(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const u=h=>{h.key==="Escape"&&a()&&(h.preventDefault(),h.stopPropagation())};_e(()=>(document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}));var d=ie(),f=R(d);{var g=h=>{lg(h,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(m,T)=>{var _=ie(),b=R(_);xe(b,()=>e.children),p(m,_)},$$slots:{default:!0}})};U(f,h=>{i.state!=="close"&&h(g)})}p(t,d),ce()}const ws=(t,e=je,a=je,r)=>{let o=gr(()=>fl(r?.(),!1));var s=ie(),i=R(s);{var l=u=>{ft(u,{children:(d,f)=>{wt(d,{get hidden(){return n(o)},get page(){return fe.Settings}})},$$slots:{default:!0}})},c=u=>{var d=ie(),f=R(d);{var g=m=>{ft(m,{children:(T,_)=>{wt(T,{get hidden(){return n(o)},get page(){return fe.NewNote}})},$$slots:{default:!0}})},h=m=>{var T=ie(),_=R(T);{var b=w=>{ft(w,{children:(C,L)=>{wt(C,{get params(){return a()},get hidden(){return n(o)},get page(){return fe.Note}})},$$slots:{default:!0}})},B=w=>{var C=ie(),L=R(C);{var D=O=>{ft(O,{children:(ee,Y)=>{wt(ee,{get hidden(){return n(o)},get page(){return fe.ImportData}})},$$slots:{default:!0}})},A=O=>{var ee=ie(),Y=R(ee);{var J=X=>{ft(X,{children:(x,$)=>{wt(x,{get hidden(){return n(o)},get page(){return fe.ExportData}})},$$slots:{default:!0}})},re=X=>{var x=ie(),$=R(x);{var ue=G=>{ft(G,{children:(oe,we)=>{Gf(oe,{})},$$slots:{default:!0}})},V=G=>{var oe=ie(),we=R(oe);{var Te=De=>{ft(De,{children:(Ie,N)=>{wt(Ie,{get hidden(){return n(o)},get page(){return fe.Install}})},$$slots:{default:!0}})},Me=De=>{var Ie=ie(),N=R(Ie);{var te=be=>{ft(be,{children:(ke,Se)=>{wt(ke,{get hidden(){return n(o)},get page(){return fe.InstallSuccess}})},$$slots:{default:!0}})},ge=be=>{var ke=ie(),Se=R(ke);{var H=se=>{ft(se,{children:(Ce,y)=>{wt(Ce,{get hidden(){return n(o)},get page(){return fe.Auth}})},$$slots:{default:!0}})},q=se=>{var Ce=ie(),y=R(Ce);{var M=j=>{ft(j,{children:(K,W)=>{wt(K,{get hidden(){return n(o)},get page(){return fe.Signup}})},$$slots:{default:!0}})},k=j=>{var K=ie(),W=R(K);{var de=ae=>{ft(ae,{children:(Q,Z)=>{wt(Q,{get hidden(){return n(o)},get page(){return fe.Signin}})},$$slots:{default:!0}})},me=ae=>{var Q=ie(),Z=R(Q);{var ne=Be=>{ft(Be,{children:(tt,nt)=>{wt(tt,{get hidden(){return n(o)},get page(){return fe.AccessKeys}})},$$slots:{default:!0}})},he=Be=>{var tt=ie(),nt=R(tt);{var Le=Oe=>{ft(Oe,{children:(Fe,Ge)=>{wt(Fe,{get hidden(){return n(o)},get page(){return fe.Account}})},$$slots:{default:!0}})},Ue=Oe=>{var Fe=ie(),Ge=R(Fe);{var We=qe=>{ft(qe,{children:(Ze,on)=>{wt(Ze,{get hidden(){return n(o)},get page(){return fe.ConfirmAccessKey}})},$$slots:{default:!0}})},ot=qe=>{var Ze=ie(),on=R(Ze);{var Pt=wa=>{ft(wa,{children:(wr,Xo)=>{wt(wr,{get hidden(){return n(o)},get page(){return fe.Exit}})},$$slots:{default:!0}})},Nt=wa=>{var wr=ie(),Xo=R(wr);{var Gi=ya=>{ft(ya,{children:(yr,Go)=>{wt(yr,{get hidden(){return n(o)},get page(){return fe.Sync}})},$$slots:{default:!0}})},Zi=ya=>{var yr=ie(),Go=R(yr);{var Ji=ba=>{ft(ba,{children:(br,Zo)=>{wt(br,{get hidden(){return n(o)},get page(){return fe.Subscription}})},$$slots:{default:!0}})},Qi=ba=>{var br=ie(),Zo=R(br);{var $i=Sa=>{ft(Sa,{children:(Qr,tl)=>{wt(Qr,{get hidden(){return n(o)},get page(){return fe.About}})},$$slots:{default:!0}})},el=Sa=>{ft(Sa,{children:(Qr,tl)=>{Vf(Qr,{})},$$slots:{default:!0}})};U(Zo,Sa=>{e()===fe.About?Sa($i):Sa(el,!1)},!0)}p(ba,br)};U(Go,ba=>{e()===fe.Subscription?ba(Ji):ba(Qi,!1)},!0)}p(ya,yr)};U(Xo,ya=>{e()===fe.Sync?ya(Gi):ya(Zi,!1)},!0)}p(wa,wr)};U(on,wa=>{e()===fe.Exit?wa(Pt):wa(Nt,!1)},!0)}p(qe,Ze)};U(Ge,qe=>{e()===fe.ConfirmAccessKey?qe(We):qe(ot,!1)},!0)}p(Oe,Fe)};U(nt,Oe=>{e()===fe.Account?Oe(Le):Oe(Ue,!1)},!0)}p(Be,tt)};U(Z,Be=>{e()===fe.AccessKeys?Be(ne):Be(he,!1)},!0)}p(ae,Q)};U(W,ae=>{e()===fe.Signin?ae(de):ae(me,!1)},!0)}p(j,K)};U(y,j=>{e()===fe.Signup?j(M):j(k,!1)},!0)}p(se,Ce)};U(Se,se=>{e()===fe.Auth?se(H):se(q,!1)},!0)}p(be,ke)};U(N,be=>{e()===fe.InstallSuccess?be(te):be(ge,!1)},!0)}p(De,Ie)};U(we,De=>{e()===fe.Install?De(Te):De(Me,!1)},!0)}p(G,oe)};U($,G=>{e()===fe.AccountSetup?G(ue):G(V,!1)},!0)}p(X,x)};U(Y,X=>{e()===fe.ExportData?X(J):X(re,!1)},!0)}p(O,ee)};U(L,O=>{e()===fe.ImportData?O(D):O(A,!1)},!0)}p(w,C)};U(_,w=>{e()===fe.Note?w(b):w(B,!1)},!0)}p(m,T)};U(f,m=>{e()===fe.NewNote?m(g):m(h,!1)},!0)}p(u,d)};U(i,u=>{e()===fe.Settings?u(l):u(c,!1)})}p(t,s)};var ug=P("<!> <!>",1);function fg(t,e){le(e,!0);const a=Fc(e,["$$slots","$$events","$$legacy"]),{checkBlockedDialog:r,checkClosableDialog:o}=$t(),{sidebarClose:s,getSidebarState:i}=mr(),l=E(r),c=E(o),{getDialogPages:u}=rn(),{getAccount:d}=Uo();let f=E(u),g=E(()=>d()!==void 0);const{checkMobileSize:h}=Dn();let m=z(bt([]));const T=E(h),{clearDialogPages:_,popDialogPage:b}=rn(),{checkLeftStart:B}=$t();let w=E(B);ze(()=>{u().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const C=()=>{b()},L=()=>{_()};ze(()=>{n(f),n(T),Ft(()=>{if(n(T))n(f).length>=n(m).length||n(w)?v(m,n(f).map(X=>({page:X,shown:!0})),!0):v(m,n(m).map((X,x)=>({page:X.page,shown:x<n(f).length})),!0);else if(n(f).length>=n(m).length)v(m,n(f).map(X=>({page:X,shown:!0})),!0);else{if(n(f).length===0){v(m,[{page:n(m)[n(m).length-1].page,shown:!1}],!0);return}v(m,n(f).map(X=>({page:X,shown:!0})),!0)}})});const D=()=>{v(m,n(f).map(X=>({page:X,shown:!0})),!0)};var A=ug(),O=R(A);{var ee=X=>{Xv(X)};U(O,X=>{n(g)&&X(ee)})}var Y=F(O,2);{var J=X=>{var x=ie(),$=R(x);kn($,19,()=>n(m),ue=>ue.page,(ue,V,G)=>{const oe=E(()=>n(V).page.split("?")[1]),we=E(()=>n(V).page.split("?")[0]),Te=E(()=>n(G)!==n(m).length-1&&!!n(m)[n(G)+1]?.shown),Me=E(()=>n(G)===0);{let De=E(()=>vs[n(we)]||""),Ie=E(()=>n(l)||n(Me)&&!n(c));ng(ue,_o({get shown(){return n(V).shown},get title(){return n(De)},get hidden(){return n(Te)},get blocked(){return n(Ie)},onClose:C,onClosed:D},()=>a,{children:(N,te)=>{ws(N,()=>n(we),()=>n(oe),()=>n(Te))},$$slots:{default:!0}}))}}),p(X,x)},re=X=>{var x=ie(),$=R(x);{var ue=V=>{const G=E(()=>n(m)[n(m).length-1].page.split("?")[1]),oe=E(()=>n(m)[n(m).length-1].page.split("?")[0]),we=E(()=>n(m)[n(m).length-1].shown),Te=E(()=>n(m).length===1);{let Me=E(()=>vs[n(oe)]||""),De=E(()=>n(l)||!n(c)),Ie=E(()=>n(l)||n(Te)?void 0:C);dg(V,{get shownDialog(){return n(we)},get title(){return n(Me)},get blockedDialog(){return n(De)},hiddenDialog:!1,get onStartBack(){return n(Ie)},onStartClose:L,onClosed:D,children:(N,te)=>{ws(N,()=>n(oe),()=>n(G))},$$slots:{default:!0}})}};U($,V=>{n(m).length>0&&V(ue)},!0)}p(X,x)};U(Y,X=>{h()?X(J):X(re,!1)})}p(t,A),ce()}function vg(t,e){le(e,!1);let a=0;_e(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),jo(),ce()}const gg=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var hg=P('<div><button class="d p-11qzo3t"><!> <span class="e p-11qzo3t"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),pg=P('<!> <!> <!> <!> <main><div class="a p-11qzo3t"><div class="b p-11qzo3t"><!></div></div> <div class="c p-11qzo3t"><!></div></main> <!>',1);function mg(t,e){le(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=Wt(),{hasDialogPage:s}=rn(),{setScrollContainer:i}=Zr(),{getAccount:l,init:c}=Uo(),{isInitedNotes:u}=zt(),{isInitedSettings:d}=yo(),{getDialogPages:f}=rn(),{createBroadcastChannel:g,tabId:h}=Xr(),m=g(),{getSidebarState:T}=mr(),{setClosableDialog:_}=$t(),{getViewMode:b}=yo(),B=()=>{gg()?a(`${Kt}=${fe.AccountSetup}`):a(`${Kt}=${fe.Install}`)};_e(()=>{c(M=>{M===void 0?B():(s(fe.AccountSetup)&&a(""),M?v(A,M):v(A,null))});const y=async M=>{const k=JSON.parse(M.data);if(k.tabId&&k.tabId===h)return;const j=k;j.type==="initLocalAccount"||j.type==="initCloudAccount"||j.type==="updateAccount"||j.type==="disconnectCloudAccount"?a(""):j.type==="exit"&&B()};return m.addEventListener(y),()=>m.removeEventListener(y)});const w=Mn();_e(async()=>{await new Promise(y=>setTimeout(y,250)),await ci(),w.working=!0});let C=z(!1),L=0,D=E(()=>f().length>0),A=E(l),O=E(u),ee=E(d),Y=z(null);const J=()=>{n(Y)&&n(Y).scrollTo({top:0})};ze(()=>{_(n(A)!==void 0)}),ze(()=>{i(n(Y))});const re=()=>{if(n(Y)){const y=n(Y).scrollTop||0;y===0?v(C,!1):!n(C)&&L>y?v(C,!0):n(C)&&L+50<y&&v(C,!1),L=y}},X=()=>{re()};ze(()=>(n(Y)?.addEventListener("scroll",X),window.addEventListener("resize",X),()=>{n(Y)?.removeEventListener("scroll",X),window.removeEventListener("resize",X)}));const x=E(T);let $=E(()=>w.swipingRatio);const ue=()=>{const y=new URLSearchParams(o());if(s(fe.NewNote)){const M=y.get("noteId")||"";return r(M?y.toString().replace(fe.NewNote,`${fe.Note}?id=${encodeURIComponent(M)}`):y)}return r(y)},V=async()=>{const y=await chrome.windows.getCurrent();if(!y)return;const M=420,k=700,j=(y.left||0)+(y.width||0)-M-10,K=(y.top||0)+90;await chrome.windows.create({url:ue(),type:"popup",width:M,height:k,left:j,top:K}),window.close()},G=E(b),oe=E(()=>n(G)==="popup"||n(G)==="sidebar"?{onOpenWindow:V,openWindowHref:ue()}:{});var we=pg(),Te=R(we);vg(Te,{});var Me=F(Te,2);pu(Me,{});var De=F(Me,2);qo(De,{});var Ie=F(De,2);Fu(Ie,{});var N=F(Ie,2),te=S(N),ge=S(te),be=S(ge);{var ke=y=>{Hf(y,_o(()=>n(oe)))};U(be,y=>{n(ee)&&n(A)!==void 0&&y(ke)})}var Se=F(te,2),H=S(Se);{var q=y=>{fg(y,_o(()=>n(oe)))};U(H,y=>{n(O)&&n(ee)&&y(q)})}et(N,y=>v(Y,y),()=>n(Y));var se=F(N,2);{var Ce=y=>{var M=hg(),k=S(M);k.__click=J;var j=S(k);ut(j,{children:(de,me)=>{var ae=Ne("top");p(de,ae)}});var K=F(j,2),W=S(K);ve(W,()=>({"--rotate":"90deg","--size":"28px"})),ye(W.lastChild,{name:"back"}),pe(()=>{za(M,`--swiping-ratio: ${n($)}; --transition-timing-default: ${w.duration}s;`),$e(M,1,rt({i:!0,g:w.working&&!w.isSwiping,j:n(D)||n(x)!=="closed"}),"p-11qzo3t")}),p(y,M)};U(se,y=>{n(C)&&y(Ce)})}pe(()=>{za(N,`--swiping-ratio: ${n($)}; --transition-timing-default: ${w.duration}s;`),$e(N,1,rt({f:!0,g:w.working&&!w.isSwiping,h:n(x)!=="closed"}),"p-11qzo3t")}),p(t,we),ce()}lt(["click"]);function _g(t){Ud(t,{children:(e,a)=>{mg(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||wc(_g,{target:document.getElementById("app")});export{Do as $,E as A,kt as B,Wt as C,Uo as D,jo as E,Yo as F,an as G,Kf as H,ye as I,zt as J,Dn as K,qa as L,On as M,cf as N,et as O,fe as P,xg as Q,Tg as R,Jd as S,Qd as T,Kt as U,ut as V,lr as W,yo as X,Ft as Y,gt as Z,bs as _,v as a,ll as a0,Pe as a1,Jr as a2,at as a3,kr as a4,pt as a5,pv as a6,Xr as a7,Sg as a8,Ic as a9,gg as aa,bg as ab,za as ac,Cg as ad,z as b,S as c,ve as d,kn as e,P as f,n as g,Qe as h,p as i,U as j,$e as k,rt as l,ce as m,R as n,_e as o,le as p,dt as q,lt as r,F as s,pe as t,rn as u,$t as v,bt as w,ze as x,ie as y,Ne as z};
