const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aDbVJoVyq.js","a/aj6zxmxGs.css","a/aCo27Oagp.js","a/a9q_jSmK4.js","a/aBEGDcNQV.js","a/aBrkJtqMH.css","a/auT5GONba.js","a/aHdDxvcNK.css","a/aGWNu7N-e.js","a/aBgAKudUz.css","a/aDLzYeUJ3.js","a/aB2tpFOl_.js","a/aDU96KTZi.css","a/a4o9lUeAt.js","a/aCpa8lgv9.js","a/aCyUnaO83.js","a/aCovFy9VH.css","a/afGUkjeV7.css","a/aDcR-P7my.js","a/aCEBfkSMR.css","a/aDqRAB7vI.js","a/a_lcok-5Q.js","a/aDKwUMAZP.css","a/aDuw_bGWz.js","a/aBeWFm1o7.css","a/aDjSJDzG7.css","a/aCm7c0JPH.js","a/aCXobA9i7.css","a/aDg17cA8x.js","a/aBhtHFOya.css","a/aD2qgpRn9.js","a/aBem4Ctjp.css","a/ahWF7mRWU.js","a/aBYXvffeH.js","a/aCg3filF1.css","a/aDi_iO0lh.js","a/aCWn1BM4V.css","a/aCW3Xw_We.js","a/aCYqPgi-1.css","a/aD6SZgBFG.js","a/aCH18nfIo.css","a/aoPkyHGm9.js","a/aMJKOcbKk.js","a/aB29A_v-K.css","a/aBbiNSJgk.js","a/aBBI8MgAY.css"])))=>i.map(i=>d[i]);
var Si=Object.defineProperty;var yo=t=>{throw TypeError(t)};var Ci=(t,e,n)=>e in t?Si(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ut=(t,e,n)=>Ci(t,typeof e!="symbol"?e+"":e,n),wa=(t,e,n)=>e.has(t)||yo("Cannot "+n);var L=(t,e,n)=>(wa(t,e,"read from private field"),n?n.call(t):e.get(t)),Pe=(t,e,n)=>e.has(t)?yo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),fe=(t,e,n,r)=>(wa(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Le=(t,e,n)=>(wa(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const Uo=!1;var Ka=Array.isArray,ki=Array.prototype.indexOf,Xa=Array.from,Ea=Object.defineProperty,Yn=Object.getOwnPropertyDescriptor,qo=Object.getOwnPropertyDescriptors,Ei=Object.prototype,Pi=Array.prototype,Ga=Object.getPrototypeOf,wo=Object.isExtensible;const xe=()=>{};function xi(t){return typeof t?.then=="function"}function Ti(t){return t()}function Pa(t){for(var e=0;e<t.length;e++)t[e]()}function Vo(){var t,e,n=new Promise((r,o)=>{t=r,e=o});return{promise:n,resolve:t,reject:e}}function Ai(t,e,n=!1){return t===void 0?n?e():e:t}const Ze=2,Za=4,ta=8,Gt=16,Zt=32,Mn=64,na=128,et=1024,ct=2048,fn=4096,vt=8192,Vt=16384,Ja=32768,un=65536,bo=1<<17,Di=1<<18,sr=1<<19,Wo=1<<20,mt=256,Vr=512,Wr=32768,xa=1<<21,Qa=1<<22,Tn=1<<23,An=Symbol("$state"),Ni=Symbol("legacy props"),Li=Symbol(""),Vn=new class extends Error{constructor(){super(...arguments);ut(this,"name","StaleReactionError");ut(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Yo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Mi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ii(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Oi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ri(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Bi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Fi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function zi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ji(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Hi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ui(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ra=1,aa=2,Ko=4,qi=8,Vi=16,Wi=1,Yi=2,Ki=4,Xi=8,Gi=16,Zi=1,Ji=2,Ye=Symbol(),Qi="http://www.w3.org/1999/xhtml";let $i=!1;function Xo(t){return t===this.v}function el(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Go(t){return!el(t,this.v)}let ir=!1,tl=!1;function nl(){ir=!0}let Ae=null;function nr(t){Ae=t}function Ve(t){return Zo().get(t)}function je(t,e){return Zo().set(t,e),e}function ie(t,e=!1,n){Ae={p:Ae,c:null,e:null,s:t,x:null,l:ir&&!e?{s:null,u:null,$:[]}:null}}function le(t){var e=Ae,n=e.e;if(n!==null){e.e=null;for(var r of n)ps(r)}return t!==void 0&&(e.x=t),Ae=e.p,t??{}}function lr(){return!ir||Ae!==null&&Ae.l===null}function Zo(t){return Ae===null&&Yo(),Ae.c??(Ae.c=new Map(rl(Ae)||void 0))}function rl(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let Cn=[];function Jo(){var t=Cn;Cn=[],Pa(t)}function In(t){if(Cn.length===0&&!Kn){var e=Cn;queueMicrotask(()=>{e===Cn&&Jo()})}Cn.push(t)}function al(){for(;Cn.length>0;)Jo()}const ol=new WeakMap;function Qo(t){var e=Se;if(e===null)return _e.f|=Tn,t;if((e.f&Ja)===0){if((e.f&na)===0)throw!e.parent&&t instanceof Error&&$o(t),t;e.b.error(t)}else rr(t,e)}function rr(t,e){for(;e!==null;){if((e.f&na)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&$o(t),t}function $o(t){const e=ol.get(t);e&&(Ea(t,"message",{value:e.message}),Ea(t,"stack",{value:e.stack}))}const Ir=new Set;let Te=null,Fr=null,Ct=null,Ta=new Set,Lt=[],oa=null,Aa=!1,Kn=!1;var Jn,Qn,$n,kn,wr,er,tr,Ke,Da,wn,Na,es;const Qr=class Qr{constructor(){Pe(this,Ke);ut(this,"committed",!1);ut(this,"current",new Map);Pe(this,Jn,new Map);Pe(this,Qn,new Set);Pe(this,$n,0);Pe(this,kn,0);Pe(this,wr,null);Pe(this,er,[]);Pe(this,tr,[]);ut(this,"skipped_effects",new Set)}process(e){Lt=[],Fr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)Le(this,Ke,Da).call(this,r,n);Le(this,Ke,Na).call(this),L(this,kn)>0?(Le(this,Ke,wn).call(this,n.effects),Le(this,Ke,wn).call(this,n.render_effects),Le(this,Ke,wn).call(this,n.block_effects)):(Fr=this,Te=null,So(n.render_effects),So(n.effects),Fr=null),Ct=null}capture(e,n){L(this,Jn).has(e)||L(this,Jn).set(e,n),this.current.set(e,e.v),Ct?.set(e,e.v)}activate(){Te=this}deactivate(){Te=null,Ct=null}flush(){if(Lt.length>0){if(this.activate(),ns(),Te!==null&&Te!==this)return}else Le(this,Ke,Na).call(this);this.deactivate();for(const e of Ta)if(Ta.delete(e),e(),Te!==null)break}increment(e){fe(this,$n,L(this,$n)+1),e&&fe(this,kn,L(this,kn)+1)}decrement(e){fe(this,$n,L(this,$n)-1),e&&fe(this,kn,L(this,kn)-1);for(const n of L(this,er))tt(n,ct),Nn(n);for(const n of L(this,tr))tt(n,fn),Nn(n);fe(this,er,[]),fe(this,tr,[]),this.flush()}add_callback(e){L(this,Qn).add(e)}settled(){return(L(this,wr)??fe(this,wr,Vo())).promise}static ensure(){if(Te===null){const e=Te=new Qr;Ir.add(Te),Kn||Qr.enqueue(()=>{Te===e&&e.flush()})}return Te}static enqueue(e){In(e)}apply(){}};Jn=new WeakMap,Qn=new WeakMap,$n=new WeakMap,kn=new WeakMap,wr=new WeakMap,er=new WeakMap,tr=new WeakMap,Ke=new WeakSet,Da=function(e,n){e.f^=et;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Zt|Mn))!==0,i=s&&(o&et)!==0,l=i||(o&vt)!==0||this.skipped_effects.has(r);if((r.f&na)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!l&&r.fn!==null){s?r.f^=et:(o&Za)!==0?n.effects.push(r):ca(r)&&((r.f&Gt)!==0&&n.block_effects.push(r),Xr(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(Le(this,Ke,wn).call(this,n.effects),Le(this,Ke,wn).call(this,n.render_effects),Le(this,Ke,wn).call(this,n.block_effects),n=n.parent),r=u.next,u=u.parent}},wn=function(e){for(const n of e)((n.f&ct)!==0?L(this,er):L(this,tr)).push(n),tt(n,et)},Na=function(){if(L(this,kn)===0){for(const e of L(this,Qn))e();L(this,Qn).clear()}L(this,$n)===0&&Le(this,Ke,es).call(this)},es=function(){var o;if(Ir.size>1){L(this,Jn).clear();var e=Ct,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Ir){if(s===this){n=!1;continue}const i=[];for(const[c,u]of this.current){if(s.current.has(c))if(n&&u!==s.current.get(c))s.current.set(c,u);else continue;i.push(c)}if(i.length===0)continue;const l=[...s.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){const c=new Set,u=new Map;for(const d of i)rs(d,l,c,u);if(Lt.length>0){Te=s,s.apply();for(const d of Lt)Le(o=s,Ke,Da).call(o,d,r);Lt=[],s.deactivate()}}}Te=null,Ct=e}this.committed=!0,Ir.delete(this),L(this,wr)?.resolve()};let qt=Qr;function ts(t){var e=Kn;Kn=!0;try{for(var n;;){if(al(),Lt.length===0&&(Te?.flush(),Lt.length===0))return oa=null,n;ns()}}finally{Kn=e}}function ns(){var t=Gn;Aa=!0;try{var e=0;for(Eo(!0);Lt.length>0;){var n=qt.ensure();if(e++>1e3){var r,o;sl()}n.process(Lt),sn.clear()}}finally{Aa=!1,Eo(t),oa=null}}function sl(){try{Bi()}catch(t){rr(t,oa)}}let zt=null;function So(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Vt|vt))===0&&ca(r)&&(zt=new Set,Xr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?ms(r):r.fn=null),zt?.size>0)){sn.clear();for(const o of zt){if((o.f&(Vt|vt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)zt.has(i)&&(zt.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(Vt|vt))===0&&Xr(c)}}zt.clear()}}zt=null}}function rs(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Ze)!==0?rs(o,e,n,r):(s&(Qa|Gt))!==0&&(s&ct)===0&&as(o,e,r)&&(tt(o,ct),Nn(o))}}function as(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Ze)!==0&&as(o,e,n))return n.set(o,!0),!0}return n.set(t,!1),!1}function Nn(t){for(var e=oa=t;e.parent!==null;){e=e.parent;var n=e.f;if(Aa&&e===Se&&(n&Gt)!==0)return;if((n&(Mn|Zt))!==0){if((n&et)===0)return;e.f^=et}}Lt.push(e)}function il(t){let e=0,n=Kt(0),r;return()=>{bl()&&(a(n),la(()=>(e===0&&(r=Ot(()=>t(()=>hr(n)))),e+=1,()=>{In(()=>{e-=1,e===0&&(r?.(),r=void 0,hr(n))})})))}}var ll=un|sr|na;function cl(t,e,n){new ul(t,e,n)}var pt,gt,Ya,Tt,En,At,_t,st,Dt,Ht,nn,Pn,rn,xn,an,$r,ea,qe,dl,fl,La,zr,jr,Ma;class ul{constructor(e,n,r){Pe(this,qe);ut(this,"parent");Pe(this,pt,!1);Pe(this,gt);Pe(this,Ya,null);Pe(this,Tt);Pe(this,En);Pe(this,At);Pe(this,_t,null);Pe(this,st,null);Pe(this,Dt,null);Pe(this,Ht,null);Pe(this,nn,null);Pe(this,Pn,0);Pe(this,rn,0);Pe(this,xn,!1);Pe(this,an,null);Pe(this,$r,()=>{L(this,an)&&Wt(L(this,an),L(this,Pn))});Pe(this,ea,il(()=>(fe(this,an,Kt(L(this,Pn))),()=>{fe(this,an,null)})));fe(this,gt,e),fe(this,Tt,n),fe(this,En,r),this.parent=Se.b,fe(this,pt,!!L(this,Tt).pending),fe(this,At,cr(()=>{Se.b=this;{var o=Le(this,qe,La).call(this);try{fe(this,_t,St(()=>r(o)))}catch(s){this.error(s)}L(this,rn)>0?Le(this,qe,jr).call(this):fe(this,pt,!1)}return()=>{L(this,nn)?.remove()}},ll))}is_pending(){return L(this,pt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!L(this,Tt).pending}update_pending_count(e){Le(this,qe,Ma).call(this,e),fe(this,Pn,L(this,Pn)+e),Ta.add(L(this,$r))}get_effect_pending(){return L(this,ea).call(this),a(L(this,an))}error(e){var n=L(this,Tt).onerror;let r=L(this,Tt).failed;if(L(this,xn)||!n&&!r)throw e;L(this,_t)&&(lt(L(this,_t)),fe(this,_t,null)),L(this,st)&&(lt(L(this,st)),fe(this,st,null)),L(this,Dt)&&(lt(L(this,Dt)),fe(this,Dt,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&Ui(),qt.ensure(),fe(this,Pn,0),L(this,Dt)!==null&&Xn(L(this,Dt),()=>{fe(this,Dt,null)}),fe(this,pt,this.has_pending_snippet()),fe(this,_t,Le(this,qe,zr).call(this,()=>(fe(this,xn,!1),St(()=>L(this,En).call(this,L(this,gt)))))),L(this,rn)>0?Le(this,qe,jr).call(this):fe(this,pt,!1)};var l=_e;try{it(null),s=!0,n?.(e,i),s=!1}catch(c){rr(c,L(this,At)&&L(this,At).parent)}finally{it(l)}r&&In(()=>{fe(this,Dt,Le(this,qe,zr).call(this,()=>{qt.ensure(),fe(this,xn,!0);try{return St(()=>{r(L(this,gt),()=>e,()=>i)})}catch(c){return rr(c,L(this,At).parent),null}finally{fe(this,xn,!1)}}))})}}pt=new WeakMap,gt=new WeakMap,Ya=new WeakMap,Tt=new WeakMap,En=new WeakMap,At=new WeakMap,_t=new WeakMap,st=new WeakMap,Dt=new WeakMap,Ht=new WeakMap,nn=new WeakMap,Pn=new WeakMap,rn=new WeakMap,xn=new WeakMap,an=new WeakMap,$r=new WeakMap,ea=new WeakMap,qe=new WeakSet,dl=function(){try{fe(this,_t,St(()=>L(this,En).call(this,L(this,gt))))}catch(e){this.error(e)}fe(this,pt,!1)},fl=function(){const e=L(this,Tt).pending;e&&(fe(this,st,St(()=>e(L(this,gt)))),qt.enqueue(()=>{var n=Le(this,qe,La).call(this);fe(this,_t,Le(this,qe,zr).call(this,()=>(qt.ensure(),St(()=>L(this,En).call(this,n))))),L(this,rn)>0?Le(this,qe,jr).call(this):(Xn(L(this,st),()=>{fe(this,st,null)}),fe(this,pt,!1))}))},La=function(){var e=L(this,gt);return L(this,pt)&&(fe(this,nn,dn()),L(this,gt).before(L(this,nn)),e=L(this,nn)),e},zr=function(e){var n=Se,r=_e,o=Ae;Mt(L(this,At)),it(L(this,At)),nr(L(this,At).ctx);try{return e()}catch(s){return Qo(s),null}finally{Mt(n),it(r),nr(o)}},jr=function(){const e=L(this,Tt).pending;L(this,_t)!==null&&(fe(this,Ht,document.createDocumentFragment()),L(this,Ht).append(L(this,nn)),bs(L(this,_t),L(this,Ht))),L(this,st)===null&&fe(this,st,St(()=>e(L(this,gt))))},Ma=function(e){var n;if(!this.has_pending_snippet()){this.parent&&Le(n=this.parent,qe,Ma).call(n,e);return}fe(this,rn,L(this,rn)+e),L(this,rn)===0&&(fe(this,pt,!1),L(this,st)&&Xn(L(this,st),()=>{fe(this,st,null)}),L(this,Ht)&&(L(this,gt).before(L(this,Ht)),fe(this,Ht,null)))};function vl(t,e,n){const r=lr()?Cr:sa;if(e.length===0){n(t.map(r));return}var o=Te,s=Se,i=os();Promise.all(e.map(l=>hl(l))).then(l=>{i();try{n([...t.map(r),...l])}catch(c){(s.f&Vt)===0&&rr(c,s)}o?.deactivate(),Yr()}).catch(l=>{rr(l,s)})}function os(){var t=Se,e=_e,n=Ae,r=Te;return function(){Mt(t),it(e),nr(n),r?.activate()}}function Yr(){Mt(null),it(null),nr(null)}function Cr(t){var e=Ze|ct,n=_e!==null&&(_e.f&Ze)!==0?_e:null;return Se===null||n!==null&&(n.f&mt)!==0?e|=mt:Se.f|=sr,{ctx:Ae,deps:null,effects:null,equals:Xo,f:e,fn:t,reactions:null,rv:0,v:Ye,wv:0,parent:n??Se,ac:null}}function hl(t,e){let n=Se;n===null&&Mi();var r=n.b,o=void 0,s=Kt(Ye),i=!_e,l=new Map;return El(()=>{var c=Vo();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===Te&&u.committed&&u.deactivate(),Yr()})}catch(h){c.reject(h),Yr()}var u=Te;if(i){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(Vn),l.delete(u),l.set(u,c)}const f=(h,g=void 0)=>{if(u.activate(),g)g!==Vn&&(s.f|=Tn,Wt(s,g));else{(s.f&Tn)!==0&&(s.f^=Tn),Wt(s,h);for(const[p,y]of l){if(l.delete(p),p===u)break;y.reject(Vn)}}i&&(r.update_pending_count(-1),u.decrement(d))};c.promise.then(f,h=>f(null,h||"unknown"))}),hs(()=>{for(const c of l.values())c.reject(Vn)}),new Promise(c=>{function u(d){function f(){d===o?c(s):u(o)}d.then(f,f)}u(o)})}function M(t){const e=Cr(t);return Ss(e),e}function sa(t){const e=Cr(t);return e.equals=Go,e}function ss(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)lt(e[n])}}function pl(t){for(var e=t.parent;e!==null;){if((e.f&Ze)===0)return e;e=e.parent}return null}function $a(t){var e,n=Se;Mt(pl(t));try{t.f&=~Wr,ss(t),e=Ps(t)}finally{Mt(n)}return e}function is(t){var e=$a(t);if(t.equals(e)||(t.v=e,t.wv=ks()),!On)if(Ct!==null)Ct.set(t,t.v);else{var n=(on||(t.f&mt)!==0)&&t.deps!==null?fn:et;tt(t,n)}}const sn=new Map;function Kt(t,e){var n={f:0,v:t,reactions:null,equals:Xo,rv:0,wv:0};return n}function U(t,e){const n=Kt(t);return Ss(n),n}function Ia(t,e=!1,n=!0){var o;const r=Kt(t);return e||(r.equals=Go),ir&&n&&Ae!==null&&Ae.l!==null&&((o=Ae.l).s??(o.s=[])).push(r),r}function v(t,e,n=!1){_e!==null&&(!kt||(_e.f&bo)!==0)&&lr()&&(_e.f&(Ze|Gt|Qa|bo))!==0&&!Yt?.includes(t)&&Hi();let r=n?Xe(e):e;return Wt(t,r)}function Wt(t,e){if(!t.equals(e)){var n=t.v;On?sn.set(t,e):sn.set(t,n),t.v=e;var r=qt.ensure();r.capture(t,n),(t.f&Ze)!==0&&((t.f&ct)!==0&&$a(t),tt(t,(t.f&mt)===0?et:fn)),t.wv=ks(),ls(t,ct),lr()&&Se!==null&&(Se.f&et)!==0&&(Se.f&(Zt|Mn))===0&&(ht===null?Tl([t]):ht.push(t))}return e}function hr(t){v(t,t.v+1)}function ls(t,e){var n=t.reactions;if(n!==null)for(var r=lr(),o=n.length,s=0;s<o;s++){var i=n[s],l=i.f;if(!(!r&&i===Se)){var c=(l&ct)===0;c&&tt(i,e),(l&Ze)!==0?(l&Wr)===0&&(i.f|=Wr,ls(i,fn)):c&&((l&Gt)!==0&&zt!==null&&zt.add(i),Nn(i))}}}function Xe(t){if(typeof t!="object"||t===null||An in t)return t;const e=Ga(t);if(e!==Ei&&e!==Pi)return t;var n=new Map,r=Ka(t),o=U(0),s=Dn,i=l=>{if(Dn===s)return l();var c=_e,u=Dn;it(null),xo(s);var d=l();return it(c),xo(u),d};return r&&n.set("length",U(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&zi();var d=n.get(c);return d===void 0?d=i(()=>{var f=U(u.value);return n.set(c,f),f}):v(d,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const d=i(()=>U(Ye));n.set(c,d),hr(o)}}else v(u,Ye),hr(o);return!0},get(l,c,u){if(c===An)return t;var d=n.get(c),f=c in l;if(d===void 0&&(!f||Yn(l,c)?.writable)&&(d=i(()=>{var g=Xe(f?l[c]:Ye),p=U(g);return p}),n.set(c,d)),d!==void 0){var h=a(d);return h===Ye?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=n.get(c);d&&(u.value=a(d))}else if(u===void 0){var f=n.get(c),h=f?.v;if(f!==void 0&&h!==Ye)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){if(c===An)return!0;var u=n.get(c),d=u!==void 0&&u.v!==Ye||Reflect.has(l,c);if(u!==void 0||Se!==null&&(!d||Yn(l,c)?.writable)){u===void 0&&(u=i(()=>{var h=d?Xe(l[c]):Ye,g=U(h);return g}),n.set(c,u));var f=a(u);if(f===Ye)return!1}return d},set(l,c,u,d){var f=n.get(c),h=c in l;if(r&&c==="length")for(var g=u;g<f.v;g+=1){var p=n.get(g+"");p!==void 0?v(p,Ye):g in l&&(p=i(()=>U(Ye)),n.set(g+"",p))}if(f===void 0)(!h||Yn(l,c)?.writable)&&(f=i(()=>U(void 0)),v(f,Xe(u)),n.set(c,f));else{h=f.v!==Ye;var y=i(()=>Xe(u));v(f,y)}var m=Reflect.getOwnPropertyDescriptor(l,c);if(m?.set&&m.set.call(d,u),!h){if(r&&typeof c=="string"){var C=n.get("length"),P=Number(c);Number.isInteger(P)&&P>=C.v&&v(C,P+1)}hr(o)}return!0},ownKeys(l){a(o);var c=Reflect.ownKeys(l).filter(f=>{var h=n.get(f);return h===void 0||h.v!==Ye});for(var[u,d]of n)d.v!==Ye&&!(u in l)&&c.push(u);return c},setPrototypeOf(){ji()}})}var Co,cs,us,ds;function gl(){if(Co===void 0){Co=window,cs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;us=Yn(e,"firstChild").get,ds=Yn(e,"nextSibling").get,wo(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),wo(n)&&(n.__t=void 0)}}function dn(t=""){return document.createTextNode(t)}function ar(t){return us.call(t)}function kr(t){return ds.call(t)}function b(t,e){return ar(t)}function B(t,e=!1){{var n=ar(t);return n instanceof Comment&&n.data===""?kr(n):n}}function q(t,e=1,n=!1){let r=t;for(;e--;)r=kr(r);return r}function _l(t){t.textContent=""}function fs(){return!1}let ko=!1;function ml(){ko||(ko=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function ia(t){var e=_e,n=Se;it(null),Mt(null);try{return t()}finally{it(e),Mt(n)}}function yl(t,e,n,r=n){t.addEventListener(e,()=>ia(n));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),ml()}function vs(t){Se===null&&_e===null&&Ri(),_e!==null&&(_e.f&mt)!==0&&Se===null&&Oi(),On&&Ii()}function wl(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function It(t,e,n,r=!0){var o=Se;o!==null&&(o.f&vt)!==0&&(t|=vt);var s={ctx:Ae,deps:null,nodes_start:null,nodes_end:null,f:t|ct,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Xr(s),s.f|=Ja}catch(c){throw lt(s),c}else e!==null&&Nn(s);if(r){var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&sr)===0&&(i=i.first,(t&Gt)!==0&&(t&un)!==0&&i!==null&&(i.f|=un)),i!==null&&(i.parent=o,o!==null&&wl(i,o),_e!==null&&(_e.f&Ze)!==0&&(t&Mn)===0)){var l=_e;(l.effects??(l.effects=[])).push(i)}}return s}function bl(){return _e!==null&&!kt}function hs(t){const e=It(ta,null,!1);return tt(e,et),e.teardown=t,e}function De(t){vs();var e=Se.f,n=!_e&&(e&Zt)!==0&&(e&Ja)===0;if(n){var r=Ae;(r.e??(r.e=[])).push(t)}else return ps(t)}function ps(t){return It(Za|Wo,t,!1)}function Sl(t){return vs(),It(ta|Wo,t,!0)}function Cl(t){qt.ensure();const e=It(Mn|sr,t,!0);return(n={})=>new Promise(r=>{n.outro?Xn(e,()=>{lt(e),r(void 0)}):(lt(e),r(void 0))})}function kl(t){return It(Za,t,!1)}function El(t){return It(Qa|sr,t,!0)}function la(t,e=0){return It(ta|e,t,!0)}function de(t,e=[],n=[]){vl(e,n,r=>{It(ta,()=>t(...r.map(a)),!0)})}function cr(t,e=0){var n=It(Gt|e,t,!0);return n}function St(t,e=!0){return It(Zt|sr,t,!0,e)}function gs(t){var e=t.teardown;if(e!==null){const n=On,r=_e;Po(!0),it(null);try{e.call(null)}finally{Po(n),it(r)}}}function _s(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const o=n.ac;o!==null&&ia(()=>{o.abort(Vn)});var r=n.next;(n.f&Mn)!==0?n.parent=null:lt(n,e),n=r}}function Pl(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Zt)===0&&lt(e),e=n}}function lt(t,e=!0){var n=!1;(e||(t.f&Di)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(xl(t.nodes_start,t.nodes_end),n=!0),_s(t,e&&!n),Kr(t,0),tt(t,Vt);var r=t.transitions;if(r!==null)for(const s of r)s.stop();gs(t);var o=t.parent;o!==null&&o.first!==null&&ms(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function xl(t,e){for(;t!==null;){var n=t===e?null:kr(t);t.remove(),t=n}}function ms(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Xn(t,e,n=!0){var r=[];eo(t,r,!0),ys(r,()=>{n&&lt(t),e&&e()})}function ys(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var o of t)o.out(r)}else e()}function eo(t,e,n){if((t.f&vt)===0){if(t.f^=vt,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var o=r.next,s=(r.f&un)!==0||(r.f&Zt)!==0&&(t.f&Gt)!==0;eo(r,e,s?n:!1),r=o}}}function to(t){ws(t,!0)}function ws(t,e){if((t.f&vt)!==0){t.f^=vt,(t.f&et)===0&&(tt(t,ct),Nn(t));for(var n=t.first;n!==null;){var r=n.next,o=(n.f&un)!==0||(n.f&Zt)!==0;ws(n,o?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function bs(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var o=n===r?null:kr(n);e.append(n),n=o}}let Gn=!1;function Eo(t){Gn=t}let On=!1;function Po(t){On=t}let _e=null,kt=!1;function it(t){_e=t}let Se=null;function Mt(t){Se=t}let Yt=null;function Ss(t){_e!==null&&(Yt===null?Yt=[t]:Yt.push(t))}let $e=null,dt=0,ht=null;function Tl(t){ht=t}let Cs=1,_r=0,Dn=_r;function xo(t){Dn=t}let on=!1;function ks(){return++Cs}function ca(t){var e=t.f;if((e&ct)!==0)return!0;if((e&fn)!==0){var n=t.deps,r=(e&mt)!==0;if(e&Ze&&(t.f&=~Wr),n!==null){var o,s,i=(e&Vr)!==0,l=r&&Se!==null&&!on,c=n.length;if((i||l)&&(Se===null||(Se.f&Vt)===0)){var u=t,d=u.parent;for(o=0;o<c;o++)s=n[o],(i||!s?.reactions?.includes(u))&&(s.reactions??(s.reactions=[])).push(u);i&&(u.f^=Vr),l&&d!==null&&(d.f&mt)===0&&(u.f^=mt)}for(o=0;o<c;o++)if(s=n[o],ca(s)&&is(s),s.wv>t.wv)return!0}(!r||Se!==null&&!on)&&tt(t,et)}return!1}function Es(t,e,n=!0){var r=t.reactions;if(r!==null&&!Yt?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Ze)!==0?Es(s,e,!1):e===s&&(n?tt(s,ct):(s.f&et)!==0&&tt(s,fn),Nn(s))}}function Ps(t){var y;var e=$e,n=dt,r=ht,o=_e,s=on,i=Yt,l=Ae,c=kt,u=Dn,d=t.f;$e=null,dt=0,ht=null,on=(d&mt)!==0&&(kt||!Gn||_e===null),_e=(d&(Zt|Mn))===0?t:null,Yt=null,nr(t.ctx),kt=!1,Dn=++_r,t.ac!==null&&(ia(()=>{t.ac.abort(Vn)}),t.ac=null);try{t.f|=xa;var f=t.fn,h=f(),g=t.deps;if($e!==null){var p;if(Kr(t,dt),g!==null&&dt>0)for(g.length=dt+$e.length,p=0;p<$e.length;p++)g[dt+p]=$e[p];else t.deps=g=$e;if(!on||(d&Ze)!==0&&t.reactions!==null)for(p=dt;p<g.length;p++)((y=g[p]).reactions??(y.reactions=[])).push(t)}else g!==null&&dt<g.length&&(Kr(t,dt),g.length=dt);if(lr()&&ht!==null&&!kt&&g!==null&&(t.f&(Ze|fn|ct))===0)for(p=0;p<ht.length;p++)Es(ht[p],t);return o!==null&&o!==t&&(_r++,ht!==null&&(r===null?r=ht:r.push(...ht))),(t.f&Tn)!==0&&(t.f^=Tn),h}catch(m){return Qo(m)}finally{t.f^=xa,$e=e,dt=n,ht=r,_e=o,on=s,Yt=i,nr(l),kt=c,Dn=u}}function Al(t,e){let n=e.reactions;if(n!==null){var r=ki.call(n,t);if(r!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(e.f&Ze)!==0&&($e===null||!$e.includes(e))&&(tt(e,fn),(e.f&(mt|Vr))===0&&(e.f^=Vr),ss(e),Kr(e,0))}function Kr(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Al(t,n[r])}function Xr(t){var e=t.f;if((e&Vt)===0){tt(t,et);var n=Se,r=Gn;Se=t,Gn=!0;try{(e&Gt)!==0?Pl(t):_s(t),gs(t);var o=Ps(t);t.teardown=typeof o=="function"?o:null,t.wv=Cs;var s;Uo&&tl&&(t.f&ct)!==0&&t.deps}finally{Gn=r,Se=n}}}async function xs(){await Promise.resolve(),ts()}function a(t){var e=t.f,n=(e&Ze)!==0;if(_e!==null&&!kt){var r=Se!==null&&(Se.f&Vt)!==0;if(!r&&!Yt?.includes(t)){var o=_e.deps;if((_e.f&xa)!==0)t.rv<_r&&(t.rv=_r,$e===null&&o!==null&&o[dt]===t?dt++:$e===null?$e=[t]:(!on||!$e.includes(t))&&$e.push(t));else{(_e.deps??(_e.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[_e]:s.includes(_e)||s.push(_e)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&mt)===0&&(i.f^=mt)}if(On){if(sn.has(t))return sn.get(t);if(n){i=t;var c=i.v;return((i.f&et)===0&&i.reactions!==null||Ts(i))&&(c=$a(i)),sn.set(i,c),c}}else if(n){if(i=t,Ct?.has(i))return Ct.get(i);ca(i)&&is(i)}if(Ct?.has(t))return Ct.get(t);if((t.f&Tn)!==0)throw t.v;return t.v}function Ts(t){if(t.v===Ye)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(sn.has(e)||(e.f&Ze)!==0&&Ts(e))return!0;return!1}function Ot(t){var e=kt;try{return kt=!0,t()}finally{kt=e}}const Dl=-7169;function tt(t,e){t.f=t.f&Dl|e}function Nl(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(An in t)Oa(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&An in n&&Oa(n)}}}function Oa(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Oa(t[r],e)}catch{}const n=Ga(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=qo(n);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Ll=["touchstart","touchmove"];function Ml(t){return Ll.includes(t)}const As=new Set,Ra=new Set;function Il(t,e,n,r={}){function o(s){if(r.capture||ur.call(e,s),!s.cancelBubble)return ia(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?In(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function no(t,e,n,r,o){var s={capture:r,passive:o},i=Il(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&hs(()=>{e.removeEventListener(t,i,s)})}function Ge(t){for(var e=0;e<t.length;e++)As.add(t[e]);for(var n of Ra)n(t)}let To=null;function ur(t){var e=this,n=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;To=t;var i=0,l=To===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){Ea(t,"currentTarget",{configurable:!0,get(){return s||n}});var d=_e,f=Se;it(null),Mt(null);try{for(var h,g=[];s!==null;){var p=s.assignedSlot||s.parentNode||s.host||null;try{var y=s["__"+r];if(y!=null&&(!s.disabled||t.target===s))if(Ka(y)){var[m,...C]=y;m.apply(s,[t,...C])}else y.call(s,t)}catch(P){h?g.push(P):h=P}if(t.cancelBubble||p===e||p===null)break;s=p}if(h){for(let P of g)queueMicrotask(()=>{throw P});throw h}}finally{t.__root=e,delete t.currentTarget,it(d),Mt(f)}}}function Ds(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function mr(t,e){var n=Se;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function K(t,e){var n=(e&Zi)!==0,r=(e&Ji)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=Ds(s?t:"<!>"+t),n||(o=ar(o)));var i=r||cs?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=ar(i),c=i.lastChild;mr(l,c)}else mr(i,i);return i}}function Ol(t,e,n="svg"){var r=!t.startsWith("<!>"),o=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=Ds(o),l=ar(i);s=ar(l)}var c=s.cloneNode(!0);return mr(c,c),c}}function Rl(t,e){return Ol(t,e,"svg")}function Me(t=""){{var e=dn(t+"");return mr(e,e),e}}function J(){var t=document.createDocumentFragment(),e=document.createComment(""),n=dn();return t.append(e,n),mr(e,n),t}function _(t,e){t!==null&&t.before(e)}function nv(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function ln(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Bl(t,e){return Fl(t,e)}const qn=new Map;function Fl(t,{target:e,anchor:n,props:r={},events:o,context:s,intro:i=!0}){gl();var l=new Set,c=f=>{for(var h=0;h<f.length;h++){var g=f[h];if(!l.has(g)){l.add(g);var p=Ml(g);e.addEventListener(g,ur,{passive:p});var y=qn.get(g);y===void 0?(document.addEventListener(g,ur,{passive:p}),qn.set(g,1)):qn.set(g,y+1)}}};c(Xa(As)),Ra.add(c);var u=void 0,d=Cl(()=>{var f=n??e.appendChild(dn());return cl(f,{pending:()=>{}},h=>{if(s){ie({});var g=Ae;g.c=s}o&&(r.$$events=o),u=t(h,r)||{},s&&le()}),()=>{for(var h of l){e.removeEventListener(h,ur);var g=qn.get(h);--g===0?(document.removeEventListener(h,ur),qn.delete(h)):qn.set(h,g)}Ra.delete(c),f!==n&&f.parentNode?.removeChild(f)}});return zl.set(u,d),u}let zl=new WeakMap;var Ut,Nt,bt,br,Sr;class ua{constructor(e,n=!0){ut(this,"anchor");Pe(this,Ut,new Map);Pe(this,Nt,new Map);Pe(this,bt,new Map);Pe(this,br,!0);Pe(this,Sr,()=>{var e=Te;if(L(this,Ut).has(e)){var n=L(this,Ut).get(e),r=L(this,Nt).get(n);if(r)to(r);else{var o=L(this,bt).get(n);o&&(L(this,Nt).set(n,o.effect),L(this,bt).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of L(this,Ut)){if(L(this,Ut).delete(s),s===e)break;const l=L(this,bt).get(i);l&&(lt(l.effect),L(this,bt).delete(i))}for(const[s,i]of L(this,Nt)){if(s===n)continue;const l=()=>{if(Array.from(L(this,Ut).values()).includes(s)){var u=document.createDocumentFragment();bs(i,u),u.append(dn()),L(this,bt).set(s,{effect:i,fragment:u})}else lt(i);L(this,Nt).delete(s)};L(this,br)||!r?Xn(i,l,!1):l()}}});this.anchor=e,fe(this,br,n)}ensure(e,n){var r=Te,o=fs();if(n&&!L(this,Nt).has(e)&&!L(this,bt).has(e))if(o){var s=document.createDocumentFragment(),i=dn();s.append(i),L(this,bt).set(e,{effect:St(()=>n(i)),fragment:s})}else L(this,Nt).set(e,St(()=>n(this.anchor)));if(L(this,Ut).set(r,e),o){for(const[l,c]of L(this,Nt))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of L(this,bt))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.add_callback(L(this,Sr))}else L(this,Sr).call(this)}}Ut=new WeakMap,Nt=new WeakMap,bt=new WeakMap,br=new WeakMap,Sr=new WeakMap;const jl=0,ba=1;function Hl(t,e,n,r,o){var s=lr(),i=Ye,l=s?Kt(i):Ia(i,!1,!1),c=s?Kt(i):Ia(i,!1,!1),u=new ua(t);cr(()=>{var d=e(),f=!1;if(xi(d)){var h=os(),g=!1;const p=y=>{if(!f){g=!0,h();try{y()}finally{Yr(),Kn||ts()}}};d.then(y=>{p(()=>{Wt(l,y),u.ensure(ba,r&&(m=>r(m,l)))})},y=>{p(()=>{if(Wt(c,y),u.ensure(ba,o&&(m=>o(m,c))),!o)throw c.v})}),In(()=>{g||p(()=>{u.ensure(jl,n)})})}else Wt(l,d),u.ensure(ba,r&&(p=>r(p,l)));return()=>{f=!0}})}function Y(t,e,n=!1){var r=new ua(t),o=n?un:0;function s(i,l){r.ensure(i,l)}cr(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function ue(t,e){la(()=>{var n=e();for(var r in n){var o=n[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Ul(t,e,n){for(var r=t.items,o=[],s=e.length,i=0;i<s;i++)eo(e[i].e,o,!0);var l=s>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;_l(c),c.append(n),r.clear(),xt(t,e[0].prev,e[s-1].next)}ys(o,()=>{for(var u=0;u<s;u++){var d=e[u];l||(r.delete(d.k),xt(t,d.prev,d.next)),lt(d.e,!l)}})}function da(t,e,n,r,o,s=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&Ko)!==0;if(c){var u=t;i=u.appendChild(dn())}var d=null,f=!1,h=new Map,g=sa(()=>{var C=n();return Ka(C)?C:C==null?[]:Xa(C)}),p,y;function m(){ql(y,p,l,h,i,o,e,r,n),s!==null&&(p.length===0?d?to(d):d=St(()=>s(i)):d!==null&&Xn(d,()=>{d=null}))}cr(()=>{y??(y=Se),p=a(g);var C=p.length;if(!(f&&C===0)){f=C===0;var P,k,w,E;if(fs()){var x=new Set,F=Te;for(k=0;k<C;k+=1){w=p[k],E=r(w,k);var A=l.items.get(E)??h.get(E);A?(e&(ra|aa))!==0&&Ns(A,w,k,e):(P=Ls(null,l,null,null,w,E,k,o,e,n,!0),h.set(E,P)),x.add(E)}for(const[R,N]of l.items)x.has(R)||F.skipped_effects.add(N.e);F.add_callback(m)}else m();a(g)}})}function ql(t,e,n,r,o,s,i,l,c){var u=(i&qi)!==0,d=(i&(ra|aa))!==0,f=e.length,h=n.items,g=n.first,p=g,y,m=null,C,P=[],k=[],w,E,x,F;if(u)for(F=0;F<f;F+=1)w=e[F],E=l(w,F),x=h.get(E),x!==void 0&&(x.a?.measure(),(C??(C=new Set)).add(x));for(F=0;F<f;F+=1){if(w=e[F],E=l(w,F),x=h.get(E),x===void 0){var A=r.get(E);if(A!==void 0){r.delete(E),h.set(E,A);var R=m?m.next:p;xt(n,m,A),xt(n,A,R),Sa(A,R,o),m=A}else{var N=p?p.e.nodes_start:o;m=Ls(N,n,m,m===null?n.first:m.next,w,E,F,s,i,c)}h.set(E,m),P=[],k=[],p=m.next;continue}if(d&&Ns(x,w,F,i),(x.e.f&vt)!==0&&(to(x.e),u&&(x.a?.unfix(),(C??(C=new Set)).delete(x))),x!==p){if(y!==void 0&&y.has(x)){if(P.length<k.length){var I=k[0],G;m=I.prev;var V=P[0],T=P[P.length-1];for(G=0;G<P.length;G+=1)Sa(P[G],I,o);for(G=0;G<k.length;G+=1)y.delete(k[G]);xt(n,V.prev,T.next),xt(n,m,V),xt(n,T,I),p=I,m=T,F-=1,P=[],k=[]}else y.delete(x),Sa(x,p,o),xt(n,x.prev,x.next),xt(n,x,m===null?n.first:m.next),xt(n,m,x),m=x;continue}for(P=[],k=[];p!==null&&p.k!==E;)(p.e.f&vt)===0&&(y??(y=new Set)).add(p),k.push(p),p=p.next;if(p===null)continue;x=p}P.push(x),m=x,p=x.next}if(p!==null||y!==void 0){for(var X=y===void 0?[]:Xa(y);p!==null;)(p.e.f&vt)===0&&X.push(p),p=p.next;var Z=X.length;if(Z>0){var re=(i&Ko)!==0&&f===0?o:null;if(u){for(F=0;F<Z;F+=1)X[F].a?.measure();for(F=0;F<Z;F+=1)X[F].a?.fix()}Ul(n,X,re)}}u&&In(()=>{if(C!==void 0)for(x of C)x.a?.apply()}),t.first=n.first&&n.first.e,t.last=m&&m.e;for(var $ of r.values())lt($.e);r.clear()}function Ns(t,e,n,r){(r&ra)!==0&&Wt(t.v,e),(r&aa)!==0?Wt(t.i,n):t.i=n}function Ls(t,e,n,r,o,s,i,l,c,u,d){var f=(c&ra)!==0,h=(c&Vi)===0,g=f?h?Ia(o,!1,!1):Kt(o):o,p=(c&aa)===0?i:Kt(i),y={i:p,v:g,k:s,a:null,e:null,prev:n,next:r};try{if(t===null){var m=document.createDocumentFragment();m.append(t=dn())}return y.e=St(()=>l(t,g,p,u),$i),y.e.prev=n&&n.e,y.e.next=r&&r.e,n===null?d||(e.first=y):(n.next=y,n.e.next=y.e),r!==null&&(r.prev=y,r.e.prev=y.e),y}finally{}}function Sa(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var i=kr(s);o.before(s),s=i}}function xt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function ke(t,e,...n){var r=new ua(t);cr(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...n)))},un)}function Vl(t,e,n){var r=new ua(t);cr(()=>{var o=e()??null;r.ensure(o,o&&(s=>n(s,o)))},un)}function Ms(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=Ms(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Wl(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=Ms(t))&&(r&&(r+=" "),r+=e);return r}function ye(t){return typeof t=="object"?Wl(t):t??""}const Ao=[...` 	
\r\f \v\uFEFF`];function Yl(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||Ao.includes(r[i-1]))&&(l===r.length||Ao.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Kl(t,e){return t==null?null:String(t)}function we(t,e,n,r,o,s){var i=t.__className;if(i!==n||i===void 0){var l=Yl(n,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function Ln(t,e,n,r){var o=t.__style;if(o!==e){var s=Kl(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Xl=Symbol("is custom element"),Gl=Symbol("is html");function rv(t,e){var n=ro(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function av(t,e){var n=ro(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Re(t,e,n,r){var o=ro(t);o[e]!==(o[e]=n)&&(e==="loading"&&(t[Li]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Zl(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function ro(t){return t.__attributes??(t.__attributes={[Xl]:t.nodeName.includes("-"),[Gl]:t.namespaceURI===Qi})}var Do=new Map;function Zl(t){var e=t.getAttribute("is")||t.nodeName,n=Do.get(e);if(n)return n;Do.set(e,n=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=qo(o);for(var i in r)r[i].set&&n.push(i);o=Ga(o)}return n}function Jl(t,e,n=e){var r=new WeakSet;yl(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=Ca(t)?ka(s):s,n(s),Te!==null&&r.add(Te),await xs(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),Ot(e)==null&&t.value&&(n(Ca(t)?ka(t.value):t.value),Te!==null&&r.add(Te)),la(()=>{var o=e();if(t===document.activeElement){var s=Fr??Te;if(r.has(s))return}Ca(t)&&o===ka(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Ca(t){var e=t.type;return e==="number"||e==="range"}function ka(t){return t===""?null:+t}function No(t,e){return t===e||t?.[An]===e}function Je(t={},e,n,r){return kl(()=>{var o,s;return la(()=>{o=s,s=[],Ot(()=>{t!==n(...s)&&(e(t,...s),o&&No(n(...o),t)&&e(null,...o))})}),()=>{In(()=>{s&&No(n(...s),t)&&e(null,...s)})}}),t}function fa(t=!1){const e=Ae,n=e.l.u;if(!n)return;let r=()=>Nl(e.s);if(t){let o=0,s={};const i=Cr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>a(i)}n.b.length&&Sl(()=>{Lo(e,r),Pa(n.b)}),De(()=>{const o=Ot(()=>n.m.map(Ti));return()=>{for(const s of o)typeof s=="function"&&s()}}),n.a.length&&De(()=>{Lo(e,r),Pa(n.a)})}function Lo(t,e){if(t.l.s)for(const n of t.l.s)a(n);e()}let Or=!1;function Ql(t){var e=Or;try{return Or=!1,[t(),Or]}finally{Or=e}}function ge(t,e,n,r){var o=!ir||(n&Yi)!==0,s=(n&Xi)!==0,i=(n&Gi)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?Ot(r):r),l),d;if(s){var f=An in t||Ni in t;d=Yn(t,e)?.set??(f&&e in t?k=>t[e]=k:void 0)}var h,g=!1;s?[h,g]=Ql(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=u(),d&&(o&&Fi(),d(h)));var p;if(o?p=()=>{var k=t[e];return k===void 0?u():(c=!0,k)}:p=()=>{var k=t[e];return k!==void 0&&(l=void 0),k===void 0?l:k},o&&(n&Ki)===0)return p;if(d){var y=t.$$legacy;return(function(k,w){return arguments.length>0?((!o||!w||y||g)&&d(w?p():k),k):p()})}var m=!1,C=((n&Wi)!==0?Cr:sa)(()=>(m=!1,p()));s&&a(C);var P=Se;return(function(k,w){if(arguments.length>0){const E=w?a(C):o&&s?Xe(k):k;return v(C,E),m=!0,l!==void 0&&(l=E),k}return On&&m||(P.f&Vt)!==0?C.v:a(C)})}function Ce(t){Ae===null&&Yo(),ir&&Ae.l!==null?$l(Ae).m.push(t):De(()=>{const e=Ot(t);if(typeof e=="function")return e})}function $l(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const ec="5";var Ho;typeof window<"u"&&((Ho=window.__svelte??(window.__svelte={})).v??(Ho.v=new Set)).add(ec);nl();const Is={};function tc(t){je(Is,t)}function Os(){const t=Ve(Is);if(!t)throw new Error("No FeedSearchContext found");return t}const Rs={};function nc(t){je(Rs,t)}function Et(){const t=Ve(Rs);if(!t)throw new Error("No AppHistoryContext found");return t}function rc(t,e){ie(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=Et(),s="feedSearch",i=M(()=>o().searchParams.get(s)||""),l=M(()=>a(i));tc({getFeedSearch:()=>a(l),setFeedSearch:d=>{d===""?r(s):n(s,d)}});var c=J(),u=B(c);ke(u,()=>e.children??xe),_(t,c),le()}const Bs={};function ac(t){je(Bs,t)}function oc(){const t=Ve(Bs);if(!t)throw new Error("No TagsSearchContext found");return t}function sc(t,e){ie(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=Et(),s="tagsSearch",i=M(()=>o().searchParams.get(s)||""),l=M(()=>a(i));ac({getTagsSearch:()=>a(l),setTagsSearch:d=>{d===""?r(s):n(s,d)}});var c=J(),u=B(c);ke(u,()=>e.children??xe),_(t,c),le()}const Fs={};function ic(t){je(Fs,t)}function zs(){const t=Ve(Fs);if(!t)throw new Error("No FeedOrderContext found");return t}function lc(t,e){ie(e,!0);const{setSearchParam:n,deleteSearchParam:r,getAppLocation:o}=Et(),s="feedOrder",i=M(()=>o().searchParams.get(s)||"newest"),l=M(()=>a(i));ic({getFeedOrder:()=>a(l),setFeedOrder:d=>{d==="newest"?r(s):n(s,d)}});var c=J(),u=B(c);ke(u,()=>e.children??xe),_(t,c),le()}const js={};function cc(t){je(js,t)}function va(){const t=Ve(js);if(!t)throw new Error("No SidebarContext found");return t}function uc(t,e){ie(e,!0);const n=(d,f)=>{if(!f)return d;if(f.type==="closed")return{type:"closed"};switch(d.type){case"opened":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:f.type==="swipe"?{type:"openSwiping"}:d;case"closed":return f.type==="open"?{type:"opening"}:f.type==="swipe"?{type:"closeSwiping"}:d;case"openSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"closeSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"opening":return f.type==="opened"?{type:"opened"}:d;default:return d}};let r=U(Xe(n({type:"closed"})));const o=d=>{const f=Ot(()=>a(r));v(r,n(f,d),!0)};cc({sidebarOpen:()=>{o({type:"open"})},sidebarClose:()=>{o({type:"close"})},handleComputeState:o,getSidebarState:()=>a(r)});var c=J(),u=B(c);ke(u,()=>e.children??xe),_(t,c),le()}const Hs={};function dc(t){je(Hs,t)}function ao(){const t=Ve(Hs);if(!t)throw new Error("No SelectedTagsContext found");return t}function fc(t,e){ie(e,!0);const{getAppLocation:n,setSearchParam:r,deleteSearchParam:o}=Et(),s=M(n),i=M(()=>a(s).searchParams),l="selectedTags";let c=M(()=>a(i).get(l)||""),u=M(()=>new Set(a(c).split(",").map(C=>decodeURIComponent(C)).filter(C=>C!=="")));dc({getSelectedTags:()=>a(u),addTag:C=>{a(u).has(C)||r(l,[...a(u),C].map(P=>encodeURIComponent(P)).join(","))},removeTag:C=>{a(u).has(C)&&a(u).size===1?o(l):a(u).has(C)&&r(l,[...a(u)].filter(P=>P!==C).map(P=>encodeURIComponent(P)).join(","))},clearTags:()=>{o(l)},setSelectedTags:C=>{C.size===0?o(l):r(l,[...C].map(P=>encodeURIComponent(P)).join(","))}});var y=J(),m=B(y);ke(m,()=>e.children??xe),_(t,y),le()}const Us={};function vc(t){je(Us,t)}function oo(){const t=Ve(Us);if(!t)throw new Error("No LocalDBContext found");return t}const qs={};function hc(t){je(qs,t)}function pc(){const t=Ve(qs);if(!t)throw new Error("No SettingsContext found");return t}const Vs={};function gc(t){je(Vs,t)}function ha(){const t=Ve(Vs);if(!t)throw new Error("No BroadcastContext found");return t}const _c="AppStorage",mc=1,dr="account",Hr="settings",Qe="notes",en="tags",yc="syncLog",vn="success",hn="error",He=(t,e,n)=>{t?.addEventListener(e,n)},Mo=(t,e)=>new Promise((n,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();He(s,vn,()=>{const i=s?.result||[];n(i)}),He(s,hn,i=>{r(i)})}),Gr=(t,e,n)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);He(i,vn,()=>{const l=i?.result?.data;r(l)}),He(i,hn,l=>{o(l)})}),Zr=(t,e,n,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:r});He(c,vn,()=>{o()}),He(c,hn,u=>{s(u)})}),_n=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{He(i,vn,()=>{l()}),He(i,hn,u=>{c(u)})})}))},wc=(t,e,n)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);He(l,vn,()=>{r()}),He(l,hn,c=>{o(c)})}),Rr=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{He(i,vn,()=>{l()}),He(i,hn,u=>{c(u)})})}))},Wn=(t,e)=>new Promise((n,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();He(i,vn,()=>{n()}),He(i,hn,l=>{r(l)})});function bc(t,e){ie(e,!0);let n=U(Xe({showFavicon:!0}));const{getDB:r}=oo(),{createBroadcastChannel:o,tabId:s}=ha(),i=o(),l=M(r),c=async()=>{const y=await Gr(a(l),Hr,"default");y&&v(n,y,!0)},u=async()=>{c()},d=async y=>{const m=JSON.parse(y.data),C=m;if(m.tabId&&m.tabId===s){C.type==="exit"&&(v(n,{showFavicon:!0},!0),Wn(a(l),Hr));return}C.type==="updateSettings"?c():C.type==="exit"&&v(n,{showFavicon:!0},!0)},f=()=>a(n).showFavicon,h=async y=>{a(n).showFavicon=y,await Zr(a(l),Hr,"default",{showFavicon:y}),i.postMessage({type:"updateSettings"})};Ce(()=>(u(),i.addEventListener(d),()=>{i.removeEventListener(d)})),hc({getFaviconEnabled:f,setFaviconShown:h});var g=J(),p=B(g);ke(p,()=>e.children??xe),_(t,g),le()}const Ws={};function Sc(t){je(Ws,t)}function Ys(){const t=Ve(Ws);if(!t)throw new Error("No AccountContext found");return t}function Cc(t,e){ie(e,!0);let n=U(void 0);const{getDB:r}=oo(),{createBroadcastChannel:o,tabId:s}=ha(),i=M(r),l=o(),c=async()=>{const k=await Gr(a(i),dr,"default");v(n,k,!0)},u=k=>Zr(a(i),dr,"default",k),d=async k=>{const w=await Gr(a(i),dr,"default");w!==void 0&&v(n,w,!0),k(w)},f=async k=>{const w=JSON.parse(k.data);if(w.tabId&&w.tabId===s)return;const E=w;E.type==="initLocalAccount"?v(n,null):E.type==="initCloudAccount"?c():E.type==="disconnectCloudAccount"?v(n,null):E.type==="exit"?v(n,void 0):E.type==="updateAccount"&&c()};Ce(()=>(l.addEventListener(f),()=>{l.removeEventListener(f)})),Sc({init:d,getAccount:()=>a(n),initLocalAccount:async()=>{v(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async k=>{const w={encryptedClientKey:k.encryptedClientKey||"",subscriptionExpires:k.subscriptionExpires||-1,lastSync:-1};await u(w),v(n,w,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{v(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async k=>{if(!a(n))throw new Error("No account to update subscription for");const w={...a(n),subscriptionExpires:k};await u(w),l.postMessage({type:"updateAccount"})},exitApp:async()=>{v(n,void 0),l.postMessage({type:"exit"}),await Wn(a(i),dr)}});var C=J(),P=B(C);ke(P,()=>e.children??xe),_(t,C),le()}const Ks={};function kc(t){je(Ks,t)}function Jt(){const t=Ve(Ks);if(!t)throw new Error("No NotesContext found");return t}const Ur=()=>crypto.randomUUID(),Ec=t=>{const e=new Set;for(const n of t||[])for(const r of n?.data.tags||[])e.add(r);return e};function Pc(t,e){ie(e,!0);const{getDB:n}=oo(),{createBroadcastChannel:r,tabId:o}=ha(),s=M(n),i=r(),l=720*60*60*1e3;let c=U(!1),u=U(()=>new Map),d=U(()=>[]),f=U(()=>new Map);const h=()=>a(c),g=()=>a(d)().some(S=>S.data&&S.data.deletedAt),p=()=>a(d)().some(S=>S.data&&S.data.archivedAt),y=S=>{const O=a(d)(),D=a(f)(),z=D.get(S.id);z?z.data=S.data:(O.push(S),D.set(S.id,S)),v(d,()=>O),v(f,()=>D)},m=S=>{const O=a(d)(),D=a(f)(),z=D.get(S);D.has(S)&&D.delete(S),z&&(z.data=void 0),v(d,()=>O),v(f,()=>D)},C=S=>{const O=a(d)(),D=a(f)();for(const z of S){const H=D.get(z);D.has(z)&&D.delete(z),H&&(H.data=void 0)}v(d,()=>O),v(f,()=>D)},P=()=>{v(d,()=>[]),v(u,()=>new Map),v(f,()=>new Map)},k=()=>a(d),w=S=>{const O=a(u)();for(const D of S)O.get(D)||O.set(D,{name:D});v(u,()=>O)},E=async()=>{const[S,O]=await Promise.all([Mo(a(s),Qe),Mo(a(s),en).then(oe=>oe.reduce((Ne,We)=>Ne.set(We.id,We.data),new Map))]),D=[],z=[],H=new Map;for(const oe of S)oe.data.deletedAt&&Date.now()-oe.data.deletedAt>l?D.push(oe.id):(z.push(oe),H.set(oe.id,oe));const W=Ec(z),be=[],Ie=new Map(O);W.values().forEach(oe=>{Ie.set(oe,{name:oe,pinned:O.get(oe)?.pinned||!1}),O.has(oe)||be.push(oe)});const he=[];O.keys().forEach(oe=>{W.has(oe)||he.push(oe)}),await Rr(a(s),Qe,D),await Rr(a(s),en,he),await _n(a(s),en,be.map(oe=>({id:oe,data:{pinned:Ie.get(oe)?.pinned||!1}}))),v(d,()=>z),v(f,()=>H),v(u,()=>Ie),v(c,!0)},x=async S=>{const O=a(u)(),D=S.data.tags.filter(z=>!O.has(z))||[];return await Zr(a(s),Qe,S.id,{...S.data}),D.length>0&&(await _n(a(s),en,D.map(z=>({id:z,data:{pinned:!1}}))||[]),w(D)),y(S),i.postMessage({type:"putNote",data:{id:S.id}}),S.id},F=async({url:S,name:O,text:D,tags:z})=>{const H={id:Ur(),data:{url:S,name:O,text:D,tags:z,history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await x(H),H.id},A=async(S,{url:O,name:D,text:z,tags:H})=>{const W=T(S);if(!W||!W.data)return;const be={id:S,data:{...W.data,url:O,name:D,text:z,tags:H,updatedAt:Date.now()}};await x(be)},R=async(S,{url:O,name:D,text:z,tags:H})=>{const W=T(S);if(!W||!W.data)return;const be=Ur(),Ie={id:S,data:{...W.data,url:O,name:D,text:z,tags:H,updatedAt:Date.now(),history:[...(W.data.history||[]).slice(-49),{id:be,name:W.data.name,url:W.data.url,text:W.data.text,tags:W.data.tags,updatedAt:W.data.updatedAt}]}};return await x(Ie),be},N=async(S,O)=>{const D=T(S);if(!D||!D.data)return;const z=D.data.history?.find?.(W=>W.id===O);if(!z)return;const H={id:S,data:{...D.data,url:z.url,name:z.name,text:z.text,tags:z.tags,updatedAt:z.updatedAt,history:D.data.history?.filter?.(W=>W.id!==O)||[]}};await x(H)},I=async S=>{const D=a(f)().get(S);!D||!D.data||(m(S),await wc(a(s),Qe,S),i.postMessage({type:"deleteNote",data:{id:S}}))},G=async S=>{C(S),await Rr(a(s),Qe,S),i.postMessage({type:"reloadNotes"})},V=async()=>{await Wn(a(s),Qe),await Wn(a(s),en),P(),i.postMessage({type:"clearNotes"})},T=S=>a(f)().get(S),X=async(S,O)=>{const z=a(f)().get(S);if(!z||!z.data)return;const H={id:S,data:{...z.data,pinnedAt:O?Date.now():void 0}};x(H)},Z=async S=>{const D=a(f)().get(S);if(!D||!D.data)return;const z={id:S,data:{...D.data,deletedAt:Date.now()}};await x(z)},re=async S=>{const O=a(f)(),D=a(d)(),z=[];D.forEach(H=>{H.data&&S.every(W=>H?.data?.tags.includes(W))&&z.push(H.id)});for(const H of z){const W=O.get(H);W?.data&&(W.data.deletedAt=Date.now())}await _n(a(s),Qe,z.map(H=>{const W=O.get(H);return{id:H,data:W?.data}})),i.postMessage({type:"reloadNotes"}),v(f,()=>O),v(d,()=>D)},$=async S=>{const O=a(f)(),D=a(d)(),z=[];D.forEach(H=>{H.data&&S.every(W=>H?.data?.tags.includes(W))&&z.push(H.id)});for(const H of z){const W=O.get(H);W?.data&&(W.data.deletedAt=0)}await _n(a(s),Qe,z.map(H=>{const W=O.get(H);return{id:H,data:W?.data}})),i.postMessage({type:"reloadNotes"}),v(f,()=>O),v(d,()=>D)},te=async S=>{const D=a(f)().get(S);if(!D||!D.data)return;const z={id:S,data:{...D.data,deletedAt:0}};await x(z)},ee=async(S,O)=>{const D=a(u)();D.set(S,{name:S,pinned:O}),await Zr(a(s),en,S,{pinned:O}),i.postMessage({type:"pinTag",data:{tag:S,pinned:O}}),v(u,()=>D)},ve=async S=>{const O=a(u)(),D=a(d)(),z=[];D.forEach(H=>{H.data&&S.every(W=>H?.data?.tags.includes(W))&&z.push(H.id)}),await G(z),v(d,()=>D),v(u,()=>O)},ae=async S=>{const O=a(f)(),D={};S.forEach(z=>{const H=O.get(z.id),W=[];if(H&&H.data){let be=0,Ie=0;for(;be<z.data.history.length&&Ie<H.data.history.length;){const he=z.data.history[be],oe=H.data.history[Ie];he.id===oe.id?(he.updatedAt>oe.updatedAt?W.push(he):W.push(oe),be+=1,Ie+=1):he.updatedAt<oe.updatedAt?(W.push(he),be+=1):he.updatedAt>oe.updatedAt?(W.push(oe),Ie+=1):(W.push(oe),be+=1,Ie+=1)}H.data.updatedAt>z.data.updatedAt?D[H.id]={id:H.id,data:{...H.data,history:W}}:D[z.id]={id:z.id,data:{...z.data,history:W}}}else D[z.id]=z}),await _n(a(s),Qe,Object.values(D)),await E(),i.postMessage({type:"reloadNotes"})},j=async()=>{const S=[];a(d)().forEach(D=>{D&&D.data&&D.data.deletedAt&&S.push(D.id)}),await Rr(a(s),Qe,S),await E(),i.postMessage({type:"emptyBin"})},ne=async(S,O=[])=>{const D=a(f)(),z=a(d)(),H=[];z.forEach(he=>{he.data&&he?.data?.tags.includes(S)&&O.every(oe=>he?.data?.tags.includes(oe))&&H.push(he.id)});const W=[],be=[];for(const he of H){const oe=D.get(he);oe?.data&&(W.push({id:he,data:{...oe.data}}),be.push({id:he,data:{...oe.data,tags:oe.data.tags.filter(Ne=>Ne!==S),history:[...oe.data.history||[],{id:Ur(),name:oe.data.name,url:oe.data.url,text:oe.data.text,tags:oe.data.tags,updatedAt:Date.now()}]}}))}for(const he of be){const oe=D.get(he.id);oe?.data&&(oe.data=he.data)}return await _n(a(s),Qe,be.map(he=>({id:he.id,data:he.data}))),i.postMessage({type:"reloadNotes"}),v(f,()=>D),v(d,()=>z),{cancel:async()=>{for(const he of W){const oe=D.get(he.id);oe?.data&&(oe.data=he.data)}await _n(a(s),Qe,W.map(he=>({id:he.id,data:he.data}))),i.postMessage({type:"reloadNotes"}),v(f,()=>D),v(d,()=>z)}}},se=async S=>{const O=JSON.parse(S.data),D=O;if(O.tabId&&O.tabId===o){D.type==="exit"&&(P(),await Wn(a(s),Qe),await Wn(a(s),en));return}if(D.type==="putNote"){const H=D.data.id;if(!H)return;const W=await Gr(a(s),Qe,H);if(!W)return;y(W)}else if(D.type==="deleteNote"){const z=D.data.id;if(!z)return;m(z)}else if(D.type==="pinTag"){const z=D.data.tag,H=D.data.pinned,W=a(u)();W.set(z,{name:z,pinned:H}),v(u,()=>W)}else D.type==="clearNotes"?P():D.type==="reloadNotes"||D.type==="emptyBin"?E():D.type==="exit"&&P()};Ce(()=>(E(),i.addEventListener(se),()=>{i.removeEventListener(se)})),kc({isInitedNotes:h,createNote:F,updateNote:A,deleteNote:I,saveNote:R,revertNote:N,pinNote:X,moveNoteToBin:Z,getGetNotes:k,importNotes:ae,clearNotes:V,getNoteById:T,getGetMapTags:()=>a(u),pinTag:ee,restoreNoteFromBin:te,checkNotesInBin:g,checkNotesInArchive:p,emptyBin:j,moveNotesToBinByTags:re,deleteNotesByTags:ve,restoreNotesFromBinByTags:$,deleteTag:ne});var ce=J(),me=B(ce);ke(me,()=>e.children??xe),_(t,ce),le()}const Xs={},xc=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function Tc(t){je(Xs,t)}function pn(){const t=Ve(Xs);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Ac(t,e){ie(e,!0);let n=Xe(xc());Tc(n);var r=J(),o=B(r);ke(o,()=>e.children??xe),_(t,r),le()}const Gs={};function Dc(t){je(Gs,t)}function so(){const t=Ve(Gs);if(!t)throw new Error("No ScrollingContext found");return t}const Zs=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function ov(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}function Nc(t,e){ie(e,!0);let n=U(!1);const r=()=>a(n),o=Zs(()=>{v(n,!1)},100);Dc({isScrolling:r,enable:()=>{v(n,!0),o()}});var i=J(),l=B(i);ke(l,()=>e.children??xe),_(t,i),le()}const Js={};function Lc(t){je(Js,t)}function Qt(){const t=Ve(Js);if(!t)throw new Error("No MobileSizeContext found");return t}function Mc(t,e){ie(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let r=U(Xe(n())),o=pn();const s=Zs(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{v(r,n(),!0)})};Lc({checkMobileSize:()=>a(r)}),Ce(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=J(),u=B(c);ke(u,()=>e.children??xe),_(t,c),le()}const Qs={};function Ic(t){je(Qs,t)}function gn(){const t=Ve(Qs);if(!t)throw new Error("No DialogContext found");return t}function Oc(t,e){ie(e,!0);let n=U(0),r=U(!1),o=U(!0);Ic({checkExistedDialog:()=>a(n)>0,showDialog:()=>{v(n,a(n)+1)},hideDialog:()=>{v(n,a(n)-1)},blockDialog:p=>{v(r,p,!0)},checkBlockedDialog:()=>a(r),setClosableDialog:p=>{v(o,p,!0)},checkClosableDialog:()=>a(o)});var h=J(),g=B(h);ke(g,()=>e.children??xe),_(t,h),le()}const $s={};function Rc(t){je($s,t)}function pa(){const t=Ve($s);if(!t)throw new Error("No ScrollContainerContext found");return t}function Bc(t,e){ie(e,!0);let n=U(null);Rc({setScrollContainer:l=>{v(n,l,!0)},getScrollContainer:()=>a(n)});var s=J(),i=B(s);ke(i,()=>e.children??xe),_(t,s),le()}const ei={};function Fc(t){je(ei,t)}function io(){const t=Ve(ei);if(!t)throw new Error("No DialogPageHeightContext found");return t}function zc(t,e){ie(e,!0);let n=U(200);Fc({setDialogPageHeight:l=>{v(n,l,!0)},getDialogPageHeight:()=>a(n)});var s=J(),i=B(s);ke(i,()=>e.children??xe),_(t,s),le()}const jc=[dr,Hr,Qe,en,yc];function Hc(){return new Promise((t,e)=>{const n=indexedDB.open(_c,mc);He(n,"upgradeneeded",()=>{const r=n.result;for(const o of jc)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),He(n,vn,()=>{const r=n.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),He(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),He(n,hn,()=>{e()})})}function Uc(t,e){ie(e,!0);let n=U(null);Ce(()=>{Hc().then(l=>{v(n,l,!0)}).catch(l=>{})}),vc({getDB:()=>a(n)});var o=J(),s=B(o);{var i=l=>{var c=J(),u=B(c);ke(u,()=>e.children??xe),_(l,c)};Y(s,l=>{a(n)&&l(i)})}_(t,o),le()}const wt="dialogPages",ti={};function qc(t){je(ti,t)}function yt(){const t=Ve(ti);if(!t)throw new Error("No DialogPagesContext found");return t}function Vc(t,e){ie(e,!0);const{getAppLocation:n,setSearchParam:r,deleteSearchParam:o}=Et(),s=M(n),i=M(()=>a(s).searchParams);let l=M(()=>a(i).get(wt)||""),c=M(()=>a(l).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const u=()=>a(c),d=w=>{if(w.length===0){o(wt);return}r(wt,w.map(E=>encodeURIComponent(E)).join(","))},f=w=>{r(wt,[...a(c),w].map(E=>encodeURIComponent(E)).join(","))};qc({setDialogPages:d,getDialogPages:u,pushDialogPage:f,popDialogPage:()=>{const w=a(c)[a(c).length-1];return a(c).length<=1?(o(wt),w):(r(wt,a(c).slice(0,-1).map(E=>encodeURIComponent(E)).join(",")),w)},replaceDialogPage:w=>{r(wt,[...a(c).slice(0,-1),w].map(E=>encodeURIComponent(E)).join(","))},hasDialogPage:w=>a(c).find(E=>{const[x]=E.split("?");return x===w})!==void 0,clearDialogPages:()=>{o(wt)},createDialogPageHref:w=>{const E=new URLSearchParams(a(s).searchParams.toString());return E.set(wt,[...u(),w].map(x=>encodeURIComponent(x)).join(",")),`${a(s).pathname}?${E.toString()}`},createHandleClickDialogPage:w=>E=>{E.preventDefault(),f(w)}});var P=J(),k=B(P);ke(k,()=>e.children??xe),_(t,P),le()}function Wc(t,e){ie(e,!0);const n=d=>d.startsWith("/")?d:`/${d}`,r=d=>{const[f,h]=d.split("?");return{href:n(d),pathname:n(f),search:h?`?${h}`:"",searchParams:new URLSearchParams(h)}};let o=U(Xe({href:`${n(window.location.pathname)}${window.location.search}`,pathname:n(window.location.pathname),search:window.location.search,searchParams:new URLSearchParams(window.location.search)}));const s=d=>{v(o,r(d),!0),window.history.replaceState(null,"",d)};nc({getAppLocation:()=>a(o),replace:s,setSearchParam:(d,f)=>{const h=a(o).searchParams;h.set(d,f),s(`${a(o).pathname}${h.size>0?`?${h.toString()}`:""}`)},deleteSearchParam:d=>{const f=a(o).searchParams;f.delete(d),s(`${a(o).pathname}${f.size>0?`?${f.toString()}`:""}`)}});var c=J(),u=B(c);ke(u,()=>e.children??xe),_(t,c),le()}const Yc={};function Kc(t){je(Yc,t)}function Xc(t,e){ie(e,!0);let n=Xe({value:!1});const r=()=>n.value;Ce(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),Kc({getIsKeyboardVisible:r});var o=J(),s=B(o);ke(s,()=>e.children??xe),_(t,o),le()}function Gc(t,e){ie(e,!0);const n=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};gc({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=J(),s=B(o);ke(s,()=>e.children??xe),_(t,o),le()}function Zc(t,e){Uc(t,{children:(n,r)=>{Gc(n,{children:(o,s)=>{Ac(o,{children:(i,l)=>{Nc(i,{children:(c,u)=>{Mc(c,{children:(d,f)=>{Oc(d,{children:(h,g)=>{Bc(h,{children:(p,y)=>{zc(p,{children:(m,C)=>{Xc(m,{children:(P,k)=>{Wc(P,{children:(w,E)=>{Vc(w,{children:(x,F)=>{var A=J(),R=B(A);ke(R,()=>e.children??xe),_(x,A)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Jc(t,e){Zc(t,{children:(n,r)=>{sc(n,{children:(o,s)=>{rc(o,{children:(i,l)=>{lc(i,{children:(c,u)=>{uc(c,{children:(d,f)=>{fc(d,{children:(h,g)=>{bc(h,{children:(p,y)=>{Cc(p,{children:(m,C)=>{Pc(m,{children:(P,k)=>{var w=J(),E=B(w);ke(E,()=>e.children??xe),_(P,w)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let tn=U(""),mn=U(null),fr=U(null),vr=U(null),yn=U(Xe([]));function Xt(t,e){v(tn,""),setTimeout(()=>{v(tn,t,!0),e?.onFinish&&v(fr,e.onFinish,!0),e?.onCancel&&v(vr,e.onCancel,!0)},16)}const Qc=(t,e,n,r,o)=>{t.preventDefault(),a(e)&&(v(n,null),a(e)(),v(e,null)),v(r,""),a(o)?.style.removeProperty("opacity")};var $c=K('<button type="button" class="c p-1gssers">undo</button>'),eu=K('<div class="a p-1gssers"><div class="b p-1gssers"><span> </span> <!></div></div>'),tu=K("<div><!></div>");function ni(t,e){ie(e,!0);const n=Ur();Ce(()=>(v(yn,[...a(yn),n],!0),()=>{const i=a(yn).indexOf(n);i!==-1&&v(yn,a(yn).filter((l,c)=>c!==i),!0)})),De(()=>{a(tn);const i=a(vr)?2e3:800;a(tn)&&(a(mn)?.getBoundingClientRect(),a(mn)?.style.setProperty("opacity","1"));const l=setTimeout(()=>{a(mn)?.style.removeProperty("opacity")},i),c=setTimeout(()=>{v(tn,""),a(fr)&&a(fr)(),v(fr,null),v(vr,null),a(mn)?.style.removeProperty("opacity")},i+400);return()=>{clearTimeout(l),clearTimeout(c)}});var r=tu(),o=b(r);{var s=i=>{var l=eu(),c=b(l),u=b(c),d=b(u),f=q(u,2);{var h=g=>{var p=$c();p.__click=[Qc,vr,fr,tn,mn],_(g,p)};Y(f,g=>{a(vr)&&g(h)})}Je(c,g=>v(mn,g),()=>a(mn)),de(()=>ln(d,a(tn))),_(i,l)};Y(o,i=>{a(tn)&&a(yn)[a(yn).length-1]===n&&i(s)})}_(t,r),le()}Ge(["click"]);var nu=K('<span class="a p-lxk90o"><!></span>');function Ue(t,e){var n=nu(),r=b(n);ke(r,()=>e.children),_(t,n)}var ru=Rl('<svg class="p-gv09tg"><use></use></svg>');function pe(t,e){let n=ge(e,"name",8,"");var r=ru(),o=b(r);de(()=>Re(o,"href",`#icon-${n()??""}`)),_(t,r)}const au=(t,e,n,r,o)=>{if(t.preventDefault(),a(e))return;const s=n().type;s==="closed"?r():s==="opened"&&o()};var ou=K('<button class="a p-1w3orpk"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ri(t,e){ie(e,!0);const{sidebarOpen:n,getSidebarState:r,sidebarClose:o}=va(),{getDialogPages:s}=yt(),{checkExistedDialog:i}=gn();let l=M(()=>s().length>0||i());var c=ou();c.__click=[au,l,r,n,o];var u=b(c);ue(u,()=>({"--size":"32px"})),pe(u.lastChild,{name:"sidebarMenu"});var d=q(u,2);Ue(d,{children:(f,h)=>{var g=Me("Menu");_(f,g)}}),_(t,c),le()}Ge(["click"]);var su=(t,e)=>e.onChange?.(t.target?.value||""),iu=(t,e,n)=>{e(""),n.onChange?.("")},lu=K('<button class="b p-wproeg"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),cu=K('<div class="a p-wproeg"><input class="p-wproeg"/> <!></div>');function Ba(t,e){ie(e,!0);let n=ge(e,"value",15,""),r=ge(e,"ref",15,null);const o=u=>{u.key==="Escape"&&(n(""),e.onChange?.(""))};Ce(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=cu(),i=b(s);i.__input=[su,e],Je(i,u=>r(u),()=>r());var l=q(i,2);{var c=u=>{var d=lu();d.__click=[iu,n,e];var f=b(d);ue(f,()=>({"--size":"20px"})),pe(f.lastChild,{name:"close"});var h=q(f,2);Ue(h,{children:(g,p)=>{var y=Me("Clear");_(g,y)}}),_(u,d)};Y(l,u=>{n()&&u(c)})}de(()=>Re(i,"placeholder",e.placeholder)),no("focus",i,function(...u){e.onFocus?.apply(this,u)}),Jl(i,n),_(t,s),le()}Ge(["input","click"]);function lo(t,e){ie(e,!0),Ce(()=>{const n=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),le()}var uu=K('<dialog><div class="a p-y62pks"><!></div></dialog> <!>',1);function Er(t,e){ie(e,!0);let n=ge(e,"onClosed",3,()=>{}),r=ge(e,"blocked",3,!1),o=U(null),s=U(null),i=U(!1),{showDialog:l,hideDialog:c}=gn();const u=()=>{const m=setTimeout(()=>{n()()},150);a(o)?.addEventListener("transitionend",()=>{clearTimeout(m),n()()},{once:!0}),v(i,!1)};De(()=>{e.startClose&&u()}),Ce(()=>{a(o)?.showModal(),a(o)?.getClientRects(),v(i,!0);const m=C=>{C?.preventDefault(),r()||u()};return a(o)?.addEventListener("cancel",m),a(o)?.addEventListener("close",m),()=>{a(o)?.removeEventListener("cancel",m),a(o)?.removeEventListener("close",m)}}),Ce(()=>(l(),()=>{c()})),Ce(()=>{const m=C=>{C.key==="Escape"&&r()&&C.preventDefault()};return window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}});var d=uu(),f=B(d),h=b(f),g=b(h);ke(g,()=>e.children),Je(h,m=>v(s,m),()=>a(s)),Je(f,m=>v(o,m),()=>a(o));var p=q(f,2);{var y=m=>{lo(m,{get dialog(){return a(o)},get dialogInner(){return a(s)},onClose:u})};Y(p,m=>{a(o)&&a(s)&&!r()&&m(y)})}de(()=>we(f,1,ye({b:!0,c:a(i)}),"p-y62pks")),_(t,d),le()}var du=K("<div><!></div>");function ga(t,e){ie(e,!0);let n=ge(e,"transformOrigin",3,"top right"),r=U(!1),o=U(null);const s=()=>{const f=setTimeout(()=>{e.onClosed()},150);a(o)?.addEventListener("transitionend",()=>{clearTimeout(f),e.onClosed()},{once:!0}),v(r,!1)},i=f=>{f.target!==a(o)&&!a(o)?.contains(f.target)&&s()},l=f=>{f.target!==a(o)&&!a(o)?.contains(f.target)&&s()},c=f=>{f.key==="Escape"&&s()};Ce(()=>{a(o)?.getClientRects(),v(r,!0);const f=setTimeout(()=>{document.addEventListener("focusin",i),document.addEventListener("click",l),document.addEventListener("keydown",c)},0);return()=>{clearTimeout(f),document.removeEventListener("focusin",i),document.removeEventListener("click",l),document.removeEventListener("keydown",c)}}),De(()=>{e.startClose&&s()});var u=du(),d=b(u);ke(d,()=>e.children),Je(u,f=>v(o,f),()=>a(o)),de(()=>{Ln(u,`transform-origin: ${e.positionTop?"top right":n()};`),we(u,1,ye({a:!0,b:e.positionTop,c:a(r)}),"p-12kya4w")}),_(t,u),le()}const fu=(t,e)=>{a(e)||v(e,!0)};var vu=(t,e)=>e("newest"),hu=(t,e)=>e("oldest"),pu=(t,e)=>e("AtoZ"),gu=(t,e)=>e("ZtoA"),_u=K("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),mu=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),yu=K('<div class="a p-1sq20j9"><button><!> <!></button> <!></div>');function wu(t,e){ie(e,!0);const n=(P,k=xe)=>{var w=_u(),E=b(w);E.__click=[vu,d];var x=q(E,2);x.__click=[hu,d];var F=q(x,2);F.__click=[pu,d];var A=q(F,2);A.__click=[gu,d],de(()=>{we(w,1,ye({b:!0,c:k()}),"p-1sq20j9"),we(E,1,ye({d:!0,e:k(),f:a(u)==="newest"}),"p-1sq20j9"),we(x,1,ye({d:!0,e:k(),f:a(u)==="oldest"}),"p-1sq20j9"),we(F,1,ye({d:!0,e:k(),f:a(u)==="AtoZ"}),"p-1sq20j9"),we(A,1,ye({d:!0,e:k(),f:a(u)==="ZtoA"}),"p-1sq20j9")}),_(P,w)};let r=U(!1),o=U(!1);const{checkMobileSize:s}=Qt(),{getFeedOrder:i,setFeedOrder:l}=zs();let c=M(s),u=M(i);const d=P=>{v(o,!0),l(P)},f=()=>{v(r,!1),v(o,!1)};Ce(()=>{const P=k=>{k.key==="Escape"&&v(o,!0)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)});var h=yu(),g=b(h);g.__click=[fu,r],we(g,1,ye({g:!0,h:!0}),"p-1sq20j9");var p=b(g);pe(p,{name:"filter"});var y=q(p,2);Ue(y,{children:(P,k)=>{var w=Me("show feed order menu");_(P,w)}});var m=q(g,2);{var C=P=>{var k=J(),w=B(k);{var E=F=>{Er(F,{get startClose(){return a(o)},onClosed:f,children:(A,R)=>{n(A,()=>!0)},$$slots:{default:!0}})},x=F=>{var A=mu(),R=B(A);ue(R,()=>({"--right":"20px","--top":"60px"})),ga(R.lastChild,{get startClose(){return a(o)},onClosed:f,children:(N,I)=>{n(N,()=>!1)},$$slots:{default:!0}}),_(F,A)};Y(w,F=>{a(c)?F(E):F(x,!1)})}_(P,k)};Y(m,P=>{a(r)&&P(C)})}_(t,h),le()}Ge(["click"]);var Q=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t.Install="install",t.InstallSuccess="installSuccess",t.Welcome="welcome",t))(Q||{}),bu=K('<div><!> <div class="a p-t68rxw"></div></div>');function co(t,e){ie(e,!0);let n=U(!1);Ce(()=>{const s=setTimeout(()=>{v(n,!0)},200);return()=>{clearTimeout(s)}});var r=bu(),o=b(r);ke(o,()=>e.children??xe),de(()=>we(r,1,ye({b:!0,c:a(n)}),"p-t68rxw")),_(t,r),le()}var Su=K("<a><!></a>"),Cu=K("<button><!></button>");function cn(t,e){let n=ge(e,"type",3,"standard"),r=ge(e,"typeButton",3,"button"),o=ge(e,"element",3,"button"),s=ge(e,"href",3,""),i=ge(e,"fullWidth",3,!1),l=ge(e,"withoutMinWidth",3,!1);var c=J(),u=B(c);{var d=h=>{var g=Su();g.__click=function(...y){e.onClick?.apply(this,y)};var p=b(g);ke(p,()=>e.children??xe),de(()=>{Re(g,"target",e.target),Re(g,"rel",e.rel),Re(g,"href",s()),we(g,1,ye({a:!0,b:!0,c:n()==="dangerous",d:n()==="secondary",e:i(),f:l()}),"p-16e3t4x")}),_(h,g)},f=h=>{var g=Cu();g.__click=function(...y){e.onClick?.apply(this,y)};var p=b(g);ke(p,()=>e.children??xe),de(()=>{Re(g,"type",r()),we(g,1,ye({a:!0,c:n()==="dangerous",d:n()==="secondary",e:i(),f:l()}),"p-16e3t4x")}),_(h,g)};Y(u,h=>{o()==="a"?h(d):h(f,!1)})}_(t,c)}Ge(["click"]);let Fa=U(!1),Br=U(!1),za=U(""),ja=U("Cancel"),Ha=U("Confirm"),Ua,qa,Va;function _a(t){v(Fa,!0),v(za,t.title,!0),t.buttonCancelTitle&&v(ja,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&v(Ha,t.buttonConfirmTitle,!0),Ua=t.onConfirm,qa=t.onCancel,Va=t.onClosed}var ku=K('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),Eu=K('<div class="a p-1jlul5o"><!></div>');function Pu(t){let e=U(!1),n,r=!1;const o=()=>{n=setTimeout(()=>{v(e,!0)},250)},s=async()=>{o(),await qa?.(),v(Br,!0)},i=async()=>{o(),await Ua?.(),v(Br,!0),r=!0},l=()=>{clearTimeout(n),v(e,!1),v(Fa,!1),v(Br,!1),v(za,""),v(ja,"Cancel"),v(Ha,"Confirm"),qa=void 0,Ua=void 0,Va&&Va(r),r=!1};var c=J(),u=B(c);{var d=f=>{Er(f,{get blocked(){return a(e)},get startClose(){return a(Br)},onClosed:l,children:(h,g)=>{var p=Eu(),y=b(p);{var m=P=>{co(P,{})},C=P=>{var k=ku(),w=B(k),E=b(w),x=q(w,2),F=b(x);cn(F,{onClick:s,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(R,N)=>{var I=Me();de(()=>ln(I,a(ja))),_(R,I)},$$slots:{default:!0}});var A=q(F,2);cn(A,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(R,N)=>{var I=Me();de(()=>ln(I,a(Ha))),_(R,I)},$$slots:{default:!0}}),de(()=>ln(E,a(za))),_(P,k)};Y(y,P=>{a(e)?P(m):P(C,!1)})}_(h,p)},$$slots:{default:!0}})};Y(u,f=>{a(Fa)&&f(d)})}_(t,c)}const yr=t=>{const e=n=>{const r=n.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=n.key.toLowerCase(),i=n.metaKey,l=n.ctrlKey,c=n.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){n.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var xu=K('<div class="a p-ohatdy"><a class="b p-ohatdy"><span class="c p-ohatdy"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-ohatdy"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function Tu(t,e){ie(e,!1);const{createDialogPageHref:n,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=yt(),{checkExistedDialog:i}=gn(),l=()=>{o.length===0&&!i()&&s(Q.NewNote)};Ce(()=>yr({key:"n",action:l})),fa();var c=xu(),u=b(c),d=M(()=>r(Q.NewNote));u.__click=function(...m){a(d)?.apply(this,m)};var f=b(u),h=b(f);ue(h,()=>({"--size":"32px","--color":"#b0b0b0"})),pe(h.lastChild,{name:"add"});var g=q(h,2);Ue(g,{children:(m,C)=>{var P=Me("Add note");_(m,P)}});var p=q(f,2),y=b(p);ue(y,()=>({"--size":"16px","--color":"#b0b0b0"})),pe(y.lastChild,{name:"plus"}),de(m=>Re(u,"href",m),[()=>n(Q.NewNote)]),_(t,c),le()}Ge(["click"]);var Au=K("<button><!></button>");function Du(t,e){ie(e,!0);let n=ge(e,"type",3,"button"),r=!1,o=U(null);De(()=>{e.onRef&&e.onRef(a(o))});const s=u=>{(u.key==="Enter"||u.key===" ")&&(r=!0)},i=()=>{e.onClick(r),r&&(r=!1)};var l=Au();l.__keydown=s,l.__click=i;var c=b(l);ke(c,()=>e.children??xe),Je(l,u=>v(o,u),()=>a(o)),de(()=>{Re(l,"type",n()),we(l,1,ye({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-1y4f6v6")}),_(t,l),le()}Ge(["keydown","click"]);const Io=t=>{const n=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(o=>o instanceof HTMLElement?o instanceof HTMLButtonElement||o instanceof HTMLInputElement||o instanceof HTMLSelectElement||o instanceof HTMLTextAreaElement?!o.disabled&&o.offsetParent!==null:o.offsetParent!==null:!1),r=t||document.activeElement;if(r){const o=n.indexOf(r);return n[o+1]}return null};let Zn=U(!1),bn=U(!1),ft=U(""),Sn=U(0),pr=U(0),gr=U(0),qr,Jr=()=>({bottom:0,right:0,height:0}),jt=null,Wa=U(null);function Nu(t){if(a(Zn)){v(bn,!0),a(ft)!==t.tag&&(qr=()=>{const n=t.getRect();v(Zn,!0),v(ft,t.tag,!0),v(Sn,n.bottom,!0),v(pr,n.right,!0),v(gr,n.height,!0),Jr=t.getRect,jt=t.focusRef});return}const e=t.getRect();v(Zn,!0),v(ft,t.tag,!0),v(Sn,e.bottom,!0),v(pr,e.right,!0),v(gr,e.height,!0),Jr=t.getRect,jt=t.focusRef}const Lu=()=>a(Zn),Mu=()=>a(Wa);var Iu=K('<li class="p-j39u7r"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin</button></li>'),Ou=K('<li class="p-j39u7r"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin</button></li>'),Ru=K('<ul><!> <li class="p-j39u7r"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete</button></li></ul>'),Bu=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Fu(t,e){ie(e,!0);const n=(A,R=xe)=>{var N=Ru(),I=b(N);{var G=re=>{var $=Iu(),te=b($);te.__click=h,te.__keydown=C;var ee=b(te);ue(ee,()=>({"--size":"20px"})),pe(ee.lastChild,{name:"pin"}),de(()=>we(te,1,ye({c:!0,d:R()}),"p-j39u7r")),_(re,$)},V=re=>{var $=Ou(),te=b($);te.__click=g,te.__keydown=C;var ee=b(te);ue(ee,()=>({"--size":"20px"})),pe(ee.lastChild,{name:"pin-cancel"}),de(()=>we(te,1,ye({c:!0,d:R()}),"p-j39u7r")),_(re,$)};Y(I,re=>{a(f)?re(V,!1):re(G)})}var T=q(I,2),X=b(T);X.__click=k,X.__keydown=P;var Z=b(X);ue(Z,()=>({"--size":"20px"})),pe(Z.lastChild,{name:"bin"}),Je(N,re=>v(Wa,re),()=>a(Wa)),de(()=>{we(N,1,ye({a:!0,b:R()}),"p-j39u7r"),we(X,1,ye({c:!0,e:!0,d:R()}),"p-j39u7r")}),_(A,N)},{getScrollContainer:r}=pa(),{pinTag:o,getGetMapTags:s,deleteTag:i}=Jt(),{checkMobileSize:l}=Qt(),{getSelectedTags:c,removeTag:u,setSelectedTags:d}=ao();let f=M(()=>s()().get(a(ft))?.pinned||!1);const h=()=>{o(a(ft),!0),jt?.focus(),v(bn,!0)},g=()=>{o(a(ft),!1),jt?.focus(),v(bn,!0)},p=()=>{v(Zn,!1),v(bn,!1),v(Sn,0),v(pr,0),v(gr,0),Jr=()=>({bottom:0,right:0,height:0}),jt=null,qr&&setTimeout(()=>{qr?.(),qr=void 0})};let y=M(()=>window.innerHeight-a(Sn)<100?a(Sn)-a(gr)-98+"px":a(Sn)+5+"px"),m=M(r);const C=A=>{A.key==="Tab"&&A.shiftKey&&(A.preventDefault(),jt?.focus())},P=A=>{A.key==="Tab"&&!A.shiftKey&&jt&&(A.preventDefault(),Io(jt)?.focus())},k=()=>{v(bn,!0);let A=jt,R=Io(A);_a({title:a(w).has(a(ft))?`Are you sure to delete ${a(ft)} from selected notes?`:`Are you sure to delete ${a(ft)} from all notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const N=a(w).has(a(ft))?Array.from(a(w)).filter(V=>V!==a(ft)):[],I=Array.from(a(w));u(a(ft));const{cancel:G}=await i(a(ft),N);Xt("Tag deleted",{onCancel:async()=>{G(),d(new Set(I))}})},onCancel:async()=>{},onClosed:N=>{setTimeout(()=>{N?R&&R?.focus():A?.focus()},16)}})};De(()=>{const A=()=>{const R=Jr();v(Sn,R.bottom,!0),v(pr,R.right,!0),v(gr,R.height,!0)};return a(m)?.addEventListener("scroll",A),window.addEventListener("resize",A),()=>{a(m)?.removeEventListener("scroll",A),window.removeEventListener("resize",A)}});let w=M(c);var E=J(),x=B(E);{var F=A=>{var R=J(),N=B(R);{var I=V=>{Er(V,{get startClose(){return a(bn)},onClosed:p,children:(T,X)=>{n(T,()=>!0)},$$slots:{default:!0}})},G=V=>{var T=Bu(),X=B(T);ue(X,()=>({"--left":a(pr)-36+"px","--top":a(y)})),ga(X.lastChild,{transformOrigin:"top",get startClose(){return a(bn)},onClosed:p,children:(Z,re)=>{n(Z,()=>!1)},$$slots:{default:!0}}),_(V,T)};Y(N,V=>{l()?V(I):V(G,!1)})}_(A,R)};Y(x,A=>{a(Zn)&&A(F)})}_(t,E),le()}Ge(["click","keydown"]);const zu=(t,e,n,r)=>{t.stopPropagation(),t.preventDefault(),Nu({tag:e.tag,getRect:n,focusRef:a(r)})},ju=(t,e)=>{t.key==="Tab"&&!t.shiftKey&&a(e)&&(t.preventDefault(),Mu()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};var Hu=K('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Uu=K('<button><span class="b p-zlrw5f"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),qu=K("<!> <span> </span> <!>",1),Vu=K('<div class="a p-zlrw5f"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function ai(t,e){ie(e,!0);let{getGetMapTags:n}=Jt(),r=U(null),o=M(Lu);const s=()=>{if(a(r)){const d=a(r).getBoundingClientRect();return{bottom:d.bottom,right:d.right,height:d.height}}return{bottom:0,right:0,height:0}};let i=M(()=>e.mode==="notes"&&e.tag!=="inbox"),l=M(()=>n()().get(e.tag)?.pinned||!1);var c=Vu(),u=b(c);ue(u,()=>({"--paddingRight":a(i)?"30px":void 0})),Du(u.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(d,f)=>{var h=qu(),g=B(h);{var p=k=>{var w=Hu(),E=b(w);ue(E,()=>({"--size":"18px"})),pe(E.lastChild,{name:"pin"}),_(k,w)};Y(g,k=>{a(l)&&k(p)})}var y=q(g,2),m=b(y),C=q(y,2);{var P=k=>{var w=Uu();w.__click=[zu,e,s,r],w.__keydown=[ju,o];var E=b(w),x=b(E);ue(x,()=>({"--size":"16px"})),pe(x.lastChild,{name:"menu"});var F=q(x,2);Ue(F,{children:(A,R)=>{var N=Me("Tag options");_(A,N)}}),Je(w,A=>v(r,A),()=>a(r)),de(()=>we(w,1,ye({c:!0,d:e.type==="selected"}),"p-zlrw5f")),_(k,w)};Y(C,k=>{a(i)&&k(P)})}de(()=>ln(m,e.tag)),_(d,h)},$$slots:{default:!0}}),_(t,c),le()}Ge(["click","keydown"]);var Wu=K('<div class="a p-1wrbv6c"><div></div></div>');function Oo(t,e){ie(e,!0);let n=ge(e,"mobile",3,!1);const{getGetMapTags:r}=Jt();let o=U(null),s=U(Xe({value:!1}));const i=f=>{v(o,f,!0)};let c=M(()=>{const f=r()();return[...e.tags].sort((h,g)=>h==="inbox"?-1:g==="inbox"?1:f.get(h)?.pinned?-1:f.get(g)?.pinned?1:h.localeCompare(g))});De(()=>{a(s),Ot(()=>{a(o)&&a(s).value&&a(o).focus()})});var u=Wu(),d=b(u);da(d,22,()=>a(c),f=>f,(f,h,g)=>{{let p=M(()=>a(g)===0?i:void 0);ai(f,{get mode(){return e.mode},get tag(){return h},get onRef(){return a(p)},onClick:y=>{y?v(s,{value:!0},!0):v(s,{value:!1},!0),e.handleTagClick(h)}})}}),de(()=>we(d,1,ye({b:!0,c:n()}),"p-1wrbv6c")),_(t,u),le()}const Yu=t=>{try{new URL(t)}catch{return!1}return!0},Ku=(t,e)=>{a(e)||v(e,!0)},Xu=(t,e,n,r)=>{for(const o of e())o!=="inbox"&&n(o,!0);v(r,!0)},Gu=(t,e,n,r)=>{for(const o of e())o!=="inbox"&&n(o,!1);v(r,!0)},Zu=(t,e,n,r,o,s)=>{const i=Array.from(e());n(i),r.clearTags(),Xt("Notes moved to bin",{onCancel:()=>{e(new Set(i)),o(i)}}),v(s,!0)},Ju=(t,e,n,r,o)=>{v(e,!0),_a({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{v(e,!0),n.clearTags(),await r(Array.from(o()))},onCancel:async()=>{}})},Qu=(t,e,n,r,o,s)=>{const i=Array.from(e());n(i),r.clearTags(),Xt("Notes restored",{onCancel:()=>{e(new Set(i)),o(i)}}),v(s,!0)},$u=(t,e)=>{e.clearTags()},ed=(t,e,n,r)=>{const o=e()(),s=Array.from(n());for(const i of o)i.data&&i.data?.url&&Yu(i.data?.url)&&s.every(l=>i.data?.tags.includes(l))&&window.open(i.data?.url,"_blank");v(r,!0)};var td=K('<li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin</button></li>'),nd=K('<li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin</button></li>'),rd=K('<li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin</button></li>'),ad=K('<li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore</button></li> <li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes</button></li>',1),od=K('<ul><li class="p-1sr0kt2"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links</button></li> <!> <!> <!> <!></ul>'),sd=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),id=K('<div class="a p-1sr0kt2"><div class="b p-1sr0kt2"><button class="c p-1sr0kt2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <div class="d e p-1sr0kt2"><div class="f p-1sr0kt2"><button class="g p-1sr0kt2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></div> <!></div>');function Ro(t,e){ie(e,!0);const n=(N,I=xe)=>{var G=od(),V=b(G),T=b(V);T.__click=[ed,l,r,m];var X=b(T);ue(X,()=>({"--size":"22px"})),pe(X.lastChild,{name:"open"});var Z=q(V,2);{var re=ne=>{var se=td(),ce=b(se);ce.__click=[Xu,r,c,m];var me=b(ce);ue(me,()=>({"--size":"22px"})),pe(me.lastChild,{name:"pin"}),de(()=>we(ce,1,ye({j:!0,k:I()}),"p-1sr0kt2")),_(ne,se)};Y(Z,ne=>{o()==="notes"&&a(x)&&[...r()].filter(se=>se!=="inbox").length>0&&ne(re)})}var $=q(Z,2);{var te=ne=>{var se=nd(),ce=b(se);ce.__click=[Gu,r,c,m];var me=b(ce);ue(me,()=>({"--size":"22px"})),pe(me.lastChild,{name:"pin-cancel"}),de(()=>we(ce,1,ye({j:!0,k:I()}),"p-1sr0kt2")),_(ne,se)};Y($,ne=>{o()==="notes"&&a(E)&&[...r()].filter(se=>se!=="inbox").length>0&&ne(te)})}var ee=q($,2);{var ve=ne=>{var se=rd(),ce=b(se);ce.__click=[Zu,r,u,e,d,m];var me=b(ce);ue(me,()=>({"--size":"22px"})),pe(me.lastChild,{name:"bin"}),de(()=>we(ce,1,ye({j:!0,k:I()}),"p-1sr0kt2")),_(ne,se)};Y(ee,ne=>{o()==="notes"&&ne(ve)})}var ae=q(ee,2);{var j=ne=>{var se=ad(),ce=B(se),me=b(ce);me.__click=[Qu,r,d,e,u,m];var S=b(me);ue(S,()=>({"--size":"22px"})),pe(S.lastChild,{name:"bin-cancel"});var O=q(ce,2),D=b(O);D.__click=[Ju,m,e,f,r];var z=b(D);ue(z,()=>({"--size":"22px"})),pe(z.lastChild,{name:"bin"}),de(()=>{we(me,1,ye({j:!0,k:I()}),"p-1sr0kt2"),we(D,1,ye({j:!0,k:I()}),"p-1sr0kt2")}),_(ne,se)};Y(ae,ne=>{o()==="bin"&&ne(j)})}de(()=>{we(G,1,ye({h:!0,i:I()}),"p-1sr0kt2"),we(T,1,ye({j:!0,k:I()}),"p-1sr0kt2")}),_(N,G)};let r=ge(e,"selectedTags",7),o=ge(e,"mode",3,"notes");const{checkMobileSize:s}=Qt(),{getGetMapTags:i,getGetNotes:l,pinTag:c,moveNotesToBinByTags:u,restoreNotesFromBinByTags:d,deleteNotesByTags:f}=Jt();let h=M(s),g=U(null),p=U(Xe({value:!1})),y=U(!1),m=U(!1);const C=N=>{v(g,N,!0)},P=()=>{v(y,!1),v(m,!1)},k=()=>{const N=i()();for(const I of r())if(I!=="inbox"&&N.get(I)?.pinned)return!0;return!1},w=()=>{const N=i()();for(const I of r())if(I!=="inbox"&&!N.get(I)?.pinned)return!0;return!1};let E=M(k),x=M(w);De(()=>{a(p),Ot(()=>{a(g)&&a(p).value&&a(g).focus()})});var F=J(),A=B(F);{var R=N=>{var I=id(),G=b(I),V=b(G);V.__click=[Ku,y];var T=b(V);ue(T,()=>({"--rotate":"-90deg","--size":"20px"})),pe(T.lastChild,{name:"menu"});var X=q(T,2);Ue(X,{children:(ne,se)=>{var ce=Me("tags menu");_(ne,ce)}});var Z=q(G,2),re=b(Z),$=b(re);$.__click=[$u,e];var te=b($);ue(te,()=>({"--size":"20px"})),pe(te.lastChild,{name:"close"});var ee=q(te,2);Ue(ee,{children:(ne,se)=>{var ce=Me("Clear");_(ne,ce)}});var ve=q(re,2);da(ve,18,r,ne=>ne,(ne,se,ce)=>{{let me=M(()=>a(ce)===r().size-1?C:void 0);ai(ne,{get mode(){return o()},type:"selected",get tag(){return se},onClick:S=>{S?v(p,{value:!0},!0):v(p,{value:!1},!0),e.handleSelectedTagClick(se)},get onRef(){return a(me)}})}});var ae=q(Z,2);{var j=ne=>{var se=J(),ce=B(se);{var me=O=>{Er(O,{get startClose(){return a(m)},onClosed:P,children:(D,z)=>{n(D,()=>!0)},$$slots:{default:!0}})},S=O=>{var D=sd(),z=B(D);ue(z,()=>({"--right":"0","--top":"10px"})),ga(z.lastChild,{transformOrigin:"top",get startClose(){return a(m)},onClosed:P,children:(H,W)=>{n(H,()=>!1)},$$slots:{default:!0}}),_(O,D)};Y(ce,O=>{a(h)?O(me):O(S,!1)})}_(ne,se)};Y(ae,ne=>{a(y)&&ne(j)})}_(N,I)};Y(A,N=>{r().size>0&&N(R)})}_(t,F),le()}Ge(["click"]);const ld=(t,e,n)=>{if(t.has("inbox"))return[];const r=[],o=Array.from(t.values());for(const s of e)if(s.data&&!(n&&!n(s))){if(t.size===0){for(const i of s?.data?.tags||[])r.includes(i)||r.push(i);continue}if(s.data&&o.every(i=>s.data?.tags.includes(i)))for(const i of s.data.tags||[])!t.has(i)&&!r.includes(i)&&r.push(i)}return r};function cd(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const sv=()=>{const t=navigator.userAgent;return/android/i.test(t)},iv=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},lv=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},cv=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};function ud(t,e){ie(e,!0);const n=pn();let r=ge(e,"dialog",7);const o=3,s=50,i=5,l=.6,c=.3,u=250;let d=[],f=0,h=!1,g=!1,p=0,y=0,m=0,C=null;const P=()=>{d=[],f=0,h=!1,g=!1,p=0,y=0,m=0,C!==null&&(cancelAnimationFrame(C),C=null)},k=N=>{r()&&(e.sidebarState!=="opened"&&e.sidebarState!=="closed"||(f=N.touches[0].clientX,d=[{x:N.touches[0].clientX,y:N.touches[0].clientY,time:performance.now()}],h=!0,g=!1))},w=N=>e.sidebarState==="closed"&&N>0||e.sidebarState==="closeSwiping"&&N>0||e.sidebarState==="opened"&&N<0||e.sidebarState==="openSwiping"&&N<0,E=()=>{if(r()){if(r().style.setProperty("--transition-timing","0s"),!r().open&&e.sidebarState==="closed")try{r().showModal(),r().offsetWidth}catch{return}e.onSwipe();try{const N=window.getComputedStyle(r()),I=N.transform||N.webkitTransform||"";if(y=r().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?p=-y:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(p=0),I&&I!=="none")try{p=new DOMMatrix(I).m41}catch{}g=!0}catch{P()}}},x=()=>{if(C=null,!h||!r())return;const N=d.at(-1),I=d[0];if(!N||!I)return;const G=I.x,V=I.y,T=N.x,X=N.y,Z=T-G,re=X-V,$=Math.abs(Z)>Math.abs(re),te=Math.abs(Z)>o;if(!g)if($&&te&&w(Z))try{E()}catch{P();return}else return;let ee=p+T-f;const ve=-y*.7,ae=0;let j=Math.max(ve,Math.min(ae,ee));r().style.setProperty("--transition-timing","0s"),r().style.transform=`translate3d(${j}px, 0, 0)`;const ne=Math.min(1,Math.max(0,(j-ve)/(ae-ve)));n.swipingRatio=-ne,m=(j-p)/y*100,r().style.setProperty("--backdrop-bg",`${ne*.25}`)},F=N=>{if(!h)return;const I=N.touches[0];d.push({x:I.clientX,y:I.clientY,time:performance.now()});const G=performance.now()-150;d=d.filter($=>$.time>=G),C===null&&(C=requestAnimationFrame(x));const V=I.clientX,T=I.clientY,X=V-d[0].x,Z=T-d[0].y,re=Math.abs(X)>Math.abs(Z);g&&re&&N.preventDefault()},A=N=>{const I=Math.abs(N);if(I>=l)return i;if(I>=c){const G=(I-c)/(l-c);return s-G*(s-i)}else return s},R=N=>{if(C!==null&&(cancelAnimationFrame(C),C=null),!h||!r()||!g){P();return}let I=0;const G=N.changedTouches[0];G&&d.push({x:G.clientX,y:G.clientY,time:performance.now()});const V=d[0],T=d[d.length-1],X=T.x-V.x,Z=T.time-V.time;if(Z>0){const te=X/Z;I=Math.max(-3,Math.min(3,te))}const re=A(I);let $=null;if(e.sidebarState==="closeSwiping"?$=Math.abs(m)>re&&I>=-c||I>c?"open":"close":e.sidebarState==="openSwiping"&&($=Math.abs(m)>re&&I<=c||I<-c?"close":"open"),cd())r().style.removeProperty("--transition-timing"),n.duration=u/1e3;else{const ee=new DOMMatrix(window.getComputedStyle(r()).transform).m41;let ve;if($==="open")ve=Math.abs(ee);else{const j=-y*.7;ve=Math.abs(j-ee)}const ae=Math.min(u,Math.max(100,ve/(Math.abs(I)+.5)));r().style.setProperty("--transition-timing",`${ae/1e3}s`),n.duration=ae/1e3}r().offsetWidth,r().style.transform="",$==="open"?e.onOpen():$==="close"&&e.onClose(),r()?.style.removeProperty("--backdrop-bg"),P()};Ce(()=>(document.addEventListener("touchstart",k,{passive:!0}),document.addEventListener("touchmove",F,{passive:!1}),document.addEventListener("touchend",R,{passive:!0}),document.addEventListener("touchcancel",R,{passive:!0}),()=>{document.removeEventListener("touchstart",k),document.removeEventListener("touchmove",F),document.removeEventListener("touchend",R),document.removeEventListener("touchcancel",R),C!==null&&cancelAnimationFrame(C)})),le()}var dd=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),fd=K('<dialog><div class="a p-1dicbrq"><!> <!></div></dialog> <!> <!>',1);function vd(t,e){ie(e,!0);const{getDialogPages:n}=yt(),{getSidebarState:r,handleComputeState:o}=va();let s=350;const i=pn(),{isScrolling:l}=so();let c=U(null),u=U(null),d=M(r);De(()=>{n().length>0&&o({type:"close"})});const f=()=>{e.blocked||o({type:"close"})},h=()=>{e.blocked||o({type:"open"})},g=()=>{o({type:"opened"}),i.swipingRatio=-1,i.duration=.25},p=()=>{o({type:"closed"})},y=()=>{o({type:"swipe"})},m=T=>{T.preventDefault(),f()};Ce(()=>(a(c)?.addEventListener("close",p),a(c)?.addEventListener("cancel",m),()=>{a(c)?.removeEventListener("close",p),a(c)?.removeEventListener("cancel",m)}));const C=()=>{a(c)?.style.removeProperty("--transition-timing"),a(c)?.style.removeProperty("transform"),a(c)?.style.removeProperty("--backdrop-bg")},P=M(l);De(()=>{if(a(d),!!a(c))switch(a(d).type==="openSwiping"||a(d).type==="closeSwiping"?i.isSwiping=!0:i.isSwiping=!1,a(d).type){case"closeSwiping":{const T=setTimeout(()=>{f()},3e3);return()=>{clearTimeout(T)}}case"openSwiping":{const T=setTimeout(()=>{h()},3e3);return()=>{clearTimeout(T)}}case"opening":{a(c).open||a(c).showModal(),a(c).getBoundingClientRect();const T=setTimeout(()=>{C()},s+1),X=()=>{clearTimeout(T),C()};return a(c)?.addEventListener("transitionend",X,{once:!0}),g(),()=>{clearTimeout(T),a(c)?.removeEventListener("transitionend",X)}}case"closing":{i.swipingRatio=0,i.duration=.25;const T=setTimeout(()=>{a(d).type==="closing"&&p()},s+1),X=()=>{clearTimeout(T),p()};return a(c)?.addEventListener("transitionend",X,{once:!0}),()=>{clearTimeout(T),a(c)?.removeEventListener("transitionend",X)}}case"closed":a(c)?.close(),C();break;case"opened":C();break}}),Ce(()=>{a(d).type==="opened"&&o({type:"open"})});var k=fd(),w=B(k),E=b(w),x=b(E);{var F=T=>{var X=J(),Z=B(X);ke(Z,()=>e.children),_(T,X)};Y(x,T=>{a(d).type!=="closed"&&T(F)})}var A=q(x,2);{var R=T=>{var X=dd(),Z=B(X);ue(Z,()=>({"--left":"calc(30%)"})),ni(Z.lastChild,{}),_(T,X)};Y(A,T=>{a(d).type==="opened"&&T(R)})}Je(E,T=>v(u,T),()=>a(u)),Je(w,T=>v(c,T),()=>a(c));var N=q(w,2);{var I=T=>{lo(T,{get dialog(){return a(c)},get dialogInner(){return a(u)},onClose:f})};Y(N,T=>{a(d).type==="opened"&&!e.blocked&&T(I)})}var G=q(N,2);{var V=T=>{ud(T,{onClose:f,onOpen:h,onSwipe:y,get sidebarState(){return a(d).type},get dialog(){return a(c)}})};Y(G,T=>{!a(P)&&!e.blocked&&T(V)})}de(()=>we(w,1,ye({b:!0,c:a(d).type==="closed",d:a(d).type==="opened",e:a(d).type==="openSwiping"||a(d).type==="closeSwiping",f:i.working&&(!i.isSwiping||!e.blocked)}),"p-1dicbrq")),_(t,k),le()}var hd=(t,e,n)=>{t.preventDefault(),e(),n("/")},pd=K('<a class="d p-pvf6gd" href="/"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),gd=(t,e,n)=>{t.preventDefault(),e(),n(`/${Q.Bin}`)},_d=K('<a class="d p-pvf6gd"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),md=K('<div class="a p-pvf6gd"><div class="b p-pvf6gd"><!> <div class="c p-pvf6gd"><a class="d p-pvf6gd"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-pvf6gd"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="e p-pvf6gd"><!></div> <!></div> <!>',1),yd=K('<div class="f p-pvf6gd"><div class="e p-pvf6gd"><!></div> <div class="g p-pvf6gd"><div class="a p-pvf6gd"><!></div> <!></div></div>');function wd(t,e){ie(e,!0);const{checkMobileSize:n}=Qt(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=va(),{getAppLocation:i,replace:l}=Et(),{getDialogPages:c,createDialogPageHref:u,createHandleClickDialogPage:d}=yt(),{getTagsSearch:f,setTagsSearch:h}=oc(),g=M(()=>i().pathname),{getSelectedTags:p,addTag:y,removeTag:m,clearTags:C}=ao();let P=M(p);const{checkNotesInBin:k,getGetNotes:w}=Jt(),E=M(w);let x=M(()=>a(g)==="/bin"?"bin":"notes");const F=ee=>{y(ee)},A=ee=>{m(ee)};let R=M(()=>a(P).size===0&&!a(P).has("inbox")&&(a(E)()||[]).some(ee=>(a(x)==="notes"&&ee?.data&&!ee.data.deletedAt||a(x)==="bin"&&ee?.data&&ee.data.deletedAt)&&ee?.data?.tags.length===0)),N=M(()=>ld(a(P),a(E)()||[],ee=>!(ee?.data&&ee.data.deletedAt&&a(x)==="notes"||ee?.data&&!ee.data.deletedAt&&a(x)==="bin"))),I=M(()=>[...a(R)?["inbox"]:[],...a(N)].filter(ee=>f()===""||ee.toLowerCase().indexOf(f().toLowerCase())!==-1)),G=M(n);const{checkExistedDialog:V}=gn();let T=M(()=>c().length>0||V());const X=()=>{if(a(G)){if(a(T))return;o().type==="opened"?r():o().type==="closed"&&s()}};Ce(()=>yr({key:"b",meta:!0,action:X})),Ce(()=>yr({key:"b",ctrl:!0,action:X}));var Z=J(),re=B(Z);{var $=ee=>{vd(ee,{get blocked(){return a(T)},children:(ve,ae)=>{var j=md(),ne=B(j),se=b(ne),ce=b(se);ri(ce,{});var me=q(ce,2),S=b(me),O=M(()=>d(Q.Settings));S.__click=function(...Ee){a(O)?.apply(this,Ee)};var D=b(S);ue(D,()=>({"--size":"24px"})),pe(D.lastChild,{name:"settings"});var z=q(D,2);Ue(z,{children:(Ee,Fe)=>{var at=Me("Settings");_(Ee,at)}});var H=q(S,2),W=M(()=>d(Q.Sync));H.__click=function(...Ee){a(W)?.apply(this,Ee)};var be=b(H);ue(be,()=>({"--size":"24px"})),pe(be.lastChild,{name:"sync"});var Ie=q(be,2);Ue(Ie,{children:(Ee,Fe)=>{var at=Me("Sync");_(Ee,at)}});var he=q(H,2);{var oe=Ee=>{var Fe=pd();Fe.__click=[hd,r,l];var at=b(Fe);ue(at,()=>({"--size":"24px"})),pe(at.lastChild,{name:"note"});var Bt=q(at,2);Ue(Bt,{children:(Ft,ot)=>{var Pt=Me("Notes");_(Ft,Pt)}}),_(Ee,Fe)},Ne=Ee=>{var Fe=J(),at=B(Fe);{var Bt=Ft=>{var ot=_d();ot.__click=[gd,r,l];var Pt=b(ot);ue(Pt,()=>({"--size":"24px"})),pe(Pt.lastChild,{name:"bin"});var Pr=q(Pt,2);Ue(Pr,{children:(ma,uo)=>{var $t=Me("Bin");_(ma,$t)}}),de(()=>Re(ot,"href",`/${Q.Bin}`)),_(Ft,ot)};Y(at,Ft=>{k()&&Ft(Bt)},!0)}_(Ee,Fe)};Y(he,Ee=>{a(g)===`/${Q.Bin}`?Ee(oe):Ee(Ne,!1)})}var We=q(se,2),nt=b(We);{let Ee=M(f);Ba(nt,{placeholder:"Search tag",get value(){return a(Ee)},onChange:Fe=>{h(Fe)}})}var Rt=q(We,2);Ro(Rt,{get clearTags(){return C},get mode(){return a(x)},get selectedTags(){return a(P)},handleSelectedTagClick:A});var rt=q(ne,2);Oo(rt,{get mode(){return a(x)},get tags(){return a(I)},handleTagClick:F,mobile:!0}),de((Ee,Fe)=>{Re(S,"href",Ee),Re(H,"href",Fe)},[()=>u(Q.Settings),()=>u(Q.Sync)]),_(ve,j)},$$slots:{default:!0}})},te=ee=>{var ve=yd(),ae=b(ve),j=b(ae);{let S=M(f);Ba(j,{placeholder:"Search tag",get value(){return a(S)},onChange:O=>{h(O)}})}var ne=q(ae,2),se=b(ne),ce=b(se);Ro(ce,{get clearTags(){return C},get mode(){return a(x)},get selectedTags(){return a(P)},handleSelectedTagClick:A});var me=q(se,2);Oo(me,{get mode(){return a(x)},get tags(){return a(I)},handleTagClick:F}),_(ee,ve)};Y(re,ee=>{a(G)?ee($):ee(te,!1)})}_(t,Z),le()}Ge(["click"]);const bd=(t,e,n)=>{_a({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await e(),n("/")},onCancel:async()=>{}})};var Sd=(t,e)=>{t.preventDefault(),e("/")},Cd=K('<a class="d p-22fuob" href="/"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),kd=(t,e)=>{t.preventDefault(),e(`/${Q.Bin}`)},Ed=K('<a class="d p-22fuob"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),Pd=K('<button class="f p-22fuob" type="button">Empty bin</button>'),xd=K('<div class="a p-22fuob"><div class="b p-22fuob"><div class="c p-22fuob"><a class="d p-22fuob"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-22fuob"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="e p-22fuob"><!></div> <!></div> <div class="g p-22fuob"><div class="h p-22fuob"><!></div> <div class="i p-22fuob"><div class="j p-22fuob"><div class="k p-22fuob"><!></div> <!></div></div></div></div>');function Td(t,e){ie(e,!0);const{getFeedSearch:n,setFeedSearch:r}=Os(),{getScrollContainer:o}=pa();let s=M(o);const{emptyBin:i,checkNotesInBin:l}=Jt(),{getAppLocation:c,replace:u}=Et(),{createDialogPageHref:d,createHandleClickDialogPage:f,getDialogPages:h}=yt(),{checkExistedDialog:g}=gn();let p=U(null);const y=M(l),m=M(()=>c().pathname),C=()=>{a(s)&&a(s).scrollTo({top:0,behavior:"smooth"})},P=()=>{h().length===0&&!g()&&a(p)?.focus()};Ce(()=>yr({key:"k",meta:!0,action:P})),Ce(()=>yr({key:"k",ctrl:!0,action:P}));var k=xd(),w=b(k),E=b(w),x=b(E),F=M(()=>f(Q.Settings));x.__click=function(...S){a(F)?.apply(this,S)};var A=b(x);ue(A,()=>({"--rotate":"30deg","--size":"20px"})),pe(A.lastChild,{name:"settings"});var R=q(x,2),N=M(()=>f(Q.Sync));R.__click=function(...S){a(N)?.apply(this,S)};var I=b(R);ue(I,()=>({"--size":"20px"})),pe(I.lastChild,{name:"sync"});var G=q(R,2);{var V=S=>{var O=Cd();O.__click=[Sd,u];var D=b(O);ue(D,()=>({"--size":"18px"})),pe(D.lastChild,{name:"note"}),_(S,O)},T=S=>{var O=J(),D=B(O);{var z=H=>{var W=Ed();W.__click=[kd,u];var be=b(W);ue(be,()=>({"--size":"24px"})),pe(be.lastChild,{name:"bin"}),de(()=>Re(W,"href",`/${Q.Bin}`)),_(H,W)};Y(D,H=>{a(y)&&H(z)},!0)}_(S,O)};Y(G,S=>{a(m)===`/${Q.Bin}`?S(V):S(T,!1)})}var X=q(E,2),Z=b(X);ri(Z,{});var re=q(X,2);{var $=S=>{var O=J(),D=B(O);{var z=H=>{var W=Pd();W.__click=[bd,i,u],_(H,W)};Y(D,H=>{a(y)&&H(z)})}_(S,O)},te=S=>{Tu(S,{})};Y(re,S=>{a(m)===`/${Q.Bin}`?S($):S(te,!1)})}var ee=q(w,2),ve=b(ee),ae=b(ve);wd(ae,{});var j=q(ve,2),ne=b(j),se=b(ne),ce=b(se);{let S=M(n);Ba(ce,{onFocus:C,placeholder:"Search",get value(){return a(S)},onChange:O=>{r(O)},get ref(){return a(p)},set ref(O){v(p,O,!0)}})}var me=q(se,2);wu(me,{}),de((S,O)=>{Re(x,"href",S),Re(R,"href",O)},[()=>d(Q.Settings),()=>d(Q.Sync)]),_(t,k),le()}Ge(["click"]);function Ad(t,e){ie(e,!0);let n=ge(e,"dialog",7);const r=pn();let o=null;const s=()=>{e.dialogState==="swiping"&&e.onClose()};De(()=>(e.dialogState==="swiping"&&(o=setTimeout(s,2e4)),()=>{o&&(clearTimeout(o),o=null)}));let i=null;const l=3,c=33,u=5,d=.6,f=.3,h=250;let g=[],p=0,y=!1,m=!1,C=0,P=0,k=0;const w=()=>{g=[],p=0,y=!1,m=!1,C=0,P=0,k=0,i!==null&&(cancelAnimationFrame(i),i=null),o&&(clearTimeout(o),o=null)},E=V=>{n()&&e.dialogState==="opened"&&(p=V.touches[0].clientX,g=[{x:V.touches[0].clientX,y:V.touches[0].clientY,time:performance.now()}],y=!0,m=!1)},x=V=>e.dialogState==="opened"?V>0:e.dialogState==="swiping",F=()=>{if(n()){n().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const V=window.getComputedStyle(n()),T=V.transform||V.webkitTransform||"";if(P=n().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(C=0),T&&T!=="none")try{C=new DOMMatrix(T).m41}catch{}m=!0}catch{w()}}},A=()=>{if(!n())return;const T=Math.abs(C+k*P/100)/P;n().style.setProperty("--backdrop-bg",`${.1*(1-T)}`)},R=()=>{if(i=null,!y||!n()){w();return}const V=g.at(-1),T=g[0];if(!V||!T)return;const X=T.x,Z=T.y,re=V.x,$=V.y,te=re-X,ee=$-Z,ve=Math.abs(te)>Math.abs(ee),ae=Math.abs(te)>l;if(!m)if(ve&&ae&&x(te))try{F()}catch{w();return}else return;let j=C+re-p;j=Math.max(0,Math.min(P,j)),n().style.setProperty("--transition-timing","0s"),n().style.transform=`translate3d(${j}px, 0, 0)`,r.swipingRatio=Math.abs(1-j/P),k=(j-C)/P*100,e.dialogState==="swiping"&&(o&&clearTimeout(o),o=setTimeout(s,2e4)),A()},N=V=>{if(!y)return;const T=V.touches[0];g.push({x:T.clientX,y:T.clientY,time:performance.now()});const X=performance.now()-150;g=g.filter(ve=>ve.time>=X),i===null&&(i=requestAnimationFrame(R));const Z=T.clientX,re=T.clientY,$=Z-g[0].x,te=re-g[0].y,ee=Math.abs($)>Math.abs(te);m&&ee&&V.preventDefault()},I=V=>{const T=Math.abs(V);if(T>=d)return u;if(T>=f){const X=(T-f)/(d-f);return c-X*(c-u)}else return c},G=V=>{if(i!==null&&(cancelAnimationFrame(i),i=null),!y||!n()||!m){w();return}let T=0;const X=V.changedTouches[0];X&&g.push({x:X.clientX,y:X.clientY,time:performance.now()});const Z=g[0],re=g[g.length-1],$=re.x-Z.x,te=re.time-Z.time;if(te>0){const ae=$/te;T=Math.max(-3,Math.min(3,ae))}const ee=I(T);let ve=null;e.dialogState==="swiping"&&(T<=-f?ve="open":T>=f?ve="close":ve=k>ee?"close":"open"),n().style.removeProperty("--transition-timing"),r.duration=h/1e3,n().offsetWidth,n().style.transform="",ve==="open"?e.onOpen():ve==="close"&&e.onClose(),n()?.style.removeProperty("--backdrop-bg"),w()};Ce(()=>(n().addEventListener("touchstart",E,{passive:!0}),n().addEventListener("touchmove",N,{passive:!1}),n().addEventListener("touchend",G,{passive:!0}),n().addEventListener("touchcancel",G,{passive:!0}),()=>{n().removeEventListener("touchstart",E),n().removeEventListener("touchmove",N),n().removeEventListener("touchend",G),n().removeEventListener("touchcancel",G),i!==null&&cancelAnimationFrame(i)})),le()}var Dd=(t,e)=>{e.onStartClose()},Nd=K('<button class="d e p-1kcojuh"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Ld=K('<dialog><div class="a p-1kcojuh"><div class="b p-1kcojuh"><div class="c p-1kcojuh"><!></div></div> <!></div></dialog> <!>',1);function Md(t,e){ie(e,!0);let n=350;const{isScrolling:r,enable:o}=so();let s=U(null),i=U(null);const l=pn(),c=x=>{x.preventDefault(),e.onStartClose()};Ce(()=>(a(s)?.addEventListener("close",e.onClosed),a(s)?.addEventListener("cancel",c),()=>{a(s)?.removeEventListener("close",e.onClosed),a(s)?.removeEventListener("cancel",c)}));const u=()=>{a(s)?.style.removeProperty("--transition-timing"),a(s)?.style.removeProperty("transform"),a(s)?.style.removeProperty("--backdrop-bg")},d=()=>{o()},f=M(r);De(()=>{if(e.dialogState,!!a(s))switch(e.dialogState){case"opening":{a(s).open||a(s).showModal(),a(s).getBoundingClientRect();const x=()=>{clearTimeout(F),u()};a(s)?.addEventListener("transitionend",x,{once:!0});const F=setTimeout(()=>{u(),a(s)?.removeEventListener("transitionend",x)},n+1);return e.onOpened(),()=>{clearTimeout(F),a(s)?.removeEventListener("transitionend",x)}}case"closing":{const x=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),F=()=>{clearTimeout(x),e.onClosed()};return a(s)?.addEventListener("transitionend",F,{once:!0}),()=>{clearTimeout(x),a(s)?.removeEventListener("transitionend",F)}}case"opened":u()}});var h=Ld(),g=B(h),p=b(g),y=b(p),m=b(y),C=b(m);{var P=x=>{var F=Nd();F.__click=[Dd,e];var A=b(F);ue(A,()=>({"--size":"32px"})),pe(A.lastChild,{name:"back"});var R=q(A,2);Ue(R,{children:(N,I)=>{var G=Me("back");_(N,G)}}),_(x,F)};Y(C,x=>{e.blocked||x(P)})}var k=q(y,2);ke(k,()=>e.children),Je(p,x=>v(i,x),()=>a(i)),Je(g,x=>v(s,x),()=>a(s));var w=q(g,2);{var E=x=>{Ad(x,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return a(s)}})};Y(w,x=>{(!a(f)&&e.dialogState==="opened"||e.dialogState==="swiping")&&!e.blocked&&x(E)})}de(()=>we(g,1,ye({f:!0,g:e.dialogState==="opened",h:e.hidden,i:e.dialogState==="swiping"||e.blocked,j:l.working&&(!l.isSwiping||!e.hidden)}),"p-1kcojuh")),no("scroll",p,d),_(t,h),le()}Ge(["click"]);const Bo=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function Id(t,e){ie(e,!0);let n=ge(e,"hiddenDialog",3,!1),r=ge(e,"onClose",3,()=>{});const o=pn();let s=U(Xe(Bo({type:"closed"})));const i=m=>{v(s,Bo(a(s),m),!0)},l=()=>{e.onStartClose&&(e.onStartClose(),i({type:"close"}))},c=()=>{i({type:"open"})},u=()=>{i({type:"opened"}),o.swipingRatio=1,o.duration=.25},d=()=>{r()(),i({type:"closed"}),o.swipingRatio=1,o.duration=.25},f=()=>{i({type:"swipe"})};De(()=>{a(s).type==="swiping"?o.isSwiping=!0:o.isSwiping=!1,a(s).type==="closed"&&e.shownDialog?c():a(s).type==="opened"&&!e.shownDialog&&l()});var h={handleComputeState:i},g=J(),p=B(g);{var y=m=>{{let C=M(()=>!e.onStartClose);Md(m,{onSwipe:f,onOpened:u,onClosed:d,onStartClose:l,onStartOpen:c,get dialogState(){return a(s).type},get hidden(){return n()},get blocked(){return a(C)},children:(P,k)=>{var w=J(),E=B(w);ke(E,()=>e.children),_(P,w)},$$slots:{default:!0}})}};Y(p,m=>{a(s).type!=="closed"&&m(y)})}return _(t,g),le(h)}const Od=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const o=i=>{i.preventDefault(),n()},s=()=>{r?.()};Ce(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Ce(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Rd=(t,e)=>{e.onStartBack()},Bd=K('<button class="d e p-13n05nq"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Fd=(t,e)=>{e.onStartClose()},zd=K('<button class="d f p-13n05nq"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),jd=K('<dialog><div class="a p-13n05nq"><div class="b p-13n05nq"><div class="c p-13n05nq"><div><!></div> <div><!></div></div></div> <!></div></dialog> <!>',1);function Hd(t,e){ie(e,!0);let n=ge(e,"blockedDialog",3,!1),r=ge(e,"hiddenDialog",3,!1),o=ge(e,"isDesktopAnimationOff",3,!1),s=U(null),i=U(null),l=U(!1);Od({getDialog:()=>a(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=pn();De(()=>{e.stateDialog==="closing"&&(c.working?a(s)?.addEventListener("transitionend",()=>{a(s)?.close()},{once:!0}):a(s)?.close())});const{getDialogPageHeight:u}=io(),d=M(u);Ce(()=>{setTimeout(()=>{v(l,!0)},50)});var f=jd(),h=B(f),g=b(h),p=b(g),y=b(p),m=b(y),C=b(m);{var P=A=>{var R=Bd();R.__click=[Rd,e];var N=b(R);ue(N,()=>({"--size":"28px"})),pe(N.lastChild,{name:"back"});var I=q(N,2);Ue(I,{children:(G,V)=>{var T=Me("back");_(G,T)}}),_(A,R)};Y(C,A=>{(!(n()||r())||n())&&e.onStartBack&&A(P)})}var k=q(m,2),w=b(k);{var E=A=>{var R=zd();R.__click=[Fd,e];var N=b(R);ue(N,()=>({"--size":"28px"})),pe(N.lastChild,{name:"close"});var I=q(N,2);Ue(I,{children:(G,V)=>{var T=Me("close");_(G,T)}}),_(A,R)};Y(w,A=>{n()||r()||A(E)})}var x=q(p,2);ke(x,()=>e.children),Je(g,A=>v(i,A),()=>a(i)),Je(h,A=>v(s,A),()=>a(s));var F=q(h,2);lo(F,{get dialog(){return a(s)},get dialogInner(){return a(i)},get onClose(){return e.onStartClose}}),de(()=>{Ln(h,`height: ${a(d)+74}px`),we(h,1,ye({g:!0,h:e.stateDialog==="open",i:a(l),j:c.working,k:o(),l:r()}),"p-13n05nq")}),_(t,f),le()}Ge(["click"]);const Ud=({onStartClose:t,onClose:e})=>{let n=U("close");return{get state(){return a(n)},set state(i){v(n,i,!0)},handleStartClose:(i=!1)=>{i||(v(n,"closing"),t?.())},handleOpen:()=>{v(n,"open")},handleClose:()=>{v(n,"close"),e?.()}}};function qd(t,e){ie(e,!0);let n=ge(e,"blockedDialog",3,!1),r=ge(e,"hiddenDialog",3,!1),o=ge(e,"onStartClose",3,()=>{}),s=ge(e,"onClose",3,()=>{}),i=Ud({onStartClose:o(),onClose:s()});De(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=f=>{f.key==="Escape"&&n()&&(f.preventDefault(),f.stopPropagation())};Ce(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=J(),u=B(c);{var d=f=>{Hd(f,{get stateDialog(){return i.state},get blockedDialog(){return n()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(h,g)=>{var p=J(),y=B(p);ke(y,()=>e.children),_(h,p)},$$slots:{default:!0}})};Y(u,f=>{i.state!=="close"&&f(d)})}_(t,c),le()}function Vd(t,e){ie(e,!0);let n=ge(e,"blockedDialog",3,!1),r=ge(e,"hiddenDialog",3,!1),o=ge(e,"blockedBack",3,!1),s=ge(e,"onStartClose",3,()=>{}),i=ge(e,"onClose",3,()=>{});const l=M(()=>o()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=gn();Ce(()=>(c(),()=>{u()}));const{checkMobileSize:d}=Qt();var f=J(),h=B(f);{var g=y=>{Id(y,{get shownDialog(){return e.shownDialog},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return a(l)},get onClose(){return i()}})},p=y=>{qd(y,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return a(l)},get onStartClose(){return s()},get onClose(){return i()}})};Y(h,y=>{d()?y(g):y(p,!1)})}_(t,f),le()}function Fo(t,e){ie(e,!0);const{clearDialogPages:n,popDialogPage:r}=yt(),{checkMobileSize:o}=Qt();let s=ge(e,"blocked",3,!1),i=ge(e,"isLastDialog",3,!1),l=ge(e,"onBack",3,()=>{}),c=ge(e,"onClosed",3,()=>{});const{checkBlockedDialog:u,checkClosableDialog:d}=gn(),f=M(()=>s()||u()),h=M(d),g=()=>{(!a(f)||a(f))&&e.shown&&(r(),l()())},p=()=>{((!a(f)||a(f)&&a(h))&&e.shown||!e.shown)&&n()},y=()=>{c()()};{let m=M(()=>a(f)&&e.shown||a(h)===!1),C=M(()=>a(f)||i()&&(a(h)===!1||!o()));Vd(t,{get shownDialog(){return e.shown},get blockedDialog(){return a(m)},get hiddenDialog(){return e.hidden},get blockedBack(){return a(C)},onStartBack:g,onStartClose:p,onClose:y,children:(P,k)=>{var w=J(),E=B(w);ke(E,()=>e.children),_(P,w)},$$slots:{default:!0}})}le()}var Wd=K('<div class="p-ah4hnt"><!></div>');function Oe(t,e){ie(e,!0);const{setDialogPageHeight:n}=io();let r=U(null);Ce(()=>{a(r)&&(a(r).getBoundingClientRect(),a(r).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(a(r))return i.observe(a(r)),()=>{a(r)&&i.unobserve(a(r)),i.disconnect()}});var o=Wd(),s=b(o);ke(s,()=>e.children),Je(o,i=>v(r,i),()=>a(r)),_(t,o),le()}var Yd=K('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function Kd(t,e){ie(e,!1);const{replace:n}=Et(),r=i=>{i.preventDefault(),n("/")};fa();var o=Yd(),s=q(b(o),2);cn(s,{element:"a",href:"/",onClick:r,children:(i,l)=>{var c=Me("close");_(i,c)},$$slots:{default:!0}}),_(t,o),le()}const Xd="modulepreload",Gd=function(t){return"/"+t},zo={},Be=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(n.map(u=>{if(u=Gd(u),u in zo)return;zo[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Xd,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((g,p)=>{h.addEventListener("load",g),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Zd=K('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function Jd(t){var e=Zd(),n=q(b(e),2);cn(n,{onClick:()=>location.reload(),children:(r,o)=>{var s=Me("Reload");_(r,s)},$$slots:{default:!0}}),_(t,e)}var Qd=K('<div class="p-uzefkz"><!></div>');function $d(t,e){ie(e,!0);let n=U(!1);const{getDialogPageHeight:r}=io(),o=M(r);Ce(()=>{const c=setTimeout(()=>{v(n,!0)},250);return()=>{clearTimeout(c)}});var s=Qd(),i=b(s);{var l=c=>{co(c,{})};Y(i,c=>{a(n)&&c(l)})}de(()=>Ln(s,`min-height: ${a(o)??""}px;`)),_(t,s),le()}function ze(t,e){ie(e,!0);const n={},r=Object.assign({"./Pages/About.svelte":()=>Be(()=>import("./aDbVJoVyq.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>Be(()=>import("./aCo27Oagp.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>Be(()=>import("./auT5GONba.js"),__vite__mapDeps([6,3,7])),"./Pages/AccountSetup.svelte":()=>Be(()=>import("./aGWNu7N-e.js"),__vite__mapDeps([8,9])),"./Pages/Auth.svelte":()=>Be(()=>import("./aDLzYeUJ3.js"),__vite__mapDeps([10,9])),"./Pages/ChangeTags.svelte":()=>Be(()=>import("./aDxfSh4E5.js"),[]),"./Pages/ClearStore.svelte":()=>Be(()=>import("./aB2tpFOl_.js"),__vite__mapDeps([11,12])),"./Pages/ConfirmAccessKey.svelte":()=>Be(()=>import("./a4o9lUeAt.js"),__vite__mapDeps([13,4,3,14,15,16,17])),"./Pages/Exit.svelte":()=>Be(()=>import("./aDcR-P7my.js"),__vite__mapDeps([18,19])),"./Pages/ExportData.svelte":()=>Be(()=>import("./aDqRAB7vI.js"),__vite__mapDeps([20,21,15,16,22,23,24,25])),"./Pages/ImportData.svelte":()=>Be(()=>import("./aCm7c0JPH.js"),__vite__mapDeps([26,21,15,16,22,27])),"./Pages/Install.svelte":()=>Be(()=>import("./aDg17cA8x.js"),__vite__mapDeps([28,29])),"./Pages/InstallSuccess.svelte":()=>Be(()=>import("./aD2qgpRn9.js"),__vite__mapDeps([30,31])),"./Pages/NewNote.svelte":()=>Be(()=>import("./ahWF7mRWU.js"),__vite__mapDeps([32,33,21,15,16,22,34])),"./Pages/Note.svelte":()=>Be(()=>import("./aDi_iO0lh.js"),__vite__mapDeps([35,33,21,15,16,22,34,36])),"./Pages/Settings.svelte":()=>Be(()=>import("./aCW3Xw_We.js"),__vite__mapDeps([37,23,24,38])),"./Pages/Signin.svelte":()=>Be(()=>import("./aD6SZgBFG.js"),__vite__mapDeps([39,4,3,14,40])),"./Pages/Signup.svelte":()=>Be(()=>import("./aoPkyHGm9.js"),__vite__mapDeps([41,14,4,3,40])),"./Pages/Subscription.svelte":()=>Be(()=>import("./aMJKOcbKk.js"),__vite__mapDeps([42,43])),"./Pages/Sync.svelte":()=>Be(()=>import("./aBbiNSJgk.js"),__vite__mapDeps([44,45]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(r[c]){const u=r[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var s=J(),i=B(s);Hl(i,()=>o(e.page),l=>{$d(l,{})},(l,c)=>{const u=M(()=>a(c).default);var d=J(),f=B(d);Vl(f,()=>a(u),(h,g)=>{g(h,{get params(){return e.params},get hidden(){return e.hidden}})}),_(l,d)},l=>{Jd(l)}),_(t,s),le()}const ef=(t,e,n,r)=>{e.noteData.pinnedAt?(n(e.noteId,!1),Xt("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),Xt("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),v(r,!0)},tf=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),Xt("Link copied"),v(n,!0)},nf=(t,e,n,r)=>{v(e,!0),_a({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await n(r.noteId)},onCancel:async()=>{}})};var rf=K('<li class="p-49y85j"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),af=(t,e,n)=>{v(e,!0),v(n,!0)},of=K('<li class="p-49y85j"><button><span class="b p-49y85j"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),sf=(t,e,n)=>{v(e,!0),v(n,!0)},lf=K(`<li class="p-49y85j"><button><span class="b p-49y85j"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="p-49y85j"><button><span class="b c p-49y85j"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin</button></li>`,1),cf=K('<ul class="a p-49y85j"><!> <li class="p-49y85j"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),uf=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function df(t,e){ie(e,!0);const n=(w,E=xe)=>{var x=cf(),F=b(x);{var A=Z=>{var re=rf(),$=b(re);$.__click=[tf,e,u];var te=b($);ue(te,()=>({"--size":"20px"})),pe(te.lastChild,{name:"copy"}),de(()=>we($,1,ye({d:!0,e:E()}),"p-49y85j")),_(Z,re)};Y(F,Z=>{E()&&e.noteData.url&&Z(A)})}var R=q(F,2),N=b(R);N.__click=[ef,e,s,u];var I=b(N);{let Z=M(()=>e.noteData.pinnedAt?"pin-cancel":"pin");ue(I,()=>({"--size":"20px"})),pe(I.lastChild,{get name(){return a(Z)}})}var G=q(I),V=q(R,2);{var T=Z=>{var re=of(),$=b(re);$.__click=[af,d,u];var te=b($),ee=b(te);ue(ee,()=>({"--size":"20px"})),pe(ee.lastChild,{name:"bin"}),de(()=>we($,1,ye({c:!0,d:!0,e:E()}),"p-49y85j")),_(Z,re)},X=Z=>{var re=lf(),$=B(re),te=b($);te.__click=[sf,f,u];var ee=b(te),ve=b(ee);ue(ve,()=>({"--size":"20px"})),pe(ve.lastChild,{name:"bin-cancel"});var ae=q($,2),j=b(ae);j.__click=[nf,u,o,e];var ne=b(j),se=b(ne);ue(se,()=>({"--size":"20px"})),pe(se.lastChild,{name:"bin"}),de(()=>{we(te,1,ye({d:!0,e:E()}),"p-49y85j"),we(j,1,ye({d:!0,e:E()}),"p-49y85j")}),_(Z,re)};Y(V,Z=>{l()==="notes"?Z(T):Z(X,!1)})}de(()=>{we(N,1,ye({d:!0,e:E()}),"p-49y85j"),ln(G,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),_(w,x)},{moveNoteToBin:r,deleteNote:o,pinNote:s,restoreNoteFromBin:i}=Jt();let l=ge(e,"mode",3,"notes"),c=ge(e,"shownMenu",15),u=U(!1),d=U(!1),f=U(!1);const{checkMobileSize:h}=Qt();let g=M(h);const p=async()=>{r(e.noteId),Xt("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},y=()=>{i(e.noteId),Xt("Note restored from bin",{onCancel:()=>{r(e.noteId)}})},m=()=>{a(d)?(v(d,!1),p()):a(f)&&(v(f,!1),y()),c(!1),v(u,!1)};var C=J(),P=B(C);{var k=w=>{var E=J(),x=B(E);{var F=R=>{Er(R,{get startClose(){return a(u)},onClosed:m,children:(N,I)=>{n(N,()=>!0)},$$slots:{default:!0}})},A=R=>{var N=uf(),I=B(N);ue(I,()=>({"--bottom":"-100px","--right":"20px"})),ga(I.lastChild,{get startClose(){return a(u)},get positionTop(){return e.showMenuUp},onClosed:m,children:(G,V)=>{n(G,()=>!1)},$$slots:{default:!0}}),_(R,N)};Y(x,R=>{a(g)?R(F):R(A,!1)})}_(w,E)};Y(P,w=>{c()&&w(k)})}_(t,C),le()}Ge(["click"]);const ff=(t,e)=>{v(e,!0)},vf=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),Xt("Link copied"),v(n,!1)},hf=(t,e)=>{v(e,!0)},pf=(t,e)=>{v(e,!1)},gf=(t,e,n,r)=>{t.preventDefault(),e(`${Q.Note}?id=${encodeURIComponent(n.noteId)}`),v(r,!1)};var _f=K('<div class="b p-1cnhpip"></div>'),mf=K('<img loading="lazy" class="c" height="16" width="16" alt=""/>'),yf=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),wf=K('<div class="a p-1cnhpip"><!></div>'),bf=K('<button class="e p-1cnhpip"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Sf=(t,e)=>{v(e,!1)},Cf=K('<!> <a target="_blank" rel="noopener noreferrer" class="e f p-1cnhpip"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),kf=K('<li><!> <a class="d p-1cnhpip" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button class="e g p-1cnhpip"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function Ef(t,e){ie(e,!0);const{pushDialogPage:n}=yt(),{getFaviconEnabled:r}=pc();let o=ge(e,"mode",3,"notes"),s=U(!1),i=U(!1),l=U(!1),c=M(r);const{checkMobileSize:u}=Qt(),d=A=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(A).host}.ico`}catch{return""}},f=e.noteData.url||"";var h=kf();h.__focusin=[hf,i],h.__focusout=[pf,i];var g=b(h);{var p=A=>{var R=wf(),N=b(R);{var I=V=>{var T=J(),X=B(T);{var Z=$=>{var te=_f();_($,te)},re=$=>{var te=mf();de(ee=>Re(te,"src",ee),[()=>d(f)]),no("error",te,()=>{v(l,!0)}),_($,te)};Y(X,$=>{a(l)?$(Z):$(re,!1)})}_(V,T)},G=V=>{var T=yf(),X=B(T);ue(X,()=>({"--size":"16px"})),pe(X.lastChild,{name:"note"}),_(V,T)};Y(N,V=>{f?V(I):V(G,!1)})}_(A,R)};Y(g,A=>{a(c)&&A(p)})}var y=q(g,2);y.__click=[gf,n,e,i];var m=b(y),C=q(y,2),P=b(C);{var k=A=>{var R=Cf(),N=B(R);{var I=X=>{var Z=bf();Z.__click=[vf,e,i];var re=b(Z);ue(re,()=>({"--size":"20px"})),pe(re.lastChild,{name:"copy"});var $=q(re,2);Ue($,{children:(te,ee)=>{var ve=Me("copy link");_(te,ve)}}),de(()=>Re(Z,"tabindex",e.focusHidden?-1:0)),_(X,Z)};Y(N,X=>{u()||X(I)})}var G=q(N,2);G.__click=[Sf,i];var V=b(G);ue(V,()=>({"--size":"18px"})),pe(V.lastChild,{name:"open"});var T=q(V,2);Ue(T,{children:(X,Z)=>{var re=Me();de(()=>ln(re,e.noteData.name||"unknown")),_(X,re)}}),de(()=>{Re(G,"href",f),Re(G,"tabindex",e.focusHidden?-1:0)}),_(A,R)};Y(P,A=>{f&&A(k)})}var w=q(P,2);w.__click=[ff,s];var E=b(w);ue(E,()=>({"--size":"18px","--rotate":"90deg"})),pe(E.lastChild,{name:"menu"});var x=q(E,2);Ue(x,{children:(A,R)=>{var N=Me("show menu");_(A,N)}});var F=q(C,2);df(F,{get mode(){return o()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return a(s)},set shownMenu(A){v(s,A,!0)}}),de((A,R)=>{we(h,1,A,"p-1cnhpip"),Re(y,"tabindex",e.focusHidden?-1:0),Re(y,"href",R),ln(m,e.noteData?.name||"unknown"),we(C,1,ye({j:!0,k:a(i)}),"p-1cnhpip"),Re(w,"tabindex",e.focusHidden?-1:0)},[()=>ye({h:!0,i:!!e.noteData.pinnedAt}),()=>`/?${wt}=${encodeURIComponent(`${Q.Note}?id=${encodeURIComponent(e.noteId)}`)}`]),_(t,h),le()}Ge(["focusin","focusout","click"]);var or,oi,si;class Pf{constructor(e){Pe(this,or);ut(this,"data");ut(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),Le(this,or,oi).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,Le(this,or,si).call(this)),e}isEmpty(){return this.data.length===0}}or=new WeakSet,oi=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(n,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},si=function(){let e=0;const n=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<n&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<n&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class xf{constructor(e,n){ut(this,"heap");ut(this,"done");ut(this,"cache",[]);this.heap=new Pf(n);for(const r of e)this.heap.insert(r);this.done=!1}get(e,n){const r=this.cache.slice(e,n);for(;r.length<n-e&&!this.heap.isEmpty();){const o=this.heap.extractMin();o!==void 0&&(this.cache.push(o),r.push(o))}return this.heap.isEmpty()&&(this.done=!0),r}}var Tf=K('<p class="d">No notes in bin</p>'),Af=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),Df=K('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),Nf=K('<div class="e p-cdl57y"><div class="f p-cdl57y"><!></div> <div>or</div> <div class="f p-cdl57y"><!></div></div>'),Lf=K('<div class="c p-cdl57y"><!></div>'),Mf=K("<span>Back to notes</span>"),If=K('<div class="g p-cdl57y">No notes in bin</div> <div class="f p-cdl57y"><!></div>',1),Of=K('<div class="h"><div class="g p-cdl57y">No notes found</div></div>'),Rf=K('<div class="i p-cdl57y"><ul class="p-cdl57y"></ul></div>'),Bf=K('<div class="a p-cdl57y"><div class="b p-cdl57y"><!></div></div>');function Ff(t,e){ie(e,!0);let n=ge(e,"getNotes",3,()=>[]),r=ge(e,"mode",3,"notes");const{getScrollContainer:o}=pa(),{createHandleClickDialogPage:s,createDialogPageHref:i}=yt(),{getSelectedTags:l}=ao(),{getFeedOrder:c}=zs(),{replace:u}=Et(),d=Os();let f=54,h=U(0),g=U(0),p=U(0),y=U(0),m=[],C=U(0),P=U(null),k=M(o),w=null,E=null;const x=M(l);De(()=>{a(x),a(I),a(k)?.scrollTo(0,0)});const{enable:F}=so(),A=()=>{F(),w||(w=requestAnimationFrame(()=>{const ae=a(k)?.scrollTop||0;v(p,ae,!0);const j=Math.ceil(a(h)/f);v(g,Math.floor(ae/(f*j))*(f*j)),w=null}))},R=()=>{E||(E=requestAnimationFrame(()=>{v(h,window.innerHeight-180||0,!0);const ae=a(k)?.scrollTop||0;v(p,ae,!0);const j=Math.ceil(a(h)/f);v(g,Math.floor(ae/(f*j))*(f*j)),E=null}))};Ce(()=>{R(),A()});const N=()=>{A()};De(()=>(a(k)?.addEventListener("scroll",N),window.addEventListener("resize",R),()=>{a(k)?.removeEventListener("scroll",N),window.removeEventListener("resize",R)}));const I=M(c);De(()=>{const ae=n()()||[],j=[],ne=Array.from(a(x).values());for(let se=ae.length-1;se>=0;se--){if(!ae[se]||!ae[se].data)continue;const ce=ae[se];if(!(r()==="notes"&&ce?.data.deletedAt)&&!(r()==="bin"&&!ce?.data.deletedAt)&&!(d&&!(ce.data.name.toLowerCase().includes(d.getFeedSearch().toLowerCase())||ce.data.url.toLowerCase().includes(d.getFeedSearch().toLowerCase())||ce.data.text.toLowerCase().includes(d.getFeedSearch().toLowerCase())))){if(a(x).has("inbox")){if(ce.data.tags.length>0)continue}else if(a(x).size&&ne.some(me=>!ce.data.tags.includes(me)))continue;j.push(ce)}}v(y,j.length,!0),m=j,v(C,Date.now(),!0)}),De(()=>{a(I),a(C),v(P,new xf(m,(ae,j)=>{if(!ae||!j||!ae.data||!j.data)return 0;if(ae.data.pinnedAt&&!j.data.pinnedAt)return-1;if(!ae.data.pinnedAt&&j.data.pinnedAt)return 1;if(ae.data.pinnedAt&&j.data.pinnedAt){if(ae.data.pinnedAt<j.data.pinnedAt)return 1;if(ae.data.pinnedAt>j.data.pinnedAt)return-1}switch(a(I)){case"newest":return ae.data.updatedAt<j.data.updatedAt?1:-1;case"oldest":return ae.data.updatedAt>j.data.updatedAt?1:-1;case"AtoZ":return ae.data.name.localeCompare(j.data.name);case"ZtoA":return j.data.name.localeCompare(ae.data.name);default:return 0}}),!0)});const G=M(()=>a(y)*f);let T=M(()=>{a(C);const ae=Math.ceil(a(h)/f);let j=Math.floor(a(g)/f);return j=j-Math.min(j,ae),a(P)?.get(j,j+ae*3)||[]}),X=M(()=>f*Math.ceil(a(h)/f));const Z=M(()=>a(g)-Math.min(a(g),a(X)));var re=Bf(),$=b(re),te=b($);{var ee=ae=>{co(ae,{})},ve=ae=>{var j=J(),ne=B(j);{var se=me=>{var S=Lf(),O=b(S);{var D=H=>{var W=Tf();_(H,W)},z=H=>{var W=Nf(),be=b(W),Ie=b(be);{let Ne=M(()=>i(Q.NewNote)),We=M(()=>s(Q.NewNote));cn(Ie,{element:"a",get href(){return a(Ne)},get onClick(){return a(We)},children:(nt,Rt)=>{var rt=Af(),Ee=B(rt);ue(Ee,()=>({"--size":"18px","--color":"#b0b0b0"})),pe(Ee.lastChild,{name:"plus"}),_(nt,rt)},$$slots:{default:!0}})}var he=q(be,4),oe=b(he);{let Ne=M(()=>i(Q.ImportData)),We=M(()=>s(Q.ImportData));cn(oe,{element:"a",get href(){return a(Ne)},get onClick(){return a(We)},children:(nt,Rt)=>{var rt=Df(),Ee=B(rt);ue(Ee,()=>({"--size":"18px","--color":"#b0b0b0"})),pe(Ee.lastChild,{name:"import"}),_(nt,rt)},$$slots:{default:!0}})}_(H,W)};Y(O,H=>{r()==="bin"?H(D):H(z,!1)})}_(me,S)},ce=me=>{var S=J(),O=B(S);{var D=H=>{var W=If(),be=q(B(W),2),Ie=b(be);cn(Ie,{element:"a",href:"/",onClick:he=>{he.preventDefault(),u("/")},children:(he,oe)=>{var Ne=Mf();_(he,Ne)},$$slots:{default:!0}}),_(H,W)},z=H=>{var W=J(),be=B(W);{var Ie=oe=>{var Ne=Of();_(oe,Ne)},he=oe=>{var Ne=Rf(),We=b(Ne);da(We,23,()=>a(T),nt=>nt.data,(nt,Rt,rt)=>{var Ee=J(),Fe=B(Ee);{var at=Bt=>{{let Ft=M(()=>a(rt)*f<a(p)-a(Z)-f/2||a(rt)*f>a(p)-a(Z)+Math.floor(a(h)/f)*f),ot=M(()=>(a(rt)+3)*f<a(p)-a(Z)-f/2||(a(rt)+3)*f>a(p)-a(Z)+Math.floor(a(h)/f)*f);Ef(Bt,{get mode(){return r()},get focusHidden(){return a(Ft)},get showMenuUp(){return a(ot)},get noteId(){return a(Rt).id},get noteData(){return a(Rt).data}})}};Y(Fe,Bt=>{a(Rt).data&&Bt(at)})}_(nt,Ee)}),de(nt=>{Ln(Ne,`min-height: ${nt??""}px`),Ln(We,`transform: translateY(${a(Z)??""}px);`)},[()=>Math.max((a(G)>a(h),a(G)),0)]),_(oe,Ne)};Y(be,oe=>{a(T).length===0?oe(Ie):oe(he,!1)},!0)}_(H,W)};Y(O,H=>{r()==="bin"&&!e.checkNotesInBin()?H(D):H(z,!1)},!0)}_(me,S)};Y(ne,me=>{(n()()||[]).length===0?me(se):me(ce,!1)},!0)}_(ae,j)};Y(te,ae=>{e.readyNotes?ae(ve,!1):ae(ee)})}_(t,re),le()}var zf=K('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function jf(t,e){ie(e,!0);const{getAppLocation:n}=Et(),{getGetNotes:r,isInitedNotes:o,checkNotesInBin:s}=Jt(),i=M(o),l=M(r),c=M(()=>n().pathname);var u=zf(),d=q(B(u),2),f=b(d);{let h=M(()=>a(c)==="/bin"?"bin":"notes");Ff(f,{get mode(){return a(h)},get getNotes(){return a(l)},get checkNotesInBin(){return s},get readyNotes(){return a(i)}})}_(t,u),le()}var Hf=K('<h1 class="p-1n0ziuh"><!></h1>');function Uf(t,e){var n=Hf(),r=b(n);ke(r,()=>e.children),_(t,n)}const qf=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var Vf=K('<div class="a p-nk8iga"><!> <p class="b p-nk8iga">Enjoy using the app!</p> <div class="c p-nk8iga"><!></div></div>');function Wf(t,e){ie(e,!1);const{pushDialogPage:n}=yt(),r=()=>{qf()?n(Q.AccountSetup):n(Q.Install)};fa();var o=Vf(),s=b(o);Uf(s,{children:(c,u)=>{var d=Me("Welcome");_(c,d)}});var i=q(s,4),l=b(i);cn(l,{onClick:r,fullWidth:!0,children:(c,u)=>{var d=Me("Start");_(c,d)},$$slots:{default:!0}}),_(t,o),le()}const jo=(t,e=xe,n=xe,r)=>{let o=sa(()=>Ai(r?.(),!1));var s=J(),i=B(s);{var l=u=>{Oe(u,{children:(d,f)=>{ze(d,{get hidden(){return a(o)},get page(){return Q.Settings}})},$$slots:{default:!0}})},c=u=>{var d=J(),f=B(d);{var h=p=>{Oe(p,{children:(y,m)=>{ze(y,{get hidden(){return a(o)},get page(){return Q.NewNote}})},$$slots:{default:!0}})},g=p=>{var y=J(),m=B(y);{var C=k=>{Oe(k,{children:(w,E)=>{ze(w,{get params(){return n()},get hidden(){return a(o)},get page(){return Q.Note}})},$$slots:{default:!0}})},P=k=>{var w=J(),E=B(w);{var x=A=>{Oe(A,{children:(R,N)=>{ze(R,{get hidden(){return a(o)},get page(){return Q.ImportData}})},$$slots:{default:!0}})},F=A=>{var R=J(),N=B(R);{var I=V=>{Oe(V,{children:(T,X)=>{ze(T,{get hidden(){return a(o)},get page(){return Q.ExportData}})},$$slots:{default:!0}})},G=V=>{var T=J(),X=B(T);{var Z=$=>{Oe($,{children:(te,ee)=>{ze(te,{get hidden(){return a(o)},get page(){return Q.ClearStore}})},$$slots:{default:!0}})},re=$=>{var te=J(),ee=B(te);{var ve=j=>{Oe(j,{children:(ne,se)=>{ze(ne,{get hidden(){return a(o)},get page(){return Q.AccountSetup}})},$$slots:{default:!0}})},ae=j=>{var ne=J(),se=B(ne);{var ce=S=>{Oe(S,{children:(O,D)=>{ze(O,{get hidden(){return a(o)},get page(){return Q.Install}})},$$slots:{default:!0}})},me=S=>{var O=J(),D=B(O);{var z=W=>{Oe(W,{children:(be,Ie)=>{ze(be,{get hidden(){return a(o)},get page(){return Q.InstallSuccess}})},$$slots:{default:!0}})},H=W=>{var be=J(),Ie=B(be);{var he=Ne=>{Oe(Ne,{children:(We,nt)=>{Wf(We,{})},$$slots:{default:!0}})},oe=Ne=>{var We=J(),nt=B(We);{var Rt=Ee=>{Oe(Ee,{children:(Fe,at)=>{ze(Fe,{get hidden(){return a(o)},get page(){return Q.Auth}})},$$slots:{default:!0}})},rt=Ee=>{var Fe=J(),at=B(Fe);{var Bt=ot=>{Oe(ot,{children:(Pt,Pr)=>{ze(Pt,{get hidden(){return a(o)},get page(){return Q.Signup}})},$$slots:{default:!0}})},Ft=ot=>{var Pt=J(),Pr=B(Pt);{var ma=$t=>{Oe($t,{children:(xr,fo)=>{ze(xr,{get hidden(){return a(o)},get page(){return Q.Signin}})},$$slots:{default:!0}})},uo=$t=>{var xr=J(),fo=B(xr);{var ii=Rn=>{Oe(Rn,{children:(Tr,vo)=>{ze(Tr,{get hidden(){return a(o)},get page(){return Q.AccessKeys}})},$$slots:{default:!0}})},li=Rn=>{var Tr=J(),vo=B(Tr);{var ci=Bn=>{Oe(Bn,{children:(Ar,ho)=>{ze(Ar,{get hidden(){return a(o)},get page(){return Q.Account}})},$$slots:{default:!0}})},ui=Bn=>{var Ar=J(),ho=B(Ar);{var di=Fn=>{Oe(Fn,{children:(Dr,po)=>{ze(Dr,{get hidden(){return a(o)},get page(){return Q.ConfirmAccessKey}})},$$slots:{default:!0}})},fi=Fn=>{var Dr=J(),po=B(Dr);{var vi=zn=>{Oe(zn,{children:(Nr,go)=>{ze(Nr,{get hidden(){return a(o)},get page(){return Q.Exit}})},$$slots:{default:!0}})},hi=zn=>{var Nr=J(),go=B(Nr);{var pi=jn=>{Oe(jn,{children:(Lr,_o)=>{ze(Lr,{get hidden(){return a(o)},get page(){return Q.Sync}})},$$slots:{default:!0}})},gi=jn=>{var Lr=J(),_o=B(Lr);{var _i=Hn=>{Oe(Hn,{children:(Mr,mo)=>{ze(Mr,{get hidden(){return a(o)},get page(){return Q.Subscription}})},$$slots:{default:!0}})},mi=Hn=>{var Mr=J(),mo=B(Mr);{var yi=Un=>{Oe(Un,{children:(ya,bi)=>{ze(ya,{get hidden(){return a(o)},get page(){return Q.About}})},$$slots:{default:!0}})},wi=Un=>{Oe(Un,{children:(ya,bi)=>{Kd(ya,{})},$$slots:{default:!0}})};Y(mo,Un=>{e()===Q.About?Un(yi):Un(wi,!1)},!0)}_(Hn,Mr)};Y(_o,Hn=>{e()===Q.Subscription?Hn(_i):Hn(mi,!1)},!0)}_(jn,Lr)};Y(go,jn=>{e()===Q.Sync?jn(pi):jn(gi,!1)},!0)}_(zn,Nr)};Y(po,zn=>{e()===Q.Exit?zn(vi):zn(hi,!1)},!0)}_(Fn,Dr)};Y(ho,Fn=>{e()===Q.ConfirmAccessKey?Fn(di):Fn(fi,!1)},!0)}_(Bn,Ar)};Y(vo,Bn=>{e()===Q.Account?Bn(ci):Bn(ui,!1)},!0)}_(Rn,Tr)};Y(fo,Rn=>{e()===Q.AccessKeys?Rn(ii):Rn(li,!1)},!0)}_($t,xr)};Y(Pr,$t=>{e()===Q.Signin?$t(ma):$t(uo,!1)},!0)}_(ot,Pt)};Y(at,ot=>{e()===Q.Signup?ot(Bt):ot(Ft,!1)},!0)}_(Ee,Fe)};Y(nt,Ee=>{e()===Q.Auth?Ee(Rt):Ee(rt,!1)},!0)}_(Ne,We)};Y(Ie,Ne=>{e()===Q.Welcome?Ne(he):Ne(oe,!1)},!0)}_(W,be)};Y(D,W=>{e()===Q.InstallSuccess?W(z):W(H,!1)},!0)}_(S,O)};Y(se,S=>{e()===Q.Install?S(ce):S(me,!1)},!0)}_(j,ne)};Y(ee,j=>{e()===Q.AccountSetup?j(ve):j(ae,!1)},!0)}_($,te)};Y(X,$=>{e()===Q.ClearStore?$(Z):$(re,!1)},!0)}_(V,T)};Y(N,V=>{e()===Q.ExportData?V(I):V(G,!1)},!0)}_(A,R)};Y(E,A=>{e()===Q.ImportData?A(x):A(F,!1)},!0)}_(k,w)};Y(m,k=>{e()===Q.Note?k(C):k(P,!1)},!0)}_(p,y)};Y(f,p=>{e()===Q.NewNote?p(h):p(g,!1)},!0)}_(u,d)};Y(i,u=>{e()===Q.Settings?u(l):u(c,!1)})}_(t,s)};var Yf=K("<!> <!>",1);function Kf(t,e){ie(e,!0);const{getDialogPages:n}=yt(),{getAccount:r}=Ys();let o=M(n),s=M(()=>r()!==void 0);const{checkMobileSize:i}=Qt();let l=U(Xe([]));const c=M(i);De(()=>{a(o),a(c),Ot(()=>{if(a(c))a(o).length>=a(l).length?v(l,a(o).map(m=>({page:m,shown:!0})),!0):v(l,a(l).map((m,C)=>({page:m.page,shown:C<a(o).length})),!0);else if(a(o).length>=a(l).length)v(l,a(o).map(m=>({page:m,shown:!0})),!0);else{if(a(o).length===0){v(l,[{page:a(l)[a(l).length-1].page,shown:!1}],!0);return}v(l,a(o).map(m=>({page:m,shown:!0})),!0)}})});const u=()=>{v(l,a(o).map(m=>({page:m,shown:!0})),!0)};var d=Yf(),f=B(d);{var h=m=>{jf(m,{})};Y(f,m=>{a(s)&&m(h)})}var g=q(f,2);{var p=m=>{var C=J(),P=B(C);da(P,19,()=>a(l),k=>k.page,(k,w,E)=>{const x=M(()=>a(w).page.split("?")[1]),F=M(()=>a(w).page.split("?")[0]);{let A=M(()=>a(E)!==a(l).length-1&&!!a(l)[a(E)+1]?.shown),R=M(()=>a(E)===0);Fo(k,{onClosed:u,get shown(){return a(w).shown},get hidden(){return a(A)},get isLastDialog(){return a(R)},children:(N,I)=>{{let G=M(()=>a(E)!==a(l).length-1&&!!a(l)[a(E)+1]?.shown);jo(N,()=>a(F),()=>a(x),()=>a(G))}},$$slots:{default:!0}})}}),_(m,C)},y=m=>{var C=J(),P=B(C);{var k=w=>{const E=M(()=>a(l)[a(l).length-1].page.split("?")[1]),x=M(()=>a(l)[a(l).length-1].page.split("?")[0]);{let F=M(()=>a(l).length===1);Fo(w,{onClosed:u,get shown(){return a(l)[a(l).length-1].shown},hidden:!1,get isLastDialog(){return a(F)},children:(A,R)=>{jo(A,()=>a(x),()=>a(E))},$$slots:{default:!0}})}};Y(P,w=>{a(l).length>0&&w(k)},!0)}_(m,C)};Y(g,m=>{i()?m(p):m(y,!1)})}_(t,d),le()}function Xf(t,e){ie(e,!1);let n=0;Ce(()=>{document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-n;(n<30&&s>0||n>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),fa(),le()}const Gf=(t,e)=>{a(e)&&a(e).scrollTo({top:0})};var Zf=K('<div><button class="c p-1us2ysh"><!> <span class="d p-1us2ysh"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),Jf=K('<!> <!> <!> <!> <main><div class="a p-1us2ysh"><!></div> <div class="b p-1us2ysh"><!></div></main> <!>',1);function Qf(t,e){ie(e,!0);const{replace:n}=Et(),{hasDialogPage:r}=yt(),{setScrollContainer:o}=pa(),{getAccount:s,init:i}=Ys(),{isInitedNotes:l}=Jt(),{getDialogPages:c}=yt(),{createBroadcastChannel:u,tabId:d}=ha(),f=u(),{getSidebarState:h}=va(),{setClosableDialog:g}=gn(),p=()=>{n(`/?${wt}=${Q.Welcome}`)};Ce(()=>{i(ne=>{ne===void 0?p():((r(Q.Welcome)||r(Q.AccountSetup))&&n("/"),ne?v(k,ne):v(k,null))});const j=async ne=>{const se=JSON.parse(ne.data);if(se.tabId&&se.tabId===d)return;const ce=se;ce.type==="initLocalAccount"||ce.type==="initCloudAccount"||ce.type==="updateAccount"||ce.type==="disconnectCloudAccount"?n("/"):ce.type==="exit"&&p()};return f.addEventListener(j),()=>f.removeEventListener(j)});const y=pn();Ce(async()=>{await new Promise(j=>setTimeout(j,250)),await xs(),y.working=!0});let m=U(!1),C=0,P=M(()=>c().length>0),k=M(s),w=M(l),E=U(null);De(()=>{g(a(k)!==void 0)}),De(()=>{o(a(E))});const x=()=>{if(a(E)){const j=a(E).scrollTop||0;j===0?v(m,!1):!a(m)&&C>j?v(m,!0):a(m)&&C+50<j&&v(m,!1),C=j}},F=()=>{x()};De(()=>(a(E)?.addEventListener("scroll",F),window.addEventListener("resize",F),()=>{a(E)?.removeEventListener("scroll",F),window.removeEventListener("resize",F)}));const A=M(h);var R=Jf(),N=B(R);Xf(N,{});var I=q(N,2);Pu(I);var G=q(I,2);ni(G,{});var V=q(G,2);Fu(V,{});var T=q(V,2),X=b(T),Z=b(X);{var re=j=>{Td(j,{})};Y(Z,j=>{a(k)!==void 0&&j(re)})}var $=q(X,2),te=b($);{var ee=j=>{Kf(j,{})};Y(te,j=>{a(w)&&j(ee)})}Je(T,j=>v(E,j),()=>a(E));var ve=q(T,2);{var ae=j=>{var ne=Zf(),se=b(ne);se.__click=[Gf,E];var ce=b(se);Ue(ce,{children:(O,D)=>{var z=Me("top");_(O,z)}});var me=q(ce,2),S=b(me);ue(S,()=>({"--rotate":"90deg","--size":"28px"})),pe(S.lastChild,{name:"back"}),de(()=>{Ln(ne,`--swiping-ratio: ${y.swipingRatio}; --transition-timing-default: ${y.duration}s;`),we(ne,1,ye({i:!0,f:y.working&&!y.isSwiping,g:a(P)||a(A).type!=="closed"}),"p-1us2ysh")}),_(j,ne)};Y(ve,j=>{a(m)&&j(ae)})}de(()=>{Ln(T,`--swiping-ratio: ${y.swipingRatio}; --transition-timing-default: ${y.duration}s;`),we(T,1,ye({e:!0,f:y.working&&!y.isSwiping,g:a(P)||a(A).type!=="closed",h:a(A).type!=="closed"}),"p-1us2ysh")}),_(t,R),le()}Ge(["click"]);function $f(t){Jc(t,{children:(e,n)=>{Qf(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Bl($f,{target:document.getElementById("app")});export{Du as $,Ys as A,cn as B,fa as C,Jt as D,no as E,wt as F,nv as G,Uf as H,pe as I,ge as J,rv as K,co as L,av as M,Ln as N,Qt as O,Q as P,Ur as Q,Je as R,we as S,ye as T,iv as U,Ue as V,lv as W,cd as X,sv as Y,cv as Z,Ot as _,ue as a,ld as a0,Jl as a1,ha as a2,pc as a3,qf as a4,ov as a5,Re as b,b as c,_ as d,da as e,K as f,a as g,U as h,Y as i,le as j,v as k,B as l,ln as m,yt as n,Ce as o,ie as p,gn as q,Xe as r,q as s,de as t,De as u,J as v,Ge as w,Me as x,M as y,Et as z};
