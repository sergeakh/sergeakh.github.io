const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aDb_rDiKO.js","a/aCeYg3FOS.css","a/a_doMyQOf.js","a/a9q_jSmK4.js","a/abA9hIFUQ.js","a/aBrkJtqMH.css","a/aDPOok3jR.js","a/aDB02xhFr.css","a/aCUm7wJl3.js","a/a54d_SC5m.css","a/aBe5moIrp.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/aDGopmyhF.js","a/aY1d2PU1k.css","a/aB5ZfMq1f.js","a/aDW-JjeO4.js","a/aCpd7MTd8.css","a/aD6OB29vf.js","a/aenMKNzfI.css","a/aC969LWc5.css","a/aB4jlY_7a.js","a/aCeh8XjKC.css","a/aCQX5PTV5.js","a/aCBPoPn5g.css","a/aBU9Fbogn.js","a/aK1a0NeEW.css","a/aBcGMslP0.js","a/aBem4Ctjp.css","a/aCHJ4ecOk.js","a/aBdnakgrk.css","a/aIgLZKD6f.js","a/aDzsMVVo5.css","a/aDZoNqVmq.js","a/aCH18nfIo.css","a/aLVReKq6V.js","a/aBqxekyEh.js","a/aCb6DfA6m.css","a/aCYknuXx_.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var Sl=Object.defineProperty;var gs=t=>{throw TypeError(t)};var kl=(t,e,a)=>e in t?Sl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var zt=(t,e,a)=>kl(t,typeof e!="symbol"?e+"":e,a),yo=(t,e,a)=>e.has(t)||gs("Cannot "+a);var j=(t,e,a)=>(yo(t,e,"read from private field"),a?a.call(t):e.get(t)),Ge=(t,e,a)=>e.has(t)?gs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),qe=(t,e,a,r)=>(yo(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),ct=(t,e,a)=>(yo(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const xl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};xl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const Tl=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};Tl();const xo=!1;var $o=Array.isArray,El=Array.prototype.indexOf,no=Array.from,Pl=Object.defineProperty,na=Object.getOwnPropertyDescriptor,Us=Object.getOwnPropertyDescriptors,Ws=Object.prototype,Nl=Array.prototype,ao=Object.getPrototypeOf,hs=Object.isExtensible;function ir(t){return typeof t=="function"}const Je=()=>{};function Al(t){return typeof t?.then=="function"}function Ml(t){return t()}function To(t){for(var e=0;e<t.length;e++)t[e]()}function Vs(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function Dl(t,e,a=!1){return t===void 0?a?e():e:t}const Nt=2,es=4,ro=8,Il=1<<24,Un=16,Wn=32,Aa=64,oo=128,un=512,It=1024,Kt=2048,Cn=4096,Jt=8192,Rn=16384,ts=32768,ca=65536,ps=1<<17,qs=1<<18,nr=1<<19,Ks=1<<20,Dn=1<<25,Ea=32768,Eo=1<<21,ns=1<<22,aa=1<<23,ra=Symbol("$state"),Ys=Symbol("legacy props"),Rl=Symbol(""),ja=new class extends Error{constructor(){super(...arguments);zt(this,"name","StaleReactionError");zt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Gs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ll(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Fl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ol(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function zl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Bl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function jl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Hl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ul(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Wl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Vl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const ql=1,Kl=2,Xs=4,Yl=8,Gl=16,Xl=1,Jl=2,Zl=4,Ql=8,$l=16,ec=1,tc=2,Et=Symbol(),nc="http://www.w3.org/1999/xhtml";function ac(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Js(t){return t===this.v}function rc(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Zs(t){return!rc(t,this.v)}let ar=!1,oc=!1;function sc(){ar=!0}const ic=[];function ha(t,e=!1,a=!1){return Br(t,new Map,"",ic,null,a)}function Br(t,e,a,r,o=null,s=!1){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if($o(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var u=0;u<t.length;u+=1){var c=t[u];u in t&&(l[u]=Br(c,e,a,r,null,s))}return l}if(ao(t)===Ws){l={},e.set(t,l),o!==null&&e.set(o,l);for(var d in t)l[d]=Br(t[d],e,a,r,null,s);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return Br(t.toJSON(),e,a,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let st=null;function Xa(t){st=t}function vt(t){return Qs().get(t)}function gt(t,e){return Qs().set(t,e),e}function be(t,e=!1,a){st={p:st,i:!1,c:null,e:null,s:t,x:null,l:ar&&!e?{s:null,u:null,$:[]}:null}}function Ce(t){var e=st,a=e.e;if(a!==null){e.e=null;for(var r of a)_i(r)}return t!==void 0&&(e.x=t),e.i=!0,st=e.p,t??{}}function rr(){return!ar||st!==null&&st.l===null}function Qs(t){return st===null&&Gs(),st.c??(st.c=new Map(lc(st)||void 0))}function lc(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let ma=[];function $s(){var t=ma;ma=[],To(t)}function Ma(t){if(ma.length===0&&!Wa){var e=ma;queueMicrotask(()=>{e===ma&&$s()})}ma.push(t)}function cc(){for(;ma.length>0;)$s()}function ei(t){var e=Ze;if(e===null)return Xe.f|=aa,t;if((e.f&ts)===0){if((e.f&oo)===0)throw t;e.b.error(t)}else Ja(t,e)}function Ja(t,e){for(;e!==null;){if((e.f&oo)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Lr=new Set;let Qe=null,jr=null,sn=null,rn=[],so=null,Po=!1,Wa=!1;var Va,qa,_a,wa,kr,Ka,Ya,Pt,No,cr,Ao,ti,ni;const Zr=class Zr{constructor(){Ge(this,Pt);zt(this,"committed",!1);zt(this,"current",new Map);zt(this,"previous",new Map);Ge(this,Va,new Set);Ge(this,qa,new Set);Ge(this,_a,0);Ge(this,wa,0);Ge(this,kr,null);Ge(this,Ka,new Set);Ge(this,Ya,new Set);zt(this,"skipped_effects",new Set);zt(this,"is_fork",!1)}is_deferred(){return this.is_fork||j(this,wa)>0}process(e){rn=[],jr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)ct(this,Pt,No).call(this,r,a);this.is_fork||ct(this,Pt,ti).call(this),this.is_deferred()?(ct(this,Pt,cr).call(this,a.effects),ct(this,Pt,cr).call(this,a.render_effects)):(jr=this,Qe=null,ms(a.render_effects),ms(a.effects),jr=null,j(this,kr)?.resolve()),sn=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&aa)===0&&(this.current.set(e,e.v),sn?.set(e,e.v))}activate(){Qe=this,this.apply()}deactivate(){Qe===this&&(Qe=null,sn=null)}flush(){if(this.activate(),rn.length>0){if(ri(),Qe!==null&&Qe!==this)return}else j(this,_a)===0&&this.process([]);this.deactivate()}discard(){for(const e of j(this,qa))e(this);j(this,qa).clear()}increment(e){qe(this,_a,j(this,_a)+1),e&&qe(this,wa,j(this,wa)+1)}decrement(e){qe(this,_a,j(this,_a)-1),e&&qe(this,wa,j(this,wa)-1),this.revive()}revive(){for(const e of j(this,Ka))j(this,Ya).delete(e),Lt(e,Kt),Pa(e);for(const e of j(this,Ya))Lt(e,Cn),Pa(e);this.flush()}oncommit(e){j(this,Va).add(e)}ondiscard(e){j(this,qa).add(e)}settled(){return(j(this,kr)??qe(this,kr,Vs())).promise}static ensure(){if(Qe===null){const e=Qe=new Zr;Lr.add(Qe),Wa||Zr.enqueue(()=>{Qe===e&&e.flush()})}return Qe}static enqueue(e){Ma(e)}apply(){}};Va=new WeakMap,qa=new WeakMap,_a=new WeakMap,wa=new WeakMap,kr=new WeakMap,Ka=new WeakMap,Ya=new WeakMap,Pt=new WeakSet,No=function(e,a){e.f^=It;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Wn|Aa))!==0,i=s&&(o&It)!==0,l=i||(o&Jt)!==0||this.skipped_effects.has(r);if((r.f&oo)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=It:(o&es)!==0?a.effects.push(r):Ar(r)&&((r.f&Un)!==0&&j(this,Ka).add(r),wr(r));var u=r.first;if(u!==null){r=u;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===a.effect&&(ct(this,Pt,cr).call(this,a.effects),ct(this,Pt,cr).call(this,a.render_effects),a=a.parent),r=c.next,c=c.parent}},cr=function(e){for(const a of e)(a.f&Kt)!==0?j(this,Ka).add(a):(a.f&Cn)!==0&&j(this,Ya).add(a),ct(this,Pt,Ao).call(this,a.deps),Lt(a,It)},Ao=function(e){if(e!==null)for(const a of e)(a.f&Nt)===0||(a.f&Ea)===0||(a.f^=Ea,ct(this,Pt,Ao).call(this,a.deps))},ti=function(){if(j(this,wa)===0){for(const e of j(this,Va))e();j(this,Va).clear()}j(this,_a)===0&&ct(this,Pt,ni).call(this)},ni=function(){var s;if(Lr.size>1){this.previous.clear();var e=sn,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Lr){if(i===this){a=!1;continue}const l=[];for(const[c,d]of this.current){if(i.current.has(c))if(a&&d!==i.current.get(c))i.current.set(c,d);else continue;l.push(c)}if(l.length===0)continue;const u=[...i.current.keys()].filter(c=>!this.current.has(c));if(u.length>0){var o=rn;rn=[];const c=new Set,d=new Map;for(const v of l)oi(v,u,c,d);if(rn.length>0){Qe=i,i.apply();for(const v of rn)ct(s=i,Pt,No).call(s,v,r);i.deactivate()}rn=o}}Qe=null,sn=e}this.committed=!0,Lr.delete(this)};let wn=Zr;function ai(t){var e=Wa;Wa=!0;try{for(var a;;){if(cc(),rn.length===0&&(Qe?.flush(),rn.length===0))return so=null,a;ri()}}finally{Wa=e}}function ri(){var t=xa;Po=!0;var e=null;try{var a=0;for(Kr(!0);rn.length>0;){var r=wn.ensure();if(a++>1e3){var o,s;dc()}r.process(rn),oa.clear()}}finally{Po=!1,Kr(t),so=null}}function dc(){try{Bl()}catch(t){Ja(t,so)}}let Nn=null;function ms(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(Rn|Jt))===0&&Ar(r)&&(Nn=new Set,wr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?bi(r):r.fn=null),Nn?.size>0)){oa.clear();for(const o of Nn){if((o.f&(Rn|Jt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)Nn.has(i)&&(Nn.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const u=s[l];(u.f&(Rn|Jt))===0&&wr(u)}}Nn.clear()}}Nn=null}}function oi(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Nt)!==0?oi(o,e,a,r):(s&(ns|Un))!==0&&(s&Kt)===0&&si(o,e,r)&&(Lt(o,Kt),Pa(o))}}function si(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Nt)!==0&&si(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function Pa(t){for(var e=so=t;e.parent!==null;){e=e.parent;var a=e.f;if(Po&&e===Ze&&(a&Un)!==0&&(a&qs)===0)return;if((a&(Aa|Wn))!==0){if((a&It)===0)return;e.f^=It}}rn.push(e)}function uc(t){let e=0,a=Sn(0),r;return()=>{mr()&&(n(a),lo(()=>(e===0&&(r=jt(()=>t(()=>sa(a)))),e+=1,()=>{Ma(()=>{e-=1,e===0&&(r?.(),r=void 0,sa(a))})})))}}var fc=ca|nr|oo;function vc(t,e,a){new gc(t,e,a)}var tn,nn,Qo,gn,ya,hn,an,Wt,pn,Mn,Zn,ba,Qn,Ca,$n,Qr,xt,hc,pc,Mo,Hr,Ur,Do;class gc{constructor(e,a,r){Ge(this,xt);zt(this,"parent");Ge(this,tn,!1);Ge(this,nn);Ge(this,Qo,null);Ge(this,gn);Ge(this,ya);Ge(this,hn);Ge(this,an,null);Ge(this,Wt,null);Ge(this,pn,null);Ge(this,Mn,null);Ge(this,Zn,null);Ge(this,ba,0);Ge(this,Qn,0);Ge(this,Ca,!1);Ge(this,$n,null);Ge(this,Qr,uc(()=>(qe(this,$n,Sn(j(this,ba))),()=>{qe(this,$n,null)})));qe(this,nn,e),qe(this,gn,a),qe(this,ya,r),this.parent=Ze.b,qe(this,tn,!!j(this,gn).pending),qe(this,hn,or(()=>{Ze.b=this;{var o=ct(this,xt,Mo).call(this);try{qe(this,an,on(()=>r(o)))}catch(s){this.error(s)}j(this,Qn)>0?ct(this,xt,Ur).call(this):qe(this,tn,!1)}return()=>{j(this,Zn)?.remove()}},fc))}is_pending(){return j(this,tn)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!j(this,gn).pending}update_pending_count(e){ct(this,xt,Do).call(this,e),qe(this,ba,j(this,ba)+e),j(this,$n)&&Ln(j(this,$n),j(this,ba))}get_effect_pending(){return j(this,Qr).call(this),n(j(this,$n))}error(e){var a=j(this,gn).onerror;let r=j(this,gn).failed;if(j(this,Ca)||!a&&!r)throw e;j(this,an)&&(qt(j(this,an)),qe(this,an,null)),j(this,Wt)&&(qt(j(this,Wt)),qe(this,Wt,null)),j(this,pn)&&(qt(j(this,pn)),qe(this,pn,null));var o=!1,s=!1;const i=()=>{if(o){ac();return}o=!0,s&&Vl(),wn.ensure(),qe(this,ba,0),j(this,pn)!==null&&ka(j(this,pn),()=>{qe(this,pn,null)}),qe(this,tn,this.has_pending_snippet()),qe(this,an,ct(this,xt,Hr).call(this,()=>(qe(this,Ca,!1),on(()=>j(this,ya).call(this,j(this,nn)))))),j(this,Qn)>0?ct(this,xt,Ur).call(this):qe(this,tn,!1)};var l=Xe;try{Vt(null),s=!0,a?.(e,i),s=!1}catch(u){Ja(u,j(this,hn)&&j(this,hn).parent)}finally{Vt(l)}r&&Ma(()=>{qe(this,pn,ct(this,xt,Hr).call(this,()=>{wn.ensure(),qe(this,Ca,!0);try{return on(()=>{r(j(this,nn),()=>e,()=>i)})}catch(u){return Ja(u,j(this,hn).parent),null}finally{qe(this,Ca,!1)}}))})}}tn=new WeakMap,nn=new WeakMap,Qo=new WeakMap,gn=new WeakMap,ya=new WeakMap,hn=new WeakMap,an=new WeakMap,Wt=new WeakMap,pn=new WeakMap,Mn=new WeakMap,Zn=new WeakMap,ba=new WeakMap,Qn=new WeakMap,Ca=new WeakMap,$n=new WeakMap,Qr=new WeakMap,xt=new WeakSet,hc=function(){try{qe(this,an,on(()=>j(this,ya).call(this,j(this,nn))))}catch(e){this.error(e)}qe(this,tn,!1)},pc=function(){const e=j(this,gn).pending;e&&(qe(this,Wt,on(()=>e(j(this,nn)))),wn.enqueue(()=>{var a=ct(this,xt,Mo).call(this);qe(this,an,ct(this,xt,Hr).call(this,()=>(wn.ensure(),on(()=>j(this,ya).call(this,a))))),j(this,Qn)>0?ct(this,xt,Ur).call(this):(ka(j(this,Wt),()=>{qe(this,Wt,null)}),qe(this,tn,!1))}))},Mo=function(){var e=j(this,nn);return j(this,tn)&&(qe(this,Zn,Fn()),j(this,nn).before(j(this,Zn)),e=j(this,Zn)),e},Hr=function(e){var a=Ze,r=Xe,o=st;kn(j(this,hn)),Vt(j(this,hn)),Xa(j(this,hn).ctx);try{return e()}catch(s){return ei(s),null}finally{kn(a),Vt(r),Xa(o)}},Ur=function(){const e=j(this,gn).pending;j(this,an)!==null&&(qe(this,Mn,document.createDocumentFragment()),j(this,Mn).append(j(this,Zn)),ki(j(this,an),j(this,Mn))),j(this,Wt)===null&&qe(this,Wt,on(()=>e(j(this,nn))))},Do=function(e){var a;if(!this.has_pending_snippet()){this.parent&&ct(a=this.parent,xt,Do).call(a,e);return}qe(this,Qn,j(this,Qn)+e),j(this,Qn)===0&&(qe(this,tn,!1),j(this,Wt)&&ka(j(this,Wt),()=>{qe(this,Wt,null)}),j(this,Mn)&&(j(this,nn).before(j(this,Mn)),qe(this,Mn,null)))};function mc(t,e,a,r){const o=rr()?Er:Pr;if(a.length===0&&t.length===0){r(e.map(o));return}var s=Qe,i=Ze,l=ii();function u(){Promise.all(a.map(c=>_c(c))).then(c=>{l();try{r([...e.map(o),...c])}catch(d){(i.f&Rn)===0&&Ja(d,i)}s?.deactivate(),pr()}).catch(c=>{Ja(c,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return u()}finally{s?.deactivate(),pr()}}):u()}function ii(){var t=Ze,e=Xe,a=st,r=Qe;return function(s=!0){kn(t),Vt(e),Xa(a),s&&r?.activate()}}function pr(){kn(null),Vt(null),Xa(null)}function Er(t){var e=Nt|Kt,a=Xe!==null&&(Xe.f&Nt)!==0?Xe:null;return Ze!==null&&(Ze.f|=nr),{ctx:st,deps:null,effects:null,equals:Js,f:e,fn:t,reactions:null,rv:0,v:Et,wv:0,parent:a??Ze,ac:null}}function _c(t,e){let a=Ze;a===null&&Ll();var r=a.b,o=void 0,s=Sn(Et),i=!Xe,l=new Map;return Nc(()=>{var u=Vs();o=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{c===Qe&&c.committed&&c.deactivate(),pr()})}catch(h){u.reject(h),pr()}var c=Qe;if(i){var d=!r.is_pending();r.update_pending_count(1),c.increment(d),l.get(c)?.reject(ja),l.delete(c),l.set(c,u)}const v=(h,p=void 0)=>{if(c.activate(),p)p!==ja&&(s.f|=aa,Ln(s,p));else{(s.f&aa)!==0&&(s.f^=aa),Ln(s,h);for(const[_,x]of l){if(l.delete(_),_===c)break;x.reject(ja)}}i&&(r.update_pending_count(-1),c.decrement(d))};u.promise.then(v,h=>v(null,h||"unknown"))}),mi(()=>{for(const u of l.values())u.reject(ja)}),new Promise(u=>{function c(d){function v(){d===o?u(s):c(o)}d.then(v,v)}c(o)})}function P(t){const e=Er(t);return xi(e),e}function Pr(t){const e=Er(t);return e.equals=Zs,e}function li(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)qt(e[a])}}function wc(t){for(var e=t.parent;e!==null;){if((e.f&Nt)===0)return(e.f&Rn)===0?e:null;e=e.parent}return null}function as(t){var e,a=Ze;kn(wc(t));try{t.f&=~Ea,li(t),e=Ni(t)}finally{kn(a)}return e}function ci(t){var e=as(t);if(t.equals(e)||(Qe?.is_fork||(t.v=e),t.wv=Ei()),!Da)if(sn!==null)(mr()||Qe?.is_fork)&&sn.set(t,e);else{var a=(t.f&un)===0?Cn:It;Lt(t,a)}}let Io=new Set;const oa=new Map;let di=!1;function Sn(t,e){var a={f:0,v:t,reactions:null,equals:Js,rv:0,wv:0};return a}function D(t,e){const a=Sn(t);return xi(a),a}function Ro(t,e=!1,a=!0){var o;const r=Sn(t);return e||(r.equals=Zs),ar&&a&&st!==null&&st.l!==null&&((o=st.l).s??(o.s=[])).push(r),r}function f(t,e,a=!1){Xe!==null&&(!yn||(Xe.f&ps)!==0)&&rr()&&(Xe.f&(Nt|Un|ns|ps))!==0&&!On?.includes(t)&&Wl();let r=a?ft(e):e;return Ln(t,r)}function Ln(t,e){if(!t.equals(e)){var a=t.v;Da?oa.set(t,e):oa.set(t,a),t.v=e;var r=wn.ensure();r.capture(t,a),(t.f&Nt)!==0&&((t.f&Kt)!==0&&as(t),Lt(t,(t.f&un)!==0?It:Cn)),t.wv=Ei(),ui(t,Kt),rr()&&Ze!==null&&(Ze.f&It)!==0&&(Ze.f&(Wn|Aa))===0&&($t===null?Dc([t]):$t.push(t)),!r.is_fork&&Io.size>0&&!di&&yc()}return e}function yc(){di=!1;var t=xa;Kr(!0);const e=Array.from(Io);try{for(const a of e)(a.f&It)!==0&&Lt(a,Cn),Ar(a)&&wr(a)}finally{Kr(t)}Io.clear()}function sa(t){f(t,t.v+1)}function ui(t,e){var a=t.reactions;if(a!==null)for(var r=rr(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===Ze)){var u=(l&Kt)===0;if(u&&Lt(i,e),(l&Nt)!==0){var c=i;sn?.delete(c),(l&Ea)===0&&(l&un&&(i.f|=Ea),ui(c,Cn))}else u&&((l&Un)!==0&&Nn!==null&&Nn.add(i),Pa(i))}}}function ft(t){if(typeof t!="object"||t===null||ra in t)return t;const e=ao(t);if(e!==Ws&&e!==Nl)return t;var a=new Map,r=$o(t),o=D(0),s=zn,i=l=>{if(zn===s)return l();var u=Xe,c=zn;Vt(null),bs(s);var d=l();return Vt(u),bs(c),d};return r&&a.set("length",D(t.length)),new Proxy(t,{defineProperty(l,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Hl();var d=a.get(u);return d===void 0?d=i(()=>{var v=D(c.value);return a.set(u,v),v}):f(d,c.value,!0),!0},deleteProperty(l,u){var c=a.get(u);if(c===void 0){if(u in l){const d=i(()=>D(Et));a.set(u,d),sa(o)}}else f(c,Et),sa(o);return!0},get(l,u,c){if(u===ra)return t;var d=a.get(u),v=u in l;if(d===void 0&&(!v||na(l,u)?.writable)&&(d=i(()=>{var p=ft(v?l[u]:Et),_=D(p);return _}),a.set(u,d)),d!==void 0){var h=n(d);return h===Et?void 0:h}return Reflect.get(l,u,c)},getOwnPropertyDescriptor(l,u){var c=Reflect.getOwnPropertyDescriptor(l,u);if(c&&"value"in c){var d=a.get(u);d&&(c.value=n(d))}else if(c===void 0){var v=a.get(u),h=v?.v;if(v!==void 0&&h!==Et)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(l,u){if(u===ra)return!0;var c=a.get(u),d=c!==void 0&&c.v!==Et||Reflect.has(l,u);if(c!==void 0||Ze!==null&&(!d||na(l,u)?.writable)){c===void 0&&(c=i(()=>{var h=d?ft(l[u]):Et,p=D(h);return p}),a.set(u,c));var v=n(c);if(v===Et)return!1}return d},set(l,u,c,d){var v=a.get(u),h=u in l;if(r&&u==="length")for(var p=c;p<v.v;p+=1){var _=a.get(p+"");_!==void 0?f(_,Et):p in l&&(_=i(()=>D(Et)),a.set(p+"",_))}if(v===void 0)(!h||na(l,u)?.writable)&&(v=i(()=>D(void 0)),f(v,ft(c)),a.set(u,v));else{h=v.v!==Et;var x=i(()=>ft(c));f(v,x)}var m=Reflect.getOwnPropertyDescriptor(l,u);if(m?.set&&m.set.call(d,c),!h){if(r&&typeof u=="string"){var b=a.get("length"),M=Number(u);Number.isInteger(M)&&M>=b.v&&f(b,M+1)}sa(o)}return!0},ownKeys(l){n(o);var u=Reflect.ownKeys(l).filter(v=>{var h=a.get(v);return h===void 0||h.v!==Et});for(var[c,d]of a)d.v!==Et&&!(c in l)&&u.push(c);return u},setPrototypeOf(){Ul()}})}var _s,fi,vi,gi;function bc(){if(_s===void 0){_s=window,fi=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;vi=na(e,"firstChild").get,gi=na(e,"nextSibling").get,hs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),hs(a)&&(a.__t=void 0)}}function Fn(t=""){return document.createTextNode(t)}function Za(t){return vi.call(t)}function Nr(t){return gi.call(t)}function C(t,e){return Za(t)}function E(t,e=!1){{var a=Za(t);return a instanceof Comment&&a.data===""?Nr(a):a}}function A(t,e=1,a=!1){let r=t;for(;e--;)r=Nr(r);return r}function Cc(t){t.textContent=""}function hi(){return!1}let ws=!1;function Sc(){ws||(ws=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function io(t){var e=Xe,a=Ze;Vt(null),kn(null);try{return t()}finally{Vt(e),kn(a)}}function kc(t,e,a,r=a){t.addEventListener(e,()=>io(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),Sc()}function pi(t){Ze===null&&(Xe===null&&zl(),Ol()),Da&&Fl()}function xc(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function Tn(t,e,a){var r=Ze;r!==null&&(r.f&Jt)!==0&&(t|=Jt);var o={ctx:st,deps:null,nodes:null,f:t|Kt|un,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{wr(o),o.f|=ts}catch(l){throw qt(o),l}else e!==null&&Pa(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&nr)===0&&(s=s.first,(t&Un)!==0&&(t&ca)!==0&&s!==null&&(s.f|=ca)),s!==null&&(s.parent=r,r!==null&&xc(s,r),Xe!==null&&(Xe.f&Nt)!==0&&(t&Aa)===0)){var i=Xe;(i.effects??(i.effects=[])).push(s)}return o}function mr(){return Xe!==null&&!yn}function mi(t){const e=Tn(ro,null,!1);return Lt(e,It),e.teardown=t,e}function Ye(t){pi();var e=Ze.f,a=!Xe&&(e&Wn)!==0&&(e&ts)===0;if(a){var r=st;(r.e??(r.e=[])).push(t)}else return _i(t)}function _i(t){return Tn(es|Ks,t,!1)}function Tc(t){return pi(),Tn(ro|Ks,t,!0)}function Ec(t){wn.ensure();const e=Tn(Aa|nr,t,!0);return(a={})=>new Promise(r=>{a.outro?ka(e,()=>{qt(e),r(void 0)}):(qt(e),r(void 0))})}function Pc(t){return Tn(es,t,!1)}function Nc(t){return Tn(ns|nr,t,!0)}function lo(t,e=0){return Tn(ro|e,t,!0)}function De(t,e=[],a=[],r=[]){mc(r,e,a,o=>{Tn(ro,()=>t(...o.map(n)),!0)})}function or(t,e=0){var a=Tn(Un|e,t,!0);return a}function on(t){return Tn(Wn|nr,t,!0)}function wi(t){var e=t.teardown;if(e!==null){const a=Da,r=Xe;ys(!0),Vt(null);try{e.call(null)}finally{ys(a),Vt(r)}}}function yi(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&io(()=>{o.abort(ja)});var r=a.next;(a.f&Aa)!==0?a.parent=null:qt(a,e),a=r}}function Ac(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&Wn)===0&&qt(e),e=a}}function qt(t,e=!0){var a=!1;(e||(t.f&qs)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Mc(t.nodes.start,t.nodes.end),a=!0),yi(t,e&&!a),Yr(t,0),Lt(t,Rn);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();wi(t);var o=t.parent;o!==null&&o.first!==null&&bi(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Mc(t,e){for(;t!==null;){var a=t===e?null:Nr(t);t.remove(),t=a}}function bi(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function ka(t,e,a=!0){var r=[];Ci(t,r,!0);var o=()=>{a&&qt(t),e&&e()},s=r.length;if(s>0){var i=()=>--s||o();for(var l of r)l.out(i)}else o()}function Ci(t,e,a){if((t.f&Jt)===0){t.f^=Jt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&e.push(l);for(var o=t.first;o!==null;){var s=o.next,i=(o.f&ca)!==0||(o.f&Wn)!==0&&(t.f&Un)!==0;Ci(o,e,i?a:!1),o=s}}}function rs(t){Si(t,!0)}function Si(t,e){if((t.f&Jt)!==0){t.f^=Jt,(t.f&It)===0&&(Lt(t,Kt),Pa(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&ca)!==0||(a.f&Wn)!==0;Si(a,o?e:!1),a=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)(i.is_global||e)&&i.in()}}function ki(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var o=a===r?null:Nr(a);e.append(a),a=o}}let xa=!1;function Kr(t){xa=t}let Da=!1;function ys(t){Da=t}let Xe=null,yn=!1;function Vt(t){Xe=t}let Ze=null;function kn(t){Ze=t}let On=null;function xi(t){Xe!==null&&(On===null?On=[t]:On.push(t))}let Bt=null,Yt=0,$t=null;function Dc(t){$t=t}let Ti=1,_r=0,zn=_r;function bs(t){zn=t}function Ei(){return++Ti}function Ar(t){var e=t.f;if((e&Kt)!==0)return!0;if(e&Nt&&(t.f&=~Ea),(e&Cn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(Ar(s)&&ci(s),s.wv>t.wv)return!0}(e&un)!==0&&sn===null&&Lt(t,It)}return!1}function Pi(t,e,a=!0){var r=t.reactions;if(r!==null&&!On?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Nt)!==0?Pi(s,e,!1):e===s&&(a?Lt(s,Kt):(s.f&It)!==0&&Lt(s,Cn),Pa(s))}}function Ni(t){var _;var e=Bt,a=Yt,r=$t,o=Xe,s=On,i=st,l=yn,u=zn,c=t.f;Bt=null,Yt=0,$t=null,Xe=(c&(Wn|Aa))===0?t:null,On=null,Xa(t.ctx),yn=!1,zn=++_r,t.ac!==null&&(io(()=>{t.ac.abort(ja)}),t.ac=null);try{t.f|=Eo;var d=t.fn,v=d(),h=t.deps;if(Bt!==null){var p;if(Yr(t,Yt),h!==null&&Yt>0)for(h.length=Yt+Bt.length,p=0;p<Bt.length;p++)h[Yt+p]=Bt[p];else t.deps=h=Bt;if(mr()&&(t.f&un)!==0)for(p=Yt;p<h.length;p++)((_=h[p]).reactions??(_.reactions=[])).push(t)}else h!==null&&Yt<h.length&&(Yr(t,Yt),h.length=Yt);if(rr()&&$t!==null&&!yn&&h!==null&&(t.f&(Nt|Cn|Kt))===0)for(p=0;p<$t.length;p++)Pi($t[p],t);return o!==null&&o!==t&&(_r++,$t!==null&&(r===null?r=$t:r.push(...$t))),(t.f&aa)!==0&&(t.f^=aa),v}catch(x){return ei(x)}finally{t.f^=Eo,Bt=e,Yt=a,$t=r,Xe=o,On=s,Xa(i),yn=l,zn=u}}function Ic(t,e){let a=e.reactions;if(a!==null){var r=El.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&Nt)!==0&&(Bt===null||!Bt.includes(e))&&(Lt(e,Cn),(e.f&un)!==0&&(e.f^=un,e.f&=~Ea),li(e),Yr(e,0))}function Yr(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)Ic(t,a[r])}function wr(t){var e=t.f;if((e&Rn)===0){Lt(t,It);var a=Ze,r=xa;Ze=t,xa=!0;try{(e&(Un|Il))!==0?Ac(t):yi(t),wi(t);var o=Ni(t);t.teardown=typeof o=="function"?o:null,t.wv=Ti;var s;xo&&oc&&(t.f&Kt)!==0&&t.deps}finally{xa=r,Ze=a}}}async function Ai(){await Promise.resolve(),ai()}function n(t){var e=t.f,a=(e&Nt)!==0;if(Xe!==null&&!yn){var r=Ze!==null&&(Ze.f&Rn)!==0;if(!r&&!On?.includes(t)){var o=Xe.deps;if((Xe.f&Eo)!==0)t.rv<_r&&(t.rv=_r,Bt===null&&o!==null&&o[Yt]===t?Yt++:Bt===null?Bt=[t]:Bt.includes(t)||Bt.push(t));else{(Xe.deps??(Xe.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Xe]:s.includes(Xe)||s.push(Xe)}}}if(Da){if(oa.has(t))return oa.get(t);if(a){var i=t,l=i.v;return((i.f&It)===0&&i.reactions!==null||Di(i))&&(l=as(i)),oa.set(i,l),l}}else a&&(!sn?.has(t)||Qe?.is_fork&&!mr())&&(i=t,Ar(i)&&ci(i),xa&&mr()&&(i.f&un)===0&&Mi(i));if(sn?.has(t))return sn.get(t);if((t.f&aa)!==0)throw t.v;return t.v}function Mi(t){if(t.deps!==null){t.f^=un;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&Nt)!==0&&(e.f&un)===0&&Mi(e)}}function Di(t){if(t.v===Et)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(oa.has(e)||(e.f&Nt)!==0&&Di(e))return!0;return!1}function jt(t){var e=yn;try{return yn=!0,t()}finally{yn=e}}const Rc=-7169;function Lt(t,e){t.f=t.f&Rc|e}function Lc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ra in t)Lo(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&ra in a&&Lo(a)}}}function Lo(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Lo(t[r],e)}catch{}const a=ao(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Us(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Fc=["touchstart","touchmove"];function Oc(t){return Fc.includes(t)}const Ii=new Set,Fo=new Set;function zc(t,e,a,r={}){function o(s){if(r.capture||dr.call(e,s),!s.cancelBubble)return io(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Ma(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function ln(t,e,a,r,o){var s={capture:r,passive:o},i=zc(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&mi(()=>{e.removeEventListener(t,i,s)})}function ht(t){for(var e=0;e<t.length;e++)Ii.add(t[e]);for(var a of Fo)a(t)}let Cs=null;function dr(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;Cs=t;var i=0,l=Cs===t&&t.__root;if(l){var u=o.indexOf(l);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var c=o.indexOf(e);if(c===-1)return;u<=c&&(i=u)}if(s=o[i]||t.target,s!==e){Pl(t,"currentTarget",{configurable:!0,get(){return s||a}});var d=Xe,v=Ze;Vt(null),kn(null);try{for(var h,p=[];s!==null;){var _=s.assignedSlot||s.parentNode||s.host||null;try{var x=s["__"+r];x!=null&&(!s.disabled||t.target===s)&&x.call(s,t)}catch(m){h?p.push(m):h=m}if(t.cancelBubble||_===e||_===null)break;s=_}if(h){for(let m of p)queueMicrotask(()=>{throw m});throw h}}finally{t.__root=e,delete t.currentTarget,Vt(d),kn(v)}}}function Ri(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function yr(t,e){var a=Ze;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function S(t,e){var a=(e&ec)!==0,r=(e&tc)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=Ri(s?t:"<!>"+t),a||(o=Za(o)));var i=r||fi?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=Za(i),u=i.lastChild;yr(l,u)}else yr(i,i);return i}}function Bc(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=Ri(o),l=Za(i);s=Za(l)}var u=s.cloneNode(!0);return yr(u,u),u}}function jc(t,e){return Bc(t,e,"svg")}function Ke(t=""){{var e=Fn(t+"");return yr(e,e),e}}function we(){var t=document.createDocumentFragment(),e=document.createComment(""),a=Fn();return t.append(e,a),yr(e,a),t}function g(t,e){t!==null&&t.before(e)}function Jh(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function ut(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Hc(t,e){return Uc(t,e)}const za=new Map;function Uc(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){bc();var l=new Set,u=v=>{for(var h=0;h<v.length;h++){var p=v[h];if(!l.has(p)){l.add(p);var _=Oc(p);e.addEventListener(p,dr,{passive:_});var x=za.get(p);x===void 0?(document.addEventListener(p,dr,{passive:_}),za.set(p,1)):za.set(p,x+1)}}};u(no(Ii)),Fo.add(u);var c=void 0,d=Ec(()=>{var v=a??e.appendChild(Fn());return vc(v,{pending:()=>{}},h=>{if(s){be({});var p=st;p.c=s}o&&(r.$$events=o),c=t(h,r)||{},s&&Ce()}),()=>{for(var h of l){e.removeEventListener(h,dr);var p=za.get(h);--p===0?(document.removeEventListener(h,dr),za.delete(h)):za.set(h,p)}Fo.delete(u),v!==a&&v.parentNode?.removeChild(v)}});return Wc.set(c,d),c}let Wc=new WeakMap;var cn,mn,Xt,Sa,xr,Tr,$r;class co{constructor(e,a=!0){zt(this,"anchor");Ge(this,cn,new Map);Ge(this,mn,new Map);Ge(this,Xt,new Map);Ge(this,Sa,new Set);Ge(this,xr,!0);Ge(this,Tr,()=>{var e=Qe;if(j(this,cn).has(e)){var a=j(this,cn).get(e),r=j(this,mn).get(a);if(r)rs(r),j(this,Sa).delete(a);else{var o=j(this,Xt).get(a);o&&(j(this,mn).set(a,o.effect),j(this,Xt).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of j(this,cn)){if(j(this,cn).delete(s),s===e)break;const l=j(this,Xt).get(i);l&&(qt(l.effect),j(this,Xt).delete(i))}for(const[s,i]of j(this,mn)){if(s===a||j(this,Sa).has(s))continue;const l=()=>{if(Array.from(j(this,cn).values()).includes(s)){var c=document.createDocumentFragment();ki(i,c),c.append(Fn()),j(this,Xt).set(s,{effect:i,fragment:c})}else qt(i);j(this,Sa).delete(s),j(this,mn).delete(s)};j(this,xr)||!r?(j(this,Sa).add(s),ka(i,l,!1)):l()}}});Ge(this,$r,e=>{j(this,cn).delete(e);const a=Array.from(j(this,cn).values());for(const[r,o]of j(this,Xt))a.includes(r)||(qt(o.effect),j(this,Xt).delete(r))});this.anchor=e,qe(this,xr,a)}ensure(e,a){var r=Qe,o=hi();if(a&&!j(this,mn).has(e)&&!j(this,Xt).has(e))if(o){var s=document.createDocumentFragment(),i=Fn();s.append(i),j(this,Xt).set(e,{effect:on(()=>a(i)),fragment:s})}else j(this,mn).set(e,on(()=>a(this.anchor)));if(j(this,cn).set(r,e),o){for(const[l,u]of j(this,mn))l===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[l,u]of j(this,Xt))l===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(j(this,Tr)),r.ondiscard(j(this,$r))}else j(this,Tr).call(this)}}cn=new WeakMap,mn=new WeakMap,Xt=new WeakMap,Sa=new WeakMap,xr=new WeakMap,Tr=new WeakMap,$r=new WeakMap;const Vc=0,bo=1;function qc(t,e,a,r,o){var s=rr(),i=Et,l=s?Sn(i):Ro(i,!1,!1),u=s?Sn(i):Ro(i,!1,!1),c=new co(t);or(()=>{var d=e(),v=!1;if(Al(d)){var h=ii(),p=!1;const _=x=>{if(!v){p=!0,h(!1),wn.ensure();try{x()}finally{pr(),Wa||ai()}}};d.then(x=>{_(()=>{Ln(l,x),c.ensure(bo,r&&(m=>r(m,l)))})},x=>{_(()=>{if(Ln(u,x),c.ensure(bo,o&&(m=>o(m,u))),!o)throw u.v})}),Ma(()=>{p||_(()=>{c.ensure(Vc,a)})})}else Ln(l,d),c.ensure(bo,r&&(_=>r(_,l)));return()=>{v=!0}})}function O(t,e,a=!1){var r=new co(t),o=a?ca:0;function s(i,l){r.ensure(i,l)}or(()=>{var i=!1;e((l,u=!0)=>{i=!0,s(u,l)}),i||s(!1,null)},o)}function ve(t,e){lo(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Kc(t,e,a){for(var r=[],o=e.length,s,i=e.length,l=0;l<o;l++){let v=e[l];ka(v,()=>{if(s){if(s.pending.delete(v),s.done.add(v),s.pending.size===0){var h=t.outrogroups;Oo(no(s.done)),h.delete(s),h.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var u=r.length===0&&a!==null;if(u){var c=a,d=c.parentNode;Cc(d),d.append(c),t.items.clear()}Oo(e,!u)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function Oo(t,e=!0){for(var a=0;a<t.length;a++)qt(t[a],e)}var Ss;function Bn(t,e,a,r,o,s=null){var i=t,l=new Map,u=(e&Xs)!==0;if(u){var c=t;i=c.appendChild(Fn())}var d=null,v=Pr(()=>{var b=a();return $o(b)?b:b==null?[]:no(b)}),h,p=!0;function _(){m.fallback=d,Yc(m,h,i,e,r),d!==null&&(h.length===0?(d.f&Dn)===0?rs(d):(d.f^=Dn,ur(d,null,i)):ka(d,()=>{d=null}))}var x=or(()=>{h=n(v);for(var b=h.length,M=new Set,w=Qe,k=hi(),I=0;I<b;I+=1){var Z=h[I],H=r(Z,I),W=p?null:l.get(H);W?(W.v&&Ln(W.v,Z),W.i&&Ln(W.i,I),k&&w.skipped_effects.delete(W.e)):(W=Gc(l,p?i:Ss??(Ss=Fn()),Z,H,I,o,e,a),p||(W.e.f|=Dn),l.set(H,W)),M.add(H)}if(b===0&&s&&!d&&(p?d=on(()=>s(i)):(d=on(()=>s(Ss??(Ss=Fn()))),d.f|=Dn)),!p)if(k){for(const[R,J]of l)M.has(R)||w.skipped_effects.add(J.e);w.oncommit(_),w.ondiscard(()=>{})}else _();n(v)}),m={effect:x,items:l,outrogroups:null,fallback:d};p=!1}function Yc(t,e,a,r,o){var s=(r&Yl)!==0,i=e.length,l=t.items,u=t.effect.first,c,d=null,v,h=[],p=[],_,x,m,b;if(s)for(b=0;b<i;b+=1)_=e[b],x=o(_,b),m=l.get(x).e,(m.f&Dn)===0&&(m.nodes?.a?.measure(),(v??(v=new Set)).add(m));for(b=0;b<i;b+=1){if(_=e[b],x=o(_,b),m=l.get(x).e,t.outrogroups!==null)for(const J of t.outrogroups)J.pending.delete(m),J.done.delete(m);if((m.f&Dn)!==0)if(m.f^=Dn,m===u)ur(m,null,a);else{var M=d?d.next:u;m===t.effect.last&&(t.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),Kn(t,d,m),Kn(t,m,M),ur(m,M,a),d=m,h=[],p=[],u=d.next;continue}if((m.f&Jt)!==0&&(rs(m),s&&(m.nodes?.a?.unfix(),(v??(v=new Set)).delete(m))),m!==u){if(c!==void 0&&c.has(m)){if(h.length<p.length){var w=p[0],k;d=w.prev;var I=h[0],Z=h[h.length-1];for(k=0;k<h.length;k+=1)ur(h[k],w,a);for(k=0;k<p.length;k+=1)c.delete(p[k]);Kn(t,I.prev,Z.next),Kn(t,d,I),Kn(t,Z,w),u=w,d=Z,b-=1,h=[],p=[]}else c.delete(m),ur(m,u,a),Kn(t,m.prev,m.next),Kn(t,m,d===null?t.effect.first:d.next),Kn(t,d,m),d=m;continue}for(h=[],p=[];u!==null&&u!==m;)(c??(c=new Set)).add(u),p.push(u),u=u.next;if(u===null)continue}(m.f&Dn)===0&&h.push(m),d=m,u=m.next}if(t.outrogroups!==null){for(const J of t.outrogroups)J.pending.size===0&&(Oo(no(J.done)),t.outrogroups?.delete(J));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||c!==void 0){var H=[];if(c!==void 0)for(m of c)(m.f&Jt)===0&&H.push(m);for(;u!==null;)(u.f&Jt)===0&&u!==t.fallback&&H.push(u),u=u.next;var W=H.length;if(W>0){var R=(r&Xs)!==0&&i===0?a:null;if(s){for(b=0;b<W;b+=1)H[b].nodes?.a?.measure();for(b=0;b<W;b+=1)H[b].nodes?.a?.fix()}Kc(t,H,R)}}s&&Ma(()=>{if(v!==void 0)for(m of v)m.nodes?.a?.apply()})}function Gc(t,e,a,r,o,s,i,l){var u=(i&ql)!==0?(i&Gl)===0?Ro(a,!1,!1):Sn(a):null,c=(i&Kl)!==0?Sn(o):null;return{v:u,i:c,e:on(()=>(s(e,u??a,c??o,l),()=>{t.delete(r)}))}}function ur(t,e,a){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,s=e&&(e.f&Dn)===0?e.nodes.start:a;r!==null;){var i=Nr(r);if(s.before(r),r===o)return;r=i}}function Kn(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function We(t,e,...a){var r=new co(t);or(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},ca)}function Xc(t,e,a){var r=new co(t);or(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},ca)}function Li(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=Li(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function Jc(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=Li(t))&&(r&&(r+=" "),r+=e);return r}function it(t){return typeof t=="object"?Jc(t):t??""}const ks=[...` 	
\r\fÂ \v\uFEFF`];function Zc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||ks.includes(r[i-1]))&&(l===r.length||ks.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Qc(t,e){return t==null?null:String(t)}function rt(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=Zc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var u in s){var c=!!s[u];(o==null||c!==!!o[u])&&t.classList.toggle(u,c)}return s}function Qa(t,e,a,r){var o=t.__style;if(o!==e){var s=Qc(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const $c=Symbol("is custom element"),ed=Symbol("is html");function Zh(t,e){var a=os(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Qh(t,e){var a=os(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function dt(t,e,a,r){var o=os(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[Rl]=a),a==null?t.removeAttribute(e):typeof a!="string"&&td(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function os(t){return t.__attributes??(t.__attributes={[$c]:t.nodeName.includes("-"),[ed]:t.namespaceURI===nc})}var xs=new Map;function td(t){var e=t.getAttribute("is")||t.nodeName,a=xs.get(e);if(a)return a;xs.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Us(o);for(var i in r)r[i].set&&a.push(i);o=ao(o)}return a}function Fi(t,e,a=e){var r=new WeakSet;kc(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=Co(t)?So(s):s,a(s),Qe!==null&&r.add(Qe),await Ai(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,u=t.value.length;if(t.value=s??"",l!==null){var c=t.value.length;i===l&&l===u&&c>u?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=i,t.selectionEnd=Math.min(l,c))}}}),jt(e)==null&&t.value&&(a(Co(t)?So(t.value):t.value),Qe!==null&&r.add(Qe)),lo(()=>{var o=e();if(t===document.activeElement){var s=jr??Qe;if(r.has(s))return}Co(t)&&o===So(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Co(t){var e=t.type;return e==="number"||e==="range"}function So(t){return t===""?null:+t}function Ts(t,e){return t===e||t?.[ra]===e}function $e(t={},e,a,r){return Pc(()=>{var o,s;return lo(()=>{o=s,s=[],jt(()=>{t!==a(...s)&&(e(t,...s),o&&Ts(a(...o),t)&&e(null,...o))})}),()=>{Ma(()=>{s&&Ts(a(...s),t)&&e(null,...s)})}}),t}function ss(t=!1){const e=st,a=e.l.u;if(!a)return;let r=()=>Lc(e.s);if(t){let o=0,s={};const i=Er(()=>{let l=!1;const u=e.s;for(const c in u)u[c]!==s[c]&&(s[c]=u[c],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&Tc(()=>{Es(e,r),To(a.b)}),Ye(()=>{const o=jt(()=>a.m.map(Ml));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&Ye(()=>{Es(e,r),To(a.a)})}function Es(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Fr=!1;function nd(t){var e=Fr;try{return Fr=!1,[t(),Fr]}finally{Fr=e}}const ad={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(ir(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];ir(o)&&(o=o());const s=na(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(ir(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=na(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===ra||e===Ys)return!1;for(let a of t.props)if(ir(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(ir(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function zo(...t){return new Proxy({props:t},ad)}function Oe(t,e,a,r){var o=!ar||(a&Jl)!==0,s=(a&Ql)!==0,i=(a&$l)!==0,l=r,u=!0,c=()=>(u&&(u=!1,l=i?jt(r):r),l),d;if(s){var v=ra in t||Ys in t;d=na(t,e)?.set??(v&&e in t?w=>t[e]=w:void 0)}var h,p=!1;s?[h,p]=nd(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=c(),d&&(o&&jl(),d(h)));var _;if(o?_=()=>{var w=t[e];return w===void 0?c():(u=!0,w)}:_=()=>{var w=t[e];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(a&Zl)===0)return _;if(d){var x=t.$$legacy;return(function(w,k){return arguments.length>0?((!o||!k||x||p)&&d(k?_():w),w):_()})}var m=!1,b=((a&Xl)!==0?Er:Pr)(()=>(m=!1,_()));s&&n(b);var M=Ze;return(function(w,k){if(arguments.length>0){const I=k?n(b):o&&s?ft(w):w;return f(b,I),m=!0,l!==void 0&&(l=I),w}return Da&&m||(M.f&Rn)!==0?b.v:n(b)})}function Ae(t){st===null&&Gs(),ar&&st.l!==null?rd(st).m.push(t):Ye(()=>{const e=jt(t);if(typeof e=="function")return e})}function rd(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const od="5";var Hs;typeof window<"u"&&((Hs=window.__svelte??(window.__svelte={})).v??(Hs.v=new Set)).add(od);sc();const Oi={};function sd(t){gt(Oi,t)}function $a(){const t=vt(Oi);if(!t)throw new Error("No FeedSearchContext found");return t}const zi={};function id(t){gt(zi,t)}function Ht(){const t=vt(zi);if(!t)throw new Error("No SearchParamsContext found");return t}function ld(t,e){be(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Ht(),s="feedSearch",i=P(()=>o().get(s)||""),l=P(()=>n(i));sd({getFeedSearch:()=>n(l),setFeedSearch:d=>{d===""?r(s):a(s,d)}});var u=we(),c=E(u);We(c,()=>e.children??Je),g(t,u),Ce()}const Bi={};function cd(t){gt(Bi,t)}function dd(){const t=vt(Bi);if(!t)throw new Error("No TagsSearchContext found");return t}function ud(t,e){be(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Ht(),s="tagsSearch",i=P(()=>o().get(s)||""),l=P(()=>n(i));cd({getTagsSearch:()=>n(l),setTagsSearch:d=>{d===""?r(s):a(s,d)}});var u=we(),c=E(u);We(c,()=>e.children??Je),g(t,u),Ce()}const ji={};function fd(t){gt(ji,t)}function Hi(){const t=vt(ji);if(!t)throw new Error("No FeedOrderContext found");return t}function vd(t,e){be(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Ht(),s="feedOrder",i=P(()=>o().get(s)||"newest"),l=P(()=>n(i));let u=["newest","oldest","AtoZ","ZtoA","updatedNewest"];fd({getFeedOrder:()=>n(l),setFeedOrder:v=>{v==="newest"||!u.includes(v)?r(s):a(s,v)}});var c=we(),d=E(c);We(d,()=>e.children??Je),g(t,c),Ce()}const Ui={};function gd(t){gt(Ui,t)}function Mr(){const t=vt(Ui);if(!t)throw new Error("No SidebarContext found");return t}function hd(t,e){be(e,!0);let a=D("closed");gd({sidebarOpen:()=>{f(a,"preOpening")},sidebarClose:()=>{f(a,"closing")},getSidebarState:()=>n(a),setSidebarState:c=>{f(a,c,!0)}});var l=we(),u=E(l);We(u,()=>e.children??Je),g(t,l),Ce()}const Wi={};function pd(t){gt(Wi,t)}function Vn(){const t=vt(Wi);if(!t)throw new Error("No SelectedTagsContext found");return t}function md(t,e){be(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Ht(),s=P(a),i="selectedTags";let l=P(()=>n(s).get(i)||""),u=P(()=>new Set(n(l).split(",").map(m=>decodeURIComponent(m)).filter(m=>m!=="")));pd({getSelectedTags:()=>n(u),addTag:m=>{n(u).has(m)||r(i,[...n(u),m].map(b=>encodeURIComponent(b)).join(","))},removeTag:m=>{n(u).has(m)&&n(u).size===1?o(i):n(u).has(m)&&r(i,[...n(u)].filter(b=>b!==m).map(b=>encodeURIComponent(b)).join(","))},clearTags:()=>{o(i)},setSelectedTags:m=>{m.size===0?o(i):r(i,[...m].map(b=>encodeURIComponent(b)).join(","))}});var _=we(),x=E(_);We(x,()=>e.children??Je),g(t,_),Ce()}const Vi={};function _d(t){gt(Vi,t)}function da(){const t=vt(Vi);if(!t)throw new Error("No SelectedNotesContext found");return t}var wd=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],yd=["difference","intersection","symmetricDifference","union"],Ps=!1,Ga,dn,ea,eo,er,qi,Ki;const to=class to extends Set{constructor(a){super();Ge(this,er);Ge(this,Ga,new Map);Ge(this,dn,D(0));Ge(this,ea,D(0));Ge(this,eo,zn||-1);if(a){for(var r of a)super.add(r);j(this,ea).v=super.size}Ps||ct(this,er,Ki).call(this)}has(a){var r=super.has(a),o=j(this,Ga),s=o.get(a);if(s===void 0){if(!r)return n(j(this,dn)),!1;s=ct(this,er,qi).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),f(j(this,ea),super.size),sa(j(this,dn))),this}delete(a){var r=super.delete(a),o=j(this,Ga),s=o.get(a);return s!==void 0&&(o.delete(a),f(s,!1)),r&&(f(j(this,ea),super.size),sa(j(this,dn))),r}clear(){if(super.size!==0){super.clear();var a=j(this,Ga);for(var r of a.values())f(r,!1);a.clear(),f(j(this,ea),0),sa(j(this,dn))}}keys(){return this.values()}values(){return n(j(this,dn)),super.values()}entries(){return n(j(this,dn)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(j(this,ea))}};Ga=new WeakMap,dn=new WeakMap,ea=new WeakMap,eo=new WeakMap,er=new WeakSet,qi=function(a){return zn===j(this,eo)?D(a):Sn(a)},Ki=function(){Ps=!0;var a=to.prototype,r=Set.prototype;for(const o of wd)a[o]=function(...s){return n(j(this,dn)),r[o].apply(this,s)};for(const o of yd)a[o]=function(...s){n(j(this,dn));var i=r[o].apply(this,s);return new to(i)}};let Bo=to;function bd(t,e){be(e,!0);let a=new Bo,r=D("single");const o=()=>a,s=p=>{a.clear(),p.forEach(_=>a.add(_))},i=p=>{a.add(p)},l=p=>{a.delete(p)},u=()=>{a.clear()};_d({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:u,getMode:()=>n(r),changeMode:p=>{f(r,p,!0),p==="single"&&u()}});var v=we(),h=E(v);We(h,()=>e.children??Je),g(t,v),Ce()}const Yi={};function Cd(t){gt(Yi,t)}function is(){const t=vt(Yi);if(!t)throw new Error("No LocalDBContext found");return t}const Gi={};function Sd(t){gt(Gi,t)}function Na(){const t=vt(Gi);if(!t)throw new Error("No SettingsContext found");return t}const Xi={};function kd(t){gt(Xi,t)}function uo(){const t=vt(Xi);if(!t)throw new Error("No BroadcastContext found");return t}const xd="AppStorage",Td=1,fr="account",Gn="settings",nt="notes",Ut="tags",Ed="syncLog",ua="success",Hn="error",kt=(t,e,a)=>{t?.addEventListener(e,a)},Ns=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();kt(s,ua,()=>{const i=s?.result||[];a(i)}),kt(s,Hn,i=>{r(i)})}),Gr=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);kt(i,ua,()=>{const l=i?.result?.data;r(l)}),kt(i,Hn,l=>{o(l)})}),_n=(t,e,a,r)=>new Promise((o,s)=>{const u=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});kt(u,ua,()=>{o()}),kt(u,Hn,c=>{s(c)})}),wt=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,u)=>{kt(i,ua,()=>{l()}),kt(i,Hn,c=>{u(c)})})}))},ko=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);kt(l,ua,()=>{r()}),kt(l,Hn,u=>{o(u)})}),lr=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,u)=>{kt(i,ua,()=>{l()}),kt(i,Hn,c=>{u(c)})})}))},Ha=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();kt(i,ua,()=>{a()}),kt(i,Hn,l=>{r(l)})}),en="dialogPages",Ji={};function Pd(t){gt(Ji,t)}function Ft(){const t=vt(Ji);if(!t)throw new Error("No DialogPagesContext found");return t}var xe=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t.Extension="extension",t))(xe||{});const As={settings:"Settings",importData:"Import",exportData:"Export",account:"Account",sync:"Sync",accountSetup:"",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success",extension:"Extension"},$h=()=>chrome,Ms=()=>LanguageModel;function Nd(t,e){be(e,!0);const{deleteSearchParam:a,replaceSearchParams:r}=Ht(),{clearDialogPages:o,getDialogPages:s,replaceDialogPage:i}=Ft(),l="viewMode";let c=ft((()=>{const K=new URLSearchParams(window.location.search).get(l)||"tab";return K==="popup"||K==="window"||K==="tab"||K==="sidebar"?K:"tab"})());Ae(()=>{a(l)});let d=D(!1),v=D(ft({showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}}));const{getDB:h}=is(),{createBroadcastChannel:p,tabId:_}=uo(),x=p(),m=P(h),b=async()=>{const me=await Gr(n(m),Gn,"default");me&&f(v,me,!0)},M=async()=>{await b();const K=s().at(-1)||"";K.startsWith(xe.NewNote+"?id=")&&i(K.replace(xe.NewNote,xe.Note)),f(d,!0)};Ae(()=>{});const w=async me=>{const K=JSON.parse(me.data),L=K;if(K.tabId&&K.tabId===_){L.type==="exit"&&(f(v,{showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}},!0),Ha(n(m),Gn));return}L.type==="updateSettings"?b():L.type==="exit"&&f(v,{showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}},!0)},k=()=>n(v).showFavicon,I=()=>n(v).recordMode,Z=async me=>{n(v).showFavicon=me,await _n(n(m),Gn,"default",ha(n(v))),x.postMessage({type:"updateSettings"})},H=async me=>{n(v).recordMode=me,await _n(n(m),Gn,"default",ha(n(v))),x.postMessage({type:"updateSettings"})},W=async me=>{n(v).tags.prev=me,await _n(n(m),Gn,"default",ha(n(v))),x.postMessage({type:"updateSettings"})},R=()=>n(v).tags.prev||[],J=async me=>{n(v).tags.llm=me,await _n(n(m),Gn,"default",ha(n(v))),x.postMessage({type:"updateSettings"})},ne=()=>n(v).tags.llm,oe=()=>n(v).tags.pageData,U=async me=>{n(v).tags.pageData=me,await _n(n(m),Gn,"default",ha(n(v))),x.postMessage({type:"updateSettings"})};Ae(()=>(M(),x.addEventListener(w),()=>{x.removeEventListener(w)})),Sd({getFaviconEnabled:k,getRecordMode:I,setRecordMode:H,setFaviconShown:Z,isInitedSettings:()=>n(d),getViewMode:()=>c,setLlmTagsEnabled:J,getLlmTagsEnabled:ne,setPrevTags:W,getPrevTags:R,getPageDataForTagsEnabled:oe,setPageDataForTagsEnabled:U});var z=we(),ye=E(z);We(ye,()=>e.children??Je),g(t,z),Ce()}const Zi={};function Ad(t){gt(Zi,t)}function ls(){const t=vt(Zi);if(!t)throw new Error("No AccountContext found");return t}function Md(t,e){be(e,!0);let a=D(void 0);const{getDB:r}=is(),{createBroadcastChannel:o,tabId:s}=uo(),i=P(r),l=o(),u=async()=>{const w=await Gr(n(i),fr,"default");f(a,w,!0)},c=w=>_n(n(i),fr,"default",w),d=async w=>{const k=await Gr(n(i),fr,"default");k!==void 0&&f(a,k,!0),w(k)},v=async w=>{const k=JSON.parse(w.data);if(k.tabId&&k.tabId===s)return;const I=k;I.type==="initLocalAccount"?f(a,null):I.type==="initCloudAccount"?u():I.type==="disconnectCloudAccount"?f(a,null):I.type==="exit"?f(a,void 0):I.type==="updateAccount"&&u()};Ae(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),Ad({init:d,getAccount:()=>n(a),initLocalAccount:async()=>{f(a,null),await c(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async w=>{const k={encryptedClientKey:w.encryptedClientKey||"",subscriptionExpires:w.subscriptionExpires||-1,lastSync:-1};await c(k),f(a,k,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{f(a,null),await c(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async w=>{if(!n(a))throw new Error("No account to update subscription for");const k={...n(a),subscriptionExpires:w};await c(k),l.postMessage({type:"updateAccount"})},exitApp:async()=>{f(a,void 0),l.postMessage({type:"exit"}),await Ha(n(i),fr)}});var b=we(),M=E(b);We(M,()=>e.children??Je),g(t,b),Ce()}const Qi={};function Dd(t){gt(Qi,t)}function Ot(){const t=vt(Qi);if(!t)throw new Error("No NotesContext found");return t}const Xn=()=>crypto.randomUUID(),Id=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},$i=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function ep(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}const yt=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function Rd(t,e){be(e,!0);const{getDB:a}=is(),{createBroadcastChannel:r,tabId:o}=uo(),s=P(a),i=r(),l=720*60*60*1e3;let u=D(!1),c=D(()=>new Map),d=D(()=>[]),v=D(()=>new Map),h=D(ft(new Map));const p=()=>n(u),_=()=>n(d)().some(y=>y.data&&!y.data.deletedAt&&!y.data.archivedAt),x=()=>n(d)().some(y=>y.data&&y.data.deletedAt),m=()=>n(d)().some(y=>y.data&&y.data.archivedAt&&!y.data.deletedAt),b=(y,T)=>{n(h).has(y)||n(h).set(y,new Set),n(h).get(y)?.add(T)},M=(y,T)=>{n(h).has(y)&&(n(h).get(y)?.delete(T),n(h).get(y)?.size===0&&n(h).delete(y))},w=y=>{if(!y)return!1;const T=n(v)().get(y);if(!T||!T.data?.link?.url)return!1;const N=n(h).get(T.data.link.url),B=[];return N?.forEach(F=>{if(F===y)return;const V=n(v)().get(F);T.data?.archivedAt!==V?.data?.archivedAt||T.data?.deletedAt!==V?.data?.deletedAt||B.push(F)}),B.length>0},k=y=>{const T=n(d)(),N=n(v)(),B=N.get(y.id);if(B){const F=B.data?.link?.url;B.data=y.data,F!==y.data?.link?.url&&(F&&M(F,y.id),y.data?.link?.url&&b(y.data.link.url,y.id))}else T.push(y),N.set(y.id,y),y.data?.link?.url&&b(y.data.link.url,y.id);f(d,()=>T),f(v,()=>N)},I=y=>{const T=n(d)(),N=n(v)(),B=N.get(y);N.has(y)&&N.delete(y),B&&B.data?.link?.url&&M(B.data.link.url,y),B&&(B.data=void 0),f(d,()=>T),f(v,()=>N)},Z=y=>{const T=n(d)(),N=n(v)();for(const B of y){const F=N.get(B);N.has(B)&&N.delete(B),F&&F.data?.link?.url&&M(F.data.link.url,B),F&&(F.data=void 0)}f(d,()=>T),f(v,()=>N)},H=()=>{f(d,()=>[]),f(h,new Map,!0),f(c,()=>new Map),f(v,()=>new Map)},W=()=>n(d),R=y=>{const T=n(c)();for(const N of y)T.get(N)||T.set(N,{name:N});f(c,()=>T)},J=async()=>{const[y,T]=await Promise.all([Ns(n(s),nt),Ns(n(s),Ut).then(Q=>Q.reduce((Y,re)=>Y.set(re.id,re.data),new Map))]),N=[],B=[],F=new Map;for(const Q of y)Q.data.deletedAt&&Date.now()-Q.data.deletedAt>l?N.push(Q.id):(B.push(Q),F.set(Q.id,Q),Q.data.link?.url&&b(Q.data.link?.url,Q.id));const V=Id(B),q=[],X=new Map(T);[...V.values()].forEach(Q=>{X.set(Q,{name:Q,pinned:T.get(Q)?.pinned||!1}),T.has(Q)||q.push(Q)});const $=[];[...T.keys()].forEach(Q=>{V.has(Q)||$.push(Q)}),await lr(n(s),nt,N),await lr(n(s),Ut,$),await wt(n(s),Ut,q.map(Q=>({id:Q,data:{pinned:X.get(Q)?.pinned||!1}}))),f(d,()=>B),f(v,()=>F),f(c,()=>X),f(u,!0)},ne=async y=>{const T=n(c)(),N=y.data.tags.filter(B=>!T.has(B))||[];return await _n(n(s),nt,y.id,{...y.data}),N.length>0&&(await wt(n(s),Ut,N.map(B=>({id:B,data:{pinned:!1}}))||[]),R(N)),k(y),i.postMessage({type:"putNote",data:{id:y.id}}),y.id},oe=async({link:y,text:T,tags:N})=>{const B={id:Xn(),data:{link:yt(y),text:T,tags:yt(N),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await ne(B),B.id},U=async(y,{link:T,text:N,tags:B})=>{const F=L(y);if(!F||!F.data)return;const V={id:y,data:{...F.data,link:yt(T),text:N,tags:yt(B),updatedAt:Date.now()}};await ne(V)},z=async(y,{link:T,text:N,tags:B})=>{const F=L(y);if(!F||!F.data)return;const V=Xn(),q={id:y,data:{...F.data,link:T,text:N,tags:B,updatedAt:Date.now(),history:[...(F.data.history||[]).slice(-49),{id:V,link:yt(F.data.link),text:F.data.text,tags:yt(F.data.tags),updatedAt:F.data.updatedAt}]}};return await ne(q),V},ye=async(y,T)=>{const N=L(y);if(!N||!N.data)return;const B=N.data.history?.find?.(V=>V.id===T);if(!B)return;const F={id:y,data:{...N.data,link:yt(B.link),text:B.text,tags:yt(B.tags),updatedAt:B.updatedAt,history:N.data.history?.filter?.(V=>V.id!==T)||[]}};await ne(F)},me=async y=>{const N=n(v)().get(y);!N||!N.data||(I(y),await ko(n(s),nt,y),i.postMessage({type:"deleteNote",data:{id:y}}))},K=async()=>{await Ha(n(s),nt),await Ha(n(s),Ut),H(),i.postMessage({type:"clearNotes"})},L=y=>n(v)().get(y),ee=async(y,T)=>{const B=n(v)().get(y);if(!B||!B.data)return;const F={id:y,data:{...B.data,pinned:T}};ne(F)},se=async y=>{const N=n(v)().get(y);if(!N||!N.data)return;const B={id:y,data:{...N.data,deletedAt:Date.now()}};await ne(B)},le=async y=>{const N=n(v)().get(y);if(!N||!N.data)return;const B={id:y,data:{...N.data,archivedAt:Date.now()}};await ne(B)},de=async({noteIds:y})=>{const T=n(v)(),N=n(d)();for(const F of y){const V=T.get(F);V?.data&&(V.data.deletedAt=Date.now())}return await wt(n(s),nt,y.map(F=>{const V=T.get(F);return{id:F,data:V?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>T),f(d,()=>N),{cancel:async()=>{for(const F of y){const V=T.get(F);V?.data&&(V.data.deletedAt=0)}await wt(n(s),nt,y.map(F=>{const V=T.get(F);return{id:F,data:V?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>T),f(d,()=>N)}}},Ne=async({noteIds:y})=>{const T=n(v)(),N=n(d)();for(const F of y){const V=T.get(F);V?.data&&(V.data.archivedAt=Date.now())}return await wt(n(s),nt,y.map(F=>{const V=T.get(F);return{id:F,data:V?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>T),f(d,()=>N),{cancel:async()=>{for(const F of y){const V=T.get(F);V?.data&&(V.data.archivedAt=0)}await wt(n(s),nt,y.map(F=>{const V=T.get(F);return{id:F,data:V?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>T),f(d,()=>N)}}},Fe=async({noteIds:y})=>{const T=n(v)(),N=n(d)(),B=[];for(const V of y){const q=T.get(V);q?.data&&(B.push({id:V,data:yt(q.data)}),q.data.archivedAt=0)}return await wt(n(s),nt,y.map(V=>{const q=T.get(V);return{id:V,data:q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>T),f(d,()=>N),{cancel:async()=>{for(const V of B){const q=T.get(V.id);q?.data&&(q.data=V.data)}await wt(n(s),nt,y.map(V=>{const q=T.get(V);return{id:V,data:q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>T),f(d,()=>N)}}},ue=async({noteIds:y})=>{const T=n(v)(),N=n(d)(),B=[];for(const V of y){const q=T.get(V);q?.data&&(B.push({id:V,data:yt(q.data)}),q.data.deletedAt=0)}return await wt(n(s),nt,y.map(V=>{const q=T.get(V);return{id:V,data:q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>T),f(d,()=>N),{cancel:async()=>{for(const V of B){const q=T.get(V.id);q?.data&&(q.data=V.data)}await wt(n(s),nt,y.map(V=>{const q=T.get(V);return{id:V,data:q?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>T),f(d,()=>N)}}},G=async y=>{const N=n(v)().get(y);if(!N||!N.data)return;const B={id:y,data:{...N.data,deletedAt:0}};await ne(B)},ie=async y=>{const N=n(v)().get(y);if(!N||!N.data)return;const B={id:y,data:{...N.data,archivedAt:0}};await ne(B)},Te=async(y,T)=>{const N=n(c)();N.set(y,{name:y,pinned:T}),await _n(n(s),Ut,y,{pinned:T}),i.postMessage({type:"pinTag",data:{tag:y,pinned:T}}),f(c,()=>N)},Ee=async({noteIds:y})=>{const T=n(c)(),N=n(d)();Z(y),await lr(n(s),nt,y),i.postMessage({type:"reloadNotes"}),f(d,()=>N),f(c,()=>T)},Ie=async y=>{const T=n(v)(),N={};y.forEach(B=>{const F=T.get(B.id),V=[];if(F&&F.data){let q=0,X=0;for(;q<B.data.history.length&&X<F.data.history.length;){const $=B.data.history[q],Q=F.data.history[X];$.id===Q.id?($.updatedAt>Q.updatedAt?V.push($):V.push(Q),q+=1,X+=1):$.updatedAt<Q.updatedAt?(V.push($),q+=1):$.updatedAt>Q.updatedAt?(V.push(Q),X+=1):(V.push(Q),q+=1,X+=1)}F.data.updatedAt>B.data.updatedAt?N[F.id]={id:F.id,data:{...F.data,history:V}}:N[B.id]={id:B.id,data:{...B.data,history:V}}}else N[B.id]=B}),await wt(n(s),nt,Object.values(N)),await J(),i.postMessage({type:"reloadNotes"})},He=async()=>{const y=[];n(d)().forEach(N=>{N&&N.data&&N.data.deletedAt&&y.push(N.id)}),await lr(n(s),nt,y),await J(),i.postMessage({type:"emptyBin"})},ge=async(y,T)=>{const N=n(v)(),B=n(d)(),F=[],V=[];for(const X of T){const $=N.get(X);$?.data&&(F.push({id:X,data:yt($.data)}),V.push({id:X,data:{...$.data,tags:$.data.tags.filter(Q=>Q!==y),history:[...$.data.history||[],{id:Xn(),link:yt($.data.link),text:$.data.text,tags:$.data.tags,updatedAt:Date.now()}]}}))}for(const X of V){const $=N.get(X.id);$?.data&&($.data=X.data)}return await wt(n(s),nt,V.map(X=>({id:X.id,data:X.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(d,()=>B),{cancel:async()=>{for(const X of F){const $=N.get(X.id);$?.data&&($.data=X.data)}await wt(n(s),nt,F.map(X=>({id:X.id,data:X.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(d,()=>B)}}},ce=async(y,T,N)=>{const B=n(v)(),F=n(d)(),V=n(c)(),q=[],X=[];for(const Y of N){const re=B.get(Y);re?.data&&(q.push({id:Y,data:yt(re.data)}),X.push({id:Y,data:{...re.data,tags:re.data.tags.map(ae=>ae!==y?ae:T),history:[...re.data.history||[],{id:Xn(),link:yt(re.data.link),text:re.data.text,tags:re.data.tags,updatedAt:Date.now()}]}}))}for(const Y of X){const re=B.get(Y.id);re?.data&&(re.data=Y.data)}const $=V.has(T);return await Promise.all([(async()=>{if(!$){const Y=V.get(y)?.pinned||!1;V.set(T,{name:T,pinned:Y}),await _n(n(s),Ut,T,{pinned:Y})}})(),wt(n(s),nt,X.map(Y=>({id:Y.id,data:Y.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>F),f(c,()=>V),{cancel:async()=>{for(const Y of q){const re=B.get(Y.id);re?.data&&(re.data=Y.data)}await Promise.all([(async()=>{$||(V.delete(T),await ko(n(s),Ut,T))})(),wt(n(s),nt,q.map(Y=>({id:Y.id,data:Y.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>F),f(c,()=>V)}}},Se=async(y,T)=>{const N=n(v)(),B=n(d)(),F=n(c)(),V=[],q=[];for(const Q of T){const Y=N.get(Q);Y?.data&&(V.push({id:Q,data:yt(Y.data)}),q.push({id:Q,data:{...Y.data,tags:[...new Set([...Y.data.tags,y])],history:[...Y.data.history||[],{id:Xn(),link:yt(Y.data.link),text:Y.data.text,tags:Y.data.tags,updatedAt:Date.now()}]}}))}for(const Q of q){const Y=N.get(Q.id);Y?.data&&(Y.data=Q.data)}const X=F.has(y);return await Promise.all([(async()=>{X||(F.set(y,{name:y,pinned:!1}),await _n(n(s),Ut,y,{pinned:!1}))})(),wt(n(s),nt,q.map(Q=>({id:Q.id,data:Q.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(d,()=>B),f(c,()=>F),{cancel:async()=>{for(const Q of V){const Y=N.get(Q.id);Y?.data&&(Y.data=Q.data)}await Promise.all([(async()=>{X||(F.delete(y),await ko(n(s),Ut,y))})(),wt(n(s),nt,V.map(Q=>({id:Q.id,data:Q.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(d,()=>B),f(c,()=>F)}}},te=async(y,T,N)=>{const B=n(v)(),F=n(d)(),V=n(c)(),q=[],X=[];for(const re of N){const ae=B.get(re);ae?.data&&(q.push({id:re,data:yt(ae.data)}),X.push({id:re,data:{...ae.data,tags:[...new Set([...ae.data.tags.filter(he=>!y.includes(he)),...T])],history:[...ae.data.history||[],{id:Xn(),link:yt(ae.data.link),text:ae.data.text,tags:ae.data.tags,updatedAt:Date.now()}]}}))}for(const re of X){const ae=B.get(re.id);ae?.data&&(ae.data=re.data)}const $=n(c)(),Q=T.filter(re=>!$.has(re));return await Promise.all([(async()=>{if(Q.length>0)return wt(n(s),Ut,Q.map(re=>({id:re,data:{pinned:!1}})))})(),wt(n(s),nt,X.map(re=>({id:re.id,data:re.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>F),f(c,()=>V),{cancel:async()=>{for(const re of q){const ae=B.get(re.id);ae?.data&&(ae.data=re.data)}await Promise.all([(async()=>{if(Q.length>0){for(const re of Q)V.delete(re);return lr(n(s),Ut,Q)}})(),wt(n(s),nt,q.map(re=>({id:re.id,data:re.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>B),f(d,()=>F),f(c,()=>V)}}},Pe=async y=>{const T=JSON.parse(y.data),N=T;if(T.tabId&&T.tabId===o){N.type==="exit"&&(H(),await Ha(n(s),nt),await Ha(n(s),Ut));return}if(N.type==="putNote"){const F=N.data.id;if(!F)return;const V=await Gr(n(s),nt,F);if(!V)return;k({id:F,data:V})}else if(N.type==="deleteNote"){const B=N.data.id;if(!B)return;I(B)}else if(N.type==="pinTag"){const B=N.data.tag,F=N.data.pinned,V=n(c)();V.set(B,{name:B,pinned:F}),f(c,()=>V)}else N.type==="clearNotes"?H():N.type==="reloadNotes"||N.type==="emptyBin"?J():N.type==="exit"&&H()};Ae(()=>(J(),i.addEventListener(Pe),()=>{i.removeEventListener(Pe)})),Dd({isInitedNotes:p,createNote:oe,updateNote:U,deleteNote:me,saveNote:z,revertNote:ye,pinNote:ee,moveNoteToBin:se,moveNoteToArchive:le,getGetNotes:W,importNotes:Ie,clearNotes:K,getNoteById:L,getGetMapTags:()=>n(c),pinTag:Te,restoreNoteFromBin:G,moveNoteFromArchive:ie,checkNotes:_,checkNotesInBin:x,checkNotesInArchive:m,emptyBin:He,moveNotesToBin:de,moveNotesToArchive:Ne,moveNotesFromArchive:Fe,deleteNotes:Ee,restoreNotesFromBin:ue,deleteTag:ge,renameTag:ce,addTag:Se,changeTags:te,checkDuplicatesExist:w});var fe=we(),_e=E(fe);We(_e,()=>e.children??Je),g(t,fe),Ce()}const el={};function Ld(t){gt(el,t)}function Ia(){const t=vt(el);if(!t)throw new Error("No FeedContext found");return t}const tl={};var at=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(at||{});function Fd(t){gt(tl,t)}function fo(){const t=vt(tl);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function Od(t,e){be(e,!0);const a=$a(),{getSelectedTags:r}=Vn(),{getSelectedMetaTags:o}=fo(),{getGetNotes:s}=Ot();let i=P(r),l=P(o),u=D(0),c=[],d=D(0),v=P(()=>n(l).has(at.ARCHIVED)),h=P(()=>n(l).has(at.BIN));Ye(()=>{const x=s()()||[],m=[],b=Array.from(n(i).values());for(let M=x.length-1;M>=0;M--){if(!x[M]||!x[M].data)continue;const w=x[M];if(!n(v)&&!n(h)&&(w?.data.deletedAt||w?.data.archivedAt)||n(v)&&(w?.data.deletedAt||!w?.data.archivedAt)||n(h)&&!w?.data.deletedAt)continue;const k=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(w.data.link?.title.toLowerCase().includes(k)||w.data.link?.url.toLowerCase().includes(k)||w.data.text.toLowerCase().includes(k)||w.data.tags.map(I=>I.toLowerCase()).join(" ").includes(k)))){if(n(l).has(at.INBOX)){if(w.data.tags.length>0)continue}else if(n(i).size&&b.some(I=>!w.data.tags.includes(I)))continue;m.push(w)}}f(u,m.length,!0),c=m,f(d,Date.now(),!0)}),Ld({getFiltredNotesLength:()=>n(u),getFiltredNotes:()=>(n(d),c),getUpdatedFiltredNotesTimestamp:()=>n(d)});var p=we(),_=E(p);We(_,()=>e.children??Je),g(t,p),Ce()}function zd(t,e){be(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Ht(),s=P(a),i="selectedMetaTags";let l=P(()=>n(s).get(i)||""),u=P(()=>new Set(n(l).split(",").map(m=>decodeURIComponent(m)).filter(m=>m!=="")));Fd({getSelectedMetaTags:()=>n(u),addMetaTag:m=>{n(u).has(m)||r(i,[...n(u),m].map(b=>encodeURIComponent(b)).join(","))},removeMetaTag:m=>{n(u).has(m)&&n(u).size===1?o(i):n(u).has(m)&&r(i,[...n(u)].filter(b=>b!==m).map(b=>encodeURIComponent(b)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:m=>{m.size===0?o(i):r(i,[...m].map(b=>encodeURIComponent(b)).join(","))}});var _=we(),x=E(_);We(x,()=>e.children??Je),g(t,_),Ce()}const nl={},ia=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function Bd(t){gt(nl,t)}function qn(){const t=vt(nl);if(!t)throw new Error("No AnimationSettingsContext found");return t}function jd(t,e){be(e,!0);let a=ft(ia());Bd(a);var r=we(),o=E(r);We(o,()=>e.children??Je),g(t,r),Ce()}const al={};function Hd(t){gt(al,t)}function cs(){const t=vt(al);if(!t)throw new Error("No ScrollingContext found");return t}function Ud(t,e){be(e,!0);let a=D(!1);const r=()=>n(a),o=$i(()=>{f(a,!1)},100);Hd({isScrolling:r,enable:()=>{f(a,!0),o()}});var i=we(),l=E(i);We(l,()=>e.children??Je),g(t,i),Ce()}const rl={};function Wd(t){gt(rl,t)}function fa(){const t=vt(rl);if(!t)throw new Error("No MobileSizeContext found");return t}function Vd(t,e){be(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=D(ft(a())),o=qn();const s=$i(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{f(r,a(),!0)})};Wd({checkMobileSize:()=>n(r)}),Ae(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var u=we(),c=E(u);We(c,()=>e.children??Je),g(t,u),Ce()}const ol={};function qd(t){gt(ol,t)}function Zt(){const t=vt(ol);if(!t)throw new Error("No DialogContext found");return t}function Kd(t,e){be(e,!0);let a=D(0),r=D(!1),o=D(!0),s=D(!1),i=D(!1);qd({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{f(a,n(a)+1)},dialogDec:()=>{f(a,n(a)-1)},blockDialog:I=>{f(r,I,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:I=>{f(o,I,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:I=>{f(s,I,!0)},setLeftEnd:I=>{f(i,I,!0)},getCountDialog:()=>n(a)});var w=we(),k=E(w);We(k,()=>e.children??Je),g(t,w),Ce()}const sl={};function Yd(t){gt(sl,t)}function vo(){const t=vt(sl);if(!t)throw new Error("No ScrollContainerContext found");return t}function Gd(t,e){be(e,!0);let a=D(null);Yd({setScrollContainer:l=>{f(a,l,!0)},getScrollContainer:()=>n(a)});var s=we(),i=E(s);We(i,()=>e.children??Je),g(t,s),Ce()}const il={};function Xd(t){gt(il,t)}function ds(){const t=vt(il);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Jd(t,e){be(e,!0);let a=D(200);Xd({setDialogPageHeight:l=>{f(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=we(),i=E(s);We(i,()=>e.children??Je),g(t,s),Ce()}const Zd=[fr,Gn,nt,Ut,Ed];function Qd(){return new Promise((t,e)=>{const a=indexedDB.open(xd,Td);kt(a,"upgradeneeded",()=>{const r=a.result;for(const o of Zd)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),kt(a,ua,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),kt(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),kt(a,Hn,()=>{e(),console.error(Hn,a.error)})})}function $d(t,e){be(e,!0);let a=D(null);Ae(()=>{Qd().then(l=>{f(a,l,!0)}).catch(l=>{console.error("Failed to initialize LocalDB:",l)})}),Cd({getDB:()=>n(a)});var o=we(),s=E(o);{var i=l=>{var u=we(),c=E(u);We(c,()=>e.children??Je),g(l,u)};O(s,l=>{n(a)&&l(i)})}g(t,o),Ce()}function eu(t,e){be(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Ht(),s=P(a);let i=P(()=>n(s).get(en)||""),l=P(()=>n(i).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const u=()=>n(l),c=w=>{if(w.length===0){o(en);return}r(en,w.map(k=>encodeURIComponent(k)).join(","))},d=w=>{r(en,[...n(l),w].map(k=>encodeURIComponent(k)).join(","))};Pd({setDialogPages:c,getDialogPages:u,pushDialogPage:d,popDialogPage:()=>{const w=n(l)[n(l).length-1];return n(l).length<=1?(o(en),w):(r(en,n(l).slice(0,-1).map(k=>encodeURIComponent(k)).join(",")),w)},replaceDialogPage:w=>{r(en,[...n(l).slice(0,-1),w].map(k=>encodeURIComponent(k)).join(","))},hasDialogPage:w=>n(l).find(k=>{const[I]=k.split("?");return I===w})!==void 0,clearDialogPages:()=>{o(en)},createDialogPageHref:w=>{const k=new URLSearchParams(n(s).toString());return k.set(en,[...u(),w].map(I=>encodeURIComponent(I)).join(",")),`${window.location.pathname}?${k.toString()}`},createHandleClickDialogPage:w=>k=>{k.preventDefault(),d(w)}});var b=we(),M=E(b);We(M,()=>e.children??Je),g(t,b),Ce()}function tu(t,e){be(e,!0);let a=D(ft(new URLSearchParams(window.location.search)));const r=v=>{const h=window.location.pathname;f(a,v,!0),window.history.replaceState(null,"",`${h}${v.size>0?`?${v.toString()}`:""}`)};id({getSearchParams:()=>n(a),replaceSearchParams:v=>{const h=new URLSearchParams(v);r(h)},setSearchParam:(v,h)=>{const p=new URLSearchParams(n(a));p.set(v,h),r(p)},deleteSearchParam:v=>{const h=new URLSearchParams(n(a));h.delete(v),r(h)},getHref:(v=n(a))=>{const h=new URLSearchParams(v);return`${window.location.pathname}${h.toString().length>0?`?${h.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var c=we(),d=E(c);We(d,()=>e.children??Je),g(t,c),Ce()}const ll={};function nu(t){gt(ll,t)}function au(){const t=vt(ll);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function ru(t,e){be(e,!0);let a=ft({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";Ae(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l);let u=null;const c=d=>{o()&&(u&&clearTimeout(u),u=setTimeout(()=>{o()&&d.target!==document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur?.()},120))};return document.addEventListener("touchstart",c,{passive:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l),document.removeEventListener("touchstart",c)}}),nu({getIsKeyboardVisible:r});var s=we(),i=E(s);We(i,()=>e.children??Je),g(t,s),Ce()}function ou(t,e){be(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};kd({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=we(),s=E(o);We(s,()=>e.children??Je),g(t,o),Ce()}function su(t,e){$d(t,{children:(a,r)=>{ou(a,{children:(o,s)=>{jd(o,{children:(i,l)=>{Ud(i,{children:(u,c)=>{Vd(u,{children:(d,v)=>{Kd(d,{children:(h,p)=>{Gd(h,{children:(_,x)=>{Jd(_,{children:(m,b)=>{ru(m,{children:(M,w)=>{tu(M,{children:(k,I)=>{eu(k,{children:(Z,H)=>{var W=we(),R=E(W);We(R,()=>e.children??Je),g(Z,W)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function iu(t,e){su(t,{children:(a,r)=>{ud(a,{children:(o,s)=>{ld(o,{children:(i,l)=>{vd(i,{children:(u,c)=>{hd(u,{children:(d,v)=>{zd(d,{children:(h,p)=>{md(h,{children:(_,x)=>{bd(_,{children:(m,b)=>{Nd(m,{children:(M,w)=>{Md(M,{children:(k,I)=>{Rd(k,{children:(Z,H)=>{Od(Z,{children:(W,R)=>{var J=we(),ne=E(J);We(ne,()=>e.children??Je),g(W,J)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const lu=(t=document.body)=>Array.from(t.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(r=>r instanceof HTMLElement?r instanceof HTMLButtonElement||r instanceof HTMLInputElement||r instanceof HTMLSelectElement||r instanceof HTMLTextAreaElement?!r.disabled&&r.offsetParent!==null:r.offsetParent!==null:!1),bt=t=>{const e=lu(),a=e.indexOf(t);if(a===-1)return{next:null,prev:null};const r=e[a+1],o=e[a-1];return{next:r,prev:o}};let Dt=D(""),Pn=D(null),Ua=D(null),An=D(null),Yn=D(ft([])),Or=D(null),Jn=null;function et(t,e){f(Dt,""),Jn=null,f(Ua,null),f(An,null),setTimeout(()=>{f(Dt,t,!0),e?.onFinish&&f(Ua,e.onFinish,!0),e?.cancel&&(f(An,e.cancel.onCancel,!0),Jn=e.cancel.nextFocusRef)},16)}var cu=S('<button type="button" class="c p-137gtcu">undo</button>'),du=S('<div class="a p-137gtcu"><div class="b p-137gtcu"><span> </span> <!></div></div>'),uu=S("<div><!></div>");function go(t,e){be(e,!0);let a=Oe(e,"ref",15,null);const r=Xn();Ye(()=>{a(n(Pn))}),Ae(()=>(f(Yn,[...n(Yn),r],!0),()=>{const c=n(Yn).indexOf(r);c!==-1&&f(Yn,n(Yn).filter((d,v)=>v!==c),!0)}));const o=c=>{if(c.key==="Tab"&&c.shiftKey){if(Jn&&n(Dt)){c.preventDefault();const{prev:d}=bt(Jn);d?.focus(),f(Dt,"")}}else if(c.key==="Tab"&&!c.shiftKey)Jn&&n(Dt)&&(c.preventDefault(),f(Dt,""),Jn?.focus());else if(c.key==="Escape"&&n(Dt)){if(c.preventDefault(),Jn){const{prev:d}=bt(Jn);d?.focus()}f(Dt,"")}};Ae(()=>(window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)})),Ye(()=>{n(Dt);const c=n(An)?2e3:800;n(Dt)&&(n(Pn)?.getBoundingClientRect(),n(Pn)?.style.setProperty("opacity","1"));const d=setTimeout(()=>{n(Pn)?.style.removeProperty("opacity")},c),v=setTimeout(()=>{f(Dt,""),n(Ua)&&n(Ua)(),f(Ua,null),f(An,null),n(Pn)?.style.removeProperty("opacity")},c+400);return()=>{clearTimeout(d),clearTimeout(v)}});const s=c=>{c.preventDefault(),n(An)&&(f(Ua,null),n(An)(),f(An,null)),f(Dt,""),n(Pn)?.style.removeProperty("opacity")};Ye(()=>{n(Dt)&&n(An)&&n(Or)&&setTimeout(()=>{n(Or)?.focus()},151)}),Ye(()=>{n(Yn),jt(()=>{f(Dt,""),n(Pn)?.style.removeProperty("opacity")})});var i=uu(),l=C(i);{var u=c=>{var d=du(),v=C(d),h=C(v),p=C(h),_=A(h,2);{var x=m=>{var b=cu();b.__click=s,$e(b,M=>f(Or,M),()=>n(Or)),g(m,b)};O(_,m=>{n(An)&&m(x)})}$e(v,m=>f(Pn,m),()=>n(Pn)),De(()=>ut(p,n(Dt))),g(c,d)};O(l,c=>{n(Dt)&&n(Yn)[n(Yn).length-1]===r&&c(u)})}g(t,i),Ce()}ht(["click"]);var fu=S('<span class="a p-lxk90o"><!></span>');function mt(t,e){var a=fu(),r=C(a);We(r,()=>e.children),g(t,a)}var vu=jc('<svg class="p-1yv1ibq"><use></use></svg>');function pe(t,e){let a=Oe(e,"name",8,"");var r=vu(),o=C(r);De(()=>dt(o,"href",`#icon-${a()??""}`)),g(t,r)}var gu=S('<button class="a p-1cnj0y3"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function cl(t,e){be(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=Mr(),{getDialogPages:s}=Ft(),{checkExistedDialog:i}=Zt();let l=P(()=>s().length>0||i());const u=h=>{if(h.preventDefault(),n(l))return;const p=r();p==="closed"?a():p==="opened"&&o()};var c=gu();c.__click=u;var d=C(c);ve(d,()=>({"--size":"28px"})),pe(d.lastChild,{name:"sidebarMenu"});var v=A(d,2);mt(v,{children:(h,p)=>{var _=Ke("Menu");g(h,_)}}),g(t,c),Ce()}ht(["click"]);var hu=S('<button class="b p-3z9gmw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),pu=S('<div class="a p-3z9gmw"><input class="p-3z9gmw"/> <!></div>');function jo(t,e){be(e,!0);let a=Oe(e,"value",15,""),r=Oe(e,"ref",15,null);const o=c=>{c.key==="Escape"&&(c.stopPropagation(),r()&&(e.onEscape?.(),r().blur()))};Ae(()=>(r()?.addEventListener("keydown",o),()=>{r()?.removeEventListener("keydown",o)}));var s=pu(),i=C(s);i.__input=c=>e.onChange?.(c.target?.value||""),$e(i,c=>r(c),()=>r());var l=A(i,2);{var u=c=>{var d=hu();d.__click=()=>{a(""),e.onChange?.("")};var v=C(d);ve(v,()=>({"--size":"20px"})),pe(v.lastChild,{name:"close"});var h=A(v,2);mt(h,{children:(p,_)=>{var x=Ke("Clear");g(p,x)}}),g(c,d)};O(l,c=>{a()&&c(u)})}De(()=>dt(i,"placeholder",e.placeholder)),ln("focus",i,function(...c){e.onFocus?.apply(this,c)}),ln("blur",i,function(...c){e.onBlur?.apply(this,c)}),Fi(i,a),g(t,s),Ce()}ht(["input","click"]);function us(t,e){be(e,!0);let a=Oe(e,"notificationRef",11,null);Ye(()=>{console.log("notificationRef",a())}),Ae(()=>{const r=o=>{o.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==o.target&&!e.dialogInner.contains(o.target)&&a()!==o.target&&!a()?.contains(o.target)&&e.onClose()};return document.addEventListener("mousedown",r,{capture:!0}),()=>{document.removeEventListener("mousedown",r,{capture:!0})}}),Ce()}function mu(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const fn=mu(),_u=()=>{const t=navigator.userAgent;return/android/i.test(t)},xn=_u(),tp=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},np=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},br=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let Ba=D(ft([]));var wu=S("<dialog><div><!></div></dialog> <!>",1);function Dr(t,e){be(e,!0);const a=Xn(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;Ae(()=>(f(Ba,[...n(Ba),a],!0),()=>{const w=n(Ba).indexOf(a);w!==-1&&f(Ba,n(Ba).filter((k,I)=>I!==w),!0)}));let o=Oe(e,"onClosed",3,()=>{}),s=Oe(e,"blocked",3,!1),i=D(null),l=D(null),u=D(!1),{dialogInc:c,dialogDec:d}=Zt();const v=()=>{const w=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(w),o()()},{once:!0}),f(u,!1)};Ye(()=>{e.startClose&&v()}),Ae(()=>{n(i)?.showModal(),n(i)?.getClientRects(),f(u,!0);const w=k=>{k?.preventDefault(),s()||v()};return n(i)?.addEventListener("cancel",w),n(i)?.addEventListener("close",w),()=>{n(i)?.removeEventListener("cancel",w),n(i)?.removeEventListener("close",w)}}),Ae(()=>(c(),()=>{d()})),Ae(()=>{const w=k=>{k.key==="Escape"&&s()&&k.preventDefault()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}});function h(){setTimeout(()=>{if(fn||!n(i)||!n(l))return;const w=window.visualViewport;if(w)if(w.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}Ae(()=>(h(),window.visualViewport?.addEventListener("resize",h),window.visualViewport?.addEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{window.visualViewport?.removeEventListener("resize",h),window.visualViewport?.removeEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h)}));var p=wu(),_=E(p),x=C(_),m=C(x);We(m,()=>e.children),$e(x,w=>f(l,w),()=>n(l)),$e(_,w=>f(i,w),()=>n(i));var b=A(_,2);{var M=w=>{us(w,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:v})};O(b,w=>{n(i)&&n(l)&&!s()&&w(M)})}De(()=>{rt(_,1,it({a:!0,b:n(u),c:n(Ba).length>1}),"p-1x14yml"),rt(x,1,it({d:!0,b:n(u)}),"p-1x14yml")}),g(t,p),Ce()}var yu=S("<div><!></div>");function bu(t,e){be(e,!0);let a=D(!1),r=D(null);const o=()=>{const d=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),f(a,!1)},s=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},i=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},l=d=>{d.key==="Escape"&&o()};Ae(()=>{n(r)?.getClientRects(),f(a,!0);const d=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),Ye(()=>{e.startClose&&o()});var u=yu(),c=C(u);We(c,()=>e.children),$e(u,d=>f(r,d),()=>n(r)),De(()=>rt(u,1,it({a:!0,b:n(a)}),"p-1unpq18")),g(t,u),Ce()}var Cu=S("<ul><!></ul>"),Su=S("<ul><!></ul>");function sr(t,e){be(e,!0);let a=Oe(e,"ref",15);var r=we(),o=E(r);{var s=l=>{Dr(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(u,c)=>{var d=Cu(),v=C(d);We(v,()=>e.children),$e(d,h=>a(h),()=>a()),De(()=>rt(d,1,it({a:!0,b:e.isMobile}),"p-6pddb9")),g(u,d)},$$slots:{default:!0}})},i=l=>{bu(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(u,c)=>{var d=Su(),v=C(d);We(v,()=>e.children),$e(d,h=>a(h),()=>a()),De(()=>rt(d,1,it({a:!0,b:e.isMobile}),"p-6pddb9")),g(u,d)},$$slots:{default:!0}})};O(o,l=>{e.isMobile?l(s):l(i,!1)})}g(t,r),Ce()}var ku=S("<button><!></button>"),xu=S("<a><!></a>");function Ue(t,e){let a=Oe(e,"dangerous",3,!1),r=Oe(e,"type",3,"button"),o=Oe(e,"href",3,"");var s=we(),i=E(s);{var l=c=>{var d=ku();d.__click=function(...h){e.onClick?.apply(this,h)},d.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=C(d);We(v,()=>e.children??Je),De(()=>rt(d,1,it({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-1xchqhv")),g(c,d)},u=c=>{var d=xu();d.__click=function(...h){e.onClick?.apply(this,h)},d.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=C(d);We(v,()=>e.children??Je),De(()=>{dt(d,"href",o()),rt(d,1,it({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-1xchqhv")}),g(c,d)};O(i,c=>{r()==="button"?c(l):c(u,!1)})}g(t,s)}ht(["click","keydown"]);var Tu=S('<li class="p-108u1na"><!></li> <li class="p-108u1na"><!></li> <li class="p-108u1na"><!></li> <li class="p-108u1na"><!></li> <li class="p-108u1na"><!></li>',1),Eu=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Pu=S('<div class="a p-108u1na"><button><!> <!></button> <!></div>');function Nu(t,e){be(e,!0);let a=D(!1),r=D(!1);const{getFeedOrder:o,setFeedOrder:s}=Hi();let i=fn||xn,l=P(o);const u=()=>{n(a)||f(a,!0)},c=b=>{f(r,!0),s(b)},d=()=>{f(a,!1),f(r,!1)};Ae(()=>{const b=M=>{M.key==="Escape"&&f(r,!0)};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)});var v=Pu(),h=C(v);h.__click=u,rt(h,1,it({b:!0,c:!0}),"p-108u1na");var p=C(h);pe(p,{name:"filter"});var _=A(p,2);mt(_,{children:(b,M)=>{var w=Ke("show feed order menu");g(b,w)}});var x=A(h,2);{var m=b=>{var M=Eu(),w=E(M);ve(w,()=>({"--right":"0px","--top":"44px"})),sr(w.lastChild,{get startClose(){return n(r)},onClosed:d,get isMobile(){return i},children:(k,I)=>{var Z=Tu(),H=E(Z),W=C(H);{let K=P(()=>n(l)==="newest");Ue(W,{get active(){return n(K)},get dialogMode(){return i},onClick:()=>c("newest"),children:(L,ee)=>{var se=Ke("Newest");g(L,se)},$$slots:{default:!0}})}var R=A(H,2),J=C(R);{let K=P(()=>n(l)==="oldest");Ue(J,{get active(){return n(K)},get dialogMode(){return i},onClick:()=>c("oldest"),children:(L,ee)=>{var se=Ke("Oldest");g(L,se)},$$slots:{default:!0}})}var ne=A(R,2),oe=C(ne);{let K=P(()=>n(l)==="AtoZ");Ue(oe,{get active(){return n(K)},get dialogMode(){return i},onClick:()=>c("AtoZ"),children:(L,ee)=>{var se=Ke("A to Z");g(L,se)},$$slots:{default:!0}})}var U=A(ne,2),z=C(U);{let K=P(()=>n(l)==="ZtoA");Ue(z,{get active(){return n(K)},get dialogMode(){return i},onClick:()=>c("ZtoA"),children:(L,ee)=>{var se=Ke("Z to A");g(L,se)},$$slots:{default:!0}})}var ye=A(U,2),me=C(ye);{let K=P(()=>n(l)==="updatedNewest");Ue(me,{get active(){return n(K)},get dialogMode(){return i},onClick:()=>c("updatedNewest"),children:(L,ee)=>{var se=Ke("Updated");g(L,se)},$$slots:{default:!0}})}g(k,Z)},$$slots:{default:!0}}),g(b,M)};O(x,b=>{n(a)&&b(m)})}g(t,v),Ce()}ht(["click"]);var Au=S('<div><!> <div class="a p-y3zt6o"></div></div>');function Ra(t,e){be(e,!0);let a=D(!1);Ae(()=>{const s=setTimeout(()=>{f(a,!0)},200);return()=>{clearTimeout(s)}});var r=Au(),o=C(r);We(o,()=>e.children??Je),De(()=>rt(r,1,it({b:!0,c:n(a)}),"p-y3zt6o")),g(t,r),Ce()}var Mu=S("<a><!></a>"),Du=S("<button><!></button>");function Rt(t,e){let a=Oe(e,"type",3,"standard"),r=Oe(e,"typeButton",3,"button"),o=Oe(e,"element",3,"button"),s=Oe(e,"href",3,""),i=Oe(e,"fullWidth",3,!1),l=Oe(e,"withoutMinWidth",3,!1);var u=we(),c=E(u);{var d=h=>{var p=Mu();p.__click=function(...x){e.onClick?.apply(this,x)};var _=C(p);We(_,()=>e.children??Je),De(()=>{dt(p,"target",e.target),dt(p,"rel",e.rel),dt(p,"href",s()),rt(p,1,it({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l(),g:e.size==="small"}),"p-1iz5xf9")}),g(h,p)},v=h=>{var p=Du();p.__click=function(...x){e.onClick?.apply(this,x)};var _=C(p);We(_,()=>e.children??Je),De(()=>{dt(p,"type",r()),rt(p,1,it({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l(),g:e.size==="small"}),"p-1iz5xf9")}),g(h,p)};O(c,h=>{o()==="a"?h(d):h(v,!1)})}g(t,u)}ht(["click"]);let Ho=D(!1),zr=D(!1),Uo=D(""),Wo=D("Cancel"),Vo=D("Confirm"),qo,Wr=D(void 0),Ko,Yo=D("dangerous");function Ta(t){f(Ho,!0),f(Uo,t.title,!0),t.buttonCancelTitle&&f(Wo,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&f(Vo,t.buttonConfirmTitle,!0),qo=t.onConfirm,f(Wr,t.onCancel,!0),Ko=t.onClosed,t.type?f(Yo,t.type,!0):f(Yo,"dangerous")}var Iu=S('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),Ru=S('<div class="a p-1jlul5o"><!></div>');function Lu(t,e){be(e,!0);let a=D(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{f(a,!0)},250)};Ae(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(Wr)?.(),f(zr,!0)},l=async()=>{s(),await qo?.(),f(zr,!0),o=!0},u=()=>{clearTimeout(r),f(a,!1),f(Ho,!1),f(zr,!1),f(Uo,""),f(Wo,"Cancel"),f(Vo,"Confirm"),f(Wr,void 0),qo=void 0,Ko&&Ko(o),o=!1};var c=we(),d=E(c);{var v=h=>{Dr(h,{get blocked(){return n(a)},get startClose(){return n(zr)},onClosed:u,children:(p,_)=>{var x=Ru(),m=C(x);{var b=w=>{Ra(w,{})},M=w=>{var k=Iu(),I=E(k),Z=C(I),H=A(I,2),W=C(H);{var R=ne=>{Rt(ne,{size:"small",onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(oe,U)=>{var z=Ke();De(()=>ut(z,n(Wo))),g(oe,z)},$$slots:{default:!0}})};O(W,ne=>{n(Wr)&&ne(R)})}var J=A(W,2);Rt(J,{size:"small",onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(Yo)},children:(ne,oe)=>{var U=Ke();De(()=>ut(U,n(Vo))),g(ne,U)},$$slots:{default:!0}}),De(()=>ut(Z,n(Uo))),g(w,k)};O(m,w=>{n(a)?w(b):w(M,!1)})}g(p,x)},$$slots:{default:!0}})};O(d,h=>{n(Ho)&&h(v)})}g(t,c),Ce()}const Cr=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,u=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!u){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var Fu=S('<div class="a p-6qmscy"><a class="b p-6qmscy"><span class="c p-6qmscy"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-6qmscy"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function Ou(t,e){be(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=Ft(),{checkExistedDialog:i}=Zt(),l=()=>{o.length===0&&!i()&&s(xe.NewNote)};Ae(()=>Cr({key:"n",action:l})),ss();var u=Fu(),c=C(u),d=P(()=>r(xe.NewNote));c.__click=function(...m){n(d)?.apply(this,m)};var v=C(c),h=C(v);ve(h,()=>({"--size":"28px","--color":"#b0b0b0"})),pe(h.lastChild,{name:"add"});var p=A(h,2);mt(p,{children:(m,b)=>{var M=Ke("Add note");g(m,M)}});var _=A(v,2),x=C(_);ve(x,()=>({"--size":"16px","--color":"#b0b0b0"})),pe(x.lastChild,{name:"plus"}),De(m=>dt(c,"href",m),[()=>a(xe.NewNote)]),g(t,u),Ce()}ht(["click"]);var zu=S("<button><!></button>");function va(t,e){be(e,!0);let a=Oe(e,"type",3,"button"),r=!1,o=D(null);Ye(()=>{e.onRef&&e.onRef(n(o))});const s=d=>{(d.key==="Enter"||d.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=d=>{(d.pointerType==="mouse"&&d.button===0||d.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(d)};var u=zu();u.__keydown=s,u.__click=i,u.__pointerdown=l,u.__touchstart=function(...d){e.onTouchStart?.apply(this,d)};var c=C(u);We(c,()=>e.children??Je),$e(u,d=>f(o,d),()=>n(o)),De(()=>{dt(u,"type",a()),u.disabled=e.disabled,rt(u,1,it({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-19nhjik")}),g(t,u),Ce()}ht(["keydown","click","pointerdown","touchstart"]);var Bu=S('<div class="b p-1pt17hy"> </div>'),ju=S('<div class="a p-1pt17hy"><input/> <!></div>');function Sr(t,e){be(e,!0);let a=Oe(e,"value",15,""),r=Oe(e,"error",3,""),o=Oe(e,"ref",15,null);var s=ju(),i=C(s);i.__input=function(...d){e.onInput?.apply(this,d)};let l;$e(i,d=>o(d),()=>o());var u=A(i,2);{var c=d=>{var v=Bu(),h=C(v);De(()=>ut(h,r())),g(d,v)};O(u,d=>{r()&&d(c)})}De(()=>{dt(i,"placeholder",e.placeholder),l=rt(i,1,"p-1pt17hy",null,l,{error:!!r()})}),ln("blur",i,function(...d){e.onBlur?.apply(this,d)}),ln("focus",i,function(...d){e.onFocus?.apply(this,d)}),Fi(i,a),g(t,s),Ce()}ht(["input"]);var Hu=S('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Uu=S('<form class="a p-y9ylet"><!></form>');function Wu(t,e){be(e,!0);const{renameTag:a}=Ot(),{getSelectedTags:r,setSelectedTags:o}=Vn(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=da(),{getFiltredNotes:u}=Ia();let c=D(!1),d=D(!1),v,h=!1,p=D(null),_=D(ft(e.tag)),x=e.nextFocusRef;Ae(()=>(n(p)&&n(p).focus(),()=>{v&&clearTimeout(v)}));const m=()=>{v=setTimeout(()=>{f(d,!0)},250)},b=()=>{f(c,!0)},M=async()=>{if(n(_).trim()===e.tag){b();return}if(n(_).trim()!=="")try{m();const I=r(),Z=[...I].map(ne=>ne===e.tag?n(_).trim():ne),H=new Set(s()),W=u(),R=H.size?[...H]:W.map(ne=>ne.id),{cancel:J}=await a(e.tag,n(_).trim(),R);l(),o(new Set(Z)),et("Tag renamed",{cancel:{nextFocusRef:x,onCancel:async()=>{await J(),o(I),i(H),setTimeout(()=>{const{prev:ne}=bt(x);ne?.focus()},16)}}}),h=!0}finally{f(c,!0)}},w=()=>{e.onClosed?.(h)},k=I=>{I.preventDefault(),M()};Dr(t,{get blocked(){return n(d)},get startClose(){return n(c)},onClosed:w,children:(I,Z)=>{var H=Uu(),W=C(H);{var R=ne=>{Ra(ne,{})},J=ne=>{var oe=Hu(),U=E(oe),z=C(U),ye=A(U,2);Sr(ye,{placeholder:"Enter new tag name",get ref(){return n(p)},set ref(ee){f(p,ee,!0)},get value(){return n(_)},set value(ee){f(_,ee,!0)}});var me=A(ye,2),K=C(me);Rt(K,{size:"small",onClick:b,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(ee,se)=>{var le=Ke("Cancel");g(ee,le)},$$slots:{default:!0}});var L=A(K,2);Rt(L,{size:"small",onClick:M,fullWidth:!0,withoutMinWidth:!0,children:(ee,se)=>{var le=Ke("OK");g(ee,le)},$$slots:{default:!0}}),De(()=>ut(z,`Rename "${e.tag??""}" for selected notes`)),g(ne,oe)};O(W,ne=>{n(d)?ne(R):ne(J,!1)})}ln("submit",H,k),g(I,H)},$$slots:{default:!0}}),Ce()}let ta=D(!1),ga=D(!1),Gt=D(""),pa=D(0),vr=D(0),gr=D(0),Vr,Xr=()=>({bottom:0,right:0,height:0}),Qt=D(null),Go=D(null);function Vu(t){if(n(ta)){f(ga,!0),n(Gt)!==t.tag&&(Vr=()=>{const a=t.getRect();f(ta,!0),f(Gt,t.tag,!0),f(pa,a.bottom,!0),f(vr,a.right,!0),f(gr,a.height,!0),Xr=t.getRect,f(Qt,t.focusRef,!0)});return}const e=t.getRect();f(ta,!0),f(Gt,t.tag,!0),f(pa,e.bottom,!0),f(vr,e.right,!0),f(gr,e.height,!0),Xr=t.getRect,f(Qt,t.focusRef,!0)}const qu=()=>n(ta),Ku=()=>n(Go);var Yu=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),Gu=S('<li class="p-16hbyw2"><!></li>'),Xu=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Ju=S('<li class="p-16hbyw2"><!></li>'),Zu=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),Qu=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),$u=S('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),ef=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),tf=S("<!> <!>",1);function nf(t,e){be(e,!0);const{getScrollContainer:a}=vo(),{pinTag:r,getGetMapTags:o,deleteTag:s}=Ot(),{checkMobileSize:i}=fa(),{getSelectedTags:l,removeTag:u,setSelectedTags:c}=Vn(),{getSelectedNotes:d,setSelectedNotes:v,clearNotes:h}=da(),{getFiltredNotes:p}=Ia();let _=D(!1);Ye(()=>{n(ta),jt(()=>{f(_,o()().get(n(Gt))?.pinned||!1,!0)})});let x=D(!1);const m=()=>{r(n(Gt),!0),f(ga,!0);let K=n(Qt),L=bt(K)?.next;et("Tag pinned",{cancel:{nextFocusRef:L,onCancel:async()=>{r(n(Gt),!1),setTimeout(()=>{const{prev:ee}=bt(L);ee?.focus()},16)}}})},b=()=>{r(n(Gt),!1),f(ga,!0);let K=n(Qt),L=bt(K)?.next;et("Tag unpinned",{cancel:{nextFocusRef:L,onCancel:async()=>{r(n(Gt),!0),setTimeout(()=>{const{prev:ee}=bt(L);ee?.focus()},16)}}})},M=()=>{f(ta,!1),f(ga,!1),f(pa,0),f(vr,0),f(gr,0),Xr=()=>({bottom:0,right:0,height:0}),f(Qt,null),Vr&&setTimeout(()=>{Vr?.(),Vr=void 0})};let w=P(()=>window.innerHeight-n(pa)<100?n(pa)-n(gr)-98+"px":n(pa)+5+"px"),k=P(a);const I=K=>{K.key==="Tab"&&K.shiftKey&&(K.preventDefault(),n(Qt)?.focus())},Z=K=>{K.key==="Tab"&&!K.shiftKey&&n(Qt)&&(K.preventDefault(),bt(n(Qt))?.next?.focus())};Ae(()=>{const K=L=>{L.key==="Escape"&&n(ta)&&n(Qt)?.focus()};return window.addEventListener("keydown",K),()=>{window.removeEventListener("keydown",K)}});const H=()=>{f(ga,!0);let K=n(Qt),L=bt(K)?.next;Ta({title:`Are you sure to delete "${n(Gt)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const ee=Array.from(n(J)),se=new Set(d()),le=p(),de=se.size?[...se]:le.map(Fe=>Fe.id);n(J).has(n(Gt))&&(se.size===0||le.length===se.size)&&u(n(Gt)),h();const{cancel:Ne}=await s(n(Gt),de);et("Tag deleted",{cancel:{nextFocusRef:L,onCancel:async()=>{await Ne(),c(new Set(ee)),v(new Set(se)),setTimeout(()=>{const{prev:Fe}=bt(L);Fe?.focus()},16)}}})},onCancel:async()=>{},onClosed:ee=>{setTimeout(()=>{ee||K?.focus()},16)}})};let W=()=>{};const R=()=>{f(ga,!0),f(x,!0);let K=n(Qt);W=()=>{f(x,!1),setTimeout(()=>{K?.focus()},16)}};Ye(()=>{const K=()=>{const L=Xr();f(pa,L.bottom,!0),f(vr,L.right,!0),f(gr,L.height,!0)};return n(k)?.addEventListener("scroll",K),window.addEventListener("resize",K),()=>{n(k)?.removeEventListener("scroll",K),window.removeEventListener("resize",K)}});let J=P(l),ne=P(i);var oe=tf(),U=E(oe);{var z=K=>{var L=ef(),ee=E(L);ve(ee,()=>({"--left":n(vr)-36+"px","--top":n(w),"--transform-origin":"top left"})),sr(ee.lastChild,{get startClose(){return n(ga)},onClosed:M,get isMobile(){return n(ne)},get ref(){return n(Go)},set ref(se){f(Go,se,!0)},children:(se,le)=>{var de=$u(),Ne=E(de);{var Fe=Ie=>{var He=Gu(),ge=C(He);Ue(ge,{onClick:m,onKeydown:I,get dialogMode(){return n(ne)},children:(ce,Se)=>{var te=Yu(),Pe=E(te);ve(Pe,()=>({"--size":"20px"})),pe(Pe.lastChild,{name:"pin"}),g(ce,te)},$$slots:{default:!0}}),g(Ie,He)},ue=Ie=>{var He=Ju(),ge=C(He);Ue(ge,{onClick:b,onKeydown:I,get dialogMode(){return n(ne)},children:(ce,Se)=>{var te=Xu(),Pe=E(te);ve(Pe,()=>({"--size":"20px"})),pe(Pe.lastChild,{name:"pin-cancel"}),g(ce,te)},$$slots:{default:!0}}),g(Ie,He)};O(Ne,Ie=>{n(_)?Ie(ue,!1):Ie(Fe)})}var G=A(Ne,2),ie=C(G);Ue(ie,{onClick:R,get dialogMode(){return n(ne)},children:(Ie,He)=>{var ge=Zu(),ce=E(ge);ve(ce,()=>({"--size":"20px","--scale":"0.9"})),pe(ce.lastChild,{name:"pen"}),g(Ie,ge)},$$slots:{default:!0}});var Te=A(G,2),Ee=C(Te);Ue(Ee,{onClick:H,onKeydown:Z,get dialogMode(){return n(ne)},children:(Ie,He)=>{var ge=Qu(),ce=E(ge);ve(ce,()=>({"--size":"20px"})),pe(ce.lastChild,{name:"bin"}),g(Ie,ge)},$$slots:{default:!0}}),g(se,de)},$$slots:{default:!0}}),g(K,L)};O(U,K=>{n(ta)&&K(z)})}var ye=A(U,2);{var me=K=>{{let L=P(()=>bt(n(Qt))?.next||null);Wu(K,{get tag(){return n(Gt)},get nextFocusRef(){return n(L)},onClosed:ee=>{W(ee)}})}};O(ye,K=>{n(x)&&K(me)})}g(t,oe),Ce()}var af=S('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),rf=S('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),of=S("<!> <span> </span> <!>",1),sf=S('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function hr(t,e){be(e,!0);let{getGetMapTags:a}=Ot(),r=D(null),o=P(qu);const s=()=>{if(n(r)){const v=n(r).getBoundingClientRect();return{bottom:v.bottom,right:v.right,height:v.height}}return{bottom:0,right:0,height:0}},i=v=>{v.stopPropagation(),v.preventDefault(),Vu({tag:e.tag,getRect:s,focusRef:n(r)})},l=v=>{v.key==="Tab"&&!v.shiftKey&&n(o)&&(v.preventDefault(),Ku()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let u=P(()=>a()().get(e.tag)?.pinned||!1);var c=sf(),d=C(c);ve(d,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),va(d.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(v,h)=>{var p=of(),_=E(p);{var x=k=>{var I=af(),Z=C(I);ve(Z,()=>({"--size":"18px"})),pe(Z.lastChild,{name:"pin"}),g(k,I)};O(_,k=>{n(u)&&k(x)})}var m=A(_,2),b=C(m),M=A(m,2);{var w=k=>{var I=rf();I.__click=i,I.__keydown=l;var Z=C(I),H=C(Z);ve(H,()=>({"--size":"16px"})),pe(H.lastChild,{name:"menu"});var W=A(H,2);mt(W,{children:(R,J)=>{var ne=Ke("Tag options");g(R,ne)}}),$e(I,R=>f(r,R),()=>n(r)),De(()=>rt(I,1,it({c:!0,d:e.type==="selected"}),"p-9jjlcl")),g(k,I)};O(M,k=>{e.hideMenu||k(w)})}De(()=>ut(b,e.tag)),g(v,p)},$$slots:{default:!0}}),g(t,c),Ce()}ht(["click","keydown"]);var lf=S('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function Ds(t,e){be(e,!0);let a=Oe(e,"mobile",3,!1);const{getGetMapTags:r}=Ot();let s=P(()=>{const p=r()();return[...e.tags].sort((_,x)=>p.get(_)?.pinned?-1:p.get(x)?.pinned?1:_.localeCompare(x))}),i=P(()=>n(s).filter(p=>r()().get(p)?.pinned)),l=P(()=>n(s).filter(p=>!r()().get(p)?.pinned));var u=lf(),c=C(u),d=C(c);Bn(d,16,()=>n(i),p=>p,(p,_)=>{hr(p,{get hideMenu(){return e.hideTagMenu},get tag(){return _},onClick:()=>{e.handleTagClick(_)}})});var v=A(d,2);Bn(v,17,()=>e.metaTags,p=>"meta"+p,(p,_)=>{hr(p,{hideMenu:!0,get tag(){return n(_)},onClick:()=>{e.handleMetaTagClick(n(_))}})});var h=A(v,2);Bn(h,16,()=>n(l),p=>p,(p,_)=>{hr(p,{get hideMenu(){return e.hideTagMenu},get tag(){return _},onClick:()=>{e.handleTagClick(_)}})}),De(()=>rt(c,1,it({b:!0,c:a()}),"p-lawyrs")),g(t,u),Ce()}var cf=S('<div class="b c p-32813r"><div class="d p-32813r"><button class="e p-32813r"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),df=S('<div class="a p-32813r"><!></div>');function Is(t,e){be(e,!0);let a=D(null);const r=u=>{f(a,u,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};Ye(()=>{n(a)&&n(a).focus()});var s=df(),i=C(s);{var l=u=>{var c=cf(),d=C(c),v=C(d);v.__click=o;var h=C(v);ve(h,()=>({"--size":"20px"})),pe(h.lastChild,{name:"close"});var p=A(h,2);mt(p,{children:(m,b)=>{var M=Ke("Clear");g(m,M)}});var _=A(d,2);Bn(_,19,()=>e.metaTags,m=>"meta_"+m,(m,b,M)=>{{let w=P(()=>n(M)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);hr(m,{hideMenu:!0,type:"selected",get tag(){return n(b)},onClick:()=>{e.handleMetaTagClick(n(b))},get onRef(){return n(w)}})}});var x=A(_,2);Bn(x,18,()=>e.selectedTags,m=>m,(m,b,M)=>{{let w=P(()=>n(M)===e.selectedTags.size-1?r:void 0);hr(m,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return b},onClick:()=>{e.handleSelectedTagClick(b)},get onRef(){return n(w)}})}}),g(u,c)};O(i,u=>{e.selectedTags.size+e.metaTags.size>0&&u(l)})}g(t,s),Ce()}ht(["click"]);const Xo=(t,e,a,r)=>{if(t.has(at.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},jn=200,uf=t=>t<.5?2*t*t:-1+(4-2*t)*t,dl=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,uf(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},ff=t=>{const{getIsKeyboardVisible:a}=au();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=v=>({x:v.clientX,y:v.clientY,time:performance.now()}),u=v=>{r=[l(v.touches[0])],o=!0},c=v=>{if(!o||s)return;r.push(l(v.touches[0]));const h=performance.now()-150;r=r.filter(H=>H.time>=h);const p=r.at(-1),_=r[0];if(!p||!_)return;const x=_.x,m=_.y,b=p.x,M=p.y,w=b-x,k=M-m,I=Math.abs(w)>Math.abs(k),Z=Math.abs(w)>3;I&&Z&&!a()&&(s=!0,v.preventDefault(),t([...r]),i())},d=()=>{i()};Ae(()=>(document.addEventListener("touchstart",u,{passive:!0}),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchend",d,{passive:!0}),document.addEventListener("touchcancel",d,{passive:!0}),()=>{document.removeEventListener("touchstart",u),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",d),document.removeEventListener("touchcancel",d)}))},Rs=5,Ls=.6,la=.3;function ul(t,e){be(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,u=0,c=0,d=null,v=null;const h=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,u=0,c=0,d!==null&&(cancelAnimationFrame(d),d=null),v&&(clearTimeout(v),v=null)},p=()=>{e.onCancel(),h()},_=()=>{v&&clearTimeout(v),v=setTimeout(p,5e3)};ff(async Z=>{if(!o)try{const H=Z.at(-1);if(!H)throw new Error("No points available for swipe initialization");const W=await e.onInit();if(!W)return;s=W.initialPosition,i=W.currentPosition,l=W.minPosition,u=W.maxPosition,c=W.width,r=H.x,a=Z,o=!0,_()}catch(H){console.error("Error during swipe initialization:",H),h()}});const m=Z=>Math.max(l,Math.min(u,Z)),b=()=>{if(d=null,!o){h();return}const Z=a.at(-1),H=a[0];if(!Z||!H)return;let W=Z.x-r;r=Z.x;const R=m(i+W);R!==i&&(i=R,e.onUpdate({initialPosition:s,newPosition:R,width:c,minPosition:l,maxPosition:u}))},M=Z=>{if(!o){h();return}a.push({x:Z.touches[0].clientX,y:Z.touches[0].clientY,time:performance.now()});const H=performance.now()-150;a=a.filter(ne=>ne.time>=H),d===null&&(d=requestAnimationFrame(b)),_();const W=Z.touches[0].clientX-a[0].x,R=Z.touches[0].clientY-a[0].y;Math.abs(W)>Math.abs(R)&&Z.cancelable&&Z.preventDefault()},w=Z=>{const H=Math.abs(Z);if(H>=Ls)return Rs;if(H>=la){const W=(H-la)/(Ls-la);return e.baseActionThreshold-W*(e.baseActionThreshold-Rs)}else return e.baseActionThreshold},k=Z=>{if(!o){h();return}let H=0;a.push({x:Z.changedTouches[0].clientX,y:Z.changedTouches[0].clientY,time:performance.now()}),b(),d!==null&&(cancelAnimationFrame(d),d=null);const W=a[0],R=a[a.length-1],J=R.x-W.x,ne=R.time-W.time;ne>0&&(H=J/ne);const oe=w(H);e.onFinish({swipeVelocity:H,currentPosition:i,minPosition:l,maxPosition:u,initialPosition:s,width:c,actionThreshold:oe}),h()},I=()=>{p()};Ae(()=>(document.addEventListener("touchmove",M,{passive:!1}),document.addEventListener("touchend",k,{passive:!0}),document.addEventListener("touchcancel",I,{passive:!0}),()=>{document.removeEventListener("touchmove",M),document.removeEventListener("touchend",k),document.removeEventListener("touchcancel",I),d!==null&&cancelAnimationFrame(d),v&&clearTimeout(v)})),Ce()}function vf(t,e){be(e,!0);const a=qn();let r=Oe(e,"animationRef",7),o=Oe(e,"dialog",7);ul(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const c=-e.dialogWidth*.7,d=0;let v=e.sidebarState==="closed"?c:d,h=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let x=()=>1;if(r().current){r().current.pause();let m=Number(r().current.currentTime);br()&&(m=Number(m)+50,r().current.currentTime=Math.min(Math.max(jn-1,m),m));const b=r().current.effect?.getComputedTiming().progress||0;x=()=>b,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(m=>requestAnimationFrame(m)),h=Math.abs(1-x())}h=e.sidebarState==="closed"?h:1-h,o().style.setProperty("--backdrop-bg",`${h*.1}`),o()&&!o().open&&(o().showModal(),br()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=h*-25;const p=h*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let _=e.sidebarState==="closed"?c:d;return e.sidebarState==="opened"||e.sidebarState==="closed"||(_=p),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:v,currentPosition:_,minPosition:c,maxPosition:d,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:c,width:d})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const v=1-Math.abs(c/d)/7*10;o().style.transform=`translate3d(${c}px, 0, 0)`,a.swipingRatio=v*-25,o().style.setProperty("--backdrop-bg",`${v*.1}`)},onFinish:({swipeVelocity:c,currentPosition:d,initialPosition:v,width:h,actionThreshold:p})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let _="close";const x=Math.abs(d-v)/h*100/7*10;if(x===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(x===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?_=Math.abs(x)>p||c>la?"open":"close":e.sidebarState==="swipingClose"&&(_=Math.abs(x)>p&&c<=la||c<-la?"close":"open");let m=dl(Math.abs(x)/100);e.sidebarState==="swipingClose"&&_==="close"&&(m=1-m);const b=(_==="open"?1-m:m)*jn;a.duration=b/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${_==="open"?.1:0}`),_==="open"?e.onOpen():_==="close"&&e.onClose()}}),Ce()}var gf=S("<dialog><div><!> <!></div></dialog> <!> <!>",1);function hf(t,e){be(e,!0);const{getSidebarState:a,setSidebarState:r}=Mr();let o=D(0);Ae(()=>{const z=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",z),z(),()=>{window.removeEventListener("resize",z)}});const s=qn(),{isScrolling:i}=cs();let l=D(null),u=D(null),c={},d=P(a);const v=()=>{e.blocked||r("closing")},h=z=>{r(z==="open"?"swipingOpen":"swipingClose")},p=()=>{r("opened")},_=()=>{r("preOpening")},x=()=>{n(l)?.close(),r("closed")},m=z=>{z.preventDefault(),v()};Ae(()=>(n(l)?.addEventListener("close",x),n(l)?.addEventListener("cancel",m),()=>{n(l)?.removeEventListener("close",x),n(l)?.removeEventListener("cancel",m)}));const b=P(i);let M=P(()=>s.working);const w=z=>{z?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ia().duration};Ye(()=>{n(d)==="opening"?jt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const z=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const ye=n(l)?.animate([{transform:z},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||jn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});c.current=ye,ye&&(ye.onfinish=()=>{p(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ia().duration,ye.cancel(),c.current=void 0})})}):n(d)==="closing"&&jt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const z=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const ye=n(l)?.animate([{transform:z},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||jn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});c.current=ye,ye&&(ye.onfinish=()=>{x(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ia().duration,ye.cancel(),c.current=void 0})})})}),Ye(()=>{n(d)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),br()&&n(l)?.getBoundingClientRect()),r("opening"))}),Ae(()=>{n(d)==="opened"&&r("preOpening")});var k=gf(),I=E(k),Z=C(I),H=C(Z);We(H,()=>e.children);var W=A(H,2);{var R=z=>{go(z,{})};O(W,z=>{n(d)==="opened"&&z(R)})}$e(Z,z=>f(u,z),()=>n(u)),$e(I,z=>f(l,z),()=>n(l));var J=A(I,2);{var ne=z=>{us(z,{get dialog(){return n(l)},get dialogInner(){return n(u)},onClose:v})};O(J,z=>{n(u)&&n(d)==="opened"&&!e.blocked&&z(ne)})}var oe=A(J,2);{var U=z=>{vf(z,{onCancelSwipe:w,onOpen:_,onClose:v,onSwipe:h,get dialogWidth(){return n(o)},get animationRef(){return c},get dialog(){return n(l)},get sidebarState(){return n(d)}})};O(oe,z=>{!n(b)&&!e.blocked&&z(U)})}De(()=>{rt(I,1,it({a:!0,b:n(M),c:n(d)==="opened"||n(d)==="opening"||n(d)==="closing"||n(d)==="swipingClose",d:n(d)==="opened"||n(d)==="opening"||n(d)==="swipingOpen"}),"p-1gucilc"),rt(Z,1,it({e:!0,f:n(d)==="swipingOpen",g:n(d)!=="opened"}),"p-1gucilc")}),g(t,k),Ce()}var pf=S('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),mf=S('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function _f(t,e){be(e,!0);const{checkMobileSize:a}=fa(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=Mr(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:u}=Ft(),{getTagsSearch:c,setTagsSearch:d}=dd(),{getSelectedTags:v,addTag:h,removeTag:p,clearTags:_}=Vn(),{getSelectedMetaTags:x,addMetaTag:m,removeMetaTag:b,clearSelectedMetaTags:M}=fo();let w=P(v),k=P(x);const{getGetNotes:I,checkNotesInArchive:Z,checkNotesInBin:H}=Ot(),W=P(I),R=ue=>{h(ue)},J=ue=>{m(ue)},ne=ue=>{p(ue)},oe=ue=>{b(ue)};let U=P(()=>n(w).size===0&&!n(k).has(at.INBOX)&&(n(W)()||[]).some(ue=>(!n(k).has(at.ARCHIVED)&&!n(k).has(at.BIN)&&ue?.data&&!ue.data.deletedAt&&!ue.data.archivedAt||n(k).has(at.ARCHIVED)&&ue?.data&&!ue.data.deletedAt&&ue.data.archivedAt||n(k).has(at.BIN)&&ue?.data&&ue.data.deletedAt)&&ue?.data?.tags.length===0)),z=P(()=>Xo(n(k),n(w),n(W)()||[],ue=>!(ue?.data&&(ue.data.deletedAt||ue.data.archivedAt)&&!n(k).has(at.ARCHIVED)&&!n(k).has(at.BIN)||ue?.data&&(ue.data.deletedAt||!ue.data.archivedAt)&&n(k).has(at.ARCHIVED)||ue?.data&&!ue.data.deletedAt&&n(k).has(at.BIN)))),ye=P(()=>n(z).filter(ue=>c()===""||ue.toLowerCase().indexOf(c().toLowerCase())!==-1)),me=P(a);const{checkExistedDialog:K}=Zt();let L=P(()=>i().length>0||K());const ee=()=>{if(n(me)){if(n(L))return;o()==="opened"?r():o()==="closed"&&s()}};Ae(()=>Cr({key:"b",meta:!0,action:ee})),Ae(()=>Cr({key:"b",ctrl:!0,action:ee}));let se=P(()=>[...n(U)&&n(k).size===0?[at.INBOX]:[],...n(k).size===0?[...Z()&&n(w).size===0?[at.ARCHIVED]:[],...H()&&n(w).size===0?[at.BIN]:[]]:[]].filter(ue=>c()===""||ue.toLowerCase().indexOf(c().toLowerCase())!==-1).sort((ue,G)=>ue===at.INBOX?-1:G===at.INBOX?1:ue.localeCompare(G)));var le=we(),de=E(le);{var Ne=ue=>{hf(ue,{get blocked(){return n(L)},children:(G,ie)=>{var Te=pf(),Ee=E(Te),Ie=C(Ee),He=C(Ie);cl(He,{});var ge=A(He,2),ce=C(ge),Se=P(()=>u(xe.Settings));ce.__click=function(...q){n(Se)?.apply(this,q)};var te=C(ce);ve(te,()=>({"--size":"24px"})),pe(te.lastChild,{name:"settings"});var Pe=A(te,2);mt(Pe,{children:(q,X)=>{var $=Ke("Settings");g(q,$)}});var fe=A(ce,2),_e=P(()=>u(xe.Sync));fe.__click=function(...q){n(_e)?.apply(this,q)};var y=C(fe);ve(y,()=>({"--size":"24px"})),pe(y.lastChild,{name:"sync"});var T=A(y,2);mt(T,{children:(q,X)=>{var $=Ke("Sync");g(q,$)}});var N=A(Ie,2),B=C(N);{let q=P(c);jo(B,{placeholder:"Search tag",get value(){return n(q)},onChange:X=>{d(X)}})}var F=A(N,2);{let q=P(()=>n(k).has(at.BIN));Is(F,{get clearTags(){return _},get clearMetaTags(){return M},get hideTagMenu(){return n(q)},handleMetaTagClick:oe,get metaTags(){return n(k)},get selectedTags(){return n(w)},handleSelectedTagClick:ne})}var V=A(Ee,2);{let q=P(()=>n(k).has(at.BIN));Ds(V,{get hideTagMenu(){return n(q)},get metaTags(){return n(se)},get tags(){return n(ye)},handleMetaTagClick:J,handleTagClick:R,mobile:!0})}De((q,X)=>{dt(ce,"href",q),dt(fe,"href",X)},[()=>l(xe.Settings),()=>l(xe.Sync)]),g(G,Te)},$$slots:{default:!0}})},Fe=ue=>{var G=mf(),ie=C(G),Te=C(ie);{let ce=P(c);jo(Te,{placeholder:"Search tag",get value(){return n(ce)},onChange:Se=>{d(Se)}})}var Ee=A(ie,2),Ie=C(Ee),He=C(Ie);{let ce=P(()=>n(k).has(at.BIN));Is(He,{get metaTags(){return n(k)},get clearTags(){return _},get clearMetaTags(){return M},get hideTagMenu(){return n(ce)},get selectedTags(){return n(w)},handleMetaTagClick:oe,handleSelectedTagClick:ne})}var ge=A(Ie,2);{let ce=P(()=>n(k).has(at.BIN));Ds(ge,{get metaTags(){return n(se)},get hideTagMenu(){return n(ce)},get tags(){return n(ye)},handleMetaTagClick:J,handleTagClick:R})}g(ue,G)};O(de,ue=>{n(me)?ue(Ne):ue(Fe,!1)})}g(t,le),Ce()}ht(["click"]);var wf=S('<button class="a p-tddkdb"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function yf(t,e){be(e,!0);let a=Oe(e,"ref",15);var r=wf();r.__click=function(...i){e.onClick?.apply(this,i)};var o=C(r);ve(o,()=>({"--rotate":"-90deg"})),pe(o.lastChild,{name:"menu"});var s=A(o,2);mt(s,{children:(i,l)=>{var u=Ke();De(()=>ut(u,e.title)),g(i,u)}}),$e(r,i=>a(i),()=>a()),g(t,r),Ce()}ht(["click"]);const Jo=t=>{try{new URL(t)}catch{return!1}return!0};var bf=S('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Cf=S('<form class="a p-y9ylet"><!></form>');function Sf(t,e){be(e,!0);const{addTag:a}=Ot(),{getSelectedTags:r}=Vn(),{getSelectedNotes:o}=da(),{getFiltredNotes:s}=Ia();let i=D(!1),l=D(!1),u,c=!1,d=D(null),v=D(""),h=e.nextFocusRef;Ae(()=>(n(d)&&n(d).focus(),()=>{u&&clearTimeout(u)}));const p=()=>{u=setTimeout(()=>{f(l,!0)},250)},_=()=>{f(i,!0)},x=async()=>{if(r().has(n(v).trim())){_();return}if(n(v).trim()!=="")try{p();const w=new Set(o()),k=w.size?[...w]:s().map(Z=>Z.id),{cancel:I}=await a(n(v).trim(),k);et("Tag added",{cancel:{nextFocusRef:h,onCancel:async()=>{await I(),setTimeout(()=>{const{prev:Z}=bt(h);Z?.focus()},16)}}}),c=!0}finally{f(i,!0)}},m=()=>{e.onClosed?.(c)},b=M=>{M.preventDefault(),x()};Dr(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:m,children:(M,w)=>{var k=Cf(),I=C(k);{var Z=W=>{Ra(W,{})},H=W=>{var R=bf(),J=A(E(R),2);Sr(J,{placeholder:"Enter new tag name",get ref(){return n(d)},set ref(z){f(d,z,!0)},get value(){return n(v)},set value(z){f(v,z,!0)}});var ne=A(J,2),oe=C(ne);Rt(oe,{size:"small",onClick:_,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(z,ye)=>{var me=Ke("Cancel");g(z,me)},$$slots:{default:!0}});var U=A(oe,2);Rt(U,{size:"small",onClick:x,fullWidth:!0,withoutMinWidth:!0,children:(z,ye)=>{var me=Ke("OK");g(z,me)},$$slots:{default:!0}}),g(W,R)};O(I,W=>{n(l)?W(Z):W(H,!1)})}ln("submit",k,b),g(M,k)},$$slots:{default:!0}}),Ce()}var kf=S('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),xf=S('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),Tf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ef=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),Pf=S("<div><!></div>"),Nf=S('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),Af=S('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!> <!> <!></div> <!></div>');function fl(t,e){be(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=Ot(),{getSelectedTags:s}=Vn();let i=D(null),l=D(""),u=D(null);const c=P(a);let d=Oe(e,"shownTagInput",15);const v=()=>n(c)?e.mode==="exit"?Xo(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let p=P(()=>{const L=s(),ee=new Set(Xo(new Set,new Set(e.selectedTags.length>0?e.selectedTags:L),o()()||[]));return v().filter(le=>e.selectedTags.some(de=>le===de)?!1:n(l)===""||le.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((le,de)=>L.has(le)&&L.has(de)?le.localeCompare(de):L.has(le)?-1:L.has(de)?1:ee.has(le)&&ee.has(de)?le.localeCompare(de):ee.has(le)?-1:ee.has(de)?1:0)});const _=L=>{if(!e.selectedTags.includes(L)){if(e.mode!=="exit"||n(p).includes(L)){e.onChangeTags([...e.selectedTags,L]),f(l,"");return}n(i)?.focus()}},x=L=>{const ee=e.selectedTags.filter(se=>se!==L);e.onRejectedTag&&e.onRejectedTag(L),ee.length===0?e.onChangeTags([]):e.onChangeTags(ee)},m=L=>{L.preventDefault(),n(l)!==""?_(n(l)):d(!1)};Ye(()=>{n(i)&&d()&&n(i).focus(),d()||f(l,"")});const b=L=>{L.preventDefault()},M=L=>{L.preventDefault(),L.stopPropagation(),L.stopImmediatePropagation()};var w=Af(),k=C(w),I=C(k);Bn(I,17,()=>e.selectedTags,L=>L+"-tags_selected",(L,ee)=>{va(L,{onPointerDown:b,onTouchStart:M,onClick:()=>{x(n(ee))},type:"button",style:"selected",children:(se,le)=>{var de=Ke();De(()=>ut(de,n(ee))),g(se,de)},$$slots:{default:!0}})});var Z=A(I,2);{var H=L=>{var ee=we(),se=E(ee);Bn(se,17,()=>n(p).filter(le=>le.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),le=>le+"-tags_suggested",(le,de)=>{va(le,{onPointerDown:b,onTouchStart:M,onClick:()=>{_(n(de))},children:(Ne,Fe)=>{var ue=Ke();De(()=>ut(ue,n(de))),g(Ne,ue)},$$slots:{default:!0}})}),g(L,ee)};O(Z,L=>{d()&&L(H)})}var W=A(Z,2);{var R=L=>{va(L,{onPointerDown:b,onTouchStart:M,onClick:()=>{_(n(l)),f(l,"")},children:(ee,se)=>{var le=Ke();De(()=>ut(le,n(l))),g(ee,le)},$$slots:{default:!0}})};O(W,L=>{n(l)!==""&&(e.mode!=="exit"||n(p).find(ee=>ee.toLowerCase()===n(l).toLowerCase()))&&L(R)})}var J=A(W,2);{var ne=L=>{va(L,{mode:"empty",onPointerDown:b,onTouchStart:M,onClick:()=>{d(!0)},children:(ee,se)=>{var le=kf(),de=C(le);ve(de,()=>({"--size":"12px"})),pe(de.lastChild,{name:"plus"});var Ne=A(de,2);mt(Ne,{children:(Fe,ue)=>{var G=Ke("add tag");g(Fe,G)}}),g(ee,le)},$$slots:{default:!0}})};O(J,L=>{d()||L(ne)})}var oe=A(J,2);{var U=L=>{va(L,{mode:"empty",onPointerDown:b,onTouchStart:M,get onClick(){return e.onUsePreviousTags},children:(ee,se)=>{var le=xf(),de=C(le);ve(de,()=>({"--size":"12px"})),pe(de.lastChild,{name:"back"});var Ne=A(de,2);mt(Ne,{children:(Fe,ue)=>{var G=Ke("use previous tags");g(Fe,G)}}),g(ee,le)},$$slots:{default:!0}})};O(oe,L=>{e.previousTagsEnabled&&e.onUsePreviousTags&&L(U)})}var z=A(oe,2);{var ye=L=>{va(L,{mode:"empty",onPointerDown:b,onTouchStart:M,get onClick(){return e.onGenTags},get disabled(){return e.generatingTags},children:(ee,se)=>{var le=Pf(),de=C(le);{var Ne=ue=>{var G=Tf(),ie=E(G);ve(ie,()=>({"--size":"12px"})),Ra(ie.lastChild,{}),g(ue,G)},Fe=ue=>{var G=Ef(),ie=E(G);ve(ie,()=>({"--size":"12px","--rotate":"180deg"})),pe(ie.lastChild,{name:"stars"});var Te=A(ie,2);mt(Te,{children:(Ee,Ie)=>{var He=Ke("gen tags");g(Ee,He)}}),g(ue,G)};O(de,ue=>{e.generatingTags?ue(Ne):ue(Fe,!1)})}g(ee,le)},$$slots:{default:!0}})};O(z,L=>{e.genTagsEnabled&&e.onGenTags&&L(ye)})}var me=A(k,2);{var K=L=>{var ee=Nf(),se=C(ee),le=C(se);Sr(le,{placeholder:"tag",get ref(){return n(i)},set ref(Ne){f(i,Ne,!0)},get value(){return n(l)},set value(Ne){f(l,Ne,!0)}});var de=A(se,2);de.__pointerdown=b,de.__touchstart=M,de.__click=()=>{n(i)?.blur(),n(l)!==""&&_(n(l)),d(!1),f(l,"")},ln("submit",ee,m),g(L,ee)};O(me,L=>{d()&&L(K)})}$e(w,L=>f(u,L),()=>n(u)),g(t,w),Ce()}ht(["pointerdown","touchstart","click"]);var Mf=S('<div class="c p-y9ylet"><!> <!></div>'),Df=S('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),If=S('<form class="a p-y9ylet"><!></form>');function Rf(t,e){be(e,!0);const{changeTags:a,getNoteById:r}=Ot(),{getSelectedTags:o}=Vn(),{getSelectedNotes:s}=da(),{getFiltredNotes:i}=Ia();let l=D(!1),u=D(!1),c,d=!1,v=D(!1),h=e.nextFocusRef,_=(()=>{const H=[...o()],W=s();if(W.size===0)return H;const R=Array.from(W);let J=new Set(r(R[0])?.data.tags||[]);for(let ne=1;ne<R.length;ne++){const oe=new Set(r(R[ne])?.data.tags||[]),U=new Set([]);oe.forEach(z=>{J.has(z)&&U.add(z)}),J=U}return Array.from(J)})(),x=D(ft(_));Ae(()=>()=>{c&&clearTimeout(c)});const m=()=>{c=setTimeout(()=>{f(u,!0)},250)},b=()=>{f(l,!0)},M=async()=>{const H=_,W=new Set(s()),R=W.size?[...W]:i().map(J=>J.id);try{m();const{cancel:J}=await a([...H],n(x),R);et("Tags changed",{cancel:{nextFocusRef:h,onCancel:async()=>{await J(),setTimeout(()=>{const{prev:ne}=bt(h);ne?.focus()},16)}}}),d=!0}finally{f(l,!0)}},w=H=>{H.key==="Escape"&&n(v)&&(f(v,!1),H.preventDefault(),H.stopPropagation())};Ae(()=>(document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)));const k=()=>{e.onClosed?.(d)},I=H=>{f(x,H,!0)},Z=H=>{H.preventDefault(),M()};Dr(t,{get blocked(){return n(u)},get startClose(){return n(l)},onClosed:k,children:(H,W)=>{var R=If(),J=C(R);{var ne=U=>{Ra(U,{})},oe=U=>{var z=Df(),ye=A(E(z),2);fl(ye,{get selectedTags(){return n(x)},onChangeTags:I,get shownTagInput(){return n(v)},set shownTagInput(L){f(v,L,!0)}});var me=A(ye,2);{var K=L=>{var ee=Mf(),se=C(ee);Rt(se,{size:"small",onClick:b,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(de,Ne)=>{var Fe=Ke("Cancel");g(de,Fe)},$$slots:{default:!0}});var le=A(se,2);Rt(le,{size:"small",onClick:M,fullWidth:!0,withoutMinWidth:!0,children:(de,Ne)=>{var Fe=Ke("OK");g(de,Fe)},$$slots:{default:!0}}),g(L,ee)};O(me,L=>{n(v)||L(K)})}g(U,z)};O(J,U=>{n(u)?U(ne):U(oe,!1)})}ln("submit",R,Z),g(H,R)},$$slots:{default:!0}}),Ce()}var Lf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),Ff=S('<li class="p-66dk2x"><!></li>'),Of=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy',1),zf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy links',1),Bf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),jf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share links',1),Hf=S('<li class="p-66dk2x"><!></li> <li class="p-66dk2x"><!></li>',1),Uf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),Wf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),Vf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),qf=S('<li class="p-66dk2x"><!></li>'),Kf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),Yf=S('<li class="p-66dk2x"><!></li>'),Gf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),Xf=S('<li class="p-66dk2x"><!></li> <li class="p-66dk2x"><!></li> <!> <li class="p-66dk2x"><!></li>',1),Jf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),Zf=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),Qf=S('<li class="p-66dk2x"><!></li> <li class="p-66dk2x"><!></li>',1),$f=S('<!> <!> <li class="p-66dk2x"><!></li> <li class="p-66dk2x"><!></li> <!> <!> <!>',1),ev=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),tv=S('<div class="a p-66dk2x"><!></div> <!> <!> <!>',1);function nv(t,e){be(e,!0);const{getSelectedTags:a,setSelectedTags:r,clearTags:o}=Vn(),{moveNotesToBin:s,moveNotesToArchive:i,moveNotesFromArchive:l,restoreNotesFromBin:u,deleteNotes:c}=Ot(),{getFiltredNotes:d}=Ia(),{getSelectedNotes:v,setSelectedNotes:h,clearNotes:p}=da();let _=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"}),x=P(a),m=D(!1),b=D(!1),M=D(!1),w=D(!1),k=D(null),I=D(null);const Z=()=>{n(m)||f(m,!0)},H=()=>{f(m,!1),f(b,!1)};Ye(()=>{!n(m)&&!n(M)&&!n(w)&&f(k,bt(n(I)).next,!0)}),Ae(()=>{const ge=ce=>{ce.key==="Escape"&&n(m)&&n(I)?.focus()};return window.addEventListener("keydown",ge),()=>{window.removeEventListener("keydown",ge)}});let W=()=>{};const R=()=>{f(b,!0),f(M,!0);let ge=n(I);W=()=>{f(M,!1),setTimeout(()=>{ge?.focus()},16)}};let J=()=>{};const ne=()=>{f(b,!0),f(w,!0);let ge=n(I);J=()=>{f(w,!1),setTimeout(()=>{ge?.focus()},16)}},oe=async()=>{const ge=Array.from(n(x)),ce=new Set(v()),Se=ce.size?[...ce]:d().map(Pe=>Pe.id),{cancel:te}=await s({noteIds:Se});o(),p(),et("Notes moved to bin",{cancel:{nextFocusRef:n(k),onCancel:async()=>{await te(),r(new Set(ge)),h(ce),setTimeout(()=>{const{prev:Pe}=bt(n(k));Pe?.focus()},16)}}}),f(b,!0)},U=async()=>{const ge=Array.from(n(x)),ce=new Set(v()),Se=ce.size?[...ce]:d().map(Pe=>Pe.id),{cancel:te}=await i({noteIds:Se});o(),p(),et("Notes moved to archive",{cancel:{nextFocusRef:n(k),onCancel:async()=>{await te(),r(new Set(ge)),h(ce),setTimeout(()=>{const{prev:Pe}=bt(n(k));Pe?.focus()},16)}}}),f(b,!0)},z=async()=>{const ge=Array.from(n(x)),ce=new Set(v()),Se=ce.size?[...ce]:d().map(Pe=>Pe.id),{cancel:te}=await l({noteIds:Se});o(),p(),et("Notes moved from archive",{cancel:{nextFocusRef:n(k),onCancel:async()=>{await te(),r(new Set(ge)),h(ce),setTimeout(()=>{const{prev:Pe}=bt(n(k));Pe?.focus()},16)}}}),f(b,!0)},ye=async()=>{const ge=Array.from(n(x)),ce=new Set(v()),Se=ce.size?[...ce]:d().map(Pe=>Pe.id),{cancel:te}=await u({noteIds:Se});o(),p(),et("Notes restored",{cancel:{nextFocusRef:n(k),onCancel:async()=>{await te(),r(new Set(ge)),h(ce),setTimeout(()=>{const{prev:Pe}=bt(n(k));Pe?.focus()},16)}}}),f(b,!0)},me=()=>{const ge=new Set(v()),ce=ge.size?[...ge]:d().map(Se=>Se.id);f(b,!0),Ta({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{f(b,!0),o(),p(),await c({noteIds:ce})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(I)?.focus()},16)}})},K=()=>{const ge=d(),ce=Array.from(v()),Se=[];for(const Pe of ge)Pe.data&&Pe.data?.link&&Jo(Pe.data?.link.url)&&(ce.includes(Pe.id)||ce.length===0)&&Se.push(Pe.data?.link.url);const te=()=>{for(const Pe of Se)if(!window.open(Pe,"_blank")){Ta({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(I)?.focus()},16)}});break}};Se.length<=10?te():Ta({title:`Are you sure to open ${Se.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{te()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(I)?.focus()},16)}}),f(b,!0)},L=()=>{const ge=d(),ce=Array.from(v());let Se="";for(const te of ge)te.data&&te.data?.link&&Jo(te.data?.link.url)&&(ce.includes(te.id)||ce.length===0)&&(Se+=te.data?.link.url+`
`);navigator.clipboard.writeText(Se),et("Copied links"),f(b,!0)},ee=()=>{const ge=d(),ce=Array.from(v());let Se="";for(const te of ge)te.data&&(ce.includes(te.id)||ce.length===0)&&(te.data?.link?.url&&(Se+=te.data?.link.url+`
`),te.data?.text&&(Se+=`
`+te.data?.text+`
`),Se+=`---------------------

`);navigator.clipboard.writeText(Se),et("Copied"),f(b,!0)},se=()=>{const ge=d(),ce=Array.from(v());let Se="";for(const te of ge)te.data&&(ce.includes(te.id)||ce.length===0)&&te.data?.link?.url&&(Se+=te.data?.link.url+`

`);navigator.share({text:Se}).catch(te=>{console.error("Error sharing",te)}),f(b,!0)},le=()=>{const ge=d(),ce=Array.from(v());let Se="";for(const te of ge)te.data&&(ce.includes(te.id)||ce.length===0)&&(te.data?.link?.url&&(Se+=te.data?.link.url+`
`),te.data?.text&&(Se+=`
`+te.data?.text+`
`),Se+=`---------------------

`);navigator.share({text:Se}).catch(te=>{console.error("Error sharing",te)}),f(b,!0)};let de=fn||xn;var Ne=tv(),Fe=E(Ne),ue=C(Fe);yf(ue,{title:"notes menu",onClick:Z,get ref(){return n(I)},set ref(ge){f(I,ge,!0)}});var G=A(Fe,2);{var ie=ge=>{var ce=ev(),Se=E(ce);ve(Se,()=>({"--right":"0","--top":"44px"})),sr(Se.lastChild,{get startClose(){return n(b)},onClosed:H,get isMobile(){return de},children:(te,Pe)=>{var fe=$f(),_e=E(fe);{var y=ae=>{var he=Ff(),Re=C(he);Ue(Re,{onClick:K,get dialogMode(){return de},children:(ke,Me)=>{var Ve=Lf(),Le=E(Ve);ve(Le,()=>({"--size":"20px","--scale":"0.9"})),pe(Le.lastChild,{name:"open"}),g(ke,Ve)},$$slots:{default:!0}}),g(ae,he)};O(_e,ae=>{fn||xn||ae(y)})}var T=A(_e,2);O(T,ae=>{});var N=A(T,2),B=C(N);Ue(B,{onClick:ee,get dialogMode(){return de},children:(ae,he)=>{var Re=Of(),ke=E(Re);ve(ke,()=>({"--size":"20px"})),pe(ke.lastChild,{name:"copy"}),g(ae,Re)},$$slots:{default:!0}});var F=A(N,2),V=C(F);Ue(V,{onClick:L,get dialogMode(){return de},children:(ae,he)=>{var Re=zf(),ke=E(Re);ve(ke,()=>({"--size":"20px"})),pe(ke.lastChild,{name:""}),g(ae,Re)},$$slots:{default:!0}});var q=A(F,2);{var X=ae=>{var he=Hf(),Re=E(he),ke=C(Re);Ue(ke,{onClick:le,get dialogMode(){return de},children:(Le,ze)=>{var Be=Bf(),je=E(Be);ve(je,()=>({"--size":"20px"})),pe(je.lastChild,{name:"share"}),g(Le,Be)},$$slots:{default:!0}});var Me=A(Re,2),Ve=C(Me);Ue(Ve,{onClick:se,get dialogMode(){return de},children:(Le,ze)=>{var Be=jf(),je=E(Be);ve(je,()=>({"--size":"20px"})),pe(je.lastChild,{name:""}),g(Le,Be)},$$slots:{default:!0}}),g(ae,he)};O(q,ae=>{_&&ae(X)})}var $=A(q,2);{var Q=ae=>{var he=Xf(),Re=E(he),ke=C(Re);Ue(ke,{onClick:R,get dialogMode(){return de},children:(tt,ot)=>{var lt=Uf(),pt=E(lt);ve(pt,()=>({"--size":"20px"})),pe(pt.lastChild,{name:"add"}),g(tt,lt)},$$slots:{default:!0}});var Me=A(Re,2),Ve=C(Me);Ue(Ve,{onClick:ne,get dialogMode(){return de},children:(tt,ot)=>{var lt=Wf(),pt=E(lt);ve(pt,()=>({"--size":"20px"})),pe(pt.lastChild,{name:""}),g(tt,lt)},$$slots:{default:!0}});var Le=A(Me,2);{var ze=tt=>{var ot=qf(),lt=C(ot);Ue(lt,{onClick:U,get dialogMode(){return de},children:(pt,En)=>{var Tt=Vf(),At=E(Tt);ve(At,()=>({"--size":"20px","--scale":"0.9"})),pe(At.lastChild,{name:"archive"}),g(pt,Tt)},$$slots:{default:!0}}),g(tt,ot)},Be=tt=>{var ot=Yf(),lt=C(ot);Ue(lt,{onClick:z,get dialogMode(){return de},children:(pt,En)=>{var Tt=Kf(),At=E(Tt);ve(At,()=>({"--size":"20px","--scale":"0.9"})),pe(At.lastChild,{name:"archive-cancel"}),g(pt,Tt)},$$slots:{default:!0}}),g(tt,ot)};O(Le,tt=>{e.mode==="notes"?tt(ze):tt(Be,!1)})}var je=A(Le,2),_t=C(je);Ue(_t,{onClick:oe,get dialogMode(){return de},children:(tt,ot)=>{var lt=Gf(),pt=E(lt);ve(pt,()=>({"--size":"20px"})),pe(pt.lastChild,{name:"bin"}),g(tt,lt)},$$slots:{default:!0}}),g(ae,he)};O($,ae=>{(e.mode==="notes"||e.mode==="archive")&&ae(Q)})}var Y=A($,2);{var re=ae=>{var he=Qf(),Re=E(he),ke=C(Re);Ue(ke,{onClick:ye,get dialogMode(){return de},children:(Le,ze)=>{var Be=Jf(),je=E(Be);ve(je,()=>({"--size":"20px"})),pe(je.lastChild,{name:"bin-cancel"}),g(Le,Be)},$$slots:{default:!0}});var Me=A(Re,2),Ve=C(Me);Ue(Ve,{onClick:me,get dialogMode(){return de},dangerous:!0,children:(Le,ze)=>{var Be=Zf(),je=E(Be);ve(je,()=>({"--size":"20px"})),pe(je.lastChild,{name:"bin"}),g(Le,Be)},$$slots:{default:!0}}),g(ae,he)};O(Y,ae=>{e.mode==="bin"&&ae(re)})}g(te,fe)},$$slots:{default:!0}}),g(ge,ce)};O(G,ge=>{n(m)&&ge(ie)})}var Te=A(G,2);{var Ee=ge=>{Sf(ge,{get nextFocusRef(){return n(k)},onClosed:ce=>{W(ce)}})};O(Te,ge=>{n(M)&&ge(Ee)})}var Ie=A(Te,2);{var He=ge=>{Rf(ge,{get nextFocusRef(){return n(k)},onClosed:ce=>{J(ce)}})};O(Ie,ge=>{n(w)&&ge(He)})}g(t,Ne),Ce()}var av=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),rv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy',1),ov=S('<li class="p-1ljon4s"><!></li>'),sv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),iv=S('<li class="p-1ljon4s"><!></li>'),lv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),cv=S('<li class="p-1ljon4s"><!></li>'),dv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share link',1),uv=S('<li class="p-1ljon4s"><!></li>'),fv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select',1),vv=S('<li class="p-1ljon4s"><!></li>'),gv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Duplicates',1),hv=S('<li class="p-1ljon4s"><!></li>'),pv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),mv=S('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),_v=S('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),wv=S('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),yv=S(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),bv=S('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Cv=S('<li class="p-1ljon4s"><!></li> <!> <!> <!> <!> <!> <!> <!>',1),Sv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function kv(t,e){be(e,!0);const{checkMobileSize:a}=fa(),{getMode:r,getSelectedNotes:o,changeMode:s,addNote:i}=da(),{clearDialogPages:l}=Ft(),{setFeedSearch:u}=$a(),{moveNoteToBin:c,moveNoteFromArchive:d,moveNoteToArchive:v,deleteNote:h,pinNote:p,restoreNoteFromBin:_,checkDuplicatesExist:x}=Ot();let m=Oe(e,"mode",3,"notes"),b=Oe(e,"shownMenu",15),M=D(!1),w=D(!1),k=D(!1),I=D(!1),Z=D(!1),H=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"});const W=async()=>{c(e.noteId),et("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{_(e.noteId)}}})},R=async()=>{v(e.noteId),et("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{d(e.noteId)}}})},J=async()=>{d(e.noteId),et("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{v(e.noteId)}}})},ne=()=>{_(e.noteId),et("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{c(e.noteId)}}})},oe=()=>{e.noteData.pinned?(p(e.noteId,!1),et("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{p(e.noteId,!0)}}})):(p(e.noteId,!0),et("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{p(e.noteId,!1)}}})),f(M,!0)},U=()=>{n(w)?(f(w,!1),W()):n(Z)?(f(Z,!1),ne()):n(k)?(f(k,!1),R()):n(I)&&(f(I,!1),J()),b(!1),f(M,!1)},z=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),et("Copied link"),f(M,!0))},ye=()=>{let G="";e.noteData.link?.url&&(G+=e.noteData.link.url+`
`),e.noteData.text&&(G+=`
`+e.noteData.text+`
`),navigator.clipboard.writeText(G),et("Copied"),f(M,!0)},me=()=>{f(M,!0),Ta({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await h(e.noteId)},onCancel:async()=>{}})},K=()=>{if(navigator.share){const G={};let ie="";e.noteData.link?.url&&(ie+=e.noteData.link.url+`
`),e.noteData.text&&(ie+=`
`+e.noteData.text+`
`),G.text=ie,navigator.share(G).catch(Te=>{console.error("Error sharing",Te)})}f(M,!0)},L=()=>{if(navigator.share){const G={};e.noteData.link?.url&&(G.url=e.noteData.link.url),e.noteData.link?.title&&(G.title=e.noteData.link.title),navigator.share(G).catch(ie=>{console.error("Error sharing",ie)})}f(M,!0)},ee=()=>{f(M,!0),e.noteData.link?.url&&(l(),u(e.noteData.link?.url))};let se=fn||xn,le=P(a),de=P(()=>r()==="multiple"&&o().has(e.noteId));var Ne=we(),Fe=E(Ne);{var ue=G=>{var ie=Sv(),Te=E(ie);ve(Te,()=>({"--bottom":e.showMenuUp?"calc(100%)":"auto","--top":e.showMenuUp?"auto":"calc(100%)","--right":"10px"})),sr(Te.lastChild,{get startClose(){return n(M)},onClosed:U,get isMobile(){return se},children:(Ee,Ie)=>{var He=Cv(),ge=E(He),ce=C(ge);Ue(ce,{onClick:oe,get dialogMode(){return se},children:(Y,re)=>{var ae=av(),he=E(ae);{let ke=P(()=>e.noteData.pinned?"pin-cancel":"pin");ve(he,()=>({"--size":"20px"})),pe(he.lastChild,{get name(){return n(ke)}})}var Re=A(he);De(()=>ut(Re,` ${e.noteData.pinned?"Unpin":"Pin"}`)),g(Y,ae)},$$slots:{default:!0}});var Se=A(ge,2);{var te=Y=>{var re=ov(),ae=C(re);Ue(ae,{onClick:ye,get dialogMode(){return se},children:(he,Re)=>{var ke=rv(),Me=E(ke);ve(Me,()=>({"--size":"20px"})),pe(Me.lastChild,{name:"copy"}),g(he,ke)},$$slots:{default:!0}}),g(Y,re)};O(Se,Y=>{e.noteData.text&&Y(te)})}var Pe=A(Se,2);{var fe=Y=>{var re=iv(),ae=C(re);Ue(ae,{onClick:z,get dialogMode(){return se},children:(he,Re)=>{var ke=sv(),Me=E(ke);ve(Me,()=>({"--size":"20px"})),pe(Me.lastChild,{name:""}),g(he,ke)},$$slots:{default:!0}}),g(Y,re)};O(Pe,Y=>{n(le)&&e.noteData.link?.url&&Y(fe)})}var _e=A(Pe,2);{var y=Y=>{var re=cv(),ae=C(re);Ue(ae,{onClick:K,get dialogMode(){return se},children:(he,Re)=>{var ke=lv(),Me=E(ke);ve(Me,()=>({"--size":"20px"})),pe(Me.lastChild,{name:"share"}),g(he,ke)},$$slots:{default:!0}}),g(Y,re)};O(_e,Y=>{H&&e.noteData.text&&Y(y)})}var T=A(_e,2);{var N=Y=>{var re=uv(),ae=C(re);Ue(ae,{onClick:L,get dialogMode(){return se},children:(he,Re)=>{var ke=dv(),Me=E(ke);{let Ve=P(()=>e.noteData.text?"":"share");ve(Me,()=>({"--size":"20px"})),pe(Me.lastChild,{get name(){return n(Ve)}})}g(he,ke)},$$slots:{default:!0}}),g(Y,re)};O(T,Y=>{H&&e.noteData.link?.url&&Y(N)})}var B=A(T,2);{var F=Y=>{var re=vv(),ae=C(re);Ue(ae,{onClick:()=>{f(M,!0),r()!=="multiple"&&s("multiple"),i(e.noteId)},get dialogMode(){return se},children:(he,Re)=>{var ke=fv(),Me=E(ke);ve(Me,()=>({"--size":"20px"})),pe(Me.lastChild,{name:"check"}),g(he,ke)},$$slots:{default:!0}}),g(Y,re)};O(B,Y=>{n(de)||Y(F)})}var V=A(B,2);{var q=Y=>{var re=hv(),ae=C(re);Ue(ae,{onClick:ee,get dialogMode(){return se},children:(he,Re)=>{var ke=gv(),Me=E(ke);ve(Me,()=>({"--size":"20px"})),pe(Me.lastChild,{name:""}),g(he,ke)},$$slots:{default:!0}}),g(Y,re)};O(V,Y=>{e.noteData.link?.url&&x(e.noteId)&&Y(q)})}var X=A(V,2);{var $=Y=>{var re=_v(),ae=E(re),he=C(ae);Ue(he,{onClick:()=>{f(k,m()==="notes"),f(I,m()==="archive"),f(M,!0)},get dialogMode(){return se},children:(Me,Ve)=>{var Le=pv(),ze=E(Le);{let je=P(()=>m()==="archive"?"archive-cancel":"archive");ve(ze,()=>({"--size":"20px","--scale":"0.9"})),pe(ze.lastChild,{get name(){return n(je)}})}var Be=A(ze);De(()=>ut(Be,` ${m()==="archive"?"Unarchive":"Archive"}`)),g(Me,Le)},$$slots:{default:!0}});var Re=A(ae,2),ke=C(Re);Ue(ke,{onClick:()=>{f(w,!0),f(M,!0)},get dialogMode(){return se},children:(Me,Ve)=>{var Le=mv(),ze=E(Le),Be=C(ze);ve(Be,()=>({"--size":"20px"})),pe(Be.lastChild,{name:"bin"}),g(Me,Le)},$$slots:{default:!0}}),g(Y,re)},Q=Y=>{var re=bv(),ae=E(re),he=C(ae);Ue(he,{onClick:()=>{f(Z,!0),f(M,!0)},get dialogMode(){return se},children:(Me,Ve)=>{var Le=wv(),ze=E(Le),Be=C(ze);ve(Be,()=>({"--size":"20px"})),pe(Be.lastChild,{name:"bin-cancel"}),g(Me,Le)},$$slots:{default:!0}});var Re=A(ae,2),ke=C(Re);Ue(ke,{onClick:me,get dialogMode(){return se},dangerous:!0,children:(Me,Ve)=>{var Le=yv(),ze=E(Le),Be=C(ze);ve(Be,()=>({"--size":"20px"})),pe(Be.lastChild,{name:"bin"}),g(Me,Le)},$$slots:{default:!0}}),g(Y,re)};O(X,Y=>{m()==="notes"||m()==="archive"?Y($):Y(Q,!1)})}g(Ee,He)},$$slots:{default:!0}}),g(G,ie)};O(Fe,G=>{b()&&G(ue)})}g(t,Ne),Ce()}var xv=S('<div class="a p-1hg9kpf"></div>'),Tv=S('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function vl(t,e){be(e,!0);const a=c=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(c).host}.ico`}catch{return""}};let r=D(!1),o=P(()=>a(e.url));var s=we(),i=E(s);{var l=c=>{var d=xv();g(c,d)},u=c=>{var d=Tv();De(v=>dt(d,"src",v),[()=>a(e.url)]),ln("error",d,()=>{f(r,!0)}),g(c,d)};O(i,c=>{n(r)||!n(o)?c(l):c(u,!1)})}g(t,s),Ce()}var Ev=S('<a target="_blank" rel="noopener noreferrer" class="a p-1mepfnj"><!> <!></a>'),Pv=S('<button class="a p-1mepfnj"><!> <!></button>');function In(t,e){be(e,!0);let a=Oe(e,"tabindex",3,0),r=Oe(e,"onclick",3,()=>{}),o=Oe(e,"ref",15);var s=we(),i=E(s);{var l=c=>{var d=Ev();d.__click=function(...p){r()?.apply(this,p)};var v=C(d);We(v,()=>e.children);var h=A(v,2);mt(h,{children:(p,_)=>{var x=Ke();De(()=>ut(x,e.title)),g(p,x)}}),$e(d,p=>o(p),()=>o()),De(()=>{dt(d,"href",e.href),dt(d,"tabindex",a())}),g(c,d)},u=c=>{var d=we(),v=E(d);{var h=p=>{var _=Pv();_.__click=function(...b){r()?.apply(this,b)};var x=C(_);We(x,()=>e.children);var m=A(x,2);mt(m,{children:(b,M)=>{var w=Ke();De(()=>ut(w,e.title)),g(b,w)}}),$e(_,b=>o(b),()=>o()),De(()=>dt(_,"tabindex",a())),g(p,_)};O(v,p=>{e.elem==="button"&&p(h)},!0)}g(c,d)};O(i,c=>{e.elem==="a"?c(l):c(u,!1)})}g(t,s),Ce()}ht(["click"]);let ho=D(!1),po=D(!1),bn=D(void 0),Jr={};const Nv=()=>{fn||xn||f(po,!0)},Av=()=>{f(po,!1)},Zo=()=>{fn||xn||f(ho,!0)},Mv=()=>{f(ho,!1)},Dv=()=>n(po),gl=()=>n(ho),vn=t=>{fn||xn||f(bn,t,!0)},qr=()=>n(bn),Fs=()=>{const t=Jr[n(bn)||""]?.next;if(t)return f(bn,t,!0),t},Os=()=>{const t=Jr[n(bn)||""]?.prev;if(t)return f(bn,t,!0),t};var Iv=S('<div class="a p-rxwzp0"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Rv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Lv=S('<div class="b p-rxwzp0"><!></div>'),Fv=S('<a class="c p-rxwzp0" target="_blank" rel="noopener noreferrer"> </a>'),Ov=S('<a class="c p-rxwzp0" target="_blank" rel="noopener noreferrer"> </a>'),zv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Bv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),jv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Hv=S("<!> <!> <!>",1),Uv=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Wv=S("<li><!> <!> <!> <div><!> <!></div> <!></li>");function Vv(t,e){be(e,!0);const{pushDialogPage:a}=Ft(),{getFaviconEnabled:r,getRecordMode:o}=Na(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:u}=da(),{getSearchParams:c,getHref:d}=Ht();let v=Oe(e,"mode",3,"notes"),h="unknown";Ye(()=>(Jr[e.noteId]={next:e.nextNoteId,prev:e.prevNoteId},()=>{delete Jr[e.noteId]}));let p=D(!1),_=D(!1),x=P(r),m=P(o),b=D(null),M=D(null),w=D(null);const{checkMobileSize:k}=fa(),I=()=>{f(p,!0)},Z=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),et("copied"))};Ye(()=>{n(bn)===e.noteId?f(_,!0):f(_,!1)});const H=G=>{G.preventDefault(),a(`${xe.Note}?id=${encodeURIComponent(e.noteId)}`)},W=P(()=>e.noteData.link?.url||"");let R=P(()=>n(p)&&n(b)?bt(n(b)).next:null);const J=G=>{G?l(e.noteId):u(e.noteId)},ne=()=>{const G=new URLSearchParams(c());return G.set(en,`${xe.Note}?id=${encodeURIComponent(e.noteId)}`),d(G)};let oe=P(()=>s()==="multiple"&&i().has(e.noteId));Ae(()=>{const G=ie=>{if(h="keyboard",n(bn)===e.noteId&&(ie.key==="Enter"&&n(po)&&(n(m)==="note"?(ie.preventDefault(),setTimeout(()=>{a(`${xe.Note}?id=${encodeURIComponent(e.noteId)}`)},0)):n(m)==="bookmark"&&n(W)&&window.open(n(W),"_blank","noopener")),ie.key==="Tab"&&n(ho)&&(Mv(),n(w)))){const Te=bt(n(w));ie.shiftKey?Te.prev?.focus():Te?.next?.focus()}};return document.addEventListener("keydown",G),()=>{document.removeEventListener("keydown",G)}});var U=Wv();U.__focusin=()=>{h==="keyboard"&&f(bn,e.noteId,!0)};var z=C(U);{var ye=G=>{var ie=Iv(),Te=C(ie);ve(Te,()=>({"--size":"18px"})),pe(Te.lastChild,{name:"pin"}),g(G,ie)};O(z,G=>{e.noteData.pinned&&G(ye)})}var me=A(z,2);{var K=G=>{var ie=Lv(),Te=C(ie);{var Ee=He=>{vl(He,{get url(){return n(W)}})},Ie=He=>{var ge=Rv(),ce=E(ge);ve(ce,()=>({"--size":"16px"})),pe(ce.lastChild,{name:"note"}),g(He,ge)};O(Te,He=>{n(W)?He(Ee):He(Ie,!1)})}g(G,ie)};O(me,G=>{n(x)&&G(K)})}var L=A(me,2);{var ee=G=>{var ie=Fv();ie.__keydown=Ee=>{Ee.key==="Enter"&&(h="keyboard")},ie.__mousedown=()=>{h="mouse"},ie.__click=Ee=>{console.log(h),h==="mouse"&&vn(void 0),Ee.preventDefault(),s()==="multiple"?J(!n(oe)):H(Ee)};var Te=C(ie);$e(ie,Ee=>f(w,Ee),()=>n(w)),De((Ee,Ie)=>{dt(ie,"tabindex",e.focusHidden?-1:0),dt(ie,"href",Ee),ut(Te,Ie)},[ne,()=>e.noteData?.text.trim()?e.noteData?.text.split(`
`)[0]:e.noteData?.link?.title||"unknown"]),ln("focus",ie,()=>{}),g(G,ie)},se=G=>{var ie=Ov();ie.__keydown=Ee=>{Ee.key==="Enter"&&(h="keyboard")},ie.__mousedown=()=>{h="mouse"},ie.__click=Ee=>{s()==="multiple"&&(Ee.preventDefault(),J(!n(oe)))};var Te=C(ie);$e(ie,Ee=>f(w,Ee),()=>n(w)),De(Ee=>{dt(ie,"tabindex",e.focusHidden?-1:0),dt(ie,"href",n(W)),ut(Te,Ee)},[()=>e.noteData?.text.trim()?e.noteData?.text.split(`
`)[0]:e.noteData?.link?.title||"unknown"]),ln("focus",ie,()=>{}),g(G,ie)};O(L,G=>{n(m)==="note"||!n(W)?G(ee):G(se,!1)})}var le=A(L,2),de=C(le);{var Ne=G=>{var ie=Hv(),Te=E(ie);{var Ee=Se=>{{let te=P(ne),Pe=P(()=>e.focusHidden?-1:0);In(Se,{title:"edit",elem:"a",get href(){return n(te)},get tabindex(){return n(Pe)},onclick:H,children:(fe,_e)=>{var y=zv(),T=E(y);ve(T,()=>({"--size":"18px"})),pe(T.lastChild,{name:"pen"}),g(fe,y)},$$slots:{default:!0}})}};O(Te,Se=>{(n(m)==="bookmark"||s()==="multiple")&&Se(Ee)})}var Ie=A(Te,2);{var He=Se=>{{let te=P(()=>e.focusHidden?-1:0),Pe=P(()=>e.noteData.link?.title||"unknown");In(Se,{elem:"a",get href(){return n(W)},get tabindex(){return n(te)},get title(){return n(Pe)},children:(fe,_e)=>{var y=Bv(),T=E(y);ve(T,()=>({"--size":"18px"})),pe(T.lastChild,{name:"open"}),g(fe,y)},$$slots:{default:!0}})}};O(Ie,Se=>{(n(m)==="note"||s()==="multiple")&&Se(He)})}var ge=A(Ie,2);{var ce=Se=>{{let te=P(()=>e.focusHidden?-1:0);In(Se,{elem:"button",onclick:Z,get tabindex(){return n(te)},title:"copy link",children:(Pe,fe)=>{var _e=jv(),y=E(_e);ve(y,()=>({"--size":"20px"})),pe(y.lastChild,{name:"copy"}),g(Pe,_e)},$$slots:{default:!0}})}};O(ge,Se=>{k()||Se(ce)})}g(G,ie)};O(de,G=>{n(W)&&G(Ne)})}var Fe=A(de,2);{let G=P(()=>e.focusHidden?-1:0);In(Fe,{title:"show menu",elem:"button",get tabindex(){return n(G)},onclick:I,get ref(){return n(b)},set ref(ie){f(b,ie,!0)},children:(ie,Te)=>{var Ee=Uv(),Ie=E(Ee);ve(Ie,()=>({"--size":"18px","--rotate":"90deg"})),pe(Ie.lastChild,{name:"menu"}),g(ie,Ee)},$$slots:{default:!0}})}var ue=A(le,2);kv(ue,{get nextFocusRef(){return n(R)},get mode(){return v()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(p)},set shownMenu(G){f(p,G,!0)}}),$e(U,G=>f(M,G),()=>n(M)),De(()=>{rt(U,1,it({d:!0,e:n(_),f:n(oe)||n(bn)===e.noteId}),"p-rxwzp0"),rt(le,1,it({g:!0,h:n(_)}),"p-rxwzp0")}),g(t,U),Ce()}ht(["focusin","keydown","mousedown","click"]);var qv=S('<div class="g e p-12ns0yc"><button class="d p-12ns0yc" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),Kv=S('<div class="g p-12ns0yc"><button class="d p-12ns0yc" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),Yv=S('<a class="i j p-12ns0yc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Gv=S('<div class="h p-12ns0yc"><!> <!></div>'),Xv=S('<!> <div class="q p-12ns0yc"><!></div>',1),Jv=S('<button class="u p-12ns0yc">All</button>'),Zv=S('<button class="u p-12ns0yc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>'),Qv=S('<div class="s p-12ns0yc"><div class="t p-12ns0yc"><!> <span> </span> <!></div> <button class="u v p-12ns0yc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),$v=S('<div class="a p-12ns0yc"><div class="b p-12ns0yc"><div class="c p-12ns0yc"><a class="d p-12ns0yc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-12ns0yc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-12ns0yc"><!></div> <div class="f p-12ns0yc"><!></div></div> <div class="k p-12ns0yc"><div class="l p-12ns0yc"><!></div> <div class="m p-12ns0yc"><div class="n p-12ns0yc"><div class="o p-12ns0yc"><!></div> <div class="p p-12ns0yc"><!></div></div> <div class="r p-12ns0yc"><!></div></div></div></div>');function eg(t,e){be(e,!0);const{getFeedSearch:a,setFeedSearch:r}=$a(),{getScrollContainer:o}=vo();let s=P(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:u,checkNotes:c}=Ot(),{replaceSearchParams:d}=Ht(),{createDialogPageHref:v,createHandleClickDialogPage:h,getDialogPages:p}=Ft(),{checkExistedDialog:_}=Zt(),{getMode:x,clearNotes:m,setSelectedNotes:b,getSelectedNotes:M,changeMode:w}=da(),{checkMobileSize:k}=fa(),{getFiltredNotes:I}=Ia(),{getSelectedMetaTags:Z}=fo(),{getViewMode:H}=Na();let W=P(Z),R=D(null);const J=P(l);let oe=P(()=>{const q=I()||[],X=M();return q.every($=>X.has($.id))});const U=()=>{Ta({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),d("")},onCancel:async()=>{}})};let z=P(()=>p().length===0);Ye(()=>{n(z)});const ye=()=>{p().length===0&&!_()&&n(R)?.focus()};Ae(()=>Cr({key:"k",meta:!0,action:ye})),Ae(()=>Cr({key:"k",ctrl:!0,action:ye})),Ae(()=>{}),Ye(()=>{const q=I()||[];jt(()=>{const X=M();b(new Set(q.filter($=>X.has($.id)).map($=>$.id)))})});let me=P(()=>n(W).has(at.ARCHIVED)?"archive":n(W).has(at.BIN)?"bin":"notes");Ae(()=>{n(R)&&n(R).addEventListener("keydown",q=>{q.key==="Tab"&&qr()&&q.preventDefault()})}),Ye(()=>{gl()&&setTimeout(()=>{n(R)?.focus(),n(R)?.setSelectionRange(n(R).value.length,n(R).value.length)},0)}),Ae(()=>{});var K=$v(),L=C(K),ee=C(L),se=C(ee),le=P(()=>h(xe.Settings));se.__click=function(...q){n(le)?.apply(this,q)};var de=C(se);ve(de,()=>({"--rotate":"30deg","--size":"20px"})),pe(de.lastChild,{name:"settings"});var Ne=A(se,2),Fe=P(()=>h(xe.Sync));Ne.__click=function(...q){n(Fe)?.apply(this,q)};var ue=C(Ne);ve(ue,()=>({"--size":"20px"})),pe(ue.lastChild,{name:"sync"});var G=A(ee,2),ie=C(G);cl(ie,{});var Te=A(G,2),Ee=C(Te);{var Ie=q=>{var X=we(),$=E(X);{var Q=Y=>{var re=we(),ae=E(re);{var he=ke=>{var Me=qv(),Ve=C(Me);Ve.__click=U;var Le=C(Ve);ve(Le,()=>({"--scale":"1.2","--size":"20px"})),pe(Le.lastChild,{name:"clear"});var ze=A(Le);mt(ze,{children:(Be,je)=>{var _t=Ke("Empty bin");g(Be,_t)}}),g(ke,Me)},Re=ke=>{var Me=Kv(),Ve=C(Me);Ve.__click=U;var Le=C(Ve);ve(Le,()=>({"--scale":"0.9","--size":"20px"})),pe(Le.lastChild,{name:"clear"}),g(ke,Me)};O(ae,ke=>{k()?ke(he):ke(Re,!1)})}g(Y,re)};O($,Y=>{n(J)&&Y(Q)})}g(q,X)},He=q=>{var X=we(),$=E(X);{var Q=Y=>{var re=Gv(),ae=C(re);{var he=ke=>{var Me=Yv();Me.__click=function(...ze){e.onOpenWindow?.apply(this,ze)};var Ve=C(Me);ve(Ve,()=>({"--scale":"0.7","--size":"26px"})),pe(Ve.lastChild,{name:"open-window"});var Le=A(Ve,2);mt(Le,{children:(ze,Be)=>{var je=Ke("open window");g(ze,je)}}),De(()=>dt(Me,"href",e.openWindowHref)),g(ke,Me)};O(ae,ke=>{e.onOpenWindow&&ke(he)})}var Re=A(ae,2);Ou(Re,{}),g(Y,re)};O($,Y=>{n(me)==="notes"&&Y(Q)},!0)}g(q,X)};O(Ee,q=>{n(me)==="bin"?q(Ie):q(He,!1)})}var ge=A(L,2),ce=C(ge),Se=C(ce);_f(Se,{});var te=A(ce,2),Pe=C(te),fe=C(Pe),_e=C(fe);{let q=P(a);jo(_e,{placeholder:"Search",onFocus:()=>{fn||xn||(Nv(),Zo(),n(R)?.setSelectionRange(n(R).value.length,n(R).value.length))},onBlur:()=>{Av()},get value(){return n(q)},onChange:X=>{vn(void 0),n(s)&&n(s).scrollTo({top:0}),r(X)},onEscape:()=>{vn(void 0)},get ref(){return n(R)},set ref(X){f(R,X,!0)}})}var y=A(fe,2),T=C(y);{var N=q=>{var X=Xv(),$=E(X);Nu($,{});var Q=A($,2),Y=C(Q);nv(Y,{get mode(){return n(me)}}),g(q,X)};O(T,q=>{(n(me)==="notes"&&c()||n(me)==="bin"&&l()||n(me)==="archive"&&u())&&q(N)})}var B=A(Pe,2),F=C(B);{var V=q=>{var X=we(),$=E(X);{var Q=Y=>{var re=Qv(),ae=C(re),he=C(ae);{var Re=je=>{var _t=Jv();_t.__click=tt=>{tt.preventDefault();const ot=I()||[];b(new Set(ot.map(lt=>lt.id)))},g(je,_t)};O(he,je=>{n(oe)||je(Re)})}var ke=A(he,2),Me=C(ke),Ve=A(ke,2);{var Le=je=>{var _t=Zv();_t.__click=ot=>{ot.preventDefault(),m()};var tt=C(_t);ve(tt,()=>({"--size":"16px"})),pe(tt.lastChild,{name:"close"}),g(je,_t)};O(Ve,je=>{M().size>0&&je(Le)})}var ze=A(ae,2);ze.__click=je=>{je.preventDefault(),w("single")};var Be=C(ze);ve(Be,()=>({"--size":"16px"})),pe(Be.lastChild,{name:"close"}),De(je=>ut(Me,`Selected ${je??""}`),[()=>M().size]),g(Y,re)};O($,Y=>{x()==="multiple"&&Y(Q)})}g(q,X)};O(F,q=>{(n(me)==="notes"&&c()||n(me)==="bin"&&l()||n(me)==="archive"&&u())&&q(V)})}De((q,X)=>{dt(se,"href",q),dt(Ne,"href",X)},[()=>v(xe.Settings),()=>v(xe.Sync)]),g(t,K),Ce()}ht(["click"]);var tg=S('<div class="a p-11shdp8"><!></div>');function Ct(t,e){be(e,!0);const{setDialogPageHeight:a}=ds();let r=D(null);Ae(()=>{n(r);const i=new ResizeObserver(l=>{for(let u of l){const c=u.contentRect.height;a(c)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=tg(),s=C(o);We(s,()=>e.children),$e(o,i=>f(r,i),()=>n(r)),g(t,o),Ce()}var ng=S('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function ag(t,e){be(e,!1);const{replaceSearchParams:a,getHref:r}=Ht(),o=l=>{l.preventDefault(),a("")};ss();var s=ng(),i=A(C(s),2);{let l=Pr(()=>r(""));Rt(i,{element:"a",get href(){return n(l)},onClick:o,children:(u,c)=>{var d=Ke("close");g(u,d)},$$slots:{default:!0}})}g(t,s),Ce()}var rg=S('<h1 class="p-1n0ziuh"><!></h1>');function og(t,e){var a=rg(),r=C(a);We(r,()=>e.children),g(t,a)}var sg=S('<!> <div class="b p-193tby9"><!> <!></div>',1),ig=S('<div class="a p-193tby9"><!></div>');function lg(t,e){be(e,!0);const{blockDialog:a,setLeftEnd:r}=Zt(),{pushDialogPage:o}=Ft(),{initLocalAccount:s}=ls(),{replaceSearchParams:i}=Ht(),l=qn(),u=()=>{o(xe.Auth)},c=async()=>{l.duration=0,l.swipingRatio=-25,requestAnimationFrame(()=>{l.duration=ia().duration,l.swipingRatio=ia().swipingRatio,s(),a(!1),r(!0),i("")})};var d=ig(),v=C(d);{var h=p=>{var _=sg(),x=E(_);og(x,{children:(w,k)=>{var I=Ke("Welcome");g(w,I)}});var m=A(x,2),b=C(m);Rt(b,{onClick:u,fullWidth:!0,children:(w,k)=>{var I=Ke("Cloud account");g(w,I)},$$slots:{default:!0}});var M=A(b,2);Rt(M,{onClick:c,fullWidth:!0,type:"secondary",children:(w,k)=>{var I=Ke("Local account");g(w,I)},$$slots:{default:!0}}),g(p,_)};O(v,p=>{p(h)})}g(t,d),Ce()}var cg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Edit',1),dg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),ug=S('<li class="p-1jbq6g9"><!></li> <li class="p-1jbq6g9"><!></li>',1),fg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function vg(t,e){be(e,!0);let a=Oe(e,"shownMenu",15),r=D(!1),o=D(!1),s=D(!1);const i=async()=>{e.onEdit()},l=()=>{n(o)?(f(o,!1),i()):n(s)&&(f(s,!1),e.onDelete()),a(!1),f(r,!1)};let u=fn||xn;var c=we(),d=E(c);{var v=h=>{var p=fg(),_=E(p);ve(_,()=>({"--top":"90%","--right":"0px"})),sr(_.lastChild,{get startClose(){return n(r)},onClosed:l,get isMobile(){return u},children:(x,m)=>{var b=ug(),M=E(b),w=C(M);Ue(w,{onClick:()=>{f(o,!0),f(r,!0)},get dialogMode(){return u},children:(Z,H)=>{var W=cg(),R=E(W);ve(R,()=>({"--size":"20px"})),pe(R.lastChild,{name:"pen"}),g(Z,W)},$$slots:{default:!0}});var k=A(M,2),I=C(k);Ue(I,{onClick:()=>{f(s,!0),f(r,!0)},get dialogMode(){return u},children:(Z,H)=>{var W=dg(),R=E(W);ve(R,()=>({"--size":"20px"})),pe(R.lastChild,{name:"bin"}),g(Z,W)},$$slots:{default:!0}}),g(x,b)},$$slots:{default:!0}}),g(h,p)};O(d,h=>{a()&&h(v)})}g(t,c),Ce()}var gg=S('<div class="b p-drp34e"><!> <!> <div class="c p-drp34e"><button class="p-drp34e">Cancel</button> <button class="p-drp34e">Done</button></div></div>'),hg=S('<div class="e p-drp34e"><!></div>'),pg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),mg=S('<div class="d p-drp34e"><div><!> <a class="f p-drp34e" target="_blank" rel="noopener noreferrer"> </a> <div><!></div> <!></div></div>'),_g=S('<div class="a p-drp34e"><!></div>');function wg(t,e){be(e,!0);let a=Oe(e,"shownUrlInput",15);const{getFaviconEnabled:r}=Na();let o=P(r),s=D(null),i=D(null),l=D(ft(e.url)),u=D(ft(e.title)),c=D(null),d=D(!1);const v=M=>{f(l,M.target.value||"",!0)},h=M=>{f(u,M.target.value||"",!0)};Ye(()=>{a()&&n(s)?.focus()});const p=()=>{e.url&&(navigator.clipboard.writeText(e.url),et("Copied link"))};var _=_g(),x=C(_);{var m=M=>{var w=gg(),k=C(w);Sr(k,{get value(){return n(l)},onInput:v,placeholder:"url",get ref(){return n(s)},set ref(R){f(s,R,!0)}});var I=A(k,2);Sr(I,{get value(){return n(u)},onInput:h,placeholder:"title"});var Z=A(I,2),H=C(Z);H.__click=()=>{f(l,e.url,!0),f(u,e.title,!0),a(!1)};var W=A(H,2);W.__click=()=>{let R=n(l).trim();R!==""&&/^[[a-zA-Z]+?:\/\//.test(R)===!1&&(R="https://"+R,f(l,R,!0)),e.onChangeUrl(R,n(u)),a(!1)},g(M,w)},b=M=>{var w=we(),k=E(w);{var I=H=>{var W=mg(),R=C(W);rt(R,1,it({i:!0}),"p-drp34e");var J=C(R);{var ne=K=>{var L=hg(),ee=C(L);vl(ee,{get url(){return e.url}}),g(K,L)};O(J,K=>{n(o)&&K(ne)})}var oe=A(J,2),U=C(oe),z=A(oe,2);rt(z,1,it({j:!0}),"p-drp34e");var ye=C(z);In(ye,{title:"copy link",elem:"button",onclick:p,children:(K,L)=>{var ee=pg(),se=E(ee);ve(se,()=>({"--size":"20px"})),pe(se.lastChild,{name:"copy"}),g(K,ee)},$$slots:{default:!0}});var me=A(z,2);vg(me,{onDelete:()=>{f(u,""),f(l,""),e.onDeleteUrl()},onEdit:()=>{a(!0)},get shownMenu(){return n(d)},set shownMenu(K){f(d,K,!0)}}),$e(R,K=>f(c,K),()=>n(c)),De(()=>{dt(oe,"href",e.url),ut(U,e.title||"unknown")}),g(H,W)},Z=H=>{};O(k,H=>{e.url?H(I):H(Z,!1)})}g(M,w)};O(x,M=>{a()?M(m):M(b,!1)})}$e(_,M=>f(i,M),()=>n(i)),g(t,_),Ce()}ht(["click"]);var yg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Add link',1),bg=S('<li class="p-1ljon4s"><!></li>'),Cg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Edit link',1),Sg=S('<li class="p-1ljon4s"><!></li>'),kg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy',1),xg=S('<li class="p-1ljon4s"><!></li>'),Tg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share link',1),Eg=S('<li class="p-1ljon4s"><!></li>'),Pg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),Ng=S('<li class="p-1ljon4s"><!></li>'),Ag=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Make copy',1),Mg=S('<li class="p-1ljon4s"><!></li>'),Dg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Duplicates',1),Ig=S('<li class="p-1ljon4s"><!></li>'),Rg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),Lg=S('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),Fg=S('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Og=S('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),zg=S(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),Bg=S('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),jg=S("<!> <!> <!> <!> <!> <!> <!>",1),Hg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function zs(t,e){be(e,!0);const{moveNoteToBin:a,moveNoteFromArchive:r,moveNoteToArchive:o,deleteNote:s,restoreNoteFromBin:i,checkDuplicatesExist:l,createNote:u}=Ot(),{clearDialogPages:c,replaceDialogPage:d,pushDialogPage:v}=Ft(),{setFeedSearch:h}=$a(),{checkMobileSize:p}=fa();let _=Oe(e,"mode",3,"notes"),x=Oe(e,"shownMenu",15),m=D(!1),b=D(!1),M=D(!1),w=D(!1),k=D(!1),I=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"});const Z=async()=>{requestAnimationFrame(()=>{c(),setTimeout(()=>{a(e.noteId),et("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId),v(`${xe.Note}?id=${e.noteId}`)}}})},300)})},H=async()=>{o(e.noteId),et("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{r(e.noteId)}}})},W=async()=>{r(e.noteId),et("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{o(e.noteId)}}})},R=()=>{i(e.noteId),et("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{a(e.noteId)}}})},J=()=>{n(b)?(f(b,!1),Z()):n(k)?(f(k,!1),R()):n(M)?(f(M,!1),H()):n(w)&&(f(w,!1),W()),x(!1),f(m,!1)},ne=()=>{let le="";e.link?.url&&(le+=e.link.url+`
`),e.text&&(le+=`
`+e.text+`
`),navigator.clipboard.writeText(le),et("Copied"),f(m,!0)},oe=()=>{f(m,!0),Ta({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{c(),await s(e.noteId)},onCancel:async()=>{}})},U=()=>{if(navigator.share){const le={};let de="";e.link?.url&&(de+=e.link.url+`
`),e.text&&(de+=`
`+e.text+`
`),le.text=de,navigator.share(le).catch(Ne=>{console.error("Error sharing",Ne)})}f(m,!0)},z=()=>{if(navigator.share){const le={};e.link?.url&&(le.url=e.link.url),e.link?.title&&(le.title=e.link.title),navigator.share(le).catch(de=>{console.error("Error sharing",de)})}f(m,!0)},ye=async()=>{f(m,!0);const le=await u({link:yt(e.link),text:e.text||"",tags:e.tags?yt(e.tags):[]});d(`${xe.Note}?id=${le}`),et("Copy made")},me=()=>{f(m,!0),e.link?.url&&(c(),h(e.link?.url))};let K=!1;var L=we(),ee=E(L);{var se=le=>{var de=Hg(),Ne=E(de);{let Fe=P(()=>`calc(100% - ${p()?"0px":"16px"})`),ue=P(()=>p()?"auto":"10px"),G=P(()=>p()?"10px":"auto");ve(Ne,()=>({"--bottom":"auto","--top":n(Fe),"--left":n(ue),"--right":n(G)})),sr(Ne.lastChild,{get startClose(){return n(m)},onClosed:J,isMobile:K,children:(ie,Te)=>{var Ee=jg(),Ie=E(Ee);{var He=X=>{var $=bg(),Q=C($);Ue(Q,{onClick:Y=>{e.onAddLinkClick(Y),f(m,!0)},dialogMode:K,children:(Y,re)=>{var ae=yg(),he=E(ae);ve(he,()=>({"--size":"20px"})),pe(he.lastChild,{name:"add"}),g(Y,ae)},$$slots:{default:!0}}),g(X,$)},ge=X=>{var $=Sg(),Q=C($);Ue(Q,{onClick:Y=>{e.onEditLinkClick(Y),f(m,!0)},dialogMode:K,children:(Y,re)=>{var ae=Cg(),he=E(ae);ve(he,()=>({"--size":"20px","--scale":"0.9"})),pe(he.lastChild,{name:"pen"}),g(Y,ae)},$$slots:{default:!0}}),g(X,$)};O(Ie,X=>{e.link?.url?X(ge,!1):X(He)})}var ce=A(Ie,2);{var Se=X=>{var $=xg(),Q=C($);Ue(Q,{onClick:ne,dialogMode:K,children:(Y,re)=>{var ae=kg(),he=E(ae);ve(he,()=>({"--size":"20px"})),pe(he.lastChild,{name:"copy"}),g(Y,ae)},$$slots:{default:!0}}),g(X,$)};O(ce,X=>{e.text&&X(Se)})}var te=A(ce,2);{var Pe=X=>{var $=Eg(),Q=C($);Ue(Q,{onClick:z,dialogMode:K,children:(Y,re)=>{var ae=Tg(),he=E(ae);{let Re=P(()=>e.text?"":"share");ve(he,()=>({"--size":"20px"})),pe(he.lastChild,{get name(){return n(Re)}})}g(Y,ae)},$$slots:{default:!0}}),g(X,$)};O(te,X=>{I&&e.link?.url&&X(Pe)})}var fe=A(te,2);{var _e=X=>{var $=Ng(),Q=C($);Ue(Q,{onClick:U,dialogMode:K,children:(Y,re)=>{var ae=Pg(),he=E(ae);ve(he,()=>({"--size":"20px"})),pe(he.lastChild,{name:"share"}),g(Y,ae)},$$slots:{default:!0}}),g(X,$)};O(fe,X=>{I&&e.text&&X(_e)})}var y=A(fe,2);{var T=X=>{var $=Mg(),Q=C($);Ue(Q,{onClick:ye,dialogMode:K,children:(Y,re)=>{var ae=Ag(),he=E(ae);ve(he,()=>({"--size":"20px","--scale":"0.8"})),pe(he.lastChild,{name:"note"}),g(Y,ae)},$$slots:{default:!0}}),g(X,$)};O(y,X=>{(e.text||e.link?.url)&&X(T)})}var N=A(y,2);{var B=X=>{var $=Ig(),Q=C($);Ue(Q,{onClick:me,dialogMode:K,children:(Y,re)=>{var ae=Dg(),he=E(ae);ve(he,()=>({"--size":"20px"})),pe(he.lastChild,{name:""}),g(Y,ae)},$$slots:{default:!0}}),g(X,$)};O(N,X=>{e.link?.url&&l(e.noteId)&&X(B)})}var F=A(N,2);{var V=X=>{var $=we(),Q=E($);{var Y=re=>{var ae=Fg(),he=E(ae),Re=C(he);Ue(Re,{onClick:()=>{f(M,_()==="notes"),f(w,_()==="archive"),f(m,!0)},dialogMode:K,children:(Ve,Le)=>{var ze=Rg(),Be=E(ze);{let _t=P(()=>_()==="archive"?"archive-cancel":"archive");ve(Be,()=>({"--size":"20px","--scale":"0.9"})),pe(Be.lastChild,{get name(){return n(_t)}})}var je=A(Be);De(()=>ut(je,` ${_()==="archive"?"Unarchive":"Archive"}`)),g(Ve,ze)},$$slots:{default:!0}});var ke=A(he,2),Me=C(ke);Ue(Me,{onClick:()=>{f(b,!0),f(m,!0)},dialogMode:K,children:(Ve,Le)=>{var ze=Lg(),Be=E(ze),je=C(Be);ve(je,()=>({"--size":"20px"})),pe(je.lastChild,{name:"bin"}),g(Ve,ze)},$$slots:{default:!0}}),g(re,ae)};O(Q,re=>{(e.text||e.link?.url)&&re(Y)})}g(X,$)},q=X=>{var $=Bg(),Q=E($),Y=C(Q);Ue(Y,{onClick:()=>{f(k,!0),f(m,!0)},dialogMode:K,children:(he,Re)=>{var ke=Og(),Me=E(ke),Ve=C(Me);ve(Ve,()=>({"--size":"20px"})),pe(Ve.lastChild,{name:"bin-cancel"}),g(he,ke)},$$slots:{default:!0}});var re=A(Q,2),ae=C(re);Ue(ae,{onClick:oe,dialogMode:K,dangerous:!0,children:(he,Re)=>{var ke=zg(),Me=E(ke),Ve=C(Me);ve(Ve,()=>({"--size":"20px"})),pe(Ve.lastChild,{name:"bin"}),g(he,ke)},$$slots:{default:!0}}),g(X,$)};O(F,X=>{_()==="notes"||_()==="archive"?X(V):X(q,!1)})}g(ie,Ee)},$$slots:{default:!0}})}g(le,de)};O(ee,le=>{x()&&le(se)})}g(t,L),Ce()}var Ug=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Wg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Vg=S("<!> <!> <!> <!>",1),qg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Kg=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Yg=S("<!> <!> <!>",1),Gg=S('<div class="g p-1hk8mle">Note</div>'),Xg=S("<span> </span>"),Jg=S('<div class="k p-1hk8mle"><!></div>'),Zg=S('<div class="a p-1hk8mle"><div class="b p-1hk8mle"><!></div></div> <!> <div class="c p-1hk8mle"><div class="d"><div class="e"><div class="f p-1hk8mle"><!> <div class="h p-1hk8mle" role="textbox" aria-label="note" tabindex="0" contenteditable="true" placeholder="Note"> </div></div></div></div> <div class="i j p-1hk8mle"><!> <div class="l p-1hk8mle"><!></div></div></div>',1);function Qg(t,e){be(e,!0);const{getLlmTagsEnabled:a,getPrevTags:r,getPageDataForTagsEnabled:o}=Na(),{pushDialogPage:s}=Ft(),{checkMobileSize:i}=fa(),{getSearchParams:l,getHref:u}=Ht();let c=Oe(e,"link",15,void 0),d=Oe(e,"text",15,""),v=Oe(e,"tags",31,()=>ft([])),h=Oe(e,"pinned",15,!1),p=D(null),_=D(!1),x=D(!1),m=D(ft(new Set)),b=D(!1),M=D(!1);const w=y=>{let T="",N=!0;function B(F){for(let V=0;V<F.length;V++){const q=F[V];if(q.nodeName==="BR"){T+=`
`,N=!0;continue}q.nodeName==="DIV"&&N===!1&&(T+=`
`),N=!1,q.nodeType===3&&q.textContent&&(T+=q.textContent),B(q.childNodes)}}B(y.currentTarget.childNodes),T===`
`&&(T=T.slice(0,-1)),d(T)},k=y=>{y.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(n(_)&&(f(_,!1),y.preventDefault(),y.stopPropagation()),n(x)&&(f(x,!1),y.preventDefault(),y.stopPropagation()))};Ae(()=>(document.addEventListener("keydown",k),()=>document.removeEventListener("keydown",k)));const I=(y,T)=>{c({url:y,title:T})},Z=()=>{f(x,!0)},H=()=>{c(void 0)},W=y=>{v(y)},R=r(),J=()=>{v([...new Set([...v(),...R])])},ne=d();Ae(()=>{if(n(p)){if((fn||xn)&&(e.mode==="edit"||navigator.userActivation.isActive===!1))return;n(p).focus();const y=document.createRange();y.selectNodeContents(n(p)),y.collapse(!1);const T=window.getSelection();T?.removeAllRanges(),T?.addRange(y)}});let oe=D("unknown");const U=async()=>{if(typeof LanguageModel>"u"){f(oe,"unavailable");return}f(oe,await Ms().availability({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}]}),!0)};Ae(()=>{U()});let z=P(a),ye=null;const me=async()=>ye||(ye=await Ms().create({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}],temperature:.2,topK:2,initialPrompts:[{role:"system",content:`
						You are a tagging assistant.
						Your task is to suggest relevant tags for bookmarks.

						Rules:
						- Use page content by priority to generate relevant tags.
						- Focus on the main topics and themes of the page and note content.
						- Prefer short, lowercase, single-word tags.
						- Use only single words for tags, no phrases, you can split into multiple tags.
						- Avoid special characters in tags.
						- All tags must be in English.
						- Add common tags related to the content like "music", "article", "video", "tutorial", "blog", etc. if relevant.
						- Return 3 to 5 tags.
						- Output ONLY a JSON array of strings.
					`}]}),ye),K=async()=>{if(n(oe)==="downloadable"||n(oe)==="downloading"){s(xe.Extension);return}f(M,!0);const y=await me(),T={type:"object",properties:{tags:{type:"array",items:{type:"string"}}},required:["tags"]},N=`
			Page information:
			Title: ${c()?.title||"N/A"}.
			URL: ${c()?.url||"N/A"}.
			Description: N/A.
			Note content: ${d()||"N/A"}.
			Dont return tags: ${[...n(m).size>0?Array.from(n(m)):[],...v().length>0?v():[]].join(", ")||"N/A"}.
			Page contents: N/A.
		`.slice(0,5e3),B=await y.prompt(N,{responseConstraint:T});v(Array.from(new Set([...v(),...(JSON.parse(B)?.tags||[]).map(F=>F.trim().toLowerCase()).filter(F=>F!=="")]))),f(M,!1)},L=()=>!e.deletedAt&&!e.archivedAt?"notes":e.archivedAt?"archive":"bin";var ee=Zg(),se=E(ee),le=C(se),de=C(le);{var Ne=y=>{var T=Vg(),N=E(T);{let q=P(()=>h()?"unpin":"pin");In(N,{get title(){return n(q)},elem:"button",onclick:()=>{h(!h())},children:(X,$)=>{var Q=Ug(),Y=E(Q);{let re=P(()=>h()?"pin-cancel":"pin");ve(Y,()=>({"--size":"20px"})),pe(Y.lastChild,{get name(){return n(re)}})}g(X,Q)},$$slots:{default:!0}})}var B=A(N,2);In(B,{title:"menu",elem:"button",onclick:()=>{f(b,!0)},children:(q,X)=>{var $=Wg(),Q=E($);ve(Q,()=>({"--size":"20px","--rotate":"90deg"})),pe(Q.lastChild,{name:"menu"}),g(q,$)},$$slots:{default:!0}});var F=A(B,2);{let q=P(L);zs(F,{onAddLinkClick:Z,onEditLinkClick:Z,nextFocusRef:null,get mode(){return n(q)},get tags(){return v()},get noteId(){return e.noteId},get text(){return d()},get link(){return c()},get shownMenu(){return n(b)},set shownMenu(X){f(b,X,!0)}})}var V=A(F,2);O(V,q=>{}),g(y,T)},Fe=y=>{var T=Yg(),N=E(T);In(N,{title:"menu",elem:"button",onclick:()=>{f(b,!0)},children:(V,q)=>{var X=qg(),$=E(X);ve($,()=>({"--size":"24px","--rotate":"90deg"})),pe($.lastChild,{name:"menu"}),g(V,X)},$$slots:{default:!0}});var B=A(N,2);{let V=P(L);zs(B,{onAddLinkClick:Z,onEditLinkClick:Z,nextFocusRef:null,get mode(){return n(V)},get tags(){return v()},get noteId(){return e.noteId},get text(){return d()},get link(){return c()},get shownMenu(){return n(b)},set shownMenu(q){f(b,q,!0)}})}var F=A(B,2);{let V=P(()=>h()?"unpin":"pin");In(F,{get title(){return n(V)},elem:"button",onclick:()=>{h(!h())},children:(q,X)=>{var $=Kg(),Q=E($);{let Y=P(()=>h()?"pin-cancel":"pin");ve(Q,()=>({"--size":"24px"})),pe(Q.lastChild,{get name(){return n(Y)}})}g(q,$)},$$slots:{default:!0}})}g(y,T)};O(de,y=>{i()?y(Ne):y(Fe,!1)})}var ue=A(se,2);{let y=P(()=>c()?.url||""),T=P(()=>c()?.title||"");wg(ue,{get url(){return n(y)},get title(){return n(T)},onChangeUrl:I,onDeleteUrl:H,get shownUrlInput(){return n(x)},set shownUrlInput(N){f(x,N,!0)}})}var G=A(ue,2),ie=C(G),Te=C(ie),Ee=C(Te),Ie=C(Ee);{var He=y=>{var T=Gg();g(y,T)};O(Ie,y=>{d()||y(He)})}var ge=A(Ie,2);ge.__input=w;var ce=C(ge);$e(ge,y=>f(p,y),()=>n(p));var Se=A(ie,2),te=C(Se);{var Pe=y=>{var T=Jg(),N=C(T);{var B=F=>{var V=Xg(),q=C(V);De(X=>ut(q,`updated: ${X??""}`),[()=>new Date(e.updatedAt).toLocaleString()]),g(F,V)};O(N,F=>{e.updatedAt&&F(B)})}g(y,T)};O(te,y=>{e.mode==="edit"&&y(Pe)})}var fe=A(te,2),_e=C(fe);{let y=P(()=>n(z)&&n(oe)!=="unknown"&&n(oe)!=="unavailable"),T=P(()=>e.mode==="add"&&R.length>0);fl(_e,{get selectedTags(){return v()},onRejectedTag:N=>{f(m,new Set([...n(m),N]),!0)},onChangeTags:W,get genTagsEnabled(){return n(y)},onGenTags:K,get generatingTags(){return n(M)},onUsePreviousTags:J,get previousTagsEnabled(){return n(T)},get shownTagInput(){return n(_)},set shownTagInput(N){f(_,N,!0)}})}De(()=>ut(ce,ne)),g(t,ee),Ce()}ht(["input"]);function $g(t,e){be(e,!0);const{isInitedNotes:a,createNote:r,updateNote:o,deleteNote:s,getNoteById:i,pinNote:l}=Ot(),{getViewMode:u,setPrevTags:c}=Na(),{deleteSearchParam:d,getSearchParams:v}=Ht(),{replaceDialogPage:h}=Ft();let p=D("loading"),_=D("idle"),x=D(""),m=D(void 0),b=D(""),M=D(!1),w=D(ft([]));const k=()=>{{const J=v().get("url"),ne=v().get("title"),oe=v().get("text");J&&f(m,{url:J,title:ne||""},!0),oe&&(!J&&Jo(oe)?f(m,{url:oe,title:ne||new URL(oe).hostname},!0):f(b,oe,!0)),d("url"),d("title"),d("text"),f(p,"finish");return}},I=P(()=>a()&&n(p)==="finish"),Z=async()=>{if(n(m)?.title||n(m)?.url||n(b)||n(w).length>0){if(n(x)){const J=i(n(x));if(!J?.data)return;if((J.data.link?.url!==n(m)?.url||J.data.link?.title!==n(m)?.title||J.data.text!==n(b)||JSON.stringify(J.data.tags)!==JSON.stringify(n(w)))&&n(_)==="idle"){f(_,"loading");try{await o(n(x),{link:ha(n(m)),text:n(b),tags:n(w).slice()})}finally{f(_,"idle")}}}else if(n(_)==="idle"){f(_,"loading");try{f(x,await r({link:ha(n(m)),text:n(b),tags:n(w).slice()}),!0),h(`${xe.NewNote}?id=${n(x)}`)}catch(J){console.error("Error creating note:",J)}finally{f(_,"idle")}}}else if(n(x)&&n(_)==="idle"){f(_,"loading");try{await s(n(x)),f(x,""),h(`${xe.NewNote}`)}finally{f(_,"idle")}}};Ye(()=>{n(I)&&n(_)!=="loading"&&Z()}),Ye(()=>{n(I)&&n(_)!=="loading"&&n(x)&&(n(M),jt(()=>{i(n(x))?.data.pinned!==n(M)&&l(n(x),n(M))}))}),Ae(()=>{k()}),Ae(()=>()=>{n(w).length>0&&c([...n(w)])});var H=we(),W=E(H);{var R=J=>{{let ne=P(()=>i(n(x))?.data.deletedAt),oe=P(()=>i(n(x))?.data.archivedAt);Qg(J,{get deletedAt(){return n(ne)},get archivedAt(){return n(oe)},get noteId(){return n(x)},mode:"add",get link(){return n(m)},set link(U){f(m,U,!0)},get text(){return n(b)},set text(U){f(b,U,!0)},get tags(){return n(w)},set tags(U){f(w,U,!0)},get pinned(){return n(M)},set pinned(U){f(M,U,!0)}})}};O(W,J=>{n(I)&&J(R)})}g(t,H),Ce()}const eh="modulepreload",th=function(t){return"/"+t},Bs={},St=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let u=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=u(a.map(c=>{if(c=th(c),c in Bs)return;Bs[c]=!0;const d=c.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${v}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":eh,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,_)=>{h.addEventListener("load",p),h.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var nh=S('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function ah(t){var e=nh(),a=A(C(e),2);Rt(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=Ke("Reload");g(r,s)},$$slots:{default:!0}}),g(t,e)}var rh=S('<div class="p-uzefkz"><!></div>');function oh(t,e){be(e,!0);let a=D(!1);const{getDialogPageHeight:r}=ds(),o=P(r);Ae(()=>{const u=setTimeout(()=>{f(a,!0)},250);return()=>{clearTimeout(u)}});var s=rh(),i=C(s);{var l=u=>{Ra(u,{})};O(i,u=>{n(a)&&u(l)})}De(()=>Qa(s,`min-height: ${n(o)??""}px;`)),g(t,s),Ce()}function Mt(t,e){be(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>St(()=>import("./aDb_rDiKO.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>St(()=>import("./a_doMyQOf.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>St(()=>import("./aDPOok3jR.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>St(()=>import("./aCUm7wJl3.js"),__vite__mapDeps([8,9])),"./Pages/ChangeTags.svelte":()=>St(()=>import("./aDsevbTGb.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>St(()=>import("./aBe5moIrp.js"),__vite__mapDeps([10,4,3,11,12])),"./Pages/Exit.svelte":()=>St(()=>import("./aDGopmyhF.js"),__vite__mapDeps([13,14])),"./Pages/ExportData.svelte":()=>St(()=>import("./aB5ZfMq1f.js"),__vite__mapDeps([15,16,17,18,19,20])),"./Pages/Extension.svelte":()=>St(()=>import("./aB4jlY_7a.js"),__vite__mapDeps([21,18,19,22])),"./Pages/ImportData.svelte":()=>St(()=>import("./aCQX5PTV5.js"),__vite__mapDeps([23,24])),"./Pages/Install.svelte":()=>St(()=>import("./aBU9Fbogn.js"),__vite__mapDeps([25,26])),"./Pages/InstallSuccess.svelte":()=>St(()=>import("./aBcGMslP0.js"),__vite__mapDeps([27,28])),"./Pages/Note.svelte":()=>St(()=>import("./aCHJ4ecOk.js"),__vite__mapDeps([29,30])),"./Pages/Settings.svelte":()=>St(()=>import("./aIgLZKD6f.js"),__vite__mapDeps([31,18,19,16,17,32])),"./Pages/Signin.svelte":()=>St(()=>import("./aDZoNqVmq.js"),__vite__mapDeps([33,4,3,11,34])),"./Pages/Signup.svelte":()=>St(()=>import("./aLVReKq6V.js"),__vite__mapDeps([35,11,4,3,34])),"./Pages/Subscription.svelte":()=>St(()=>import("./aBqxekyEh.js"),__vite__mapDeps([36,37])),"./Pages/Sync.svelte":()=>St(()=>import("./aCYknuXx_.js"),__vite__mapDeps([38,39]))}),o=async l=>{const u=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[u]){const c=r[u]();return a[l]={promise:c},a[l].module=await c,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=we(),i=E(s);qc(i,()=>o(e.page),l=>{oh(l,{})},(l,u)=>{const c=P(()=>n(u).default);var d=we(),v=E(d);Xc(v,()=>n(c),(h,p)=>{p(h,{get params(){return e.params},get hidden(){return e.hidden}})}),g(l,d)},l=>{ah(l)}),g(t,s),Ce()}var tr,hl,pl;class sh{constructor(e){Ge(this,tr);zt(this,"data");zt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),ct(this,tr,hl).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,ct(this,tr,pl).call(this)),e}isEmpty(){return this.data.length===0}}tr=new WeakSet,hl=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},pl=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class ih{constructor(e,a){zt(this,"heap");zt(this,"done");zt(this,"cache",[]);this.heap=new sh(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var lh=S("<span>Back to notes</span>"),ch=S('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),dh=S("<span>Back to notes</span>"),uh=S('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),fh=S('<p class="f">No notes in bin</p>'),vh=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),gh=S('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),hh=S('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),ph=S('<div class="e p-1jdj5w3"><!></div>'),mh=S('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),_h=S('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),wh=S('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function yh(t,e){be(e,!0);const{getCountDialog:a}=Zt(),{getScrollContainer:r}=vo(),{createHandleClickDialogPage:o,createDialogPageHref:s}=Ft(),{getSelectedTags:i}=Vn(),{getFeedOrder:l}=Hi(),{checkNotesInArchive:u,checkNotesInBin:c,checkNotes:d,isInitedNotes:v}=Ot(),{getSelectedMetaTags:h}=fo(),{replaceSearchParams:p,getHref:_}=Ht();$a();const{getFiltredNotesLength:x,getFiltredNotes:m,getUpdatedFiltredNotesTimestamp:b}=Ia(),{getFeedSearch:M}=$a();let w="keyboard",k=P(h),I=P(x),Z=P(m),H=P(b),W=P(v),R=54,J=D(0),ne=D(0),oe=D(0),U=D(null),z=P(r),ye=null,me=null,K=P(()=>n(k).has(at.ARCHIVED)?"archive":n(k).has(at.BIN)?"bin":"notes");const L=P(i);Ye(()=>{n(L),n(Ne),n(z)?.scrollTo(0,0)});const{enable:ee}=cs(),se=()=>{ee(),ye||(ye=requestAnimationFrame(()=>{const fe=n(z)?.scrollTop||0;f(oe,fe,!0);const _e=Math.ceil(n(J)/R);f(ne,Math.floor(fe/(R*_e))*(R*_e)),ye=null}))},le=()=>{me||(me=requestAnimationFrame(()=>{f(J,window.innerHeight-180||0,!0);const fe=n(z)?.scrollTop||0;f(oe,fe,!0);const _e=Math.ceil(n(J)/R);f(ne,Math.floor(fe/(R*_e))*(R*_e)),me=null}))};Ae(()=>{const fe=_e=>{if(!(!Dv()&&qr()===void 0)&&!(a()>0)&&(_e.key==="ArrowDown"||_e.key==="ArrowUp")){if(_e.preventDefault(),_e.key==="ArrowDown"){const y=qr(),T=n(G).findIndex(F=>F.id===y),N=Ie(),B=He();if(!y||T===-1)vn(N?.id);else if(T<=B.index&&T>=N.index)Fs()&&T!==-1&&Ee(T+1)&&n(z)&&(n(z).scrollTop=Math.floor(n(z).scrollTop/R)*R+R);else if(T>B.index&&!Ee(T-1)&&Ee(T)){n(z)&&(n(z).scrollTop=Math.ceil(n(z).scrollTop/R)*R+R);const F=Fs();vn(F)}else vn(N?.id)}else if(_e.key==="ArrowUp"){const y=qr(),T=n(G).findIndex(F=>F.id===y),N=Ie(),B=He();if(!y||T===-1)vn(B?.id);else if(T<=B.index&&T>=N.index)Os()&&T!==-1&&Ee(T-1)&&n(z)&&(n(z).scrollTop=Math.ceil(n(z).scrollTop/R)*R-R);else if(T<N.index&&!Ee(T+1)&&Ee(T)){n(z)&&(n(z).scrollTop=n(Te)+T*R-R);const F=Os();vn(F)}else vn(B?.id)}gl()||Zo()}};return document.addEventListener("keydown",fe),()=>{document.removeEventListener("keydown",fe)}}),Ae(()=>{le(),se()});const de=()=>{se()};Ye(()=>{M()!==""&&w==="keyboard"&&(vn(Ie().id),Zo())}),Ye(()=>(n(z)?.addEventListener("scroll",de),window.addEventListener("resize",le),()=>{n(z)?.removeEventListener("scroll",de),window.removeEventListener("resize",le)}));const Ne=P(l);Ye(()=>{n(Ne),n(H),f(U,new ih(n(Z),(fe,_e)=>{if(!fe||!_e||!fe.data||!_e.data)return 0;if(fe.data.pinned&&!_e.data.pinned)return-1;if(!fe.data.pinned&&_e.data.pinned)return 1;if(fe.data.pinned&&_e.data.pinned){if(fe.data.pinned<_e.data.pinned)return 1;if(fe.data.pinned>_e.data.pinned)return-1}const y=(T,N)=>T.data.text||N.data.text?(T.data.text||"").localeCompare(N.data.text||""):(T.data.link?.title||"").localeCompare(N.data.link?.title||"");switch(n(Ne)){case"newest":return fe.data.createdAt<_e.data.createdAt?1:fe.data.createdAt>_e.data.createdAt?-1:y(fe,_e);case"oldest":return fe.data.createdAt>_e.data.createdAt?1:fe.data.createdAt<_e.data.createdAt?-1:y(fe,_e);case"AtoZ":return y(fe,_e);case"ZtoA":return y(_e,fe);case"updatedNewest":return fe.data.updatedAt<_e.data.updatedAt?1:fe.data.updatedAt>_e.data.updatedAt?-1:y(fe,_e);default:return 0}}),!0)});const Fe=P(()=>n(I)*R);let G=P(()=>{n(H);const fe=Math.ceil(n(J)/R);let _e=Math.floor(n(ne)/R);return _e=_e-Math.min(_e,fe),n(U)?.get(_e,_e+fe*3)||[]}),ie=P(()=>R*Math.ceil(n(J)/R));const Te=P(()=>n(ne)-Math.min(n(ne),n(ie))),Ee=fe=>fe*R<n(oe)-n(Te)-R/2||fe*R>n(oe)-n(Te)+Math.floor(n(J)/R)*R,Ie=()=>{for(let fe=0;fe<n(G).length;fe++)if(!Ee(fe))return{index:fe,id:n(G)[fe].id};return{index:-1,id:void 0}},He=()=>{for(let fe=n(G).length-1;fe>=0;fe--)if(!Ee(fe))return{index:fe,id:n(G)[fe].id};return{index:-1,id:void 0}};Ae(()=>{document.addEventListener("mousemove",()=>{w="mouse"}),document.addEventListener("keydown",()=>{w="keyboard"})});var ge=wh(),ce=C(ge),Se=C(ce);{var te=fe=>{Ra(fe,{})},Pe=fe=>{var _e=we(),y=E(_e);{var T=B=>{var F=ch(),V=A(E(F),2),q=C(V);{let X=P(()=>_(""));Rt(q,{element:"a",get href(){return n(X)},onClick:$=>{$.preventDefault(),p("")},children:($,Q)=>{var Y=lh();g($,Y)},$$slots:{default:!0}})}g(B,F)},N=B=>{var F=we(),V=E(F);{var q=$=>{var Q=uh(),Y=A(E(Q),2),re=C(Y);{let ae=P(()=>_(""));Rt(re,{element:"a",get href(){return n(ae)},onClick:he=>{he.preventDefault(),p("")},children:(he,Re)=>{var ke=dh();g(he,ke)},$$slots:{default:!0}})}g($,Q)},X=$=>{var Q=we(),Y=E(Q);{var re=he=>{var Re=ph(),ke=C(Re);{var Me=Le=>{var ze=fh();g(Le,ze)},Ve=Le=>{var ze=hh(),Be=C(ze),je=C(Be);{let ot=P(()=>s(xe.NewNote)),lt=P(()=>o(xe.NewNote));Rt(je,{element:"a",get href(){return n(ot)},get onClick(){return n(lt)},children:(pt,En)=>{var Tt=vh(),At=E(Tt);ve(At,()=>({"--size":"18px","--color":"#b0b0b0"})),pe(At.lastChild,{name:"plus"}),g(pt,Tt)},$$slots:{default:!0}})}var _t=A(Be,4),tt=C(_t);{let ot=P(()=>s(xe.ImportData)),lt=P(()=>o(xe.ImportData));Rt(tt,{element:"a",get href(){return n(ot)},get onClick(){return n(lt)},children:(pt,En)=>{var Tt=gh(),At=E(Tt);ve(At,()=>({"--size":"18px","--color":"#b0b0b0"})),pe(At.lastChild,{name:"import"}),g(pt,Tt)},$$slots:{default:!0}})}g(Le,ze)};O(ke,Le=>{n(K)==="bin"?Le(Me):Le(Ve,!1)})}g(he,Re)},ae=he=>{var Re=we(),ke=E(Re);{var Me=Le=>{var ze=mh();g(Le,ze)},Ve=Le=>{var ze=_h(),Be=C(ze);Bn(Be,23,()=>n(G),je=>je.data,(je,_t,tt)=>{var ot=we(),lt=E(ot);{var pt=En=>{{let Tt=P(()=>n(G)[n(tt)+1]?.id),At=P(()=>n(G)[n(tt)-1]?.id),mo=P(()=>Ee(n(tt))),_o=P(()=>(n(tt)+5)*R<n(oe)-n(Te)-R/2||(n(tt)+5)*R>n(oe)-n(Te)+Math.floor(n(J)/R)*R);Vv(En,{get nextNoteId(){return n(Tt)},get prevNoteId(){return n(At)},get mode(){return n(K)},get focusHidden(){return n(mo)},get showMenuUp(){return n(_o)},get noteId(){return n(_t).id},get noteData(){return n(_t).data}})}};O(lt,En=>{n(_t).data&&En(pt)})}g(je,ot)}),De(je=>{Qa(ze,je),Qa(Be,`transform: translateY(${n(Te)??""}px);`)},[()=>`--minHeight: ${Math.max((n(Fe)>n(J),n(Fe)),0)}px`]),g(Le,ze)};O(ke,Le=>{n(G).length===0?Le(Me):Le(Ve,!1)},!0)}g(he,Re)};O(Y,he=>{!c()&&!u()&&!d()?he(re):he(ae,!1)},!0)}g($,Q)};O(V,$=>{n(K)==="archive"&&!u()?$(q):$(X,!1)},!0)}g(B,F)};O(y,B=>{n(K)==="bin"&&!c()?B(T):B(N,!1)},!0)}g(fe,_e)};O(Se,fe=>{n(W)?fe(Pe,!1):fe(te)})}g(t,ge),Ce()}var bh=S('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function Ch(t){var e=bh(),a=A(E(e),2),r=C(a);yh(r,{}),g(t,e)}function Sh(t,e){be(e,!0);const a=qn();let r=Oe(e,"animationRef",7),o=Oe(e,"dialog",7);ul(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let c=0,d=0,v=()=>1;if(r().current){r().current.pause();let p=Number(r().current.currentTime);br()&&(p=Number(p)+50,r().current.currentTime=Math.min(Math.max(jn-1,p),p));const _=r().current.effect?.getComputedTiming().progress||0;v=()=>_,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(p=>requestAnimationFrame(p)),d=1-v();const h=d*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-d)*.1}`),a.swipingRatio=Math.abs(1-d)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${h}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:c,currentPosition:h,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:c,width:d})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-c/d)*.1}`),o().style.transform=`translate3d(${c}px, 0, 0)`,a.swipingRatio=Math.abs(1-c/d)*25)},onFinish:({swipeVelocity:c,currentPosition:d,width:v,actionThreshold:h,initialPosition:p})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const _=()=>Math.abs(p+d)/v*100;let x=null;if(c<=-la?x="open":c>=la?x="close":x=Math.abs(_())>h?"close":"open",r().progress=dl(_()/100),x==="close"){const m=(1-(r().progress||0))*jn;a.duration=m/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const m=(r().progress||1)*jn;a.duration=m/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),Ce()}var kh=S('<div class="d p-8xr118"> </div>'),xh=S('<button class="e f p-8xr118"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Th=S('<a class="e g p-8xr118"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Eh=S('<div><div class="a p-8xr118"><div class="b p-8xr118"><div class="c p-8xr118"><!> <!> <!></div></div></div> <!> <!></div>'),Ph=S("<dialog><!></dialog> <!>",1);function Nh(t,e){be(e,!0);const{isScrolling:a,enable:r}=cs();let o=D(null),s=D(null),i={};const l=qn(),{checkLeftEnd:u,checkLeftStart:c,setLeftEnd:d,setLeftStart:v,getCountDialog:h}=Zt(),p=P(c),_=P(u);let x=P(()=>l.working);const m=()=>{e.dialogState!=="opened"&&e.onStartOpening()},b=()=>{e.onClose()},M=()=>{e.onSwipe()},w=oe=>{oe.preventDefault(),b()};Ae(()=>(n(o)?.addEventListener("close",b),n(o)?.addEventListener("cancel",w),()=>{n(o)?.removeEventListener("close",b),n(o)?.removeEventListener("cancel",w)})),Ye(()=>{h()>0&&(l.swipingRatio=25)}),Ye(()=>{e.dialogState==="opening"?jt(()=>{requestAnimationFrame(()=>{if(!n(o))return;const oe=(i.progress||1)*jn,U=n(o).style.transform||`translate3d(${n(p)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const z=n(o)?.animate([{transform:U},{transform:"translate3d(0, 0, 0)"}],{duration:oe,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=z,z&&(z.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ia().duration,z.cancel(),i.current=void 0,i.progress=void 0,n(p)&&v(!1)})})}):e.dialogState==="closing"&&jt(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const oe=(1-(i.progress||0))*jn,U=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const z=n(o)?.animate([{transform:U},{transform:`translate3d(${n(_)?"-100%":"100%"}, 0, 0)`}],{duration:oe,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=z,z&&(z.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ia().duration,z.cancel(),i.current=void 0,i.progress=void 0,n(_)&&d(!1)})})})});const k=()=>{r()},I=P(a);Ae(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),br()&&n(o).getBoundingClientRect(),!n(x)){e.onOpened();return}e.onStartOpening()}});var Z=Ph(),H=E(Z),W=C(H);{var R=oe=>{var U=Eh(),z=C(U),ye=C(z),me=C(ye),K=C(me);{var L=G=>{var ie=kh(),Te=C(ie);De(()=>ut(Te,e.title)),g(G,ie)};O(K,G=>{e.title&&G(L)})}var ee=A(K,2);{var se=G=>{var ie=xh();ie.__click=b;var Te=C(ie);ve(Te,()=>({"--size":"28px"})),pe(Te.lastChild,{name:"back"});var Ee=A(Te,2);mt(Ee,{children:(Ie,He)=>{var ge=Ke("back");g(Ie,ge)}}),g(G,ie)};O(ee,G=>{e.blocked||G(se)})}var le=A(ee,2);{var de=G=>{var ie=Th();ie.__click=function(...Ie){e.onOpenWindow?.apply(this,Ie)};var Te=C(ie);ve(Te,()=>({"--scale":"0.7","--size":"28px"})),pe(Te.lastChild,{name:"open-window"});var Ee=A(Te,2);mt(Ee,{children:(Ie,He)=>{var ge=Ke("open window");g(Ie,ge)}}),De(()=>dt(ie,"href",e.openWindowHref)),g(G,ie)};O(le,G=>{e.onOpenWindow&&G(de)})}var Ne=A(z,2);We(Ne,()=>e.children);var Fe=A(Ne,2);{var ue=G=>{go(G,{})};O(Fe,G=>{e.dialogState==="opened"&&G(ue)})}$e(U,G=>f(s,G),()=>n(s)),De(()=>rt(U,1,it({o:!0,p:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-8xr118")),ln("scroll",U,k),g(oe,U)};O(W,oe=>{e.dialogState!=="preOpening"&&oe(R)})}$e(H,oe=>f(o,oe),()=>n(o));var J=A(H,2);{var ne=oe=>{Sh(oe,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:m,onClose:b,onSwipe:M,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};O(J,oe=>{n(s)&&!n(I)&&!e.blocked&&!e.hidden&&oe(ne)})}De(()=>rt(H,1,it({h:!0,i:n(x),j:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",k:e.hidden,l:e.dialogState==="opened",m:n(p),n:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-8xr118")),g(t,Z),Ce()}ht(["click"]);function Ah(t,e){be(e,!0);let a=Oe(e,"hidden",3,!1),r=Oe(e,"onClosed",3,()=>{}),o=D(0);Ae(()=>{const b=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",b),b(),()=>{window.removeEventListener("resize",b)}});const{dialogDec:s,dialogInc:i}=Zt(),l=qn();Ae(()=>(i(),()=>{s()}));let u=D("closed");const c=()=>{f(u,"opening")},d=()=>{f(u,"swiping")},v=()=>{f(u,"opened")},h=()=>{e.onClose(),f(u,"closing")},p=()=>{f(u,"closed"),r()()};Ye(()=>{e.shown&&n(u)==="closed"?f(u,"preOpening"):!e.shown&&n(u)==="opened"&&f(u,"closing")}),Ye(()=>{n(u)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(u)==="opened"||n(u)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var _=we(),x=E(_);{var m=b=>{Nh(b,{get dialogWidth(){return n(o)},get dialogState(){return n(u)},get title(){return e.title},onStartOpening:c,onOpened:v,onClose:h,onClosed:p,onSwipe:d,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(M,w)=>{var k=we(),I=E(k);We(I,()=>e.children),g(M,k)},$$slots:{default:!0}})};O(x,b=>{n(u)!=="closed"&&b(m)})}g(t,_),Ce()}const Mh=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};Ae(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Ae(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Dh=S('<button class="c d p-zlbg3d"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Ih=S('<div class="e p-zlbg3d"> </div>'),Rh=S('<button class="c f p-zlbg3d"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Lh=S('<dialog><div><div class="a p-zlbg3d"><div class="b p-zlbg3d"><div><!></div> <!> <div><!></div></div></div> <div class="g p-zlbg3d"><!></div></div> <!></dialog> <!>',1);function Fh(t,e){be(e,!0);let a=Oe(e,"blockedDialog",3,!1),r=Oe(e,"hiddenDialog",3,!1),o=Oe(e,"isDesktopAnimationOff",3,!1),s=D(null),i=D(null),l=D(!1),u=D(null);Mh({getDialog:()=>n(s),onOpen:()=>e.onOpen(),onStartClose:()=>e.onStartClose(),onClose:()=>e.onClose()});const c=qn();Ye(()=>{e.stateDialog==="closing"&&(console.log("Dialog is closing",c.working),c.working?n(i)?.addEventListener("transitionend",()=>{console.log("Dialog transition ended, closing dialog"),n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:d}=ds(),v=P(d);Ae(()=>{setTimeout(()=>{f(l,!0)},50)});var h=Lh(),p=E(h),_=C(p),x=C(_),m=C(x),b=C(m),M=C(b);{var w=U=>{var z=Dh();z.__click=()=>{e.onStartBack()};var ye=C(z);ve(ye,()=>({"--size":"24px"})),pe(ye.lastChild,{name:"back"});var me=A(ye,2);mt(me,{children:(K,L)=>{var ee=Ke("back");g(K,ee)}}),g(U,z)};O(M,U=>{(!(a()||r())||a())&&e.onStartBack&&U(w)})}var k=A(b,2);{var I=U=>{var z=Ih(),ye=C(z);De(()=>ut(ye,e.title)),g(U,z)};O(k,U=>{e.title&&U(I)})}var Z=A(k,2),H=C(Z);{var W=U=>{var z=Rh();z.__click=()=>{e.onStartClose()};var ye=C(z);ve(ye,()=>({"--size":"24px"})),pe(ye.lastChild,{name:"close"});var me=A(ye,2);mt(me,{children:(K,L)=>{var ee=Ke("close");g(K,ee)}}),g(U,z)};O(H,U=>{a()||r()||U(W)})}var R=A(x,2),J=C(R);We(J,()=>e.children),$e(_,U=>f(i,U),()=>n(i));var ne=A(_,2);go(ne,{get ref(){return n(u)},set ref(U){f(u,U,!0)}}),$e(p,U=>f(s,U),()=>n(s));var oe=A(p,2);us(oe,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose},get notificationRef(){return n(u)},set notificationRef(U){f(u,U,!0)}}),De(()=>{rt(p,1,it({h:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o(),m:r()}),"p-zlbg3d"),Qa(_,`height: ${n(v)+74}px`),rt(_,1,it({n:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o()}),"p-zlbg3d")}),g(t,h),Ce()}ht(["click"]);const Oh=({onStartClose:t,onClosed:e})=>{let a=D("close");return{get state(){return n(a)},set state(i){f(a,i,!0)},handleStartClose:(i=!1)=>{i||(f(a,"closing"),t?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function zh(t,e){be(e,!0);let a=Oe(e,"blockedDialog",3,!1),r=Oe(e,"hiddenDialog",3,!1),o=Oe(e,"onStartClose",3,()=>{}),s=Oe(e,"onClosed",3,()=>{}),i=Oh({onStartClose:()=>o()(),onClosed:()=>s()()});const{dialogDec:l,dialogInc:u}=Zt();Ae(()=>(u(),()=>{l()})),Ye(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const c=p=>{p.key==="Escape"&&a()&&(p.preventDefault(),p.stopPropagation())};Ae(()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}));var d=we(),v=E(d);{var h=p=>{Fh(p,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(_,x)=>{var m=we(),b=E(m);We(b,()=>e.children),g(_,m)},$$slots:{default:!0}})};O(v,p=>{i.state!=="close"&&p(h)})}g(t,d),Ce()}const js=(t,e=Je,a=Je,r)=>{let o=Pr(()=>Dl(r?.(),!1));var s=we(),i=E(s);{var l=c=>{Ct(c,{children:(d,v)=>{Mt(d,{get hidden(){return n(o)},get page(){return xe.Settings}})},$$slots:{default:!0}})},u=c=>{var d=we(),v=E(d);{var h=_=>{Ct(_,{children:(x,m)=>{$g(x,{})},$$slots:{default:!0}})},p=_=>{var x=we(),m=E(x);{var b=w=>{Ct(w,{children:(k,I)=>{Mt(k,{get params(){return a()},get hidden(){return n(o)},get page(){return xe.Note}})},$$slots:{default:!0}})},M=w=>{var k=we(),I=E(k);{var Z=W=>{Ct(W,{children:(R,J)=>{Mt(R,{get hidden(){return n(o)},get page(){return xe.ImportData}})},$$slots:{default:!0}})},H=W=>{var R=we(),J=E(R);{var ne=U=>{Ct(U,{children:(z,ye)=>{Mt(z,{get hidden(){return n(o)},get page(){return xe.ExportData}})},$$slots:{default:!0}})},oe=U=>{var z=we(),ye=E(z);{var me=L=>{Ct(L,{children:(ee,se)=>{lg(ee,{})},$$slots:{default:!0}})},K=L=>{var ee=we(),se=E(ee);{var le=Ne=>{Ct(Ne,{children:(Fe,ue)=>{Mt(Fe,{get hidden(){return n(o)},get page(){return xe.Install}})},$$slots:{default:!0}})},de=Ne=>{var Fe=we(),ue=E(Fe);{var G=Te=>{Ct(Te,{children:(Ee,Ie)=>{Mt(Ee,{get hidden(){return n(o)},get page(){return xe.InstallSuccess}})},$$slots:{default:!0}})},ie=Te=>{var Ee=we(),Ie=E(Ee);{var He=ce=>{Ct(ce,{children:(Se,te)=>{Mt(Se,{get hidden(){return n(o)},get page(){return xe.Auth}})},$$slots:{default:!0}})},ge=ce=>{var Se=we(),te=E(Se);{var Pe=_e=>{Ct(_e,{children:(y,T)=>{Mt(y,{get hidden(){return n(o)},get page(){return xe.Signup}})},$$slots:{default:!0}})},fe=_e=>{var y=we(),T=E(y);{var N=F=>{Ct(F,{children:(V,q)=>{Mt(V,{get hidden(){return n(o)},get page(){return xe.Signin}})},$$slots:{default:!0}})},B=F=>{var V=we(),q=E(V);{var X=Q=>{Ct(Q,{children:(Y,re)=>{Mt(Y,{get hidden(){return n(o)},get page(){return xe.AccessKeys}})},$$slots:{default:!0}})},$=Q=>{var Y=we(),re=E(Y);{var ae=Re=>{Ct(Re,{children:(ke,Me)=>{Mt(ke,{get hidden(){return n(o)},get page(){return xe.Account}})},$$slots:{default:!0}})},he=Re=>{var ke=we(),Me=E(ke);{var Ve=ze=>{Ct(ze,{children:(Be,je)=>{Mt(Be,{get hidden(){return n(o)},get page(){return xe.ConfirmAccessKey}})},$$slots:{default:!0}})},Le=ze=>{var Be=we(),je=E(Be);{var _t=ot=>{Ct(ot,{children:(lt,pt)=>{Mt(lt,{get hidden(){return n(o)},get page(){return xe.Exit}})},$$slots:{default:!0}})},tt=ot=>{var lt=we(),pt=E(lt);{var En=Tt=>{var At=we(),mo=E(At);{var _o=La=>{Ct(La,{children:(Ir,fs)=>{Mt(Ir,{get hidden(){return n(o)},get page(){return xe.Sync}})},$$slots:{default:!0}})},ml=La=>{var Ir=we(),fs=E(Ir);{var _l=Fa=>{Ct(Fa,{children:(Rr,vs)=>{Mt(Rr,{get hidden(){return n(o)},get page(){return xe.Subscription}})},$$slots:{default:!0}})},wl=Fa=>{var Rr=we(),vs=E(Rr);{var yl=Oa=>{Ct(Oa,{children:(wo,Cl)=>{Mt(wo,{get hidden(){return n(o)},get page(){return xe.About}})},$$slots:{default:!0}})},bl=Oa=>{Ct(Oa,{children:(wo,Cl)=>{ag(wo,{})},$$slots:{default:!0}})};O(vs,Oa=>{e()===xe.About?Oa(yl):Oa(bl,!1)},!0)}g(Fa,Rr)};O(fs,Fa=>{e()===xe.Subscription?Fa(_l):Fa(wl,!1)},!0)}g(La,Ir)};O(mo,La=>{e()===xe.Sync?La(_o):La(ml,!1)},!0)}g(Tt,At)};O(pt,Tt=>{e(),xe.Extension,Tt(En,!1)},!0)}g(ot,lt)};O(je,ot=>{e()===xe.Exit?ot(_t):ot(tt,!1)},!0)}g(ze,Be)};O(Me,ze=>{e()===xe.ConfirmAccessKey?ze(Ve):ze(Le,!1)},!0)}g(Re,ke)};O(re,Re=>{e()===xe.Account?Re(ae):Re(he,!1)},!0)}g(Q,Y)};O(q,Q=>{e()===xe.AccessKeys?Q(X):Q($,!1)},!0)}g(F,V)};O(T,F=>{e()===xe.Signin?F(N):F(B,!1)},!0)}g(_e,y)};O(te,_e=>{e()===xe.Signup?_e(Pe):_e(fe,!1)},!0)}g(ce,Se)};O(Ie,ce=>{e()===xe.Auth?ce(He):ce(ge,!1)},!0)}g(Te,Ee)};O(ue,Te=>{e()===xe.InstallSuccess?Te(G):Te(ie,!1)},!0)}g(Ne,Fe)};O(se,Ne=>{e()===xe.Install?Ne(le):Ne(de,!1)},!0)}g(L,ee)};O(ye,L=>{e()===xe.AccountSetup?L(me):L(K,!1)},!0)}g(U,z)};O(J,U=>{e()===xe.ExportData?U(ne):U(oe,!1)},!0)}g(W,R)};O(I,W=>{e()===xe.ImportData?W(Z):W(H,!1)},!0)}g(w,k)};O(m,w=>{e()===xe.Note?w(b):w(M,!1)},!0)}g(_,x)};O(v,_=>{e()===xe.NewNote?_(h):_(p,!1)},!0)}g(c,d)};O(i,c=>{e()===xe.Settings?c(l):c(u,!1)})}g(t,s)};var Bh=S(" <!>",1),jh=S("<!> <!>",1);function Hh(t,e){be(e,!0);let a=P(()=>({...e.openWindowHref?{openWindowHref:e.openWindowHref}:{},...e.onOpenWindow?{onOpenWindow:e.onOpenWindow}:{}}));const{checkBlockedDialog:r,checkClosableDialog:o}=Zt(),{sidebarClose:s,getSidebarState:i}=Mr(),l=P(r),u=P(o),{getDialogPages:c}=Ft(),{getAccount:d}=ls();let v=P(c),h=P(()=>d()!==void 0);const{checkMobileSize:p}=fa();let _=D(ft([]));const x=P(p),{clearDialogPages:m,popDialogPage:b}=Ft(),{checkLeftStart:M}=Zt();let w=P(M);Ye(()=>{c().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const k=()=>{b()},I=()=>{m()};Ye(()=>{n(v),n(x),jt(()=>{if(n(x))n(v).length>=n(_).length||n(w)?f(_,n(v).map(U=>({page:U,shown:!0})),!0):f(_,n(_).map((U,z)=>({page:U.page,shown:z<n(v).length})),!0);else if(n(v).length>=n(_).length)f(_,n(v).map(U=>({page:U,shown:!0})),!0);else{if(n(v).length===0){f(_,[{page:n(_)[n(_).length-1].page,shown:!1}],!0);return}f(_,n(v).map(U=>({page:U,shown:!0})),!0)}})});const Z=()=>{console.log("Updating stack pages from",n(_),"to",n(v)),console.log("Timestamp:",Date.now()),f(_,n(v).map(U=>({page:U,shown:!0})),!0)};var H=jh(),W=E(H);{var R=U=>{Ch(U)};O(W,U=>{n(h)&&U(R)})}var J=A(W,2);{var ne=U=>{var z=we(),ye=E(z);Bn(ye,19,()=>n(_),me=>me.page.split("?")[0],(me,K,L)=>{const ee=P(()=>n(K).page.split("?")[1]),se=P(()=>n(K).page.split("?")[0]),le=P(()=>n(L)!==n(_).length-1&&!!n(_)[n(L)+1]?.shown),de=P(()=>n(L)===0);{let Ne=P(()=>As[n(se)]||""),Fe=P(()=>n(l)||n(de)&&!n(u)),ue=P(()=>({...n(se)!==xe.NewNote&&n(se)!==xe.Note?n(a):{}}));Ah(me,zo({get shown(){return n(K).shown},get title(){return n(Ne)},get hidden(){return n(le)},get blocked(){return n(Fe)},onClose:k,onClosed:Z},()=>n(ue),{children:(G,ie)=>{js(G,()=>n(se),()=>n(ee),()=>n(le))},$$slots:{default:!0}}))}}),g(U,z)},oe=U=>{var z=we(),ye=E(z);{var me=K=>{const L=P(()=>n(_)[n(_).length-1].page.split("?")[1]),ee=P(()=>n(_)[n(_).length-1].page.split("?")[0]),se=P(()=>n(_)[n(_).length-1].shown),le=P(()=>n(_).length===1);var de=Bh(),Ne=E(de),Fe=A(Ne);{let ue=P(()=>As[n(ee)]||""),G=P(()=>n(l)||!n(u)),ie=P(()=>n(l)||n(le)?void 0:k);zh(Fe,{get shownDialog(){return n(se)},get title(){return n(ue)},get blockedDialog(){return n(G)},hiddenDialog:!1,get onStartBack(){return n(ie)},onStartClose:I,onClosed:Z,children:(Te,Ee)=>{js(Te,()=>n(ee),()=>n(L))},$$slots:{default:!0}})}De(ue=>ut(Ne,`${ue??""} `),[()=>console.log("Rendering desktop dialog for page:",n(ee),"shown:",n(se),"timestamp:",Date.now())]),g(K,de)};O(ye,K=>{n(_).length>0&&K(me)},!0)}g(U,z)};O(J,U=>{p()?U(ne):U(oe,!1)})}g(t,H),Ce()}function Uh(t,e){be(e,!1);let a=0;Ae(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),ss(),Ce()}const Wh=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var Vh=S('<div><button class="d p-bn1wva"><!> <span class="e p-bn1wva"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),qh=S('<!> <!> <!> <!> <main><div class="a p-bn1wva"><div class="b p-bn1wva"><!></div></div> <div class="c p-bn1wva"><!></div></main> <!>',1);function Kh(t,e){be(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=Ht(),{hasDialogPage:s}=Ft(),{setScrollContainer:i}=vo(),{getAccount:l,init:u}=ls(),{isInitedNotes:c}=Ot(),{isInitedSettings:d}=Na(),{getDialogPages:v}=Ft(),{createBroadcastChannel:h,tabId:p}=uo(),_=h(),{getSidebarState:x}=Mr(),{setClosableDialog:m}=Zt(),{getViewMode:b}=Na(),M=()=>{Wh()?a(`${en}=${xe.AccountSetup}`):a(`${en}=${xe.Install}`)};Ae(()=>{u(Pe=>{Pe===void 0?M():(s(xe.AccountSetup)&&a(""),Pe?f(H,Pe):f(H,null))});const te=async Pe=>{const fe=JSON.parse(Pe.data);if(fe.tabId&&fe.tabId===p)return;const _e=fe;_e.type==="initLocalAccount"||_e.type==="initCloudAccount"||_e.type==="updateAccount"||_e.type==="disconnectCloudAccount"?a(""):_e.type==="exit"&&M()};return _.addEventListener(te),()=>_.removeEventListener(te)});const w=qn();Ae(async()=>{await new Promise(te=>setTimeout(te,60)),await Ai(),w.working=!0});let k=D(!1),I=0,Z=P(()=>v().length>0),H=P(l),W=P(c),R=P(d),J=D(null);const ne=()=>{n(J)&&n(J).scrollTo({top:0})};Ye(()=>{m(n(H)!==void 0)}),Ye(()=>{i(n(J))});const oe=()=>{if(n(J)){const te=n(J).scrollTop||0;te===0?f(k,!1):!n(k)&&I>te?f(k,!0):n(k)&&I+50<te&&f(k,!1),I=te}},U=()=>{oe()};Ye(()=>(n(J)?.addEventListener("scroll",U),window.addEventListener("resize",U),()=>{n(J)?.removeEventListener("scroll",U),window.removeEventListener("resize",U)}));const z=P(x);let ye=P(()=>w.swipingRatio);const me=()=>{const te=new URLSearchParams(o());return r(te)},K=async te=>{te.preventDefault()},L=P(b),ee=P(()=>n(L)==="popup"||n(L)==="sidebar"?{onOpenWindow:K,openWindowHref:me()}:{});var se=qh(),le=E(se);Uh(le,{});var de=A(le,2);Lu(de,{});var Ne=A(de,2);go(Ne,{});var Fe=A(Ne,2);nf(Fe,{});var ue=A(Fe,2),G=C(ue),ie=C(G),Te=C(ie);{var Ee=te=>{eg(te,zo(()=>n(ee)))};O(Te,te=>{n(R)&&n(H)!==void 0&&te(Ee)})}var Ie=A(G,2),He=C(Ie);{var ge=te=>{Hh(te,zo(()=>n(ee)))};O(He,te=>{n(W)&&n(R)&&te(ge)})}$e(ue,te=>f(J,te),()=>n(J));var ce=A(ue,2);{var Se=te=>{var Pe=Vh(),fe=C(Pe);fe.__click=ne;var _e=C(fe);mt(_e,{children:(N,B)=>{var F=Ke("top");g(N,F)}});var y=A(_e,2),T=C(y);ve(T,()=>({"--rotate":"90deg","--size":"28px"})),pe(T.lastChild,{name:"back"}),De(()=>{Qa(Pe,`--swiping-ratio: ${n(ye)}; --transition-timing-default: ${w.duration}s;`),rt(Pe,1,it({i:!0,g:w.working&&!w.isSwiping,j:n(Z)||n(z)!=="closed"}),"p-bn1wva")}),g(te,Pe)};O(ce,te=>{n(k)&&te(Se)})}De(()=>{Qa(ue,`--swiping-ratio: ${n(ye)}; --transition-timing-default: ${w.duration}s;`),rt(ue,1,it({f:!0,g:w.working&&!w.isSwiping,h:n(z)!=="closed"}),"p-bn1wva")}),g(t,se),Ce()}ht(["click"]);function Yh(t){iu(t,{children:(e,a)=>{Kh(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Hc(Yh,{target:document.getElementById("app")});export{yt as $,P as A,Rt as B,Ht as C,ls as D,ss as E,Sr as F,ln as G,og as H,pe as I,Ot as J,fa as K,Ra as L,Na as M,fl as N,Ms as O,xe as P,$h as Q,Xn as R,$e as S,np as T,tp as U,mt as V,mu as W,_u as X,en as Y,br as Z,jt as _,f as a,ha as a0,Qg as a1,uo as a2,Zh as a3,Qh as a4,Wh as a5,Jh as a6,Oe as a7,Qa as a8,ep as a9,D as b,C as c,ve as d,Bn as e,S as f,n as g,dt as h,g as i,O as j,rt as k,it as l,Ce as m,E as n,Ae as o,be as p,ut as q,ht as r,A as s,De as t,Ft as u,Zt as v,ft as w,Ye as x,we as y,Ke as z};
