const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/DRtVqvnV.js","a/BAW-HnOs.css","a/472jdDKA.js","a/9q_jSmK4.js","a/bA9hIFUQ.js","a/Df0fAQHq.css","a/2cJqDjXQ.js","a/GKJynjgv.css","a/DnzN9PS7.js","a/BMjxyC5e.css","a/DaczGqrU.js","a/DgPIJwnn.css","a/Bpy2KKNj.js","a/B_UsPGEu.css","a/CQyNwVdP.js","a/Cpa8lgv9.js","a/BTd_aOTM.js","a/j0KFa_-O.css","a/hu7yjlv8.css","a/DNjH2OtA.js","a/CtU7fWff.js","a/CnkHJ5rE.js","a/EZ_l8VDb.css","a/B_Zcg-eh.css","a/HOTUjnfJ.css","a/4SX3IyFS.js","a/Bs6Vrlio.css","a/8d8u95b6.js","a/CCtlgutt.css","a/CfUXjAqb.js","a/DZNlfyYK.css","a/DztSVt5z.js","a/B-qfT0BU.css","a/BZ0n-S-u.js","a/aDhiidBq.js","a/DaxC3cdO.css","a/dP31ECZv.js","a/Bib31qW-.css","a/CUfLYA8A.js","a/Br15UghP.css","a/CRnk-Y_m.js","a/CTzb1Nvm.css"])))=>i.map(i=>d[i]);
var $o=Object.defineProperty;var Vr=t=>{throw TypeError(t)};var ei=(t,e,n)=>e in t?$o(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var it=(t,e,n)=>ei(t,typeof e!="symbol"?e+"":e,n),Za=(t,e,n)=>e.has(t)||Vr("Cannot "+n);var L=(t,e,n)=>(Za(t,e,"read from private field"),n?n.call(t):e.get(t)),Se=(t,e,n)=>e.has(t)?Vr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),le=(t,e,n,a)=>(Za(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n),ze=(t,e,n)=>(Za(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();const ds=!1;var mr=Array.isArray,ti=Array.prototype.indexOf,wr=Array.from,ar=Object.defineProperty,Ln=Object.getOwnPropertyDescriptor,fs=Object.getOwnPropertyDescriptors,ni=Object.prototype,ai=Array.prototype,yr=Object.getPrototypeOf,qr=Object.isExtensible;const xe=()=>{};function ri(t){return typeof t?.then=="function"}function si(t){return t()}function rr(t){for(var e=0;e<t.length;e++)t[e]()}function vs(){var t,e,n=new Promise((a,s)=>{t=a,e=s});return{promise:n,resolve:t,reject:e}}function oi(t,e,n=!1){return t===void 0?n?e():e:t}const Ze=2,br=4,Oa=8,gn=16,zt=32,pn=64,Sr=128,dt=256,Aa=512,Ye=1024,rt=2048,Gt=4096,wt=8192,_n=16384,kr=32768,Wn=65536,Wr=1<<17,ii=1<<18,Yn=1<<19,hs=1<<20,sr=1<<21,Cr=1<<22,cn=1<<23,un=Symbol("$state"),li=Symbol("legacy props"),ci=Symbol(""),Nn=new class extends Error{constructor(){super(...arguments);it(this,"name","StaleReactionError");it(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function gs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function ui(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function di(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function fi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function vi(t){throw new Error("https://svelte.dev/e/effect_orphan")}function hi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function gi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function pi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _i(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function mi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function wi(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ba=1,Ra=2,ps=4,yi=8,bi=16,Si=1,ki=2,Ci=4,Ei=8,Pi=16,xi=1,Ai=2,Ve=Symbol(),Di="http://www.w3.org/1999/xhtml";function Ti(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Ni=!1;function _s(t){return t===this.v}function Li(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function ms(t){return!Li(t,this.v)}let Kn=!1,Mi=!1;function Ii(){Kn=!0}let Ae=null;function Hn(t){Ae=t}function Re(t){return ws().get(t)}function Fe(t,e){return ws().set(t,e),e}function ee(t,e=!1,n){Ae={p:Ae,c:null,e:null,s:t,x:null,l:Kn&&!e?{s:null,u:null,$:[]}:null}}function te(t){var e=Ae,n=e.e;if(n!==null){e.e=null;for(var a of n)Rs(a)}return t!==void 0&&(e.x=t),Ae=e.p,t??{}}function Xn(){return!Kn||Ae!==null&&Ae.l===null}function ws(t){return Ae===null&&gs(),Ae.c??(Ae.c=new Map(Oi(Ae)||void 0))}function Oi(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let nn=[];function ys(){var t=nn;nn=[],rr(t)}function Xt(t){if(nn.length===0&&!Mn){var e=nn;queueMicrotask(()=>{e===nn&&ys()})}nn.push(t)}function Bi(){for(;nn.length>0;)ys()}const Ri=new WeakMap;function bs(t){var e=we;if(e===null)return he.f|=cn,t;if((e.f&kr)===0){if((e.f&Sr)===0)throw!e.parent&&t instanceof Error&&Ss(t),t;e.b.error(t)}else jn(t,e)}function jn(t,e){for(;e!==null;){if((e.f&Sr)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&Ss(t),t}function Ss(t){const e=Ri.get(t);e&&(ar(t,"message",{value:e.message}),ar(t,"stack",{value:e.stack}))}const wa=new Set;let Ne=null,Sa=null,_t=null,or=new Set,xt=[],Fa=null,ir=!1,Mn=!1;var Bn,Rn,an,ra,Fn,rn,zn,sa,oa,ft,lr,ka,cr;const La=class La{constructor(){Se(this,ft);it(this,"current",new Map);Se(this,Bn,new Map);Se(this,Rn,new Set);Se(this,an,0);Se(this,ra,null);Se(this,Fn,[]);Se(this,rn,[]);Se(this,zn,[]);Se(this,sa,[]);Se(this,oa,[]);it(this,"skipped_effects",new Set)}process(e){xt=[],Sa=null,this.apply();for(const o of e)ze(this,ft,lr).call(this,o);if(L(this,an)===0){var n=_t;ze(this,ft,cr).call(this);var a=L(this,Fn),s=L(this,rn);le(this,Fn,[]),le(this,rn,[]),le(this,zn,[]),Sa=this,Ne=null,_t=n,Yr(a),Yr(s),Sa=null,L(this,ra)?.resolve()}else ze(this,ft,ka).call(this,L(this,Fn)),ze(this,ft,ka).call(this,L(this,rn)),ze(this,ft,ka).call(this,L(this,zn));_t=null}capture(e,n){L(this,Bn).has(e)||L(this,Bn).set(e,n),this.current.set(e,e.v),_t?.set(e,e.v)}activate(){Ne=this}deactivate(){Ne=null,_t=null}flush(){if(xt.length>0){if(this.activate(),Cs(),Ne!==null&&Ne!==this)return}else L(this,an)===0&&ze(this,ft,cr).call(this);this.deactivate();for(const e of or)if(or.delete(e),e(),Ne!==null)break}increment(){le(this,an,L(this,an)+1)}decrement(){le(this,an,L(this,an)-1);for(const e of L(this,sa))Xe(e,rt),vn(e);for(const e of L(this,oa))Xe(e,Gt),vn(e);this.flush()}add_callback(e){L(this,Rn).add(e)}settled(){return(L(this,ra)??le(this,ra,vs())).promise}static ensure(){if(Ne===null){const e=Ne=new La;wa.add(Ne),Mn||La.enqueue(()=>{Ne===e&&e.flush()})}return Ne}static enqueue(e){Xt(e)}apply(){}};Bn=new WeakMap,Rn=new WeakMap,an=new WeakMap,ra=new WeakMap,Fn=new WeakMap,rn=new WeakMap,zn=new WeakMap,sa=new WeakMap,oa=new WeakMap,ft=new WeakSet,lr=function(e){e.f^=Ye;for(var n=e.first;n!==null;){var a=n.f,s=(a&(zt|pn))!==0,o=s&&(a&Ye)!==0,i=o||(a&wt)!==0||this.skipped_effects.has(n);if(!i&&n.fn!==null){s?n.f^=Ye:(a&br)!==0?L(this,rn).push(n):Ua(n)&&((n.f&gn)!==0&&L(this,zn).push(n),Na(n));var l=n.first;if(l!==null){n=l;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}},ka=function(e){for(const n of e)((n.f&rt)!==0?L(this,sa):L(this,oa)).push(n),Xe(n,Ye);e.length=0},cr=function(){var e;for(const n of L(this,Rn))n();if(L(this,Rn).clear(),wa.size>1){L(this,Bn).clear();let n=!0;for(const a of wa){if(a===this){n=!1;continue}const s=[];for(const[i,l]of this.current){if(a.current.has(i))if(n&&l!==a.current.get(i))a.current.set(i,l);else continue;s.push(i)}if(s.length===0)continue;const o=[...a.current.keys()].filter(i=>!this.current.has(i));if(o.length>0){for(const i of s)Es(i,o);if(xt.length>0){Ne=a,a.apply();for(const i of xt)ze(e=a,ft,lr).call(e,i);xt=[],a.deactivate()}}}Ne=null}wa.delete(this)};let Mt=La;function ks(t){var e=Mn;Mn=!0;try{for(var n;;){if(Bi(),xt.length===0&&(Ne?.flush(),xt.length===0))return Fa=null,n;Cs()}}finally{Mn=e}}function Cs(){var t=On;ir=!0;try{var e=0;for(Gr(!0);xt.length>0;){var n=Mt.ensure();if(e++>1e3){var a,s;Fi()}n.process(xt),Yt.clear()}}finally{ir=!1,Gr(t),Fa=null}}function Fi(){try{hi()}catch(t){jn(t,Fa)}}let en=null;function Yr(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var a=t[n++];if((a.f&(_n|wt))===0&&Ua(a)&&(en=[],Na(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null&&a.ac===null?Hs(a):a.fn=null),en?.length>0)){Yt.clear();for(const s of en)Na(s);en=[]}}en=null}}function Es(t,e){if(t.reactions!==null)for(const n of t.reactions){const a=n.f;(a&Ze)!==0?Es(n,e):(a&(Cr|gn))!==0&&Ps(n,e)&&(Xe(n,rt),vn(n))}}function Ps(t,e){if(t.deps!==null){for(const n of t.deps)if(e.includes(n)||(n.f&Ze)!==0&&Ps(n,e))return!0}return!1}function vn(t){for(var e=Fa=t;e.parent!==null;){e=e.parent;var n=e.f;if(ir&&e===we&&(n&gn)!==0)return;if((n&(pn|zt))!==0){if((n&Ye)===0)return;e.f^=Ye}}xt.push(e)}function zi(t){let e=0,n=Rt(0),a;return()=>{$i()&&(r(n),ja(()=>(e===0&&(a=vt(()=>t(()=>ea(n)))),e+=1,()=>{Xt(()=>{e-=1,e===0&&(a?.(),a=void 0,ea(n))})})))}}var Hi=Wn|Yn|Sr;function ji(t,e,n){new Ui(t,e,n)}var ht,ct,_r,kt,sn,Ct,ut,et,Et,Ut,on,Vt,ln,qt,Ma,Ia,Ge,Vi,qi,Ca,Ea,ur;class Ui{constructor(e,n,a){Se(this,Ge);it(this,"parent");Se(this,ht,!1);Se(this,ct);Se(this,_r,null);Se(this,kt);Se(this,sn);Se(this,Ct);Se(this,ut,null);Se(this,et,null);Se(this,Et,null);Se(this,Ut,null);Se(this,on,0);Se(this,Vt,0);Se(this,ln,!1);Se(this,qt,null);Se(this,Ma,()=>{L(this,qt)&&It(L(this,qt),L(this,on))});Se(this,Ia,zi(()=>(le(this,qt,Rt(L(this,on))),()=>{le(this,qt,null)})));le(this,ct,e),le(this,kt,n),le(this,sn,a),this.parent=we.b,le(this,ht,!!L(this,kt).pending),le(this,Ct,Gn(()=>{we.b=this;{try{le(this,ut,pt(()=>a(L(this,ct))))}catch(s){this.error(s)}L(this,Vt)>0?ze(this,Ge,Ea).call(this):le(this,ht,!1)}},Hi))}is_pending(){return L(this,ht)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!L(this,kt).pending}update_pending_count(e){ze(this,Ge,ur).call(this,e),le(this,on,L(this,on)+e),or.add(L(this,Ma))}get_effect_pending(){return L(this,Ia).call(this),r(L(this,qt))}error(e){var n=L(this,kt).onerror;let a=L(this,kt).failed;if(L(this,ln)||!n&&!a)throw e;L(this,ut)&&(nt(L(this,ut)),le(this,ut,null)),L(this,et)&&(nt(L(this,et)),le(this,et,null)),L(this,Et)&&(nt(L(this,Et)),le(this,Et,null));var s=!1,o=!1;const i=()=>{if(s){Ti();return}s=!0,o&&wi(),Mt.ensure(),le(this,on,0),L(this,Et)!==null&&In(L(this,Et),()=>{le(this,Et,null)}),le(this,ht,this.has_pending_snippet()),le(this,ut,ze(this,Ge,Ca).call(this,()=>(le(this,ln,!1),pt(()=>L(this,sn).call(this,L(this,ct)))))),L(this,Vt)>0?ze(this,Ge,Ea).call(this):le(this,ht,!1)};var l=he;try{tt(null),o=!0,n?.(e,i),o=!1}catch(c){jn(c,L(this,Ct)&&L(this,Ct).parent)}finally{tt(l)}a&&Xt(()=>{le(this,Et,ze(this,Ge,Ca).call(this,()=>{le(this,ln,!0);try{return pt(()=>{a(L(this,ct),()=>e,()=>i)})}catch(c){return jn(c,L(this,Ct).parent),null}finally{le(this,ln,!1)}}))})}}ht=new WeakMap,ct=new WeakMap,_r=new WeakMap,kt=new WeakMap,sn=new WeakMap,Ct=new WeakMap,ut=new WeakMap,et=new WeakMap,Et=new WeakMap,Ut=new WeakMap,on=new WeakMap,Vt=new WeakMap,ln=new WeakMap,qt=new WeakMap,Ma=new WeakMap,Ia=new WeakMap,Ge=new WeakSet,Vi=function(){try{le(this,ut,pt(()=>L(this,sn).call(this,L(this,ct))))}catch(e){this.error(e)}le(this,ht,!1)},qi=function(){const e=L(this,kt).pending;e&&(le(this,et,pt(()=>e(L(this,ct)))),Mt.enqueue(()=>{le(this,ut,ze(this,Ge,Ca).call(this,()=>(Mt.ensure(),pt(()=>L(this,sn).call(this,L(this,ct)))))),L(this,Vt)>0?ze(this,Ge,Ea).call(this):(In(L(this,et),()=>{le(this,et,null)}),le(this,ht,!1))}))},Ca=function(e){var n=we,a=he,s=Ae;At(L(this,Ct)),tt(L(this,Ct)),Hn(L(this,Ct).ctx);try{return e()}catch(o){return bs(o),null}finally{At(n),tt(a),Hn(s)}},Ea=function(){const e=L(this,kt).pending;L(this,ut)!==null&&(le(this,Ut,document.createDocumentFragment()),Vs(L(this,ut),L(this,Ut))),L(this,et)===null&&le(this,et,pt(()=>e(L(this,ct))))},ur=function(e){var n;if(!this.has_pending_snippet()){this.parent&&ze(n=this.parent,Ge,ur).call(n,e);return}le(this,Vt,L(this,Vt)+e),L(this,Vt)===0&&(le(this,ht,!1),L(this,et)&&In(L(this,et),()=>{le(this,et,null)}),L(this,Ut)&&(L(this,ct).before(L(this,Ut)),le(this,Ut,null)),Xt(()=>{Mt.ensure().flush()}))};function Wi(t,e,n){const a=Xn()?ca:za;if(e.length===0){n(t.map(a));return}var s=Ne,o=we,i=xs();Promise.all(e.map(l=>Yi(l))).then(l=>{i();try{n([...t.map(a),...l])}catch(c){(o.f&_n)===0&&jn(c,o)}s?.deactivate(),Da()}).catch(l=>{jn(l,o)})}function xs(){var t=we,e=he,n=Ae,a=Ne;return function(){At(t),tt(e),Hn(n),a?.activate()}}function Da(){At(null),tt(null),Hn(null)}function ca(t){var e=Ze|rt,n=he!==null&&(he.f&Ze)!==0?he:null;return we===null||n!==null&&(n.f&dt)!==0?e|=dt:we.f|=Yn,{ctx:Ae,deps:null,effects:null,equals:_s,f:e,fn:t,reactions:null,rv:0,v:Ve,wv:0,parent:n??we,ac:null}}function Yi(t,e){let n=we;n===null&&ui();var a=n.b,s=void 0,o=Rt(Ve),i=!he,l=new Map;return al(()=>{var c=vs();s=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(Da)}catch(v){c.reject(v),Da()}var u=Ne,d=a.is_pending();i&&(a.update_pending_count(1),d||(u.increment(),l.get(u)?.reject(Nn),l.delete(u),l.set(u,c)));const f=(v,p=void 0)=>{if(d||u.activate(),p)p!==Nn&&(o.f|=cn,It(o,p));else{(o.f&cn)!==0&&(o.f^=cn),It(o,v);for(const[h,g]of l){if(l.delete(h),h===u)break;g.reject(Nn)}}i&&(a.update_pending_count(-1),d||u.decrement())};c.promise.then(f,v=>f(null,v||"unknown"))}),Bs(()=>{for(const c of l.values())c.reject(Nn)}),new Promise(c=>{function u(d){function f(){d===s?c(o):u(s)}d.then(f,f)}u(s)})}function B(t){const e=ca(t);return qs(e),e}function za(t){const e=ca(t);return e.equals=ms,e}function As(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)nt(e[n])}}function Ki(t){for(var e=t.parent;e!==null;){if((e.f&Ze)===0)return e;e=e.parent}return null}function Er(t){var e,n=we;At(Ki(t));try{As(t),e=Xs(t)}finally{At(n)}return e}function Ds(t){var e=Er(t);if(t.equals(e)||(t.v=e,t.wv=Ys()),!mn)if(_t!==null)_t.set(t,t.v);else{var n=(Wt||(t.f&dt)!==0)&&t.deps!==null?Gt:Ye;Xe(t,n)}}const Yt=new Map;function Rt(t,e){var n={f:0,v:t,reactions:null,equals:_s,rv:0,wv:0};return n}function q(t,e){const n=Rt(t);return qs(n),n}function dr(t,e=!1,n=!0){var s;const a=Rt(t);return e||(a.equals=ms),Kn&&n&&Ae!==null&&Ae.l!==null&&((s=Ae.l).s??(s.s=[])).push(a),a}function w(t,e,n=!1){he!==null&&(!mt||(he.f&Wr)!==0)&&Xn()&&(he.f&(Ze|gn|Cr|Wr))!==0&&!Ot?.includes(t)&&mi();let a=n?Be(e):e;return It(t,a)}function It(t,e){if(!t.equals(e)){var n=t.v;mn?Yt.set(t,e):Yt.set(t,n),t.v=e;var a=Mt.ensure();a.capture(t,n),(t.f&Ze)!==0&&((t.f&rt)!==0&&Er(t),Xe(t,(t.f&dt)===0?Ye:Gt)),t.wv=Ys(),Ts(t,rt),Xn()&&we!==null&&(we.f&Ye)!==0&&(we.f&(zt|pn))===0&&(lt===null?ol([t]):lt.push(t))}return e}function ea(t){w(t,t.v+1)}function Ts(t,e){var n=t.reactions;if(n!==null)for(var a=Xn(),s=n.length,o=0;o<s;o++){var i=n[o],l=i.f;if(!(!a&&i===we)){var c=(l&rt)===0;c&&Xe(i,e),(l&Ze)!==0?Ts(i,Gt):c&&((l&gn)!==0&&en!==null&&en.push(i),vn(i))}}}function Be(t){if(typeof t!="object"||t===null||un in t)return t;const e=yr(t);if(e!==ni&&e!==ai)return t;var n=new Map,a=mr(t),s=q(0),o=dn,i=l=>{if(dn===o)return l();var c=he,u=dn;tt(null),Jr(o);var d=l();return tt(c),Jr(u),d};return a&&n.set("length",q(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&pi();var d=n.get(c);return d===void 0?d=i(()=>{var f=q(u.value);return n.set(c,f),f}):w(d,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const d=i(()=>q(Ve));n.set(c,d),ea(s)}}else w(u,Ve),ea(s);return!0},get(l,c,u){if(c===un)return t;var d=n.get(c),f=c in l;if(d===void 0&&(!f||Ln(l,c)?.writable)&&(d=i(()=>{var p=Be(f?l[c]:Ve),h=q(p);return h}),n.set(c,d)),d!==void 0){var v=r(d);return v===Ve?void 0:v}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=n.get(c);d&&(u.value=r(d))}else if(u===void 0){var f=n.get(c),v=f?.v;if(f!==void 0&&v!==Ve)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,c){if(c===un)return!0;var u=n.get(c),d=u!==void 0&&u.v!==Ve||Reflect.has(l,c);if(u!==void 0||we!==null&&(!d||Ln(l,c)?.writable)){u===void 0&&(u=i(()=>{var v=d?Be(l[c]):Ve,p=q(v);return p}),n.set(c,u));var f=r(u);if(f===Ve)return!1}return d},set(l,c,u,d){var f=n.get(c),v=c in l;if(a&&c==="length")for(var p=u;p<f.v;p+=1){var h=n.get(p+"");h!==void 0?w(h,Ve):p in l&&(h=i(()=>q(Ve)),n.set(p+"",h))}if(f===void 0)(!v||Ln(l,c)?.writable)&&(f=i(()=>q(void 0)),w(f,Be(u)),n.set(c,f));else{v=f.v!==Ve;var g=i(()=>Be(u));w(f,g)}var m=Reflect.getOwnPropertyDescriptor(l,c);if(m?.set&&m.set.call(d,u),!v){if(a&&typeof c=="string"){var C=n.get("length"),P=Number(c);Number.isInteger(P)&&P>=C.v&&w(C,P+1)}ea(s)}return!0},ownKeys(l){r(s);var c=Reflect.ownKeys(l).filter(f=>{var v=n.get(f);return v===void 0||v.v!==Ve});for(var[u,d]of n)d.v!==Ve&&!(u in l)&&c.push(u);return c},setPrototypeOf(){_i()}})}var Kr,Ns,Ls,Ms;function Xi(){if(Kr===void 0){Kr=window,Ns=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Ls=Ln(e,"firstChild").get,Ms=Ln(e,"nextSibling").get,qr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),qr(n)&&(n.__t=void 0)}}function hn(t=""){return document.createTextNode(t)}function Un(t){return Ls.call(t)}function ua(t){return Ms.call(t)}function k(t,e){return Un(t)}function F(t,e=!1){{var n=Un(t);return n instanceof Comment&&n.data===""?ua(n):n}}function z(t,e=1,n=!1){let a=t;for(;e--;)a=ua(a);return a}function Gi(t){t.textContent=""}function Is(){return!1}let Xr=!1;function Zi(){Xr||(Xr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Ha(t){var e=he,n=we;tt(null),At(null);try{return t()}finally{tt(e),At(n)}}function Ji(t,e,n,a=n){t.addEventListener(e,()=>Ha(n));const s=t.__on_r;s?t.__on_r=()=>{s(),a(!0)}:t.__on_r=()=>a(!0),Zi()}function Os(t){we===null&&he===null&&vi(),he!==null&&(he.f&dt)!==0&&we===null&&fi(),mn&&di()}function Qi(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Dt(t,e,n,a=!0){var s=we;s!==null&&(s.f&wt)!==0&&(t|=wt);var o={ctx:Ae,deps:null,nodes_start:null,nodes_end:null,f:t|rt,first:null,fn:e,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Na(o),o.f|=kr}catch(c){throw nt(o),c}else e!==null&&vn(o);if(a){var i=o;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&Yn)===0&&(i=i.first),i!==null&&(i.parent=s,s!==null&&Qi(i,s),he!==null&&(he.f&Ze)!==0&&(t&pn)===0)){var l=he;(l.effects??(l.effects=[])).push(i)}}return o}function $i(){return he!==null&&!mt}function Bs(t){const e=Dt(Oa,null,!1);return Xe(e,Ye),e.teardown=t,e}function Le(t){Os();var e=we.f,n=!he&&(e&zt)!==0&&(e&kr)===0;if(n){var a=Ae;(a.e??(a.e=[])).push(t)}else return Rs(t)}function Rs(t){return Dt(br|hs,t,!1)}function el(t){return Os(),Dt(Oa|hs,t,!0)}function tl(t){Mt.ensure();const e=Dt(pn|Yn,t,!0);return(n={})=>new Promise(a=>{n.outro?In(e,()=>{nt(e),a(void 0)}):(nt(e),a(void 0))})}function nl(t){return Dt(br,t,!1)}function al(t){return Dt(Cr|Yn,t,!0)}function ja(t,e=0){return Dt(Oa|e,t,!0)}function ce(t,e=[],n=[]){Wi(e,n,a=>{Dt(Oa,()=>t(...a.map(r)),!0)})}function Gn(t,e=0){var n=Dt(gn|e,t,!0);return n}function pt(t,e=!0){return Dt(zt|Yn,t,!0,e)}function Fs(t){var e=t.teardown;if(e!==null){const n=mn,a=he;Zr(!0),tt(null);try{e.call(null)}finally{Zr(n),tt(a)}}}function zs(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const s=n.ac;s!==null&&Ha(()=>{s.abort(Nn)});var a=n.next;(n.f&pn)!==0?n.parent=null:nt(n,e),n=a}}function rl(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&zt)===0&&nt(e),e=n}}function nt(t,e=!0){var n=!1;(e||(t.f&ii)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(sl(t.nodes_start,t.nodes_end),n=!0),zs(t,e&&!n),Ta(t,0),Xe(t,_n);var a=t.transitions;if(a!==null)for(const o of a)o.stop();Fs(t);var s=t.parent;s!==null&&s.first!==null&&Hs(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function sl(t,e){for(;t!==null;){var n=t===e?null:ua(t);t.remove(),t=n}}function Hs(t){var e=t.parent,n=t.prev,a=t.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=n))}function In(t,e,n=!0){var a=[];Pr(t,a,!0),js(a,()=>{n&&nt(t),e&&e()})}function js(t,e){var n=t.length;if(n>0){var a=()=>--n||e();for(var s of t)s.out(a)}else e()}function Pr(t,e,n){if((t.f&wt)===0){if(t.f^=wt,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var a=t.first;a!==null;){var s=a.next,o=(a.f&Wn)!==0||(a.f&zt)!==0;Pr(a,e,o?n:!1),a=s}}}function xr(t){Us(t,!0)}function Us(t,e){if((t.f&wt)!==0){t.f^=wt,(t.f&Ye)===0&&(Xe(t,rt),vn(t));for(var n=t.first;n!==null;){var a=n.next,s=(n.f&Wn)!==0||(n.f&zt)!==0;Us(n,s?e:!1),n=a}if(t.transitions!==null)for(const o of t.transitions)(o.is_global||e)&&o.in()}}function Vs(t,e){for(var n=t.nodes_start,a=t.nodes_end;n!==null;){var s=n===a?null:ua(n);e.append(n),n=s}}let On=!1;function Gr(t){On=t}let mn=!1;function Zr(t){mn=t}let he=null,mt=!1;function tt(t){he=t}let we=null;function At(t){we=t}let Ot=null;function qs(t){he!==null&&(Ot===null?Ot=[t]:Ot.push(t))}let We=null,at=0,lt=null;function ol(t){lt=t}let Ws=1,na=0,dn=na;function Jr(t){dn=t}let Wt=!1;function Ys(){return++Ws}function Ua(t){var e=t.f;if((e&rt)!==0)return!0;if((e&Gt)!==0){var n=t.deps,a=(e&dt)!==0;if(n!==null){var s,o,i=(e&Aa)!==0,l=a&&we!==null&&!Wt,c=n.length;if((i||l)&&(we===null||(we.f&_n)===0)){var u=t,d=u.parent;for(s=0;s<c;s++)o=n[s],(i||!o?.reactions?.includes(u))&&(o.reactions??(o.reactions=[])).push(u);i&&(u.f^=Aa),l&&d!==null&&(d.f&dt)===0&&(u.f^=dt)}for(s=0;s<c;s++)if(o=n[s],Ua(o)&&Ds(o),o.wv>t.wv)return!0}(!a||we!==null&&!Wt)&&Xe(t,Ye)}return!1}function Ks(t,e,n=!0){var a=t.reactions;if(a!==null&&!Ot?.includes(t))for(var s=0;s<a.length;s++){var o=a[s];(o.f&Ze)!==0?Ks(o,e,!1):e===o&&(n?Xe(o,rt):(o.f&Ye)!==0&&Xe(o,Gt),vn(o))}}function Xs(t){var g;var e=We,n=at,a=lt,s=he,o=Wt,i=Ot,l=Ae,c=mt,u=dn,d=t.f;We=null,at=0,lt=null,Wt=(d&dt)!==0&&(mt||!On||he===null),he=(d&(zt|pn))===0?t:null,Ot=null,Hn(t.ctx),mt=!1,dn=++na,t.ac!==null&&(Ha(()=>{t.ac.abort(Nn)}),t.ac=null);try{t.f|=sr;var f=t.fn,v=f(),p=t.deps;if(We!==null){var h;if(Ta(t,at),p!==null&&at>0)for(p.length=at+We.length,h=0;h<We.length;h++)p[at+h]=We[h];else t.deps=p=We;if(!Wt||(d&Ze)!==0&&t.reactions!==null)for(h=at;h<p.length;h++)((g=p[h]).reactions??(g.reactions=[])).push(t)}else p!==null&&at<p.length&&(Ta(t,at),p.length=at);if(Xn()&&lt!==null&&!mt&&p!==null&&(t.f&(Ze|Gt|rt))===0)for(h=0;h<lt.length;h++)Ks(lt[h],t);return s!==null&&s!==t&&(na++,lt!==null&&(a===null?a=lt:a.push(...lt))),(t.f&cn)!==0&&(t.f^=cn),v}catch(m){return bs(m)}finally{t.f^=sr,We=e,at=n,lt=a,he=s,Wt=o,Ot=i,Hn(l),mt=c,dn=u}}function il(t,e){let n=e.reactions;if(n!==null){var a=ti.call(n,t);if(a!==-1){var s=n.length-1;s===0?n=e.reactions=null:(n[a]=n[s],n.pop())}}n===null&&(e.f&Ze)!==0&&(We===null||!We.includes(e))&&(Xe(e,Gt),(e.f&(dt|Aa))===0&&(e.f^=Aa),As(e),Ta(e,0))}function Ta(t,e){var n=t.deps;if(n!==null)for(var a=e;a<n.length;a++)il(t,n[a])}function Na(t){var e=t.f;if((e&_n)===0){Xe(t,Ye);var n=we,a=On;we=t,On=!0;try{(e&gn)!==0?rl(t):zs(t),Fs(t);var s=Xs(t);t.teardown=typeof s=="function"?s:null,t.wv=Ws;var o;ds&&Mi&&(t.f&rt)!==0&&t.deps}finally{On=a,we=n}}}async function Gs(){await Promise.resolve(),ks()}function r(t){var e=t.f,n=(e&Ze)!==0;if(he!==null&&!mt){var a=we!==null&&(we.f&_n)!==0;if(!a&&!Ot?.includes(t)){var s=he.deps;if((he.f&sr)!==0)t.rv<na&&(t.rv=na,We===null&&s!==null&&s[at]===t?at++:We===null?We=[t]:(!Wt||!We.includes(t))&&We.push(t));else{(he.deps??(he.deps=[])).push(t);var o=t.reactions;o===null?t.reactions=[he]:o.includes(he)||o.push(he)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&dt)===0&&(i.f^=dt)}if(mn){if(Yt.has(t))return Yt.get(t);if(n){i=t;var c=i.v;return((i.f&Ye)===0&&i.reactions!==null||Zs(i))&&(c=Er(i)),Yt.set(i,c),c}}else if(n){if(i=t,_t?.has(i))return _t.get(i);Ua(i)&&Ds(i)}if(_t?.has(t))return _t.get(t);if((t.f&cn)!==0)throw t.v;return t.v}function Zs(t){if(t.v===Ve)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Yt.has(e)||(e.f&Ze)!==0&&Zs(e))return!0;return!1}function vt(t){var e=mt;try{return mt=!0,t()}finally{mt=e}}const ll=-7169;function Xe(t,e){t.f=t.f&ll|e}function cl(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(un in t)fr(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&un in n&&fr(n)}}}function fr(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let a in t)try{fr(t[a],e)}catch{}const n=yr(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const a=fs(n);for(let s in a){const o=a[s].get;if(o)try{o.call(t)}catch{}}}}}const ul=["touchstart","touchmove"];function dl(t){return ul.includes(t)}const Js=new Set,vr=new Set;function fl(t,e,n,a={}){function s(o){if(a.capture||Zn.call(e,o),!o.cancelBubble)return Ha(()=>n?.call(this,o))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Xt(()=>{e.addEventListener(t,s,a)}):e.addEventListener(t,s,a),s}function Ar(t,e,n,a,s){var o={capture:a,passive:s},i=fl(t,e,n,o);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Bs(()=>{e.removeEventListener(t,i,o)})}function qe(t){for(var e=0;e<t.length;e++)Js.add(t[e]);for(var n of vr)n(t)}let Qr=null;function Zn(t){var e=this,n=e.ownerDocument,a=t.type,s=t.composedPath?.()||[],o=s[0]||t.target;Qr=t;var i=0,l=Qr===t&&t.__root;if(l){var c=s.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=s.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(o=s[i]||t.target,o!==e){ar(t,"currentTarget",{configurable:!0,get(){return o||n}});var d=he,f=we;tt(null),At(null);try{for(var v,p=[];o!==null;){var h=o.assignedSlot||o.parentNode||o.host||null;try{var g=o["__"+a];if(g!=null&&(!o.disabled||t.target===o))if(mr(g)){var[m,...C]=g;m.apply(o,[t,...C])}else g.call(o,t)}catch(P){v?p.push(P):v=P}if(t.cancelBubble||h===e||h===null)break;o=h}if(v){for(let P of p)queueMicrotask(()=>{throw P});throw v}}finally{t.__root=e,delete t.currentTarget,tt(d),At(f)}}}function Qs(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function aa(t,e){var n=we;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function W(t,e){var n=(e&xi)!==0,a=(e&Ai)!==0,s,o=!t.startsWith("<!>");return()=>{s===void 0&&(s=Qs(o?t:"<!>"+t),n||(s=Un(s)));var i=a||Ns?document.importNode(s,!0):s.cloneNode(!0);if(n){var l=Un(i),c=i.lastChild;aa(l,c)}else aa(i,i);return i}}function vl(t,e,n="svg"){var a=!t.startsWith("<!>"),s=`<${n}>${a?t:"<!>"+t}</${n}>`,o;return()=>{if(!o){var i=Qs(s),l=Un(i);o=Un(l)}var c=o.cloneNode(!0);return aa(c,c),c}}function hl(t,e){return vl(t,e,"svg")}function Ie(t=""){{var e=hn(t+"");return aa(e,e),e}}function Z(){var t=document.createDocumentFragment(),e=document.createComment(""),n=hn();return t.append(e,n),aa(e,n),t}function _(t,e){t!==null&&t.before(e)}function lf(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function Bt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function gl(t,e){return pl(t,e)}const Tn=new Map;function pl(t,{target:e,anchor:n,props:a={},events:s,context:o,intro:i=!0}){Xi();var l=new Set,c=f=>{for(var v=0;v<f.length;v++){var p=f[v];if(!l.has(p)){l.add(p);var h=dl(p);e.addEventListener(p,Zn,{passive:h});var g=Tn.get(p);g===void 0?(document.addEventListener(p,Zn,{passive:h}),Tn.set(p,1)):Tn.set(p,g+1)}}};c(wr(Js)),vr.add(c);var u=void 0,d=tl(()=>{var f=n??e.appendChild(hn());return ji(f,{pending:()=>{}},v=>{if(o){ee({});var p=Ae;p.c=o}s&&(a.$$events=s),u=t(v,a)||{},o&&te()}),()=>{for(var v of l){e.removeEventListener(v,Zn);var p=Tn.get(v);--p===0?(document.removeEventListener(v,Zn),Tn.delete(v)):Tn.set(v,p)}vr.delete(c),f!==n&&f.parentNode?.removeChild(f)}});return _l.set(u,d),u}let _l=new WeakMap;var Lt,Pt,gt,ia,la;class Va{constructor(e,n=!0){it(this,"anchor");Se(this,Lt,new Map);Se(this,Pt,new Map);Se(this,gt,new Map);Se(this,ia,!0);Se(this,la,()=>{var e=Ne;if(L(this,Lt).has(e)){var n=L(this,Lt).get(e),a=L(this,Pt).get(n);if(a)xr(a);else{var s=L(this,gt).get(n);s&&(L(this,Pt).set(n,s.effect),L(this,gt).delete(n),s.fragment.lastChild.remove(),this.anchor.before(s.fragment),a=s.effect)}for(const[o,i]of L(this,Lt)){if(L(this,Lt).delete(o),o===e)break;const l=L(this,gt).get(i);l&&(nt(l.effect),L(this,gt).delete(i))}for(const[o,i]of L(this,Pt)){if(o===n)continue;const l=()=>{if(Array.from(L(this,Lt).values()).includes(o)){var u=document.createDocumentFragment();Vs(i,u),u.append(hn()),L(this,gt).set(o,{effect:i,fragment:u})}else nt(i);L(this,Pt).delete(o)};L(this,ia)||!a?In(i,l,!1):l()}}});this.anchor=e,le(this,ia,n)}ensure(e,n){var a=Ne,s=Is();if(n&&!L(this,Pt).has(e)&&!L(this,gt).has(e))if(s){var o=document.createDocumentFragment(),i=hn();o.append(i),L(this,gt).set(e,{effect:pt(()=>n(i)),fragment:o})}else L(this,Pt).set(e,pt(()=>n(this.anchor)));if(L(this,Lt).set(a,e),s){for(const[l,c]of L(this,Pt))l===e?a.skipped_effects.delete(c):a.skipped_effects.add(c);for(const[l,c]of L(this,gt))l===e?a.skipped_effects.delete(c.effect):a.skipped_effects.add(c.effect);a.add_callback(L(this,la))}else L(this,la).call(this)}}Lt=new WeakMap,Pt=new WeakMap,gt=new WeakMap,ia=new WeakMap,la=new WeakMap;const ml=0,Ja=1;function wl(t,e,n,a,s){var o=Xn(),i=Ve,l=o?Rt(i):dr(i,!1,!1),c=o?Rt(i):dr(i,!1,!1),u=new Va(t);Gn(()=>{var d=e(),f=!1;if(ri(d)){var v=xs(),p=!1;const h=g=>{if(!f){p=!0,v();try{g()}finally{Da(),Mn||ks()}}};d.then(g=>{h(()=>{It(l,g),u.ensure(Ja,a&&(m=>a(m,l)))})},g=>{h(()=>{if(It(c,g),u.ensure(Ja,s&&(m=>s(m,c))),!s)throw c.v})}),Xt(()=>{p||h(()=>{u.ensure(ml,n)})})}else It(l,d),u.ensure(Ja,a&&(h=>a(h,l)));return()=>{f=!0}})}function Y(t,e,n=!1){var a=new Va(t),s=n?Wn:0;function o(i,l){a.ensure(i,l)}Gn(()=>{var i=!1;e((l,c=!0)=>{i=!0,o(c,l)}),i||o(!1,null)},s)}function ge(t,e){ja(()=>{var n=e();for(var a in n){var s=n[a];s?t.style.setProperty(a,s):t.style.removeProperty(a)}})}function yl(t,e,n){for(var a=t.items,s=[],o=e.length,i=0;i<o;i++)Pr(e[i].e,s,!0);var l=o>0&&s.length===0&&n!==null;if(l){var c=n.parentNode;Gi(c),c.append(n),a.clear(),St(t,e[0].prev,e[o-1].next)}js(s,()=>{for(var u=0;u<o;u++){var d=e[u];l||(a.delete(d.k),St(t,d.prev,d.next)),nt(d.e,!l)}})}function qa(t,e,n,a,s,o=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&ps)!==0;if(c){var u=t;i=u.appendChild(hn())}var d=null,f=!1,v=new Map,p=za(()=>{var C=n();return mr(C)?C:C==null?[]:wr(C)}),h,g;function m(){bl(g,h,l,v,i,s,e,a,n),o!==null&&(h.length===0?d?xr(d):d=pt(()=>o(i)):d!==null&&In(d,()=>{d=null}))}Gn(()=>{g??(g=we),h=r(p);var C=h.length;if(!(f&&C===0)){f=C===0;var P,y,T,D;if(Is()){var x=new Set,b=Ne;for(y=0;y<C;y+=1){T=h[y],D=a(T,y);var E=l.items.get(D)??v.get(D);E?(e&(Ba|Ra))!==0&&$s(E,T,y,e):(P=eo(null,l,null,null,T,D,y,s,e,n,!0),v.set(D,P)),x.add(D)}for(const[M,J]of l.items)x.has(M)||b.skipped_effects.add(J.e);b.add_callback(m)}else m();r(p)}})}function bl(t,e,n,a,s,o,i,l,c){var u=(i&yi)!==0,d=(i&(Ba|Ra))!==0,f=e.length,v=n.items,p=n.first,h=p,g,m=null,C,P=[],y=[],T,D,x,b;if(u)for(b=0;b<f;b+=1)T=e[b],D=l(T,b),x=v.get(D),x!==void 0&&(x.a?.measure(),(C??(C=new Set)).add(x));for(b=0;b<f;b+=1){if(T=e[b],D=l(T,b),x=v.get(D),x===void 0){var E=a.get(D);if(E!==void 0){a.delete(D),v.set(D,E);var M=m?m.next:h;St(n,m,E),St(n,E,M),Qa(E,M,s),m=E}else{var J=h?h.e.nodes_start:s;m=eo(J,n,m,m===null?n.first:m.next,T,D,b,o,i,c)}v.set(D,m),P=[],y=[],h=m.next;continue}if(d&&$s(x,T,b,i),(x.e.f&wt)!==0&&(xr(x.e),u&&(x.a?.unfix(),(C??(C=new Set)).delete(x))),x!==h){if(g!==void 0&&g.has(x)){if(P.length<y.length){var K=y[0],H;m=K.prev;var X=P[0],oe=P[P.length-1];for(H=0;H<P.length;H+=1)Qa(P[H],K,s);for(H=0;H<y.length;H+=1)g.delete(y[H]);St(n,X.prev,oe.next),St(n,m,X),St(n,oe,K),h=K,m=oe,b-=1,P=[],y=[]}else g.delete(x),Qa(x,h,s),St(n,x.prev,x.next),St(n,x,m===null?n.first:m.next),St(n,m,x),m=x;continue}for(P=[],y=[];h!==null&&h.k!==D;)(h.e.f&wt)===0&&(g??(g=new Set)).add(h),y.push(h),h=h.next;if(h===null)continue;x=h}P.push(x),m=x,h=x.next}if(h!==null||g!==void 0){for(var ne=g===void 0?[]:wr(g);h!==null;)(h.e.f&wt)===0&&ne.push(h),h=h.next;var de=ne.length;if(de>0){var Q=(i&ps)!==0&&f===0?s:null;if(u){for(b=0;b<de;b+=1)ne[b].a?.measure();for(b=0;b<de;b+=1)ne[b].a?.fix()}yl(n,ne,Q)}}u&&Xt(()=>{if(C!==void 0)for(x of C)x.a?.apply()}),t.first=n.first&&n.first.e,t.last=m&&m.e;for(var $ of a.values())nt($.e);a.clear()}function $s(t,e,n,a){(a&Ba)!==0&&It(t.v,e),(a&Ra)!==0?It(t.i,n):t.i=n}function eo(t,e,n,a,s,o,i,l,c,u,d){var f=(c&Ba)!==0,v=(c&bi)===0,p=f?v?dr(s,!1,!1):Rt(s):s,h=(c&Ra)===0?i:Rt(i),g={i:h,v:p,k:o,a:null,e:null,prev:n,next:a};try{if(t===null){var m=document.createDocumentFragment();m.append(t=hn())}return g.e=pt(()=>l(t,p,h,u),Ni),g.e.prev=n&&n.e,g.e.next=a&&a.e,n===null?d||(e.first=g):(n.next=g,n.e.next=g.e),a!==null&&(a.prev=g,a.e.prev=g.e),g}finally{}}function Qa(t,e,n){for(var a=t.next?t.next.e.nodes_start:n,s=e?e.e.nodes_start:n,o=t.e.nodes_start;o!==null&&o!==a;){var i=ua(o);s.before(o),o=i}}function St(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function ye(t,e,...n){var a=new Va(t);Gn(()=>{const s=e()??null;a.ensure(s,s&&(o=>s(o,...n)))},Wn)}function Sl(t,e,n){var a=new Va(t);Gn(()=>{var s=e()??null;a.ensure(s,s&&(o=>n(o,s)))},Wn)}function to(t){var e,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=to(t[e]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function kl(){for(var t,e,n=0,a="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=to(t))&&(a&&(a+=" "),a+=e);return a}function pe(t){return typeof t=="object"?kl(t):t??""}const $r=[...` 	
\r\f \v\uFEFF`];function Cl(t,e,n){var a=t==null?"":""+t;if(e&&(a=a?a+" "+e:e),n){for(var s in n)if(n[s])a=a?a+" "+s:s;else if(a.length)for(var o=s.length,i=0;(i=a.indexOf(s,i))>=0;){var l=i+o;(i===0||$r.includes(a[i-1]))&&(l===a.length||$r.includes(a[l]))?a=(i===0?"":a.substring(0,i))+a.substring(l+1):i=l}}return a===""?null:a}function El(t,e){return t==null?null:String(t)}function _e(t,e,n,a,s,o){var i=t.__className;if(i!==n||i===void 0){var l=Cl(n,a,o);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(o&&s!==o)for(var c in o){var u=!!o[c];(s==null||u!==!!s[c])&&t.classList.toggle(c,u)}return o}function Vn(t,e,n,a){var s=t.__style;if(s!==e){var o=El(e);o==null?t.removeAttribute("style"):t.style.cssText=o,t.__style=e}return a}const Pl=Symbol("is custom element"),xl=Symbol("is html");function $a(t,e){var n=Dr(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Pa(t,e){var n=Dr(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Pe(t,e,n,a){var s=Dr(t);s[e]!==(s[e]=n)&&(e==="loading"&&(t[ci]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Al(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Dr(t){return t.__attributes??(t.__attributes={[Pl]:t.nodeName.includes("-"),[xl]:t.namespaceURI===Di})}var es=new Map;function Al(t){var e=t.getAttribute("is")||t.nodeName,n=es.get(e);if(n)return n;es.set(e,n=[]);for(var a,s=t,o=Element.prototype;o!==s;){a=fs(s);for(var i in a)a[i].set&&n.push(i);s=yr(s)}return n}function Dl(t,e,n=e){var a=new WeakSet;Ji(t,"input",async s=>{var o=s?t.defaultValue:t.value;if(o=er(t)?tr(o):o,n(o),Ne!==null&&a.add(Ne),await Gs(),o!==(o=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=o??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),vt(e)==null&&t.value&&(n(er(t)?tr(t.value):t.value),Ne!==null&&a.add(Ne)),ja(()=>{var s=e();if(t===document.activeElement){var o=Sa??Ne;if(a.has(o))return}er(t)&&s===tr(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function er(t){var e=t.type;return e==="number"||e==="range"}function tr(t){return t===""?null:+t}function ts(t,e){return t===e||t?.[un]===e}function st(t={},e,n,a){return nl(()=>{var s,o;return ja(()=>{s=o,o=[],vt(()=>{t!==n(...o)&&(e(t,...o),s&&ts(n(...s),t)&&e(null,...s))})}),()=>{Xt(()=>{o&&ts(n(...o),t)&&e(null,...o)})}}),t}function Wa(t=!1){const e=Ae,n=e.l.u;if(!n)return;let a=()=>cl(e.s);if(t){let s=0,o={};const i=ca(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==o[u]&&(o[u]=c[u],l=!0);return l&&s++,s});a=()=>r(i)}n.b.length&&el(()=>{ns(e,a),rr(n.b)}),Le(()=>{const s=vt(()=>n.m.map(si));return()=>{for(const o of s)typeof o=="function"&&o()}}),n.a.length&&Le(()=>{ns(e,a),rr(n.a)})}function ns(t,e){if(t.l.s)for(const n of t.l.s)r(n);e()}let ya=!1;function Tl(t){var e=ya;try{return ya=!1,[t(),ya]}finally{ya=e}}function ve(t,e,n,a){var s=!Kn||(n&ki)!==0,o=(n&Ei)!==0,i=(n&Pi)!==0,l=a,c=!0,u=()=>(c&&(c=!1,l=i?vt(a):a),l),d;if(o){var f=un in t||li in t;d=Ln(t,e)?.set??(f&&e in t?y=>t[e]=y:void 0)}var v,p=!1;o?[v,p]=Tl(()=>t[e]):v=t[e],v===void 0&&a!==void 0&&(v=u(),d&&(s&&gi(),d(v)));var h;if(s?h=()=>{var y=t[e];return y===void 0?u():(c=!0,y)}:h=()=>{var y=t[e];return y!==void 0&&(l=void 0),y===void 0?l:y},s&&(n&Ci)===0)return h;if(d){var g=t.$$legacy;return(function(y,T){return arguments.length>0?((!s||!T||g||p)&&d(T?h():y),y):h()})}var m=!1,C=((n&Si)!==0?ca:za)(()=>(m=!1,h()));o&&r(C);var P=we;return(function(y,T){if(arguments.length>0){const D=T?r(C):s&&o?Be(y):y;return w(C,D),m=!0,l!==void 0&&(l=D),y}return mn&&m||(P.f&_n)!==0?C.v:r(C)})}function ke(t){Ae===null&&gs(),Kn&&Ae.l!==null?Nl(Ae).m.push(t):Le(()=>{const e=vt(t);if(typeof e=="function")return e})}function Nl(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Ll="5";var us;typeof window<"u"&&((us=window.__svelte??(window.__svelte={})).v??(us.v=new Set)).add(Ll);Ii();const no={};function Ml(t){Fe(no,t)}function ao(){const t=Re(no);if(!t)throw new Error("No SearchContext found");return t}const ro={};function Il(t){Fe(ro,t)}function Tt(){const t=Re(ro);if(!t)throw new Error("No AppHistoryContext found");return t}function Ol(t,e){ee(e,!0);const{addSearchParam:n,deleteSearchParam:a,getAppLocation:s}=Tt(),o=B(()=>s().searchParams),i="search",l=Be({value:s().searchParams.get(i)||""}),c=f=>{(r(o).get(i)||"")!==f&&(f===""?a(i):n(i,f))};Le(()=>{r(o);const f=l.value;vt(()=>{c(f)})}),Ml(l);var u=Z(),d=F(u);ye(d,()=>e.children??xe),_(t,u),te()}const so={};function Bl(t){Fe(so,t)}function oo(){const t=Re(so);if(!t)throw new Error("No TagSearchContext found");return t}function Rl(t,e){ee(e,!0);const n=Be({value:""});Bl(n);var a=Z(),s=F(a);ye(s,()=>e.children??xe),_(t,a),te()}const io={};function Fl(t){Fe(io,t)}function lo(){const t=Re(io);if(!t)throw new Error("No FeedOrderContext found");return t}function zl(t,e){ee(e,!0);const{addSearchParam:n,deleteSearchParam:a,getAppLocation:s}=Tt(),o=B(()=>s().searchParams),i="feedOrder";let l=q(Be(s().searchParams.get(i)||"newest"));const c=p=>{(r(o).get(i)||"newest")!==p&&(p==="newest"?a(i):n(i,p))};Le(()=>{r(o),r(l),vt(()=>{c(r(l))})}),Fl({getFeedOrder:()=>r(l),setFeedOrder:p=>{w(l,p,!0)}});var f=Z(),v=F(f);ye(v,()=>e.children??xe),_(t,f),te()}const co={};function Hl(t){Fe(co,t)}function Ya(){const t=Re(co);if(!t)throw new Error("No SidebarContext found");return t}function jl(t,e){ee(e,!0);const n=(d,f)=>{if(!f)return d;if(f.type==="closed")return{type:"closed"};switch(d.type){case"opened":return f.type==="close"?{type:"closing"}:f.type==="swipe"?{type:"openSwiping"}:d;case"closed":return f.type==="open"?{type:"opening"}:f.type==="swipe"?{type:"closeSwiping"}:d;case"openSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"closeSwiping":return f.type==="open"?{type:"opening"}:f.type==="close"?{type:"closing"}:d;case"opening":return f.type==="opened"?{type:"opened"}:d;default:return d}};let a=q(Be(n({type:"closed"})));const s=d=>{const f=vt(()=>r(a));w(a,n(f,d),!0)};Hl({sidebarOpen:()=>{s({type:"open"})},sidebarClose:()=>{s({type:"close"})},handleComputeState:s,getSidebarState:()=>r(a)});var c=Z(),u=F(c);ye(u,()=>e.children??xe),_(t,c),te()}const uo={};function Ul(t){Fe(uo,t)}function fo(){const t=Re(uo);if(!t)throw new Error("No SelectedTagsContext found");return t}const vo=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function cf(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}const Vl=(t,e)=>{if(t.size!==e.size)return!0;for(const n of t)if(!e.has(n))return!0;return!1};function ql(t,e){ee(e,!0);const{getAppLocation:n,replace:a}=Tt(),s=B(n),o=B(()=>r(s).searchParams),i="selectedTags",l=()=>new Set(n().searchParams.get(i)?.split(",")||[]);let c=q(Be(l()));const u=()=>{const g=l();if(Vl(g,r(c))){const m=r(s).pathname;r(c).size===0?r(o).delete(i):r(o).set(i,Array.from(r(c)).join(",")),a(`${m}${r(o).size>0?`?${r(o).toString()}`:""}`)}};Le(()=>{r(o),r(c),vt(()=>{u()})}),Ul({getSelectedTags:()=>r(c),addTag:g=>{r(c).has(g)||w(c,new Set([...r(c),g]),!0)},removeTag:g=>{const m=new Set(r(c));m.delete(g),w(c,m,!0)}});var p=Z(),h=F(p);ye(h,()=>e.children??xe),_(t,p),te()}const ho={};function Wl(t){Fe(ho,t)}function Tr(){const t=Re(ho);if(!t)throw new Error("No LocalDBContext found");return t}const go={};function Yl(t){Fe(go,t)}function po(){const t=Re(go);if(!t)throw new Error("No SettingsContext found");return t}const _o={};function Kl(t){Fe(_o,t)}function wn(){const t=Re(_o);if(!t)throw new Error("No BroadcastContext found");return t}const Xl="AppStorage",Gl=1,Jn="account",xa="settings",yt="notes",bt="tags",Zl="syncLog",Zt="success",Ft="error",He=(t,e,n)=>{t?.addEventListener(e,n)},as=(t,e)=>new Promise((n,a)=>{const o=t?.transaction(e,"readonly")?.objectStore(e).getAll();He(o,Zt,()=>{const i=o?.result||[];n(i)}),He(o,Ft,i=>{a(i)})}),hr=(t,e,n)=>new Promise((a,s)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);He(i,Zt,()=>{const l=i?.result?.data;a(l)}),He(i,Ft,l=>{s(l)})}),ta=(t,e,n,a)=>new Promise((s,o)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:a});He(c,Zt,()=>{s()}),He(c,Ft,u=>{o(u)})}),nr=async(t,e,n)=>{const s=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(o=>{const i=s?.put(o);return new Promise((l,c)=>{He(i,Zt,()=>{l()}),He(i,Ft,u=>{c(u)})})}))},Jl=(t,e,n)=>new Promise((a,s)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);He(l,Zt,()=>{a()}),He(l,Ft,c=>{s(c)})}),ba=async(t,e,n)=>{const s=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(o=>{const i=s?.delete(o);return new Promise((l,c)=>{He(i,Zt,()=>{l()}),He(i,Ft,u=>{c(u)})})}))},tn=(t,e)=>new Promise((n,a)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();He(i,Zt,()=>{n()}),He(i,Ft,l=>{a(l)})});function Ql(t,e){ee(e,!0);let n=q(Be({showFavicon:!1}));const{getDB:a}=Tr(),{createBroadcastChannel:s,tabId:o}=wn(),i=s(),l=B(a),c=async()=>{const g=await hr(r(l),xa,"default");g&&w(n,g,!0)},u=async()=>{c()},d=async g=>{const m=JSON.parse(g.data),C=m;if(m.tabId&&m.tabId===o){C.type==="exit"&&(w(n,{showFavicon:!1},!0),tn(r(l),xa));return}C.type==="updateSettings"?c():C.type==="exit"&&w(n,{showFavicon:!1},!0)},f=()=>r(n).showFavicon,v=async g=>{r(n).showFavicon=g,await ta(r(l),xa,"default",{showFavicon:g}),i.postMessage({type:"updateSettings"})};ke(()=>(u(),i.addEventListener(d),()=>{i.removeEventListener(d)})),Yl({getFaviconEnabled:f,setFaviconShown:v});var p=Z(),h=F(p);ye(h,()=>e.children??xe),_(t,p),te()}const mo={};function $l(t){Fe(mo,t)}function wo(){const t=Re(mo);if(!t)throw new Error("No AccountContext found");return t}function ec(t,e){ee(e,!0);let n=q(void 0);const{getDB:a}=Tr(),{createBroadcastChannel:s,tabId:o}=wn(),i=B(a),l=s(),c=async()=>{const y=await hr(r(i),Jn,"default");w(n,y,!0)},u=y=>ta(r(i),Jn,"default",y),d=async y=>{const T=await hr(r(i),Jn,"default");T!==void 0&&w(n,T,!0),y(T)},f=async y=>{const T=JSON.parse(y.data);if(T.tabId&&T.tabId===o)return;const D=T;D.type==="initLocalAccount"?w(n,null):D.type==="initCloudAccount"?c():D.type==="disconnectCloudAccount"?w(n,null):D.type==="exit"?w(n,void 0):D.type==="updateAccount"&&c()};ke(()=>(l.addEventListener(f),()=>{l.removeEventListener(f)})),$l({init:d,getAccount:()=>r(n),initLocalAccount:async()=>{w(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async y=>{const T={encryptedClientKey:y.encryptedClientKey||"",subscriptionExpires:y.subscriptionExpires||-1,lastSync:-1};await u(T),w(n,T,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{w(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async y=>{if(!r(n))throw new Error("No account to update subscription for");const T={...r(n),subscriptionExpires:y};await u(T),l.postMessage({type:"updateAccount"})},exitApp:async()=>{w(n,void 0),l.postMessage({type:"exit"}),await tn(r(i),Jn)}});var C=Z(),P=F(C);ye(P,()=>e.children??xe),_(t,C),te()}const yo={};function tc(t){Fe(yo,t)}function da(){const t=Re(yo);if(!t)throw new Error("No NotesContext found");return t}const nc=()=>crypto.randomUUID(),ac=t=>{const e=new Map;for(const n of t||[])for(const a of n?.data.tags||[])e.set(a,{name:a,count:(e.get(a)?.count||0)+1});return e};function rc(t,e){ee(e,!0);const{getDB:n}=Tr(),{createBroadcastChannel:a,tabId:s}=wn(),o=B(n),i=a(),l=720*60*60*1e3;let c=q(0),u=q(!1),d=q(()=>new Map),f=q(()=>[]),v=q(()=>new Map);const p=()=>r(u),h=()=>r(c)>0,g=()=>{r(c)>0&&w(c,r(c)-1)},m=A=>{const R=r(f)(),S=r(v)(),I={...A};R.push(I),S.set(I.id,I),w(f,()=>R),w(v,()=>S)},C=A=>{const R=r(f)(),S=r(v)(),I=S.get(A.id);I&&(I.data=A.data),w(f,()=>R),w(v,()=>S)},P=A=>{const R=r(f)(),S=r(v)(),I=S.get(A);S.has(A)&&S.delete(A),I?.data?.type==="draft"&&S.delete("draft"),I&&(I.data=void 0),w(f,()=>R),w(v,()=>S)},y=()=>{w(f,()=>[]),w(d,()=>new Map),w(v,()=>new Map)},T=()=>r(f),D=A=>{const R=r(d)();for(const S of A){const I=R.get(S);I?I.count++:R.set(S,{name:S,count:1})}w(d,()=>R)},x=A=>{const R=r(d)();for(const S of A){const I=R.get(S);I&&(I.count--,I.count<=0&&R.delete(S))}w(d,()=>R)},b=async()=>{const[A,R]=await Promise.all([as(r(o),yt),as(r(o),bt).then(ie=>ie.reduce((ue,Ce)=>ue.set(Ce.name,Ce),new Map))]),S=[],I=[],se=new Map;let be=0;for(const ie of A)ie.data.deletedAt&&Date.now()-ie.data.deletedAt>l?S.push(ie.id):(I.push(ie),se.set(ie.id,ie),ie.data.deletedAt&&(be+=1),ie.data.type==="draft"&&se.set("draft",ie));w(c,be,!0);const fe=ac(I),ae=new Map;fe.entries().forEach(([ie,ue])=>{const Ce=R.get(ie);ae.set(ie,{...Ce,...ue})}),await ba(r(o),yt,S),await tn(r(o),bt),await nr(r(o),bt,Array.from(ae.values()).map(ie=>({id:ie.name,data:{pinned:ie.pinned}}))),w(f,()=>I),w(v,()=>se),w(d,()=>ae),w(u,!0)},E=async()=>{const A=r(v)(),R=A.get("draft");if(R)return R;const S={id:nc(),data:{type:"draft",url:"",name:"",text:"",tags:[],draft:{url:"",name:"",text:"",tags:[],createdAt:Date.now(),updatedAt:Date.now()},createdAt:Date.now(),updatedAt:Date.now()}};return await ta(r(o),yt,S.id,{...S.data}),A.set("draft",S),m(S),i.postMessage({type:"createNoteDraft",data:{note:S}}),S},M=async A=>{const S=r(v)().get(A);if(!S||!S.data)return;const I=r(d)(),se=S.data.tags;x(se),P(A),i.postMessage({type:"deleteNote",data:{id:A}}),g(),await Jl(r(o),yt,A),await ba(r(o),bt,se.filter(be=>{const fe=I.get(be);return fe?fe.count<=1:!1}))},J=async(A,R)=>{const S={id:R.id,data:{...R.data}},I=r(d)(),se=R.data.tags.filter(fe=>!A.data.tags.includes(fe)),be=A.data.tags.filter(fe=>!R.data.tags.includes(fe));await ta(r(o),yt,S.id,{...S.data}),await nr(r(o),bt,se.filter(fe=>!I.has(fe)).map(fe=>({id:fe,data:{}}))),await ba(r(o),bt,be.filter(fe=>{const ae=I.get(fe);return ae?ae.count<=1:!1})),C(S),x(be),D(se),i.postMessage({type:"updateNote",data:{note:S,tagsToAdd:se,tagsToDelete:be}})},K=async A=>{const R=r(v)(),S=X(A);if(!S||!S.data)return;const I=R.get("draft");I&&I.id===S.id&&R.delete("draft");const se={id:A,data:{type:"note",name:S.data.draft?.name??S.data.name,url:S.data.draft?.url??S.data.url,text:S.data.draft?.text??S.data.text,tags:S.data.draft?.tags??S.data.tags,updatedAt:Date.now(),createdAt:S.data.createdAt,pinnedAt:S.data.pinnedAt,deletedAt:S.data.deletedAt,draft:void 0}};return J(S,se)},H=async()=>{y(),i.postMessage({type:"clearNotes"}),await tn(r(o),yt),await tn(r(o),bt)},X=A=>{const R=r(v)();return A?R.get(A):R.get("draft")},oe=async(A,R)=>{const I=r(v)().get(A);if(!I||!I.data)return;const se={id:A,data:{...I.data,pinnedAt:R?Date.now():void 0}};return J(I,se)},ne=async A=>{const S=r(v)().get(A);if(!S||!S.data)return;const I={id:A,data:{...S.data,deletedAt:Date.now()}};w(c,r(c)+1),await J(S,I)},de=async A=>{const S=r(v)().get(A);if(!S||!S.data)return;const I={id:A,data:{...S.data,deletedAt:0}};g(),await J(S,I)},Q=async(A,R)=>{const S=r(d)();S.set(A,{name:A,count:S.get(A)?.count||0,pinned:R}),await ta(r(o),bt,A,{pinned:R}),i.postMessage({type:"pinTag",data:{tag:A,pinned:R}}),w(d,()=>S)},$=async A=>{const R=r(v)(),S={};A.forEach(I=>{const se=R.get(I.id);(!se||se&&se.data&&se.data.updatedAt<I.data.updatedAt)&&(S[I.id]=I)}),await nr(r(o),yt,Object.values(S)),await b(),i.postMessage({type:"reloadNotes"})},U=async()=>{const A=[];r(f)().forEach(S=>{S&&S.data&&S.data.deletedAt&&A.push(S.id)}),w(c,0),await ba(r(o),yt,A),await b(),i.postMessage({type:"emptyBin"})},G=async(A,R)=>{if(A===""){const be=r(v)().get("draft");be?A=be.id:A=(await E()).id}const S=X(A);if(!S||!S.data)return;const I={id:A,data:{...S.data,draft:{...R,tags:R.tags,createdAt:S.data.draft?.createdAt||Date.now(),updatedAt:Date.now()}}};return await J(S,I),S.id},N=async A=>{const R=r(v)(),S=X(A);if(!S||!S.data||!S.data.draft)return;if(S.data.type==="draft"){A===R.get("draft")?.id&&R.delete("draft"),await M(A);return}const I={id:A,data:{...S.data,draft:void 0}};return J(S,I)},O=async A=>{const R=JSON.parse(A.data),S=R;if(R.tabId&&R.tabId===s){S.type==="exit"&&(y(),await tn(r(o),yt),await tn(r(o),bt));return}if(S.type==="createNoteDraft"){const I=S.data.note;r(v)().set("draft",I),m(I)}else if(S.type==="updateNote"){const I=S.data,be=r(v)().get(I.note.id);if(!be||!be.data)return;be.data.deletedAt&&!I.note.data.deletedAt?g():!be.data.deletedAt&&I.note.data.deletedAt&&w(c,r(c)+1),C(I.note),x(I.tagsToAdd),D(I.tagsToDelete)}else if(S.type==="deleteNote"){const I=S.data.id,be=r(v)().get(I);if(!be)return;g(),P(I),x(be?.data?.tags||[])}else if(S.type==="pinTag"){const I=S.data.tag,se=S.data.pinned,be=r(d)(),fe=be.get(I);fe&&(fe.pinned=se,be.set(I,fe))}else S.type==="clearNotes"?y():S.type==="reloadNotes"||S.type==="emptyBin"?b():S.type==="exit"&&y()};ke(()=>(b(),i.addEventListener(O),()=>{i.removeEventListener(O)})),tc({isInitedNotes:p,putNoteDraft:G,deleteNoteDraft:N,deleteNote:M,pinNote:oe,getGetNotes:T,importNotes:$,clearNotes:H,getNoteById:X,getGetMapTags:()=>r(d),pinTag:Q,moveNoteToBin:ne,restoreNoteFromBin:de,checkNotesInBin:h,emptyBin:U,saveNoteDraft:K,countNotesInBin:()=>r(c)});var V=Z(),re=F(V);ye(re,()=>e.children??xe),_(t,V),te()}const bo={},sc=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function oc(t){Fe(bo,t)}function Jt(){const t=Re(bo);if(!t)throw new Error("No AnimationSettingsContext found");return t}function ic(t,e){ee(e,!0);let n=Be(sc());oc(n);var a=Z(),s=F(a);ye(s,()=>e.children??xe),_(t,a),te()}const So={};function lc(t){Fe(So,t)}function Nr(){const t=Re(So);if(!t)throw new Error("No ScrollingContext found");return t}function cc(t,e){ee(e,!0);let n=q(!1);const a=()=>r(n),s=vo(()=>{w(n,!1)},100);lc({isScrolling:a,enable:()=>{w(n,!0),s()}});var i=Z(),l=F(i);ye(l,()=>e.children??xe),_(t,i),te()}const ko={};function uc(t){Fe(ko,t)}function yn(){const t=Re(ko);if(!t)throw new Error("No MobileSizeContext found");return t}function dc(t,e){ee(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let a=q(Be(n())),s=Jt();const o=vo(()=>{s.working=!0},16),i=()=>{s.working=!1,o(),requestAnimationFrame(()=>{w(a,n(),!0)})};uc({checkMobileSize:()=>r(a)}),ke(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=Z(),u=F(c);ye(u,()=>e.children??xe),_(t,c),te()}const Co={};function fc(t){Fe(Co,t)}function Qt(){const t=Re(Co);if(!t)throw new Error("No DialogContext found");return t}function vc(t,e){ee(e,!0);let n=q(0),a=q(!1),s=q(!0);fc({checkExistedDialog:()=>r(n)>0,showDialog:()=>{w(n,r(n)+1)},hideDialog:()=>{w(n,r(n)-1)},blockDialog:h=>{w(a,h,!0)},checkBlockedDialog:()=>r(a),setClosableDialog:h=>{w(s,h,!0)},checkClosableDialog:()=>r(s)});var v=Z(),p=F(v);ye(p,()=>e.children??xe),_(t,v),te()}const Eo={};function hc(t){Fe(Eo,t)}function Lr(){const t=Re(Eo);if(!t)throw new Error("No ScrollContainerContext found");return t}function gc(t,e){ee(e,!0);let n=q(null);hc({setScrollContainer:l=>{w(n,l,!0)},getScrollContainer:()=>r(n)});var o=Z(),i=F(o);ye(i,()=>e.children??xe),_(t,o),te()}const Po={};function pc(t){Fe(Po,t)}function Mr(){const t=Re(Po);if(!t)throw new Error("No DialogPageHeightContext found");return t}function _c(t,e){ee(e,!0);let n=q(200);pc({setDialogPageHeight:l=>{w(n,l,!0)},getDialogPageHeight:()=>r(n)});var o=Z(),i=F(o);ye(i,()=>e.children??xe),_(t,o),te()}const mc=[Jn,xa,yt,bt,Zl];function wc(){return new Promise((t,e)=>{const n=indexedDB.open(Xl,Gl);He(n,"upgradeneeded",()=>{const a=n.result;for(const s of mc)a.objectStoreNames.contains(s)||a.createObjectStore(s,{keyPath:"id"})}),He(n,Zt,()=>{const a=n.result;t(a),a.onversionchange=function(){a?.close(),alert("app outdated, please reload the page")}}),He(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),He(n,Ft,()=>{e(),console.error(Ft,n.error)})})}function yc(t,e){ee(e,!0);let n=q(null);ke(()=>{wc().then(l=>{w(n,l,!0)}).catch(l=>{console.error("Failed to initialize LocalDB:",l)})}),Wl({getDB:()=>r(n)});var s=Z(),o=F(s);{var i=l=>{var c=Z(),u=F(c);ye(u,()=>e.children??xe),_(l,c)};Y(o,l=>{r(n)&&l(i)})}_(t,s),te()}const xo={};function bc(t){Fe(xo,t)}function ot(){const t=Re(xo);if(!t)throw new Error("No StackPagesContext found");return t}function Sc(t,e){ee(e,!0);const{createBroadcastChannel:n,tabId:a}=wn(),s=n(),{getAppLocation:o,getAppHistoryStack:i,navigate:l,goBack:c,replace:u}=Tt(),d=B(o),f=B(()=>r(d).searchParams),v="stackPages",p=()=>r(f).get(v)?.split(",")||[];let h=q(Be([]));const g=()=>{const b=p();r(h).join(",")!==b.join(",")&&w(h,b,!0)};Le(()=>{r(f),vt(()=>{g()})});const m=b=>{if(!r(h).find(E=>{const[M]=E.split("?");return M===b})){const E=new URLSearchParams(r(d).search),M=r(d).pathname;E.set(v,[...r(h),b].join(",")),l(`${M}${E.size>0?`?${E.toString()}`:""}`)}},C=b=>r(h).find(E=>{const[M]=E.split("?");return M===b})!==void 0,P=()=>{const b=i(),E=b.findIndex(M=>M.searchParams.has(v));if(b.length<=1||E===-1){const M=new URLSearchParams(r(d).search);M.delete(v),u(`${r(d).pathname}${M.size>0?`?${M.toString()}`:""}`)}else if(E===0){c(b.length-E+1);const M=new URLSearchParams(r(d).search);M.delete(v),u(`${r(d).pathname}${M.size>0?`?${M.toString()}`:""}`)}else c(b.length-E)},y=(b,E)=>{if(E?.full)return`/${b}`;const M=r(h).slice();M.includes(b)||M.push(b);const J=new URLSearchParams(r(d).search);return J.set(v,M.join(",")),`${r(d).pathname}?${J}`},T=(b,E)=>M=>{if(M.preventDefault(),E?.full){l(b);return}m(b)};ke(()=>{const b=E=>{const M=JSON.parse(E.data),J=M;if(M.tabId&&M.tabId===a){if(J.type==="navigateBack"&&r(h).length>0){const K=new URLSearchParams(r(d).search);r(h).length>1?K.set(v,r(h).slice(0,-1).join(",")):K.delete(v),u(`${r(d).pathname}${K.size>0?`?${K.toString()}`:""}`)}return}};return s.addEventListener(b),()=>{s.removeEventListener(b)}}),bc({getStackPages:()=>r(h),pushStackPages:m,hasStackPage:C,clearStackPages:P,getPageUrl:y,createHandlePage:T,getStackPagesFormUrl:p});var D=Z(),x=F(D);ye(x,()=>e.children??xe),_(t,D),te()}function kc(t,e){ee(e,!0);const{createBroadcastChannel:n}=wn(),a=n(),s=g=>g.startsWith("/")?g:`/${g}`,o=g=>{const[m,C]=g.split("?");return{href:s(g),pathname:s(m),search:C?`?${C}`:"",searchParams:new URLSearchParams(C)}};let i=q(Be([{href:`${s(window.location.pathname)}${window.location.search}`,pathname:s(window.location.pathname),search:window.location.search,searchParams:new URLSearchParams(window.location.search)}]));const l=g=>{r(i).push(o(g)),window.history.replaceState(null,"",g)},c=g=>{r(i)[r(i).length-1]=o(g),window.history.replaceState(null,"",g)};Il({getAppLocation:()=>r(i)[r(i).length-1],getAppHistoryStack:()=>r(i),navigate:l,replace:c,addSearchParam:(g,m)=>{const C=r(i)[r(i).length-1],P=C.searchParams;P.set(g,m),c(`${C.pathname}${P.size>0?`?${P.toString()}`:""}`)},deleteSearchParam:g=>{const m=r(i)[r(i).length-1],C=m.searchParams;C.delete(g),c(`${m.pathname}${C.size>0?`?${C.toString()}`:""}`)},back:g=>{const{to:m}=g||{};if(r(i).length>1){if(m){const P=r(i).findIndex(y=>y.href===m);if(P!==-1){w(i,r(i).slice(0,P+1),!0);const y=r(i)[r(i).length-1];window.history.replaceState(null,"",y.href)}else c(m);return}r(i).pop();const C=r(i)[r(i).length-1];window.history.replaceState(null,"",C.href)}else m?c(m):a.postMessage({type:"navigateBack"})},goBack:g=>{if(r(i).length>=g){w(i,r(i).slice(0,-g),!0);const m=r(i)[r(i).length-1];window.history.replaceState(null,"",m.href)}}});var p=Z(),h=F(p);ye(h,()=>e.children??xe),_(t,p),te()}const Ao={};function Cc(t){Fe(Ao,t)}function Do(){const t=Re(Ao);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Ec(t,e){ee(e,!0);let n=Be({value:!1});const a=()=>n.value;ke(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),Cc({getIsKeyboardVisible:a});var s=Z(),o=F(s);ye(o,()=>e.children??xe),_(t,s),te()}function Pc(t,e){ee(e,!0);const n=crypto.randomUUID(),a=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};Kl({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>a(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var s=Z(),o=F(s);ye(o,()=>e.children??xe),_(t,s),te()}function xc(t,e){yc(t,{children:(n,a)=>{Pc(n,{children:(s,o)=>{ic(s,{children:(i,l)=>{cc(i,{children:(c,u)=>{dc(c,{children:(d,f)=>{vc(d,{children:(v,p)=>{gc(v,{children:(h,g)=>{_c(h,{children:(m,C)=>{Ec(m,{children:(P,y)=>{kc(P,{children:(T,D)=>{Sc(T,{children:(x,b)=>{var E=Z(),M=F(E);ye(M,()=>e.children??xe),_(x,E)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Ac(t,e){xc(t,{children:(n,a)=>{Rl(n,{children:(s,o)=>{Ol(s,{children:(i,l)=>{zl(i,{children:(c,u)=>{jl(c,{children:(d,f)=>{ql(d,{children:(v,p)=>{Ql(v,{children:(h,g)=>{ec(h,{children:(m,C)=>{rc(m,{children:(P,y)=>{var T=Z(),D=F(T);ye(D,()=>e.children??xe),_(P,T)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let jt=q(""),$t=q(null),Qn=q(null),$n=q(null);function fn(t,e){w(jt,""),setTimeout(()=>{w(jt,t,!0),e?.onFinish&&w(Qn,e.onFinish,!0),e?.onCancel&&w($n,e.onCancel,!0)},16)}const Dc=(t,e,n,a,s)=>{t.preventDefault(),r(e)&&(w(n,null),r(e)(),w(e,null)),w(a,""),r(s)?.style.removeProperty("opacity")};var Tc=W('<button type="button" class="undoButton svelte-1vxmgq5">undo</button>'),Nc=W('<div class="notification svelte-1vxmgq5"><span> </span> <!></div>'),Lc=W("<div><!></div>");function Mc(t,e){ee(e,!0),Le(()=>{r(jt);const o=r($n)?2e3:800;r(jt)&&(r($t)?.getBoundingClientRect(),r($t)?.style.setProperty("opacity","1"));const i=setTimeout(()=>{r($t)?.style.removeProperty("opacity")},o),l=setTimeout(()=>{w(jt,""),r(Qn)&&r(Qn)(),w(Qn,null),w($n,null),r($t)?.style.removeProperty("opacity")},o+400);return()=>{clearTimeout(i),clearTimeout(l)}});var n=Lc(),a=k(n);{var s=o=>{var i=Nc(),l=k(i),c=k(l),u=z(l,2);{var d=f=>{var v=Tc();v.__click=[Dc,$n,Qn,jt,$t],_(f,v)};Y(u,f=>{r($n)&&f(d)})}st(i,f=>w($t,f),()=>r($t)),ce(()=>Bt(c,r(jt))),_(o,i)};Y(a,o=>{r(jt)&&o(s)})}_(t,n),te()}qe(["click"]);var Ic=W('<span class="vh svelte-s92gzo"><!></span>');function Ke(t,e){var n=Ic(),a=k(n);ye(a,()=>e.children),_(t,n)}var Oc=hl('<svg class="svelte-18et5h9"><use></use></svg>');function me(t,e){let n=ve(e,"name",8,"");var a=Oc(),s=k(a);ce(()=>Pe(s,"href",`#icon-${n()??""}`)),_(t,a)}const Bc=(t,e,n,a,s)=>{if(r(e))return;const o=n().type;o==="closed"?a():o==="opened"&&s()};var Rc=W('<button class="buttonMenu svelte-bpktnw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function To(t,e){ee(e,!0);const{sidebarOpen:n,getSidebarState:a,sidebarClose:s}=Ya(),{getStackPagesFormUrl:o}=ot(),{checkExistedDialog:i}=Qt();let l=B(()=>o().length>0||i());var c=Rc();c.__click=[Bc,l,a,n,s];var u=k(c);ge(u,()=>({"--size":"36px"})),me(u.lastChild,{name:"sidebarMenu"});var d=z(u,2);Ke(d,{children:(f,v)=>{var p=Ie("Menu");_(f,p)}}),_(t,c),te()}qe(["click"]);var Fc=(t,e)=>e.onChange?.(t.target?.value||""),zc=W('<input class="svelte-15lr19w"/>');function gr(t,e){ee(e,!0);let n=ve(e,"value",15,""),a=ve(e,"ref",15,null);var s=zc();s.__input=[Fc,e],st(s,o=>a(o),()=>a()),ce(()=>Pe(s,"placeholder",e.placeholder)),Ar("focus",s,function(...o){e.onFocus?.apply(this,o)}),Dl(s,n),_(t,s),te()}qe(["input"]);function Ir(t,e){ee(e,!0),ke(()=>{const n=a=>{a.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==a.target&&!e.dialogInner.contains(a.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),te()}var Hc=W('<dialog><div class="dialogInner svelte-1x410nl"><!></div></dialog> <!>',1);function Or(t,e){ee(e,!0);let n=q(null),a=q(null),s=q(!1),{showDialog:o,hideDialog:i}=Qt();const l=h=>{h?.preventDefault();const g=setTimeout(()=>{e.onClosed()},150);r(n)?.addEventListener("transitionend",()=>{clearTimeout(g),e.onClosed()},{once:!0}),w(s,!1)};Le(()=>{e.startClose&&l()}),ke(()=>(r(n)?.showModal(),r(n)?.getClientRects(),w(s,!0),r(n)?.addEventListener("cancel",l),r(n)?.addEventListener("close",l),()=>{r(n)?.removeEventListener("cancel",l),r(n)?.removeEventListener("close",l)})),ke(()=>(o(),()=>{i()}));var c=Hc(),u=F(c),d=k(u),f=k(d);ye(f,()=>e.children),st(d,h=>w(a,h),()=>r(a)),st(u,h=>w(n,h),()=>r(n));var v=z(u,2);{var p=h=>{Ir(h,{get dialog(){return r(n)},get dialogInner(){return r(a)},onClose:l})};Y(v,h=>{r(n)&&r(a)&&h(p)})}ce(()=>_e(u,1,pe(["dialog",{shown:r(s)}]),"svelte-1x410nl")),_(t,c),te()}var jc=W("<div><!></div>");function No(t,e){ee(e,!0);let n=q(!1),a=q(null);const s=()=>{const u=setTimeout(()=>{e.onClosed()},150);r(a)?.addEventListener("transitionend",()=>{clearTimeout(u),e.onClosed()},{once:!0}),w(n,!1)},o=u=>{u.target!==r(a)&&!r(a)?.contains(u.target)&&s()},i=u=>{u.target!==r(a)&&!r(a)?.contains(u.target)&&s()};ke(()=>{r(a)?.getClientRects(),w(n,!0);const u=setTimeout(()=>{document.addEventListener("focusin",o),document.addEventListener("click",i)},0);return()=>{clearTimeout(u),document.removeEventListener("focusin",o),document.removeEventListener("click",i)}}),Le(()=>{e.startClose&&s()});var l=jc(),c=k(l);ye(c,()=>e.children),st(l,u=>w(a,u),()=>r(a)),ce(()=>_e(l,1,pe(["menu",{top:e.positionTop,shown:r(n)}]),"svelte-ujw4xi")),_(t,l),te()}const Uc=(t,e)=>{r(e)||w(e,!0)};var Vc=(t,e)=>e("newest"),qc=(t,e)=>e("oldest"),Wc=(t,e)=>e("AtoZ"),Yc=(t,e)=>e("ZtoA"),Kc=W("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),Xc=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Gc=W('<div class="orderMenu svelte-14zj87s"><button><!> <!></button> <!></div>');function Zc(t,e){ee(e,!0);const n=(P,y=xe)=>{var T=Kc(),D=k(T);D.__click=[Vc,d];var x=z(D,2);x.__click=[qc,d];var b=z(x,2);b.__click=[Wc,d];var E=z(b,2);E.__click=[Yc,d],ce(()=>{_e(T,1,pe(["menu",{menuDialog:y()}]),"svelte-14zj87s"),_e(D,1,pe(["menuButton",{menuButtonDialog:y(),current:r(u)==="newest"}]),"svelte-14zj87s"),_e(x,1,pe(["menuButton",{menuButtonDialog:y(),current:r(u)==="oldest"}]),"svelte-14zj87s"),_e(b,1,pe(["menuButton",{menuButtonDialog:y(),current:r(u)==="AtoZ"}]),"svelte-14zj87s"),_e(E,1,pe(["menuButton",{menuButtonDialog:y(),current:r(u)==="ZtoA"}]),"svelte-14zj87s")}),_(P,T)};let a=q(!1),s=q(!1);const{checkMobileSize:o}=yn(),{getFeedOrder:i,setFeedOrder:l}=lo();let c=B(o),u=B(i);const d=P=>{w(s,!0),l(P)},f=()=>{w(a,!1),w(s,!1)};ke(()=>{const P=y=>{y.key==="Escape"&&w(s,!0)};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)});var v=Gc(),p=k(v);p.__click=[Uc,a],_e(p,1,pe(["button","buttonMenu"]),"svelte-14zj87s");var h=k(p);me(h,{name:"filter"});var g=z(h,2);Ke(g,{children:(P,y)=>{var T=Ie("show feed order menu");_(P,T)}});var m=z(p,2);{var C=P=>{var y=Z(),T=F(y);{var D=b=>{Or(b,{get startClose(){return r(s)},onClosed:f,children:(E,M)=>{n(E,()=>!0)},$$slots:{default:!0}})},x=b=>{var E=Xc(),M=F(E);ge(M,()=>({"--right":"20px","--top":"60px"})),No(M.lastChild,{get startClose(){return r(s)},onClosed:f,children:(J,K)=>{n(J,()=>!1)},$$slots:{default:!0}}),_(b,E)};Y(T,b=>{r(c)?b(D):b(x,!1)})}_(P,y)};Y(m,P=>{r(a)&&P(C)})}_(t,v),te()}qe(["click"]);var j=(t=>(t.NewNote="newNote",t.EditNote="editNote",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t.Install="install",t.Wellcome="wellcome",t))(j||{}),Jc=W("<a><!></a>"),Qc=W("<button><!></button>");function Kt(t,e){let n=ve(e,"type",3,"standard"),a=ve(e,"typeButton",3,"button"),s=ve(e,"element",3,"button"),o=ve(e,"href",3,""),i=ve(e,"fullWidth",3,!1),l=ve(e,"withoutMinWidth",3,!1);var c=Z(),u=F(c);{var d=v=>{var p=Jc();p.__click=function(...g){e.onClick?.apply(this,g)};var h=k(p);ye(h,()=>e.children??xe),ce(()=>{Pe(p,"href",o()),_e(p,1,pe(["button","a",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(v,p)},f=v=>{var p=Qc();p.__click=function(...g){e.onClick?.apply(this,g)};var h=k(p);ye(h,()=>e.children??xe),ce(()=>{Pe(p,"type",a()),_e(p,1,pe(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(v,p)};Y(u,v=>{s()==="a"?v(d):v(f,!1)})}_(t,c)}qe(["click"]);var $c=W('<div class="block svelte-1dzbsx4"><span class="title svelte-1dzbsx4"> </span> <div class="controls svelte-1dzbsx4"><!> <!></div></div>');function Lo(t,e){ee(e,!0);let n=ve(e,"buttonCancelTitle",3,"Cancel"),a=ve(e,"buttonConfirmTitle",3,"Confirm"),s=q(!1),o=q(!1);const i=()=>{w(s,!0)},l=()=>{w(s,!0),w(o,!0)};Or(t,{get startClose(){return r(s)},onClosed:()=>{r(o)?e.onConfirm():e.onCancel()},children:(u,d)=>{var f=$c(),v=k(f),p=k(v),h=z(v,2),g=k(h);Kt(g,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(C,P)=>{var y=Ie();ce(()=>Bt(y,n())),_(C,y)},$$slots:{default:!0}});var m=z(g,2);Kt(m,{onClick:l,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(C,P)=>{var y=Ie();ce(()=>Bt(y,a())),_(C,y)},$$slots:{default:!0}}),ce(()=>Bt(p,e.title)),_(u,f)},$$slots:{default:!0}}),te()}const pr=t=>{const e=n=>{const a=n.target,s=a?.tagName;if(s==="INPUT"||s==="TEXTAREA"||a?.isContentEditable)return;const o=n.key.toLowerCase(),i=n.metaKey,l=n.ctrlKey,c=n.shiftKey;if(o===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){n.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var eu=W('<a class="buttonAdd svelte-lfflvc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></a>');function tu(t,e){ee(e,!1);const{createHandlePage:n,getPageUrl:a,pushStackPages:s,getStackPages:o}=ot(),{checkExistedDialog:i}=Qt(),l=()=>{o.length===0&&!i()&&s(j.NewNote)};ke(()=>pr({key:"n",action:l})),Wa();var c=eu(),u=B(()=>n(j.NewNote));c.__click=function(...f){r(u)?.apply(this,f)};var d=k(c);ge(d,()=>({"--size":"16px","--color":"#b0b0b0"})),me(d.lastChild,{name:"plus"}),ce(f=>Pe(c,"href",f),[()=>a(j.NewNote)]),_(t,c),te()}qe(["click"]);const nu=(t,e)=>{w(e,!0)};var au=(t,e)=>{e("/",{full:!0})(t)},ru=W('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),su=(t,e)=>{e(j.Bin,{full:!0})(t)},ou=W('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),iu=W('<button class="emptyBinButton svelte-13t3afu" type="button">Empty bin</button>'),lu=W('<div class="header svelte-13t3afu"><div class="top svelte-13t3afu"><div class="menu svelte-13t3afu"><a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="mobile svelte-13t3afu"><!></div> <!></div> <div class="bottom svelte-13t3afu"><div><div class="sidebarSearchWrapper"><!></div></div> <div class="right svelte-13t3afu"><div class="filter svelte-13t3afu"><div class="feedSearchWrapper svelte-13t3afu"><!></div> <!></div></div></div></div> <!>',1);function cu(t,e){ee(e,!0);const n=ao(),a=oo(),{getScrollContainer:s}=Lr();let o=B(s);const{emptyBin:i,checkNotesInBin:l}=da(),{getAppLocation:c}=Tt(),{createHandlePage:u,getPageUrl:d,getStackPages:f}=ot(),{checkExistedDialog:v}=Qt();let p=q(null);const h=B(l),g=B(()=>c().pathname);let m=q(!1);const C=()=>{r(o)&&r(o).scrollTo({top:0,behavior:"smooth"})},P=()=>{f.length===0&&!v()&&r(p)?.focus()};ke(()=>pr({key:"k",meta:!0,action:P})),ke(()=>pr({key:"k",ctrl:!0,action:P}));var y=lu(),T=F(y),D=k(T),x=k(D),b=k(x),E=B(()=>u(j.Settings));b.__click=function(...ae){r(E)?.apply(this,ae)};var M=k(b);ge(M,()=>({"--rotate":"30deg","--size":"20px"})),me(M.lastChild,{name:"settings"});var J=z(b,2),K=B(()=>u(j.Sync));J.__click=function(...ae){r(K)?.apply(this,ae)};var H=k(J);ge(H,()=>({"--size":"20px"})),me(H.lastChild,{name:"sync"});var X=z(J,2);{var oe=ae=>{var ie=ru();ie.__click=[au,u];var ue=k(ie);ge(ue,()=>({"--size":"18px"})),me(ue.lastChild,{name:"note"}),ce(Ce=>Pe(ie,"href",Ce),[()=>d("/",{full:!0})]),_(ae,ie)},ne=ae=>{var ie=Z(),ue=F(ie);{var Ce=Ee=>{var De=ou();De.__click=[su,u];var Te=k(De);ge(Te,()=>({"--size":"20px"})),me(Te.lastChild,{name:"bin"}),ce(Me=>Pe(De,"href",Me),[()=>d(j.Bin,{full:!0})]),_(Ee,De)};Y(ue,Ee=>{r(h)&&Ee(Ce)},!0)}_(ae,ie)};Y(X,ae=>{r(g)===`/${j.Bin}`?ae(oe):ae(ne,!1)})}var de=z(x,2),Q=k(de);To(Q,{});var $=z(de,2);{var U=ae=>{var ie=Z(),ue=F(ie);{var Ce=Ee=>{var De=iu();De.__click=[nu,m],_(Ee,De)};Y(ue,Ee=>{r(h)&&Ee(Ce)})}_(ae,ie)},G=ae=>{tu(ae,{})};Y($,ae=>{r(g)===`/${j.Bin}`?ae(U):ae(G,!1)})}var N=z(D,2),O=k(N);_e(O,1,pe(["left"]),"svelte-13t3afu");var V=k(O),re=k(V);gr(re,{placeholder:"Search tag",get value(){return a.value},set value(ae){a.value=ae}});var A=z(O,2),R=k(A),S=k(R),I=k(S);gr(I,{onFocus:C,placeholder:"Search",get ref(){return r(p)},set ref(ae){w(p,ae,!0)},get value(){return n.value},set value(ae){n.value=ae}});var se=z(S,2);Zc(se,{});var be=z(T,2);{var fe=ae=>{Lo(ae,{title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:()=>{i(),w(m,!1)},onCancel:()=>{w(m,!1)}})};Y(be,ae=>{r(m)&&ae(fe)})}ce((ae,ie)=>{Pe(b,"href",ae),Pe(J,"href",ie)},[()=>d(j.Settings),()=>d(j.Sync)]),_(t,y),te()}qe(["click"]);function uu(t,e){ee(e,!0);const{getIsKeyboardVisible:n}=Do();let a=ve(e,"dialog",7);const s=B(n),o=Jt();let i=null;const l=()=>{e.dialogState==="swiping"&&e.onClose()};Le(()=>(e.dialogState==="swiping"&&(i=setTimeout(l,3e3)),()=>{i&&(clearTimeout(i),i=null)}));let c=null,u=null;const d=3,f=50,v=5,p=.6,h=.3,g=.35,m=.95;let C=0,P=0,y=0,T=!1,D=!1,x=0,b=0,E=0;const M=()=>{C=0,P=0,T=!1,D=!1,x=0,b=0,E=0,y=0,c=null,u!==null&&(cancelAnimationFrame(u),u=null),i&&(clearTimeout(i),i=null)},J=U=>{if(!a()){console.warn("Touch start: No dialog element");return}if(e.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${e.dialogState}`);return}C=U.touches[0].clientX,P=U.touches[0].clientY,y=performance.now(),T=!0,D=!1},K=U=>e.dialogState==="opened"&&U>0||e.dialogState==="swiping"&&U>0,H=()=>{if(a()){a().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const U=window.getComputedStyle(a()),G=U.transform||U.webkitTransform||"";if(b=a().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(x=0),G&&G!=="none")try{x=new DOMMatrix(G).m41}catch{console.warn("Could not parse transform matrix, using default position")}D=!0}catch(U){console.error("Error during swipe initialization:",U),M()}}},X=()=>{if(!a())return;const G=Math.abs(x+E*b/100)/b;a().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-G)})`)},oe=()=>{if(u=null,!c||!T||!a()||r(s)){M();return}const U=[...c.touches].reduce((I,se)=>I+se.clientX,0)/c.touches.length,G=[...c.touches].reduce((I,se)=>I+se.clientY,0)/c.touches.length,N=U-C,O=G-P,V=Math.abs(N)>Math.abs(O),re=Math.abs(N)>d;if(!D)if(V&&re&&K(N))try{H()}catch(I){console.error("Error initializing swipe:",I),M();return}else return;let A=x+N*m;A=Math.max(0,Math.min(b,A)),!(A<0)&&(a().style.setProperty("--transition-timing","0s"),a().style.transform=`translate3d(${A}px, 0, 0)`,o.swipingRatio=Math.abs(1-A/b),E=(A-x)/b*100,e.dialogState==="swiping"&&(i&&clearTimeout(i),i=setTimeout(l,3e3)),X())},ne=U=>{if(!T)return;c=U,u===null&&(u=requestAnimationFrame(oe));const G=U.touches[0].clientX-C,N=U.touches[0].clientY-P,O=Math.abs(G)>Math.abs(N);D&&O&&U.preventDefault()},de=U=>{const G=Math.abs(U);if(G>=p)return v;if(G>=h){const N=(G-h)/(p-h);return f-N*(f-v)}else return f},Q=(U,G)=>{if(Math.abs(U)>=p)return g*.5;const O=Math.abs(E)/100;return G?g*Math.max(.5,1-O):g*Math.max(.5,O)},$=U=>{if(u!==null&&(cancelAnimationFrame(u),u=null),!T||!a()){M();return}if(!D){M();return}let G=0;if(U?.changedTouches?.[0]){const A=U.changedTouches[0].clientX,S=performance.now()-y;S>0&&(G=(A-C)/S)}const N=de(G);let O=null;e.dialogState==="swiping"&&(O=Math.abs(E)>N||G<-h?"close":"open");const V=e.dialogState==="swiping"&&O==="close",re=Q(G,V);o.duration=re-.02,a().style.setProperty("--transition-timing",`${re}s`),a().offsetWidth,a().style.transform="",O==="open"?e.onOpen():O==="close"&&e.onClose(),a()?.style.removeProperty("--backdrop-bg"),M()};ke(()=>(a().addEventListener("touchstart",J,{passive:!0}),a().addEventListener("touchmove",ne,{passive:!1}),a().addEventListener("touchend",$,{passive:!0}),a().addEventListener("touchcancel",$,{passive:!0}),()=>{a().removeEventListener("touchstart",J),a().removeEventListener("touchmove",ne),a().removeEventListener("touchend",$),a().removeEventListener("touchcancel",$),u!==null&&cancelAnimationFrame(u)})),te()}var du=(t,e)=>{e.onStartClose()},fu=W('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),vu=W('<dialog><div class="dialogInner svelte-vr2o0t"><div class="header svelte-vr2o0t"><div><!></div></div> <!></div></dialog> <!>',1);function hu(t,e){ee(e,!0);let n=350;const{isScrolling:a,enable:s}=Nr();let o=q(null),i=q(null);const l=Jt(),c=x=>{x.preventDefault(),e.onStartClose()};ke(()=>(r(o)?.addEventListener("close",e.onClosed),r(o)?.addEventListener("cancel",c),()=>{r(o)?.removeEventListener("close",e.onClosed),r(o)?.removeEventListener("cancel",c)}));const u=()=>{r(o)?.style.removeProperty("--transition-timing"),r(o)?.style.removeProperty("transform"),r(o)?.style.removeProperty("--backdrop-bg")},d=()=>{s()},f=B(a);Le(()=>{if(e.dialogState,!!r(o))switch(e.dialogState){case"opening":{r(o).open||r(o).showModal(),r(o).getBoundingClientRect();const x=setTimeout(()=>{u()},n+1),b=()=>{clearTimeout(x),u()};return r(o)?.addEventListener("transitionend",b,{once:!0}),e.onOpened(),()=>{clearTimeout(x),r(o)?.removeEventListener("transitionend",b)}}case"closing":{const x=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),b=()=>{clearTimeout(x),e.onClosed()};return r(o)?.addEventListener("transitionend",b,{once:!0}),()=>{clearTimeout(x),r(o)?.removeEventListener("transitionend",b)}}case"opened":u()}});var v=vu(),p=F(v),h=k(p),g=k(h),m=k(g),C=k(m);{var P=x=>{var b=fu();_e(b,1,pe(["navigateButton","buttonBack"]),"svelte-vr2o0t"),b.__click=[du,e];var E=k(b);ge(E,()=>({"--size":"36px"})),me(E.lastChild,{name:"back"});var M=z(E,2);Ke(M,{children:(J,K)=>{var H=Ie("back");_(J,H)}}),_(x,b)};Y(C,x=>{e.blocked||x(P)})}var y=z(g,2);ye(y,()=>e.children),st(h,x=>w(i,x),()=>r(i)),st(p,x=>w(o,x),()=>r(o));var T=z(p,2);{var D=x=>{uu(x,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return r(o)}})};Y(T,x=>{(!r(f)&&e.dialogState==="opened"||e.dialogState==="swiping")&&!e.blocked&&x(D)})}ce(()=>_e(p,1,pe([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:l.working&&(!l.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-vr2o0t")),Ar("scroll",h,d),_(t,v),te()}qe(["click"]);const rs=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function gu(t,e){ee(e,!0);let n=ve(e,"hiddenDialog",3,!1),a=ve(e,"onClose",3,()=>{});const s=Jt();let o=q(Be(rs({type:"closed"})));const i=m=>{w(o,rs(r(o),m),!0)},l=()=>{e.onStartClose&&(e.onStartClose(),i({type:"close"}))},c=()=>{i({type:"open"})},u=()=>{i({type:"opened"}),s.swipingRatio=1,s.duration=.2},d=()=>{a()(),i({type:"closed"}),s.swipingRatio=1,s.duration=.2},f=()=>{i({type:"swipe"})};Le(()=>{r(o).type==="swiping"?s.isSwiping=!0:s.isSwiping=!1,r(o).type==="closed"&&e.shownDialog?c():r(o).type==="opened"&&!e.shownDialog&&l()});var v={handleComputeState:i},p=Z(),h=F(p);{var g=m=>{{let C=B(()=>!e.onStartClose);hu(m,{onSwipe:f,onOpened:u,onClosed:d,onStartClose:l,onStartOpen:c,get dialogState(){return r(o).type},get hidden(){return n()},get blocked(){return r(C)},children:(P,y)=>{var T=Z(),D=F(T);ye(D,()=>e.children),_(P,T)},$$slots:{default:!0}})}};Y(h,m=>{r(o).type!=="closed"&&m(g)})}return _(t,p),te(v)}const pu=({getDialog:t,onOpen:e,onStartClose:n,onClose:a})=>{const s=i=>{i.preventDefault(),n()},o=()=>{a?.()};ke(()=>{const i=t();return i?.addEventListener("cancel",s),i?.addEventListener("close",o),()=>{i?.removeEventListener("cancel",s),i?.removeEventListener("close",o)}}),ke(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var _u=(t,e)=>{e.onStartBack()},mu=W('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),wu=(t,e)=>{e.onStartClose()},yu=W('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),bu=W('<dialog><div class="dialogInner svelte-rt409n"><div class="header svelte-rt409n"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function Su(t,e){ee(e,!0);let n=ve(e,"blockedDialog",3,!1),a=ve(e,"hiddenDialog",3,!1),s=ve(e,"isDesktopAnimationOff",3,!1),o=q(null),i=q(null),l=q(!1);pu({getDialog:()=>r(o),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=Jt();Le(()=>{e.stateDialog==="closing"&&(c.working?r(o)?.addEventListener("transitionend",()=>{r(o)?.close()},{once:!0}):r(o)?.close())});const{getDialogPageHeight:u}=Mr(),d=B(u);ke(()=>{setTimeout(()=>{w(l,!0)},50)});var f=bu(),v=F(f),p=k(v),h=k(p),g=k(h),m=k(g);{var C=b=>{var E=mu();_e(E,1,pe(["navigateButton","buttonBack"]),"svelte-rt409n"),E.__click=[_u,e];var M=k(E);ge(M,()=>({"--size":"28px"})),me(M.lastChild,{name:"back"});var J=z(M,2);Ke(J,{children:(K,H)=>{var X=Ie("back");_(K,X)}}),_(b,E)};Y(m,b=>{(!(n()||a())||n())&&e.onStartBack&&b(C)})}var P=z(g,2),y=k(P);{var T=b=>{var E=yu();_e(E,1,pe(["navigateButton","buttonClose"]),"svelte-rt409n"),E.__click=[wu,e];var M=k(E);ge(M,()=>({"--size":"28px"})),me(M.lastChild,{name:"close"});var J=z(M,2);Ke(J,{children:(K,H)=>{var X=Ie("close");_(K,X)}}),_(b,E)};Y(y,b=>{n()||a()||b(T)})}var D=z(h,2);ye(D,()=>e.children),st(p,b=>w(i,b),()=>r(i)),st(v,b=>w(o,b),()=>r(o));var x=z(v,2);Ir(x,{get dialog(){return r(o)},get dialogInner(){return r(i)},get onClose(){return e.onStartClose}}),ce(()=>{Vn(v,`height: ${r(d)+74}px`),_e(v,1,pe([{open:e.stateDialog==="open",isHeightAnimationOn:r(l),isAnimationOn:c.working,isDesktopAnimationOff:s(),hiddenDialog:a()}]),"svelte-rt409n")}),_(t,f),te()}qe(["click"]);const ku=({onStartClose:t,onClose:e})=>{let n=q("close");return{get state(){return r(n)},set state(i){w(n,i,!0)},handleStartClose:(i=!1)=>{i||(w(n,"closing"),t?.())},handleOpen:()=>{w(n,"open")},handleClose:()=>{w(n,"close"),e?.()}}};function Cu(t,e){ee(e,!0);let n=ve(e,"blockedDialog",3,!1),a=ve(e,"hiddenDialog",3,!1),s=ve(e,"onStartClose",3,()=>{}),o=ve(e,"onClose",3,()=>{}),i=ku({onStartClose:s(),onClose:o()});Le(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=f=>{f.key==="Escape"&&n()&&(f.preventDefault(),f.stopPropagation())};ke(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=Z(),u=F(c);{var d=f=>{Su(f,{get stateDialog(){return i.state},get blockedDialog(){return n()},get hiddenDialog(){return a()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(v,p)=>{var h=Z(),g=F(h);ye(g,()=>e.children),_(v,h)},$$slots:{default:!0}})};Y(u,f=>{i.state!=="close"&&f(d)})}_(t,c),te()}function Eu(t,e){ee(e,!0);let n=ve(e,"blockedDialog",3,!1),a=ve(e,"hiddenDialog",3,!1),s=ve(e,"blockedBack",3,!1),o=ve(e,"onStartClose",3,()=>{}),i=ve(e,"onClose",3,()=>{});const l=B(()=>s()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=Qt();ke(()=>(c(),()=>{u()}));const{checkMobileSize:d}=yn();var f=Z(),v=F(f);{var p=g=>{gu(g,{get shownDialog(){return e.shownDialog},get hiddenDialog(){return a()},get children(){return e.children},get onStartClose(){return r(l)},get onClose(){return i()}})},h=g=>{Cu(g,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get hiddenDialog(){return a()},get children(){return e.children},get onStartBack(){return r(l)},get onStartClose(){return o()},get onClose(){return i()}})};Y(v,g=>{d()?g(p):g(h,!1)})}_(t,f),te()}function ss(t,e){ee(e,!0);const{back:n}=Tt(),{clearStackPages:a}=ot(),{checkMobileSize:s}=yn();let o=ve(e,"blocked",3,!1),i=ve(e,"isLastDialog",3,!1),l=ve(e,"onBack",3,()=>{}),c=ve(e,"onClosed",3,()=>{});const{checkBlockedDialog:u,checkClosableDialog:d}=Qt(),f=B(()=>o()||u()),v=B(d),p=()=>{(!r(f)||r(f))&&e.shown&&(n(),l()())},h=()=>{((!r(f)||r(f)&&r(v))&&e.shown||!e.shown)&&a()},g=()=>{c()()};{let m=B(()=>r(f)&&e.shown||r(v)===!1),C=B(()=>r(f)||i()&&(r(v)===!1||!s()));Eu(t,{get shownDialog(){return e.shown},get blockedDialog(){return r(m)},get hiddenDialog(){return e.hidden},get blockedBack(){return r(C)},onStartBack:p,onStartClose:h,onClose:g,children:(P,y)=>{var T=Z(),D=F(T);ye(D,()=>e.children),_(P,T)},$$slots:{default:!0}})}te()}var Pu=W('<div class="svelte-1x9a4ve"><!></div>');function Oe(t,e){ee(e,!0);const{setDialogPageHeight:n}=Mr();let a=q(null);ke(()=>{r(a)&&(r(a).getBoundingClientRect(),r(a).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(r(a))return i.observe(r(a)),()=>{r(a)&&i.unobserve(r(a)),i.disconnect()}});var s=Pu(),o=k(s);ye(o,()=>e.children),st(s,i=>w(a,i),()=>r(a)),_(t,s),te()}var xu=W('<div class="svelte-stjbkr"><p class="svelte-stjbkr">Page not found</p> <!></div>');function Au(t,e){ee(e,!1);const{navigate:n}=Tt(),a=i=>{i.preventDefault(),n("/")};Wa();var s=xu(),o=z(k(s),2);Kt(o,{element:"a",href:"/",onClick:a,children:(i,l)=>{var c=Ie("close");_(i,c)},$$slots:{default:!0}}),_(t,s),te()}const Du="modulepreload",Tu=function(t){return"/"+t},os={},je=function(e,n,a){let s=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");s=c(n.map(u=>{if(u=Tu(u),u in os)return;os[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":Du,d||(v.as="script"),v.crossOrigin="",v.href=u,l&&v.setAttribute("nonce",l),document.head.appendChild(v),d)return new Promise((p,h)=>{v.addEventListener("load",p),v.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})};var Nu=W('<div class="svelte-10xfz1h"><p class="svelte-10xfz1h">Something went wrong. Please reload the page</p> <!></div>');function Lu(t){var e=Nu(),n=z(k(e),2);Kt(n,{onClick:()=>location.reload(),children:(a,s)=>{var o=Ie("Reload");_(a,o)},$$slots:{default:!0}}),_(t,e)}var Mu=W('<div><!> <div class="loader svelte-m0sno1"></div></div>');function Mo(t,e){ee(e,!0);let n=q(!1);ke(()=>{const o=setTimeout(()=>{w(n,!0)},200);return()=>{clearTimeout(o)}});var a=Mu(),s=k(a);ye(s,()=>e.children??xe),ce(()=>_e(a,1,pe(["block",{shown:r(n)}]),"svelte-m0sno1")),_(t,a),te()}var Iu=W('<div class="svelte-1mu1b44"><!></div>');function Ou(t,e){ee(e,!0);const{getDialogPageHeight:n}=Mr(),a=B(n);var s=Iu(),o=k(s);Mo(o,{}),ce(()=>Vn(s,`min-height: ${r(a)??""}px;`)),_(t,s),te()}function Ue(t,e){ee(e,!0);const n={},a=Object.assign({"./Pages/About.svelte":()=>je(()=>import("./DRtVqvnV.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>je(()=>import("./472jdDKA.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>je(()=>import("./2cJqDjXQ.js"),__vite__mapDeps([6,3,7])),"./Pages/AccountSetup.svelte":()=>je(()=>import("./DnzN9PS7.js"),__vite__mapDeps([8,9])),"./Pages/Auth.svelte":()=>je(()=>import("./DaczGqrU.js"),__vite__mapDeps([10,11])),"./Pages/ClearStore.svelte":()=>je(()=>import("./Bpy2KKNj.js"),__vite__mapDeps([12,13])),"./Pages/ConfirmAccessKey.svelte":()=>je(()=>import("./CQyNwVdP.js"),__vite__mapDeps([14,4,3,15,16,17,18])),"./Pages/EditNote.svelte":()=>je(()=>import("./DNjH2OtA.js"),__vite__mapDeps([19,20,21,16,17,22,23,24])),"./Pages/Exit.svelte":()=>je(()=>import("./4SX3IyFS.js"),__vite__mapDeps([25,26])),"./Pages/ExportData.svelte":()=>je(()=>import("./8d8u95b6.js"),__vite__mapDeps([27,21,16,17,22,28])),"./Pages/ImportData.svelte":()=>je(()=>import("./CfUXjAqb.js"),__vite__mapDeps([29,21,16,17,22,30])),"./Pages/Install.svelte":()=>je(()=>import("./DztSVt5z.js"),__vite__mapDeps([31,32])),"./Pages/NewNote.svelte":()=>je(()=>import("./BZ0n-S-u.js"),__vite__mapDeps([33,20,21,16,17,22,23])),"./Pages/Signin.svelte":()=>je(()=>import("./aDhiidBq.js"),__vite__mapDeps([34,4,3,15,35])),"./Pages/Signup.svelte":()=>je(()=>import("./dP31ECZv.js"),__vite__mapDeps([36,15,4,3,37])),"./Pages/Subscription.svelte":()=>je(()=>import("./CUfLYA8A.js"),__vite__mapDeps([38,39])),"./Pages/Sync.svelte":()=>je(()=>import("./CRnk-Y_m.js"),__vite__mapDeps([40,41]))}),s=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(a[c]){const u=a[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var o=Z(),i=F(o);wl(i,()=>s(e.page),l=>{Ou(l,{})},(l,c)=>{const u=B(()=>r(c).default);var d=Z(),f=F(d);Sl(f,()=>r(u),(v,p)=>{p(v,{get params(){return e.params},get hidden(){return e.hidden}})}),_(l,d)},l=>{Lu(l)}),_(t,o),te()}var Bu=W('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Io(t,e){let n=B(()=>e.style==="selected"?"45deg":"0deg");var a=Bu();a.__click=function(...c){e.onClick?.apply(this,c)};var s=k(a),o=z(s);ge(o,()=>({"--size":e.size==="small"?"10px":"12px","--rotate":r(n)})),me(o.lastChild,{name:"plus"});var i=z(o,2);{var l=c=>{Ke(c,{children:(u,d)=>{var f=Ie("add tag");_(u,f)}})};Y(i,c=>{e.title===void 0&&c(l)})}ce(()=>{Pe(a,"type",e.type),_e(a,1,pe([{selectedTag:e.style==="selected",small:e.size==="small",empty:e.title===void 0}]),"svelte-uu8a24"),Bt(s,`${e.title??""} `)}),_(t,a)}qe(["click"]);var Ru=W("<div></div>");function is(t,e){ee(e,!0);let n=ve(e,"mobile",3,!1);var a=Ru();qa(a,20,()=>e.tags,s=>s,(s,o)=>{Io(s,{get title(){return o},onClick:()=>e.handleTagClick(o)})}),ce(()=>_e(a,1,pe(["tags",{mobile:n()}]),"svelte-1c53r32")),_(t,a),te()}var Fu=W("<div></div>");function ls(t,e){ee(e,!0);var n=Z(),a=F(n);{var s=o=>{var i=Fu();_e(i,1,pe(["tags","selectedTags"]),"svelte-58z9m1"),qa(i,20,()=>e.selectedTags,l=>l,(l,c)=>{Io(l,{get title(){return c},onClick:()=>e.handleSelectedTagClick(c),style:"selected"})}),_(o,i)};Y(a,o=>{e.selectedTags.size>0&&o(s)})}_(t,n),te()}const zu=(t,e,n)=>{if(t.has("inbox"))return[];const a=[],s=Array.from(t.values());for(const o of e)if(o.data&&!(n&&!n(o))){if(t.size===0){for(const i of o?.data?.tags||[])a.includes(i)||a.push(i);for(const i of o?.data?.draft?.tags||[])a.includes(i)||a.push(i);continue}if(o.data&&s.every(i=>o.data?.tags.includes(i)))for(const i of o.data.tags)!t.has(i)&&!a.includes(i)&&a.push(i);if(o&&o.data.draft&&s.every(i=>o.data?.draft?.tags.includes(i)))for(const i of o.data.draft.tags)!t.has(i)&&!a.includes(i)&&a.push(i)}return a};function Hu(t,e){ee(e,!0);const n=Jt(),{getIsKeyboardVisible:a}=Do();let s=ve(e,"dialog",7);const o=B(a),i=3,l=50,c=5,u=.6,d=.3,f=.35,v=.95;let p=0,h=0,g=0,m=!1,C=!1,P=0,y=0,T=0;const D=()=>{p=0,h=0,m=!1,C=!1,P=0,y=0,T=0,g=0,x!==null&&(cancelAnimationFrame(x),x=null),b=null};let x=null,b=null;const E=Q=>{if(!s()){console.warn("Touch start: No dialog element");return}if(e.sidebarState!=="opened"&&e.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${e.sidebarState}`);return}p=Q.touches[0].clientX,h=Q.touches[0].clientY,g=performance.now(),m=!0,C=!1},M=Q=>e.sidebarState==="closed"&&Q>0||e.sidebarState==="closeSwiping"&&Q>0||e.sidebarState==="opened"&&Q<0||e.sidebarState==="openSwiping"&&Q<0,J=()=>{if(s()){if(s().style.setProperty("--transition-timing","0s"),!s().open&&e.sidebarState==="closed")try{s().showModal(),s().offsetWidth}catch(Q){console.error("Error opening dialog:",Q);return}e.onSwipe();try{const Q=window.getComputedStyle(s()),$=Q.transform||Q.webkitTransform||"";if(y=s().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?P=-y:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(P=0),$&&$!=="none")try{P=new DOMMatrix($).m41}catch{console.warn("Could not parse transform matrix, using default position")}C=!0}catch(Q){console.error("Error during swipe initialization:",Q),D()}}},K=()=>{if(!s())return;const Q=-(y*.3),$=-y;let U=0;const G=window.getComputedStyle(s()),N=G.transform||G.webkitTransform||"";if(N&&N!=="none")try{U=new DOMMatrix(N).m41}catch{U=0}const re=.25*Math.min(1,Math.max(0,(U-$)/(Q-$)));s().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${re})`)},H=()=>{if(x=null,!b||!m||!s()||r(o))return;const{x:Q,y:$}=b;b=null;const U=Q-p,G=$-h,N=Math.abs(U)>Math.abs(G),O=Math.abs(U)>i;if(!C)if(N&&O&&M(U))try{J()}catch(S){console.error("Error initializing swipe:",S),D();return}else return;let V=P+U*v;const re=-y,A=-(y*.3);let R=Math.max(re,Math.min(A,V));s().style.setProperty("--transition-timing","0s"),s().style.transform=`translate3d(${R}px, 0, 0)`,n.swipingRatio=(-1+Math.abs(R/y))/7*10,T=(R-P)/y*100,K()},X=Q=>{if(!m)return;const $=Q.touches[0].clientX,U=Q.touches[0].clientY;b={x:$,y:U},x===null&&(x=requestAnimationFrame(H)),C&&Math.abs($-p)>Math.abs(U-h)&&Q.preventDefault()},oe=Q=>{const $=Math.abs(Q);if($>=u)return c;if($>=d){const U=($-d)/(u-d);return l-U*(l-c)}else return l},ne=(Q,$)=>{if(Math.abs(Q)>=u)return f*.5;const G=Math.abs(T)/100;return $?f*Math.max(.5,1-G):f*Math.max(.5,G)},de=Q=>{if(x!==null&&(cancelAnimationFrame(x),x=null),b=null,!m||!s()){D();return}if(!C){D();return}let $=0;if(Q?.changedTouches?.[0]){const V=Q.changedTouches[0].clientX,A=performance.now()-g;A>0&&($=(V-p)/A)}const U=oe($);let G=null;e.sidebarState==="closeSwiping"?G=Math.abs(T)>U||$>d?"open":"close":e.sidebarState==="openSwiping"&&(G=Math.abs(T)>U||$<-d?"close":"open");const N=e.sidebarState==="closeSwiping"&&G==="open"||e.sidebarState==="openSwiping"&&G==="close",O=ne($,N);n.duration=O-.02,s().style.setProperty("--transition-timing",`${O}s`),s().offsetWidth,s().style.transform="",G==="open"?e.onOpen():G==="close"&&e.onClose(),s()?.style.removeProperty("--backdrop-bg"),D()};ke(()=>(document.addEventListener("touchstart",E,{passive:!0}),document.addEventListener("touchmove",X,{passive:!1}),document.addEventListener("touchend",de,{passive:!0}),document.addEventListener("touchcancel",de,{passive:!0}),()=>{document.removeEventListener("touchstart",E),document.removeEventListener("touchmove",X),document.removeEventListener("touchend",de),document.removeEventListener("touchcancel",de),x!==null&&cancelAnimationFrame(x)})),te()}var ju=W('<dialog><div class="dialogInner svelte-1nov8pn"><!></div></dialog> <!> <!>',1);function Uu(t,e){ee(e,!0);const{getStackPages:n}=ot(),{getSidebarState:a,handleComputeState:s}=Ya();let o=350;const i=Jt(),{isScrolling:l}=Nr();let c=q(null),u=q(null),d=B(a);Le(()=>{n().length>0&&s({type:"close"})});const f=()=>{e.blocked||s({type:"close"})},v=()=>{e.blocked||s({type:"open"})},p=()=>{s({type:"opened"}),i.swipingRatio=-1,i.duration=.2},h=()=>{s({type:"closed"})},g=()=>{s({type:"swipe"})},m=H=>{H.preventDefault(),f()};ke(()=>(r(c)?.addEventListener("close",h),r(c)?.addEventListener("cancel",m),()=>{r(c)?.removeEventListener("close",h),r(c)?.removeEventListener("cancel",m)}));const C=()=>{r(c)?.style.removeProperty("--transition-timing"),r(c)?.style.removeProperty("transform"),r(c)?.style.removeProperty("--backdrop-bg")},P=B(l);Le(()=>{if(r(d),!!r(c))switch(r(d).type==="openSwiping"||r(d).type==="closeSwiping"?i.isSwiping=!0:i.isSwiping=!1,r(d).type){case"closeSwiping":{const H=setTimeout(()=>{f()},3e3);return()=>{clearTimeout(H)}}case"openSwiping":{const H=setTimeout(()=>{v()},3e3);return()=>{clearTimeout(H)}}case"opening":{r(c).open||r(c).showModal(),r(c).getBoundingClientRect();const H=setTimeout(()=>{C()},o+1),X=()=>{clearTimeout(H),C()};return r(c)?.addEventListener("transitionend",X,{once:!0}),p(),()=>{clearTimeout(H),r(c)?.removeEventListener("transitionend",X)}}case"closing":{i.swipingRatio=0,i.duration=.2;const H=setTimeout(()=>{r(d).type==="closing"&&h()},o+1),X=()=>{clearTimeout(H),h()};return r(c)?.addEventListener("transitionend",X,{once:!0}),()=>{clearTimeout(H),r(c)?.removeEventListener("transitionend",X)}}case"closed":r(c)?.close(),C();break;case"opened":C();break}});var y=ju(),T=F(y),D=k(T),x=k(D);{var b=H=>{var X=Z(),oe=F(X);ye(oe,()=>e.children),_(H,X)};Y(x,H=>{r(d).type!=="closed"&&H(b)})}st(D,H=>w(u,H),()=>r(u)),st(T,H=>w(c,H),()=>r(c));var E=z(T,2);{var M=H=>{Ir(H,{get dialog(){return r(c)},get dialogInner(){return r(u)},onClose:f})};Y(E,H=>{r(d).type==="opened"&&!e.blocked&&H(M)})}var J=z(E,2);{var K=H=>{Hu(H,{onClose:f,onOpen:v,onSwipe:g,get sidebarState(){return r(d).type},get dialog(){return r(c)}})};Y(J,H=>{(!r(P)&&r(d).type==="closed"||r(d).type==="opened"||r(d).type==="openSwiping"||r(d).type==="closeSwiping")&&!e.blocked&&H(K)})}ce(()=>_e(T,1,pe([{open:r(d).type==="opened",hidden:e.blocked,isAnimationOn:i.working&&(!i.isSwiping||!e.blocked)}]),"svelte-1nov8pn")),_(t,y),te()}var Vu=(t,e,n)=>{e(),n("/",{full:!0})(t)},qu=W('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Wu=(t,e,n)=>{e(),n(j.Bin,{full:!0})(t)},Yu=W('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Ku=W('<div class="sidebarFixed svelte-ltt61h"><div class="nav svelte-ltt61h"><!> <div class="menu svelte-ltt61h"><a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="searchWrapper svelte-ltt61h"><!></div> <!></div> <!>',1),Xu=W('<div class="sidebar svelte-ltt61h"><div class="sidebarFixed svelte-ltt61h"><!></div> <!></div>');function Gu(t,e){ee(e,!0);const{checkMobileSize:n}=yn(),{sidebarClose:a}=Ya(),{getAppLocation:s}=Tt(),{getPageUrl:o,createHandlePage:i,getStackPagesFormUrl:l}=ot(),c=oo(),u=B(()=>s().pathname),{getSelectedTags:d,addTag:f,removeTag:v}=fo();let p=B(d);const{checkNotesInBin:h}=da();let g=ve(e,"getNotes",3,()=>[]),m=ve(e,"mode",3,"notes");const C=K=>{f(K)},P=K=>{v(K)};let y=B(()=>zu(r(p),g()()||[],K=>!(K?.data&&K.data.deletedAt&&m()==="notes"||K?.data&&!K.data.deletedAt&&m()==="bin")).filter(K=>c.value===""||K.toLowerCase().indexOf(c.value.toLowerCase())!==-1).sort((K,H)=>K==="inbox"?-1:H==="inbox"?1:K.localeCompare(H))),T=B(n);const{checkExistedDialog:D}=Qt();let x=B(()=>l().length>0||D());var b=Z(),E=F(b);{var M=K=>{Uu(K,{get blocked(){return r(x)},children:(H,X)=>{var oe=Ku(),ne=F(oe),de=k(ne),Q=k(de);To(Q,{});var $=z(Q,2),U=k($),G=B(()=>i(j.Settings));U.__click=function(...ue){r(G)?.apply(this,ue)};var N=k(U);ge(N,()=>({"--size":"24px"})),me(N.lastChild,{name:"settings"});var O=z(N,2);Ke(O,{children:(ue,Ce)=>{var Ee=Ie("Settings");_(ue,Ee)}});var V=z(U,2),re=B(()=>i(j.Sync));V.__click=function(...ue){r(re)?.apply(this,ue)};var A=k(V);ge(A,()=>({"--size":"24px"})),me(A.lastChild,{name:"sync"});var R=z(A,2);Ke(R,{children:(ue,Ce)=>{var Ee=Ie("Sync");_(ue,Ee)}});var S=z(V,2);{var I=ue=>{var Ce=qu();Ce.__click=[Vu,a,i];var Ee=k(Ce);ge(Ee,()=>({"--size":"24px"})),me(Ee.lastChild,{name:"note"});var De=z(Ee,2);Ke(De,{children:(Te,Me)=>{var Je=Ie("Notes");_(Te,Je)}}),ce(Te=>Pe(Ce,"href",Te),[()=>o("/",{full:!0})]),_(ue,Ce)},se=ue=>{var Ce=Z(),Ee=F(Ce);{var De=Te=>{var Me=Yu();Me.__click=[Wu,a,i];var Je=k(Me);ge(Je,()=>({"--size":"24px"})),me(Je.lastChild,{name:"bin"});var Qe=z(Je,2);Ke(Qe,{children:($e,Nt)=>{var Ht=Ie("Bin");_($e,Ht)}}),ce($e=>Pe(Me,"href",$e),[()=>o(j.Bin,{full:!0})]),_(Te,Me)};Y(Ee,Te=>{h()&&Te(De)},!0)}_(ue,Ce)};Y(S,ue=>{r(u)===`/${j.Bin}`?ue(I):ue(se,!1)})}var be=z(de,2),fe=k(be);gr(fe,{placeholder:"Search tag",get value(){return c.value},set value(ue){c.value=ue}});var ae=z(be,2);ls(ae,{get selectedTags(){return r(p)},handleSelectedTagClick:P});var ie=z(ne,2);is(ie,{get tags(){return r(y)},handleTagClick:C,mobile:!0}),ce((ue,Ce)=>{Pe(U,"href",ue),Pe(V,"href",Ce)},[()=>o(j.Settings),()=>o(j.Sync)]),_(H,oe)},$$slots:{default:!0}})},J=K=>{var H=Xu(),X=k(H),oe=k(X);ls(oe,{get selectedTags(){return r(p)},handleSelectedTagClick:P});var ne=z(X,2);is(ne,{get tags(){return r(y)},handleTagClick:C}),_(K,H)};Y(E,K=>{r(T)?K(M):K(J,!1)})}_(t,b),te()}qe(["click"]);const Zu=(t,e,n,a)=>{e.noteData.pinnedAt?(n(e.noteId,!1),fn("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),fn("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),w(a,!0)},Ju=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),fn("Link copied"),w(n,!0)};var Qu=W('<li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),$u=(t,e,n)=>{w(e,!0),w(n,!0)},ed=W('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),td=(t,e,n)=>{w(e,!0),w(n,!0)},nd=(t,e,n)=>{w(e,!0),w(n,!0)},ad=W('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete from bin</button></li>',1),rd=W('<ul class="menu svelte-8ve3pe"><!> <li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),sd=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),od=W("<!> <!>",1);function id(t,e){ee(e,!0);const n=(E,M=xe)=>{var J=rd(),K=k(J);{var H=G=>{var N=Qu(),O=k(N);O.__click=[Ju,e,u];var V=k(O);ge(V,()=>({"--size":"22px"})),me(V.lastChild,{name:"copy"}),ce(()=>_e(O,1,pe(["button",{buttonMenuDialog:M()}]),"svelte-8ve3pe")),_(G,N)};Y(K,G=>{M()&&e.noteData.url&&G(H)})}var X=z(K,2),oe=k(X);oe.__click=[Zu,e,o,u];var ne=k(oe);{let G=B(()=>e.noteData.pinnedAt?"pin-cancel":"pin");ge(ne,()=>({"--size":"22px"})),me(ne.lastChild,{get name(){return r(G)}})}var de=z(ne),Q=z(X,2);{var $=G=>{var N=ed(),O=k(N);O.__click=[$u,d,u];var V=k(O),re=k(V);ge(re,()=>({"--size":"18px"})),me(re.lastChild,{name:"bin"}),ce(()=>_e(O,1,pe(["button",{buttonMenuDialog:M()}]),"svelte-8ve3pe")),_(G,N)},U=G=>{var N=ad(),O=F(N),V=k(O);V.__click=[td,f,u];var re=k(V),A=k(re);ge(A,()=>({"--size":"18px"})),me(A.lastChild,{name:"bin-cancel"});var R=z(O,2),S=k(R);S.__click=[nd,v,u];var I=k(S),se=k(I);ge(se,()=>({"--size":"18px"})),me(se.lastChild,{name:"bin"}),ce(()=>{_e(V,1,pe(["button",{buttonMenuDialog:M()}]),"svelte-8ve3pe"),_e(S,1,pe(["button",{buttonMenuDialog:M()}]),"svelte-8ve3pe")}),_(G,N)};Y(Q,G=>{l()==="notes"?G($):G(U,!1)})}ce(()=>{_e(oe,1,pe(["button",{buttonMenuDialog:M()}]),"svelte-8ve3pe"),Bt(de,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),_(E,J)},{moveNoteToBin:a,deleteNote:s,pinNote:o,restoreNoteFromBin:i}=da();let l=ve(e,"mode",3,"notes"),c=ve(e,"shownMenu",15),u=q(!1),d=q(!1),f=q(!1),v=q(!1);const{checkMobileSize:p}=yn();let h=B(p);const g=()=>{s(e.noteId),fn("Draft deleted")},m=async()=>{a(e.noteId),fn("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},C=()=>{i(e.noteId),fn("Note restored from bin",{onCancel:()=>{a(e.noteId)}})},P=()=>{r(d)?(w(d,!1),e.noteData.type==="draft"?g():m()):r(f)&&(w(f,!1),C()),c(!1),w(u,!1)};var y=od(),T=F(y);{var D=E=>{var M=Z(),J=F(M);{var K=X=>{Or(X,{get startClose(){return r(u)},onClosed:P,children:(oe,ne)=>{n(oe,()=>!0)},$$slots:{default:!0}})},H=X=>{var oe=sd(),ne=F(oe);ge(ne,()=>({"--bottom":"-90px","--right":"20px"})),No(ne.lastChild,{get startClose(){return r(u)},get positionTop(){return e.showMenuUp},onClosed:P,children:(de,Q)=>{n(de,()=>!1)},$$slots:{default:!0}}),_(X,oe)};Y(J,X=>{r(h)?X(K):X(H,!1)})}_(E,M)};Y(T,E=>{c()&&E(D)})}var x=z(T,2);{var b=E=>{Lo(E,{title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:()=>{s(e.noteId),w(v,!1)},onCancel:()=>{w(v,!1)}})};Y(x,E=>{r(v)&&E(b)})}_(t,y),te()}qe(["click"]);const ld=(t,e)=>{w(e,!0)},cd=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),fn("Link copied"),w(n,!1)},ud=(t,e)=>{w(e,!0)},dd=(t,e)=>{w(e,!1)},fd=(t,e,n,a)=>{t.preventDefault(),e.noteData.type==="draft"?n(`${j.NewNote}`):n(`${j.EditNote}?id=${e.noteId}`),w(a,!1)};var vd=W('<div class="iconPlaceholder svelte-1jg44o9"></div>'),hd=W('<img loading="lazy" class="noteIcon" height="16" width="16" alt=""/>'),gd=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),pd=W('<div class="noteIconWrapper svelte-1jg44o9"><!></div>'),_d=W('<button class="button svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),md=(t,e)=>{w(e,!1)},wd=W('<!> <a target="_blank" rel="noopener noreferrer" class="button openLink svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),yd=W('<li><!> <a class="noteLink svelte-1jg44o9" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function bd(t,e){ee(e,!0);const{pushStackPages:n}=ot(),{getFaviconEnabled:a}=po();let s=ve(e,"mode",3,"notes"),o=q(!1),i=q(!1),l=q(!1),c=B(a);const{checkMobileSize:u}=yn(),d=E=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(E).host}.ico`}catch{return""}},f=e.noteData.url||e.noteData.draft?.url||"";var v=yd();v.__focusin=[ud,i],v.__focusout=[dd,i];var p=k(v);{var h=E=>{var M=pd(),J=k(M);{var K=X=>{var oe=Z(),ne=F(oe);{var de=$=>{var U=vd();_($,U)},Q=$=>{var U=hd();ce(G=>Pe(U,"src",G),[()=>d(f)]),Ar("error",U,()=>{w(l,!0)}),_($,U)};Y(ne,$=>{r(l)?$(de):$(Q,!1)})}_(X,oe)},H=X=>{var oe=gd(),ne=F(oe);ge(ne,()=>({"--size":"16px"})),me(ne.lastChild,{name:"note"}),_(X,oe)};Y(J,X=>{f?X(K):X(H,!1)})}_(E,M)};Y(p,E=>{r(c)&&E(h)})}var g=z(p,2);g.__click=[fd,e,n,i];var m=k(g),C=z(g,2),P=k(C);{var y=E=>{var M=wd(),J=F(M);{var K=ne=>{var de=_d();de.__click=[cd,e,i];var Q=k(de);ge(Q,()=>({"--size":"20px"})),me(Q.lastChild,{name:"copy"});var $=z(Q,2);Ke($,{children:(U,G)=>{var N=Ie("copy link");_(U,N)}}),ce(()=>Pe(de,"tabindex",e.focusHidden?-1:0)),_(ne,de)};Y(J,ne=>{u()||ne(K)})}var H=z(J,2);H.__click=[md,i];var X=k(H);ge(X,()=>({"--size":"18px"})),me(X.lastChild,{name:"open"});var oe=z(X,2);Ke(oe,{children:(ne,de)=>{var Q=Ie();ce(()=>Bt(Q,e.noteData.draft?.name||e.noteData.name||"unknown")),_(ne,Q)}}),ce(()=>{Pe(H,"href",f),Pe(H,"tabindex",e.focusHidden?-1:0)}),_(E,M)};Y(P,E=>{f&&E(y)})}var T=z(P,2);T.__click=[ld,o],_e(T,1,pe(["button","buttonMenu"]),"svelte-1jg44o9");var D=k(T);ge(D,()=>({"--size":"18px","--rotate":"90deg"})),me(D.lastChild,{name:"menu"});var x=z(D,2);Ke(x,{children:(E,M)=>{var J=Ie("show menu");_(E,J)}});var b=z(C,2);id(b,{get mode(){return s()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return r(o)},set shownMenu(E){w(o,E,!0)}}),ce((E,M)=>{_e(v,1,E,"svelte-1jg44o9"),Pe(g,"tabindex",e.focusHidden?-1:0),Pe(g,"href",M),Bt(m,e.noteData?.draft?.name||e.noteData?.name||"unknown"),_e(C,1,pe(["noteMenuWrapper",{noteMenuWrapperActive:r(i)}]),"svelte-1jg44o9"),Pe(T,"tabindex",e.focusHidden?-1:0)},[()=>pe(["record",{pinned:!!e.noteData.pinnedAt,draft:!!e.noteData.draft}]),()=>`/?stackPages=${encodeURIComponent(`${j.EditNote}?id=${e.noteId}`)}`]),_(t,v),te()}qe(["focusin","focusout","click"]);var qn,Oo,Bo;class Sd{constructor(e){Se(this,qn);it(this,"data");it(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),ze(this,qn,Oo).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,ze(this,qn,Bo).call(this)),e}isEmpty(){return this.data.length===0}}qn=new WeakSet,Oo=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const a=Math.floor((e-1)/2);if(this.compare(n,this.data[a])>=0)break;[this.data[e],this.data[a]]=[this.data[a],this.data[e]],e=a}},Bo=function(){let e=0;const n=this.data.length;for(;;){const a=2*e+1,s=2*e+2;let o=e;if(a<n&&this.compare(this.data[a],this.data[o])<0&&(o=a),s<n&&this.compare(this.data[s],this.data[o])<0&&(o=s),o===e)break;[this.data[e],this.data[o]]=[this.data[o],this.data[e]],e=o}};class kd{constructor(e,n){it(this,"heap");it(this,"done");it(this,"cache",[]);this.heap=new Sd(n);for(const a of e)this.heap.insert(a);this.done=!1}get(e,n){const a=this.cache.slice(e,n);for(;a.length<n-e&&!this.heap.isEmpty();){const s=this.heap.extractMin();s!==void 0&&(this.cache.push(s),a.push(s))}return this.heap.isEmpty()&&(this.done=!0),a}}var Cd=W('<p class="message">No notes in bin</p>'),Ed=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),Pd=W('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),xd=W('<p class="message">No notes found</p> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div> <div>or</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),Ad=W('<div class="emptyStore svelte-106i4nx"><!></div>'),Dd=W("<span>Back to notes</span>"),Td=W('<div class="emptyMessage svelte-106i4nx">No notes in bin</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),Nd=W('<div class="emptyMessage svelte-106i4nx">No notes found</div>'),Ld=W('<div class="feed svelte-106i4nx"><ul class="svelte-106i4nx"></ul></div>'),Md=W('<div class="wrapperFeed svelte-106i4nx"><div class="wrapperContainer svelte-106i4nx"><!></div></div>');function Id(t,e){ee(e,!0);let n=ve(e,"getNotes",3,()=>[]),a=ve(e,"mode",3,"notes");const{getScrollContainer:s}=Lr(),{createHandlePage:o,getPageUrl:i}=ot(),{getSelectedTags:l}=fo(),{getFeedOrder:c}=lo(),u=ao();let d=54,f=q(0),v=q(0),p=q(0),h=q(0),g=[],m=q(0),C=q(null),P=B(s),y=null,T=null;const D=B(l);Le(()=>{r(D),r(J),r(P)?.scrollTo(0,0)});const{enable:x}=Nr(),b=()=>{x(),y||(y=requestAnimationFrame(()=>{const N=r(P)?.scrollTop||0;w(p,N,!0);const O=Math.ceil(r(f)/d);w(v,Math.floor(N/(d*O))*(d*O)),y=null}))},E=()=>{T||(T=requestAnimationFrame(()=>{w(f,window.innerHeight-180||0,!0);const N=r(P)?.scrollTop||0;w(p,N,!0);const O=Math.ceil(r(f)/d);w(v,Math.floor(N/(d*O))*(d*O)),T=null}))};ke(()=>{E(),b()});const M=()=>{b()};Le(()=>(r(P)?.addEventListener("scroll",M),window.addEventListener("resize",E),()=>{r(P)?.removeEventListener("scroll",M),window.removeEventListener("resize",E)}));const J=B(c);Le(()=>{const N=n()()||[],O=[],V=Array.from(r(D).values());for(let re=N.length-1;re>=0;re--){if(!N[re]||!N[re].data)continue;const A=N[re];a()==="notes"&&A?.data.deletedAt||a()==="bin"&&!A?.data.deletedAt||r(D).size&&V.some(R=>!A.data?.tags.includes(R))&&(!A.data.draft||V.some(R=>!A.data?.draft?.tags.includes(R)))||u&&!(A.data.name.toLowerCase().includes(u.value.toLowerCase())||A.data.url.toLowerCase().includes(u.value.toLowerCase())||A.data.text.toLowerCase().includes(u.value.toLowerCase()))||O.push(A)}w(h,O.length,!0),g=O,w(m,Date.now(),!0)}),Le(()=>{r(J),r(m),w(C,new kd(g,(N,O)=>{if(!N||!O||!N.data||!O.data)return 0;if(N.data.pinnedAt&&!O.data.pinnedAt)return-1;if(!N.data.pinnedAt&&O.data.pinnedAt)return 1;if(N.data.pinnedAt&&O.data.pinnedAt){if(N.data.pinnedAt<O.data.pinnedAt)return 1;if(N.data.pinnedAt>O.data.pinnedAt)return-1}if(N.data.draft&&!O.data.draft)return-1;if(!N.data.draft&&O.data.draft)return 1;if(N.data.draft&&O.data.draft){if(N.data.draft.updatedAt<O.data.draft.updatedAt)return 1;if(N.data.draft.updatedAt>O.data.draft.updatedAt)return-1}switch(r(J)){case"newest":return N.data.updatedAt<O.data.updatedAt?1:-1;case"oldest":return N.data.updatedAt>O.data.updatedAt?1:-1;case"AtoZ":return N.data.name.localeCompare(O.data.name);case"ZtoA":return O.data.name.localeCompare(N.data.name);default:return 0}}),!0)});const K=B(()=>r(h)*d);let X=B(()=>{r(m);const N=Math.ceil(r(f)/d);let O=Math.floor(r(v)/d);return O=O-Math.min(O,N),r(C)?.get(O,O+N*3)||[]}),oe=B(()=>d*Math.ceil(r(f)/d));const ne=B(()=>r(v)-Math.min(r(v),r(oe)));var de=Md(),Q=k(de),$=k(Q);{var U=N=>{Mo(N,{})},G=N=>{var O=Z(),V=F(O);{var re=R=>{var S=Ad(),I=k(S);{var se=fe=>{var ae=Cd();_(fe,ae)},be=fe=>{var ae=xd(),ie=z(F(ae),2),ue=k(ie);{let De=B(()=>i(j.NewNote)),Te=B(()=>o(j.NewNote));Kt(ue,{element:"a",get href(){return r(De)},get onClick(){return r(Te)},children:(Me,Je)=>{var Qe=Ed(),$e=F(Qe);ge($e,()=>({"--size":"18px","--color":"#b0b0b0"})),me($e.lastChild,{name:"plus"}),_(Me,Qe)},$$slots:{default:!0}})}var Ce=z(ie,4),Ee=k(Ce);{let De=B(()=>i(j.ImportData)),Te=B(()=>o(j.ImportData));Kt(Ee,{element:"a",get href(){return r(De)},get onClick(){return r(Te)},children:(Me,Je)=>{var Qe=Pd(),$e=F(Qe);ge($e,()=>({"--size":"18px","--color":"#b0b0b0"})),me($e.lastChild,{name:"import"}),_(Me,Qe)},$$slots:{default:!0}})}_(fe,ae)};Y(I,fe=>{a()==="bin"?fe(se):fe(be,!1)})}_(R,S)},A=R=>{var S=Z(),I=F(S);{var se=fe=>{var ae=Td(),ie=z(F(ae),2),ue=k(ie);{let Ce=B(()=>i("/",{full:!0})),Ee=B(()=>o("/",{full:!0}));Kt(ue,{element:"a",get href(){return r(Ce)},get onClick(){return r(Ee)},children:(De,Te)=>{var Me=Dd();_(De,Me)},$$slots:{default:!0}})}_(fe,ae)},be=fe=>{var ae=Z(),ie=F(ae);{var ue=Ee=>{var De=Nd();_(Ee,De)},Ce=Ee=>{var De=Ld(),Te=k(De);qa(Te,23,()=>r(X),Me=>Me.data,(Me,Je,Qe)=>{var $e=Z(),Nt=F($e);{var Ht=bn=>{{let Ka=B(()=>r(Qe)*d<r(p)-r(ne)-d/2||r(Qe)*d>r(p)-r(ne)+Math.floor(r(f)/d)*d),Xa=B(()=>(r(Qe)+3)*d<r(p)-r(ne)-d/2||(r(Qe)+3)*d>r(p)-r(ne)+Math.floor(r(f)/d)*d);bd(bn,{get mode(){return a()},get focusHidden(){return r(Ka)},get showMenuUp(){return r(Xa)},get noteId(){return r(Je).id},get noteData(){return r(Je).data}})}};Y(Nt,bn=>{r(Je).data&&bn(Ht)})}_(Me,$e)}),ce(Me=>{Vn(De,`min-height: ${Me??""}px`),Vn(Te,`transform: translateY(${r(ne)??""}px);`)},[()=>Math.max((r(K)>r(f),r(K)),0)]),_(Ee,De)};Y(ie,Ee=>{r(X).length===0?Ee(ue):Ee(Ce,!1)},!0)}_(fe,ae)};Y(I,fe=>{a()==="bin"&&e.countNotesInBin()===0?fe(se):fe(be,!1)},!0)}_(R,S)};Y(V,R=>{(n()()||[]).length===0||a()==="notes"&&(n()()||[]).length-e.countNotesInBin()===0?R(re):R(A,!1)},!0)}_(N,O)};Y($,N=>{e.readyNotes?N(G,!1):N(U)})}_(t,de),te()}var Od=W('<!> <div class="content svelte-k57gez"><!></div>',1);function Bd(t,e){ee(e,!0);const{getAppLocation:n}=Tt(),{getGetNotes:a,isInitedNotes:s,countNotesInBin:o}=da(),i=B(s),l=B(a),c=B(()=>n().pathname);var u=Od(),d=F(u);{let p=B(()=>r(c)==="/bin"?"bin":"notes");Gu(d,{get mode(){return r(p)},get getNotes(){return r(l)}})}var f=z(d,2),v=k(f);{let p=B(()=>r(c)==="/bin"?"bin":"notes");Id(v,{get mode(){return r(p)},get getNotes(){return r(l)},get countNotesInBin(){return o},get readyNotes(){return r(i)}})}_(t,u),te()}var Rd=W('<h1 class="svelte-1ky72l5"><!></h1>');function Fd(t,e){var n=Rd(),a=k(n);ye(a,()=>e.children),_(t,n)}const zd=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,Ro=()=>zd;var Hd=W('<div class="block svelte-4rc64"><!> <p class="message svelte-4rc64">Enjoy using the app!</p> <div class="container svelte-4rc64"><!></div></div>');function jd(t,e){ee(e,!1);const{pushStackPages:n}=ot(),a=()=>{Ro()?n(j.AccountSetup):n(j.Install)};Wa();var s=Hd(),o=k(s);Fd(o,{children:(c,u)=>{var d=Ie("Wellcome");_(c,d)}});var i=z(o,4),l=k(i);Kt(l,{onClick:a,fullWidth:!0,children:(c,u)=>{var d=Ie("Start");_(c,d)},$$slots:{default:!0}}),_(t,s),te()}var Ud=W('<div class="wrapper svelte-1rhfuek"><fieldset class="switcher svelte-1rhfuek"><legend class="vh svelte-1rhfuek">Color Scheme</legend> <input id="light" type="radio" aria-label="Light"/> <label for="light" title="Light" aria-label="Light"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="system" type="radio" aria-label="System"/> <label for="system" title="System" aria-label="System"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="dark" type="radio" aria-label="Dark"/> <label for="dark" title="Dark" aria-label="Dark"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <div class="wrapSwitcherStatus svelte-1rhfuek"><div class="switcherStatus svelte-1rhfuek"></div></div></fieldset></div>');function Vd(t,e){ee(e,!0);const{createBroadcastChannel:n}=wn(),a=n(),s={Light:"light",System:"system",Dark:"dark"};let o=q(Be(localStorage.getItem("colorScheme")||s.System));const i=D=>{localStorage.setItem("colorScheme",D),D===s.System?window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.dataset.colorScheme=s.Dark:document.documentElement.dataset.colorScheme=s.Light:document.documentElement.dataset.colorScheme=D,w(o,D,!0)},l=D=>{const x=D.target.value;i(x),a.postMessage({type:"setColorScheme",data:{scheme:x}})},c="color-scheme-switcher";ke(()=>{const D=x=>{const b=JSON.parse(x.data);b?.type==="setColorScheme"&&b?.data.scheme&&i(b.data.scheme)};return a.addEventListener(D),()=>{a.removeEventListener(D)}});var u={setColorScheme:i,handleChange:l},d=Ud(),f=k(d),v=z(k(f),2);_e(v,1,pe(["vh","input"]),"svelte-1rhfuek"),Pe(v,"name",c),v.__change=l;var p=z(v,2);_e(p,1,pe(["switcherButton","light"]),"svelte-1rhfuek");var h=k(p);ge(h,()=>({"--size":"20px"})),me(h.lastChild,{name:"sun"});var g=z(p,2);_e(g,1,pe(["vh","input"]),"svelte-1rhfuek"),Pe(g,"name",c),g.__change=l;var m=z(g,2);_e(m,1,pe(["switcherButton","system"]),"svelte-1rhfuek");var C=k(m);ge(C,()=>({"--size":"14px"})),me(C.lastChild,{name:"a"});var P=z(m,2);_e(P,1,pe(["vh","input"]),"svelte-1rhfuek"),Pe(P,"name",c),P.__change=l;var y=z(P,2);_e(y,1,pe(["switcherButton","dark"]),"svelte-1rhfuek");var T=k(y);return ge(T,()=>({"--size":"20px"})),me(T.lastChild,{name:"moon"}),ce(()=>{$a(v,s.Light),Pa(v,r(o)===s.Light),$a(g,s.System),Pa(g,r(o)===s.System),$a(P,s.Dark),Pa(P,r(o)===s.Dark)}),_(t,d),te(u)}qe(["change"]);const qd=(t,e)=>{e.onChange(!e.checked)};var Wd=W('<label class="switch svelte-18l3no4"><input class="vh svelte-18l3no4" type="checkbox"/> <span class="slider svelte-18l3no4"></span> <!></label>');function Yd(t,e){ee(e,!0);var n=Wd(),a=k(n);a.__change=[qd,e];var s=z(a,4);Ke(s,{children:(o,i)=>{var l=Ie("Toggle switch");_(o,l)}}),ce(()=>Pa(a,e.checked)),_(t,n),te()}qe(["change"]);var Kd=W('<li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">Install app</span></a></li>'),Xd=W("<span> </span>"),Gd=W('<div class="block svelte-94ovk9"><!> <ul class="svelte-94ovk9"><!> <li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">Account</span></a></li> <li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">Import data</span></a></li> <li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">Export data</span></a></li> <li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">Clear storage</span></a></li> <li class="svelte-94ovk9"><a class="button svelte-94ovk9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-94ovk9">About</span></a></li></ul> <div class="favicons svelte-94ovk9"><span class="faviconsLabel svelte-94ovk9">show favicons (use duckduckgo servers)</span> <!></div> <div class="hotkeys svelte-94ovk9"><div class="hotkey__head svelte-94ovk9">Hotkeys:</div> <div>New note: <span class="hotkey svelte-94ovk9">N</span></div> <div>Search notes: <span class="hotkey svelte-94ovk9">Ctrl + K</span> or <span class="hotkey svelte-94ovk9">Cmd + K</span></div></div> <div class="version svelte-94ovk9"><!></div></div>');function Zd(t,e){ee(e,!0);const{createHandlePage:n}=ot(),{setFaviconShown:a,getFaviconEnabled:s}=po();let o=B(s),i=q("");const l=async V=>{try{const A=await(await fetch("/build-metadata.json",{signal:V})).json();w(i,`${A.buildHash}`)}catch{console.error("Failed to load build metadata")}};ke(()=>{const V=new AbortController;return l(V.signal),()=>{V.abort()}});const c=V=>{a(V)};var u=Gd(),d=k(u);Vd(d,{});var f=z(d,2),v=k(f);{var p=V=>{var re=Kd(),A=k(re),R=B(()=>n(j.Install));A.__click=function(...I){r(R)?.apply(this,I)};var S=k(A);ge(S,()=>({"--size":"28px"})),me(S.lastChild,{name:"install"}),ce(()=>Pe(A,"href",`/?stackPages=${j.Install}`)),_(V,re)};Y(v,V=>{Ro()||V(p)})}var h=z(v,2),g=k(h),m=B(()=>n(j.Account));g.__click=function(...V){r(m)?.apply(this,V)};var C=k(g);ge(C,()=>({"--size":"28px"})),me(C.lastChild,{name:"account"});var P=z(h,2),y=k(P),T=B(()=>n(j.ImportData));y.__click=function(...V){r(T)?.apply(this,V)};var D=k(y);ge(D,()=>({"--size":"28px"})),me(D.lastChild,{name:"import"});var x=z(P,2),b=k(x),E=B(()=>n(j.ExportData));b.__click=function(...V){r(E)?.apply(this,V)};var M=k(b);ge(M,()=>({"--size":"28px"})),me(M.lastChild,{name:"export"});var J=z(x,2),K=k(J),H=B(()=>n(j.ClearStore));K.__click=function(...V){r(H)?.apply(this,V)};var X=k(K);ge(X,()=>({"--size":"28px"})),me(X.lastChild,{name:"clear"});var oe=z(J,2),ne=k(oe),de=B(()=>n(j.About));ne.__click=function(...V){r(de)?.apply(this,V)};var Q=k(ne);ge(Q,()=>({"--size":"28px"})),me(Q.lastChild,{name:"about"});var $=z(f,2),U=z(k($),2);Yd(U,{get checked(){return r(o)},onChange:c});var G=z($,4),N=k(G);{var O=V=>{var re=Xd(),A=k(re);ce(R=>Bt(A,`version: 0.0.9 build_date: "${R??""}" build_hash:
				${r(i)??""}`),[()=>new Date(1761115036180).toISOString().replaceAll("T"," ").replace(/\..*/,"")]),_(V,re)};Y(N,V=>{r(i)&&V(O)})}ce(()=>{Pe(g,"href",`/?stackPages=${j.Account}`),Pe(y,"href",`/?stackPages=${j.ImportData}`),Pe(b,"href",`/?stackPages=${j.ExportData}`),Pe(K,"href",`/?stackPages=${j.ClearStore}`),Pe(ne,"href",`/?stackPages=${j.About}`)}),_(t,u),te()}qe(["click"]);const cs=(t,e=xe,n=xe,a)=>{let s=za(()=>oi(a?.(),!1));var o=Z(),i=F(o);{var l=u=>{Oe(u,{children:(d,f)=>{Zd(d,{})},$$slots:{default:!0}})},c=u=>{var d=Z(),f=F(d);{var v=h=>{Oe(h,{children:(g,m)=>{Ue(g,{get hidden(){return r(s)},get page(){return j.NewNote}})},$$slots:{default:!0}})},p=h=>{var g=Z(),m=F(g);{var C=y=>{Oe(y,{children:(T,D)=>{Ue(T,{get params(){return n()},get hidden(){return r(s)},get page(){return j.EditNote}})},$$slots:{default:!0}})},P=y=>{var T=Z(),D=F(T);{var x=E=>{Oe(E,{children:(M,J)=>{Ue(M,{get hidden(){return r(s)},get page(){return j.ImportData}})},$$slots:{default:!0}})},b=E=>{var M=Z(),J=F(M);{var K=X=>{Oe(X,{children:(oe,ne)=>{Ue(oe,{get hidden(){return r(s)},get page(){return j.ExportData}})},$$slots:{default:!0}})},H=X=>{var oe=Z(),ne=F(oe);{var de=$=>{Oe($,{children:(U,G)=>{Ue(U,{get hidden(){return r(s)},get page(){return j.ClearStore}})},$$slots:{default:!0}})},Q=$=>{var U=Z(),G=F(U);{var N=V=>{Oe(V,{children:(re,A)=>{Ue(re,{get hidden(){return r(s)},get page(){return j.AccountSetup}})},$$slots:{default:!0}})},O=V=>{var re=Z(),A=F(re);{var R=I=>{Oe(I,{children:(se,be)=>{Ue(se,{get hidden(){return r(s)},get page(){return j.Install}})},$$slots:{default:!0}})},S=I=>{var se=Z(),be=F(se);{var fe=ie=>{Oe(ie,{children:(ue,Ce)=>{jd(ue,{})},$$slots:{default:!0}})},ae=ie=>{var ue=Z(),Ce=F(ue);{var Ee=Te=>{Oe(Te,{children:(Me,Je)=>{Ue(Me,{get hidden(){return r(s)},get page(){return j.Auth}})},$$slots:{default:!0}})},De=Te=>{var Me=Z(),Je=F(Me);{var Qe=Nt=>{Oe(Nt,{children:(Ht,bn)=>{Ue(Ht,{get hidden(){return r(s)},get page(){return j.Signup}})},$$slots:{default:!0}})},$e=Nt=>{var Ht=Z(),bn=F(Ht);{var Ka=Sn=>{Oe(Sn,{children:(fa,Br)=>{Ue(fa,{get hidden(){return r(s)},get page(){return j.Signin}})},$$slots:{default:!0}})},Xa=Sn=>{var fa=Z(),Br=F(fa);{var Fo=kn=>{Oe(kn,{children:(va,Rr)=>{Ue(va,{get hidden(){return r(s)},get page(){return j.AccessKeys}})},$$slots:{default:!0}})},zo=kn=>{var va=Z(),Rr=F(va);{var Ho=Cn=>{Oe(Cn,{children:(ha,Fr)=>{Ue(ha,{get hidden(){return r(s)},get page(){return j.Account}})},$$slots:{default:!0}})},jo=Cn=>{var ha=Z(),Fr=F(ha);{var Uo=En=>{Oe(En,{children:(ga,zr)=>{Ue(ga,{get hidden(){return r(s)},get page(){return j.ConfirmAccessKey}})},$$slots:{default:!0}})},Vo=En=>{var ga=Z(),zr=F(ga);{var qo=Pn=>{Oe(Pn,{children:(pa,Hr)=>{Ue(pa,{get hidden(){return r(s)},get page(){return j.Exit}})},$$slots:{default:!0}})},Wo=Pn=>{var pa=Z(),Hr=F(pa);{var Yo=xn=>{Oe(xn,{children:(_a,jr)=>{Ue(_a,{get hidden(){return r(s)},get page(){return j.Sync}})},$$slots:{default:!0}})},Ko=xn=>{var _a=Z(),jr=F(_a);{var Xo=An=>{Oe(An,{children:(ma,Ur)=>{Ue(ma,{get hidden(){return r(s)},get page(){return j.Subscription}})},$$slots:{default:!0}})},Go=An=>{var ma=Z(),Ur=F(ma);{var Zo=Dn=>{Oe(Dn,{children:(Ga,Qo)=>{Ue(Ga,{get hidden(){return r(s)},get page(){return j.About}})},$$slots:{default:!0}})},Jo=Dn=>{Oe(Dn,{children:(Ga,Qo)=>{Au(Ga,{})},$$slots:{default:!0}})};Y(Ur,Dn=>{e()===j.About?Dn(Zo):Dn(Jo,!1)},!0)}_(An,ma)};Y(jr,An=>{e()===j.Subscription?An(Xo):An(Go,!1)},!0)}_(xn,_a)};Y(Hr,xn=>{e()===j.Sync?xn(Yo):xn(Ko,!1)},!0)}_(Pn,pa)};Y(zr,Pn=>{e()===j.Exit?Pn(qo):Pn(Wo,!1)},!0)}_(En,ga)};Y(Fr,En=>{e()===j.ConfirmAccessKey?En(Uo):En(Vo,!1)},!0)}_(Cn,ha)};Y(Rr,Cn=>{e()===j.Account?Cn(Ho):Cn(jo,!1)},!0)}_(kn,va)};Y(Br,kn=>{e()===j.AccessKeys?kn(Fo):kn(zo,!1)},!0)}_(Sn,fa)};Y(bn,Sn=>{e()===j.Signin?Sn(Ka):Sn(Xa,!1)},!0)}_(Nt,Ht)};Y(Je,Nt=>{e()===j.Signup?Nt(Qe):Nt($e,!1)},!0)}_(Te,Me)};Y(Ce,Te=>{e()===j.Auth?Te(Ee):Te(De,!1)},!0)}_(ie,ue)};Y(be,ie=>{e()===j.Wellcome?ie(fe):ie(ae,!1)},!0)}_(I,se)};Y(A,I=>{e()===j.Install?I(R):I(S,!1)},!0)}_(V,re)};Y(G,V=>{e()===j.AccountSetup?V(N):V(O,!1)},!0)}_($,U)};Y(ne,$=>{e()===j.ClearStore?$(de):$(Q,!1)},!0)}_(X,oe)};Y(J,X=>{e()===j.ExportData?X(K):X(H,!1)},!0)}_(E,M)};Y(D,E=>{e()===j.ImportData?E(x):E(b,!1)},!0)}_(y,T)};Y(m,y=>{e()===j.EditNote?y(C):y(P,!1)},!0)}_(h,g)};Y(f,h=>{e()===j.NewNote?h(v):h(p,!1)},!0)}_(u,d)};Y(i,u=>{e()===j.Settings?u(l):u(c,!1)})}_(t,o)};var Jd=W("<!> <!>",1);function Qd(t,e){ee(e,!0);const{getStackPages:n}=ot(),{getAccount:a}=wo();let s=B(n),o=B(()=>a()!==void 0);const{checkMobileSize:i}=yn();let l=q(Be([]));const c=B(i);Le(()=>{r(s),r(c),vt(()=>{if(r(c))r(s).length>=r(l).length?w(l,r(s).map(m=>({page:m,shown:!0})),!0):w(l,r(l).map((m,C)=>({page:m.page,shown:C<r(s).length})),!0);else if(r(s).length>=r(l).length)w(l,r(s).map(m=>({page:m,shown:!0})),!0);else{if(r(s).length===0){w(l,[{page:r(l)[r(l).length-1].page,shown:!1}],!0);return}w(l,r(s).map(m=>({page:m,shown:!0})),!0)}})});const u=()=>{w(l,r(s).map(m=>({page:m,shown:!0})),!0)};var d=Jd(),f=F(d);{var v=m=>{Bd(m,{})};Y(f,m=>{r(o)&&m(v)})}var p=z(f,2);{var h=m=>{var C=Z(),P=F(C);qa(P,19,()=>r(l),y=>y.page,(y,T,D)=>{const x=B(()=>r(T).page.split("?")[1]),b=B(()=>r(T).page.split("?")[0]);{let E=B(()=>r(D)!==r(l).length-1&&!!r(l)[r(D)+1]?.shown),M=B(()=>r(D)===0);ss(y,{onClosed:u,get shown(){return r(T).shown},get hidden(){return r(E)},get isLastDialog(){return r(M)},children:(J,K)=>{{let H=B(()=>r(D)!==r(l).length-1&&!!r(l)[r(D)+1]?.shown);cs(J,()=>r(b),()=>r(x),()=>r(H))}},$$slots:{default:!0}})}}),_(m,C)},g=m=>{var C=Z(),P=F(C);{var y=T=>{const D=B(()=>r(l)[r(l).length-1].page.split("?")[1]),x=B(()=>r(l)[r(l).length-1].page.split("?")[0]);{let b=B(()=>r(l).length===1);ss(T,{onClosed:u,get shown(){return r(l)[r(l).length-1].shown},hidden:!1,get isLastDialog(){return r(b)},children:(E,M)=>{cs(E,()=>r(x),()=>r(D))},$$slots:{default:!0}})}};Y(P,T=>{r(l).length>0&&T(y)},!0)}_(m,C)};Y(p,m=>{i()?m(h):m(g,!1)})}_(t,d),te()}function $d(t,e){ee(e,!1);let n=0;ke(()=>{document.addEventListener("touchstart",a=>{n=a.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",a=>{const o=a.touches[0].clientX-n;(n<30&&o>0||n>window.innerWidth-30&&o<0)&&a.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Wa(),te()}const ef=(t,e)=>{r(e)&&r(e).scrollTo({top:0})};var tf=W('<div><button class="buttonTop svelte-1n46o8q"><!> <span class="icon svelte-1n46o8q"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),nf=W('<!> <!> <main><div class="wrapperHeader svelte-1n46o8q"><!></div> <div class="container svelte-1n46o8q"><!></div></main> <!>',1);function af(t,e){ee(e,!0);const{navigate:n}=Tt(),{hasStackPage:a}=ot(),{setScrollContainer:s}=Lr(),{getAccount:o,init:i}=wo(),{isInitedNotes:l}=da(),{getStackPagesFormUrl:c}=ot(),{createBroadcastChannel:u,tabId:d}=wn(),f=u(),{getSidebarState:v}=Ya(),{setClosableDialog:p}=Qt(),h=()=>{n("/?stackPages=wellcome")};ke(()=>{i(O=>{O===void 0?h():((a("wellcome")||a("accountSetup"))&&n("/"),O?w(y,O):w(y,null))});const N=async O=>{const V=JSON.parse(O.data);if(V.tabId&&V.tabId===d)return;const re=V;re.type==="initLocalAccount"||re.type==="initCloudAccount"||re.type==="updateAccount"||re.type==="disconnectCloudAccount"?n("/"):re.type==="exit"&&(n("/"),setTimeout(()=>{h()}))};return f.addEventListener(N),()=>f.removeEventListener(N)});const g=Jt();ke(async()=>{await new Promise(N=>setTimeout(N,100)),await Gs(),g.working=!0});let m=q(!1),C=0,P=B(()=>c().length>0),y=B(o),T=B(l),D=q(null);Le(()=>{p(r(y)!==void 0)}),Le(()=>{s(r(D))});const x=()=>{if(r(D)){const N=r(D).scrollTop||0;N===0?w(m,!1):!r(m)&&C>N?w(m,!0):r(m)&&C+50<N&&w(m,!1),C=N}},b=()=>{x()};Le(()=>(r(D)?.addEventListener("scroll",b),window.addEventListener("resize",b),()=>{r(D)?.removeEventListener("scroll",b),window.removeEventListener("resize",b)}));const E=B(v);var M=nf(),J=F(M);$d(J,{});var K=z(J,2);Mc(K,{});var H=z(K,2),X=k(H),oe=k(X);{var ne=N=>{cu(N,{})};Y(oe,N=>{r(y)!==void 0&&N(ne)})}var de=z(X,2),Q=k(de);{var $=N=>{Qd(N,{})};Y(Q,N=>{r(T)&&N($)})}st(H,N=>w(D,N),()=>r(D));var U=z(H,2);{var G=N=>{var O=tf(),V=k(O);V.__click=[ef,D];var re=k(V);Ke(re,{children:(S,I)=>{var se=Ie("top");_(S,se)}});var A=z(re,2),R=k(A);ge(R,()=>({"--rotate":"90deg","--size":"28px"})),me(R.lastChild,{name:"back"}),ce(()=>{Vn(O,`--swiping-ratio: ${g.swipingRatio}; --transition-timing-default: ${g.duration}s;`),_e(O,1,pe(["wrapperButtonTop",{isAnimationOn:g.working&&!g.isSwiping,open:r(P)||r(E).type!=="closed"}]),"svelte-1n46o8q")}),_(N,O)};Y(U,N=>{r(m)&&N(G)})}ce(()=>{Vn(H,`--swiping-ratio: ${g.swipingRatio}; --transition-timing-default: ${g.duration}s;`),_e(H,1,pe(["main",{isAnimationOn:g.working&&!g.isSwiping,open:r(P)||r(E).type!=="closed"}]),"svelte-1n46o8q")}),_(t,M),te()}qe(["click"]);function rf(t){Ac(t,{children:(e,n)=>{af(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||gl(rf,{target:document.getElementById("app")});export{wo as A,Kt as B,Wa as C,da as D,Ar as E,lf as F,ve as G,Fd as H,me as I,_e as J,pe as K,Mo as L,$a as M,Pa as N,Vn as O,j as P,yn as Q,nc as R,Yd as S,st as T,cf as U,Ke as V,Io as W,zu as X,Dl as Y,ge as a,Pe as b,k as c,_ as d,qa as e,W as f,r as g,ot as h,Qt as i,q as j,Be as k,w as l,Y as m,te as n,ke as o,ee as p,Z as q,F as r,z as s,ce as t,Le as u,qe as v,Ie as w,Bt as x,B as y,Tt as z};
