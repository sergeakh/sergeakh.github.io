const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aBLs3GHtS.js","a/a3TquqTin.css","a/aBwpbGG4n.js","a/a9q_jSmK4.js","a/aBEGDcNQV.js","a/aBrkJtqMH.css","a/aCe4cVEau.js","a/aDB02xhFr.css","a/aCvUKpOC_.js","a/a54d_SC5m.css","a/aDQ5AoS_c.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/aCmVTsKV0.js","a/aY1d2PU1k.css","a/aCLW3hPQe.js","a/a71CxWeYE.js","a/aC2dX6fIB.css","a/aBmH1mwYQ.js","a/aBeWFm1o7.css","a/aBlmo2At2.css","a/aLyeKPpEr.js","a/aCeh8XjKC.css","a/aBmx1FY2A.js","a/a2arbkmgI.css","a/aCrCaFQEl.js","a/aBpR5g6jV.css","a/aCdwerkyR.js","a/aBem4Ctjp.css","a/aBMH9Sctb.js","a/aBdnakgrk.css","a/aBAlsbyw-.js","a/aB5Vv7TwJ.css","a/aD2Wth5yZ.js","a/aCH18nfIo.css","a/aDido1sq3.js","a/aC5bFCMET.js","a/aCb6DfA6m.css","a/aDWjhvz7w.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var fl=Object.defineProperty;var rs=t=>{throw TypeError(t)};var vl=(t,e,a)=>e in t?fl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Pt=(t,e,a)=>vl(t,typeof e!="symbol"?e+"":e,a),io=(t,e,a)=>e.has(t)||rs("Cannot "+a);var O=(t,e,a)=>(io(t,e,"read from private field"),a?a.call(t):e.get(t)),Ie=(t,e,a)=>e.has(t)?rs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),Me=(t,e,a,r)=>(io(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),nt=(t,e,a)=>(io(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const gl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};gl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const hl=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};hl();const vo=!1;var jo=Array.isArray,pl=Array.prototype.indexOf,Yr=Array.from,ml=Object.defineProperty,qn=Object.getOwnPropertyDescriptor,Ps=Object.getOwnPropertyDescriptors,Ns=Object.prototype,_l=Array.prototype,Xr=Object.getPrototypeOf,os=Object.isExtensible;function Qa(t){return typeof t=="function"}const je=()=>{};function wl(t){return typeof t?.then=="function"}function yl(t){return t()}function go(t){for(var e=0;e<t.length;e++)t[e]()}function As(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function bl(t,e,a=!1){return t===void 0?a?e():e:t}const bt=2,Bo=4,Jr=8,Sl=1<<24,Nn=16,An=32,ha=64,Zr=128,an=512,Tt=1024,Ft=2048,fn=4096,qt=8192,Sn=16384,Ho=32768,Jn=65536,ss=1<<17,Ms=1<<18,Ga=1<<19,Ds=1<<20,yn=1<<25,va=32768,ho=1<<21,Uo=1<<22,Vn=1<<23,Wn=Symbol("$state"),Is=Symbol("legacy props"),Cl=Symbol(""),Ea=new class extends Error{constructor(){super(...arguments);Pt(this,"name","StaleReactionError");Pt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Rs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Tl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function xl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function kl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function El(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Pl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Nl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Al(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ml(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Dl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Il(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Rl=1,Ll=2,Ls=4,Ol=8,Fl=16,zl=1,jl=2,Bl=4,Hl=8,Ul=16,ql=1,Vl=2,wt=Symbol(),Wl="http://www.w3.org/1999/xhtml";function Os(t){return t===this.v}function Kl(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Fs(t){return!Kl(t,this.v)}let Ya=!1,Gl=!1;function Yl(){Ya=!0}const Xl=[];function Pa(t,e=!1,a=!1){return Ir(t,new Map,"",Xl,null,a)}function Ir(t,e,a,r,o=null,s=!1){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(jo(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var c=0;c<t.length;c+=1){var u=t[c];c in t&&(l[c]=Ir(u,e,a,r,null,s))}return l}if(Xr(t)===Ns){l={},e.set(t,l),o!==null&&e.set(o,l);for(var d in t)l[d]=Ir(t[d],e,a,r,null,s);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return Ir(t.toJSON(),e,a,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let Qe=null;function ja(t){Qe=t}function ct(t){return zs().get(t)}function dt(t,e){return zs().set(t,e),e}function fe(t,e=!1,a){Qe={p:Qe,i:!1,c:null,e:null,s:t,x:null,l:Ya&&!e?{s:null,u:null,$:[]}:null}}function ve(t){var e=Qe,a=e.e;if(a!==null){e.e=null;for(var r of a)ri(r)}return t!==void 0&&(e.x=t),e.i=!0,Qe=e.p,t??{}}function Xa(){return!Ya||Qe!==null&&Qe.l===null}function zs(t){return Qe===null&&Rs(),Qe.c??(Qe.c=new Map(Jl(Qe)||void 0))}function Jl(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let ra=[];function js(){var t=ra;ra=[],go(t)}function pa(t){if(ra.length===0&&!Da){var e=ra;queueMicrotask(()=>{e===ra&&js()})}ra.push(t)}function Zl(){for(;ra.length>0;)js()}function Bs(t){var e=He;if(e===null)return Le.f|=Vn,t;if((e.f&Ho)===0){if((e.f&Zr)===0)throw t;e.b.error(t)}else Ba(t,e)}function Ba(t,e){for(;e!==null;){if((e.f&Zr)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Nr=new Set;let Ue=null,Rr=null,$t=null,Zt=[],Qr=null,po=!1,Da=!1;var Ra,La,oa,sa,pr,Oa,Fa,yt,mo,er,_o,Hs,Us;const qr=class qr{constructor(){Ie(this,yt);Pt(this,"committed",!1);Pt(this,"current",new Map);Pt(this,"previous",new Map);Ie(this,Ra,new Set);Ie(this,La,new Set);Ie(this,oa,0);Ie(this,sa,0);Ie(this,pr,null);Ie(this,Oa,new Set);Ie(this,Fa,new Set);Pt(this,"skipped_effects",new Set);Pt(this,"is_fork",!1)}is_deferred(){return this.is_fork||O(this,sa)>0}process(e){Zt=[],Rr=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)nt(this,yt,mo).call(this,r,a);this.is_fork||nt(this,yt,Hs).call(this),this.is_deferred()?(nt(this,yt,er).call(this,a.effects),nt(this,yt,er).call(this,a.render_effects)):(Rr=this,Ue=null,is(a.render_effects),is(a.effects),Rr=null,O(this,pr)?.resolve()),$t=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&Vn)===0&&(this.current.set(e,e.v),$t?.set(e,e.v))}activate(){Ue=this,this.apply()}deactivate(){Ue===this&&(Ue=null,$t=null)}flush(){if(this.activate(),Zt.length>0){if(Vs(),Ue!==null&&Ue!==this)return}else O(this,oa)===0&&this.process([]);this.deactivate()}discard(){for(const e of O(this,La))e(this);O(this,La).clear()}increment(e){Me(this,oa,O(this,oa)+1),e&&Me(this,sa,O(this,sa)+1)}decrement(e){Me(this,oa,O(this,oa)-1),e&&Me(this,sa,O(this,sa)-1),this.revive()}revive(){for(const e of O(this,Oa))O(this,Fa).delete(e),kt(e,Ft),ga(e);for(const e of O(this,Fa))kt(e,fn),ga(e);this.flush()}oncommit(e){O(this,Ra).add(e)}ondiscard(e){O(this,La).add(e)}settled(){return(O(this,pr)??Me(this,pr,As())).promise}static ensure(){if(Ue===null){const e=Ue=new qr;Nr.add(Ue),Da||qr.enqueue(()=>{Ue===e&&e.flush()})}return Ue}static enqueue(e){pa(e)}apply(){}};Ra=new WeakMap,La=new WeakMap,oa=new WeakMap,sa=new WeakMap,pr=new WeakMap,Oa=new WeakMap,Fa=new WeakMap,yt=new WeakSet,mo=function(e,a){e.f^=Tt;for(var r=e.first;r!==null;){var o=r.f,s=(o&(An|ha))!==0,i=s&&(o&Tt)!==0,l=i||(o&qt)!==0||this.skipped_effects.has(r);if((r.f&Zr)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=Tt:(o&Bo)!==0?a.effects.push(r):Sr(r)&&((r.f&Nn)!==0&&O(this,Oa).add(r),dr(r));var c=r.first;if(c!==null){r=c;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===a.effect&&(nt(this,yt,er).call(this,a.effects),nt(this,yt,er).call(this,a.render_effects),a=a.parent),r=u.next,u=u.parent}},er=function(e){for(const a of e)(a.f&Ft)!==0?O(this,Oa).add(a):(a.f&fn)!==0&&O(this,Fa).add(a),nt(this,yt,_o).call(this,a.deps),kt(a,Tt)},_o=function(e){if(e!==null)for(const a of e)(a.f&bt)===0||(a.f&va)===0||(a.f^=va,nt(this,yt,_o).call(this,a.deps))},Hs=function(){if(O(this,sa)===0){for(const e of O(this,Ra))e();O(this,Ra).clear()}O(this,oa)===0&&nt(this,yt,Us).call(this)},Us=function(){var s;if(Nr.size>1){this.previous.clear();var e=$t,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Nr){if(i===this){a=!1;continue}const l=[];for(const[u,d]of this.current){if(i.current.has(u))if(a&&d!==i.current.get(u))i.current.set(u,d);else continue;l.push(u)}if(l.length===0)continue;const c=[...i.current.keys()].filter(u=>!this.current.has(u));if(c.length>0){var o=Zt;Zt=[];const u=new Set,d=new Map;for(const v of l)Ws(v,c,u,d);if(Zt.length>0){Ue=i,i.apply();for(const v of Zt)nt(s=i,yt,mo).call(s,v,r);i.deactivate()}Zt=o}}Ue=null,$t=e}this.committed=!0,Nr.delete(this)};let dn=qr;function qs(t){var e=Da;Da=!0;try{for(var a;;){if(Zl(),Zt.length===0&&(Ue?.flush(),Zt.length===0))return Qr=null,a;Vs()}}finally{Da=e}}function Vs(){var t=fa;po=!0;var e=null;try{var a=0;for(jr(!0);Zt.length>0;){var r=dn.ensure();if(a++>1e3){var o,s;Ql()}r.process(Zt),Kn.clear()}}finally{po=!1,jr(t),Qr=null}}function Ql(){try{Pl()}catch(t){Ba(t,Qr)}}let mn=null;function is(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(Sn|qt))===0&&Sr(r)&&(mn=new Set,dr(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?ii(r):r.fn=null),mn?.size>0)){Kn.clear();for(const o of mn){if((o.f&(Sn|qt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)mn.has(i)&&(mn.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(Sn|qt))===0&&dr(c)}}mn.clear()}}mn=null}}function Ws(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&bt)!==0?Ws(o,e,a,r):(s&(Uo|Nn))!==0&&(s&Ft)===0&&Ks(o,e,r)&&(kt(o,Ft),ga(o))}}function Ks(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&bt)!==0&&Ks(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function ga(t){for(var e=Qr=t;e.parent!==null;){e=e.parent;var a=e.f;if(po&&e===He&&(a&Nn)!==0&&(a&Ms)===0)return;if((a&(ha|An))!==0){if((a&Tt)===0)return;e.f^=Tt}}Zt.push(e)}function $l(t){let e=0,a=vn(0),r;return()=>{lr()&&(n(a),eo(()=>(e===0&&(r=zt(()=>t(()=>Gn(a)))),e+=1,()=>{pa(()=>{e-=1,e===0&&(r?.(),r=void 0,Gn(a))})})))}}var ec=Jn|Ga|Zr;function tc(t,e,a){new nc(t,e,a)}var Yt,Xt,zo,on,ia,sn,Jt,Rt,ln,wn,zn,la,jn,ca,Bn,Vr,_t,ac,rc,wo,Lr,Or,yo;class nc{constructor(e,a,r){Ie(this,_t);Pt(this,"parent");Ie(this,Yt,!1);Ie(this,Xt);Ie(this,zo,null);Ie(this,on);Ie(this,ia);Ie(this,sn);Ie(this,Jt,null);Ie(this,Rt,null);Ie(this,ln,null);Ie(this,wn,null);Ie(this,zn,null);Ie(this,la,0);Ie(this,jn,0);Ie(this,ca,!1);Ie(this,Bn,null);Ie(this,Vr,$l(()=>(Me(this,Bn,vn(O(this,la))),()=>{Me(this,Bn,null)})));Me(this,Xt,e),Me(this,on,a),Me(this,ia,r),this.parent=He.b,Me(this,Yt,!!O(this,on).pending),Me(this,sn,Ja(()=>{He.b=this;{var o=nt(this,_t,wo).call(this);try{Me(this,Jt,Qt(()=>r(o)))}catch(s){this.error(s)}O(this,jn)>0?nt(this,_t,Or).call(this):Me(this,Yt,!1)}return()=>{O(this,zn)?.remove()}},ec))}is_pending(){return O(this,Yt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!O(this,on).pending}update_pending_count(e){nt(this,_t,yo).call(this,e),Me(this,la,O(this,la)+e),O(this,Bn)&&Cn(O(this,Bn),O(this,la))}get_effect_pending(){return O(this,Vr).call(this),n(O(this,Bn))}error(e){var a=O(this,on).onerror;let r=O(this,on).failed;if(O(this,ca)||!a&&!r)throw e;O(this,Jt)&&(Ot(O(this,Jt)),Me(this,Jt,null)),O(this,Rt)&&(Ot(O(this,Rt)),Me(this,Rt,null)),O(this,ln)&&(Ot(O(this,ln)),Me(this,ln,null));var o=!1,s=!1;const i=()=>{if(o){return}o=!0,s&&Il(),dn.ensure(),Me(this,la,0),O(this,ln)!==null&&ua(O(this,ln),()=>{Me(this,ln,null)}),Me(this,Yt,this.has_pending_snippet()),Me(this,Jt,nt(this,_t,Lr).call(this,()=>(Me(this,ca,!1),Qt(()=>O(this,ia).call(this,O(this,Xt)))))),O(this,jn)>0?nt(this,_t,Or).call(this):Me(this,Yt,!1)};var l=Le;try{Lt(null),s=!0,a?.(e,i),s=!1}catch(c){Ba(c,O(this,sn)&&O(this,sn).parent)}finally{Lt(l)}r&&pa(()=>{Me(this,ln,nt(this,_t,Lr).call(this,()=>{dn.ensure(),Me(this,ca,!0);try{return Qt(()=>{r(O(this,Xt),()=>e,()=>i)})}catch(c){return Ba(c,O(this,sn).parent),null}finally{Me(this,ca,!1)}}))})}}Yt=new WeakMap,Xt=new WeakMap,zo=new WeakMap,on=new WeakMap,ia=new WeakMap,sn=new WeakMap,Jt=new WeakMap,Rt=new WeakMap,ln=new WeakMap,wn=new WeakMap,zn=new WeakMap,la=new WeakMap,jn=new WeakMap,ca=new WeakMap,Bn=new WeakMap,Vr=new WeakMap,_t=new WeakSet,ac=function(){try{Me(this,Jt,Qt(()=>O(this,ia).call(this,O(this,Xt))))}catch(e){this.error(e)}Me(this,Yt,!1)},rc=function(){const e=O(this,on).pending;e&&(Me(this,Rt,Qt(()=>e(O(this,Xt)))),dn.enqueue(()=>{var a=nt(this,_t,wo).call(this);Me(this,Jt,nt(this,_t,Lr).call(this,()=>(dn.ensure(),Qt(()=>O(this,ia).call(this,a))))),O(this,jn)>0?nt(this,_t,Or).call(this):(ua(O(this,Rt),()=>{Me(this,Rt,null)}),Me(this,Yt,!1))}))},wo=function(){var e=O(this,Xt);return O(this,Yt)&&(Me(this,zn,Tn()),O(this,Xt).before(O(this,zn)),e=O(this,zn)),e},Lr=function(e){var a=He,r=Le,o=Qe;gn(O(this,sn)),Lt(O(this,sn)),ja(O(this,sn).ctx);try{return e()}catch(s){return Bs(s),null}finally{gn(a),Lt(r),ja(o)}},Or=function(){const e=O(this,on).pending;O(this,Jt)!==null&&(Me(this,wn,document.createDocumentFragment()),O(this,wn).append(O(this,zn)),di(O(this,Jt),O(this,wn))),O(this,Rt)===null&&Me(this,Rt,Qt(()=>e(O(this,Xt))))},yo=function(e){var a;if(!this.has_pending_snippet()){this.parent&&nt(a=this.parent,_t,yo).call(a,e);return}Me(this,jn,O(this,jn)+e),O(this,jn)===0&&(Me(this,Yt,!1),O(this,Rt)&&ua(O(this,Rt),()=>{Me(this,Rt,null)}),O(this,wn)&&(O(this,Xt).before(O(this,wn)),Me(this,wn,null)))};function oc(t,e,a,r){const o=Xa()?wr:yr;if(a.length===0&&t.length===0){r(e.map(o));return}var s=Ue,i=He,l=Gs();function c(){Promise.all(a.map(u=>sc(u))).then(u=>{l();try{r([...e.map(o),...u])}catch(d){(i.f&Sn)===0&&Ba(d,i)}s?.deactivate(),ir()}).catch(u=>{Ba(u,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return c()}finally{s?.deactivate(),ir()}}):c()}function Gs(){var t=He,e=Le,a=Qe,r=Ue;return function(s=!0){gn(t),Lt(e),ja(a),s&&r?.activate()}}function ir(){gn(null),Lt(null),ja(null)}function wr(t){var e=bt|Ft,a=Le!==null&&(Le.f&bt)!==0?Le:null;return He!==null&&(He.f|=Ga),{ctx:Qe,deps:null,effects:null,equals:Os,f:e,fn:t,reactions:null,rv:0,v:wt,wv:0,parent:a??He,ac:null}}function sc(t,e){let a=He;a===null&&Tl();var r=a.b,o=void 0,s=vn(wt),i=!Le,l=new Map;return mc(()=>{var c=As();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===Ue&&u.committed&&u.deactivate(),ir()})}catch(h){c.reject(h),ir()}var u=Ue;if(i){var d=!r.is_pending();r.update_pending_count(1),u.increment(d),l.get(u)?.reject(Ea),l.delete(u),l.set(u,c)}const v=(h,p=void 0)=>{if(u.activate(),p)p!==Ea&&(s.f|=Vn,Cn(s,p));else{(s.f&Vn)!==0&&(s.f^=Vn),Cn(s,h);for(const[m,T]of l){if(l.delete(m),m===u)break;T.reject(Ea)}}i&&(r.update_pending_count(-1),u.decrement(d))};c.promise.then(v,h=>v(null,h||"unknown"))}),ai(()=>{for(const c of l.values())c.reject(Ea)}),new Promise(c=>{function u(d){function v(){d===o?c(s):u(o)}d.then(v,v)}u(o)})}function N(t){const e=wr(t);return ui(e),e}function yr(t){const e=wr(t);return e.equals=Fs,e}function Ys(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Ot(e[a])}}function ic(t){for(var e=t.parent;e!==null;){if((e.f&bt)===0)return(e.f&Sn)===0?e:null;e=e.parent}return null}function qo(t){var e,a=He;gn(ic(t));try{t.f&=~va,Ys(t),e=hi(t)}finally{gn(a)}return e}function Xs(t){var e=qo(t);if(t.equals(e)||(Ue?.is_fork||(t.v=e),t.wv=vi()),!ma)if($t!==null)(lr()||Ue?.is_fork)&&$t.set(t,e);else{var a=(t.f&an)===0?fn:Tt;kt(t,a)}}let bo=new Set;const Kn=new Map;let Js=!1;function vn(t,e){var a={f:0,v:t,reactions:null,equals:Os,rv:0,wv:0};return a}function I(t,e){const a=vn(t);return ui(a),a}function So(t,e=!1,a=!0){var o;const r=vn(t);return e||(r.equals=Fs),Ya&&a&&Qe!==null&&Qe.l!==null&&((o=Qe.l).s??(o.s=[])).push(r),r}function f(t,e,a=!1){Le!==null&&(!un||(Le.f&ss)!==0)&&Xa()&&(Le.f&(bt|Nn|Uo|ss))!==0&&!xn?.includes(t)&&Dl();let r=a?it(e):e;return Cn(t,r)}function Cn(t,e){if(!t.equals(e)){var a=t.v;ma?Kn.set(t,e):Kn.set(t,a),t.v=e;var r=dn.ensure();r.capture(t,a),(t.f&bt)!==0&&((t.f&Ft)!==0&&qo(t),kt(t,(t.f&an)!==0?Tt:fn)),t.wv=vi(),Zs(t,Ft),Xa()&&He!==null&&(He.f&Tt)!==0&&(He.f&(An|ha))===0&&(Kt===null?yc([t]):Kt.push(t)),!r.is_fork&&bo.size>0&&!Js&&lc()}return e}function lc(){Js=!1;var t=fa;jr(!0);const e=Array.from(bo);try{for(const a of e)(a.f&Tt)!==0&&kt(a,fn),Sr(a)&&dr(a)}finally{jr(t)}bo.clear()}function Gn(t){f(t,t.v+1)}function Zs(t,e){var a=t.reactions;if(a!==null)for(var r=Xa(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===He)){var c=(l&Ft)===0;if(c&&kt(i,e),(l&bt)!==0){var u=i;$t?.delete(u),(l&va)===0&&(l&an&&(i.f|=va),Zs(u,fn))}else c&&((l&Nn)!==0&&mn!==null&&mn.add(i),ga(i))}}}function it(t){if(typeof t!="object"||t===null||Wn in t)return t;const e=Xr(t);if(e!==Ns&&e!==_l)return t;var a=new Map,r=jo(t),o=I(0),s=kn,i=l=>{if(kn===s)return l();var c=Le,u=kn;Lt(null),us(s);var d=l();return Lt(c),us(u),d};return r&&a.set("length",I(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Al();var d=a.get(c);return d===void 0?d=i(()=>{var v=I(u.value);return a.set(c,v),v}):f(d,u.value,!0),!0},deleteProperty(l,c){var u=a.get(c);if(u===void 0){if(c in l){const d=i(()=>I(wt));a.set(c,d),Gn(o)}}else f(u,wt),Gn(o);return!0},get(l,c,u){if(c===Wn)return t;var d=a.get(c),v=c in l;if(d===void 0&&(!v||qn(l,c)?.writable)&&(d=i(()=>{var p=it(v?l[c]:wt),m=I(p);return m}),a.set(c,d)),d!==void 0){var h=n(d);return h===wt?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var d=a.get(c);d&&(u.value=n(d))}else if(u===void 0){var v=a.get(c),h=v?.v;if(v!==void 0&&h!==wt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){if(c===Wn)return!0;var u=a.get(c),d=u!==void 0&&u.v!==wt||Reflect.has(l,c);if(u!==void 0||He!==null&&(!d||qn(l,c)?.writable)){u===void 0&&(u=i(()=>{var h=d?it(l[c]):wt,p=I(h);return p}),a.set(c,u));var v=n(u);if(v===wt)return!1}return d},set(l,c,u,d){var v=a.get(c),h=c in l;if(r&&c==="length")for(var p=u;p<v.v;p+=1){var m=a.get(p+"");m!==void 0?f(m,wt):p in l&&(m=i(()=>I(wt)),a.set(p+"",m))}if(v===void 0)(!h||qn(l,c)?.writable)&&(v=i(()=>I(void 0)),f(v,it(u)),a.set(c,v));else{h=v.v!==wt;var T=i(()=>it(u));f(v,T)}var _=Reflect.getOwnPropertyDescriptor(l,c);if(_?.set&&_.set.call(d,u),!h){if(r&&typeof c=="string"){var b=a.get("length"),F=Number(c);Number.isInteger(F)&&F>=b.v&&f(b,F+1)}Gn(o)}return!0},ownKeys(l){n(o);var c=Reflect.ownKeys(l).filter(v=>{var h=a.get(v);return h===void 0||h.v!==wt});for(var[u,d]of a)d.v!==wt&&!(u in l)&&c.push(u);return c},setPrototypeOf(){Ml()}})}var ls,Qs,$s,ei;function cc(){if(ls===void 0){ls=window,Qs=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;$s=qn(e,"firstChild").get,ei=qn(e,"nextSibling").get,os(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),os(a)&&(a.__t=void 0)}}function Tn(t=""){return document.createTextNode(t)}function Ha(t){return $s.call(t)}function br(t){return ei.call(t)}function y(t,e){return Ha(t)}function D(t,e=!1){{var a=Ha(t);return a instanceof Comment&&a.data===""?br(a):a}}function L(t,e=1,a=!1){let r=t;for(;e--;)r=br(r);return r}function dc(t){t.textContent=""}function ti(){return!1}let cs=!1;function uc(){cs||(cs=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function $r(t){var e=Le,a=He;Lt(null),gn(null);try{return t()}finally{Lt(e),gn(a)}}function fc(t,e,a,r=a){t.addEventListener(e,()=>$r(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),uc()}function ni(t){He===null&&(Le===null&&El(),kl()),ma&&xl()}function vc(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function hn(t,e,a){var r=He;r!==null&&(r.f&qt)!==0&&(t|=qt);var o={ctx:Qe,deps:null,nodes:null,f:t|Ft|an,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{dr(o),o.f|=Ho}catch(l){throw Ot(o),l}else e!==null&&ga(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&Ga)===0&&(s=s.first,(t&Nn)!==0&&(t&Jn)!==0&&s!==null&&(s.f|=Jn)),s!==null&&(s.parent=r,r!==null&&vc(s,r),Le!==null&&(Le.f&bt)!==0&&(t&ha)===0)){var i=Le;(i.effects??(i.effects=[])).push(s)}return o}function lr(){return Le!==null&&!un}function ai(t){const e=hn(Jr,null,!1);return kt(e,Tt),e.teardown=t,e}function Oe(t){ni();var e=He.f,a=!Le&&(e&An)!==0&&(e&Ho)===0;if(a){var r=Qe;(r.e??(r.e=[])).push(t)}else return ri(t)}function ri(t){return hn(Bo|Ds,t,!1)}function gc(t){return ni(),hn(Jr|Ds,t,!0)}function hc(t){dn.ensure();const e=hn(ha|Ga,t,!0);return(a={})=>new Promise(r=>{a.outro?ua(e,()=>{Ot(e),r(void 0)}):(Ot(e),r(void 0))})}function pc(t){return hn(Bo,t,!1)}function mc(t){return hn(Uo|Ga,t,!0)}function eo(t,e=0){return hn(Jr|e,t,!0)}function xe(t,e=[],a=[],r=[]){oc(r,e,a,o=>{hn(Jr,()=>t(...o.map(n)),!0)})}function Ja(t,e=0){var a=hn(Nn|e,t,!0);return a}function Qt(t){return hn(An|Ga,t,!0)}function oi(t){var e=t.teardown;if(e!==null){const a=ma,r=Le;ds(!0),Lt(null);try{e.call(null)}finally{ds(a),Lt(r)}}}function si(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&$r(()=>{o.abort(Ea)});var r=a.next;(a.f&ha)!==0?a.parent=null:Ot(a,e),a=r}}function _c(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&An)===0&&Ot(e),e=a}}function Ot(t,e=!0){var a=!1;(e||(t.f&Ms)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(wc(t.nodes.start,t.nodes.end),a=!0),si(t,e&&!a),Br(t,0),kt(t,Sn);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();oi(t);var o=t.parent;o!==null&&o.first!==null&&ii(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function wc(t,e){for(;t!==null;){var a=t===e?null:br(t);t.remove(),t=a}}function ii(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function ua(t,e,a=!0){var r=[];li(t,r,!0);var o=()=>{a&&Ot(t),e&&e()},s=r.length;if(s>0){var i=()=>--s||o();for(var l of r)l.out(i)}else o()}function li(t,e,a){if((t.f&qt)===0){t.f^=qt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&e.push(l);for(var o=t.first;o!==null;){var s=o.next,i=(o.f&Jn)!==0||(o.f&An)!==0&&(t.f&Nn)!==0;li(o,e,i?a:!1),o=s}}}function Vo(t){ci(t,!0)}function ci(t,e){if((t.f&qt)!==0){t.f^=qt,(t.f&Tt)===0&&(kt(t,Ft),ga(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&Jn)!==0||(a.f&An)!==0;ci(a,o?e:!1),a=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)(i.is_global||e)&&i.in()}}function di(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var o=a===r?null:br(a);e.append(a),a=o}}let fa=!1;function jr(t){fa=t}let ma=!1;function ds(t){ma=t}let Le=null,un=!1;function Lt(t){Le=t}let He=null;function gn(t){He=t}let xn=null;function ui(t){Le!==null&&(xn===null?xn=[t]:xn.push(t))}let Nt=null,Bt=0,Kt=null;function yc(t){Kt=t}let fi=1,cr=0,kn=cr;function us(t){kn=t}function vi(){return++fi}function Sr(t){var e=t.f;if((e&Ft)!==0)return!0;if(e&bt&&(t.f&=~va),(e&fn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(Sr(s)&&Xs(s),s.wv>t.wv)return!0}(e&an)!==0&&$t===null&&kt(t,Tt)}return!1}function gi(t,e,a=!0){var r=t.reactions;if(r!==null&&!xn?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&bt)!==0?gi(s,e,!1):e===s&&(a?kt(s,Ft):(s.f&Tt)!==0&&kt(s,fn),ga(s))}}function hi(t){var m;var e=Nt,a=Bt,r=Kt,o=Le,s=xn,i=Qe,l=un,c=kn,u=t.f;Nt=null,Bt=0,Kt=null,Le=(u&(An|ha))===0?t:null,xn=null,ja(t.ctx),un=!1,kn=++cr,t.ac!==null&&($r(()=>{t.ac.abort(Ea)}),t.ac=null);try{t.f|=ho;var d=t.fn,v=d(),h=t.deps;if(Nt!==null){var p;if(Br(t,Bt),h!==null&&Bt>0)for(h.length=Bt+Nt.length,p=0;p<Nt.length;p++)h[Bt+p]=Nt[p];else t.deps=h=Nt;if(lr()&&(t.f&an)!==0)for(p=Bt;p<h.length;p++)((m=h[p]).reactions??(m.reactions=[])).push(t)}else h!==null&&Bt<h.length&&(Br(t,Bt),h.length=Bt);if(Xa()&&Kt!==null&&!un&&h!==null&&(t.f&(bt|fn|Ft))===0)for(p=0;p<Kt.length;p++)gi(Kt[p],t);return o!==null&&o!==t&&(cr++,Kt!==null&&(r===null?r=Kt:r.push(...Kt))),(t.f&Vn)!==0&&(t.f^=Vn),v}catch(T){return Bs(T)}finally{t.f^=ho,Nt=e,Bt=a,Kt=r,Le=o,xn=s,ja(i),un=l,kn=c}}function bc(t,e){let a=e.reactions;if(a!==null){var r=pl.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&bt)!==0&&(Nt===null||!Nt.includes(e))&&(kt(e,fn),(e.f&an)!==0&&(e.f^=an,e.f&=~va),Ys(e),Br(e,0))}function Br(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)bc(t,a[r])}function dr(t){var e=t.f;if((e&Sn)===0){kt(t,Tt);var a=He,r=fa;He=t,fa=!0;try{(e&(Nn|Sl))!==0?_c(t):si(t),oi(t);var o=hi(t);t.teardown=typeof o=="function"?o:null,t.wv=fi;var s;vo&&Gl&&(t.f&Ft)!==0&&t.deps}finally{fa=r,He=a}}}async function pi(){await Promise.resolve(),qs()}function n(t){var e=t.f,a=(e&bt)!==0;if(Le!==null&&!un){var r=He!==null&&(He.f&Sn)!==0;if(!r&&!xn?.includes(t)){var o=Le.deps;if((Le.f&ho)!==0)t.rv<cr&&(t.rv=cr,Nt===null&&o!==null&&o[Bt]===t?Bt++:Nt===null?Nt=[t]:Nt.includes(t)||Nt.push(t));else{(Le.deps??(Le.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Le]:s.includes(Le)||s.push(Le)}}}if(ma){if(Kn.has(t))return Kn.get(t);if(a){var i=t,l=i.v;return((i.f&Tt)===0&&i.reactions!==null||_i(i))&&(l=qo(i)),Kn.set(i,l),l}}else a&&(!$t?.has(t)||Ue?.is_fork&&!lr())&&(i=t,Sr(i)&&Xs(i),fa&&lr()&&(i.f&an)===0&&mi(i));if($t?.has(t))return $t.get(t);if((t.f&Vn)!==0)throw t.v;return t.v}function mi(t){if(t.deps!==null){t.f^=an;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&bt)!==0&&(e.f&an)===0&&mi(e)}}function _i(t){if(t.v===wt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Kn.has(e)||(e.f&bt)!==0&&_i(e))return!0;return!1}function zt(t){var e=un;try{return un=!0,t()}finally{un=e}}const Sc=-7169;function kt(t,e){t.f=t.f&Sc|e}function Cc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Wn in t)Co(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&Wn in a&&Co(a)}}}function Co(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Co(t[r],e)}catch{}const a=Xr(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Ps(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Tc=["touchstart","touchmove"];function xc(t){return Tc.includes(t)}const wi=new Set,To=new Set;function kc(t,e,a,r={}){function o(s){if(r.capture||tr.call(e,s),!s.cancelBubble)return $r(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?pa(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function rn(t,e,a,r,o){var s={capture:r,passive:o},i=kc(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ai(()=>{e.removeEventListener(t,i,s)})}function st(t){for(var e=0;e<t.length;e++)wi.add(t[e]);for(var a of To)a(t)}let fs=null;function tr(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;fs=t;var i=0,l=fs===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){ml(t,"currentTarget",{configurable:!0,get(){return s||a}});var d=Le,v=He;Lt(null),gn(null);try{for(var h,p=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var T=s["__"+r];T!=null&&(!s.disabled||t.target===s)&&T.call(s,t)}catch(_){h?p.push(_):h=_}if(t.cancelBubble||m===e||m===null)break;s=m}if(h){for(let _ of p)queueMicrotask(()=>{throw _});throw h}}finally{t.__root=e,delete t.currentTarget,Lt(d),gn(v)}}}function yi(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ur(t,e){var a=He;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function x(t,e){var a=(e&ql)!==0,r=(e&Vl)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=yi(s?t:"<!>"+t),a||(o=Ha(o)));var i=r||Qs?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=Ha(i),c=i.lastChild;ur(l,c)}else ur(i,i);return i}}function Ec(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=yi(o),l=Ha(i);s=Ha(l)}var c=s.cloneNode(!0);return ur(c,c),c}}function Pc(t,e){return Ec(t,e,"svg")}function De(t=""){{var e=Tn(t+"");return ur(e,e),e}}function ue(){var t=document.createDocumentFragment(),e=document.createComment(""),a=Tn();return t.append(e,a),ur(e,a),t}function g(t,e){t!==null&&t.before(e)}function ah(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function ot(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Nc(t,e){return Ac(t,e)}const xa=new Map;function Ac(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){cc();var l=new Set,c=v=>{for(var h=0;h<v.length;h++){var p=v[h];if(!l.has(p)){l.add(p);var m=xc(p);e.addEventListener(p,tr,{passive:m});var T=xa.get(p);T===void 0?(document.addEventListener(p,tr,{passive:m}),xa.set(p,1)):xa.set(p,T+1)}}};c(Yr(wi)),To.add(c);var u=void 0,d=hc(()=>{var v=a??e.appendChild(Tn());return tc(v,{pending:()=>{}},h=>{if(s){fe({});var p=Qe;p.c=s}o&&(r.$$events=o),u=t(h,r)||{},s&&ve()}),()=>{for(var h of l){e.removeEventListener(h,tr);var p=xa.get(h);--p===0?(document.removeEventListener(h,tr),xa.delete(h)):xa.set(h,p)}To.delete(c),v!==a&&v.parentNode?.removeChild(v)}});return Mc.set(u,d),u}let Mc=new WeakMap;var tn,cn,Ut,da,mr,_r,Wr;class to{constructor(e,a=!0){Pt(this,"anchor");Ie(this,tn,new Map);Ie(this,cn,new Map);Ie(this,Ut,new Map);Ie(this,da,new Set);Ie(this,mr,!0);Ie(this,_r,()=>{var e=Ue;if(O(this,tn).has(e)){var a=O(this,tn).get(e),r=O(this,cn).get(a);if(r)Vo(r),O(this,da).delete(a);else{var o=O(this,Ut).get(a);o&&(O(this,cn).set(a,o.effect),O(this,Ut).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of O(this,tn)){if(O(this,tn).delete(s),s===e)break;const l=O(this,Ut).get(i);l&&(Ot(l.effect),O(this,Ut).delete(i))}for(const[s,i]of O(this,cn)){if(s===a||O(this,da).has(s))continue;const l=()=>{if(Array.from(O(this,tn).values()).includes(s)){var u=document.createDocumentFragment();di(i,u),u.append(Tn()),O(this,Ut).set(s,{effect:i,fragment:u})}else Ot(i);O(this,da).delete(s),O(this,cn).delete(s)};O(this,mr)||!r?(O(this,da).add(s),ua(i,l,!1)):l()}}});Ie(this,Wr,e=>{O(this,tn).delete(e);const a=Array.from(O(this,tn).values());for(const[r,o]of O(this,Ut))a.includes(r)||(Ot(o.effect),O(this,Ut).delete(r))});this.anchor=e,Me(this,mr,a)}ensure(e,a){var r=Ue,o=ti();if(a&&!O(this,cn).has(e)&&!O(this,Ut).has(e))if(o){var s=document.createDocumentFragment(),i=Tn();s.append(i),O(this,Ut).set(e,{effect:Qt(()=>a(i)),fragment:s})}else O(this,cn).set(e,Qt(()=>a(this.anchor)));if(O(this,tn).set(r,e),o){for(const[l,c]of O(this,cn))l===e?r.skipped_effects.delete(c):r.skipped_effects.add(c);for(const[l,c]of O(this,Ut))l===e?r.skipped_effects.delete(c.effect):r.skipped_effects.add(c.effect);r.oncommit(O(this,_r)),r.ondiscard(O(this,Wr))}else O(this,_r).call(this)}}tn=new WeakMap,cn=new WeakMap,Ut=new WeakMap,da=new WeakMap,mr=new WeakMap,_r=new WeakMap,Wr=new WeakMap;const Dc=0,lo=1;function Ic(t,e,a,r,o){var s=Xa(),i=wt,l=s?vn(i):So(i,!1,!1),c=s?vn(i):So(i,!1,!1),u=new to(t);Ja(()=>{var d=e(),v=!1;if(wl(d)){var h=Gs(),p=!1;const m=T=>{if(!v){p=!0,h(!1),dn.ensure();try{T()}finally{ir(),Da||qs()}}};d.then(T=>{m(()=>{Cn(l,T),u.ensure(lo,r&&(_=>r(_,l)))})},T=>{m(()=>{if(Cn(c,T),u.ensure(lo,o&&(_=>o(_,c))),!o)throw c.v})}),pa(()=>{p||m(()=>{u.ensure(Dc,a)})})}else Cn(l,d),u.ensure(lo,r&&(m=>r(m,l)));return()=>{v=!0}})}function V(t,e,a=!1){var r=new to(t),o=a?Jn:0;function s(i,l){r.ensure(i,l)}Ja(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function pe(t,e){eo(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function Rc(t,e,a){for(var r=[],o=e.length,s,i=e.length,l=0;l<o;l++){let v=e[l];ua(v,()=>{if(s){if(s.pending.delete(v),s.done.add(v),s.pending.size===0){var h=t.outrogroups;xo(Yr(s.done)),h.delete(s),h.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var c=r.length===0&&a!==null;if(c){var u=a,d=u.parentNode;dc(d),d.append(u),t.items.clear()}xo(e,!c)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function xo(t,e=!0){for(var a=0;a<t.length;a++)Ot(t[a],e)}var vs;function En(t,e,a,r,o,s=null){var i=t,l=new Map,c=(e&Ls)!==0;if(c){var u=t;i=u.appendChild(Tn())}var d=null,v=yr(()=>{var b=a();return jo(b)?b:b==null?[]:Yr(b)}),h,p=!0;function m(){_.fallback=d,Lc(_,h,i,e,r),d!==null&&(h.length===0?(d.f&yn)===0?Vo(d):(d.f^=yn,nr(d,null,i)):ua(d,()=>{d=null}))}var T=Ja(()=>{h=n(v);for(var b=h.length,F=new Set,w=Ue,C=ti(),R=0;R<b;R+=1){var A=h[R],M=r(A,R),H=p?null:l.get(M);H?(H.v&&Cn(H.v,A),H.i&&Cn(H.i,R),C&&w.skipped_effects.delete(H.e)):(H=Oc(l,p?i:vs??(vs=Tn()),A,M,R,o,e,a),p||(H.e.f|=yn),l.set(M,H)),F.add(M)}if(b===0&&s&&!d&&(p?d=Qt(()=>s(i)):(d=Qt(()=>s(vs??(vs=Tn()))),d.f|=yn)),!p)if(C){for(const[X,q]of l)F.has(X)||w.skipped_effects.add(q.e);w.oncommit(m),w.ondiscard(()=>{})}else m();n(v)}),_={effect:T,items:l,outrogroups:null,fallback:d};p=!1}function Lc(t,e,a,r,o){var s=(r&Ol)!==0,i=e.length,l=t.items,c=t.effect.first,u,d=null,v,h=[],p=[],m,T,_,b;if(s)for(b=0;b<i;b+=1)m=e[b],T=o(m,b),_=l.get(T).e,(_.f&yn)===0&&(_.nodes?.a?.measure(),(v??(v=new Set)).add(_));for(b=0;b<i;b+=1){if(m=e[b],T=o(m,b),_=l.get(T).e,t.outrogroups!==null)for(const q of t.outrogroups)q.pending.delete(_),q.done.delete(_);if((_.f&yn)!==0)if(_.f^=yn,_===c)nr(_,null,a);else{var F=d?d.next:c;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),In(t,d,_),In(t,_,F),nr(_,F,a),d=_,h=[],p=[],c=d.next;continue}if((_.f&qt)!==0&&(Vo(_),s&&(_.nodes?.a?.unfix(),(v??(v=new Set)).delete(_))),_!==c){if(u!==void 0&&u.has(_)){if(h.length<p.length){var w=p[0],C;d=w.prev;var R=h[0],A=h[h.length-1];for(C=0;C<h.length;C+=1)nr(h[C],w,a);for(C=0;C<p.length;C+=1)u.delete(p[C]);In(t,R.prev,A.next),In(t,d,R),In(t,A,w),c=w,d=A,b-=1,h=[],p=[]}else u.delete(_),nr(_,c,a),In(t,_.prev,_.next),In(t,_,d===null?t.effect.first:d.next),In(t,d,_),d=_;continue}for(h=[],p=[];c!==null&&c!==_;)(u??(u=new Set)).add(c),p.push(c),c=c.next;if(c===null)continue}(_.f&yn)===0&&h.push(_),d=_,c=_.next}if(t.outrogroups!==null){for(const q of t.outrogroups)q.pending.size===0&&(xo(Yr(q.done)),t.outrogroups?.delete(q));t.outrogroups.size===0&&(t.outrogroups=null)}if(c!==null||u!==void 0){var M=[];if(u!==void 0)for(_ of u)(_.f&qt)===0&&M.push(_);for(;c!==null;)(c.f&qt)===0&&c!==t.fallback&&M.push(c),c=c.next;var H=M.length;if(H>0){var X=(r&Ls)!==0&&i===0?a:null;if(s){for(b=0;b<H;b+=1)M[b].nodes?.a?.measure();for(b=0;b<H;b+=1)M[b].nodes?.a?.fix()}Rc(t,M,X)}}s&&pa(()=>{if(v!==void 0)for(_ of v)_.nodes?.a?.apply()})}function Oc(t,e,a,r,o,s,i,l){var c=(i&Rl)!==0?(i&Fl)===0?So(a,!1,!1):vn(a):null,u=(i&Ll)!==0?vn(o):null;return{v:c,i:u,e:Qt(()=>(s(e,c??a,u??o,l),()=>{t.delete(r)}))}}function nr(t,e,a){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,s=e&&(e.f&yn)===0?e.nodes.start:a;r!==null;){var i=br(r);if(s.before(r),r===o)return;r=i}}function In(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function Ae(t,e,...a){var r=new to(t);Ja(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},Jn)}function Fc(t,e,a){var r=new to(t);Ja(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},Jn)}function bi(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=bi(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function zc(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=bi(t))&&(r&&(r+=" "),r+=e);return r}function rt(t){return typeof t=="object"?zc(t):t??""}const gs=[...` 	
\r\fÂ \v\uFEFF`];function jc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||gs.includes(r[i-1]))&&(l===r.length||gs.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Bc(t,e){return t==null?null:String(t)}function $e(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=jc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function Ua(t,e,a,r){var o=t.__style;if(o!==e){var s=Bc(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Hc=Symbol("is custom element"),Uc=Symbol("is html");function rh(t,e){var a=Wo(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function qc(t,e){var a=Wo(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function at(t,e,a,r){var o=Wo(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[Cl]=a),a==null?t.removeAttribute(e):typeof a!="string"&&Vc(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function Wo(t){return t.__attributes??(t.__attributes={[Hc]:t.nodeName.includes("-"),[Uc]:t.namespaceURI===Wl})}var hs=new Map;function Vc(t){var e=t.getAttribute("is")||t.nodeName,a=hs.get(e);if(a)return a;hs.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Ps(o);for(var i in r)r[i].set&&a.push(i);o=Xr(o)}return a}function Si(t,e,a=e){var r=new WeakSet;fc(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=co(t)?uo(s):s,a(s),Ue!==null&&r.add(Ue),await pi(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),zt(e)==null&&t.value&&(a(co(t)?uo(t.value):t.value),Ue!==null&&r.add(Ue)),eo(()=>{var o=e();if(t===document.activeElement){var s=Rr??Ue;if(r.has(s))return}co(t)&&o===uo(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function co(t){var e=t.type;return e==="number"||e==="range"}function uo(t){return t===""?null:+t}function ps(t,e){return t===e||t?.[Wn]===e}function Ye(t={},e,a,r){return pc(()=>{var o,s;return eo(()=>{o=s,s=[],zt(()=>{t!==a(...s)&&(e(t,...s),o&&ps(a(...o),t)&&e(null,...o))})}),()=>{pa(()=>{s&&ps(a(...s),t)&&e(null,...s)})}}),t}function Ko(t=!1){const e=Qe,a=e.l.u;if(!a)return;let r=()=>Cc(e.s);if(t){let o=0,s={};const i=wr(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&gc(()=>{ms(e,r),go(a.b)}),Oe(()=>{const o=zt(()=>a.m.map(yl));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&Oe(()=>{ms(e,r),go(a.a)})}function ms(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Ar=!1;function Wc(t){var e=Ar;try{return Ar=!1,[t(),Ar]}finally{Ar=e}}const Kc={get(t,e){if(!t.exclude.includes(e))return t.props[e]},set(t,e){return!1},getOwnPropertyDescriptor(t,e){if(!t.exclude.includes(e)&&e in t.props)return{enumerable:!0,configurable:!0,value:t.props[e]}},has(t,e){return t.exclude.includes(e)?!1:e in t.props},ownKeys(t){return Reflect.ownKeys(t.props).filter(e=>!t.exclude.includes(e))}};function Gc(t,e,a){return new Proxy({props:t,exclude:e},Kc)}const Yc={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(Qa(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];Qa(o)&&(o=o());const s=qn(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(Qa(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=qn(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===Wn||e===Is)return!1;for(let a of t.props)if(Qa(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(Qa(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function ko(...t){return new Proxy({props:t},Yc)}function Ne(t,e,a,r){var o=!Ya||(a&jl)!==0,s=(a&Hl)!==0,i=(a&Ul)!==0,l=r,c=!0,u=()=>(c&&(c=!1,l=i?zt(r):r),l),d;if(s){var v=Wn in t||Is in t;d=qn(t,e)?.set??(v&&e in t?w=>t[e]=w:void 0)}var h,p=!1;s?[h,p]=Wc(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=u(),d&&(o&&Nl(),d(h)));var m;if(o?m=()=>{var w=t[e];return w===void 0?u():(c=!0,w)}:m=()=>{var w=t[e];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(a&Bl)===0)return m;if(d){var T=t.$$legacy;return(function(w,C){return arguments.length>0?((!o||!C||T||p)&&d(C?m():w),w):m()})}var _=!1,b=((a&zl)!==0?wr:yr)(()=>(_=!1,m()));s&&n(b);var F=He;return(function(w,C){if(arguments.length>0){const R=C?n(b):o&&s?it(w):w;return f(b,R),_=!0,l!==void 0&&(l=R),w}return ma&&_||(F.f&Sn)!==0?b.v:n(b)})}function Ce(t){Qe===null&&Rs(),Ya&&Qe.l!==null?Xc(Qe).m.push(t):Oe(()=>{const e=zt(t);if(typeof e=="function")return e})}function Xc(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Jc="5";var Es;typeof window<"u"&&((Es=window.__svelte??(window.__svelte={})).v??(Es.v=new Set)).add(Jc);Yl();const Ci={};function Zc(t){dt(Ci,t)}function Go(){const t=ct(Ci);if(!t)throw new Error("No FeedSearchContext found");return t}const Ti={};function Qc(t){dt(Ti,t)}function jt(){const t=ct(Ti);if(!t)throw new Error("No SearchParamsContext found");return t}function $c(t,e){fe(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=jt(),s="feedSearch",i=N(()=>o().get(s)||""),l=N(()=>n(i));Zc({getFeedSearch:()=>n(l),setFeedSearch:d=>{d===""?r(s):a(s,d)}});var c=ue(),u=D(c);Ae(u,()=>e.children??je),g(t,c),ve()}const xi={};function ed(t){dt(xi,t)}function td(){const t=ct(xi);if(!t)throw new Error("No TagsSearchContext found");return t}function nd(t,e){fe(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=jt(),s="tagsSearch",i=N(()=>o().get(s)||""),l=N(()=>n(i));ed({getTagsSearch:()=>n(l),setTagsSearch:d=>{d===""?r(s):a(s,d)}});var c=ue(),u=D(c);Ae(u,()=>e.children??je),g(t,c),ve()}const ki={};function ad(t){dt(ki,t)}function Ei(){const t=ct(ki);if(!t)throw new Error("No FeedOrderContext found");return t}function rd(t,e){fe(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=jt(),s="feedOrder",i=N(()=>o().get(s)||"newest"),l=N(()=>n(i));ad({getFeedOrder:()=>n(l),setFeedOrder:d=>{d==="newest"?r(s):a(s,d)}});var c=ue(),u=D(c);Ae(u,()=>e.children??je),g(t,c),ve()}const Pi={};function od(t){dt(Pi,t)}function Cr(){const t=ct(Pi);if(!t)throw new Error("No SidebarContext found");return t}function sd(t,e){fe(e,!0);let a=I("closed");od({sidebarOpen:()=>{f(a,"preOpening")},sidebarClose:()=>{f(a,"closing")},getSidebarState:()=>n(a),setSidebarState:u=>{f(a,u,!0)}});var l=ue(),c=D(l);Ae(c,()=>e.children??je),g(t,l),ve()}const Ni={};function id(t){dt(Ni,t)}function Mn(){const t=ct(Ni);if(!t)throw new Error("No SelectedTagsContext found");return t}function ld(t,e){fe(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=jt(),s=N(a),i="selectedTags";let l=N(()=>n(s).get(i)||""),c=N(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));id({getSelectedTags:()=>n(c),addTag:_=>{n(c).has(_)||r(i,[...n(c),_].map(b=>encodeURIComponent(b)).join(","))},removeTag:_=>{n(c).has(_)&&n(c).size===1?o(i):n(c).has(_)&&r(i,[...n(c)].filter(b=>b!==_).map(b=>encodeURIComponent(b)).join(","))},clearTags:()=>{o(i)},setSelectedTags:_=>{_.size===0?o(i):r(i,[..._].map(b=>encodeURIComponent(b)).join(","))}});var m=ue(),T=D(m);Ae(T,()=>e.children??je),g(t,m),ve()}const Ai={};function cd(t){dt(Ai,t)}function _a(){const t=ct(Ai);if(!t)throw new Error("No SelectedNotesContext found");return t}var dd=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],ud=["difference","intersection","symmetricDifference","union"],_s=!1,za,nn,Hn,Kr,Wa,Mi,Di;const Gr=class Gr extends Set{constructor(a){super();Ie(this,Wa);Ie(this,za,new Map);Ie(this,nn,I(0));Ie(this,Hn,I(0));Ie(this,Kr,kn||-1);if(a){for(var r of a)super.add(r);O(this,Hn).v=super.size}_s||nt(this,Wa,Di).call(this)}has(a){var r=super.has(a),o=O(this,za),s=o.get(a);if(s===void 0){if(!r)return n(O(this,nn)),!1;s=nt(this,Wa,Mi).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),f(O(this,Hn),super.size),Gn(O(this,nn))),this}delete(a){var r=super.delete(a),o=O(this,za),s=o.get(a);return s!==void 0&&(o.delete(a),f(s,!1)),r&&(f(O(this,Hn),super.size),Gn(O(this,nn))),r}clear(){if(super.size!==0){super.clear();var a=O(this,za);for(var r of a.values())f(r,!1);a.clear(),f(O(this,Hn),0),Gn(O(this,nn))}}keys(){return this.values()}values(){return n(O(this,nn)),super.values()}entries(){return n(O(this,nn)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(O(this,Hn))}};za=new WeakMap,nn=new WeakMap,Hn=new WeakMap,Kr=new WeakMap,Wa=new WeakSet,Mi=function(a){return kn===O(this,Kr)?I(a):vn(a)},Di=function(){_s=!0;var a=Gr.prototype,r=Set.prototype;for(const o of dd)a[o]=function(...s){return n(O(this,nn)),r[o].apply(this,s)};for(const o of ud)a[o]=function(...s){n(O(this,nn));var i=r[o].apply(this,s);return new Gr(i)}};let Eo=Gr;function fd(t,e){fe(e,!0);let a=new Eo,r=I("single");const o=()=>a,s=p=>{a.clear(),p.forEach(m=>a.add(m))},i=p=>{a.add(p)},l=p=>{a.delete(p)},c=()=>{a.clear()};cd({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:c,getMode:()=>n(r),changeMode:p=>{f(r,p,!0),p==="single"&&c()}});var v=ue(),h=D(v);Ae(h,()=>e.children??je),g(t,v),ve()}const Ii={};function vd(t){dt(Ii,t)}function Yo(){const t=ct(Ii);if(!t)throw new Error("No LocalDBContext found");return t}const Ri={};function gd(t){dt(Ri,t)}function qa(){const t=ct(Ri);if(!t)throw new Error("No SettingsContext found");return t}const Li={};function hd(t){dt(Li,t)}function no(){const t=ct(Li);if(!t)throw new Error("No BroadcastContext found");return t}const pd="AppStorage",md=1,ar="account",ea="settings",Ke="notes",It="tags",_d="syncLog",Zn="success",Qn="error",mt=(t,e,a)=>{t?.addEventListener(e,a)},ws=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();mt(s,Zn,()=>{const i=s?.result||[];a(i)}),mt(s,Qn,i=>{r(i)})}),Hr=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);mt(i,Zn,()=>{const l=i?.result?.data;r(l)}),mt(i,Qn,l=>{o(l)})}),bn=(t,e,a,r)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});mt(c,Zn,()=>{o()}),mt(c,Qn,u=>{s(u)})}),ut=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{mt(i,Zn,()=>{l()}),mt(i,Qn,u=>{c(u)})})}))},fo=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);mt(l,Zn,()=>{r()}),mt(l,Qn,c=>{o(c)})}),$a=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{mt(i,Zn,()=>{l()}),mt(i,Qn,u=>{c(u)})})}))},Na=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();mt(i,Zn,()=>{a()}),mt(i,Qn,l=>{r(l)})}),Gt="dialogPages",Oi={};function wd(t){dt(Oi,t)}function Vt(){const t=ct(Oi);if(!t)throw new Error("No DialogPagesContext found");return t}var we=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t.Extension="extension",t))(we||{});const ys={settings:"Settings",importData:"Import",exportData:"Export",account:"Account",sync:"Sync",accountSetup:"",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success",extension:"Extension"};function yd(t,e){fe(e,!0);const{deleteSearchParam:a}=jt(),{clearDialogPages:r,getDialogPages:o}=Vt(),s="viewMode";let l=it((()=>{const j=new URLSearchParams(window.location.search).get(s)||"tab";return j==="popup"||j==="window"||j==="tab"||j==="sidebar"?j:"tab"})());Ce(()=>{a(s)});let c=I(!1),u=I(it({showFavicon:!0,recordMode:"note",generateTagsEnabled:!0,previousTags:[]}));const{getDB:d}=Yo(),{createBroadcastChannel:v,tabId:h}=no(),p=v(),m=N(d),T=async()=>{const q=await Hr(n(m),ea,"default");q&&f(u,q,!0)},_=async()=>{await T(),f(c,!0)},b=async q=>{const j=JSON.parse(q.data),oe=j;if(j.tabId&&j.tabId===h){oe.type==="exit"&&(f(u,{showFavicon:!0,recordMode:"note",generateTagsEnabled:!0,previousTags:[]},!0),Na(n(m),ea));return}oe.type==="updateSettings"?T():oe.type==="exit"&&f(u,{showFavicon:!0,recordMode:"note",generateTagsEnabled:!0,previousTags:[]},!0)},F=()=>n(u).showFavicon,w=()=>n(u).recordMode,C=async q=>{n(u).showFavicon=q,await bn(n(m),ea,"default",Pa(n(u))),p.postMessage({type:"updateSettings"})},R=async q=>{n(u).recordMode=q,await bn(n(m),ea,"default",Pa(n(u))),p.postMessage({type:"updateSettings"})},A=async q=>{n(u).previousTags=q,await bn(n(m),ea,"default",Pa(n(u))),p.postMessage({type:"updateSettings"})},M=()=>n(u).previousTags||[];Ce(()=>(_(),p.addEventListener(b),()=>{p.removeEventListener(b)})),gd({getFaviconEnabled:F,getRecordMode:w,setRecordMode:R,setFaviconShown:C,isInitedSettings:()=>n(c),getViewMode:()=>l,setGenerateTagsEnabled:async q=>{n(u).generateTagsEnabled=q,await bn(n(m),ea,"default",Pa(n(u))),p.postMessage({type:"updateSettings"})},getGenerateTagsEnabled:()=>n(u).generateTagsEnabled,setPreviousTags:A,getPreviousTags:M});var H=ue(),X=D(H);Ae(X,()=>e.children??je),g(t,H),ve()}const Fi={};function bd(t){dt(Fi,t)}function Xo(){const t=ct(Fi);if(!t)throw new Error("No AccountContext found");return t}function Sd(t,e){fe(e,!0);let a=I(void 0);const{getDB:r}=Yo(),{createBroadcastChannel:o,tabId:s}=no(),i=N(r),l=o(),c=async()=>{const w=await Hr(n(i),ar,"default");f(a,w,!0)},u=w=>bn(n(i),ar,"default",w),d=async w=>{const C=await Hr(n(i),ar,"default");C!==void 0&&f(a,C,!0),w(C)},v=async w=>{const C=JSON.parse(w.data);if(C.tabId&&C.tabId===s)return;const R=C;R.type==="initLocalAccount"?f(a,null):R.type==="initCloudAccount"?c():R.type==="disconnectCloudAccount"?f(a,null):R.type==="exit"?f(a,void 0):R.type==="updateAccount"&&c()};Ce(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),bd({init:d,getAccount:()=>n(a),initLocalAccount:async()=>{f(a,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async w=>{const C={encryptedClientKey:w.encryptedClientKey||"",subscriptionExpires:w.subscriptionExpires||-1,lastSync:-1};await u(C),f(a,C,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{f(a,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async w=>{if(!n(a))throw new Error("No account to update subscription for");const C={...n(a),subscriptionExpires:w};await u(C),l.postMessage({type:"updateAccount"})},exitApp:async()=>{f(a,void 0),l.postMessage({type:"exit"}),await Na(n(i),ar)}});var b=ue(),F=D(b);Ae(F,()=>e.children??je),g(t,b),ve()}const zi={};function Cd(t){dt(zi,t)}function At(){const t=ct(zi);if(!t)throw new Error("No NotesContext found");return t}const On=()=>crypto.randomUUID(),Td=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},ji=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function oh(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const ht=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function xd(t,e){fe(e,!0);const{getDB:a}=Yo(),{createBroadcastChannel:r,tabId:o}=no(),s=N(a),i=r(),l=720*60*60*1e3;let c=I(!1),u=I(()=>new Map),d=I(()=>[]),v=I(()=>new Map);const h=()=>n(c),p=()=>n(d)().some(S=>S.data&&!S.data.deletedAt&&!S.data.archivedAt),m=()=>n(d)().some(S=>S.data&&S.data.deletedAt),T=()=>n(d)().some(S=>S.data&&S.data.archivedAt&&!S.data.deletedAt),_=S=>{const P=n(d)(),k=n(v)(),z=k.get(S.id);z?z.data=S.data:(P.push(S),k.set(S.id,S)),f(d,()=>P),f(v,()=>k)},b=S=>{const P=n(d)(),k=n(v)(),z=k.get(S);k.has(S)&&k.delete(S),z&&(z.data=void 0),f(d,()=>P),f(v,()=>k)},F=S=>{const P=n(d)(),k=n(v)();for(const z of S){const K=k.get(z);k.has(z)&&k.delete(z),K&&(K.data=void 0)}f(d,()=>P),f(v,()=>k)},w=()=>{f(d,()=>[]),f(u,()=>new Map),f(v,()=>new Map)},C=()=>n(d),R=S=>{const P=n(u)();for(const k of S)P.get(k)||P.set(k,{name:k});f(u,()=>P)},A=async()=>{const[S,P]=await Promise.all([ws(n(s),Ke),ws(n(s),It).then(G=>G.reduce((ee,le)=>ee.set(le.id,le.data),new Map))]),k=[],z=[],K=new Map;for(const G of S)G.data.deletedAt&&Date.now()-G.data.deletedAt>l?k.push(G.id):(z.push(G),K.set(G.id,G));const U=Td(z),ge=[],_e=new Map(P);[...U.values()].forEach(G=>{_e.set(G,{name:G,pinned:P.get(G)?.pinned||!1}),P.has(G)||ge.push(G)});const ae=[];[...P.keys()].forEach(G=>{U.has(G)||ae.push(G)}),await $a(n(s),Ke,k),await $a(n(s),It,ae),await ut(n(s),It,ge.map(G=>({id:G,data:{pinned:_e.get(G)?.pinned||!1}}))),f(d,()=>z),f(v,()=>K),f(u,()=>_e),f(c,!0)},M=async S=>{const P=n(u)(),k=S.data.tags.filter(z=>!P.has(z))||[];return await bn(n(s),Ke,S.id,{...S.data}),k.length>0&&(await ut(n(s),It,k.map(z=>({id:z,data:{pinned:!1}}))||[]),R(k)),_(S),i.postMessage({type:"putNote",data:{id:S.id}}),S.id},H=async({link:S,text:P,tags:k})=>{const z={id:On(),data:{link:ht(S),text:P,tags:ht(k),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await M(z),z.id},X=async(S,{link:P,text:k,tags:z})=>{const K=W(S);if(!K||!K.data)return;const U={id:S,data:{...K.data,link:ht(P),text:k,tags:ht(z),updatedAt:Date.now()}};await M(U)},q=async(S,{link:P,text:k,tags:z})=>{const K=W(S);if(!K||!K.data)return;const U=On(),ge={id:S,data:{...K.data,link:P,text:k,tags:z,updatedAt:Date.now(),history:[...(K.data.history||[]).slice(-49),{id:U,link:ht(K.data.link),text:K.data.text,tags:ht(K.data.tags),updatedAt:K.data.updatedAt}]}};return await M(ge),U},j=async(S,P)=>{const k=W(S);if(!k||!k.data)return;const z=k.data.history?.find?.(U=>U.id===P);if(!z)return;const K={id:S,data:{...k.data,link:ht(z.link),text:z.text,tags:ht(z.tags),updatedAt:z.updatedAt,history:k.data.history?.filter?.(U=>U.id!==P)||[]}};await M(K)},oe=async S=>{const k=n(v)().get(S);!k||!k.data||(b(S),await fo(n(s),Ke,S),i.postMessage({type:"deleteNote",data:{id:S}}))},Z=async()=>{await Na(n(s),Ke),await Na(n(s),It),w(),i.postMessage({type:"clearNotes"})},W=S=>n(v)().get(S),re=async(S,P)=>{const z=n(v)().get(S);if(!z||!z.data)return;const K={id:S,data:{...z.data,pinnedAt:P?Date.now():void 0}};M(K)},me=async S=>{const k=n(v)().get(S);if(!k||!k.data)return;const z={id:S,data:{...k.data,deletedAt:Date.now()}};await M(z)},se=async S=>{const k=n(v)().get(S);if(!k||!k.data)return;const z={id:S,data:{...k.data,archivedAt:Date.now()}};await M(z)},B=async({noteIds:S})=>{const P=n(v)(),k=n(d)();for(const K of S){const U=P.get(K);U?.data&&(U.data.deletedAt=Date.now())}return await ut(n(s),Ke,S.map(K=>{const U=P.get(K);return{id:K,data:U?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>k),{cancel:async()=>{for(const K of S){const U=P.get(K);U?.data&&(U.data.deletedAt=0)}await ut(n(s),Ke,S.map(K=>{const U=P.get(K);return{id:K,data:U?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>k)}}},$=async({noteIds:S})=>{const P=n(v)(),k=n(d)();for(const K of S){const U=P.get(K);U?.data&&(U.data.archivedAt=Date.now())}return await ut(n(s),Ke,S.map(K=>{const U=P.get(K);return{id:K,data:U?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>k),{cancel:async()=>{for(const K of S){const U=P.get(K);U?.data&&(U.data.archivedAt=0)}await ut(n(s),Ke,S.map(K=>{const U=P.get(K);return{id:K,data:U?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>k)}}},te=async({noteIds:S})=>{const P=n(v)(),k=n(d)(),z=[];for(const U of S){const ge=P.get(U);ge?.data&&(z.push({id:U,data:ht(ge.data)}),ge.data.archivedAt=0)}return await ut(n(s),Ke,S.map(U=>{const ge=P.get(U);return{id:U,data:ge?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>k),{cancel:async()=>{for(const U of z){const ge=P.get(U.id);ge?.data&&(ge.data=U.data)}await ut(n(s),Ke,S.map(U=>{const ge=P.get(U);return{id:U,data:ge?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>k)}}},ie=async({noteIds:S})=>{const P=n(v)(),k=n(d)(),z=[];for(const U of S){const ge=P.get(U);ge?.data&&(z.push({id:U,data:ht(ge.data)}),ge.data.deletedAt=0)}return await ut(n(s),Ke,S.map(U=>{const ge=P.get(U);return{id:U,data:ge?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>k),{cancel:async()=>{for(const U of z){const ge=P.get(U.id);ge?.data&&(ge.data=U.data)}await ut(n(s),Ke,S.map(U=>{const ge=P.get(U);return{id:U,data:ge?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>k)}}},ce=async S=>{const k=n(v)().get(S);if(!k||!k.data)return;const z={id:S,data:{...k.data,deletedAt:0}};await M(z)},be=async S=>{const k=n(v)().get(S);if(!k||!k.data)return;const z={id:S,data:{...k.data,archivedAt:0}};await M(z)},Ee=async(S,P)=>{const k=n(u)();k.set(S,{name:S,pinned:P}),await bn(n(s),It,S,{pinned:P}),i.postMessage({type:"pinTag",data:{tag:S,pinned:P}}),f(u,()=>k)},E=async({noteIds:S})=>{const P=n(u)(),k=n(d)();F(S),await $a(n(s),Ke,S),i.postMessage({type:"reloadNotes"}),f(d,()=>k),f(u,()=>P)},Y=async S=>{const P=n(v)(),k={};S.forEach(z=>{const K=P.get(z.id),U=[];if(K&&K.data){let ge=0,_e=0;for(;ge<z.data.history.length&&_e<K.data.history.length;){const ae=z.data.history[ge],G=K.data.history[_e];ae.id===G.id?(ae.updatedAt>G.updatedAt?U.push(ae):U.push(G),ge+=1,_e+=1):ae.updatedAt<G.updatedAt?(U.push(ae),ge+=1):ae.updatedAt>G.updatedAt?(U.push(G),_e+=1):(U.push(G),ge+=1,_e+=1)}K.data.updatedAt>z.data.updatedAt?k[K.id]={id:K.id,data:{...K.data,history:U}}:k[z.id]={id:z.id,data:{...z.data,history:U}}}else k[z.id]=z}),await ut(n(s),Ke,Object.values(k)),await A(),i.postMessage({type:"reloadNotes"})},he=async()=>{const S=[];n(d)().forEach(k=>{k&&k.data&&k.data.deletedAt&&S.push(k.id)}),await $a(n(s),Ke,S),await A(),i.postMessage({type:"emptyBin"})},Te=async(S,P)=>{const k=n(v)(),z=n(d)(),K=[],U=[];for(const _e of P){const ae=k.get(_e);ae?.data&&(K.push({id:_e,data:ht(ae.data)}),U.push({id:_e,data:{...ae.data,tags:ae.data.tags.filter(G=>G!==S),history:[...ae.data.history||[],{id:On(),link:ht(ae.data.link),text:ae.data.text,tags:ae.data.tags,updatedAt:Date.now()}]}}))}for(const _e of U){const ae=k.get(_e.id);ae?.data&&(ae.data=_e.data)}return await ut(n(s),Ke,U.map(_e=>({id:_e.id,data:_e.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(d,()=>z),{cancel:async()=>{for(const _e of K){const ae=k.get(_e.id);ae?.data&&(ae.data=_e.data)}await ut(n(s),Ke,K.map(_e=>({id:_e.id,data:_e.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(d,()=>z)}}},Pe=async(S,P,k)=>{const z=n(v)(),K=n(d)(),U=n(u)(),ge=[],_e=[];for(const ee of k){const le=z.get(ee);le?.data&&(ge.push({id:ee,data:ht(le.data)}),_e.push({id:ee,data:{...le.data,tags:le.data.tags.map(ke=>ke!==S?ke:P),history:[...le.data.history||[],{id:On(),link:ht(le.data.link),text:le.data.text,tags:le.data.tags,updatedAt:Date.now()}]}}))}for(const ee of _e){const le=z.get(ee.id);le?.data&&(le.data=ee.data)}const ae=U.has(P);return await Promise.all([(async()=>{if(!ae){const ee=U.get(S)?.pinned||!1;U.set(P,{name:P,pinned:ee}),await bn(n(s),It,P,{pinned:ee})}})(),ut(n(s),Ke,_e.map(ee=>({id:ee.id,data:ee.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>z),f(d,()=>K),f(u,()=>U),{cancel:async()=>{for(const ee of ge){const le=z.get(ee.id);le?.data&&(le.data=ee.data)}await Promise.all([(async()=>{ae||(U.delete(P),await fo(n(s),It,P))})(),ut(n(s),Ke,ge.map(ee=>({id:ee.id,data:ee.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>z),f(d,()=>K),f(u,()=>U)}}},ne=async(S,P)=>{const k=n(v)(),z=n(d)(),K=n(u)(),U=[],ge=[];for(const G of P){const ee=k.get(G);ee?.data&&(U.push({id:G,data:ht(ee.data)}),ge.push({id:G,data:{...ee.data,tags:[...new Set([...ee.data.tags,S])],history:[...ee.data.history||[],{id:On(),link:ht(ee.data.link),text:ee.data.text,tags:ee.data.tags,updatedAt:Date.now()}]}}))}for(const G of ge){const ee=k.get(G.id);ee?.data&&(ee.data=G.data)}const _e=K.has(S);return await Promise.all([(async()=>{_e||(K.set(S,{name:S,pinned:!1}),await bn(n(s),It,S,{pinned:!1}))})(),ut(n(s),Ke,ge.map(G=>({id:G.id,data:G.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(d,()=>z),f(u,()=>K),{cancel:async()=>{for(const G of U){const ee=k.get(G.id);ee?.data&&(ee.data=G.data)}await Promise.all([(async()=>{_e||(K.delete(S),await fo(n(s),It,S))})(),ut(n(s),Ke,U.map(G=>({id:G.id,data:G.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>k),f(d,()=>z),f(u,()=>K)}}},J=async(S,P,k)=>{const z=n(v)(),K=n(d)(),U=n(u)(),ge=[],_e=[];for(const le of k){const ke=z.get(le);ke?.data&&(ge.push({id:le,data:ht(ke.data)}),_e.push({id:le,data:{...ke.data,tags:[...new Set([...ke.data.tags.filter(Be=>!S.includes(Be)),...P])],history:[...ke.data.history||[],{id:On(),link:ht(ke.data.link),text:ke.data.text,tags:ke.data.tags,updatedAt:Date.now()}]}}))}for(const le of _e){const ke=z.get(le.id);ke?.data&&(ke.data=le.data)}const ae=n(u)(),G=P.filter(le=>!ae.has(le));return await Promise.all([(async()=>{if(G.length>0)return ut(n(s),It,G.map(le=>({id:le,data:{pinned:!1}})))})(),ut(n(s),Ke,_e.map(le=>({id:le.id,data:le.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>z),f(d,()=>K),f(u,()=>U),{cancel:async()=>{for(const le of ge){const ke=z.get(le.id);ke?.data&&(ke.data=le.data)}await Promise.all([(async()=>{if(G.length>0){for(const le of G)U.delete(le);return $a(n(s),It,G)}})(),ut(n(s),Ke,ge.map(le=>({id:le.id,data:le.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>z),f(d,()=>K),f(u,()=>U)}}},Q=async S=>{const P=JSON.parse(S.data),k=P;if(P.tabId&&P.tabId===o){k.type==="exit"&&(w(),await Na(n(s),Ke),await Na(n(s),It));return}if(k.type==="putNote"){const K=k.data.id;if(!K)return;const U=await Hr(n(s),Ke,K);if(!U)return;_({id:K,data:U})}else if(k.type==="deleteNote"){const z=k.data.id;if(!z)return;b(z)}else if(k.type==="pinTag"){const z=k.data.tag,K=k.data.pinned,U=n(u)();U.set(z,{name:z,pinned:K}),f(u,()=>U)}else k.type==="clearNotes"?w():k.type==="reloadNotes"||k.type==="emptyBin"?A():k.type==="exit"&&w()};Ce(()=>(A(),i.addEventListener(Q),()=>{i.removeEventListener(Q)})),Cd({isInitedNotes:h,createNote:H,updateNote:X,deleteNote:oe,saveNote:q,revertNote:j,pinNote:re,moveNoteToBin:me,moveNoteToArchive:se,getGetNotes:C,importNotes:Y,clearNotes:Z,getNoteById:W,getGetMapTags:()=>n(u),pinTag:Ee,restoreNoteFromBin:ce,moveNoteFromArchive:be,checkNotes:p,checkNotesInBin:m,checkNotesInArchive:T,emptyBin:he,moveNotesToBin:B,moveNotesToArchive:$,moveNotesFromArchive:te,deleteNotes:E,restoreNotesFromBin:ie,deleteTag:Te,renameTag:Pe,addTag:ne,changeTags:J});var Se=ue(),de=D(Se);Ae(de,()=>e.children??je),g(t,Se),ve()}const Bi={};function kd(t){dt(Bi,t)}function wa(){const t=ct(Bi);if(!t)throw new Error("No FeedContext found");return t}const Hi={};var Ge=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(Ge||{});function Ed(t){dt(Hi,t)}function ao(){const t=ct(Hi);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function Pd(t,e){fe(e,!0);const a=Go(),{getSelectedTags:r}=Mn(),{getSelectedMetaTags:o}=ao(),{getGetNotes:s}=At();let i=N(r),l=N(o),c=I(0),u=[],d=I(0),v=N(()=>n(l).has(Ge.ARCHIVED)),h=N(()=>n(l).has(Ge.BIN));Oe(()=>{const T=s()()||[],_=[],b=Array.from(n(i).values());for(let F=T.length-1;F>=0;F--){if(!T[F]||!T[F].data)continue;const w=T[F];if(!n(v)&&!n(h)&&(w?.data.deletedAt||w?.data.archivedAt)||n(v)&&(w?.data.deletedAt||!w?.data.archivedAt)||n(h)&&!w?.data.deletedAt)continue;const C=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(w.data.link?.title.toLowerCase().includes(C)||w.data.link?.url.toLowerCase().includes(C)||w.data.text.toLowerCase().includes(C)||w.data.tags.map(R=>R.toLowerCase()).join(" ").includes(C)))){if(n(l).has(Ge.INBOX)){if(w.data.tags.length>0)continue}else if(n(i).size&&b.some(R=>!w.data.tags.includes(R)))continue;_.push(w)}}f(c,_.length,!0),u=_,f(d,Date.now(),!0)}),kd({getFiltredNotesLength:()=>n(c),getFiltredNotes:()=>(n(d),u),getUpdatedFiltredNotesTimestamp:()=>n(d)});var p=ue(),m=D(p);Ae(m,()=>e.children??je),g(t,p),ve()}function Nd(t,e){fe(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=jt(),s=N(a),i="selectedMetaTags";let l=N(()=>n(s).get(i)||""),c=N(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));Ed({getSelectedMetaTags:()=>n(c),addMetaTag:_=>{n(c).has(_)||r(i,[...n(c),_].map(b=>encodeURIComponent(b)).join(","))},removeMetaTag:_=>{n(c).has(_)&&n(c).size===1?o(i):n(c).has(_)&&r(i,[...n(c)].filter(b=>b!==_).map(b=>encodeURIComponent(b)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:_=>{_.size===0?o(i):r(i,[..._].map(b=>encodeURIComponent(b)).join(","))}});var m=ue(),T=D(m);Ae(T,()=>e.children??je),g(t,m),ve()}const Ui={},Yn=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function Ad(t){dt(Ui,t)}function Dn(){const t=ct(Ui);if(!t)throw new Error("No AnimationSettingsContext found");return t}function Md(t,e){fe(e,!0);let a=it(Yn());Ad(a);var r=ue(),o=D(r);Ae(o,()=>e.children??je),g(t,r),ve()}const qi={};function Dd(t){dt(qi,t)}function Jo(){const t=ct(qi);if(!t)throw new Error("No ScrollingContext found");return t}function Id(t,e){fe(e,!0);let a=I(!1);const r=()=>n(a),o=ji(()=>{f(a,!1)},100);Dd({isScrolling:r,enable:()=>{f(a,!0),o()}});var i=ue(),l=D(i);Ae(l,()=>e.children??je),g(t,i),ve()}const Vi={};function Rd(t){dt(Vi,t)}function Za(){const t=ct(Vi);if(!t)throw new Error("No MobileSizeContext found");return t}function Ld(t,e){fe(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=I(it(a())),o=Dn();const s=ji(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{f(r,a(),!0)})};Rd({checkMobileSize:()=>n(r)}),Ce(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=ue(),u=D(c);Ae(u,()=>e.children??je),g(t,c),ve()}const Wi={};function Od(t){dt(Wi,t)}function en(){const t=ct(Wi);if(!t)throw new Error("No DialogContext found");return t}function Fd(t,e){fe(e,!0);let a=I(0),r=I(!1),o=I(!0),s=I(!1),i=I(!1);Od({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{f(a,n(a)+1)},dialogDec:()=>{f(a,n(a)-1)},blockDialog:R=>{f(r,R,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:R=>{f(o,R,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:R=>{f(s,R,!0)},setLeftEnd:R=>{f(i,R,!0)},getCountDialog:()=>n(a)});var w=ue(),C=D(w);Ae(C,()=>e.children??je),g(t,w),ve()}const Ki={};function zd(t){dt(Ki,t)}function ro(){const t=ct(Ki);if(!t)throw new Error("No ScrollContainerContext found");return t}function jd(t,e){fe(e,!0);let a=I(null);zd({setScrollContainer:l=>{f(a,l,!0)},getScrollContainer:()=>n(a)});var s=ue(),i=D(s);Ae(i,()=>e.children??je),g(t,s),ve()}const Gi={};function Bd(t){dt(Gi,t)}function Zo(){const t=ct(Gi);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Hd(t,e){fe(e,!0);let a=I(200);Bd({setDialogPageHeight:l=>{f(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=ue(),i=D(s);Ae(i,()=>e.children??je),g(t,s),ve()}const Ud=[ar,ea,Ke,It,_d];function qd(){return new Promise((t,e)=>{const a=indexedDB.open(pd,md);mt(a,"upgradeneeded",()=>{const r=a.result;for(const o of Ud)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),mt(a,Zn,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),mt(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),mt(a,Qn,()=>{e()})})}function Vd(t,e){fe(e,!0);let a=I(null);Ce(()=>{qd().then(l=>{f(a,l,!0)}).catch(l=>{})}),vd({getDB:()=>n(a)});var o=ue(),s=D(o);{var i=l=>{var c=ue(),u=D(c);Ae(u,()=>e.children??je),g(l,c)};V(s,l=>{n(a)&&l(i)})}g(t,o),ve()}function Wd(t,e){fe(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=jt(),s=N(a);let i=N(()=>n(s).get(Gt)||""),l=N(()=>n(i).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!==""));const c=()=>n(l),u=w=>{if(w.length===0){o(Gt);return}r(Gt,w.map(C=>encodeURIComponent(C)).join(","))},d=w=>{r(Gt,[...n(l),w].map(C=>encodeURIComponent(C)).join(","))};wd({setDialogPages:u,getDialogPages:c,pushDialogPage:d,popDialogPage:()=>{const w=n(l)[n(l).length-1];return n(l).length<=1?(o(Gt),w):(r(Gt,n(l).slice(0,-1).map(C=>encodeURIComponent(C)).join(",")),w)},replaceDialogPage:w=>{r(Gt,[...n(l).slice(0,-1),w].map(C=>encodeURIComponent(C)).join(","))},hasDialogPage:w=>n(l).find(C=>{const[R]=C.split("?");return R===w})!==void 0,clearDialogPages:()=>{o(Gt)},createDialogPageHref:w=>{const C=new URLSearchParams(n(s).toString());return C.set(Gt,[...c(),w].map(R=>encodeURIComponent(R)).join(",")),`${window.location.pathname}?${C.toString()}`},createHandleClickDialogPage:w=>C=>{C.preventDefault(),d(w)}});var b=ue(),F=D(b);Ae(F,()=>e.children??je),g(t,b),ve()}function Kd(t,e){fe(e,!0);let a=I(it(new URLSearchParams(window.location.search)));const r=v=>{const h=window.location.pathname;f(a,v,!0),window.history.replaceState(null,"",`${h}${v.size>0?`?${v.toString()}`:""}`)};Qc({getSearchParams:()=>n(a),replaceSearchParams:v=>{const h=new URLSearchParams(v);r(h)},setSearchParam:(v,h)=>{const p=new URLSearchParams(n(a));p.set(v,h),r(p)},deleteSearchParam:v=>{const h=new URLSearchParams(n(a));h.delete(v),r(h)},getHref:v=>{const h=new URLSearchParams(v);return`${window.location.pathname}${h.toString().length>0?`?${h.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var u=ue(),d=D(u);Ae(d,()=>e.children??je),g(t,u),ve()}const Yi={};function Gd(t){dt(Yi,t)}function Yd(){const t=ct(Yi);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Xd(t,e){fe(e,!0);let a=it({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";Ce(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l);let c=null;const u=d=>{o()&&(c&&clearTimeout(c),c=setTimeout(()=>{o()&&d.target!==document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur?.()},120))};return document.addEventListener("touchstart",u,{passive:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l),document.removeEventListener("touchstart",u)}}),Gd({getIsKeyboardVisible:r});var s=ue(),i=D(s);Ae(i,()=>e.children??je),g(t,s),ve()}function Jd(t,e){fe(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};hd({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=ue(),s=D(o);Ae(s,()=>e.children??je),g(t,o),ve()}function Zd(t,e){Vd(t,{children:(a,r)=>{Jd(a,{children:(o,s)=>{Md(o,{children:(i,l)=>{Id(i,{children:(c,u)=>{Ld(c,{children:(d,v)=>{Fd(d,{children:(h,p)=>{jd(h,{children:(m,T)=>{Hd(m,{children:(_,b)=>{Xd(_,{children:(F,w)=>{Kd(F,{children:(C,R)=>{Wd(C,{children:(A,M)=>{var H=ue(),X=D(H);Ae(X,()=>e.children??je),g(A,H)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Qd(t,e){Zd(t,{children:(a,r)=>{nd(a,{children:(o,s)=>{$c(o,{children:(i,l)=>{rd(i,{children:(c,u)=>{sd(c,{children:(d,v)=>{Nd(d,{children:(h,p)=>{ld(h,{children:(m,T)=>{fd(m,{children:(_,b)=>{yd(_,{children:(F,w)=>{Sd(F,{children:(C,R)=>{xd(C,{children:(A,M)=>{Pd(A,{children:(H,X)=>{var q=ue(),j=D(q);Ae(j,()=>e.children??je),g(H,q)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const gt=t=>{const a=Array.from(document.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(i=>i instanceof HTMLElement?i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement?!i.disabled&&i.offsetParent!==null:i.offsetParent!==null:!1),r=a.indexOf(t);if(r===-1)return{next:null,prev:null};const o=a[r+1],s=a[r-1];return{next:o,prev:s}};let Ct=I(""),Rn=I(null),Aa=I(null),_n=I(null),Ln=I(it([])),Mr=I(null),Fn=null;function ft(t,e){f(Ct,""),Fn=null,f(Aa,null),f(_n,null),setTimeout(()=>{f(Ct,t,!0),e?.onFinish&&f(Aa,e.onFinish,!0),e?.cancel&&(f(_n,e.cancel.onCancel,!0),Fn=e.cancel.nextFocusRef)},16)}var $d=x('<button type="button" class="c p-18jfd2t">undo</button>'),eu=x('<div class="a p-18jfd2t"><div class="b p-18jfd2t"><span> </span> <!></div></div>'),tu=x("<div><!></div>");function Qo(t,e){fe(e,!0);const a=On();Ce(()=>(f(Ln,[...n(Ln),a],!0),()=>{const c=n(Ln).indexOf(a);c!==-1&&f(Ln,n(Ln).filter((u,d)=>d!==c),!0)}));const r=c=>{if(c.key==="Tab"&&c.shiftKey){if(Fn&&n(Ct)){c.preventDefault();const{prev:u}=gt(Fn);u?.focus(),f(Ct,"")}}else if(c.key==="Tab"&&!c.shiftKey)Fn&&n(Ct)&&(c.preventDefault(),f(Ct,""),Fn?.focus());else if(c.key==="Escape"&&n(Ct)){if(c.preventDefault(),Fn){const{prev:u}=gt(Fn);u?.focus()}f(Ct,"")}};Ce(()=>(window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)})),Oe(()=>{n(Ct);const c=n(_n)?2e3:800;n(Ct)&&(n(Rn)?.getBoundingClientRect(),n(Rn)?.style.setProperty("opacity","1"));const u=setTimeout(()=>{n(Rn)?.style.removeProperty("opacity")},c),d=setTimeout(()=>{f(Ct,""),n(Aa)&&n(Aa)(),f(Aa,null),f(_n,null),n(Rn)?.style.removeProperty("opacity")},c+400);return()=>{clearTimeout(u),clearTimeout(d)}});const o=c=>{c.preventDefault(),n(_n)&&(f(Aa,null),n(_n)(),f(_n,null)),f(Ct,""),n(Rn)?.style.removeProperty("opacity")};Oe(()=>{n(Ct)&&n(_n)&&n(Mr)&&setTimeout(()=>{n(Mr)?.focus()},151)}),Oe(()=>{n(Ln),zt(()=>{f(Ct,""),n(Rn)?.style.removeProperty("opacity")})});var s=tu(),i=y(s);{var l=c=>{var u=eu(),d=y(u),v=y(d),h=y(v),p=L(v,2);{var m=T=>{var _=$d();_.__click=o,Ye(_,b=>f(Mr,b),()=>n(Mr)),g(T,_)};V(p,T=>{n(_n)&&T(m)})}Ye(d,T=>f(Rn,T),()=>n(Rn)),xe(()=>ot(h,n(Ct))),g(c,u)};V(i,c=>{n(Ct)&&n(Ln)[n(Ln).length-1]===a&&c(l)})}g(t,s),ve()}st(["click"]);var nu=x('<span class="a p-lxk90o"><!></span>');function lt(t,e){var a=nu(),r=y(a);Ae(r,()=>e.children),g(t,a)}var au=Pc('<svg class="p-1yv1ibq"><use></use></svg>');function ye(t,e){let a=Ne(e,"name",8,"");var r=au(),o=y(r);xe(()=>at(o,"href",`#icon-${a()??""}`)),g(t,r)}var ru=x('<button class="a p-18m1f7k"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Xi(t,e){fe(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=Cr(),{getDialogPages:s}=Vt(),{checkExistedDialog:i}=en();let l=N(()=>s().length>0||i());const c=h=>{if(h.preventDefault(),n(l))return;const p=r();p==="closed"?a():p==="opened"&&o()};var u=ru();u.__click=c;var d=y(u);pe(d,()=>({"--size":"32px"})),ye(d.lastChild,{name:"sidebarMenu"});var v=L(d,2);lt(v,{children:(h,p)=>{var m=De("Menu");g(h,m)}}),g(t,u),ve()}st(["click"]);var ou=x('<button class="b p-9fi5nt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),su=x('<div class="a p-9fi5nt"><input class="p-9fi5nt"/> <!></div>');function Po(t,e){fe(e,!0);let a=Ne(e,"value",15,""),r=Ne(e,"ref",15,null);const o=u=>{u.key==="Escape"&&(a(""),e.onChange?.(""))};Ce(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=su(),i=y(s);i.__input=u=>e.onChange?.(u.target?.value||""),Ye(i,u=>r(u),()=>r());var l=L(i,2);{var c=u=>{var d=ou();d.__click=()=>{a(""),e.onChange?.("")};var v=y(d);pe(v,()=>({"--size":"20px"})),ye(v.lastChild,{name:"close"});var h=L(v,2);lt(h,{children:(p,m)=>{var T=De("Clear");g(p,T)}}),g(u,d)};V(l,u=>{a()&&u(c)})}xe(()=>at(i,"placeholder",e.placeholder)),rn("focus",i,function(...u){e.onFocus?.apply(this,u)}),Si(i,a),g(t,s),ve()}st(["input","click"]);function $o(t,e){fe(e,!0),Ce(()=>{const a=r=>{r.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("click",a,{capture:!0}),()=>{document.removeEventListener("click",a,{capture:!0})}}),ve()}function iu(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const Va=iu(),lu=()=>{const t=navigator.userAgent;return/android/i.test(t)},fr=lu(),sh=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},ih=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},vr=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let ka=I(it([]));var cu=x("<dialog><div><!></div></dialog> <!>",1);function Tr(t,e){fe(e,!0);const a=On(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;Ce(()=>(f(ka,[...n(ka),a],!0),()=>{const w=n(ka).indexOf(a);w!==-1&&f(ka,n(ka).filter((C,R)=>R!==w),!0)}));let o=Ne(e,"onClosed",3,()=>{}),s=Ne(e,"blocked",3,!1),i=I(null),l=I(null),c=I(!1),{dialogInc:u,dialogDec:d}=en();const v=()=>{const w=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(w),o()()},{once:!0}),f(c,!1)};Oe(()=>{e.startClose&&v()}),Ce(()=>{n(i)?.showModal(),n(i)?.getClientRects(),f(c,!0);const w=C=>{C?.preventDefault(),s()||v()};return n(i)?.addEventListener("cancel",w),n(i)?.addEventListener("close",w),()=>{n(i)?.removeEventListener("cancel",w),n(i)?.removeEventListener("close",w)}}),Ce(()=>(u(),()=>{d()})),Ce(()=>{const w=C=>{C.key==="Escape"&&s()&&C.preventDefault()};return window.addEventListener("keydown",w),()=>{window.removeEventListener("keydown",w)}});function h(){setTimeout(()=>{if(Va||!n(i)||!n(l))return;const w=window.visualViewport;if(w)if(w.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}Ce(()=>(h(),window.visualViewport?.addEventListener("resize",h),window.visualViewport?.addEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{window.visualViewport?.removeEventListener("resize",h),window.visualViewport?.removeEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h)}));var p=cu(),m=D(p),T=y(m),_=y(T);Ae(_,()=>e.children),Ye(T,w=>f(l,w),()=>n(l)),Ye(m,w=>f(i,w),()=>n(i));var b=L(m,2);{var F=w=>{$o(w,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:v})};V(b,w=>{n(i)&&n(l)&&!s()&&w(F)})}xe(()=>{$e(m,1,rt({a:!0,b:n(c),c:n(ka).length>1}),"p-1x14yml"),$e(T,1,rt({d:!0,b:n(c)}),"p-1x14yml")}),g(t,p),ve()}var du=x("<div><!></div>");function uu(t,e){fe(e,!0);let a=I(!1),r=I(null);const o=()=>{const d=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),f(a,!1)},s=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},i=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},l=d=>{d.key==="Escape"&&o()};Ce(()=>{n(r)?.getClientRects(),f(a,!0);const d=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),Oe(()=>{e.startClose&&o()});var c=du(),u=y(c);Ae(u,()=>e.children),Ye(c,d=>f(r,d),()=>n(r)),xe(()=>$e(c,1,rt({a:!0,b:n(a)}),"p-1unpq18")),g(t,c),ve()}var fu=x("<ul><!></ul>"),vu=x("<ul><!></ul>");function xr(t,e){fe(e,!0);let a=Ne(e,"ref",15);var r=ue(),o=D(r);{var s=l=>{Tr(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(c,u)=>{var d=fu(),v=y(d);Ae(v,()=>e.children),Ye(d,h=>a(h),()=>a()),xe(()=>$e(d,1,rt({a:!0,b:e.isMobile}),"p-1sp2xya")),g(c,d)},$$slots:{default:!0}})},i=l=>{uu(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(c,u)=>{var d=vu(),v=y(d);Ae(v,()=>e.children),Ye(d,h=>a(h),()=>a()),xe(()=>$e(d,1,rt({a:!0,b:e.isMobile}),"p-1sp2xya")),g(c,d)},$$slots:{default:!0}})};V(o,l=>{e.isMobile?l(s):l(i,!1)})}g(t,r),ve()}var gu=x("<button><!></button>"),hu=x("<a><!></a>");function Ve(t,e){let a=Ne(e,"dangerous",3,!1),r=Ne(e,"type",3,"button"),o=Ne(e,"href",3,"");var s=ue(),i=D(s);{var l=u=>{var d=gu();d.__click=function(...h){e.onClick?.apply(this,h)},d.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=y(d);Ae(v,()=>e.children??je),xe(()=>$e(d,1,rt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")),g(u,d)},c=u=>{var d=hu();d.__click=function(...h){e.onClick?.apply(this,h)},d.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=y(d);Ae(v,()=>e.children??je),xe(()=>{at(d,"href",o()),$e(d,1,rt({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-5ctt6p")}),g(u,d)};V(i,u=>{r()==="button"?u(l):u(c,!1)})}g(t,s)}st(["click","keydown"]);var pu=x('<li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li> <li class="p-cjxu92"><!></li>',1),mu=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),_u=x('<div class="a p-cjxu92"><button><!> <!></button> <!></div>');function wu(t,e){fe(e,!0);let a=I(!1),r=I(!1);const{getFeedOrder:o,setFeedOrder:s}=Ei();let i=Va||fr,l=N(o);const c=()=>{n(a)||f(a,!0)},u=b=>{f(r,!0),s(b)},d=()=>{f(a,!1),f(r,!1)};Ce(()=>{const b=F=>{F.key==="Escape"&&f(r,!0)};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)});var v=_u(),h=y(v);h.__click=c,$e(h,1,rt({b:!0,c:!0}),"p-cjxu92");var p=y(h);ye(p,{name:"filter"});var m=L(p,2);lt(m,{children:(b,F)=>{var w=De("show feed order menu");g(b,w)}});var T=L(h,2);{var _=b=>{var F=mu(),w=D(F);pe(w,()=>({"--right":"0px","--top":"44px"})),xr(w.lastChild,{get startClose(){return n(r)},onClosed:d,get isMobile(){return i},children:(C,R)=>{var A=pu(),M=D(A),H=y(M);{let re=N(()=>n(l)==="newest");Ve(H,{get active(){return n(re)},get dialogMode(){return i},onClick:()=>u("newest"),children:(me,se)=>{var B=De("Newest");g(me,B)},$$slots:{default:!0}})}var X=L(M,2),q=y(X);{let re=N(()=>n(l)==="oldest");Ve(q,{get active(){return n(re)},get dialogMode(){return i},onClick:()=>u("oldest"),children:(me,se)=>{var B=De("Oldest");g(me,B)},$$slots:{default:!0}})}var j=L(X,2),oe=y(j);{let re=N(()=>n(l)==="AtoZ");Ve(oe,{get active(){return n(re)},get dialogMode(){return i},onClick:()=>u("AtoZ"),children:(me,se)=>{var B=De("A to Z");g(me,B)},$$slots:{default:!0}})}var Z=L(j,2),W=y(Z);{let re=N(()=>n(l)==="ZtoA");Ve(W,{get active(){return n(re)},get dialogMode(){return i},onClick:()=>u("ZtoA"),children:(me,se)=>{var B=De("Z to A");g(me,B)},$$slots:{default:!0}})}g(C,A)},$$slots:{default:!0}}),g(b,F)};V(T,b=>{n(a)&&b(_)})}g(t,v),ve()}st(["click"]);var yu=x('<div><!> <div class="a p-y3zt6o"></div></div>');function ya(t,e){fe(e,!0);let a=I(!1);Ce(()=>{const s=setTimeout(()=>{f(a,!0)},200);return()=>{clearTimeout(s)}});var r=yu(),o=y(r);Ae(o,()=>e.children??je),xe(()=>$e(r,1,rt({b:!0,c:n(a)}),"p-y3zt6o")),g(t,r),ve()}var bu=x("<a><!></a>"),Su=x("<button><!></button>");function xt(t,e){let a=Ne(e,"type",3,"standard"),r=Ne(e,"typeButton",3,"button"),o=Ne(e,"element",3,"button"),s=Ne(e,"href",3,""),i=Ne(e,"fullWidth",3,!1),l=Ne(e,"withoutMinWidth",3,!1);var c=ue(),u=D(c);{var d=h=>{var p=bu();p.__click=function(...T){e.onClick?.apply(this,T)};var m=y(p);Ae(m,()=>e.children??je),xe(()=>{at(p,"target",e.target),at(p,"rel",e.rel),at(p,"href",s()),$e(p,1,rt({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),g(h,p)},v=h=>{var p=Su();p.__click=function(...T){e.onClick?.apply(this,T)};var m=y(p);Ae(m,()=>e.children??je),xe(()=>{at(p,"type",r()),$e(p,1,rt({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-b8qdey")}),g(h,p)};V(u,h=>{o()==="a"?h(d):h(v,!1)})}g(t,c)}st(["click"]);let No=I(!1),Dr=I(!1),Ao=I(""),Mo=I("Cancel"),Do=I("Confirm"),Io,Fr=I(void 0),Ro,Lo=I("dangerous");function Ia(t){f(No,!0),f(Ao,t.title,!0),t.buttonCancelTitle&&f(Mo,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&f(Do,t.buttonConfirmTitle,!0),Io=t.onConfirm,f(Fr,t.onCancel,!0),Ro=t.onClosed,t.type?f(Lo,t.type,!0):f(Lo,"dangerous")}var Cu=x('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),Tu=x('<div class="a p-1jlul5o"><!></div>');function xu(t,e){fe(e,!0);let a=I(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{f(a,!0)},250)};Ce(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(Fr)?.(),f(Dr,!0)},l=async()=>{s(),await Io?.(),f(Dr,!0),o=!0},c=()=>{clearTimeout(r),f(a,!1),f(No,!1),f(Dr,!1),f(Ao,""),f(Mo,"Cancel"),f(Do,"Confirm"),f(Fr,void 0),Io=void 0,Ro&&Ro(o),o=!1};var u=ue(),d=D(u);{var v=h=>{Tr(h,{get blocked(){return n(a)},get startClose(){return n(Dr)},onClosed:c,children:(p,m)=>{var T=Tu(),_=y(T);{var b=w=>{ya(w,{})},F=w=>{var C=Cu(),R=D(C),A=y(R),M=L(R,2),H=y(M);{var X=j=>{xt(j,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(oe,Z)=>{var W=De();xe(()=>ot(W,n(Mo))),g(oe,W)},$$slots:{default:!0}})};V(H,j=>{n(Fr)&&j(X)})}var q=L(H,2);xt(q,{onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(Lo)},children:(j,oe)=>{var Z=De();xe(()=>ot(Z,n(Do))),g(j,Z)},$$slots:{default:!0}}),xe(()=>ot(A,n(Ao))),g(w,C)};V(_,w=>{n(a)?w(b):w(F,!1)})}g(p,T)},$$slots:{default:!0}})};V(d,h=>{n(No)&&h(v)})}g(t,u),ve()}const gr=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,c=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var ku=x('<div class="a p-rp2pt7"><a class="b p-rp2pt7"><span class="c p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-rp2pt7"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function Eu(t,e){fe(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=Vt(),{checkExistedDialog:i}=en(),l=()=>{o.length===0&&!i()&&s(we.NewNote)};Ce(()=>gr({key:"n",action:l})),Ko();var c=ku(),u=y(c),d=N(()=>r(we.NewNote));u.__click=function(..._){n(d)?.apply(this,_)};var v=y(u),h=y(v);pe(h,()=>({"--size":"32px","--color":"#b0b0b0"})),ye(h.lastChild,{name:"add"});var p=L(h,2);lt(p,{children:(_,b)=>{var F=De("Add note");g(_,F)}});var m=L(v,2),T=y(m);pe(T,()=>({"--size":"16px","--color":"#b0b0b0"})),ye(T.lastChild,{name:"plus"}),xe(_=>at(u,"href",_),[()=>a(we.NewNote)]),g(t,c),ve()}st(["click"]);var Pu=x("<button><!></button>");function ta(t,e){fe(e,!0);let a=Ne(e,"type",3,"button"),r=!1,o=I(null);Oe(()=>{e.onRef&&e.onRef(n(o))});const s=d=>{(d.key==="Enter"||d.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=d=>{(d.pointerType==="mouse"&&d.button===0||d.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(d)};var c=Pu();c.__keydown=s,c.__click=i,c.__pointerdown=l,c.__touchstart=function(...d){e.onTouchStart?.apply(this,d)};var u=y(c);Ae(u,()=>e.children??je),Ye(c,d=>f(o,d),()=>n(o)),xe(()=>{at(c,"type",a()),c.disabled=e.disabled,$e(c,1,rt({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-pgzded")}),g(t,c),ve()}st(["keydown","click","pointerdown","touchstart"]);var Nu=x('<div class="b p-1pt17hy"> </div>'),Au=x('<div class="a p-1pt17hy"><input/> <!></div>');function hr(t,e){fe(e,!0);let a=Ne(e,"value",15,""),r=Ne(e,"error",3,""),o=Ne(e,"ref",15,null);var s=Au(),i=y(s);i.__input=function(...d){e.onInput?.apply(this,d)};let l;Ye(i,d=>o(d),()=>o());var c=L(i,2);{var u=d=>{var v=Nu(),h=y(v);xe(()=>ot(h,r())),g(d,v)};V(c,d=>{r()&&d(u)})}xe(()=>{at(i,"placeholder",e.placeholder),l=$e(i,1,"p-1pt17hy",null,l,{error:!!r()})}),rn("blur",i,function(...d){e.onBlur?.apply(this,d)}),rn("focus",i,function(...d){e.onFocus?.apply(this,d)}),Si(i,a),g(t,s),ve()}st(["input"]);var Mu=x('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Du=x('<form class="a p-y9ylet"><!></form>');function Iu(t,e){fe(e,!0);const{renameTag:a}=At(),{getSelectedTags:r,setSelectedTags:o}=Mn(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=_a(),{getFiltredNotes:c}=wa();let u=I(!1),d=I(!1),v,h=!1,p=I(null),m=I(it(e.tag)),T=e.nextFocusRef;Ce(()=>(n(p)&&n(p).focus(),()=>{v&&clearTimeout(v)}));const _=()=>{v=setTimeout(()=>{f(d,!0)},250)},b=()=>{f(u,!0)},F=async()=>{if(n(m).trim()===e.tag){b();return}if(n(m).trim()!=="")try{_();const R=r(),A=[...R].map(j=>j===e.tag?n(m).trim():j),M=new Set(s()),H=c(),X=M.size?[...M]:H.map(j=>j.id),{cancel:q}=await a(e.tag,n(m).trim(),X);l(),o(new Set(A)),ft("Tag renamed",{cancel:{nextFocusRef:T,onCancel:async()=>{await q(),o(R),i(M),setTimeout(()=>{const{prev:j}=gt(T);j?.focus()},16)}}}),h=!0}finally{f(u,!0)}},w=()=>{e.onClosed?.(h)},C=R=>{R.preventDefault(),F()};Tr(t,{get blocked(){return n(d)},get startClose(){return n(u)},onClosed:w,children:(R,A)=>{var M=Du(),H=y(M);{var X=j=>{ya(j,{})},q=j=>{var oe=Mu(),Z=D(oe),W=y(Z),re=L(Z,2);hr(re,{placeholder:"Enter new tag name",get ref(){return n(p)},set ref($){f(p,$,!0)},get value(){return n(m)},set value($){f(m,$,!0)}});var me=L(re,2),se=y(me);xt(se,{onClick:b,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:($,te)=>{var ie=De("Cancel");g($,ie)},$$slots:{default:!0}});var B=L(se,2);xt(B,{onClick:F,fullWidth:!0,withoutMinWidth:!0,children:($,te)=>{var ie=De("OK");g($,ie)},$$slots:{default:!0}}),xe(()=>ot(W,`Rename "${e.tag??""}" for selected notes`)),g(j,oe)};V(H,j=>{n(d)?j(X):j(q,!1)})}rn("submit",M,C),g(R,M)},$$slots:{default:!0}}),ve()}let Un=I(!1),na=I(!1),Ht=I(""),aa=I(0),rr=I(0),or=I(0),zr,Ur=()=>({bottom:0,right:0,height:0}),Wt=I(null),Oo=I(null);function Ru(t){if(n(Un)){f(na,!0),n(Ht)!==t.tag&&(zr=()=>{const a=t.getRect();f(Un,!0),f(Ht,t.tag,!0),f(aa,a.bottom,!0),f(rr,a.right,!0),f(or,a.height,!0),Ur=t.getRect,f(Wt,t.focusRef,!0)});return}const e=t.getRect();f(Un,!0),f(Ht,t.tag,!0),f(aa,e.bottom,!0),f(rr,e.right,!0),f(or,e.height,!0),Ur=t.getRect,f(Wt,t.focusRef,!0)}const Lu=()=>n(Un),Ou=()=>n(Oo);var Fu=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),zu=x('<li class="p-16hbyw2"><!></li>'),ju=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Bu=x('<li class="p-16hbyw2"><!></li>'),Hu=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),Uu=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),qu=x('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),Vu=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Wu=x("<!> <!>",1);function Ku(t,e){fe(e,!0);const{getScrollContainer:a}=ro(),{pinTag:r,getGetMapTags:o,deleteTag:s}=At(),{checkMobileSize:i}=Za(),{getSelectedTags:l,removeTag:c,setSelectedTags:u}=Mn(),{getSelectedNotes:d,setSelectedNotes:v,clearNotes:h}=_a(),{getFiltredNotes:p}=wa();let m=I(!1);Oe(()=>{n(Un),zt(()=>{f(m,o()().get(n(Ht))?.pinned||!1,!0)})});let T=I(!1);const _=()=>{r(n(Ht),!0),f(na,!0);let se=n(Wt),B=gt(se)?.next;ft("Tag pinned",{cancel:{nextFocusRef:B,onCancel:async()=>{r(n(Ht),!1),setTimeout(()=>{const{prev:$}=gt(B);$?.focus()},16)}}})},b=()=>{r(n(Ht),!1),f(na,!0);let se=n(Wt),B=gt(se)?.next;ft("Tag unpinned",{cancel:{nextFocusRef:B,onCancel:async()=>{r(n(Ht),!0),setTimeout(()=>{const{prev:$}=gt(B);$?.focus()},16)}}})},F=()=>{f(Un,!1),f(na,!1),f(aa,0),f(rr,0),f(or,0),Ur=()=>({bottom:0,right:0,height:0}),f(Wt,null),zr&&setTimeout(()=>{zr?.(),zr=void 0})};let w=N(()=>window.innerHeight-n(aa)<100?n(aa)-n(or)-98+"px":n(aa)+5+"px"),C=N(a);const R=se=>{se.key==="Tab"&&se.shiftKey&&(se.preventDefault(),n(Wt)?.focus())},A=se=>{se.key==="Tab"&&!se.shiftKey&&n(Wt)&&(se.preventDefault(),gt(n(Wt))?.next?.focus())};Ce(()=>{const se=B=>{B.key==="Escape"&&n(Un)&&n(Wt)?.focus()};return window.addEventListener("keydown",se),()=>{window.removeEventListener("keydown",se)}});const M=()=>{f(na,!0);let se=n(Wt),B=gt(se)?.next;Ia({title:`Are you sure to delete "${n(Ht)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const $=Array.from(n(q)),te=new Set(d()),ie=p(),ce=te.size?[...te]:ie.map(Ee=>Ee.id);n(q).has(n(Ht))&&(te.size===0||ie.length===te.size)&&c(n(Ht)),h();const{cancel:be}=await s(n(Ht),ce);ft("Tag deleted",{cancel:{nextFocusRef:B,onCancel:async()=>{await be(),u(new Set($)),v(new Set(te)),setTimeout(()=>{const{prev:Ee}=gt(B);Ee?.focus()},16)}}})},onCancel:async()=>{},onClosed:$=>{setTimeout(()=>{$||se?.focus()},16)}})};let H=()=>{};const X=()=>{f(na,!0),f(T,!0);let se=n(Wt);H=()=>{f(T,!1),setTimeout(()=>{se?.focus()},16)}};Oe(()=>{const se=()=>{const B=Ur();f(aa,B.bottom,!0),f(rr,B.right,!0),f(or,B.height,!0)};return n(C)?.addEventListener("scroll",se),window.addEventListener("resize",se),()=>{n(C)?.removeEventListener("scroll",se),window.removeEventListener("resize",se)}});let q=N(l),j=N(i);var oe=Wu(),Z=D(oe);{var W=se=>{var B=Vu(),$=D(B);pe($,()=>({"--left":n(rr)-36+"px","--top":n(w),"--transform-origin":"top left"})),xr($.lastChild,{get startClose(){return n(na)},onClosed:F,get isMobile(){return n(j)},get ref(){return n(Oo)},set ref(te){f(Oo,te,!0)},children:(te,ie)=>{var ce=qu(),be=D(ce);{var Ee=ne=>{var J=zu(),Q=y(J);Ve(Q,{onClick:_,onKeydown:R,get dialogMode(){return n(j)},children:(Se,de)=>{var S=Fu(),P=D(S);pe(P,()=>({"--size":"20px"})),ye(P.lastChild,{name:"pin"}),g(Se,S)},$$slots:{default:!0}}),g(ne,J)},E=ne=>{var J=Bu(),Q=y(J);Ve(Q,{onClick:b,onKeydown:R,get dialogMode(){return n(j)},children:(Se,de)=>{var S=ju(),P=D(S);pe(P,()=>({"--size":"20px"})),ye(P.lastChild,{name:"pin-cancel"}),g(Se,S)},$$slots:{default:!0}}),g(ne,J)};V(be,ne=>{n(m)?ne(E,!1):ne(Ee)})}var Y=L(be,2),he=y(Y);Ve(he,{onClick:X,get dialogMode(){return n(j)},children:(ne,J)=>{var Q=Hu(),Se=D(Q);pe(Se,()=>({"--size":"20px"})),ye(Se.lastChild,{name:"pen"}),g(ne,Q)},$$slots:{default:!0}});var Te=L(Y,2),Pe=y(Te);Ve(Pe,{onClick:M,onKeydown:A,dangerous:!0,get dialogMode(){return n(j)},children:(ne,J)=>{var Q=Uu(),Se=D(Q);pe(Se,()=>({"--size":"20px"})),ye(Se.lastChild,{name:"bin"}),g(ne,Q)},$$slots:{default:!0}}),g(te,ce)},$$slots:{default:!0}}),g(se,B)};V(Z,se=>{n(Un)&&se(W)})}var re=L(Z,2);{var me=se=>{{let B=N(()=>gt(n(Wt))?.next||null);Iu(se,{get tag(){return n(Ht)},get nextFocusRef(){return n(B)},onClosed:$=>{H($)}})}};V(re,se=>{n(T)&&se(me)})}g(t,oe),ve()}var Gu=x('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),Yu=x('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),Xu=x("<!> <span> </span> <!>",1),Ju=x('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function sr(t,e){fe(e,!0);let{getGetMapTags:a}=At(),r=I(null),o=N(Lu);const s=()=>{if(n(r)){const v=n(r).getBoundingClientRect();return{bottom:v.bottom,right:v.right,height:v.height}}return{bottom:0,right:0,height:0}},i=v=>{v.stopPropagation(),v.preventDefault(),Ru({tag:e.tag,getRect:s,focusRef:n(r)})},l=v=>{v.key==="Tab"&&!v.shiftKey&&n(o)&&(v.preventDefault(),Ou()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let c=N(()=>a()().get(e.tag)?.pinned||!1);var u=Ju(),d=y(u);pe(d,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),ta(d.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(v,h)=>{var p=Xu(),m=D(p);{var T=C=>{var R=Gu(),A=y(R);pe(A,()=>({"--size":"18px"})),ye(A.lastChild,{name:"pin"}),g(C,R)};V(m,C=>{n(c)&&C(T)})}var _=L(m,2),b=y(_),F=L(_,2);{var w=C=>{var R=Yu();R.__click=i,R.__keydown=l;var A=y(R),M=y(A);pe(M,()=>({"--size":"16px"})),ye(M.lastChild,{name:"menu"});var H=L(M,2);lt(H,{children:(X,q)=>{var j=De("Tag options");g(X,j)}}),Ye(R,X=>f(r,X),()=>n(r)),xe(()=>$e(R,1,rt({c:!0,d:e.type==="selected"}),"p-9jjlcl")),g(C,R)};V(F,C=>{e.hideMenu||C(w)})}xe(()=>ot(b,e.tag)),g(v,p)},$$slots:{default:!0}}),g(t,u),ve()}st(["click","keydown"]);var Zu=x('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function bs(t,e){fe(e,!0);let a=Ne(e,"mobile",3,!1);const{getGetMapTags:r}=At();let s=N(()=>{const p=r()();return[...e.tags].sort((m,T)=>p.get(m)?.pinned?-1:p.get(T)?.pinned?1:m.localeCompare(T))}),i=N(()=>n(s).filter(p=>r()().get(p)?.pinned)),l=N(()=>n(s).filter(p=>!r()().get(p)?.pinned));var c=Zu(),u=y(c),d=y(u);En(d,16,()=>n(i),p=>p,(p,m)=>{sr(p,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})});var v=L(d,2);En(v,17,()=>e.metaTags,p=>"meta"+p,(p,m)=>{sr(p,{hideMenu:!0,get tag(){return n(m)},onClick:()=>{e.handleMetaTagClick(n(m))}})});var h=L(v,2);En(h,16,()=>n(l),p=>p,(p,m)=>{sr(p,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})}),xe(()=>$e(u,1,rt({b:!0,c:a()}),"p-lawyrs")),g(t,c),ve()}var Qu=x('<div class="b c p-1i0uzbi"><div class="d p-1i0uzbi"><button class="e p-1i0uzbi"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),$u=x('<div class="a p-1i0uzbi"><!></div>');function Ss(t,e){fe(e,!0);let a=I(null);const r=c=>{f(a,c,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};Oe(()=>{n(a)&&n(a).focus()});var s=$u(),i=y(s);{var l=c=>{var u=Qu(),d=y(u),v=y(d);v.__click=o;var h=y(v);pe(h,()=>({"--size":"20px"})),ye(h.lastChild,{name:"close"});var p=L(h,2);lt(p,{children:(_,b)=>{var F=De("Clear");g(_,F)}});var m=L(d,2);En(m,19,()=>e.metaTags,_=>"meta_"+_,(_,b,F)=>{{let w=N(()=>n(F)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);sr(_,{hideMenu:!0,type:"selected",get tag(){return n(b)},onClick:()=>{e.handleMetaTagClick(n(b))},get onRef(){return n(w)}})}});var T=L(m,2);En(T,18,()=>e.selectedTags,_=>_,(_,b,F)=>{{let w=N(()=>n(F)===e.selectedTags.size-1?r:void 0);sr(_,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return b},onClick:()=>{e.handleSelectedTagClick(b)},get onRef(){return n(w)}})}}),g(c,u)};V(i,c=>{e.selectedTags.size+e.metaTags.size>0&&c(l)})}g(t,s),ve()}st(["click"]);const Fo=(t,e,a,r)=>{if(t.has(Ge.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},Pn=200,ef=t=>t<.5?2*t*t:-1+(4-2*t)*t,Ji=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,ef(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},tf=t=>{const{getIsKeyboardVisible:a}=Yd();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=v=>({x:v.clientX,y:v.clientY,time:performance.now()}),c=v=>{r=[l(v.touches[0])],o=!0},u=v=>{if(!o||s)return;r.push(l(v.touches[0]));const h=performance.now()-150;r=r.filter(M=>M.time>=h);const p=r.at(-1),m=r[0];if(!p||!m)return;const T=m.x,_=m.y,b=p.x,F=p.y,w=b-T,C=F-_,R=Math.abs(w)>Math.abs(C),A=Math.abs(w)>3;R&&A&&!a()&&(s=!0,v.preventDefault(),t([...r]),i())},d=()=>{i()};Ce(()=>(document.addEventListener("touchstart",c,{passive:!0}),document.addEventListener("touchmove",u,{passive:!1}),document.addEventListener("touchend",d,{passive:!0}),document.addEventListener("touchcancel",d,{passive:!0}),()=>{document.removeEventListener("touchstart",c),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",d),document.removeEventListener("touchcancel",d)}))},Cs=5,Ts=.6,Xn=.3;function Zi(t,e){fe(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,c=0,u=0,d=null,v=null;const h=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,c=0,u=0,d!==null&&(cancelAnimationFrame(d),d=null),v&&(clearTimeout(v),v=null)},p=()=>{e.onCancel(),h()},m=()=>{v&&clearTimeout(v),v=setTimeout(p,5e3)};tf(async A=>{if(!o)try{const M=A.at(-1);if(!M)throw new Error("No points available for swipe initialization");const H=await e.onInit();if(!H)return;s=H.initialPosition,i=H.currentPosition,l=H.minPosition,c=H.maxPosition,u=H.width,r=M.x,a=A,o=!0,m()}catch{h()}});const _=A=>Math.max(l,Math.min(c,A)),b=()=>{if(d=null,!o){h();return}const A=a.at(-1),M=a[0];if(!A||!M)return;let H=A.x-r;r=A.x;const X=_(i+H);X!==i&&(i=X,e.onUpdate({initialPosition:s,newPosition:X,width:u,minPosition:l,maxPosition:c}))},F=A=>{if(!o){h();return}a.push({x:A.touches[0].clientX,y:A.touches[0].clientY,time:performance.now()});const M=performance.now()-150;a=a.filter(j=>j.time>=M),d===null&&(d=requestAnimationFrame(b)),m();const H=A.touches[0].clientX-a[0].x,X=A.touches[0].clientY-a[0].y;Math.abs(H)>Math.abs(X)&&A.cancelable&&A.preventDefault()},w=A=>{const M=Math.abs(A);if(M>=Ts)return Cs;if(M>=Xn){const H=(M-Xn)/(Ts-Xn);return e.baseActionThreshold-H*(e.baseActionThreshold-Cs)}else return e.baseActionThreshold},C=A=>{if(!o){h();return}let M=0;a.push({x:A.changedTouches[0].clientX,y:A.changedTouches[0].clientY,time:performance.now()}),b(),d!==null&&(cancelAnimationFrame(d),d=null);const H=a[0],X=a[a.length-1],q=X.x-H.x,j=X.time-H.time;j>0&&(M=q/j);const oe=w(M);e.onFinish({swipeVelocity:M,currentPosition:i,minPosition:l,maxPosition:c,initialPosition:s,width:u,actionThreshold:oe}),h()},R=()=>{p()};Ce(()=>(document.addEventListener("touchmove",F,{passive:!1}),document.addEventListener("touchend",C,{passive:!0}),document.addEventListener("touchcancel",R,{passive:!0}),()=>{document.removeEventListener("touchmove",F),document.removeEventListener("touchend",C),document.removeEventListener("touchcancel",R),d!==null&&cancelAnimationFrame(d),v&&clearTimeout(v)})),ve()}function nf(t,e){fe(e,!0);const a=Dn();let r=Ne(e,"animationRef",7),o=Ne(e,"dialog",7);Zi(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const u=-e.dialogWidth*.7,d=0;let v=e.sidebarState==="closed"?u:d,h=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let T=()=>1;if(r().current){r().current.pause();let _=Number(r().current.currentTime);vr()&&(_=Number(_)+50,r().current.currentTime=Math.min(Math.max(Pn-1,_),_));const b=r().current.effect?.getComputedTiming().progress||0;T=()=>b,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(_=>requestAnimationFrame(_)),h=Math.abs(1-T())}h=e.sidebarState==="closed"?h:1-h,o().style.setProperty("--backdrop-bg",`${h*.1}`),o()&&!o().open&&(o().showModal(),vr()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=h*-25;const p=h*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let m=e.sidebarState==="closed"?u:d;return e.sidebarState==="opened"||e.sidebarState==="closed"||(m=p),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:v,currentPosition:m,minPosition:u,maxPosition:d,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:u,width:d})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const v=1-Math.abs(u/d)/7*10;o().style.transform=`translate3d(${u}px, 0, 0)`,a.swipingRatio=v*-25,o().style.setProperty("--backdrop-bg",`${v*.1}`)},onFinish:({swipeVelocity:u,currentPosition:d,initialPosition:v,width:h,actionThreshold:p})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let m="close";const T=Math.abs(d-v)/h*100/7*10;if(T===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(T===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?m=Math.abs(T)>p||u>Xn?"open":"close":e.sidebarState==="swipingClose"&&(m=Math.abs(T)>p&&u<=Xn||u<-Xn?"close":"open");let _=Ji(Math.abs(T)/100);e.sidebarState==="swipingClose"&&m==="close"&&(_=1-_);const b=(m==="open"?1-_:_)*Pn;a.duration=b/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${m==="open"?.1:0}`),m==="open"?e.onOpen():m==="close"&&e.onClose()}}),ve()}var af=x("<dialog><div><!> <!></div></dialog> <!> <!>",1);function rf(t,e){fe(e,!0);const{getSidebarState:a,setSidebarState:r}=Cr();let o=I(0);Ce(()=>{const W=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",W),W(),()=>{window.removeEventListener("resize",W)}});const s=Dn(),{isScrolling:i}=Jo();let l=I(null),c=I(null),u={},d=N(a);const v=()=>{e.blocked||r("closing")},h=W=>{r(W==="open"?"swipingOpen":"swipingClose")},p=()=>{r("opened")},m=()=>{r("preOpening")},T=()=>{n(l)?.close(),r("closed")},_=W=>{W.preventDefault(),v()};Ce(()=>(n(l)?.addEventListener("close",T),n(l)?.addEventListener("cancel",_),()=>{n(l)?.removeEventListener("close",T),n(l)?.removeEventListener("cancel",_)}));const b=N(i);let F=N(()=>s.working);const w=W=>{W?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=Yn().duration};Oe(()=>{n(d)==="opening"?zt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const W=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const re=n(l)?.animate([{transform:W},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||Pn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});u.current=re,re&&(re.onfinish=()=>{p(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=Yn().duration,re.cancel(),u.current=void 0})})}):n(d)==="closing"&&zt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const W=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const re=n(l)?.animate([{transform:W},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||Pn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});u.current=re,re&&(re.onfinish=()=>{T(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=Yn().duration,re.cancel(),u.current=void 0})})})}),Oe(()=>{n(d)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),vr()&&n(l)?.getBoundingClientRect()),r("opening"))}),Ce(()=>{n(d)==="opened"&&r("preOpening")});var C=af(),R=D(C),A=y(R),M=y(A);Ae(M,()=>e.children);var H=L(M,2);{var X=W=>{Qo(W,{})};V(H,W=>{n(d)==="opened"&&W(X)})}Ye(A,W=>f(c,W),()=>n(c)),Ye(R,W=>f(l,W),()=>n(l));var q=L(R,2);{var j=W=>{$o(W,{get dialog(){return n(l)},get dialogInner(){return n(c)},onClose:v})};V(q,W=>{n(c)&&n(d)==="opened"&&!e.blocked&&W(j)})}var oe=L(q,2);{var Z=W=>{nf(W,{onCancelSwipe:w,onOpen:m,onClose:v,onSwipe:h,get dialogWidth(){return n(o)},get animationRef(){return u},get dialog(){return n(l)},get sidebarState(){return n(d)}})};V(oe,W=>{!n(b)&&!e.blocked&&W(Z)})}xe(()=>{$e(R,1,rt({a:!0,b:n(F),c:n(d)==="opened"||n(d)==="opening"||n(d)==="closing"||n(d)==="swipingClose",d:n(d)==="opened"||n(d)==="opening"||n(d)==="swipingOpen"}),"p-1gucilc"),$e(A,1,rt({e:!0,f:n(d)==="swipingOpen",g:n(d)!=="opened"}),"p-1gucilc")}),g(t,C),ve()}var of=x('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),sf=x('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function lf(t,e){fe(e,!0);const{checkMobileSize:a}=Za(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=Cr(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:c}=Vt(),{getTagsSearch:u,setTagsSearch:d}=td(),{getSelectedTags:v,addTag:h,removeTag:p,clearTags:m}=Mn(),{getSelectedMetaTags:T,addMetaTag:_,removeMetaTag:b,clearSelectedMetaTags:F}=ao();let w=N(v),C=N(T);const{getGetNotes:R,checkNotesInArchive:A,checkNotesInBin:M}=At(),H=N(R),X=E=>{h(E)},q=E=>{_(E)},j=E=>{p(E)},oe=E=>{b(E)};let Z=N(()=>n(w).size===0&&!n(C).has(Ge.INBOX)&&(n(H)()||[]).some(E=>(!n(C).has(Ge.ARCHIVED)&&!n(C).has(Ge.BIN)&&E?.data&&!E.data.deletedAt&&!E.data.archivedAt||n(C).has(Ge.ARCHIVED)&&E?.data&&!E.data.deletedAt&&E.data.archivedAt||n(C).has(Ge.BIN)&&E?.data&&E.data.deletedAt)&&E?.data?.tags.length===0)),W=N(()=>Fo(n(C),n(w),n(H)()||[],E=>!(E?.data&&(E.data.deletedAt||E.data.archivedAt)&&!n(C).has(Ge.ARCHIVED)&&!n(C).has(Ge.BIN)||E?.data&&(E.data.deletedAt||!E.data.archivedAt)&&n(C).has(Ge.ARCHIVED)||E?.data&&!E.data.deletedAt&&n(C).has(Ge.BIN)))),re=N(()=>n(W).filter(E=>u()===""||E.toLowerCase().indexOf(u().toLowerCase())!==-1)),me=N(a);const{checkExistedDialog:se}=en();let B=N(()=>i().length>0||se());const $=()=>{if(n(me)){if(n(B))return;o()==="opened"?r():o()==="closed"&&s()}};Ce(()=>gr({key:"b",meta:!0,action:$})),Ce(()=>gr({key:"b",ctrl:!0,action:$}));let te=N(()=>[...n(Z)&&n(C).size===0?[Ge.INBOX]:[],...n(C).size===0?[...A()&&n(w).size===0?[Ge.ARCHIVED]:[],...M()&&n(w).size===0?[Ge.BIN]:[]]:[]].filter(E=>u()===""||E.toLowerCase().indexOf(u().toLowerCase())!==-1).sort((E,Y)=>E===Ge.INBOX?-1:Y===Ge.INBOX?1:E.localeCompare(Y)));var ie=ue(),ce=D(ie);{var be=E=>{rf(E,{get blocked(){return n(B)},children:(Y,he)=>{var Te=of(),Pe=D(Te),ne=y(Pe),J=y(ne);Xi(J,{});var Q=L(J,2),Se=y(Q),de=N(()=>c(we.Settings));Se.__click=function(...ee){n(de)?.apply(this,ee)};var S=y(Se);pe(S,()=>({"--size":"24px"})),ye(S.lastChild,{name:"settings"});var P=L(S,2);lt(P,{children:(ee,le)=>{var ke=De("Settings");g(ee,ke)}});var k=L(Se,2),z=N(()=>c(we.Sync));k.__click=function(...ee){n(z)?.apply(this,ee)};var K=y(k);pe(K,()=>({"--size":"24px"})),ye(K.lastChild,{name:"sync"});var U=L(K,2);lt(U,{children:(ee,le)=>{var ke=De("Sync");g(ee,ke)}});var ge=L(ne,2),_e=y(ge);{let ee=N(u);Po(_e,{placeholder:"Search tag",get value(){return n(ee)},onChange:le=>{d(le)}})}var ae=L(ge,2);{let ee=N(()=>n(C).has(Ge.BIN));Ss(ae,{get clearTags(){return m},get clearMetaTags(){return F},get hideTagMenu(){return n(ee)},handleMetaTagClick:oe,get metaTags(){return n(C)},get selectedTags(){return n(w)},handleSelectedTagClick:j})}var G=L(Pe,2);{let ee=N(()=>n(C).has(Ge.BIN));bs(G,{get hideTagMenu(){return n(ee)},get metaTags(){return n(te)},get tags(){return n(re)},handleMetaTagClick:q,handleTagClick:X,mobile:!0})}xe((ee,le)=>{at(Se,"href",ee),at(k,"href",le)},[()=>l(we.Settings),()=>l(we.Sync)]),g(Y,Te)},$$slots:{default:!0}})},Ee=E=>{var Y=sf(),he=y(Y),Te=y(he);{let Se=N(u);Po(Te,{placeholder:"Search tag",get value(){return n(Se)},onChange:de=>{d(de)}})}var Pe=L(he,2),ne=y(Pe),J=y(ne);{let Se=N(()=>n(C).has(Ge.BIN));Ss(J,{get metaTags(){return n(C)},get clearTags(){return m},get clearMetaTags(){return F},get hideTagMenu(){return n(Se)},get selectedTags(){return n(w)},handleMetaTagClick:oe,handleSelectedTagClick:j})}var Q=L(ne,2);{let Se=N(()=>n(C).has(Ge.BIN));bs(Q,{get metaTags(){return n(te)},get hideTagMenu(){return n(Se)},get tags(){return n(re)},handleMetaTagClick:q,handleTagClick:X})}g(E,Y)};V(ce,E=>{n(me)?E(be):E(Ee,!1)})}g(t,ie),ve()}st(["click"]);var cf=x('<button class="a p-11odwi4"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function df(t,e){fe(e,!0);let a=Ne(e,"ref",15);var r=cf();r.__click=function(...i){e.onClick?.apply(this,i)};var o=y(r);pe(o,()=>({"--rotate":"-90deg"})),ye(o.lastChild,{name:"menu"});var s=L(o,2);lt(s,{children:(i,l)=>{var c=De();xe(()=>ot(c,e.title)),g(i,c)}}),Ye(r,i=>a(i),()=>a()),g(t,r),ve()}st(["click"]);const uf=t=>{try{new URL(t)}catch{return!1}return!0};var ff=x('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),vf=x('<form class="a p-y9ylet"><!></form>');function gf(t,e){fe(e,!0);const{addTag:a}=At(),{getSelectedTags:r}=Mn(),{getSelectedNotes:o}=_a(),{getFiltredNotes:s}=wa();let i=I(!1),l=I(!1),c,u=!1,d=I(null),v=I(""),h=e.nextFocusRef;Ce(()=>(n(d)&&n(d).focus(),()=>{c&&clearTimeout(c)}));const p=()=>{c=setTimeout(()=>{f(l,!0)},250)},m=()=>{f(i,!0)},T=async()=>{if(r().has(n(v).trim())){m();return}if(n(v).trim()!=="")try{p();const w=new Set(o()),C=w.size?[...w]:s().map(A=>A.id),{cancel:R}=await a(n(v).trim(),C);ft("Tag added",{cancel:{nextFocusRef:h,onCancel:async()=>{await R(),setTimeout(()=>{const{prev:A}=gt(h);A?.focus()},16)}}}),u=!0}finally{f(i,!0)}},_=()=>{e.onClosed?.(u)},b=F=>{F.preventDefault(),T()};Tr(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:_,children:(F,w)=>{var C=vf(),R=y(C);{var A=H=>{ya(H,{})},M=H=>{var X=ff(),q=L(D(X),2);hr(q,{placeholder:"Enter new tag name",get ref(){return n(d)},set ref(W){f(d,W,!0)},get value(){return n(v)},set value(W){f(v,W,!0)}});var j=L(q,2),oe=y(j);xt(oe,{onClick:m,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(W,re)=>{var me=De("Cancel");g(W,me)},$$slots:{default:!0}});var Z=L(oe,2);xt(Z,{onClick:T,fullWidth:!0,withoutMinWidth:!0,children:(W,re)=>{var me=De("OK");g(W,me)},$$slots:{default:!0}}),g(H,X)};V(R,H=>{n(l)?H(A):H(M,!1)})}rn("submit",C,b),g(F,C)},$$slots:{default:!0}}),ve()}var hf=x('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),pf=x('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),mf=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),_f=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),wf=x("<div><!></div>"),yf=x('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),bf=x('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!> <!> <!></div> <!></div>');function Qi(t,e){fe(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=At(),{getSelectedTags:s}=Mn();let i=I(null),l=I(""),c=I(null);const u=N(a);let d=Ne(e,"shownTagInput",15);const v=()=>n(u)?e.mode==="exit"?Fo(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let p=N(()=>{const B=s(),$=new Set(Fo(new Set,new Set(e.selectedTags.length>0?e.selectedTags:B),o()()||[]));return v().filter(ie=>e.selectedTags.some(ce=>ie===ce)?!1:n(l)===""||ie.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((ie,ce)=>B.has(ie)&&B.has(ce)?ie.localeCompare(ce):B.has(ie)?-1:B.has(ce)?1:$.has(ie)&&$.has(ce)?ie.localeCompare(ce):$.has(ie)?-1:$.has(ce)?1:0)});const m=B=>{if(!e.selectedTags.includes(B)){if(e.mode!=="exit"||n(p).includes(B)){e.onChangeTags([...e.selectedTags,B]),f(l,"");return}n(i)?.focus()}},T=B=>{const $=e.selectedTags.filter(te=>te!==B);e.onRejectedTag&&e.onRejectedTag(B),$.length===0?e.onChangeTags([]):e.onChangeTags($)},_=B=>{B.preventDefault(),n(l)!==""?m(n(l)):d(!1)};Oe(()=>{n(i)&&d()&&n(i).focus(),d()||f(l,"")});const b=B=>{B.preventDefault()},F=B=>{B.preventDefault(),B.stopPropagation(),B.stopImmediatePropagation()};var w=bf(),C=y(w),R=y(C);En(R,17,()=>e.selectedTags,B=>B+"-tags_selected",(B,$)=>{ta(B,{onPointerDown:b,onTouchStart:F,onClick:()=>{T(n($))},type:"button",style:"selected",children:(te,ie)=>{var ce=De();xe(()=>ot(ce,n($))),g(te,ce)},$$slots:{default:!0}})});var A=L(R,2);{var M=B=>{var $=ue(),te=D($);En(te,17,()=>n(p).filter(ie=>ie.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),ie=>ie+"-tags_suggested",(ie,ce)=>{ta(ie,{onPointerDown:b,onTouchStart:F,onClick:()=>{m(n(ce))},children:(be,Ee)=>{var E=De();xe(()=>ot(E,n(ce))),g(be,E)},$$slots:{default:!0}})}),g(B,$)};V(A,B=>{d()&&B(M)})}var H=L(A,2);{var X=B=>{ta(B,{onPointerDown:b,onTouchStart:F,onClick:()=>{m(n(l)),f(l,"")},children:($,te)=>{var ie=De();xe(()=>ot(ie,n(l))),g($,ie)},$$slots:{default:!0}})};V(H,B=>{n(l)!==""&&(e.mode!=="exit"||n(p).find($=>$.toLowerCase()===n(l).toLowerCase()))&&B(X)})}var q=L(H,2);{var j=B=>{ta(B,{mode:"empty",onPointerDown:b,onTouchStart:F,onClick:()=>{d(!0)},children:($,te)=>{var ie=hf(),ce=y(ie);pe(ce,()=>({"--size":"12px"})),ye(ce.lastChild,{name:"plus"});var be=L(ce,2);lt(be,{children:(Ee,E)=>{var Y=De("add tag");g(Ee,Y)}}),g($,ie)},$$slots:{default:!0}})};V(q,B=>{d()||B(j)})}var oe=L(q,2);{var Z=B=>{ta(B,{mode:"empty",onPointerDown:b,onTouchStart:F,get onClick(){return e.onUsePreviousTags},children:($,te)=>{var ie=pf(),ce=y(ie);pe(ce,()=>({"--size":"12px"})),ye(ce.lastChild,{name:"back"});var be=L(ce,2);lt(be,{children:(Ee,E)=>{var Y=De("use previous tags");g(Ee,Y)}}),g($,ie)},$$slots:{default:!0}})};V(oe,B=>{e.previousTagsEnabled&&e.onUsePreviousTags&&B(Z)})}var W=L(oe,2);{var re=B=>{ta(B,{mode:"empty",onPointerDown:b,onTouchStart:F,get onClick(){return e.onGenTags},get disabled(){return e.generatingTags},children:($,te)=>{var ie=wf(),ce=y(ie);{var be=E=>{var Y=mf(),he=D(Y);pe(he,()=>({"--size":"12px"})),ya(he.lastChild,{}),g(E,Y)},Ee=E=>{var Y=_f(),he=D(Y);pe(he,()=>({"--size":"12px","--rotate":"180deg"})),ye(he.lastChild,{name:"stars"});var Te=L(he,2);lt(Te,{children:(Pe,ne)=>{var J=De("gen tags");g(Pe,J)}}),g(E,Y)};V(ce,E=>{e.generatingTags?E(be):E(Ee,!1)})}g($,ie)},$$slots:{default:!0}})};V(W,B=>{e.genTagsEnabled&&e.onGenTags&&B(re)})}var me=L(C,2);{var se=B=>{var $=yf(),te=y($),ie=y(te);hr(ie,{placeholder:"tag",get ref(){return n(i)},set ref(be){f(i,be,!0)},get value(){return n(l)},set value(be){f(l,be,!0)}});var ce=L(te,2);ce.__pointerdown=b,ce.__touchstart=F,ce.__click=()=>{n(i)?.blur(),n(l)!==""&&m(n(l)),d(!1),f(l,"")},rn("submit",$,_),g(B,$)};V(me,B=>{d()&&B(se)})}Ye(w,B=>f(c,B),()=>n(c)),g(t,w),ve()}st(["pointerdown","touchstart","click"]);var Sf=x('<div class="c p-y9ylet"><!> <!></div>'),Cf=x('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),Tf=x('<form class="a p-y9ylet"><!></form>');function xf(t,e){fe(e,!0);const{changeTags:a,getNoteById:r}=At(),{getSelectedTags:o}=Mn(),{getSelectedNotes:s}=_a(),{getFiltredNotes:i}=wa();let l=I(!1),c=I(!1),u,d=!1,v=I(!1),h=e.nextFocusRef,m=(()=>{const M=[...o()],H=s();if(H.size===0)return M;const X=Array.from(H);let q=new Set(r(X[0])?.data.tags||[]);for(let j=1;j<X.length;j++){const oe=new Set(r(X[j])?.data.tags||[]),Z=new Set([]);oe.forEach(W=>{q.has(W)&&Z.add(W)}),q=Z}return Array.from(q)})(),T=I(it(m));Ce(()=>()=>{u&&clearTimeout(u)});const _=()=>{u=setTimeout(()=>{f(c,!0)},250)},b=()=>{f(l,!0)},F=async()=>{const M=m,H=new Set(s()),X=H.size?[...H]:i().map(q=>q.id);try{_();const{cancel:q}=await a([...M],n(T),X);ft("Tags changed",{cancel:{nextFocusRef:h,onCancel:async()=>{await q(),setTimeout(()=>{const{prev:j}=gt(h);j?.focus()},16)}}}),d=!0}finally{f(l,!0)}},w=M=>{M.key==="Escape"&&n(v)&&(f(v,!1),M.preventDefault(),M.stopPropagation())};Ce(()=>(document.addEventListener("keydown",w),()=>document.removeEventListener("keydown",w)));const C=()=>{e.onClosed?.(d)},R=M=>{f(T,M,!0)},A=M=>{M.preventDefault(),F()};Tr(t,{get blocked(){return n(c)},get startClose(){return n(l)},onClosed:C,children:(M,H)=>{var X=Tf(),q=y(X);{var j=Z=>{ya(Z,{})},oe=Z=>{var W=Cf(),re=L(D(W),2);Qi(re,{get selectedTags(){return n(T)},onChangeTags:R,get shownTagInput(){return n(v)},set shownTagInput(B){f(v,B,!0)}});var me=L(re,2);{var se=B=>{var $=Sf(),te=y($);xt(te,{onClick:b,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(ce,be)=>{var Ee=De("Cancel");g(ce,Ee)},$$slots:{default:!0}});var ie=L(te,2);xt(ie,{onClick:F,fullWidth:!0,withoutMinWidth:!0,children:(ce,be)=>{var Ee=De("OK");g(ce,Ee)},$$slots:{default:!0}}),g(B,$)};V(me,B=>{n(v)||B(se)})}g(Z,W)};V(q,Z=>{n(c)?Z(j):Z(oe,!1)})}rn("submit",X,A),g(M,X)},$$slots:{default:!0}}),ve()}var kf=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),Ef=x('<li class="p-antir2"><!></li>'),Pf=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select mode',1),Nf=x('<li class="p-antir2"><!></li>'),Af=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),Mf=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),Df=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),If=x('<li class="p-antir2"><!></li>'),Rf=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),Lf=x('<li class="p-antir2"><!></li>'),Of=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),Ff=x('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <li class="p-antir2"><!></li>',1),zf=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),jf=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),Bf=x('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),Hf=x("<!> <!> <!> <!>",1),Uf=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),qf=x('<div class="a p-antir2"><!></div> <!> <!> <!>',1);function Vf(t,e){fe(e,!0);const{getSelectedTags:a,setSelectedTags:r,clearTags:o}=Mn(),{moveNotesToBin:s,moveNotesToArchive:i,moveNotesFromArchive:l,restoreNotesFromBin:c,deleteNotes:u}=At(),{getFiltredNotes:d}=wa(),{getMode:v,changeMode:h,getSelectedNotes:p,setSelectedNotes:m,clearNotes:T}=_a();let _=N(a),b=I(!1),F=I(!1),w=I(!1),C=I(!1),R=I(null),A=I(null);const M=()=>{n(b)||f(b,!0)},H=()=>{f(b,!1),f(F,!1)};Oe(()=>{!n(b)&&!n(w)&&!n(C)&&f(R,gt(n(A)).next,!0)}),Ce(()=>{const ne=J=>{J.key==="Escape"&&n(b)&&n(A)?.focus()};return window.addEventListener("keydown",ne),()=>{window.removeEventListener("keydown",ne)}});let X=()=>{};const q=()=>{f(F,!0),f(w,!0);let ne=n(A);X=()=>{f(w,!1),setTimeout(()=>{ne?.focus()},16)}};let j=()=>{};const oe=()=>{f(F,!0),f(C,!0);let ne=n(A);j=()=>{f(C,!1),setTimeout(()=>{ne?.focus()},16)}},Z=async()=>{const ne=Array.from(n(_)),J=new Set(p()),Q=J.size?[...J]:d().map(de=>de.id),{cancel:Se}=await s({noteIds:Q});o(),T(),ft("Notes moved to bin",{cancel:{nextFocusRef:n(R),onCancel:async()=>{await Se(),r(new Set(ne)),m(J),setTimeout(()=>{const{prev:de}=gt(n(R));de?.focus()},16)}}}),f(F,!0)},W=async()=>{const ne=Array.from(n(_)),J=new Set(p()),Q=J.size?[...J]:d().map(de=>de.id),{cancel:Se}=await i({noteIds:Q});o(),T(),ft("Notes moved to archive",{cancel:{nextFocusRef:n(R),onCancel:async()=>{await Se(),r(new Set(ne)),m(J),setTimeout(()=>{const{prev:de}=gt(n(R));de?.focus()},16)}}}),f(F,!0)},re=async()=>{const ne=Array.from(n(_)),J=new Set(p()),Q=J.size?[...J]:d().map(de=>de.id),{cancel:Se}=await l({noteIds:Q});o(),T(),ft("Notes moved from archive",{cancel:{nextFocusRef:n(R),onCancel:async()=>{await Se(),r(new Set(ne)),m(J),setTimeout(()=>{const{prev:de}=gt(n(R));de?.focus()},16)}}}),f(F,!0)},me=async()=>{const ne=Array.from(n(_)),J=new Set(p()),Q=J.size?[...J]:d().map(de=>de.id),{cancel:Se}=await c({noteIds:Q});o(),T(),ft("Notes restored",{cancel:{nextFocusRef:n(R),onCancel:async()=>{await Se(),r(new Set(ne)),m(J),setTimeout(()=>{const{prev:de}=gt(n(R));de?.focus()},16)}}}),f(F,!0)},se=()=>{const ne=new Set(p()),J=ne.size?[...ne]:d().map(Q=>Q.id);f(F,!0),Ia({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{f(F,!0),o(),T(),await u({noteIds:J})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(A)?.focus()},16)}})},B=()=>{const ne=d(),J=Array.from(p()),Q=[];for(const de of ne)de.data&&de.data?.link&&uf(de.data?.link.url)&&(J.includes(de.id)||J.length===0)&&Q.push(de.data?.link.url);const Se=()=>{for(const de of Q)if(!window.open(de,"_blank")){Ia({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(A)?.focus()},16)}});break}};Q.length<=10?Se():Ia({title:`Are you sure to open ${Q.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{Se()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(A)?.focus()},16)}}),f(F,!0)};let $=N(()=>v()==="multiple"),te=Va||fr;var ie=qf(),ce=D(ie),be=y(ce);df(be,{title:"notes menu",onClick:M,get ref(){return n(A)},set ref(ne){f(A,ne,!0)}});var Ee=L(ce,2);{var E=ne=>{var J=Uf(),Q=D(J);pe(Q,()=>({"--right":"0","--top":"44px"})),xr(Q.lastChild,{get startClose(){return n(F)},onClosed:H,get isMobile(){return te},children:(Se,de)=>{var S=Hf(),P=D(S);{var k=G=>{var ee=Ef(),le=y(ee);Ve(le,{onClick:B,get dialogMode(){return te},children:(ke,Be)=>{var Xe=kf(),Je=D(Xe);pe(Je,()=>({"--size":"20px"})),ye(Je.lastChild,{name:"open"}),g(ke,Xe)},$$slots:{default:!0}}),g(G,ee)};V(P,G=>{Va||fr||G(k)})}var z=L(P,2);{var K=G=>{var ee=Nf(),le=y(ee);Ve(le,{onClick:()=>{f(F,!0),h("multiple")},get dialogMode(){return te},children:(ke,Be)=>{var Xe=Pf(),Je=D(Xe);pe(Je,()=>({"--size":"20px"})),ye(Je.lastChild,{name:"check"}),g(ke,Xe)},$$slots:{default:!0}}),g(G,ee)};V(z,G=>{n($)||G(K)})}var U=L(z,2);{var ge=G=>{var ee=Ff(),le=D(ee),ke=y(le);Ve(ke,{onClick:q,get dialogMode(){return te},children:(Re,tt)=>{var Ze=Af(),qe=D(Ze);pe(qe,()=>({"--size":"20px","--rotate":"45deg"})),ye(qe.lastChild,{name:"close"}),g(Re,Ze)},$$slots:{default:!0}});var Be=L(le,2),Xe=y(Be);Ve(Xe,{onClick:oe,get dialogMode(){return te},children:(Re,tt)=>{var Ze=Mf(),qe=D(Ze);pe(qe,()=>({"--size":"20px"})),ye(qe.lastChild,{name:"pen"}),g(Re,Ze)},$$slots:{default:!0}});var Je=L(Be,2);{var et=Re=>{var tt=If(),Ze=y(tt);Ve(Ze,{onClick:W,get dialogMode(){return te},children:(qe,Mt)=>{var Dt=Df(),Et=D(Dt);pe(Et,()=>({"--size":"20px"})),ye(Et.lastChild,{name:"archive"}),g(qe,Dt)},$$slots:{default:!0}}),g(Re,tt)},ze=Re=>{var tt=Lf(),Ze=y(tt);Ve(Ze,{onClick:re,get dialogMode(){return te},children:(qe,Mt)=>{var Dt=Rf(),Et=D(Dt);pe(Et,()=>({"--size":"20px"})),ye(Et.lastChild,{name:"archive-cancel"}),g(qe,Dt)},$$slots:{default:!0}}),g(Re,tt)};V(Je,Re=>{e.mode==="notes"?Re(et):Re(ze,!1)})}var Fe=L(Je,2),We=y(Fe);Ve(We,{onClick:Z,get dialogMode(){return te},dangerous:!0,children:(Re,tt)=>{var Ze=Of(),qe=D(Ze);pe(qe,()=>({"--size":"20px"})),ye(qe.lastChild,{name:"bin"}),g(Re,Ze)},$$slots:{default:!0}}),g(G,ee)};V(U,G=>{(e.mode==="notes"||e.mode==="archive")&&G(ge)})}var _e=L(U,2);{var ae=G=>{var ee=Bf(),le=D(ee),ke=y(le);Ve(ke,{onClick:me,get dialogMode(){return te},children:(Je,et)=>{var ze=zf(),Fe=D(ze);pe(Fe,()=>({"--size":"20px"})),ye(Fe.lastChild,{name:"bin-cancel"}),g(Je,ze)},$$slots:{default:!0}});var Be=L(le,2),Xe=y(Be);Ve(Xe,{onClick:se,get dialogMode(){return te},dangerous:!0,children:(Je,et)=>{var ze=jf(),Fe=D(ze);pe(Fe,()=>({"--size":"20px"})),ye(Fe.lastChild,{name:"bin"}),g(Je,ze)},$$slots:{default:!0}}),g(G,ee)};V(_e,G=>{e.mode==="bin"&&G(ae)})}g(Se,S)},$$slots:{default:!0}}),g(ne,J)};V(Ee,ne=>{n(b)&&ne(E)})}var Y=L(Ee,2);{var he=ne=>{gf(ne,{get nextFocusRef(){return n(R)},onClosed:J=>{X(J)}})};V(Y,ne=>{n(w)&&ne(he)})}var Te=L(Y,2);{var Pe=ne=>{xf(ne,{get nextFocusRef(){return n(R)},onClosed:J=>{j(J)}})};V(Te,ne=>{n(C)&&ne(Pe)})}g(t,ie),ve()}var Wf=x('<label class="a p-uuy4jt"><input class="b p-uuy4jt" type="checkbox"/> <span class="c p-uuy4jt"><span class="d p-uuy4jt"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></span> <!></label>');function $i(t,e){fe(e,!0);const a=()=>{e.onChange(!e.checked)};var r=Wf(),o=y(r);o.__change=a;var s=L(o,2),i=y(s),l=y(i);pe(l,()=>({"--size":"16px"})),ye(l.lastChild,{name:"check"});var c=L(s,2);lt(c,{children:(u,d)=>{var v=De("Toggle switch");g(u,v)}}),xe(()=>qc(o,e.checked)),g(t,r),ve()}st(["change"]);var Kf=x('<div class="g e p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),Gf=x('<div class="g p-1336jx2"><button class="d p-1336jx2" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),Yf=x('<a class="i j p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Xf=x('<div class="h p-1336jx2"><!> <!></div>'),Jf=x('<!> <div class="p p-1336jx2"><!></div>',1),Zf=x('<div class="r p-1336jx2"><div class="s p-1336jx2"><!> <span> </span></div> <button class="t p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),Qf=x('<div class="a p-1336jx2"><div class="b p-1336jx2"><div class="c p-1336jx2"><a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-1336jx2"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-1336jx2"><!></div> <div class="f p-1336jx2"><!></div></div> <div class="k p-1336jx2"><div class="l p-1336jx2"><!></div> <div class="m p-1336jx2"><div class="n p-1336jx2"><div class="o p-1336jx2"><!></div> <!></div> <div class="q p-1336jx2"><!></div></div></div></div>');function $f(t,e){fe(e,!0);const{getFeedSearch:a,setFeedSearch:r}=Go(),{getScrollContainer:o}=ro();let s=N(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:c,checkNotes:u}=At(),{replaceSearchParams:d}=jt(),{createDialogPageHref:v,createHandleClickDialogPage:h,getDialogPages:p}=Vt(),{checkExistedDialog:m}=en(),{getMode:T,clearNotes:_,setSelectedNotes:b,getSelectedNotes:F,changeMode:w}=_a(),{checkMobileSize:C}=Za(),{getFiltredNotes:R}=wa(),{getSelectedMetaTags:A}=ao();let M=N(A),H=I(null);const X=N(l);let j=N(()=>{const ae=R()||[],G=F();return ae.every(ee=>G.has(ee.id))});const oe=()=>{n(s)&&n(s).scrollTo({top:0})},Z=()=>{Ia({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),d("")},onCancel:async()=>{}})},W=()=>{p().length===0&&!m()&&n(H)?.focus()};Ce(()=>gr({key:"k",meta:!0,action:W})),Ce(()=>gr({key:"k",ctrl:!0,action:W})),Oe(()=>{const ae=R()||[];zt(()=>{const G=F();b(new Set(ae.filter(ee=>G.has(ee.id)).map(ee=>ee.id)))})});let re=N(()=>n(M).has(Ge.ARCHIVED)?"archive":n(M).has(Ge.BIN)?"bin":"notes");var me=Qf(),se=y(me),B=y(se),$=y(B),te=N(()=>h(we.Settings));$.__click=function(...ae){n(te)?.apply(this,ae)};var ie=y($);pe(ie,()=>({"--rotate":"30deg","--size":"20px"})),ye(ie.lastChild,{name:"settings"});var ce=L($,2),be=N(()=>h(we.Sync));ce.__click=function(...ae){n(be)?.apply(this,ae)};var Ee=y(ce);pe(Ee,()=>({"--size":"20px"})),ye(Ee.lastChild,{name:"sync"});var E=L(B,2),Y=y(E);Xi(Y,{});var he=L(E,2),Te=y(he);{var Pe=ae=>{var G=ue(),ee=D(G);{var le=ke=>{var Be=ue(),Xe=D(Be);{var Je=ze=>{var Fe=Kf(),We=y(Fe);We.__click=Z;var Re=y(We);pe(Re,()=>({"--scale":"1.2","--size":"20px"})),ye(Re.lastChild,{name:"clear"});var tt=L(Re);lt(tt,{children:(Ze,qe)=>{var Mt=De("Empty bin");g(Ze,Mt)}}),g(ze,Fe)},et=ze=>{var Fe=Gf(),We=y(Fe);We.__click=Z;var Re=y(We);pe(Re,()=>({"--scale":"0.9","--size":"20px"})),ye(Re.lastChild,{name:"clear"}),g(ze,Fe)};V(Xe,ze=>{C()?ze(Je):ze(et,!1)})}g(ke,Be)};V(ee,ke=>{n(X)&&ke(le)})}g(ae,G)},ne=ae=>{var G=ue(),ee=D(G);{var le=ke=>{var Be=Xf(),Xe=y(Be);{var Je=ze=>{var Fe=Yf();Fe.__click=function(...tt){e.onOpenWindow?.apply(this,tt)};var We=y(Fe);pe(We,()=>({"--scale":"0.7","--size":"32px"})),ye(We.lastChild,{name:"open-window"});var Re=L(We,2);lt(Re,{children:(tt,Ze)=>{var qe=De("open window");g(tt,qe)}}),xe(()=>at(Fe,"href",e.openWindowHref)),g(ze,Fe)};V(Xe,ze=>{e.onOpenWindow&&ze(Je)})}var et=L(Xe,2);Eu(et,{}),g(ke,Be)};V(ee,ke=>{n(re)==="notes"&&ke(le)},!0)}g(ae,G)};V(Te,ae=>{n(re)==="bin"?ae(Pe):ae(ne,!1)})}var J=L(se,2),Q=y(J),Se=y(Q);lf(Se,{});var de=L(Q,2),S=y(de),P=y(S),k=y(P);{let ae=N(a);Po(k,{onFocus:oe,placeholder:"Search",get value(){return n(ae)},onChange:G=>{r(G)},get ref(){return n(H)},set ref(G){f(H,G,!0)}})}var z=L(P,2);{var K=ae=>{var G=Jf(),ee=D(G);wu(ee,{});var le=L(ee,2),ke=y(le);Vf(ke,{get mode(){return n(re)}}),g(ae,G)};V(z,ae=>{(n(re)==="notes"&&u()||n(re)==="bin"&&l()||n(re)==="archive"&&c())&&ae(K)})}var U=L(S,2),ge=y(U);{var _e=ae=>{var G=ue(),ee=D(G);{var le=ke=>{var Be=Zf(),Xe=y(Be),Je=y(Xe);$i(Je,{get checked(){return n(j)},onChange:Re=>{if(Re){const tt=R()||[];b(new Set(tt.map(Ze=>Ze.id)))}else _()}});var et=L(Je,2),ze=y(et),Fe=L(Xe,2);Fe.__click=Re=>{Re.preventDefault(),w("single")};var We=y(Fe);pe(We,()=>({"--size":"16px"})),ye(We.lastChild,{name:"close"}),xe(Re=>ot(ze,`Selected ${Re??""}`),[()=>F().size]),g(ke,Be)};V(ee,ke=>{T()==="multiple"&&ke(le)})}g(ae,G)};V(ge,ae=>{(n(re)==="notes"&&u()||n(re)==="bin"&&l()||n(re)==="archive"&&c())&&ae(_e)})}xe((ae,G)=>{at($,"href",ae),at(ce,"href",G)},[()=>v(we.Settings),()=>v(we.Sync)]),g(t,me),ve()}st(["click"]);var ev=x('<div class="p-gkgqyo"><!></div>');function vt(t,e){fe(e,!0);const{setDialogPageHeight:a}=Zo();let r=I(null);Ce(()=>{n(r);const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;a(u)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=ev(),s=y(o);Ae(s,()=>e.children),Ye(o,i=>f(r,i),()=>n(r)),g(t,o),ve()}var tv=x('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function nv(t,e){fe(e,!1);const{replaceSearchParams:a,getHref:r}=jt(),o=l=>{l.preventDefault(),a("")};Ko();var s=tv(),i=L(y(s),2);{let l=yr(()=>r(""));xt(i,{element:"a",get href(){return n(l)},onClick:o,children:(c,u)=>{var d=De("close");g(c,d)},$$slots:{default:!0}})}g(t,s),ve()}var av=x('<h1 class="p-1n0ziuh"><!></h1>');function rv(t,e){var a=av(),r=y(a);Ae(r,()=>e.children),g(t,a)}var ov=x('<!> <div class="b p-193tby9"><!> <!></div>',1),sv=x('<div class="a p-193tby9"><!></div>');function iv(t,e){fe(e,!0);const{blockDialog:a,setLeftEnd:r}=en(),{pushDialogPage:o}=Vt(),{initLocalAccount:s}=Xo(),{replaceSearchParams:i}=jt(),l=Dn(),c=()=>{o(we.Auth)},u=async()=>{l.duration=0,l.swipingRatio=-25,requestAnimationFrame(()=>{l.duration=Yn().duration,l.swipingRatio=Yn().swipingRatio,s(),a(!1),r(!0),i("")})};var d=sv(),v=y(d);{var h=p=>{var m=ov(),T=D(m);rv(T,{children:(w,C)=>{var R=De("Welcome");g(w,R)}});var _=L(T,2),b=y(_);xt(b,{onClick:c,fullWidth:!0,children:(w,C)=>{var R=De("Cloud account");g(w,R)},$$slots:{default:!0}});var F=L(b,2);xt(F,{onClick:u,fullWidth:!0,type:"secondary",children:(w,C)=>{var R=De("Local account");g(w,R)},$$slots:{default:!0}}),g(p,m)};V(v,p=>{p(h)})}g(t,d),ve()}var lv=x('<div class="a p-1hg9kpf"></div>'),cv=x('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function el(t,e){fe(e,!0);const a=u=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(u).host}.ico`}catch{return""}};let r=I(!1),o=N(()=>a(e.url));var s=ue(),i=D(s);{var l=u=>{var d=lv();g(u,d)},c=u=>{var d=cv();xe(v=>at(d,"src",v),[()=>a(e.url)]),rn("error",d,()=>{f(r,!0)}),g(u,d)};V(i,u=>{n(r)||!n(o)?u(l):u(c,!1)})}g(t,s),ve()}var dv=x('<a target="_blank" rel="noopener noreferrer" class="a p-7mmq8e"><!> <!></a>'),uv=x('<button class="a p-7mmq8e"><!> <!></button>');function Ma(t,e){fe(e,!0);let a=Ne(e,"tabindex",3,0),r=Ne(e,"onclick",3,()=>{}),o=Ne(e,"ref",15);var s=ue(),i=D(s);{var l=u=>{var d=dv();d.__click=function(...p){r()?.apply(this,p)};var v=y(d);Ae(v,()=>e.children);var h=L(v,2);lt(h,{children:(p,m)=>{var T=De();xe(()=>ot(T,e.title)),g(p,T)}}),Ye(d,p=>o(p),()=>o()),xe(()=>{at(d,"href",e.href),at(d,"tabindex",a())}),g(u,d)},c=u=>{var d=ue(),v=D(d);{var h=p=>{var m=uv();m.__click=function(...b){r()?.apply(this,b)};var T=y(m);Ae(T,()=>e.children);var _=L(T,2);lt(_,{children:(b,F)=>{var w=De();xe(()=>ot(w,e.title)),g(b,w)}}),Ye(m,b=>o(b),()=>o()),xe(()=>at(m,"tabindex",a())),g(p,m)};V(v,p=>{e.elem==="button"&&p(h)},!0)}g(u,d)};V(i,u=>{e.elem==="a"?u(l):u(c,!1)})}g(t,s),ve()}st(["click"]);var fv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Edit',1),vv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),gv=x('<li class="p-1jbq6g9"><!></li> <li class="p-1jbq6g9"><!></li>',1),hv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function pv(t,e){fe(e,!0);let a=Ne(e,"shownMenu",15),r=I(!1),o=I(!1),s=I(!1);const i=async()=>{e.onEdit()},l=()=>{n(o)?(f(o,!1),i()):n(s)&&(f(s,!1),e.onDelete()),a(!1),f(r,!1)};let c=Va||fr;var u=ue(),d=D(u);{var v=h=>{var p=hv(),m=D(p);pe(m,()=>({"--top":"90%","--right":"0px"})),xr(m.lastChild,{get startClose(){return n(r)},onClosed:l,get isMobile(){return c},children:(T,_)=>{var b=gv(),F=D(b),w=y(F);Ve(w,{onClick:()=>{f(o,!0),f(r,!0)},get dialogMode(){return c},children:(A,M)=>{var H=fv(),X=D(H);pe(X,()=>({"--size":"20px"})),ye(X.lastChild,{name:"pen"}),g(A,H)},$$slots:{default:!0}});var C=L(F,2),R=y(C);Ve(R,{onClick:()=>{f(s,!0),f(r,!0)},get dialogMode(){return c},children:(A,M)=>{var H=vv(),X=D(H);pe(X,()=>({"--size":"20px"})),ye(X.lastChild,{name:"bin"}),g(A,H)},$$slots:{default:!0}}),g(T,b)},$$slots:{default:!0}}),g(h,p)};V(d,h=>{a()&&h(v)})}g(t,u),ve()}var mv=x('<div class="b p-ptbuqy"><!> <!> <div class="c p-ptbuqy"><button class="p-ptbuqy">Cancel</button> <button class="p-ptbuqy">Done</button></div></div>'),_v=x('<div class="e p-ptbuqy"><!></div>'),wv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),yv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),bv=x('<div class="d p-ptbuqy"><div><!> <a class="f p-ptbuqy" target="_blank" rel="noopener noreferrer"> </a> <div><!> <!></div> <!></div></div>'),Sv=x('<div class="g p-ptbuqy"><button class="h p-ptbuqy">Add link</button></div>'),Cv=x('<div class="a p-ptbuqy"><!></div>');function Tv(t,e){fe(e,!0);let a=Ne(e,"shownUrlInput",15);const{getFaviconEnabled:r}=qa();let o=N(r),s=I(null),i=I(null),l=I(it(e.url)),c=I(it(e.title)),u=I(null),d=I(null),v=I(!1);const h=C=>{f(l,C.target.value||"",!0)},p=C=>{f(c,C.target.value||"",!0)};Oe(()=>{a()&&n(s)?.focus()});const m=()=>{f(v,!0)},T=()=>{e.url&&(navigator.clipboard.writeText(e.url),ft("copied"))};var _=Cv(),b=y(_);{var F=C=>{var R=mv(),A=y(R);hr(A,{get value(){return n(l)},onInput:h,placeholder:"url",get ref(){return n(s)},set ref(j){f(s,j,!0)}});var M=L(A,2);hr(M,{get value(){return n(c)},onInput:p,placeholder:"title"});var H=L(M,2),X=y(H);X.__click=()=>{f(l,e.url,!0),f(c,e.title,!0),a(!1)};var q=L(X,2);q.__click=()=>{let j=n(l).trim();j!==""&&/^[[a-zA-Z]+?:\/\//.test(j)===!1&&(j="https://"+j,f(l,j,!0)),e.onChangeUrl(j,n(c)),a(!1)},g(C,R)},w=C=>{var R=ue(),A=D(R);{var M=X=>{var q=bv(),j=y(q);$e(j,1,rt({i:!0}),"p-ptbuqy");var oe=y(j);{var Z=te=>{var ie=_v(),ce=y(ie);el(ce,{get url(){return e.url}}),g(te,ie)};V(oe,te=>{n(o)&&te(Z)})}var W=L(oe,2),re=y(W),me=L(W,2);$e(me,1,rt({j:!0}),"p-ptbuqy");var se=y(me);Ma(se,{title:"copy link",elem:"button",onclick:T,children:(te,ie)=>{var ce=wv(),be=D(ce);pe(be,()=>({"--size":"20px"})),ye(be.lastChild,{name:"copy"}),g(te,ce)},$$slots:{default:!0}});var B=L(se,2);Ma(B,{title:"show menu",elem:"button",onclick:m,get ref(){return n(d)},set ref(te){f(d,te,!0)},children:(te,ie)=>{var ce=yv(),be=D(ce);pe(be,()=>({"--size":"18px","--rotate":"90deg"})),ye(be.lastChild,{name:"menu"}),g(te,ce)},$$slots:{default:!0}});var $=L(me,2);pv($,{onDelete:()=>{f(c,""),f(l,""),e.onDeleteUrl()},onEdit:()=>{a(!0)},get shownMenu(){return n(v)},set shownMenu(te){f(v,te,!0)}}),Ye(j,te=>f(u,te),()=>n(u)),xe(()=>{at(W,"href",e.url),ot(re,e.title||"unknown")}),g(X,q)},H=X=>{var q=Sv(),j=y(q);j.__click=()=>{a(!0)},g(X,q)};V(A,X=>{e.url?X(M):X(H,!1)})}g(C,R)};V(b,C=>{a()?C(F):C(w,!1)})}Ye(_,C=>f(i,C),()=>n(i)),g(t,_),ve()}st(["click"]);var xv=x('<div class="e p-vlmfrv">Note</div>'),kv=x("<span> </span>"),Ev=x('<div class="i p-vlmfrv"><!></div>'),Pv=x('<!> <div class="a p-vlmfrv"><div class="b"><div class="c"><div class="d p-vlmfrv"><!> <div class="f p-vlmfrv" role="textbox" aria-label="note" tabindex="0" contenteditable="true" placeholder="Note"> </div></div></div></div> <div class="g h p-vlmfrv"><!> <div class="j p-vlmfrv"><!></div></div></div>',1);function Nv(t,e){fe(e,!0);const{checkMobileSize:a}=Za(),{getGenerateTagsEnabled:r,getPreviousTags:o}=qa(),{pushDialogPage:s}=Vt();let i=Ne(e,"link",15,void 0),l=Ne(e,"text",15,""),c=Ne(e,"tags",31,()=>it([])),u=I(null),d=I(!1),v=I(!1),h=I(it(new Set)),p=I(!1);const m=E=>{let Y="",he=!0;function Te(Pe){for(let ne=0;ne<Pe.length;ne++){const J=Pe[ne];if(J.nodeName==="BR"){Y+=`
`,he=!0;continue}J.nodeName==="DIV"&&he===!1&&(Y+=`
`),he=!1,J.nodeType===3&&J.textContent&&(Y+=J.textContent),Te(J.childNodes)}}Te(E.currentTarget.childNodes),Y===`
`&&(Y=Y.slice(0,-1)),l(Y)},T=E=>{E.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(n(d)&&(f(d,!1),E.preventDefault(),E.stopPropagation()),n(v)&&(f(v,!1),E.preventDefault(),E.stopPropagation()))};Ce(()=>(a(),document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)));const _=(E,Y)=>{i({url:E,title:Y})},b=()=>{i(void 0)},F=E=>{c(E)},w=o(),C=()=>{c([...new Set([...c(),...w])])},R=l();Ce(()=>{if(n(u)&&e.mode==="add"){n(u).focus();const E=document.createRange();E.selectNodeContents(n(u)),E.collapse(!1);const Y=window.getSelection();Y?.removeAllRanges(),Y?.addRange(E)}});let A=I("unknown");const M=async()=>{if(typeof LanguageModel>"u"){f(A,"unavailable");return}f(A,await LanguageModel.availability({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}]}),!0)};Ce(()=>{M()});let H=N(r);const X=async()=>{if(n(A)==="downloadable"||n(A)==="downloading"){s(we.Extension);return}const E={type:"object",properties:{tags:{type:"array",items:{type:"string"}}},required:["tags"]};f(p,!0);const he=await(await LanguageModel.create({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}],temperature:.2,topK:2,initialPrompts:[{role:"system",content:`
						You are a tagging assistant.
						Your task is to suggest relevant tags for bookmarks.

						Rules:
						- Do not use rejected tags.
						- Do not invent overly generic tags.
						- Prefer short, lowercase, single-word tags.
						- Use only single words for tags, no phrases, you can split into multiple tags.
						- Avoid special characters in tags.
						- All tags must be in English.
						- Return 3 to 5 tags.
						- Output ONLY a JSON array of strings.
					`}]})).prompt(`
			Page information:
			Title: ${i()?.title||"N/A"}.
			URL: ${i()?.url||"N/A"}.
			Note content: ${l()||"N/A"}.
			Rejected tags: ${n(h).size>0?Array.from(n(h)).join(", "):"N/A"}.
		`.slice(0,2e3),{responseConstraint:E});f(p,!1);const Te=Array.from(new Set([...c(),...JSON.parse(he).tags]));c(Te)};var q=Pv(),j=D(q);{let E=N(()=>i()?.url||""),Y=N(()=>i()?.title||"");Tv(j,{get url(){return n(E)},get title(){return n(Y)},onChangeUrl:_,onDeleteUrl:b,get shownUrlInput(){return n(v)},set shownUrlInput(he){f(v,he,!0)}})}var oe=L(j,2),Z=y(oe),W=y(Z),re=y(W),me=y(re);{var se=E=>{var Y=xv();g(E,Y)};V(me,E=>{l()||E(se)})}var B=L(me,2);B.__input=m;var $=y(B);Ye(B,E=>f(u,E),()=>n(u));var te=L(Z,2),ie=y(te);{var ce=E=>{var Y=Ev(),he=y(Y);{var Te=Pe=>{var ne=kv(),J=y(ne);xe(Q=>ot(J,`updated: ${Q??""}`),[()=>new Date(e.updatedAt).toLocaleString()]),g(Pe,ne)};V(he,Pe=>{e.updatedAt&&Pe(Te)})}g(E,Y)};V(ie,E=>{e.mode==="edit"&&E(ce)})}var be=L(ie,2),Ee=y(be);{let E=N(()=>n(H)&&n(A)!=="unknown"&&n(A)!=="unavailable"),Y=N(()=>e.mode==="add"&&w.length>0);Qi(Ee,{get selectedTags(){return c()},onRejectedTag:he=>{f(h,new Set([...n(h),he]),!0)},onChangeTags:F,get genTagsEnabled(){return n(E)},onGenTags:X,get generatingTags(){return n(p)},onUsePreviousTags:C,get previousTagsEnabled(){return n(Y)},get shownTagInput(){return n(d)},set shownTagInput(he){f(d,he,!0)}})}xe(()=>ot($,R)),g(t,q),ve()}st(["input"]);function Av(t,e){fe(e,!0);const{isInitedNotes:a,createNote:r,updateNote:o,deleteNote:s,getNoteById:i}=At(),{getViewMode:l,setPreviousTags:c}=qa(),{setSearchParam:u,deleteSearchParam:d}=jt();let v=I("loading"),h=I("idle"),p=I(""),m=I(void 0),T=I(""),_=I(it([]));const b=()=>{{const M=JSON.parse(localStorage.getItem("new-note-draft")||"{}");localStorage.removeItem("new-note-draft");const H=M.link?.url||"",X=M.link?.title||"";f(T,M.text||"",!0),f(_,M.tags||[],!0),f(m,{url:H||"",title:X||""},!0),f(v,"finish")}},F=N(()=>a()&&n(v)==="finish"),w=async()=>{if(n(m)?.title||n(m)?.url||n(T)||n(_).length>0){if(n(p)){const M=i(n(p));if(!M?.data)return;if((M.data.link?.url!==n(m)?.url||M.data.link?.title!==n(m)?.title||M.data.text!==n(T)||JSON.stringify(M.data.tags)!==JSON.stringify(n(_)))&&n(h)==="idle"){f(h,"loading");try{await o(n(p),{link:Pa(n(m)),text:n(T),tags:n(_).slice()})}finally{f(h,"idle")}}}else if(n(h)==="idle"){f(h,"loading");try{f(p,await r({link:Pa(n(m)),text:n(T),tags:n(_).slice()}),!0),u("noteId",n(p))}catch{}finally{f(h,"idle")}}}else if(n(p)&&n(h)==="idle"){f(h,"loading");try{await s(n(p)),f(p,""),d("noteId")}finally{f(h,"idle")}}};Oe(()=>{n(F)&&n(h)!=="loading"&&w()}),Ce(()=>{b()}),Ce(()=>()=>{n(_).length>0&&c([...n(_)])}),Ce(()=>()=>{n(p)&&d("noteId")});var C=ue(),R=D(C);{var A=M=>{Nv(M,{mode:"add",get link(){return n(m)},set link(H){f(m,H,!0)},get text(){return n(T)},set text(H){f(T,H,!0)},get tags(){return n(_)},set tags(H){f(_,H,!0)}})};V(R,M=>{n(F)&&M(A)})}g(t,C),ve()}const Mv="modulepreload",Dv=function(t){return"/"+t},xs={},pt=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let c=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(a.map(u=>{if(u=Dv(u),u in xs)return;xs[u]=!0;const d=u.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${v}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Mv,d||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Iv=x('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function Rv(t){var e=Iv(),a=L(y(e),2);xt(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=De("Reload");g(r,s)},$$slots:{default:!0}}),g(t,e)}var Lv=x('<div class="p-uzefkz"><!></div>');function Ov(t,e){fe(e,!0);let a=I(!1);const{getDialogPageHeight:r}=Zo(),o=N(r);Ce(()=>{const c=setTimeout(()=>{f(a,!0)},250);return()=>{clearTimeout(c)}});var s=Lv(),i=y(s);{var l=c=>{ya(c,{})};V(i,c=>{n(a)&&c(l)})}xe(()=>Ua(s,`min-height: ${n(o)??""}px;`)),g(t,s),ve()}function St(t,e){fe(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>pt(()=>import("./aBLs3GHtS.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>pt(()=>import("./aBwpbGG4n.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>pt(()=>import("./aCe4cVEau.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>pt(()=>import("./aCvUKpOC_.js"),__vite__mapDeps([8,9])),"./Pages/ChangeTags.svelte":()=>pt(()=>import("./aDWUnzE__.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>pt(()=>import("./aDQ5AoS_c.js"),__vite__mapDeps([10,4,3,11,12])),"./Pages/Exit.svelte":()=>pt(()=>import("./aCmVTsKV0.js"),__vite__mapDeps([13,14])),"./Pages/ExportData.svelte":()=>pt(()=>import("./aCLW3hPQe.js"),__vite__mapDeps([15,16,17,18,19,20])),"./Pages/Extension.svelte":()=>pt(()=>import("./aLyeKPpEr.js"),__vite__mapDeps([21,18,19,22])),"./Pages/ImportData.svelte":()=>pt(()=>import("./aBmx1FY2A.js"),__vite__mapDeps([23,24])),"./Pages/Install.svelte":()=>pt(()=>import("./aCrCaFQEl.js"),__vite__mapDeps([25,26])),"./Pages/InstallSuccess.svelte":()=>pt(()=>import("./aCdwerkyR.js"),__vite__mapDeps([27,28])),"./Pages/Note.svelte":()=>pt(()=>import("./aBMH9Sctb.js"),__vite__mapDeps([29,30])),"./Pages/Settings.svelte":()=>pt(()=>import("./aBAlsbyw-.js"),__vite__mapDeps([31,18,19,16,17,32])),"./Pages/Signin.svelte":()=>pt(()=>import("./aD2Wth5yZ.js"),__vite__mapDeps([33,4,3,11,34])),"./Pages/Signup.svelte":()=>pt(()=>import("./aDido1sq3.js"),__vite__mapDeps([35,11,4,3,34])),"./Pages/Subscription.svelte":()=>pt(()=>import("./aC5bFCMET.js"),__vite__mapDeps([36,37])),"./Pages/Sync.svelte":()=>pt(()=>import("./aDWjhvz7w.js"),__vite__mapDeps([38,39]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[c]){const u=r[c]();return a[l]={promise:u},a[l].module=await u,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=ue(),i=D(s);Ic(i,()=>o(e.page),l=>{Ov(l,{})},(l,c)=>{const u=N(()=>n(c).default);var d=ue(),v=D(d);Fc(v,()=>n(u),(h,p)=>{p(h,{get params(){return e.params},get hidden(){return e.hidden}})}),g(l,d)},l=>{Rv(l)}),g(t,s),ve()}var Fv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),zv=x('<li class="p-1ljon4s"><!></li>'),jv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy',1),Bv=x('<li class="p-1ljon4s"><!></li>'),Hv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),Uv=x('<li class="p-1ljon4s"><!></li>'),qv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share link',1),Vv=x('<li class="p-1ljon4s"><!></li>'),Wv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),Kv=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),Gv=x('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),Yv=x('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Xv=x('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),Jv=x(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),Zv=x('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Qv=x('<!> <!> <!> <!> <li class="p-1ljon4s"><!></li> <!>',1),$v=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function eg(t,e){fe(e,!0);const{moveNoteToBin:a,moveNoteFromArchive:r,moveNoteToArchive:o,deleteNote:s,pinNote:i,restoreNoteFromBin:l}=At();let c=Ne(e,"mode",3,"notes"),u=Ne(e,"shownMenu",15),d=I(!1),v=I(!1),h=I(!1),p=I(!1),m=I(!1),T=navigator?.share&&navigator.canShare?.({url:"https://example.com",title:"example",text:"example"});const _=async()=>{a(e.noteId),ft("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{l(e.noteId)}}})},b=async()=>{o(e.noteId),ft("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{r(e.noteId)}}})},F=async()=>{r(e.noteId),ft("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{o(e.noteId)}}})},w=()=>{l(e.noteId),ft("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{a(e.noteId)}}})},C=()=>{e.noteData.pinnedAt?(i(e.noteId,!1),ft("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId,!0)}}})):(i(e.noteId,!0),ft("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId,!1)}}})),f(d,!0)},R=()=>{n(v)?(f(v,!1),_()):n(m)?(f(m,!1),w()):n(h)?(f(h,!1),b()):n(p)&&(f(p,!1),F()),u(!1),f(d,!1)},A=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),ft("Copied link"),f(d,!0))},M=()=>{let re="";e.noteData.link?.url&&(re+=e.noteData.link.url+`
`),e.noteData.text&&(re+=`
`+e.noteData.text+`
`),navigator.clipboard.writeText(re),ft("Copied"),f(d,!0)},H=()=>{f(d,!0),Ia({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await s(e.noteId)},onCancel:async()=>{}})},X=()=>{if(navigator.share){const re={};let me="";e.noteData.link?.url&&(me+=e.noteData.link.url+`
`),e.noteData.text&&(me+=`
`+e.noteData.text+`
`),re.text=me,navigator.share(re).catch(se=>{})}f(d,!0)},q=()=>{if(navigator.share){const re={};e.noteData.link?.url&&(re.url=e.noteData.link.url),e.noteData.link?.title&&(re.title=e.noteData.link.title),navigator.share(re).catch(me=>{})}f(d,!0)};let j=Va||fr;var oe=ue(),Z=D(oe);{var W=re=>{var me=$v(),se=D(me);pe(se,()=>({"--bottom":e.showMenuUp?"100%":"auto","--top":e.showMenuUp?"auto":"100%","--right":"10px"})),xr(se.lastChild,{get startClose(){return n(d)},onClosed:R,get isMobile(){return j},children:(B,$)=>{var te=Qv(),ie=D(te);{var ce=de=>{var S=zv(),P=y(S);Ve(P,{onClick:A,get dialogMode(){return j},children:(k,z)=>{var K=Fv(),U=D(K);pe(U,()=>({"--size":"20px"})),ye(U.lastChild,{name:"copy"}),g(k,K)},$$slots:{default:!0}}),g(de,S)};V(ie,de=>{j&&e.noteData.link?.url&&de(ce)})}var be=L(ie,2);{var Ee=de=>{var S=Bv(),P=y(S);Ve(P,{onClick:M,get dialogMode(){return j},children:(k,z)=>{var K=jv(),U=D(K);pe(U,()=>({"--size":"20px"})),ye(U.lastChild,{name:"copyN"}),g(k,K)},$$slots:{default:!0}}),g(de,S)};V(be,de=>{e.noteData.text&&de(Ee)})}var E=L(be,2);{var Y=de=>{var S=Uv(),P=y(S);Ve(P,{onClick:X,get dialogMode(){return j},children:(k,z)=>{var K=Hv(),U=D(K);pe(U,()=>({"--size":"20px"})),ye(U.lastChild,{name:"share"}),g(k,K)},$$slots:{default:!0}}),g(de,S)};V(E,de=>{T&&e.noteData.text&&de(Y)})}var he=L(E,2);{var Te=de=>{var S=Vv(),P=y(S);Ve(P,{onClick:q,get dialogMode(){return j},children:(k,z)=>{var K=qv(),U=D(K);pe(U,()=>({"--size":"20px"})),ye(U.lastChild,{name:"shareL"}),g(k,K)},$$slots:{default:!0}}),g(de,S)};V(he,de=>{T&&e.noteData.link?.url&&de(Te)})}var Pe=L(he,2),ne=y(Pe);Ve(ne,{onClick:C,get dialogMode(){return j},children:(de,S)=>{var P=Wv(),k=D(P);{let K=N(()=>e.noteData.pinnedAt?"pin-cancel":"pin");pe(k,()=>({"--size":"20px"})),ye(k.lastChild,{get name(){return n(K)}})}var z=L(k);xe(()=>ot(z,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)),g(de,P)},$$slots:{default:!0}});var J=L(Pe,2);{var Q=de=>{var S=Yv(),P=D(S),k=y(P);Ve(k,{onClick:()=>{f(h,c()==="notes"),f(p,c()==="archive"),f(d,!0)},get dialogMode(){return j},children:(U,ge)=>{var _e=Kv(),ae=D(_e);{let ee=N(()=>c()==="archive"?"archive-cancel":"archive");pe(ae,()=>({"--size":"20px"})),ye(ae.lastChild,{get name(){return n(ee)}})}var G=L(ae);xe(()=>ot(G,` ${c()==="archive"?"Unarchive":"Archive"}`)),g(U,_e)},$$slots:{default:!0}});var z=L(P,2),K=y(z);Ve(K,{onClick:()=>{f(v,!0),f(d,!0)},get dialogMode(){return j},dangerous:!0,children:(U,ge)=>{var _e=Gv(),ae=D(_e),G=y(ae);pe(G,()=>({"--size":"20px"})),ye(G.lastChild,{name:"bin"}),g(U,_e)},$$slots:{default:!0}}),g(de,S)},Se=de=>{var S=Zv(),P=D(S),k=y(P);Ve(k,{onClick:()=>{f(m,!0),f(d,!0)},get dialogMode(){return j},children:(U,ge)=>{var _e=Xv(),ae=D(_e),G=y(ae);pe(G,()=>({"--size":"20px"})),ye(G.lastChild,{name:"bin-cancel"}),g(U,_e)},$$slots:{default:!0}});var z=L(P,2),K=y(z);Ve(K,{onClick:H,get dialogMode(){return j},dangerous:!0,children:(U,ge)=>{var _e=Jv(),ae=D(_e),G=y(ae);pe(G,()=>({"--size":"20px"})),ye(G.lastChild,{name:"bin"}),g(U,_e)},$$slots:{default:!0}}),g(de,S)};V(J,de=>{c()==="notes"||c()==="archive"?de(Q):de(Se,!1)})}g(B,te)},$$slots:{default:!0}}),g(re,me)};V(Z,re=>{u()&&re(W)})}g(t,oe),ve()}let $n=I(null);var tg=x('<div class="a p-1t3doe5"><!></div>'),ng=x('<div class="b p-1t3doe5"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),ag=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),rg=x('<div class="c p-1t3doe5"><!></div>'),og=x('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),sg=x('<a class="d p-1t3doe5" target="_blank" rel="noopener noreferrer"> </a>'),ig=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),lg=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),cg=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),dg=x("<!> <!>",1),ug=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),fg=x("<li><!> <!> <!> <!> <div><!> <!></div> <!></li>");function vg(t,e){fe(e,!0);const{pushDialogPage:a}=Vt(),{getFaviconEnabled:r,getRecordMode:o}=qa(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:c}=_a(),{getSearchParams:u,getHref:d}=jt();let v=Ne(e,"mode",3,"notes"),h=I(!1),p=I(!1),m=N(r),T=N(o),_=I(null),b=I(null);const{checkMobileSize:F}=Za(),w=()=>{f(h,!0)},C=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),ft("copied"))};Oe(()=>{n($n)===n(b)?f(p,!0):f(p,!1)});const R=E=>{E.preventDefault(),a(`${we.Note}?id=${encodeURIComponent(e.noteId)}`),f($n,null)},A=e.noteData.link?.url||"";let M=N(()=>n(h)&&n(_)?gt(n(_)).next:null);const H=E=>{E?l(e.noteId):c(e.noteId)};Ce(()=>{const E=Y=>{n(b)&&n($n)===n(b)&&!(n(b)===Y.target||n(b).contains(Y.target))&&f($n,null)};return document.addEventListener("click",E),()=>{document.removeEventListener("click",E)}});const X=()=>{const E=new URLSearchParams(u());return E.set(Gt,`${we.Note}?id=${encodeURIComponent(e.noteId)}`),d(E)};var q=fg(),j=y(q);{var oe=E=>{var Y=tg(),he=y(Y);{let Te=N(()=>i().has(e.noteId));$i(he,{get checked(){return n(Te)},onChange:H})}g(E,Y)};V(j,E=>{s()==="multiple"&&E(oe)})}var Z=L(j,2);{var W=E=>{var Y=ng(),he=y(Y);pe(he,()=>({"--size":"18px"})),ye(he.lastChild,{name:"pin"}),g(E,Y)};V(Z,E=>{e.noteData.pinnedAt&&E(W)})}var re=L(Z,2);{var me=E=>{var Y=rg(),he=y(Y);{var Te=ne=>{el(ne,{get url(){return A}})},Pe=ne=>{var J=ag(),Q=D(J);pe(Q,()=>({"--size":"16px"})),ye(Q.lastChild,{name:"note"}),g(ne,J)};V(he,ne=>{A?ne(Te):ne(Pe,!1)})}g(E,Y)};V(re,E=>{n(m)&&E(me)})}var se=L(re,2);{var B=E=>{var Y=og();Y.__click=R;var he=y(Y);xe((Te,Pe)=>{at(Y,"tabindex",e.focusHidden?-1:0),at(Y,"href",Te),ot(he,Pe)},[X,()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),rn("focus",Y,()=>{f($n,n(b),!0)}),g(E,Y)},$=E=>{var Y=sg(),he=y(Y);xe(Te=>{at(Y,"tabindex",e.focusHidden?-1:0),at(Y,"href",A),ot(he,Te)},[()=>e.noteData?.link?.title||e.noteData?.text.split(`
`)[0]||"unknown"]),rn("focus",Y,()=>{f($n,n(b),!0)}),g(E,Y)};V(se,E=>{n(T)==="note"||!A?E(B):E($,!1)})}var te=L(se,2);te.__focusin=()=>{f($n,n(b),!0)};var ie=y(te);{var ce=E=>{var Y=dg(),he=D(Y);{var Te=Q=>{{let Se=N(()=>e.focusHidden?-1:0);Ma(Q,{elem:"button",onclick:C,get tabindex(){return n(Se)},title:"copy link",children:(de,S)=>{var P=ig(),k=D(P);pe(k,()=>({"--size":"20px"})),ye(k.lastChild,{name:"copy"}),g(de,P)},$$slots:{default:!0}})}};V(he,Q=>{F()||Q(Te)})}var Pe=L(he,2);{var ne=Q=>{{let Se=N(()=>e.focusHidden?-1:0),de=N(()=>e.noteData.link?.title||"unknown");Ma(Q,{elem:"a",get href(){return A},get tabindex(){return n(Se)},get title(){return n(de)},children:(S,P)=>{var k=lg(),z=D(k);pe(z,()=>({"--size":"18px"})),ye(z.lastChild,{name:"open"}),g(S,k)},$$slots:{default:!0}})}},J=Q=>{{let Se=N(X),de=N(()=>e.focusHidden?-1:0);Ma(Q,{title:"edit",elem:"a",get href(){return n(Se)},get tabindex(){return n(de)},onclick:R,children:(S,P)=>{var k=cg(),z=D(k);pe(z,()=>({"--size":"18px"})),ye(z.lastChild,{name:"pen"}),g(S,k)},$$slots:{default:!0}})}};V(Pe,Q=>{n(T)==="note"?Q(ne):Q(J,!1)})}g(E,Y)};V(ie,E=>{A&&E(ce)})}var be=L(ie,2);{let E=N(()=>e.focusHidden?-1:0);Ma(be,{title:"show menu",elem:"button",get tabindex(){return n(E)},onclick:w,get ref(){return n(_)},set ref(Y){f(_,Y,!0)},children:(Y,he)=>{var Te=ug(),Pe=D(Te);pe(Pe,()=>({"--size":"18px","--rotate":"90deg"})),ye(Pe.lastChild,{name:"menu"}),g(Y,Te)},$$slots:{default:!0}})}var Ee=L(te,2);eg(Ee,{get nextFocusRef(){return n(M)},get mode(){return v()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(h)},set shownMenu(E){f(h,E,!0)}}),Ye(q,E=>f(b,E),()=>n(b)),xe(()=>{$e(q,1,rt({e:!0,f:n(p)}),"p-1t3doe5"),$e(te,1,rt({g:!0,h:n(p)}),"p-1t3doe5")}),g(t,q),ve()}st(["click","focusin"]);var Ka,tl,nl;class gg{constructor(e){Ie(this,Ka);Pt(this,"data");Pt(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),nt(this,Ka,tl).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,nt(this,Ka,nl).call(this)),e}isEmpty(){return this.data.length===0}}Ka=new WeakSet,tl=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},nl=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class hg{constructor(e,a){Pt(this,"heap");Pt(this,"done");Pt(this,"cache",[]);this.heap=new gg(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var pg=x("<span>Back to notes</span>"),mg=x('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),_g=x("<span>Back to notes</span>"),wg=x('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),yg=x('<p class="f">No notes in bin</p>'),bg=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),Sg=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),Cg=x('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),Tg=x('<div class="e p-1jdj5w3"><!></div>'),xg=x('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),kg=x('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),Eg=x('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function Pg(t,e){fe(e,!0);const{getScrollContainer:a}=ro(),{createHandleClickDialogPage:r,createDialogPageHref:o}=Vt(),{getSelectedTags:s}=Mn(),{getFeedOrder:i}=Ei(),{checkNotesInArchive:l,checkNotesInBin:c,checkNotes:u,isInitedNotes:d}=At(),{getSelectedMetaTags:v}=ao(),{replaceSearchParams:h,getHref:p}=jt();Go();const{getFiltredNotesLength:m,getFiltredNotes:T,getUpdatedFiltredNotesTimestamp:_}=wa();let b=N(v),F=N(m),w=N(T),C=N(_),R=N(d),A=54,M=I(0),H=I(0),X=I(0),q=I(null),j=N(a),oe=null,Z=null,W=N(()=>n(b).has(Ge.ARCHIVED)?"archive":n(b).has(Ge.BIN)?"bin":"notes");const re=N(s);Oe(()=>{n(re),n(te),n(j)?.scrollTo(0,0)});const{enable:me}=Jo(),se=()=>{me(),oe||(oe=requestAnimationFrame(()=>{const J=n(j)?.scrollTop||0;f(X,J,!0);const Q=Math.ceil(n(M)/A);f(H,Math.floor(J/(A*Q))*(A*Q)),oe=null}))},B=()=>{Z||(Z=requestAnimationFrame(()=>{f(M,window.innerHeight-180||0,!0);const J=n(j)?.scrollTop||0;f(X,J,!0);const Q=Math.ceil(n(M)/A);f(H,Math.floor(J/(A*Q))*(A*Q)),Z=null}))};Ce(()=>{B(),se()});const $=()=>{se()};Oe(()=>(n(j)?.addEventListener("scroll",$),window.addEventListener("resize",B),()=>{n(j)?.removeEventListener("scroll",$),window.removeEventListener("resize",B)}));const te=N(i);Oe(()=>{n(te),n(C),f(q,new hg(n(w),(J,Q)=>{if(!J||!Q||!J.data||!Q.data)return 0;if(J.data.pinnedAt&&!Q.data.pinnedAt)return-1;if(!J.data.pinnedAt&&Q.data.pinnedAt)return 1;if(J.data.pinnedAt&&Q.data.pinnedAt){if(J.data.pinnedAt<Q.data.pinnedAt)return 1;if(J.data.pinnedAt>Q.data.pinnedAt)return-1}switch(n(te)){case"newest":return J.data.updatedAt<Q.data.updatedAt?1:J.data.updatedAt>Q.data.updatedAt?-1:(J.data.link?.title||"").localeCompare(Q.data.link?.title||"");case"oldest":return J.data.updatedAt>Q.data.updatedAt?1:J.data.updatedAt<Q.data.updatedAt?-1:(J.data.link?.title||"").localeCompare(Q.data.link?.title||"");case"AtoZ":return(J.data.link?.title||"").localeCompare(Q.data.link?.title||"");case"ZtoA":return(Q.data.link?.title||"").localeCompare(J.data.link?.title||"");default:return 0}}),!0)});const ie=N(()=>n(F)*A);let be=N(()=>{n(C);const J=Math.ceil(n(M)/A);let Q=Math.floor(n(H)/A);return Q=Q-Math.min(Q,J),n(q)?.get(Q,Q+J*3)||[]}),Ee=N(()=>A*Math.ceil(n(M)/A));const E=N(()=>n(H)-Math.min(n(H),n(Ee)));var Y=Eg(),he=y(Y),Te=y(he);{var Pe=J=>{ya(J,{})},ne=J=>{var Q=ue(),Se=D(Q);{var de=P=>{var k=mg(),z=L(D(k),2),K=y(z);{let U=N(()=>p(""));xt(K,{element:"a",get href(){return n(U)},onClick:ge=>{ge.preventDefault(),h("")},children:(ge,_e)=>{var ae=pg();g(ge,ae)},$$slots:{default:!0}})}g(P,k)},S=P=>{var k=ue(),z=D(k);{var K=ge=>{var _e=wg(),ae=L(D(_e),2),G=y(ae);{let ee=N(()=>p(""));xt(G,{element:"a",get href(){return n(ee)},onClick:le=>{le.preventDefault(),h("")},children:(le,ke)=>{var Be=_g();g(le,Be)},$$slots:{default:!0}})}g(ge,_e)},U=ge=>{var _e=ue(),ae=D(_e);{var G=le=>{var ke=Tg(),Be=y(ke);{var Xe=et=>{var ze=yg();g(et,ze)},Je=et=>{var ze=Cg(),Fe=y(ze),We=y(Fe);{let Ze=N(()=>o(we.NewNote)),qe=N(()=>r(we.NewNote));xt(We,{element:"a",get href(){return n(Ze)},get onClick(){return n(qe)},children:(Mt,Dt)=>{var Et=bg(),pn=D(Et);pe(pn,()=>({"--size":"18px","--color":"#b0b0b0"})),ye(pn.lastChild,{name:"plus"}),g(Mt,Et)},$$slots:{default:!0}})}var Re=L(Fe,4),tt=y(Re);{let Ze=N(()=>o(we.ImportData)),qe=N(()=>r(we.ImportData));xt(tt,{element:"a",get href(){return n(Ze)},get onClick(){return n(qe)},children:(Mt,Dt)=>{var Et=Sg(),pn=D(Et);pe(pn,()=>({"--size":"18px","--color":"#b0b0b0"})),ye(pn.lastChild,{name:"import"}),g(Mt,Et)},$$slots:{default:!0}})}g(et,ze)};V(Be,et=>{n(W)==="bin"?et(Xe):et(Je,!1)})}g(le,ke)},ee=le=>{var ke=ue(),Be=D(ke);{var Xe=et=>{var ze=xg();g(et,ze)},Je=et=>{var ze=kg(),Fe=y(ze);En(Fe,23,()=>n(be),We=>We.data,(We,Re,tt)=>{var Ze=ue(),qe=D(Ze);{var Mt=Dt=>{{let Et=N(()=>n(tt)*A<n(X)-n(E)-A/2||n(tt)*A>n(X)-n(E)+Math.floor(n(M)/A)*A),pn=N(()=>(n(tt)+3)*A<n(X)-n(E)-A/2||(n(tt)+3)*A>n(X)-n(E)+Math.floor(n(M)/A)*A);vg(Dt,{get mode(){return n(W)},get focusHidden(){return n(Et)},get showMenuUp(){return n(pn)},get noteId(){return n(Re).id},get noteData(){return n(Re).data}})}};V(qe,Dt=>{n(Re).data&&Dt(Mt)})}g(We,Ze)}),xe(We=>{Ua(ze,We),Ua(Fe,`transform: translateY(${n(E)??""}px);`)},[()=>`--minHeight: ${Math.max((n(ie)>n(M),n(ie)),0)}px`]),g(et,ze)};V(Be,et=>{n(be).length===0?et(Xe):et(Je,!1)},!0)}g(le,ke)};V(ae,le=>{!c()&&!l()&&!u()?le(G):le(ee,!1)},!0)}g(ge,_e)};V(z,ge=>{n(W)==="archive"&&!l()?ge(K):ge(U,!1)},!0)}g(P,k)};V(Se,P=>{n(W)==="bin"&&!c()?P(de):P(S,!1)},!0)}g(J,Q)};V(Te,J=>{n(R)?J(ne,!1):J(Pe)})}g(t,Y),ve()}var Ng=x('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function Ag(t){var e=Ng(),a=L(D(e),2),r=y(a);Pg(r,{}),g(t,e)}function Mg(t,e){fe(e,!0);const a=Dn();let r=Ne(e,"animationRef",7),o=Ne(e,"dialog",7);Zi(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let u=0,d=0,v=()=>1;if(r().current){r().current.pause();let p=Number(r().current.currentTime);vr()&&(p=Number(p)+50,r().current.currentTime=Math.min(Math.max(Pn-1,p),p));const m=r().current.effect?.getComputedTiming().progress||0;v=()=>m,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(p=>requestAnimationFrame(p)),d=1-v();const h=d*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-d)*.1}`),a.swipingRatio=Math.abs(1-d)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${h}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:u,currentPosition:h,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:u,width:d})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-u/d)*.1}`),o().style.transform=`translate3d(${u}px, 0, 0)`,a.swipingRatio=Math.abs(1-u/d)*25)},onFinish:({swipeVelocity:u,currentPosition:d,width:v,actionThreshold:h,initialPosition:p})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const m=()=>Math.abs(p+d)/v*100;let T=null;if(u<=-Xn?T="open":u>=Xn?T="close":T=Math.abs(m())>h?"close":"open",r().progress=Ji(m()/100),T==="close"){const _=(1-(r().progress||0))*Pn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const _=(r().progress||1)*Pn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),ve()}var Dg=x('<div class="d p-1c7pbur"> </div>'),Ig=x('<button class="e f p-1c7pbur"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Rg=x('<a class="e g p-1c7pbur"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Lg=x('<div><div class="a p-1c7pbur"><div class="b p-1c7pbur"><div class="c p-1c7pbur"><!> <!> <!></div></div></div> <!> <!></div>'),Og=x("<dialog><!></dialog> <!>",1);function Fg(t,e){fe(e,!0);const{isScrolling:a,enable:r}=Jo();let o=I(null),s=I(null),i={};const l=Dn(),{checkLeftEnd:c,checkLeftStart:u,setLeftEnd:d,setLeftStart:v,getCountDialog:h}=en(),p=N(u),m=N(c);let T=N(()=>l.working);const _=()=>{e.dialogState!=="opened"&&e.onStartOpening()},b=()=>{e.onClose()},F=()=>{e.onSwipe()},w=oe=>{oe.preventDefault(),b()};Ce(()=>(n(o)?.addEventListener("close",b),n(o)?.addEventListener("cancel",w),()=>{n(o)?.removeEventListener("close",b),n(o)?.removeEventListener("cancel",w)})),Oe(()=>{h()>0&&(l.swipingRatio=25)}),Oe(()=>{e.dialogState==="opening"?zt(()=>{requestAnimationFrame(()=>{if(!n(o))return;const oe=(i.progress||1)*Pn,Z=n(o).style.transform||`translate3d(${n(p)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const W=n(o)?.animate([{transform:Z},{transform:"translate3d(0, 0, 0)"}],{duration:oe,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=W,W&&(W.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=Yn().duration,W.cancel(),i.current=void 0,i.progress=void 0,n(p)&&v(!1)})})}):e.dialogState==="closing"&&zt(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const oe=(1-(i.progress||0))*Pn,Z=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const W=n(o)?.animate([{transform:Z},{transform:`translate3d(${n(m)?"-100%":"100%"}, 0, 0)`}],{duration:oe,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=W,W&&(W.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=Yn().duration,W.cancel(),i.current=void 0,i.progress=void 0,n(m)&&d(!1)})})})});const C=()=>{r()},R=N(a);Ce(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),vr()&&n(o).getBoundingClientRect(),!n(T)){e.onOpened();return}e.onStartOpening()}});var A=Og(),M=D(A),H=y(M);{var X=oe=>{var Z=Lg(),W=y(Z),re=y(W),me=y(re),se=y(me);{var B=Y=>{var he=Dg(),Te=y(he);xe(()=>ot(Te,e.title)),g(Y,he)};V(se,Y=>{e.title&&Y(B)})}var $=L(se,2);{var te=Y=>{var he=Ig();he.__click=b;var Te=y(he);pe(Te,()=>({"--size":"32px"})),ye(Te.lastChild,{name:"back"});var Pe=L(Te,2);lt(Pe,{children:(ne,J)=>{var Q=De("back");g(ne,Q)}}),g(Y,he)};V($,Y=>{e.blocked||Y(te)})}var ie=L($,2);{var ce=Y=>{var he=Rg();he.__click=function(...ne){e.onOpenWindow?.apply(this,ne)};var Te=y(he);pe(Te,()=>({"--scale":"0.7","--size":"32px"})),ye(Te.lastChild,{name:"open-window"});var Pe=L(Te,2);lt(Pe,{children:(ne,J)=>{var Q=De("open window");g(ne,Q)}}),xe(()=>at(he,"href",e.openWindowHref)),g(Y,he)};V(ie,Y=>{e.onOpenWindow&&Y(ce)})}var be=L(W,2);Ae(be,()=>e.children);var Ee=L(be,2);{var E=Y=>{Qo(Y,{})};V(Ee,Y=>{e.dialogState==="opened"&&Y(E)})}Ye(Z,Y=>f(s,Y),()=>n(s)),xe(()=>$e(Z,1,rt({o:!0,p:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-1c7pbur")),rn("scroll",Z,C),g(oe,Z)};V(H,oe=>{e.dialogState!=="preOpening"&&oe(X)})}Ye(M,oe=>f(o,oe),()=>n(o));var q=L(M,2);{var j=oe=>{Mg(oe,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:_,onClose:b,onSwipe:F,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};V(q,oe=>{n(s)&&!n(R)&&!e.blocked&&!e.hidden&&oe(j)})}xe(()=>$e(M,1,rt({h:!0,i:n(T),j:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",k:e.hidden,l:e.dialogState==="opened",m:n(p),n:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-1c7pbur")),g(t,A),ve()}st(["click"]);function zg(t,e){fe(e,!0);let a=Ne(e,"hidden",3,!1),r=Ne(e,"onClosed",3,()=>{}),o=I(0);Ce(()=>{const b=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",b),b(),()=>{window.removeEventListener("resize",b)}});const{dialogDec:s,dialogInc:i}=en(),l=Dn();Ce(()=>(i(),()=>{s()}));let c=I("closed");const u=()=>{f(c,"opening")},d=()=>{f(c,"swiping")},v=()=>{f(c,"opened")},h=()=>{e.onClose(),f(c,"closing")},p=()=>{f(c,"closed"),r()()};Oe(()=>{e.shown&&n(c)==="closed"?f(c,"preOpening"):!e.shown&&n(c)==="opened"&&f(c,"closing")}),Oe(()=>{n(c)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(c)==="opened"||n(c)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var m=ue(),T=D(m);{var _=b=>{Fg(b,{get dialogWidth(){return n(o)},get dialogState(){return n(c)},get title(){return e.title},onStartOpening:u,onOpened:v,onClose:h,onClosed:p,onSwipe:d,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(F,w)=>{var C=ue(),R=D(C);Ae(R,()=>e.children),g(F,C)},$$slots:{default:!0}})};V(T,b=>{n(c)!=="closed"&&b(_)})}g(t,m),ve()}const jg=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};Ce(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),Ce(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Bg=x('<button class="d e p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Hg=x('<div class="f p-2jn3ll"> </div>'),Ug=x('<button class="d g p-2jn3ll"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),qg=x('<dialog><div class="a p-2jn3ll"><div class="b p-2jn3ll"><div class="c p-2jn3ll"><div><!></div> <!> <div><!></div></div></div> <!></div></dialog> <!>',1);function Vg(t,e){fe(e,!0);let a=Ne(e,"blockedDialog",3,!1),r=Ne(e,"hiddenDialog",3,!1),o=Ne(e,"isDesktopAnimationOff",3,!1),s=I(null),i=I(null),l=I(!1);jg({getDialog:()=>n(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=Dn();Oe(()=>{e.stateDialog==="closing"&&(c.working?n(s)?.addEventListener("transitionend",()=>{n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:u}=Zo(),d=N(u);Ce(()=>{setTimeout(()=>{f(l,!0)},50)});var v=qg(),h=D(v),p=y(h),m=y(p),T=y(m),_=y(T),b=y(_);{var F=q=>{var j=Bg();j.__click=()=>{e.onStartBack()};var oe=y(j);pe(oe,()=>({"--size":"28px"})),ye(oe.lastChild,{name:"back"});var Z=L(oe,2);lt(Z,{children:(W,re)=>{var me=De("back");g(W,me)}}),g(q,j)};V(b,q=>{(!(a()||r())||a())&&e.onStartBack&&q(F)})}var w=L(_,2);{var C=q=>{var j=Hg(),oe=y(j);xe(()=>ot(oe,e.title)),g(q,j)};V(w,q=>{e.title&&q(C)})}var R=L(w,2),A=y(R);{var M=q=>{var j=Ug();j.__click=()=>{e.onStartClose()};var oe=y(j);pe(oe,()=>({"--size":"28px"})),ye(oe.lastChild,{name:"close"});var Z=L(oe,2);lt(Z,{children:(W,re)=>{var me=De("close");g(W,me)}}),g(q,j)};V(A,q=>{a()||r()||q(M)})}var H=L(m,2);Ae(H,()=>e.children),Ye(p,q=>f(i,q),()=>n(i)),Ye(h,q=>f(s,q),()=>n(s));var X=L(h,2);$o(X,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose}}),xe(()=>{Ua(h,`height: ${n(d)+74}px`),$e(h,1,rt({h:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o(),m:r()}),"p-2jn3ll")}),g(t,v),ve()}st(["click"]);const Wg=({onStartClose:t,onClosed:e})=>{let a=I("close");return{get state(){return n(a)},set state(i){f(a,i,!0)},handleStartClose:(i=!1)=>{i||(f(a,"closing"),t?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function Kg(t,e){fe(e,!0);let a=Ne(e,"blockedDialog",3,!1),r=Ne(e,"hiddenDialog",3,!1),o=Ne(e,"onStartClose",3,()=>{}),s=Ne(e,"onClosed",3,()=>{}),i=Wg({onStartClose:o(),onClosed:s()});const{dialogDec:l,dialogInc:c}=en();Ce(()=>(c(),()=>{l()})),Oe(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const u=p=>{p.key==="Escape"&&a()&&(p.preventDefault(),p.stopPropagation())};Ce(()=>(document.addEventListener("keydown",u),()=>{document.removeEventListener("keydown",u)}));var d=ue(),v=D(d);{var h=p=>{Vg(p,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(m,T)=>{var _=ue(),b=D(_);Ae(b,()=>e.children),g(m,_)},$$slots:{default:!0}})};V(v,p=>{i.state!=="close"&&p(h)})}g(t,d),ve()}const ks=(t,e=je,a=je,r)=>{let o=yr(()=>bl(r?.(),!1));var s=ue(),i=D(s);{var l=u=>{vt(u,{children:(d,v)=>{St(d,{get hidden(){return n(o)},get page(){return we.Settings}})},$$slots:{default:!0}})},c=u=>{var d=ue(),v=D(d);{var h=m=>{vt(m,{children:(T,_)=>{Av(T,{})},$$slots:{default:!0}})},p=m=>{var T=ue(),_=D(T);{var b=w=>{vt(w,{children:(C,R)=>{St(C,{get params(){return a()},get hidden(){return n(o)},get page(){return we.Note}})},$$slots:{default:!0}})},F=w=>{var C=ue(),R=D(C);{var A=H=>{vt(H,{children:(X,q)=>{St(X,{get hidden(){return n(o)},get page(){return we.ImportData}})},$$slots:{default:!0}})},M=H=>{var X=ue(),q=D(X);{var j=Z=>{vt(Z,{children:(W,re)=>{St(W,{get hidden(){return n(o)},get page(){return we.ExportData}})},$$slots:{default:!0}})},oe=Z=>{var W=ue(),re=D(W);{var me=B=>{vt(B,{children:($,te)=>{iv($,{})},$$slots:{default:!0}})},se=B=>{var $=ue(),te=D($);{var ie=be=>{vt(be,{children:(Ee,E)=>{St(Ee,{get hidden(){return n(o)},get page(){return we.Install}})},$$slots:{default:!0}})},ce=be=>{var Ee=ue(),E=D(Ee);{var Y=Te=>{vt(Te,{children:(Pe,ne)=>{St(Pe,{get hidden(){return n(o)},get page(){return we.InstallSuccess}})},$$slots:{default:!0}})},he=Te=>{var Pe=ue(),ne=D(Pe);{var J=Se=>{vt(Se,{children:(de,S)=>{St(de,{get hidden(){return n(o)},get page(){return we.Auth}})},$$slots:{default:!0}})},Q=Se=>{var de=ue(),S=D(de);{var P=z=>{vt(z,{children:(K,U)=>{St(K,{get hidden(){return n(o)},get page(){return we.Signup}})},$$slots:{default:!0}})},k=z=>{var K=ue(),U=D(K);{var ge=ae=>{vt(ae,{children:(G,ee)=>{St(G,{get hidden(){return n(o)},get page(){return we.Signin}})},$$slots:{default:!0}})},_e=ae=>{var G=ue(),ee=D(G);{var le=Be=>{vt(Be,{children:(Xe,Je)=>{St(Xe,{get hidden(){return n(o)},get page(){return we.AccessKeys}})},$$slots:{default:!0}})},ke=Be=>{var Xe=ue(),Je=D(Xe);{var et=Fe=>{vt(Fe,{children:(We,Re)=>{St(We,{get hidden(){return n(o)},get page(){return we.Account}})},$$slots:{default:!0}})},ze=Fe=>{var We=ue(),Re=D(We);{var tt=qe=>{vt(qe,{children:(Mt,Dt)=>{St(Mt,{get hidden(){return n(o)},get page(){return we.ConfirmAccessKey}})},$$slots:{default:!0}})},Ze=qe=>{var Mt=ue(),Dt=D(Mt);{var Et=ba=>{vt(ba,{children:(kr,es)=>{St(kr,{get hidden(){return n(o)},get page(){return we.Exit}})},$$slots:{default:!0}})},pn=ba=>{var kr=ue(),es=D(kr);{var al=oo=>{var ts=ue(),rl=D(ts);{var ol=Sa=>{vt(Sa,{children:(Er,ns)=>{St(Er,{get hidden(){return n(o)},get page(){return we.Sync}})},$$slots:{default:!0}})},sl=Sa=>{var Er=ue(),ns=D(Er);{var il=Ca=>{vt(Ca,{children:(Pr,as)=>{St(Pr,{get hidden(){return n(o)},get page(){return we.Subscription}})},$$slots:{default:!0}})},ll=Ca=>{var Pr=ue(),as=D(Pr);{var cl=Ta=>{vt(Ta,{children:(so,ul)=>{St(so,{get hidden(){return n(o)},get page(){return we.About}})},$$slots:{default:!0}})},dl=Ta=>{vt(Ta,{children:(so,ul)=>{nv(so,{})},$$slots:{default:!0}})};V(as,Ta=>{e()===we.About?Ta(cl):Ta(dl,!1)},!0)}g(Ca,Pr)};V(ns,Ca=>{e()===we.Subscription?Ca(il):Ca(ll,!1)},!0)}g(Sa,Er)};V(rl,Sa=>{e()===we.Sync?Sa(ol):Sa(sl,!1)},!0)}g(oo,ts)};V(es,oo=>{e(),we.Extension,oo(al,!1)},!0)}g(ba,kr)};V(Dt,ba=>{e()===we.Exit?ba(Et):ba(pn,!1)},!0)}g(qe,Mt)};V(Re,qe=>{e()===we.ConfirmAccessKey?qe(tt):qe(Ze,!1)},!0)}g(Fe,We)};V(Je,Fe=>{e()===we.Account?Fe(et):Fe(ze,!1)},!0)}g(Be,Xe)};V(ee,Be=>{e()===we.AccessKeys?Be(le):Be(ke,!1)},!0)}g(ae,G)};V(U,ae=>{e()===we.Signin?ae(ge):ae(_e,!1)},!0)}g(z,K)};V(S,z=>{e()===we.Signup?z(P):z(k,!1)},!0)}g(Se,de)};V(ne,Se=>{e()===we.Auth?Se(J):Se(Q,!1)},!0)}g(Te,Pe)};V(E,Te=>{e()===we.InstallSuccess?Te(Y):Te(he,!1)},!0)}g(be,Ee)};V(te,be=>{e()===we.Install?be(ie):be(ce,!1)},!0)}g(B,$)};V(re,B=>{e()===we.AccountSetup?B(me):B(se,!1)},!0)}g(Z,W)};V(q,Z=>{e()===we.ExportData?Z(j):Z(oe,!1)},!0)}g(H,X)};V(R,H=>{e()===we.ImportData?H(A):H(M,!1)},!0)}g(w,C)};V(_,w=>{e()===we.Note?w(b):w(F,!1)},!0)}g(m,T)};V(v,m=>{e()===we.NewNote?m(h):m(p,!1)},!0)}g(u,d)};V(i,u=>{e()===we.Settings?u(l):u(c,!1)})}g(t,s)};var Gg=x("<!> <!>",1);function Yg(t,e){fe(e,!0);const a=Gc(e,["$$slots","$$events","$$legacy"]),{checkBlockedDialog:r,checkClosableDialog:o}=en(),{sidebarClose:s,getSidebarState:i}=Cr(),l=N(r),c=N(o),{getDialogPages:u}=Vt(),{getAccount:d}=Xo();let v=N(u),h=N(()=>d()!==void 0);const{checkMobileSize:p}=Za();let m=I(it([]));const T=N(p),{clearDialogPages:_,popDialogPage:b}=Vt(),{checkLeftStart:F}=en();let w=N(F);Oe(()=>{u().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const C=()=>{b()},R=()=>{_()};Oe(()=>{n(v),n(T),zt(()=>{if(n(T))n(v).length>=n(m).length||n(w)?f(m,n(v).map(Z=>({page:Z,shown:!0})),!0):f(m,n(m).map((Z,W)=>({page:Z.page,shown:W<n(v).length})),!0);else if(n(v).length>=n(m).length)f(m,n(v).map(Z=>({page:Z,shown:!0})),!0);else{if(n(v).length===0){f(m,[{page:n(m)[n(m).length-1].page,shown:!1}],!0);return}f(m,n(v).map(Z=>({page:Z,shown:!0})),!0)}})});const A=()=>{f(m,n(v).map(Z=>({page:Z,shown:!0})),!0)};var M=Gg(),H=D(M);{var X=Z=>{Ag(Z)};V(H,Z=>{n(h)&&Z(X)})}var q=L(H,2);{var j=Z=>{var W=ue(),re=D(W);En(re,19,()=>n(m),me=>me.page,(me,se,B)=>{const $=N(()=>n(se).page.split("?")[1]),te=N(()=>n(se).page.split("?")[0]),ie=N(()=>n(B)!==n(m).length-1&&!!n(m)[n(B)+1]?.shown),ce=N(()=>n(B)===0);{let be=N(()=>ys[n(te)]||""),Ee=N(()=>n(l)||n(ce)&&!n(c));zg(me,ko({get shown(){return n(se).shown},get title(){return n(be)},get hidden(){return n(ie)},get blocked(){return n(Ee)},onClose:C,onClosed:A},()=>a,{children:(E,Y)=>{ks(E,()=>n(te),()=>n($),()=>n(ie))},$$slots:{default:!0}}))}}),g(Z,W)},oe=Z=>{var W=ue(),re=D(W);{var me=se=>{const B=N(()=>n(m)[n(m).length-1].page.split("?")[1]),$=N(()=>n(m)[n(m).length-1].page.split("?")[0]),te=N(()=>n(m)[n(m).length-1].shown),ie=N(()=>n(m).length===1);{let ce=N(()=>ys[n($)]||""),be=N(()=>n(l)||!n(c)),Ee=N(()=>n(l)||n(ie)?void 0:C);Kg(se,{get shownDialog(){return n(te)},get title(){return n(ce)},get blockedDialog(){return n(be)},hiddenDialog:!1,get onStartBack(){return n(Ee)},onStartClose:R,onClosed:A,children:(E,Y)=>{ks(E,()=>n($),()=>n(B))},$$slots:{default:!0}})}};V(re,se=>{n(m).length>0&&se(me)},!0)}g(Z,W)};V(q,Z=>{p()?Z(j):Z(oe,!1)})}g(t,M),ve()}function Xg(t,e){fe(e,!1);let a=0;Ce(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),Ko(),ve()}const Jg=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var Zg=x('<div><button class="d p-11qzo3t"><!> <span class="e p-11qzo3t"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),Qg=x('<!> <!> <!> <!> <main><div class="a p-11qzo3t"><div class="b p-11qzo3t"><!></div></div> <div class="c p-11qzo3t"><!></div></main> <!>',1);function $g(t,e){fe(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=jt(),{hasDialogPage:s}=Vt(),{setScrollContainer:i}=ro(),{getAccount:l,init:c}=Xo(),{isInitedNotes:u}=At(),{isInitedSettings:d}=qa(),{getDialogPages:v}=Vt(),{createBroadcastChannel:h,tabId:p}=no(),m=h(),{getSidebarState:T}=Cr(),{setClosableDialog:_}=en(),{getViewMode:b}=qa(),F=()=>{Jg()?a(`${Gt}=${we.AccountSetup}`):a(`${Gt}=${we.Install}`)};Ce(()=>{c(P=>{P===void 0?F():(s(we.AccountSetup)&&a(""),P?f(M,P):f(M,null))});const S=async P=>{const k=JSON.parse(P.data);if(k.tabId&&k.tabId===p)return;const z=k;z.type==="initLocalAccount"||z.type==="initCloudAccount"||z.type==="updateAccount"||z.type==="disconnectCloudAccount"?a(""):z.type==="exit"&&F()};return m.addEventListener(S),()=>m.removeEventListener(S)});const w=Dn();Ce(async()=>{await new Promise(S=>setTimeout(S,250)),await pi(),w.working=!0});let C=I(!1),R=0,A=N(()=>v().length>0),M=N(l),H=N(u),X=N(d),q=I(null);const j=()=>{n(q)&&n(q).scrollTo({top:0})};Oe(()=>{_(n(M)!==void 0)}),Oe(()=>{i(n(q))});const oe=()=>{if(n(q)){const S=n(q).scrollTop||0;S===0?f(C,!1):!n(C)&&R>S?f(C,!0):n(C)&&R+50<S&&f(C,!1),R=S}},Z=()=>{oe()};Oe(()=>(n(q)?.addEventListener("scroll",Z),window.addEventListener("resize",Z),()=>{n(q)?.removeEventListener("scroll",Z),window.removeEventListener("resize",Z)}));const W=N(T);let re=N(()=>w.swipingRatio);const me=()=>{const S=new URLSearchParams(o());if(s(we.NewNote)){const P=S.get("noteId")||"";return r(P?S.toString().replace(we.NewNote,`${we.Note}?id=${encodeURIComponent(P)}`):S)}return r(S)},se=async()=>{const S=await chrome.windows.getCurrent();if(!S)return;const P=420,k=700,z=(S.left||0)+(S.width||0)-P-10,K=(S.top||0)+90;await chrome.windows.create({url:me(),type:"popup",width:P,height:k,left:z,top:K}),window.close()},B=N(b),$=N(()=>n(B)==="popup"||n(B)==="sidebar"?{onOpenWindow:se,openWindowHref:me()}:{});var te=Qg(),ie=D(te);Xg(ie,{});var ce=L(ie,2);xu(ce,{});var be=L(ce,2);Qo(be,{});var Ee=L(be,2);Ku(Ee,{});var E=L(Ee,2),Y=y(E),he=y(Y),Te=y(he);{var Pe=S=>{$f(S,ko(()=>n($)))};V(Te,S=>{n(X)&&n(M)!==void 0&&S(Pe)})}var ne=L(Y,2),J=y(ne);{var Q=S=>{Yg(S,ko(()=>n($)))};V(J,S=>{n(H)&&n(X)&&S(Q)})}Ye(E,S=>f(q,S),()=>n(q));var Se=L(E,2);{var de=S=>{var P=Zg(),k=y(P);k.__click=j;var z=y(k);lt(z,{children:(ge,_e)=>{var ae=De("top");g(ge,ae)}});var K=L(z,2),U=y(K);pe(U,()=>({"--rotate":"90deg","--size":"28px"})),ye(U.lastChild,{name:"back"}),xe(()=>{Ua(P,`--swiping-ratio: ${n(re)}; --transition-timing-default: ${w.duration}s;`),$e(P,1,rt({i:!0,g:w.working&&!w.isSwiping,j:n(A)||n(W)!=="closed"}),"p-11qzo3t")}),g(S,P)};V(Se,S=>{n(C)&&S(de)})}xe(()=>{Ua(E,`--swiping-ratio: ${n(re)}; --transition-timing-default: ${w.duration}s;`),$e(E,1,rt({f:!0,g:w.working&&!w.isSwiping,h:n(W)!=="closed"}),"p-11qzo3t")}),g(t,te),ve()}st(["click"]);function eh(t){Qd(t,{children:(e,a)=>{$g(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Nc(eh,{target:document.getElementById("app")});export{Nv as $,N as A,xt as B,jt as C,Xo as D,Ko as E,hr as F,rn as G,rv as H,ye as I,At as J,Za as K,ya as L,qa as M,Qi as N,On as O,we as P,Ye as Q,ih as R,sh as S,iu as T,lu as U,lt as V,Gt as W,vr as X,zt as Y,ht as Z,Pa as _,f as a,no as a0,rh as a1,qc as a2,Jg as a3,ah as a4,Ne as a5,Ua as a6,oh as a7,I as b,y as c,pe as d,En as e,x as f,n as g,at as h,g as i,V as j,$e as k,rt as l,ve as m,D as n,Ce as o,fe as p,ot as q,st as r,L as s,xe as t,Vt as u,en as v,it as w,Oe as x,ue as y,De as z};
