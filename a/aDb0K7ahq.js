const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aAuazKjJP.js","a/aCeYg3FOS.css","a/aBechjp-9.js","a/a9q_jSmK4.js","a/abA9hIFUQ.js","a/aBrkJtqMH.css","a/aBiXcvyCL.js","a/aDB02xhFr.css","a/a4Rvv9fEt.js","a/a54d_SC5m.css","a/aDiYLo_1M.js","a/aCpa8lgv9.js","a/afGUkjeV7.css","a/aBviQ7Q24.js","a/aY1d2PU1k.css","a/aB7mPEgB9.js","a/al01U7Rli.js","a/aCpd7MTd8.css","a/aDOo3VJJU.js","a/aenMKNzfI.css","a/aC969LWc5.css","a/aCKOqdS3m.js","a/aCeh8XjKC.css","a/aDUiT5JIX.js","a/aCBPoPn5g.css","a/aCNDGd_Sf.js","a/aK1a0NeEW.css","a/aBA4dTYpi.js","a/aBem4Ctjp.css","a/aC0XHFcoP.js","a/aBdnakgrk.css","a/aRp5sWRf5.js","a/aDzsMVVo5.css","a/aBbNgC3Vh.js","a/aCH18nfIo.css","a/aCNnIHNsT.js","a/aBigPoPR-.js","a/aCb6DfA6m.css","a/aBXXekE7N.js","a/aBlIc4kt_.css"])))=>i.map(i=>d[i]);
var Sl=Object.defineProperty;var gs=t=>{throw TypeError(t)};var kl=(t,e,a)=>e in t?Sl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Ot=(t,e,a)=>kl(t,typeof e!="symbol"?e+"":e,a),yo=(t,e,a)=>e.has(t)||gs("Cannot "+a);var W=(t,e,a)=>(yo(t,e,"read from private field"),a?a.call(t):e.get(t)),We=(t,e,a)=>e.has(t)?gs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),Oe=(t,e,a,r)=>(yo(t,e,"write to private field"),r?r.call(t,a):e.set(t,a),a),it=(t,e,a)=>(yo(t,e,"access private method"),a);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=a(o);fetch(o.href,s)}})();const xl=t=>{let e=localStorage.getItem("colorScheme");e!=="dark"&&e!=="light"&&(e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),document.documentElement.setAttribute("data-color-scheme",e);const a=document.createElement("meta");a.name="theme-color",a.content=e==="dark"?"#202020":"#fff",document.head.appendChild(a),t?.(e)};xl(t=>{const e=document.createElement("meta");e.name="apple-mobile-web-app-status-bar-style",e.content=t==="dark"?"black":"black-translucent",document.head.appendChild(e)});const Tl=()=>{window.addEventListener("beforeinstallprompt",t=>{t.preventDefault(),window.installPrompt=t})};Tl();const xo=!1;var $o=Array.isArray,El=Array.prototype.indexOf,no=Array.from,Pl=Object.defineProperty,na=Object.getOwnPropertyDescriptor,Us=Object.getOwnPropertyDescriptors,Ws=Object.prototype,Nl=Array.prototype,ao=Object.getPrototypeOf,hs=Object.isExtensible;function sr(t){return typeof t=="function"}const Ye=()=>{};function Al(t){return typeof t?.then=="function"}function Ml(t){return t()}function To(t){for(var e=0;e<t.length;e++)t[e]()}function Vs(){var t,e,a=new Promise((r,o)=>{t=r,e=o});return{promise:a,resolve:t,reject:e}}function Dl(t,e,a=!1){return t===void 0?a?e():e:t}const Pt=2,es=4,ro=8,Il=1<<24,Un=16,Wn=32,Na=64,oo=128,fn=512,Dt=1024,Kt=2048,Sn=4096,Xt=8192,Ln=16384,ts=32768,ca=65536,ps=1<<17,Ks=1<<18,tr=1<<19,qs=1<<20,Dn=1<<25,Ta=32768,Eo=1<<21,ns=1<<22,aa=1<<23,ra=Symbol("$state"),Ys=Symbol("legacy props"),Ll=Symbol(""),ja=new class extends Error{constructor(){super(...arguments);Ot(this,"name","StaleReactionError");Ot(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Gs(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Rl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Ol(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Fl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function zl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Bl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function jl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Hl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ul(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Wl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Vl(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Kl=1,ql=2,Xs=4,Yl=8,Gl=16,Xl=1,Jl=2,Zl=4,Ql=8,$l=16,ec=1,tc=2,Tt=Symbol(),nc="http://www.w3.org/1999/xhtml";function ac(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Js(t){return t===this.v}function rc(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Zs(t){return!rc(t,this.v)}let nr=!1,oc=!1;function sc(){nr=!0}const ic=[];function ga(t,e=!1,a=!1){return zr(t,new Map,"",ic,null,a)}function zr(t,e,a,r,o=null,s=!1){if(typeof t=="object"&&t!==null){var i=e.get(t);if(i!==void 0)return i;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if($o(t)){var l=Array(t.length);e.set(t,l),o!==null&&e.set(o,l);for(var u=0;u<t.length;u+=1){var c=t[u];u in t&&(l[u]=zr(c,e,a,r,null,s))}return l}if(ao(t)===Ws){l={},e.set(t,l),o!==null&&e.set(o,l);for(var d in t)l[d]=zr(t[d],e,a,r,null,s);return l}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function"&&!s)return zr(t.toJSON(),e,a,r,t)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}let rt=null;function Xa(t){rt=t}function vt(t){return Qs().get(t)}function gt(t,e){return Qs().set(t,e),e}function me(t,e=!1,a){rt={p:rt,i:!1,c:null,e:null,s:t,x:null,l:nr&&!e?{s:null,u:null,$:[]}:null}}function _e(t){var e=rt,a=e.e;if(a!==null){e.e=null;for(var r of a)_i(r)}return t!==void 0&&(e.x=t),e.i=!0,rt=e.p,t??{}}function ar(){return!nr||rt!==null&&rt.l===null}function Qs(t){return rt===null&&Gs(),rt.c??(rt.c=new Map(lc(rt)||void 0))}function lc(t){let e=t.p;for(;e!==null;){const a=e.c;if(a!==null)return a;e=e.p}return null}let pa=[];function $s(){var t=pa;pa=[],To(t)}function Aa(t){if(pa.length===0&&!Wa){var e=pa;queueMicrotask(()=>{e===pa&&$s()})}pa.push(t)}function cc(){for(;pa.length>0;)$s()}function ei(t){var e=Ge;if(e===null)return Ke.f|=aa,t;if((e.f&ts)===0){if((e.f&oo)===0)throw t;e.b.error(t)}else Ja(t,e)}function Ja(t,e){for(;e!==null;){if((e.f&oo)!==0)try{e.b.error(t);return}catch(a){t=a}e=e.parent}throw t}const Lr=new Set;let Je=null,Br=null,sn=null,rn=[],so=null,Po=!1,Wa=!1;var Va,Ka,ma,_a,Sr,qa,Ya,Et,No,lr,Ao,ti,ni;const Zr=class Zr{constructor(){We(this,Et);Ot(this,"committed",!1);Ot(this,"current",new Map);Ot(this,"previous",new Map);We(this,Va,new Set);We(this,Ka,new Set);We(this,ma,0);We(this,_a,0);We(this,Sr,null);We(this,qa,new Set);We(this,Ya,new Set);Ot(this,"skipped_effects",new Set);Ot(this,"is_fork",!1)}is_deferred(){return this.is_fork||W(this,_a)>0}process(e){rn=[],Br=null,this.apply();var a={parent:null,effect:null,effects:[],render_effects:[]};for(const r of e)it(this,Et,No).call(this,r,a);this.is_fork||it(this,Et,ti).call(this),this.is_deferred()?(it(this,Et,lr).call(this,a.effects),it(this,Et,lr).call(this,a.render_effects)):(Br=this,Je=null,ms(a.render_effects),ms(a.effects),Br=null,W(this,Sr)?.resolve()),sn=null}capture(e,a){this.previous.has(e)||this.previous.set(e,a),(e.f&aa)===0&&(this.current.set(e,e.v),sn?.set(e,e.v))}activate(){Je=this,this.apply()}deactivate(){Je===this&&(Je=null,sn=null)}flush(){if(this.activate(),rn.length>0){if(ri(),Je!==null&&Je!==this)return}else W(this,ma)===0&&this.process([]);this.deactivate()}discard(){for(const e of W(this,Ka))e(this);W(this,Ka).clear()}increment(e){Oe(this,ma,W(this,ma)+1),e&&Oe(this,_a,W(this,_a)+1)}decrement(e){Oe(this,ma,W(this,ma)-1),e&&Oe(this,_a,W(this,_a)-1),this.revive()}revive(){for(const e of W(this,qa))W(this,Ya).delete(e),Lt(e,Kt),Ea(e);for(const e of W(this,Ya))Lt(e,Sn),Ea(e);this.flush()}oncommit(e){W(this,Va).add(e)}ondiscard(e){W(this,Ka).add(e)}settled(){return(W(this,Sr)??Oe(this,Sr,Vs())).promise}static ensure(){if(Je===null){const e=Je=new Zr;Lr.add(Je),Wa||Zr.enqueue(()=>{Je===e&&e.flush()})}return Je}static enqueue(e){Aa(e)}apply(){}};Va=new WeakMap,Ka=new WeakMap,ma=new WeakMap,_a=new WeakMap,Sr=new WeakMap,qa=new WeakMap,Ya=new WeakMap,Et=new WeakSet,No=function(e,a){e.f^=Dt;for(var r=e.first;r!==null;){var o=r.f,s=(o&(Wn|Na))!==0,i=s&&(o&Dt)!==0,l=i||(o&Xt)!==0||this.skipped_effects.has(r);if((r.f&oo)!==0&&r.b?.is_pending()&&(a={parent:a,effect:r,effects:[],render_effects:[]}),!l&&r.fn!==null){s?r.f^=Dt:(o&es)!==0?a.effects.push(r):Nr(r)&&((r.f&Un)!==0&&W(this,qa).add(r),_r(r));var u=r.first;if(u!==null){r=u;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===a.effect&&(it(this,Et,lr).call(this,a.effects),it(this,Et,lr).call(this,a.render_effects),a=a.parent),r=c.next,c=c.parent}},lr=function(e){for(const a of e)(a.f&Kt)!==0?W(this,qa).add(a):(a.f&Sn)!==0&&W(this,Ya).add(a),it(this,Et,Ao).call(this,a.deps),Lt(a,Dt)},Ao=function(e){if(e!==null)for(const a of e)(a.f&Pt)===0||(a.f&Ta)===0||(a.f^=Ta,it(this,Et,Ao).call(this,a.deps))},ti=function(){if(W(this,_a)===0){for(const e of W(this,Va))e();W(this,Va).clear()}W(this,ma)===0&&it(this,Et,ni).call(this)},ni=function(){var s;if(Lr.size>1){this.previous.clear();var e=sn,a=!0,r={parent:null,effect:null,effects:[],render_effects:[]};for(const i of Lr){if(i===this){a=!1;continue}const l=[];for(const[c,d]of this.current){if(i.current.has(c))if(a&&d!==i.current.get(c))i.current.set(c,d);else continue;l.push(c)}if(l.length===0)continue;const u=[...i.current.keys()].filter(c=>!this.current.has(c));if(u.length>0){var o=rn;rn=[];const c=new Set,d=new Map;for(const v of l)oi(v,u,c,d);if(rn.length>0){Je=i,i.apply();for(const v of rn)it(s=i,Et,No).call(s,v,r);i.deactivate()}rn=o}}Je=null,sn=e}this.committed=!0,Lr.delete(this)};let yn=Zr;function ai(t){var e=Wa;Wa=!0;try{for(var a;;){if(cc(),rn.length===0&&(Je?.flush(),rn.length===0))return so=null,a;ri()}}finally{Wa=e}}function ri(){var t=ka;Po=!0;var e=null;try{var a=0;for(Kr(!0);rn.length>0;){var r=yn.ensure();if(a++>1e3){var o,s;dc()}r.process(rn),oa.clear()}}finally{Po=!1,Kr(t),so=null}}function dc(){try{Bl()}catch(t){Ja(t,so)}}let Nn=null;function ms(t){var e=t.length;if(e!==0){for(var a=0;a<e;){var r=t[a++];if((r.f&(Ln|Xt))===0&&Nr(r)&&(Nn=new Set,_r(r),r.deps===null&&r.first===null&&r.nodes===null&&(r.teardown===null&&r.ac===null?bi(r):r.fn=null),Nn?.size>0)){oa.clear();for(const o of Nn){if((o.f&(Ln|Xt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)Nn.has(i)&&(Nn.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const u=s[l];(u.f&(Ln|Xt))===0&&_r(u)}}Nn.clear()}}Nn=null}}function oi(t,e,a,r){if(!a.has(t)&&(a.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Pt)!==0?oi(o,e,a,r):(s&(ns|Un))!==0&&(s&Kt)===0&&si(o,e,r)&&(Lt(o,Kt),Ea(o))}}function si(t,e,a){const r=a.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Pt)!==0&&si(o,e,a))return a.set(o,!0),!0}return a.set(t,!1),!1}function Ea(t){for(var e=so=t;e.parent!==null;){e=e.parent;var a=e.f;if(Po&&e===Ge&&(a&Un)!==0&&(a&Ks)===0)return;if((a&(Na|Wn))!==0){if((a&Dt)===0)return;e.f^=Dt}}rn.push(e)}function uc(t){let e=0,a=kn(0),r;return()=>{pr()&&(n(a),lo(()=>(e===0&&(r=zt(()=>t(()=>sa(a)))),e+=1,()=>{Aa(()=>{e-=1,e===0&&(r?.(),r=void 0,sa(a))})})))}}var fc=ca|tr|oo;function vc(t,e,a){new gc(t,e,a)}var tn,nn,Qo,hn,wa,pn,an,Ut,mn,Mn,Zn,ya,Qn,ba,$n,Qr,kt,hc,pc,Mo,jr,Hr,Do;class gc{constructor(e,a,r){We(this,kt);Ot(this,"parent");We(this,tn,!1);We(this,nn);We(this,Qo,null);We(this,hn);We(this,wa);We(this,pn);We(this,an,null);We(this,Ut,null);We(this,mn,null);We(this,Mn,null);We(this,Zn,null);We(this,ya,0);We(this,Qn,0);We(this,ba,!1);We(this,$n,null);We(this,Qr,uc(()=>(Oe(this,$n,kn(W(this,ya))),()=>{Oe(this,$n,null)})));Oe(this,nn,e),Oe(this,hn,a),Oe(this,wa,r),this.parent=Ge.b,Oe(this,tn,!!W(this,hn).pending),Oe(this,pn,rr(()=>{Ge.b=this;{var o=it(this,kt,Mo).call(this);try{Oe(this,an,on(()=>r(o)))}catch(s){this.error(s)}W(this,Qn)>0?it(this,kt,Hr).call(this):Oe(this,tn,!1)}return()=>{W(this,Zn)?.remove()}},fc))}is_pending(){return W(this,tn)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!W(this,hn).pending}update_pending_count(e){it(this,kt,Do).call(this,e),Oe(this,ya,W(this,ya)+e),W(this,$n)&&Rn(W(this,$n),W(this,ya))}get_effect_pending(){return W(this,Qr).call(this),n(W(this,$n))}error(e){var a=W(this,hn).onerror;let r=W(this,hn).failed;if(W(this,ba)||!a&&!r)throw e;W(this,an)&&(Vt(W(this,an)),Oe(this,an,null)),W(this,Ut)&&(Vt(W(this,Ut)),Oe(this,Ut,null)),W(this,mn)&&(Vt(W(this,mn)),Oe(this,mn,null));var o=!1,s=!1;const i=()=>{if(o){ac();return}o=!0,s&&Vl(),yn.ensure(),Oe(this,ya,0),W(this,mn)!==null&&Sa(W(this,mn),()=>{Oe(this,mn,null)}),Oe(this,tn,this.has_pending_snippet()),Oe(this,an,it(this,kt,jr).call(this,()=>(Oe(this,ba,!1),on(()=>W(this,wa).call(this,W(this,nn)))))),W(this,Qn)>0?it(this,kt,Hr).call(this):Oe(this,tn,!1)};var l=Ke;try{Wt(null),s=!0,a?.(e,i),s=!1}catch(u){Ja(u,W(this,pn)&&W(this,pn).parent)}finally{Wt(l)}r&&Aa(()=>{Oe(this,mn,it(this,kt,jr).call(this,()=>{yn.ensure(),Oe(this,ba,!0);try{return on(()=>{r(W(this,nn),()=>e,()=>i)})}catch(u){return Ja(u,W(this,pn).parent),null}finally{Oe(this,ba,!1)}}))})}}tn=new WeakMap,nn=new WeakMap,Qo=new WeakMap,hn=new WeakMap,wa=new WeakMap,pn=new WeakMap,an=new WeakMap,Ut=new WeakMap,mn=new WeakMap,Mn=new WeakMap,Zn=new WeakMap,ya=new WeakMap,Qn=new WeakMap,ba=new WeakMap,$n=new WeakMap,Qr=new WeakMap,kt=new WeakSet,hc=function(){try{Oe(this,an,on(()=>W(this,wa).call(this,W(this,nn))))}catch(e){this.error(e)}Oe(this,tn,!1)},pc=function(){const e=W(this,hn).pending;e&&(Oe(this,Ut,on(()=>e(W(this,nn)))),yn.enqueue(()=>{var a=it(this,kt,Mo).call(this);Oe(this,an,it(this,kt,jr).call(this,()=>(yn.ensure(),on(()=>W(this,wa).call(this,a))))),W(this,Qn)>0?it(this,kt,Hr).call(this):(Sa(W(this,Ut),()=>{Oe(this,Ut,null)}),Oe(this,tn,!1))}))},Mo=function(){var e=W(this,nn);return W(this,tn)&&(Oe(this,Zn,On()),W(this,nn).before(W(this,Zn)),e=W(this,Zn)),e},jr=function(e){var a=Ge,r=Ke,o=rt;xn(W(this,pn)),Wt(W(this,pn)),Xa(W(this,pn).ctx);try{return e()}catch(s){return ei(s),null}finally{xn(a),Wt(r),Xa(o)}},Hr=function(){const e=W(this,hn).pending;W(this,an)!==null&&(Oe(this,Mn,document.createDocumentFragment()),W(this,Mn).append(W(this,Zn)),ki(W(this,an),W(this,Mn))),W(this,Ut)===null&&Oe(this,Ut,on(()=>e(W(this,nn))))},Do=function(e){var a;if(!this.has_pending_snippet()){this.parent&&it(a=this.parent,kt,Do).call(a,e);return}Oe(this,Qn,W(this,Qn)+e),W(this,Qn)===0&&(Oe(this,tn,!1),W(this,Ut)&&Sa(W(this,Ut),()=>{Oe(this,Ut,null)}),W(this,Mn)&&(W(this,nn).before(W(this,Mn)),Oe(this,Mn,null)))};function mc(t,e,a,r){const o=ar()?Tr:Er;if(a.length===0&&t.length===0){r(e.map(o));return}var s=Je,i=Ge,l=ii();function u(){Promise.all(a.map(c=>_c(c))).then(c=>{l();try{r([...e.map(o),...c])}catch(d){(i.f&Ln)===0&&Ja(d,i)}s?.deactivate(),hr()}).catch(c=>{Ja(c,i)})}t.length>0?Promise.all(t).then(()=>{l();try{return u()}finally{s?.deactivate(),hr()}}):u()}function ii(){var t=Ge,e=Ke,a=rt,r=Je;return function(s=!0){xn(t),Wt(e),Xa(a),s&&r?.activate()}}function hr(){xn(null),Wt(null),Xa(null)}function Tr(t){var e=Pt|Kt,a=Ke!==null&&(Ke.f&Pt)!==0?Ke:null;return Ge!==null&&(Ge.f|=tr),{ctx:rt,deps:null,effects:null,equals:Js,f:e,fn:t,reactions:null,rv:0,v:Tt,wv:0,parent:a??Ge,ac:null}}function _c(t,e){let a=Ge;a===null&&Rl();var r=a.b,o=void 0,s=kn(Tt),i=!Ke,l=new Map;return Nc(()=>{var u=Vs();o=u.promise;try{Promise.resolve(t()).then(u.resolve,u.reject).then(()=>{c===Je&&c.committed&&c.deactivate(),hr()})}catch(h){u.reject(h),hr()}var c=Je;if(i){var d=!r.is_pending();r.update_pending_count(1),c.increment(d),l.get(c)?.reject(ja),l.delete(c),l.set(c,u)}const v=(h,p=void 0)=>{if(c.activate(),p)p!==ja&&(s.f|=aa,Rn(s,p));else{(s.f&aa)!==0&&(s.f^=aa),Rn(s,h);for(const[m,T]of l){if(l.delete(m),m===c)break;T.reject(ja)}}i&&(r.update_pending_count(-1),c.decrement(d))};u.promise.then(v,h=>v(null,h||"unknown"))}),mi(()=>{for(const u of l.values())u.reject(ja)}),new Promise(u=>{function c(d){function v(){d===o?u(s):c(o)}d.then(v,v)}c(o)})}function M(t){const e=Tr(t);return xi(e),e}function Er(t){const e=Tr(t);return e.equals=Zs,e}function li(t){var e=t.effects;if(e!==null){t.effects=null;for(var a=0;a<e.length;a+=1)Vt(e[a])}}function wc(t){for(var e=t.parent;e!==null;){if((e.f&Pt)===0)return(e.f&Ln)===0?e:null;e=e.parent}return null}function as(t){var e,a=Ge;xn(wc(t));try{t.f&=~Ta,li(t),e=Ni(t)}finally{xn(a)}return e}function ci(t){var e=as(t);if(t.equals(e)||(Je?.is_fork||(t.v=e),t.wv=Ei()),!Ma)if(sn!==null)(pr()||Je?.is_fork)&&sn.set(t,e);else{var a=(t.f&fn)===0?Sn:Dt;Lt(t,a)}}let Io=new Set;const oa=new Map;let di=!1;function kn(t,e){var a={f:0,v:t,reactions:null,equals:Js,rv:0,wv:0};return a}function L(t,e){const a=kn(t);return xi(a),a}function Lo(t,e=!1,a=!0){var o;const r=kn(t);return e||(r.equals=Zs),nr&&a&&rt!==null&&rt.l!==null&&((o=rt.l).s??(o.s=[])).push(r),r}function f(t,e,a=!1){Ke!==null&&(!bn||(Ke.f&ps)!==0)&&ar()&&(Ke.f&(Pt|Un|ns|ps))!==0&&!Fn?.includes(t)&&Wl();let r=a?ft(e):e;return Rn(t,r)}function Rn(t,e){if(!t.equals(e)){var a=t.v;Ma?oa.set(t,e):oa.set(t,a),t.v=e;var r=yn.ensure();r.capture(t,a),(t.f&Pt)!==0&&((t.f&Kt)!==0&&as(t),Lt(t,(t.f&fn)!==0?Dt:Sn)),t.wv=Ei(),ui(t,Kt),ar()&&Ge!==null&&(Ge.f&Dt)!==0&&(Ge.f&(Wn|Na))===0&&($t===null?Dc([t]):$t.push(t)),!r.is_fork&&Io.size>0&&!di&&yc()}return e}function yc(){di=!1;var t=ka;Kr(!0);const e=Array.from(Io);try{for(const a of e)(a.f&Dt)!==0&&Lt(a,Sn),Nr(a)&&_r(a)}finally{Kr(t)}Io.clear()}function sa(t){f(t,t.v+1)}function ui(t,e){var a=t.reactions;if(a!==null)for(var r=ar(),o=a.length,s=0;s<o;s++){var i=a[s],l=i.f;if(!(!r&&i===Ge)){var u=(l&Kt)===0;if(u&&Lt(i,e),(l&Pt)!==0){var c=i;sn?.delete(c),(l&Ta)===0&&(l&fn&&(i.f|=Ta),ui(c,Sn))}else u&&((l&Un)!==0&&Nn!==null&&Nn.add(i),Ea(i))}}}function ft(t){if(typeof t!="object"||t===null||ra in t)return t;const e=ao(t);if(e!==Ws&&e!==Nl)return t;var a=new Map,r=$o(t),o=L(0),s=zn,i=l=>{if(zn===s)return l();var u=Ke,c=zn;Wt(null),bs(s);var d=l();return Wt(u),bs(c),d};return r&&a.set("length",L(t.length)),new Proxy(t,{defineProperty(l,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Hl();var d=a.get(u);return d===void 0?d=i(()=>{var v=L(c.value);return a.set(u,v),v}):f(d,c.value,!0),!0},deleteProperty(l,u){var c=a.get(u);if(c===void 0){if(u in l){const d=i(()=>L(Tt));a.set(u,d),sa(o)}}else f(c,Tt),sa(o);return!0},get(l,u,c){if(u===ra)return t;var d=a.get(u),v=u in l;if(d===void 0&&(!v||na(l,u)?.writable)&&(d=i(()=>{var p=ft(v?l[u]:Tt),m=L(p);return m}),a.set(u,d)),d!==void 0){var h=n(d);return h===Tt?void 0:h}return Reflect.get(l,u,c)},getOwnPropertyDescriptor(l,u){var c=Reflect.getOwnPropertyDescriptor(l,u);if(c&&"value"in c){var d=a.get(u);d&&(c.value=n(d))}else if(c===void 0){var v=a.get(u),h=v?.v;if(v!==void 0&&h!==Tt)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(l,u){if(u===ra)return!0;var c=a.get(u),d=c!==void 0&&c.v!==Tt||Reflect.has(l,u);if(c!==void 0||Ge!==null&&(!d||na(l,u)?.writable)){c===void 0&&(c=i(()=>{var h=d?ft(l[u]):Tt,p=L(h);return p}),a.set(u,c));var v=n(c);if(v===Tt)return!1}return d},set(l,u,c,d){var v=a.get(u),h=u in l;if(r&&u==="length")for(var p=c;p<v.v;p+=1){var m=a.get(p+"");m!==void 0?f(m,Tt):p in l&&(m=i(()=>L(Tt)),a.set(p+"",m))}if(v===void 0)(!h||na(l,u)?.writable)&&(v=i(()=>L(void 0)),f(v,ft(c)),a.set(u,v));else{h=v.v!==Tt;var T=i(()=>ft(c));f(v,T)}var _=Reflect.getOwnPropertyDescriptor(l,u);if(_?.set&&_.set.call(d,c),!h){if(r&&typeof u=="string"){var b=a.get("length"),R=Number(u);Number.isInteger(R)&&R>=b.v&&f(b,R+1)}sa(o)}return!0},ownKeys(l){n(o);var u=Reflect.ownKeys(l).filter(v=>{var h=a.get(v);return h===void 0||h.v!==Tt});for(var[c,d]of a)d.v!==Tt&&!(c in l)&&u.push(c);return u},setPrototypeOf(){Ul()}})}var _s,fi,vi,gi;function bc(){if(_s===void 0){_s=window,fi=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,a=Text.prototype;vi=na(e,"firstChild").get,gi=na(e,"nextSibling").get,hs(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),hs(a)&&(a.__t=void 0)}}function On(t=""){return document.createTextNode(t)}function Za(t){return vi.call(t)}function Pr(t){return gi.call(t)}function C(t,e){return Za(t)}function A(t,e=!1){{var a=Za(t);return a instanceof Comment&&a.data===""?Pr(a):a}}function I(t,e=1,a=!1){let r=t;for(;e--;)r=Pr(r);return r}function Cc(t){t.textContent=""}function hi(){return!1}let ws=!1;function Sc(){ws||(ws=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function io(t){var e=Ke,a=Ge;Wt(null),xn(null);try{return t()}finally{Wt(e),xn(a)}}function kc(t,e,a,r=a){t.addEventListener(e,()=>io(a));const o=t.__on_r;o?t.__on_r=()=>{o(),r(!0)}:t.__on_r=()=>r(!0),Sc()}function pi(t){Ge===null&&(Ke===null&&zl(),Fl()),Ma&&Ol()}function xc(t,e){var a=e.last;a===null?e.last=e.first=t:(a.next=t,t.prev=a,e.last=t)}function Tn(t,e,a){var r=Ge;r!==null&&(r.f&Xt)!==0&&(t|=Xt);var o={ctx:rt,deps:null,nodes:null,f:t|Kt|fn,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,wv:0,ac:null};if(a)try{_r(o),o.f|=ts}catch(l){throw Vt(o),l}else e!==null&&Ea(o);var s=o;if(a&&s.deps===null&&s.teardown===null&&s.nodes===null&&s.first===s.last&&(s.f&tr)===0&&(s=s.first,(t&Un)!==0&&(t&ca)!==0&&s!==null&&(s.f|=ca)),s!==null&&(s.parent=r,r!==null&&xc(s,r),Ke!==null&&(Ke.f&Pt)!==0&&(t&Na)===0)){var i=Ke;(i.effects??(i.effects=[])).push(s)}return o}function pr(){return Ke!==null&&!bn}function mi(t){const e=Tn(ro,null,!1);return Lt(e,Dt),e.teardown=t,e}function Be(t){pi();var e=Ge.f,a=!Ke&&(e&Wn)!==0&&(e&ts)===0;if(a){var r=rt;(r.e??(r.e=[])).push(t)}else return _i(t)}function _i(t){return Tn(es|qs,t,!1)}function Tc(t){return pi(),Tn(ro|qs,t,!0)}function Ec(t){yn.ensure();const e=Tn(Na|tr,t,!0);return(a={})=>new Promise(r=>{a.outro?Sa(e,()=>{Vt(e),r(void 0)}):(Vt(e),r(void 0))})}function Pc(t){return Tn(es,t,!1)}function Nc(t){return Tn(ns|tr,t,!0)}function lo(t,e=0){return Tn(ro|e,t,!0)}function Pe(t,e=[],a=[],r=[]){mc(r,e,a,o=>{Tn(ro,()=>t(...o.map(n)),!0)})}function rr(t,e=0){var a=Tn(Un|e,t,!0);return a}function on(t){return Tn(Wn|tr,t,!0)}function wi(t){var e=t.teardown;if(e!==null){const a=Ma,r=Ke;ys(!0),Wt(null);try{e.call(null)}finally{ys(a),Wt(r)}}}function yi(t,e=!1){var a=t.first;for(t.first=t.last=null;a!==null;){const o=a.ac;o!==null&&io(()=>{o.abort(ja)});var r=a.next;(a.f&Na)!==0?a.parent=null:Vt(a,e),a=r}}function Ac(t){for(var e=t.first;e!==null;){var a=e.next;(e.f&Wn)===0&&Vt(e),e=a}}function Vt(t,e=!0){var a=!1;(e||(t.f&Ks)!==0)&&t.nodes!==null&&t.nodes.end!==null&&(Mc(t.nodes.start,t.nodes.end),a=!0),yi(t,e&&!a),qr(t,0),Lt(t,Ln);var r=t.nodes&&t.nodes.t;if(r!==null)for(const s of r)s.stop();wi(t);var o=t.parent;o!==null&&o.first!==null&&bi(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes=t.ac=null}function Mc(t,e){for(;t!==null;){var a=t===e?null:Pr(t);t.remove(),t=a}}function bi(t){var e=t.parent,a=t.prev,r=t.next;a!==null&&(a.next=r),r!==null&&(r.prev=a),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=a))}function Sa(t,e,a=!0){var r=[];Ci(t,r,!0);var o=()=>{a&&Vt(t),e&&e()},s=r.length;if(s>0){var i=()=>--s||o();for(var l of r)l.out(i)}else o()}function Ci(t,e,a){if((t.f&Xt)===0){t.f^=Xt;var r=t.nodes&&t.nodes.t;if(r!==null)for(const l of r)(l.is_global||a)&&e.push(l);for(var o=t.first;o!==null;){var s=o.next,i=(o.f&ca)!==0||(o.f&Wn)!==0&&(t.f&Un)!==0;Ci(o,e,i?a:!1),o=s}}}function rs(t){Si(t,!0)}function Si(t,e){if((t.f&Xt)!==0){t.f^=Xt,(t.f&Dt)===0&&(Lt(t,Kt),Ea(t));for(var a=t.first;a!==null;){var r=a.next,o=(a.f&ca)!==0||(a.f&Wn)!==0;Si(a,o?e:!1),a=r}var s=t.nodes&&t.nodes.t;if(s!==null)for(const i of s)(i.is_global||e)&&i.in()}}function ki(t,e){if(t.nodes)for(var a=t.nodes.start,r=t.nodes.end;a!==null;){var o=a===r?null:Pr(a);e.append(a),a=o}}let ka=!1;function Kr(t){ka=t}let Ma=!1;function ys(t){Ma=t}let Ke=null,bn=!1;function Wt(t){Ke=t}let Ge=null;function xn(t){Ge=t}let Fn=null;function xi(t){Ke!==null&&(Fn===null?Fn=[t]:Fn.push(t))}let Ft=null,qt=0,$t=null;function Dc(t){$t=t}let Ti=1,mr=0,zn=mr;function bs(t){zn=t}function Ei(){return++Ti}function Nr(t){var e=t.f;if((e&Kt)!==0)return!0;if(e&Pt&&(t.f&=~Ta),(e&Sn)!==0){var a=t.deps;if(a!==null)for(var r=a.length,o=0;o<r;o++){var s=a[o];if(Nr(s)&&ci(s),s.wv>t.wv)return!0}(e&fn)!==0&&sn===null&&Lt(t,Dt)}return!1}function Pi(t,e,a=!0){var r=t.reactions;if(r!==null&&!Fn?.includes(t))for(var o=0;o<r.length;o++){var s=r[o];(s.f&Pt)!==0?Pi(s,e,!1):e===s&&(a?Lt(s,Kt):(s.f&Dt)!==0&&Lt(s,Sn),Ea(s))}}function Ni(t){var m;var e=Ft,a=qt,r=$t,o=Ke,s=Fn,i=rt,l=bn,u=zn,c=t.f;Ft=null,qt=0,$t=null,Ke=(c&(Wn|Na))===0?t:null,Fn=null,Xa(t.ctx),bn=!1,zn=++mr,t.ac!==null&&(io(()=>{t.ac.abort(ja)}),t.ac=null);try{t.f|=Eo;var d=t.fn,v=d(),h=t.deps;if(Ft!==null){var p;if(qr(t,qt),h!==null&&qt>0)for(h.length=qt+Ft.length,p=0;p<Ft.length;p++)h[qt+p]=Ft[p];else t.deps=h=Ft;if(pr()&&(t.f&fn)!==0)for(p=qt;p<h.length;p++)((m=h[p]).reactions??(m.reactions=[])).push(t)}else h!==null&&qt<h.length&&(qr(t,qt),h.length=qt);if(ar()&&$t!==null&&!bn&&h!==null&&(t.f&(Pt|Sn|Kt))===0)for(p=0;p<$t.length;p++)Pi($t[p],t);return o!==null&&o!==t&&(mr++,$t!==null&&(r===null?r=$t:r.push(...$t))),(t.f&aa)!==0&&(t.f^=aa),v}catch(T){return ei(T)}finally{t.f^=Eo,Ft=e,qt=a,$t=r,Ke=o,Fn=s,Xa(i),bn=l,zn=u}}function Ic(t,e){let a=e.reactions;if(a!==null){var r=El.call(a,t);if(r!==-1){var o=a.length-1;o===0?a=e.reactions=null:(a[r]=a[o],a.pop())}}a===null&&(e.f&Pt)!==0&&(Ft===null||!Ft.includes(e))&&(Lt(e,Sn),(e.f&fn)!==0&&(e.f^=fn,e.f&=~Ta),li(e),qr(e,0))}function qr(t,e){var a=t.deps;if(a!==null)for(var r=e;r<a.length;r++)Ic(t,a[r])}function _r(t){var e=t.f;if((e&Ln)===0){Lt(t,Dt);var a=Ge,r=ka;Ge=t,ka=!0;try{(e&(Un|Il))!==0?Ac(t):yi(t),wi(t);var o=Ni(t);t.teardown=typeof o=="function"?o:null,t.wv=Ti;var s;xo&&oc&&(t.f&Kt)!==0&&t.deps}finally{ka=r,Ge=a}}}async function Ai(){await Promise.resolve(),ai()}function n(t){var e=t.f,a=(e&Pt)!==0;if(Ke!==null&&!bn){var r=Ge!==null&&(Ge.f&Ln)!==0;if(!r&&!Fn?.includes(t)){var o=Ke.deps;if((Ke.f&Eo)!==0)t.rv<mr&&(t.rv=mr,Ft===null&&o!==null&&o[qt]===t?qt++:Ft===null?Ft=[t]:Ft.includes(t)||Ft.push(t));else{(Ke.deps??(Ke.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Ke]:s.includes(Ke)||s.push(Ke)}}}if(Ma){if(oa.has(t))return oa.get(t);if(a){var i=t,l=i.v;return((i.f&Dt)===0&&i.reactions!==null||Di(i))&&(l=as(i)),oa.set(i,l),l}}else a&&(!sn?.has(t)||Je?.is_fork&&!pr())&&(i=t,Nr(i)&&ci(i),ka&&pr()&&(i.f&fn)===0&&Mi(i));if(sn?.has(t))return sn.get(t);if((t.f&aa)!==0)throw t.v;return t.v}function Mi(t){if(t.deps!==null){t.f^=fn;for(const e of t.deps)(e.reactions??(e.reactions=[])).push(t),(e.f&Pt)!==0&&(e.f&fn)===0&&Mi(e)}}function Di(t){if(t.v===Tt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(oa.has(e)||(e.f&Pt)!==0&&Di(e))return!0;return!1}function zt(t){var e=bn;try{return bn=!0,t()}finally{bn=e}}const Lc=-7169;function Lt(t,e){t.f=t.f&Lc|e}function Rc(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(ra in t)Ro(t);else if(!Array.isArray(t))for(let e in t){const a=t[e];typeof a=="object"&&a&&ra in a&&Ro(a)}}}function Ro(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Ro(t[r],e)}catch{}const a=ao(t);if(a!==Object.prototype&&a!==Array.prototype&&a!==Map.prototype&&a!==Set.prototype&&a!==Date.prototype){const r=Us(a);for(let o in r){const s=r[o].get;if(s)try{s.call(t)}catch{}}}}}const Oc=["touchstart","touchmove"];function Fc(t){return Oc.includes(t)}const Ii=new Set,Oo=new Set;function zc(t,e,a,r={}){function o(s){if(r.capture||cr.call(e,s),!s.cancelBubble)return io(()=>a?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Aa(()=>{e.addEventListener(t,o,r)}):e.addEventListener(t,o,r),o}function ln(t,e,a,r,o){var s={capture:r,passive:o},i=zc(t,e,a,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&mi(()=>{e.removeEventListener(t,i,s)})}function ht(t){for(var e=0;e<t.length;e++)Ii.add(t[e]);for(var a of Oo)a(t)}let Cs=null;function cr(t){var e=this,a=e.ownerDocument,r=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;Cs=t;var i=0,l=Cs===t&&t.__root;if(l){var u=o.indexOf(l);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var c=o.indexOf(e);if(c===-1)return;u<=c&&(i=u)}if(s=o[i]||t.target,s!==e){Pl(t,"currentTarget",{configurable:!0,get(){return s||a}});var d=Ke,v=Ge;Wt(null),xn(null);try{for(var h,p=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var T=s["__"+r];T!=null&&(!s.disabled||t.target===s)&&T.call(s,t)}catch(_){h?p.push(_):h=_}if(t.cancelBubble||m===e||m===null)break;s=m}if(h){for(let _ of p)queueMicrotask(()=>{throw _});throw h}}finally{t.__root=e,delete t.currentTarget,Wt(d),xn(v)}}}function Li(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function wr(t,e){var a=Ge;a.nodes===null&&(a.nodes={start:t,end:e,a:null,t:null})}function k(t,e){var a=(e&ec)!==0,r=(e&tc)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=Li(s?t:"<!>"+t),a||(o=Za(o)));var i=r||fi?document.importNode(o,!0):o.cloneNode(!0);if(a){var l=Za(i),u=i.lastChild;wr(l,u)}else wr(i,i);return i}}function Bc(t,e,a="svg"){var r=!t.startsWith("<!>"),o=`<${a}>${r?t:"<!>"+t}</${a}>`,s;return()=>{if(!s){var i=Li(o),l=Za(i);s=Za(l)}var u=s.cloneNode(!0);return wr(u,u),u}}function jc(t,e){return Bc(t,e,"svg")}function ze(t=""){{var e=On(t+"");return wr(e,e),e}}function he(){var t=document.createDocumentFragment(),e=document.createComment(""),a=On();return t.append(e,a),wr(e,a),t}function g(t,e){t!==null&&t.before(e)}function Wh(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function dt(t,e){var a=e==null?"":typeof e=="object"?e+"":e;a!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=a,t.nodeValue=a+"")}function Hc(t,e){return Uc(t,e)}const za=new Map;function Uc(t,{target:e,anchor:a,props:r={},events:o,context:s,intro:i=!0}){bc();var l=new Set,u=v=>{for(var h=0;h<v.length;h++){var p=v[h];if(!l.has(p)){l.add(p);var m=Fc(p);e.addEventListener(p,cr,{passive:m});var T=za.get(p);T===void 0?(document.addEventListener(p,cr,{passive:m}),za.set(p,1)):za.set(p,T+1)}}};u(no(Ii)),Oo.add(u);var c=void 0,d=Ec(()=>{var v=a??e.appendChild(On());return vc(v,{pending:()=>{}},h=>{if(s){me({});var p=rt;p.c=s}o&&(r.$$events=o),c=t(h,r)||{},s&&_e()}),()=>{for(var h of l){e.removeEventListener(h,cr);var p=za.get(h);--p===0?(document.removeEventListener(h,cr),za.delete(h)):za.set(h,p)}Oo.delete(u),v!==a&&v.parentNode?.removeChild(v)}});return Wc.set(c,d),c}let Wc=new WeakMap;var dn,_n,Gt,Ca,kr,xr,$r;class co{constructor(e,a=!0){Ot(this,"anchor");We(this,dn,new Map);We(this,_n,new Map);We(this,Gt,new Map);We(this,Ca,new Set);We(this,kr,!0);We(this,xr,()=>{var e=Je;if(W(this,dn).has(e)){var a=W(this,dn).get(e),r=W(this,_n).get(a);if(r)rs(r),W(this,Ca).delete(a);else{var o=W(this,Gt).get(a);o&&(W(this,_n).set(a,o.effect),W(this,Gt).delete(a),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),r=o.effect)}for(const[s,i]of W(this,dn)){if(W(this,dn).delete(s),s===e)break;const l=W(this,Gt).get(i);l&&(Vt(l.effect),W(this,Gt).delete(i))}for(const[s,i]of W(this,_n)){if(s===a||W(this,Ca).has(s))continue;const l=()=>{if(Array.from(W(this,dn).values()).includes(s)){var c=document.createDocumentFragment();ki(i,c),c.append(On()),W(this,Gt).set(s,{effect:i,fragment:c})}else Vt(i);W(this,Ca).delete(s),W(this,_n).delete(s)};W(this,kr)||!r?(W(this,Ca).add(s),Sa(i,l,!1)):l()}}});We(this,$r,e=>{W(this,dn).delete(e);const a=Array.from(W(this,dn).values());for(const[r,o]of W(this,Gt))a.includes(r)||(Vt(o.effect),W(this,Gt).delete(r))});this.anchor=e,Oe(this,kr,a)}ensure(e,a){var r=Je,o=hi();if(a&&!W(this,_n).has(e)&&!W(this,Gt).has(e))if(o){var s=document.createDocumentFragment(),i=On();s.append(i),W(this,Gt).set(e,{effect:on(()=>a(i)),fragment:s})}else W(this,_n).set(e,on(()=>a(this.anchor)));if(W(this,dn).set(r,e),o){for(const[l,u]of W(this,_n))l===e?r.skipped_effects.delete(u):r.skipped_effects.add(u);for(const[l,u]of W(this,Gt))l===e?r.skipped_effects.delete(u.effect):r.skipped_effects.add(u.effect);r.oncommit(W(this,xr)),r.ondiscard(W(this,$r))}else W(this,xr).call(this)}}dn=new WeakMap,_n=new WeakMap,Gt=new WeakMap,Ca=new WeakMap,kr=new WeakMap,xr=new WeakMap,$r=new WeakMap;const Vc=0,bo=1;function Kc(t,e,a,r,o){var s=ar(),i=Tt,l=s?kn(i):Lo(i,!1,!1),u=s?kn(i):Lo(i,!1,!1),c=new co(t);rr(()=>{var d=e(),v=!1;if(Al(d)){var h=ii(),p=!1;const m=T=>{if(!v){p=!0,h(!1),yn.ensure();try{T()}finally{hr(),Wa||ai()}}};d.then(T=>{m(()=>{Rn(l,T),c.ensure(bo,r&&(_=>r(_,l)))})},T=>{m(()=>{if(Rn(u,T),c.ensure(bo,o&&(_=>o(_,u))),!o)throw u.v})}),Aa(()=>{p||m(()=>{c.ensure(Vc,a)})})}else Rn(l,d),c.ensure(bo,r&&(m=>r(m,l)));return()=>{v=!0}})}function K(t,e,a=!1){var r=new co(t),o=a?ca:0;function s(i,l){r.ensure(i,l)}rr(()=>{var i=!1;e((l,u=!0)=>{i=!0,s(u,l)}),i||s(!1,null)},o)}function oe(t,e){lo(()=>{var a=e();for(var r in a){var o=a[r];o?t.style.setProperty(r,o):t.style.removeProperty(r)}})}function qc(t,e,a){for(var r=[],o=e.length,s,i=e.length,l=0;l<o;l++){let v=e[l];Sa(v,()=>{if(s){if(s.pending.delete(v),s.done.add(v),s.pending.size===0){var h=t.outrogroups;Fo(no(s.done)),h.delete(s),h.size===0&&(t.outrogroups=null)}}else i-=1},!1)}if(i===0){var u=r.length===0&&a!==null;if(u){var c=a,d=c.parentNode;Cc(d),d.append(c),t.items.clear()}Fo(e,!u)}else s={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(s)}function Fo(t,e=!0){for(var a=0;a<t.length;a++)Vt(t[a],e)}var Ss;function Bn(t,e,a,r,o,s=null){var i=t,l=new Map,u=(e&Xs)!==0;if(u){var c=t;i=c.appendChild(On())}var d=null,v=Er(()=>{var b=a();return $o(b)?b:b==null?[]:no(b)}),h,p=!0;function m(){_.fallback=d,Yc(_,h,i,e,r),d!==null&&(h.length===0?(d.f&Dn)===0?rs(d):(d.f^=Dn,dr(d,null,i)):Sa(d,()=>{d=null}))}var T=rr(()=>{h=n(v);for(var b=h.length,R=new Set,y=Je,x=hi(),z=0;z<b;z+=1){var X=h[z],V=r(X,z),H=p?null:l.get(V);H?(H.v&&Rn(H.v,X),H.i&&Rn(H.i,z),x&&y.skipped_effects.delete(H.e)):(H=Gc(l,p?i:Ss??(Ss=On()),X,V,z,o,e,a),p||(H.e.f|=Dn),l.set(V,H)),R.add(V)}if(b===0&&s&&!d&&(p?d=on(()=>s(i)):(d=on(()=>s(Ss??(Ss=On()))),d.f|=Dn)),!p)if(x){for(const[O,G]of l)R.has(O)||y.skipped_effects.add(G.e);y.oncommit(m),y.ondiscard(()=>{})}else m();n(v)}),_={effect:T,items:l,outrogroups:null,fallback:d};p=!1}function Yc(t,e,a,r,o){var s=(r&Yl)!==0,i=e.length,l=t.items,u=t.effect.first,c,d=null,v,h=[],p=[],m,T,_,b;if(s)for(b=0;b<i;b+=1)m=e[b],T=o(m,b),_=l.get(T).e,(_.f&Dn)===0&&(_.nodes?.a?.measure(),(v??(v=new Set)).add(_));for(b=0;b<i;b+=1){if(m=e[b],T=o(m,b),_=l.get(T).e,t.outrogroups!==null)for(const G of t.outrogroups)G.pending.delete(_),G.done.delete(_);if((_.f&Dn)!==0)if(_.f^=Dn,_===u)dr(_,null,a);else{var R=d?d.next:u;_===t.effect.last&&(t.effect.last=_.prev),_.prev&&(_.prev.next=_.next),_.next&&(_.next.prev=_.prev),qn(t,d,_),qn(t,_,R),dr(_,R,a),d=_,h=[],p=[],u=d.next;continue}if((_.f&Xt)!==0&&(rs(_),s&&(_.nodes?.a?.unfix(),(v??(v=new Set)).delete(_))),_!==u){if(c!==void 0&&c.has(_)){if(h.length<p.length){var y=p[0],x;d=y.prev;var z=h[0],X=h[h.length-1];for(x=0;x<h.length;x+=1)dr(h[x],y,a);for(x=0;x<p.length;x+=1)c.delete(p[x]);qn(t,z.prev,X.next),qn(t,d,z),qn(t,X,y),u=y,d=X,b-=1,h=[],p=[]}else c.delete(_),dr(_,u,a),qn(t,_.prev,_.next),qn(t,_,d===null?t.effect.first:d.next),qn(t,d,_),d=_;continue}for(h=[],p=[];u!==null&&u!==_;)(c??(c=new Set)).add(u),p.push(u),u=u.next;if(u===null)continue}(_.f&Dn)===0&&h.push(_),d=_,u=_.next}if(t.outrogroups!==null){for(const G of t.outrogroups)G.pending.size===0&&(Fo(no(G.done)),t.outrogroups?.delete(G));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||c!==void 0){var V=[];if(c!==void 0)for(_ of c)(_.f&Xt)===0&&V.push(_);for(;u!==null;)(u.f&Xt)===0&&u!==t.fallback&&V.push(u),u=u.next;var H=V.length;if(H>0){var O=(r&Xs)!==0&&i===0?a:null;if(s){for(b=0;b<H;b+=1)V[b].nodes?.a?.measure();for(b=0;b<H;b+=1)V[b].nodes?.a?.fix()}qc(t,V,O)}}s&&Aa(()=>{if(v!==void 0)for(_ of v)_.nodes?.a?.apply()})}function Gc(t,e,a,r,o,s,i,l){var u=(i&Kl)!==0?(i&Gl)===0?Lo(a,!1,!1):kn(a):null,c=(i&ql)!==0?kn(o):null;return{v:u,i:c,e:on(()=>(s(e,u??a,c??o,l),()=>{t.delete(r)}))}}function dr(t,e,a){if(t.nodes)for(var r=t.nodes.start,o=t.nodes.end,s=e&&(e.f&Dn)===0?e.nodes.start:a;r!==null;){var i=Pr(r);if(s.before(r),r===o)return;r=i}}function qn(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function Re(t,e,...a){var r=new co(t);rr(()=>{const o=e()??null;r.ensure(o,o&&(s=>o(s,...a)))},ca)}function Xc(t,e,a){var r=new co(t);rr(()=>{var o=e()??null;r.ensure(o,o&&(s=>a(s,o)))},ca)}function Ri(t){var e,a,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(a=Ri(t[e]))&&(r&&(r+=" "),r+=a)}else for(a in t)t[a]&&(r&&(r+=" "),r+=a);return r}function Jc(){for(var t,e,a=0,r="",o=arguments.length;a<o;a++)(t=arguments[a])&&(e=Ri(t))&&(r&&(r+=" "),r+=e);return r}function ot(t){return typeof t=="object"?Jc(t):t??""}const ks=[...` 	
\r\fÂ \v\uFEFF`];function Zc(t,e,a){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),a){for(var o in a)if(a[o])r=r?r+" "+o:o;else if(r.length)for(var s=o.length,i=0;(i=r.indexOf(o,i))>=0;){var l=i+s;(i===0||ks.includes(r[i-1]))&&(l===r.length||ks.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Qc(t,e){return t==null?null:String(t)}function nt(t,e,a,r,o,s){var i=t.__className;if(i!==a||i===void 0){var l=Zc(a,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=a}else if(s&&o!==s)for(var u in s){var c=!!s[u];(o==null||c!==!!o[u])&&t.classList.toggle(u,c)}return s}function Qa(t,e,a,r){var o=t.__style;if(o!==e){var s=Qc(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const $c=Symbol("is custom element"),ed=Symbol("is html");function Vh(t,e){var a=os(t);a.value===(a.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Kh(t,e){var a=os(t);a.checked!==(a.checked=e??void 0)&&(t.checked=e)}function lt(t,e,a,r){var o=os(t);o[e]!==(o[e]=a)&&(e==="loading"&&(t[Ll]=a),a==null?t.removeAttribute(e):typeof a!="string"&&td(t).includes(e)?t[e]=a:t.setAttribute(e,a))}function os(t){return t.__attributes??(t.__attributes={[$c]:t.nodeName.includes("-"),[ed]:t.namespaceURI===nc})}var xs=new Map;function td(t){var e=t.getAttribute("is")||t.nodeName,a=xs.get(e);if(a)return a;xs.set(e,a=[]);for(var r,o=t,s=Element.prototype;s!==o;){r=Us(o);for(var i in r)r[i].set&&a.push(i);o=ao(o)}return a}function Oi(t,e,a=e){var r=new WeakSet;kc(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=Co(t)?So(s):s,a(s),Je!==null&&r.add(Je),await Ai(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,u=t.value.length;if(t.value=s??"",l!==null){var c=t.value.length;i===l&&l===u&&c>u?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=i,t.selectionEnd=Math.min(l,c))}}}),zt(e)==null&&t.value&&(a(Co(t)?So(t.value):t.value),Je!==null&&r.add(Je)),lo(()=>{var o=e();if(t===document.activeElement){var s=Br??Je;if(r.has(s))return}Co(t)&&o===So(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function Co(t){var e=t.type;return e==="number"||e==="range"}function So(t){return t===""?null:+t}function Ts(t,e){return t===e||t?.[ra]===e}function Ze(t={},e,a,r){return Pc(()=>{var o,s;return lo(()=>{o=s,s=[],zt(()=>{t!==a(...s)&&(e(t,...s),o&&Ts(a(...o),t)&&e(null,...o))})}),()=>{Aa(()=>{s&&Ts(a(...s),t)&&e(null,...s)})}}),t}function ss(t=!1){const e=rt,a=e.l.u;if(!a)return;let r=()=>Rc(e.s);if(t){let o=0,s={};const i=Tr(()=>{let l=!1;const u=e.s;for(const c in u)u[c]!==s[c]&&(s[c]=u[c],l=!0);return l&&o++,o});r=()=>n(i)}a.b.length&&Tc(()=>{Es(e,r),To(a.b)}),Be(()=>{const o=zt(()=>a.m.map(Ml));return()=>{for(const s of o)typeof s=="function"&&s()}}),a.a.length&&Be(()=>{Es(e,r),To(a.a)})}function Es(t,e){if(t.l.s)for(const a of t.l.s)n(a);e()}let Rr=!1;function nd(t){var e=Rr;try{return Rr=!1,[t(),Rr]}finally{Rr=e}}const ad={get(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(sr(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r)return r[e]}},set(t,e,a){let r=t.props.length;for(;r--;){let o=t.props[r];sr(o)&&(o=o());const s=na(o,e);if(s&&s.set)return s.set(a),!0}return!1},getOwnPropertyDescriptor(t,e){let a=t.props.length;for(;a--;){let r=t.props[a];if(sr(r)&&(r=r()),typeof r=="object"&&r!==null&&e in r){const o=na(r,e);return o&&!o.configurable&&(o.configurable=!0),o}}},has(t,e){if(e===ra||e===Ys)return!1;for(let a of t.props)if(sr(a)&&(a=a()),a!=null&&e in a)return!0;return!1},ownKeys(t){const e=[];for(let a of t.props)if(sr(a)&&(a=a()),!!a){for(const r in a)e.includes(r)||e.push(r);for(const r of Object.getOwnPropertySymbols(a))e.includes(r)||e.push(r)}return e}};function zo(...t){return new Proxy({props:t},ad)}function Me(t,e,a,r){var o=!nr||(a&Jl)!==0,s=(a&Ql)!==0,i=(a&$l)!==0,l=r,u=!0,c=()=>(u&&(u=!1,l=i?zt(r):r),l),d;if(s){var v=ra in t||Ys in t;d=na(t,e)?.set??(v&&e in t?y=>t[e]=y:void 0)}var h,p=!1;s?[h,p]=nd(()=>t[e]):h=t[e],h===void 0&&r!==void 0&&(h=c(),d&&(o&&jl(),d(h)));var m;if(o?m=()=>{var y=t[e];return y===void 0?c():(u=!0,y)}:m=()=>{var y=t[e];return y!==void 0&&(l=void 0),y===void 0?l:y},o&&(a&Zl)===0)return m;if(d){var T=t.$$legacy;return(function(y,x){return arguments.length>0?((!o||!x||T||p)&&d(x?m():y),y):m()})}var _=!1,b=((a&Xl)!==0?Tr:Er)(()=>(_=!1,m()));s&&n(b);var R=Ge;return(function(y,x){if(arguments.length>0){const z=x?n(b):o&&s?ft(y):y;return f(b,z),_=!0,l!==void 0&&(l=z),y}return Ma&&_||(R.f&Ln)!==0?b.v:n(b)})}function ke(t){rt===null&&Gs(),nr&&rt.l!==null?rd(rt).m.push(t):Be(()=>{const e=zt(t);if(typeof e=="function")return e})}function rd(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const od="5";var Hs;typeof window<"u"&&((Hs=window.__svelte??(window.__svelte={})).v??(Hs.v=new Set)).add(od);sc();const Fi={};function sd(t){gt(Fi,t)}function Yr(){const t=vt(Fi);if(!t)throw new Error("No FeedSearchContext found");return t}const zi={};function id(t){gt(zi,t)}function Bt(){const t=vt(zi);if(!t)throw new Error("No SearchParamsContext found");return t}function ld(t,e){me(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Bt(),s="feedSearch",i=M(()=>o().get(s)||""),l=M(()=>n(i));sd({getFeedSearch:()=>n(l),setFeedSearch:d=>{d===""?r(s):a(s,d)}});var u=he(),c=A(u);Re(c,()=>e.children??Ye),g(t,u),_e()}const Bi={};function cd(t){gt(Bi,t)}function dd(){const t=vt(Bi);if(!t)throw new Error("No TagsSearchContext found");return t}function ud(t,e){me(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Bt(),s="tagsSearch",i=M(()=>o().get(s)||""),l=M(()=>n(i));cd({getTagsSearch:()=>n(l),setTagsSearch:d=>{d===""?r(s):a(s,d)}});var u=he(),c=A(u);Re(c,()=>e.children??Ye),g(t,u),_e()}const ji={};function fd(t){gt(ji,t)}function Hi(){const t=vt(ji);if(!t)throw new Error("No FeedOrderContext found");return t}function vd(t,e){me(e,!0);const{setSearchParam:a,deleteSearchParam:r,getSearchParams:o}=Bt(),s="feedOrder",i=M(()=>o().get(s)||"newest"),l=M(()=>n(i));let u=["newest","oldest","AtoZ","ZtoA","updatedNewest"];fd({getFeedOrder:()=>n(l),setFeedOrder:v=>{v==="newest"||!u.includes(v)?r(s):a(s,v)}});var c=he(),d=A(c);Re(d,()=>e.children??Ye),g(t,c),_e()}const Ui={};function gd(t){gt(Ui,t)}function Ar(){const t=vt(Ui);if(!t)throw new Error("No SidebarContext found");return t}function hd(t,e){me(e,!0);let a=L("closed");gd({sidebarOpen:()=>{f(a,"preOpening")},sidebarClose:()=>{f(a,"closing")},getSidebarState:()=>n(a),setSidebarState:c=>{f(a,c,!0)}});var l=he(),u=A(l);Re(u,()=>e.children??Ye),g(t,l),_e()}const Wi={};function pd(t){gt(Wi,t)}function Vn(){const t=vt(Wi);if(!t)throw new Error("No SelectedTagsContext found");return t}function md(t,e){me(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Bt(),s=M(a),i="selectedTags";let l=M(()=>n(s).get(i)||""),u=M(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));pd({getSelectedTags:()=>n(u),addTag:_=>{n(u).has(_)||r(i,[...n(u),_].map(b=>encodeURIComponent(b)).join(","))},removeTag:_=>{n(u).has(_)&&n(u).size===1?o(i):n(u).has(_)&&r(i,[...n(u)].filter(b=>b!==_).map(b=>encodeURIComponent(b)).join(","))},clearTags:()=>{o(i)},setSelectedTags:_=>{_.size===0?o(i):r(i,[..._].map(b=>encodeURIComponent(b)).join(","))}});var m=he(),T=A(m);Re(T,()=>e.children??Ye),g(t,m),_e()}const Vi={};function _d(t){gt(Vi,t)}function da(){const t=vt(Vi);if(!t)throw new Error("No SelectedNotesContext found");return t}var wd=["forEach","isDisjointFrom","isSubsetOf","isSupersetOf"],yd=["difference","intersection","symmetricDifference","union"],Ps=!1,Ga,un,ea,eo,$a,Ki,qi;const to=class to extends Set{constructor(a){super();We(this,$a);We(this,Ga,new Map);We(this,un,L(0));We(this,ea,L(0));We(this,eo,zn||-1);if(a){for(var r of a)super.add(r);W(this,ea).v=super.size}Ps||it(this,$a,qi).call(this)}has(a){var r=super.has(a),o=W(this,Ga),s=o.get(a);if(s===void 0){if(!r)return n(W(this,un)),!1;s=it(this,$a,Ki).call(this,!0),o.set(a,s)}return n(s),r}add(a){return super.has(a)||(super.add(a),f(W(this,ea),super.size),sa(W(this,un))),this}delete(a){var r=super.delete(a),o=W(this,Ga),s=o.get(a);return s!==void 0&&(o.delete(a),f(s,!1)),r&&(f(W(this,ea),super.size),sa(W(this,un))),r}clear(){if(super.size!==0){super.clear();var a=W(this,Ga);for(var r of a.values())f(r,!1);a.clear(),f(W(this,ea),0),sa(W(this,un))}}keys(){return this.values()}values(){return n(W(this,un)),super.values()}entries(){return n(W(this,un)),super.entries()}[Symbol.iterator](){return this.keys()}get size(){return n(W(this,ea))}};Ga=new WeakMap,un=new WeakMap,ea=new WeakMap,eo=new WeakMap,$a=new WeakSet,Ki=function(a){return zn===W(this,eo)?L(a):kn(a)},qi=function(){Ps=!0;var a=to.prototype,r=Set.prototype;for(const o of wd)a[o]=function(...s){return n(W(this,un)),r[o].apply(this,s)};for(const o of yd)a[o]=function(...s){n(W(this,un));var i=r[o].apply(this,s);return new to(i)}};let Bo=to;function bd(t,e){me(e,!0);let a=new Bo,r=L("single");const o=()=>a,s=p=>{a.clear(),p.forEach(m=>a.add(m))},i=p=>{a.add(p)},l=p=>{a.delete(p)},u=()=>{a.clear()};_d({getSelectedNotes:o,setSelectedNotes:s,addNote:i,removeNote:l,clearNotes:u,getMode:()=>n(r),changeMode:p=>{f(r,p,!0),p==="single"&&u()}});var v=he(),h=A(v);Re(h,()=>e.children??Ye),g(t,v),_e()}const Yi={};function Cd(t){gt(Yi,t)}function is(){const t=vt(Yi);if(!t)throw new Error("No LocalDBContext found");return t}const Gi={};function Sd(t){gt(Gi,t)}function Pa(){const t=vt(Gi);if(!t)throw new Error("No SettingsContext found");return t}const Xi={};function kd(t){gt(Xi,t)}function uo(){const t=vt(Xi);if(!t)throw new Error("No BroadcastContext found");return t}const xd="AppStorage",Td=1,ur="account",Gn="settings",$e="notes",Ht="tags",Ed="syncLog",ua="success",Hn="error",St=(t,e,a)=>{t?.addEventListener(e,a)},Ns=(t,e)=>new Promise((a,r)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();St(s,ua,()=>{const i=s?.result||[];a(i)}),St(s,Hn,i=>{r(i)})}),Gr=(t,e,a)=>new Promise((r,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(a);St(i,ua,()=>{const l=i?.result?.data;r(l)}),St(i,Hn,l=>{o(l)})}),wn=(t,e,a,r)=>new Promise((o,s)=>{const u=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:a,data:r});St(u,ua,()=>{o()}),St(u,Hn,c=>{s(c)})}),_t=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.put(s);return new Promise((l,u)=>{St(i,ua,()=>{l()}),St(i,Hn,c=>{u(c)})})}))},ko=(t,e,a)=>new Promise((r,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(a);St(l,ua,()=>{r()}),St(l,Hn,u=>{o(u)})}),ir=async(t,e,a)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(a.map(s=>{const i=o?.delete(s);return new Promise((l,u)=>{St(i,ua,()=>{l()}),St(i,Hn,c=>{u(c)})})}))},Ha=(t,e)=>new Promise((a,r)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();St(i,ua,()=>{a()}),St(i,Hn,l=>{r(l)})}),en="dialogPages",Ji={};function Pd(t){gt(Ji,t)}function Jt(){const t=vt(Ji);if(!t)throw new Error("No DialogPagesContext found");return t}var xe=(t=>(t.NewNote="newNote",t.Note="note",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Install="install",t.InstallSuccess="installSuccess",t.Extension="extension",t))(xe||{});const As={settings:"Settings",importData:"Import",exportData:"Export",account:"Account",sync:"Sync",accountSetup:"",auth:"Auth",signin:"Sign in",signup:"Sign up",confirmAccessKey:"Confirm access key",accessKeys:"Access keys",subscription:"Subscription",exit:"Exit",notFound:"",about:"About",install:"Install app",installSuccess:"Install success",extension:"Extension"},qh=()=>chrome,Ms=()=>LanguageModel;function Nd(t,e){me(e,!0);const{deleteSearchParam:a,getSearchParams:r,replaceSearchParams:o}=Bt(),{clearDialogPages:s,getDialogPages:i,replaceDialogPage:l}=Jt(),u="viewMode";let d=ft((()=>{const F=new URLSearchParams(window.location.search).get(u)||"tab";return F==="popup"||F==="window"||F==="tab"||F==="sidebar"?F:"tab"})());ke(()=>{a(u)});let v=L(!1),h=L(ft({showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}}));const{getDB:p}=is(),{createBroadcastChannel:m,tabId:T}=uo(),_=m(),b=M(p),R=async()=>{const q=await Gr(n(b),Gn,"default");q&&f(h,q,!0)},y=async()=>{await R();const q=r().get("noteId");i().includes(xe.NewNote)&&q&&(l(`${xe.Note}?id=${q}`),a("noteId")),f(v,!0)};ke(()=>{});const x=async q=>{const F=JSON.parse(q.data),Q=F;if(F.tabId&&F.tabId===T){Q.type==="exit"&&(f(h,{showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}},!0),Ha(n(b),Gn));return}Q.type==="updateSettings"?R():Q.type==="exit"&&f(h,{showFavicon:!0,recordMode:"note",tags:{llm:!0,pageData:!1,prev:[]}},!0)},z=()=>n(h).showFavicon,X=()=>n(h).recordMode,V=async q=>{n(h).showFavicon=q,await wn(n(b),Gn,"default",ga(n(h))),_.postMessage({type:"updateSettings"})},H=async q=>{n(h).recordMode=q,await wn(n(b),Gn,"default",ga(n(h))),_.postMessage({type:"updateSettings"})},O=async q=>{n(h).tags.prev=q,await wn(n(b),Gn,"default",ga(n(h))),_.postMessage({type:"updateSettings"})},G=()=>n(h).tags.prev||[],ae=async q=>{n(h).tags.llm=q,await wn(n(b),Gn,"default",ga(n(h))),_.postMessage({type:"updateSettings"})},Z=()=>n(h).tags.llm,U=()=>n(h).tags.pageData,B=async q=>{n(h).tags.pageData=q,await wn(n(b),Gn,"default",ga(n(h))),_.postMessage({type:"updateSettings"})};ke(()=>(y(),_.addEventListener(x),()=>{_.removeEventListener(x)})),Sd({getFaviconEnabled:z,getRecordMode:X,setRecordMode:H,setFaviconShown:V,isInitedSettings:()=>n(v),getViewMode:()=>d,setLlmTagsEnabled:ae,getLlmTagsEnabled:Z,setPrevTags:O,getPrevTags:G,getPageDataForTagsEnabled:U,setPageDataForTagsEnabled:B});var ge=he(),Te=A(ge);Re(Te,()=>e.children??Ye),g(t,ge),_e()}const Zi={};function Ad(t){gt(Zi,t)}function ls(){const t=vt(Zi);if(!t)throw new Error("No AccountContext found");return t}function Md(t,e){me(e,!0);let a=L(void 0);const{getDB:r}=is(),{createBroadcastChannel:o,tabId:s}=uo(),i=M(r),l=o(),u=async()=>{const y=await Gr(n(i),ur,"default");f(a,y,!0)},c=y=>wn(n(i),ur,"default",y),d=async y=>{const x=await Gr(n(i),ur,"default");x!==void 0&&f(a,x,!0),y(x)},v=async y=>{const x=JSON.parse(y.data);if(x.tabId&&x.tabId===s)return;const z=x;z.type==="initLocalAccount"?f(a,null):z.type==="initCloudAccount"?u():z.type==="disconnectCloudAccount"?f(a,null):z.type==="exit"?f(a,void 0):z.type==="updateAccount"&&u()};ke(()=>(l.addEventListener(v),()=>{l.removeEventListener(v)})),Ad({init:d,getAccount:()=>n(a),initLocalAccount:async()=>{f(a,null),await c(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async y=>{const x={encryptedClientKey:y.encryptedClientKey||"",subscriptionExpires:y.subscriptionExpires||-1,lastSync:-1};await c(x),f(a,x,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{f(a,null),await c(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async y=>{if(!n(a))throw new Error("No account to update subscription for");const x={...n(a),subscriptionExpires:y};await c(x),l.postMessage({type:"updateAccount"})},exitApp:async()=>{f(a,void 0),l.postMessage({type:"exit"}),await Ha(n(i),ur)}});var b=he(),R=A(b);Re(R,()=>e.children??Ye),g(t,b),_e()}const Qi={};function Dd(t){gt(Qi,t)}function Rt(){const t=vt(Qi);if(!t)throw new Error("No NotesContext found");return t}const Xn=()=>crypto.randomUUID(),Id=t=>{const e=new Set;for(const a of t||[])for(const r of a?.data.tags||[])e.add(r);return e},$i=(t,e)=>{let a=null;return()=>{a&&clearTimeout(a),a=setTimeout(()=>{a=null,t()},e)}};async function Yh(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}const bt=t=>t===null||typeof t!="object"?t:JSON.parse(JSON.stringify(t));function Ld(t,e){me(e,!0);const{getDB:a}=is(),{createBroadcastChannel:r,tabId:o}=uo(),s=M(a),i=r(),l=720*60*60*1e3;let u=L(!1),c=L(()=>new Map),d=L(()=>[]),v=L(()=>new Map);const h=()=>n(u),p=()=>n(d)().some(w=>w.data&&!w.data.deletedAt&&!w.data.archivedAt),m=()=>n(d)().some(w=>w.data&&w.data.deletedAt),T=()=>n(d)().some(w=>w.data&&w.data.archivedAt&&!w.data.deletedAt),_=w=>{const P=n(d)(),S=n(v)(),N=S.get(w.id);N?N.data=w.data:(P.push(w),S.set(w.id,w)),f(d,()=>P),f(v,()=>S)},b=w=>{const P=n(d)(),S=n(v)(),N=S.get(w);S.has(w)&&S.delete(w),N&&(N.data=void 0),f(d,()=>P),f(v,()=>S)},R=w=>{const P=n(d)(),S=n(v)();for(const N of w){const D=S.get(N);S.has(N)&&S.delete(N),D&&(D.data=void 0)}f(d,()=>P),f(v,()=>S)},y=()=>{f(d,()=>[]),f(c,()=>new Map),f(v,()=>new Map)},x=()=>n(d),z=w=>{const P=n(c)();for(const S of w)P.get(S)||P.set(S,{name:S});f(c,()=>P)},X=async()=>{const[w,P]=await Promise.all([Ns(n(s),$e),Ns(n(s),Ht).then(j=>j.reduce((Y,te)=>Y.set(te.id,te.data),new Map))]),S=[],N=[],D=new Map;for(const j of w)j.data.deletedAt&&Date.now()-j.data.deletedAt>l?S.push(j.id):(N.push(j),D.set(j.id,j));const E=Id(N),ne=[],pe=new Map(P);[...E.values()].forEach(j=>{pe.set(j,{name:j,pinned:P.get(j)?.pinned||!1}),P.has(j)||ne.push(j)});const ce=[];[...P.keys()].forEach(j=>{E.has(j)||ce.push(j)}),await ir(n(s),$e,S),await ir(n(s),Ht,ce),await _t(n(s),Ht,ne.map(j=>({id:j,data:{pinned:pe.get(j)?.pinned||!1}}))),f(d,()=>N),f(v,()=>D),f(c,()=>pe),f(u,!0)},V=async w=>{const P=n(c)(),S=w.data.tags.filter(N=>!P.has(N))||[];return await wn(n(s),$e,w.id,{...w.data}),S.length>0&&(await _t(n(s),Ht,S.map(N=>({id:N,data:{pinned:!1}}))||[]),z(S)),_(w),i.postMessage({type:"putNote",data:{id:w.id}}),w.id},H=async({link:w,text:P,tags:S})=>{const N={id:Xn(),data:{link:bt(w),text:P,tags:bt(S),history:[],createdAt:Date.now(),updatedAt:Date.now()}};return await V(N),N.id},O=async(w,{link:P,text:S,tags:N})=>{const D=B(w);if(!D||!D.data)return;const E={id:w,data:{...D.data,link:bt(P),text:S,tags:bt(N),updatedAt:Date.now()}};await V(E)},G=async(w,{link:P,text:S,tags:N})=>{const D=B(w);if(!D||!D.data)return;const E=Xn(),ne={id:w,data:{...D.data,link:P,text:S,tags:N,updatedAt:Date.now(),history:[...(D.data.history||[]).slice(-49),{id:E,link:bt(D.data.link),text:D.data.text,tags:bt(D.data.tags),updatedAt:D.data.updatedAt}]}};return await V(ne),E},ae=async(w,P)=>{const S=B(w);if(!S||!S.data)return;const N=S.data.history?.find?.(E=>E.id===P);if(!N)return;const D={id:w,data:{...S.data,link:bt(N.link),text:N.text,tags:bt(N.tags),updatedAt:N.updatedAt,history:S.data.history?.filter?.(E=>E.id!==P)||[]}};await V(D)},Z=async w=>{const S=n(v)().get(w);!S||!S.data||(b(w),await ko(n(s),$e,w),i.postMessage({type:"deleteNote",data:{id:w}}))},U=async()=>{await Ha(n(s),$e),await Ha(n(s),Ht),y(),i.postMessage({type:"clearNotes"})},B=w=>n(v)().get(w),ge=async(w,P)=>{const N=n(v)().get(w);if(!N||!N.data)return;const D={id:w,data:{...N.data,pinned:P}};V(D)},Te=async w=>{const S=n(v)().get(w);if(!S||!S.data)return;const N={id:w,data:{...S.data,deletedAt:Date.now()}};await V(N)},q=async w=>{const S=n(v)().get(w);if(!S||!S.data)return;const N={id:w,data:{...S.data,archivedAt:Date.now()}};await V(N)},F=async({noteIds:w})=>{const P=n(v)(),S=n(d)();for(const D of w){const E=P.get(D);E?.data&&(E.data.deletedAt=Date.now())}return await _t(n(s),$e,w.map(D=>{const E=P.get(D);return{id:D,data:E?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>S),{cancel:async()=>{for(const D of w){const E=P.get(D);E?.data&&(E.data.deletedAt=0)}await _t(n(s),$e,w.map(D=>{const E=P.get(D);return{id:D,data:E?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>S)}}},Q=async({noteIds:w})=>{const P=n(v)(),S=n(d)();for(const D of w){const E=P.get(D);E?.data&&(E.data.archivedAt=Date.now())}return await _t(n(s),$e,w.map(D=>{const E=P.get(D);return{id:D,data:E?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>S),{cancel:async()=>{for(const D of w){const E=P.get(D);E?.data&&(E.data.archivedAt=0)}await _t(n(s),$e,w.map(D=>{const E=P.get(D);return{id:D,data:E?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>S)}}},se=async({noteIds:w})=>{const P=n(v)(),S=n(d)(),N=[];for(const E of w){const ne=P.get(E);ne?.data&&(N.push({id:E,data:bt(ne.data)}),ne.data.archivedAt=0)}return await _t(n(s),$e,w.map(E=>{const ne=P.get(E);return{id:E,data:ne?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>S),{cancel:async()=>{for(const E of N){const ne=P.get(E.id);ne?.data&&(ne.data=E.data)}await _t(n(s),$e,w.map(E=>{const ne=P.get(E);return{id:E,data:ne?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>S)}}},fe=async({noteIds:w})=>{const P=n(v)(),S=n(d)(),N=[];for(const E of w){const ne=P.get(E);ne?.data&&(N.push({id:E,data:bt(ne.data)}),ne.data.deletedAt=0)}return await _t(n(s),$e,w.map(E=>{const ne=P.get(E);return{id:E,data:ne?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>S),{cancel:async()=>{for(const E of N){const ne=P.get(E.id);ne?.data&&(ne.data=E.data)}await _t(n(s),$e,w.map(E=>{const ne=P.get(E);return{id:E,data:ne?.data}})),i.postMessage({type:"reloadNotes"}),f(v,()=>P),f(d,()=>S)}}},ie=async w=>{const S=n(v)().get(w);if(!S||!S.data)return;const N={id:w,data:{...S.data,deletedAt:0}};await V(N)},ye=async w=>{const S=n(v)().get(w);if(!S||!S.data)return;const N={id:w,data:{...S.data,archivedAt:0}};await V(N)},Ee=async(w,P)=>{const S=n(c)();S.set(w,{name:w,pinned:P}),await wn(n(s),Ht,w,{pinned:P}),i.postMessage({type:"pinTag",data:{tag:w,pinned:P}}),f(c,()=>S)},re=async({noteIds:w})=>{const P=n(c)(),S=n(d)();R(w),await ir(n(s),$e,w),i.postMessage({type:"reloadNotes"}),f(d,()=>S),f(c,()=>P)},$=async w=>{const P=n(v)(),S={};w.forEach(N=>{const D=P.get(N.id),E=[];if(D&&D.data){let ne=0,pe=0;for(;ne<N.data.history.length&&pe<D.data.history.length;){const ce=N.data.history[ne],j=D.data.history[pe];ce.id===j.id?(ce.updatedAt>j.updatedAt?E.push(ce):E.push(j),ne+=1,pe+=1):ce.updatedAt<j.updatedAt?(E.push(ce),ne+=1):ce.updatedAt>j.updatedAt?(E.push(j),pe+=1):(E.push(j),ne+=1,pe+=1)}D.data.updatedAt>N.data.updatedAt?S[D.id]={id:D.id,data:{...D.data,history:E}}:S[N.id]={id:N.id,data:{...N.data,history:E}}}else S[N.id]=N}),await _t(n(s),$e,Object.values(S)),await X(),i.postMessage({type:"reloadNotes"})},le=async()=>{const w=[];n(d)().forEach(S=>{S&&S.data&&S.data.deletedAt&&w.push(S.id)}),await ir(n(s),$e,w),await X(),i.postMessage({type:"emptyBin"})},Ce=async(w,P)=>{const S=n(v)(),N=n(d)(),D=[],E=[];for(const pe of P){const ce=S.get(pe);ce?.data&&(D.push({id:pe,data:bt(ce.data)}),E.push({id:pe,data:{...ce.data,tags:ce.data.tags.filter(j=>j!==w),history:[...ce.data.history||[],{id:Xn(),link:bt(ce.data.link),text:ce.data.text,tags:ce.data.tags,updatedAt:Date.now()}]}}))}for(const pe of E){const ce=S.get(pe.id);ce?.data&&(ce.data=pe.data)}return await _t(n(s),$e,E.map(pe=>({id:pe.id,data:pe.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(d,()=>N),{cancel:async()=>{for(const pe of D){const ce=S.get(pe.id);ce?.data&&(ce.data=pe.data)}await _t(n(s),$e,D.map(pe=>({id:pe.id,data:pe.data}))),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(d,()=>N)}}},be=async(w,P,S)=>{const N=n(v)(),D=n(d)(),E=n(c)(),ne=[],pe=[];for(const Y of S){const te=N.get(Y);te?.data&&(ne.push({id:Y,data:bt(te.data)}),pe.push({id:Y,data:{...te.data,tags:te.data.tags.map(we=>we!==w?we:P),history:[...te.data.history||[],{id:Xn(),link:bt(te.data.link),text:te.data.text,tags:te.data.tags,updatedAt:Date.now()}]}}))}for(const Y of pe){const te=N.get(Y.id);te?.data&&(te.data=Y.data)}const ce=E.has(P);return await Promise.all([(async()=>{if(!ce){const Y=E.get(w)?.pinned||!1;E.set(P,{name:P,pinned:Y}),await wn(n(s),Ht,P,{pinned:Y})}})(),_t(n(s),$e,pe.map(Y=>({id:Y.id,data:Y.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(d,()=>D),f(c,()=>E),{cancel:async()=>{for(const Y of ne){const te=N.get(Y.id);te?.data&&(te.data=Y.data)}await Promise.all([(async()=>{ce||(E.delete(P),await ko(n(s),Ht,P))})(),_t(n(s),$e,ne.map(Y=>({id:Y.id,data:Y.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(d,()=>D),f(c,()=>E)}}},de=async(w,P)=>{const S=n(v)(),N=n(d)(),D=n(c)(),E=[],ne=[];for(const j of P){const Y=S.get(j);Y?.data&&(E.push({id:j,data:bt(Y.data)}),ne.push({id:j,data:{...Y.data,tags:[...new Set([...Y.data.tags,w])],history:[...Y.data.history||[],{id:Xn(),link:bt(Y.data.link),text:Y.data.text,tags:Y.data.tags,updatedAt:Date.now()}]}}))}for(const j of ne){const Y=S.get(j.id);Y?.data&&(Y.data=j.data)}const pe=D.has(w);return await Promise.all([(async()=>{pe||(D.set(w,{name:w,pinned:!1}),await wn(n(s),Ht,w,{pinned:!1}))})(),_t(n(s),$e,ne.map(j=>({id:j.id,data:j.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(d,()=>N),f(c,()=>D),{cancel:async()=>{for(const j of E){const Y=S.get(j.id);Y?.data&&(Y.data=j.data)}await Promise.all([(async()=>{pe||(D.delete(w),await ko(n(s),Ht,w))})(),_t(n(s),$e,E.map(j=>({id:j.id,data:j.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>S),f(d,()=>N),f(c,()=>D)}}},Se=async(w,P,S)=>{const N=n(v)(),D=n(d)(),E=n(c)(),ne=[],pe=[];for(const te of S){const we=N.get(te);we?.data&&(ne.push({id:te,data:bt(we.data)}),pe.push({id:te,data:{...we.data,tags:[...new Set([...we.data.tags.filter(Ae=>!w.includes(Ae)),...P])],history:[...we.data.history||[],{id:Xn(),link:bt(we.data.link),text:we.data.text,tags:we.data.tags,updatedAt:Date.now()}]}}))}for(const te of pe){const we=N.get(te.id);we?.data&&(we.data=te.data)}const ce=n(c)(),j=P.filter(te=>!ce.has(te));return await Promise.all([(async()=>{if(j.length>0)return _t(n(s),Ht,j.map(te=>({id:te,data:{pinned:!1}})))})(),_t(n(s),$e,pe.map(te=>({id:te.id,data:te.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(d,()=>D),f(c,()=>E),{cancel:async()=>{for(const te of ne){const we=N.get(te.id);we?.data&&(we.data=te.data)}await Promise.all([(async()=>{if(j.length>0){for(const te of j)E.delete(te);return ir(n(s),Ht,j)}})(),_t(n(s),$e,ne.map(te=>({id:te.id,data:te.data})))]),i.postMessage({type:"reloadNotes"}),f(v,()=>N),f(d,()=>D),f(c,()=>E)}}},ee=async w=>{const P=JSON.parse(w.data),S=P;if(P.tabId&&P.tabId===o){S.type==="exit"&&(y(),await Ha(n(s),$e),await Ha(n(s),Ht));return}if(S.type==="putNote"){const D=S.data.id;if(!D)return;const E=await Gr(n(s),$e,D);if(!E)return;_({id:D,data:E})}else if(S.type==="deleteNote"){const N=S.data.id;if(!N)return;b(N)}else if(S.type==="pinTag"){const N=S.data.tag,D=S.data.pinned,E=n(c)();E.set(N,{name:N,pinned:D}),f(c,()=>E)}else S.type==="clearNotes"?y():S.type==="reloadNotes"||S.type==="emptyBin"?X():S.type==="exit"&&y()};ke(()=>(X(),i.addEventListener(ee),()=>{i.removeEventListener(ee)})),Dd({isInitedNotes:h,createNote:H,updateNote:O,deleteNote:Z,saveNote:G,revertNote:ae,pinNote:ge,moveNoteToBin:Te,moveNoteToArchive:q,getGetNotes:x,importNotes:$,clearNotes:U,getNoteById:B,getGetMapTags:()=>n(c),pinTag:Ee,restoreNoteFromBin:ie,moveNoteFromArchive:ye,checkNotes:p,checkNotesInBin:m,checkNotesInArchive:T,emptyBin:le,moveNotesToBin:F,moveNotesToArchive:Q,moveNotesFromArchive:se,deleteNotes:re,restoreNotesFromBin:fe,deleteTag:Ce,renameTag:be,addTag:de,changeTags:Se});var J=he(),ue=A(J);Re(ue,()=>e.children??Ye),g(t,J),_e()}const el={};function Rd(t){gt(el,t)}function Da(){const t=vt(el);if(!t)throw new Error("No FeedContext found");return t}const tl={};var et=(t=>(t.INBOX="inbox",t.ARCHIVED="archive",t.BIN="bin",t))(et||{});function Od(t){gt(tl,t)}function fo(){const t=vt(tl);if(!t)throw new Error("No SelectedMetaTagsContext found");return t}function Fd(t,e){me(e,!0);const a=Yr(),{getSelectedTags:r}=Vn(),{getSelectedMetaTags:o}=fo(),{getGetNotes:s}=Rt();let i=M(r),l=M(o),u=L(0),c=[],d=L(0),v=M(()=>n(l).has(et.ARCHIVED)),h=M(()=>n(l).has(et.BIN));Be(()=>{const T=s()()||[],_=[],b=Array.from(n(i).values());for(let R=T.length-1;R>=0;R--){if(!T[R]||!T[R].data)continue;const y=T[R];if(!n(v)&&!n(h)&&(y?.data.deletedAt||y?.data.archivedAt)||n(v)&&(y?.data.deletedAt||!y?.data.archivedAt)||n(h)&&!y?.data.deletedAt)continue;const x=a?.getFeedSearch().toLowerCase()||"";if(!(a&&!(y.data.link?.title.toLowerCase().includes(x)||y.data.link?.url.toLowerCase().includes(x)||y.data.text.toLowerCase().includes(x)||y.data.tags.map(z=>z.toLowerCase()).join(" ").includes(x)))){if(n(l).has(et.INBOX)){if(y.data.tags.length>0)continue}else if(n(i).size&&b.some(z=>!y.data.tags.includes(z)))continue;_.push(y)}}f(u,_.length,!0),c=_,f(d,Date.now(),!0)}),Rd({getFiltredNotesLength:()=>n(u),getFiltredNotes:()=>(n(d),c),getUpdatedFiltredNotesTimestamp:()=>n(d)});var p=he(),m=A(p);Re(m,()=>e.children??Ye),g(t,p),_e()}function zd(t,e){me(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Bt(),s=M(a),i="selectedMetaTags";let l=M(()=>n(s).get(i)||""),u=M(()=>new Set(n(l).split(",").map(_=>decodeURIComponent(_)).filter(_=>_!=="")));Od({getSelectedMetaTags:()=>n(u),addMetaTag:_=>{n(u).has(_)||r(i,[...n(u),_].map(b=>encodeURIComponent(b)).join(","))},removeMetaTag:_=>{n(u).has(_)&&n(u).size===1?o(i):n(u).has(_)&&r(i,[...n(u)].filter(b=>b!==_).map(b=>encodeURIComponent(b)).join(","))},clearSelectedMetaTags:()=>{o(i)},setSelectedMetaTags:_=>{_.size===0?o(i):r(i,[..._].map(b=>encodeURIComponent(b)).join(","))}});var m=he(),T=A(m);Re(T,()=>e.children??Ye),g(t,m),_e()}const nl={},ia=()=>({working:!1,swipingRatio:0,isSwiping:!1,duration:.2});function Bd(t){gt(nl,t)}function Kn(){const t=vt(nl);if(!t)throw new Error("No AnimationSettingsContext found");return t}function jd(t,e){me(e,!0);let a=ft(ia());Bd(a);var r=he(),o=A(r);Re(o,()=>e.children??Ye),g(t,r),_e()}const al={};function Hd(t){gt(al,t)}function cs(){const t=vt(al);if(!t)throw new Error("No ScrollingContext found");return t}function Ud(t,e){me(e,!0);let a=L(!1);const r=()=>n(a),o=$i(()=>{f(a,!1)},100);Hd({isScrolling:r,enable:()=>{f(a,!0),o()}});var i=he(),l=A(i);Re(l,()=>e.children??Ye),g(t,i),_e()}const rl={};function Wd(t){gt(rl,t)}function Ia(){const t=vt(rl);if(!t)throw new Error("No MobileSizeContext found");return t}function Vd(t,e){me(e,!0);const a=()=>window.matchMedia("(max-width: 767px)").matches;let r=L(ft(a())),o=Kn();const s=$i(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{f(r,a(),!0)})};Wd({checkMobileSize:()=>n(r)}),ke(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var u=he(),c=A(u);Re(c,()=>e.children??Ye),g(t,u),_e()}const ol={};function Kd(t){gt(ol,t)}function Zt(){const t=vt(ol);if(!t)throw new Error("No DialogContext found");return t}function qd(t,e){me(e,!0);let a=L(0),r=L(!1),o=L(!0),s=L(!1),i=L(!1);Kd({checkExistedDialog:()=>n(a)>0,dialogInc:()=>{f(a,n(a)+1)},dialogDec:()=>{f(a,n(a)-1)},blockDialog:z=>{f(r,z,!0)},checkBlockedDialog:()=>n(r),setClosableDialog:z=>{f(o,z,!0)},checkClosableDialog:()=>n(o),checkLeftStart:()=>n(s),checkLeftEnd:()=>n(i),setLeftStart:z=>{f(s,z,!0)},setLeftEnd:z=>{f(i,z,!0)},getCountDialog:()=>n(a)});var y=he(),x=A(y);Re(x,()=>e.children??Ye),g(t,y),_e()}const sl={};function Yd(t){gt(sl,t)}function vo(){const t=vt(sl);if(!t)throw new Error("No ScrollContainerContext found");return t}function Gd(t,e){me(e,!0);let a=L(null);Yd({setScrollContainer:l=>{f(a,l,!0)},getScrollContainer:()=>n(a)});var s=he(),i=A(s);Re(i,()=>e.children??Ye),g(t,s),_e()}const il={};function Xd(t){gt(il,t)}function ds(){const t=vt(il);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Jd(t,e){me(e,!0);let a=L(200);Xd({setDialogPageHeight:l=>{f(a,l,!0)},getDialogPageHeight:()=>n(a)});var s=he(),i=A(s);Re(i,()=>e.children??Ye),g(t,s),_e()}const Zd=[ur,Gn,$e,Ht,Ed];function Qd(){return new Promise((t,e)=>{const a=indexedDB.open(xd,Td);St(a,"upgradeneeded",()=>{const r=a.result;for(const o of Zd)r.objectStoreNames.contains(o)||r.createObjectStore(o,{keyPath:"id"})}),St(a,ua,()=>{const r=a.result;t(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),St(a,"blocked",()=>{e(),alert("app outdated, please reload the page")}),St(a,Hn,()=>{e(),console.error(Hn,a.error)})})}function $d(t,e){me(e,!0);let a=L(null);ke(()=>{Qd().then(l=>{f(a,l,!0)}).catch(l=>{console.error("Failed to initialize LocalDB:",l)})}),Cd({getDB:()=>n(a)});var o=he(),s=A(o);{var i=l=>{var u=he(),c=A(u);Re(c,()=>e.children??Ye),g(l,u)};K(s,l=>{n(a)&&l(i)})}g(t,o),_e()}function eu(t,e){me(e,!0);const{getSearchParams:a,setSearchParam:r,deleteSearchParam:o}=Bt(),s=M(a);let i=M(()=>n(s).get(en)||""),l=M(()=>n(i).split(",").map(y=>decodeURIComponent(y)).filter(y=>y!==""));const u=()=>n(l),c=y=>{if(y.length===0){o(en);return}r(en,y.map(x=>encodeURIComponent(x)).join(","))},d=y=>{r(en,[...n(l),y].map(x=>encodeURIComponent(x)).join(","))};Pd({setDialogPages:c,getDialogPages:u,pushDialogPage:d,popDialogPage:()=>{const y=n(l)[n(l).length-1];return n(l).length<=1?(o(en),y):(r(en,n(l).slice(0,-1).map(x=>encodeURIComponent(x)).join(",")),y)},replaceDialogPage:y=>{r(en,[...n(l).slice(0,-1),y].map(x=>encodeURIComponent(x)).join(","))},hasDialogPage:y=>n(l).find(x=>{const[z]=x.split("?");return z===y})!==void 0,clearDialogPages:()=>{o(en)},createDialogPageHref:y=>{const x=new URLSearchParams(n(s).toString());return x.set(en,[...u(),y].map(z=>encodeURIComponent(z)).join(",")),`${window.location.pathname}?${x.toString()}`},createHandleClickDialogPage:y=>x=>{x.preventDefault(),d(y)}});var b=he(),R=A(b);Re(R,()=>e.children??Ye),g(t,b),_e()}function tu(t,e){me(e,!0);let a=L(ft(new URLSearchParams(window.location.search)));const r=v=>{const h=window.location.pathname;f(a,v,!0),window.history.replaceState(null,"",`${h}${v.size>0?`?${v.toString()}`:""}`)};id({getSearchParams:()=>n(a),replaceSearchParams:v=>{const h=new URLSearchParams(v);r(h)},setSearchParam:(v,h)=>{const p=new URLSearchParams(n(a));p.set(v,h),r(p)},deleteSearchParam:v=>{const h=new URLSearchParams(n(a));h.delete(v),r(h)},getHref:(v=n(a))=>{const h=new URLSearchParams(v);return`${window.location.pathname}${h.toString().length>0?`?${h.toString()}`:""}`},clearSearchParams:()=>{r(new URLSearchParams)}});var c=he(),d=A(c);Re(d,()=>e.children??Ye),g(t,c),_e()}const ll={};function nu(t){gt(ll,t)}function au(){const t=vt(ll);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function ru(t,e){me(e,!0);let a=ft({value:!1});const r=()=>a.value,o=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||document.activeElement?.getAttribute("contenteditable")==="true";ke(()=>{const l=()=>{setTimeout(()=>{o()?a.value=!0:a.value=!1},0)};l(),document.addEventListener("focusin",l),document.addEventListener("focusout",l);let u=null;const c=d=>{o()&&(u&&clearTimeout(u),u=setTimeout(()=>{o()&&d.target!==document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement?.blur?.()},120))};return document.addEventListener("touchstart",c,{passive:!0}),()=>{document.removeEventListener("focusin",l),document.removeEventListener("focusout",l),document.removeEventListener("touchstart",c)}}),nu({getIsKeyboardVisible:r});var s=he(),i=A(s);Re(i,()=>e.children??Ye),g(t,s),_e()}function ou(t,e){me(e,!0);const a=crypto.randomUUID(),r=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:a}))};kd({tabId:a,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>r(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=he(),s=A(o);Re(s,()=>e.children??Ye),g(t,o),_e()}function su(t,e){$d(t,{children:(a,r)=>{ou(a,{children:(o,s)=>{jd(o,{children:(i,l)=>{Ud(i,{children:(u,c)=>{Vd(u,{children:(d,v)=>{qd(d,{children:(h,p)=>{Gd(h,{children:(m,T)=>{Jd(m,{children:(_,b)=>{ru(_,{children:(R,y)=>{tu(R,{children:(x,z)=>{eu(x,{children:(X,V)=>{var H=he(),O=A(H);Re(O,()=>e.children??Ye),g(X,H)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function iu(t,e){su(t,{children:(a,r)=>{ud(a,{children:(o,s)=>{ld(o,{children:(i,l)=>{vd(i,{children:(u,c)=>{hd(u,{children:(d,v)=>{zd(d,{children:(h,p)=>{md(h,{children:(m,T)=>{bd(m,{children:(_,b)=>{Nd(_,{children:(R,y)=>{Md(R,{children:(x,z)=>{Ld(x,{children:(X,V)=>{Fd(X,{children:(H,O)=>{var G=he(),ae=A(G);Re(ae,()=>e.children??Ye),g(H,G)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}const lu=(t=document.body)=>Array.from(t.querySelectorAll('a[href], button, input, textarea, select, [tabindex]:not([tabindex="-1"])')).filter(r=>r instanceof HTMLElement?r instanceof HTMLButtonElement||r instanceof HTMLInputElement||r instanceof HTMLSelectElement||r instanceof HTMLTextAreaElement?!r.disabled&&r.offsetParent!==null:r.offsetParent!==null:!1),wt=t=>{const e=lu(),a=e.indexOf(t);if(a===-1)return{next:null,prev:null};const r=e[a+1],o=e[a-1];return{next:r,prev:o}};let Mt=L(""),Pn=L(null),Ua=L(null),An=L(null),Yn=L(ft([])),Or=L(null),Jn=null;function tt(t,e){f(Mt,""),Jn=null,f(Ua,null),f(An,null),setTimeout(()=>{f(Mt,t,!0),e?.onFinish&&f(Ua,e.onFinish,!0),e?.cancel&&(f(An,e.cancel.onCancel,!0),Jn=e.cancel.nextFocusRef)},16)}var cu=k('<button type="button" class="c p-137gtcu">undo</button>'),du=k('<div class="a p-137gtcu"><div class="b p-137gtcu"><span> </span> <!></div></div>'),uu=k("<div><!></div>");function go(t,e){me(e,!0);let a=Me(e,"ref",15,null);const r=Xn();Be(()=>{a(n(Pn))}),ke(()=>(f(Yn,[...n(Yn),r],!0),()=>{const c=n(Yn).indexOf(r);c!==-1&&f(Yn,n(Yn).filter((d,v)=>v!==c),!0)}));const o=c=>{if(c.key==="Tab"&&c.shiftKey){if(Jn&&n(Mt)){c.preventDefault();const{prev:d}=wt(Jn);d?.focus(),f(Mt,"")}}else if(c.key==="Tab"&&!c.shiftKey)Jn&&n(Mt)&&(c.preventDefault(),f(Mt,""),Jn?.focus());else if(c.key==="Escape"&&n(Mt)){if(c.preventDefault(),Jn){const{prev:d}=wt(Jn);d?.focus()}f(Mt,"")}};ke(()=>(window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)})),Be(()=>{n(Mt);const c=n(An)?2e5:8e4;n(Mt)&&(n(Pn)?.getBoundingClientRect(),n(Pn)?.style.setProperty("opacity","1"));const d=setTimeout(()=>{n(Pn)?.style.removeProperty("opacity")},c),v=setTimeout(()=>{f(Mt,""),n(Ua)&&n(Ua)(),f(Ua,null),f(An,null),n(Pn)?.style.removeProperty("opacity")},c+400);return()=>{clearTimeout(d),clearTimeout(v)}});const s=c=>{c.preventDefault(),n(An)&&(f(Ua,null),n(An)(),f(An,null)),f(Mt,""),n(Pn)?.style.removeProperty("opacity")};Be(()=>{n(Mt)&&n(An)&&n(Or)&&setTimeout(()=>{n(Or)?.focus()},151)}),Be(()=>{n(Yn),zt(()=>{f(Mt,""),n(Pn)?.style.removeProperty("opacity")})});var i=uu(),l=C(i);{var u=c=>{var d=du(),v=C(d),h=C(v),p=C(h),m=I(h,2);{var T=_=>{var b=cu();b.__click=s,Ze(b,R=>f(Or,R),()=>n(Or)),g(_,b)};K(m,_=>{n(An)&&_(T)})}Ze(v,_=>f(Pn,_),()=>n(Pn)),Pe(()=>dt(p,n(Mt))),g(c,d)};K(l,c=>{n(Mt)&&n(Yn)[n(Yn).length-1]===r&&c(u)})}g(t,i),_e()}ht(["click"]);var fu=k('<span class="a p-lxk90o"><!></span>');function mt(t,e){var a=fu(),r=C(a);Re(r,()=>e.children),g(t,a)}var vu=jc('<svg class="p-1yv1ibq"><use></use></svg>');function ve(t,e){let a=Me(e,"name",8,"");var r=vu(),o=C(r);Pe(()=>lt(o,"href",`#icon-${a()??""}`)),g(t,r)}var gu=k('<button class="a p-1cnj0y3"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function cl(t,e){me(e,!0);const{sidebarOpen:a,getSidebarState:r,sidebarClose:o}=Ar(),{getDialogPages:s}=Jt(),{checkExistedDialog:i}=Zt();let l=M(()=>s().length>0||i());const u=h=>{if(h.preventDefault(),n(l))return;const p=r();p==="closed"?a():p==="opened"&&o()};var c=gu();c.__click=u;var d=C(c);oe(d,()=>({"--size":"28px"})),ve(d.lastChild,{name:"sidebarMenu"});var v=I(d,2);mt(v,{children:(h,p)=>{var m=ze("Menu");g(h,m)}}),g(t,c),_e()}ht(["click"]);var hu=k('<button class="b p-3z9gmw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),pu=k('<div class="a p-3z9gmw"><input class="p-3z9gmw"/> <!></div>');function jo(t,e){me(e,!0);let a=Me(e,"value",15,""),r=Me(e,"ref",15,null);const o=c=>{c.key==="Escape"&&(c.stopPropagation(),r()&&(e.onEscape?.(),r().blur()))};ke(()=>(r()?.addEventListener("keydown",o),()=>{r()?.removeEventListener("keydown",o)}));var s=pu(),i=C(s);i.__input=c=>e.onChange?.(c.target?.value||""),Ze(i,c=>r(c),()=>r());var l=I(i,2);{var u=c=>{var d=hu();d.__click=()=>{a(""),e.onChange?.("")};var v=C(d);oe(v,()=>({"--size":"20px"})),ve(v.lastChild,{name:"close"});var h=I(v,2);mt(h,{children:(p,m)=>{var T=ze("Clear");g(p,T)}}),g(c,d)};K(l,c=>{a()&&c(u)})}Pe(()=>lt(i,"placeholder",e.placeholder)),ln("focus",i,function(...c){e.onFocus?.apply(this,c)}),ln("blur",i,function(...c){e.onBlur?.apply(this,c)}),Oi(i,a),g(t,s),_e()}ht(["input","click"]);function us(t,e){me(e,!0);let a=Me(e,"notificationRef",11,null);Be(()=>{console.log("notificationRef",a())}),ke(()=>{const r=o=>{o.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==o.target&&!e.dialogInner.contains(o.target)&&a()!==o.target&&!a()?.contains(o.target)&&e.onClose()};return document.addEventListener("mousedown",r,{capture:!0}),()=>{document.removeEventListener("mousedown",r,{capture:!0})}}),_e()}function mu(){const t=navigator.userAgent,e=/iPad|iPhone|iPod/.test(t);return e?!!e:!1}const cn=mu(),_u=()=>{const t=navigator.userAgent;return/android/i.test(t)},vn=_u(),Gh=()=>{const t=navigator.userAgent;return/chrome|crios/i.test(t)&&!/edg|edgios|edga|brave/i.test(t)&&!navigator.brave},Xh=()=>{const t="serviceWorker"in navigator,e="onbeforeinstallprompt"in window;return t&&e},yr=()=>{const t=navigator.userAgent;return!!(/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t))};let Ba=L(ft([]));var wu=k("<dialog><div><!></div></dialog> <!>",1);function Mr(t,e){me(e,!0);const a=Xn(),r=()=>document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement;ke(()=>(f(Ba,[...n(Ba),a],!0),()=>{const y=n(Ba).indexOf(a);y!==-1&&f(Ba,n(Ba).filter((x,z)=>z!==y),!0)}));let o=Me(e,"onClosed",3,()=>{}),s=Me(e,"blocked",3,!1),i=L(null),l=L(null),u=L(!1),{dialogInc:c,dialogDec:d}=Zt();const v=()=>{const y=setTimeout(()=>{o()()},150);n(i)?.addEventListener("transitionend",()=>{clearTimeout(y),o()()},{once:!0}),f(u,!1)};Be(()=>{e.startClose&&v()}),ke(()=>{n(i)?.showModal(),n(i)?.getClientRects(),f(u,!0);const y=x=>{x?.preventDefault(),s()||v()};return n(i)?.addEventListener("cancel",y),n(i)?.addEventListener("close",y),()=>{n(i)?.removeEventListener("cancel",y),n(i)?.removeEventListener("close",y)}}),ke(()=>(c(),()=>{d()})),ke(()=>{const y=x=>{x.key==="Escape"&&s()&&x.preventDefault()};return window.addEventListener("keydown",y),()=>{window.removeEventListener("keydown",y)}});function h(){setTimeout(()=>{if(cn||!n(i)||!n(l))return;const y=window.visualViewport;if(y)if(y.height===window.innerHeight||r()===!1){n(i).style.marginBottom="",n(i).style.transform="",n(i).style.transition="";return}else n(i).style.transition="none",n(i).style.transform=`translateY(-${window.innerHeight/2}px)`,n(i).style.marginBottom="0px"},0)}ke(()=>(h(),window.visualViewport?.addEventListener("resize",h),window.visualViewport?.addEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h),()=>{window.visualViewport?.removeEventListener("resize",h),window.visualViewport?.removeEventListener("scroll",h),document.addEventListener("focusin",h),document.addEventListener("focusout",h)}));var p=wu(),m=A(p),T=C(m),_=C(T);Re(_,()=>e.children),Ze(T,y=>f(l,y),()=>n(l)),Ze(m,y=>f(i,y),()=>n(i));var b=I(m,2);{var R=y=>{us(y,{get dialog(){return n(i)},get dialogInner(){return n(l)},onClose:v})};K(b,y=>{n(i)&&n(l)&&!s()&&y(R)})}Pe(()=>{nt(m,1,ot({a:!0,b:n(u),c:n(Ba).length>1}),"p-1x14yml"),nt(T,1,ot({d:!0,b:n(u)}),"p-1x14yml")}),g(t,p),_e()}var yu=k("<div><!></div>");function bu(t,e){me(e,!0);let a=L(!1),r=L(null);const o=()=>{const d=setTimeout(()=>{e.onClosed()},150);n(r)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),f(a,!1)},s=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},i=d=>{d.target!==n(r)&&!n(r)?.contains(d.target)&&o()},l=d=>{d.key==="Escape"&&o()};ke(()=>{n(r)?.getClientRects(),f(a,!0);const d=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i),document.addEventListener("keydown",l)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",s),document.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),Be(()=>{e.startClose&&o()});var u=yu(),c=C(u);Re(c,()=>e.children),Ze(u,d=>f(r,d),()=>n(r)),Pe(()=>nt(u,1,ot({a:!0,b:n(a)}),"p-1unpq18")),g(t,u),_e()}var Cu=k("<ul><!></ul>"),Su=k("<ul><!></ul>");function or(t,e){me(e,!0);let a=Me(e,"ref",15);var r=he(),o=A(r);{var s=l=>{Mr(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(u,c)=>{var d=Cu(),v=C(d);Re(v,()=>e.children),Ze(d,h=>a(h),()=>a()),Pe(()=>nt(d,1,ot({a:!0,b:e.isMobile}),"p-6pddb9")),g(u,d)},$$slots:{default:!0}})},i=l=>{bu(l,{get startClose(){return e.startClose},get onClosed(){return e.onClosed},children:(u,c)=>{var d=Su(),v=C(d);Re(v,()=>e.children),Ze(d,h=>a(h),()=>a()),Pe(()=>nt(d,1,ot({a:!0,b:e.isMobile}),"p-6pddb9")),g(u,d)},$$slots:{default:!0}})};K(o,l=>{e.isMobile?l(s):l(i,!1)})}g(t,r),_e()}var ku=k("<button><!></button>"),xu=k("<a><!></a>");function Fe(t,e){let a=Me(e,"dangerous",3,!1),r=Me(e,"type",3,"button"),o=Me(e,"href",3,"");var s=he(),i=A(s);{var l=c=>{var d=ku();d.__click=function(...h){e.onClick?.apply(this,h)},d.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=C(d);Re(v,()=>e.children??Ye),Pe(()=>nt(d,1,ot({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-1cyyat5")),g(c,d)},u=c=>{var d=xu();d.__click=function(...h){e.onClick?.apply(this,h)},d.__keydown=function(...h){e.onKeydown?.apply(this,h)};var v=C(d);Re(v,()=>e.children??Ye),Pe(()=>{lt(d,"href",o()),nt(d,1,ot({a:!0,b:e.dialogMode,c:a(),d:e.active}),"p-1cyyat5")}),g(c,d)};K(i,c=>{r()==="button"?c(l):c(u,!1)})}g(t,s)}ht(["click","keydown"]);var Tu=k('<li class="p-vm5mum"><!></li> <li class="p-vm5mum"><!></li> <li class="p-vm5mum"><!></li> <li class="p-vm5mum"><!></li> <li class="p-vm5mum"><!></li>',1),Eu=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Pu=k('<div class="a p-vm5mum"><button><!> <!></button> <!></div>');function Nu(t,e){me(e,!0);let a=L(!1),r=L(!1);const{getFeedOrder:o,setFeedOrder:s}=Hi();let i=cn||vn,l=M(o);const u=()=>{n(a)||f(a,!0)},c=b=>{f(r,!0),s(b)},d=()=>{f(a,!1),f(r,!1)};ke(()=>{const b=R=>{R.key==="Escape"&&f(r,!0)};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)});var v=Pu(),h=C(v);h.__click=u,nt(h,1,ot({b:!0,c:!0}),"p-vm5mum");var p=C(h);ve(p,{name:"filter"});var m=I(p,2);mt(m,{children:(b,R)=>{var y=ze("show feed order menu");g(b,y)}});var T=I(h,2);{var _=b=>{var R=Eu(),y=A(R);oe(y,()=>({"--right":"0px","--top":"44px"})),or(y.lastChild,{get startClose(){return n(r)},onClosed:d,get isMobile(){return i},children:(x,z)=>{var X=Tu(),V=A(X),H=C(V);{let q=M(()=>n(l)==="newest");Fe(H,{get active(){return n(q)},get dialogMode(){return i},onClick:()=>c("newest"),children:(F,Q)=>{var se=ze("Newest");g(F,se)},$$slots:{default:!0}})}var O=I(V,2),G=C(O);{let q=M(()=>n(l)==="oldest");Fe(G,{get active(){return n(q)},get dialogMode(){return i},onClick:()=>c("oldest"),children:(F,Q)=>{var se=ze("Oldest");g(F,se)},$$slots:{default:!0}})}var ae=I(O,2),Z=C(ae);{let q=M(()=>n(l)==="AtoZ");Fe(Z,{get active(){return n(q)},get dialogMode(){return i},onClick:()=>c("AtoZ"),children:(F,Q)=>{var se=ze("A to Z");g(F,se)},$$slots:{default:!0}})}var U=I(ae,2),B=C(U);{let q=M(()=>n(l)==="ZtoA");Fe(B,{get active(){return n(q)},get dialogMode(){return i},onClick:()=>c("ZtoA"),children:(F,Q)=>{var se=ze("Z to A");g(F,se)},$$slots:{default:!0}})}var ge=I(U,2),Te=C(ge);{let q=M(()=>n(l)==="updatedNewest");Fe(Te,{get active(){return n(q)},get dialogMode(){return i},onClick:()=>c("updatedNewest"),children:(F,Q)=>{var se=ze("Updated");g(F,se)},$$slots:{default:!0}})}g(x,X)},$$slots:{default:!0}}),g(b,R)};K(T,b=>{n(a)&&b(_)})}g(t,v),_e()}ht(["click"]);var Au=k('<div><!> <div class="a p-y3zt6o"></div></div>');function La(t,e){me(e,!0);let a=L(!1);ke(()=>{const s=setTimeout(()=>{f(a,!0)},200);return()=>{clearTimeout(s)}});var r=Au(),o=C(r);Re(o,()=>e.children??Ye),Pe(()=>nt(r,1,ot({b:!0,c:n(a)}),"p-y3zt6o")),g(t,r),_e()}var Mu=k("<a><!></a>"),Du=k("<button><!></button>");function It(t,e){let a=Me(e,"type",3,"standard"),r=Me(e,"typeButton",3,"button"),o=Me(e,"element",3,"button"),s=Me(e,"href",3,""),i=Me(e,"fullWidth",3,!1),l=Me(e,"withoutMinWidth",3,!1);var u=he(),c=A(u);{var d=h=>{var p=Mu();p.__click=function(...T){e.onClick?.apply(this,T)};var m=C(p);Re(m,()=>e.children??Ye),Pe(()=>{lt(p,"target",e.target),lt(p,"rel",e.rel),lt(p,"href",s()),nt(p,1,ot({a:!0,b:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-117xh5e")}),g(h,p)},v=h=>{var p=Du();p.__click=function(...T){e.onClick?.apply(this,T)};var m=C(p);Re(m,()=>e.children??Ye),Pe(()=>{lt(p,"type",r()),nt(p,1,ot({a:!0,c:a()==="dangerous",d:a()==="secondary",e:i(),f:l()}),"p-117xh5e")}),g(h,p)};K(c,h=>{o()==="a"?h(d):h(v,!1)})}g(t,u)}ht(["click"]);let Ho=L(!1),Fr=L(!1),Uo=L(""),Wo=L("Cancel"),Vo=L("Confirm"),Ko,Ur=L(void 0),qo,Yo=L("dangerous");function xa(t){f(Ho,!0),f(Uo,t.title,!0),t.buttonCancelTitle&&f(Wo,t.buttonCancelTitle,!0),t.buttonConfirmTitle&&f(Vo,t.buttonConfirmTitle,!0),Ko=t.onConfirm,f(Ur,t.onCancel,!0),qo=t.onClosed,t.type?f(Yo,t.type,!0):f(Yo,"dangerous")}var Iu=k('<span class="b p-1jlul5o"> </span> <div class="c p-1jlul5o"><!> <!></div>',1),Lu=k('<div class="a p-1jlul5o"><!></div>');function Ru(t,e){me(e,!0);let a=L(!1),r,o=!1;const s=()=>{r=setTimeout(()=>{f(a,!0)},250)};ke(()=>()=>{r&&clearTimeout(r)});const i=async()=>{s(),await n(Ur)?.(),f(Fr,!0)},l=async()=>{s(),await Ko?.(),f(Fr,!0),o=!0},u=()=>{clearTimeout(r),f(a,!1),f(Ho,!1),f(Fr,!1),f(Uo,""),f(Wo,"Cancel"),f(Vo,"Confirm"),f(Ur,void 0),Ko=void 0,qo&&qo(o),o=!1};var c=he(),d=A(c);{var v=h=>{Mr(h,{get blocked(){return n(a)},get startClose(){return n(Fr)},onClosed:u,children:(p,m)=>{var T=Lu(),_=C(T);{var b=y=>{La(y,{})},R=y=>{var x=Iu(),z=A(x),X=C(z),V=I(z,2),H=C(V);{var O=ae=>{It(ae,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(Z,U)=>{var B=ze();Pe(()=>dt(B,n(Wo))),g(Z,B)},$$slots:{default:!0}})};K(H,ae=>{n(Ur)&&ae(O)})}var G=I(H,2);It(G,{onClick:l,fullWidth:!0,withoutMinWidth:!0,get type(){return n(Yo)},children:(ae,Z)=>{var U=ze();Pe(()=>dt(U,n(Vo))),g(ae,U)},$$slots:{default:!0}}),Pe(()=>dt(X,n(Uo))),g(y,x)};K(_,y=>{n(a)?y(b):y(R,!1)})}g(p,T)},$$slots:{default:!0}})};K(d,h=>{n(Ho)&&h(v)})}g(t,c),_e()}const br=t=>{const e=a=>{const r=a.target,o=r?.tagName;if(o==="INPUT"||o==="TEXTAREA"||r?.isContentEditable)return;const s=a.key.toLowerCase(),i=a.metaKey,l=a.ctrlKey,u=a.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!u){a.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var Ou=k('<div class="a p-6qmscy"><a class="b p-6qmscy"><span class="c p-6qmscy"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="d p-6qmscy"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function Fu(t,e){me(e,!1);const{createDialogPageHref:a,createHandleClickDialogPage:r,getDialogPages:o,pushDialogPage:s}=Jt(),{checkExistedDialog:i}=Zt(),l=()=>{o.length===0&&!i()&&s(xe.NewNote)};ke(()=>br({key:"n",action:l})),ss();var u=Ou(),c=C(u),d=M(()=>r(xe.NewNote));c.__click=function(..._){n(d)?.apply(this,_)};var v=C(c),h=C(v);oe(h,()=>({"--size":"28px","--color":"#b0b0b0"})),ve(h.lastChild,{name:"add"});var p=I(h,2);mt(p,{children:(_,b)=>{var R=ze("Add note");g(_,R)}});var m=I(v,2),T=C(m);oe(T,()=>({"--size":"16px","--color":"#b0b0b0"})),ve(T.lastChild,{name:"plus"}),Pe(_=>lt(c,"href",_),[()=>a(xe.NewNote)]),g(t,u),_e()}ht(["click"]);var zu=k("<button><!></button>");function fa(t,e){me(e,!0);let a=Me(e,"type",3,"button"),r=!1,o=L(null);Be(()=>{e.onRef&&e.onRef(n(o))});const s=d=>{(d.key==="Enter"||d.key===" ")&&(r=!0)},i=()=>{e.onClick&&(e.onClick?.(r),r&&(r=!1))},l=d=>{(d.pointerType==="mouse"&&d.button===0||d.pointerType==="touch")&&e.onPointerDown&&e.onPointerDown?.(d)};var u=zu();u.__keydown=s,u.__click=i,u.__pointerdown=l,u.__touchstart=function(...d){e.onTouchStart?.apply(this,d)};var c=C(u);Re(c,()=>e.children??Ye),Ze(u,d=>f(o,d),()=>n(o)),Pe(()=>{lt(u,"type",a()),u.disabled=e.disabled,nt(u,1,ot({a:!0,b:e.style==="selected",c:e.size==="small",d:e.mode==="empty"}),"p-1g975vt")}),g(t,u),_e()}ht(["keydown","click","pointerdown","touchstart"]);var Bu=k('<div class="b p-1pt17hy"> </div>'),ju=k('<div class="a p-1pt17hy"><input/> <!></div>');function Cr(t,e){me(e,!0);let a=Me(e,"value",15,""),r=Me(e,"error",3,""),o=Me(e,"ref",15,null);var s=ju(),i=C(s);i.__input=function(...d){e.onInput?.apply(this,d)};let l;Ze(i,d=>o(d),()=>o());var u=I(i,2);{var c=d=>{var v=Bu(),h=C(v);Pe(()=>dt(h,r())),g(d,v)};K(u,d=>{r()&&d(c)})}Pe(()=>{lt(i,"placeholder",e.placeholder),l=nt(i,1,"p-1pt17hy",null,l,{error:!!r()})}),ln("blur",i,function(...d){e.onBlur?.apply(this,d)}),ln("focus",i,function(...d){e.onFocus?.apply(this,d)}),Oi(i,a),g(t,s),_e()}ht(["input"]);var Hu=k('<div class="b p-y9ylet"> </div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Uu=k('<form class="a p-y9ylet"><!></form>');function Wu(t,e){me(e,!0);const{renameTag:a}=Rt(),{getSelectedTags:r,setSelectedTags:o}=Vn(),{getSelectedNotes:s,setSelectedNotes:i,clearNotes:l}=da(),{getFiltredNotes:u}=Da();let c=L(!1),d=L(!1),v,h=!1,p=L(null),m=L(ft(e.tag)),T=e.nextFocusRef;ke(()=>(n(p)&&n(p).focus(),()=>{v&&clearTimeout(v)}));const _=()=>{v=setTimeout(()=>{f(d,!0)},250)},b=()=>{f(c,!0)},R=async()=>{if(n(m).trim()===e.tag){b();return}if(n(m).trim()!=="")try{_();const z=r(),X=[...z].map(ae=>ae===e.tag?n(m).trim():ae),V=new Set(s()),H=u(),O=V.size?[...V]:H.map(ae=>ae.id),{cancel:G}=await a(e.tag,n(m).trim(),O);l(),o(new Set(X)),tt("Tag renamed",{cancel:{nextFocusRef:T,onCancel:async()=>{await G(),o(z),i(V),setTimeout(()=>{const{prev:ae}=wt(T);ae?.focus()},16)}}}),h=!0}finally{f(c,!0)}},y=()=>{e.onClosed?.(h)},x=z=>{z.preventDefault(),R()};Mr(t,{get blocked(){return n(d)},get startClose(){return n(c)},onClosed:y,children:(z,X)=>{var V=Uu(),H=C(V);{var O=ae=>{La(ae,{})},G=ae=>{var Z=Hu(),U=A(Z),B=C(U),ge=I(U,2);Cr(ge,{placeholder:"Enter new tag name",get ref(){return n(p)},set ref(Q){f(p,Q,!0)},get value(){return n(m)},set value(Q){f(m,Q,!0)}});var Te=I(ge,2),q=C(Te);It(q,{onClick:b,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(Q,se)=>{var fe=ze("Cancel");g(Q,fe)},$$slots:{default:!0}});var F=I(q,2);It(F,{onClick:R,fullWidth:!0,withoutMinWidth:!0,children:(Q,se)=>{var fe=ze("OK");g(Q,fe)},$$slots:{default:!0}}),Pe(()=>dt(B,`Rename "${e.tag??""}" for selected notes`)),g(ae,Z)};K(H,ae=>{n(d)?ae(O):ae(G,!1)})}ln("submit",V,x),g(z,V)},$$slots:{default:!0}}),_e()}let ta=L(!1),va=L(!1),Yt=L(""),ha=L(0),fr=L(0),vr=L(0),Wr,Xr=()=>({bottom:0,right:0,height:0}),Qt=L(null),Go=L(null);function Vu(t){if(n(ta)){f(va,!0),n(Yt)!==t.tag&&(Wr=()=>{const a=t.getRect();f(ta,!0),f(Yt,t.tag,!0),f(ha,a.bottom,!0),f(fr,a.right,!0),f(vr,a.height,!0),Xr=t.getRect,f(Qt,t.focusRef,!0)});return}const e=t.getRect();f(ta,!0),f(Yt,t.tag,!0),f(ha,e.bottom,!0),f(fr,e.right,!0),f(vr,e.height,!0),Xr=t.getRect,f(Qt,t.focusRef,!0)}const Ku=()=>n(ta),qu=()=>n(Go);var Yu=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin',1),Gu=k('<li class="p-16hbyw2"><!></li>'),Xu=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin',1),Ju=k('<li class="p-16hbyw2"><!></li>'),Zu=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename',1),Qu=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),$u=k('<!> <li class="p-16hbyw2"><!></li> <li class="p-16hbyw2"><!></li>',1),ef=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),tf=k("<!> <!>",1);function nf(t,e){me(e,!0);const{getScrollContainer:a}=vo(),{pinTag:r,getGetMapTags:o,deleteTag:s}=Rt(),{checkMobileSize:i}=Ia(),{getSelectedTags:l,removeTag:u,setSelectedTags:c}=Vn(),{getSelectedNotes:d,setSelectedNotes:v,clearNotes:h}=da(),{getFiltredNotes:p}=Da();let m=L(!1);Be(()=>{n(ta),zt(()=>{f(m,o()().get(n(Yt))?.pinned||!1,!0)})});let T=L(!1);const _=()=>{r(n(Yt),!0),f(va,!0);let q=n(Qt),F=wt(q)?.next;tt("Tag pinned",{cancel:{nextFocusRef:F,onCancel:async()=>{r(n(Yt),!1),setTimeout(()=>{const{prev:Q}=wt(F);Q?.focus()},16)}}})},b=()=>{r(n(Yt),!1),f(va,!0);let q=n(Qt),F=wt(q)?.next;tt("Tag unpinned",{cancel:{nextFocusRef:F,onCancel:async()=>{r(n(Yt),!0),setTimeout(()=>{const{prev:Q}=wt(F);Q?.focus()},16)}}})},R=()=>{f(ta,!1),f(va,!1),f(ha,0),f(fr,0),f(vr,0),Xr=()=>({bottom:0,right:0,height:0}),f(Qt,null),Wr&&setTimeout(()=>{Wr?.(),Wr=void 0})};let y=M(()=>window.innerHeight-n(ha)<100?n(ha)-n(vr)-98+"px":n(ha)+5+"px"),x=M(a);const z=q=>{q.key==="Tab"&&q.shiftKey&&(q.preventDefault(),n(Qt)?.focus())},X=q=>{q.key==="Tab"&&!q.shiftKey&&n(Qt)&&(q.preventDefault(),wt(n(Qt))?.next?.focus())};ke(()=>{const q=F=>{F.key==="Escape"&&n(ta)&&n(Qt)?.focus()};return window.addEventListener("keydown",q),()=>{window.removeEventListener("keydown",q)}});const V=()=>{f(va,!0);let q=n(Qt),F=wt(q)?.next;xa({title:`Are you sure to delete "${n(Yt)}" from selected notes?`,buttonConfirmTitle:"Delete",onConfirm:async()=>{const Q=Array.from(n(G)),se=new Set(d()),fe=p(),ie=se.size?[...se]:fe.map(Ee=>Ee.id);n(G).has(n(Yt))&&(se.size===0||fe.length===se.size)&&u(n(Yt)),h();const{cancel:ye}=await s(n(Yt),ie);tt("Tag deleted",{cancel:{nextFocusRef:F,onCancel:async()=>{await ye(),c(new Set(Q)),v(new Set(se)),setTimeout(()=>{const{prev:Ee}=wt(F);Ee?.focus()},16)}}})},onCancel:async()=>{},onClosed:Q=>{setTimeout(()=>{Q||q?.focus()},16)}})};let H=()=>{};const O=()=>{f(va,!0),f(T,!0);let q=n(Qt);H=()=>{f(T,!1),setTimeout(()=>{q?.focus()},16)}};Be(()=>{const q=()=>{const F=Xr();f(ha,F.bottom,!0),f(fr,F.right,!0),f(vr,F.height,!0)};return n(x)?.addEventListener("scroll",q),window.addEventListener("resize",q),()=>{n(x)?.removeEventListener("scroll",q),window.removeEventListener("resize",q)}});let G=M(l),ae=M(i);var Z=tf(),U=A(Z);{var B=q=>{var F=ef(),Q=A(F);oe(Q,()=>({"--left":n(fr)-36+"px","--top":n(y),"--transform-origin":"top left"})),or(Q.lastChild,{get startClose(){return n(va)},onClosed:R,get isMobile(){return n(ae)},get ref(){return n(Go)},set ref(se){f(Go,se,!0)},children:(se,fe)=>{var ie=$u(),ye=A(ie);{var Ee=de=>{var Se=Gu(),ee=C(Se);Fe(ee,{onClick:_,onKeydown:z,get dialogMode(){return n(ae)},children:(J,ue)=>{var w=Yu(),P=A(w);oe(P,()=>({"--size":"20px"})),ve(P.lastChild,{name:"pin"}),g(J,w)},$$slots:{default:!0}}),g(de,Se)},re=de=>{var Se=Ju(),ee=C(Se);Fe(ee,{onClick:b,onKeydown:z,get dialogMode(){return n(ae)},children:(J,ue)=>{var w=Xu(),P=A(w);oe(P,()=>({"--size":"20px"})),ve(P.lastChild,{name:"pin-cancel"}),g(J,w)},$$slots:{default:!0}}),g(de,Se)};K(ye,de=>{n(m)?de(re,!1):de(Ee)})}var $=I(ye,2),le=C($);Fe(le,{onClick:O,get dialogMode(){return n(ae)},children:(de,Se)=>{var ee=Zu(),J=A(ee);oe(J,()=>({"--size":"20px","--scale":"0.9"})),ve(J.lastChild,{name:"pen"}),g(de,ee)},$$slots:{default:!0}});var Ce=I($,2),be=C(Ce);Fe(be,{onClick:V,onKeydown:X,get dialogMode(){return n(ae)},children:(de,Se)=>{var ee=Qu(),J=A(ee);oe(J,()=>({"--size":"20px"})),ve(J.lastChild,{name:"bin"}),g(de,ee)},$$slots:{default:!0}}),g(se,ie)},$$slots:{default:!0}}),g(q,F)};K(U,q=>{n(ta)&&q(B)})}var ge=I(U,2);{var Te=q=>{{let F=M(()=>wt(n(Qt))?.next||null);Wu(q,{get tag(){return n(Yt)},get nextFocusRef(){return n(F)},onClosed:Q=>{H(Q)}})}};K(ge,q=>{n(T)&&q(Te)})}g(t,Z),_e()}var af=k('<span><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>'),rf=k('<button><span class="b p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span></button>'),of=k("<!> <span> </span> <!>",1),sf=k('<div class="a p-9jjlcl"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>');function gr(t,e){me(e,!0);let{getGetMapTags:a}=Rt(),r=L(null),o=M(Ku);const s=()=>{if(n(r)){const v=n(r).getBoundingClientRect();return{bottom:v.bottom,right:v.right,height:v.height}}return{bottom:0,right:0,height:0}},i=v=>{v.stopPropagation(),v.preventDefault(),Vu({tag:e.tag,getRect:s,focusRef:n(r)})},l=v=>{v.key==="Tab"&&!v.shiftKey&&n(o)&&(v.preventDefault(),qu()?.querySelectorAll('button, [tabindex="0"]')[0]?.focus())};let u=M(()=>a()().get(e.tag)?.pinned||!1);var c=sf(),d=C(c);oe(d,()=>({"--paddingRight":e.hideMenu?void 0:"30px"})),fa(d.lastChild,{get style(){return e.type},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(v,h)=>{var p=of(),m=A(p);{var T=x=>{var z=af(),X=C(z);oe(X,()=>({"--size":"18px"})),ve(X.lastChild,{name:"pin"}),g(x,z)};K(m,x=>{n(u)&&x(T)})}var _=I(m,2),b=C(_),R=I(_,2);{var y=x=>{var z=rf();z.__click=i,z.__keydown=l;var X=C(z),V=C(X);oe(V,()=>({"--size":"16px"})),ve(V.lastChild,{name:"menu"});var H=I(V,2);mt(H,{children:(O,G)=>{var ae=ze("Tag options");g(O,ae)}}),Ze(z,O=>f(r,O),()=>n(r)),Pe(()=>nt(z,1,ot({c:!0,d:e.type==="selected"}),"p-9jjlcl")),g(x,z)};K(R,x=>{e.hideMenu||x(y)})}Pe(()=>dt(b,e.tag)),g(v,p)},$$slots:{default:!0}}),g(t,c),_e()}ht(["click","keydown"]);var lf=k('<div class="a p-lawyrs"><div><!> <!> <!></div></div>');function Ds(t,e){me(e,!0);let a=Me(e,"mobile",3,!1);const{getGetMapTags:r}=Rt();let s=M(()=>{const p=r()();return[...e.tags].sort((m,T)=>p.get(m)?.pinned?-1:p.get(T)?.pinned?1:m.localeCompare(T))}),i=M(()=>n(s).filter(p=>r()().get(p)?.pinned)),l=M(()=>n(s).filter(p=>!r()().get(p)?.pinned));var u=lf(),c=C(u),d=C(c);Bn(d,16,()=>n(i),p=>p,(p,m)=>{gr(p,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})});var v=I(d,2);Bn(v,17,()=>e.metaTags,p=>"meta"+p,(p,m)=>{gr(p,{hideMenu:!0,get tag(){return n(m)},onClick:()=>{e.handleMetaTagClick(n(m))}})});var h=I(v,2);Bn(h,16,()=>n(l),p=>p,(p,m)=>{gr(p,{get hideMenu(){return e.hideTagMenu},get tag(){return m},onClick:()=>{e.handleTagClick(m)}})}),Pe(()=>nt(c,1,ot({b:!0,c:a()}),"p-lawyrs")),g(t,u),_e()}var cf=k('<div class="b c p-32813r"><div class="d p-32813r"><button class="e p-32813r"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!> <!></div>'),df=k('<div class="a p-32813r"><!></div>');function Is(t,e){me(e,!0);let a=L(null);const r=u=>{f(a,u,!0)},o=()=>{e.clearTags(),e.clearMetaTags()};Be(()=>{n(a)&&n(a).focus()});var s=df(),i=C(s);{var l=u=>{var c=cf(),d=C(c),v=C(d);v.__click=o;var h=C(v);oe(h,()=>({"--size":"20px"})),ve(h.lastChild,{name:"close"});var p=I(h,2);mt(p,{children:(_,b)=>{var R=ze("Clear");g(_,R)}});var m=I(d,2);Bn(m,19,()=>e.metaTags,_=>"meta_"+_,(_,b,R)=>{{let y=M(()=>n(R)===e.metaTags.size-1&&e.selectedTags.size===0?r:void 0);gr(_,{hideMenu:!0,type:"selected",get tag(){return n(b)},onClick:()=>{e.handleMetaTagClick(n(b))},get onRef(){return n(y)}})}});var T=I(m,2);Bn(T,18,()=>e.selectedTags,_=>_,(_,b,R)=>{{let y=M(()=>n(R)===e.selectedTags.size-1?r:void 0);gr(_,{get hideMenu(){return e.hideTagMenu},type:"selected",get tag(){return b},onClick:()=>{e.handleSelectedTagClick(b)},get onRef(){return n(y)}})}}),g(u,c)};K(i,u=>{e.selectedTags.size+e.metaTags.size>0&&u(l)})}g(t,s),_e()}ht(["click"]);const Xo=(t,e,a,r)=>{if(t.has(et.INBOX))return[];const o=[],s=Array.from(e.values());for(const i of a)if(i.data&&!(r&&!r(i))){if(e.size===0){for(const l of i?.data?.tags||[])o.includes(l)||o.push(l);continue}if(i.data&&s.every(l=>i.data?.tags.includes(l)))for(const l of i.data.tags||[])!e.has(l)&&!o.includes(l)&&o.push(l)}return o},jn=200,uf=t=>t<.5?2*t*t:-1+(4-2*t)*t,dl=t=>{let e=0,a=1,r=0;const o=100;let s=0;const i=1e-4;for(;a-e>i&&(r=(e+a)/2,uf(r)<t?e=r:a=r,s++,!(s>o)););return(e+a)/2},ff=t=>{const{getIsKeyboardVisible:a}=au();let r=[],o=!1,s=!1;const i=()=>{r=[],o=!1,s=!1},l=v=>({x:v.clientX,y:v.clientY,time:performance.now()}),u=v=>{r=[l(v.touches[0])],o=!0},c=v=>{if(!o||s)return;r.push(l(v.touches[0]));const h=performance.now()-150;r=r.filter(V=>V.time>=h);const p=r.at(-1),m=r[0];if(!p||!m)return;const T=m.x,_=m.y,b=p.x,R=p.y,y=b-T,x=R-_,z=Math.abs(y)>Math.abs(x),X=Math.abs(y)>3;z&&X&&!a()&&(s=!0,v.preventDefault(),t([...r]),i())},d=()=>{i()};ke(()=>(document.addEventListener("touchstart",u,{passive:!0}),document.addEventListener("touchmove",c,{passive:!1}),document.addEventListener("touchend",d,{passive:!0}),document.addEventListener("touchcancel",d,{passive:!0}),()=>{document.removeEventListener("touchstart",u),document.removeEventListener("touchmove",c),document.removeEventListener("touchend",d),document.removeEventListener("touchcancel",d)}))},Ls=5,Rs=.6,la=.3;function ul(t,e){me(e,!0);let a=[],r=0,o=!1,s=0,i=0,l=0,u=0,c=0,d=null,v=null;const h=()=>{a=[],r=0,o=!1,s=0,i=0,l=0,u=0,c=0,d!==null&&(cancelAnimationFrame(d),d=null),v&&(clearTimeout(v),v=null)},p=()=>{e.onCancel(),h()},m=()=>{v&&clearTimeout(v),v=setTimeout(p,5e3)};ff(async X=>{if(!o)try{const V=X.at(-1);if(!V)throw new Error("No points available for swipe initialization");const H=await e.onInit();if(!H)return;s=H.initialPosition,i=H.currentPosition,l=H.minPosition,u=H.maxPosition,c=H.width,r=V.x,a=X,o=!0,m()}catch(V){console.error("Error during swipe initialization:",V),h()}});const _=X=>Math.max(l,Math.min(u,X)),b=()=>{if(d=null,!o){h();return}const X=a.at(-1),V=a[0];if(!X||!V)return;let H=X.x-r;r=X.x;const O=_(i+H);O!==i&&(i=O,e.onUpdate({initialPosition:s,newPosition:O,width:c,minPosition:l,maxPosition:u}))},R=X=>{if(!o){h();return}a.push({x:X.touches[0].clientX,y:X.touches[0].clientY,time:performance.now()});const V=performance.now()-150;a=a.filter(ae=>ae.time>=V),d===null&&(d=requestAnimationFrame(b)),m();const H=X.touches[0].clientX-a[0].x,O=X.touches[0].clientY-a[0].y;Math.abs(H)>Math.abs(O)&&X.cancelable&&X.preventDefault()},y=X=>{const V=Math.abs(X);if(V>=Rs)return Ls;if(V>=la){const H=(V-la)/(Rs-la);return e.baseActionThreshold-H*(e.baseActionThreshold-Ls)}else return e.baseActionThreshold},x=X=>{if(!o){h();return}let V=0;a.push({x:X.changedTouches[0].clientX,y:X.changedTouches[0].clientY,time:performance.now()}),b(),d!==null&&(cancelAnimationFrame(d),d=null);const H=a[0],O=a[a.length-1],G=O.x-H.x,ae=O.time-H.time;ae>0&&(V=G/ae);const Z=y(V);e.onFinish({swipeVelocity:V,currentPosition:i,minPosition:l,maxPosition:u,initialPosition:s,width:c,actionThreshold:Z}),h()},z=()=>{p()};ke(()=>(document.addEventListener("touchmove",R,{passive:!1}),document.addEventListener("touchend",x,{passive:!0}),document.addEventListener("touchcancel",z,{passive:!0}),()=>{document.removeEventListener("touchmove",R),document.removeEventListener("touchend",x),document.removeEventListener("touchcancel",z),d!==null&&cancelAnimationFrame(d),v&&clearTimeout(v)})),_e()}function vf(t,e){me(e,!0);const a=Kn();let r=Me(e,"animationRef",7),o=Me(e,"dialog",7);ul(t,{baseActionThreshold:50,onInit:async()=>{if(!o())throw new Error("Dialog is not defined");if(!(e.sidebarState==="opened"||e.sidebarState==="closed"))return;const c=-e.dialogWidth*.7,d=0;let v=e.sidebarState==="closed"?c:d,h=e.sidebarState==="closed"?0:1;if(e.sidebarState==="opened"){let T=()=>1;if(r().current){r().current.pause();let _=Number(r().current.currentTime);yr()&&(_=Number(_)+50,r().current.currentTime=Math.min(Math.max(jn-1,_),_));const b=r().current.effect?.getComputedTiming().progress||0;T=()=>b,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(_=>requestAnimationFrame(_)),h=Math.abs(1-T())}h=e.sidebarState==="closed"?h:1-h,o().style.setProperty("--backdrop-bg",`${h*.1}`),o()&&!o().open&&(o().showModal(),yr()&&o().getBoundingClientRect()),a.isSwiping=!0,a.duration=0,a.swipingRatio=h*-25;const p=h*e.dialogWidth;o().style.setProperty("--transition-timing-dialog","0s");let m=e.sidebarState==="closed"?c:d;return e.sidebarState==="opened"||e.sidebarState==="closed"||(m=p),e.onSwipe(e.sidebarState==="closed"?"open":"close"),{initialPosition:v,currentPosition:m,minPosition:c,maxPosition:d,width:e.dialogWidth}},onCancel:()=>{a.isSwiping=!1,e.onCancelSwipe(e.sidebarState==="swipingOpen"||e.sidebarState==="opened"||e.sidebarState==="opening")},onUpdate:({newPosition:c,width:d})=>{if(!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;const v=1-Math.abs(c/d)/7*10;o().style.transform=`translate3d(${c}px, 0, 0)`,a.swipingRatio=v*-25,o().style.setProperty("--backdrop-bg",`${v*.1}`)},onFinish:({swipeVelocity:c,currentPosition:d,initialPosition:v,width:h,actionThreshold:p})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.sidebarState!=="swipingOpen"&&e.sidebarState!=="swipingClose")return;let m="close";const T=Math.abs(d-v)/h*100/7*10;if(T===0&&e.sidebarState==="swipingOpen"){e.onCancelSwipe(!1);return}if(T===0&&e.sidebarState==="swipingClose"){e.onCancelSwipe(!0);return}e.sidebarState==="swipingOpen"?m=Math.abs(T)>p||c>la?"open":"close":e.sidebarState==="swipingClose"&&(m=Math.abs(T)>p&&c<=la||c<-la?"close":"open");let _=dl(Math.abs(T)/100);e.sidebarState==="swipingClose"&&m==="close"&&(_=1-_);const b=(m==="open"?1-_:_)*jn;a.duration=b/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),o().style.setProperty("--backdrop-bg",`${m==="open"?.1:0}`),m==="open"?e.onOpen():m==="close"&&e.onClose()}}),_e()}var gf=k("<dialog><div><!> <!></div></dialog> <!> <!>",1);function hf(t,e){me(e,!0);const{getSidebarState:a,setSidebarState:r}=Ar();let o=L(0);ke(()=>{const B=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",B),B(),()=>{window.removeEventListener("resize",B)}});const s=Kn(),{isScrolling:i}=cs();let l=L(null),u=L(null),c={},d=M(a);const v=()=>{e.blocked||r("closing")},h=B=>{r(B==="open"?"swipingOpen":"swipingClose")},p=()=>{r("opened")},m=()=>{r("preOpening")},T=()=>{n(l)?.close(),r("closed")},_=B=>{B.preventDefault(),v()};ke(()=>(n(l)?.addEventListener("close",T),n(l)?.addEventListener("cancel",_),()=>{n(l)?.removeEventListener("close",T),n(l)?.removeEventListener("cancel",_)}));const b=M(i);let R=M(()=>s.working);const y=B=>{B?(r("opened"),s.swipingRatio=-25):(r("closed"),s.swipingRatio=0,n(l)?.close()),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ia().duration};Be(()=>{n(d)==="opening"?zt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=-25,n(l).style.removeProperty("--backdrop-bg");const B=n(l).style.transform||"translate3d(-100%, 0, 0)";n(l).style.transform="";const ge=n(l)?.animate([{transform:B},{transform:"translate3d(0, 0, 0)"}],{duration:s.duration*1e3||jn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});c.current=ge,ge&&(ge.onfinish=()=>{p(),s.swipingRatio=-25,n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ia().duration,ge.cancel(),c.current=void 0})})}):n(d)==="closing"&&zt(()=>{requestAnimationFrame(()=>{if(!n(l))return;s.swipingRatio=0,n(l).style.removeProperty("--backdrop-bg");const B=n(l).style.transform||"translate3d(0, 0, 0)";n(l).style.transform="";const ge=n(l)?.animate([{transform:B},{transform:"translate3d(-100%, 0, 0)"}],{duration:s.duration*1e3||jn,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});c.current=ge,ge&&(ge.onfinish=()=>{T(),n(l)&&(n(l).style.removeProperty("--transition-timing-dialog"),n(l).style.removeProperty("--backdrop-bg")),s.duration=ia().duration,ge.cancel(),c.current=void 0})})})}),Be(()=>{n(d)==="preOpening"&&(n(l)?.open||(n(l)?.showModal(),yr()&&n(l)?.getBoundingClientRect()),r("opening"))}),ke(()=>{n(d)==="opened"&&r("preOpening")});var x=gf(),z=A(x),X=C(z),V=C(X);Re(V,()=>e.children);var H=I(V,2);{var O=B=>{go(B,{})};K(H,B=>{n(d)==="opened"&&B(O)})}Ze(X,B=>f(u,B),()=>n(u)),Ze(z,B=>f(l,B),()=>n(l));var G=I(z,2);{var ae=B=>{us(B,{get dialog(){return n(l)},get dialogInner(){return n(u)},onClose:v})};K(G,B=>{n(u)&&n(d)==="opened"&&!e.blocked&&B(ae)})}var Z=I(G,2);{var U=B=>{vf(B,{onCancelSwipe:y,onOpen:m,onClose:v,onSwipe:h,get dialogWidth(){return n(o)},get animationRef(){return c},get dialog(){return n(l)},get sidebarState(){return n(d)}})};K(Z,B=>{!n(b)&&!e.blocked&&B(U)})}Pe(()=>{nt(z,1,ot({a:!0,b:n(R),c:n(d)==="opened"||n(d)==="opening"||n(d)==="closing"||n(d)==="swipingClose",d:n(d)==="opened"||n(d)==="opening"||n(d)==="swipingOpen"}),"p-1gucilc"),nt(X,1,ot({e:!0,f:n(d)==="swipingOpen",g:n(d)!=="opened"}),"p-1gucilc")}),g(t,x),_e()}var pf=k('<div class="a p-1lsyiiu"><div class="b p-1lsyiiu"><!> <div class="c p-1lsyiiu"><a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="d p-1lsyiiu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="e p-1lsyiiu"><!></div> <!></div> <!>',1),mf=k('<div class="f p-1lsyiiu"><div class="e p-1lsyiiu"><!></div> <div class="g p-1lsyiiu"><div class="a p-1lsyiiu"><!></div> <!></div></div>');function _f(t,e){me(e,!0);const{checkMobileSize:a}=Ia(),{sidebarClose:r,getSidebarState:o,sidebarOpen:s}=Ar(),{getDialogPages:i,createDialogPageHref:l,createHandleClickDialogPage:u}=Jt(),{getTagsSearch:c,setTagsSearch:d}=dd(),{getSelectedTags:v,addTag:h,removeTag:p,clearTags:m}=Vn(),{getSelectedMetaTags:T,addMetaTag:_,removeMetaTag:b,clearSelectedMetaTags:R}=fo();let y=M(v),x=M(T);const{getGetNotes:z,checkNotesInArchive:X,checkNotesInBin:V}=Rt(),H=M(z),O=re=>{h(re)},G=re=>{_(re)},ae=re=>{p(re)},Z=re=>{b(re)};let U=M(()=>n(y).size===0&&!n(x).has(et.INBOX)&&(n(H)()||[]).some(re=>(!n(x).has(et.ARCHIVED)&&!n(x).has(et.BIN)&&re?.data&&!re.data.deletedAt&&!re.data.archivedAt||n(x).has(et.ARCHIVED)&&re?.data&&!re.data.deletedAt&&re.data.archivedAt||n(x).has(et.BIN)&&re?.data&&re.data.deletedAt)&&re?.data?.tags.length===0)),B=M(()=>Xo(n(x),n(y),n(H)()||[],re=>!(re?.data&&(re.data.deletedAt||re.data.archivedAt)&&!n(x).has(et.ARCHIVED)&&!n(x).has(et.BIN)||re?.data&&(re.data.deletedAt||!re.data.archivedAt)&&n(x).has(et.ARCHIVED)||re?.data&&!re.data.deletedAt&&n(x).has(et.BIN)))),ge=M(()=>n(B).filter(re=>c()===""||re.toLowerCase().indexOf(c().toLowerCase())!==-1)),Te=M(a);const{checkExistedDialog:q}=Zt();let F=M(()=>i().length>0||q());const Q=()=>{if(n(Te)){if(n(F))return;o()==="opened"?r():o()==="closed"&&s()}};ke(()=>br({key:"b",meta:!0,action:Q})),ke(()=>br({key:"b",ctrl:!0,action:Q}));let se=M(()=>[...n(U)&&n(x).size===0?[et.INBOX]:[],...n(x).size===0?[...X()&&n(y).size===0?[et.ARCHIVED]:[],...V()&&n(y).size===0?[et.BIN]:[]]:[]].filter(re=>c()===""||re.toLowerCase().indexOf(c().toLowerCase())!==-1).sort((re,$)=>re===et.INBOX?-1:$===et.INBOX?1:re.localeCompare($)));var fe=he(),ie=A(fe);{var ye=re=>{hf(re,{get blocked(){return n(F)},children:($,le)=>{var Ce=pf(),be=A(Ce),de=C(be),Se=C(de);cl(Se,{});var ee=I(Se,2),J=C(ee),ue=M(()=>u(xe.Settings));J.__click=function(...Y){n(ue)?.apply(this,Y)};var w=C(J);oe(w,()=>({"--size":"24px"})),ve(w.lastChild,{name:"settings"});var P=I(w,2);mt(P,{children:(Y,te)=>{var we=ze("Settings");g(Y,we)}});var S=I(J,2),N=M(()=>u(xe.Sync));S.__click=function(...Y){n(N)?.apply(this,Y)};var D=C(S);oe(D,()=>({"--size":"24px"})),ve(D.lastChild,{name:"sync"});var E=I(D,2);mt(E,{children:(Y,te)=>{var we=ze("Sync");g(Y,we)}});var ne=I(de,2),pe=C(ne);{let Y=M(c);jo(pe,{placeholder:"Search tag",get value(){return n(Y)},onChange:te=>{d(te)}})}var ce=I(ne,2);{let Y=M(()=>n(x).has(et.BIN));Is(ce,{get clearTags(){return m},get clearMetaTags(){return R},get hideTagMenu(){return n(Y)},handleMetaTagClick:Z,get metaTags(){return n(x)},get selectedTags(){return n(y)},handleSelectedTagClick:ae})}var j=I(be,2);{let Y=M(()=>n(x).has(et.BIN));Ds(j,{get hideTagMenu(){return n(Y)},get metaTags(){return n(se)},get tags(){return n(ge)},handleMetaTagClick:G,handleTagClick:O,mobile:!0})}Pe((Y,te)=>{lt(J,"href",Y),lt(S,"href",te)},[()=>l(xe.Settings),()=>l(xe.Sync)]),g($,Ce)},$$slots:{default:!0}})},Ee=re=>{var $=mf(),le=C($),Ce=C(le);{let J=M(c);jo(Ce,{placeholder:"Search tag",get value(){return n(J)},onChange:ue=>{d(ue)}})}var be=I(le,2),de=C(be),Se=C(de);{let J=M(()=>n(x).has(et.BIN));Is(Se,{get metaTags(){return n(x)},get clearTags(){return m},get clearMetaTags(){return R},get hideTagMenu(){return n(J)},get selectedTags(){return n(y)},handleMetaTagClick:Z,handleSelectedTagClick:ae})}var ee=I(de,2);{let J=M(()=>n(x).has(et.BIN));Ds(ee,{get metaTags(){return n(se)},get hideTagMenu(){return n(J)},get tags(){return n(ge)},handleMetaTagClick:G,handleTagClick:O})}g(re,$)};K(ie,re=>{n(Te)?re(ye):re(Ee,!1)})}g(t,fe),_e()}ht(["click"]);var wf=k('<button class="a p-1rhvlnb"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function yf(t,e){me(e,!0);let a=Me(e,"ref",15);var r=wf();r.__click=function(...i){e.onClick?.apply(this,i)};var o=C(r);oe(o,()=>({"--rotate":"-90deg"})),ve(o.lastChild,{name:"menu"});var s=I(o,2);mt(s,{children:(i,l)=>{var u=ze();Pe(()=>dt(u,e.title)),g(i,u)}}),Ze(r,i=>a(i),()=>a()),g(t,r),_e()}ht(["click"]);const Jo=t=>{try{new URL(t)}catch{return!1}return!0};var bf=k('<div class="b p-y9ylet">Add tag for selected notes</div> <!> <div class="c p-y9ylet"><!> <!></div>',1),Cf=k('<form class="a p-y9ylet"><!></form>');function Sf(t,e){me(e,!0);const{addTag:a}=Rt(),{getSelectedTags:r}=Vn(),{getSelectedNotes:o}=da(),{getFiltredNotes:s}=Da();let i=L(!1),l=L(!1),u,c=!1,d=L(null),v=L(""),h=e.nextFocusRef;ke(()=>(n(d)&&n(d).focus(),()=>{u&&clearTimeout(u)}));const p=()=>{u=setTimeout(()=>{f(l,!0)},250)},m=()=>{f(i,!0)},T=async()=>{if(r().has(n(v).trim())){m();return}if(n(v).trim()!=="")try{p();const y=new Set(o()),x=y.size?[...y]:s().map(X=>X.id),{cancel:z}=await a(n(v).trim(),x);tt("Tag added",{cancel:{nextFocusRef:h,onCancel:async()=>{await z(),setTimeout(()=>{const{prev:X}=wt(h);X?.focus()},16)}}}),c=!0}finally{f(i,!0)}},_=()=>{e.onClosed?.(c)},b=R=>{R.preventDefault(),T()};Mr(t,{get blocked(){return n(l)},get startClose(){return n(i)},onClosed:_,children:(R,y)=>{var x=Cf(),z=C(x);{var X=H=>{La(H,{})},V=H=>{var O=bf(),G=I(A(O),2);Cr(G,{placeholder:"Enter new tag name",get ref(){return n(d)},set ref(B){f(d,B,!0)},get value(){return n(v)},set value(B){f(v,B,!0)}});var ae=I(G,2),Z=C(ae);It(Z,{onClick:m,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(B,ge)=>{var Te=ze("Cancel");g(B,Te)},$$slots:{default:!0}});var U=I(Z,2);It(U,{onClick:T,fullWidth:!0,withoutMinWidth:!0,children:(B,ge)=>{var Te=ze("OK");g(B,Te)},$$slots:{default:!0}}),g(H,O)};K(z,H=>{n(l)?H(X):H(V,!1)})}ln("submit",x,b),g(R,x)},$$slots:{default:!0}}),_e()}var kf=k('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),xf=k('<div><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>'),Tf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ef=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!>',1),Pf=k("<div><!></div>"),Nf=k('<form class="c p-r3if1j"><div class="d p-r3if1j"><!></div> <button type="button" class="e p-r3if1j">Done</button></form>'),Af=k('<div class="a"><div class="b p-r3if1j"><!> <!> <!> <!> <!> <!></div> <!></div>');function fl(t,e){me(e,!0);const{isInitedNotes:a,getGetMapTags:r,getGetNotes:o}=Rt(),{getSelectedTags:s}=Vn();let i=L(null),l=L(""),u=L(null);const c=M(a);let d=Me(e,"shownTagInput",15);const v=()=>n(c)?e.mode==="exit"?Xo(new Set,new Set(e.selectedTags),o()()||[]):[...r()().keys()]:[];let p=M(()=>{const F=s(),Q=new Set(Xo(new Set,new Set(e.selectedTags.length>0?e.selectedTags:F),o()()||[]));return v().filter(fe=>e.selectedTags.some(ie=>fe===ie)?!1:n(l)===""||fe.toLowerCase().indexOf(n(l).toLowerCase())===0).sort((fe,ie)=>F.has(fe)&&F.has(ie)?fe.localeCompare(ie):F.has(fe)?-1:F.has(ie)?1:Q.has(fe)&&Q.has(ie)?fe.localeCompare(ie):Q.has(fe)?-1:Q.has(ie)?1:0)});const m=F=>{if(!e.selectedTags.includes(F)){if(e.mode!=="exit"||n(p).includes(F)){e.onChangeTags([...e.selectedTags,F]),f(l,"");return}n(i)?.focus()}},T=F=>{const Q=e.selectedTags.filter(se=>se!==F);e.onRejectedTag&&e.onRejectedTag(F),Q.length===0?e.onChangeTags([]):e.onChangeTags(Q)},_=F=>{F.preventDefault(),n(l)!==""?m(n(l)):d(!1)};Be(()=>{n(i)&&d()&&n(i).focus(),d()||f(l,"")});const b=F=>{F.preventDefault()},R=F=>{F.preventDefault(),F.stopPropagation(),F.stopImmediatePropagation()};var y=Af(),x=C(y),z=C(x);Bn(z,17,()=>e.selectedTags,F=>F+"-tags_selected",(F,Q)=>{fa(F,{onPointerDown:b,onTouchStart:R,onClick:()=>{T(n(Q))},type:"button",style:"selected",children:(se,fe)=>{var ie=ze();Pe(()=>dt(ie,n(Q))),g(se,ie)},$$slots:{default:!0}})});var X=I(z,2);{var V=F=>{var Q=he(),se=A(Q);Bn(se,17,()=>n(p).filter(fe=>fe.toLowerCase()!==n(l).toLowerCase()).slice(0,Math.max(3,3-e.selectedTags.length)),fe=>fe+"-tags_suggested",(fe,ie)=>{fa(fe,{onPointerDown:b,onTouchStart:R,onClick:()=>{m(n(ie))},children:(ye,Ee)=>{var re=ze();Pe(()=>dt(re,n(ie))),g(ye,re)},$$slots:{default:!0}})}),g(F,Q)};K(X,F=>{d()&&F(V)})}var H=I(X,2);{var O=F=>{fa(F,{onPointerDown:b,onTouchStart:R,onClick:()=>{m(n(l)),f(l,"")},children:(Q,se)=>{var fe=ze();Pe(()=>dt(fe,n(l))),g(Q,fe)},$$slots:{default:!0}})};K(H,F=>{n(l)!==""&&(e.mode!=="exit"||n(p).find(Q=>Q.toLowerCase()===n(l).toLowerCase()))&&F(O)})}var G=I(H,2);{var ae=F=>{fa(F,{mode:"empty",onPointerDown:b,onTouchStart:R,onClick:()=>{d(!0)},children:(Q,se)=>{var fe=kf(),ie=C(fe);oe(ie,()=>({"--size":"12px"})),ve(ie.lastChild,{name:"plus"});var ye=I(ie,2);mt(ye,{children:(Ee,re)=>{var $=ze("add tag");g(Ee,$)}}),g(Q,fe)},$$slots:{default:!0}})};K(G,F=>{d()||F(ae)})}var Z=I(G,2);{var U=F=>{fa(F,{mode:"empty",onPointerDown:b,onTouchStart:R,get onClick(){return e.onUsePreviousTags},children:(Q,se)=>{var fe=xf(),ie=C(fe);oe(ie,()=>({"--size":"12px"})),ve(ie.lastChild,{name:"back"});var ye=I(ie,2);mt(ye,{children:(Ee,re)=>{var $=ze("use previous tags");g(Ee,$)}}),g(Q,fe)},$$slots:{default:!0}})};K(Z,F=>{e.previousTagsEnabled&&e.onUsePreviousTags&&F(U)})}var B=I(Z,2);{var ge=F=>{fa(F,{mode:"empty",onPointerDown:b,onTouchStart:R,get onClick(){return e.onGenTags},get disabled(){return e.generatingTags},children:(Q,se)=>{var fe=Pf(),ie=C(fe);{var ye=re=>{var $=Tf(),le=A($);oe(le,()=>({"--size":"12px"})),La(le.lastChild,{}),g(re,$)},Ee=re=>{var $=Ef(),le=A($);oe(le,()=>({"--size":"12px","--rotate":"180deg"})),ve(le.lastChild,{name:"stars"});var Ce=I(le,2);mt(Ce,{children:(be,de)=>{var Se=ze("gen tags");g(be,Se)}}),g(re,$)};K(ie,re=>{e.generatingTags?re(ye):re(Ee,!1)})}g(Q,fe)},$$slots:{default:!0}})};K(B,F=>{e.genTagsEnabled&&e.onGenTags&&F(ge)})}var Te=I(x,2);{var q=F=>{var Q=Nf(),se=C(Q),fe=C(se);Cr(fe,{placeholder:"tag",get ref(){return n(i)},set ref(ye){f(i,ye,!0)},get value(){return n(l)},set value(ye){f(l,ye,!0)}});var ie=I(se,2);ie.__pointerdown=b,ie.__touchstart=R,ie.__click=()=>{n(i)?.blur(),n(l)!==""&&m(n(l)),d(!1),f(l,"")},ln("submit",Q,_),g(F,Q)};K(Te,F=>{d()&&F(q)})}Ze(y,F=>f(u,F),()=>n(u)),g(t,y),_e()}ht(["pointerdown","touchstart","click"]);var Mf=k('<div class="c p-y9ylet"><!> <!></div>'),Df=k('<div class="b p-y9ylet">Change tags for selected notes</div> <!> <!>',1),If=k('<form class="a p-y9ylet"><!></form>');function Lf(t,e){me(e,!0);const{changeTags:a,getNoteById:r}=Rt(),{getSelectedTags:o}=Vn(),{getSelectedNotes:s}=da(),{getFiltredNotes:i}=Da();let l=L(!1),u=L(!1),c,d=!1,v=L(!1),h=e.nextFocusRef,m=(()=>{const V=[...o()],H=s();if(H.size===0)return V;const O=Array.from(H);let G=new Set(r(O[0])?.data.tags||[]);for(let ae=1;ae<O.length;ae++){const Z=new Set(r(O[ae])?.data.tags||[]),U=new Set([]);Z.forEach(B=>{G.has(B)&&U.add(B)}),G=U}return Array.from(G)})(),T=L(ft(m));ke(()=>()=>{c&&clearTimeout(c)});const _=()=>{c=setTimeout(()=>{f(u,!0)},250)},b=()=>{f(l,!0)},R=async()=>{const V=m,H=new Set(s()),O=H.size?[...H]:i().map(G=>G.id);try{_();const{cancel:G}=await a([...V],n(T),O);tt("Tags changed",{cancel:{nextFocusRef:h,onCancel:async()=>{await G(),setTimeout(()=>{const{prev:ae}=wt(h);ae?.focus()},16)}}}),d=!0}finally{f(l,!0)}},y=V=>{V.key==="Escape"&&n(v)&&(f(v,!1),V.preventDefault(),V.stopPropagation())};ke(()=>(document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)));const x=()=>{e.onClosed?.(d)},z=V=>{f(T,V,!0)},X=V=>{V.preventDefault(),R()};Mr(t,{get blocked(){return n(u)},get startClose(){return n(l)},onClosed:x,children:(V,H)=>{var O=If(),G=C(O);{var ae=U=>{La(U,{})},Z=U=>{var B=Df(),ge=I(A(B),2);fl(ge,{get selectedTags(){return n(T)},onChangeTags:z,get shownTagInput(){return n(v)},set shownTagInput(F){f(v,F,!0)}});var Te=I(ge,2);{var q=F=>{var Q=Mf(),se=C(Q);It(se,{onClick:b,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(ie,ye)=>{var Ee=ze("Cancel");g(ie,Ee)},$$slots:{default:!0}});var fe=I(se,2);It(fe,{onClick:R,fullWidth:!0,withoutMinWidth:!0,children:(ie,ye)=>{var Ee=ze("OK");g(ie,Ee)},$$slots:{default:!0}}),g(F,Q)};K(Te,F=>{n(v)||F(q)})}g(U,B)};K(G,U=>{n(u)?U(ae):U(Z,!1)})}ln("submit",O,X),g(V,O)},$$slots:{default:!0}}),_e()}var Rf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links',1),Of=k('<li class="p-antir2"><!></li>'),Ff=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy links',1),zf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Copy',1),Bf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share links',1),jf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),Hf=k('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),Uf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Add tag',1),Wf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Change tags',1),Vf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Archive',1),Kf=k('<li class="p-antir2"><!></li>'),qf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move from Archive',1),Yf=k('<li class="p-antir2"><!></li>'),Gf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin',1),Xf=k('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <li class="p-antir2"><!></li>',1),Jf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore',1),Zf=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes',1),Qf=k('<li class="p-antir2"><!></li> <li class="p-antir2"><!></li>',1),$f=k('<!> <!> <li class="p-antir2"><!></li> <li class="p-antir2"><!></li> <!> <!> <!>',1),ev=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),tv=k('<div class="a p-antir2"><!></div> <!> <!> <!>',1);function nv(t,e){me(e,!0);const{getSelectedTags:a,setSelectedTags:r,clearTags:o}=Vn(),{moveNotesToBin:s,moveNotesToArchive:i,moveNotesFromArchive:l,restoreNotesFromBin:u,deleteNotes:c}=Rt(),{getFiltredNotes:d}=Da(),{getSelectedNotes:v,setSelectedNotes:h,clearNotes:p}=da();let m=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"}),T=M(a),_=L(!1),b=L(!1),R=L(!1),y=L(!1),x=L(null),z=L(null);const X=()=>{n(_)||f(_,!0)},V=()=>{f(_,!1),f(b,!1)};Be(()=>{!n(_)&&!n(R)&&!n(y)&&f(x,wt(n(z)).next,!0)}),ke(()=>{const ee=J=>{J.key==="Escape"&&n(_)&&n(z)?.focus()};return window.addEventListener("keydown",ee),()=>{window.removeEventListener("keydown",ee)}});let H=()=>{};const O=()=>{f(b,!0),f(R,!0);let ee=n(z);H=()=>{f(R,!1),setTimeout(()=>{ee?.focus()},16)}};let G=()=>{};const ae=()=>{f(b,!0),f(y,!0);let ee=n(z);G=()=>{f(y,!1),setTimeout(()=>{ee?.focus()},16)}},Z=async()=>{const ee=Array.from(n(T)),J=new Set(v()),ue=J.size?[...J]:d().map(P=>P.id),{cancel:w}=await s({noteIds:ue});o(),p(),tt("Notes moved to bin",{cancel:{nextFocusRef:n(x),onCancel:async()=>{await w(),r(new Set(ee)),h(J),setTimeout(()=>{const{prev:P}=wt(n(x));P?.focus()},16)}}}),f(b,!0)},U=async()=>{const ee=Array.from(n(T)),J=new Set(v()),ue=J.size?[...J]:d().map(P=>P.id),{cancel:w}=await i({noteIds:ue});o(),p(),tt("Notes moved to archive",{cancel:{nextFocusRef:n(x),onCancel:async()=>{await w(),r(new Set(ee)),h(J),setTimeout(()=>{const{prev:P}=wt(n(x));P?.focus()},16)}}}),f(b,!0)},B=async()=>{const ee=Array.from(n(T)),J=new Set(v()),ue=J.size?[...J]:d().map(P=>P.id),{cancel:w}=await l({noteIds:ue});o(),p(),tt("Notes moved from archive",{cancel:{nextFocusRef:n(x),onCancel:async()=>{await w(),r(new Set(ee)),h(J),setTimeout(()=>{const{prev:P}=wt(n(x));P?.focus()},16)}}}),f(b,!0)},ge=async()=>{const ee=Array.from(n(T)),J=new Set(v()),ue=J.size?[...J]:d().map(P=>P.id),{cancel:w}=await u({noteIds:ue});o(),p(),tt("Notes restored",{cancel:{nextFocusRef:n(x),onCancel:async()=>{await w(),r(new Set(ee)),h(J),setTimeout(()=>{const{prev:P}=wt(n(x));P?.focus()},16)}}}),f(b,!0)},Te=()=>{const ee=new Set(v()),J=ee.size?[...ee]:d().map(ue=>ue.id);f(b,!0),xa({title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:async()=>{f(b,!0),o(),p(),await c({noteIds:J})},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(z)?.focus()},16)}})},q=()=>{const ee=d(),J=Array.from(v()),ue=[];for(const P of ee)P.data&&P.data?.link&&Jo(P.data?.link.url)&&(J.includes(P.id)||J.length===0)&&ue.push(P.data?.link.url);const w=()=>{for(const P of ue)if(!window.open(P,"_blank")){xa({title:"Pop-up blocked! Please allow pop-ups",buttonConfirmTitle:"OK",type:"standard",onConfirm:async()=>{},onClosed:async()=>{setTimeout(()=>{n(z)?.focus()},16)}});break}};ue.length<=10?w():xa({title:`Are you sure to open ${ue.length} links?`,buttonConfirmTitle:"Open",type:"standard",onConfirm:async()=>{w()},onCancel:async()=>{},onClosed:async()=>{setTimeout(()=>{n(z)?.focus()},16)}}),f(b,!0)},F=()=>{const ee=d(),J=Array.from(v());let ue="";for(const w of ee)w.data&&w.data?.link&&Jo(w.data?.link.url)&&(J.includes(w.id)||J.length===0)&&(ue+=w.data?.link.url+`
`);navigator.clipboard.writeText(ue),tt("Copied links"),f(b,!0)},Q=()=>{const ee=d(),J=Array.from(v());let ue="";for(const w of ee)w.data&&(J.includes(w.id)||J.length===0)&&(w.data?.link?.url&&(ue+=w.data?.link.url+`
`),w.data?.text&&(ue+=`
`+w.data?.text+`
`),ue+=`---------------------

`);navigator.clipboard.writeText(ue),tt("Copied"),f(b,!0)},se=()=>{const ee=d(),J=Array.from(v());let ue="";for(const w of ee)w.data&&(J.includes(w.id)||J.length===0)&&w.data?.link?.url&&(ue+=w.data?.link.url+`

`);navigator.share({text:ue}).catch(w=>{console.error("Error sharing",w)}),f(b,!0)},fe=()=>{const ee=d(),J=Array.from(v());let ue="";for(const w of ee)w.data&&(J.includes(w.id)||J.length===0)&&(w.data?.link?.url&&(ue+=w.data?.link.url+`
`),w.data?.text&&(ue+=`
`+w.data?.text+`
`),ue+=`---------------------

`);navigator.share({text:ue}).catch(w=>{console.error("Error sharing",w)}),f(b,!0)};let ie=cn||vn;var ye=tv(),Ee=A(ye),re=C(Ee);yf(re,{title:"notes menu",onClick:X,get ref(){return n(z)},set ref(ee){f(z,ee,!0)}});var $=I(Ee,2);{var le=ee=>{var J=ev(),ue=A(J);oe(ue,()=>({"--right":"0","--top":"44px"})),or(ue.lastChild,{get startClose(){return n(b)},onClosed:V,get isMobile(){return ie},children:(w,P)=>{var S=$f(),N=A(S);{var D=He=>{var Le=Of(),Ne=C(Le);Fe(Ne,{onClick:q,get dialogMode(){return ie},children:(De,Qe)=>{var st=Rf(),Ve=A(st);oe(Ve,()=>({"--size":"20px","--scale":"0.9"})),ve(Ve.lastChild,{name:"open"}),g(De,st)},$$slots:{default:!0}}),g(He,Le)};K(N,He=>{cn||vn||He(D)})}var E=I(N,2);K(E,He=>{});var ne=I(E,2),pe=C(ne);Fe(pe,{onClick:F,get dialogMode(){return ie},children:(He,Le)=>{var Ne=Ff(),De=A(Ne);oe(De,()=>({"--size":"20px"})),ve(De.lastChild,{name:"copy"}),g(He,Ne)},$$slots:{default:!0}});var ce=I(ne,2),j=C(ce);Fe(j,{onClick:Q,get dialogMode(){return ie},children:(He,Le)=>{var Ne=zf(),De=A(Ne);oe(De,()=>({"--size":"20px"})),ve(De.lastChild,{name:""}),g(He,Ne)},$$slots:{default:!0}});var Y=I(ce,2);{var te=He=>{var Le=Hf(),Ne=A(Le),De=C(Ne);Fe(De,{onClick:se,get dialogMode(){return ie},children:(Ve,Xe)=>{var Ue=Bf(),qe=A(Ue);oe(qe,()=>({"--size":"20px"})),ve(qe.lastChild,{name:"share"}),g(Ve,Ue)},$$slots:{default:!0}});var Qe=I(Ne,2),st=C(Qe);Fe(st,{onClick:fe,get dialogMode(){return ie},children:(Ve,Xe)=>{var Ue=jf(),qe=A(Ue);oe(qe,()=>({"--size":"20px"})),ve(qe.lastChild,{name:""}),g(Ve,Ue)},$$slots:{default:!0}}),g(He,Le)};K(Y,He=>{m&&He(te)})}var we=I(Y,2);{var Ae=He=>{var Le=Xf(),Ne=A(Le),De=C(Ne);Fe(De,{onClick:O,get dialogMode(){return ie},children:(at,ct)=>{var ut=Uf(),pt=A(ut);oe(pt,()=>({"--size":"20px"})),ve(pt.lastChild,{name:"add"}),g(at,ut)},$$slots:{default:!0}});var Qe=I(Ne,2),st=C(Qe);Fe(st,{onClick:ae,get dialogMode(){return ie},children:(at,ct)=>{var ut=Wf(),pt=A(ut);oe(pt,()=>({"--size":"20px"})),ve(pt.lastChild,{name:""}),g(at,ut)},$$slots:{default:!0}});var Ve=I(Qe,2);{var Xe=at=>{var ct=Kf(),ut=C(ct);Fe(ut,{onClick:U,get dialogMode(){return ie},children:(pt,En)=>{var xt=Vf(),Nt=A(xt);oe(Nt,()=>({"--size":"20px","--scale":"0.9"})),ve(Nt.lastChild,{name:"archive"}),g(pt,xt)},$$slots:{default:!0}}),g(at,ct)},Ue=at=>{var ct=Yf(),ut=C(ct);Fe(ut,{onClick:B,get dialogMode(){return ie},children:(pt,En)=>{var xt=qf(),Nt=A(xt);oe(Nt,()=>({"--size":"20px","--scale":"0.9"})),ve(Nt.lastChild,{name:"archive-cancel"}),g(pt,xt)},$$slots:{default:!0}}),g(at,ct)};K(Ve,at=>{e.mode==="notes"?at(Xe):at(Ue,!1)})}var qe=I(Ve,2),jt=C(qe);Fe(jt,{onClick:Z,get dialogMode(){return ie},children:(at,ct)=>{var ut=Gf(),pt=A(ut);oe(pt,()=>({"--size":"20px"})),ve(pt.lastChild,{name:"bin"}),g(at,ut)},$$slots:{default:!0}}),g(He,Le)};K(we,He=>{(e.mode==="notes"||e.mode==="archive")&&He(Ae)})}var Ie=I(we,2);{var je=He=>{var Le=Qf(),Ne=A(Le),De=C(Ne);Fe(De,{onClick:ge,get dialogMode(){return ie},children:(Ve,Xe)=>{var Ue=Jf(),qe=A(Ue);oe(qe,()=>({"--size":"20px"})),ve(qe.lastChild,{name:"bin-cancel"}),g(Ve,Ue)},$$slots:{default:!0}});var Qe=I(Ne,2),st=C(Qe);Fe(st,{onClick:Te,get dialogMode(){return ie},dangerous:!0,children:(Ve,Xe)=>{var Ue=Zf(),qe=A(Ue);oe(qe,()=>({"--size":"20px"})),ve(qe.lastChild,{name:"bin"}),g(Ve,Ue)},$$slots:{default:!0}}),g(He,Le)};K(Ie,He=>{e.mode==="bin"&&He(je)})}g(w,S)},$$slots:{default:!0}}),g(ee,J)};K($,ee=>{n(_)&&ee(le)})}var Ce=I($,2);{var be=ee=>{Sf(ee,{get nextFocusRef(){return n(x)},onClosed:J=>{H(J)}})};K(Ce,ee=>{n(R)&&ee(be)})}var de=I(Ce,2);{var Se=ee=>{Lf(ee,{get nextFocusRef(){return n(x)},onClosed:J=>{G(J)}})};K(de,ee=>{n(y)&&ee(Se)})}g(t,ye),_e()}var av=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),rv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy',1),ov=k('<li class="p-1ljon4s"><!></li>'),sv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link',1),iv=k('<li class="p-1ljon4s"><!></li>'),lv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),cv=k('<li class="p-1ljon4s"><!></li>'),dv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share link',1),uv=k('<li class="p-1ljon4s"><!></li>'),fv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Select',1),vv=k('<li class="p-1ljon4s"><!></li>'),gv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),hv=k('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),pv=k('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),mv=k('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),_v=k(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),wv=k('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),yv=k('<li class="p-1ljon4s"><!></li> <!> <!> <!> <!> <!> <!>',1),bv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Cv(t,e){me(e,!0);const{checkMobileSize:a}=Ia(),{getMode:r,getSelectedNotes:o,changeMode:s,addNote:i,removeNote:l}=da(),{moveNoteToBin:u,moveNoteFromArchive:c,moveNoteToArchive:d,deleteNote:v,pinNote:h,restoreNoteFromBin:p}=Rt();let m=Me(e,"mode",3,"notes"),T=Me(e,"shownMenu",15),_=L(!1),b=L(!1),R=L(!1),y=L(!1),x=L(!1),z=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"});const X=async()=>{u(e.noteId),tt("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{p(e.noteId)}}})},V=async()=>{d(e.noteId),tt("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{c(e.noteId)}}})},H=async()=>{c(e.noteId),tt("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{d(e.noteId)}}})},O=()=>{p(e.noteId),tt("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{u(e.noteId)}}})},G=()=>{e.noteData.pinned?(h(e.noteId,!1),tt("unpinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{h(e.noteId,!0)}}})):(h(e.noteId,!0),tt("pinned",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{h(e.noteId,!1)}}})),f(_,!0)},ae=()=>{n(b)?(f(b,!1),X()):n(x)?(f(x,!1),O()):n(R)?(f(R,!1),V()):n(y)&&(f(y,!1),H()),T(!1),f(_,!1)},Z=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link?.url),tt("Copied link"),f(_,!0))},U=()=>{let ye="";e.noteData.link?.url&&(ye+=e.noteData.link.url+`
`),e.noteData.text&&(ye+=`
`+e.noteData.text+`
`),navigator.clipboard.writeText(ye),tt("Copied"),f(_,!0)},B=()=>{f(_,!0),xa({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await v(e.noteId)},onCancel:async()=>{}})},ge=()=>{if(navigator.share){const ye={};let Ee="";e.noteData.link?.url&&(Ee+=e.noteData.link.url+`
`),e.noteData.text&&(Ee+=`
`+e.noteData.text+`
`),ye.text=Ee,navigator.share(ye).catch(re=>{console.error("Error sharing",re)})}f(_,!0)},Te=()=>{if(navigator.share){const ye={};e.noteData.link?.url&&(ye.url=e.noteData.link.url),e.noteData.link?.title&&(ye.title=e.noteData.link.title),navigator.share(ye).catch(Ee=>{console.error("Error sharing",Ee)})}f(_,!0)};let q=cn||vn,F=M(a),Q=M(()=>r()==="multiple"&&o().has(e.noteId));var se=he(),fe=A(se);{var ie=ye=>{var Ee=bv(),re=A(Ee);oe(re,()=>({"--bottom":e.showMenuUp?"calc(100%)":"auto","--top":e.showMenuUp?"auto":"calc(100%)","--right":"10px"})),or(re.lastChild,{get startClose(){return n(_)},onClosed:ae,get isMobile(){return q},children:($,le)=>{var Ce=yv(),be=A(Ce),de=C(be);Fe(de,{onClick:G,get dialogMode(){return q},children:(j,Y)=>{var te=av(),we=A(te);{let Ie=M(()=>e.noteData.pinned?"pin-cancel":"pin");oe(we,()=>({"--size":"20px"})),ve(we.lastChild,{get name(){return n(Ie)}})}var Ae=I(we);Pe(()=>dt(Ae,` ${e.noteData.pinned?"Unpin":"Pin"}`)),g(j,te)},$$slots:{default:!0}});var Se=I(be,2);{var ee=j=>{var Y=ov(),te=C(Y);Fe(te,{onClick:U,get dialogMode(){return q},children:(we,Ae)=>{var Ie=rv(),je=A(Ie);oe(je,()=>({"--size":"20px"})),ve(je.lastChild,{name:"copy"}),g(we,Ie)},$$slots:{default:!0}}),g(j,Y)};K(Se,j=>{e.noteData.text&&j(ee)})}var J=I(Se,2);{var ue=j=>{var Y=iv(),te=C(Y);Fe(te,{onClick:Z,get dialogMode(){return q},children:(we,Ae)=>{var Ie=sv(),je=A(Ie);oe(je,()=>({"--size":"20px"})),ve(je.lastChild,{name:"copy"}),g(we,Ie)},$$slots:{default:!0}}),g(j,Y)};K(J,j=>{n(F)&&e.noteData.link?.url&&j(ue)})}var w=I(J,2);{var P=j=>{var Y=cv(),te=C(Y);Fe(te,{onClick:ge,get dialogMode(){return q},children:(we,Ae)=>{var Ie=lv(),je=A(Ie);oe(je,()=>({"--size":"20px"})),ve(je.lastChild,{name:"share"}),g(we,Ie)},$$slots:{default:!0}}),g(j,Y)};K(w,j=>{z&&e.noteData.text&&j(P)})}var S=I(w,2);{var N=j=>{var Y=uv(),te=C(Y);Fe(te,{onClick:Te,get dialogMode(){return q},children:(we,Ae)=>{var Ie=dv(),je=A(Ie);{let He=M(()=>e.noteData.text?"":"share");oe(je,()=>({"--size":"20px"})),ve(je.lastChild,{get name(){return n(He)}})}g(we,Ie)},$$slots:{default:!0}}),g(j,Y)};K(S,j=>{z&&e.noteData.link?.url&&j(N)})}var D=I(S,2);{var E=j=>{var Y=vv(),te=C(Y);Fe(te,{onClick:()=>{f(_,!0),r()!=="multiple"&&s("multiple"),i(e.noteId)},get dialogMode(){return q},children:(we,Ae)=>{var Ie=fv(),je=A(Ie);oe(je,()=>({"--size":"20px"})),ve(je.lastChild,{name:"check"}),g(we,Ie)},$$slots:{default:!0}}),g(j,Y)};K(D,j=>{n(Q)||j(E)})}var ne=I(D,2);{var pe=j=>{var Y=pv(),te=A(Y),we=C(te);Fe(we,{onClick:()=>{f(R,m()==="notes"),f(y,m()==="archive"),f(_,!0)},get dialogMode(){return q},children:(je,He)=>{var Le=gv(),Ne=A(Le);{let Qe=M(()=>m()==="archive"?"archive-cancel":"archive");oe(Ne,()=>({"--size":"20px","--scale":"0.9"})),ve(Ne.lastChild,{get name(){return n(Qe)}})}var De=I(Ne);Pe(()=>dt(De,` ${m()==="archive"?"Unarchive":"Archive"}`)),g(je,Le)},$$slots:{default:!0}});var Ae=I(te,2),Ie=C(Ae);Fe(Ie,{onClick:()=>{f(b,!0),f(_,!0)},get dialogMode(){return q},children:(je,He)=>{var Le=hv(),Ne=A(Le),De=C(Ne);oe(De,()=>({"--size":"20px"})),ve(De.lastChild,{name:"bin"}),g(je,Le)},$$slots:{default:!0}}),g(j,Y)},ce=j=>{var Y=wv(),te=A(Y),we=C(te);Fe(we,{onClick:()=>{f(x,!0),f(_,!0)},get dialogMode(){return q},children:(je,He)=>{var Le=mv(),Ne=A(Le),De=C(Ne);oe(De,()=>({"--size":"20px"})),ve(De.lastChild,{name:"bin-cancel"}),g(je,Le)},$$slots:{default:!0}});var Ae=I(te,2),Ie=C(Ae);Fe(Ie,{onClick:B,get dialogMode(){return q},dangerous:!0,children:(je,He)=>{var Le=_v(),Ne=A(Le),De=C(Ne);oe(De,()=>({"--size":"20px"})),ve(De.lastChild,{name:"bin"}),g(je,Le)},$$slots:{default:!0}}),g(j,Y)};K(ne,j=>{m()==="notes"||m()==="archive"?j(pe):j(ce,!1)})}g($,Ce)},$$slots:{default:!0}}),g(ye,Ee)};K(fe,ye=>{T()&&ye(ie)})}g(t,se),_e()}var Sv=k('<div class="a p-1hg9kpf"></div>'),kv=k('<img loading="lazy" height="16" width="16" alt="" referrerpolicy="no-referrer"/>');function vl(t,e){me(e,!0);const a=c=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(c).host}.ico`}catch{return""}};let r=L(!1),o=M(()=>a(e.url));var s=he(),i=A(s);{var l=c=>{var d=Sv();g(c,d)},u=c=>{var d=kv();Pe(v=>lt(d,"src",v),[()=>a(e.url)]),ln("error",d,()=>{f(r,!0)}),g(c,d)};K(i,c=>{n(r)||!n(o)?c(l):c(u,!1)})}g(t,s),_e()}var xv=k('<a target="_blank" rel="noopener noreferrer" class="a p-1mepfnj"><!> <!></a>'),Tv=k('<button class="a p-1mepfnj"><!> <!></button>');function In(t,e){me(e,!0);let a=Me(e,"tabindex",3,0),r=Me(e,"onclick",3,()=>{}),o=Me(e,"ref",15);var s=he(),i=A(s);{var l=c=>{var d=xv();d.__click=function(...p){r()?.apply(this,p)};var v=C(d);Re(v,()=>e.children);var h=I(v,2);mt(h,{children:(p,m)=>{var T=ze();Pe(()=>dt(T,e.title)),g(p,T)}}),Ze(d,p=>o(p),()=>o()),Pe(()=>{lt(d,"href",e.href),lt(d,"tabindex",a())}),g(c,d)},u=c=>{var d=he(),v=A(d);{var h=p=>{var m=Tv();m.__click=function(...b){r()?.apply(this,b)};var T=C(m);Re(T,()=>e.children);var _=I(T,2);mt(_,{children:(b,R)=>{var y=ze();Pe(()=>dt(y,e.title)),g(b,y)}}),Ze(m,b=>o(b),()=>o()),Pe(()=>lt(m,"tabindex",a())),g(p,m)};K(v,p=>{e.elem==="button"&&p(h)},!0)}g(c,d)};K(i,c=>{e.elem==="a"?c(l):c(u,!1)})}g(t,s),_e()}ht(["click"]);let ho=L(!1),po=L(!1),Cn=L(void 0),Jr={};const Ev=()=>{cn||vn||f(po,!0)},Pv=()=>{f(po,!1)},Zo=()=>{cn||vn||f(ho,!0)},Nv=()=>{f(ho,!1)},Av=()=>n(po),gl=()=>n(ho),gn=t=>{cn||vn||f(Cn,t,!0)},Vr=()=>n(Cn),Os=()=>{const t=Jr[n(Cn)||""]?.next;if(t)return f(Cn,t,!0),t},Fs=()=>{const t=Jr[n(Cn)||""]?.prev;if(t)return f(Cn,t,!0),t};var Mv=k('<div class="a p-rxwzp0"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>'),Dv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Iv=k('<div class="b p-rxwzp0"><!></div>'),Lv=k('<a class="c p-rxwzp0" target="_blank" rel="noopener noreferrer"> </a>'),Rv=k('<a class="c p-rxwzp0" target="_blank" rel="noopener noreferrer"> </a>'),Ov=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Fv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),zv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Bv=k("<!> <!> <!>",1),jv=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Hv=k("<li><!> <!> <!> <div><!> <!></div> <!></li>");function Uv(t,e){me(e,!0);const{pushDialogPage:a}=Jt(),{getFaviconEnabled:r,getRecordMode:o}=Pa(),{getMode:s,getSelectedNotes:i,addNote:l,removeNote:u}=da(),{getSearchParams:c,getHref:d}=Bt();let v=Me(e,"mode",3,"notes"),h="unknown";Be(()=>(Jr[e.noteId]={next:e.nextNoteId,prev:e.prevNoteId},()=>{delete Jr[e.noteId]}));let p=L(!1),m=L(!1),T=M(r),_=M(o),b=L(null),R=L(null),y=L(null);const{checkMobileSize:x}=Ia(),z=()=>{f(p,!0)},X=()=>{e.noteData.link?.url&&(navigator.clipboard.writeText(e.noteData.link.url),tt("copied"))};Be(()=>{n(Cn)===e.noteId?f(m,!0):f(m,!1)});const V=$=>{$.preventDefault(),a(`${xe.Note}?id=${encodeURIComponent(e.noteId)}`)},H=M(()=>e.noteData.link?.url||"");let O=M(()=>n(p)&&n(b)?wt(n(b)).next:null);const G=$=>{$?l(e.noteId):u(e.noteId)},ae=()=>{const $=new URLSearchParams(c());return $.set(en,`${xe.Note}?id=${encodeURIComponent(e.noteId)}`),d($)};let Z=M(()=>s()==="multiple"&&i().has(e.noteId));ke(()=>{const $=le=>{if(h="keyboard",n(Cn)===e.noteId&&(le.key==="Enter"&&n(po)&&(n(_)==="note"?(le.preventDefault(),setTimeout(()=>{a(`${xe.Note}?id=${encodeURIComponent(e.noteId)}`)},0)):n(_)==="bookmark"&&n(H)&&window.open(n(H),"_blank","noopener")),le.key==="Tab"&&n(ho)&&(Nv(),n(y)))){const Ce=wt(n(y));le.shiftKey?Ce.prev?.focus():Ce?.next?.focus()}};return document.addEventListener("keydown",$),()=>{document.removeEventListener("keydown",$)}});var U=Hv();U.__focusin=()=>{h==="keyboard"&&f(Cn,e.noteId,!0)};var B=C(U);{var ge=$=>{var le=Mv(),Ce=C(le);oe(Ce,()=>({"--size":"18px"})),ve(Ce.lastChild,{name:"pin"}),g($,le)};K(B,$=>{e.noteData.pinned&&$(ge)})}var Te=I(B,2);{var q=$=>{var le=Iv(),Ce=C(le);{var be=Se=>{vl(Se,{get url(){return n(H)}})},de=Se=>{var ee=Dv(),J=A(ee);oe(J,()=>({"--size":"16px"})),ve(J.lastChild,{name:"note"}),g(Se,ee)};K(Ce,Se=>{n(H)?Se(be):Se(de,!1)})}g($,le)};K(Te,$=>{n(T)&&$(q)})}var F=I(Te,2);{var Q=$=>{var le=Lv();le.__keydown=be=>{be.key==="Enter"&&(h="keyboard")},le.__mousedown=()=>{h="mouse"},le.__click=be=>{console.log(h),h==="mouse"&&gn(void 0),be.preventDefault(),s()==="multiple"?G(!n(Z)):V(be)};var Ce=C(le);Ze(le,be=>f(y,be),()=>n(y)),Pe((be,de)=>{lt(le,"tabindex",e.focusHidden?-1:0),lt(le,"href",be),dt(Ce,de)},[ae,()=>e.noteData?.text.trim()?e.noteData?.text.split(`
`)[0]:e.noteData?.link?.title||"unknown"]),ln("focus",le,()=>{}),g($,le)},se=$=>{var le=Rv();le.__keydown=be=>{be.key==="Enter"&&(h="keyboard")},le.__mousedown=()=>{h="mouse"},le.__click=be=>{s()==="multiple"&&(be.preventDefault(),G(!n(Z)))};var Ce=C(le);Ze(le,be=>f(y,be),()=>n(y)),Pe(be=>{lt(le,"tabindex",e.focusHidden?-1:0),lt(le,"href",n(H)),dt(Ce,be)},[()=>e.noteData?.text.trim()?e.noteData?.text.split(`
`)[0]:e.noteData?.link?.title||"unknown"]),ln("focus",le,()=>{}),g($,le)};K(F,$=>{n(_)==="note"||!n(H)?$(Q):$(se,!1)})}var fe=I(F,2),ie=C(fe);{var ye=$=>{var le=Bv(),Ce=A(le);{var be=ue=>{{let w=M(ae),P=M(()=>e.focusHidden?-1:0);In(ue,{title:"edit",elem:"a",get href(){return n(w)},get tabindex(){return n(P)},onclick:V,children:(S,N)=>{var D=Ov(),E=A(D);oe(E,()=>({"--size":"18px"})),ve(E.lastChild,{name:"pen"}),g(S,D)},$$slots:{default:!0}})}};K(Ce,ue=>{(n(_)==="bookmark"||s()==="multiple")&&ue(be)})}var de=I(Ce,2);{var Se=ue=>{{let w=M(()=>e.focusHidden?-1:0),P=M(()=>e.noteData.link?.title||"unknown");In(ue,{elem:"a",get href(){return n(H)},get tabindex(){return n(w)},get title(){return n(P)},children:(S,N)=>{var D=Fv(),E=A(D);oe(E,()=>({"--size":"18px"})),ve(E.lastChild,{name:"open"}),g(S,D)},$$slots:{default:!0}})}};K(de,ue=>{(n(_)==="note"||s()==="multiple")&&ue(Se)})}var ee=I(de,2);{var J=ue=>{{let w=M(()=>e.focusHidden?-1:0);In(ue,{elem:"button",onclick:X,get tabindex(){return n(w)},title:"copy link",children:(P,S)=>{var N=zv(),D=A(N);oe(D,()=>({"--size":"20px"})),ve(D.lastChild,{name:"copy"}),g(P,N)},$$slots:{default:!0}})}};K(ee,ue=>{x()||ue(J)})}g($,le)};K(ie,$=>{n(H)&&$(ye)})}var Ee=I(ie,2);{let $=M(()=>e.focusHidden?-1:0);In(Ee,{title:"show menu",elem:"button",get tabindex(){return n($)},onclick:z,get ref(){return n(b)},set ref(le){f(b,le,!0)},children:(le,Ce)=>{var be=jv(),de=A(be);oe(de,()=>({"--size":"18px","--rotate":"90deg"})),ve(de.lastChild,{name:"menu"}),g(le,be)},$$slots:{default:!0}})}var re=I(fe,2);Cv(re,{get nextFocusRef(){return n(O)},get mode(){return v()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return n(p)},set shownMenu($){f(p,$,!0)}}),Ze(U,$=>f(R,$),()=>n(R)),Pe(()=>{nt(U,1,ot({d:!0,e:n(m),f:n(Z)||n(Cn)===e.noteId}),"p-rxwzp0"),nt(fe,1,ot({g:!0,h:n(m)}),"p-rxwzp0")}),g(t,U),_e()}ht(["focusin","keydown","mousedown","click"]);var Wv=k('<div class="g e p-lub4l9"><button class="d p-lub4l9" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper><!></button></div>'),Vv=k('<div class="g p-lub4l9"><button class="d p-lub4l9" type="button"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Empty bin</button></div>'),Kv=k('<a class="i j p-lub4l9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),qv=k('<div class="h p-lub4l9"><!> <!></div>'),Yv=k('<!> <div class="p p-lub4l9"><!></div>',1),Gv=k('<button class="t p-lub4l9">All</button>'),Xv=k('<button class="t p-lub4l9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>'),Jv=k('<div class="r p-lub4l9"><div class="s p-lub4l9"><!> <span> </span> <!></div> <button class="t u p-lub4l9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Exit</button></div>'),Zv=k('<div class="a p-lub4l9"><div class="b p-lub4l9"><div class="c p-lub4l9"><a class="d p-lub4l9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="d p-lub4l9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="e p-lub4l9"><!></div> <div class="f p-lub4l9"><!></div></div> <div class="k p-lub4l9"><div class="l p-lub4l9"><!></div> <div class="m p-lub4l9"><div class="n p-lub4l9"><div class="o p-lub4l9"><!></div> <!></div> <div class="q p-lub4l9"><!></div></div></div></div>');function Qv(t,e){me(e,!0);const{getFeedSearch:a,setFeedSearch:r}=Yr(),{getScrollContainer:o}=vo();let s=M(o);const{emptyBin:i,checkNotesInBin:l,checkNotesInArchive:u,checkNotes:c}=Rt(),{replaceSearchParams:d}=Bt(),{createDialogPageHref:v,createHandleClickDialogPage:h,getDialogPages:p}=Jt(),{checkExistedDialog:m}=Zt(),{getMode:T,clearNotes:_,setSelectedNotes:b,getSelectedNotes:R,changeMode:y}=da(),{checkMobileSize:x}=Ia(),{getFiltredNotes:z}=Da(),{getSelectedMetaTags:X}=fo(),{getViewMode:V}=Pa();let H=M(X),O=L(null);const G=M(l);let Z=M(()=>{const j=z()||[],Y=R();return j.every(te=>Y.has(te.id))});const U=()=>{xa({title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:async()=>{await i(),d("")},onCancel:async()=>{}})};let B=M(()=>p().length===0);Be(()=>{n(B)});const ge=()=>{p().length===0&&!m()&&n(O)?.focus()};ke(()=>br({key:"k",meta:!0,action:ge})),ke(()=>br({key:"k",ctrl:!0,action:ge})),ke(()=>{}),Be(()=>{const j=z()||[];zt(()=>{const Y=R();b(new Set(j.filter(te=>Y.has(te.id)).map(te=>te.id)))})});let Te=M(()=>n(H).has(et.ARCHIVED)?"archive":n(H).has(et.BIN)?"bin":"notes");ke(()=>{n(O)&&n(O).addEventListener("keydown",j=>{j.key==="Tab"&&Vr()&&j.preventDefault()})}),Be(()=>{gl()&&setTimeout(()=>{n(O)?.focus(),n(O)?.setSelectionRange(n(O).value.length,n(O).value.length)},0)}),ke(()=>{});var q=Zv(),F=C(q),Q=C(F),se=C(Q),fe=M(()=>h(xe.Settings));se.__click=function(...j){n(fe)?.apply(this,j)};var ie=C(se);oe(ie,()=>({"--rotate":"30deg","--size":"20px"})),ve(ie.lastChild,{name:"settings"});var ye=I(se,2),Ee=M(()=>h(xe.Sync));ye.__click=function(...j){n(Ee)?.apply(this,j)};var re=C(ye);oe(re,()=>({"--size":"20px"})),ve(re.lastChild,{name:"sync"});var $=I(Q,2),le=C($);cl(le,{});var Ce=I($,2),be=C(Ce);{var de=j=>{var Y=he(),te=A(Y);{var we=Ae=>{var Ie=he(),je=A(Ie);{var He=Ne=>{var De=Wv(),Qe=C(De);Qe.__click=U;var st=C(Qe);oe(st,()=>({"--scale":"1.2","--size":"20px"})),ve(st.lastChild,{name:"clear"});var Ve=I(st);mt(Ve,{children:(Xe,Ue)=>{var qe=ze("Empty bin");g(Xe,qe)}}),g(Ne,De)},Le=Ne=>{var De=Vv(),Qe=C(De);Qe.__click=U;var st=C(Qe);oe(st,()=>({"--scale":"0.9","--size":"20px"})),ve(st.lastChild,{name:"clear"}),g(Ne,De)};K(je,Ne=>{x()?Ne(He):Ne(Le,!1)})}g(Ae,Ie)};K(te,Ae=>{n(G)&&Ae(we)})}g(j,Y)},Se=j=>{var Y=he(),te=A(Y);{var we=Ae=>{var Ie=qv(),je=C(Ie);{var He=Ne=>{var De=Kv();De.__click=function(...Ve){e.onOpenWindow?.apply(this,Ve)};var Qe=C(De);oe(Qe,()=>({"--scale":"0.7","--size":"26px"})),ve(Qe.lastChild,{name:"open-window"});var st=I(Qe,2);mt(st,{children:(Ve,Xe)=>{var Ue=ze("open window");g(Ve,Ue)}}),Pe(()=>lt(De,"href",e.openWindowHref)),g(Ne,De)};K(je,Ne=>{e.onOpenWindow&&Ne(He)})}var Le=I(je,2);Fu(Le,{}),g(Ae,Ie)};K(te,Ae=>{n(Te)==="notes"&&Ae(we)},!0)}g(j,Y)};K(be,j=>{n(Te)==="bin"?j(de):j(Se,!1)})}var ee=I(F,2),J=C(ee),ue=C(J);_f(ue,{});var w=I(J,2),P=C(w),S=C(P),N=C(S);{let j=M(a);jo(N,{placeholder:"Search",onFocus:()=>{cn||vn||(Ev(),Zo(),n(O)?.setSelectionRange(n(O).value.length,n(O).value.length))},onBlur:()=>{Pv()},get value(){return n(j)},onChange:Y=>{gn(void 0),n(s)&&n(s).scrollTo({top:0}),r(Y)},onEscape:()=>{gn(void 0)},get ref(){return n(O)},set ref(Y){f(O,Y,!0)}})}var D=I(S,2);{var E=j=>{var Y=Yv(),te=A(Y);Nu(te,{});var we=I(te,2),Ae=C(we);nv(Ae,{get mode(){return n(Te)}}),g(j,Y)};K(D,j=>{(n(Te)==="notes"&&c()||n(Te)==="bin"&&l()||n(Te)==="archive"&&u())&&j(E)})}var ne=I(P,2),pe=C(ne);{var ce=j=>{var Y=he(),te=A(Y);{var we=Ae=>{var Ie=Jv(),je=C(Ie),He=C(je);{var Le=Ue=>{var qe=Gv();qe.__click=jt=>{jt.preventDefault();const at=z()||[];b(new Set(at.map(ct=>ct.id)))},g(Ue,qe)};K(He,Ue=>{n(Z)||Ue(Le)})}var Ne=I(He,2),De=C(Ne),Qe=I(Ne,2);{var st=Ue=>{var qe=Xv();qe.__click=at=>{at.preventDefault(),_()};var jt=C(qe);oe(jt,()=>({"--size":"16px"})),ve(jt.lastChild,{name:"close"}),g(Ue,qe)};K(Qe,Ue=>{R().size>0&&Ue(st)})}var Ve=I(je,2);Ve.__click=Ue=>{Ue.preventDefault(),y("single")};var Xe=C(Ve);oe(Xe,()=>({"--size":"16px"})),ve(Xe.lastChild,{name:"close"}),Pe(Ue=>dt(De,`Selected ${Ue??""}`),[()=>R().size]),g(Ae,Ie)};K(te,Ae=>{T()==="multiple"&&Ae(we)})}g(j,Y)};K(pe,j=>{(n(Te)==="notes"&&c()||n(Te)==="bin"&&l()||n(Te)==="archive"&&u())&&j(ce)})}Pe((j,Y)=>{lt(se,"href",j),lt(ye,"href",Y)},[()=>v(xe.Settings),()=>v(xe.Sync)]),g(t,q),_e()}ht(["click"]);var $v=k('<div class="a p-11shdp8"><!></div>');function yt(t,e){me(e,!0);const{setDialogPageHeight:a}=ds();let r=L(null);ke(()=>{n(r);const i=new ResizeObserver(l=>{for(let u of l){const c=u.contentRect.height;a(c)}});if(n(r))return i.observe(n(r)),()=>{n(r)&&i.unobserve(n(r)),i.disconnect()}});var o=$v(),s=C(o);Re(s,()=>e.children),Ze(o,i=>f(r,i),()=>n(r)),g(t,o),_e()}var eg=k('<div class="p-ndasxn"><p class="p-ndasxn">Page not found</p> <!></div>');function tg(t,e){me(e,!1);const{replaceSearchParams:a,getHref:r}=Bt(),o=l=>{l.preventDefault(),a("")};ss();var s=eg(),i=I(C(s),2);{let l=Er(()=>r(""));It(i,{element:"a",get href(){return n(l)},onClick:o,children:(u,c)=>{var d=ze("close");g(u,d)},$$slots:{default:!0}})}g(t,s),_e()}var ng=k('<h1 class="p-1n0ziuh"><!></h1>');function ag(t,e){var a=ng(),r=C(a);Re(r,()=>e.children),g(t,a)}var rg=k('<!> <div class="b p-193tby9"><!> <!></div>',1),og=k('<div class="a p-193tby9"><!></div>');function sg(t,e){me(e,!0);const{blockDialog:a,setLeftEnd:r}=Zt(),{pushDialogPage:o}=Jt(),{initLocalAccount:s}=ls(),{replaceSearchParams:i}=Bt(),l=Kn(),u=()=>{o(xe.Auth)},c=async()=>{l.duration=0,l.swipingRatio=-25,requestAnimationFrame(()=>{l.duration=ia().duration,l.swipingRatio=ia().swipingRatio,s(),a(!1),r(!0),i("")})};var d=og(),v=C(d);{var h=p=>{var m=rg(),T=A(m);ag(T,{children:(y,x)=>{var z=ze("Welcome");g(y,z)}});var _=I(T,2),b=C(_);It(b,{onClick:u,fullWidth:!0,children:(y,x)=>{var z=ze("Cloud account");g(y,z)},$$slots:{default:!0}});var R=I(b,2);It(R,{onClick:c,fullWidth:!0,type:"secondary",children:(y,x)=>{var z=ze("Local account");g(y,z)},$$slots:{default:!0}}),g(p,m)};K(v,p=>{p(h)})}g(t,d),_e()}var ig=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Edit',1),lg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete',1),cg=k('<li class="p-1jbq6g9"><!></li> <li class="p-1jbq6g9"><!></li>',1),dg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function ug(t,e){me(e,!0);let a=Me(e,"shownMenu",15),r=L(!1),o=L(!1),s=L(!1);const i=async()=>{e.onEdit()},l=()=>{n(o)?(f(o,!1),i()):n(s)&&(f(s,!1),e.onDelete()),a(!1),f(r,!1)};let u=cn||vn;var c=he(),d=A(c);{var v=h=>{var p=dg(),m=A(p);oe(m,()=>({"--top":"90%","--right":"0px"})),or(m.lastChild,{get startClose(){return n(r)},onClosed:l,get isMobile(){return u},children:(T,_)=>{var b=cg(),R=A(b),y=C(R);Fe(y,{onClick:()=>{f(o,!0),f(r,!0)},get dialogMode(){return u},children:(X,V)=>{var H=ig(),O=A(H);oe(O,()=>({"--size":"20px"})),ve(O.lastChild,{name:"pen"}),g(X,H)},$$slots:{default:!0}});var x=I(R,2),z=C(x);Fe(z,{onClick:()=>{f(s,!0),f(r,!0)},get dialogMode(){return u},children:(X,V)=>{var H=lg(),O=A(H);oe(O,()=>({"--size":"20px"})),ve(O.lastChild,{name:"bin"}),g(X,H)},$$slots:{default:!0}}),g(T,b)},$$slots:{default:!0}}),g(h,p)};K(d,h=>{a()&&h(v)})}g(t,c),_e()}var fg=k('<div class="b p-drp34e"><!> <!> <div class="c p-drp34e"><button class="p-drp34e">Cancel</button> <button class="p-drp34e">Done</button></div></div>'),vg=k('<div class="e p-drp34e"><!></div>'),gg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),hg=k('<div class="d p-drp34e"><div><!> <a class="f p-drp34e" target="_blank" rel="noopener noreferrer"> </a> <div><!></div> <!></div></div>'),pg=k('<div class="a p-drp34e"><!></div>');function mg(t,e){me(e,!0);let a=Me(e,"shownUrlInput",15);const{getFaviconEnabled:r}=Pa();let o=M(r),s=L(null),i=L(null),l=L(ft(e.url)),u=L(ft(e.title)),c=L(null),d=L(!1);const v=R=>{f(l,R.target.value||"",!0)},h=R=>{f(u,R.target.value||"",!0)};Be(()=>{a()&&n(s)?.focus()});const p=()=>{e.url&&(navigator.clipboard.writeText(e.url),tt("Copied link"))};var m=pg(),T=C(m);{var _=R=>{var y=fg(),x=C(y);Cr(x,{get value(){return n(l)},onInput:v,placeholder:"url",get ref(){return n(s)},set ref(O){f(s,O,!0)}});var z=I(x,2);Cr(z,{get value(){return n(u)},onInput:h,placeholder:"title"});var X=I(z,2),V=C(X);V.__click=()=>{f(l,e.url,!0),f(u,e.title,!0),a(!1)};var H=I(V,2);H.__click=()=>{let O=n(l).trim();O!==""&&/^[[a-zA-Z]+?:\/\//.test(O)===!1&&(O="https://"+O,f(l,O,!0)),e.onChangeUrl(O,n(u)),a(!1)},g(R,y)},b=R=>{var y=he(),x=A(y);{var z=V=>{var H=hg(),O=C(H);nt(O,1,ot({i:!0}),"p-drp34e");var G=C(O);{var ae=q=>{var F=vg(),Q=C(F);vl(Q,{get url(){return e.url}}),g(q,F)};K(G,q=>{n(o)&&q(ae)})}var Z=I(G,2),U=C(Z),B=I(Z,2);nt(B,1,ot({j:!0}),"p-drp34e");var ge=C(B);In(ge,{title:"copy link",elem:"button",onclick:p,children:(q,F)=>{var Q=gg(),se=A(Q);oe(se,()=>({"--size":"20px"})),ve(se.lastChild,{name:"copy"}),g(q,Q)},$$slots:{default:!0}});var Te=I(B,2);ug(Te,{onDelete:()=>{f(u,""),f(l,""),e.onDeleteUrl()},onEdit:()=>{a(!0)},get shownMenu(){return n(d)},set shownMenu(q){f(d,q,!0)}}),Ze(O,q=>f(c,q),()=>n(c)),Pe(()=>{lt(Z,"href",e.url),dt(U,e.title||"unknown")}),g(V,H)},X=V=>{};K(x,V=>{e.url?V(z):V(X,!1)})}g(R,y)};K(T,R=>{a()?R(_):R(b,!1)})}Ze(m,R=>f(i,R),()=>n(i)),g(t,m),_e()}ht(["click"]);var _g=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Add link',1),wg=k('<li class="p-1ljon4s"><!></li>'),yg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Edit link',1),bg=k('<li class="p-1ljon4s"><!></li>'),Cg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy',1),Sg=k('<li class="p-1ljon4s"><!></li>'),kg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share',1),xg=k('<li class="p-1ljon4s"><!></li>'),Tg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Share link',1),Eg=k('<li class="p-1ljon4s"><!></li>'),Pg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> ',1),Ng=k('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete',1),Ag=k('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Mg=k('<span class="a p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore',1),Dg=k(`<span class="a b p-1ljon4s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete
					from bin`,1),Ig=k('<li class="p-1ljon4s"><!></li> <li class="p-1ljon4s"><!></li>',1),Lg=k("<!> <!> <!> <!> <!>",1),Rg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function zs(t,e){me(e,!0);const{moveNoteToBin:a,moveNoteFromArchive:r,moveNoteToArchive:o,deleteNote:s,restoreNoteFromBin:i}=Rt();let l=Me(e,"mode",3,"notes"),u=Me(e,"shownMenu",15),c=L(!1),d=L(!1),v=L(!1),h=L(!1),p=L(!1),m=navigator?.canShare?.({url:"https://example.com",title:"example",text:"example"});const T=async()=>{a(e.noteId),tt("moved to bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{i(e.noteId)}}})},_=async()=>{o(e.noteId),tt("moved to archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{r(e.noteId)}}})},b=async()=>{r(e.noteId),tt("moved from archive",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{o(e.noteId)}}})},R=()=>{i(e.noteId),tt("restored from bin",{cancel:{nextFocusRef:e.nextFocusRef,onCancel:()=>{a(e.noteId)}}})},y=()=>{n(d)?(f(d,!1),T()):n(p)?(f(p,!1),R()):n(v)?(f(v,!1),_()):n(h)&&(f(h,!1),b()),u(!1),f(c,!1)},x=()=>{let Z="";e.link?.url&&(Z+=e.link.url+`
`),e.text&&(Z+=`
`+e.text+`
`),navigator.clipboard.writeText(Z),tt("Copied"),f(c,!0)},z=()=>{f(c,!0),xa({title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:async()=>{await s(e.noteId)},onCancel:async()=>{}})},X=()=>{if(navigator.share){const Z={};let U="";e.link?.url&&(U+=e.link.url+`
`),e.text&&(U+=`
`+e.text+`
`),Z.text=U,navigator.share(Z).catch(B=>{console.error("Error sharing",B)})}f(c,!0)},V=()=>{if(navigator.share){const Z={};e.link?.url&&(Z.url=e.link.url),e.link?.title&&(Z.title=e.link.title),navigator.share(Z).catch(U=>{console.error("Error sharing",U)})}f(c,!0)};let H=cn||vn;var O=he(),G=A(O);{var ae=Z=>{var U=Rg(),B=A(U);oe(B,()=>({"--bottom":"auto","--top":"calc(100% - 10px)","--left":"10px"})),or(B.lastChild,{get startClose(){return n(c)},onClosed:y,get isMobile(){return H},children:(ge,Te)=>{var q=Lg(),F=A(q);{var Q=de=>{var Se=wg(),ee=C(Se);Fe(ee,{onClick:J=>{e.onAddLinkClick(J),f(c,!0)},get dialogMode(){return H},children:(J,ue)=>{var w=_g(),P=A(w);oe(P,()=>({"--size":"20px"})),ve(P.lastChild,{name:"add"}),g(J,w)},$$slots:{default:!0}}),g(de,Se)},se=de=>{var Se=bg(),ee=C(Se);Fe(ee,{onClick:J=>{e.onEditLinkClick(J),f(c,!0)},get dialogMode(){return H},children:(J,ue)=>{var w=yg(),P=A(w);oe(P,()=>({"--size":"20px","--scale":"0.9"})),ve(P.lastChild,{name:"pen"}),g(J,w)},$$slots:{default:!0}}),g(de,Se)};K(F,de=>{e.link?.url?de(se,!1):de(Q)})}var fe=I(F,2);{var ie=de=>{var Se=Sg(),ee=C(Se);Fe(ee,{onClick:x,get dialogMode(){return H},children:(J,ue)=>{var w=Cg(),P=A(w);oe(P,()=>({"--size":"20px"})),ve(P.lastChild,{name:"copy"}),g(J,w)},$$slots:{default:!0}}),g(de,Se)};K(fe,de=>{e.text&&de(ie)})}var ye=I(fe,2);{var Ee=de=>{var Se=xg(),ee=C(Se);Fe(ee,{onClick:X,get dialogMode(){return H},children:(J,ue)=>{var w=kg(),P=A(w);oe(P,()=>({"--size":"20px"})),ve(P.lastChild,{name:"share"}),g(J,w)},$$slots:{default:!0}}),g(de,Se)};K(ye,de=>{m&&e.text&&de(Ee)})}var re=I(ye,2);{var $=de=>{var Se=Eg(),ee=C(Se);Fe(ee,{onClick:V,get dialogMode(){return H},children:(J,ue)=>{var w=Tg(),P=A(w);{let S=M(()=>e.text?"":"share");oe(P,()=>({"--size":"20px"})),ve(P.lastChild,{get name(){return n(S)}})}g(J,w)},$$slots:{default:!0}}),g(de,Se)};K(re,de=>{m&&e.link?.url&&de($)})}var le=I(re,2);{var Ce=de=>{var Se=Ag(),ee=A(Se),J=C(ee);Fe(J,{onClick:()=>{f(v,l()==="notes"),f(h,l()==="archive"),f(c,!0)},get dialogMode(){return H},children:(P,S)=>{var N=Pg(),D=A(N);{let ne=M(()=>l()==="archive"?"archive-cancel":"archive");oe(D,()=>({"--size":"20px","--scale":"0.9"})),ve(D.lastChild,{get name(){return n(ne)}})}var E=I(D);Pe(()=>dt(E,` ${l()==="archive"?"Unarchive":"Archive"}`)),g(P,N)},$$slots:{default:!0}});var ue=I(ee,2),w=C(ue);Fe(w,{onClick:()=>{f(d,!0),f(c,!0)},get dialogMode(){return H},children:(P,S)=>{var N=Ng(),D=A(N),E=C(D);oe(E,()=>({"--size":"20px"})),ve(E.lastChild,{name:"bin"}),g(P,N)},$$slots:{default:!0}}),g(de,Se)},be=de=>{var Se=Ig(),ee=A(Se),J=C(ee);Fe(J,{onClick:()=>{f(p,!0),f(c,!0)},get dialogMode(){return H},children:(P,S)=>{var N=Mg(),D=A(N),E=C(D);oe(E,()=>({"--size":"20px"})),ve(E.lastChild,{name:"bin-cancel"}),g(P,N)},$$slots:{default:!0}});var ue=I(ee,2),w=C(ue);Fe(w,{onClick:z,get dialogMode(){return H},dangerous:!0,children:(P,S)=>{var N=Dg(),D=A(N),E=C(D);oe(E,()=>({"--size":"20px"})),ve(E.lastChild,{name:"bin"}),g(P,N)},$$slots:{default:!0}}),g(de,Se)};K(le,de=>{l()==="notes"||l()==="archive"?de(Ce):de(be,!1)})}g(ge,q)},$$slots:{default:!0}}),g(Z,U)};K(G,Z=>{u()&&Z(ae)})}g(t,O),_e()}var Og=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Fg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),zg=k("<!> <!> <!> <!>",1),Bg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),jg=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Hg=k("<!> <!> <!>",1),Ug=k('<div class="g p-1hk8mle">Note</div>'),Wg=k("<span> </span>"),Vg=k('<div class="k p-1hk8mle"><!></div>'),Kg=k('<div class="a p-1hk8mle"><div class="b p-1hk8mle"><!></div></div> <!> <div class="c p-1hk8mle"><div class="d"><div class="e"><div class="f p-1hk8mle"><!> <div class="h p-1hk8mle" role="textbox" aria-label="note" tabindex="0" contenteditable="true" placeholder="Note"> </div></div></div></div> <div class="i j p-1hk8mle"><!> <div class="l p-1hk8mle"><!></div></div></div>',1);function qg(t,e){me(e,!0);const{getLlmTagsEnabled:a,getPrevTags:r,getPageDataForTagsEnabled:o}=Pa(),{pushDialogPage:s}=Jt(),{checkMobileSize:i}=Ia(),{getSearchParams:l,getHref:u}=Bt();let c=Me(e,"link",15,void 0),d=Me(e,"text",15,""),v=Me(e,"tags",31,()=>ft([])),h=Me(e,"pinned",15,!1),p=L(null),m=L(!1),T=L(!1),_=L(ft(new Set)),b=L(!1),R=L(!1);const y=D=>{let E="",ne=!0;function pe(ce){for(let j=0;j<ce.length;j++){const Y=ce[j];if(Y.nodeName==="BR"){E+=`
`,ne=!0;continue}Y.nodeName==="DIV"&&ne===!1&&(E+=`
`),ne=!1,Y.nodeType===3&&Y.textContent&&(E+=Y.textContent),pe(Y.childNodes)}}pe(D.currentTarget.childNodes),E===`
`&&(E=E.slice(0,-1)),d(E)},x=D=>{D.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(n(m)&&(f(m,!1),D.preventDefault(),D.stopPropagation()),n(T)&&(f(T,!1),D.preventDefault(),D.stopPropagation()))};ke(()=>(document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)));const z=(D,E)=>{c({url:D,title:E})},X=()=>{f(T,!0)},V=()=>{c(void 0)},H=D=>{v(D)},O=r(),G=()=>{v([...new Set([...v(),...O])])},ae=d();ke(()=>{if(n(p)){if((cn||vn)&&(e.mode==="edit"||navigator.userActivation.isActive===!1))return;n(p).focus();const D=document.createRange();D.selectNodeContents(n(p)),D.collapse(!1);const E=window.getSelection();E?.removeAllRanges(),E?.addRange(D)}});let Z=L("unknown");const U=async()=>{if(typeof LanguageModel>"u"){f(Z,"unavailable");return}f(Z,await Ms().availability({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}]}),!0)};ke(()=>{U()});let B=M(a),ge=null;const Te=async()=>ge||(ge=await Ms().create({expectedInputs:[{type:"text",languages:["en"]}],expectedOutputs:[{type:"text",languages:["en"]}],temperature:.2,topK:2,initialPrompts:[{role:"system",content:`
						You are a tagging assistant.
						Your task is to suggest relevant tags for bookmarks.

						Rules:
						- Use page content by priority to generate relevant tags.
						- Focus on the main topics and themes of the page and note content.
						- Prefer short, lowercase, single-word tags.
						- Use only single words for tags, no phrases, you can split into multiple tags.
						- Avoid special characters in tags.
						- All tags must be in English.
						- Add common tags related to the content like "music", "article", "video", "tutorial", "blog", etc. if relevant.
						- Return 3 to 5 tags.
						- Output ONLY a JSON array of strings.
					`}]}),ge),q=async()=>{if(n(Z)==="downloadable"||n(Z)==="downloading"){s(xe.Extension);return}f(R,!0);const D=await Te(),E={type:"object",properties:{tags:{type:"array",items:{type:"string"}}},required:["tags"]},ne=`
			Page information:
			Title: ${c()?.title||"N/A"}.
			URL: ${c()?.url||"N/A"}.
			Description: N/A.
			Note content: ${d()||"N/A"}.
			Dont return tags: ${[...n(_).size>0?Array.from(n(_)):[],...v().length>0?v():[]].join(", ")||"N/A"}.
			Page contents: N/A.
		`.slice(0,5e3),pe=await D.prompt(ne,{responseConstraint:E});v(Array.from(new Set([...v(),...(JSON.parse(pe)?.tags||[]).map(ce=>ce.trim().toLowerCase()).filter(ce=>ce!=="")]))),f(R,!1)},F=()=>!e.deletedAt&&!e.archivedAt?"notes":e.archivedAt?"archive":"bin";var Q=Kg(),se=A(Q),fe=C(se),ie=C(fe);{var ye=D=>{var E=zg(),ne=A(E);{let Y=M(()=>h()?"unpin":"pin");In(ne,{get title(){return n(Y)},elem:"button",onclick:()=>{h(!h())},children:(te,we)=>{var Ae=Og(),Ie=A(Ae);{let je=M(()=>h()?"pin-cancel":"pin");oe(Ie,()=>({"--size":"20px"})),ve(Ie.lastChild,{get name(){return n(je)}})}g(te,Ae)},$$slots:{default:!0}})}var pe=I(ne,2);In(pe,{title:"menu",elem:"button",onclick:()=>{f(b,!0)},children:(Y,te)=>{var we=Fg(),Ae=A(we);oe(Ae,()=>({"--size":"20px","--rotate":"90deg"})),ve(Ae.lastChild,{name:"menu"}),g(Y,we)},$$slots:{default:!0}});var ce=I(pe,2);{let Y=M(F);zs(ce,{onAddLinkClick:X,onEditLinkClick:X,nextFocusRef:null,get mode(){return n(Y)},get noteId(){return e.noteId},get text(){return d()},get link(){return c()},get shownMenu(){return n(b)},set shownMenu(te){f(b,te,!0)}})}var j=I(ce,2);K(j,Y=>{}),g(D,E)},Ee=D=>{var E=Hg(),ne=A(E);In(ne,{title:"menu",elem:"button",onclick:()=>{f(b,!0)},children:(j,Y)=>{var te=Bg(),we=A(te);oe(we,()=>({"--size":"24px","--rotate":"90deg"})),ve(we.lastChild,{name:"menu"}),g(j,te)},$$slots:{default:!0}});var pe=I(ne,2);{let j=M(F);zs(pe,{onAddLinkClick:X,onEditLinkClick:X,nextFocusRef:null,get mode(){return n(j)},get noteId(){return e.noteId},get text(){return d()},get link(){return c()},get shownMenu(){return n(b)},set shownMenu(Y){f(b,Y,!0)}})}var ce=I(pe,2);{let j=M(()=>h()?"unpin":"pin");In(ce,{get title(){return n(j)},elem:"button",onclick:()=>{h(!h())},children:(Y,te)=>{var we=jg(),Ae=A(we);{let Ie=M(()=>h()?"pin-cancel":"pin");oe(Ae,()=>({"--size":"24px"})),ve(Ae.lastChild,{get name(){return n(Ie)}})}g(Y,we)},$$slots:{default:!0}})}g(D,E)};K(ie,D=>{i()?D(ye):D(Ee,!1)})}var re=I(se,2);{let D=M(()=>c()?.url||""),E=M(()=>c()?.title||"");mg(re,{get url(){return n(D)},get title(){return n(E)},onChangeUrl:z,onDeleteUrl:V,get shownUrlInput(){return n(T)},set shownUrlInput(ne){f(T,ne,!0)}})}var $=I(re,2),le=C($),Ce=C(le),be=C(Ce),de=C(be);{var Se=D=>{var E=Ug();g(D,E)};K(de,D=>{d()||D(Se)})}var ee=I(de,2);ee.__input=y;var J=C(ee);Ze(ee,D=>f(p,D),()=>n(p));var ue=I(le,2),w=C(ue);{var P=D=>{var E=Vg(),ne=C(E);{var pe=ce=>{var j=Wg(),Y=C(j);Pe(te=>dt(Y,`updated: ${te??""}`),[()=>new Date(e.updatedAt).toLocaleString()]),g(ce,j)};K(ne,ce=>{e.updatedAt&&ce(pe)})}g(D,E)};K(w,D=>{e.mode==="edit"&&D(P)})}var S=I(w,2),N=C(S);{let D=M(()=>n(B)&&n(Z)!=="unknown"&&n(Z)!=="unavailable"),E=M(()=>e.mode==="add"&&O.length>0);fl(N,{get selectedTags(){return v()},onRejectedTag:ne=>{f(_,new Set([...n(_),ne]),!0)},onChangeTags:H,get genTagsEnabled(){return n(D)},onGenTags:q,get generatingTags(){return n(R)},onUsePreviousTags:G,get previousTagsEnabled(){return n(E)},get shownTagInput(){return n(m)},set shownTagInput(ne){f(m,ne,!0)}})}Pe(()=>dt(J,ae)),g(t,Q),_e()}ht(["input"]);function Yg(t,e){me(e,!0);const{isInitedNotes:a,createNote:r,updateNote:o,deleteNote:s,getNoteById:i,pinNote:l}=Rt(),{getViewMode:u,setPrevTags:c}=Pa(),{setSearchParam:d,deleteSearchParam:v,getSearchParams:h}=Bt();let p=L("loading"),m=L("idle"),T=L(""),_=L(void 0),b=L(""),R=L(!1),y=L(ft([]));const x=()=>{{const G=h().get("url"),ae=h().get("title"),Z=h().get("text");G&&f(_,{url:G,title:ae||""},!0),Z&&(!G&&Jo(Z)?f(_,{url:Z,title:ae||new URL(Z).hostname},!0):f(b,Z,!0)),v("url"),v("title"),v("text"),f(p,"finish");return}},z=M(()=>a()&&n(p)==="finish"),X=async()=>{if(n(_)?.title||n(_)?.url||n(b)||n(y).length>0){if(n(T)){const G=i(n(T));if(!G?.data)return;if((G.data.link?.url!==n(_)?.url||G.data.link?.title!==n(_)?.title||G.data.text!==n(b)||JSON.stringify(G.data.tags)!==JSON.stringify(n(y)))&&n(m)==="idle"){f(m,"loading");try{await o(n(T),{link:ga(n(_)),text:n(b),tags:n(y).slice()})}finally{f(m,"idle")}}}else if(n(m)==="idle"){f(m,"loading");try{f(T,await r({link:ga(n(_)),text:n(b),tags:n(y).slice()}),!0),d("noteId",n(T))}catch(G){console.error("Error creating note:",G)}finally{f(m,"idle")}}}else if(n(T)&&n(m)==="idle"){f(m,"loading");try{await s(n(T)),f(T,""),v("noteId")}finally{f(m,"idle")}}};Be(()=>{n(z)&&n(m)!=="loading"&&X()}),Be(()=>{n(z)&&n(m)!=="loading"&&n(T)&&(n(R),zt(()=>{i(n(T))?.data.pinned!==n(R)&&l(n(T),n(R))}))}),ke(()=>{x()}),ke(()=>()=>{n(y).length>0&&c([...n(y)])}),ke(()=>()=>{n(T)&&v("noteId")});var V=he(),H=A(V);{var O=G=>{{let ae=M(()=>i(n(T))?.data.deletedAt),Z=M(()=>i(n(T))?.data.archivedAt);qg(G,{get deletedAt(){return n(ae)},get archivedAt(){return n(Z)},get noteId(){return n(T)},mode:"add",get link(){return n(_)},set link(U){f(_,U,!0)},get text(){return n(b)},set text(U){f(b,U,!0)},get tags(){return n(y)},set tags(U){f(y,U,!0)},get pinned(){return n(R)},set pinned(U){f(R,U,!0)}})}};K(H,G=>{n(z)&&G(O)})}g(t,V),_e()}const Gg="modulepreload",Xg=function(t){return"/"+t},Bs={},Ct=function(e,a,r){let o=Promise.resolve();if(a&&a.length>0){let u=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=u(a.map(c=>{if(c=Xg(c),c in Bs)return;Bs[c]=!0;const d=c.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${v}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Gg,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var Jg=k('<div class="p-1tpcci8"><p class="p-1tpcci8">Something went wrong. Please reload the page</p> <!></div>');function Zg(t){var e=Jg(),a=I(C(e),2);It(a,{onClick:()=>location.reload(),children:(r,o)=>{var s=ze("Reload");g(r,s)},$$slots:{default:!0}}),g(t,e)}var Qg=k('<div class="p-uzefkz"><!></div>');function $g(t,e){me(e,!0);let a=L(!1);const{getDialogPageHeight:r}=ds(),o=M(r);ke(()=>{const u=setTimeout(()=>{f(a,!0)},250);return()=>{clearTimeout(u)}});var s=Qg(),i=C(s);{var l=u=>{La(u,{})};K(i,u=>{n(a)&&u(l)})}Pe(()=>Qa(s,`min-height: ${n(o)??""}px;`)),g(t,s),_e()}function At(t,e){me(e,!0);const a={},r=Object.assign({"./Pages/About.svelte":()=>Ct(()=>import("./aAuazKjJP.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>Ct(()=>import("./aBechjp-9.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>Ct(()=>import("./aBiXcvyCL.js"),__vite__mapDeps([6,3,7])),"./Pages/Auth.svelte":()=>Ct(()=>import("./a4Rvv9fEt.js"),__vite__mapDeps([8,9])),"./Pages/ChangeTags.svelte":()=>Ct(()=>import("./aBDn0zFG0.js"),[]),"./Pages/ConfirmAccessKey.svelte":()=>Ct(()=>import("./aDiYLo_1M.js"),__vite__mapDeps([10,4,3,11,12])),"./Pages/Exit.svelte":()=>Ct(()=>import("./aBviQ7Q24.js"),__vite__mapDeps([13,14])),"./Pages/ExportData.svelte":()=>Ct(()=>import("./aB7mPEgB9.js"),__vite__mapDeps([15,16,17,18,19,20])),"./Pages/Extension.svelte":()=>Ct(()=>import("./aCKOqdS3m.js"),__vite__mapDeps([21,18,19,22])),"./Pages/ImportData.svelte":()=>Ct(()=>import("./aDUiT5JIX.js"),__vite__mapDeps([23,24])),"./Pages/Install.svelte":()=>Ct(()=>import("./aCNDGd_Sf.js"),__vite__mapDeps([25,26])),"./Pages/InstallSuccess.svelte":()=>Ct(()=>import("./aBA4dTYpi.js"),__vite__mapDeps([27,28])),"./Pages/Note.svelte":()=>Ct(()=>import("./aC0XHFcoP.js"),__vite__mapDeps([29,30])),"./Pages/Settings.svelte":()=>Ct(()=>import("./aRp5sWRf5.js"),__vite__mapDeps([31,18,19,16,17,32])),"./Pages/Signin.svelte":()=>Ct(()=>import("./aBbNgC3Vh.js"),__vite__mapDeps([33,4,3,11,34])),"./Pages/Signup.svelte":()=>Ct(()=>import("./aCNnIHNsT.js"),__vite__mapDeps([35,11,4,3,34])),"./Pages/Subscription.svelte":()=>Ct(()=>import("./aBigPoPR-.js"),__vite__mapDeps([36,37])),"./Pages/Sync.svelte":()=>Ct(()=>import("./aBXXekE7N.js"),__vite__mapDeps([38,39]))}),o=async l=>{const u=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!a[l]){if(r[u]){const c=r[u]();return a[l]={promise:c},a[l].module=await c,a[l].module}throw new Error(`Page ${l} not found`)}return a[l].module||await a[l].promise};var s=he(),i=A(s);Kc(i,()=>o(e.page),l=>{$g(l,{})},(l,u)=>{const c=M(()=>n(u).default);var d=he(),v=A(d);Xc(v,()=>n(c),(h,p)=>{p(h,{get params(){return e.params},get hidden(){return e.hidden}})}),g(l,d)},l=>{Zg(l)}),g(t,s),_e()}var er,hl,pl;class eh{constructor(e){We(this,er);Ot(this,"data");Ot(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),it(this,er,hl).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],a=this.data.pop();return this.data.length&&a!==void 0&&(this.data[0]=a,it(this,er,pl).call(this)),e}isEmpty(){return this.data.length===0}}er=new WeakSet,hl=function(){let e=this.data.length-1;const a=this.data[e];for(;e>0;){const r=Math.floor((e-1)/2);if(this.compare(a,this.data[r])>=0)break;[this.data[e],this.data[r]]=[this.data[r],this.data[e]],e=r}},pl=function(){let e=0;const a=this.data.length;for(;;){const r=2*e+1,o=2*e+2;let s=e;if(r<a&&this.compare(this.data[r],this.data[s])<0&&(s=r),o<a&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class th{constructor(e,a){Ot(this,"heap");Ot(this,"done");Ot(this,"cache",[]);this.heap=new eh(a);for(const r of e)this.heap.insert(r);this.done=!1}get(e,a){if(this.cache.length>=a)return this.cache.slice(e,a);for(;this.cache.length<=a&&!this.heap.isEmpty();){const r=this.heap.extractMin();r!==void 0&&this.cache.push(r)}return this.heap.isEmpty()&&(this.done=!0),this.cache.slice(e,a)}}var nh=k("<span>Back to notes</span>"),ah=k('<div class="c p-1jdj5w3">No notes in bin</div> <div class="d p-1jdj5w3"><!></div>',1),rh=k("<span>Back to notes</span>"),oh=k('<div class="c p-1jdj5w3">No notes in archive</div> <div class="d p-1jdj5w3"><!></div>',1),sh=k('<p class="f">No notes in bin</p>'),ih=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span>',1),lh=k('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),ch=k('<div class="g p-1jdj5w3"><div class="d p-1jdj5w3"><!></div> <div>or</div> <div class="d p-1jdj5w3"><!></div></div>'),dh=k('<div class="e p-1jdj5w3"><!></div>'),uh=k('<div class="h"><div class="c p-1jdj5w3">No notes found</div></div>'),fh=k('<div class="i p-1jdj5w3"><ul class="p-1jdj5w3"></ul></div>'),vh=k('<div class="a p-1jdj5w3"><div class="b p-1jdj5w3"><!></div></div>');function gh(t,e){me(e,!0);const{getCountDialog:a}=Zt(),{getScrollContainer:r}=vo(),{createHandleClickDialogPage:o,createDialogPageHref:s}=Jt(),{getSelectedTags:i}=Vn(),{getFeedOrder:l}=Hi(),{checkNotesInArchive:u,checkNotesInBin:c,checkNotes:d,isInitedNotes:v}=Rt(),{getSelectedMetaTags:h}=fo(),{replaceSearchParams:p,getHref:m}=Bt();Yr();const{getFiltredNotesLength:T,getFiltredNotes:_,getUpdatedFiltredNotesTimestamp:b}=Da(),{getFeedSearch:R}=Yr();let y="keyboard",x=M(h),z=M(T),X=M(_),V=M(b),H=M(v),O=54,G=L(0),ae=L(0),Z=L(0),U=L(null),B=M(r),ge=null,Te=null,q=M(()=>n(x).has(et.ARCHIVED)?"archive":n(x).has(et.BIN)?"bin":"notes");const F=M(i);Be(()=>{n(F),n(ye),n(B)?.scrollTo(0,0)});const{enable:Q}=cs(),se=()=>{Q(),ge||(ge=requestAnimationFrame(()=>{const S=n(B)?.scrollTop||0;f(Z,S,!0);const N=Math.ceil(n(G)/O);f(ae,Math.floor(S/(O*N))*(O*N)),ge=null}))},fe=()=>{Te||(Te=requestAnimationFrame(()=>{f(G,window.innerHeight-180||0,!0);const S=n(B)?.scrollTop||0;f(Z,S,!0);const N=Math.ceil(n(G)/O);f(ae,Math.floor(S/(O*N))*(O*N)),Te=null}))};ke(()=>{const S=N=>{if(!(!Av()&&Vr()===void 0)&&!(a()>0)&&(N.key==="ArrowDown"||N.key==="ArrowUp")){if(N.preventDefault(),N.key==="ArrowDown"){const D=Vr(),E=n($).findIndex(ce=>ce.id===D),ne=de(),pe=Se();if(!D||E===-1)gn(ne?.id);else if(E<=pe.index&&E>=ne.index)Os()&&E!==-1&&be(E+1)&&n(B)&&(n(B).scrollTop=Math.floor(n(B).scrollTop/O)*O+O);else if(E>pe.index&&!be(E-1)&&be(E)){n(B)&&(n(B).scrollTop=Math.ceil(n(B).scrollTop/O)*O+O);const ce=Os();gn(ce)}else gn(ne?.id)}else if(N.key==="ArrowUp"){const D=Vr(),E=n($).findIndex(ce=>ce.id===D),ne=de(),pe=Se();if(!D||E===-1)gn(pe?.id);else if(E<=pe.index&&E>=ne.index)Fs()&&E!==-1&&be(E-1)&&n(B)&&(n(B).scrollTop=Math.ceil(n(B).scrollTop/O)*O-O);else if(E<ne.index&&!be(E+1)&&be(E)){n(B)&&(n(B).scrollTop=n(Ce)+E*O-O);const ce=Fs();gn(ce)}else gn(pe?.id)}gl()||Zo()}};return document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}}),ke(()=>{fe(),se()});const ie=()=>{se()};Be(()=>{R()!==""&&y==="keyboard"&&(gn(de().id),Zo())}),Be(()=>(n(B)?.addEventListener("scroll",ie),window.addEventListener("resize",fe),()=>{n(B)?.removeEventListener("scroll",ie),window.removeEventListener("resize",fe)}));const ye=M(l);Be(()=>{n(ye),n(V),f(U,new th(n(X),(S,N)=>{if(!S||!N||!S.data||!N.data)return 0;if(S.data.pinned&&!N.data.pinned)return-1;if(!S.data.pinned&&N.data.pinned)return 1;if(S.data.pinned&&N.data.pinned){if(S.data.pinned<N.data.pinned)return 1;if(S.data.pinned>N.data.pinned)return-1}const D=(E,ne)=>E.data.text||ne.data.text?(E.data.text||"").localeCompare(ne.data.text||""):(E.data.link?.title||"").localeCompare(ne.data.link?.title||"");switch(n(ye)){case"newest":return S.data.createdAt<N.data.createdAt?1:S.data.createdAt>N.data.createdAt?-1:D(S,N);case"oldest":return S.data.createdAt>N.data.createdAt?1:S.data.createdAt<N.data.createdAt?-1:D(S,N);case"AtoZ":return D(S,N);case"ZtoA":return D(N,S);case"updatedNewest":return S.data.updatedAt<N.data.updatedAt?1:S.data.updatedAt>N.data.updatedAt?-1:D(S,N);default:return 0}}),!0)});const Ee=M(()=>n(z)*O);let $=M(()=>{n(V);const S=Math.ceil(n(G)/O);let N=Math.floor(n(ae)/O);return N=N-Math.min(N,S),n(U)?.get(N,N+S*3)||[]}),le=M(()=>O*Math.ceil(n(G)/O));const Ce=M(()=>n(ae)-Math.min(n(ae),n(le))),be=S=>S*O<n(Z)-n(Ce)-O/2||S*O>n(Z)-n(Ce)+Math.floor(n(G)/O)*O,de=()=>{for(let S=0;S<n($).length;S++)if(!be(S))return{index:S,id:n($)[S].id};return{index:-1,id:void 0}},Se=()=>{for(let S=n($).length-1;S>=0;S--)if(!be(S))return{index:S,id:n($)[S].id};return{index:-1,id:void 0}};ke(()=>{document.addEventListener("mousemove",()=>{y="mouse"}),document.addEventListener("keydown",()=>{y="keyboard"})});var ee=vh(),J=C(ee),ue=C(J);{var w=S=>{La(S,{})},P=S=>{var N=he(),D=A(N);{var E=pe=>{var ce=ah(),j=I(A(ce),2),Y=C(j);{let te=M(()=>m(""));It(Y,{element:"a",get href(){return n(te)},onClick:we=>{we.preventDefault(),p("")},children:(we,Ae)=>{var Ie=nh();g(we,Ie)},$$slots:{default:!0}})}g(pe,ce)},ne=pe=>{var ce=he(),j=A(ce);{var Y=we=>{var Ae=oh(),Ie=I(A(Ae),2),je=C(Ie);{let He=M(()=>m(""));It(je,{element:"a",get href(){return n(He)},onClick:Le=>{Le.preventDefault(),p("")},children:(Le,Ne)=>{var De=rh();g(Le,De)},$$slots:{default:!0}})}g(we,Ae)},te=we=>{var Ae=he(),Ie=A(Ae);{var je=Le=>{var Ne=dh(),De=C(Ne);{var Qe=Ve=>{var Xe=sh();g(Ve,Xe)},st=Ve=>{var Xe=ch(),Ue=C(Xe),qe=C(Ue);{let ct=M(()=>s(xe.NewNote)),ut=M(()=>o(xe.NewNote));It(qe,{element:"a",get href(){return n(ct)},get onClick(){return n(ut)},children:(pt,En)=>{var xt=ih(),Nt=A(xt);oe(Nt,()=>({"--size":"18px","--color":"#b0b0b0"})),ve(Nt.lastChild,{name:"plus"}),g(pt,xt)},$$slots:{default:!0}})}var jt=I(Ue,4),at=C(jt);{let ct=M(()=>s(xe.ImportData)),ut=M(()=>o(xe.ImportData));It(at,{element:"a",get href(){return n(ct)},get onClick(){return n(ut)},children:(pt,En)=>{var xt=lh(),Nt=A(xt);oe(Nt,()=>({"--size":"18px","--color":"#b0b0b0"})),ve(Nt.lastChild,{name:"import"}),g(pt,xt)},$$slots:{default:!0}})}g(Ve,Xe)};K(De,Ve=>{n(q)==="bin"?Ve(Qe):Ve(st,!1)})}g(Le,Ne)},He=Le=>{var Ne=he(),De=A(Ne);{var Qe=Ve=>{var Xe=uh();g(Ve,Xe)},st=Ve=>{var Xe=fh(),Ue=C(Xe);Bn(Ue,23,()=>n($),qe=>qe.data,(qe,jt,at)=>{var ct=he(),ut=A(ct);{var pt=En=>{{let xt=M(()=>n($)[n(at)+1]?.id),Nt=M(()=>n($)[n(at)-1]?.id),mo=M(()=>be(n(at))),_o=M(()=>(n(at)+5)*O<n(Z)-n(Ce)-O/2||(n(at)+5)*O>n(Z)-n(Ce)+Math.floor(n(G)/O)*O);Uv(En,{get nextNoteId(){return n(xt)},get prevNoteId(){return n(Nt)},get mode(){return n(q)},get focusHidden(){return n(mo)},get showMenuUp(){return n(_o)},get noteId(){return n(jt).id},get noteData(){return n(jt).data}})}};K(ut,En=>{n(jt).data&&En(pt)})}g(qe,ct)}),Pe(qe=>{Qa(Xe,qe),Qa(Ue,`transform: translateY(${n(Ce)??""}px);`)},[()=>`--minHeight: ${Math.max((n(Ee)>n(G),n(Ee)),0)}px`]),g(Ve,Xe)};K(De,Ve=>{n($).length===0?Ve(Qe):Ve(st,!1)},!0)}g(Le,Ne)};K(Ie,Le=>{!c()&&!u()&&!d()?Le(je):Le(He,!1)},!0)}g(we,Ae)};K(j,we=>{n(q)==="archive"&&!u()?we(Y):we(te,!1)},!0)}g(pe,ce)};K(D,pe=>{n(q)==="bin"&&!c()?pe(E):pe(ne,!1)},!0)}g(S,N)};K(ue,S=>{n(H)?S(P,!1):S(w)})}g(t,ee),_e()}var hh=k('<div class="a p-qboa24"></div> <div class="b p-qboa24"><!></div>',1);function ph(t){var e=hh(),a=I(A(e),2),r=C(a);gh(r,{}),g(t,e)}function mh(t,e){me(e,!0);const a=Kn();let r=Me(e,"animationRef",7),o=Me(e,"dialog",7);ul(t,{baseActionThreshold:33,onInit:async()=>{if(!o())throw new Error("dialog is not defined");if(!(e.dialogState==="opened"||e.dialogState==="opening"))return;let c=0,d=0,v=()=>1;if(r().current){r().current.pause();let p=Number(r().current.currentTime);yr()&&(p=Number(p)+50,r().current.currentTime=Math.min(Math.max(jn-1,p),p));const m=r().current.effect?.getComputedTiming().progress||0;v=()=>m,r().current.commitStyles(),r().current.cancel(),r().current=void 0}await new Promise(p=>requestAnimationFrame(p)),d=1-v();const h=d*e.dialogWidth;return o().style.setProperty("--backdrop-bg",`${Math.abs(1-d)*.1}`),a.swipingRatio=Math.abs(1-d)*25,a.isSwiping=!0,a.duration=0,o().style.transform=`translate3d(${h}px, 0, 0)`,o().style.setProperty("--transition-timing-dialog","0s"),e.onSwipe(),{initialPosition:c,currentPosition:h,minPosition:0,maxPosition:e.dialogWidth,width:e.dialogWidth}},onCancel:()=>{e.onCancelSwipe()},onUpdate:({newPosition:c,width:d})=>{if(!o())throw new Error("dialog is not defined");e.dialogState==="swiping"&&(o().style.setProperty("--backdrop-bg",`${Math.abs(1-c/d)*.1}`),o().style.transform=`translate3d(${c}px, 0, 0)`,a.swipingRatio=Math.abs(1-c/d)*25)},onFinish:({swipeVelocity:c,currentPosition:d,width:v,actionThreshold:h,initialPosition:p})=>{if(a.isSwiping=!1,!o())throw new Error("Dialog is not defined");if(e.dialogState!=="swiping")return;const m=()=>Math.abs(p+d)/v*100;let T=null;if(c<=-la?T="open":c>=la?T="close":T=Math.abs(m())>h?"close":"open",r().progress=dl(m()/100),T==="close"){const _=(1-(r().progress||0))*jn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=0,e.onClose()}else{const _=(r().progress||1)*jn;a.duration=_/1e3,o().style.setProperty("--transition-timing-dialog",`${a.duration}s`),a.swipingRatio=25,e.onOpen()}}}),_e()}var _h=k('<div class="d p-8xr118"> </div>'),wh=k('<button class="e f p-8xr118"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),yh=k('<a class="e g p-8xr118"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),bh=k('<div><div class="a p-8xr118"><div class="b p-8xr118"><div class="c p-8xr118"><!> <!> <!></div></div></div> <!> <!></div>'),Ch=k("<dialog><!></dialog> <!>",1);function Sh(t,e){me(e,!0);const{isScrolling:a,enable:r}=cs();let o=L(null),s=L(null),i={};const l=Kn(),{checkLeftEnd:u,checkLeftStart:c,setLeftEnd:d,setLeftStart:v,getCountDialog:h}=Zt(),p=M(c),m=M(u);let T=M(()=>l.working);const _=()=>{e.dialogState!=="opened"&&e.onStartOpening()},b=()=>{e.onClose()},R=()=>{e.onSwipe()},y=Z=>{Z.preventDefault(),b()};ke(()=>(n(o)?.addEventListener("close",b),n(o)?.addEventListener("cancel",y),()=>{n(o)?.removeEventListener("close",b),n(o)?.removeEventListener("cancel",y)})),Be(()=>{h()>0&&(l.swipingRatio=25)}),Be(()=>{e.dialogState==="opening"?zt(()=>{requestAnimationFrame(()=>{if(!n(o))return;const Z=(i.progress||1)*jn,U=n(o).style.transform||`translate3d(${n(p)?"-100%":"100%"}, 0, 0)`;n(o).style.transform="";const B=n(o)?.animate([{transform:U},{transform:"translate3d(0, 0, 0)"}],{duration:Z,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=B,B&&(B.onfinish=()=>{e.onOpened(),l.swipingRatio=25,n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ia().duration,B.cancel(),i.current=void 0,i.progress=void 0,n(p)&&v(!1)})})}):e.dialogState==="closing"&&zt(()=>{requestAnimationFrame(()=>{if(!n(o))return;l.swipingRatio=0;const Z=(1-(i.progress||0))*jn,U=n(o).style.transform||"translate3d(0, 0, 0)";n(o).style.transform="";const B=n(o)?.animate([{transform:U},{transform:`translate3d(${n(m)?"-100%":"100%"}, 0, 0)`}],{duration:Z,easing:"cubic-bezier(0.42, 0, 0.58, 1)",fill:"forwards"});i.current=B,B&&(B.onfinish=()=>{e.onClosed(),n(o)&&(n(o).style.removeProperty("--transition-timing-dialog"),n(o).style.removeProperty("--backdrop-bg")),l.duration=ia().duration,B.cancel(),i.current=void 0,i.progress=void 0,n(m)&&d(!1)})})})});const x=()=>{r()},z=M(a);ke(()=>{if(n(o)&&!n(o).open){if(n(o).showModal(),yr()&&n(o).getBoundingClientRect(),!n(T)){e.onOpened();return}e.onStartOpening()}});var X=Ch(),V=A(X),H=C(V);{var O=Z=>{var U=bh(),B=C(U),ge=C(B),Te=C(ge),q=C(Te);{var F=$=>{var le=_h(),Ce=C(le);Pe(()=>dt(Ce,e.title)),g($,le)};K(q,$=>{e.title&&$(F)})}var Q=I(q,2);{var se=$=>{var le=wh();le.__click=b;var Ce=C(le);oe(Ce,()=>({"--size":"28px"})),ve(Ce.lastChild,{name:"back"});var be=I(Ce,2);mt(be,{children:(de,Se)=>{var ee=ze("back");g(de,ee)}}),g($,le)};K(Q,$=>{e.blocked||$(se)})}var fe=I(Q,2);{var ie=$=>{var le=yh();le.__click=function(...de){e.onOpenWindow?.apply(this,de)};var Ce=C(le);oe(Ce,()=>({"--scale":"0.7","--size":"28px"})),ve(Ce.lastChild,{name:"open-window"});var be=I(Ce,2);mt(be,{children:(de,Se)=>{var ee=ze("open window");g(de,ee)}}),Pe(()=>lt(le,"href",e.openWindowHref)),g($,le)};K(fe,$=>{e.onOpenWindow&&$(ie)})}var ye=I(B,2);Re(ye,()=>e.children);var Ee=I(ye,2);{var re=$=>{go($,{})};K(Ee,$=>{e.dialogState==="opened"&&$(re)})}Ze(U,$=>f(s,$),()=>n(s)),Pe(()=>nt(U,1,ot({o:!0,p:e.blocked||e.hidden||e.dialogState!=="opened"}),"p-8xr118")),ln("scroll",U,x),g(Z,U)};K(H,Z=>{e.dialogState!=="preOpening"&&Z(O)})}Ze(V,Z=>f(o,Z),()=>n(o));var G=I(V,2);{var ae=Z=>{mh(Z,{get dialogWidth(){return e.dialogWidth},onCancelSwipe:_,onClose:b,onSwipe:R,get onOpen(){return e.onStartOpening},get animationRef(){return i},get dialog(){return n(o)},get dialogState(){return e.dialogState}})};K(G,Z=>{n(s)&&!n(z)&&!e.blocked&&!e.hidden&&Z(ae)})}Pe(()=>nt(V,1,ot({h:!0,i:n(T),j:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping",k:e.hidden,l:e.dialogState==="opened",m:n(p),n:e.dialogState==="opened"||e.dialogState==="opening"||e.dialogState==="swiping"}),"p-8xr118")),g(t,X),_e()}ht(["click"]);function kh(t,e){me(e,!0);let a=Me(e,"hidden",3,!1),r=Me(e,"onClosed",3,()=>{}),o=L(0);ke(()=>{const b=()=>{f(o,document.body.offsetWidth,!0)};return window.addEventListener("resize",b),b(),()=>{window.removeEventListener("resize",b)}});const{dialogDec:s,dialogInc:i}=Zt(),l=Kn();ke(()=>(i(),()=>{s()}));let u=L("closed");const c=()=>{f(u,"opening")},d=()=>{f(u,"swiping")},v=()=>{f(u,"opened")},h=()=>{e.onClose(),f(u,"closing")},p=()=>{f(u,"closed"),r()()};Be(()=>{e.shown&&n(u)==="closed"?f(u,"preOpening"):!e.shown&&n(u)==="opened"&&f(u,"closing")}),Be(()=>{n(u)==="closed"?(l.swipingRatio=0,l.duration=.2):(n(u)==="opened"||n(u)==="opening")&&(l.duration=.2,l.swipingRatio=25)});var m=he(),T=A(m);{var _=b=>{Sh(b,{get dialogWidth(){return n(o)},get dialogState(){return n(u)},get title(){return e.title},onStartOpening:c,onOpened:v,onClose:h,onClosed:p,onSwipe:d,get openWindowHref(){return e.openWindowHref},get onOpenWindow(){return e.onOpenWindow},get hidden(){return a()},get blocked(){return e.blocked},children:(R,y)=>{var x=he(),z=A(x);Re(z,()=>e.children),g(R,x)},$$slots:{default:!0}})};K(T,b=>{n(u)!=="closed"&&b(_)})}g(t,m),_e()}const xh=({getDialog:t,onOpen:e,onStartClose:a,onClose:r})=>{const o=i=>{i.preventDefault(),a()},s=()=>{r?.()};ke(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),ke(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var Th=k('<button class="c d p-nkjows"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Eh=k('<div class="e p-nkjows"> </div>'),Ph=k('<button class="c f p-nkjows"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Nh=k('<dialog><div><div class="a p-nkjows"><div class="b p-nkjows"><div><!></div> <!> <div><!></div></div></div> <div class="g p-nkjows"><!></div></div> <!></dialog> <!>',1);function Ah(t,e){me(e,!0);let a=Me(e,"blockedDialog",3,!1),r=Me(e,"hiddenDialog",3,!1),o=Me(e,"isDesktopAnimationOff",3,!1),s=L(null),i=L(null),l=L(!1),u=L(null);xh({getDialog:()=>n(s),onOpen:()=>e.onOpen(),onStartClose:()=>e.onStartClose(),onClose:()=>e.onClose()});const c=Kn();Be(()=>{e.stateDialog==="closing"&&(c.working?n(s)?.addEventListener("transitionend",()=>{n(s)?.close()},{once:!0}):n(s)?.close())});const{getDialogPageHeight:d}=ds(),v=M(d);ke(()=>{setTimeout(()=>{f(l,!0)},50)});var h=Nh(),p=A(h),m=C(p),T=C(m),_=C(T),b=C(_),R=C(b);{var y=U=>{var B=Th();B.__click=()=>{e.onStartBack()};var ge=C(B);oe(ge,()=>({"--size":"24px"})),ve(ge.lastChild,{name:"back"});var Te=I(ge,2);mt(Te,{children:(q,F)=>{var Q=ze("back");g(q,Q)}}),g(U,B)};K(R,U=>{(!(a()||r())||a())&&e.onStartBack&&U(y)})}var x=I(b,2);{var z=U=>{var B=Eh(),ge=C(B);Pe(()=>dt(ge,e.title)),g(U,B)};K(x,U=>{e.title&&U(z)})}var X=I(x,2),V=C(X);{var H=U=>{var B=Ph();B.__click=()=>{e.onStartClose()};var ge=C(B);oe(ge,()=>({"--size":"24px"})),ve(ge.lastChild,{name:"close"});var Te=I(ge,2);mt(Te,{children:(q,F)=>{var Q=ze("close");g(q,Q)}}),g(U,B)};K(V,U=>{a()||r()||U(H)})}var O=I(T,2),G=C(O);Re(G,()=>e.children),Ze(m,U=>f(i,U),()=>n(i));var ae=I(m,2);go(ae,{get ref(){return n(u)},set ref(U){f(u,U,!0)}}),Ze(p,U=>f(s,U),()=>n(s));var Z=I(p,2);us(Z,{get dialog(){return n(s)},get dialogInner(){return n(i)},get onClose(){return e.onStartClose},get notificationRef(){return n(u)},set notificationRef(U){f(u,U,!0)}}),Pe(()=>{nt(p,1,ot({h:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o(),m:r()}),"p-nkjows"),Qa(m,`height: ${n(v)+74}px`),nt(m,1,ot({n:!0,i:e.stateDialog==="open",j:n(l),k:c.working,l:o()}),"p-nkjows")}),g(t,h),_e()}ht(["click"]);const Mh=({onStartClose:t,onClosed:e})=>{let a=L("close");return{get state(){return n(a)},set state(i){f(a,i,!0)},handleStartClose:(i=!1)=>{i||(f(a,"closing"),t?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function Dh(t,e){me(e,!0);let a=Me(e,"blockedDialog",3,!1),r=Me(e,"hiddenDialog",3,!1),o=Me(e,"onStartClose",3,()=>{}),s=Me(e,"onClosed",3,()=>{}),i=Mh({onStartClose:()=>o()(),onClosed:()=>s()()});const{dialogDec:l,dialogInc:u}=Zt();ke(()=>(u(),()=>{l()})),Be(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(a())});const c=p=>{p.key==="Escape"&&a()&&(p.preventDefault(),p.stopPropagation())};ke(()=>(document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}));var d=he(),v=A(d);{var h=p=>{Ah(p,{get title(){return e.title},get stateDialog(){return i.state},get blockedDialog(){return a()},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(a())},get onClose(){return i.handleClose},children:(m,T)=>{var _=he(),b=A(_);Re(b,()=>e.children),g(m,_)},$$slots:{default:!0}})};K(v,p=>{i.state!=="close"&&p(h)})}g(t,d),_e()}const js=(t,e=Ye,a=Ye,r)=>{let o=Er(()=>Dl(r?.(),!1));var s=he(),i=A(s);{var l=c=>{yt(c,{children:(d,v)=>{At(d,{get hidden(){return n(o)},get page(){return xe.Settings}})},$$slots:{default:!0}})},u=c=>{var d=he(),v=A(d);{var h=m=>{yt(m,{children:(T,_)=>{Yg(T,{})},$$slots:{default:!0}})},p=m=>{var T=he(),_=A(T);{var b=y=>{yt(y,{children:(x,z)=>{At(x,{get params(){return a()},get hidden(){return n(o)},get page(){return xe.Note}})},$$slots:{default:!0}})},R=y=>{var x=he(),z=A(x);{var X=H=>{yt(H,{children:(O,G)=>{At(O,{get hidden(){return n(o)},get page(){return xe.ImportData}})},$$slots:{default:!0}})},V=H=>{var O=he(),G=A(O);{var ae=U=>{yt(U,{children:(B,ge)=>{At(B,{get hidden(){return n(o)},get page(){return xe.ExportData}})},$$slots:{default:!0}})},Z=U=>{var B=he(),ge=A(B);{var Te=F=>{yt(F,{children:(Q,se)=>{sg(Q,{})},$$slots:{default:!0}})},q=F=>{var Q=he(),se=A(Q);{var fe=ye=>{yt(ye,{children:(Ee,re)=>{At(Ee,{get hidden(){return n(o)},get page(){return xe.Install}})},$$slots:{default:!0}})},ie=ye=>{var Ee=he(),re=A(Ee);{var $=Ce=>{yt(Ce,{children:(be,de)=>{At(be,{get hidden(){return n(o)},get page(){return xe.InstallSuccess}})},$$slots:{default:!0}})},le=Ce=>{var be=he(),de=A(be);{var Se=J=>{yt(J,{children:(ue,w)=>{At(ue,{get hidden(){return n(o)},get page(){return xe.Auth}})},$$slots:{default:!0}})},ee=J=>{var ue=he(),w=A(ue);{var P=N=>{yt(N,{children:(D,E)=>{At(D,{get hidden(){return n(o)},get page(){return xe.Signup}})},$$slots:{default:!0}})},S=N=>{var D=he(),E=A(D);{var ne=ce=>{yt(ce,{children:(j,Y)=>{At(j,{get hidden(){return n(o)},get page(){return xe.Signin}})},$$slots:{default:!0}})},pe=ce=>{var j=he(),Y=A(j);{var te=Ae=>{yt(Ae,{children:(Ie,je)=>{At(Ie,{get hidden(){return n(o)},get page(){return xe.AccessKeys}})},$$slots:{default:!0}})},we=Ae=>{var Ie=he(),je=A(Ie);{var He=Ne=>{yt(Ne,{children:(De,Qe)=>{At(De,{get hidden(){return n(o)},get page(){return xe.Account}})},$$slots:{default:!0}})},Le=Ne=>{var De=he(),Qe=A(De);{var st=Xe=>{yt(Xe,{children:(Ue,qe)=>{At(Ue,{get hidden(){return n(o)},get page(){return xe.ConfirmAccessKey}})},$$slots:{default:!0}})},Ve=Xe=>{var Ue=he(),qe=A(Ue);{var jt=ct=>{yt(ct,{children:(ut,pt)=>{At(ut,{get hidden(){return n(o)},get page(){return xe.Exit}})},$$slots:{default:!0}})},at=ct=>{var ut=he(),pt=A(ut);{var En=xt=>{var Nt=he(),mo=A(Nt);{var _o=Ra=>{yt(Ra,{children:(Dr,fs)=>{At(Dr,{get hidden(){return n(o)},get page(){return xe.Sync}})},$$slots:{default:!0}})},ml=Ra=>{var Dr=he(),fs=A(Dr);{var _l=Oa=>{yt(Oa,{children:(Ir,vs)=>{At(Ir,{get hidden(){return n(o)},get page(){return xe.Subscription}})},$$slots:{default:!0}})},wl=Oa=>{var Ir=he(),vs=A(Ir);{var yl=Fa=>{yt(Fa,{children:(wo,Cl)=>{At(wo,{get hidden(){return n(o)},get page(){return xe.About}})},$$slots:{default:!0}})},bl=Fa=>{yt(Fa,{children:(wo,Cl)=>{tg(wo,{})},$$slots:{default:!0}})};K(vs,Fa=>{e()===xe.About?Fa(yl):Fa(bl,!1)},!0)}g(Oa,Ir)};K(fs,Oa=>{e()===xe.Subscription?Oa(_l):Oa(wl,!1)},!0)}g(Ra,Dr)};K(mo,Ra=>{e()===xe.Sync?Ra(_o):Ra(ml,!1)},!0)}g(xt,Nt)};K(pt,xt=>{e(),xe.Extension,xt(En,!1)},!0)}g(ct,ut)};K(qe,ct=>{e()===xe.Exit?ct(jt):ct(at,!1)},!0)}g(Xe,Ue)};K(Qe,Xe=>{e()===xe.ConfirmAccessKey?Xe(st):Xe(Ve,!1)},!0)}g(Ne,De)};K(je,Ne=>{e()===xe.Account?Ne(He):Ne(Le,!1)},!0)}g(Ae,Ie)};K(Y,Ae=>{e()===xe.AccessKeys?Ae(te):Ae(we,!1)},!0)}g(ce,j)};K(E,ce=>{e()===xe.Signin?ce(ne):ce(pe,!1)},!0)}g(N,D)};K(w,N=>{e()===xe.Signup?N(P):N(S,!1)},!0)}g(J,ue)};K(de,J=>{e()===xe.Auth?J(Se):J(ee,!1)},!0)}g(Ce,be)};K(re,Ce=>{e()===xe.InstallSuccess?Ce($):Ce(le,!1)},!0)}g(ye,Ee)};K(se,ye=>{e()===xe.Install?ye(fe):ye(ie,!1)},!0)}g(F,Q)};K(ge,F=>{e()===xe.AccountSetup?F(Te):F(q,!1)},!0)}g(U,B)};K(G,U=>{e()===xe.ExportData?U(ae):U(Z,!1)},!0)}g(H,O)};K(z,H=>{e()===xe.ImportData?H(X):H(V,!1)},!0)}g(y,x)};K(_,y=>{e()===xe.Note?y(b):y(R,!1)},!0)}g(m,T)};K(v,m=>{e()===xe.NewNote?m(h):m(p,!1)},!0)}g(c,d)};K(i,c=>{e()===xe.Settings?c(l):c(u,!1)})}g(t,s)};var Ih=k("<!> <!>",1);function Lh(t,e){me(e,!0);let a=M(()=>({...e.openWindowHref?{openWindowHref:e.openWindowHref}:{},...e.onOpenWindow?{onOpenWindow:e.onOpenWindow}:{}}));const{checkBlockedDialog:r,checkClosableDialog:o}=Zt(),{sidebarClose:s,getSidebarState:i}=Ar(),l=M(r),u=M(o),{getDialogPages:c}=Jt(),{getAccount:d}=ls();let v=M(c),h=M(()=>d()!==void 0);const{checkMobileSize:p}=Ia();let m=L(ft([]));const T=M(p),{clearDialogPages:_,popDialogPage:b}=Jt(),{checkLeftStart:R}=Zt();let y=M(R);Be(()=>{c().length>0&&i()!=="closed"&&setTimeout(()=>{s()},60)});const x=()=>{b()},z=()=>{_()};Be(()=>{n(v),n(T),zt(()=>{if(n(T))n(v).length>=n(m).length||n(y)?f(m,n(v).map(U=>({page:U,shown:!0})),!0):f(m,n(m).map((U,B)=>({page:U.page,shown:B<n(v).length})),!0);else if(n(v).length>=n(m).length)f(m,n(v).map(U=>({page:U,shown:!0})),!0);else{if(n(v).length===0){f(m,[{page:n(m)[n(m).length-1].page,shown:!1}],!0);return}f(m,n(v).map(U=>({page:U,shown:!0})),!0)}})});const X=()=>{f(m,n(v).map(U=>({page:U,shown:!0})),!0)};var V=Ih(),H=A(V);{var O=U=>{ph(U)};K(H,U=>{n(h)&&U(O)})}var G=I(H,2);{var ae=U=>{var B=he(),ge=A(B);Bn(ge,19,()=>n(m),Te=>Te.page,(Te,q,F)=>{const Q=M(()=>n(q).page.split("?")[1]),se=M(()=>n(q).page.split("?")[0]),fe=M(()=>n(F)!==n(m).length-1&&!!n(m)[n(F)+1]?.shown),ie=M(()=>n(F)===0);{let ye=M(()=>As[n(se)]||""),Ee=M(()=>n(l)||n(ie)&&!n(u)),re=M(()=>({...n(se)!==xe.NewNote&&n(se)!==xe.Note?n(a):{}}));kh(Te,zo({get shown(){return n(q).shown},get title(){return n(ye)},get hidden(){return n(fe)},get blocked(){return n(Ee)},onClose:x,onClosed:X},()=>n(re),{children:($,le)=>{js($,()=>n(se),()=>n(Q),()=>n(fe))},$$slots:{default:!0}}))}}),g(U,B)},Z=U=>{var B=he(),ge=A(B);{var Te=q=>{const F=M(()=>n(m)[n(m).length-1].page.split("?")[1]),Q=M(()=>n(m)[n(m).length-1].page.split("?")[0]),se=M(()=>n(m)[n(m).length-1].shown),fe=M(()=>n(m).length===1);{let ie=M(()=>As[n(Q)]||""),ye=M(()=>n(l)||!n(u)),Ee=M(()=>n(l)||n(fe)?void 0:x);Dh(q,{get shownDialog(){return n(se)},get title(){return n(ie)},get blockedDialog(){return n(ye)},hiddenDialog:!1,get onStartBack(){return n(Ee)},onStartClose:z,onClosed:X,children:(re,$)=>{js(re,()=>n(Q),()=>n(F))},$$slots:{default:!0}})}};K(ge,q=>{n(m).length>0&&q(Te)},!0)}g(U,B)};K(G,U=>{p()?U(ae):U(Z,!1)})}g(t,V),_e()}function Rh(t,e){me(e,!1);let a=0;ke(()=>{document.addEventListener("touchstart",r=>{a=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-a;(a<30&&s>0||a>window.innerWidth-30&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{a=0}),document.addEventListener("touchcancel",()=>{a=0})}),ss(),_e()}const Oh=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var Fh=k('<div><button class="d p-bn1wva"><!> <span class="e p-bn1wva"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),zh=k('<!> <!> <!> <!> <main><div class="a p-bn1wva"><div class="b p-bn1wva"><!></div></div> <div class="c p-bn1wva"><!></div></main> <!>',1);function Bh(t,e){me(e,!0);const{replaceSearchParams:a,getHref:r,getSearchParams:o}=Bt(),{hasDialogPage:s}=Jt(),{setScrollContainer:i}=vo(),{getAccount:l,init:u}=ls(),{isInitedNotes:c}=Rt(),{isInitedSettings:d}=Pa(),{getDialogPages:v}=Jt(),{createBroadcastChannel:h,tabId:p}=uo(),m=h(),{getSidebarState:T}=Ar(),{setClosableDialog:_}=Zt(),{getViewMode:b}=Pa(),R=()=>{Oh()?a(`${en}=${xe.AccountSetup}`):a(`${en}=${xe.Install}`)};ke(()=>{u(P=>{P===void 0?R():(s(xe.AccountSetup)&&a(""),P?f(V,P):f(V,null))});const w=async P=>{const S=JSON.parse(P.data);if(S.tabId&&S.tabId===p)return;const N=S;N.type==="initLocalAccount"||N.type==="initCloudAccount"||N.type==="updateAccount"||N.type==="disconnectCloudAccount"?a(""):N.type==="exit"&&R()};return m.addEventListener(w),()=>m.removeEventListener(w)});const y=Kn();ke(async()=>{await new Promise(w=>setTimeout(w,60)),await Ai(),y.working=!0});let x=L(!1),z=0,X=M(()=>v().length>0),V=M(l),H=M(c),O=M(d),G=L(null);const ae=()=>{n(G)&&n(G).scrollTo({top:0})};Be(()=>{_(n(V)!==void 0)}),Be(()=>{i(n(G))});const Z=()=>{if(n(G)){const w=n(G).scrollTop||0;w===0?f(x,!1):!n(x)&&z>w?f(x,!0):n(x)&&z+50<w&&f(x,!1),z=w}},U=()=>{Z()};Be(()=>(n(G)?.addEventListener("scroll",U),window.addEventListener("resize",U),()=>{n(G)?.removeEventListener("scroll",U),window.removeEventListener("resize",U)}));const B=M(T);let ge=M(()=>y.swipingRatio);const Te=()=>{const w=new URLSearchParams(o());return r(w)},q=async w=>{w.preventDefault()},F=M(b),Q=M(()=>n(F)==="popup"||n(F)==="sidebar"?{onOpenWindow:q,openWindowHref:Te()}:{});var se=zh(),fe=A(se);Rh(fe,{});var ie=I(fe,2);Ru(ie,{});var ye=I(ie,2);go(ye,{});var Ee=I(ye,2);nf(Ee,{});var re=I(Ee,2),$=C(re),le=C($),Ce=C(le);{var be=w=>{Qv(w,zo(()=>n(Q)))};K(Ce,w=>{n(O)&&n(V)!==void 0&&w(be)})}var de=I($,2),Se=C(de);{var ee=w=>{Lh(w,zo(()=>n(Q)))};K(Se,w=>{n(H)&&n(O)&&w(ee)})}Ze(re,w=>f(G,w),()=>n(G));var J=I(re,2);{var ue=w=>{var P=Fh(),S=C(P);S.__click=ae;var N=C(S);mt(N,{children:(ne,pe)=>{var ce=ze("top");g(ne,ce)}});var D=I(N,2),E=C(D);oe(E,()=>({"--rotate":"90deg","--size":"28px"})),ve(E.lastChild,{name:"back"}),Pe(()=>{Qa(P,`--swiping-ratio: ${n(ge)}; --transition-timing-default: ${y.duration}s;`),nt(P,1,ot({i:!0,g:y.working&&!y.isSwiping,j:n(X)||n(B)!=="closed"}),"p-bn1wva")}),g(w,P)};K(J,w=>{n(x)&&w(ue)})}Pe(()=>{Qa(re,`--swiping-ratio: ${n(ge)}; --transition-timing-default: ${y.duration}s;`),nt(re,1,ot({f:!0,g:y.working&&!y.isSwiping,h:n(B)!=="closed"}),"p-bn1wva")}),g(t,se),_e()}ht(["click"]);function jh(t){iu(t,{children:(e,a)=>{Bh(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||Hc(jh,{target:document.getElementById("app")});export{bt as $,M as A,It as B,Bt as C,ls as D,ss as E,Cr as F,ln as G,ag as H,ve as I,Rt as J,Ia as K,La as L,Pa as M,fl as N,Ms as O,xe as P,qh as Q,Xn as R,Ze as S,Xh as T,Gh as U,mt as V,mu as W,_u as X,en as Y,yr as Z,zt as _,f as a,ga as a0,qg as a1,uo as a2,Vh as a3,Kh as a4,Oh as a5,Wh as a6,Me as a7,Qa as a8,Yh as a9,L as b,C as c,oe as d,Bn as e,k as f,n as g,lt as h,g as i,K as j,nt as k,ot as l,_e as m,A as n,ke as o,me as p,dt as q,ht as r,I as s,Pe as t,Jt as u,Zt as v,ft as w,Be as x,he as y,ze as z};
