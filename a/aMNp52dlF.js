import{p as P,J as C,h as g,r as J,u as Z,g as a,f as h,i as D,c as i,R as M,k as r,d as _,j as K,s as k,l as $,w as O,O as tt,o as et,t as H,K as z,E as at,m as nt}from"./aDxkqSyH1.js";import{N as rt}from"./aC678hjrZ.js";import{I as lt}from"./aCfOdKRPO.js";var ot=(o,t,n,s)=>{r(t,n.url,!0),s(!1)},st=(o,t,n,s,d)=>{if(a(t)&&a(n)){r(t,"");return}s.onChangeUrl(a(t)),d(!1)},it=h('<div class="a p-8gf699"><!> <div class="b p-8gf699"><button class="p-8gf699">Cancel</button> <button class="p-8gf699">Done</button></div></div>'),vt=(o,t)=>{t(!0)},ut=(o,t,n)=>{r(t,""),n.onDeleteUrl()},ct=h('<button class="d p-8gf699">Edit link</button> <button class="d p-8gf699">Delete link</button>',1),dt=(o,t)=>{t(!0)},ft=h('<button class="d p-8gf699">Add link</button>'),_t=h('<div class="c p-8gf699"><!></div>'),gt=h("<div><!></div>");function ht(o,t){P(t,!0);let n=C(t,"shownUrlInput",15),s=g(""),d=g(null),w=g(null),u=g(J(t.url));const p=l=>{r(s,""),r(u,l.target.value||"",!0);try{new URL(a(u))}catch{r(s,"Invalid URL")}};Z(()=>{n()&&a(d)?.focus()});var f=gt(),I=i(f);{var x=l=>{var m=it(),U=i(m);lt(U,{get value(){return a(u)},get error(){return a(s)},onInput:p,placeholder:"url",get ref(){return a(d)},set ref(c){r(d,c,!0)}});var N=k(U,2),b=i(N);b.__click=[ot,u,t,n];var v=k(b,2);v.__click=[st,u,s,t,n],_(l,m)},y=l=>{var m=_t(),U=i(m);{var N=v=>{var c=ct(),E=$(c);E.__click=[vt,n];var T=k(E,2);T.__click=[ut,u,t],_(v,c)},b=v=>{var c=ft();c.__click=[dt,n],_(v,c)};D(U,v=>{t.url?v(N):v(b,!1)})}_(l,m)};D(I,l=>{n()?l(x):l(y,!1)})}M(f,l=>r(w,l),()=>a(w)),_(o,f),K()}O(["click"]);const pt=(o,t,n)=>{a(t)&&(a(t).style.height="auto",a(t).style.height=a(t).scrollHeight+"px"),n(o.target.value.trim())},mt=(o,t)=>{t(o.target.value)};var bt=h("<span> </span>"),kt=h('<div class="h p-1cfj8bt"><!></div>'),It=h('<div class="a p-1cfj8bt"><div class="b"><div class="c"><!> <form><input class="d p-1cfj8bt" placeholder="Name"/></form> <textarea class="e p-1cfj8bt" placeholder="Note"></textarea></div></div> <div class="f g p-1cfj8bt"><!> <div class="i p-1cfj8bt"><!></div></div></div>');function Nt(o,t){P(t,!0);const{checkMobileSize:n}=tt();let s=C(t,"url",15,""),d=C(t,"name",15,""),w=C(t,"text",15,""),u=C(t,"tags",31,()=>J([])),p=g(null),f=g(!1),I=g(!1),x=g(null);const y=e=>{e.preventDefault(),a(p)&&a(p).focus()},l=e=>{e.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(a(f)&&(r(f,!1),e.preventDefault(),e.stopPropagation()),a(I)&&(r(I,!1),e.preventDefault(),e.stopPropagation()))};et(()=>(n()||a(x)?.focus(),document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)));const m=e=>{s(e)},U=()=>{s("")},N=e=>{u(e)};var b=It(),v=i(b),c=i(v),E=i(c);ht(E,{get url(){return s()},onChangeUrl:m,onDeleteUrl:U,get shownUrlInput(){return a(I)},set shownUrlInput(e){r(I,e,!0)}});var T=k(E,2),j=i(T);j.__input=[mt,d],M(j,e=>r(x,e),()=>a(x));var L=k(T,2);L.__input=[pt,p,w],M(L,e=>r(p,e),()=>a(p));var q=k(v,2),A=i(q);{var B=e=>{var S=kt(),V=i(S);{var W=R=>{var F=bt(),X=i(F);H(Y=>nt(X,`updated: ${Y??""}`),[()=>new Date(t.updatedAt).toLocaleString()]),_(R,F)};D(V,R=>{t.updatedAt&&R(W)})}_(e,S)};D(A,e=>{t.mode==="edit"&&e(B)})}var G=k(A,2),Q=i(G);rt(Q,{get selectedTags(){return u()},onChangeTags:N,get shownTagInput(){return a(f)},set shownTagInput(e){r(f,e,!0)}}),H(()=>{z(j,d()),z(L,w())}),at("submit",T,y),_(o,b),K()}O(["input"]);export{Nt as N};
