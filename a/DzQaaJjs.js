import{p as me,h as he,z as be,A as we,i as Ae,o as Pe,u as Se,g as z,j as ae,f as v,m as n,c as q,d as e,n as ke,l as W,r as c,H as K,w as P,s as I,B as L,q as u,P as xe,L as Ce}from"./DHWHZJHP.js";const M=()=>window.installPrompt;function ye(){const s=navigator.userAgent,S=/iPad|iPhone|iPod/.test(s);return S?!!S:!1}const N=()=>{const s=navigator.userAgent;return/android/i.test(s)},Q=()=>{const s=navigator.userAgent;return/chrome|crios/i.test(s)&&!/edge|edgios|edga/i.test(s)},ze=()=>{const s="serviceWorker"in navigator,S="onbeforeinstallprompt"in window;return s&&S},te=()=>{const s=navigator.userAgent;return!!(/Safari/.test(s)&&!/Chrome/.test(s)&&!/CriOS/.test(s)&&!/FxiOS/.test(s))};var Ie=v('<p class="message svelte-1uagzbf">App is already installed.</p>'),$e=v('<p class="message svelte-1uagzbf">For install app, select the share button and select "Add to Home Screen".</p>'),Be=v('<p class="message svelte-1uagzbf">Install app available on Safari.</p>'),We=v(`<p class="message svelte-1uagzbf">From the menu bar, choose File > Add to Dock. Or click the Share button in the Safari
				toolbar, then choose Add to Dock.</p>`),Oe=v('<p class="message svelte-1uagzbf">Installation is not supported in this browser. use Brave, Chrome or Edge.</p>'),Fe=v(`<p class="message svelte-1uagzbf">App is already installed or installation is not supported in this browser. use Brave,
					Chrome or Edge.</p>`),He=v('<p class="message svelte-1uagzbf">For better experience, install app from Chrome.</p>'),De=v(`<!> <p class="message svelte-1uagzbf">You can install app to have a better experience and more reliable storage or you can use it in
			your browser and install later.</p> <!> <div class="container svelte-1uagzbf"><!> <!></div>`,1),Ee=v('<!> <div class="loader svelte-1uagzbf"><!></div>',1),Le=v('<p class="message svelte-1uagzbf">Open the app from your device.</p>'),Re=v('<!> <!> <div class="container svelte-1uagzbf"><!> <!></div>',1),je=v('<div class="block svelte-1uagzbf"><!></div>');function Me(s,S){me(S,!0);const{pushStackPages:re,clearStackPages:se}=he(),{replace:U,clearHistoryStack:oe}=be(),{getAccount:V}=we(),{blockDialog:X}=Ae();let _=ae("idle"),O=ae(!1);const ne=async()=>{if("getInstalledRelatedApps"in navigator){const l=await navigator.getInstalledRelatedApps();console.log("relatedApps",l),W(O,l.some(i=>i.platform==="webapp"),!0)}},le=()=>{V()===void 0?re(xe.AccountSetup):se()},Z=()=>{le()},ie=async()=>{const l=M();try{l&&(W(_,"installing"),"onappinstalled"in window&&window.addEventListener("appinstalled",()=>{if(W(O,!0),!N()){X(!1),oe();const i=V();U(i===void 0?"/?stackPages=wellcome%2CinstallSuccess":"/?stackPages=installSuccess")}}),await l.prompt(),l.userChoice?.then(i=>{i.outcome==="accepted"?(window.installPrompt=null,N()&&setTimeout(()=>{z(O)?W(_,"success"):W(_,"idle")},5e3)):W(_,"idle")}))}catch(i){console.error("Error during install prompt:",i)}};Pe(()=>{ne()}),Se(()=>{X(z(_)==="installing")});var ee=je(),ce=q(ee);{var ve=l=>{var i=De(),R=c(i);K(R,{children:(a,r)=>{var p=P("install app");e(a,p)}});var j=I(R,4);{var T=a=>{var r=Ie();e(a,r)},m=a=>{var r=u(),p=c(r);{var y=d=>{var b=u(),t=c(b);{var f=o=>{var A=$e();e(o,A)},w=o=>{var A=Be();e(o,A)};n(t,o=>{te()?o(f):o(w,!1)})}e(d,b)},h=d=>{var b=u(),t=c(b);{var f=o=>{var A=We();e(o,A)},w=o=>{var A=u(),de=c(A);{var ue=B=>{var H=u(),Y=c(H);{var G=g=>{var E=Oe();e(g,E)},D=g=>{var E=Fe();e(g,E)};n(Y,g=>{ze()?g(D,!1):g(G)})}e(B,H)},fe=B=>{var H=u(),Y=c(H);{var G=D=>{var g=u(),E=c(g);{var ge=J=>{var _e=He();e(J,_e)};n(E,J=>{!Q()&&M()&&J(ge)})}e(D,g)};n(Y,D=>{N()&&D(G)},!0)}e(B,H)};n(de,B=>{M()?B(fe,!1):B(ue)},!0)}e(o,A)};n(t,o=>{te()?o(f):o(w,!1)},!0)}e(d,b)};n(p,d=>{ye()?d(y):d(h,!1)},!0)}e(a,r)};n(j,a=>{z(O)?a(T):a(m,!1)})}var k=I(j,2),x=q(k);{var F=a=>{L(a,{onClick:ie,fullWidth:!0,children:(r,p)=>{var y=P("install web app");e(r,y)},$$slots:{default:!0}})},C=a=>{var r=u(),p=c(r);{var y=h=>{L(h,{element:"a",target:"_blank",rel:"noopener noreferrer",href:`${window.location.origin}`,fullWidth:!0,children:(d,b)=>{var t=P("open app");e(d,t)},$$slots:{default:!0}})};n(p,h=>{z(O)&&h(y)},!0)}e(a,r)};n(x,a=>{M()?a(F):a(C,!1)})}var $=I(x,2);L($,{onClick:Z,fullWidth:!0,type:"secondary",children:(a,r)=>{var p=P("continue in browser");e(a,p)},$$slots:{default:!0}}),e(l,i)},pe=l=>{var i=u(),R=c(i);{var j=m=>{var k=Ee(),x=c(k);K(x,{children:($,a)=>{var r=P("installing app...");e($,r)}});var F=I(x,2),C=q(F);Ce(C,{}),e(m,k)},T=m=>{var k=u(),x=c(k);{var F=C=>{var $=Re(),a=c($);K(a,{children:(t,f)=>{var w=P("app installed successfully!");e(t,w)}});var r=I(a,2);{var p=t=>{var f=Le();e(t,f)};n(r,t=>{Q()||t(p)})}var y=I(r,2),h=q(y);{var d=t=>{L(t,{element:"a",target:"_blank",rel:"noopener noreferrer",href:`${window.location.origin}`,fullWidth:!0,children:(f,w)=>{var o=P("open app");e(f,o)},$$slots:{default:!0}})};n(h,t=>{Q()&&t(d)})}var b=I(h,2);L(b,{onClick:Z,fullWidth:!0,type:"secondary",children:(t,f)=>{var w=P("continue in browser");e(t,w)},$$slots:{default:!0}}),e(C,$)};n(x,C=>{z(_)==="success"&&C(F)},!0)}e(m,k)};n(R,m=>{z(_)==="installing"?m(j):m(T,!1)},!0)}e(l,i)};n(ce,l=>{z(_)==="idle"?l(ve):l(pe,!1)})}e(s,ee),ke()}export{Me as default};
