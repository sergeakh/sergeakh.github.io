import{p as W,J as C,h as g,r as j,u as Z,g as a,f as p,i as D,c as v,T as S,k as n,d as f,j as J,s as b,l as $,w as K,R as tt,o as et,K as at,M as rt,t as B,N as P,E as nt,m as lt}from"./aC1xpSvD-.js";import{N as st}from"./a9vnhDBJf.js";import{I as ot}from"./aDq3vB9Uh.js";var vt=(s,t,r,o)=>{n(t,r.url,!0),o(!1)},it=(s,t,r,o,d)=>{if(a(t)&&a(r)){n(t,"");return}o.onChangeUrl(a(t)),d(!1)},ut=p('<div class="wrapper svelte-w8w68w"><!> <div class="containerButtons svelte-w8w68w"><button class="svelte-w8w68w">Cancel</button> <button class="svelte-w8w68w">Done</button></div></div>'),ct=(s,t)=>{t(!0)},dt=(s,t,r)=>{n(t,""),r.onDeleteUrl()},_t=p('<button class="button svelte-w8w68w">Edit link</button> <button class="button svelte-w8w68w">Delete link</button>',1),ft=(s,t)=>{t(!0)},gt=p('<button class="button svelte-w8w68w">Add link</button>'),pt=p('<div class="wrapperButtons svelte-w8w68w"><!></div>'),mt=p("<div><!></div>");function ht(s,t){W(t,!0);let r=C(t,"shownUrlInput",15),o=g(""),d=g(null),I=g(null),u=g(j(t.url));const m=l=>{n(o,""),n(u,l.target.value||"",!0);try{new URL(a(u))}catch{n(o,"Invalid URL")}};Z(()=>{r()&&a(d)?.focus()});var _=mt(),k=v(_);{var U=l=>{var h=ut(),x=v(h);ot(x,{get value(){return a(u)},get error(){return a(o)},onInput:m,placeholder:"url",get ref(){return a(d)},set ref(c){n(d,c,!0)}});var N=b(x,2),w=v(N);w.__click=[vt,u,t,r];var i=b(w,2);i.__click=[it,u,o,t,r],f(l,h)},y=l=>{var h=pt(),x=v(h);{var N=i=>{var c=_t(),T=$(c);T.__click=[ct,r];var E=b(T,2);E.__click=[dt,u,t],f(i,c)},w=i=>{var c=gt();c.__click=[ft,r],f(i,c)};D(x,i=>{t.url?i(N):i(w,!1)})}f(l,h)};D(k,l=>{r()?l(U):l(y,!1)})}S(_,l=>n(I,l),()=>a(I)),f(s,_),J()}K(["click"]);const wt=(s,t,r)=>{a(t)&&(a(t).style.height="auto",a(t).style.height=a(t).scrollHeight+"px"),r(s.target.value.trim())},bt=(s,t)=>{t(s.target.value)};var kt=p("<span> </span>"),xt=p('<div class="dateInfo svelte-t8fgpr"><!></div>'),It=p('<div class="form svelte-t8fgpr"><div class="scrollWrapper"><div class="formFields"><!> <form><input class="inputName svelte-t8fgpr" placeholder="Name"/></form> <textarea class="textarea svelte-t8fgpr" placeholder="Note"></textarea></div></div> <div><!> <div class="formTagsWrapper svelte-t8fgpr"><!></div></div></div>');function Et(s,t){W(t,!0);const{checkMobileSize:r}=tt();let o=C(t,"url",15,""),d=C(t,"name",15,""),I=C(t,"text",15,""),u=C(t,"tags",31,()=>j([])),m=g(null),_=g(!1),k=g(!1),U=g(null);const y=e=>{e.preventDefault(),a(m)&&a(m).focus()},l=e=>{e.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement)&&(a(_)&&(n(_,!1),e.preventDefault(),e.stopPropagation()),a(k)&&(n(k,!1),e.preventDefault(),e.stopPropagation()))};et(()=>(r()||a(U)?.focus(),document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)));const h=e=>{o(e)},x=()=>{o("")},N=e=>{u(e)};var w=It(),i=v(w),c=v(i),T=v(c);ht(T,{get url(){return o()},onChangeUrl:h,onDeleteUrl:x,get shownUrlInput(){return a(k)},set shownUrlInput(e){n(k,e,!0)}});var E=b(T,2),L=v(E);L.__input=[bt,d],S(L,e=>n(U,e),()=>a(U));var M=b(E,2);M.__input=[wt,m,I],S(M,e=>n(m,e),()=>a(m));var A=b(i,2);at(A,1,rt(["bottom","bottomSpace"]),"svelte-t8fgpr");var F=v(A);{var q=e=>{var H=xt(),Q=v(H);{var V=R=>{var z=kt(),X=v(z);B(Y=>lt(X,`updated: ${Y??""}`),[()=>new Date(t.updatedAt).toLocaleString()]),f(R,z)};D(Q,R=>{t.updatedAt&&R(V)})}f(e,H)};D(F,e=>{t.mode==="edit"&&e(q)})}var G=b(F,2),O=v(G);st(O,{get selectedTags(){return u()},onChangeTags:N,get shownTagInput(){return a(_)},set shownTagInput(e){n(_,e,!0)}}),B(()=>{P(L,d()),P(M,I())}),nt("submit",E,y),f(s,w),J()}K(["input"]);export{Et as N};
