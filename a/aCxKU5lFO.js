const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["a/aCdVbeaSz.js","a/aDJGxTJuX.css","a/aD3cHKSab.js","a/a9q_jSmK4.js","a/abA9hIFUQ.js","a/aDf0fAQHq.css","a/aBmUs5kj-.js","a/aGKJynjgv.css","a/aDNlNpFPG.js","a/aBMjxyC5e.css","a/aDWTTTNhj.js","a/aDgPIJwnn.css","a/aBdtoG3um.js","a/aB_UsPGEu.css","a/aBJSVqIT3.js","a/aCpa8lgv9.js","a/aDm_nMAGj.js","a/aj0KFa_-O.css","a/ahu7yjlv8.css","a/aCLVqz7hD.js","a/aB_UFZUKy.js","a/avn0fNL4C.js","a/aEZ_l8VDb.css","a/aB_Zcg-eh.css","a/aC-Mx_t1i.css","a/a8SbUDwiq.js","a/aBs6Vrlio.css","a/aCK4i7Tqd.js","a/aMFDzG-H5.js","a/aDWUfwQ_G.css","a/aB0gnAdLT.css","a/aDduiWcfv.js","a/aw3_6eoJ1.css","a/aIQq8O9wI.js","a/aCJkK19aw.css","a/aBaG9hEsO.js","a/aDlxBpJjD.css","a/a51qlMAKC.js","a/aA3eNkQ_5.js","a/aDp4shRW_.css","a/aCK7xzBjo.js","a/aDaxC3cdO.css","a/aZh3CzzMl.js","a/aBib31qW-.css","a/a72QjXkQi.js","a/aBr15UghP.css","a/aDvDWnCSc.js","a/aCTzb1Nvm.css"])))=>i.map(i=>d[i]);
var ai=Object.defineProperty;var Jr=t=>{throw TypeError(t)};var ri=(t,e,n)=>e in t?ai(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ut=(t,e,n)=>ri(t,typeof e!="symbol"?e+"":e,n),sr=(t,e,n)=>e.has(t)||Jr("Cannot "+n);var M=(t,e,n)=>(sr(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>e.has(t)?Jr("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),fe=(t,e,n,a)=>(sr(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n),Me=(t,e,n)=>(sr(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();const yo=!1;var xr=Array.isArray,oi=Array.prototype.indexOf,Pr=Array.from,fr=Object.defineProperty,Un=Object.getOwnPropertyDescriptor,bo=Object.getOwnPropertyDescriptors,si=Object.prototype,ii=Array.prototype,Tr=Object.getPrototypeOf,Qr=Object.isExtensible;const xe=()=>{};function li(t){return typeof t?.then=="function"}function ci(t){return t()}function vr(t){for(var e=0;e<t.length;e++)t[e]()}function So(){var t,e,n=new Promise((a,o)=>{t=a,e=o});return{promise:n,resolve:t,reject:e}}function ui(t,e,n=!1){return t===void 0?n?e():e:t}const Je=2,Ar=4,Va=8,Gt=16,Xt=32,Tn=64,Ua=128,tt=1024,ct=2048,cn=4096,vt=8192,Vt=16384,Nr=32768,sn=65536,$r=1<<17,di=1<<18,na=1<<19,Co=1<<20,mt=256,Ia=512,Oa=32768,hr=1<<21,Mr=1<<22,En=1<<23,kn=Symbol("$state"),fi=Symbol("legacy props"),vi=Symbol(""),Vn=new class extends Error{constructor(){super(...arguments);ut(this,"name","StaleReactionError");ut(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function Eo(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function hi(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function gi(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function pi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function _i(t){throw new Error("https://svelte.dev/e/effect_orphan")}function mi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function wi(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function yi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function bi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Si(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ci(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Wa=1,qa=2,ko=4,Ei=8,ki=16,Di=1,xi=2,Pi=4,Ti=8,Ai=16,Ni=1,Mi=2,Ge=Symbol(),Li="http://www.w3.org/1999/xhtml";function Ii(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}let Oi=!1;function Do(t){return t===this.v}function Bi(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function xo(t){return!Bi(t,this.v)}let aa=!1,Ri=!1;function zi(){aa=!0}let Ae=null;function Qn(t){Ae=t}function He(t){return Po().get(t)}function je(t,e){return Po().set(t,e),e}function oe(t,e=!1,n){Ae={p:Ae,c:null,e:null,s:t,x:null,l:aa&&!e?{s:null,u:null,$:[]}:null}}function se(t){var e=Ae,n=e.e;if(n!==null){e.e=null;for(var a of n)Yo(a)}return t!==void 0&&(e.x=t),Ae=e.p,t??{}}function ra(){return!aa||Ae!==null&&Ae.l===null}function Po(t){return Ae===null&&Eo(),Ae.c??(Ae.c=new Map(Fi(Ae)||void 0))}function Fi(t){let e=t.p;for(;e!==null;){const n=e.c;if(n!==null)return n;e=e.p}return null}let wn=[];function To(){var t=wn;wn=[],vr(t)}function An(t){if(wn.length===0&&!Wn){var e=wn;queueMicrotask(()=>{e===wn&&To()})}wn.push(t)}function Hi(){for(;wn.length>0;)To()}const ji=new WeakMap;function Ao(t){var e=Ce;if(e===null)return Se.f|=En,t;if((e.f&Nr)===0){if((e.f&Ua)===0)throw!e.parent&&t instanceof Error&&No(t),t;e.b.error(t)}else $n(t,e)}function $n(t,e){for(;e!==null;){if((e.f&Ua)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t instanceof Error&&No(t),t}function No(t){const e=ji.get(t);e&&(fr(t,"message",{value:e.message}),fr(t,"stack",{value:e.stack}))}const Pa=new Set;let Te=null,Aa=null,Et=null,gr=new Set,Lt=[],Ka=null,pr=!1,Wn=!1;var Yn,Gn,Xn,yn,pa,Zn,Jn,Xe,_r,_n,mr,Mo;const Fa=class Fa{constructor(){De(this,Xe);ut(this,"committed",!1);ut(this,"current",new Map);De(this,Yn,new Map);De(this,Gn,new Set);De(this,Xn,0);De(this,yn,0);De(this,pa,null);De(this,Zn,[]);De(this,Jn,[]);ut(this,"skipped_effects",new Set)}process(e){Lt=[],Aa=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const a of e)Me(this,Xe,_r).call(this,a,n);Me(this,Xe,mr).call(this),M(this,yn)>0?(Me(this,Xe,_n).call(this,n.effects),Me(this,Xe,_n).call(this,n.render_effects),Me(this,Xe,_n).call(this,n.block_effects)):(Aa=this,Te=null,eo(n.render_effects),eo(n.effects),Aa=null),Et=null}capture(e,n){M(this,Yn).has(e)||M(this,Yn).set(e,n),this.current.set(e,e.v),Et?.set(e,e.v)}activate(){Te=this}deactivate(){Te=null,Et=null}flush(){if(Lt.length>0){if(this.activate(),Io(),Te!==null&&Te!==this)return}else Me(this,Xe,mr).call(this);this.deactivate();for(const e of gr)if(gr.delete(e),e(),Te!==null)break}increment(e){fe(this,Xn,M(this,Xn)+1),e&&fe(this,yn,M(this,yn)+1)}decrement(e){fe(this,Xn,M(this,Xn)-1),e&&fe(this,yn,M(this,yn)-1);for(const n of M(this,Zn))nt(n,ct),xn(n);for(const n of M(this,Jn))nt(n,cn),xn(n);fe(this,Zn,[]),fe(this,Jn,[]),this.flush()}add_callback(e){M(this,Gn).add(e)}settled(){return(M(this,pa)??fe(this,pa,So())).promise}static ensure(){if(Te===null){const e=Te=new Fa;Pa.add(Te),Wn||Fa.enqueue(()=>{Te===e&&e.flush()})}return Te}static enqueue(e){An(e)}apply(){}};Yn=new WeakMap,Gn=new WeakMap,Xn=new WeakMap,yn=new WeakMap,pa=new WeakMap,Zn=new WeakMap,Jn=new WeakMap,Xe=new WeakSet,_r=function(e,n){e.f^=tt;for(var a=e.first;a!==null;){var o=a.f,s=(o&(Xt|Tn))!==0,i=s&&(o&tt)!==0,l=i||(o&vt)!==0||this.skipped_effects.has(a);if((a.f&Ua)!==0&&a.b?.is_pending()&&(n={parent:n,effect:a,effects:[],render_effects:[],block_effects:[]}),!l&&a.fn!==null){s?a.f^=tt:(o&Ar)!==0?n.effects.push(a):Za(a)&&((a.f&Gt)!==0&&n.block_effects.push(a),za(a));var c=a.first;if(c!==null){a=c;continue}}var u=a.parent;for(a=a.next;a===null&&u!==null;)u===n.effect&&(Me(this,Xe,_n).call(this,n.effects),Me(this,Xe,_n).call(this,n.render_effects),Me(this,Xe,_n).call(this,n.block_effects),n=n.parent),a=u.next,u=u.parent}},_n=function(e){for(const n of e)((n.f&ct)!==0?M(this,Zn):M(this,Jn)).push(n),nt(n,tt)},mr=function(){if(M(this,yn)===0){for(const e of M(this,Gn))e();M(this,Gn).clear()}M(this,Xn)===0&&Me(this,Xe,Mo).call(this)},Mo=function(){var o;if(Pa.size>1){M(this,Yn).clear();var e=Et,n=!0,a={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Pa){if(s===this){n=!1;continue}const i=[];for(const[c,u]of this.current){if(s.current.has(c))if(n&&u!==s.current.get(c))s.current.set(c,u);else continue;i.push(c)}if(i.length===0)continue;const l=[...s.current.keys()].filter(c=>!this.current.has(c));if(l.length>0){const c=new Set,u=new Map;for(const f of i)Oo(f,l,c,u);if(Lt.length>0){Te=s,s.apply();for(const f of Lt)Me(o=s,Xe,_r).call(o,f,a);Lt=[],s.deactivate()}}}Te=null,Et=e}this.committed=!0,Pa.delete(this),M(this,pa)?.resolve()};let jt=Fa;function Lo(t){var e=Wn;Wn=!0;try{for(var n;;){if(Hi(),Lt.length===0&&(Te?.flush(),Lt.length===0))return Ka=null,n;Io()}}finally{Wn=e}}function Io(){var t=Kn;pr=!0;try{var e=0;for(ao(!0);Lt.length>0;){var n=jt.ensure();if(e++>1e3){var a,o;Vi()}n.process(Lt),an.clear()}}finally{pr=!1,ao(t),Ka=null}}function Vi(){try{mi()}catch(t){$n(t,Ka)}}let zt=null;function eo(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var a=t[n++];if((a.f&(Vt|vt))===0&&Za(a)&&(zt=new Set,za(a),a.deps===null&&a.first===null&&a.nodes_start===null&&(a.teardown===null&&a.ac===null?Zo(a):a.fn=null),zt?.size>0)){an.clear();for(const o of zt){if((o.f&(Vt|vt))!==0)continue;const s=[o];let i=o.parent;for(;i!==null;)zt.has(i)&&(zt.delete(i),s.push(i)),i=i.parent;for(let l=s.length-1;l>=0;l--){const c=s[l];(c.f&(Vt|vt))===0&&za(c)}}zt.clear()}}zt=null}}function Oo(t,e,n,a){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const o of t.reactions){const s=o.f;(s&Je)!==0?Oo(o,e,n,a):(s&(Mr|Gt))!==0&&(s&ct)===0&&Bo(o,e,a)&&(nt(o,ct),xn(o))}}function Bo(t,e,n){const a=n.get(t);if(a!==void 0)return a;if(t.deps!==null)for(const o of t.deps){if(e.includes(o))return!0;if((o.f&Je)!==0&&Bo(o,e,n))return n.set(o,!0),!0}return n.set(t,!1),!1}function xn(t){for(var e=Ka=t;e.parent!==null;){e=e.parent;var n=e.f;if(pr&&e===Ce&&(n&Gt)!==0)return;if((n&(Tn|Xt))!==0){if((n&tt)===0)return;e.f^=tt}}Lt.push(e)}function Ui(t){let e=0,n=Kt(0),a;return()=>{al()&&(r(n),Xa(()=>(e===0&&(a=Bt(()=>t(()=>da(n)))),e+=1,()=>{An(()=>{e-=1,e===0&&(a?.(),a=void 0,da(n))})})))}}var Wi=sn|na|Ua;function qi(t,e,n){new Ki(t,e,n)}var gt,pt,Dr,Tt,bn,At,_t,st,Nt,Ft,$t,Sn,en,Cn,tn,Ha,ja,We,Yi,Gi,wr,Na,Ma,yr;class Ki{constructor(e,n,a){De(this,We);ut(this,"parent");De(this,gt,!1);De(this,pt);De(this,Dr,null);De(this,Tt);De(this,bn);De(this,At);De(this,_t,null);De(this,st,null);De(this,Nt,null);De(this,Ft,null);De(this,$t,null);De(this,Sn,0);De(this,en,0);De(this,Cn,!1);De(this,tn,null);De(this,Ha,()=>{M(this,tn)&&Ut(M(this,tn),M(this,Sn))});De(this,ja,Ui(()=>(fe(this,tn,Kt(M(this,Sn))),()=>{fe(this,tn,null)})));fe(this,pt,e),fe(this,Tt,n),fe(this,bn,a),this.parent=Ce.b,fe(this,gt,!!M(this,Tt).pending),fe(this,At,oa(()=>{Ce.b=this;{var o=Me(this,We,wr).call(this);try{fe(this,_t,Ct(()=>a(o)))}catch(s){this.error(s)}M(this,en)>0?Me(this,We,Ma).call(this):fe(this,gt,!1)}return()=>{M(this,$t)?.remove()}},Wi))}is_pending(){return M(this,gt)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!M(this,Tt).pending}update_pending_count(e){Me(this,We,yr).call(this,e),fe(this,Sn,M(this,Sn)+e),gr.add(M(this,Ha))}get_effect_pending(){return M(this,ja).call(this),r(M(this,tn))}error(e){var n=M(this,Tt).onerror;let a=M(this,Tt).failed;if(M(this,Cn)||!n&&!a)throw e;M(this,_t)&&(lt(M(this,_t)),fe(this,_t,null)),M(this,st)&&(lt(M(this,st)),fe(this,st,null)),M(this,Nt)&&(lt(M(this,Nt)),fe(this,Nt,null));var o=!1,s=!1;const i=()=>{if(o){Ii();return}o=!0,s&&Ci(),jt.ensure(),fe(this,Sn,0),M(this,Nt)!==null&&qn(M(this,Nt),()=>{fe(this,Nt,null)}),fe(this,gt,this.has_pending_snippet()),fe(this,_t,Me(this,We,Na).call(this,()=>(fe(this,Cn,!1),Ct(()=>M(this,bn).call(this,M(this,pt)))))),M(this,en)>0?Me(this,We,Ma).call(this):fe(this,gt,!1)};var l=Se;try{it(null),s=!0,n?.(e,i),s=!1}catch(c){$n(c,M(this,At)&&M(this,At).parent)}finally{it(l)}a&&An(()=>{fe(this,Nt,Me(this,We,Na).call(this,()=>{jt.ensure(),fe(this,Cn,!0);try{return Ct(()=>{a(M(this,pt),()=>e,()=>i)})}catch(c){return $n(c,M(this,At).parent),null}finally{fe(this,Cn,!1)}}))})}}gt=new WeakMap,pt=new WeakMap,Dr=new WeakMap,Tt=new WeakMap,bn=new WeakMap,At=new WeakMap,_t=new WeakMap,st=new WeakMap,Nt=new WeakMap,Ft=new WeakMap,$t=new WeakMap,Sn=new WeakMap,en=new WeakMap,Cn=new WeakMap,tn=new WeakMap,Ha=new WeakMap,ja=new WeakMap,We=new WeakSet,Yi=function(){try{fe(this,_t,Ct(()=>M(this,bn).call(this,M(this,pt))))}catch(e){this.error(e)}fe(this,gt,!1)},Gi=function(){const e=M(this,Tt).pending;e&&(fe(this,st,Ct(()=>e(M(this,pt)))),jt.enqueue(()=>{var n=Me(this,We,wr).call(this);fe(this,_t,Me(this,We,Na).call(this,()=>(jt.ensure(),Ct(()=>M(this,bn).call(this,n))))),M(this,en)>0?Me(this,We,Ma).call(this):(qn(M(this,st),()=>{fe(this,st,null)}),fe(this,gt,!1))}))},wr=function(){var e=M(this,pt);return M(this,gt)&&(fe(this,$t,ln()),M(this,pt).before(M(this,$t)),e=M(this,$t)),e},Na=function(e){var n=Ce,a=Se,o=Ae;It(M(this,At)),it(M(this,At)),Qn(M(this,At).ctx);try{return e()}catch(s){return Ao(s),null}finally{It(n),it(a),Qn(o)}},Ma=function(){const e=M(this,Tt).pending;M(this,_t)!==null&&(fe(this,Ft,document.createDocumentFragment()),M(this,Ft).append(M(this,$t)),$o(M(this,_t),M(this,Ft))),M(this,st)===null&&fe(this,st,Ct(()=>e(M(this,pt))))},yr=function(e){var n;if(!this.has_pending_snippet()){this.parent&&Me(n=this.parent,We,yr).call(n,e);return}fe(this,en,M(this,en)+e),M(this,en)===0&&(fe(this,gt,!1),M(this,st)&&qn(M(this,st),()=>{fe(this,st,null)}),M(this,Ft)&&(M(this,pt).before(M(this,Ft)),fe(this,Ft,null)))};function Xi(t,e,n){const a=ra()?wa:Ya;if(e.length===0){n(t.map(a));return}var o=Te,s=Ce,i=Ro();Promise.all(e.map(l=>Zi(l))).then(l=>{i();try{n([...t.map(a),...l])}catch(c){(s.f&Vt)===0&&$n(c,s)}o?.deactivate(),Ba()}).catch(l=>{$n(l,s)})}function Ro(){var t=Ce,e=Se,n=Ae,a=Te;return function(){It(t),it(e),Qn(n),a?.activate()}}function Ba(){It(null),it(null),Qn(null)}function wa(t){var e=Je|ct,n=Se!==null&&(Se.f&Je)!==0?Se:null;return Ce===null||n!==null&&(n.f&mt)!==0?e|=mt:Ce.f|=na,{ctx:Ae,deps:null,effects:null,equals:Do,f:e,fn:t,reactions:null,rv:0,v:Ge,wv:0,parent:n??Ce,ac:null}}function Zi(t,e){let n=Ce;n===null&&hi();var a=n.b,o=void 0,s=Kt(Ge),i=!Se,l=new Map;return il(()=>{var c=So();o=c.promise;try{Promise.resolve(t()).then(c.resolve,c.reject).then(()=>{u===Te&&u.committed&&u.deactivate(),Ba()})}catch(v){c.reject(v),Ba()}var u=Te;if(i){var f=!a.is_pending();a.update_pending_count(1),u.increment(f),l.get(u)?.reject(Vn),l.delete(u),l.set(u,c)}const d=(v,m=void 0)=>{if(u.activate(),m)m!==Vn&&(s.f|=En,Ut(s,m));else{(s.f&En)!==0&&(s.f^=En),Ut(s,v);for(const[h,y]of l){if(l.delete(h),h===u)break;y.reject(Vn)}}i&&(a.update_pending_count(-1),u.decrement(f))};c.promise.then(d,v=>d(null,v||"unknown"))}),Ko(()=>{for(const c of l.values())c.reject(Vn)}),new Promise(c=>{function u(f){function d(){f===o?c(s):u(o)}f.then(d,d)}u(o)})}function L(t){const e=wa(t);return es(e),e}function Ya(t){const e=wa(t);return e.equals=xo,e}function zo(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)lt(e[n])}}function Ji(t){for(var e=t.parent;e!==null;){if((e.f&Je)===0)return e;e=e.parent}return null}function Lr(t){var e,n=Ce;It(Ji(t));try{t.f&=~Oa,zo(t),e=rs(t)}finally{It(n)}return e}function Fo(t){var e=Lr(t);if(t.equals(e)||(t.v=e,t.wv=ns()),!Nn)if(Et!==null)Et.set(t,t.v);else{var n=(nn||(t.f&mt)!==0)&&t.deps!==null?cn:tt;nt(t,n)}}const an=new Map;function Kt(t,e){var n={f:0,v:t,reactions:null,equals:Do,rv:0,wv:0};return n}function W(t,e){const n=Kt(t);return es(n),n}function br(t,e=!1,n=!0){var o;const a=Kt(t);return e||(a.equals=xo),aa&&n&&Ae!==null&&Ae.l!==null&&((o=Ae.l).s??(o.s=[])).push(a),a}function g(t,e,n=!1){Se!==null&&(!kt||(Se.f&$r)!==0)&&ra()&&(Se.f&(Je|Gt|Mr|$r))!==0&&!Wt?.includes(t)&&Si();let a=n?Ze(e):e;return Ut(t,a)}function Ut(t,e){if(!t.equals(e)){var n=t.v;Nn?an.set(t,e):an.set(t,n),t.v=e;var a=jt.ensure();a.capture(t,n),(t.f&Je)!==0&&((t.f&ct)!==0&&Lr(t),nt(t,(t.f&mt)===0?tt:cn)),t.wv=ns(),Ho(t,ct),ra()&&Ce!==null&&(Ce.f&tt)!==0&&(Ce.f&(Xt|Tn))===0&&(ht===null?ul([t]):ht.push(t))}return e}function da(t){g(t,t.v+1)}function Ho(t,e){var n=t.reactions;if(n!==null)for(var a=ra(),o=n.length,s=0;s<o;s++){var i=n[s],l=i.f;if(!(!a&&i===Ce)){var c=(l&ct)===0;c&&nt(i,e),(l&Je)!==0?(l&Oa)===0&&(i.f|=Oa,Ho(i,cn)):c&&((l&Gt)!==0&&zt!==null&&zt.add(i),xn(i))}}}function Ze(t){if(typeof t!="object"||t===null||kn in t)return t;const e=Tr(t);if(e!==si&&e!==ii)return t;var n=new Map,a=xr(t),o=W(0),s=Dn,i=l=>{if(Dn===s)return l();var c=Se,u=Dn;it(null),oo(s);var f=l();return it(c),oo(u),f};return a&&n.set("length",W(t.length)),new Proxy(t,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&yi();var f=n.get(c);return f===void 0?f=i(()=>{var d=W(u.value);return n.set(c,d),d}):g(f,u.value,!0),!0},deleteProperty(l,c){var u=n.get(c);if(u===void 0){if(c in l){const f=i(()=>W(Ge));n.set(c,f),da(o)}}else g(u,Ge),da(o);return!0},get(l,c,u){if(c===kn)return t;var f=n.get(c),d=c in l;if(f===void 0&&(!d||Un(l,c)?.writable)&&(f=i(()=>{var m=Ze(d?l[c]:Ge),h=W(m);return h}),n.set(c,f)),f!==void 0){var v=r(f);return v===Ge?void 0:v}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var f=n.get(c);f&&(u.value=r(f))}else if(u===void 0){var d=n.get(c),v=d?.v;if(d!==void 0&&v!==Ge)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return u},has(l,c){if(c===kn)return!0;var u=n.get(c),f=u!==void 0&&u.v!==Ge||Reflect.has(l,c);if(u!==void 0||Ce!==null&&(!f||Un(l,c)?.writable)){u===void 0&&(u=i(()=>{var v=f?Ze(l[c]):Ge,m=W(v);return m}),n.set(c,u));var d=r(u);if(d===Ge)return!1}return f},set(l,c,u,f){var d=n.get(c),v=c in l;if(a&&c==="length")for(var m=u;m<d.v;m+=1){var h=n.get(m+"");h!==void 0?g(h,Ge):m in l&&(h=i(()=>W(Ge)),n.set(m+"",h))}if(d===void 0)(!v||Un(l,c)?.writable)&&(d=i(()=>W(void 0)),g(d,Ze(u)),n.set(c,d));else{v=d.v!==Ge;var y=i(()=>Ze(u));g(d,y)}var w=Reflect.getOwnPropertyDescriptor(l,c);if(w?.set&&w.set.call(f,u),!v){if(a&&typeof c=="string"){var x=n.get("length"),A=Number(c);Number.isInteger(A)&&A>=x.v&&g(x,A+1)}da(o)}return!0},ownKeys(l){r(o);var c=Reflect.ownKeys(l).filter(d=>{var v=n.get(d);return v===void 0||v.v!==Ge});for(var[u,f]of n)f.v!==Ge&&!(u in l)&&c.push(u);return c},setPrototypeOf(){bi()}})}var to,jo,Vo,Uo;function Qi(){if(to===void 0){to=window,jo=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Vo=Un(e,"firstChild").get,Uo=Un(e,"nextSibling").get,Qr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Qr(n)&&(n.__t=void 0)}}function ln(t=""){return document.createTextNode(t)}function ea(t){return Vo.call(t)}function ya(t){return Uo.call(t)}function b(t,e){return ea(t)}function z(t,e=!1){{var n=ea(t);return n instanceof Comment&&n.data===""?ya(n):n}}function H(t,e=1,n=!1){let a=t;for(;e--;)a=ya(a);return a}function $i(t){t.textContent=""}function Wo(){return!1}let no=!1;function el(){no||(no=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function Ga(t){var e=Se,n=Ce;it(null),It(null);try{return t()}finally{it(e),It(n)}}function tl(t,e,n,a=n){t.addEventListener(e,()=>Ga(n));const o=t.__on_r;o?t.__on_r=()=>{o(),a(!0)}:t.__on_r=()=>a(!0),el()}function qo(t){Ce===null&&Se===null&&_i(),Se!==null&&(Se.f&mt)!==0&&Ce===null&&pi(),Nn&&gi()}function nl(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Ot(t,e,n,a=!0){var o=Ce;o!==null&&(o.f&vt)!==0&&(t|=vt);var s={ctx:Ae,deps:null,nodes_start:null,nodes_end:null,f:t|ct,first:null,fn:e,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{za(s),s.f|=Nr}catch(c){throw lt(s),c}else e!==null&&xn(s);if(a){var i=s;if(n&&i.deps===null&&i.teardown===null&&i.nodes_start===null&&i.first===i.last&&(i.f&na)===0&&(i=i.first,(t&Gt)!==0&&(t&sn)!==0&&i!==null&&(i.f|=sn)),i!==null&&(i.parent=o,o!==null&&nl(i,o),Se!==null&&(Se.f&Je)!==0&&(t&Tn)===0)){var l=Se;(l.effects??(l.effects=[])).push(i)}}return s}function al(){return Se!==null&&!kt}function Ko(t){const e=Ot(Va,null,!1);return nt(e,tt),e.teardown=t,e}function Le(t){qo();var e=Ce.f,n=!Se&&(e&Xt)!==0&&(e&Nr)===0;if(n){var a=Ae;(a.e??(a.e=[])).push(t)}else return Yo(t)}function Yo(t){return Ot(Ar|Co,t,!1)}function rl(t){return qo(),Ot(Va|Co,t,!0)}function ol(t){jt.ensure();const e=Ot(Tn|na,t,!0);return(n={})=>new Promise(a=>{n.outro?qn(e,()=>{lt(e),a(void 0)}):(lt(e),a(void 0))})}function sl(t){return Ot(Ar,t,!1)}function il(t){return Ot(Mr|na,t,!0)}function Xa(t,e=0){return Ot(Va|e,t,!0)}function de(t,e=[],n=[]){Xi(e,n,a=>{Ot(Va,()=>t(...a.map(r)),!0)})}function oa(t,e=0){var n=Ot(Gt|e,t,!0);return n}function Ct(t,e=!0){return Ot(Xt|na,t,!0,e)}function Go(t){var e=t.teardown;if(e!==null){const n=Nn,a=Se;ro(!0),it(null);try{e.call(null)}finally{ro(n),it(a)}}}function Xo(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const o=n.ac;o!==null&&Ga(()=>{o.abort(Vn)});var a=n.next;(n.f&Tn)!==0?n.parent=null:lt(n,e),n=a}}function ll(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Xt)===0&&lt(e),e=n}}function lt(t,e=!0){var n=!1;(e||(t.f&di)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(cl(t.nodes_start,t.nodes_end),n=!0),Xo(t,e&&!n),Ra(t,0),nt(t,Vt);var a=t.transitions;if(a!==null)for(const s of a)s.stop();Go(t);var o=t.parent;o!==null&&o.first!==null&&Zo(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function cl(t,e){for(;t!==null;){var n=t===e?null:ya(t);t.remove(),t=n}}function Zo(t){var e=t.parent,n=t.prev,a=t.next;n!==null&&(n.next=a),a!==null&&(a.prev=n),e!==null&&(e.first===t&&(e.first=a),e.last===t&&(e.last=n))}function qn(t,e,n=!0){var a=[];Ir(t,a,!0),Jo(a,()=>{n&&lt(t),e&&e()})}function Jo(t,e){var n=t.length;if(n>0){var a=()=>--n||e();for(var o of t)o.out(a)}else e()}function Ir(t,e,n){if((t.f&vt)===0){if(t.f^=vt,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var a=t.first;a!==null;){var o=a.next,s=(a.f&sn)!==0||(a.f&Xt)!==0&&(t.f&Gt)!==0;Ir(a,e,s?n:!1),a=o}}}function Or(t){Qo(t,!0)}function Qo(t,e){if((t.f&vt)!==0){t.f^=vt,(t.f&tt)===0&&(nt(t,ct),xn(t));for(var n=t.first;n!==null;){var a=n.next,o=(n.f&sn)!==0||(n.f&Xt)!==0;Qo(n,o?e:!1),n=a}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function $o(t,e){for(var n=t.nodes_start,a=t.nodes_end;n!==null;){var o=n===a?null:ya(n);e.append(n),n=o}}let Kn=!1;function ao(t){Kn=t}let Nn=!1;function ro(t){Nn=t}let Se=null,kt=!1;function it(t){Se=t}let Ce=null;function It(t){Ce=t}let Wt=null;function es(t){Se!==null&&(Wt===null?Wt=[t]:Wt.push(t))}let et=null,ft=0,ht=null;function ul(t){ht=t}let ts=1,va=0,Dn=va;function oo(t){Dn=t}let nn=!1;function ns(){return++ts}function Za(t){var e=t.f;if((e&ct)!==0)return!0;if((e&cn)!==0){var n=t.deps,a=(e&mt)!==0;if(e&Je&&(t.f&=~Oa),n!==null){var o,s,i=(e&Ia)!==0,l=a&&Ce!==null&&!nn,c=n.length;if((i||l)&&(Ce===null||(Ce.f&Vt)===0)){var u=t,f=u.parent;for(o=0;o<c;o++)s=n[o],(i||!s?.reactions?.includes(u))&&(s.reactions??(s.reactions=[])).push(u);i&&(u.f^=Ia),l&&f!==null&&(f.f&mt)===0&&(u.f^=mt)}for(o=0;o<c;o++)if(s=n[o],Za(s)&&Fo(s),s.wv>t.wv)return!0}(!a||Ce!==null&&!nn)&&nt(t,tt)}return!1}function as(t,e,n=!0){var a=t.reactions;if(a!==null&&!Wt?.includes(t))for(var o=0;o<a.length;o++){var s=a[o];(s.f&Je)!==0?as(s,e,!1):e===s&&(n?nt(s,ct):(s.f&tt)!==0&&nt(s,cn),xn(s))}}function rs(t){var y;var e=et,n=ft,a=ht,o=Se,s=nn,i=Wt,l=Ae,c=kt,u=Dn,f=t.f;et=null,ft=0,ht=null,nn=(f&mt)!==0&&(kt||!Kn||Se===null),Se=(f&(Xt|Tn))===0?t:null,Wt=null,Qn(t.ctx),kt=!1,Dn=++va,t.ac!==null&&(Ga(()=>{t.ac.abort(Vn)}),t.ac=null);try{t.f|=hr;var d=t.fn,v=d(),m=t.deps;if(et!==null){var h;if(Ra(t,ft),m!==null&&ft>0)for(m.length=ft+et.length,h=0;h<et.length;h++)m[ft+h]=et[h];else t.deps=m=et;if(!nn||(f&Je)!==0&&t.reactions!==null)for(h=ft;h<m.length;h++)((y=m[h]).reactions??(y.reactions=[])).push(t)}else m!==null&&ft<m.length&&(Ra(t,ft),m.length=ft);if(ra()&&ht!==null&&!kt&&m!==null&&(t.f&(Je|cn|ct))===0)for(h=0;h<ht.length;h++)as(ht[h],t);return o!==null&&o!==t&&(va++,ht!==null&&(a===null?a=ht:a.push(...ht))),(t.f&En)!==0&&(t.f^=En),v}catch(w){return Ao(w)}finally{t.f^=hr,et=e,ft=n,ht=a,Se=o,nn=s,Wt=i,Qn(l),kt=c,Dn=u}}function dl(t,e){let n=e.reactions;if(n!==null){var a=oi.call(n,t);if(a!==-1){var o=n.length-1;o===0?n=e.reactions=null:(n[a]=n[o],n.pop())}}n===null&&(e.f&Je)!==0&&(et===null||!et.includes(e))&&(nt(e,cn),(e.f&(mt|Ia))===0&&(e.f^=Ia),zo(e),Ra(e,0))}function Ra(t,e){var n=t.deps;if(n!==null)for(var a=e;a<n.length;a++)dl(t,n[a])}function za(t){var e=t.f;if((e&Vt)===0){nt(t,tt);var n=Ce,a=Kn;Ce=t,Kn=!0;try{(e&Gt)!==0?ll(t):Xo(t),Go(t);var o=rs(t);t.teardown=typeof o=="function"?o:null,t.wv=ts;var s;yo&&Ri&&(t.f&ct)!==0&&t.deps}finally{Kn=a,Ce=n}}}async function os(){await Promise.resolve(),Lo()}function r(t){var e=t.f,n=(e&Je)!==0;if(Se!==null&&!kt){var a=Ce!==null&&(Ce.f&Vt)!==0;if(!a&&!Wt?.includes(t)){var o=Se.deps;if((Se.f&hr)!==0)t.rv<va&&(t.rv=va,et===null&&o!==null&&o[ft]===t?ft++:et===null?et=[t]:(!nn||!et.includes(t))&&et.push(t));else{(Se.deps??(Se.deps=[])).push(t);var s=t.reactions;s===null?t.reactions=[Se]:s.includes(Se)||s.push(Se)}}}else if(n&&t.deps===null&&t.effects===null){var i=t,l=i.parent;l!==null&&(l.f&mt)===0&&(i.f^=mt)}if(Nn){if(an.has(t))return an.get(t);if(n){i=t;var c=i.v;return((i.f&tt)===0&&i.reactions!==null||ss(i))&&(c=Lr(i)),an.set(i,c),c}}else if(n){if(i=t,Et?.has(i))return Et.get(i);Za(i)&&Fo(i)}if(Et?.has(t))return Et.get(t);if((t.f&En)!==0)throw t.v;return t.v}function ss(t){if(t.v===Ge)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(an.has(e)||(e.f&Je)!==0&&ss(e))return!0;return!1}function Bt(t){var e=kt;try{return kt=!0,t()}finally{kt=e}}const fl=-7169;function nt(t,e){t.f=t.f&fl|e}function vl(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(kn in t)Sr(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&kn in n&&Sr(n)}}}function Sr(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let a in t)try{Sr(t[a],e)}catch{}const n=Tr(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const a=bo(n);for(let o in a){const s=a[o].get;if(s)try{s.call(t)}catch{}}}}}const hl=["touchstart","touchmove"];function gl(t){return hl.includes(t)}const is=new Set,Cr=new Set;function pl(t,e,n,a={}){function o(s){if(a.capture||ia.call(e,s),!s.cancelBubble)return Ga(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?An(()=>{e.addEventListener(t,o,a)}):e.addEventListener(t,o,a),o}function Br(t,e,n,a,o){var s={capture:a,passive:o},i=pl(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Ko(()=>{e.removeEventListener(t,i,s)})}function Qe(t){for(var e=0;e<t.length;e++)is.add(t[e]);for(var n of Cr)n(t)}let so=null;function ia(t){var e=this,n=e.ownerDocument,a=t.type,o=t.composedPath?.()||[],s=o[0]||t.target;so=t;var i=0,l=so===t&&t.__root;if(l){var c=o.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var u=o.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(s=o[i]||t.target,s!==e){fr(t,"currentTarget",{configurable:!0,get(){return s||n}});var f=Se,d=Ce;it(null),It(null);try{for(var v,m=[];s!==null;){var h=s.assignedSlot||s.parentNode||s.host||null;try{var y=s["__"+a];if(y!=null&&(!s.disabled||t.target===s))if(xr(y)){var[w,...x]=y;w.apply(s,[t,...x])}else y.call(s,t)}catch(A){v?m.push(A):v=A}if(t.cancelBubble||h===e||h===null)break;s=h}if(v){for(let A of m)queueMicrotask(()=>{throw A});throw v}}finally{t.__root=e,delete t.currentTarget,it(f),It(d)}}}function ls(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function ha(t,e){var n=Ce;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function U(t,e){var n=(e&Ni)!==0,a=(e&Mi)!==0,o,s=!t.startsWith("<!>");return()=>{o===void 0&&(o=ls(s?t:"<!>"+t),n||(o=ea(o)));var i=a||jo?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=ea(i),c=i.lastChild;ha(l,c)}else ha(i,i);return i}}function _l(t,e,n="svg"){var a=!t.startsWith("<!>"),o=`<${n}>${a?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=ls(o),l=ea(i);s=ea(l)}var c=s.cloneNode(!0);return ha(c,c),c}}function ml(t,e){return _l(t,e,"svg")}function Ie(t=""){{var e=ln(t+"");return ha(e,e),e}}function ee(){var t=document.createDocumentFragment(),e=document.createComment(""),n=ln();return t.append(e,n),ha(e,n),t}function _(t,e){t!==null&&t.before(e)}function Lf(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function rn(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function wl(t,e){return yl(t,e)}const Hn=new Map;function yl(t,{target:e,anchor:n,props:a={},events:o,context:s,intro:i=!0}){Qi();var l=new Set,c=d=>{for(var v=0;v<d.length;v++){var m=d[v];if(!l.has(m)){l.add(m);var h=gl(m);e.addEventListener(m,ia,{passive:h});var y=Hn.get(m);y===void 0?(document.addEventListener(m,ia,{passive:h}),Hn.set(m,1)):Hn.set(m,y+1)}}};c(Pr(is)),Cr.add(c);var u=void 0,f=ol(()=>{var d=n??e.appendChild(ln());return qi(d,{pending:()=>{}},v=>{if(s){oe({});var m=Ae;m.c=s}o&&(a.$$events=o),u=t(v,a)||{},s&&se()}),()=>{for(var v of l){e.removeEventListener(v,ia);var m=Hn.get(v);--m===0?(document.removeEventListener(v,ia),Hn.delete(v)):Hn.set(v,m)}Cr.delete(c),d!==n&&d.parentNode?.removeChild(d)}});return bl.set(u,f),u}let bl=new WeakMap;var Ht,Mt,St,_a,ma;class Ja{constructor(e,n=!0){ut(this,"anchor");De(this,Ht,new Map);De(this,Mt,new Map);De(this,St,new Map);De(this,_a,!0);De(this,ma,()=>{var e=Te;if(M(this,Ht).has(e)){var n=M(this,Ht).get(e),a=M(this,Mt).get(n);if(a)Or(a);else{var o=M(this,St).get(n);o&&(M(this,Mt).set(n,o.effect),M(this,St).delete(n),o.fragment.lastChild.remove(),this.anchor.before(o.fragment),a=o.effect)}for(const[s,i]of M(this,Ht)){if(M(this,Ht).delete(s),s===e)break;const l=M(this,St).get(i);l&&(lt(l.effect),M(this,St).delete(i))}for(const[s,i]of M(this,Mt)){if(s===n)continue;const l=()=>{if(Array.from(M(this,Ht).values()).includes(s)){var u=document.createDocumentFragment();$o(i,u),u.append(ln()),M(this,St).set(s,{effect:i,fragment:u})}else lt(i);M(this,Mt).delete(s)};M(this,_a)||!a?qn(i,l,!1):l()}}});this.anchor=e,fe(this,_a,n)}ensure(e,n){var a=Te,o=Wo();if(n&&!M(this,Mt).has(e)&&!M(this,St).has(e))if(o){var s=document.createDocumentFragment(),i=ln();s.append(i),M(this,St).set(e,{effect:Ct(()=>n(i)),fragment:s})}else M(this,Mt).set(e,Ct(()=>n(this.anchor)));if(M(this,Ht).set(a,e),o){for(const[l,c]of M(this,Mt))l===e?a.skipped_effects.delete(c):a.skipped_effects.add(c);for(const[l,c]of M(this,St))l===e?a.skipped_effects.delete(c.effect):a.skipped_effects.add(c.effect);a.add_callback(M(this,ma))}else M(this,ma).call(this)}}Ht=new WeakMap,Mt=new WeakMap,St=new WeakMap,_a=new WeakMap,ma=new WeakMap;const Sl=0,ir=1;function Cl(t,e,n,a,o){var s=ra(),i=Ge,l=s?Kt(i):br(i,!1,!1),c=s?Kt(i):br(i,!1,!1),u=new Ja(t);oa(()=>{var f=e(),d=!1;if(li(f)){var v=Ro(),m=!1;const h=y=>{if(!d){m=!0,v();try{y()}finally{Ba(),Wn||Lo()}}};f.then(y=>{h(()=>{Ut(l,y),u.ensure(ir,a&&(w=>a(w,l)))})},y=>{h(()=>{if(Ut(c,y),u.ensure(ir,o&&(w=>o(w,c))),!o)throw c.v})}),An(()=>{m||h(()=>{u.ensure(Sl,n)})})}else Ut(l,f),u.ensure(ir,a&&(h=>a(h,l)));return()=>{d=!0}})}function V(t,e,n=!1){var a=new Ja(t),o=n?sn:0;function s(i,l){a.ensure(i,l)}oa(()=>{var i=!1;e((l,c=!0)=>{i=!0,s(c,l)}),i||s(!1,null)},o)}function ue(t,e){Xa(()=>{var n=e();for(var a in n){var o=n[a];o?t.style.setProperty(a,o):t.style.removeProperty(a)}})}function El(t,e,n){for(var a=t.items,o=[],s=e.length,i=0;i<s;i++)Ir(e[i].e,o,!0);var l=s>0&&o.length===0&&n!==null;if(l){var c=n.parentNode;$i(c),c.append(n),a.clear(),Pt(t,e[0].prev,e[s-1].next)}Jo(o,()=>{for(var u=0;u<s;u++){var f=e[u];l||(a.delete(f.k),Pt(t,f.prev,f.next)),lt(f.e,!l)}})}function Qa(t,e,n,a,o,s=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&ko)!==0;if(c){var u=t;i=u.appendChild(ln())}var f=null,d=!1,v=new Map,m=Ya(()=>{var x=n();return xr(x)?x:x==null?[]:Pr(x)}),h,y;function w(){kl(y,h,l,v,i,o,e,a,n),s!==null&&(h.length===0?f?Or(f):f=Ct(()=>s(i)):f!==null&&qn(f,()=>{f=null}))}oa(()=>{y??(y=Ce),h=r(m);var x=h.length;if(!(d&&x===0)){d=x===0;var A,k,S,D;if(Wo()){var C=new Set,N=Te;for(k=0;k<x;k+=1){S=h[k],D=a(S,k);var T=l.items.get(D)??v.get(D);T?(e&(Wa|qa))!==0&&cs(T,S,k,e):(A=us(null,l,null,null,S,D,k,o,e,n,!0),v.set(D,A)),C.add(D)}for(const[F,te]of l.items)C.has(F)||N.skipped_effects.add(te.e);N.add_callback(w)}else w();r(m)}})}function kl(t,e,n,a,o,s,i,l,c){var u=(i&Ei)!==0,f=(i&(Wa|qa))!==0,d=e.length,v=n.items,m=n.first,h=m,y,w=null,x,A=[],k=[],S,D,C,N;if(u)for(N=0;N<d;N+=1)S=e[N],D=l(S,N),C=v.get(D),C!==void 0&&(C.a?.measure(),(x??(x=new Set)).add(C));for(N=0;N<d;N+=1){if(S=e[N],D=l(S,N),C=v.get(D),C===void 0){var T=a.get(D);if(T!==void 0){a.delete(D),v.set(D,T);var F=w?w.next:h;Pt(n,w,T),Pt(n,T,F),lr(T,F,o),w=T}else{var te=h?h.e.nodes_start:o;w=us(te,n,w,w===null?n.first:w.next,S,D,N,s,i,c)}v.set(D,w),A=[],k=[],h=w.next;continue}if(f&&cs(C,S,N,i),(C.e.f&vt)!==0&&(Or(C.e),u&&(C.a?.unfix(),(x??(x=new Set)).delete(C))),C!==h){if(y!==void 0&&y.has(C)){if(A.length<k.length){var ie=k[0],B;w=ie.prev;var Z=A[0],G=A[A.length-1];for(B=0;B<A.length;B+=1)lr(A[B],ie,o);for(B=0;B<k.length;B+=1)y.delete(k[B]);Pt(n,Z.prev,G.next),Pt(n,w,Z),Pt(n,G,ie),h=ie,w=G,N-=1,A=[],k=[]}else y.delete(C),lr(C,h,o),Pt(n,C.prev,C.next),Pt(n,C,w===null?n.first:w.next),Pt(n,w,C),w=C;continue}for(A=[],k=[];h!==null&&h.k!==D;)(h.e.f&vt)===0&&(y??(y=new Set)).add(h),k.push(h),h=h.next;if(h===null)continue;C=h}A.push(C),w=C,h=C.next}if(h!==null||y!==void 0){for(var q=y===void 0?[]:Pr(y);h!==null;)(h.e.f&vt)===0&&q.push(h),h=h.next;var K=q.length;if(K>0){var $=(i&ko)!==0&&d===0?o:null;if(u){for(N=0;N<K;N+=1)q[N].a?.measure();for(N=0;N<K;N+=1)q[N].a?.fix()}El(n,q,$)}}u&&An(()=>{if(x!==void 0)for(C of x)C.a?.apply()}),t.first=n.first&&n.first.e,t.last=w&&w.e;for(var ne of a.values())lt(ne.e);a.clear()}function cs(t,e,n,a){(a&Wa)!==0&&Ut(t.v,e),(a&qa)!==0?Ut(t.i,n):t.i=n}function us(t,e,n,a,o,s,i,l,c,u,f){var d=(c&Wa)!==0,v=(c&ki)===0,m=d?v?br(o,!1,!1):Kt(o):o,h=(c&qa)===0?i:Kt(i),y={i:h,v:m,k:s,a:null,e:null,prev:n,next:a};try{if(t===null){var w=document.createDocumentFragment();w.append(t=ln())}return y.e=Ct(()=>l(t,m,h,u),Oi),y.e.prev=n&&n.e,y.e.next=a&&a.e,n===null?f||(e.first=y):(n.next=y,n.e.next=y.e),a!==null&&(a.prev=y,a.e.prev=y.e),y}finally{}}function lr(t,e,n){for(var a=t.next?t.next.e.nodes_start:n,o=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==a;){var i=ya(s);o.before(s),s=i}}function Pt(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Ee(t,e,...n){var a=new Ja(t);oa(()=>{const o=e()??null;a.ensure(o,o&&(s=>o(s,...n)))},sn)}function Dl(t,e,n){var a=new Ja(t);oa(()=>{var o=e()??null;a.ensure(o,o&&(s=>n(s,o)))},sn)}function ds(t){var e,n,a="";if(typeof t=="string"||typeof t=="number")a+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=ds(t[e]))&&(a&&(a+=" "),a+=n)}else for(n in t)t[n]&&(a&&(a+=" "),a+=n);return a}function xl(){for(var t,e,n=0,a="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=ds(t))&&(a&&(a+=" "),a+=e);return a}function ge(t){return typeof t=="object"?xl(t):t??""}const io=[...` 	
\r\f \v\uFEFF`];function Pl(t,e,n){var a=t==null?"":""+t;if(e&&(a=a?a+" "+e:e),n){for(var o in n)if(n[o])a=a?a+" "+o:o;else if(a.length)for(var s=o.length,i=0;(i=a.indexOf(o,i))>=0;){var l=i+s;(i===0||io.includes(a[i-1]))&&(l===a.length||io.includes(a[l]))?a=(i===0?"":a.substring(0,i))+a.substring(l+1):i=l}}return a===""?null:a}function Tl(t,e){return t==null?null:String(t)}function pe(t,e,n,a,o,s){var i=t.__className;if(i!==n||i===void 0){var l=Pl(n,a,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&o!==s)for(var c in s){var u=!!s[c];(o==null||u!==!!o[c])&&t.classList.toggle(c,u)}return s}function Pn(t,e,n,a){var o=t.__style;if(o!==e){var s=Tl(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return a}const Al=Symbol("is custom element"),Nl=Symbol("is html");function If(t,e){var n=Rr(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Of(t,e){var n=Rr(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Be(t,e,n,a){var o=Rr(t);o[e]!==(o[e]=n)&&(e==="loading"&&(t[vi]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Ml(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Rr(t){return t.__attributes??(t.__attributes={[Al]:t.nodeName.includes("-"),[Nl]:t.namespaceURI===Li})}var lo=new Map;function Ml(t){var e=t.getAttribute("is")||t.nodeName,n=lo.get(e);if(n)return n;lo.set(e,n=[]);for(var a,o=t,s=Element.prototype;s!==o;){a=bo(o);for(var i in a)a[i].set&&n.push(i);o=Tr(o)}return n}function Ll(t,e,n=e){var a=new WeakSet;tl(t,"input",async o=>{var s=o?t.defaultValue:t.value;if(s=cr(t)?ur(s):s,n(s),Te!==null&&a.add(Te),await os(),s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd,c=t.value.length;if(t.value=s??"",l!==null){var u=t.value.length;i===l&&l===c&&u>c?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=i,t.selectionEnd=Math.min(l,u))}}}),Bt(e)==null&&t.value&&(n(cr(t)?ur(t.value):t.value),Te!==null&&a.add(Te)),Xa(()=>{var o=e();if(t===document.activeElement){var s=Aa??Te;if(a.has(s))return}cr(t)&&o===ur(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function cr(t){var e=t.type;return e==="number"||e==="range"}function ur(t){return t===""?null:+t}function co(t,e){return t===e||t?.[kn]===e}function at(t={},e,n,a){return sl(()=>{var o,s;return Xa(()=>{o=s,s=[],Bt(()=>{t!==n(...s)&&(e(t,...s),o&&co(n(...o),t)&&e(null,...o))})}),()=>{An(()=>{s&&co(n(...s),t)&&e(null,...s)})}}),t}function $a(t=!1){const e=Ae,n=e.l.u;if(!n)return;let a=()=>vl(e.s);if(t){let o=0,s={};const i=wa(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==s[u]&&(s[u]=c[u],l=!0);return l&&o++,o});a=()=>r(i)}n.b.length&&rl(()=>{uo(e,a),vr(n.b)}),Le(()=>{const o=Bt(()=>n.m.map(ci));return()=>{for(const s of o)typeof s=="function"&&s()}}),n.a.length&&Le(()=>{uo(e,a),vr(n.a)})}function uo(t,e){if(t.l.s)for(const n of t.l.s)r(n);e()}let Ta=!1;function Il(t){var e=Ta;try{return Ta=!1,[t(),Ta]}finally{Ta=e}}function we(t,e,n,a){var o=!aa||(n&xi)!==0,s=(n&Ti)!==0,i=(n&Ai)!==0,l=a,c=!0,u=()=>(c&&(c=!1,l=i?Bt(a):a),l),f;if(s){var d=kn in t||fi in t;f=Un(t,e)?.set??(d&&e in t?k=>t[e]=k:void 0)}var v,m=!1;s?[v,m]=Il(()=>t[e]):v=t[e],v===void 0&&a!==void 0&&(v=u(),f&&(o&&wi(),f(v)));var h;if(o?h=()=>{var k=t[e];return k===void 0?u():(c=!0,k)}:h=()=>{var k=t[e];return k!==void 0&&(l=void 0),k===void 0?l:k},o&&(n&Pi)===0)return h;if(f){var y=t.$$legacy;return(function(k,S){return arguments.length>0?((!o||!S||y||m)&&f(S?h():k),k):h()})}var w=!1,x=((n&Di)!==0?wa:Ya)(()=>(w=!1,h()));s&&r(x);var A=Ce;return(function(k,S){if(arguments.length>0){const D=S?r(x):o&&s?Ze(k):k;return g(x,D),w=!0,l!==void 0&&(l=D),k}return Nn&&w||(A.f&Vt)!==0?x.v:r(x)})}function ke(t){Ae===null&&Eo(),aa&&Ae.l!==null?Ol(Ae).m.push(t):Le(()=>{const e=Bt(t);if(typeof e=="function")return e})}function Ol(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const Bl="5";var wo;typeof window<"u"&&((wo=window.__svelte??(window.__svelte={})).v??(wo.v=new Set)).add(Bl);zi();const fs={};function Rl(t){je(fs,t)}function vs(){const t=He(fs);if(!t)throw new Error("No FeedSearchContext found");return t}const hs={};function zl(t){je(hs,t)}function Dt(){const t=He(hs);if(!t)throw new Error("No AppHistoryContext found");return t}function Fl(t,e){oe(e,!0);const{setSearchParam:n,deleteSearchParam:a,getAppLocation:o}=Dt(),s="feedSearch",i=L(()=>o().searchParams.get(s)||""),l=L(()=>r(i));Rl({getFeedSearch:()=>r(l),setFeedSearch:f=>{f===""?a(s):n(s,f)}});var c=ee(),u=z(c);Ee(u,()=>e.children??xe),_(t,c),se()}const gs={};function Hl(t){je(gs,t)}function jl(){const t=He(gs);if(!t)throw new Error("No TagsSearchContext found");return t}function Vl(t,e){oe(e,!0);const{setSearchParam:n,deleteSearchParam:a,getAppLocation:o}=Dt(),s="tagsSearch",i=L(()=>o().searchParams.get(s)||""),l=L(()=>r(i));Hl({getTagsSearch:()=>r(l),setTagsSearch:f=>{f===""?a(s):n(s,f)}});var c=ee(),u=z(c);Ee(u,()=>e.children??xe),_(t,c),se()}const ps={};function Ul(t){je(ps,t)}function _s(){const t=He(ps);if(!t)throw new Error("No FeedOrderContext found");return t}function Wl(t,e){oe(e,!0);const{setSearchParam:n,deleteSearchParam:a,getAppLocation:o}=Dt(),s="feedOrder",i=L(()=>o().searchParams.get(s)||"newest"),l=L(()=>r(i));Ul({getFeedOrder:()=>r(l),setFeedOrder:f=>{f==="newest"?a(s):n(s,f)}});var c=ee(),u=z(c);Ee(u,()=>e.children??xe),_(t,c),se()}const ms={};function ql(t){je(ms,t)}function er(){const t=He(ms);if(!t)throw new Error("No SidebarContext found");return t}function Kl(t,e){oe(e,!0);const n=(f,d)=>{if(!d)return f;if(d.type==="closed")return{type:"closed"};switch(f.type){case"opened":return d.type==="open"?{type:"opening"}:d.type==="close"?{type:"closing"}:d.type==="swipe"?{type:"openSwiping"}:f;case"closed":return d.type==="open"?{type:"opening"}:d.type==="swipe"?{type:"closeSwiping"}:f;case"openSwiping":return d.type==="open"?{type:"opening"}:d.type==="close"?{type:"closing"}:f;case"closeSwiping":return d.type==="open"?{type:"opening"}:d.type==="close"?{type:"closing"}:f;case"opening":return d.type==="opened"?{type:"opened"}:f;default:return f}};let a=W(Ze(n({type:"closed"})));const o=f=>{const d=Bt(()=>r(a));g(a,n(d,f),!0)};ql({sidebarOpen:()=>{o({type:"open"})},sidebarClose:()=>{o({type:"close"})},handleComputeState:o,getSidebarState:()=>r(a)});var c=ee(),u=z(c);Ee(u,()=>e.children??xe),_(t,c),se()}const ws={};function Yl(t){je(ws,t)}function ys(){const t=He(ws);if(!t)throw new Error("No SelectedTagsContext found");return t}function Gl(t,e){oe(e,!0);const{getAppLocation:n,setSearchParam:a,deleteSearchParam:o}=Dt(),s=L(n),i=L(()=>r(s).searchParams),l="selectedTags";let c=L(()=>r(i).get(l)||""),u=L(()=>new Set(r(c).split(",").map(w=>decodeURIComponent(w)).filter(w=>w!=="")));Yl({getSelectedTags:()=>r(u),addTag:w=>{r(u).has(w)||a(l,[...r(u),w].map(x=>encodeURIComponent(x)).join(","))},removeTag:w=>{r(u).has(w)&&r(u).size===1?o(l):r(u).has(w)&&a(l,[...r(u)].filter(x=>x!==w).map(x=>encodeURIComponent(x)).join(","))},clearTags:()=>{o(l)}});var h=ee(),y=z(h);Ee(y,()=>e.children??xe),_(t,h),se()}const bs={};function Xl(t){je(bs,t)}function zr(){const t=He(bs);if(!t)throw new Error("No LocalDBContext found");return t}const Ss={};function Zl(t){je(Ss,t)}function Jl(){const t=He(Ss);if(!t)throw new Error("No SettingsContext found");return t}const Cs={};function Ql(t){je(Cs,t)}function tr(){const t=He(Cs);if(!t)throw new Error("No BroadcastContext found");return t}const $l="AppStorage",ec=1,la="account",La="settings",dt="notes",yt="tags",tc="syncLog",un="success",Yt="error",Ve=(t,e,n)=>{t?.addEventListener(e,n)},fo=(t,e)=>new Promise((n,a)=>{const s=t?.transaction(e,"readonly")?.objectStore(e).getAll();Ve(s,un,()=>{const i=s?.result||[];n(i)}),Ve(s,Yt,i=>{a(i)})}),Er=(t,e,n)=>new Promise((a,o)=>{const i=t?.transaction(e,"readonly")?.objectStore(e).get(n);Ve(i,un,()=>{const l=i?.result?.data;a(l)}),Ve(i,Yt,l=>{o(l)})}),fa=(t,e,n,a)=>new Promise((o,s)=>{const c=t?.transaction(e,"readwrite")?.objectStore(e)?.put({id:n,data:a});Ve(c,un,()=>{o()}),Ve(c,Yt,u=>{s(u)})}),sa=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.put(s);return new Promise((l,c)=>{Ve(i,un,()=>{l()}),Ve(i,Yt,u=>{c(u)})})}))},nc=(t,e,n)=>new Promise((a,o)=>{const l=t?.transaction(e,"readwrite")?.objectStore(e)?.delete(n);Ve(l,un,()=>{a()}),Ve(l,Yt,c=>{o(c)})}),jn=async(t,e,n)=>{const o=t?.transaction(e,"readwrite")?.objectStore(e);await Promise.all(n.map(s=>{const i=o?.delete(s);return new Promise((l,c)=>{Ve(i,un,()=>{l()}),Ve(i,Yt,u=>{c(u)})})}))},mn=(t,e)=>new Promise((n,a)=>{const i=t?.transaction(e,"readwrite")?.objectStore(e)?.clear();Ve(i,un,()=>{n()}),Ve(i,Yt,l=>{a(l)})});function ac(t,e){oe(e,!0);let n=W(Ze({showFavicon:!0}));const{getDB:a}=zr(),{createBroadcastChannel:o,tabId:s}=tr(),i=o(),l=L(a),c=async()=>{const y=await Er(r(l),La,"default");y&&g(n,y,!0)},u=async()=>{c()},f=async y=>{const w=JSON.parse(y.data),x=w;if(w.tabId&&w.tabId===s){x.type==="exit"&&(g(n,{showFavicon:!0},!0),mn(r(l),La));return}x.type==="updateSettings"?c():x.type==="exit"&&g(n,{showFavicon:!0},!0)},d=()=>r(n).showFavicon,v=async y=>{r(n).showFavicon=y,await fa(r(l),La,"default",{showFavicon:y}),i.postMessage({type:"updateSettings"})};ke(()=>(u(),i.addEventListener(f),()=>{i.removeEventListener(f)})),Zl({getFaviconEnabled:d,setFaviconShown:v});var m=ee(),h=z(m);Ee(h,()=>e.children??xe),_(t,m),se()}const Es={};function rc(t){je(Es,t)}function ks(){const t=He(Es);if(!t)throw new Error("No AccountContext found");return t}function oc(t,e){oe(e,!0);let n=W(void 0);const{getDB:a}=zr(),{createBroadcastChannel:o,tabId:s}=tr(),i=L(a),l=o(),c=async()=>{const k=await Er(r(i),la,"default");g(n,k,!0)},u=k=>fa(r(i),la,"default",k),f=async k=>{const S=await Er(r(i),la,"default");S!==void 0&&g(n,S,!0),k(S)},d=async k=>{const S=JSON.parse(k.data);if(S.tabId&&S.tabId===s)return;const D=S;D.type==="initLocalAccount"?g(n,null):D.type==="initCloudAccount"?c():D.type==="disconnectCloudAccount"?g(n,null):D.type==="exit"?g(n,void 0):D.type==="updateAccount"&&c()};ke(()=>(l.addEventListener(d),()=>{l.removeEventListener(d)})),rc({init:f,getAccount:()=>r(n),initLocalAccount:async()=>{g(n,null),await u(null),l.postMessage({type:"initLocalAccount"})},initCloudAccount:async k=>{const S={encryptedClientKey:k.encryptedClientKey||"",subscriptionExpires:k.subscriptionExpires||-1,lastSync:-1};await u(S),g(n,S,!0),l.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{g(n,null),await u(null),l.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async k=>{if(!r(n))throw new Error("No account to update subscription for");const S={...r(n),subscriptionExpires:k};await u(S),l.postMessage({type:"updateAccount"})},exitApp:async()=>{g(n,void 0),l.postMessage({type:"exit"}),await mn(r(i),la)}});var x=ee(),A=z(x);Ee(A,()=>e.children??xe),_(t,x),se()}const Ds={};function sc(t){je(Ds,t)}function dn(){const t=He(Ds);if(!t)throw new Error("No NotesContext found");return t}const ic=()=>crypto.randomUUID(),lc=t=>{const e=new Map;for(const n of t||[])for(const a of n?.data.tags||[])e.set(a,{name:a,count:(e.get(a)?.count||0)+1});return e};function cc(t,e){oe(e,!0);const{getDB:n}=zr(),{createBroadcastChannel:a,tabId:o}=tr(),s=L(n),i=a(),l=720*60*60*1e3;let c=W(0),u=W(!1),f=W(()=>new Map),d=W(()=>[]),v=W(()=>new Map);const m=()=>r(u),h=()=>r(c)>0,y=(P=1)=>{r(c)>0&&g(c,r(c)-P)},w=P=>{const O=r(d)(),p=r(v)(),E={...P};O.push(E),p.set(E.id,E),g(d,()=>O),g(v,()=>p)},x=P=>{const O=r(d)(),p=r(v)(),E=p.get(P.id);E&&(E.data=P.data),g(d,()=>O),g(v,()=>p)},A=P=>{const O=r(d)(),p=r(v)(),E=p.get(P);p.has(P)&&p.delete(P),E?.data?.type==="draft"&&p.delete("draft"),E&&(E.data=void 0),g(d,()=>O),g(v,()=>p)},k=P=>{const O=r(d)(),p=r(v)();for(const E of P){const j=p.get(E);p.has(E)&&p.delete(E),j?.data?.type==="draft"&&p.delete("draft"),j&&(j.data=void 0)}g(d,()=>O),g(v,()=>p)},S=()=>{g(d,()=>[]),g(f,()=>new Map),g(v,()=>new Map)},D=()=>r(d),C=P=>{const O=r(f)();for(const p of P){const E=O.get(p);E?E.count++:O.set(p,{name:p,count:1})}g(f,()=>O)},N=P=>{const O=r(f)();for(const p of P){const E=O.get(p);E&&(E.count--,E.count<=0&&O.delete(p))}g(f,()=>O)},T=async()=>{const[P,O]=await Promise.all([fo(r(s),dt),fo(r(s),yt).then(me=>me.reduce((qe,Re)=>qe.set(Re.id,Re.data),new Map))]),p=[],E=[],j=new Map;let J=0;for(const me of P)me.data.deletedAt&&Date.now()-me.data.deletedAt>l?p.push(me.id):(E.push(me),j.set(me.id,me),me.data.deletedAt&&(J+=1),me.data.type==="draft"&&j.set("draft",me));g(c,J,!0);const he=lc(E),Pe=new Map;he.entries().forEach(([me,qe])=>{const Re=O.get(me);Pe.set(me,{...qe,...Re})}),await jn(r(s),dt,p),await mn(r(s),yt),await sa(r(s),yt,Array.from(Pe.values()).map(me=>({id:me.name,data:{pinned:me.pinned}}))),g(d,()=>E),g(v,()=>j),g(f,()=>Pe),g(u,!0)},F=async()=>{const P=r(v)(),O=P.get("draft");if(O)return O;const p={id:ic(),data:{type:"draft",url:"",name:"",text:"",tags:[],draft:{url:"",name:"",text:"",tags:[],createdAt:Date.now(),updatedAt:Date.now()},createdAt:Date.now(),updatedAt:Date.now()}};return await fa(r(s),dt,p.id,{...p.data}),P.set("draft",p),w(p),i.postMessage({type:"createNoteDraft",data:{note:p}}),p},te=async P=>{const p=r(v)().get(P);if(!p||!p.data)return;const E=r(f)(),j=p.data.tags;N(j),A(P),i.postMessage({type:"deleteNote",data:{id:P}}),y(),await nc(r(s),dt,P),await jn(r(s),yt,j.filter(J=>{const he=E.get(J);return he?he.count<=1:!1}))},ie=async P=>{const O=r(v)(),p=new Set;for(const j of P){const J=O.get(j);J&&J.data&&J.data.tags.forEach(he=>p.add(he))}const E=r(f)();N(Array.from(p)),k(P),y(P.length),await jn(r(s),dt,P),await jn(r(s),yt,Array.from(p.values()).filter(j=>{const J=E.get(j);return J?J.count<=1:!1})),i.postMessage({type:"reloadNotes"})},B=async(P,O)=>{const p={id:O.id,data:{...O.data}},E=r(f)(),j=O.data.tags.filter(he=>!P.data.tags.includes(he)),J=P.data.tags.filter(he=>!O.data.tags.includes(he));await fa(r(s),dt,p.id,{...p.data}),await sa(r(s),yt,j.filter(he=>!E.has(he)).map(he=>({id:he,data:{}}))),await jn(r(s),yt,J.filter(he=>{const Pe=E.get(he);return Pe?Pe.count<=1:!1})),x(p),N(J),C(j),i.postMessage({type:"updateNote",data:{note:p,tagsToAdd:j,tagsToDelete:J}})},Z=async P=>{const O=r(v)(),p=q(P);if(!p||!p.data)return;const E=O.get("draft");E&&E.id===p.id&&O.delete("draft");const j={id:P,data:{type:"note",name:p.data.draft?.name??p.data.name,url:p.data.draft?.url??p.data.url,text:p.data.draft?.text??p.data.text,tags:p.data.draft?.tags??p.data.tags,updatedAt:Date.now(),createdAt:p.data.createdAt,pinnedAt:p.data.pinnedAt,deletedAt:p.data.deletedAt,draft:void 0}};return B(p,j)},G=async()=>{S(),i.postMessage({type:"clearNotes"}),g(c,0),await mn(r(s),dt),await mn(r(s),yt)},q=P=>{const O=r(v)();return P?O.get(P):O.get("draft")},K=async(P,O)=>{const E=r(v)().get(P);if(!E||!E.data)return;const j={id:P,data:{...E.data,pinnedAt:O?Date.now():void 0}};return B(E,j)},$=async P=>{const p=r(v)().get(P);if(!p||!p.data)return;const E={id:P,data:{...p.data,deletedAt:Date.now()}};g(c,r(c)+1),await B(p,E)},ne=async P=>{const O=r(v)(),p=r(d)(),E=[];p.forEach(j=>{j.data&&P.every(J=>j?.data?.tags.includes(J))&&E.push(j.id)});for(const j of E){const J=O.get(j);J?.data&&(J.data.deletedAt=Date.now())}g(c,r(c)+E.length),await sa(r(s),dt,E.map(j=>{const J=O.get(j);return{id:j,data:J?.data}})),i.postMessage({type:"reloadNotes"}),g(v,()=>O),g(d,()=>p)},X=async P=>{const O=r(v)(),p=r(d)(),E=[];p.forEach(j=>{j.data&&P.every(J=>j?.data?.tags.includes(J))&&E.push(j.id)});for(const j of E){const J=O.get(j);J?.data&&(J.data.deletedAt=0)}g(c,r(c)-E.length),await sa(r(s),dt,E.map(j=>{const J=O.get(j);return{id:j,data:J?.data}})),i.postMessage({type:"reloadNotes"}),g(v,()=>O),g(d,()=>p)},ae=async P=>{const p=r(v)().get(P);if(!p||!p.data)return;const E={id:P,data:{...p.data,deletedAt:0}};y(),await B(p,E)},I=async(P,O)=>{const p=r(f)();p.set(P,{name:P,count:p.get(P)?.count||0,pinned:O}),await fa(r(s),yt,P,{pinned:O}),i.postMessage({type:"pinTag",data:{tag:P,pinned:O}}),g(f,()=>p)},R=async P=>{const O=r(f)(),p=r(d)(),E=[];p.forEach(j=>{j.data&&P.every(J=>j?.data?.tags.includes(J))&&E.push(j.id)}),await ie(E),g(d,()=>p),g(f,()=>O)},Y=async P=>{const O=r(v)(),p={};P.forEach(E=>{const j=O.get(E.id);(!j||j&&j.data&&j.data.updatedAt<E.data.updatedAt)&&(p[E.id]=E)}),await sa(r(s),dt,Object.values(p)),await T(),i.postMessage({type:"reloadNotes"})},ce=async()=>{const P=[];r(d)().forEach(p=>{p&&p.data&&p.data.deletedAt&&P.push(p.id)}),g(c,0),await jn(r(s),dt,P),await T(),i.postMessage({type:"emptyBin"})},ve=async(P,O)=>{if(P===""){const J=r(v)().get("draft");J?P=J.id:P=(await F()).id}const p=q(P);if(!p||!p.data)return;const E={id:P,data:{...p.data,draft:{...O,tags:O.tags,createdAt:p.data.draft?.createdAt||Date.now(),updatedAt:Date.now()}}};return await B(p,E),p.id},ye=async P=>{const O=r(v)(),p=q(P);if(!p||!p.data||!p.data.draft)return;if(p.data.type==="draft"){P===O.get("draft")?.id&&O.delete("draft"),await te(P);return}const E={id:P,data:{...p.data,draft:void 0}};return B(p,E)},be=async P=>{const O=JSON.parse(P.data),p=O;if(O.tabId&&O.tabId===o){p.type==="exit"&&(S(),await mn(r(s),dt),await mn(r(s),yt));return}if(p.type==="createNoteDraft"){const E=p.data.note;r(v)().set("draft",E),w(E)}else if(p.type==="updateNote"){const E=p.data,J=r(v)().get(E.note.id);if(!J||!J.data)return;J.data.deletedAt&&!E.note.data.deletedAt?y():!J.data.deletedAt&&E.note.data.deletedAt&&g(c,r(c)+1),x(E.note),N(E.tagsToAdd),C(E.tagsToDelete)}else if(p.type==="deleteNote"){const E=p.data.id,J=r(v)().get(E);if(!J)return;y(),A(E),N(J?.data?.tags||[])}else if(p.type==="pinTag"){const E=p.data.tag,j=p.data.pinned,J=r(f)(),he=J.get(E);he&&(he.pinned=j,J.set(E,he)),g(f,()=>J)}else p.type==="clearNotes"?S():p.type==="reloadNotes"||p.type==="emptyBin"?T():p.type==="exit"&&S()};ke(()=>(T(),i.addEventListener(be),()=>{i.removeEventListener(be)})),sc({isInitedNotes:m,putNoteDraft:ve,deleteNoteDraft:ye,deleteNote:te,pinNote:K,getGetNotes:D,importNotes:Y,clearNotes:G,getNoteById:q,getGetMapTags:()=>r(f),pinTag:I,moveNoteToBin:$,restoreNoteFromBin:ae,checkNotesInBin:h,emptyBin:ce,saveNoteDraft:Z,countNotesInBin:()=>r(c),moveNotesToBinByTags:ne,deleteNotesByTags:R,restoreNotesFromBinByTags:X});var re=ee(),le=z(re);Ee(le,()=>e.children??xe),_(t,re),se()}const xs={},uc=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function dc(t){je(xs,t)}function fn(){const t=He(xs);if(!t)throw new Error("No AnimationSettingsContext found");return t}function fc(t,e){oe(e,!0);let n=Ze(uc());dc(n);var a=ee(),o=z(a);Ee(o,()=>e.children??xe),_(t,a),se()}const Ps={};function vc(t){je(Ps,t)}function Fr(){const t=He(Ps);if(!t)throw new Error("No ScrollingContext found");return t}const Ts=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,t()},e)}};async function Bf(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}function hc(t,e){oe(e,!0);let n=W(!1);const a=()=>r(n),o=Ts(()=>{g(n,!1)},100);vc({isScrolling:a,enable:()=>{g(n,!0),o()}});var i=ee(),l=z(i);Ee(l,()=>e.children??xe),_(t,i),se()}const As={};function gc(t){je(As,t)}function Zt(){const t=He(As);if(!t)throw new Error("No MobileSizeContext found");return t}function pc(t,e){oe(e,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let a=W(Ze(n())),o=fn();const s=Ts(()=>{o.working=!0},16),i=()=>{o.working=!1,s(),requestAnimationFrame(()=>{g(a,n(),!0)})};gc({checkMobileSize:()=>r(a)}),ke(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)));var c=ee(),u=z(c);Ee(u,()=>e.children??xe),_(t,c),se()}const Ns={};function _c(t){je(Ns,t)}function vn(){const t=He(Ns);if(!t)throw new Error("No DialogContext found");return t}function mc(t,e){oe(e,!0);let n=W(0),a=W(!1),o=W(!0);_c({checkExistedDialog:()=>r(n)>0,showDialog:()=>{g(n,r(n)+1)},hideDialog:()=>{g(n,r(n)-1)},blockDialog:h=>{g(a,h,!0)},checkBlockedDialog:()=>r(a),setClosableDialog:h=>{g(o,h,!0)},checkClosableDialog:()=>r(o)});var v=ee(),m=z(v);Ee(m,()=>e.children??xe),_(t,v),se()}const Ms={};function wc(t){je(Ms,t)}function Hr(){const t=He(Ms);if(!t)throw new Error("No ScrollContainerContext found");return t}function yc(t,e){oe(e,!0);let n=W(null);wc({setScrollContainer:l=>{g(n,l,!0)},getScrollContainer:()=>r(n)});var s=ee(),i=z(s);Ee(i,()=>e.children??xe),_(t,s),se()}const Ls={};function bc(t){je(Ls,t)}function jr(){const t=He(Ls);if(!t)throw new Error("No DialogPageHeightContext found");return t}function Sc(t,e){oe(e,!0);let n=W(200);bc({setDialogPageHeight:l=>{g(n,l,!0)},getDialogPageHeight:()=>r(n)});var s=ee(),i=z(s);Ee(i,()=>e.children??xe),_(t,s),se()}const Cc=[la,La,dt,yt,tc];function Ec(){return new Promise((t,e)=>{const n=indexedDB.open($l,ec);Ve(n,"upgradeneeded",()=>{const a=n.result;for(const o of Cc)a.objectStoreNames.contains(o)||a.createObjectStore(o,{keyPath:"id"})}),Ve(n,un,()=>{const a=n.result;t(a),a.onversionchange=function(){a?.close(),alert("app outdated, please reload the page")}}),Ve(n,"blocked",()=>{e(),alert("app outdated, please reload the page")}),Ve(n,Yt,()=>{e(),console.error(Yt,n.error)})})}function kc(t,e){oe(e,!0);let n=W(null);ke(()=>{Ec().then(l=>{g(n,l,!0)}).catch(l=>{console.error("Failed to initialize LocalDB:",l)})}),Xl({getDB:()=>r(n)});var o=ee(),s=z(o);{var i=l=>{var c=ee(),u=z(c);Ee(u,()=>e.children??xe),_(l,c)};V(s,l=>{r(n)&&l(i)})}_(t,o),se()}const bt="dialogPages",Is={};function Dc(t){je(Is,t)}function wt(){const t=He(Is);if(!t)throw new Error("No DialogPagesContext found");return t}function xc(t,e){oe(e,!0);const{getAppLocation:n,setSearchParam:a,deleteSearchParam:o}=Dt(),s=L(n),i=L(()=>r(s).searchParams);let l=L(()=>r(i).get(bt)||""),c=L(()=>r(l).split(",").map(S=>decodeURIComponent(S)).filter(S=>S!==""));const u=()=>r(c),f=S=>{if(S.length===0){o(bt);return}a(bt,S.map(D=>encodeURIComponent(D)).join(","))},d=S=>{a(bt,[...r(c),S].map(D=>encodeURIComponent(D)).join(","))};Dc({setDialogPages:f,getDialogPages:u,pushDialogPage:d,popDialogPage:()=>{const S=r(c)[r(c).length-1];return r(c).length<=1?(o(bt),S):(a(bt,r(c).slice(0,-1).map(D=>encodeURIComponent(D)).join(",")),S)},replaceDialogPage:S=>{a(bt,[...r(c).slice(0,-1),S].map(D=>encodeURIComponent(D)).join(","))},hasDialogPage:S=>r(c).find(D=>{const[C]=D.split("?");return C===S})!==void 0,clearDialogPages:()=>{o(bt)},createDialogPageHref:S=>{const D=new URLSearchParams(r(s).searchParams.toString());return D.set(bt,[...u(),S].map(C=>encodeURIComponent(C)).join(",")),`${r(s).pathname}?${D.toString()}`},createHandleClickDialogPage:S=>D=>{D.preventDefault(),d(S)}});var A=ee(),k=z(A);Ee(k,()=>e.children??xe),_(t,A),se()}function Pc(t,e){oe(e,!0);const n=f=>f.startsWith("/")?f:`/${f}`,a=f=>{const[d,v]=f.split("?");return{href:n(f),pathname:n(d),search:v?`?${v}`:"",searchParams:new URLSearchParams(v)}};let o=W(Ze({href:`${n(window.location.pathname)}${window.location.search}`,pathname:n(window.location.pathname),search:window.location.search,searchParams:new URLSearchParams(window.location.search)}));const s=f=>{g(o,a(f),!0),window.history.replaceState(null,"",f)};zl({getAppLocation:()=>r(o),replace:s,setSearchParam:(f,d)=>{const v=r(o).searchParams;v.set(f,d),s(`${r(o).pathname}${v.size>0?`?${v.toString()}`:""}`)},deleteSearchParam:f=>{const d=r(o).searchParams;d.delete(f),s(`${r(o).pathname}${d.size>0?`?${d.toString()}`:""}`)}});var c=ee(),u=z(c);Ee(u,()=>e.children??xe),_(t,c),se()}const Os={};function Tc(t){je(Os,t)}function Bs(){const t=He(Os);if(!t)throw new Error("No KeyboardVisibleContext found");return t}function Ac(t,e){oe(e,!0);let n=Ze({value:!1});const a=()=>n.value;ke(()=>{const i=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return i(),document.addEventListener("focusin",i),document.addEventListener("focusout",i),()=>{document.removeEventListener("focusin",i),document.removeEventListener("focusout",i)}}),Tc({getIsKeyboardVisible:a});var o=ee(),s=z(o);Ee(s,()=>e.children??xe),_(t,o),se()}function Nc(t,e){oe(e,!0);const n=crypto.randomUUID(),a=(i,l)=>{i.postMessage(JSON.stringify({...l,tabId:n}))};Ql({tabId:n,createBroadcastChannel:()=>{const i=new BroadcastChannel("app");return{postMessage:l=>a(i,l),addEventListener:l=>{i.addEventListener("message",l)},removeEventListener:l=>{i.removeEventListener("message",l)}}}});var o=ee(),s=z(o);Ee(s,()=>e.children??xe),_(t,o),se()}function Mc(t,e){kc(t,{children:(n,a)=>{Nc(n,{children:(o,s)=>{fc(o,{children:(i,l)=>{hc(i,{children:(c,u)=>{pc(c,{children:(f,d)=>{mc(f,{children:(v,m)=>{yc(v,{children:(h,y)=>{Sc(h,{children:(w,x)=>{Ac(w,{children:(A,k)=>{Pc(A,{children:(S,D)=>{xc(S,{children:(C,N)=>{var T=ee(),F=z(T);Ee(F,()=>e.children??xe),_(C,T)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function Lc(t,e){Mc(t,{children:(n,a)=>{Vl(n,{children:(o,s)=>{Fl(o,{children:(i,l)=>{Wl(i,{children:(c,u)=>{Kl(c,{children:(f,d)=>{Gl(f,{children:(v,m)=>{ac(v,{children:(h,y)=>{oc(h,{children:(w,x)=>{cc(w,{children:(A,k)=>{var S=ee(),D=z(S);Ee(D,()=>e.children??xe),_(A,S)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let Qt=W(""),pn=W(null),ca=W(null),ua=W(null);function qt(t,e){g(Qt,""),setTimeout(()=>{g(Qt,t,!0),e?.onFinish&&g(ca,e.onFinish,!0),e?.onCancel&&g(ua,e.onCancel,!0)},16)}const Ic=(t,e,n,a,o)=>{t.preventDefault(),r(e)&&(g(n,null),r(e)(),g(e,null)),g(a,""),r(o)?.style.removeProperty("opacity")};var Oc=U('<button type="button" class="undoButton svelte-1vxmgq5">undo</button>'),Bc=U('<div class="notification svelte-1vxmgq5"><span> </span> <!></div>'),Rc=U("<div><!></div>");function zc(t,e){oe(e,!0),Le(()=>{r(Qt);const s=r(ua)?2e3:800;r(Qt)&&(r(pn)?.getBoundingClientRect(),r(pn)?.style.setProperty("opacity","1"));const i=setTimeout(()=>{r(pn)?.style.removeProperty("opacity")},s),l=setTimeout(()=>{g(Qt,""),r(ca)&&r(ca)(),g(ca,null),g(ua,null),r(pn)?.style.removeProperty("opacity")},s+400);return()=>{clearTimeout(i),clearTimeout(l)}});var n=Rc(),a=b(n);{var o=s=>{var i=Bc(),l=b(i),c=b(l),u=H(l,2);{var f=d=>{var v=Oc();v.__click=[Ic,ua,ca,Qt,pn],_(d,v)};V(u,d=>{r(ua)&&d(f)})}at(i,d=>g(pn,d),()=>r(pn)),de(()=>rn(c,r(Qt))),_(s,i)};V(a,s=>{r(Qt)&&s(o)})}_(t,n),se()}Qe(["click"]);var Fc=U('<span class="vh svelte-s92gzo"><!></span>');function Ue(t,e){var n=Fc(),a=b(n);Ee(a,()=>e.children),_(t,n)}var Hc=ml('<svg class="svelte-18et5h9"><use></use></svg>');function _e(t,e){let n=we(e,"name",8,"");var a=Hc(),o=b(a);de(()=>Be(o,"href",`#icon-${n()??""}`)),_(t,a)}const jc=(t,e,n,a,o)=>{if(r(e))return;const s=n().type;s==="closed"?a():s==="opened"&&o()};var Vc=U('<button class="buttonMenu svelte-bpktnw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Rs(t,e){oe(e,!0);const{sidebarOpen:n,getSidebarState:a,sidebarClose:o}=er(),{getDialogPages:s}=wt(),{checkExistedDialog:i}=vn();let l=L(()=>s().length>0||i());var c=Vc();c.__click=[jc,l,a,n,o];var u=b(c);ue(u,()=>({"--size":"32px"})),_e(u.lastChild,{name:"sidebarMenu"});var f=H(u,2);Ue(f,{children:(d,v)=>{var m=Ie("Menu");_(d,m)}}),_(t,c),se()}Qe(["click"]);var Uc=(t,e)=>e.onChange?.(t.target?.value||""),Wc=(t,e,n)=>{e(""),n.onChange?.("")},qc=U('<button class="clearButton svelte-15lr19w"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Kc=U('<div class="block svelte-15lr19w"><input class="svelte-15lr19w"/> <!></div>');function kr(t,e){oe(e,!0);let n=we(e,"value",15,""),a=we(e,"ref",15,null);const o=u=>{u.key==="Escape"&&(n(""),e.onChange?.(""))};ke(()=>(document.addEventListener("keydown",o),()=>{document.removeEventListener("keydown",o)}));var s=Kc(),i=b(s);i.__input=[Uc,e],at(i,u=>a(u),()=>a());var l=H(i,2);{var c=u=>{var f=qc();f.__click=[Wc,n,e];var d=b(f);ue(d,()=>({"--size":"20px"})),_e(d.lastChild,{name:"close"});var v=H(d,2);Ue(v,{children:(m,h)=>{var y=Ie("Clear");_(m,y)}}),_(u,f)};V(l,u=>{n()&&u(c)})}de(()=>Be(i,"placeholder",e.placeholder)),Br("focus",i,function(...u){e.onFocus?.apply(this,u)}),Ll(i,n),_(t,s),se()}Qe(["input","click"]);function Vr(t,e){oe(e,!0),ke(()=>{const n=a=>{a.target&&e.dialog?.open&&e.dialogInner&&e.dialogInner!==a.target&&!e.dialogInner.contains(a.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),se()}var Yc=U('<dialog><div class="dialogInner svelte-1x410nl"><!></div></dialog> <!>',1);function ba(t,e){oe(e,!0);let n=W(null),a=W(null),o=W(!1),{showDialog:s,hideDialog:i}=vn();const l=h=>{h?.preventDefault();const y=setTimeout(()=>{e.onClosed()},150);r(n)?.addEventListener("transitionend",()=>{clearTimeout(y),e.onClosed()},{once:!0}),g(o,!1)};Le(()=>{e.startClose&&l()}),ke(()=>(r(n)?.showModal(),r(n)?.getClientRects(),g(o,!0),r(n)?.addEventListener("cancel",l),r(n)?.addEventListener("close",l),()=>{r(n)?.removeEventListener("cancel",l),r(n)?.removeEventListener("close",l)})),ke(()=>(s(),()=>{i()}));var c=Yc(),u=z(c),f=b(u),d=b(f);Ee(d,()=>e.children),at(f,h=>g(a,h),()=>r(a)),at(u,h=>g(n,h),()=>r(n));var v=H(u,2);{var m=h=>{Vr(h,{get dialog(){return r(n)},get dialogInner(){return r(a)},onClose:l})};V(v,h=>{r(n)&&r(a)&&h(m)})}de(()=>pe(u,1,ge(["dialog",{shown:r(o)}]),"svelte-1x410nl")),_(t,c),se()}var Gc=U("<div><!></div>");function nr(t,e){oe(e,!0);let n=we(e,"transformOrigin",3,"top right"),a=W(!1),o=W(null);const s=()=>{const d=setTimeout(()=>{e.onClosed()},150);r(o)?.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),g(a,!1)},i=d=>{d.target!==r(o)&&!r(o)?.contains(d.target)&&s()},l=d=>{d.target!==r(o)&&!r(o)?.contains(d.target)&&s()},c=d=>{d.key==="Escape"&&s()};ke(()=>{r(o)?.getClientRects(),g(a,!0);const d=setTimeout(()=>{document.addEventListener("focusin",i),document.addEventListener("click",l),document.addEventListener("keydown",c)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",i),document.removeEventListener("click",l),document.removeEventListener("keydown",c)}}),Le(()=>{e.startClose&&s()});var u=Gc(),f=b(u);Ee(f,()=>e.children),at(u,d=>g(o,d),()=>r(o)),de(()=>{Pn(u,`transform-origin: ${e.positionTop?"top right":n()};`),pe(u,1,ge(["menu",{top:e.positionTop,shown:r(a)}]),"svelte-ujw4xi")}),_(t,u),se()}const Xc=(t,e)=>{r(e)||g(e,!0)};var Zc=(t,e)=>e("newest"),Jc=(t,e)=>e("oldest"),Qc=(t,e)=>e("AtoZ"),$c=(t,e)=>e("ZtoA"),eu=U("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),tu=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),nu=U('<div class="orderMenu svelte-14zj87s"><button><!> <!></button> <!></div>');function au(t,e){oe(e,!0);const n=(A,k=xe)=>{var S=eu(),D=b(S);D.__click=[Zc,f];var C=H(D,2);C.__click=[Jc,f];var N=H(C,2);N.__click=[Qc,f];var T=H(N,2);T.__click=[$c,f],de(()=>{pe(S,1,ge(["menu",{menuDialog:k()}]),"svelte-14zj87s"),pe(D,1,ge(["menuButton",{menuButtonDialog:k(),current:r(u)==="newest"}]),"svelte-14zj87s"),pe(C,1,ge(["menuButton",{menuButtonDialog:k(),current:r(u)==="oldest"}]),"svelte-14zj87s"),pe(N,1,ge(["menuButton",{menuButtonDialog:k(),current:r(u)==="AtoZ"}]),"svelte-14zj87s"),pe(T,1,ge(["menuButton",{menuButtonDialog:k(),current:r(u)==="ZtoA"}]),"svelte-14zj87s")}),_(A,S)};let a=W(!1),o=W(!1);const{checkMobileSize:s}=Zt(),{getFeedOrder:i,setFeedOrder:l}=_s();let c=L(s),u=L(i);const f=A=>{g(o,!0),l(A)},d=()=>{g(a,!1),g(o,!1)};ke(()=>{const A=k=>{k.key==="Escape"&&g(o,!0)};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)});var v=nu(),m=b(v);m.__click=[Xc,a],pe(m,1,ge(["button","buttonMenu"]),"svelte-14zj87s");var h=b(m);_e(h,{name:"filter"});var y=H(h,2);Ue(y,{children:(A,k)=>{var S=Ie("show feed order menu");_(A,S)}});var w=H(m,2);{var x=A=>{var k=ee(),S=z(k);{var D=N=>{ba(N,{get startClose(){return r(o)},onClosed:d,children:(T,F)=>{n(T,()=>!0)},$$slots:{default:!0}})},C=N=>{var T=tu(),F=z(T);ue(F,()=>({"--right":"20px","--top":"60px"})),nr(F.lastChild,{get startClose(){return r(o)},onClosed:d,children:(te,ie)=>{n(te,()=>!1)},$$slots:{default:!0}}),_(N,T)};V(S,N=>{r(c)?N(D):N(C,!1)})}_(A,k)};V(w,A=>{r(a)&&A(x)})}_(t,v),se()}Qe(["click"]);var Q=(t=>(t.NewNote="newNote",t.EditNote="editNote",t.Settings="settings",t.ImportData="importData",t.ExportData="exportData",t.ClearStore="clearStore",t.Account="account",t.Sync="sync",t.AccountSetup="accountSetup",t.Auth="auth",t.Signin="signin",t.Signup="signup",t.AccessKeys="accessKeys",t.ConfirmAccessKey="confirmAccessKey",t.Subscription="subscription",t.Exit="exit",t.NotFound="notFound",t.About="about",t.Bin="bin",t.Install="install",t.InstallSuccess="installSuccess",t.Welcome="welcome",t))(Q||{}),ru=U("<a><!></a>"),ou=U("<button><!></button>");function on(t,e){let n=we(e,"type",3,"standard"),a=we(e,"typeButton",3,"button"),o=we(e,"element",3,"button"),s=we(e,"href",3,""),i=we(e,"fullWidth",3,!1),l=we(e,"withoutMinWidth",3,!1);var c=ee(),u=z(c);{var f=v=>{var m=ru();m.__click=function(...y){e.onClick?.apply(this,y)};var h=b(m);Ee(h,()=>e.children??xe),de(()=>{Be(m,"target",e.target),Be(m,"rel",e.rel),Be(m,"href",s()),pe(m,1,ge(["button","a",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(v,m)},d=v=>{var m=ou();m.__click=function(...y){e.onClick?.apply(this,y)};var h=b(m);Ee(h,()=>e.children??xe),de(()=>{Be(m,"type",a()),pe(m,1,ge(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:i(),withoutMinWidth:l()}]),"svelte-aqjevc")}),_(v,m)};V(u,v=>{o()==="a"?v(f):v(d,!1)})}_(t,c)}Qe(["click"]);var su=U('<div class="block svelte-1dzbsx4"><span class="title svelte-1dzbsx4"> </span> <div class="controls svelte-1dzbsx4"><!> <!></div></div>');function Ur(t,e){oe(e,!0);let n=we(e,"buttonCancelTitle",3,"Cancel"),a=we(e,"buttonConfirmTitle",3,"Confirm"),o=W(!1),s=W(!1);const i=()=>{g(o,!0)},l=()=>{g(o,!0),g(s,!0)};ba(t,{get startClose(){return r(o)},onClosed:()=>{r(s)?e.onConfirm():e.onCancel()},children:(u,f)=>{var d=su(),v=b(d),m=b(v),h=H(v,2),y=b(h);on(y,{onClick:i,fullWidth:!0,withoutMinWidth:!0,type:"secondary",children:(x,A)=>{var k=Ie();de(()=>rn(k,n())),_(x,k)},$$slots:{default:!0}});var w=H(y,2);on(w,{onClick:l,fullWidth:!0,withoutMinWidth:!0,type:"dangerous",children:(x,A)=>{var k=Ie();de(()=>rn(k,a())),_(x,k)},$$slots:{default:!0}}),de(()=>rn(m,e.title)),_(u,d)},$$slots:{default:!0}}),se()}const ga=t=>{const e=n=>{const a=n.target,o=a?.tagName;if(o==="INPUT"||o==="TEXTAREA"||a?.isContentEditable)return;const s=n.key.toLowerCase(),i=n.metaKey,l=n.ctrlKey,c=n.shiftKey;if(s===t.key&&!!t.meta==!!i&&!!t.ctrl==!!l&&!!t.shift==!!c){n.preventDefault(),t.action();return}};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}};var iu=U('<div class="block svelte-lfflvc"><a class="buttonAdd svelte-lfflvc"><span class="mobile svelte-lfflvc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></span> <span class="desktop svelte-lfflvc"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span></span></a></div>');function lu(t,e){oe(e,!1);const{createDialogPageHref:n,createHandleClickDialogPage:a,getDialogPages:o,pushDialogPage:s}=wt(),{checkExistedDialog:i}=vn(),l=()=>{o.length===0&&!i()&&s(Q.NewNote)};ke(()=>ga({key:"n",action:l})),$a();var c=iu(),u=b(c),f=L(()=>a(Q.NewNote));u.__click=function(...w){r(f)?.apply(this,w)};var d=b(u),v=b(d);ue(v,()=>({"--size":"32px","--color":"#b0b0b0"})),_e(v.lastChild,{name:"add"});var m=H(v,2);Ue(m,{children:(w,x)=>{var A=Ie("Add note");_(w,A)}});var h=H(d,2),y=b(h);ue(y,()=>({"--size":"16px","--color":"#b0b0b0"})),_e(y.lastChild,{name:"plus"}),de(w=>Be(u,"href",w),[()=>n(Q.NewNote)]),_(t,c),se()}Qe(["click"]);var cu=U("<button><!></button>");function uu(t,e){oe(e,!0);let n=we(e,"type",3,"button"),a=!1,o=W(null);Le(()=>{e.onRef&&e.onRef(r(o))});const s=u=>{(u.key==="Enter"||u.key===" ")&&(a=!0)},i=()=>{e.onClick(a),a&&(a=!1)};var l=cu();l.__keydown=s,l.__click=i;var c=b(l);Ee(c,()=>e.children??xe),at(l,u=>g(o,u),()=>r(o)),de(()=>{Be(l,"type",n()),pe(l,1,ge([{selectedTag:e.style==="selected",small:e.size==="small",empty:e.mode==="empty"}]),"svelte-uu8a24")}),_(t,l),se()}Qe(["keydown","click"]);const du=(t,e,n,a)=>{e(n.tag,!0),g(a,!0)},dr=(t,e,n,a)=>{e(n.tag,!1),g(a,!0)},fu=(t,e,n)=>{t.stopPropagation(),t.preventDefault(),r(e)?g(n,!0):g(e,!0)};var vu=U('<li class="svelte-16ablwx"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin</button></li>'),hu=U('<li class="svelte-16ablwx"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin</button></li>'),gu=U('<ul><!> <li class="svelte-16ablwx"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Rename</button></li> <li class="svelte-16ablwx"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete</button></li></ul>'),pu=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),_u=U('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),mu=U("<!> <span> </span> <!>",1),wu=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),yu=U('<div class="block svelte-16ablwx"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></div>');function zs(t,e){oe(e,!0);const n=(S,D=xe)=>{var C=gu(),N=b(C);{var T=K=>{var $=vu(),ne=b($);ne.__click=[du,a,e,c];var X=b(ne);ue(X,()=>({"--size":"22px"})),_e(X.lastChild,{name:"pin"}),de(()=>pe(ne,1,ge(["button",{buttonMenuDialog:D()}]),"svelte-16ablwx")),_(K,$)},F=K=>{var $=hu(),ne=b($);ne.__click=[dr,a,e,c];var X=b(ne);ue(X,()=>({"--size":"22px"})),_e(X.lastChild,{name:"pin-cancel"}),de(()=>pe(ne,1,ge(["button",{buttonMenuDialog:D()}]),"svelte-16ablwx")),_(K,$)};V(N,K=>{r(d)?K(F,!1):K(T)})}var te=H(N,2),ie=b(te);ie.__click=[dr,a,e,c];var B=b(ie);ue(B,()=>({"--size":"22px"})),_e(B.lastChild,{name:"note"});var Z=H(te,2),G=b(Z);G.__click=[dr,a,e,c];var q=b(G);ue(q,()=>({"--size":"22px"})),_e(q.lastChild,{name:"bin"}),de(()=>{pe(C,1,ge(["menu",{menuDialog:D()}]),"svelte-16ablwx"),pe(ie,1,ge(["button",{buttonMenuDialog:D()}]),"svelte-16ablwx"),pe(G,1,ge(["button",{buttonMenuDialog:D()}]),"svelte-16ablwx")}),_(S,C)},{pinTag:a,getGetMapTags:o}=dn(),{checkMobileSize:s}=Zt();let i=W(null),l=W(!1),c=W(!1);const u=()=>{g(l,!1),g(c,!1)};let f=L(()=>r(l)?r(i)?.getBoundingClientRect():null),d=L(()=>o()().get(e.tag)?.pinned||!1),v=L(()=>e.mode==="notes"&&!(e.tag==="inbox"||e.tag==="drafts")),m=L(()=>(r(f)?.left||0)<170?"-100px":"0px"),h=L(()=>window.innerHeight-(r(f)?.bottom||0)<170?"auto":"100%"),y=L(()=>window.innerHeight-(r(f)?.bottom||0)<170?"100%":"auto");var w=yu(),x=b(w);ue(x,()=>({"--paddingRight":r(v)?"24px":void 0})),uu(x.lastChild,{get style(){return e.style},get onRef(){return e.onRef},get onClick(){return e.onClick},children:(S,D)=>{var C=mu(),N=z(C);{var T=Z=>{var G=pu(),q=z(G);ue(q,()=>({"--size":"18px"})),_e(q.lastChild,{name:"pin"}),_(Z,G)};V(N,Z=>{r(d)&&Z(T)})}var F=H(N,2),te=b(F),ie=H(F,2);{var B=Z=>{var G=_u();G.__click=[fu,l,c];var q=b(G);ue(q,()=>({"--size":"16px"})),_e(q.lastChild,{name:"menu"});var K=H(q,2);Ue(K,{children:($,ne)=>{var X=Ie("Tag options");_($,X)}}),at(G,$=>g(i,$),()=>r(i)),de(()=>pe(G,1,ge({buttonMenu:!0,selected:e.style==="selected"}),"svelte-16ablwx")),_(Z,G)};V(ie,Z=>{r(v)&&Z(B)})}de(()=>rn(te,e.tag)),_(S,C)},$$slots:{default:!0}});var A=H(x,2);{var k=S=>{var D=ee(),C=z(D);{var N=F=>{ba(F,{get startClose(){return r(c)},onClosed:u,children:(te,ie)=>{n(te,()=>!0)},$$slots:{default:!0}})},T=F=>{var te=wu(),ie=z(te);ue(ie,()=>({"--right":r(m),"--top":r(h),"--bottom":r(y)})),nr(ie.lastChild,{transformOrigin:"top",get startClose(){return r(c)},onClosed:u,children:(B,Z)=>{n(B,()=>!1)},$$slots:{default:!0}}),_(F,te)};V(C,F=>{s()?F(N):F(T,!1)})}_(S,D)};V(A,S=>{r(l)&&S(k)})}_(t,w),se()}Qe(["click"]);var bu=U('<div class="block svelte-1c53r32"><div></div></div>');function vo(t,e){oe(e,!0);let n=we(e,"mobile",3,!1);const{getGetMapTags:a}=dn();let o=W(null),s=W(Ze({value:!1}));const i=d=>{g(o,d,!0)};let c=L(()=>{const d=a()();return[...e.tags].sort((v,m)=>d.get(v)?.pinned?-1:d.get(m)?.pinned?1:v==="inbox"?-1:m==="inbox"?1:v==="drafts"?-1:m==="drafts"?1:v.localeCompare(m))});Le(()=>{r(s),Bt(()=>{r(o)&&r(s).value&&r(o).focus()})});var u=bu(),f=b(u);Qa(f,22,()=>r(c),d=>d,(d,v,m)=>{{let h=L(()=>r(m)===0?i:void 0);zs(d,{get mode(){return e.mode},get tag(){return v},get onRef(){return r(h)},onClick:y=>{y?g(s,{value:!0},!0):g(s,{value:!1},!0),e.handleTagClick(v)}})}}),de(()=>pe(f,1,ge(["tags",{mobile:n()}]),"svelte-1c53r32")),_(t,u),se()}const Su=t=>{try{new URL(t)}catch{return!1}return!0},Cu=(t,e)=>{r(e)||g(e,!0)},Eu=(t,e,n,a)=>{for(const o of e())o==="inbox"||o==="drafts"||n(o,!0);g(a,!0)},ku=(t,e,n,a)=>{for(const o of e())o==="inbox"||o==="drafts"||n(o,!1);g(a,!0)},Du=(t,e,n,a,o,s)=>{const i=Array.from(e());n(i),a.clearTags(),qt("Notes moved to bin",{onCancel:()=>{e(new Set(i)),o(i)}}),g(s,!0)},xu=(t,e,n)=>{g(e,!0),g(n,!0)},Pu=(t,e,n,a,o,s)=>{const i=Array.from(e());n(i),a.clearTags(),qt("Notes restored",{onCancel:()=>{e(new Set(i)),o(i)}}),g(s,!0)},Tu=(t,e)=>{e.clearTags()},Au=(t,e,n,a)=>{const o=e()(),s=Array.from(n());for(const i of o)i.data&&i.data?.url&&Su(i.data?.url)&&s.every(l=>i.data?.tags.includes(l))&&window.open(i.data?.url,"_blank");g(a,!0)};var Nu=U('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Pin</button></li>'),Mu=U('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Unpin</button></li>'),Lu=U('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Move to Bin</button></li>'),Iu=U('<li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Restore</button></li> <li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Delete notes</button></li>',1),Ou=U('<ul><li class="svelte-58z9m1"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> Open links</button></li> <!> <!> <!> <!></ul>'),Bu=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Ru=U('<div class="block svelte-58z9m1"><div class="tagsMenu__wrapper svelte-58z9m1"><button class="tagsMenu svelte-58z9m1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <div><div class="clearButton_wrapper svelte-58z9m1"><button class="clearButton svelte-58z9m1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></div> <!></div>'),zu=U("<!> <!>",1);function ho(t,e){oe(e,!0);const n=(G,q=xe)=>{var K=Ou(),$=b(K),ne=b($);ne.__click=[Au,l,a,w];var X=b(ne);ue(X,()=>({"--size":"22px"})),_e(X.lastChild,{name:"open"});var ae=H($,2);{var I=re=>{var le=Nu(),P=b(le);P.__click=[Eu,a,c,w];var O=b(P);ue(O,()=>({"--size":"22px"})),_e(O.lastChild,{name:"pin"}),de(()=>pe(P,1,ge(["button",{buttonMenuDialog:q()}]),"svelte-58z9m1")),_(re,le)};V(ae,re=>{o()==="notes"&&r(N)&&[...a()].filter(le=>le!=="inbox"&&le!=="drafts").length>0&&re(I)})}var R=H(ae,2);{var Y=re=>{var le=Mu(),P=b(le);P.__click=[ku,a,c,w];var O=b(P);ue(O,()=>({"--size":"22px"})),_e(O.lastChild,{name:"pin-cancel"}),de(()=>pe(P,1,ge(["button",{buttonMenuDialog:q()}]),"svelte-58z9m1")),_(re,le)};V(R,re=>{o()==="notes"&&r(C)&&[...a()].filter(le=>le!=="inbox"&&le!=="drafts").length>0&&re(Y)})}var ce=H(R,2);{var ve=re=>{var le=Lu(),P=b(le);P.__click=[Du,a,u,e,f,w];var O=b(P);ue(O,()=>({"--size":"22px"})),_e(O.lastChild,{name:"bin"}),de(()=>pe(P,1,ge(["button",{buttonMenuDialog:q()}]),"svelte-58z9m1")),_(re,le)};V(ce,re=>{o()==="notes"&&re(ve)})}var ye=H(ce,2);{var be=re=>{var le=Iu(),P=z(le),O=b(P);O.__click=[Pu,a,f,e,u,w];var p=b(O);ue(p,()=>({"--size":"22px"})),_e(p.lastChild,{name:"bin-cancel"});var E=H(P,2),j=b(E);j.__click=[xu,w,x];var J=b(j);ue(J,()=>({"--size":"22px"})),_e(J.lastChild,{name:"bin"}),de(()=>{pe(O,1,ge(["button",{buttonMenuDialog:q()}]),"svelte-58z9m1"),pe(j,1,ge(["button",{buttonMenuDialog:q()}]),"svelte-58z9m1")}),_(re,le)};V(ye,re=>{o()==="bin"&&re(be)})}de(()=>{pe(K,1,ge(["menu",{menuDialog:q()}]),"svelte-58z9m1"),pe(ne,1,ge(["button",{buttonMenuDialog:q()}]),"svelte-58z9m1")}),_(G,K)};let a=we(e,"selectedTags",7),o=we(e,"mode",3,"notes");const{checkMobileSize:s}=Zt(),{getGetMapTags:i,getGetNotes:l,pinTag:c,moveNotesToBinByTags:u,restoreNotesFromBinByTags:f,deleteNotesByTags:d}=dn();let v=L(s),m=W(null),h=W(Ze({value:!1})),y=W(!1),w=W(!1),x=W(!1);const A=G=>{g(m,G,!0)},k=()=>{g(y,!1),g(w,!1)},S=()=>{const G=i()();for(const q of a())if(!(q==="inbox"||q==="drafts")&&G.get(q)?.pinned)return!0;return!1},D=()=>{const G=i()();for(const q of a())if(!(q==="inbox"||q==="drafts")&&!G.get(q)?.pinned)return!0;return!1};let C=L(S),N=L(D);const T=()=>{d(Array.from(a())),e.clearTags(),g(w,!0)};Le(()=>{r(h),Bt(()=>{r(m)&&r(h).value&&r(m).focus()})});var F=zu(),te=z(F);{var ie=G=>{Ur(G,{title:"Are you sure you want to delete notes?",buttonConfirmTitle:"Delete",onConfirm:()=>{T(),g(x,!1)},onCancel:()=>{g(x,!1)}})};V(te,G=>{r(x)&&G(ie)})}var B=H(te,2);{var Z=G=>{var q=Ru(),K=b(q),$=b(K);$.__click=[Cu,y];var ne=b($);ue(ne,()=>({"--rotate":"-90deg","--size":"20px"})),_e(ne.lastChild,{name:"menu"});var X=H(ne,2);Ue(X,{children:(re,le)=>{var P=Ie("tags menu");_(re,P)}});var ae=H(K,2);pe(ae,1,ge(["tags","selectedTags"]),"svelte-58z9m1");var I=b(ae),R=b(I);R.__click=[Tu,e];var Y=b(R);ue(Y,()=>({"--size":"20px"})),_e(Y.lastChild,{name:"close"});var ce=H(Y,2);Ue(ce,{children:(re,le)=>{var P=Ie("Clear");_(re,P)}});var ve=H(I,2);Qa(ve,18,a,re=>re,(re,le,P)=>{{let O=L(()=>r(P)===a().size-1?A:void 0);zs(re,{get mode(){return o()},get tag(){return le},style:"selected",onClick:p=>{p?g(h,{value:!0},!0):g(h,{value:!1},!0),e.handleSelectedTagClick(le)},get onRef(){return r(O)}})}});var ye=H(ae,2);{var be=re=>{var le=ee(),P=z(le);{var O=E=>{ba(E,{get startClose(){return r(w)},onClosed:k,children:(j,J)=>{n(j,()=>!0)},$$slots:{default:!0}})},p=E=>{var j=Bu(),J=z(j);ue(J,()=>({"--right":"0","--top":"10px"})),nr(J.lastChild,{transformOrigin:"top",get startClose(){return r(w)},onClosed:k,children:(he,Pe)=>{n(he,()=>!1)},$$slots:{default:!0}}),_(E,j)};V(P,E=>{r(v)?E(O):E(p,!1)})}_(re,le)};V(ye,re=>{r(y)&&re(be)})}_(G,q)};V(B,G=>{a().size>0&&G(Z)})}_(t,F),se()}Qe(["click"]);const Fu=(t,e,n)=>{if(t.has("inbox"))return[];const a=[],o=Array.from(t.values()).filter(s=>s!=="drafts");for(const s of e)if(s.data&&!(n&&!n(s))){if(t.size===0){for(const i of s?.data?.tags||[])a.includes(i)||a.push(i);for(const i of s?.data?.draft?.tags||[])a.includes(i)||a.push(i);continue}if(s.data&&o.every(i=>s.data?.tags.includes(i)))for(const i of s.data.tags)t.has("drafts")&&!s.data.draft||!t.has(i)&&!a.includes(i)&&a.push(i);if(s&&s.data.draft&&o.every(i=>s.data?.draft?.tags.includes(i)))for(const i of s.data.draft.tags)t.has("drafts")&&!s.data.draft||!t.has(i)&&!a.includes(i)&&a.push(i)}return a};function Hu(t,e){oe(e,!0);const n=fn(),{getIsKeyboardVisible:a}=Bs();let o=we(e,"dialog",7);const s=L(a),i=3,l=50,c=5,u=.6,f=.3,d=.35,v=.95;let m=0,h=0,y=0,w=!1,x=!1,A=0,k=0,S=0;const D=()=>{m=0,h=0,w=!1,x=!1,A=0,k=0,S=0,y=0,C!==null&&(cancelAnimationFrame(C),C=null),N=null};let C=null,N=null;const T=K=>{if(!o()){console.warn("Touch start: No dialog element");return}if(e.sidebarState!=="opened"&&e.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${e.sidebarState}`);return}m=K.touches[0].clientX,h=K.touches[0].clientY,y=performance.now(),w=!0,x=!1},F=K=>e.sidebarState==="closed"&&K>0||e.sidebarState==="closeSwiping"&&K>0||e.sidebarState==="opened"&&K<0||e.sidebarState==="openSwiping"&&K<0,te=()=>{if(o()){if(o().style.setProperty("--transition-timing","0s"),!o().open&&e.sidebarState==="closed")try{o().showModal(),o().offsetWidth}catch(K){console.error("Error opening dialog:",K);return}e.onSwipe();try{const K=window.getComputedStyle(o()),$=K.transform||K.webkitTransform||"";if(k=o().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?A=-k:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(A=0),$&&$!=="none")try{A=new DOMMatrix($).m41}catch{console.warn("Could not parse transform matrix, using default position")}x=!0}catch(K){console.error("Error during swipe initialization:",K),D()}}},ie=()=>{if(C=null,!N||!w||!o()||r(s))return;const{x:K,y:$}=N;N=null;const ne=K-m,X=$-h,ae=Math.abs(ne)>Math.abs(X),I=Math.abs(ne)>i;if(!x)if(ae&&I&&F(ne))try{te()}catch(be){console.error("Error initializing swipe:",be),D();return}else return;let R=A+ne*v;const Y=-k,ce=-(k*.3);let ve=Math.max(Y,Math.min(ce,R));o().style.setProperty("--transition-timing","0s"),o().style.transform=`translate3d(${ve}px, 0, 0)`;const ye=Math.min(1,Math.max(0,(ve-Y)/(ce-Y)));n.swipingRatio=(-1+Math.abs(ve/k))/7*10,S=(ve-A)/k*100,o().style.setProperty("--backdrop-bg",`${ye*.25}`)},B=K=>{if(!w)return;const $=K.touches[0].clientX,ne=K.touches[0].clientY;N={x:$,y:ne},C===null&&(C=requestAnimationFrame(ie)),x&&Math.abs($-m)>Math.abs(ne-h)&&K.preventDefault()},Z=K=>{const $=Math.abs(K);if($>=u)return c;if($>=f){const ne=($-f)/(u-f);return l-ne*(l-c)}else return l},G=(K,$)=>{if(Math.abs(K)>=u)return d*.5;const X=Math.abs(S)/100;return $?d*Math.max(.5,1-X):d*Math.max(.5,X)},q=K=>{if(C!==null&&(cancelAnimationFrame(C),C=null),N=null,!w||!o()){D();return}if(!x){D();return}let $=0;if(K?.changedTouches?.[0]){const R=K.changedTouches[0].clientX,ce=performance.now()-y;ce>0&&($=(R-m)/ce)}const ne=Z($);let X=null;e.sidebarState==="closeSwiping"?X=Math.abs(S)>ne||$>f?"open":"close":e.sidebarState==="openSwiping"&&(X=Math.abs(S)>ne||$<-f?"close":"open");const ae=e.sidebarState==="closeSwiping"&&X==="open"||e.sidebarState==="openSwiping"&&X==="close",I=G($,ae);n.duration=I-.02,o().style.setProperty("--transition-timing",`${I}s`),o().offsetWidth,o().style.transform="",X==="open"?e.onOpen():X==="close"&&e.onClose(),o()?.style.removeProperty("--backdrop-bg"),D()};ke(()=>(document.addEventListener("touchstart",T,{passive:!0}),document.addEventListener("touchmove",B,{passive:!1}),document.addEventListener("touchend",q,{passive:!0}),document.addEventListener("touchcancel",q,{passive:!0}),()=>{document.removeEventListener("touchstart",T),document.removeEventListener("touchmove",B),document.removeEventListener("touchend",q),document.removeEventListener("touchcancel",q),C!==null&&cancelAnimationFrame(C)})),se()}var ju=U('<dialog><div class="dialogInner svelte-1nov8pn"><!></div></dialog> <!> <!>',1);function Vu(t,e){oe(e,!0);const{getDialogPages:n}=wt(),{getSidebarState:a,handleComputeState:o}=er();let s=350;const i=fn(),{isScrolling:l}=Fr();let c=W(null),u=W(null),f=L(a);Le(()=>{n().length>0&&o({type:"close"})});const d=()=>{e.blocked||o({type:"close"})},v=()=>{e.blocked||o({type:"open"})},m=()=>{o({type:"opened"}),i.swipingRatio=-1,i.duration=.2},h=()=>{o({type:"closed"})},y=()=>{o({type:"swipe"})},w=B=>{B.preventDefault(),d()};ke(()=>(r(c)?.addEventListener("close",h),r(c)?.addEventListener("cancel",w),()=>{r(c)?.removeEventListener("close",h),r(c)?.removeEventListener("cancel",w)}));const x=()=>{r(c)?.style.removeProperty("--transition-timing"),r(c)?.style.removeProperty("transform"),r(c)?.style.removeProperty("--backdrop-bg")},A=L(l);Le(()=>{if(r(f),!!r(c))switch(r(f).type==="openSwiping"||r(f).type==="closeSwiping"?i.isSwiping=!0:i.isSwiping=!1,r(f).type){case"closeSwiping":{const B=setTimeout(()=>{d()},3e3);return()=>{clearTimeout(B)}}case"openSwiping":{const B=setTimeout(()=>{v()},3e3);return()=>{clearTimeout(B)}}case"opening":{r(c).open||r(c).showModal(),r(c).getBoundingClientRect();const B=setTimeout(()=>{x()},s+1),Z=()=>{clearTimeout(B),x()};return r(c)?.addEventListener("transitionend",Z,{once:!0}),m(),()=>{clearTimeout(B),r(c)?.removeEventListener("transitionend",Z)}}case"closing":{i.swipingRatio=0,i.duration=.2;const B=setTimeout(()=>{r(f).type==="closing"&&h()},s+1),Z=()=>{clearTimeout(B),h()};return r(c)?.addEventListener("transitionend",Z,{once:!0}),()=>{clearTimeout(B),r(c)?.removeEventListener("transitionend",Z)}}case"closed":r(c)?.close(),x();break;case"opened":x();break}}),ke(()=>{r(f).type==="opened"&&o({type:"open"})});var k=ju(),S=z(k),D=b(S),C=b(D);{var N=B=>{var Z=ee(),G=z(Z);Ee(G,()=>e.children),_(B,Z)};V(C,B=>{r(f).type!=="closed"&&B(N)})}at(D,B=>g(u,B),()=>r(u)),at(S,B=>g(c,B),()=>r(c));var T=H(S,2);{var F=B=>{Vr(B,{get dialog(){return r(c)},get dialogInner(){return r(u)},onClose:d})};V(T,B=>{r(f).type==="opened"&&!e.blocked&&B(F)})}var te=H(T,2);{var ie=B=>{Hu(B,{onClose:d,onOpen:v,onSwipe:y,get sidebarState(){return r(f).type},get dialog(){return r(c)}})};V(te,B=>{(!r(A)&&r(f).type==="closed"||r(f).type==="opened"||r(f).type==="openSwiping"||r(f).type==="closeSwiping")&&!e.blocked&&B(ie)})}de(()=>pe(S,1,ge([{open:r(f).type==="opened",isAnimationOn:i.working&&(!i.isSwiping||!e.blocked)}]),"svelte-1nov8pn")),_(t,k),se()}var Uu=(t,e,n)=>{t.preventDefault(),e(),n("/")},Wu=U('<a class="link svelte-ltt61h" href="/"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),qu=(t,e,n)=>{t.preventDefault(),e(),n(`/${Q.Bin}`)},Ku=U('<a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>'),Yu=U('<div class="sidebarFixed svelte-ltt61h"><div class="nav svelte-ltt61h"><!> <div class="menu svelte-ltt61h"><a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="link svelte-ltt61h"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <!></div></div> <div class="searchWrapper svelte-ltt61h"><!></div> <!></div> <!>',1),Gu=U('<div class="desktopSidebar svelte-ltt61h"><div class="searchWrapper svelte-ltt61h"><!></div> <div class="sidebar svelte-ltt61h"><div class="sidebarFixed svelte-ltt61h"><!></div> <!></div></div>');function Xu(t,e){oe(e,!0);const{checkMobileSize:n}=Zt(),{sidebarClose:a,getSidebarState:o,sidebarOpen:s}=er(),{getAppLocation:i,replace:l}=Dt(),{getDialogPages:c,createDialogPageHref:u,createHandleClickDialogPage:f}=wt(),{getTagsSearch:d,setTagsSearch:v}=jl(),m=L(()=>i().pathname),{getSelectedTags:h,addTag:y,removeTag:w,clearTags:x}=ys();let A=L(h);const{checkNotesInBin:k,getGetNotes:S}=dn(),D=L(S);let C=L(()=>r(m)==="/bin"?"bin":"notes");const N=I=>{y(I)},T=I=>{w(I)};let F=L(()=>r(A).size===0&&!r(A).has("inbox")&&(r(D)()||[]).some(I=>(r(C)==="notes"&&I?.data&&!I.data.deletedAt||r(C)==="bin"&&I?.data&&I.data.deletedAt)&&I?.data?.tags.length===0&&(!I?.data?.draft||I?.data?.draft?.tags.length===0))),te=L(()=>!r(A).has("drafts")&&(r(D)()||[]).filter(I=>r(A).size===0||I.data?.tags.every(R=>r(A).has(R))||I.data?.draft?.tags.every(R=>r(A).has(R))).some(I=>(r(C)==="notes"&&I?.data&&!I.data.deletedAt||r(C)==="bin"&&I?.data&&I.data.deletedAt)&&I.data?.draft)),ie=L(()=>Fu(r(A),r(D)()||[],I=>!(I?.data&&I.data.deletedAt&&r(C)==="notes"||I?.data&&!I.data.deletedAt&&r(C)==="bin"))),B=L(()=>[...r(F)?["inbox"]:[],...r(te)&&(!r(A).has("inbox")||r(F))?["drafts"]:[],...r(ie)].filter(I=>d()===""||I.toLowerCase().indexOf(d().toLowerCase())!==-1)),Z=L(n);const{checkExistedDialog:G}=vn();let q=L(()=>c().length>0||G());const K=()=>{if(r(Z)){if(r(q))return;o().type==="opened"?a():o().type==="closed"&&s()}};ke(()=>ga({key:"b",meta:!0,action:K})),ke(()=>ga({key:"b",ctrl:!0,action:K}));var $=ee(),ne=z($);{var X=I=>{Vu(I,{get blocked(){return r(q)},children:(R,Y)=>{var ce=Yu(),ve=z(ce),ye=b(ve),be=b(ye);Rs(be,{});var re=H(be,2),le=b(re),P=L(()=>f(Q.Settings));le.__click=function(...Ne){r(P)?.apply(this,Ne)};var O=b(le);ue(O,()=>({"--size":"24px"})),_e(O.lastChild,{name:"settings"});var p=H(O,2);Ue(p,{children:(Ne,Ye)=>{var $e=Ie("Settings");_(Ne,$e)}});var E=H(le,2),j=L(()=>f(Q.Sync));E.__click=function(...Ne){r(j)?.apply(this,Ne)};var J=b(E);ue(J,()=>({"--size":"24px"})),_e(J.lastChild,{name:"sync"});var he=H(J,2);Ue(he,{children:(Ne,Ye)=>{var $e=Ie("Sync");_(Ne,$e)}});var Pe=H(E,2);{var me=Ne=>{var Ye=Wu();Ye.__click=[Uu,a,l];var $e=b(Ye);ue($e,()=>({"--size":"24px"})),_e($e.lastChild,{name:"note"});var hn=H($e,2);Ue(hn,{children:(ot,xt)=>{var Jt=Ie("Notes");_(ot,Jt)}}),_(Ne,Ye)},qe=Ne=>{var Ye=ee(),$e=z(Ye);{var hn=ot=>{var xt=Ku();xt.__click=[qu,a,l];var Jt=b(xt);ue(Jt,()=>({"--size":"24px"})),_e(Jt.lastChild,{name:"bin"});var ar=H(Jt,2);Ue(ar,{children:(rr,gn)=>{var Mn=Ie("Bin");_(rr,Mn)}}),de(()=>Be(xt,"href",`/${Q.Bin}`)),_(ot,xt)};V($e,ot=>{k()&&ot(hn)},!0)}_(Ne,Ye)};V(Pe,Ne=>{r(m)===`/${Q.Bin}`?Ne(me):Ne(qe,!1)})}var Re=H(ye,2),Rt=b(Re);{let Ne=L(d);kr(Rt,{placeholder:"Search tag",get value(){return r(Ne)},onChange:Ye=>{v(Ye)}})}var rt=H(Re,2);ho(rt,{get clearTags(){return x},get mode(){return r(C)},get selectedTags(){return r(A)},handleSelectedTagClick:T});var Ke=H(ve,2);vo(Ke,{get mode(){return r(C)},get tags(){return r(B)},handleTagClick:N,mobile:!0}),de((Ne,Ye)=>{Be(le,"href",Ne),Be(E,"href",Ye)},[()=>u(Q.Settings),()=>u(Q.Sync)]),_(R,ce)},$$slots:{default:!0}})},ae=I=>{var R=Gu(),Y=b(R),ce=b(Y);{let le=L(d);kr(ce,{placeholder:"Search tag",get value(){return r(le)},onChange:P=>{v(P)}})}var ve=H(Y,2),ye=b(ve),be=b(ye);ho(be,{get clearTags(){return x},get mode(){return r(C)},get selectedTags(){return r(A)},handleSelectedTagClick:T});var re=H(ye,2);vo(re,{get mode(){return r(C)},get tags(){return r(B)},handleTagClick:N}),_(I,R)};V(ne,I=>{r(Z)?I(X):I(ae,!1)})}_(t,$),se()}Qe(["click"]);const Zu=(t,e)=>{g(e,!0)};var Ju=(t,e)=>{t.preventDefault(),e("/")},Qu=U('<a class="link svelte-13t3afu" href="/"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Notes</span></a>'),$u=(t,e)=>{t.preventDefault(),e(`/${Q.Bin}`)},ed=U('<a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Bin</span></a>'),td=U('<button class="emptyBinButton svelte-13t3afu" type="button">Empty bin</button>'),nd=U('<div class="header svelte-13t3afu"><div class="top svelte-13t3afu"><div class="menu svelte-13t3afu"><a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a> <!></div> <div class="mobile svelte-13t3afu"><!></div> <!></div> <div class="bottom svelte-13t3afu"><div class="left svelte-13t3afu"><!></div> <div class="right svelte-13t3afu"><div class="filter svelte-13t3afu"><div class="feedSearchWrapper svelte-13t3afu"><!></div> <!></div></div></div></div> <!>',1);function ad(t,e){oe(e,!0);const{getFeedSearch:n,setFeedSearch:a}=vs(),{getScrollContainer:o}=Hr();let s=L(o);const{emptyBin:i,checkNotesInBin:l}=dn(),{getAppLocation:c,replace:u}=Dt(),{createDialogPageHref:f,createHandleClickDialogPage:d,getDialogPages:v}=wt(),{checkExistedDialog:m}=vn();let h=W(null);const y=L(l),w=L(()=>c().pathname);let x=W(!1);const A=()=>{r(s)&&r(s).scrollTo({top:0,behavior:"smooth"})},k=()=>{v().length===0&&!m()&&r(h)?.focus()};ke(()=>ga({key:"k",meta:!0,action:k})),ke(()=>ga({key:"k",ctrl:!0,action:k}));var S=nd(),D=z(S),C=b(D),N=b(C),T=b(N),F=L(()=>d(Q.Settings));T.__click=function(...p){r(F)?.apply(this,p)};var te=b(T);ue(te,()=>({"--rotate":"30deg","--size":"20px"})),_e(te.lastChild,{name:"settings"});var ie=H(T,2),B=L(()=>d(Q.Sync));ie.__click=function(...p){r(B)?.apply(this,p)};var Z=b(ie);ue(Z,()=>({"--size":"20px"})),_e(Z.lastChild,{name:"sync"});var G=H(ie,2);{var q=p=>{var E=Qu();E.__click=[Ju,u];var j=b(E);ue(j,()=>({"--size":"18px"})),_e(j.lastChild,{name:"note"}),_(p,E)},K=p=>{var E=ee(),j=z(E);{var J=he=>{var Pe=ed();Pe.__click=[$u,u];var me=b(Pe);ue(me,()=>({"--size":"21px"})),_e(me.lastChild,{name:"bin"}),de(()=>Be(Pe,"href",`/${Q.Bin}`)),_(he,Pe)};V(j,he=>{r(y)&&he(J)},!0)}_(p,E)};V(G,p=>{r(w)===`/${Q.Bin}`?p(q):p(K,!1)})}var $=H(N,2),ne=b($);Rs(ne,{});var X=H($,2);{var ae=p=>{var E=ee(),j=z(E);{var J=he=>{var Pe=td();Pe.__click=[Zu,x],_(he,Pe)};V(j,he=>{r(y)&&he(J)})}_(p,E)},I=p=>{lu(p,{})};V(X,p=>{r(w)===`/${Q.Bin}`?p(ae):p(I,!1)})}var R=H(C,2),Y=b(R),ce=b(Y);Xu(ce,{});var ve=H(Y,2),ye=b(ve),be=b(ye),re=b(be);{let p=L(n);kr(re,{onFocus:A,placeholder:"Search",get value(){return r(p)},onChange:E=>{a(E)},get ref(){return r(h)},set ref(E){g(h,E,!0)}})}var le=H(be,2);au(le,{});var P=H(D,2);{var O=p=>{Ur(p,{title:"Are you sure you want to empty the bin?",buttonConfirmTitle:"Empty",onConfirm:()=>{i(),g(x,!1),u("/")},onCancel:()=>{g(x,!1)}})};V(P,p=>{r(x)&&p(O)})}de((p,E)=>{Be(T,"href",p),Be(ie,"href",E)},[()=>f(Q.Settings),()=>f(Q.Sync)]),_(t,S),se()}Qe(["click"]);function rd(t,e){oe(e,!0);const{getIsKeyboardVisible:n}=Bs();let a=we(e,"dialog",7);const o=L(n),s=fn();let i=null;const l=()=>{e.dialogState==="swiping"&&e.onClose()};Le(()=>(e.dialogState==="swiping"&&(i=setTimeout(l,3e3)),()=>{i&&(clearTimeout(i),i=null)}));let c=null,u=null;const f=3,d=50,v=5,m=.6,h=.3,y=.35,w=.95;let x=0,A=0,k=0,S=!1,D=!1,C=0,N=0,T=0;const F=()=>{x=0,A=0,S=!1,D=!1,C=0,N=0,T=0,k=0,c=null,u!==null&&(cancelAnimationFrame(u),u=null),i&&(clearTimeout(i),i=null)},te=X=>{if(!a()){console.warn("Touch start: No dialog element");return}if(e.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${e.dialogState}`);return}x=X.touches[0].clientX,A=X.touches[0].clientY,k=performance.now(),S=!0,D=!1},ie=X=>e.dialogState==="opened"&&X>0||e.dialogState==="swiping"&&X>0,B=()=>{if(a()){a().style.setProperty("--transition-timing","0s"),e.onSwipe();try{const X=window.getComputedStyle(a()),ae=X.transform||X.webkitTransform||"";if(N=a().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(C=0),ae&&ae!=="none")try{C=new DOMMatrix(ae).m41}catch{console.warn("Could not parse transform matrix, using default position")}D=!0}catch(X){console.error("Error during swipe initialization:",X),F()}}},Z=()=>{if(!a())return;const ae=Math.abs(C+T*N/100)/N;a().style.setProperty("--backdrop-bg",`${.1*(1-ae)}`)},G=()=>{if(u=null,!c||!S||!a()||r(o)){F();return}const X=[...c.touches].reduce((re,le)=>re+le.clientX,0)/c.touches.length,ae=[...c.touches].reduce((re,le)=>re+le.clientY,0)/c.touches.length,I=X-x,R=ae-A,Y=Math.abs(I)>Math.abs(R),ce=Math.abs(I)>f;if(!D)if(Y&&ce&&ie(I))try{B()}catch(re){console.error("Error initializing swipe:",re),F();return}else return;let ve=C+I*w;ve=Math.max(0,Math.min(N,ve)),!(ve<0)&&(a().style.setProperty("--transition-timing","0s"),a().style.transform=`translate3d(${ve}px, 0, 0)`,s.swipingRatio=Math.abs(1-ve/N),T=(ve-C)/N*100,e.dialogState==="swiping"&&(i&&clearTimeout(i),i=setTimeout(l,3e3)),Z())},q=X=>{if(!S)return;c=X,u===null&&(u=requestAnimationFrame(G));const ae=X.touches[0].clientX-x,I=X.touches[0].clientY-A,R=Math.abs(ae)>Math.abs(I);D&&R&&X.preventDefault()},K=X=>{const ae=Math.abs(X);if(ae>=m)return v;if(ae>=h){const I=(ae-h)/(m-h);return d-I*(d-v)}else return d},$=(X,ae)=>{if(Math.abs(X)>=m)return y*.5;const R=Math.abs(T)/100;return ae?y*Math.max(.5,1-R):y*Math.max(.5,R)},ne=X=>{if(u!==null&&(cancelAnimationFrame(u),u=null),!S||!a()){F();return}if(!D){F();return}let ae=0;if(X?.changedTouches?.[0]){const ve=X.changedTouches[0].clientX,be=performance.now()-k;be>0&&(ae=(ve-x)/be)}const I=K(ae);let R=null;e.dialogState==="swiping"&&(R=Math.abs(T)>I||ae<-h?"close":"open");const Y=e.dialogState==="swiping"&&R==="close",ce=$(ae,Y);s.duration=ce-.02,a().style.setProperty("--transition-timing",`${ce}s`),a().offsetWidth,a().style.transform="",R==="open"?e.onOpen():R==="close"&&e.onClose(),a()?.style.removeProperty("--backdrop-bg"),F()};ke(()=>(a().addEventListener("touchstart",te,{passive:!0}),a().addEventListener("touchmove",q,{passive:!1}),a().addEventListener("touchend",ne,{passive:!0}),a().addEventListener("touchcancel",ne,{passive:!0}),()=>{a().removeEventListener("touchstart",te),a().removeEventListener("touchmove",q),a().removeEventListener("touchend",ne),a().removeEventListener("touchcancel",ne),u!==null&&cancelAnimationFrame(u)})),se()}var od=(t,e)=>{e.onStartClose()},sd=U('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),id=U('<dialog><div class="dialogInner svelte-vr2o0t"><div class="header svelte-vr2o0t"><div class="navigation__wrapper svelte-vr2o0t"><!></div></div> <!></div></dialog> <!>',1);function ld(t,e){oe(e,!0);let n=350;const{isScrolling:a,enable:o}=Fr();let s=W(null),i=W(null);const l=fn(),c=C=>{C.preventDefault(),e.onStartClose()};ke(()=>(r(s)?.addEventListener("close",e.onClosed),r(s)?.addEventListener("cancel",c),()=>{r(s)?.removeEventListener("close",e.onClosed),r(s)?.removeEventListener("cancel",c)}));const u=()=>{r(s)?.style.removeProperty("--transition-timing"),r(s)?.style.removeProperty("transform"),r(s)?.style.removeProperty("--backdrop-bg")},f=()=>{o()},d=L(a);Le(()=>{if(e.dialogState,!!r(s))switch(e.dialogState){case"opening":{r(s).open||r(s).showModal(),r(s).getBoundingClientRect();const C=setTimeout(()=>{u()},n+1),N=()=>{clearTimeout(C),u()};return r(s)?.addEventListener("transitionend",N,{once:!0}),e.onOpened(),()=>{clearTimeout(C),r(s)?.removeEventListener("transitionend",N)}}case"closing":{const C=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),N=()=>{clearTimeout(C),e.onClosed()};return r(s)?.addEventListener("transitionend",N,{once:!0}),()=>{clearTimeout(C),r(s)?.removeEventListener("transitionend",N)}}case"opened":u()}});var v=id(),m=z(v),h=b(m),y=b(h),w=b(y),x=b(w);{var A=C=>{var N=sd();pe(N,1,ge(["navigateButton","buttonBack"]),"svelte-vr2o0t"),N.__click=[od,e];var T=b(N);ue(T,()=>({"--size":"32px"})),_e(T.lastChild,{name:"back"});var F=H(T,2);Ue(F,{children:(te,ie)=>{var B=Ie("back");_(te,B)}}),_(C,N)};V(x,C=>{e.blocked||C(A)})}var k=H(y,2);Ee(k,()=>e.children),at(h,C=>g(i,C),()=>r(i)),at(m,C=>g(s,C),()=>r(s));var S=H(m,2);{var D=C=>{rd(C,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return r(s)}})};V(S,C=>{(!r(d)&&e.dialogState==="opened"||e.dialogState==="swiping")&&!e.blocked&&C(D)})}de(()=>pe(m,1,ge([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:l.working&&(!l.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-vr2o0t")),Br("scroll",h,f),_(t,v),se()}Qe(["click"]);const go=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function cd(t,e){oe(e,!0);let n=we(e,"hiddenDialog",3,!1),a=we(e,"onClose",3,()=>{});const o=fn();let s=W(Ze(go({type:"closed"})));const i=w=>{g(s,go(r(s),w),!0)},l=()=>{e.onStartClose&&(e.onStartClose(),i({type:"close"}))},c=()=>{i({type:"open"})},u=()=>{i({type:"opened"}),o.swipingRatio=1,o.duration=.2},f=()=>{a()(),i({type:"closed"}),o.swipingRatio=1,o.duration=.2},d=()=>{i({type:"swipe"})};Le(()=>{r(s).type==="swiping"?o.isSwiping=!0:o.isSwiping=!1,r(s).type==="closed"&&e.shownDialog?c():r(s).type==="opened"&&!e.shownDialog&&l()});var v={handleComputeState:i},m=ee(),h=z(m);{var y=w=>{{let x=L(()=>!e.onStartClose);ld(w,{onSwipe:d,onOpened:u,onClosed:f,onStartClose:l,onStartOpen:c,get dialogState(){return r(s).type},get hidden(){return n()},get blocked(){return r(x)},children:(A,k)=>{var S=ee(),D=z(S);Ee(D,()=>e.children),_(A,S)},$$slots:{default:!0}})}};V(h,w=>{r(s).type!=="closed"&&w(y)})}return _(t,m),se(v)}const ud=({getDialog:t,onOpen:e,onStartClose:n,onClose:a})=>{const o=i=>{i.preventDefault(),n()},s=()=>{a?.()};ke(()=>{const i=t();return i?.addEventListener("cancel",o),i?.addEventListener("close",s),()=>{i?.removeEventListener("cancel",o),i?.removeEventListener("close",s)}}),ke(()=>{const i=t();i?.showModal(),i?.getBoundingClientRect(),e()})};var dd=(t,e)=>{e.onStartBack()},fd=U('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),vd=(t,e)=>{e.onStartClose()},hd=U('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),gd=U('<dialog><div class="dialogInner svelte-rt409n"><div class="header svelte-rt409n"><div class="navigation__wrapper svelte-rt409n"><div><!></div> <div><!></div></div></div> <!></div></dialog> <!>',1);function pd(t,e){oe(e,!0);let n=we(e,"blockedDialog",3,!1),a=we(e,"hiddenDialog",3,!1),o=we(e,"isDesktopAnimationOff",3,!1),s=W(null),i=W(null),l=W(!1);ud({getDialog:()=>r(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose});const c=fn();Le(()=>{e.stateDialog==="closing"&&(c.working?r(s)?.addEventListener("transitionend",()=>{r(s)?.close()},{once:!0}):r(s)?.close())});const{getDialogPageHeight:u}=jr(),f=L(u);ke(()=>{setTimeout(()=>{g(l,!0)},50)});var d=gd(),v=z(d),m=b(v),h=b(m),y=b(h),w=b(y),x=b(w);{var A=T=>{var F=fd();pe(F,1,ge(["navigateButton","buttonBack"]),"svelte-rt409n"),F.__click=[dd,e];var te=b(F);ue(te,()=>({"--size":"28px"})),_e(te.lastChild,{name:"back"});var ie=H(te,2);Ue(ie,{children:(B,Z)=>{var G=Ie("back");_(B,G)}}),_(T,F)};V(x,T=>{(!(n()||a())||n())&&e.onStartBack&&T(A)})}var k=H(w,2),S=b(k);{var D=T=>{var F=hd();pe(F,1,ge(["navigateButton","buttonClose"]),"svelte-rt409n"),F.__click=[vd,e];var te=b(F);ue(te,()=>({"--size":"28px"})),_e(te.lastChild,{name:"close"});var ie=H(te,2);Ue(ie,{children:(B,Z)=>{var G=Ie("close");_(B,G)}}),_(T,F)};V(S,T=>{n()||a()||T(D)})}var C=H(h,2);Ee(C,()=>e.children),at(m,T=>g(i,T),()=>r(i)),at(v,T=>g(s,T),()=>r(s));var N=H(v,2);Vr(N,{get dialog(){return r(s)},get dialogInner(){return r(i)},get onClose(){return e.onStartClose}}),de(()=>{Pn(v,`height: ${r(f)+74}px`),pe(v,1,ge([{open:e.stateDialog==="open",isHeightAnimationOn:r(l),isAnimationOn:c.working,isDesktopAnimationOff:o(),hiddenDialog:a()}]),"svelte-rt409n")}),_(t,d),se()}Qe(["click"]);const _d=({onStartClose:t,onClose:e})=>{let n=W("close");return{get state(){return r(n)},set state(i){g(n,i,!0)},handleStartClose:(i=!1)=>{i||(g(n,"closing"),t?.())},handleOpen:()=>{g(n,"open")},handleClose:()=>{g(n,"close"),e?.()}}};function md(t,e){oe(e,!0);let n=we(e,"blockedDialog",3,!1),a=we(e,"hiddenDialog",3,!1),o=we(e,"onStartClose",3,()=>{}),s=we(e,"onClose",3,()=>{}),i=_d({onStartClose:o(),onClose:s()});Le(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});const l=d=>{d.key==="Escape"&&n()&&(d.preventDefault(),d.stopPropagation())};ke(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var c=ee(),u=z(c);{var f=d=>{pd(d,{get stateDialog(){return i.state},get blockedDialog(){return n()},get hiddenDialog(){return a()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(v,m)=>{var h=ee(),y=z(h);Ee(y,()=>e.children),_(v,h)},$$slots:{default:!0}})};V(u,d=>{i.state!=="close"&&d(f)})}_(t,c),se()}function wd(t,e){oe(e,!0);let n=we(e,"blockedDialog",3,!1),a=we(e,"hiddenDialog",3,!1),o=we(e,"blockedBack",3,!1),s=we(e,"onStartClose",3,()=>{}),i=we(e,"onClose",3,()=>{});const l=L(()=>o()?void 0:e.onStartBack),{showDialog:c,hideDialog:u}=vn();ke(()=>(c(),()=>{u()}));const{checkMobileSize:f}=Zt();var d=ee(),v=z(d);{var m=y=>{cd(y,{get shownDialog(){return e.shownDialog},get hiddenDialog(){return a()},get children(){return e.children},get onStartClose(){return r(l)},get onClose(){return i()}})},h=y=>{md(y,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get hiddenDialog(){return a()},get children(){return e.children},get onStartBack(){return r(l)},get onStartClose(){return s()},get onClose(){return i()}})};V(v,y=>{f()?y(m):y(h,!1)})}_(t,d),se()}function po(t,e){oe(e,!0);const{clearDialogPages:n,popDialogPage:a}=wt(),{checkMobileSize:o}=Zt();let s=we(e,"blocked",3,!1),i=we(e,"isLastDialog",3,!1),l=we(e,"onBack",3,()=>{}),c=we(e,"onClosed",3,()=>{});const{checkBlockedDialog:u,checkClosableDialog:f}=vn(),d=L(()=>s()||u()),v=L(f),m=()=>{(!r(d)||r(d))&&e.shown&&(a(),l()())},h=()=>{((!r(d)||r(d)&&r(v))&&e.shown||!e.shown)&&n()},y=()=>{c()()};{let w=L(()=>r(d)&&e.shown||r(v)===!1),x=L(()=>r(d)||i()&&(r(v)===!1||!o()));wd(t,{get shownDialog(){return e.shown},get blockedDialog(){return r(w)},get hiddenDialog(){return e.hidden},get blockedBack(){return r(x)},onStartBack:m,onStartClose:h,onClose:y,children:(A,k)=>{var S=ee(),D=z(S);Ee(D,()=>e.children),_(A,S)},$$slots:{default:!0}})}se()}var yd=U('<div class="svelte-1x9a4ve"><!></div>');function Oe(t,e){oe(e,!0);const{setDialogPageHeight:n}=jr();let a=W(null);ke(()=>{r(a)&&(r(a).getBoundingClientRect(),r(a).style.opacity="1");const i=new ResizeObserver(l=>{for(let c of l){const u=c.contentRect.height;n(u)}});if(r(a))return i.observe(r(a)),()=>{r(a)&&i.unobserve(r(a)),i.disconnect()}});var o=yd(),s=b(o);Ee(s,()=>e.children),at(o,i=>g(a,i),()=>r(a)),_(t,o),se()}var bd=U('<div class="svelte-stjbkr"><p class="svelte-stjbkr">Page not found</p> <!></div>');function Sd(t,e){oe(e,!1);const{replace:n}=Dt(),a=i=>{i.preventDefault(),n("/")};$a();var o=bd(),s=H(b(o),2);on(s,{element:"a",href:"/",onClick:a,children:(i,l)=>{var c=Ie("close");_(i,c)},$$slots:{default:!0}}),_(t,o),se()}const Cd="modulepreload",Ed=function(t){return"/"+t},_o={},ze=function(e,n,a){let o=Promise.resolve();if(n&&n.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");o=c(n.map(u=>{if(u=Ed(u),u in _o)return;_o[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":Cd,f||(v.as="script"),v.crossOrigin="",v.href=u,l&&v.setAttribute("nonce",l),document.head.appendChild(v),f)return new Promise((m,h)=>{v.addEventListener("load",m),v.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&s(l.reason);return e().catch(s)})};var kd=U('<div class="svelte-10xfz1h"><p class="svelte-10xfz1h">Something went wrong. Please reload the page</p> <!></div>');function Dd(t){var e=kd(),n=H(b(e),2);on(n,{onClick:()=>location.reload(),children:(a,o)=>{var s=Ie("Reload");_(a,s)},$$slots:{default:!0}}),_(t,e)}var xd=U('<div><!> <div class="loader svelte-m0sno1"></div></div>');function Fs(t,e){oe(e,!0);let n=W(!1);ke(()=>{const s=setTimeout(()=>{g(n,!0)},200);return()=>{clearTimeout(s)}});var a=xd(),o=b(a);Ee(o,()=>e.children??xe),de(()=>pe(a,1,ge(["block",{shown:r(n)}]),"svelte-m0sno1")),_(t,a),se()}var Pd=U('<div class="svelte-1mu1b44"><!></div>');function Td(t,e){oe(e,!0);let n=W(!1);const{getDialogPageHeight:a}=jr(),o=L(a);ke(()=>{const c=setTimeout(()=>{g(n,!0)},250);return()=>{clearTimeout(c)}});var s=Pd(),i=b(s);{var l=c=>{Fs(c,{})};V(i,c=>{r(n)&&c(l)})}de(()=>Pn(s,`min-height: ${r(o)??""}px;`)),_(t,s),se()}function Fe(t,e){oe(e,!0);const n={},a=Object.assign({"./Pages/About.svelte":()=>ze(()=>import("./aCdVbeaSz.js"),__vite__mapDeps([0,1])),"./Pages/AccessKeys.svelte":()=>ze(()=>import("./aD3cHKSab.js"),__vite__mapDeps([2,3,4,5])),"./Pages/Account.svelte":()=>ze(()=>import("./aBmUs5kj-.js"),__vite__mapDeps([6,3,7])),"./Pages/AccountSetup.svelte":()=>ze(()=>import("./aDNlNpFPG.js"),__vite__mapDeps([8,9])),"./Pages/Auth.svelte":()=>ze(()=>import("./aDWTTTNhj.js"),__vite__mapDeps([10,11])),"./Pages/ChangeTags.svelte":()=>ze(()=>import("./aR0J_6O1Q.js"),[]),"./Pages/ClearStore.svelte":()=>ze(()=>import("./aBdtoG3um.js"),__vite__mapDeps([12,13])),"./Pages/ConfirmAccessKey.svelte":()=>ze(()=>import("./aBJSVqIT3.js"),__vite__mapDeps([14,4,3,15,16,17,18])),"./Pages/EditNote.svelte":()=>ze(()=>import("./aCLVqz7hD.js"),__vite__mapDeps([19,20,21,16,17,22,23,24])),"./Pages/Exit.svelte":()=>ze(()=>import("./a8SbUDwiq.js"),__vite__mapDeps([25,26])),"./Pages/ExportData.svelte":()=>ze(()=>import("./aCK4i7Tqd.js"),__vite__mapDeps([27,21,16,17,22,28,29,30])),"./Pages/ImportData.svelte":()=>ze(()=>import("./aDduiWcfv.js"),__vite__mapDeps([31,21,16,17,22,32])),"./Pages/Install.svelte":()=>ze(()=>import("./aIQq8O9wI.js"),__vite__mapDeps([33,34])),"./Pages/InstallSuccess.svelte":()=>ze(()=>import("./aBaG9hEsO.js"),__vite__mapDeps([35,36])),"./Pages/NewNote.svelte":()=>ze(()=>import("./a51qlMAKC.js"),__vite__mapDeps([37,20,21,16,17,22,23])),"./Pages/Settings.svelte":()=>ze(()=>import("./aA3eNkQ_5.js"),__vite__mapDeps([38,28,29,39])),"./Pages/Signin.svelte":()=>ze(()=>import("./aCK7xzBjo.js"),__vite__mapDeps([40,4,3,15,41])),"./Pages/Signup.svelte":()=>ze(()=>import("./aZh3CzzMl.js"),__vite__mapDeps([42,15,4,3,43])),"./Pages/Subscription.svelte":()=>ze(()=>import("./a72QjXkQi.js"),__vite__mapDeps([44,45])),"./Pages/Sync.svelte":()=>ze(()=>import("./aDvDWnCSc.js"),__vite__mapDeps([46,47]))}),o=async l=>{const c=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(a[c]){const u=a[c]();return n[l]={promise:u},n[l].module=await u,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var s=ee(),i=z(s);Cl(i,()=>o(e.page),l=>{Td(l,{})},(l,c)=>{const u=L(()=>r(c).default);var f=ee(),d=z(f);Dl(d,()=>r(u),(v,m)=>{m(v,{get params(){return e.params},get hidden(){return e.hidden}})}),_(l,f)},l=>{Dd(l)}),_(t,s),se()}const Ad=(t,e,n,a)=>{e.noteData.pinnedAt?(n(e.noteId,!1),qt("Note unpinned",{onCancel:()=>{n(e.noteId,!0)}})):(n(e.noteId,!0),qt("Note pinned",{onCancel:()=>{n(e.noteId,!1)}})),g(a,!0)},Nd=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),qt("Link copied"),g(n,!0)};var Md=U('<li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>Copy link</button></li>'),Ld=(t,e,n)=>{g(e,!0),g(n,!0)},Id=U('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete</button></li>'),Od=(t,e,n)=>{g(e,!0),g(n,!0)},Bd=(t,e,n)=>{g(e,!0),g(n,!0)},Rd=U('<li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Restore</button></li> <li class="svelte-8ve3pe"><button><span class="wrapperIcon svelte-8ve3pe"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span>Delete from bin</button></li>',1),zd=U('<ul class="menu svelte-8ve3pe"><!> <li class="svelte-8ve3pe"><button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> </button></li> <!></ul>'),Fd=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Hd=U("<!> <!>",1);function jd(t,e){oe(e,!0);const n=(T,F=xe)=>{var te=zd(),ie=b(te);{var B=ae=>{var I=Md(),R=b(I);R.__click=[Nd,e,u];var Y=b(R);ue(Y,()=>({"--size":"20px"})),_e(Y.lastChild,{name:"copy"}),de(()=>pe(R,1,ge(["button",{buttonMenuDialog:F()}]),"svelte-8ve3pe")),_(ae,I)};V(ie,ae=>{F()&&e.noteData.url&&ae(B)})}var Z=H(ie,2),G=b(Z);G.__click=[Ad,e,s,u];var q=b(G);{let ae=L(()=>e.noteData.pinnedAt?"pin-cancel":"pin");ue(q,()=>({"--size":"20px"})),_e(q.lastChild,{get name(){return r(ae)}})}var K=H(q),$=H(Z,2);{var ne=ae=>{var I=Id(),R=b(I);R.__click=[Ld,f,u];var Y=b(R),ce=b(Y);ue(ce,()=>({"--size":"20px"})),_e(ce.lastChild,{name:"bin"}),de(()=>pe(R,1,ge(["button",{buttonMenuDialog:F()}]),"svelte-8ve3pe")),_(ae,I)},X=ae=>{var I=Rd(),R=z(I),Y=b(R);Y.__click=[Od,d,u];var ce=b(Y),ve=b(ce);ue(ve,()=>({"--size":"20px"})),_e(ve.lastChild,{name:"bin-cancel"});var ye=H(R,2),be=b(ye);be.__click=[Bd,v,u];var re=b(be),le=b(re);ue(le,()=>({"--size":"20px"})),_e(le.lastChild,{name:"bin"}),de(()=>{pe(Y,1,ge(["button",{buttonMenuDialog:F()}]),"svelte-8ve3pe"),pe(be,1,ge(["button",{buttonMenuDialog:F()}]),"svelte-8ve3pe")}),_(ae,I)};V($,ae=>{l()==="notes"?ae(ne):ae(X,!1)})}de(()=>{pe(G,1,ge(["button",{buttonMenuDialog:F()}]),"svelte-8ve3pe"),rn(K,` ${e.noteData.pinnedAt?"Unpin":"Pin"}`)}),_(T,te)},{moveNoteToBin:a,deleteNote:o,pinNote:s,restoreNoteFromBin:i}=dn();let l=we(e,"mode",3,"notes"),c=we(e,"shownMenu",15),u=W(!1),f=W(!1),d=W(!1),v=W(!1);const{checkMobileSize:m}=Zt();let h=L(m);const y=()=>{o(e.noteId),qt("Draft deleted")},w=async()=>{a(e.noteId),qt("Note moved to bin",{onCancel:()=>{i(e.noteId)}})},x=()=>{i(e.noteId),qt("Note restored from bin",{onCancel:()=>{a(e.noteId)}})},A=()=>{r(f)?(g(f,!1),e.noteData.type==="draft"?y():w()):r(d)&&(g(d,!1),x()),c(!1),g(u,!1)};var k=Hd(),S=z(k);{var D=T=>{var F=ee(),te=z(F);{var ie=Z=>{ba(Z,{get startClose(){return r(u)},onClosed:A,children:(G,q)=>{n(G,()=>!0)},$$slots:{default:!0}})},B=Z=>{var G=Fd(),q=z(G);ue(q,()=>({"--bottom":"-100px","--right":"20px"})),nr(q.lastChild,{get startClose(){return r(u)},get positionTop(){return e.showMenuUp},onClosed:A,children:(K,$)=>{n(K,()=>!1)},$$slots:{default:!0}}),_(Z,G)};V(te,Z=>{r(h)?Z(ie):Z(B,!1)})}_(T,F)};V(S,T=>{c()&&T(D)})}var C=H(S,2);{var N=T=>{Ur(T,{title:"Are you sure you want to delete this note?",buttonConfirmTitle:"Delete",onConfirm:()=>{o(e.noteId),g(v,!1)},onCancel:()=>{g(v,!1)}})};V(C,T=>{r(v)&&T(N)})}_(t,k),se()}Qe(["click"]);const Vd=(t,e)=>{g(e,!0)},Ud=(t,e,n)=>{navigator.clipboard.writeText(e.noteData.url),qt("Link copied"),g(n,!1)},Wd=(t,e)=>{g(e,!0)},qd=(t,e)=>{g(e,!1)},Kd=(t,e,n,a)=>{t.preventDefault(),e.noteData.type==="draft"?n(`${Q.NewNote}`):n(`${Q.EditNote}?id=${encodeURIComponent(e.noteId)}`),g(a,!1)};var Yd=U('<div class="iconPlaceholder svelte-1jg44o9"></div>'),Gd=U('<img loading="lazy" class="noteIcon" height="16" width="16" alt=""/>'),Xd=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Zd=U('<div class="noteIconWrapper svelte-1jg44o9"><!></div>'),Jd=U('<button class="button svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Qd=(t,e)=>{g(e,!1)},$d=U('<!> <a target="_blank" rel="noopener noreferrer" class="button openLink svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),ef=U('<li><!> <a class="noteLink svelte-1jg44o9" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function tf(t,e){oe(e,!0);const{pushDialogPage:n}=wt(),{getFaviconEnabled:a}=Jl();let o=we(e,"mode",3,"notes"),s=W(!1),i=W(!1),l=W(!1),c=L(a);const{checkMobileSize:u}=Zt(),f=T=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(T).host}.ico`}catch{return""}},d=e.noteData.url||e.noteData.draft?.url||"";var v=ef();v.__focusin=[Wd,i],v.__focusout=[qd,i];var m=b(v);{var h=T=>{var F=Zd(),te=b(F);{var ie=Z=>{var G=ee(),q=z(G);{var K=ne=>{var X=Yd();_(ne,X)},$=ne=>{var X=Gd();de(ae=>Be(X,"src",ae),[()=>f(d)]),Br("error",X,()=>{g(l,!0)}),_(ne,X)};V(q,ne=>{r(l)?ne(K):ne($,!1)})}_(Z,G)},B=Z=>{var G=Xd(),q=z(G);ue(q,()=>({"--size":"16px"})),_e(q.lastChild,{name:"note"}),_(Z,G)};V(te,Z=>{d?Z(ie):Z(B,!1)})}_(T,F)};V(m,T=>{r(c)&&T(h)})}var y=H(m,2);y.__click=[Kd,e,n,i];var w=b(y),x=H(y,2),A=b(x);{var k=T=>{var F=$d(),te=z(F);{var ie=q=>{var K=Jd();K.__click=[Ud,e,i];var $=b(K);ue($,()=>({"--size":"20px"})),_e($.lastChild,{name:"copy"});var ne=H($,2);Ue(ne,{children:(X,ae)=>{var I=Ie("copy link");_(X,I)}}),de(()=>Be(K,"tabindex",e.focusHidden?-1:0)),_(q,K)};V(te,q=>{u()||q(ie)})}var B=H(te,2);B.__click=[Qd,i];var Z=b(B);ue(Z,()=>({"--size":"18px"})),_e(Z.lastChild,{name:"open"});var G=H(Z,2);Ue(G,{children:(q,K)=>{var $=Ie();de(()=>rn($,e.noteData.draft?.name||e.noteData.name||"unknown")),_(q,$)}}),de(()=>{Be(B,"href",d),Be(B,"tabindex",e.focusHidden?-1:0)}),_(T,F)};V(A,T=>{d&&T(k)})}var S=H(A,2);S.__click=[Vd,s],pe(S,1,ge(["button","buttonMenu"]),"svelte-1jg44o9");var D=b(S);ue(D,()=>({"--size":"18px","--rotate":"90deg"})),_e(D.lastChild,{name:"menu"});var C=H(D,2);Ue(C,{children:(T,F)=>{var te=Ie("show menu");_(T,te)}});var N=H(x,2);jd(N,{get mode(){return o()},get noteId(){return e.noteId},get noteData(){return e.noteData},get showMenuUp(){return e.showMenuUp},get shownMenu(){return r(s)},set shownMenu(T){g(s,T,!0)}}),de((T,F)=>{pe(v,1,T,"svelte-1jg44o9"),Be(y,"tabindex",e.focusHidden?-1:0),Be(y,"href",F),rn(w,e.noteData?.draft?.name||e.noteData?.name||"unknown"),pe(x,1,ge(["noteMenuWrapper",{noteMenuWrapperActive:r(i)}]),"svelte-1jg44o9"),Be(S,"tabindex",e.focusHidden?-1:0)},[()=>ge(["record",{pinned:!!e.noteData.pinnedAt,draft:!!e.noteData.draft}]),()=>`/?${bt}=${encodeURIComponent(`${Q.EditNote}?id=${encodeURIComponent(e.noteId)}`)}`]),_(t,v),se()}Qe(["focusin","focusout","click"]);var ta,Hs,js;class nf{constructor(e){De(this,ta);ut(this,"data");ut(this,"compare");this.data=[],this.compare=e}insert(e){this.data.push(e),Me(this,ta,Hs).call(this)}extractMin(){if(this.data.length===0)return;const e=this.data[0],n=this.data.pop();return this.data.length&&n!==void 0&&(this.data[0]=n,Me(this,ta,js).call(this)),e}isEmpty(){return this.data.length===0}}ta=new WeakSet,Hs=function(){let e=this.data.length-1;const n=this.data[e];for(;e>0;){const a=Math.floor((e-1)/2);if(this.compare(n,this.data[a])>=0)break;[this.data[e],this.data[a]]=[this.data[a],this.data[e]],e=a}},js=function(){let e=0;const n=this.data.length;for(;;){const a=2*e+1,o=2*e+2;let s=e;if(a<n&&this.compare(this.data[a],this.data[s])<0&&(s=a),o<n&&this.compare(this.data[o],this.data[s])<0&&(s=o),s===e)break;[this.data[e],this.data[s]]=[this.data[s],this.data[e]],e=s}};class af{constructor(e,n){ut(this,"heap");ut(this,"done");ut(this,"cache",[]);this.heap=new nf(n);for(const a of e)this.heap.insert(a);this.done=!1}get(e,n){const a=this.cache.slice(e,n);for(;a.length<n-e&&!this.heap.isEmpty();){const o=this.heap.extractMin();o!==void 0&&(this.cache.push(o),a.push(o))}return this.heap.isEmpty()&&(this.done=!0),a}}var rf=U('<p class="message">No notes in bin</p>'),of=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),sf=U('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import notes</span>',1),lf=U('<div class="startingPage svelte-106i4nx"><div class="wrapperButtonsAdd svelte-106i4nx"><!></div> <div>or</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div></div>'),cf=U('<div class="emptyStore svelte-106i4nx"><!></div>'),uf=U("<span>Back to notes</span>"),df=U('<div class="emptyMessage svelte-106i4nx">No notes in bin</div> <div class="wrapperButtonsAdd svelte-106i4nx"><!></div>',1),ff=U('<div class="box"><div class="emptyMessage svelte-106i4nx">No notes found</div></div>'),vf=U('<div class="feed svelte-106i4nx"><ul class="svelte-106i4nx"></ul></div>'),hf=U('<div class="wrapperFeed svelte-106i4nx"><div class="wrapperContainer svelte-106i4nx"><!></div></div>');function gf(t,e){oe(e,!0);let n=we(e,"getNotes",3,()=>[]),a=we(e,"mode",3,"notes");const{getScrollContainer:o}=Hr(),{createHandleClickDialogPage:s,createDialogPageHref:i}=wt(),{getSelectedTags:l}=ys(),{getFeedOrder:c}=_s(),{replace:u}=Dt(),f=vs();let d=54,v=W(0),m=W(0),h=W(0),y=W(0),w=[],x=W(0),A=W(null),k=L(o),S=null,D=null;const C=L(l);Le(()=>{r(C),r(ie),r(k)?.scrollTo(0,0)});const{enable:N}=Fr(),T=()=>{N(),S||(S=requestAnimationFrame(()=>{const R=r(k)?.scrollTop||0;g(h,R,!0);const Y=Math.ceil(r(v)/d);g(m,Math.floor(R/(d*Y))*(d*Y)),S=null}))},F=()=>{D||(D=requestAnimationFrame(()=>{g(v,window.innerHeight-180||0,!0);const R=r(k)?.scrollTop||0;g(h,R,!0);const Y=Math.ceil(r(v)/d);g(m,Math.floor(R/(d*Y))*(d*Y)),D=null}))};ke(()=>{F(),T()});const te=()=>{T()};Le(()=>(r(k)?.addEventListener("scroll",te),window.addEventListener("resize",F),()=>{r(k)?.removeEventListener("scroll",te),window.removeEventListener("resize",F)}));const ie=L(c);Le(()=>{const R=n()()||[],Y=[],ce=Array.from(r(C).values());for(let ve=R.length-1;ve>=0;ve--){if(!R[ve]||!R[ve].data)continue;const ye=R[ve];if(!(a()==="notes"&&ye?.data.deletedAt)&&!(a()==="bin"&&!ye?.data.deletedAt)&&!(f&&!(ye.data.name.toLowerCase().includes(f.getFeedSearch().toLowerCase())||ye.data.url.toLowerCase().includes(f.getFeedSearch().toLowerCase())||ye.data.text.toLowerCase().includes(f.getFeedSearch().toLowerCase())))){if(r(C).has("inbox")){if(ye.data.tags.length>0||ye.data.draft&&ye.data.draft.tags.length>0)continue}else if(r(C).has("drafts")){if(!ye.data.draft)continue}else if(r(C).size&&ce.some(be=>!ye.data?.tags.includes(be))&&(!ye.data.draft||ce.some(be=>!ye.data?.draft?.tags.includes(be))))continue;Y.push(ye)}}g(y,Y.length,!0),w=Y,g(x,Date.now(),!0)}),Le(()=>{r(ie),r(x),g(A,new af(w,(R,Y)=>{if(!R||!Y||!R.data||!Y.data)return 0;if(R.data.pinnedAt&&!Y.data.pinnedAt)return-1;if(!R.data.pinnedAt&&Y.data.pinnedAt)return 1;if(R.data.pinnedAt&&Y.data.pinnedAt){if(R.data.pinnedAt<Y.data.pinnedAt)return 1;if(R.data.pinnedAt>Y.data.pinnedAt)return-1}switch(r(ie)){case"newest":return R.data.updatedAt<Y.data.updatedAt?1:-1;case"oldest":return R.data.updatedAt>Y.data.updatedAt?1:-1;case"AtoZ":return R.data.name.localeCompare(Y.data.name);case"ZtoA":return Y.data.name.localeCompare(R.data.name);default:return 0}}),!0)});const B=L(()=>r(y)*d);let G=L(()=>{r(x);const R=Math.ceil(r(v)/d);let Y=Math.floor(r(m)/d);return Y=Y-Math.min(Y,R),r(A)?.get(Y,Y+R*3)||[]}),q=L(()=>d*Math.ceil(r(v)/d));const K=L(()=>r(m)-Math.min(r(m),r(q)));var $=hf(),ne=b($),X=b(ne);{var ae=R=>{Fs(R,{})},I=R=>{var Y=ee(),ce=z(Y);{var ve=be=>{var re=cf(),le=b(re);{var P=p=>{var E=rf();_(p,E)},O=p=>{var E=lf(),j=b(E),J=b(j);{let me=L(()=>i(Q.NewNote)),qe=L(()=>s(Q.NewNote));on(J,{element:"a",get href(){return r(me)},get onClick(){return r(qe)},children:(Re,Rt)=>{var rt=of(),Ke=z(rt);ue(Ke,()=>({"--size":"18px","--color":"#b0b0b0"})),_e(Ke.lastChild,{name:"plus"}),_(Re,rt)},$$slots:{default:!0}})}var he=H(j,4),Pe=b(he);{let me=L(()=>i(Q.ImportData)),qe=L(()=>s(Q.ImportData));on(Pe,{element:"a",get href(){return r(me)},get onClick(){return r(qe)},children:(Re,Rt)=>{var rt=sf(),Ke=z(rt);ue(Ke,()=>({"--size":"18px","--color":"#b0b0b0"})),_e(Ke.lastChild,{name:"import"}),_(Re,rt)},$$slots:{default:!0}})}_(p,E)};V(le,p=>{a()==="bin"?p(P):p(O,!1)})}_(be,re)},ye=be=>{var re=ee(),le=z(re);{var P=p=>{var E=df(),j=H(z(E),2),J=b(j);on(J,{element:"a",href:"/",onClick:he=>{he.preventDefault(),u("/")},children:(he,Pe)=>{var me=uf();_(he,me)},$$slots:{default:!0}}),_(p,E)},O=p=>{var E=ee(),j=z(E);{var J=Pe=>{var me=ff();_(Pe,me)},he=Pe=>{var me=vf(),qe=b(me);Qa(qe,23,()=>r(G),Re=>Re.data,(Re,Rt,rt)=>{var Ke=ee(),Ne=z(Ke);{var Ye=$e=>{{let hn=L(()=>r(rt)*d<r(h)-r(K)-d/2||r(rt)*d>r(h)-r(K)+Math.floor(r(v)/d)*d),ot=L(()=>(r(rt)+3)*d<r(h)-r(K)-d/2||(r(rt)+3)*d>r(h)-r(K)+Math.floor(r(v)/d)*d);tf($e,{get mode(){return a()},get focusHidden(){return r(hn)},get showMenuUp(){return r(ot)},get noteId(){return r(Rt).id},get noteData(){return r(Rt).data}})}};V(Ne,$e=>{r(Rt).data&&$e(Ye)})}_(Re,Ke)}),de(Re=>{Pn(me,`min-height: ${Re??""}px`),Pn(qe,`transform: translateY(${r(K)??""}px);`)},[()=>Math.max((r(B)>r(v),r(B)),0)]),_(Pe,me)};V(j,Pe=>{r(G).length===0?Pe(J):Pe(he,!1)},!0)}_(p,E)};V(le,p=>{a()==="bin"&&e.countNotesInBin()===0?p(P):p(O,!1)},!0)}_(be,re)};V(ce,be=>{(n()()||[]).length===0?be(ve):be(ye,!1)},!0)}_(R,Y)};V(X,R=>{e.readyNotes?R(I,!1):R(ae)})}_(t,$),se()}var pf=U('<div class="fakeSidebar svelte-k57gez"></div> <div class="content svelte-k57gez"><!></div>',1);function _f(t,e){oe(e,!0);const{getAppLocation:n}=Dt(),{getGetNotes:a,isInitedNotes:o,countNotesInBin:s}=dn(),i=L(o),l=L(a),c=L(()=>n().pathname);var u=pf(),f=H(z(u),2),d=b(f);{let v=L(()=>r(c)==="/bin"?"bin":"notes");gf(d,{get mode(){return r(v)},get getNotes(){return r(l)},get countNotesInBin(){return s},get readyNotes(){return r(i)}})}_(t,u),se()}var mf=U('<h1 class="svelte-1ky72l5"><!></h1>');function wf(t,e){var n=mf(),a=b(n);Ee(a,()=>e.children),_(t,n)}const yf=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;var bf=U('<div class="block svelte-1hz8bbk"><!> <p class="message svelte-1hz8bbk">Enjoy using the app!</p> <div class="container svelte-1hz8bbk"><!></div></div>');function Sf(t,e){oe(e,!1);const{pushDialogPage:n}=wt(),a=()=>{yf()?n(Q.AccountSetup):n(Q.Install)};$a();var o=bf(),s=b(o);wf(s,{children:(c,u)=>{var f=Ie("Welcome");_(c,f)}});var i=H(s,4),l=b(i);on(l,{onClick:a,fullWidth:!0,children:(c,u)=>{var f=Ie("Start");_(c,f)},$$slots:{default:!0}}),_(t,o),se()}const mo=(t,e=xe,n=xe,a)=>{let o=Ya(()=>ui(a?.(),!1));var s=ee(),i=z(s);{var l=u=>{Oe(u,{children:(f,d)=>{Fe(f,{get hidden(){return r(o)},get page(){return Q.Settings}})},$$slots:{default:!0}})},c=u=>{var f=ee(),d=z(f);{var v=h=>{Oe(h,{children:(y,w)=>{Fe(y,{get hidden(){return r(o)},get page(){return Q.NewNote}})},$$slots:{default:!0}})},m=h=>{var y=ee(),w=z(y);{var x=k=>{Oe(k,{children:(S,D)=>{Fe(S,{get params(){return n()},get hidden(){return r(o)},get page(){return Q.EditNote}})},$$slots:{default:!0}})},A=k=>{var S=ee(),D=z(S);{var C=T=>{Oe(T,{children:(F,te)=>{Fe(F,{get hidden(){return r(o)},get page(){return Q.ImportData}})},$$slots:{default:!0}})},N=T=>{var F=ee(),te=z(F);{var ie=Z=>{Oe(Z,{children:(G,q)=>{Fe(G,{get hidden(){return r(o)},get page(){return Q.ExportData}})},$$slots:{default:!0}})},B=Z=>{var G=ee(),q=z(G);{var K=ne=>{Oe(ne,{children:(X,ae)=>{Fe(X,{get hidden(){return r(o)},get page(){return Q.ClearStore}})},$$slots:{default:!0}})},$=ne=>{var X=ee(),ae=z(X);{var I=Y=>{Oe(Y,{children:(ce,ve)=>{Fe(ce,{get hidden(){return r(o)},get page(){return Q.AccountSetup}})},$$slots:{default:!0}})},R=Y=>{var ce=ee(),ve=z(ce);{var ye=re=>{Oe(re,{children:(le,P)=>{Fe(le,{get hidden(){return r(o)},get page(){return Q.Install}})},$$slots:{default:!0}})},be=re=>{var le=ee(),P=z(le);{var O=E=>{Oe(E,{children:(j,J)=>{Fe(j,{get hidden(){return r(o)},get page(){return Q.InstallSuccess}})},$$slots:{default:!0}})},p=E=>{var j=ee(),J=z(j);{var he=me=>{Oe(me,{children:(qe,Re)=>{Sf(qe,{})},$$slots:{default:!0}})},Pe=me=>{var qe=ee(),Re=z(qe);{var Rt=Ke=>{Oe(Ke,{children:(Ne,Ye)=>{Fe(Ne,{get hidden(){return r(o)},get page(){return Q.Auth}})},$$slots:{default:!0}})},rt=Ke=>{var Ne=ee(),Ye=z(Ne);{var $e=ot=>{Oe(ot,{children:(xt,Jt)=>{Fe(xt,{get hidden(){return r(o)},get page(){return Q.Signup}})},$$slots:{default:!0}})},hn=ot=>{var xt=ee(),Jt=z(xt);{var ar=gn=>{Oe(gn,{children:(Mn,Wr)=>{Fe(Mn,{get hidden(){return r(o)},get page(){return Q.Signin}})},$$slots:{default:!0}})},rr=gn=>{var Mn=ee(),Wr=z(Mn);{var Vs=Ln=>{Oe(Ln,{children:(Sa,qr)=>{Fe(Sa,{get hidden(){return r(o)},get page(){return Q.AccessKeys}})},$$slots:{default:!0}})},Us=Ln=>{var Sa=ee(),qr=z(Sa);{var Ws=In=>{Oe(In,{children:(Ca,Kr)=>{Fe(Ca,{get hidden(){return r(o)},get page(){return Q.Account}})},$$slots:{default:!0}})},qs=In=>{var Ca=ee(),Kr=z(Ca);{var Ks=On=>{Oe(On,{children:(Ea,Yr)=>{Fe(Ea,{get hidden(){return r(o)},get page(){return Q.ConfirmAccessKey}})},$$slots:{default:!0}})},Ys=On=>{var Ea=ee(),Yr=z(Ea);{var Gs=Bn=>{Oe(Bn,{children:(ka,Gr)=>{Fe(ka,{get hidden(){return r(o)},get page(){return Q.Exit}})},$$slots:{default:!0}})},Xs=Bn=>{var ka=ee(),Gr=z(ka);{var Zs=Rn=>{Oe(Rn,{children:(Da,Xr)=>{Fe(Da,{get hidden(){return r(o)},get page(){return Q.Sync}})},$$slots:{default:!0}})},Js=Rn=>{var Da=ee(),Xr=z(Da);{var Qs=zn=>{Oe(zn,{children:(xa,Zr)=>{Fe(xa,{get hidden(){return r(o)},get page(){return Q.Subscription}})},$$slots:{default:!0}})},$s=zn=>{var xa=ee(),Zr=z(xa);{var ei=Fn=>{Oe(Fn,{children:(or,ni)=>{Fe(or,{get hidden(){return r(o)},get page(){return Q.About}})},$$slots:{default:!0}})},ti=Fn=>{Oe(Fn,{children:(or,ni)=>{Sd(or,{})},$$slots:{default:!0}})};V(Zr,Fn=>{e()===Q.About?Fn(ei):Fn(ti,!1)},!0)}_(zn,xa)};V(Xr,zn=>{e()===Q.Subscription?zn(Qs):zn($s,!1)},!0)}_(Rn,Da)};V(Gr,Rn=>{e()===Q.Sync?Rn(Zs):Rn(Js,!1)},!0)}_(Bn,ka)};V(Yr,Bn=>{e()===Q.Exit?Bn(Gs):Bn(Xs,!1)},!0)}_(On,Ea)};V(Kr,On=>{e()===Q.ConfirmAccessKey?On(Ks):On(Ys,!1)},!0)}_(In,Ca)};V(qr,In=>{e()===Q.Account?In(Ws):In(qs,!1)},!0)}_(Ln,Sa)};V(Wr,Ln=>{e()===Q.AccessKeys?Ln(Vs):Ln(Us,!1)},!0)}_(gn,Mn)};V(Jt,gn=>{e()===Q.Signin?gn(ar):gn(rr,!1)},!0)}_(ot,xt)};V(Ye,ot=>{e()===Q.Signup?ot($e):ot(hn,!1)},!0)}_(Ke,Ne)};V(Re,Ke=>{e()===Q.Auth?Ke(Rt):Ke(rt,!1)},!0)}_(me,qe)};V(J,me=>{e()===Q.Welcome?me(he):me(Pe,!1)},!0)}_(E,j)};V(P,E=>{e()===Q.InstallSuccess?E(O):E(p,!1)},!0)}_(re,le)};V(ve,re=>{e()===Q.Install?re(ye):re(be,!1)},!0)}_(Y,ce)};V(ae,Y=>{e()===Q.AccountSetup?Y(I):Y(R,!1)},!0)}_(ne,X)};V(q,ne=>{e()===Q.ClearStore?ne(K):ne($,!1)},!0)}_(Z,G)};V(te,Z=>{e()===Q.ExportData?Z(ie):Z(B,!1)},!0)}_(T,F)};V(D,T=>{e()===Q.ImportData?T(C):T(N,!1)},!0)}_(k,S)};V(w,k=>{e()===Q.EditNote?k(x):k(A,!1)},!0)}_(h,y)};V(d,h=>{e()===Q.NewNote?h(v):h(m,!1)},!0)}_(u,f)};V(i,u=>{e()===Q.Settings?u(l):u(c,!1)})}_(t,s)};var Cf=U("<!> <!>",1);function Ef(t,e){oe(e,!0);const{getDialogPages:n}=wt(),{getAccount:a}=ks();let o=L(n),s=L(()=>a()!==void 0);const{checkMobileSize:i}=Zt();let l=W(Ze([]));const c=L(i);Le(()=>{r(o),r(c),Bt(()=>{if(r(c))r(o).length>=r(l).length?g(l,r(o).map(w=>({page:w,shown:!0})),!0):g(l,r(l).map((w,x)=>({page:w.page,shown:x<r(o).length})),!0);else if(r(o).length>=r(l).length)g(l,r(o).map(w=>({page:w,shown:!0})),!0);else{if(r(o).length===0){g(l,[{page:r(l)[r(l).length-1].page,shown:!1}],!0);return}g(l,r(o).map(w=>({page:w,shown:!0})),!0)}})});const u=()=>{g(l,r(o).map(w=>({page:w,shown:!0})),!0)};var f=Cf(),d=z(f);{var v=w=>{_f(w,{})};V(d,w=>{r(s)&&w(v)})}var m=H(d,2);{var h=w=>{var x=ee(),A=z(x);Qa(A,19,()=>r(l),k=>k.page,(k,S,D)=>{const C=L(()=>r(S).page.split("?")[1]),N=L(()=>r(S).page.split("?")[0]);{let T=L(()=>r(D)!==r(l).length-1&&!!r(l)[r(D)+1]?.shown),F=L(()=>r(D)===0);po(k,{onClosed:u,get shown(){return r(S).shown},get hidden(){return r(T)},get isLastDialog(){return r(F)},children:(te,ie)=>{{let B=L(()=>r(D)!==r(l).length-1&&!!r(l)[r(D)+1]?.shown);mo(te,()=>r(N),()=>r(C),()=>r(B))}},$$slots:{default:!0}})}}),_(w,x)},y=w=>{var x=ee(),A=z(x);{var k=S=>{const D=L(()=>r(l)[r(l).length-1].page.split("?")[1]),C=L(()=>r(l)[r(l).length-1].page.split("?")[0]);{let N=L(()=>r(l).length===1);po(S,{onClosed:u,get shown(){return r(l)[r(l).length-1].shown},hidden:!1,get isLastDialog(){return r(N)},children:(T,F)=>{mo(T,()=>r(C),()=>r(D))},$$slots:{default:!0}})}};V(A,S=>{r(l).length>0&&S(k)},!0)}_(w,x)};V(m,w=>{i()?w(h):w(y,!1)})}_(t,f),se()}function kf(t,e){oe(e,!1);let n=0;ke(()=>{document.addEventListener("touchstart",a=>{n=a.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",a=>{const s=a.touches[0].clientX-n;(n<30&&s>0||n>window.innerWidth-30&&s<0)&&a.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),$a(),se()}const Df=(t,e)=>{r(e)&&r(e).scrollTo({top:0})};var xf=U('<div><button class="buttonTop svelte-1n46o8q"><!> <span class="icon svelte-1n46o8q"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),Pf=U('<!> <!> <main><div class="wrapperHeader svelte-1n46o8q"><!></div> <div class="container svelte-1n46o8q"><!></div></main> <!>',1);function Tf(t,e){oe(e,!0);const{replace:n}=Dt(),{hasDialogPage:a}=wt(),{setScrollContainer:o}=Hr(),{getAccount:s,init:i}=ks(),{isInitedNotes:l}=dn(),{getDialogPages:c}=wt(),{createBroadcastChannel:u,tabId:f}=tr(),d=u(),{getSidebarState:v}=er(),{setClosableDialog:m}=vn(),h=()=>{n(`/?${bt}=${Q.Welcome}`)};ke(()=>{i(R=>{R===void 0?h():((a(Q.Welcome)||a(Q.AccountSetup))&&n("/"),R?g(k,R):g(k,null))});const I=async R=>{const Y=JSON.parse(R.data);if(Y.tabId&&Y.tabId===f)return;const ce=Y;ce.type==="initLocalAccount"||ce.type==="initCloudAccount"||ce.type==="updateAccount"||ce.type==="disconnectCloudAccount"?n("/"):ce.type==="exit"&&h()};return d.addEventListener(I),()=>d.removeEventListener(I)});const y=fn();ke(async()=>{await new Promise(I=>setTimeout(I,250)),await os(),y.working=!0});let w=W(!1),x=0,A=L(()=>c().length>0),k=L(s),S=L(l),D=W(null);Le(()=>{m(r(k)!==void 0)}),Le(()=>{o(r(D))});const C=()=>{if(r(D)){const I=r(D).scrollTop||0;I===0?g(w,!1):!r(w)&&x>I?g(w,!0):r(w)&&x+50<I&&g(w,!1),x=I}},N=()=>{C()};Le(()=>(r(D)?.addEventListener("scroll",N),window.addEventListener("resize",N),()=>{r(D)?.removeEventListener("scroll",N),window.removeEventListener("resize",N)}));const T=L(v);var F=Pf(),te=z(F);kf(te,{});var ie=H(te,2);zc(ie,{});var B=H(ie,2),Z=b(B),G=b(Z);{var q=I=>{ad(I,{})};V(G,I=>{r(k)!==void 0&&I(q)})}var K=H(Z,2),$=b(K);{var ne=I=>{Ef(I,{})};V($,I=>{r(S)&&I(ne)})}at(B,I=>g(D,I),()=>r(D));var X=H(B,2);{var ae=I=>{var R=xf(),Y=b(R);Y.__click=[Df,D];var ce=b(Y);Ue(ce,{children:(be,re)=>{var le=Ie("top");_(be,le)}});var ve=H(ce,2),ye=b(ve);ue(ye,()=>({"--rotate":"90deg","--size":"28px"})),_e(ye.lastChild,{name:"back"}),de(()=>{Pn(R,`--swiping-ratio: ${y.swipingRatio}; --transition-timing-default: ${y.duration}s;`),pe(R,1,ge(["wrapperButtonTop",{isAnimationOn:y.working&&!y.isSwiping,open:r(A)||r(T).type!=="closed"}]),"svelte-1n46o8q")}),_(I,R)};V(X,I=>{r(w)&&I(ae)})}de(()=>{Pn(B,`--swiping-ratio: ${y.swipingRatio}; --transition-timing-default: ${y.duration}s;`),pe(B,1,ge(["main",{isAnimationOn:y.working&&!y.isSwiping,open:r(A)||r(T).type!=="closed",blockScroll:r(T).type!=="closed"}]),"svelte-1n46o8q")}),_(t,F),se()}Qe(["click"]);function Af(t){Lc(t,{children:(e,n)=>{Tf(e,{})}})}window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});window.isUnsupportedBrowser||wl(Af,{target:document.getElementById("app")});export{yf as $,ks as A,on as B,$a as C,dn as D,Br as E,bt as F,Lf as G,wf as H,_e as I,we as J,pe as K,Fs as L,ge as M,If as N,Of as O,Q as P,Pn as Q,Zt as R,ic as S,at as T,Bf as U,Ue as V,uu as W,Fu as X,Ll as Y,tr as Z,Jl as _,ue as a,Be as b,b as c,_ as d,Qa as e,U as f,r as g,W as h,V as i,se as j,g as k,z as l,rn as m,wt as n,ke as o,oe as p,vn as q,Ze as r,H as s,de as t,Le as u,ee as v,Qe as w,Ie as x,L as y,Dt as z};
