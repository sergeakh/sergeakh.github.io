var Oa=Object.defineProperty;var xa=(t,e,n)=>e in t?Oa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var rt=(t,e,n)=>xa(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const $n=!1;var Ln=Array.isArray,Na=Array.prototype.indexOf,An=Array.from,Ma=Object.defineProperty,yt=Object.getOwnPropertyDescriptor,_r=Object.getOwnPropertyDescriptors,Ia=Object.prototype,Ba=Array.prototype,Pn=Object.getPrototypeOf,er=Object.isExtensible;const Ht=()=>{};function Ra(t){return t()}function Zt(t){for(var e=0;e<t.length;e++)t[e]()}const Pe=2,mr=4,rn=8,On=16,Je=32,Ct=64,xn=128,Le=256,Qt=512,Oe=1024,Ve=2048,ft=4096,ze=8192,Nn=16384,yr=32768,an=65536,tr=1<<17,Fa=1<<18,wr=1<<19,mn=1<<20,it=Symbol("$state"),Ua=Symbol("legacy props"),Ka=Symbol(""),Sr=new class extends Error{constructor(){super(...arguments);rt(this,"name","StaleReactionError");rt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function br(t){return t===this.v}function Ha(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Er(t){return!Ha(t,this.v)}function ja(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function za(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Va(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Wa(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ya(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ja(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Xa(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function qa(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Tt=!1,Ga=!1;function Za(){Tt=!0}const Mn=1,In=2,kr=4,Qa=8,$a=16,es=1,ts=2,ns=4,rs=8,as=16,ss=1,os=2,Ce=Symbol(),is="http://www.w3.org/1999/xhtml";function ls(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let fe=null;function nr(t){fe=t}function W(t,e=!1,n){var r=fe={p:fe,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Tt&&!e&&(fe.l={s:null,u:null,r1:[],r2:It(!1)}),Mr(()=>{r.d=!0})}function Y(t){const e=fe;if(e!==null){t!==void 0&&(e.x=t);const i=e.e;if(i!==null){var n=se,r=ne;e.e=null;try{for(var a=0;a<i.length;a++){var s=i[a];et(s.effect),Be(s.reaction),Bn(s.fn)}}finally{et(n),Be(r)}}fe=e.p,e.m=!0}return t||{}}function jt(){return!Tt||fe!==null&&fe.l===null}function ce(t){if(typeof t!="object"||t===null||it in t)return t;const e=Pn(t);if(e!==Ia&&e!==Ba)return t;var n=new Map,r=Ln(t),a=O(0),s=ne,i=l=>{var u=ne;Be(s);var d=l();return Be(u),d};return r&&n.set("length",O(t.length)),new Proxy(t,{defineProperty(l,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&Ja();var c=n.get(u);return c===void 0?c=i(()=>{var f=O(d.value);return n.set(u,f),f}):S(c,d.value,!0),!0},deleteProperty(l,u){var d=n.get(u);if(d===void 0){if(u in l){const v=i(()=>O(Ce));n.set(u,v),fn(a)}}else{if(r&&typeof u=="string"){var c=n.get("length"),f=Number(u);Number.isInteger(f)&&f<c.v&&S(c,f)}S(d,Ce),fn(a)}return!0},get(l,u,d){var h;if(u===it)return t;var c=n.get(u),f=u in l;if(c===void 0&&(!f||(h=yt(l,u))!=null&&h.writable)&&(c=i(()=>{var g=ce(f?l[u]:Ce),_=O(g);return _}),n.set(u,c)),c!==void 0){var v=o(c);return v===Ce?void 0:v}return Reflect.get(l,u,d)},getOwnPropertyDescriptor(l,u){var d=Reflect.getOwnPropertyDescriptor(l,u);if(d&&"value"in d){var c=n.get(u);c&&(d.value=o(c))}else if(d===void 0){var f=n.get(u),v=f==null?void 0:f.v;if(f!==void 0&&v!==Ce)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return d},has(l,u){var v;if(u===it)return!0;var d=n.get(u),c=d!==void 0&&d.v!==Ce||Reflect.has(l,u);if(d!==void 0||se!==null&&(!c||(v=yt(l,u))!=null&&v.writable)){d===void 0&&(d=i(()=>{var h=c?ce(l[u]):Ce,g=O(h);return g}),n.set(u,d));var f=o(d);if(f===Ce)return!1}return c},set(l,u,d,c){var p;var f=n.get(u),v=u in l;if(r&&u==="length")for(var h=d;h<f.v;h+=1){var g=n.get(h+"");g!==void 0?S(g,Ce):h in l&&(g=i(()=>O(Ce)),n.set(h+"",g))}if(f===void 0)(!v||(p=yt(l,u))!=null&&p.writable)&&(f=i(()=>O(void 0)),S(f,ce(d)),n.set(u,f));else{v=f.v!==Ce;var _=i(()=>ce(d));S(f,_)}var w=Reflect.getOwnPropertyDescriptor(l,u);if(w!=null&&w.set&&w.set.call(c,d),!v){if(r&&typeof u=="string"){var k=n.get("length"),m=Number(u);Number.isInteger(m)&&m>=k.v&&S(k,m+1)}fn(a)}return!0},ownKeys(l){o(a);var u=Reflect.ownKeys(l).filter(f=>{var v=n.get(f);return v===void 0||v.v!==Ce});for(var[d,c]of n)c.v!==Ce&&!(d in l)&&u.push(d);return u},setPrototypeOf(){Xa()}})}function fn(t,e=1){S(t,t.v+e)}function zt(t){var e=Pe|Ve,n=ne!==null&&(ne.f&Pe)!==0?ne:null;return se===null||n!==null&&(n.f&Le)!==0?e|=Le:se.f|=wr,{ctx:fe,deps:null,effects:null,equals:br,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:n??se,ac:null}}function G(t){const e=zt(t);return jr(e),e}function Cr(t){const e=zt(t);return e.equals=Er,e}function Tr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)We(e[n])}}function cs(t){for(var e=t.parent;e!==null;){if((e.f&Pe)===0)return e;e=e.parent}return null}function Dr(t){var e,n=se;et(cs(t));try{Tr(t),e=Yr(t)}finally{et(n)}return e}function Lr(t){var e=Dr(t);if(t.equals(e)||(t.v=e,t.wv=Vr()),!Lt){var n=(Ze||(t.f&Le)!==0)&&t.deps!==null?ft:Oe;Re(t,n)}}const Mt=new Map;function It(t,e){var n={f:0,v:t,reactions:null,equals:br,rv:0,wv:0};return n}function O(t,e){const n=It(t);return jr(n),n}function us(t,e=!1,n=!0){var a;const r=It(t);return e||(r.equals=Er),Tt&&n&&fe!==null&&fe.l!==null&&((a=fe.l).s??(a.s=[])).push(r),r}function S(t,e,n=!1){ne!==null&&(!Ie||(ne.f&tr)!==0)&&jt()&&(ne.f&(Pe|On|tr))!==0&&!(pe!=null&&pe[1].includes(t)&&pe[0]===ne)&&qa();let r=n?ce(e):e;return yn(t,r)}function yn(t,e){if(!t.equals(e)){var n=t.v;Lt?Mt.set(t,e):Mt.set(t,n),t.v=e,(t.f&Pe)!==0&&((t.f&Ve)!==0&&Dr(t),Re(t,(t.f&Le)===0?Oe:ft)),t.wv=Vr(),Ar(t,Ve),jt()&&se!==null&&(se.f&Oe)!==0&&(se.f&(Je|Ct))===0&&(Ae===null?bs([t]):Ae.push(t))}return e}function Ar(t,e){var n=t.reactions;if(n!==null)for(var r=jt(),a=n.length,s=0;s<a;s++){var i=n[s],l=i.f;(l&Ve)===0&&(!r&&i===se||(Re(i,e),(l&(Oe|Le))!==0&&((l&Pe)!==0?Ar(i,ft):Kn(i))))}}let ds=!1;var rr,Pr,Or,xr;function fs(){if(rr===void 0){rr=window,Pr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Or=yt(e,"firstChild").get,xr=yt(e,"nextSibling").get,er(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),er(n)&&(n.__t=void 0)}}function sn(t=""){return document.createTextNode(t)}function wt(t){return Or.call(t)}function on(t){return xr.call(t)}function b(t,e){return wt(t)}function z(t,e){{var n=wt(t);return n instanceof Comment&&n.data===""?on(n):n}}function D(t,e=1,n=!1){let r=t;for(;e--;)r=on(r);return r}function vs(t){t.textContent=""}function Nr(t){se===null&&ne===null&&Va(),ne!==null&&(ne.f&Le)!==0&&se===null&&za(),Lt&&ja()}function hs(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Dt(t,e,n,r=!0){var a=se,s={ctx:fe,deps:null,nodes_start:null,nodes_end:null,f:t|Ve,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Un(s),s.f|=yr}catch(u){throw We(s),u}else e!==null&&Kn(s);var i=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(wr|xn))===0;if(!i&&r&&(a!==null&&hs(s,a),ne!==null&&(ne.f&Pe)!==0)){var l=ne;(l.effects??(l.effects=[])).push(s)}return s}function Mr(t){const e=Dt(rn,null,!1);return Re(e,Oe),e.teardown=t,e}function he(t){Nr();var e=se!==null&&(se.f&Je)!==0&&fe!==null&&!fe.m;if(e){var n=fe;(n.e??(n.e=[])).push({fn:t,effect:se,reaction:ne})}else{var r=Bn(t);return r}}function gs(t){return Nr(),ln(t)}function ps(t){const e=Dt(Ct,t,!0);return(n={})=>new Promise(r=>{n.outro?$t(e,()=>{We(e),r(void 0)}):(We(e),r(void 0))})}function Bn(t){return Dt(mr,t,!1)}function ln(t){return Dt(rn,t,!0)}function ie(t,e=[],n=zt){const r=e.map(n);return cn(()=>t(...r.map(o)))}function cn(t,e=0){var n=Dt(rn|On|e,t,!0);return n}function St(t,e=!0){return Dt(rn|Je,t,!0,e)}function Ir(t){var e=t.teardown;if(e!==null){const n=Lt,r=ne;ar(!0),Be(null);try{e.call(null)}finally{ar(n),Be(r)}}}function Br(t,e=!1){var a;var n=t.first;for(t.first=t.last=null;n!==null;){(a=n.ac)==null||a.abort(Sr);var r=n.next;(n.f&Ct)!==0?n.parent=null:We(n,e),n=r}}function _s(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Je)===0&&We(e),e=n}}function We(t,e=!0){var n=!1;(e||(t.f&Fa)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ms(t.nodes_start,t.nodes_end),n=!0),Br(t,e&&!n),nn(t,0),Re(t,Nn);var r=t.transitions;if(r!==null)for(const s of r)s.stop();Ir(t);var a=t.parent;a!==null&&a.first!==null&&Rr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ms(t,e){for(;t!==null;){var n=t===e?null:on(t);t.remove(),t=n}}function Rr(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function $t(t,e){var n=[];Rn(t,n,!0),Fr(n,()=>{We(t),e&&e()})}function Fr(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var a of t)a.out(r)}else e()}function Rn(t,e,n){if((t.f&ze)===0){if(t.f^=ze,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var a=r.next,s=(r.f&an)!==0||(r.f&Je)!==0;Rn(r,e,s?n:!1),r=a}}}function en(t){Ur(t,!0)}function Ur(t,e){if((t.f&ze)!==0){t.f^=ze;for(var n=t.first;n!==null;){var r=n.next,a=(n.f&an)!==0||(n.f&Je)!==0;Ur(n,a?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let Bt=[],wn=[];function Kr(){var t=Bt;Bt=[],Zt(t)}function ys(){var t=wn;wn=[],Zt(t)}function Fn(t){Bt.length===0&&queueMicrotask(Kr),Bt.push(t)}function ws(){Bt.length>0&&Kr(),wn.length>0&&ys()}function Ss(t){var e=se;if((e.f&yr)===0){if((e.f&xn)===0)throw t;e.fn(t)}else Hr(t,e)}function Hr(t,e){for(;e!==null;){if((e.f&xn)!==0)try{e.b.error(t);return}catch{}e=e.parent}throw t}let Rt=!1,Ft=null,lt=!1,Lt=!1;function ar(t){Lt=t}let Ot=[];let ne=null,Ie=!1;function Be(t){ne=t}let se=null;function et(t){se=t}let pe=null;function jr(t){ne!==null&&ne.f&mn&&(pe===null?pe=[ne,[t]]:pe[1].push(t))}let Ee=null,De=0,Ae=null;function bs(t){Ae=t}let zr=1,tn=0,Ze=!1;function Vr(){return++zr}function un(t){var f;var e=t.f;if((e&Ve)!==0)return!0;if((e&ft)!==0){var n=t.deps,r=(e&Le)!==0;if(n!==null){var a,s,i=(e&Qt)!==0,l=r&&se!==null&&!Ze,u=n.length;if(i||l){var d=t,c=d.parent;for(a=0;a<u;a++)s=n[a],(i||!((f=s==null?void 0:s.reactions)!=null&&f.includes(d)))&&(s.reactions??(s.reactions=[])).push(d);i&&(d.f^=Qt),l&&c!==null&&(c.f&Le)===0&&(d.f^=Le)}for(a=0;a<u;a++)if(s=n[a],un(s)&&Lr(s),s.wv>t.wv)return!0}(!r||se!==null&&!Ze)&&Re(t,Oe)}return!1}function Wr(t,e,n=!0){var r=t.reactions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];pe!=null&&pe[1].includes(t)&&pe[0]===ne||((s.f&Pe)!==0?Wr(s,e,!1):e===s&&(n?Re(s,Ve):(s.f&Oe)!==0&&Re(s,ft),Kn(s)))}}function Yr(t){var h;var e=Ee,n=De,r=Ae,a=ne,s=Ze,i=pe,l=fe,u=Ie,d=t.f;Ee=null,De=0,Ae=null,Ze=(d&Le)!==0&&(Ie||!lt||ne===null),ne=(d&(Je|Ct))===0?t:null,pe=null,nr(t.ctx),Ie=!1,tn++,t.f|=mn,t.ac!==null&&(t.ac.abort(Sr),t.ac=null);try{var c=(0,t.fn)(),f=t.deps;if(Ee!==null){var v;if(nn(t,De),f!==null&&De>0)for(f.length=De+Ee.length,v=0;v<Ee.length;v++)f[De+v]=Ee[v];else t.deps=f=Ee;if(!Ze||(d&Pe)!==0&&t.reactions!==null)for(v=De;v<f.length;v++)((h=f[v]).reactions??(h.reactions=[])).push(t)}else f!==null&&De<f.length&&(nn(t,De),f.length=De);if(jt()&&Ae!==null&&!Ie&&f!==null&&(t.f&(Pe|ft|Ve))===0)for(v=0;v<Ae.length;v++)Wr(Ae[v],t);return a!==null&&a!==t&&(tn++,Ae!==null&&(r===null?r=Ae:r.push(...Ae))),c}catch(g){Ss(g)}finally{Ee=e,De=n,Ae=r,ne=a,Ze=s,pe=i,nr(l),Ie=u,t.f^=mn}}function Es(t,e){let n=e.reactions;if(n!==null){var r=Na.call(n,t);if(r!==-1){var a=n.length-1;a===0?n=e.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(e.f&Pe)!==0&&(Ee===null||!Ee.includes(e))&&(Re(e,ft),(e.f&(Le|Qt))===0&&(e.f^=Qt),Tr(e),nn(e,0))}function nn(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Es(t,n[r])}function Un(t){var e=t.f;if((e&Nn)===0){Re(t,Oe);var n=se,r=lt;se=t,lt=!0;try{(e&On)!==0?_s(t):Br(t),Ir(t);var a=Yr(t);t.teardown=typeof a=="function"?a:null,t.wv=zr;var s;$n&&Ga&&(t.f&Ve)!==0&&t.deps}finally{lt=r,se=n}}}function ks(){try{Wa()}catch(t){if(Ft!==null)Hr(t,Ft);else throw t}}function Jr(){var t=lt;try{var e=0;for(lt=!0;Ot.length>0;){e++>1e3&&ks();var n=Ot,r=n.length;Ot=[];for(var a=0;a<r;a++){var s=Ts(n[a]);Cs(s)}Mt.clear()}}finally{Rt=!1,lt=t,Ft=null}}function Cs(t){var e=t.length;if(e!==0)for(var n=0;n<e;n++){var r=t[n];(r.f&(Nn|ze))===0&&un(r)&&(Un(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Rr(r):r.fn=null))}}function Kn(t){Rt||(Rt=!0,queueMicrotask(Jr));for(var e=Ft=t;e.parent!==null;){e=e.parent;var n=e.f;if((n&(Ct|Je))!==0){if((n&Oe)===0)return;e.f^=Oe}}Ot.push(e)}function Ts(t){for(var e=[],n=t;n!==null;){var r=n.f,a=(r&(Je|Ct))!==0,s=a&&(r&Oe)!==0;if(!s&&(r&ze)===0){(r&mr)!==0?e.push(n):a?n.f^=Oe:un(n)&&Un(n);var i=n.first;if(i!==null){n=i;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)n=l.next,l=l.parent}return e}function Ds(t){for(var e;;){if(ws(),Ot.length===0)return Rt=!1,Ft=null,e;Rt=!0,Jr()}}async function Ls(){await Promise.resolve(),Ds()}function o(t){var e=t.f,n=(e&Pe)!==0;if(ne!==null&&!Ie){if(!(pe!=null&&pe[1].includes(t))||pe[0]!==ne){var r=ne.deps;t.rv<tn&&(t.rv=tn,Ee===null&&r!==null&&r[De]===t?De++:Ee===null?Ee=[t]:(!Ze||!Ee.includes(t))&&Ee.push(t))}}else if(n&&t.deps===null&&t.effects===null){var a=t,s=a.parent;s!==null&&(s.f&Le)===0&&(a.f^=Le)}return n&&(a=t,un(a)&&Lr(a)),Lt&&Mt.has(t)?Mt.get(t):t.v}function Vt(t){var e=Ie;try{return Ie=!0,t()}finally{Ie=e}}const As=-7169;function Re(t,e){t.f=t.f&As|e}function Ps(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(it in t)Sn(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&it in n&&Sn(n)}}}function Sn(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Sn(t[r],e)}catch{}const n=Pn(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=_r(n);for(let a in r){const s=r[a].get;if(s)try{s.call(t)}catch{}}}}}const Os=["touchstart","touchmove"];function xs(t){return Os.includes(t)}let sr=!1;function Ns(){sr||(sr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function Xr(t){var e=ne,n=se;Be(null),et(null);try{return t()}finally{Be(e),et(n)}}function Ms(t,e,n,r=n){t.addEventListener(e,()=>Xr(n));const a=t.__on_r;a?t.__on_r=()=>{a(),r(!0)}:t.__on_r=()=>r(!0),Ns()}const qr=new Set,bn=new Set;function Is(t,e,n,r={}){function a(s){if(r.capture||At.call(e,s),!s.cancelBubble)return Xr(()=>n==null?void 0:n.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Fn(()=>{e.addEventListener(t,a,r)}):e.addEventListener(t,a,r),a}function He(t,e,n,r,a){var s={capture:r,passive:a},i=Is(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Mr(()=>{e.removeEventListener(t,i,s)})}function be(t){for(var e=0;e<t.length;e++)qr.add(t[e]);for(var n of bn)n(t)}function At(t){var m;var e=this,n=e.ownerDocument,r=t.type,a=((m=t.composedPath)==null?void 0:m.call(t))||[],s=a[0]||t.target,i=0,l=t.__root;if(l){var u=a.indexOf(l);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var d=a.indexOf(e);if(d===-1)return;u<=d&&(i=u)}if(s=a[i]||t.target,s!==e){Ma(t,"currentTarget",{configurable:!0,get(){return s||n}});var c=ne,f=se;Be(null),et(null);try{for(var v,h=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+r];if(_!=null&&(!s.disabled||t.target===s))if(Ln(_)){var[w,...k]=_;w.apply(s,[t,...k])}else _.call(s,t)}catch(p){v?h.push(p):v=p}if(t.cancelBubble||g===e||g===null)break;s=g}if(v){for(let p of h)queueMicrotask(()=>{throw p});throw v}}finally{t.__root=e,delete t.currentTarget,Be(c),et(f)}}}function Gr(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Ut(t,e){var n=se;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function P(t,e){var n=(e&ss)!==0,r=(e&os)!==0,a,s=!t.startsWith("<!>");return()=>{a===void 0&&(a=Gr(s?t:"<!>"+t),n||(a=wt(a)));var i=r||Pr?document.importNode(a,!0):a.cloneNode(!0);if(n){var l=wt(i),u=i.lastChild;Ut(l,u)}else Ut(i,i);return i}}function Bs(t,e,n="svg"){var r=!t.startsWith("<!>"),a=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=Gr(a),l=wt(i);s=wt(l)}var u=s.cloneNode(!0);return Ut(u,u),u}}function Rs(t,e){return Bs(t,e,"svg")}function le(t=""){{var e=sn(t+"");return Ut(e,e),e}}function Se(){var t=document.createDocumentFragment(),e=document.createComment(""),n=sn();return t.append(e,n),Ut(e,n),t}function E(t,e){t!==null&&t.before(e)}function Fs(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function vt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Us(t,e){return Ks(t,e)}const _t=new Map;function Ks(t,{target:e,anchor:n,props:r={},events:a,context:s,intro:i=!0}){fs();var l=new Set,u=f=>{for(var v=0;v<f.length;v++){var h=f[v];if(!l.has(h)){l.add(h);var g=xs(h);e.addEventListener(h,At,{passive:g});var _=_t.get(h);_===void 0?(document.addEventListener(h,At,{passive:g}),_t.set(h,1)):_t.set(h,_+1)}}};u(An(qr)),bn.add(u);var d=void 0,c=ps(()=>{var f=n??e.appendChild(sn());return St(()=>{if(s){W({});var v=fe;v.c=s}a&&(r.$$events=a),d=t(f,r)||{},s&&Y()}),()=>{var g;for(var v of l){e.removeEventListener(v,At);var h=_t.get(v);--h===0?(document.removeEventListener(v,At),_t.delete(v)):_t.set(v,h)}bn.delete(u),f!==n&&((g=f.parentNode)==null||g.removeChild(f))}});return Hs.set(d,c),d}let Hs=new WeakMap;function N(t,e,[n,r]=[0,0]){var a=t,s=null,i=null,l=Ce,u=n>0?an:0,d=!1;const c=(v,h=!0)=>{d=!0,f(h,v)},f=(v,h)=>{l!==(l=v)&&(l?(s?en(s):h&&(s=St(()=>h(a))),i&&$t(i,()=>{i=null})):(i?en(i):h&&(i=St(()=>h(a,[n+1,r]))),s&&$t(s,()=>{s=null})))};cn(()=>{d=!1,e(c),d||f(null,null)},u)}function ye(t,e){ln(()=>{var n=e();for(var r in n){var a=n[r];a?t.style.setProperty(r,a):t.style.removeProperty(r)}})}function js(t,e){return e}function zs(t,e,n,r){for(var a=[],s=e.length,i=0;i<s;i++)Rn(e[i].e,a,!0);var l=s>0&&a.length===0&&n!==null;if(l){var u=n.parentNode;vs(u),u.append(n),r.clear(),qe(t,e[0].prev,e[s-1].next)}Fr(a,()=>{for(var d=0;d<s;d++){var c=e[d];l||(r.delete(c.k),qe(t,c.prev,c.next)),We(c.e,!l)}})}function je(t,e,n,r,a,s=null){var i=t,l={flags:e,items:new Map,first:null},u=(e&kr)!==0;if(u){var d=t;i=d.appendChild(sn())}var c=null,f=!1,v=Cr(()=>{var h=n();return Ln(h)?h:h==null?[]:An(h)});cn(()=>{var h=o(v),g=h.length;f&&g===0||(f=g===0,Vs(h,l,i,a,e,r,n),s!==null&&(g===0?c?en(c):c=St(()=>s(i)):c!==null&&$t(c,()=>{c=null})),o(v))})}function Vs(t,e,n,r,a,s,i){var M,B,x,U;var l=(a&Qa)!==0,u=(a&(Mn|In))!==0,d=t.length,c=e.items,f=e.first,v=f,h,g=null,_,w=[],k=[],m,p,y,C;if(l)for(C=0;C<d;C+=1)m=t[C],p=s(m,C),y=c.get(p),y!==void 0&&((M=y.a)==null||M.measure(),(_??(_=new Set)).add(y));for(C=0;C<d;C+=1){if(m=t[C],p=s(m,C),y=c.get(p),y===void 0){var L=v?v.e.nodes_start:n;g=Ys(L,e,g,g===null?e.first:g.next,m,p,C,r,a,i),c.set(p,g),w=[],k=[],v=g.next;continue}if(u&&Ws(y,m,C,a),(y.e.f&ze)!==0&&(en(y.e),l&&((B=y.a)==null||B.unfix(),(_??(_=new Set)).delete(y))),y!==v){if(h!==void 0&&h.has(y)){if(w.length<k.length){var T=k[0],I;g=T.prev;var H=w[0],K=w[w.length-1];for(I=0;I<w.length;I+=1)or(w[I],T,n);for(I=0;I<k.length;I+=1)h.delete(k[I]);qe(e,H.prev,K.next),qe(e,g,H),qe(e,K,T),v=T,g=K,C-=1,w=[],k=[]}else h.delete(y),or(y,v,n),qe(e,y.prev,y.next),qe(e,y,g===null?e.first:g.next),qe(e,g,y),g=y;continue}for(w=[],k=[];v!==null&&v.k!==p;)(v.e.f&ze)===0&&(h??(h=new Set)).add(v),k.push(v),v=v.next;if(v===null)continue;y=v}w.push(y),g=y,v=y.next}if(v!==null||h!==void 0){for(var j=h===void 0?[]:An(h);v!==null;)(v.e.f&ze)===0&&j.push(v),v=v.next;var V=j.length;if(V>0){var q=(a&kr)!==0&&d===0?n:null;if(l){for(C=0;C<V;C+=1)(x=j[C].a)==null||x.measure();for(C=0;C<V;C+=1)(U=j[C].a)==null||U.fix()}zs(e,j,q,c)}}l&&Fn(()=>{var J;if(_!==void 0)for(y of _)(J=y.a)==null||J.apply()}),se.first=e.first&&e.first.e,se.last=g&&g.e}function Ws(t,e,n,r){(r&Mn)!==0&&yn(t.v,e),(r&In)!==0?yn(t.i,n):t.i=n}function Ys(t,e,n,r,a,s,i,l,u,d){var c=(u&Mn)!==0,f=(u&$a)===0,v=c?f?us(a,!1,!1):It(a):a,h=(u&In)===0?i:It(i),g={i:h,v,k:s,a:null,e:null,prev:n,next:r};try{return g.e=St(()=>l(t,v,h,d),ds),g.e.prev=n&&n.e,g.e.next=r&&r.e,n===null?e.first=g:(n.next=g,n.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function or(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,a=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==r;){var i=on(s);a.before(s),s=i}}function qe(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Me(t,e,...n){var r=t,a=Ht,s;cn(()=>{a!==(a=e())&&(s&&(We(s),s=null),s=St(()=>a(r,...n)))},an)}function Zr(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=Zr(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Js(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=Zr(t))&&(r&&(r+=" "),r+=e);return r}function ee(t){return typeof t=="object"?Js(t):t??""}const ir=[...` 	
\r\f \v\uFEFF`];function Xs(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var s=a.length,i=0;(i=r.indexOf(a,i))>=0;){var l=i+s;(i===0||ir.includes(r[i-1]))&&(l===r.length||ir.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function qs(t,e){return t==null?null:String(t)}function Z(t,e,n,r,a,s){var i=t.__className;if(i!==n||i===void 0){var l=Xs(n,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&a!==s)for(var u in s){var d=!!s[u];(a==null||d!==!!a[u])&&t.classList.toggle(u,d)}return s}function Kt(t,e,n,r){var a=t.__style;if(a!==e){var s=qs(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Gs=Symbol("is custom element"),Zs=Symbol("is html");function qt(t,e){var n=Hn(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Gt(t,e){var n=Hn(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function ve(t,e,n,r){var a=Hn(t);a[e]!==(a[e]=n)&&(e==="loading"&&(t[Ka]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Qs(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Hn(t){return t.__attributes??(t.__attributes={[Gs]:t.nodeName.includes("-"),[Zs]:t.namespaceURI===is})}var lr=new Map;function Qs(t){var e=lr.get(t.nodeName);if(e)return e;lr.set(t.nodeName,e=[]);for(var n,r=t,a=Element.prototype;a!==r;){n=_r(r);for(var s in n)n[s].set&&e.push(s);r=Pn(r)}return e}function jn(t,e,n=e){var r=jt();Ms(t,"input",a=>{var s=a?t.defaultValue:t.value;if(s=vn(t)?hn(s):s,n(s),r&&s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd;t.value=s??"",l!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(l,t.value.length))}}),Vt(e)==null&&t.value&&n(vn(t)?hn(t.value):t.value),ln(()=>{var a=e();vn(t)&&a===hn(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function vn(t){var e=t.type;return e==="number"||e==="range"}function hn(t){return t===""?null:+t}function cr(t,e){return t===e||(t==null?void 0:t[it])===e}function we(t={},e,n,r){return Bn(()=>{var a,s;return ln(()=>{a=s,s=[],Vt(()=>{t!==n(...s)&&(e(t,...s),a&&cr(n(...a),t)&&e(null,...a))})}),()=>{Fn(()=>{s&&cr(n(...s),t)&&e(null,...s)})}}),t}function Wt(t=!1){const e=fe,n=e.l.u;if(!n)return;let r=()=>Ps(e.s);if(t){let a=0,s={};const i=zt(()=>{let l=!1;const u=e.s;for(const d in u)u[d]!==s[d]&&(s[d]=u[d],l=!0);return l&&a++,a});r=()=>o(i)}n.b.length&&gs(()=>{ur(e,r),Zt(n.b)}),he(()=>{const a=Vt(()=>n.m.map(Ra));return()=>{for(const s of a)typeof s=="function"&&s()}}),n.a.length&&he(()=>{ur(e,r),Zt(n.a)})}function ur(t,e){if(t.l.s)for(const n of t.l.s)o(n);e()}let Jt=!1;function $s(t){var e=Jt;try{return Jt=!1,[t(),Jt]}finally{Jt=e}}function eo(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function Q(t,e,n,r){var k;var a=!Tt||(n&ts)!==0,s=(n&rs)!==0,i=(n&as)!==0,l=r,u=!0,d=()=>(u&&(u=!1,l=i?Vt(r):r),l),c;if(s){var f=it in t||Ua in t;c=((k=yt(t,e))==null?void 0:k.set)??(f&&e in t?m=>t[e]=m:void 0)}var v,h=!1;s?[v,h]=$s(()=>t[e]):v=t[e],v===void 0&&r!==void 0&&(v=d(),c&&(a&&Ya(),c(v)));var g;if(a?g=()=>{var m=t[e];return m===void 0?d():(u=!0,m)}:g=()=>{var m=t[e];return m!==void 0&&(l=void 0),m===void 0?l:m},a&&(n&ns)===0)return g;if(c){var _=t.$$legacy;return function(m,p){return arguments.length>0?((!a||!p||_||h)&&c(p?g():m),m):g()}}var w=((n&es)!==0?zt:Cr)(g);return s&&o(w),function(m,p){if(arguments.length>0){const y=p?o(w):a&&s?ce(m):m;return S(w,y),l!==void 0&&(l=y),m}return eo(w)?w.v:o(w)}}function ue(t){fe===null&&ls(),Tt&&fe.l!==null?to(fe).m.push(t):he(()=>{const e=Vt(t);if(typeof e=="function")return e})}function to(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const no="5";var pr;typeof window<"u"&&((pr=window.__svelte??(window.__svelte={})).v??(pr.v=new Set)).add(no);let st=O(""),mt=O(null);function ro(t){S(st,""),setTimeout(()=>{S(st,t,!0)},16)}var ao=P('<div class="notification svelte-1a2zucn"> </div>');function so(t,e){W(e,!0),he(()=>{var l,u;o(st),o(st)&&((l=o(mt))==null||l.getBoundingClientRect(),(u=o(mt))==null||u.style.setProperty("opacity","1"));const s=setTimeout(()=>{var d;(d=o(mt))==null||d.style.removeProperty("opacity")},800),i=setTimeout(()=>{var d;S(st,""),(d=o(mt))==null||d.style.removeProperty("opacity")},1200);return()=>{clearTimeout(s),clearTimeout(i)}});var n=Se(),r=z(n);{var a=s=>{var i=ao(),l=b(i);we(i,u=>S(mt,u),()=>o(mt)),ie(()=>vt(l,o(st))),E(s,i)};N(r,s=>{o(st)&&s(a)})}E(t,n),Y()}Za();var oo=P('<span class="vh svelte-14jjkpd"><!></span>');function tt(t,e){var n=oo(),r=b(n);Me(r,()=>e.children),E(t,n)}var io=Rs('<svg class="svelte-gv09tg"><use></use></svg>');function _e(t,e){let n=Q(e,"name",8,"");var r=io(),a=b(r);ie(()=>ve(a,"href",`#icon-${n()??""}`)),E(t,r)}const Qr=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"openSwiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:e.type==="swipe"?{type:"closeSwiping"}:t;case"openSwiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"closeSwiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};let En=O(ce(Qr({type:"closed"})));const Ge=t=>{S(En,Qr(o(En),t),!0)},$r=()=>o(En),lo=()=>{Ge({type:"open"})},co=()=>{Ge({type:"close"})},uo=()=>{const t=$r().type;t==="closed"?lo():t==="opened"&&co()};var fo=P('<button class="buttonMenu svelte-hxzs42"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ea(t,e){W(e,!1),Wt();var n=fo();n.__click=[uo];var r=b(n);ye(r,()=>({"--size":"28px"})),_e(r.lastChild,{name:"sidebarMenu"});var a=D(r,2);tt(a,{children:(s,i)=>{var l=le("Menu");E(s,l)}}),E(t,n),Y()}be(["click"]);const F=ce({historyStack:[],pathname:window.location.pathname,search:window.location.search,historyLength:0});let ta=O(ce(new URLSearchParams(F.search).get("feedOrder")||"newest"));const na=()=>o(ta),vo=t=>{S(ta,t,!0);const e=new URLSearchParams(F.search);t==="newest"?e.delete("feedOrder"):e.set("feedOrder",t),ut(`${F.pathname}${e.size>0?`?${e.toString()}`:""}`)},ra=()=>{var t;return((t=new URLSearchParams(F.search).get("selectedTags"))==null?void 0:t.split(","))||[]};let Xt=ra();const ho=()=>{const t=ra();return t.join(",")===Xt.join(",")||(Xt=t),Xt},go=()=>{F.pathname=document.location.pathname,F.search=document.location.search,F.historyLength=Math.max(0,F.historyLength-=1)};window.addEventListener("popstate",go);const ut=t=>{const[e,n]=t.split("?");F.pathname=e,F.search=n?`?${n}`:"",F.historyLength+=1,F.historyStack.push(window.location.href),window.history.replaceState(null,"",t)},po=t=>{const[e,n]=t.split("?");F.pathname=e,F.search=n?`?${n}`:"",window.history.replaceState(null,"",t)},aa=(t="/")=>{var r;const[e,n]=t.split("?");if(F.historyLength<=0){const a=window.location.href,[s,i]=a.split("?");if(!i.includes("stackPages"))window.history.replaceState(null,"",t),F.historyLength=0,F.pathname=e,F.search=n?`?${n}`:"";else{const l=new URLSearchParams(i),d=(((r=l.get("stackPages"))==null?void 0:r.split(","))||[]).slice(0,-1);d.length===0?l.delete("stackPages"):l.set("stackPages",d.join(","));const c=`${s}${l.toString()?`?${l.toString()}`:""}`;window.history.replaceState(null,"",c),F.search=l.toString()?`?${l.toString()}`:""}}else if(F.historyStack.length>0){const a=F.historyStack.pop();if(a){const[s,i]=a.split("?");window.history.replaceState(null,"",a),F.historyLength=Math.max(0,F.historyLength-=1),F.pathname=s,F.search=i?`?${i}`:""}}},ht=()=>{const t=F.historyStack.findIndex(n=>n.includes("stackPages")),e=t===-1?F.historyStack.slice(0):F.historyStack.slice(0,t);if(e.length>0){const n=e.pop();if(n){const[r,a]=n.split("?");window.history.replaceState(null,"",n),F.historyLength=Math.max(0,e.length),F.pathname=r,F.search=a?`?${a}`:"",F.historyStack=e}}else window.history.replaceState(null,"","/"),F.historyLength=0,F.pathname="/",F.search="",F.historyStack=[]},Ye=()=>{var t;return((t=new URLSearchParams(F.search).get("stackPages"))==null?void 0:t.split(","))||[]};let ct=O(ce(Ye()));const Fe=t=>{const e=Ye();if(!e.includes(t)){e.push(t);const n=new URLSearchParams(F.search);n.set("stackPages",e.join(",")),S(ct,e,!0),ut(`${F.pathname}?${n.toString()}`)}},_o=t=>Ye().includes(t),sa=()=>{const t=o(ct).slice(0,-1);S(ct,t,!0)},oa=()=>{const t=Ye();return t.length>=o(ct).length?t.reduce((e,n)=>[...e,{page:n,shown:!0}],[]):o(ct).reduce((e,n,r)=>[...e,{page:n,shown:t.length===0?!1:r!==o(ct).length-1}],[])},kn=()=>{S(ct,[],!0)},mo=t=>{t.preventDefault(),Fe("settings")},yo=t=>{t.preventDefault(),Fe("newNote")};var wo=P('<a class="addNote svelte-ww662s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span></a>'),So=P('<div class="header svelte-ww662s"><div class="top svelte-ww662s"><div class="desktop svelte-ww662s"><a class="link svelte-ww662s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a></div> <div class="mobile svelte-ww662s"><!></div> <!></div></div>');function bo(t,e){W(e,!0);const n=()=>{const _=Ye();_.includes("settings")||_.push("settings");const w=new URLSearchParams(F.search);return w.set("stackPages",_.join(",")),`${F.pathname}?${w}`};let a=G(()=>{const _=Ye();_.includes("newNote")||_.push("newNote");const w=new URLSearchParams(F.search);return w.set("stackPages",_.join(",")),`${F.pathname}?${w}`}),s=G(n);var i=So(),l=b(i),u=b(l),d=b(u);d.__click=[mo];var c=b(d);ye(c,()=>({"--size":"20px"})),_e(c.lastChild,{name:"settings"});var f=D(u,2),v=b(f);ea(v,{});var h=D(f,2);{var g=_=>{var w=wo();w.__click=[yo];var k=b(w);ye(k,()=>({"--size":"24px","--color":"#b0b0b0"})),_e(k.lastChild,{name:"plus"}),ie(()=>ve(w,"href",o(a))),E(_,w)};N(h,_=>{F.pathname!=="/settings"&&_(g)})}ie(()=>ve(d,"href",o(s))),E(t,i),Y()}be(["click"]);const Eo=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{t()},e)}},ia=()=>window.matchMedia("(max-width: 768px)").matches;let la=O(ce(ia()));const ko=Eo(()=>{S(la,ia(),!0)},16);window.addEventListener("resize",ko);const gt=()=>o(la),zn=ce({count:0}),Co=()=>zn.count>0,To=()=>{zn.count+=1},Do=()=>{zn.count-=1},ge=ce({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});let Cn=!1;const gn=()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?Cn=!0:Cn=!1},Vn=()=>Cn;function Lo(t,e){W(e,!0);let n=Q(e,"dialog",7),r=null;const a=()=>{e.dialogState==="swiping"&&e.onClose()};he(()=>(e.dialogState==="swiping"&&(r=setTimeout(a,3e3)),()=>{r&&(clearTimeout(r),r=null)}));let s=null,i=null;const l=3,u=50,d=5,c=.6,f=.3,v=.35,h=.95;let g=0,_=0,w=0,k=!1,m=!1,p=0,y=0,C=0;const L=()=>{g=0,_=0,k=!1,m=!1,p=0,y=0,C=0,w=0,s=null,i!==null&&(cancelAnimationFrame(i),i=null),r&&(clearTimeout(r),r=null)},T=x=>{if(!n()){console.warn("Touch start: No dialog element");return}if(e.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${e.dialogState}`);return}g=x.touches[0].clientX,_=x.touches[0].clientY,w=performance.now(),k=!0,m=!1},I=x=>e.dialogState==="opened"&&x>0||e.dialogState==="swiping"&&x>0,H=x=>{if(n()){n().style.setProperty("--transition-timing","0s"),e.onSwipe(),navigator.vibrate&&navigator.vibrate(10);try{const U=window.getComputedStyle(n()),J=U.transform||U.webkitTransform||"";if(y=n().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(p=0),J&&J!=="none")try{p=new DOMMatrix(J).m41}catch{console.warn("Could not parse transform matrix, using default position")}m=!0}catch(U){console.error("Error during swipe initialization:",U),L()}}},K=()=>{if(!n())return;const U=Math.abs(p+C*y/100)/y;n().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-U)})`)},j=()=>{if(i=null,!s||!k||!n()||Vn()){L();return}const x=s.touches[0].clientX,U=s.touches[0].clientY,J=x-g,oe=U-_,R=Math.abs(J)>Math.abs(oe),re=Math.abs(J)>l;if(!m)if(R&&re&&I(J))try{H(J)}catch(me){console.error("Error initializing swipe:",me),L();return}else return;if(!I(J))return;n().style.setProperty("--transition-timing","0s");let A=p+J*h;A=Math.max(0,Math.min(y,A)),n().style.transform=`translate3d(${A}px, 0, 0)`,ge.swipingRatio=Math.abs(1-A/y),C=(A-p)/y*100,e.dialogState==="swiping"&&(r&&clearTimeout(r),r=setTimeout(a,3e3)),K()},V=x=>{if(!k)return;s=x,i===null&&(i=requestAnimationFrame(j));const U=x.touches[0].clientX-g,J=x.touches[0].clientY-_,oe=Math.abs(U)>Math.abs(J);m&&oe&&x.preventDefault()},q=x=>{const U=Math.abs(x);if(U>=c)return d;if(U>=f){const J=(U-f)/(c-f);return u-J*(u-d)}else return u},M=(x,U)=>{if(Math.abs(x)>=c)return v*.5;const oe=Math.abs(C)/100;return U?v*Math.max(.5,1-oe):v*Math.max(.5,oe)},B=x=>{var A,X;if(i!==null&&(cancelAnimationFrame(i),i=null),!k||!n()){L();return}if(!m){L();return}let U=0;if((A=x==null?void 0:x.changedTouches)!=null&&A[0]){const ae=x.changedTouches[0].clientX,de=performance.now()-w;de>0&&(U=(ae-g)/de)}const J=q(U);let oe=null;e.dialogState==="swiping"&&(oe=Math.abs(C)>J||U<-f?"close":"open");const R=e.dialogState==="swiping"&&oe==="close",re=M(U,R);ge.duration=re-.02,n().style.setProperty("--transition-timing",`${re}s`),n().offsetWidth,n().style.transform="",oe==="open"?e.onOpen():oe==="close"&&e.onClose(),(X=n())==null||X.style.removeProperty("--backdrop-bg"),L()};ue(()=>(n().addEventListener("touchstart",T,{passive:!0}),n().addEventListener("touchmove",V,{passive:!1}),n().addEventListener("touchend",B,{passive:!0}),n().addEventListener("touchcancel",B,{passive:!0}),()=>{n().removeEventListener("touchstart",T),n().removeEventListener("touchmove",V),n().removeEventListener("touchend",B),n().removeEventListener("touchcancel",B),i!==null&&cancelAnimationFrame(i)})),Y()}let Wn=O(!1);const Ao=(t,e)=>{let n;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{t()},e)}},Po=Ao(()=>{S(Wn,!1)},100),ca=()=>{S(Wn,!0),Po()},ua=()=>o(Wn);var Oo=(t,e)=>{e.onStartClose()},xo=P('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),No=P('<dialog><div class="dialogInner svelte-68rj1a"><div class="header svelte-68rj1a"><div><!></div></div> <!></div></dialog> <!>',1);function Mo(t,e){W(e,!0);let n=350,r=O(null),a=O(null);const s=p=>{p.preventDefault(),e.onStartClose()};ue(()=>{var p,y;return(p=o(r))==null||p.addEventListener("close",e.onClosed),(y=o(r))==null||y.addEventListener("cancel",s),()=>{var C,L;(C=o(r))==null||C.removeEventListener("close",e.onClosed),(L=o(r))==null||L.removeEventListener("cancel",s)}});const i=()=>{var p,y,C;(p=o(r))==null||p.style.removeProperty("--transition-timing"),(y=o(r))==null||y.style.removeProperty("transform"),(C=o(r))==null||C.style.removeProperty("--backdrop-bg")},l=()=>{ca()},u=G(ua);he(()=>{var p,y;if(e.dialogState,!!o(r))switch(e.dialogState){case"opening":{o(r).open||o(r).showModal(),o(r).getBoundingClientRect();const C=setTimeout(()=>{i()},n+1),L=()=>{clearTimeout(C),i()};return(p=o(r))==null||p.addEventListener("transitionend",L,{once:!0}),e.onOpened(),()=>{var T;(T=o(r))==null||T.removeEventListener("transitionend",L)}}case"closing":{const C=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),L=()=>{clearTimeout(C),e.onClosed()};return(y=o(r))==null||y.addEventListener("transitionend",L,{once:!0}),()=>{var T;(T=o(r))==null||T.removeEventListener("transitionend",L)}}case"opened":i()}});var d=No(),c=z(d),f=b(c),v=b(f),h=b(v),g=b(h);{var _=p=>{var y=xo();Z(y,1,ee(["navigateButton","buttonBack"]),"svelte-68rj1a"),y.__click=[Oo,e];var C=b(y);ye(C,()=>({"--size":"20px"})),_e(C.lastChild,{name:"back"});var L=D(C,2);tt(L,{children:(T,I)=>{var H=le("back");E(T,H)}}),E(p,y)};N(g,p=>{(!(e.blocked||e.hidden)||e.blocked&&e.unBlockedBack)&&p(_)})}var w=D(v,2);Me(w,()=>e.children),we(f,p=>S(a,p),()=>o(a)),we(c,p=>S(r,p),()=>o(r));var k=D(c,2);{var m=p=>{Lo(p,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return o(r)}})};N(k,p=>{(!o(u)&&e.dialogState==="opened"||e.dialogState==="swiping")&&(!e.blocked||e.unBlockedBack)&&p(m)})}ie(()=>Z(c,1,ee([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:ge.working&&(!ge.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-68rj1a")),He("scroll",f,l),E(t,d),Y()}be(["click"]);const dr=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function Io(t,e){W(e,!0);let n=Q(e,"blocked",3,!1),r=Q(e,"hiddenDialog",3,!1),a=Q(e,"unBlockedBack",3,!1),s=Q(e,"onStartClose",3,()=>{}),i=Q(e,"onClose",3,()=>{}),l=O(ce(dr({type:"closed"})));const u=k=>{S(l,dr(o(l),k),!0)},d=()=>{n()&&!a()||(s()(),u({type:"close"}))},c=()=>{u({type:"open"})},f=()=>{u({type:"opened"}),ge.duration=.2},v=()=>{i()(),u({type:"closed"}),ge.swipingRatio=1,ge.duration=.2},h=()=>{u({type:"swipe"})};he(()=>{o(l).type==="swiping"?ge.isSwiping=!0:ge.isSwiping=!1,o(l).type==="closed"&&e.shownDialog?c():o(l).type==="opened"&&!e.shownDialog&&d()});var g=Se(),_=z(g);{var w=k=>{Mo(k,{onSwipe:h,onOpened:f,onClosed:v,onStartClose:d,onStartOpen:c,get dialogState(){return o(l).type},get hidden(){return r()},get blocked(){return n()},get unBlockedBack(){return a()},children:(m,p)=>{var y=Se(),C=z(y);Me(C,()=>e.children),E(m,y)},$$slots:{default:!0}})};N(_,k=>{o(l).type!=="closed"&&k(w)})}return E(t,g),Y({handleComputeState:u})}const Bo=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const a=i=>{i.preventDefault(),n()},s=()=>{r==null||r()};ue(()=>{const i=t();return i==null||i.addEventListener("cancel",a),i==null||i.addEventListener("close",s),()=>{i==null||i.removeEventListener("cancel",a),i==null||i.removeEventListener("close",s)}}),ue(()=>{const i=t();i==null||i.showModal(),i==null||i.getBoundingClientRect(),e()})};function Yn(t,e){W(e,!0),ue(()=>{const n=r=>{var a;r.target&&((a=e.dialog)!=null&&a.open)&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),Y()}var Ro=(t,e)=>{e.onStartBack()},Fo=P('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Uo=(t,e)=>{e.onStartClose()},Ko=P('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Ho=P('<dialog><div class="dialogInner svelte-isq3u8"><div class="header svelte-isq3u8"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function jo(t,e){W(e,!0);let n=Q(e,"blockedDialog",3,!1),r=Q(e,"hiddenDialog",3,!1),a=Q(e,"isDesktopAnimationOff",3,!1),s=O(null),i=O(null);Bo({getDialog:()=>o(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose}),he(()=>{var p,y;e.stateDialog==="closing"&&(ge.working?(p=o(s))==null||p.addEventListener("transitionend",()=>{var C;(C=o(s))==null||C.close()},{once:!0}):(y=o(s))==null||y.close())});var l=Ho(),u=z(l),d=b(u),c=b(d),f=b(c),v=b(f);{var h=p=>{var y=Fo();Z(y,1,ee(["navigateButton","buttonBack"]),"svelte-isq3u8"),y.__click=[Ro,e];var C=b(y);ye(C,()=>({"--size":"20px"})),_e(C.lastChild,{name:"back"});var L=D(C,2);tt(L,{children:(T,I)=>{var H=le("back");E(T,H)}}),E(p,y)};N(v,p=>{(!(n()||r())||n()&&e.unBlockedBack)&&e.onStartBack&&p(h)})}var g=D(f,2),_=b(g);{var w=p=>{var y=Ko();Z(y,1,ee(["navigateButton","buttonClose"]),"svelte-isq3u8"),y.__click=[Uo,e];var C=b(y);ye(C,()=>({"--size":"20px"})),_e(C.lastChild,{name:"close"});var L=D(C,2);tt(L,{children:(T,I)=>{var H=le("close");E(T,H)}}),E(p,y)};N(_,p=>{n()||r()||p(w)})}var k=D(c,2);Me(k,()=>e.children),we(d,p=>S(i,p),()=>o(i)),we(u,p=>S(s,p),()=>o(s));var m=D(u,2);Yn(m,{get dialog(){return o(s)},get dialogInner(){return o(i)},get onClose(){return e.onStartClose}}),ie(()=>Z(u,1,ee([{open:e.stateDialog==="open",isAnimationOn:ge.working,isDesktopAnimationOff:a(),hiddenDialog:r()}]),"svelte-isq3u8")),E(t,l),Y()}be(["click"]);const zo=({onStartClose:t,onClose:e})=>{let n=O("close");return{get state(){return o(n)},set state(i){S(n,i,!0)},handleStartClose:(i=!1)=>{i||(S(n,"closing"),t==null||t())},handleOpen:()=>{S(n,"open")},handleClose:()=>{S(n,"close"),e==null||e()}}};function Vo(t,e){W(e,!0);let n=Q(e,"blockedDialog",3,!1),r=Q(e,"hiddenDialog",3,!1),a=Q(e,"onStartClose",3,()=>{}),s=Q(e,"onClose",3,()=>{}),i=zo({onStartClose:a(),onClose:s()});he(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});var l=Se(),u=z(l);{var d=c=>{jo(c,{get stateDialog(){return i.state},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(f,v)=>{var h=Se(),g=z(h);Me(g,()=>e.children),E(f,h)},$$slots:{default:!0}})};N(u,c=>{i.state!=="close"&&c(d)})}E(t,l),Y()}function da(t,e){W(e,!0);let n=Q(e,"blockedDialog",3,!1),r=Q(e,"hiddenDialog",3,!1),a=Q(e,"isLastDialog",3,!1),s=Q(e,"onStartClose",3,()=>{}),i=Q(e,"onClose",3,()=>{});const l=G(()=>a()?void 0:e.onStartBack);ue(()=>(To(),()=>{Do()}));var u=Se(),d=z(u);{var c=v=>{Io(v,{get shownDialog(){return e.shownDialog},get blocked(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return e.onStartBack},onClose:i()})},f=v=>{Vo(v,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return o(l)},onStartClose:s(),onClose:i()})};N(d,v=>{gt()?v(c):v(f,!1)})}E(t,u),Y()}let fa=O(!1),Jn=O(!1);const ke=t=>{S(fa,t,!0),t||S(Jn,!1)},Wo=()=>o(fa),$e=t=>{S(Jn,t,!0)},Yo=()=>o(Jn);function fr(t,e){W(e,!0);let n=Q(e,"blocked",3,!1),r=Q(e,"isLastDialog",3,!1),a=Q(e,"onBack",3,()=>{});const s=G(()=>n()||e.hidden||Wo()),i=G(()=>Yo()&&!r());da(t,{get shownDialog(){return e.shown},get blockedDialog(){return o(s)},get unBlockedBack(){return o(i)},get hiddenDialog(){return e.hidden},get isLastDialog(){return r()},onStartBack:()=>{(!o(s)||o(s)&&o(i))&&e.shown&&(aa(),a()())},onStartClose:()=>{(!o(s)||o(s)&&o(i))&&e.shown&&ht()},onClose:()=>{sa()},children:(c,f)=>{var v=Se(),h=z(v);Me(h,()=>e.children),E(c,v)},$$slots:{default:!0}}),Y()}const xt=()=>crypto.randomUUID(),Jo="AppStorage",Xo=1,xe="notes",bt="syncLog",Et="account";let te;window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});const qo=()=>new Promise((t,e)=>{const n=indexedDB.open(Jo,Xo);n.addEventListener("upgradeneeded",()=>{const r=n.result;r.objectStoreNames.contains(xe)||r.createObjectStore(xe,{keyPath:"id"}),r.objectStoreNames.contains(Et)||r.createObjectStore(Et,{keyPath:"id"}),r.objectStoreNames.contains(bt)||r.createObjectStore(bt,{keyPath:"id"})}),n.addEventListener("success",()=>{t(),te=n.result,te.onversionchange=function(){te==null||te.close(),alert("app outdated, please reload the page")}}),n.addEventListener("blocked",()=>{e(),alert("app outdated, please reload the page")}),n.addEventListener("error",()=>{e(),console.error("Error",n.error)})}),va=()=>new Promise((t,e)=>{const n=te==null?void 0:te.transaction(Et,"readonly"),r=n==null?void 0:n.objectStore(Et).get("default");r==null||r.addEventListener("success",()=>{var s;const a=(s=r==null?void 0:r.result)==null?void 0:s.account;t(a)}),r==null||r.addEventListener("error",()=>{e()})}),Xn=t=>new Promise((e,n)=>{const r=te==null?void 0:te.transaction(Et,"readwrite"),a=r==null?void 0:r.objectStore(Et),s=a==null?void 0:a.put({id:"default",account:t});s==null||s.addEventListener("success",()=>{console.log("account inited"),e()}),s==null||s.addEventListener("error",()=>{n()})}),ha=()=>new Promise((t,e)=>{const n=te==null?void 0:te.transaction(xe,"readonly"),r=n==null?void 0:n.objectStore(xe).getAll();r==null||r.addEventListener("success",()=>{const a=r.result;t(a)}),r==null||r.addEventListener("error",()=>{e()})}),ga=async t=>new Promise((e,n)=>{const r=te==null?void 0:te.transaction(xe,"readwrite"),a=r==null?void 0:r.objectStore(xe),s=a==null?void 0:a.put({...t});s==null||s.addEventListener("success",()=>{e()}),s==null||s.addEventListener("error",()=>{n()})}),Go=async t=>new Promise((e,n)=>{const r=te==null?void 0:te.transaction(xe,"readwrite"),a=r==null?void 0:r.objectStore(xe),s=a==null?void 0:a.delete(t);s==null||s.addEventListener("success",()=>{e()}),s==null||s.addEventListener("error",()=>{n()})}),Zo=()=>new Promise((t,e)=>{const n=te==null?void 0:te.transaction(xe,"readwrite"),r=n==null?void 0:n.objectStore(xe),a=r==null?void 0:r.clear();a==null||a.addEventListener("success",()=>{t()}),a==null||a.addEventListener("error",()=>{e()})}),qn=async()=>{await Zo()},pa=async t=>{const e=(await ha()).reduce((s,i)=>(s[i.id]=i,s),{}),n={},r=te==null?void 0:te.transaction(xe,"readwrite"),a=r==null?void 0:r.objectStore(xe);t.forEach(s=>{e[s.id]?e[s.id].updatedAt<s.updatedAt&&(n[s.id]=s):n[s.id]=s}),await Promise.all(Object.values(n).map(s=>{const i=a==null?void 0:a.put(s);return new Promise((l,u)=>{i==null||i.addEventListener("success",()=>{l()}),i==null||i.addEventListener("error",()=>{u()})})}))},pn=async t=>new Promise((e,n)=>{const r=te==null?void 0:te.transaction(bt,"readwrite"),a=r==null?void 0:r.objectStore(bt),s=a==null?void 0:a.put({...t});s==null||s.addEventListener("success",()=>{e()}),s==null||s.addEventListener("error",()=>{n()})}),Qo=()=>new Promise((t,e)=>{const n=te==null?void 0:te.transaction(bt,"readonly"),r=n==null?void 0:n.objectStore(bt).getAll();r==null||r.addEventListener("success",()=>{const a=r.result;t(a)}),r==null||r.addEventListener("error",()=>{e()})});let $=O({initedDB:!1});const $o=()=>{S($,{...o($),initedDB:!0})},dt=async t=>{S($,{...o($),account:t,notes:[],mapNotes:new Map})},_a=()=>o($),dn=async()=>{const t=await ha(),e=new Map,n=[];t.forEach(r=>{n.push(r),e.set(r.id,r)}),S($,{...o($),notes:n,mapNotes:e})},kt=()=>o($).notes&&o($).mapNotes,ma=()=>o($).notes||[],ei=()=>o($).mapNotes||new Map,ya=t=>{if(!o($).notes||!o($).mapNotes)throw new Error("Notes appState is not initialized");const e={...t};o($).notes.push(e),o($).mapNotes.set(e.id,e),S($,{...o($)})},wa=async t=>{if(!o($).notes||!o($).mapNotes)throw new Error("Notes appState is not initialized");o($).notes.forEach((e,n)=>{(e==null?void 0:e.id)===t.id&&o($).notes&&(o($).notes[n]=t)}),o($).mapNotes.set(t.id,t),S($,{...o($)})},Sa=async t=>{if(!o($).notes||!o($).mapNotes)throw new Error("Notes appState is not initialized");o($).mapNotes.delete(t),o($).notes=o($).notes.filter(e=>(e==null?void 0:e.id)!==t),S($,{...o($)})},ba=async()=>{S($,{...o($),initedDB:!0,notes:[],mapNotes:new Map})};let Ea=O({});const ka=()=>o(Ea),ti=t=>{S(Ea,t)};var ni=P('<input class="svelte-6l2oy0"/>');function Tn(t,e){W(e,!0);let n=Q(e,"value",15,"");var r=ni();ie(()=>ve(r,"placeholder",e.placeholder)),He("focus",r,function(...a){var s;(s=e.onFocus)==null||s.apply(this,a)}),jn(r,n),E(t,r),Y()}function ri(t,e){W(e,!0);let n=Q(e,"dialog",7);const r=3,a=50,s=5,i=.6,l=.3,u=.35,d=.95;let c=0,f=0,v=0,h=!1,g=!1,_=0,w=0,k=0;const m=()=>{c=0,f=0,h=!1,g=!1,_=0,w=0,k=0,v=0,p!==null&&(cancelAnimationFrame(p),p=null),y=null};let p=null,y=null;const C=M=>{if(!n()){console.warn("Touch start: No dialog element");return}if(e.sidebarState!=="opened"&&e.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${e.sidebarState}`);return}c=M.touches[0].clientX,f=M.touches[0].clientY,v=performance.now(),h=!0,g=!1},L=M=>e.sidebarState==="closed"&&M>0||e.sidebarState==="closeSwiping"&&M>0||e.sidebarState==="opened"&&M<0||e.sidebarState==="openSwiping"&&M<0,T=M=>{if(n()){if(n().style.setProperty("--transition-timing","0s"),!n().open&&e.sidebarState==="closed")try{n().showModal(),n().offsetWidth}catch(B){console.error("Error opening dialog:",B);return}e.onSwipe();try{const B=window.getComputedStyle(n()),x=B.transform||B.webkitTransform||"";if(w=n().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?_=-w:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(_=0),x&&x!=="none")try{_=new DOMMatrix(x).m41}catch{console.warn("Could not parse transform matrix, using default position")}g=!0}catch(B){console.error("Error during swipe initialization:",B),m()}}},I=()=>{if(!n())return;const B=(Math.abs(_+k*w/100)-w*.3-20)/w;n().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.25*(1-B)})`)},H=()=>{if(p=null,!y||!h||!n()||Vn())return;const{x:M,y:B}=y;y=null;const x=M-c,U=B-f,J=Math.abs(x)>Math.abs(U),oe=Math.abs(x)>r;if(!g)if(J&&oe&&L(x))try{T(x)}catch(X){console.error("Error initializing swipe:",X),m();return}else return;if(!L(x))return;n().style.setProperty("--transition-timing","0s");let R=_+x*d;const re=-w;R=Math.max(re,Math.min(0,R)),n().style.transform=`translate3d(${R}px, 0, 0)`,k=(R-_)/w*100,I()},K=M=>{if(!h)return;const B=M.touches[0].clientX,x=M.touches[0].clientY;y={x:B,y:x},p===null&&(p=requestAnimationFrame(H)),g&&Math.abs(B-c)>Math.abs(x-f)&&M.preventDefault()},j=M=>{const B=Math.abs(M);if(B>=i)return s;if(B>=l){const x=(B-l)/(i-l);return a-x*(a-s)}else return a},V=(M,B)=>{if(Math.abs(M)>=i)return u*.5;const U=Math.abs(k)/100;return B?u*Math.max(.5,1-U):u*Math.max(.5,U)},q=M=>{var R,re;if(p!==null&&(cancelAnimationFrame(p),p=null),y=null,!h||!n()){m();return}if(!g){m();return}let B=0;if((R=M==null?void 0:M.changedTouches)!=null&&R[0]){const A=M.changedTouches[0].clientX,ae=performance.now()-v;ae>0&&(B=(A-c)/ae)}const x=j(B);let U=null;e.sidebarState==="closeSwiping"?U=Math.abs(k)>x||B>l?"open":"close":e.sidebarState==="openSwiping"&&(U=Math.abs(k)>x||B<-l?"close":"open");const J=e.sidebarState==="closeSwiping"&&U==="open"||e.sidebarState==="openSwiping"&&U==="close",oe=V(B,J);n().style.setProperty("--transition-timing",`${oe}s`),n().offsetWidth,n().style.transform="",U==="open"?e.onOpen():U==="close"&&e.onClose(),(re=n())==null||re.style.removeProperty("--backdrop-bg"),m()};ue(()=>(document.addEventListener("touchstart",C,{passive:!0}),document.addEventListener("touchmove",K,{passive:!1}),document.addEventListener("touchend",q,{passive:!0}),document.addEventListener("touchcancel",q,{passive:!0}),()=>{document.removeEventListener("touchstart",C),document.removeEventListener("touchmove",K),document.removeEventListener("touchend",q),document.removeEventListener("touchcancel",q),p!==null&&cancelAnimationFrame(p)})),Y()}var ai=P('<dialog><div class="dialogInner svelte-1in1s0g"><!></div></dialog> <!> <!>',1);function si(t,e){W(e,!0);let n=350,r=O(null),a=O(null),s=G($r);he(()=>{oa().length>0&&Ge({type:"close"})});const i=()=>{e.blocked||Ge({type:"close"})},l=()=>{e.blocked||Ge({type:"open"})},u=()=>{Ge({type:"opened"})},d=()=>{Ge({type:"closed"})},c=()=>{Ge({type:"swipe"})},f=T=>{T.preventDefault(),i()};ue(()=>{var T,I;return(T=o(r))==null||T.addEventListener("close",d),(I=o(r))==null||I.addEventListener("cancel",f),()=>{var H,K;(H=o(r))==null||H.removeEventListener("close",d),(K=o(r))==null||K.removeEventListener("cancel",f)}});const v=()=>{var T,I,H;(T=o(r))==null||T.style.removeProperty("--transition-timing"),(I=o(r))==null||I.style.removeProperty("transform"),(H=o(r))==null||H.style.removeProperty("--backdrop-bg")},h=G(ua);he(()=>{var T,I,H;if(o(s),!!o(r))switch(o(s).type){case"closeSwiping":{const K=setTimeout(()=>{i()},3e3);return()=>{clearTimeout(K)}}case"openSwiping":{const K=setTimeout(()=>{l()},3e3);return()=>{clearTimeout(K)}}case"opening":{o(r).open||o(r).showModal(),o(r).getBoundingClientRect();const K=setTimeout(()=>{v()},n+1),j=()=>{clearTimeout(K),v()};return(T=o(r))==null||T.addEventListener("transitionend",j,{once:!0}),u(),()=>{var V;(V=o(r))==null||V.removeEventListener("transitionend",j)}}case"closing":{const K=setTimeout(()=>{o(s).type==="closing"&&d()},n+1),j=()=>{clearTimeout(K),d()};return(I=o(r))==null||I.addEventListener("transitionend",j,{once:!0}),()=>{var V;(V=o(r))==null||V.removeEventListener("transitionend",j)}}case"closed":(H=o(r))==null||H.close(),v();break;case"opened":v();break}});var g=ai(),_=z(g),w=b(_),k=b(w);{var m=T=>{var I=Se(),H=z(I);Me(H,()=>e.children),E(T,I)};N(k,T=>{o(s).type!=="closed"&&T(m)})}we(w,T=>S(a,T),()=>o(a)),we(_,T=>S(r,T),()=>o(r));var p=D(_,2);{var y=T=>{Yn(T,{get dialog(){return o(r)},get dialogInner(){return o(a)},onClose:i})};N(p,T=>{o(s).type==="opened"&&!e.blocked&&T(y)})}var C=D(p,2);{var L=T=>{ri(T,{onClose:i,onOpen:l,onSwipe:c,get sidebarState(){return o(s).type},get dialog(){return o(r)}})};N(C,T=>{(!o(h)&&o(s).type==="closed"||o(s).type==="opened"||o(s).type==="openSwiping"||o(s).type==="closeSwiping")&&!e.blocked&&T(L)})}ie(()=>Z(_,1,ee([{open:o(s).type==="opened",hidden:e.blocked,isAnimationOn:ge.working&&(!ge.isSwiping||!e.blocked)}]),"svelte-1in1s0g")),E(t,g),Y()}var oi=P('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>');function ot(t,e){let n=G(()=>e.style==="selected"?"45deg":"0deg");var r=oi();r.__click=function(...i){var l;(l=e.onClick)==null||l.apply(this,i)};var a=b(r),s=D(a);ye(s,()=>({"--size":"20px","--rotate":o(n)})),_e(s.lastChild,{name:"plus"}),ie(()=>{ve(r,"type",e.type),Z(r,1,ee([{selectedTag:e.style==="selected"}]),"svelte-1uqucql"),vt(a,`${e.title??""} `)}),E(t,r)}be(["click"]);const ii=t=>{t.preventDefault(),Fe("settings")};var li=P("<div></div>"),ci=P('<div class="sidebarFixed svelte-1y05y7k"><div class="nav svelte-1y05y7k"><!> <a class="link svelte-1y05y7k"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a></div> <div class="searchWrapper svelte-1y05y7k"><!></div> <!></div> <div></div>',1),ui=P("<div></div>"),di=P('<div class="sidebar svelte-1y05y7k"><div class="sidebarFixed svelte-1y05y7k"><div class="searchWrapper svelte-1y05y7k"><!></div> <!></div> <div class="tags svelte-1y05y7k"></div></div>');function fi(t,e){W(e,!0);let n=O(null),r=O(""),a=G(()=>{var _;return((_=new URLSearchParams(F.search).get("selectedTags"))==null?void 0:_.split(","))||[]});const s=()=>{const _=Ye();_.includes("settings")||_.push("settings");const w=new URLSearchParams(F.search);return w.set("stackPages",_.join(",")),`${F.pathname}?${w}`},i=_=>{const w=new URLSearchParams(F.search);w.set("selectedTags",[...o(a),_].join(",")),ut(`${F.pathname}${w.size>0?`?${w.toString()}`:""}`),S(r,"")},l=_=>{const w=new URLSearchParams(F.search),k=o(a).filter(m=>m!==_);k.length===0?w.delete("selectedTags"):w.set("selectedTags",k.join(",")),ut(`${F.pathname}${w.size>0?`?${w.toString()}`:""}`)};let u=G(()=>kt()?Object.values(ka()).filter(_=>!o(a).some(w=>_.name===w)):[]),d=G(s),c=G(()=>Ye().length>0||Co());var f=Se(),v=z(f);{var h=_=>{si(_,{get blocked(){return o(c)},children:(w,k)=>{var m=ci(),p=z(m),y=b(p),C=b(y);ea(C,{});var L=D(C,2);L.__click=[ii];var T=b(L);ye(T,()=>({"--size":"20px"})),_e(T.lastChild,{name:"settings"});var I=D(y,2),H=b(I);Tn(H,{placeholder:"Search tag",get value(){return o(r)},set value(q){S(r,q,!0)}});var K=D(I,2);{var j=q=>{var M=li();Z(M,1,ee(["tags","selectedTags"]),"svelte-1y05y7k"),je(M,20,()=>o(a),B=>B,(B,x)=>{ot(B,{get title(){return x},onClick:()=>l(x),style:"selected"})}),we(M,B=>S(n,B),()=>o(n)),E(q,M)};N(K,q=>{o(a).length>0&&q(j)})}var V=D(p,2);Z(V,1,ee(["tags","tagsWrapper"]),"svelte-1y05y7k"),je(V,21,()=>o(u),q=>q.name,(q,M)=>{var B=Se(),x=z(B);{var U=J=>{ot(J,{get title(){return o(M).name},onClick:()=>i(o(M).name)})};N(x,J=>{(o(r)===""||o(M).name.toLowerCase().indexOf(o(r).toLowerCase())!==-1)&&J(U)})}E(q,B)}),ie(q=>{ve(L,"href",o(d)),Kt(V,`min-height: height: calc(100dvh - 190px - ${q??""}px);`)},[()=>o(n)?o(n).getBoundingClientRect().height:0]),E(w,m)},$$slots:{default:!0}})},g=_=>{var w=di(),k=b(w),m=b(k),p=b(m);Tn(p,{placeholder:"Search tag",get value(){return o(r)},set value(T){S(r,T,!0)}});var y=D(m,2);{var C=T=>{var I=ui();Z(I,1,ee(["tags","selectedTags"]),"svelte-1y05y7k"),je(I,20,()=>o(a),H=>H,(H,K)=>{ot(H,{get title(){return K},onClick:()=>l(K),style:"selected"})}),E(T,I)};N(y,T=>{o(a).length>0&&T(C)})}var L=D(k,2);je(L,21,()=>o(u),T=>T.name,(T,I)=>{var H=Se(),K=z(H);{var j=V=>{ot(V,{get title(){return o(I).name},onClick:()=>i(o(I).name)})};N(K,V=>{(o(r)===""||o(I).name.toLowerCase().indexOf(o(r).toLowerCase())!==-1)&&V(j)})}E(T,H)}),E(_,w)};N(v,_=>{gt()?_(h):_(g,!1)})}E(t,f),Y()}be(["click"]);function Qe(t){const e=String.fromCharCode(...new Uint8Array(t));return window.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Gn(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const n=e.length%4;return n&&(e+="=".repeat(4-n)),e}function Zn(t){try{const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}catch(e){throw console.error("Error decoding base64:",e,"Input:",t),e}}function Nt(t){const e=Gn(t);return Zn(e)}const vi=async t=>{const e=await crypto.subtle.importKey("raw",t.serverKey,{name:"HKDF"},!1,["deriveKey"]),n=await crypto.subtle.deriveKey({name:"HKDF",salt:t.id,info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt"]);return{encryptedClientKey:await crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(12)},n,t.clientKey)}},hi=async t=>{const e=await crypto.subtle.importKey("raw",t.serverKey,{name:"HKDF"},!1,["deriveKey"]),n=await crypto.subtle.deriveKey({name:"HKDF",info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["decrypt"]),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(12)},n,t.encryptedClientKey);return new Uint8Array(r)};function gi(t,e){const n=new ArrayBuffer(t.length+e.length),r=new Uint8Array(n);return r.set(t,0),r.set(e,t.length),n}const pi=async t=>{const e=await crypto.subtle.importKey("raw",gi(t.clientKey,t.serverKey),{name:"HKDF"},!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"HKDF",info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},_i=async(t,e)=>{const n=JSON.parse(t),a=new Uint8Array(n).buffer,s=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(12)},e,a);return new TextDecoder().decode(s)},mi=async(t,e)=>{const r=await(await fetch("/api/serverKey",{method:"POST"})).json(),a=await hi({encryptedClientKey:Nt(t.encryptedClientKey),serverKey:Nt(r.serverKey)});return{commonKey:await pi({clientKey:a,serverKey:new Uint8Array(Nt(e))})}};class yi{constructor(){rt(this,"queue",[]);rt(this,"commonKey",null);rt(this,"status","idle");rt(this,"ws",null)}async saveNewRecords(e,n){const r=await Promise.all(n.records.map(async s=>{if(this.commonKey===null)throw new Error("Common key is not initialized");const i=await _i(s.data,this.commonKey),l=JSON.parse(i);return{id:s.id,url:l.url,title:l.title,description:l.description,tags:l.tags,createdAt:l.createdAt,updatedAt:l.updatedAt}}));if(await pa(r),(await fetch("/api/sync/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lastLogId:n.lastLogId})})).status===200){await dn();const s={...e,lastSync:Date.now(),lastLogId:n.lastLogId};dt(s),Xn(s)}}connect(){}mergeLogNotes(e,n){const r={};return e.forEach(a=>{r[a.id]=a}),n.forEach(a=>{r[a.id]?r[a.id].createdAt<a.createdAt&&(r[a.id]=a):r[a.id]=a}),Object.values(r)}async start(){const e=await Qo();this.queue=this.mergeLogNotes(this.queue,e);const n=async()=>{var a;const r=_a().account;if(r){if(!navigator.onLine){setTimeout(n,5e3);return}if(!this.commonKey){const i=await(await fetch("/api/serverKey",{method:"POST"})).json(),{commonKey:l}=await mi(r,i.serverKey);this.commonKey=l}this.status==="idle"&&(this.status="sync",this.connect()),(a=this.ws)==null||a.send(JSON.stringify({type:"sync"}))}};n()}async putNote(e){const n={id:xt(),operation:"put",recordId:e.id,createdAt:Date.now(),data:JSON.stringify({...e})};await pn(n),this.queue.push(n)}async delNote(e){const n={id:xt(),operation:"del",recordId:e,createdAt:Date.now()};await pn(n),this.queue.push(n)}async delAll(){const e={id:xt(),operation:"delAll",createdAt:Date.now()};await pn(e),this.queue.push(e)}}const Dn=(t,e,n,r=new Set,a={})=>{var s,i;for(const l of t.children)if(l.tagName==="DT"){const u=l.querySelector(":scope > A"),d=l.querySelector(":scope > H3");if(u){const c=u.getAttribute("href"),f=u.textContent||"unknown";if(!c)return n;const v=e.find(h=>h.toLowerCase()==="notes bar")?e.filter(h=>h.toLowerCase()!=="notes bar"):["other"];if(a[c])a[c].tags=[...new Set([...a[c].tags,...v])];else{const h={id:xt(),url:c,title:f,description:"",tags:v.length>0?v:[],updatedAt:Date.now(),createdAt:Date.now()};a[h.url]=h,n.push(h)}}else if(d){const c=(s=d.textContent)==null?void 0:s.trim();if(c&&((i=d.nextElementSibling)==null?void 0:i.tagName)==="DL"){const f=[...e];f.push(c);const v=d.nextElementSibling;r.has(v)||(r.add(v),Dn(v,f,n,r,a))}}}else l.tagName!=="DL"&&l.children.length>0&&(r.has(l)||(r.add(l),Dn(l,[...e],n,r,a)));return n},wi=async t=>{const e=await t.text(),a=new DOMParser().parseFromString(e,"text/html").querySelector("DL");return a?Dn(a,[],[]):[]},Si=t=>{const e=Math.floor(Date.now()/1e3),n={};t.forEach(a=>{const s=a.tags||["Imported"];if(s.length===0){n.ROOT||(n.ROOT=[]),n.ROOT.push(a);return}s.forEach(i=>{n[i]||(n[i]=[]),n[i].push(a)})});let r=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${e}" LAST_MODIFIED="${e}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(n).forEach(a=>{a!=="ROOT"&&a!=="other"&&(r+=`
	<DT><H3 ADD_DATE="${e}" LAST_MODIFIED="${e}">${a}</H3>
	<DL><p>`,n[a].forEach(s=>{const i=s.title.replace(/"/g,"&quot;");r+=`
		<DT><A HREF="${s.url}" ADD_DATE="${Math.floor(s.createdAt/1e3)||e}">${i}</A>`}),r+=`
	</DL><p>`)}),n.ROOT&&n.ROOT.forEach(a=>{const s=a.title.replace(/"/g,"&quot;");r+=`
	<DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||e}">${s}</A>`}),r+=`
</DL><p>`,n.other&&n.other.forEach(a=>{const s=a.title.replace(/"/g,"&quot;");r+=`
	<DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||e}">${s}</A>`}),r+="</DL><p>",r};async function Qn(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}const nt=new BroadcastChannel("app"),pt=new yi;nt.addEventListener("message",async t=>{if(console.log("Received message from BroadcastChannel:",t.data),t.data&&typeof t.data=="string"){const e=JSON.parse(t.data);if(e.operation==="addNote"){const n=e.note;ya(n)}else if(e.operation==="updateNote"){const n=e.note;wa(n)}else if(e.operation==="deleteNote"){const n=e.noteId;Sa(n)}else if(e.operation==="clearAppState")ba();else if(e.operation==="reloadNotes")dn();else if(e.operation==="initLocalAccount")dt(null),kn(),ut("/");else if(e.operation==="initAccount"){const n=await va();n&&(dt(n),kn(),ut("/"),pt.start())}}});qo().then(async()=>{$o();const t=await va();t===void 0?Fe("start"):(_o("start")&&(kn(),ut("/")),t?(dt(t),await Qn(),pt.start()):dt(null),await dn())}).catch(()=>{console.error("failed to init db")});const bi=async t=>{const e={...t,id:xt(),createdAt:Date.now(),updatedAt:Date.now()};ya(e),nt.postMessage(JSON.stringify({operation:"addNote",note:{...e}})),await ga({...e}),pt.putNote({...e})},Ei=async t=>{const e={...t,updatedAt:Date.now()};nt.postMessage(JSON.stringify({operation:"updateNote",note:e})),wa(e),await ga(e),pt.putNote({...e})},ki=async t=>{nt.postMessage(JSON.stringify({operation:"deleteNote",noteId:t})),Sa(t),await Go(t),pt.delNote(t)},Ci=async()=>{nt.postMessage(JSON.stringify({operation:"clearAppState"})),ba(),await qn(),pt.delAll()},Ti=async(t="notes-export.json")=>{const e=JSON.stringify({notes:_a().notes}),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(r)},0)},vr=async t=>{await pa(t),nt.postMessage(JSON.stringify({operation:"reloadNotes"})),await dn()},Di=async()=>{await qn(),await Qn(),await Xn(null),dt(null),nt.postMessage(JSON.stringify({operation:"initLocalAccount"}))},Ca=async t=>{await qn(),await Qn();const{encryptedClientKey:e}=await vi({id:t.credentialId,clientKey:t.clientKey,serverKey:t.serverKey}),n={encryptedClientKey:Qe(e),lastLogId:-1,lastSync:-1};await Xn(n),dt(n),nt.postMessage(JSON.stringify({operation:"initAccount"})),pt.start()};var Li=P('<div class="input-container svelte-hz572l"><input/> <div class="error-message svelte-hz572l"><!></div></div>');function _n(t,e){W(e,!0);let n=Q(e,"value",15,""),r=Q(e,"error",3,"");var a=Li(),s=b(a);s.__input=function(...c){var f;(f=e.onInput)==null||f.apply(this,c)};let i;var l=D(s,2),u=b(l);{var d=c=>{var f=le();ie(()=>vt(f,r())),E(c,f)};N(u,c=>{r()&&c(d)})}ie(c=>{ve(s,"placeholder",e.placeholder),i=Z(s,1,"svelte-hz572l",null,i,c)},[()=>({error:!!r()})]),He("blur",s,function(...c){var f;(f=e.onBlur)==null||f.apply(this,c)}),He("focus",s,function(...c){var f;(f=e.onFocus)==null||f.apply(this,c)}),jn(s,n),E(t,a),Y()}be(["input"]);var Ai=P("<div></div>"),Pi=P('<form class="svelte-tcgkvd"><!> <!> <textarea placeholder="notes" class="svelte-tcgkvd"></textarea> <div class="boxtags"><div class="sidebarFixed"><!></div> <div class="tags svelte-tcgkvd"><!> <!></div> <div class="searchWrapper svelte-tcgkvd"><!></div></div> <button class="buttonSubmit svelte-tcgkvd" type="submit"> </button></form>');function Ta(t,e){W(e,!0);let n=Q(e,"initialTitle",3,""),r=Q(e,"initialUrl",3,""),a=Q(e,"initialDescription",3,""),s=Q(e,"initialTags",19,()=>[]),i=Q(e,"mode",3,"add"),l=O(""),u=O(ce(n())),d=O(ce(r())),c=O(ce(a())),f=O(ce(s().filter(R=>R!=="inbox")));const v=R=>{o(f).includes(R)||S(f,[...o(f),R],!0)},h=R=>{const re=o(f).filter(A=>A!==R);re.length===0?S(f,[],!0):S(f,re,!0)};let g=G(()=>kt()?[...ma().reduce((R,re)=>(re==null||re.tags.forEach(A=>{R.has(A)||R.add(A)}),R),new Set)]:[]),_=G(()=>kt()?o(g).filter(R=>!o(f).some(re=>R===re)&&R!=="inbox"):[]),w=G(()=>o(_).find(R=>R.toLowerCase()===o(l).toLowerCase())||o(f).includes(o(l))),k=G(()=>o(_).filter(R=>o(l)===""?!0:R.toLowerCase().indexOf(o(l).toLowerCase())!==-1).slice(0,o(w)||o(l)===""?3:2));const m=R=>{R.preventDefault(),e.onSubmit({title:o(u).trim().slice(0,256)||"unkwown",url:o(d).trim().slice(0,2048),description:o(c).trim().slice(0,2048),tags:o(f).length>0?o(f):["inbox"]})};var p=Pi(),y=b(p);_n(y,{placeholder:"url",get value(){return o(d)},set value(R){S(d,R,!0)}});var C=D(y,2);_n(C,{placeholder:"title",get value(){return o(u)},set value(R){S(u,R,!0)}});var L=D(C,2),T=D(L,2),I=b(T),H=b(I);{var K=R=>{var re=Ai();Z(re,1,ee(["tags","selectedTags"]),"svelte-tcgkvd"),je(re,20,()=>o(f),A=>A,(A,X)=>{ot(A,{get title(){return X},onClick:()=>h(X),type:"button",style:"selected"})}),E(R,re)};N(H,R=>{o(f).length>0&&R(K)})}var j=D(I,2),V=b(j);{var q=R=>{var re=Se(),A=z(re);je(A,16,()=>o(k),X=>X,(X,ae)=>{ot(X,{get title(){return ae},onClick:()=>v(ae)})}),E(R,re)};N(V,R=>{o(l)!==""&&R(q)})}var M=D(V,2);{var B=R=>{ot(R,{get title(){return o(l)},onClick:()=>{v(o(l)),S(l,"")}})};N(M,R=>{!o(w)&&o(l)!==""&&R(B)})}var x=D(j,2),U=b(x);_n(U,{placeholder:"search tag",get value(){return o(l)},set value(R){S(l,R,!0)}});var J=D(T,2),oe=b(J);ie(()=>vt(oe,i()==="add"?"add":"edit")),He("submit",p,m),jn(L,()=>o(c),R=>S(c,R)),E(t,p),Y()}function Oi(t,e){W(e,!0);let n=O(!0);const r=()=>{e.onClose()},a=()=>{S(n,!1)},s=({title:i,url:l,description:u,tags:d})=>{Ei({...e.note,title:i,url:l,description:u,tags:d.map(c=>c.trim())}),a()};da(t,{get shownDialog(){return o(n)},onClose:r,children:(i,l)=>{Ta(i,{get initialTitle(){return e.note.title},get initialUrl(){return e.note.url},get initialDescription(){return e.note.description},get initialTags(){return e.note.tags},onSubmit:s,mode:"edit"})},$$slots:{default:!0}}),Y()}var xi=P('<dialog><div class="dialogInner svelte-17pmjvs"><!></div></dialog> <!>',1);function Da(t,e){W(e,!0);let n=O(null),r=O(null),a=O(!1);const s=()=>{var h;const v=setTimeout(()=>{e.onClosed()},150);(h=o(n))==null||h.addEventListener("transitionend",()=>{clearTimeout(v),e.onClosed()},{once:!0}),S(a,!1)};ue(()=>{var v,h;(v=o(n))==null||v.showModal(),(h=o(n))==null||h.getClientRects(),S(a,!0)});var i=xi(),l=z(i),u=b(l),d=b(u);Me(d,()=>e.children),we(u,v=>S(r,v),()=>o(r)),we(l,v=>S(n,v),()=>o(n));var c=D(l,2);{var f=v=>{Yn(v,{get dialog(){return o(n)},get dialogInner(){return o(r)},onClose:s})};N(c,v=>{o(n)&&o(r)&&v(f)})}ie(()=>Z(l,1,ee(["dialog",{shown:o(a)}]),"svelte-17pmjvs")),E(t,i),Y()}var Ni=P("<div><!></div>");function La(t,e){W(e,!0);let n=O(!1),r=O(null);const a=()=>{var c;const d=setTimeout(()=>{e.onClosed()},150);(c=o(r))==null||c.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),S(n,!1)},s=d=>{var c;d.target!==o(r)&&!((c=o(r))!=null&&c.contains(d.target))&&a()},i=d=>{var c;d.target!==o(r)&&!((c=o(r))!=null&&c.contains(d.target))&&a()};ue(()=>{var c;(c=o(r))==null||c.getClientRects(),S(n,!0);const d=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",s),document.removeEventListener("click",i)}});var l=Ni(),u=b(l);Me(u,()=>e.children),we(l,d=>S(r,d),()=>o(r)),ie(()=>Z(l,1,ee(["menu",{top:e.positionTop,shown:o(n)}]),"svelte-1ljsfcr")),E(t,l),Y()}const Mi=(t,e,n)=>{const r=ka();e.note.tags.forEach(a=>{if(o(n).includes(a)&&r[a].connections===1){const s=new URLSearchParams(F.search),i=o(n).filter(l=>l!==a);i.length===0?s.delete("selectedTags"):s.set("selectedTags",i.join(",")),po(`${F.pathname}${s.size>0?`?${s.toString()}`:""}`)}}),ki(e.note.id)},Ii=(t,e)=>{S(e,!0)};var Bi=P('<div class="menu svelte-1j2b1uj"><div><button>Edit</button></div> <div><button>Delete</button></div></div>'),Ri=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Fi=P("<!> <!>",1);function Ui(t,e){W(e,!0);const n=(g,_=Ht)=>{var w=Bi(),k=b(w),m=b(k);m.__click=[Ii,a];var p=D(k,2),y=b(p);y.__click=[Mi,e,i],ie(()=>{Z(m,1,ee(["button",{buttonMenuDialog:_()}]),"svelte-1j2b1uj"),Z(y,1,ee(["button",{buttonMenuDialog:_()}]),"svelte-1j2b1uj")}),E(g,w)};let r=Q(e,"shownMenu",15),a=O(!1),s=G(gt),i=G(()=>{var g;return((g=new URLSearchParams(F.search).get("selectedTags"))==null?void 0:g.split(","))||[]});const l=()=>{S(a,!1)},u=()=>{r(!1)};var d=Fi(),c=z(d);{var f=g=>{var _=Se(),w=z(_);{var k=p=>{Da(p,{onClosed:u,children:(y,C)=>{n(y,()=>!0)},$$slots:{default:!0}})},m=p=>{var y=Ri(),C=z(y);ye(C,()=>({"--bottom":"-230%","--right":"30px"})),La(C.lastChild,{get positionTop(){return e.showMenuUp},onClosed:u,children:(L,T)=>{n(L,()=>!1)},$$slots:{default:!0}}),E(p,y)};N(w,p=>{o(s)?p(k):p(m,!1)})}E(g,_)};N(c,g=>{r()&&g(f)})}var v=D(c,2);{var h=g=>{Oi(g,{get note(){return e.note},onClose:l})};N(v,g=>{o(a)&&g(h)})}E(t,d),Y()}be(["click"]);const Ki=(t,e,n)=>{e.showMenuUp||S(n,!0)},Hi=(t,e)=>{navigator.clipboard.writeText(e.note.url),ro("Link copied to clipboard")},ji=(t,e)=>{S(e,!0)},zi=(t,e)=>{S(e,!1)};var Vi=P('<li class="note svelte-11sazhi"><img loading="lazy" class="noteIcon" height="16" width="16" alt="icon"/> <a class="noteLink svelte-11sazhi" target="_blank" rel="noopener noreferrer"> </a> <div class="spacer svelte-11sazhi"></div> <div><button class="button svelte-11sazhi"><!> <!></button> <button><!> <!></button> <!></div></li>');function Wi(t,e){W(e,!0);let n=O(!1),r=O(!1);const a=k=>{try{return`https://external-content.duckduckgo.com/ip3/${new URL(k).host}.ico`}catch{return""}};var s=Vi();s.__focusin=[ji,n],s.__focusout=[zi,n];var i=b(s),l=D(i,2),u=b(l),d=D(l,4),c=b(d);c.__click=[Hi,e];var f=b(c);_e(f,{name:"copy"});var v=D(f,2);tt(v,{children:(k,m)=>{var p=le("copy link");E(k,p)}});var h=D(c,2);h.__click=[Ki,e,r],Z(h,1,ee(["button","buttonMenu"]),"svelte-11sazhi");var g=b(h);_e(g,{name:"menu"});var _=D(g,2);tt(_,{children:(k,m)=>{var p=le("show menu");E(k,p)}});var w=D(h,2);Ui(w,{get note(){return e.note},get showMenuUp(){return e.showMenuUp},get shownMenu(){return o(r)},set shownMenu(k){S(r,k,!0)}}),ie(k=>{ve(i,"src",k),ve(l,"tabindex",e.focusHidden?-1:0),ve(l,"href",e.note.url),vt(u,e.note.title),Z(d,1,ee(["noteMenuWrapper",{noteMenuWrapperActive:o(n)}]),"svelte-11sazhi"),ve(c,"tabindex",e.focusHidden?-1:0),ve(h,"tabindex",e.focusHidden?-1:0)},[()=>a(e.note.url)]),E(t,s),Y()}be(["focusin","focusout","click"]);const Pt=ce({ref:null}),Yi=(t,e)=>{o(e)||S(e,!0)};var Ji=(t,e)=>e("newest"),Xi=(t,e)=>e("oldest"),qi=(t,e)=>e("AtoZ"),Gi=(t,e)=>e("ZtoA"),Zi=P("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),Qi=P('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),$i=P('<div class="orderMenu svelte-o4bdlm"><button><!> <!></button> <!></div>');function el(t,e){W(e,!0);const n=(g,_=Ht)=>{var w=Zi(),k=b(w);k.__click=[Ji,i];var m=D(k,2);m.__click=[Xi,i];var p=D(m,2);p.__click=[qi,i];var y=D(p,2);y.__click=[Gi,i],ie(()=>{Z(w,1,ee(["menu",{menuDialog:_()}]),"svelte-o4bdlm"),Z(k,1,ee(["menuButton",{menuButtonDialog:_(),current:o(s)==="newest"}]),"svelte-o4bdlm"),Z(m,1,ee(["menuButton",{menuButtonDialog:_(),current:o(s)==="oldest"}]),"svelte-o4bdlm"),Z(p,1,ee(["menuButton",{menuButtonDialog:_(),current:o(s)==="AtoZ"}]),"svelte-o4bdlm"),Z(y,1,ee(["menuButton",{menuButtonDialog:_(),current:o(s)==="ZtoA"}]),"svelte-o4bdlm")}),E(g,w)};let r=O(!1),a=G(gt),s=G(na);const i=g=>{S(r,!1),vo(g)},l=()=>{S(r,!1)};var u=$i(),d=b(u);d.__click=[Yi,r],Z(d,1,ee(["button","buttonMenu"]),"svelte-o4bdlm");var c=b(d);_e(c,{name:"filter"});var f=D(c,2);tt(f,{children:(g,_)=>{var w=le("show feed order menu");E(g,w)}});var v=D(d,2);{var h=g=>{var _=Se(),w=z(_);{var k=p=>{Da(p,{onClosed:l,children:(y,C)=>{n(y,()=>!0)},$$slots:{default:!0}})},m=p=>{var y=Qi(),C=z(y);ye(C,()=>({"--right":"20px","--top":"60px"})),La(C.lastChild,{onClosed:l,children:(L,T)=>{n(L,()=>!1)},$$slots:{default:!0}}),E(p,y)};N(w,p=>{o(a)?p(k):p(m,!1)})}E(g,_)};N(v,g=>{o(r)&&g(h)})}E(t,u),Y()}be(["click"]);const tl=(t,e)=>{o(e)&&o(e).scrollTo({top:0,behavior:"smooth"})};var nl=P('<div class="emptyMessage svelte-1nwd0on">No notes found</div>'),rl=P('<div class="wrapperButtonTop svelte-1nwd0on"><button class="buttonTop svelte-1nwd0on"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button></div>'),al=P('<div class="filter svelte-1nwd0on"><div class="searchWrapper svelte-1nwd0on"><!></div> <!></div> <div class="wrapperFeed svelte-1nwd0on"><div class="wrapperContainer svelte-1nwd0on"><div class="feed svelte-1nwd0on"><ul class="svelte-1nwd0on"></ul> <!></div></div></div> <!>',1);function sl(t,e){W(e,!0);let n=O(null),r=50,a=O(0),s=O(0),i=O(0),l=O(ce([])),u=O(""),d=G(()=>gt()?o(n):Pt.ref),c=null,f=null,v=O(!1),h=0;const g=G(ho);he(()=>{var A;o(u),o(g),(A=o(d))==null||A.scrollTo(0,0)});const _=()=>{if(o(d)){const A=o(d).scrollTop||0;A===0?S(v,!1):!o(v)&&h>A?S(v,!0):o(v)&&h<A&&S(v,!1),h=A}},w=()=>{ca(),c||(c=requestAnimationFrame(()=>{var ae;_();const A=((ae=o(d))==null?void 0:ae.scrollTop)||0;S(i,A,!0);const X=Math.ceil(o(a)/r);S(s,Math.floor(A/(r*X))*(r*X)),c=null}))},k=()=>{f||(f=requestAnimationFrame(()=>{var ae;_(),S(a,window.innerHeight-180||0,!0);const A=((ae=o(d))==null?void 0:ae.scrollTop)||0;S(i,A,!0);const X=Math.ceil(o(a)/r);S(s,Math.floor(A/(r*X))*(r*X)),f=null}))};ue(()=>{k(),w()}),he(()=>{var A;return(A=o(d))==null||A.addEventListener("scroll",w),window.addEventListener("resize",k),()=>{var X;(X=o(d))==null||X.removeEventListener("scroll",w),window.removeEventListener("resize",k)}});const m=G(na);he(()=>{const A=ma(),X=[],ae={};for(let me=A.length-1;me>=0;me--){const de=A[me];if(de&&!(o(g).length&&o(g).some(Xe=>!de.tags.includes(Xe)))&&!(o(u)&&!(de.title.toLowerCase().includes(o(u).toLowerCase())||de.url.toLowerCase().includes(o(u).toLowerCase())||de.description.toLowerCase().includes(o(u).toLowerCase())))){if(de.tags)for(const Xe of de.tags)ae[Xe]?ae[Xe].connections++:ae[Xe]={name:Xe,connections:1};X.push(de)}}ti(ae),X.sort((me,de)=>{if(!me||!de)return 0;switch(o(m)){case"newest":return me.createdAt>de.createdAt?-1:1;case"oldest":return me.createdAt<de.createdAt?-1:1;case"AtoZ":return me.title.localeCompare(de.title);case"ZtoA":return de.title.localeCompare(me.title);default:return 0}}),S(l,X,!0)});const p=G(()=>o(l).length*r);let C=G(()=>{const A=Math.ceil(o(a)/r);let X=Math.floor(o(s)/r);return X=X-Math.min(X,A),o(l).slice(X,X+A*3)}),L=G(()=>r*Math.ceil(o(a)/r));const T=G(()=>o(s)-Math.min(o(s),o(L))),I=()=>{o(d)&&o(d).scrollTo({top:0,behavior:"smooth"})};var H=al(),K=z(H),j=b(K),V=b(j);Tn(V,{onFocus:I,placeholder:"Search",get value(){return o(u)},set value(A){S(u,A,!0)}});var q=D(j,2);el(q,{});var M=D(K,2),B=b(M),x=b(B),U=b(x);je(U,23,()=>o(C),A=>A.id,(A,X,ae)=>{const me=G(()=>o(ae)*r<o(i)-o(T)-r/2||o(ae)*r>o(i)-o(T)+Math.floor(o(a)/r)*r),de=G(()=>(o(ae)+3)*r<o(i)-o(T)-r/2||(o(ae)+3)*r>o(i)-o(T)+Math.floor(o(a)/r)*r);Wi(A,{get focusHidden(){return o(me)},get showMenuUp(){return o(de)},get note(){return o(X)}})});var J=D(U,2);{var oe=A=>{var X=nl();E(A,X)};N(J,A=>{o(C).length===0&&kt()&&A(oe)})}we(B,A=>S(n,A),()=>o(n));var R=D(M,2);{var re=A=>{var X=rl(),ae=b(X);ae.__click=[tl,d];var me=b(ae);tt(me,{children:(Xe,uc)=>{var Pa=le("top");E(Xe,Pa)}});var de=D(me,2);ye(de,()=>({"--size":"22px"})),_e(de.lastChild,{name:"up"}),E(A,X)};N(R,A=>{o(v)&&A(re)})}ie(A=>{Kt(x,`min-height: ${A??""}px`),Kt(U,`transform: translateY(${o(T)??""}px);`)},[()=>Math.max((o(p)>o(a),o(p)),0)]),E(t,H),Y()}be(["click"]);var ol=P('<!> <div class="content svelte-cu0ar8"><!></div>',1);function il(t){var e=ol(),n=z(e);fi(n,{});var r=D(n,2),a=b(r);sl(a,{}),E(t,e)}var at=(t=>(t.Light="light",t.System="system",t.Dark="dark",t))(at||{});let Aa=O(ce(localStorage.getItem("colorScheme")||"system"));const ll=t=>{localStorage.setItem("colorScheme",t),t==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.dataset.colorScheme="dark":document.documentElement.dataset.colorScheme="light":document.documentElement.dataset.colorScheme=t,S(Aa,t,!0)},cl=()=>o(Aa);var ul=P('<div class="wrapper svelte-1elv5s4"><fieldset class="switcher svelte-1elv5s4"><legend class="vh svelte-1elv5s4">Color Scheme</legend> <input id="light" type="radio" aria-label="Light"/> <label for="light" title="Light" aria-label="Light"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="system" type="radio" aria-label="System"/> <label for="system" title="System" aria-label="System"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="dark" type="radio" aria-label="Dark"/> <label for="dark" title="Dark" aria-label="Dark"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <div class="wrapSwitcherStatus svelte-1elv5s4"><div class="switcherStatus svelte-1elv5s4"></div></div></fieldset></div>');function dl(t,e){W(e,!0);const n=G(cl),r=w=>{const k=w.target.value;ll(k)},a="color-scheme-switcher";var s=ul(),i=b(s),l=D(b(i),2);Z(l,1,ee(["vh","input"]),"svelte-1elv5s4"),ve(l,"name",a),l.__change=r;var u=D(l,2);Z(u,1,ee(["switcherButton","light"]),"svelte-1elv5s4");var d=b(u);ye(d,()=>({"--size":"20px"})),_e(d.lastChild,{name:"sun"});var c=D(u,2);Z(c,1,ee(["vh","input"]),"svelte-1elv5s4"),ve(c,"name",a),c.__change=r;var f=D(c,2);Z(f,1,ee(["switcherButton","system"]),"svelte-1elv5s4");var v=b(f);ye(v,()=>({"--size":"14px"})),_e(v.lastChild,{name:"a"});var h=D(f,2);Z(h,1,ee(["vh","input"]),"svelte-1elv5s4"),ve(h,"name",a),h.__change=r;var g=D(h,2);Z(g,1,ee(["switcherButton","dark"]),"svelte-1elv5s4");var _=b(g);return ye(_,()=>({"--size":"20px"})),_e(_.lastChild,{name:"moon"}),ie(()=>{qt(l,at.Light),Gt(l,o(n)===at.Light),qt(c,at.System),Gt(c,o(n)===at.System),qt(h,at.Dark),Gt(h,o(n)===at.Dark)}),E(t,s),Y({handleChange:r})}be(["change"]);const fl=()=>{Fe("import")},vl=()=>{Fe("export")},hl=()=>{Fe("clearStorage")};var gl=P("<span> </span>"),pl=P('<div class="svelte-378nhf"><!> <ul class="svelte-378nhf"><li class="svelte-378nhf"><button class="button svelte-378nhf"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-378nhf">import data</span></button></li> <li class="svelte-378nhf"><button class="button svelte-378nhf"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-378nhf">export data</span></button></li> <li class="svelte-378nhf"><button class="button svelte-378nhf"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-378nhf">clear storage</span></button></li></ul> <div class="version svelte-378nhf"><!></div></div>');function _l(t,e){W(e,!0);let n=O("");ue(()=>{const m=new AbortController;return fetch("/build-metadata.json",{signal:m.signal}).then(p=>p.json()).then(p=>{S(n,`${p.buildHash}`)}),()=>{m.abort()}});var r=pl(),a=b(r);dl(a,{});var s=D(a,2),i=b(s),l=b(i);l.__click=[fl];var u=b(l);ye(u,()=>({"--size":"20px"})),_e(u.lastChild,{name:"import"});var d=D(i,2),c=b(d);c.__click=[vl];var f=b(c);ye(f,()=>({"--size":"20px"})),_e(f.lastChild,{name:"export"});var v=D(d,2),h=b(v);h.__click=[hl];var g=b(h);ye(g,()=>({"--size":"20px"})),_e(g.lastChild,{name:"trash"});var _=D(s,2),w=b(_);{var k=m=>{var p=gl(),y=b(p);ie(C=>vt(y,`version: 0.0.1 build_date: "${C??""}" build_hash:
				${o(n)??""}`),[()=>new Date(1752970154701).toISOString().replaceAll("T"," ").replace(/\..*/,"")]),E(m,p)};N(w,m=>{o(n)&&m(k)})}E(t,r),Y()}be(["click"]);function ml(t,e){W(e,!1);const n=()=>{aa()},r=({title:a,url:s,description:i,tags:l})=>{bi({title:a,url:s,description:i,tags:l.map(u=>u.trim())}),n()};Wt(),Ta(t,{onSubmit:r}),Y()}var yl=P('<button type="button"><!></button>');function Te(t,e){let n=Q(e,"type",3,"standard"),r=Q(e,"fullWidth",3,!1);var a=yl();a.__click=function(...i){var l;(l=e.onClick)==null||l.apply(this,i)};var s=b(a);Me(s,()=>e.children??Ht),ie(()=>Z(a,1,ee(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:r()}]),"svelte-ut1pbk")),E(t,a)}be(["click"]);var wl=P('<div class="loader svelte-1ygr46m"></div>');function Yt(t){var e=wl();E(t,e)}const hr=async(t,e)=>{const n=t.target;!n.files||n.files.length===0||await e(n.files[0])};var Sl=P('<div class="mobileContainer svelte-1n1lt8i"><!></div> <input type="file" accept=".json, .html" style="display: none;"/>',1),bl=P('<div class="desktopContainer svelte-1n1lt8i"><div class="desktopButtonContainer svelte-1n1lt8i"><!></div> <div role="button" tabindex="-1"><div tabindex="-1" class="dropzone-content svelte-1n1lt8i"><p class="svelte-1n1lt8i">Drag and drop your file here</p> <p class="svelte-1n1lt8i">or</p></div> <input type="file" accept=".json, .html" style="display: none;"/></div></div>'),El=P('<p class="message svelte-1n1lt8i">Select a file to import your notes</p> <!>',1),kl=P('<p class="message svelte-1n1lt8i">Importing data...</p> <!>',1),Cl=P('<p class="message success svelte-1n1lt8i">Data imported successfully!</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),Tl=P('<p class="message error svelte-1n1lt8i">Something went wrong</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),Dl=P('<div class="content svelte-1n1lt8i"><!></div>');function Ll(t,e){W(e,!0);let n=O("idle"),r=O(null),a=O(!1),s=O(null);const i=()=>{ht()};he(()=>{ke(o(n)==="loading")}),ue(()=>(o(r)&&o(r).addEventListener("cancel",m=>{m.preventDefault(),m.stopImmediatePropagation(),m.stopPropagation()}),()=>{ke(!1)}));const l=async m=>{const p=await m.text(),y=JSON.parse(p),C=[];if(!y.notes)throw new Error("Invalid import file format");for(const L of Object.values(y.notes))L&&C.push(L);await vr(C)},u=async m=>{S(n,"loading");try{if(m.name.endsWith(".json"))await l(m);else if(m.name.endsWith(".html"))await vr(await wi(m));else throw new Error("Unsupported file format. Please upload a JSON or HTML file.");S(n,"success")}catch(p){console.error("Error processing file:",p),S(n,"error")}},d=()=>{var m;(m=o(r))==null||m.click()},c=m=>{m.preventDefault(),m.stopPropagation(),S(a,!0)},f=m=>{m.preventDefault(),m.stopPropagation(),S(a,!1)},v=m=>{m.preventDefault(),m.stopPropagation(),S(a,!0)},h=async m=>{var y;if(m.preventDefault(),m.stopPropagation(),S(a,!1),!((y=m.dataTransfer)!=null&&y.files)||m.dataTransfer.files.length===0)return;const p=m.dataTransfer.files[0];if(p.type!=="application/json"&&p.type!=="text/html"){S(n,"error");return}await u(p)};var g=Dl(),_=b(g);{var w=m=>{var p=El(),y=D(z(p),2);{var C=T=>{var I=Sl(),H=z(I),K=b(H);Te(K,{onClick:d,children:(V,q)=>{var M=le("Select File");E(V,M)},$$slots:{default:!0}});var j=D(H,2);j.__change=[hr,u],we(j,V=>S(r,V),()=>o(r)),E(T,I)},L=T=>{var I=bl(),H=b(I),K=b(H);Te(K,{onClick:d,children:(q,M)=>{var B=le("Select File");E(q,B)},$$slots:{default:!0}});var j=D(H,2),V=D(b(j),2);V.__change=[hr,u],we(V,q=>S(r,q),()=>o(r)),we(j,q=>S(s,q),()=>o(s)),ie(()=>Z(j,1,ee(["dropzone",{active:o(a)}]),"svelte-1n1lt8i")),He("dragenter",j,c),He("dragover",j,v),He("dragleave",j,f),He("drop",j,h),E(T,I)};N(y,T=>{gt()?T(C):T(L,!1)})}E(m,p)},k=(m,p)=>{{var y=L=>{var T=kl(),I=D(z(T),2);Yt(I),E(L,T)},C=(L,T)=>{{var I=K=>{var j=Cl(),V=D(z(j),2),q=b(V);Te(q,{onClick:i,children:(M,B)=>{var x=le("close");E(M,x)},$$slots:{default:!0}}),E(K,j)},H=(K,j)=>{{var V=q=>{var M=Tl(),B=D(z(M),2),x=b(B);Te(x,{onClick:()=>{S(n,"idle")},children:(U,J)=>{var oe=le("Try Again");E(U,oe)},$$slots:{default:!0}}),E(q,M)};N(K,q=>{o(n)==="error"&&q(V)},j)}};N(L,K=>{o(n)==="success"?K(I):K(H,!1)},T)}};N(m,L=>{o(n)==="loading"?L(y):L(C,!1)},p)}};N(_,m=>{o(n)==="idle"?m(w):m(k,!1)})}E(t,g),Y()}be(["change"]);const Al=(t,e,n)=>{e(t.target.value),n.onChange(e())};var Pl=P('<input type="radio"/> <label> </label>',1),Ol=P('<div class="wrapper svelte-1luxlbo"><fieldset class="switcher svelte-1luxlbo"><!> <div class="wrapSwitcherStatus svelte-1luxlbo"><div class="switcherStatus svelte-1luxlbo"></div></div></fieldset></div>');function xl(t,e){const n=Fs();W(e,!0);let r=Q(e,"value",7);const a=`switcher-${n}`;var s=Ol(),i=b(s),l=b(i);je(l,17,()=>e.items,c=>c.title,(c,f)=>{var v=Pl(),h=z(v);Z(h,1,ee(["vh","input"]),"svelte-1luxlbo"),h.__change=[Al,r,e];var g=D(h,2);Z(g,1,ee(["switcherButton"]),"svelte-1luxlbo");var _=b(g);ie(()=>{ve(h,"id",`${o(f).title}-${n}`),ve(h,"name",a),qt(h,o(f).value),Gt(h,o(f).value===r()),ve(h,"aria-label",o(f).title),ve(g,"for",`${o(f).title}-${n}`),ve(g,"title",o(f).title),ve(g,"aria-label",o(f).title),vt(_,o(f).value)}),E(c,v)});var u=D(l,2),d=b(u);ie(c=>Kt(d,c),[()=>`transform: translateX(${e.items.findIndex(c=>c.value===r())*100}%)`]),E(t,s),Y()}be(["change"]);var Nl=P('<p class="message svelte-8vhup1">Export items</p> <div class="format-switcher svelte-8vhup1"><!> <p class="format-description svelte-8vhup1"><!></p></div> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Ml=P('<p class="message svelte-8vhup1">Exporting data...</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Il=P('<p class="message svelte-8vhup1">Items exported successfully!</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Bl=P('<div class="content svelte-8vhup1"><!></div>');function Rl(t,e){W(e,!0);let n=O("idle"),r=O("html");const a=()=>{ht()};he(()=>{ke(o(n)==="loading")}),ue(()=>()=>{ke(!1)});const s=async()=>{S(n,"loading"),setTimeout(async()=>{if(o(r)==="json")await Ti().finally(()=>{S(n,"success")});else try{const c=Si(ei()),f=new Blob([c],{type:"text/html"}),v=URL.createObjectURL(f),h=document.createElement("a");h.href=v,h.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(v),S(n,"success")}catch(c){console.error("Error exporting as HTML:",c),S(n,"success")}},0)};var i=Bl(),l=b(i);{var u=c=>{var f=Nl(),v=D(z(f),2),h=b(v);xl(h,{items:[{title:"HTML",value:"html"},{title:"JSON",value:"json"}],get value(){return o(r)},onChange:y=>{S(r,y,!0)}});var g=D(h,2),_=b(g);{var w=y=>{var C=le("JSON format (App compatible, a faster format)");E(y,C)},k=y=>{var C=le("HTML format (Browser compatible)");E(y,C)};N(_,y=>{o(r)==="json"?y(w):y(k,!1)})}var m=D(v,2),p=b(m);Te(p,{onClick:s,children:(y,C)=>{var L=le("Export");E(y,L)},$$slots:{default:!0}}),E(c,f)},d=(c,f)=>{{var v=g=>{var _=Ml(),w=D(z(_),2),k=b(w);Yt(k),E(g,_)},h=(g,_)=>{{var w=k=>{var m=Il(),p=D(z(m),2),y=b(p);Te(y,{onClick:a,children:(C,L)=>{var T=le("Close");E(C,T)},$$slots:{default:!0}}),E(k,m)};N(g,k=>{o(n)==="success"&&k(w)},_)}};N(c,g=>{o(n)==="loading"?g(v):g(h,!1)},f)}};N(l,c=>{o(n)==="idle"?c(u):c(d,!1)})}E(t,i),Y()}var Fl=P('<div class="content svelte-9hh95f"><p class="message svelte-9hh95f">use app</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div> <div class="buttonContainerItem svelte-9hh95f"><!></div></div></div>');function Ul(t,e){W(e,!0);let n=O("idle");const r=()=>{S(n,"loading"),Fe("sign")},a=async()=>{S(n,"loading"),await Di(),ke(!1),ht()};he(()=>{ke(o(n)==="idle"||o(n)==="loading")}),ue(()=>(ke(!0),()=>{ke(!1)}));var s=Fl(),i=D(b(s),2),l=b(i),u=b(l);Te(u,{onClick:r,fullWidth:!0,children:(f,v)=>{var h=le("with account");E(f,h)},$$slots:{default:!0}});var d=D(l,2),c=b(d);Te(c,{onClick:a,fullWidth:!0,type:"secondary",children:(f,v)=>{var h=le("without account");E(f,h)},$$slots:{default:!0}}),E(t,s),Y()}var Kl=P('<div class="content svelte-9hh95f"><p class="message svelte-9hh95f">sign in / sign up</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div> <div class="buttonContainerItem svelte-9hh95f"><!></div></div></div>');function Hl(t,e){W(e,!1);const n=async()=>{Fe("signin")},r=async()=>{Fe("signup")};ue(()=>(ke(!0),$e(!0),()=>{$e(!1)})),Wt();var a=Kl(),s=D(b(a),2),i=b(s),l=b(i);Te(l,{onClick:n,fullWidth:!0,children:(c,f)=>{var v=le("sign in");E(c,v)},$$slots:{default:!0}});var u=D(i,2),d=b(u);Te(d,{onClick:r,fullWidth:!0,children:(c,f)=>{var v=le("sign up");E(c,v)},$$slots:{default:!0}}),E(t,a),Y()}var Ke=(t=>(t[t.Signup=0]="Signup",t[t.SignupError=1]="SignupError",t))(Ke||{}),jl=P('<p class="message svelte-9hh95f">signup</p> <!>',1),zl=P('<p class="message svelte-9hh95f">error signup</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),Vl=P('<div class="content svelte-9hh95f"><!></div>');function Wl(t,e){W(e,!0);let n=O(ce(Ke.Signup));const r=async()=>{S(n,Ke.Signup,!0);try{const u=await fetch("/api/signup/start",{method:"post"}).then(f=>f.json()),d=crypto.getRandomValues(new Uint8Array(32)),c={challenge:Zn(Gn(u.challenge)),rp:{id:"localhost",name:"notes"},user:{id:d,name:"notes_account",displayName:"notes_account"},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],authenticatorSelection:{userVerification:"required"},timeout:6e4,attestation:"none"};try{const f=await navigator.credentials.create({publicKey:c}),v=f.response;if(console.log(f),f){const h={clientKey:d,challenge:u.challenge,id:f.id,rawId:Qe(f.rawId),type:f.type,response:{clientDataJSON:Qe(v.clientDataJSON),attestationObject:Qe(v.attestationObject)}},g=await fetch("/api/signup/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(g.status!==200){S(n,Ke.SignupError,!0);return}const _=await g.json();await Ca({credentialId:new Uint8Array(f.rawId),clientKey:d,serverKey:new Uint8Array(Nt(_.serverKey))}),ke(!1),ht()}else throw new Error}catch(f){S(n,Ke.SignupError,!0),console.log(f)}}catch(u){S(n,Ke.SignupError,!0),console.log(u)}};ue(()=>(ke(!0),$e(!1),r(),()=>{$e(!1)})),he(()=>{$e(o(n)!==Ke.Signup)});var a=Vl(),s=b(a);{var i=u=>{var d=jl(),c=D(z(d),2);Yt(c),E(u,d)},l=(u,d)=>{{var c=f=>{var v=zl(),h=D(z(v),2),g=b(h),_=b(g);Te(_,{onClick:()=>r(),fullWidth:!0,children:(w,k)=>{var m=le("try again");E(w,m)},$$slots:{default:!0}}),E(f,v)};N(u,f=>{o(n)===Ke.SignupError&&f(c)},d)}};N(s,u=>{o(n)===Ke.Signup?u(i):u(l,!1)})}E(t,a),Y()}var Ne=(t=>(t[t.Signin=0]="Signin",t[t.SigninError=1]="SigninError",t))(Ne||{}),Yl=P('<p class="message svelte-9hh95f">signin</p> <!>',1),Jl=P('<p class="message svelte-9hh95f">error signin</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),Xl=P('<div class="content svelte-9hh95f"><!></div>');function ql(t,e){W(e,!0);let n=O(ce(Ne.Signin));const r=async()=>{S(n,Ne.Signin,!0);try{const u=await fetch("/api/signin/start",{method:"post"}).then(c=>c.json()),d={challenge:Zn(Gn(u.challenge)),timeout:6e4,rpId:"localhost",userVerification:"required"};try{const c=await navigator.credentials.get({publicKey:d}),f=c.response;if(c){const v={challenge:u.challenge,id:c.id,rawId:Qe(c.rawId),type:c.type,response:{authenticatorData:Qe(f.authenticatorData),clientDataJSON:Qe(f.clientDataJSON),signature:Qe(f.signature)}},h=await fetch("/api/signin/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(h.status!==200){S(n,Ne.SigninError,!0);return}const g=await h.json();if(console.log("responseData: ",g),!g.success||!g.serverKey){console.error("Signin failed: ",g),S(n,Ne.SigninError,!0);return}if(!f.userHandle){S(n,Ne.SigninError,!0);return}const _=g.serverKey,w=f.userHandle;await Ca({credentialId:new Uint8Array(c.rawId),clientKey:new Uint8Array(w),serverKey:new Uint8Array(Nt(_))}),ke(!1),ht()}else throw new Error}catch(c){S(n,Ne.SigninError,!0),console.log(c)}}catch(u){S(n,Ne.SigninError,!0),console.log(u)}};ue(()=>(ke(!0),$e(!1),r(),()=>{$e(!1)})),he(()=>{$e(o(n)!==Ne.Signin)});var a=Xl(),s=b(a);{var i=u=>{var d=Yl(),c=D(z(d),2);Yt(c),E(u,d)},l=(u,d)=>{{var c=f=>{var v=Jl(),h=D(z(v),2),g=b(h),_=b(g);Te(_,{onClick:()=>r(),fullWidth:!0,children:(w,k)=>{var m=le("try again");E(w,m)},$$slots:{default:!0}}),E(f,v)};N(u,f=>{o(n)===Ne.SigninError&&f(c)},d)}};N(s,u=>{o(n)===Ne.Signin?u(i):u(l,!1)})}E(t,a),Y()}var Gl=P('<p class="message svelte-49o1d">Are you sure you want to clear the store?</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),Zl=P('<p class="message svelte-49o1d">clearing store...</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),Ql=P('<p class="message svelte-49o1d">store cleared</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),$l=P('<div class="content svelte-49o1d"><!></div>');function ec(t,e){W(e,!0);let n=O("idle");const r=()=>{ht()};he(()=>{ke(o(n)==="loading")}),ue(()=>()=>{ke(!1)});const a=()=>{S(n,"loading"),Ci().finally(()=>{S(n,"success")})};var s=$l(),i=b(s);{var l=d=>{var c=Gl(),f=D(z(c),2),v=b(f);Te(v,{onClick:a,type:"dangerous",children:(h,g)=>{var _=le("Clear store");E(h,_)},$$slots:{default:!0}}),E(d,c)},u=(d,c)=>{{var f=h=>{var g=Zl(),_=D(z(g),2),w=b(_);Yt(w),E(h,g)},v=(h,g)=>{{var _=w=>{var k=Ql(),m=D(z(k),2),p=b(m);Te(p,{onClick:r,children:(y,C)=>{var L=le("Close");E(y,L)},$$slots:{default:!0}}),E(w,k)};N(h,w=>{o(n)==="success"&&w(_)},g)}};N(d,h=>{o(n)==="loading"?h(f):h(v,!1)},c)}};N(i,d=>{o(n)==="idle"?d(l):d(u,!1)})}E(t,s),Y()}var tc=P('<div class="svelte-t4bw1y"><!></div>');function Ue(t,e){W(e,!0);let n=O(null);ue(()=>{o(n)&&(o(n).getBoundingClientRect(),o(n).style.opacity="1")});var r=tc(),a=b(r);Me(a,()=>e.children),we(r,s=>S(n,s),()=>o(n)),E(t,r),Y()}const gr=(t,e=Ht)=>{var n=Se(),r=z(n);{var a=i=>{Ue(i,{children:(l,u)=>{_l(l,{})},$$slots:{default:!0}})},s=(i,l)=>{{var u=c=>{Ue(c,{children:(f,v)=>{ml(f,{})},$$slots:{default:!0}})},d=(c,f)=>{{var v=g=>{Ue(g,{children:(_,w)=>{Ll(_,{})},$$slots:{default:!0}})},h=(g,_)=>{{var w=m=>{Ue(m,{children:(p,y)=>{Rl(p,{})},$$slots:{default:!0}})},k=(m,p)=>{{var y=L=>{Ue(L,{children:(T,I)=>{ec(T,{})},$$slots:{default:!0}})},C=(L,T)=>{{var I=K=>{Ue(K,{children:(j,V)=>{Ul(j,{})},$$slots:{default:!0}})},H=(K,j)=>{{var V=M=>{Ue(M,{children:(B,x)=>{Hl(B,{})},$$slots:{default:!0}})},q=(M,B)=>{{var x=J=>{Ue(J,{children:(oe,R)=>{Wl(oe,{})},$$slots:{default:!0}})},U=(J,oe)=>{{var R=re=>{Ue(re,{children:(A,X)=>{ql(A,{})},$$slots:{default:!0}})};N(J,re=>{e()==="signin"&&re(R)},oe)}};N(M,J=>{e()==="signup"?J(x):J(U,!1)},B)}};N(K,M=>{e()==="sign"?M(V):M(q,!1)},j)}};N(L,K=>{e()==="start"?K(I):K(H,!1)},T)}};N(m,L=>{e()==="clearStorage"?L(y):L(C,!1)},p)}};N(g,m=>{e()==="export"?m(w):m(k,!1)},_)}};N(c,g=>{e()==="import"?g(v):g(h,!1)},f)}};N(i,c=>{e()==="newNote"?c(u):c(d,!1)},l)}};N(r,i=>{e()==="settings"?i(a):i(s,!1)})}E(t,n)};var nc=P("<!> <!>",1);function rc(t,e){W(e,!0);let n=G(oa),r=G(kt);var a=nc(),s=z(a);{var i=c=>{il(c)};N(s,c=>{o(r)&&c(i)})}var l=D(s,2);{var u=c=>{var f=Se(),v=z(f);je(v,17,()=>o(n),js,(h,g,_)=>{const w=G(()=>{var k;return _!==o(n).length-1&&!!((k=o(n)[_+1])!=null&&k.shown)});fr(h,{get shown(){return o(g).shown},get hidden(){return o(w)},isLastDialog:_===0,children:(k,m)=>{gr(k,()=>o(g).page)},$$slots:{default:!0}})}),E(c,f)},d=(c,f)=>{{var v=h=>{const g=G(()=>o(n).length===1);fr(h,{onBack:()=>sa(),get shown(){return o(n)[o(n).length-1].shown},hidden:!1,get isLastDialog(){return o(g)},children:(_,w)=>{gr(_,()=>o(n)[o(n).length-1].page)},$$slots:{default:!0}})};N(c,h=>{o(n).length>0&&h(v)},f)}};N(l,c=>{gt()?c(u):c(d,!1)})}E(t,a),Y()}function ac(){const t=navigator.userAgent;if(!(/iPad|iPhone|iPod/.test(t)&&!window.MSStream))return!1;const n=/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t),r=/Macintosh/.test(t)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1;return!!n||!!r}const sc=ac();function oc(t,e){W(e,!1),ue(()=>{gn(),document.addEventListener("focusin",gn),document.addEventListener("focusout",gn),document.addEventListener("touchmove",function(n){Vn()&&sc&&n.preventDefault()},{passive:!1})}),Wt(),Y()}function ic(t,e){W(e,!1);let n=0;ue(()=>{document.querySelector("div"),document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-n;(n<50&&s>0||n>window.innerWidth-50&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Wt(),Y()}var lc=P('<!> <!> <!> <main><!> <div class="container svelte-ngsolt"><!></div></main>',1);function cc(t,e){W(e,!0),ue(async()=>{await new Promise(h=>setTimeout(h,100)),await Ls(),ge.working=!0});let n=G(()=>Ye().length>0),r=G(kt);var a=lc(),s=z(a);ic(s,{});var i=D(s,2);oc(i,{});var l=D(i,2);so(l,{});var u=D(l,2),d=b(u);{var c=h=>{bo(h,{})};N(d,h=>{o(r)&&h(c)})}var f=D(d,2),v=b(f);rc(v,{}),we(u,h=>Pt.ref=h,()=>Pt==null?void 0:Pt.ref),ie(()=>{Kt(u,`--swiping-ratio: ${ge.swipingRatio}; --transition-timing-default: ${ge.duration}s;`),Z(u,1,ee(["main",{isAnimationOn:ge.working&&!ge.isSwiping,open:o(n)}]),"svelte-ngsolt")}),E(t,a),Y()}Us(cc,{target:document.getElementById("app")});
