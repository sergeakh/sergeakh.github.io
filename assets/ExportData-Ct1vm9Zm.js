import{W as G,p as F,X as Q,f as b,q as X,m as E,Y as S,Z as H,s as g,t as I,_ as D,h as c,$ as Y,a0 as J,r as V,c as f,b as v,a1 as W,k as P,n as Z,g as z,u as K,d as M,o as ee,j as x,i as k,B,v as C,l as U,a2 as te,Q as ae,L as se,G as oe}from"./index-Bt3jdqU-.js";const re=u=>{const o=Math.floor(Date.now()/1e3),t={};u.forEach(e=>{const s=e.tags||["Imported"];if(s.length===0){t.ROOT||(t.ROOT=[]),t.ROOT.push(e);return}s.forEach(p=>{t[p]||(t[p]=[]),t[p].push(e)})});let a=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${o}" LAST_MODIFIED="${o}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(t).forEach(e=>{e!=="ROOT"&&e!=="other"&&(a+=`
    <DT><H3 ADD_DATE="${o}" LAST_MODIFIED="${o}">${e}</H3>
    <DL><p>`,t[e].forEach(s=>{const p=s.name.replace(/"/g,"&quot;");a+=`
        <DT><A HREF="${s.url}" ADD_DATE="${Math.floor(s.createdAt/1e3)||o}">${p}</A>`}),a+=`
    </DL><p>`)}),t.ROOT&&t.ROOT.forEach(e=>{const s=e.name.replace(/"/g,"&quot;");a+=`
    <DT><A HREF="${e.url}" ADD_DATE="${Math.floor(e.createdAt/1e3)||o}">${s}</A>`}),a+=`
</DL><p>`,t.other&&t.other.forEach(e=>{const s=e.name.replace(/"/g,"&quot;");a+=`
    <DT><A HREF="${e.url}" ADD_DATE="${Math.floor(e.createdAt/1e3)||o}">${s}</A>`}),a+="</DL><p>",a},le=async u=>{const o="notes-export.json",t=JSON.stringify({notes:u}),a=new Blob([t],{type:"application/json"}),e=URL.createObjectURL(a),s=document.createElement("a");s.href=e,s.download=o,document.body.appendChild(s),s.click(),setTimeout(()=>{document.body.removeChild(s),URL.revokeObjectURL(e)},0)},ne=(u,o,t)=>{o(u.target.value),t.onChange(o())};var ce=b('<input type="radio"/> <label> </label>',1),ie=b('<div class="wrapper svelte-egvjdf"><fieldset class="switcher svelte-egvjdf"><!> <div class="wrapSwitcherStatus svelte-egvjdf"><div class="switcherStatus svelte-egvjdf"></div></div></fieldset></div>');function ve(u,o){const t=G();F(o,!0);let a=Q(o,"value",7);const e=`switcher-${t}`;var s=ie(),p=f(s),w=f(p);X(w,17,()=>o.items,m=>m.title,(m,r)=>{var d=ce(),l=E(d);S(l,1,H(["vh","input"]),"svelte-egvjdf"),l.__change=[ne,a,o];var n=g(l,2);S(n,1,H(["switcherButton"]),"svelte-egvjdf");var O=f(n);I(()=>{D(l,"id",`${c(r).title}-${t}`),D(l,"name",e),Y(l,c(r).value),J(l,c(r).value===a()),D(l,"aria-label",c(r).title),D(n,"for",`${c(r).title}-${t}`),D(n,"title",c(r).title),D(n,"aria-label",c(r).title),V(O,c(r).title)}),v(m,d)});var R=g(w,2),$=f(R);I(m=>W($,m),[()=>`transform: translateX(${o.items.findIndex(m=>m.value===a())*100}%)`]),v(u,s),P()}Z(["change"]);var de=b('<p class="message svelte-owa53m">Export data</p> <div class="format-switcher svelte-owa53m"><!> <p class="format-description svelte-owa53m"><!></p></div> <div class="buttonContainer svelte-owa53m"><!></div>',1),fe=b('<p class="message svelte-owa53m">Exporting data...</p> <div class="buttonContainer svelte-owa53m"><!></div>',1),ue=b('<p class="message svelte-owa53m">Data exported successfully!</p> <div class="buttonContainer svelte-owa53m"><!></div>',1),pe=b('<div class="content svelte-owa53m"><!></div>');function _e(u,o){F(o,!0);const{blockDialog:t}=z();let a=M("idle"),e=M("sync");const s=()=>{oe()};K(()=>{t(c(a)==="loading")}),ee(()=>()=>{t(!1)});const p=async()=>{k(a,"loading"),setTimeout(async()=>{if(c(e)==="sync")await le(te()()||[]).finally(async()=>{await new Promise(r=>setTimeout(r,500)),k(a,"success")});else try{const r=re(ae()()||new Map),d=new Blob([r],{type:"text/html"}),l=URL.createObjectURL(d),n=document.createElement("a");n.href=l,n.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l),k(a,"success")}catch{k(a,"success")}},0)};var w=pe(),R=f(w);{var $=r=>{var d=de(),l=g(E(d),2),n=f(l);ve(n,{items:[{title:"Sync",value:"sync"},{title:"Bookmarks",value:"bookmarks"}],get value(){return c(e)},onChange:i=>{k(e,i,!0)}});var O=g(n,2),h=f(O);{var _=i=>{var T=C("App format for sync or backup");v(i,T)},y=i=>{var T=C("Browser bookmarks format (exports only bookmarks, not notes)");v(i,T)};x(h,i=>{c(e)==="sync"?i(_):i(y,!1)})}var A=g(l,2),L=f(A);B(L,{onClick:p,children:(i,T)=>{var j=C("Export");v(i,j)},$$slots:{default:!0}}),v(r,d)},m=r=>{var d=U(),l=E(d);{var n=h=>{var _=fe(),y=g(E(_),2),A=f(y);se(A,{}),v(h,_)},O=h=>{var _=U(),y=E(_);{var A=L=>{var i=ue(),T=g(E(i),2),j=f(T);B(j,{onClick:s,children:(N,me)=>{var q=C("Close");v(N,q)},$$slots:{default:!0}}),v(L,i)};x(y,L=>{c(a)==="success"&&L(A)},!0)}v(h,_)};x(l,h=>{c(a)==="loading"?h(n):h(O,!1)},!0)}v(r,d)};x(R,r=>{c(a)==="idle"?r($):r(m,!1)})}v(u,w),P()}export{_e as default};
