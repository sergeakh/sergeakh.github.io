var Ea=Object.defineProperty;var ka=(e,t,n)=>t in e?Ea(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var an=(e,t,n)=>ka(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const zn=!1;var Sn=Array.isArray,Ta=Array.prototype.indexOf,bn=Array.from,Ca=Object.defineProperty,ft=Object.getOwnPropertyDescriptor,cr=Object.getOwnPropertyDescriptors,Da=Object.prototype,Ia=Array.prototype,En=Object.getPrototypeOf,Vn=Object.isExtensible;const ur=()=>{};function La(e){return e()}function zt(e){for(var t=0;t<e.length;t++)e[t]()}const Le=2,dr=4,qt=8,kn=16,We=32,_t=64,Tn=128,De=256,Vt=512,Pe=1024,Ke=2048,it=4096,He=8192,Cn=16384,fr=32768,Gt=65536,Wn=1<<17,Pa=1<<18,vr=1<<19,dn=1<<20,nt=Symbol("$state"),xa=Symbol("legacy props"),Aa=Symbol(""),hr=new class extends Error{constructor(){super(...arguments);an(this,"name","StaleReactionError");an(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function gr(e){return e===this.v}function Oa(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function pr(e){return!Oa(e,this.v)}function Ma(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Ba(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ra(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Na(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Fa(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function ja(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ua(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ha(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let yt=!1,Ka=!1;function za(){yt=!0}const Dn=1,In=2,mr=4,Va=8,Wa=16,Ya=1,Xa=2,Ja=4,qa=8,Ga=16,Za=1,Qa=2,be=Symbol(),$a="http://www.w3.org/1999/xhtml";function es(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ue=null;function Yn(e){ue=e}function q(e,t=!1,n){var r=ue={p:ue,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};yt&&!t&&(ue.l={s:null,u:null,r1:[],r2:Ct(!1)}),Dr(()=>{r.d=!0})}function G(e){const t=ue;if(t!==null){e!==void 0&&(t.x=e);const o=t.e;if(o!==null){var n=re,r=ee;t.e=null;try{for(var a=0;a<o.length;a++){var s=o[a];Qe(s.effect),Me(s.reaction),Ln(s.fn)}}finally{Qe(n),Me(r)}}ue=t.p,t.m=!0}return e||{}}function At(){return!yt||ue!==null&&ue.l===null}function ce(e){if(typeof e!="object"||e===null||nt in e)return e;const t=En(e);if(t!==Da&&t!==Ia)return e;var n=new Map,r=Sn(e),a=B(0),s=ee,o=l=>{var c=ee;Me(s);var f=l();return Me(c),f};return r&&n.set("length",B(e.length)),new Proxy(e,{defineProperty(l,c,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&ja();var u=n.get(c);return u===void 0?u=o(()=>{var d=B(f.value);return n.set(c,d),d}):S(u,f.value,!0),!0},deleteProperty(l,c){var f=n.get(c);if(f===void 0){if(c in l){const v=o(()=>B(be));n.set(c,v),sn(a)}}else{if(r&&typeof c=="string"){var u=n.get("length"),d=Number(c);Number.isInteger(d)&&d<u.v&&S(u,d)}S(f,be),sn(a)}return!0},get(l,c,f){var h;if(c===nt)return e;var u=n.get(c),d=c in l;if(u===void 0&&(!d||(h=ft(l,c))!=null&&h.writable)&&(u=o(()=>{var g=ce(d?l[c]:be),_=B(g);return _}),n.set(c,u)),u!==void 0){var v=i(u);return v===be?void 0:v}return Reflect.get(l,c,f)},getOwnPropertyDescriptor(l,c){var f=Reflect.getOwnPropertyDescriptor(l,c);if(f&&"value"in f){var u=n.get(c);u&&(f.value=i(u))}else if(f===void 0){var d=n.get(c),v=d==null?void 0:d.v;if(d!==void 0&&v!==be)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return f},has(l,c){var v;if(c===nt)return!0;var f=n.get(c),u=f!==void 0&&f.v!==be||Reflect.has(l,c);if(f!==void 0||re!==null&&(!u||(v=ft(l,c))!=null&&v.writable)){f===void 0&&(f=o(()=>{var h=u?ce(l[c]):be,g=B(h);return g}),n.set(c,f));var d=i(f);if(d===be)return!1}return u},set(l,c,f,u){var w;var d=n.get(c),v=c in l;if(r&&c==="length")for(var h=f;h<d.v;h+=1){var g=n.get(h+"");g!==void 0?S(g,be):h in l&&(g=o(()=>B(be)),n.set(h+"",g))}if(d===void 0)(!v||(w=ft(l,c))!=null&&w.writable)&&(d=o(()=>B(void 0)),S(d,ce(f)),n.set(c,d));else{v=d.v!==be;var _=o(()=>ce(f));S(d,_)}var y=Reflect.getOwnPropertyDescriptor(l,c);if(y!=null&&y.set&&y.set.call(u,f),!v){if(r&&typeof c=="string"){var T=n.get("length"),m=Number(c);Number.isInteger(m)&&m>=T.v&&S(T,m+1)}sn(a)}return!0},ownKeys(l){i(a);var c=Reflect.ownKeys(l).filter(d=>{var v=n.get(d);return v===void 0||v.v!==be});for(var[f,u]of n)u.v!==be&&!(f in l)&&c.push(f);return c},setPrototypeOf(){Ua()}})}function sn(e,t=1){S(e,e.v+t)}function Ot(e){var t=Le|Ke,n=ee!==null&&(ee.f&Le)!==0?ee:null;return re===null||n!==null&&(n.f&De)!==0?t|=De:re.f|=vr,{ctx:ue,deps:null,effects:null,equals:gr,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??re,ac:null}}function $(e){const t=Ot(e);return Br(t),t}function _r(e){const t=Ot(e);return t.equals=pr,t}function yr(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)ze(t[n])}}function ts(e){for(var t=e.parent;t!==null;){if((t.f&Le)===0)return t;t=t.parent}return null}function wr(e){var t,n=re;Qe(ts(e));try{yr(e),t=jr(e)}finally{Qe(n)}return t}function Sr(e){var t=wr(e);if(e.equals(t)||(e.v=t,e.wv=Nr()),!St){var n=(Ge||(e.f&De)!==0)&&e.deps!==null?it:Pe;Be(e,n)}}const Tt=new Map;function Ct(e,t){var n={f:0,v:e,reactions:null,equals:gr,rv:0,wv:0};return n}function B(e,t){const n=Ct(e);return Br(n),n}function ns(e,t=!1,n=!0){var a;const r=Ct(e);return t||(r.equals=pr),yt&&n&&ue!==null&&ue.l!==null&&((a=ue.l).s??(a.s=[])).push(r),r}function S(e,t,n=!1){ee!==null&&(!Oe||(ee.f&Wn)!==0)&&At()&&(ee.f&(Le|kn|Wn))!==0&&!(ge!=null&&ge[1].includes(e)&&ge[0]===ee)&&Ha();let r=n?ce(t):t;return fn(e,r)}function fn(e,t){if(!e.equals(t)){var n=e.v;St?Tt.set(e,t):Tt.set(e,n),e.v=t,(e.f&Le)!==0&&((e.f&Ke)!==0&&wr(e),Be(e,(e.f&De)===0?Pe:it)),e.wv=Nr(),br(e,Ke),At()&&re!==null&&(re.f&Pe)!==0&&(re.f&(We|_t))===0&&(Ie===null?hs([e]):Ie.push(e))}return t}function br(e,t){var n=e.reactions;if(n!==null)for(var r=At(),a=n.length,s=0;s<a;s++){var o=n[s],l=o.f;(l&Ke)===0&&(!r&&o===re||(Be(o,t),(l&(Pe|De))!==0&&((l&Le)!==0?br(o,it):On(o))))}}let rs=!1;var Xn,Er,kr,Tr;function as(){if(Xn===void 0){Xn=window,Er=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;kr=ft(t,"firstChild").get,Tr=ft(t,"nextSibling").get,Vn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Vn(n)&&(n.__t=void 0)}}function Zt(e=""){return document.createTextNode(e)}function vt(e){return kr.call(e)}function Qt(e){return Tr.call(e)}function b(e,t){return vt(e)}function J(e,t){{var n=vt(e);return n instanceof Comment&&n.data===""?Qt(n):n}}function D(e,t=1,n=!1){let r=e;for(;t--;)r=Qt(r);return r}function ss(e){e.textContent=""}function Cr(e){re===null&&ee===null&&Ra(),ee!==null&&(ee.f&De)!==0&&re===null&&Ba(),St&&Ma()}function is(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function wt(e,t,n,r=!0){var a=re,s={ctx:ue,deps:null,nodes_start:null,nodes_end:null,f:e|Ke,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{An(s),s.f|=fr}catch(c){throw ze(s),c}else t!==null&&On(s);var o=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(vr|Tn))===0;if(!o&&r&&(a!==null&&is(s,a),ee!==null&&(ee.f&Le)!==0)){var l=ee;(l.effects??(l.effects=[])).push(s)}return s}function Dr(e){const t=wt(qt,null,!1);return Be(t,Pe),t.teardown=e,t}function fe(e){Cr();var t=re!==null&&(re.f&We)!==0&&ue!==null&&!ue.m;if(t){var n=ue;(n.e??(n.e=[])).push({fn:e,effect:re,reaction:ee})}else{var r=Ln(e);return r}}function os(e){return Cr(),$t(e)}function ls(e){const t=wt(_t,e,!0);return(n={})=>new Promise(r=>{n.outro?Wt(t,()=>{ze(t),r(void 0)}):(ze(t),r(void 0))})}function Ln(e){return wt(dr,e,!1)}function $t(e){return wt(qt,e,!0)}function oe(e,t=[],n=Ot){const r=t.map(n);return en(()=>e(...r.map(i)))}function en(e,t=0){var n=wt(qt|kn|t,e,!0);return n}function ht(e,t=!0){return wt(qt|We,e,!0,t)}function Ir(e){var t=e.teardown;if(t!==null){const n=St,r=ee;Jn(!0),Me(null);try{t.call(null)}finally{Jn(n),Me(r)}}}function Lr(e,t=!1){var a;var n=e.first;for(e.first=e.last=null;n!==null;){(a=n.ac)==null||a.abort(hr);var r=n.next;(n.f&_t)!==0?n.parent=null:ze(n,t),n=r}}function cs(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&We)===0&&ze(t),t=n}}function ze(e,t=!0){var n=!1;(t||(e.f&Pa)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(us(e.nodes_start,e.nodes_end),n=!0),Lr(e,t&&!n),Jt(e,0),Be(e,Cn);var r=e.transitions;if(r!==null)for(const s of r)s.stop();Ir(e);var a=e.parent;a!==null&&a.first!==null&&Pr(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function us(e,t){for(;e!==null;){var n=e===t?null:Qt(e);e.remove(),e=n}}function Pr(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Wt(e,t){var n=[];Pn(e,n,!0),xr(n,()=>{ze(e),t&&t()})}function xr(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var a of e)a.out(r)}else t()}function Pn(e,t,n){if((e.f&He)===0){if(e.f^=He,e.transitions!==null)for(const o of e.transitions)(o.is_global||n)&&t.push(o);for(var r=e.first;r!==null;){var a=r.next,s=(r.f&Gt)!==0||(r.f&We)!==0;Pn(r,t,s?n:!1),r=a}}}function Yt(e){Ar(e,!0)}function Ar(e,t){if((e.f&He)!==0){e.f^=He;for(var n=e.first;n!==null;){var r=n.next,a=(n.f&Gt)!==0||(n.f&We)!==0;Ar(n,a?t:!1),n=r}if(e.transitions!==null)for(const s of e.transitions)(s.is_global||t)&&s.in()}}let Dt=[],vn=[];function Or(){var e=Dt;Dt=[],zt(e)}function ds(){var e=vn;vn=[],zt(e)}function xn(e){Dt.length===0&&queueMicrotask(Or),Dt.push(e)}function fs(){Dt.length>0&&Or(),vn.length>0&&ds()}function vs(e){var t=re;if((t.f&fr)===0){if((t.f&Tn)===0)throw e;t.fn(e)}else Mr(e,t)}function Mr(e,t){for(;t!==null;){if((t.f&Tn)!==0)try{t.b.error(e);return}catch{}t=t.parent}throw e}let It=!1,Lt=null,rt=!1,St=!1;function Jn(e){St=e}let kt=[];let ee=null,Oe=!1;function Me(e){ee=e}let re=null;function Qe(e){re=e}let ge=null;function Br(e){ee!==null&&ee.f&dn&&(ge===null?ge=[ee,[e]]:ge[1].push(e))}let _e=null,Ce=0,Ie=null;function hs(e){Ie=e}let Rr=1,Xt=0,Ge=!1;function Nr(){return++Rr}function tn(e){var d;var t=e.f;if((t&Ke)!==0)return!0;if((t&it)!==0){var n=e.deps,r=(t&De)!==0;if(n!==null){var a,s,o=(t&Vt)!==0,l=r&&re!==null&&!Ge,c=n.length;if(o||l){var f=e,u=f.parent;for(a=0;a<c;a++)s=n[a],(o||!((d=s==null?void 0:s.reactions)!=null&&d.includes(f)))&&(s.reactions??(s.reactions=[])).push(f);o&&(f.f^=Vt),l&&u!==null&&(u.f&De)===0&&(f.f^=De)}for(a=0;a<c;a++)if(s=n[a],tn(s)&&Sr(s),s.wv>e.wv)return!0}(!r||re!==null&&!Ge)&&Be(e,Pe)}return!1}function Fr(e,t,n=!0){var r=e.reactions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];ge!=null&&ge[1].includes(e)&&ge[0]===ee||((s.f&Le)!==0?Fr(s,t,!1):t===s&&(n?Be(s,Ke):(s.f&Pe)!==0&&Be(s,it),On(s)))}}function jr(e){var h;var t=_e,n=Ce,r=Ie,a=ee,s=Ge,o=ge,l=ue,c=Oe,f=e.f;_e=null,Ce=0,Ie=null,Ge=(f&De)!==0&&(Oe||!rt||ee===null),ee=(f&(We|_t))===0?e:null,ge=null,Yn(e.ctx),Oe=!1,Xt++,e.f|=dn,e.ac!==null&&(e.ac.abort(hr),e.ac=null);try{var u=(0,e.fn)(),d=e.deps;if(_e!==null){var v;if(Jt(e,Ce),d!==null&&Ce>0)for(d.length=Ce+_e.length,v=0;v<_e.length;v++)d[Ce+v]=_e[v];else e.deps=d=_e;if(!Ge||(f&Le)!==0&&e.reactions!==null)for(v=Ce;v<d.length;v++)((h=d[v]).reactions??(h.reactions=[])).push(e)}else d!==null&&Ce<d.length&&(Jt(e,Ce),d.length=Ce);if(At()&&Ie!==null&&!Oe&&d!==null&&(e.f&(Le|it|Ke))===0)for(v=0;v<Ie.length;v++)Fr(Ie[v],e);return a!==null&&a!==e&&(Xt++,Ie!==null&&(r===null?r=Ie:r.push(...Ie))),u}catch(g){vs(g)}finally{_e=t,Ce=n,Ie=r,ee=a,Ge=s,ge=o,Yn(l),Oe=c,e.f^=dn}}function gs(e,t){let n=t.reactions;if(n!==null){var r=Ta.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&Le)!==0&&(_e===null||!_e.includes(t))&&(Be(t,it),(t.f&(De|Vt))===0&&(t.f^=Vt),yr(t),Jt(t,0))}function Jt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)gs(e,n[r])}function An(e){var t=e.f;if((t&Cn)===0){Be(e,Pe);var n=re,r=rt;re=e,rt=!0;try{(t&kn)!==0?cs(e):Lr(e),Ir(e);var a=jr(e);e.teardown=typeof a=="function"?a:null,e.wv=Rr;var s;zn&&Ka&&(e.f&Ke)!==0&&e.deps}finally{rt=r,re=n}}}function ps(){try{Na()}catch(e){if(Lt!==null)Mr(e,Lt);else throw e}}function Ur(){var e=rt;try{var t=0;for(rt=!0;kt.length>0;){t++>1e3&&ps();var n=kt,r=n.length;kt=[];for(var a=0;a<r;a++){var s=_s(n[a]);ms(s)}Tt.clear()}}finally{It=!1,rt=e,Lt=null}}function ms(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];(r.f&(Cn|He))===0&&tn(r)&&(An(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Pr(r):r.fn=null))}}function On(e){It||(It=!0,queueMicrotask(Ur));for(var t=Lt=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(_t|We))!==0){if((n&Pe)===0)return;t.f^=Pe}}kt.push(t)}function _s(e){for(var t=[],n=e;n!==null;){var r=n.f,a=(r&(We|_t))!==0,s=a&&(r&Pe)!==0;if(!s&&(r&He)===0){(r&dr)!==0?t.push(n):a?n.f^=Pe:tn(n)&&An(n);var o=n.first;if(o!==null){n=o;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)n=l.next,l=l.parent}return t}function ys(e){for(var t;;){if(fs(),kt.length===0)return It=!1,Lt=null,t;It=!0,Ur()}}async function ws(){await Promise.resolve(),ys()}function i(e){var t=e.f,n=(t&Le)!==0;if(ee!==null&&!Oe){if(!(ge!=null&&ge[1].includes(e))||ge[0]!==ee){var r=ee.deps;e.rv<Xt&&(e.rv=Xt,_e===null&&r!==null&&r[Ce]===e?Ce++:_e===null?_e=[e]:(!Ge||!_e.includes(e))&&_e.push(e))}}else if(n&&e.deps===null&&e.effects===null){var a=e,s=a.parent;s!==null&&(s.f&De)===0&&(a.f^=De)}return n&&(a=e,tn(a)&&Sr(a)),St&&Tt.has(e)?Tt.get(e):e.v}function Mt(e){var t=Oe;try{return Oe=!0,e()}finally{Oe=t}}const Ss=-7169;function Be(e,t){e.f=e.f&Ss|t}function bs(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(nt in e)hn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&nt in n&&hn(n)}}}function hn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{hn(e[r],t)}catch{}const n=En(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=cr(n);for(let a in r){const s=r[a].get;if(s)try{s.call(e)}catch{}}}}}const Es=["touchstart","touchmove"];function ks(e){return Es.includes(e)}let qn=!1;function Ts(){qn||(qn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Hr(e){var t=ee,n=re;Me(null),Qe(null);try{return e()}finally{Me(t),Qe(n)}}function Cs(e,t,n,r=n){e.addEventListener(t,()=>Hr(n));const a=e.__on_r;a?e.__on_r=()=>{a(),r(!0)}:e.__on_r=()=>r(!0),Ts()}const Kr=new Set,gn=new Set;function Ds(e,t,n,r={}){function a(s){if(r.capture||bt.call(t,s),!s.cancelBubble)return Hr(()=>n==null?void 0:n.call(this,s))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?xn(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function je(e,t,n,r,a){var s={capture:r,passive:a},o=Ds(e,t,n,s);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Dr(()=>{t.removeEventListener(e,o,s)})}function Se(e){for(var t=0;t<e.length;t++)Kr.add(e[t]);for(var n of gn)n(e)}function bt(e){var m;var t=this,n=t.ownerDocument,r=e.type,a=((m=e.composedPath)==null?void 0:m.call(e))||[],s=a[0]||e.target,o=0,l=e.__root;if(l){var c=a.indexOf(l);if(c!==-1&&(t===document||t===window)){e.__root=t;return}var f=a.indexOf(t);if(f===-1)return;c<=f&&(o=c)}if(s=a[o]||e.target,s!==t){Ca(e,"currentTarget",{configurable:!0,get(){return s||n}});var u=ee,d=re;Me(null),Qe(null);try{for(var v,h=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+r];if(_!=null&&(!s.disabled||e.target===s))if(Sn(_)){var[y,...T]=_;y.apply(s,[e,...T])}else _.call(s,e)}catch(w){v?h.push(w):v=w}if(e.cancelBubble||g===t||g===null)break;s=g}if(v){for(let w of h)queueMicrotask(()=>{throw w});throw v}}finally{e.__root=t,delete e.currentTarget,Me(u),Qe(d)}}}function zr(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Pt(e,t){var n=re;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function O(e,t){var n=(t&Za)!==0,r=(t&Qa)!==0,a,s=!e.startsWith("<!>");return()=>{a===void 0&&(a=zr(s?e:"<!>"+e),n||(a=vt(a)));var o=r||Er?document.importNode(a,!0):a.cloneNode(!0);if(n){var l=vt(o),c=o.lastChild;Pt(l,c)}else Pt(o,o);return o}}function Is(e,t,n="svg"){var r=!e.startsWith("<!>"),a=`<${n}>${r?e:"<!>"+e}</${n}>`,s;return()=>{if(!s){var o=zr(a),l=vt(o);s=vt(l)}var c=s.cloneNode(!0);return Pt(c,c),c}}function Ls(e,t){return Is(e,t,"svg")}function ie(e=""){{var t=Zt(e+"");return Pt(t,t),t}}function ke(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Zt();return e.append(t,n),Pt(t,n),e}function E(e,t){e!==null&&e.before(t)}function Ps(){var e;return(e=window.__svelte??(window.__svelte={})).uid??(e.uid=1),`c${window.__svelte.uid++}`}function ot(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function xs(e,t){return As(e,t)}const ut=new Map;function As(e,{target:t,anchor:n,props:r={},events:a,context:s,intro:o=!0}){as();var l=new Set,c=d=>{for(var v=0;v<d.length;v++){var h=d[v];if(!l.has(h)){l.add(h);var g=ks(h);t.addEventListener(h,bt,{passive:g});var _=ut.get(h);_===void 0?(document.addEventListener(h,bt,{passive:g}),ut.set(h,1)):ut.set(h,_+1)}}};c(bn(Kr)),gn.add(c);var f=void 0,u=ls(()=>{var d=n??t.appendChild(Zt());return ht(()=>{if(s){q({});var v=ue;v.c=s}a&&(r.$$events=a),f=e(d,r)||{},s&&G()}),()=>{var g;for(var v of l){t.removeEventListener(v,bt);var h=ut.get(v);--h===0?(document.removeEventListener(v,bt),ut.delete(v)):ut.set(v,h)}gn.delete(c),d!==n&&((g=d.parentNode)==null||g.removeChild(d))}});return Os.set(f,u),f}let Os=new WeakMap;function N(e,t,[n,r]=[0,0]){var a=e,s=null,o=null,l=be,c=n>0?Gt:0,f=!1;const u=(v,h=!0)=>{f=!0,d(h,v)},d=(v,h)=>{l!==(l=v)&&(l?(s?Yt(s):h&&(s=ht(()=>h(a))),o&&Wt(o,()=>{o=null})):(o?Yt(o):h&&(o=ht(()=>h(a,[n+1,r]))),s&&Wt(s,()=>{s=null})))};en(()=>{f=!1,t(u),f||d(null,null)},c)}function we(e,t){$t(()=>{var n=t();for(var r in n){var a=n[r];a?e.style.setProperty(r,a):e.style.removeProperty(r)}})}function Ms(e,t){return t}function Bs(e,t,n,r){for(var a=[],s=t.length,o=0;o<s;o++)Pn(t[o].e,a,!0);var l=s>0&&a.length===0&&n!==null;if(l){var c=n.parentNode;ss(c),c.append(n),r.clear(),Xe(e,t[0].prev,t[s-1].next)}xr(a,()=>{for(var f=0;f<s;f++){var u=t[f];l||(r.delete(u.k),Xe(e,u.prev,u.next)),ze(u.e,!l)}})}function Ue(e,t,n,r,a,s=null){var o=e,l={flags:t,items:new Map,first:null},c=(t&mr)!==0;if(c){var f=e;o=f.appendChild(Zt())}var u=null,d=!1,v=_r(()=>{var h=n();return Sn(h)?h:h==null?[]:bn(h)});en(()=>{var h=i(v),g=h.length;d&&g===0||(d=g===0,Rs(h,l,o,a,t,r,n),s!==null&&(g===0?u?Yt(u):u=ht(()=>s(o)):u!==null&&Wt(u,()=>{u=null})),i(v))})}function Rs(e,t,n,r,a,s,o){var A,R,x,U;var l=(a&Va)!==0,c=(a&(Dn|In))!==0,f=e.length,u=t.items,d=t.first,v=d,h,g=null,_,y=[],T=[],m,w,p,k;if(l)for(k=0;k<f;k+=1)m=e[k],w=s(m,k),p=u.get(w),p!==void 0&&((A=p.a)==null||A.measure(),(_??(_=new Set)).add(p));for(k=0;k<f;k+=1){if(m=e[k],w=s(m,k),p=u.get(w),p===void 0){var L=v?v.e.nodes_start:n;g=Fs(L,t,g,g===null?t.first:g.next,m,w,k,r,a,o),u.set(w,g),y=[],T=[],v=g.next;continue}if(c&&Ns(p,m,k,a),(p.e.f&He)!==0&&(Yt(p.e),l&&((R=p.a)==null||R.unfix(),(_??(_=new Set)).delete(p))),p!==v){if(h!==void 0&&h.has(p)){if(y.length<T.length){var C=T[0],M;g=C.prev;var K=y[0],j=y[y.length-1];for(M=0;M<y.length;M+=1)Gn(y[M],C,n);for(M=0;M<T.length;M+=1)h.delete(T[M]);Xe(t,K.prev,j.next),Xe(t,g,K),Xe(t,j,C),v=C,g=j,k-=1,y=[],T=[]}else h.delete(p),Gn(p,v,n),Xe(t,p.prev,p.next),Xe(t,p,g===null?t.first:g.next),Xe(t,g,p),g=p;continue}for(y=[],T=[];v!==null&&v.k!==w;)(v.e.f&He)===0&&(h??(h=new Set)).add(v),T.push(v),v=v.next;if(v===null)continue;p=v}y.push(p),g=p,v=p.next}if(v!==null||h!==void 0){for(var z=h===void 0?[]:bn(h);v!==null;)(v.e.f&He)===0&&z.push(v),v=v.next;var V=z.length;if(V>0){var W=(a&mr)!==0&&f===0?n:null;if(l){for(k=0;k<V;k+=1)(x=z[k].a)==null||x.measure();for(k=0;k<V;k+=1)(U=z[k].a)==null||U.fix()}Bs(t,z,W,u)}}l&&xn(()=>{var Y;if(_!==void 0)for(p of _)(Y=p.a)==null||Y.apply()}),re.first=t.first&&t.first.e,re.last=g&&g.e}function Ns(e,t,n,r){(r&Dn)!==0&&fn(e.v,t),(r&In)!==0?fn(e.i,n):e.i=n}function Fs(e,t,n,r,a,s,o,l,c,f){var u=(c&Dn)!==0,d=(c&Wa)===0,v=u?d?ns(a,!1,!1):Ct(a):a,h=(c&In)===0?o:Ct(o),g={i:h,v,k:s,a:null,e:null,prev:n,next:r};try{return g.e=ht(()=>l(e,v,h,f),rs),g.e.prev=n&&n.e,g.e.next=r&&r.e,n===null?t.first=g:(n.next=g,n.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function Gn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,s=e.e.nodes_start;s!==r;){var o=Qt(s);a.before(s),s=o}}function Xe(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ye(e,t,...n){var r=e,a=ur,s;en(()=>{a!==(a=t())&&(s&&(ze(s),s=null),s=ht(()=>a(r,...n)))},Gt)}function Vr(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=Vr(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function js(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=Vr(e))&&(r&&(r+=" "),r+=t);return r}function se(e){return typeof e=="object"?js(e):e??""}const Zn=[...` 	
\r\f \v\uFEFF`];function Us(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var s=a.length,o=0;(o=r.indexOf(a,o))>=0;){var l=o+s;(o===0||Zn.includes(r[o-1]))&&(l===r.length||Zn.includes(r[l]))?r=(o===0?"":r.substring(0,o))+r.substring(l+1):o=l}}return r===""?null:r}function Hs(e,t){return e==null?null:String(e)}function ae(e,t,n,r,a,s){var o=e.__className;if(o!==n||o===void 0){var l=Us(n,r,s);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(s&&a!==s)for(var c in s){var f=!!s[c];(a==null||f!==!!a[c])&&e.classList.toggle(c,f)}return s}function xt(e,t,n,r){var a=e.__style;if(a!==t){var s=Hs(t);s==null?e.removeAttribute("style"):e.style.cssText=s,e.__style=t}return r}const Ks=Symbol("is custom element"),zs=Symbol("is html");function Ht(e,t){var n=Mn(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function Kt(e,t){var n=Mn(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function de(e,t,n,r){var a=Mn(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[Aa]=n),n==null?e.removeAttribute(t):typeof n!="string"&&Vs(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Mn(e){return e.__attributes??(e.__attributes={[Ks]:e.nodeName.includes("-"),[zs]:e.namespaceURI===$a})}var Qn=new Map;function Vs(e){var t=Qn.get(e.nodeName);if(t)return t;Qn.set(e.nodeName,t=[]);for(var n,r=e,a=Element.prototype;a!==r;){n=cr(r);for(var s in n)n[s].set&&t.push(s);r=En(r)}return t}function Bn(e,t,n=t){var r=At();Cs(e,"input",a=>{var s=a?e.defaultValue:e.value;if(s=on(e)?ln(s):s,n(s),r&&s!==(s=t())){var o=e.selectionStart,l=e.selectionEnd;e.value=s??"",l!==null&&(e.selectionStart=o,e.selectionEnd=Math.min(l,e.value.length))}}),Mt(t)==null&&e.value&&n(on(e)?ln(e.value):e.value),$t(()=>{var a=t();on(e)&&a===ln(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function on(e){var t=e.type;return t==="number"||t==="range"}function ln(e){return e===""?null:+e}function $n(e,t){return e===t||(e==null?void 0:e[nt])===t}function me(e={},t,n,r){return Ln(()=>{var a,s;return $t(()=>{a=s,s=[],Mt(()=>{e!==n(...s)&&(t(e,...s),a&&$n(n(...a),e)&&t(null,...a))})}),()=>{xn(()=>{s&&$n(n(...s),e)&&t(null,...s)})}}),e}function Bt(e=!1){const t=ue,n=t.l.u;if(!n)return;let r=()=>bs(t.s);if(e){let a=0,s={};const o=Ot(()=>{let l=!1;const c=t.s;for(const f in c)c[f]!==s[f]&&(s[f]=c[f],l=!0);return l&&a++,a});r=()=>i(o)}n.b.length&&os(()=>{er(t,r),zt(n.b)}),fe(()=>{const a=Mt(()=>n.m.map(La));return()=>{for(const s of a)typeof s=="function"&&s()}}),n.a.length&&fe(()=>{er(t,r),zt(n.a)})}function er(e,t){if(e.l.s)for(const n of e.l.s)i(n);t()}let jt=!1;function Ws(e){var t=jt;try{return jt=!1,[e(),jt]}finally{jt=t}}function Ys(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function Z(e,t,n,r){var T;var a=!yt||(n&Xa)!==0,s=(n&qa)!==0,o=(n&Ga)!==0,l=r,c=!0,f=()=>(c&&(c=!1,l=o?Mt(r):r),l),u;if(s){var d=nt in e||xa in e;u=((T=ft(e,t))==null?void 0:T.set)??(d&&t in e?m=>e[t]=m:void 0)}var v,h=!1;s?[v,h]=Ws(()=>e[t]):v=e[t],v===void 0&&r!==void 0&&(v=f(),u&&(a&&Fa(),u(v)));var g;if(a?g=()=>{var m=e[t];return m===void 0?f():(c=!0,m)}:g=()=>{var m=e[t];return m!==void 0&&(l=void 0),m===void 0?l:m},a&&(n&Ja)===0)return g;if(u){var _=e.$$legacy;return function(m,w){return arguments.length>0?((!a||!w||_||h)&&u(w?g():m),m):g()}}var y=((n&Ya)!==0?Ot:_r)(g);return s&&i(y),function(m,w){if(arguments.length>0){const p=w?i(y):a&&s?ce(m):m;return S(y,p),l!==void 0&&(l=p),m}return Ys(y)?y.v:i(y)}}function le(e){ue===null&&es(),yt&&ue.l!==null?Xs(ue).m.push(e):fe(()=>{const t=Mt(e);if(typeof t=="function")return t})}function Xs(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Js="5";var lr;typeof window<"u"&&((lr=window.__svelte??(window.__svelte={})).v??(lr.v=new Set)).add(Js);let et=B(""),dt=B(null);function qs(e){S(et,""),setTimeout(()=>{S(et,e,!0)},16)}var Gs=O('<div class="notification svelte-1a2zucn"> </div>');function Zs(e,t){q(t,!0),fe(()=>{var l,c;i(et),i(et)&&((l=i(dt))==null||l.getBoundingClientRect(),(c=i(dt))==null||c.style.setProperty("opacity","1"));const s=setTimeout(()=>{var f;(f=i(dt))==null||f.style.removeProperty("opacity")},800),o=setTimeout(()=>{var f;S(et,""),(f=i(dt))==null||f.style.removeProperty("opacity")},1200);return()=>{clearTimeout(s),clearTimeout(o)}});var n=ke(),r=J(n);{var a=s=>{var o=Gs(),l=b(o);me(o,c=>S(dt,c),()=>i(dt)),oe(()=>ot(l,i(et))),E(s,o)};N(r,s=>{i(et)&&s(a)})}E(e,n),G()}za();var Qs=O('<span class="vh svelte-14jjkpd"><!></span>');function st(e,t){var n=Qs(),r=b(n);Ye(r,()=>t.children),E(e,n)}var $s=Ls('<svg class="svelte-gv09tg"><use></use></svg>');function pe(e,t){let n=Z(t,"name",8,"");var r=$s(),a=b(r);oe(()=>de(a,"href",`#icon-${n()??""}`)),E(e,r)}const Wr=(e,t)=>{if(!t)return e;if(t.type==="closed")return{type:"closed"};switch(e.type){case"opened":return t.type==="close"?{type:"closing"}:t.type==="swipe"?{type:"openSwiping"}:e;case"closed":return t.type==="open"?{type:"opening"}:t.type==="swipe"?{type:"closeSwiping"}:e;case"openSwiping":return t.type==="open"?{type:"opening"}:t.type==="close"?{type:"closing"}:e;case"closeSwiping":return t.type==="open"?{type:"opening"}:t.type==="close"?{type:"closing"}:e;case"opening":return t.type==="opened"?{type:"opened"}:e;default:return e}};let pn=B(ce(Wr({type:"closed"})));const Je=e=>{S(pn,Wr(i(pn),e),!0)},Yr=()=>i(pn),ei=()=>{Je({type:"open"})},ti=()=>{Je({type:"close"})},ni=()=>{const e=Yr().type;e==="closed"?ei():e==="opened"&&ti()};var ri=O('<button class="buttonMenu svelte-hxzs42"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Xr(e,t){q(t,!1),Bt();var n=ri();n.__click=[ni];var r=b(n);we(r,()=>({"--size":"28px"})),pe(r.lastChild,{name:"sidebarMenu"});var a=D(r,2);st(a,{children:(s,o)=>{var l=ie("Menu");E(s,l)}}),E(e,n),G()}Se(["click"]);const F=ce({historyStack:[],pathname:window.location.pathname,search:window.location.search,historyLength:0}),Jr=()=>{var e;return((e=new URLSearchParams(F.search).get("selectedTags"))==null?void 0:e.split(","))||[]};let Ut=Jr();const ai=()=>{const e=Jr();return e.join(",")===Ut.join(",")||(Ut=e),Ut},si=()=>{F.pathname=document.location.pathname,F.search=document.location.search,F.historyLength=Math.max(0,F.historyLength-=1)};window.addEventListener("popstate",si);const gt=e=>{const[t,n]=e.split("?");F.pathname=t,F.search=n?`?${n}`:"",F.historyLength+=1,F.historyStack.push(window.location.href),window.history.replaceState(null,"",e)},ii=e=>{const[t,n]=e.split("?");F.pathname=t,F.search=n?`?${n}`:"",window.history.replaceState(null,"",e)},qr=(e="/")=>{var r;const[t,n]=e.split("?");if(F.historyLength<=0){const a=window.location.href,[s,o]=a.split("?");if(!o.includes("stackPages"))window.history.replaceState(null,"",e),F.historyLength=0,F.pathname=t,F.search=n?`?${n}`:"";else{const l=new URLSearchParams(o),f=(((r=l.get("stackPages"))==null?void 0:r.split(","))||[]).slice(0,-1);f.length===0?l.delete("stackPages"):l.set("stackPages",f.join(","));const u=`${s}${l.toString()?`?${l.toString()}`:""}`;window.history.replaceState(null,"",u),F.search=l.toString()?`?${l.toString()}`:""}}else if(F.historyStack.length>0){const a=F.historyStack.pop();if(a){const[s,o]=a.split("?");window.history.replaceState(null,"",a),F.historyLength=Math.max(0,F.historyLength-=1),F.pathname=s,F.search=o?`?${o}`:""}}},lt=()=>{const e=F.historyStack.findIndex(n=>n.includes("stackPages")),t=e===-1?F.historyStack.slice(0):F.historyStack.slice(0,e);if(t.length>0){const n=t.pop();if(n){const[r,a]=n.split("?");window.history.replaceState(null,"",n),F.historyLength=Math.max(0,t.length),F.pathname=r,F.search=a?`?${a}`:"",F.historyStack=t}}else window.history.replaceState(null,"","/"),F.historyLength=0,F.pathname="/",F.search="",F.historyStack=[]},Ve=()=>{var e;return((e=new URLSearchParams(F.search).get("stackPages"))==null?void 0:e.split(","))||[]};let at=B(ce(Ve()));const Re=e=>{const t=Ve();if(!t.includes(e)){t.push(e);const n=new URLSearchParams(F.search);n.set("stackPages",t.join(",")),S(at,t,!0),gt(`${F.pathname}?${n.toString()}`)}},oi=e=>Ve().includes(e),Gr=()=>{const e=i(at).slice(0,-1);S(at,e,!0)},Zr=()=>{const e=Ve();return e.length>=i(at).length?e.reduce((t,n)=>[...t,{page:n,shown:!0}],[]):i(at).reduce((t,n,r)=>[...t,{page:n,shown:e.length===0?!1:r!==i(at).length-1}],[])},mn=()=>{S(at,[],!0)},li=e=>{e.preventDefault(),Re("settings")},ci=e=>{e.preventDefault(),Re("newItem")};var ui=O('<a class="addItem svelte-lcsh6s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add item</span></a>'),di=O('<div class="header svelte-lcsh6s"><div class="top svelte-lcsh6s"><div class="desktop svelte-lcsh6s"><a class="link svelte-lcsh6s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a></div> <div class="mobile svelte-lcsh6s"><!></div> <!></div></div>');function fi(e,t){q(t,!0);const n=()=>{const _=Ve();_.includes("settings")||_.push("settings");const y=new URLSearchParams(F.search);return y.set("stackPages",_.join(",")),`${F.pathname}?${y}`};let a=$(()=>{const _=Ve();_.includes("newItem")||_.push("newItem");const y=new URLSearchParams(F.search);return y.set("stackPages",_.join(",")),`${F.pathname}?${y}`}),s=$(n);var o=di(),l=b(o),c=b(l),f=b(c);f.__click=[li];var u=b(f);we(u,()=>({"--size":"20px"})),pe(u.lastChild,{name:"settings"});var d=D(c,2),v=b(d);Xr(v,{});var h=D(d,2);{var g=_=>{var y=ui();y.__click=[ci];var T=b(y);we(T,()=>({"--size":"24px","--color":"#b0b0b0"})),pe(T.lastChild,{name:"plus"}),oe(()=>de(y,"href",i(a))),E(_,y)};N(h,_=>{F.pathname!=="/settings"&&_(g)})}oe(()=>de(f,"href",i(s))),E(e,o),G()}Se(["click"]);const vi=(e,t)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{e()},t)}},Qr=()=>window.matchMedia("(max-width: 768px)").matches;let $r=B(ce(Qr()));const hi=vi(()=>{S($r,Qr(),!0)},16);window.addEventListener("resize",hi);const Rt=()=>i($r),Rn=ce({count:0}),gi=()=>Rn.count>0,pi=()=>{Rn.count+=1},mi=()=>{Rn.count-=1},he=ce({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});let _n=!1;const cn=()=>{document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement?_n=!0:_n=!1},Nn=()=>_n;function _i(e,t){q(t,!0);let n=Z(t,"dialog",7),r=null;const a=()=>{t.dialogState==="swiping"&&t.onClose()};fe(()=>(t.dialogState==="swiping"&&(r=setTimeout(a,3e3)),()=>{r&&(clearTimeout(r),r=null)}));let s=null,o=null;const l=3,c=50,f=5,u=.6,d=.3,v=.35,h=.95;let g=0,_=0,y=0,T=!1,m=!1,w=0,p=0,k=0;const L=()=>{g=0,_=0,T=!1,m=!1,w=0,p=0,k=0,y=0,s=null,o!==null&&(cancelAnimationFrame(o),o=null),r&&(clearTimeout(r),r=null)},C=x=>{if(!n()){console.warn("Touch start: No dialog element");return}if(t.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${t.dialogState}`);return}g=x.touches[0].clientX,_=x.touches[0].clientY,y=performance.now(),T=!0,m=!1},M=x=>t.dialogState==="opened"&&x>0||t.dialogState==="swiping"&&x>0,K=x=>{if(n()){n().style.setProperty("--transition-timing","0s"),t.onSwipe(),navigator.vibrate&&navigator.vibrate(10);try{const U=window.getComputedStyle(n()),Y=U.transform||U.webkitTransform||"";if(p=n().offsetWidth,(t.dialogState==="swiping"||t.dialogState==="opened")&&(w=0),Y&&Y!=="none")try{w=new DOMMatrix(Y).m41}catch{console.warn("Could not parse transform matrix, using default position")}m=!0}catch(U){console.error("Error during swipe initialization:",U),L()}}},j=()=>{if(!n())return;const U=Math.abs(w+k*p/100)/p;n().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-U)})`)},z=()=>{if(o=null,!s||!T||!n()||Nn()){L();return}const x=s.touches[0].clientX,U=s.touches[0].clientY,Y=x-g,P=U-_,I=Math.abs(Y)>Math.abs(P),H=Math.abs(Y)>l;if(!m)if(I&&H&&M(Y))try{K(Y)}catch(rn){console.error("Error initializing swipe:",rn),L();return}else return;if(!M(Y))return;n().style.setProperty("--transition-timing","0s");let Q=w+Y*h;Q=Math.max(0,Math.min(p,Q)),n().style.transform=`translate3d(${Q}px, 0, 0)`,he.swipingRatio=Math.abs(1-Q/p),k=(Q-w)/p*100,t.dialogState==="swiping"&&(r&&clearTimeout(r),r=setTimeout(a,3e3)),j()},V=x=>{if(!T)return;s=x,o===null&&(o=requestAnimationFrame(z));const U=x.touches[0].clientX-g,Y=x.touches[0].clientY-_,P=Math.abs(U)>Math.abs(Y);m&&P&&x.preventDefault()},W=x=>{const U=Math.abs(x);if(U>=u)return f;if(U>=d){const Y=(U-d)/(u-d);return c-Y*(c-f)}else return c},A=(x,U)=>{if(Math.abs(x)>=u)return v*.5;const P=Math.abs(k)/100;return U?v*Math.max(.5,1-P):v*Math.max(.5,P)},R=x=>{var Q,ne;if(o!==null&&(cancelAnimationFrame(o),o=null),!T||!n()){L();return}if(!m){L();return}let U=0;if((Q=x==null?void 0:x.changedTouches)!=null&&Q[0]){const ve=x.changedTouches[0].clientX,Ft=performance.now()-y;Ft>0&&(U=(ve-g)/Ft)}const Y=W(U);let P=null;t.dialogState==="swiping"&&(P=Math.abs(k)>Y||U<-d?"close":"open");const I=t.dialogState==="swiping"&&P==="close",H=A(U,I);he.duration=H-.02,n().style.setProperty("--transition-timing",`${H}s`),n().offsetWidth,n().style.transform="",P==="open"?t.onOpen():P==="close"&&t.onClose(),(ne=n())==null||ne.style.removeProperty("--backdrop-bg"),L()};le(()=>(n().addEventListener("touchstart",C,{passive:!0}),n().addEventListener("touchmove",V,{passive:!1}),n().addEventListener("touchend",R,{passive:!0}),n().addEventListener("touchcancel",R,{passive:!0}),()=>{n().removeEventListener("touchstart",C),n().removeEventListener("touchmove",V),n().removeEventListener("touchend",R),n().removeEventListener("touchcancel",R),o!==null&&cancelAnimationFrame(o)})),G()}let Fn=B(!1);const yi=(e,t)=>{let n;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{e()},t)}},wi=yi(()=>{S(Fn,!1)},100),ea=()=>{S(Fn,!0),wi()},ta=()=>i(Fn);var Si=(e,t)=>{t.onStartClose()},bi=O('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Ei=O('<dialog><div class="dialogInner svelte-68rj1a"><div class="header svelte-68rj1a"><div><!></div></div> <!></div></dialog> <!>',1);function ki(e,t){q(t,!0);let n=350,r=B(null),a=B(null);const s=w=>{w.preventDefault(),t.onStartClose()};le(()=>{var w,p;return(w=i(r))==null||w.addEventListener("close",t.onClosed),(p=i(r))==null||p.addEventListener("cancel",s),()=>{var k,L;(k=i(r))==null||k.removeEventListener("close",t.onClosed),(L=i(r))==null||L.removeEventListener("cancel",s)}});const o=()=>{var w,p,k;(w=i(r))==null||w.style.removeProperty("--transition-timing"),(p=i(r))==null||p.style.removeProperty("transform"),(k=i(r))==null||k.style.removeProperty("--backdrop-bg")},l=()=>{ea()},c=$(ta);fe(()=>{var w,p;if(t.dialogState,!!i(r))switch(t.dialogState){case"opening":{i(r).open||i(r).showModal(),i(r).getBoundingClientRect();const k=setTimeout(()=>{o()},n+1),L=()=>{clearTimeout(k),o()};return(w=i(r))==null||w.addEventListener("transitionend",L,{once:!0}),t.onOpened(),()=>{var C;(C=i(r))==null||C.removeEventListener("transitionend",L)}}case"closing":{const k=setTimeout(()=>{t.dialogState==="closing"&&t.onClosed()},n+1),L=()=>{clearTimeout(k),t.onClosed()};return(p=i(r))==null||p.addEventListener("transitionend",L,{once:!0}),()=>{var C;(C=i(r))==null||C.removeEventListener("transitionend",L)}}case"opened":o()}});var f=Ei(),u=J(f),d=b(u),v=b(d),h=b(v),g=b(h);{var _=w=>{var p=bi();ae(p,1,se(["navigateButton","buttonBack"]),"svelte-68rj1a"),p.__click=[Si,t];var k=b(p);we(k,()=>({"--size":"20px"})),pe(k.lastChild,{name:"back"});var L=D(k,2);st(L,{children:(C,M)=>{var K=ie("back");E(C,K)}}),E(w,p)};N(g,w=>{(!(t.blocked||t.hidden)||t.blocked&&t.unBlockedBack)&&w(_)})}var y=D(v,2);Ye(y,()=>t.children),me(d,w=>S(a,w),()=>i(a)),me(u,w=>S(r,w),()=>i(r));var T=D(u,2);{var m=w=>{_i(w,{get onClose(){return t.onStartClose},get onOpen(){return t.onStartOpen},get onSwipe(){return t.onSwipe},get dialogState(){return t.dialogState},get dialog(){return i(r)}})};N(T,w=>{(!i(c)&&t.dialogState==="opened"||t.dialogState==="swiping")&&(!t.blocked||t.unBlockedBack)&&w(m)})}oe(()=>ae(u,1,se([{open:t.dialogState==="opened",hidden:t.hidden,isAnimationOn:he.working&&(!he.isSwiping||!t.hidden)},{hidden:t.hidden}]),"svelte-68rj1a")),je("scroll",d,l),E(e,f),G()}Se(["click"]);const tr=(e,t)=>{if(!t)return e;if(t.type==="closed")return{type:"closed"};switch(e.type){case"opened":return t.type==="close"?{type:"closing"}:t.type==="swipe"?{type:"swiping"}:e;case"closed":return t.type==="open"?{type:"opening"}:e;case"swiping":return t.type==="open"?{type:"opening"}:t.type==="close"?{type:"closing"}:e;case"opening":return t.type==="opened"?{type:"opened"}:e;default:return e}};function Ti(e,t){q(t,!0);let n=Z(t,"blocked",3,!1),r=Z(t,"hiddenDialog",3,!1),a=Z(t,"unBlockedBack",3,!1),s=Z(t,"onStartClose",3,()=>{}),o=Z(t,"onClose",3,()=>{}),l=B(ce(tr({type:"closed"})));const c=T=>{S(l,tr(i(l),T),!0)},f=()=>{n()&&!a()||(s()(),c({type:"close"}))},u=()=>{c({type:"open"})},d=()=>{c({type:"opened"}),he.duration=.2},v=()=>{o()(),c({type:"closed"}),he.swipingRatio=1,he.duration=.2},h=()=>{c({type:"swipe"})};fe(()=>{i(l).type==="swiping"?he.isSwiping=!0:he.isSwiping=!1,i(l).type==="closed"&&t.shownDialog?u():i(l).type==="opened"&&!t.shownDialog&&f()});var g=ke(),_=J(g);{var y=T=>{ki(T,{onSwipe:h,onOpened:d,onClosed:v,onStartClose:f,onStartOpen:u,get dialogState(){return i(l).type},get hidden(){return r()},get blocked(){return n()},get unBlockedBack(){return a()},children:(m,w)=>{var p=ke(),k=J(p);Ye(k,()=>t.children),E(m,p)},$$slots:{default:!0}})};N(_,T=>{i(l).type!=="closed"&&T(y)})}return E(e,g),G({handleComputeState:c})}const Ci=({getDialog:e,onOpen:t,onStartClose:n,onClose:r})=>{const a=o=>{o.preventDefault(),n()},s=()=>{r==null||r()};le(()=>{const o=e();return o==null||o.addEventListener("cancel",a),o==null||o.addEventListener("close",s),()=>{o==null||o.removeEventListener("cancel",a),o==null||o.removeEventListener("close",s)}}),le(()=>{const o=e();o==null||o.showModal(),o==null||o.getBoundingClientRect(),t()})};function na(e,t){q(t,!0),le(()=>{const n=r=>{var a;r.target&&((a=t.dialog)!=null&&a.open)&&t.dialogInner&&t.dialogInner!==r.target&&!t.dialogInner.contains(r.target)&&t.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),G()}var Di=(e,t)=>{t.onStartBack()},Ii=O('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Li=(e,t)=>{t.onStartClose()},Pi=O('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),xi=O('<dialog><div class="dialogInner svelte-141nkk0"><div class="header svelte-141nkk0"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function Ai(e,t){q(t,!0);let n=Z(t,"blockedDialog",3,!1),r=Z(t,"hiddenDialog",3,!1),a=Z(t,"isDesktopAnimationOff",3,!1),s=B(null),o=B(null);Ci({getDialog:()=>i(s),onOpen:t.onOpen,onStartClose:t.onStartClose,onClose:t.onClose}),fe(()=>{var w,p;t.stateDialog==="closing"&&(he.working?(w=i(s))==null||w.addEventListener("transitionend",()=>{var k;(k=i(s))==null||k.close()},{once:!0}):(p=i(s))==null||p.close())});var l=xi(),c=J(l),f=b(c),u=b(f),d=b(u),v=b(d);{var h=w=>{var p=Ii();ae(p,1,se(["navigateButton","buttonBack"]),"svelte-141nkk0"),p.__click=[Di,t];var k=b(p);we(k,()=>({"--size":"20px"})),pe(k.lastChild,{name:"back"});var L=D(k,2);st(L,{children:(C,M)=>{var K=ie("back");E(C,K)}}),E(w,p)};N(v,w=>{(!(n()||r())||n()&&t.unBlockedBack)&&t.onStartBack&&w(h)})}var g=D(d,2),_=b(g);{var y=w=>{var p=Pi();ae(p,1,se(["navigateButton","buttonClose"]),"svelte-141nkk0"),p.__click=[Li,t];var k=b(p);we(k,()=>({"--size":"20px"})),pe(k.lastChild,{name:"close"});var L=D(k,2);st(L,{children:(C,M)=>{var K=ie("close");E(C,K)}}),E(w,p)};N(_,w=>{n()||r()||w(y)})}var T=D(u,2);Ye(T,()=>t.children),me(f,w=>S(o,w),()=>i(o)),me(c,w=>S(s,w),()=>i(s));var m=D(c,2);na(m,{get dialog(){return i(s)},get dialogInner(){return i(o)},get onClose(){return t.onStartClose}}),oe(()=>ae(c,1,se([{open:t.stateDialog==="open",isAnimationOn:he.working,isDesktopAnimationOff:a(),hiddenDialog:r()}]),"svelte-141nkk0")),E(e,l),G()}Se(["click"]);const Oi=({onStartClose:e,onClose:t})=>{let n=B("close");return{get state(){return i(n)},set state(o){S(n,o,!0)},handleStartClose:(o=!1)=>{o||(S(n,"closing"),e==null||e())},handleOpen:()=>{S(n,"open")},handleClose:()=>{S(n,"close"),t==null||t()}}};function Mi(e,t){q(t,!0);let n=Z(t,"blockedDialog",3,!1),r=Z(t,"hiddenDialog",3,!1),a=Z(t,"onStartClose",3,()=>{}),s=Z(t,"onClose",3,()=>{}),o=Oi({onStartClose:a(),onClose:s()});fe(()=>{o.state==="close"&&t.shownDialog?o.state="opening":o.state==="open"&&!t.shownDialog&&o.handleStartClose(n())});var l=ke(),c=J(l);{var f=u=>{Ai(u,{get stateDialog(){return o.state},get blockedDialog(){return n()},get unBlockedBack(){return t.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return o.handleOpen},get onStartBack(){return t.onStartBack},onStartClose:()=>{o.handleStartClose(n())},get onClose(){return o.handleClose},children:(d,v)=>{var h=ke(),g=J(h);Ye(g,()=>t.children),E(d,h)},$$slots:{default:!0}})};N(c,u=>{o.state!=="close"&&u(f)})}E(e,l),G()}function ra(e,t){q(t,!0);let n=Z(t,"blockedDialog",3,!1),r=Z(t,"hiddenDialog",3,!1),a=Z(t,"isLastDialog",3,!1),s=Z(t,"onStartClose",3,()=>{}),o=Z(t,"onClose",3,()=>{});const l=$(()=>a()?void 0:t.onStartBack);le(()=>(pi(),()=>{mi()}));var c=ke(),f=J(c);{var u=v=>{Ti(v,{get shownDialog(){return t.shownDialog},get blocked(){return n()},get unBlockedBack(){return t.unBlockedBack},get hiddenDialog(){return r()},get children(){return t.children},get onStartClose(){return t.onStartBack},onClose:o()})},d=v=>{Mi(v,{get shownDialog(){return t.shownDialog},get blockedDialog(){return n()},get unBlockedBack(){return t.unBlockedBack},get hiddenDialog(){return r()},get children(){return t.children},get onStartBack(){return i(l)},onStartClose:s(),onClose:o()})};N(f,v=>{Rt()?v(u):v(d,!1)})}E(e,c),G()}let aa=B(!1),jn=B(!1);const ye=e=>{S(aa,e,!0),e||S(jn,!1)},Bi=()=>i(aa),Ze=e=>{S(jn,e,!0)},Ri=()=>i(jn);function nr(e,t){q(t,!0);let n=Z(t,"blocked",3,!1),r=Z(t,"isLastDialog",3,!1),a=Z(t,"onBack",3,()=>{});const s=$(()=>n()||t.hidden||Bi()),o=$(()=>Ri()&&!r());ra(e,{get shownDialog(){return t.shown},get blockedDialog(){return i(s)},get unBlockedBack(){return i(o)},get hiddenDialog(){return t.hidden},get isLastDialog(){return r()},onStartBack:()=>{(!i(s)||i(s)&&i(o))&&t.shown&&(qr(),a()())},onStartClose:()=>{(!i(s)||i(s)&&i(o))&&t.shown&&lt()},onClose:()=>{Gr()},children:(u,d)=>{var v=ke(),h=J(v);Ye(h,()=>t.children),E(u,v)},$$slots:{default:!0}}),G()}const sa=()=>crypto.randomUUID(),Ni="itemsStore",Fi=1,Te="items",rr="syncLog",pt="account";let te;window.addEventListener("unhandledrejection",e=>{alert("Error: "+e.reason.message)});const ji=()=>new Promise((e,t)=>{const n=indexedDB.open(Ni,Fi);n.addEventListener("upgradeneeded",()=>{const r=n.result;r.objectStoreNames.contains(Te)||r.createObjectStore(Te,{keyPath:"id"}),r.objectStoreNames.contains(pt)||r.createObjectStore(pt,{keyPath:"id"}),r.objectStoreNames.contains(rr)||r.createObjectStore(rr,{keyPath:"id"})}),n.addEventListener("success",()=>{e(),te=n.result,te.onversionchange=function(){te==null||te.close(),alert("app outdated, please reload the page")}}),n.addEventListener("blocked",()=>{t(),alert("app outdated, please reload the page")}),n.addEventListener("error",()=>{t(),console.error("Error",n.error)})}),ia=()=>new Promise((e,t)=>{const n=te==null?void 0:te.transaction(pt,"readonly"),r=n==null?void 0:n.objectStore(pt).get("default");r==null||r.addEventListener("success",()=>{var s;console.log(r);const a=(s=r==null?void 0:r.result)==null?void 0:s.account;e(a)}),r==null||r.addEventListener("error",()=>{t()})}),oa=e=>new Promise((t,n)=>{const r=te==null?void 0:te.transaction(pt,"readwrite"),a=r==null?void 0:r.objectStore(pt),s=a==null?void 0:a.put({id:"default",account:e});s==null||s.addEventListener("success",()=>{console.log("account inited"),t()}),s==null||s.addEventListener("error",()=>{n()})}),la=()=>new Promise((e,t)=>{const n=te==null?void 0:te.transaction(Te,"readonly"),r=n==null?void 0:n.objectStore(Te).getAll();r==null||r.addEventListener("success",()=>{const a=r.result;e(a)}),r==null||r.addEventListener("error",()=>{t()})}),Ui=async e=>new Promise((t,n)=>{const r=te==null?void 0:te.transaction(Te,"readwrite"),a=r==null?void 0:r.objectStore(Te),s=a==null?void 0:a.put({...e});s==null||s.addEventListener("success",()=>{t()}),s==null||s.addEventListener("error",()=>{n()})}),Hi=async e=>new Promise((t,n)=>{const r=te==null?void 0:te.transaction(Te,"readwrite"),a=r==null?void 0:r.objectStore(Te),s=a==null?void 0:a.delete(e);s==null||s.addEventListener("success",()=>{t()}),s==null||s.addEventListener("error",()=>{n()})}),Ki=()=>new Promise((e,t)=>{const n=te==null?void 0:te.transaction(Te,"readwrite"),r=n==null?void 0:n.objectStore(Te),a=r==null?void 0:r.clear();a==null||a.addEventListener("success",()=>{e()}),a==null||a.addEventListener("error",()=>{t()})}),Un=async()=>{await Ki()},zi=async e=>{const t=(await la()).reduce((s,o)=>(s[o.id]=o,s),{}),n={},r=te==null?void 0:te.transaction(Te,"readwrite"),a=r==null?void 0:r.objectStore(Te);e.forEach(s=>{t[s.id]?t[s.id].updatedAt<s.updatedAt&&(n[s.id]=s):n[s.id]=s}),await Promise.all(Object.values(n).map(s=>{const o=a==null?void 0:a.put(s);return new Promise((l,c)=>{o==null||o.addEventListener("success",()=>{l()}),o==null||o.addEventListener("error",()=>{c()})})}))},Vi=async e=>{const t=te==null?void 0:te.transaction(Te,"readwrite"),n=t==null?void 0:t.objectStore(Te);await Promise.all(Array.from({length:1e4},(r,a)=>{const s=[];for(let c=0;c<Math.random()*4;c++){const f=(Math.random()*100).toFixed();s.includes(f)||s.push(f)}const o={...e,url:`${e.url}${a}`,order:a,id:sa(),createdAt:Date.now(),updatedAt:Date.now(),title:s.join("#"),tags:s},l=n==null?void 0:n.put(o);return new Promise((c,f)=>{l==null||l.addEventListener("success",()=>{a%1e4===0&&console.log(`item ${a} done`),c()}),l==null||l.addEventListener("error",()=>{console.log(`item ${a} error`),f()})})}))};let X=B({initedDB:!1});const Wi=()=>{S(X,{...i(X),initedDB:!0})},ar=()=>{S(X,{...i(X),account:null})},Yi=async(e,t)=>{S(X,{...i(X),account:{credentialId:e,commonKey:t}})},Xi=()=>i(X),nn=async()=>{const e=await la(),t=new Map,n=[];e.forEach(r=>{n[r.order]=r,t.set(r.id,r)}),S(X,{...i(X),items:n,mapItems:t})},ca=async()=>{S(X,{...i(X),account:null,mapItems:new Map,items:[]})},ua=async e=>{S(X,{...i(X),account:{credentialId:e.credentialId,commonKey:e.commonKey},mapItems:new Map,items:[]})},mt=()=>i(X).items&&i(X).mapItems,da=()=>i(X).items||[],Ji=()=>i(X).mapItems||new Map,qi=e=>{var r;if(!i(X).items||!i(X).mapItems)throw new Error("Items store is not initialized");const t=(((r=i(X).items.at(-1))==null?void 0:r.order)||i(X).items.length)+1,n={...e,order:t};return i(X).items.push(n),i(X).mapItems.set(n.id,n),S(X,{...i(X)}),t},fa=async e=>{if(!i(X).items||!i(X).mapItems)throw new Error("Items store is not initialized");i(X).items[e.order]=e,i(X).mapItems.set(e.id,e),S(X,{...i(X)})},Gi=async e=>{await Vi(e),await nn()},va=async e=>{if(!i(X).items||!i(X).mapItems)throw new Error("Items store is not initialized");const t=i(X).mapItems.get(e);i(X).mapItems.delete(e),i(X).items[(t==null?void 0:t.order)||0]=void 0,S(X,{...i(X)})},ha=async()=>{S(X,{...i(X),initedDB:!0,items:[],mapItems:new Map})};let ga=B({});const pa=()=>i(ga),Zi=e=>{S(ga,e)};var Qi=O('<input class="svelte-6l2oy0"/>');function yn(e,t){q(t,!0);let n=Z(t,"value",15,"");var r=Qi();oe(()=>de(r,"placeholder",t.placeholder)),je("focus",r,function(...a){var s;(s=t.onFocus)==null||s.apply(this,a)}),Bn(r,n),E(e,r),G()}function $i(e,t){q(t,!0);let n=Z(t,"dialog",7);const r=3,a=50,s=5,o=.6,l=.3,c=.35,f=.95;let u=0,d=0,v=0,h=!1,g=!1,_=0,y=0,T=0;const m=()=>{u=0,d=0,h=!1,g=!1,_=0,y=0,T=0,v=0,w!==null&&(cancelAnimationFrame(w),w=null),p=null};let w=null,p=null;const k=A=>{if(!n()){console.warn("Touch start: No dialog element");return}if(t.sidebarState!=="opened"&&t.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${t.sidebarState}`);return}u=A.touches[0].clientX,d=A.touches[0].clientY,v=performance.now(),h=!0,g=!1},L=A=>t.sidebarState==="closed"&&A>0||t.sidebarState==="closeSwiping"&&A>0||t.sidebarState==="opened"&&A<0||t.sidebarState==="openSwiping"&&A<0,C=A=>{if(n()){if(n().style.setProperty("--transition-timing","0s"),!n().open&&t.sidebarState==="closed")try{n().showModal(),n().offsetWidth}catch(R){console.error("Error opening dialog:",R);return}t.onSwipe();try{const R=window.getComputedStyle(n()),x=R.transform||R.webkitTransform||"";if(y=n().offsetWidth,t.sidebarState==="closeSwiping"||t.sidebarState==="closed"?_=-y:(t.sidebarState==="openSwiping"||t.sidebarState==="opened")&&(_=0),x&&x!=="none")try{_=new DOMMatrix(x).m41}catch{console.warn("Could not parse transform matrix, using default position")}g=!0}catch(R){console.error("Error during swipe initialization:",R),m()}}},M=()=>{if(!n())return;const R=(Math.abs(_+T*y/100)-y*.3-20)/y;n().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.25*(1-R)})`)},K=()=>{if(w=null,!p||!h||!n()||Nn())return;const{x:A,y:R}=p;p=null;const x=A-u,U=R-d,Y=Math.abs(x)>Math.abs(U),P=Math.abs(x)>r;if(!g)if(Y&&P&&L(x))try{C(x)}catch(ne){console.error("Error initializing swipe:",ne),m();return}else return;if(!L(x))return;n().style.setProperty("--transition-timing","0s");let I=_+x*f;const H=-y;I=Math.max(H,Math.min(0,I)),n().style.transform=`translate3d(${I}px, 0, 0)`,T=(I-_)/y*100,M()},j=A=>{if(!h)return;const R=A.touches[0].clientX,x=A.touches[0].clientY;p={x:R,y:x},w===null&&(w=requestAnimationFrame(K)),g&&Math.abs(R-u)>Math.abs(x-d)&&A.preventDefault()},z=A=>{const R=Math.abs(A);if(R>=o)return s;if(R>=l){const x=(R-l)/(o-l);return a-x*(a-s)}else return a},V=(A,R)=>{if(Math.abs(A)>=o)return c*.5;const U=Math.abs(T)/100;return R?c*Math.max(.5,1-U):c*Math.max(.5,U)},W=A=>{var I,H;if(w!==null&&(cancelAnimationFrame(w),w=null),p=null,!h||!n()){m();return}if(!g){m();return}let R=0;if((I=A==null?void 0:A.changedTouches)!=null&&I[0]){const Q=A.changedTouches[0].clientX,ve=performance.now()-v;ve>0&&(R=(Q-u)/ve)}const x=z(R);let U=null;t.sidebarState==="closeSwiping"?U=Math.abs(T)>x||R>l?"open":"close":t.sidebarState==="openSwiping"&&(U=Math.abs(T)>x||R<-l?"close":"open");const Y=t.sidebarState==="closeSwiping"&&U==="open"||t.sidebarState==="openSwiping"&&U==="close",P=V(R,Y);n().style.setProperty("--transition-timing",`${P}s`),n().offsetWidth,n().style.transform="",U==="open"?t.onOpen():U==="close"&&t.onClose(),(H=n())==null||H.style.removeProperty("--backdrop-bg"),m()};le(()=>(document.addEventListener("touchstart",k,{passive:!0}),document.addEventListener("touchmove",j,{passive:!1}),document.addEventListener("touchend",W,{passive:!0}),document.addEventListener("touchcancel",W,{passive:!0}),()=>{document.removeEventListener("touchstart",k),document.removeEventListener("touchmove",j),document.removeEventListener("touchend",W),document.removeEventListener("touchcancel",W),w!==null&&cancelAnimationFrame(w)})),G()}var eo=O('<dialog><div class="dialogInner svelte-1in1s0g"><!></div></dialog> <!> <!>',1);function to(e,t){q(t,!0);let n=350,r=B(null),a=B(null),s=$(Yr);fe(()=>{Zr().length>0&&Je({type:"close"})});const o=()=>{t.blocked||Je({type:"close"})},l=()=>{t.blocked||Je({type:"open"})},c=()=>{Je({type:"opened"})},f=()=>{Je({type:"closed"})},u=()=>{Je({type:"swipe"})},d=C=>{C.preventDefault(),o()};le(()=>{var C,M;return(C=i(r))==null||C.addEventListener("close",f),(M=i(r))==null||M.addEventListener("cancel",d),()=>{var K,j;(K=i(r))==null||K.removeEventListener("close",f),(j=i(r))==null||j.removeEventListener("cancel",d)}});const v=()=>{var C,M,K;(C=i(r))==null||C.style.removeProperty("--transition-timing"),(M=i(r))==null||M.style.removeProperty("transform"),(K=i(r))==null||K.style.removeProperty("--backdrop-bg")},h=$(ta);fe(()=>{var C,M,K;if(i(s),!!i(r))switch(i(s).type){case"closeSwiping":{const j=setTimeout(()=>{o()},3e3);return()=>{clearTimeout(j)}}case"openSwiping":{const j=setTimeout(()=>{l()},3e3);return()=>{clearTimeout(j)}}case"opening":{i(r).open||i(r).showModal(),i(r).getBoundingClientRect();const j=setTimeout(()=>{v()},n+1),z=()=>{clearTimeout(j),v()};return(C=i(r))==null||C.addEventListener("transitionend",z,{once:!0}),c(),()=>{var V;(V=i(r))==null||V.removeEventListener("transitionend",z)}}case"closing":{const j=setTimeout(()=>{i(s).type==="closing"&&f()},n+1),z=()=>{clearTimeout(j),f()};return(M=i(r))==null||M.addEventListener("transitionend",z,{once:!0}),()=>{var V;(V=i(r))==null||V.removeEventListener("transitionend",z)}}case"closed":(K=i(r))==null||K.close(),v();break;case"opened":v();break}});var g=eo(),_=J(g),y=b(_),T=b(y);{var m=C=>{var M=ke(),K=J(M);Ye(K,()=>t.children),E(C,M)};N(T,C=>{i(s).type!=="closed"&&C(m)})}me(y,C=>S(a,C),()=>i(a)),me(_,C=>S(r,C),()=>i(r));var w=D(_,2);{var p=C=>{na(C,{get dialog(){return i(r)},get dialogInner(){return i(a)},onClose:o})};N(w,C=>{i(s).type==="opened"&&!t.blocked&&C(p)})}var k=D(w,2);{var L=C=>{$i(C,{onClose:o,onOpen:l,onSwipe:u,get sidebarState(){return i(s).type},get dialog(){return i(r)}})};N(k,C=>{(!i(h)&&i(s).type==="closed"||i(s).type==="opened"||i(s).type==="openSwiping"||i(s).type==="closeSwiping")&&!t.blocked&&C(L)})}oe(()=>ae(_,1,se([{open:i(s).type==="opened",hidden:t.blocked,isAnimationOn:he.working&&(!he.isSwiping||!t.blocked)}]),"svelte-1in1s0g")),E(e,g),G()}var no=O('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>');function tt(e,t){let n=$(()=>t.style==="selected"?"45deg":"0deg");var r=no();r.__click=function(...o){var l;(l=t.onClick)==null||l.apply(this,o)};var a=b(r),s=D(a);we(s,()=>({"--size":"20px","--rotate":i(n)})),pe(s.lastChild,{name:"plus"}),oe(()=>{de(r,"type",t.type),ae(r,1,se([{selectedTag:t.style==="selected"}]),"svelte-4jwrjv"),ot(a,`${t.title??""} `)}),E(e,r)}Se(["click"]);const ro=e=>{e.preventDefault(),Re("settings")};var ao=O("<div></div>"),so=O('<div class="sidebarFixed svelte-ri1xjn"><div class="nav svelte-ri1xjn"><!> <a class="link svelte-ri1xjn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a></div> <div class="searchWrapper svelte-ri1xjn"><!></div> <!></div> <div></div>',1),io=O("<div></div>"),oo=O('<div class="sidebar svelte-ri1xjn"><div class="sidebarFixed svelte-ri1xjn"><div class="searchWrapper svelte-ri1xjn"><!></div> <!></div> <div class="tags svelte-ri1xjn"></div></div>');function lo(e,t){q(t,!0);let n=B(null),r=B(""),a=$(()=>{var _;return((_=new URLSearchParams(F.search).get("selectedTags"))==null?void 0:_.split(","))||[]});const s=()=>{const _=Ve();_.includes("settings")||_.push("settings");const y=new URLSearchParams(F.search);return y.set("stackPages",_.join(",")),`${F.pathname}?${y}`},o=_=>{const y=new URLSearchParams(F.search);y.set("selectedTags",[...i(a),_].join(",")),gt(`${F.pathname}${y.size>0?`?${y.toString()}`:""}`),S(r,"")},l=_=>{const y=new URLSearchParams(F.search),T=i(a).filter(m=>m!==_);T.length===0?y.delete("selectedTags"):y.set("selectedTags",T.join(",")),gt(`${F.pathname}${y.size>0?`?${y.toString()}`:""}`)};let c=$(()=>mt()?Object.values(pa()).filter(_=>!i(a).some(y=>_.name===y)):[]),f=$(s),u=$(()=>Ve().length>0||gi());var d=ke(),v=J(d);{var h=_=>{to(_,{get blocked(){return i(u)},children:(y,T)=>{var m=so(),w=J(m),p=b(w),k=b(p);Xr(k,{});var L=D(k,2);L.__click=[ro];var C=b(L);we(C,()=>({"--size":"20px"})),pe(C.lastChild,{name:"settings"});var M=D(p,2),K=b(M);yn(K,{placeholder:"Search tag",get value(){return i(r)},set value(W){S(r,W,!0)}});var j=D(M,2);{var z=W=>{var A=ao();ae(A,1,se(["tags","selectedTags"]),"svelte-ri1xjn"),Ue(A,20,()=>i(a),R=>R,(R,x)=>{tt(R,{get title(){return x},onClick:()=>l(x),style:"selected"})}),me(A,R=>S(n,R),()=>i(n)),E(W,A)};N(j,W=>{i(a).length>0&&W(z)})}var V=D(w,2);ae(V,1,se(["tags","tagsWrapper"]),"svelte-ri1xjn"),Ue(V,21,()=>i(c),W=>W.name,(W,A)=>{var R=ke(),x=J(R);{var U=Y=>{tt(Y,{get title(){return i(A).name},onClick:()=>o(i(A).name)})};N(x,Y=>{(i(r)===""||i(A).name.toLowerCase().indexOf(i(r).toLowerCase())!==-1)&&Y(U)})}E(W,R)}),oe(W=>{de(L,"href",i(f)),xt(V,`min-height: height: calc(100dvh - 190px - ${W??""}px);`)},[()=>i(n)?i(n).getBoundingClientRect().height:0]),E(y,m)},$$slots:{default:!0}})},g=_=>{var y=oo(),T=b(y),m=b(T),w=b(m);yn(w,{placeholder:"Search tag",get value(){return i(r)},set value(C){S(r,C,!0)}});var p=D(m,2);{var k=C=>{var M=io();ae(M,1,se(["tags","selectedTags"]),"svelte-ri1xjn"),Ue(M,20,()=>i(a),K=>K,(K,j)=>{tt(K,{get title(){return j},onClick:()=>l(j),style:"selected"})}),E(C,M)};N(p,C=>{i(a).length>0&&C(k)})}var L=D(T,2);Ue(L,21,()=>i(c),C=>C.name,(C,M)=>{var K=ke(),j=J(K);{var z=V=>{tt(V,{get title(){return i(M).name},onClick:()=>o(i(M).name)})};N(j,V=>{(i(r)===""||i(M).name.toLowerCase().indexOf(i(r).toLowerCase())!==-1)&&V(z)})}E(C,K)}),E(_,y)};N(v,_=>{Rt()?_(h):_(g,!1)})}E(e,d),G()}Se(["click"]);const co=async e=>{const t=await crypto.subtle.importKey("raw",e.serverKey,{name:"HKDF"},!1,["deriveKey"]),n=await crypto.subtle.deriveKey({name:"HKDF",salt:e.id,info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},t,{name:"AES-GCM",length:256},!1,["encrypt"]),r=crypto.getRandomValues(new Uint8Array(12)),a=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,e.clientKey);return{iv:r,encryptedClientKey:a}},uo=async e=>{const t=await crypto.subtle.importKey("raw",e.serverKey,{name:"HKDF"},!1,["deriveKey"]),n=await crypto.subtle.deriveKey({name:"HKDF",salt:e.id,info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},t,{name:"AES-GCM",length:256},!1,["decrypt"]),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:e.iv},n,e.encryptedClientKey);return new Uint8Array(r)};function fo(e,t){const n=new ArrayBuffer(e.length+t.length),r=new Uint8Array(n);return r.set(e,0),r.set(t,e.length),n}const ma=async e=>{const t=await crypto.subtle.importKey("raw",fo(e.clientKey,e.serverKey),{name:"HKDF"},!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"HKDF",salt:e.id,info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])};function Ae(e){const t=String.fromCharCode(...new Uint8Array(e));return window.btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Hn(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");const n=t.length%4;return n&&(t+="=".repeat(4-n)),t}function Kn(e){try{const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}catch(t){throw console.error("Error decoding base64:",t,"Input:",e),t}}function qe(e){const t=Hn(e);return Kn(t)}const ct=new BroadcastChannel("app"),_a=async e=>{const n=await(await fetch("/api/serverKey",{method:"POST"})).json(),r=await uo({id:qe(e.credentialId),iv:qe(e.iv),encryptedClientKey:qe(e.encryptedClientKey),serverKey:qe(n.serverKey)}),a=e.credentialId,s=await ma({id:new Uint8Array(qe(e.credentialId)),clientKey:r,serverKey:new Uint8Array(qe(e.iv))});return{credentialId:a,commonKey:s}};ct.addEventListener("message",async e=>{if(console.log("Received message from BroadcastChannel:",e.data),e.data&&typeof e.data=="string"){const t=JSON.parse(e.data);if(t.type==="addItem"){const n=t.item;qi(n)}else if(t.type==="updateItem"){const n=t.item;fa(n)}else if(t.type==="deleteItem"){const n=t.itemId;va(n)}else if(t.type==="clearState")ha();else if(t.type==="reloadItems")nn();else if(t.type==="initLocalAccount")ca(),mn(),gt("/");else if(t.type==="initAccount"){const n=await ia();if(n){const{credentialId:r,commonKey:a}=await _a(n);ua({credentialId:r,commonKey:a}),mn(),gt("/")}}}});ji().then(async()=>{Wi();const e=await ia();if(e===void 0)Re("start");else{if(oi("start")&&(mn(),gt("/")),e)try{const{credentialId:t,commonKey:n}=await _a(e);Yi(t,n)}catch{ar()}else ar();await nn()}}).catch(()=>{console.error("failed to init db")});const vo=async e=>{const t={...e,updatedAt:Date.now()};ct.postMessage(JSON.stringify({type:"updateItem",item:t})),fa(t),await Ui(t)},ho=async e=>{ct.postMessage(JSON.stringify({type:"deleteItem",itemId:e})),va(e),await Hi(e)},go=async()=>{ct.postMessage(JSON.stringify({type:"clearState"})),ha(),await Un()},po=async(e="items-export.json")=>{const t=JSON.stringify({items:Xi().items}),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=e,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(r)},0)},sr=async e=>{await zi(e),ct.postMessage(JSON.stringify({type:"reloadItems"})),await nn()},mo=async()=>{await Un(),await oa(null),ca(),ct.postMessage(JSON.stringify({type:"initLocalAccount"}))},ya=async e=>{await Un();const{iv:t,encryptedClientKey:n}=await co({id:e.credentialId,clientKey:e.clientKey,serverKey:e.serverKey});await oa({credentialId:Ae(e.credentialId.buffer),encryptedClientKey:Ae(n),iv:Ae(t.buffer)});const r=await ma({id:e.credentialId,clientKey:e.clientKey,serverKey:e.serverKey}),a=Ae(e.credentialId.buffer);ua({credentialId:a,commonKey:r}),ct.postMessage(JSON.stringify({type:"initAccount"}))};var _o=O('<div class="input-container svelte-hz572l"><input/> <div class="error-message svelte-hz572l"><!></div></div>');function un(e,t){q(t,!0);let n=Z(t,"value",15,""),r=Z(t,"error",3,"");var a=_o(),s=b(a);s.__input=function(...u){var d;(d=t.onInput)==null||d.apply(this,u)};let o;var l=D(s,2),c=b(l);{var f=u=>{var d=ie();oe(()=>ot(d,r())),E(u,d)};N(c,u=>{r()&&u(f)})}oe(u=>{de(s,"placeholder",t.placeholder),o=ae(s,1,"svelte-hz572l",null,o,u)},[()=>({error:!!r()})]),je("blur",s,function(...u){var d;(d=t.onBlur)==null||d.apply(this,u)}),je("focus",s,function(...u){var d;(d=t.onFocus)==null||d.apply(this,u)}),Bn(s,n),E(e,a),G()}Se(["input"]);var yo=O("<div></div>"),wo=O('<form class="svelte-wqwsb3"><!> <!> <textarea placeholder="notes" class="svelte-wqwsb3"></textarea> <div class="boxtags"><div class="sidebarFixed"><!></div> <div class="tags svelte-wqwsb3"><!> <!></div> <div class="searchWrapper svelte-wqwsb3"><!></div></div> <button class="buttonSubmit svelte-wqwsb3" type="submit"> </button></form>');function wa(e,t){q(t,!0);let n=Z(t,"initialTitle",3,""),r=Z(t,"initialUrl",3,""),a=Z(t,"initialDescription",3,""),s=Z(t,"initialTags",19,()=>[]),o=Z(t,"mode",3,"add"),l=B(""),c=B(ce(n())),f=B(ce(r())),u=B(ce(a())),d=B(ce(s().filter(I=>I!=="inbox")));const v=I=>{i(d).includes(I)||S(d,[...i(d),I],!0)},h=I=>{const H=i(d).filter(Q=>Q!==I);H.length===0?S(d,[],!0):S(d,H,!0)};let g=$(()=>mt()?[...da().reduce((I,H)=>(H==null||H.tags.forEach(Q=>{I.has(Q)||I.add(Q)}),I),new Set)]:[]),_=$(()=>mt()?i(g).filter(I=>!i(d).some(H=>I===H)&&I!=="inbox"):[]),y=$(()=>i(_).find(I=>I.toLowerCase()===i(l).toLowerCase())||i(d).includes(i(l))),T=$(()=>i(_).filter(I=>i(l)===""?!0:I.toLowerCase().indexOf(i(l).toLowerCase())!==-1).slice(0,i(y)||i(l)===""?3:2));const m=I=>{I.preventDefault(),t.onSubmit({title:i(c).trim().slice(0,256)||"unkwown",url:i(f).trim().slice(0,2048),description:i(u).trim().slice(0,2048),tags:i(d).length>0?i(d):["inbox"]})};var w=wo(),p=b(w);un(p,{placeholder:"url",get value(){return i(f)},set value(I){S(f,I,!0)}});var k=D(p,2);un(k,{placeholder:"title",get value(){return i(c)},set value(I){S(c,I,!0)}});var L=D(k,2),C=D(L,2),M=b(C),K=b(M);{var j=I=>{var H=yo();ae(H,1,se(["tags","selectedTags"]),"svelte-wqwsb3"),Ue(H,20,()=>i(d),Q=>Q,(Q,ne)=>{tt(Q,{get title(){return ne},onClick:()=>h(ne),type:"button",style:"selected"})}),E(I,H)};N(K,I=>{i(d).length>0&&I(j)})}var z=D(M,2),V=b(z);{var W=I=>{var H=ke(),Q=J(H);Ue(Q,16,()=>i(T),ne=>ne,(ne,ve)=>{tt(ne,{get title(){return ve},onClick:()=>v(ve)})}),E(I,H)};N(V,I=>{i(l)!==""&&I(W)})}var A=D(V,2);{var R=I=>{tt(I,{get title(){return i(l)},onClick:()=>{v(i(l)),S(l,"")}})};N(A,I=>{!i(y)&&i(l)!==""&&I(R)})}var x=D(z,2),U=b(x);un(U,{placeholder:"search tag",get value(){return i(l)},set value(I){S(l,I,!0)}});var Y=D(C,2),P=b(Y);oe(()=>ot(P,o()==="add"?"add":"edit")),je("submit",w,m),Bn(L,()=>i(u),I=>S(u,I)),E(e,w),G()}function So(e,t){q(t,!0);let n=B(!0);const r=()=>{t.onClose()},a=()=>{S(n,!1)},s=({title:o,url:l,description:c,tags:f})=>{vo({...t.item,title:o,url:l,description:c,tags:f.map(u=>u.trim())}),a()};ra(e,{get shownDialog(){return i(n)},onClose:r,children:(o,l)=>{wa(o,{get initialTitle(){return t.item.title},get initialUrl(){return t.item.url},get initialDescription(){return t.item.description},get initialTags(){return t.item.tags},onSubmit:s,mode:"edit"})},$$slots:{default:!0}}),G()}const bo=(e,t,n)=>{const r=pa();t.item.tags.forEach(a=>{if(i(n).includes(a)&&r[a].connections===1){const s=new URLSearchParams(F.search),o=i(n).filter(l=>l!==a);o.length===0?s.delete("selectedTags"):s.set("selectedTags",o.join(",")),ii(`${F.pathname}${s.size>0?`?${s.toString()}`:""}`)}}),ho(t.item.id)},Eo=(e,t)=>{S(t,!0)};var ko=O('<div><button class="menuButton svelte-1216vv3">Edit</button> <button class="menuButton svelte-1216vv3">Delete</button></div> <!>',1);function To(e,t){q(t,!0);let n=Z(t,"menu",15),r=Z(t,"shownMenu",15),a=B(!1),s=$(()=>{var g;return((g=new URLSearchParams(F.search).get("selectedTags"))==null?void 0:g.split(","))||[]});const o=g=>{var _;g.target!==n()&&!((_=n())!=null&&_.contains(g.target))&&r(!1)};le(()=>(document.addEventListener("focusin",o),()=>{document.removeEventListener("focusin",o)})),fe(()=>{r()&&n()?(n().style.setProperty("display","flex"),n().getBoundingClientRect(),n().style.setProperty("opacity","1"),n().style.setProperty("transform","scale(1)")):n()&&(n().style.removeProperty("opacity"),n().style.removeProperty("transform"),n().getBoundingClientRect(),n().addEventListener("transitionend",()=>{!r()&&n()&&n().style.removeProperty("display")},{once:!0}))});const l=()=>{S(a,!1)};var c=ko(),f=J(c),u=b(f);u.__click=[Eo,a];var d=D(u,2);d.__click=[bo,t,s],me(f,g=>n(g),()=>n());var v=D(f,2);{var h=g=>{So(g,{get item(){return t.item},onClose:l})};N(v,g=>{i(a)&&g(h)})}oe(()=>ae(f,1,se(["itemMenu",{showMenuUp:t.showMenuUp}]),"svelte-1216vv3")),E(e,c),G()}Se(["click"]);const Co=(e,t)=>{S(t,!i(t))},Do=(e,t)=>{navigator.clipboard.writeText(t.item.url),qs("Link copied to clipboard")},Io=(e,t)=>{S(t,!0)},Lo=(e,t)=>{S(t,!1)};var Po=O('<li class="item svelte-16a4wv7"><img loading="lazy" class="itemIcon" height="16" width="16" alt="icon"/> <a class="itemLink svelte-16a4wv7" target="_blank" rel="noopener noreferrer"> </a> <div class="spacer svelte-16a4wv7"></div> <div><button class="button svelte-16a4wv7"><!> <!></button> <button><!> <!></button> <!></div></li>');function xo(e,t){q(t,!0);let n=B(!1),r=B(!1),a=B(null),s=null;const o=p=>{var k;p.target!==s&&p.target!==i(a)&&!((k=i(a))!=null&&k.contains(p.target))&&S(r,!1)};le(()=>(document.addEventListener("click",o),()=>{document.removeEventListener("click",o)}));const l=p=>{try{return`https://external-content.duckduckgo.com/ip3/${new URL(p).host}.ico`}catch{return""}};var c=Po();c.__focusin=[Io,n],c.__focusout=[Lo,n];var f=b(c),u=D(f,2),d=b(u),v=D(u,4),h=b(v);h.__click=[Do,t];var g=b(h);pe(g,{name:"copy"});var _=D(g,2);st(_,{children:(p,k)=>{var L=ie("copy link");E(p,L)}});var y=D(h,2);y.__click=[Co,r],ae(y,1,se(["button","buttonMenu"]),"svelte-16a4wv7");var T=b(y);pe(T,{name:"menu"});var m=D(T,2);st(m,{children:(p,k)=>{var L=ie("show menu");E(p,L)}}),me(y,p=>S(a,p),()=>i(a));var w=D(y,2);To(w,{menu:s,get item(){return t.item},get showMenuUp(){return t.showMenuUp},get shownMenu(){return i(r)},set shownMenu(p){S(r,p,!0)}}),oe(p=>{de(f,"src",p),de(u,"tabindex",t.focusHidden?-1:0),de(u,"href",t.item.url),ot(d,t.item.title),ae(v,1,se(["itemMenuWrapper",{itemMenuWrapperActive:i(n)}]),"svelte-16a4wv7"),de(h,"tabindex",t.focusHidden?-1:0),de(y,"tabindex",t.focusHidden?-1:0)},[()=>l(t.item.url)]),E(e,c),G()}Se(["focusin","focusout","click"]);const Et=ce({ref:null}),Ao=(e,t)=>{i(t)&&i(t).scrollTo({top:0,behavior:"smooth"})};var Oo=O('<div class="emptyMessage svelte-146z9is">No items found</div>'),Mo=O('<div class="wrapperButtonTop svelte-146z9is"><button class="buttonTop svelte-146z9is"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button></div>'),Bo=O('<div class="searchWrapper svelte-146z9is"><!></div> <div class="wrapperFeed svelte-146z9is"><div class="wrapperContainer svelte-146z9is"><div class="feed svelte-146z9is"><ul class="svelte-146z9is"></ul> <!></div></div></div> <!>',1);function Ro(e,t){q(t,!0);let n=B(null),r=50,a=B(0),s=B(0),o=B(0),l=B(ce([])),c=B(""),f=$(()=>Rt()?i(n):Et.ref),u=null,d=null,v=B(!1),h=0;const g=$(ai);fe(()=>{var P;i(c),i(g),(P=i(f))==null||P.scrollTo(0,0)});const _=()=>{if(i(f)){const P=i(f).scrollTop||0;P===0?S(v,!1):!i(v)&&h>P?S(v,!0):i(v)&&h<P&&S(v,!1),h=P}},y=()=>{ea(),u||(u=requestAnimationFrame(()=>{var H;_();const P=((H=i(f))==null?void 0:H.scrollTop)||0;S(o,P,!0);const I=Math.ceil(i(a)/r);S(s,Math.floor(P/(r*I))*(r*I)),u=null}))},T=()=>{d||(d=requestAnimationFrame(()=>{var H;_(),S(a,window.innerHeight-180||0,!0);const P=((H=i(f))==null?void 0:H.scrollTop)||0;S(o,P,!0);const I=Math.ceil(i(a)/r);S(s,Math.floor(P/(r*I))*(r*I)),d=null}))};le(()=>{T(),y()}),fe(()=>{var P;return(P=i(f))==null||P.addEventListener("scroll",y),window.addEventListener("resize",T),()=>{var I;(I=i(f))==null||I.removeEventListener("scroll",y),window.removeEventListener("resize",T)}}),fe(()=>{const P=da(),I=[],H={};for(let Q=P.length-1;Q>=0;Q--){const ne=P[Q];if(ne&&!(i(g).length&&i(g).some(ve=>!ne.tags.includes(ve)))&&!(i(c)&&!(ne.title.toLowerCase().includes(i(c).toLowerCase())||ne.url.toLowerCase().includes(i(c).toLowerCase())||ne.description.toLowerCase().includes(i(c).toLowerCase())))){if(ne.tags)for(const ve of ne.tags)H[ve]?H[ve].connections++:H[ve]={name:ve,connections:1};I.push(ne)}}Zi(H),S(l,I,!0)});const m=$(()=>i(l).length*r);let p=$(()=>{const P=Math.ceil(i(a)/r);let I=Math.floor(i(s)/r);return I=I-Math.min(I,P),i(l).slice(I,I+P*3)}),k=$(()=>r*Math.ceil(i(a)/r));const L=$(()=>i(s)-Math.min(i(s),i(k))),C=()=>{i(f)&&i(f).scrollTo({top:0,behavior:"smooth"})};var M=Bo(),K=J(M),j=b(K);yn(j,{onFocus:C,placeholder:"Search",get value(){return i(c)},set value(P){S(c,P,!0)}});var z=D(K,2),V=b(z),W=b(V),A=b(W);Ue(A,23,()=>i(p),P=>P.id,(P,I,H)=>{const Q=$(()=>i(H)*r<i(o)-i(L)-r/2||i(H)*r>i(o)-i(L)+Math.floor(i(a)/r)*r),ne=$(()=>(i(H)+3)*r<i(o)-i(L)-r/2||(i(H)+3)*r>i(o)-i(L)+Math.floor(i(a)/r)*r);xo(P,{get focusHidden(){return i(Q)},get showMenuUp(){return i(ne)},get item(){return i(I)}})});var R=D(A,2);{var x=P=>{var I=Oo();E(P,I)};N(R,P=>{i(p).length===0&&mt()&&P(x)})}me(V,P=>S(n,P),()=>i(n));var U=D(z,2);{var Y=P=>{var I=Mo(),H=b(I);H.__click=[Ao,f];var Q=b(H);st(Q,{children:(ve,rn)=>{var Ft=ie("top");E(ve,Ft)}});var ne=D(Q,2);we(ne,()=>({"--size":"22px"})),pe(ne.lastChild,{name:"up"}),E(P,I)};N(U,P=>{i(v)&&P(Y)})}oe(P=>{xt(W,`min-height: ${P??""}px`),xt(A,`transform: translateY(${i(L)??""}px);`)},[()=>Math.max((i(m)>i(a),i(m)),0)]),E(e,M),G()}Se(["click"]);var No=O('<!> <div class="content svelte-cu0ar8"><!></div>',1);function Fo(e){var t=No(),n=J(t);lo(n,{});var r=D(n,2),a=b(r);Ro(a,{}),E(e,t)}var $e=(e=>(e.Light="light",e.System="system",e.Dark="dark",e))($e||{});let Sa=B(ce(localStorage.getItem("colorScheme")||"system"));const jo=e=>{localStorage.setItem("colorScheme",e),e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.dataset.colorScheme="dark":document.documentElement.dataset.colorScheme="light":document.documentElement.dataset.colorScheme=e,S(Sa,e,!0)},Uo=()=>i(Sa);var Ho=O('<div class="wrapper svelte-f3jwyy"><fieldset class="switcher svelte-f3jwyy"><legend class="vh svelte-f3jwyy">Color Scheme</legend> <input id="light" type="radio" aria-label="Light"/> <label for="light" title="Light" aria-label="Light"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="system" type="radio" aria-label="System"/> <label for="system" title="System" aria-label="System"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="dark" type="radio" aria-label="Dark"/> <label for="dark" title="Dark" aria-label="Dark"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <div class="wrapSwitcherStatus svelte-f3jwyy"><div class="switcherStatus svelte-f3jwyy"></div></div></fieldset></div>');function Ko(e,t){q(t,!0);const n=$(Uo),r=y=>{const T=y.target.value;jo(T)},a="color-scheme-switcher";var s=Ho(),o=b(s),l=D(b(o),2);ae(l,1,se(["vh","input"]),"svelte-f3jwyy"),de(l,"name",a),l.__change=r;var c=D(l,2);ae(c,1,se(["switcherButton","light"]),"svelte-f3jwyy");var f=b(c);we(f,()=>({"--size":"20px"})),pe(f.lastChild,{name:"sun"});var u=D(c,2);ae(u,1,se(["vh","input"]),"svelte-f3jwyy"),de(u,"name",a),u.__change=r;var d=D(u,2);ae(d,1,se(["switcherButton","system"]),"svelte-f3jwyy");var v=b(d);we(v,()=>({"--size":"14px"})),pe(v.lastChild,{name:"a"});var h=D(d,2);ae(h,1,se(["vh","input"]),"svelte-f3jwyy"),de(h,"name",a),h.__change=r;var g=D(h,2);ae(g,1,se(["switcherButton","dark"]),"svelte-f3jwyy");var _=b(g);return we(_,()=>({"--size":"20px"})),pe(_.lastChild,{name:"moon"}),oe(()=>{Ht(l,$e.Light),Kt(l,i(n)===$e.Light),Ht(u,$e.System),Kt(u,i(n)===$e.System),Ht(h,$e.Dark),Kt(h,i(n)===$e.Dark)}),E(e,s),G({handleChange:r})}Se(["change"]);const zo=()=>{Re("importItems")},Vo=()=>{Re("exportItems")},Wo=()=>{Re("clearStore")};var Yo=O('<div class="version svelte-1cryup1"><span> </span></div>'),Xo=O('<div class="svelte-1cryup1"><!> <ul class="svelte-1cryup1"><li class="svelte-1cryup1"><button class="button svelte-1cryup1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-1cryup1">import items</span></button></li> <li class="svelte-1cryup1"><button class="button svelte-1cryup1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-1cryup1">export items</span></button></li> <li class="svelte-1cryup1"><button class="button svelte-1cryup1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-1cryup1">clear store</span></button></li></ul> <!></div>');function Jo(e,t){q(t,!0);let n=B("");le(()=>{const T=new AbortController;return fetch("/build-metadata.json",{signal:T.signal}).then(m=>m.json()).then(m=>{S(n,`${m.buildHash}`)}),()=>{T.abort()}});var r=Xo(),a=b(r);Ko(a,{});var s=D(a,2),o=b(s),l=b(o);l.__click=[zo];var c=b(l);we(c,()=>({"--size":"20px"})),pe(c.lastChild,{name:"import"});var f=D(o,2),u=b(f);u.__click=[Vo];var d=b(u);we(d,()=>({"--size":"20px"})),pe(d.lastChild,{name:"export"});var v=D(f,2),h=b(v);h.__click=[Wo];var g=b(h);we(g,()=>({"--size":"20px"})),pe(g.lastChild,{name:"trash"});var _=D(s,2);{var y=T=>{var m=Yo(),w=b(m),p=b(w);oe(k=>ot(p,`version: 0.0.1 build_date: "${k??""}" build_hash:
				${i(n)??""}`),[()=>new Date(1752404545041).toISOString().replaceAll("T"," ").replace(/\..*/,"")]),E(T,m)};N(_,T=>{i(n)&&T(y)})}E(e,r),G()}Se(["click"]);function qo(e,t){q(t,!1);const n=()=>{qr()},r=({title:a,url:s,description:o,tags:l})=>{Gi({title:a,url:s,description:o,tags:l.map(c=>c.trim())}),n()};Bt(),wa(e,{onSubmit:r}),G()}var Go=O('<button type="button"><!></button>');function Ee(e,t){let n=Z(t,"type",3,"standard"),r=Z(t,"fullWidth",3,!1);var a=Go();a.__click=function(...o){var l;(l=t.onClick)==null||l.apply(this,o)};var s=b(a);Ye(s,()=>t.children),oe(()=>ae(a,1,se(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:r()}]),"svelte-h0mt7s")),E(e,a)}Se(["click"]);var Zo=O('<div class="loader svelte-1ygr46m"></div>');function Nt(e){var t=Zo();E(e,t)}const wn=(e,t,n,r=new Set,a={})=>{var s,o;for(const l of e.children)if(l.tagName==="DT"){const c=l.querySelector(":scope > A"),f=l.querySelector(":scope > H3");if(c){const u=c.getAttribute("href"),d=c.textContent||"unknown";if(!u)return n;const v=t.find(h=>h.toLowerCase()==="items bar")?t.filter(h=>h.toLowerCase()!=="items bar"):["other"];if(a[u])a[u].tags=[...new Set([...a[u].tags,...v])];else{const h={id:sa(),order:n.length,url:u,title:d,description:"",tags:v.length>0?v:[],updatedAt:Date.now(),createdAt:Date.now()};a[h.url]=h,n.push(h)}}else if(f){const u=(s=f.textContent)==null?void 0:s.trim();if(u&&((o=f.nextElementSibling)==null?void 0:o.tagName)==="DL"){const d=[...t];d.push(u);const v=f.nextElementSibling;r.has(v)||(r.add(v),wn(v,d,n,r,a))}}}else l.tagName!=="DL"&&l.children.length>0&&(r.has(l)||(r.add(l),wn(l,[...t],n,r,a)));return n},Qo=async e=>{const t=await e.text(),a=new DOMParser().parseFromString(t,"text/html").querySelector("DL");return a?wn(a,[],[]):[]},$o=e=>{const t=Math.floor(Date.now()/1e3),n={};e.forEach(a=>{const s=a.tags||["Imported"];if(s.length===0){n.ROOT||(n.ROOT=[]),n.ROOT.push(a);return}s.forEach(o=>{n[o]||(n[o]=[]),n[o].push(a)})});let r=`<!DOCTYPE NETSCAPE-Item-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>Items</TITLE>
<H1>Items</H1>
<DL><p>
<DT><H3 ADD_DATE="${t}" LAST_MODIFIED="${t}" PERSONAL_TOOLBAR_FOLDER="true">Items Bar</H3>
<DL><p>`;return Object.keys(n).forEach(a=>{a!=="ROOT"&&a!=="other"&&(r+=`
	<DT><H3 ADD_DATE="${t}" LAST_MODIFIED="${t}">${a}</H3>
	<DL><p>`,n[a].forEach(s=>{const o=s.title.replace(/"/g,"&quot;");r+=`
		<DT><A HREF="${s.url}" ADD_DATE="${Math.floor(s.createdAt/1e3)||t}">${o}</A>`}),r+=`
	</DL><p>`)}),n.ROOT&&n.ROOT.forEach(a=>{const s=a.title.replace(/"/g,"&quot;");r+=`
	<DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||t}">${s}</A>`}),r+=`
</DL><p>`,n.other&&n.other.forEach(a=>{const s=a.title.replace(/"/g,"&quot;");r+=`
	<DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||t}">${s}</A>`}),r+="</DL><p>",r},ir=async(e,t)=>{const n=e.target;!n.files||n.files.length===0||await t(n.files[0])};var el=O('<div class="mobileContainer svelte-1n1lt8i"><!></div> <input type="file" accept=".json, .html" style="display: none;"/>',1),tl=O('<div class="desktopContainer svelte-1n1lt8i"><div class="desktopButtonContainer svelte-1n1lt8i"><!></div> <div role="button" tabindex="-1"><div tabindex="-1" class="dropzone-content svelte-1n1lt8i"><p class="svelte-1n1lt8i">Drag and drop your file here</p> <p class="svelte-1n1lt8i">or</p></div> <input type="file" accept=".json, .html" style="display: none;"/></div></div>'),nl=O('<p class="message svelte-1n1lt8i">Select a file to import your items</p> <!>',1),rl=O('<p class="message svelte-1n1lt8i">Importing items...</p> <!>',1),al=O('<p class="message success svelte-1n1lt8i">Items imported successfully!</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),sl=O('<p class="message error svelte-1n1lt8i">Something went wrong</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),il=O('<div class="content svelte-1n1lt8i"><!></div>');function ol(e,t){q(t,!0);let n=B("idle"),r=B(null),a=B(!1),s=B(null);const o=()=>{lt()};fe(()=>{ye(i(n)==="loading")}),le(()=>(i(r)&&i(r).addEventListener("cancel",m=>{m.preventDefault(),m.stopImmediatePropagation(),m.stopPropagation()}),()=>{ye(!1)}));const l=async m=>{const w=await m.text(),p=JSON.parse(w),k=[];if(!p.items)throw new Error("Invalid import file format");for(const L of Object.values(p.items))L&&k.push(L);await sr(k)},c=async m=>{S(n,"loading");try{if(m.name.endsWith(".json"))await l(m);else if(m.name.endsWith(".html"))await sr(await Qo(m));else throw new Error("Unsupported file format. Please upload a JSON or HTML file.");await new Promise(w=>{setTimeout(()=>{w(!0)},1e3)}),S(n,"success")}catch{S(n,"error")}},f=()=>{var m;(m=i(r))==null||m.click()},u=m=>{m.preventDefault(),m.stopPropagation(),S(a,!0)},d=m=>{m.preventDefault(),m.stopPropagation(),S(a,!1)},v=m=>{m.preventDefault(),m.stopPropagation(),S(a,!0)},h=async m=>{var p;if(m.preventDefault(),m.stopPropagation(),S(a,!1),!((p=m.dataTransfer)!=null&&p.files)||m.dataTransfer.files.length===0)return;const w=m.dataTransfer.files[0];if(w.type!=="application/json"&&w.type!=="text/html"){S(n,"error");return}await c(w)};var g=il(),_=b(g);{var y=m=>{var w=nl(),p=D(J(w),2);{var k=C=>{var M=el(),K=J(M),j=b(K);Ee(j,{onClick:f,children:(V,W)=>{var A=ie("Select File");E(V,A)},$$slots:{default:!0}});var z=D(K,2);z.__change=[ir,c],me(z,V=>S(r,V),()=>i(r)),E(C,M)},L=C=>{var M=tl(),K=b(M),j=b(K);Ee(j,{onClick:f,children:(W,A)=>{var R=ie("Select File");E(W,R)},$$slots:{default:!0}});var z=D(K,2),V=D(b(z),2);V.__change=[ir,c],me(V,W=>S(r,W),()=>i(r)),me(z,W=>S(s,W),()=>i(s)),oe(()=>ae(z,1,se(["dropzone",{active:i(a)}]),"svelte-1n1lt8i")),je("dragenter",z,u),je("dragover",z,v),je("dragleave",z,d),je("drop",z,h),E(C,M)};N(p,C=>{Rt()?C(k):C(L,!1)})}E(m,w)},T=(m,w)=>{{var p=L=>{var C=rl(),M=D(J(C),2);Nt(M),E(L,C)},k=(L,C)=>{{var M=j=>{var z=al(),V=D(J(z),2),W=b(V);Ee(W,{onClick:o,children:(A,R)=>{var x=ie("close");E(A,x)},$$slots:{default:!0}}),E(j,z)},K=(j,z)=>{{var V=W=>{var A=sl(),R=D(J(A),2),x=b(R);Ee(x,{onClick:()=>{S(n,"idle")},children:(U,Y)=>{var P=ie("Try Again");E(U,P)},$$slots:{default:!0}}),E(W,A)};N(j,W=>{i(n)==="error"&&W(V)},z)}};N(L,j=>{i(n)==="success"?j(M):j(K,!1)},C)}};N(m,L=>{i(n)==="loading"?L(p):L(k,!1)},w)}};N(_,m=>{i(n)==="idle"?m(y):m(T,!1)})}E(e,g),G()}Se(["change"]);const ll=(e,t,n)=>{t(e.target.value),n.onChange(t())};var cl=O('<input type="radio"/> <label> </label>',1),ul=O('<div class="wrapper svelte-1065asd"><fieldset class="switcher svelte-1065asd"><!> <div class="wrapSwitcherStatus svelte-1065asd"><div class="switcherStatus svelte-1065asd"></div></div></fieldset></div>');function dl(e,t){const n=Ps();q(t,!0);let r=Z(t,"value",7);const a=`switcher-${n}`;var s=ul(),o=b(s),l=b(o);Ue(l,17,()=>t.items,u=>u.title,(u,d)=>{var v=cl(),h=J(v);ae(h,1,se(["vh","input"]),"svelte-1065asd"),h.__change=[ll,r,t];var g=D(h,2);ae(g,1,se(["switcherButton"]),"svelte-1065asd");var _=b(g);oe(()=>{de(h,"id",`${i(d).title}-${n}`),de(h,"name",a),Ht(h,i(d).value),Kt(h,i(d).value===r()),de(h,"aria-label",i(d).title),de(g,"for",`${i(d).title}-${n}`),de(g,"title",i(d).title),de(g,"aria-label",i(d).title),ot(_,i(d).value)}),E(u,v)});var c=D(l,2),f=b(c);oe(u=>xt(f,u),[()=>`transform: translateX(${t.items.findIndex(u=>u.value===r())*100}%)`]),E(e,s),G()}Se(["change"]);var fl=O('<p class="message svelte-8vhup1">Export items</p> <div class="format-switcher svelte-8vhup1"><!> <p class="format-description svelte-8vhup1"><!></p></div> <div class="buttonContainer svelte-8vhup1"><!></div>',1),vl=O('<p class="message svelte-8vhup1">Exporting data...</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),hl=O('<p class="message svelte-8vhup1">Items exported successfully!</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),gl=O('<div class="content svelte-8vhup1"><!></div>');function pl(e,t){q(t,!0);let n=B("idle"),r=B("html");const a=()=>{lt()};fe(()=>{ye(i(n)==="loading")}),le(()=>()=>{ye(!1)});const s=async()=>{S(n,"loading"),setTimeout(async()=>{if(i(r)==="json")await po().finally(()=>{S(n,"success")});else try{const u=$o(Ji()),d=new Blob([u],{type:"text/html"}),v=URL.createObjectURL(d),h=document.createElement("a");h.href=v,h.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(v),S(n,"success")}catch(u){console.error("Error exporting as HTML:",u),S(n,"success")}},0)};var o=gl(),l=b(o);{var c=u=>{var d=fl(),v=D(J(d),2),h=b(v);dl(h,{items:[{title:"HTML",value:"html"},{title:"JSON",value:"json"}],get value(){return i(r)},onChange:p=>{S(r,p,!0)}});var g=D(h,2),_=b(g);{var y=p=>{var k=ie("JSON format (App compatible, a faster format)");E(p,k)},T=p=>{var k=ie("HTML format (Browser compatible)");E(p,k)};N(_,p=>{i(r)==="json"?p(y):p(T,!1)})}var m=D(v,2),w=b(m);Ee(w,{onClick:s,children:(p,k)=>{var L=ie("Export");E(p,L)},$$slots:{default:!0}}),E(u,d)},f=(u,d)=>{{var v=g=>{var _=vl(),y=D(J(_),2),T=b(y);Nt(T),E(g,_)},h=(g,_)=>{{var y=T=>{var m=hl(),w=D(J(m),2),p=b(w);Ee(p,{onClick:a,children:(k,L)=>{var C=ie("Close");E(k,C)},$$slots:{default:!0}}),E(T,m)};N(g,T=>{i(n)==="success"&&T(y)},_)}};N(u,g=>{i(n)==="loading"?g(v):g(h,!1)},d)}};N(l,u=>{i(n)==="idle"?u(c):u(f,!1)})}E(e,o),G()}var ml=O('<div class="content svelte-9hh95f"><p class="message svelte-9hh95f">use app</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div> <div class="buttonContainerItem svelte-9hh95f"><!></div></div></div>');function _l(e,t){q(t,!0);let n=B("idle");const r=()=>{Re("sign")},a=async()=>{S(n,"loading"),await mo(),ye(!1),lt()};fe(()=>{ye(i(n)==="idle"||i(n)==="loading")}),le(()=>(ye(!0),()=>{ye(!1)}));var s=ml(),o=D(b(s),2),l=b(o),c=b(l);Ee(c,{onClick:r,fullWidth:!0,children:(d,v)=>{var h=ie("with account");E(d,h)},$$slots:{default:!0}});var f=D(l,2),u=b(f);Ee(u,{onClick:a,fullWidth:!0,type:"secondary",children:(d,v)=>{var h=ie("without account");E(d,h)},$$slots:{default:!0}}),E(e,s),G()}var yl=O('<div class="content svelte-9hh95f"><p class="message svelte-9hh95f">sign in / sign up</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div> <div class="buttonContainerItem svelte-9hh95f"><!></div></div></div>');function wl(e,t){q(t,!1);const n=async()=>{Re("signin")},r=async()=>{Re("signup")};le(()=>(ye(!0),Ze(!0),()=>{Ze(!1)})),Bt();var a=yl(),s=D(b(a),2),o=b(s),l=b(o);Ee(l,{onClick:n,fullWidth:!0,children:(u,d)=>{var v=ie("sign in");E(u,v)},$$slots:{default:!0}});var c=D(o,2),f=b(c);Ee(f,{onClick:r,fullWidth:!0,children:(u,d)=>{var v=ie("sign up");E(u,v)},$$slots:{default:!0}}),E(e,a),G()}var Fe=(e=>(e[e.Signup=0]="Signup",e[e.SignupError=1]="SignupError",e))(Fe||{}),Sl=O('<p class="message svelte-9hh95f">signup</p> <!>',1),bl=O('<p class="message svelte-9hh95f">error signup</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),El=O('<div class="content svelte-9hh95f"><!></div>');function kl(e,t){q(t,!0);let n=B(ce(Fe.Signup));const r=async()=>{S(n,Fe.Signup,!0);try{const c=await fetch("/api/signup/start",{method:"post"}).then(d=>d.json()),f=crypto.getRandomValues(new Uint8Array(32)),u={challenge:Kn(Hn(c.challenge)),rp:{id:"localhost",name:"items"},user:{id:f,name:"items_account",displayName:"items_account"},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],authenticatorSelection:{userVerification:"required"},timeout:6e4,attestation:"none"};try{const d=await navigator.credentials.create({publicKey:u}),v=d.response;if(console.log(d),d){const h={clientKey:f,challenge:c.challenge,id:d.id,rawId:Ae(d.rawId),type:d.type,response:{clientDataJSON:Ae(v.clientDataJSON),attestationObject:Ae(v.attestationObject)}},g=await fetch("/api/signup/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(g.status!==200){S(n,Fe.SignupError,!0);return}const _=await g.json();await ya({credentialId:new Uint8Array(d.rawId),clientKey:f,serverKey:new Uint8Array(qe(_.serverKey))}),ye(!1),lt()}else throw new Error}catch(d){S(n,Fe.SignupError,!0),console.log(d)}}catch(c){S(n,Fe.SignupError,!0),console.log(c)}};le(()=>(ye(!0),Ze(!1),r(),()=>{Ze(!1)})),fe(()=>{Ze(i(n)!==Fe.Signup)});var a=El(),s=b(a);{var o=c=>{var f=Sl(),u=D(J(f),2);Nt(u),E(c,f)},l=(c,f)=>{{var u=d=>{var v=bl(),h=D(J(v),2),g=b(h),_=b(g);Ee(_,{onClick:()=>r(),fullWidth:!0,children:(y,T)=>{var m=ie("try again");E(y,m)},$$slots:{default:!0}}),E(d,v)};N(c,d=>{i(n)===Fe.SignupError&&d(u)},f)}};N(s,c=>{i(n)===Fe.Signup?c(o):c(l,!1)})}E(e,a),G()}var xe=(e=>(e[e.Signin=0]="Signin",e[e.SigninError=1]="SigninError",e))(xe||{}),Tl=O('<p class="message svelte-9hh95f">signin</p> <!>',1),Cl=O('<p class="message svelte-9hh95f">error signin</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),Dl=O('<div class="content svelte-9hh95f"><!></div>');function Il(e,t){q(t,!0);let n=B(ce(xe.Signin));const r=async()=>{S(n,xe.Signin,!0);try{const c=await fetch("/api/signin/start",{method:"post"}).then(u=>u.json()),f={challenge:Kn(Hn(c.challenge)),timeout:6e4,rpId:"localhost",userVerification:"required"};try{const u=await navigator.credentials.get({publicKey:f}),d=u.response;if(u){const v={challenge:c.challenge,id:u.id,rawId:Ae(u.rawId),type:u.type,response:{authenticatorData:Ae(d.authenticatorData),clientDataJSON:Ae(d.clientDataJSON),signature:Ae(d.signature)}},h=await fetch("/api/signin/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(h.status!==200){S(n,xe.SigninError,!0);return}const g=await h.json();if(console.log("responseData: ",g),!g.success||!g.serverKey){console.error("Signin failed: ",g),S(n,xe.SigninError,!0);return}if(!d.userHandle){S(n,xe.SigninError,!0);return}const _=g.serverKey,y=d.userHandle;await ya({credentialId:new Uint8Array(u.rawId),clientKey:new Uint8Array(y),serverKey:new Uint8Array(qe(_))}),ye(!1),lt()}else throw new Error}catch(u){S(n,xe.SigninError,!0),console.log(u)}}catch(c){S(n,xe.SigninError,!0),console.log(c)}};le(()=>(ye(!0),Ze(!1),r(),()=>{Ze(!1)})),fe(()=>{Ze(i(n)!==xe.Signin)});var a=Dl(),s=b(a);{var o=c=>{var f=Tl(),u=D(J(f),2);Nt(u),E(c,f)},l=(c,f)=>{{var u=d=>{var v=Cl(),h=D(J(v),2),g=b(h),_=b(g);Ee(_,{onClick:()=>r(),fullWidth:!0,children:(y,T)=>{var m=ie("try again");E(y,m)},$$slots:{default:!0}}),E(d,v)};N(c,d=>{i(n)===xe.SigninError&&d(u)},f)}};N(s,c=>{i(n)===xe.Signin?c(o):c(l,!1)})}E(e,a),G()}var Ll=O('<p class="message svelte-49o1d">Are you sure you want to clear the store?</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),Pl=O('<p class="message svelte-49o1d">clearing store...</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),xl=O('<p class="message svelte-49o1d">store cleared</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),Al=O('<div class="content svelte-49o1d"><!></div>');function Ol(e,t){q(t,!0);let n=B("idle");const r=()=>{lt()};fe(()=>{ye(i(n)==="loading")}),le(()=>()=>{ye(!1)});const a=()=>{S(n,"loading"),go().finally(()=>{setTimeout(()=>{S(n,"success")},1e3)})};var s=Al(),o=b(s);{var l=f=>{var u=Ll(),d=D(J(u),2),v=b(d);Ee(v,{onClick:a,type:"dangerous",children:(h,g)=>{var _=ie("Clear store");E(h,_)},$$slots:{default:!0}}),E(f,u)},c=(f,u)=>{{var d=h=>{var g=Pl(),_=D(J(g),2),y=b(_);Nt(y),E(h,g)},v=(h,g)=>{{var _=y=>{var T=xl(),m=D(J(T),2),w=b(m);Ee(w,{onClick:r,children:(p,k)=>{var L=ie("Close");E(p,L)},$$slots:{default:!0}}),E(y,T)};N(h,y=>{i(n)==="success"&&y(_)},g)}};N(f,h=>{i(n)==="loading"?h(d):h(v,!1)},u)}};N(o,f=>{i(n)==="idle"?f(l):f(c,!1)})}E(e,s),G()}var Ml=O('<div class="svelte-t4bw1y"><!></div>');function Ne(e,t){q(t,!0);let n=B(null);le(()=>{i(n)&&(i(n).getBoundingClientRect(),i(n).style.opacity="1")});var r=Ml(),a=b(r);Ye(a,()=>t.children),me(r,s=>S(n,s),()=>i(n)),E(e,r),G()}const or=(e,t=ur)=>{var n=ke(),r=J(n);{var a=o=>{Ne(o,{children:(l,c)=>{Jo(l,{})},$$slots:{default:!0}})},s=(o,l)=>{{var c=u=>{Ne(u,{children:(d,v)=>{qo(d,{})},$$slots:{default:!0}})},f=(u,d)=>{{var v=g=>{Ne(g,{children:(_,y)=>{ol(_,{})},$$slots:{default:!0}})},h=(g,_)=>{{var y=m=>{Ne(m,{children:(w,p)=>{pl(w,{})},$$slots:{default:!0}})},T=(m,w)=>{{var p=L=>{Ne(L,{children:(C,M)=>{Ol(C,{})},$$slots:{default:!0}})},k=(L,C)=>{{var M=j=>{Ne(j,{children:(z,V)=>{_l(z,{})},$$slots:{default:!0}})},K=(j,z)=>{{var V=A=>{Ne(A,{children:(R,x)=>{wl(R,{})},$$slots:{default:!0}})},W=(A,R)=>{{var x=Y=>{Ne(Y,{children:(P,I)=>{kl(P,{})},$$slots:{default:!0}})},U=(Y,P)=>{{var I=H=>{Ne(H,{children:(Q,ne)=>{Il(Q,{})},$$slots:{default:!0}})};N(Y,H=>{t()==="signin"&&H(I)},P)}};N(A,Y=>{t()==="signup"?Y(x):Y(U,!1)},R)}};N(j,A=>{t()==="sign"?A(V):A(W,!1)},z)}};N(L,j=>{t()==="start"?j(M):j(K,!1)},C)}};N(m,L=>{t()==="clearStore"?L(p):L(k,!1)},w)}};N(g,m=>{t()==="exportItems"?m(y):m(T,!1)},_)}};N(u,g=>{t()==="importItems"?g(v):g(h,!1)},d)}};N(o,u=>{t()==="newItem"?u(c):u(f,!1)},l)}};N(r,o=>{t()==="settings"?o(a):o(s,!1)})}E(e,n)};var Bl=O("<!> <!>",1);function Rl(e,t){q(t,!0);let n=$(Zr),r=$(mt);var a=Bl(),s=J(a);{var o=u=>{Fo(u)};N(s,u=>{i(r)&&u(o)})}var l=D(s,2);{var c=u=>{var d=ke(),v=J(d);Ue(v,17,()=>i(n),Ms,(h,g,_)=>{const y=$(()=>{var T;return _!==i(n).length-1&&!!((T=i(n)[_+1])!=null&&T.shown)});nr(h,{get shown(){return i(g).shown},get hidden(){return i(y)},isLastDialog:_===0,children:(T,m)=>{or(T,()=>i(g).page)},$$slots:{default:!0}})}),E(u,d)},f=(u,d)=>{{var v=h=>{const g=$(()=>i(n).length===1);nr(h,{onBack:()=>Gr(),get shown(){return i(n)[i(n).length-1].shown},hidden:!1,get isLastDialog(){return i(g)},children:(_,y)=>{or(_,()=>i(n)[i(n).length-1].page)},$$slots:{default:!0}})};N(u,h=>{i(n).length>0&&h(v)},d)}};N(l,u=>{Rt()?u(c):u(f,!1)})}E(e,a),G()}function Nl(){const e=navigator.userAgent;if(!(/iPad|iPhone|iPod/.test(e)&&!window.MSStream))return!1;const n=/Safari/.test(e)&&!/Chrome/.test(e)&&!/CriOS/.test(e)&&!/FxiOS/.test(e),r=/Macintosh/.test(e)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1;return!!n||!!r}const ba=Nl();function Fl(e,t){q(t,!1),le(()=>{cn(),document.addEventListener("focusin",cn),document.addEventListener("focusout",cn),document.addEventListener("touchmove",function(n){Nn()&&ba&&n.preventDefault()},{passive:!1})}),Bt(),G()}function jl(e,t){q(t,!1);let n=0;le(()=>{const r=document.querySelector("div");r&&ba&&r.addEventListener("touchstart",a=>{a.pageX>20&&a.pageX<window.innerWidth-20||a.preventDefault()}),document.addEventListener("touchstart",a=>{n=a.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",a=>{const o=a.touches[0].clientX-n;(n<50&&o>0||n>window.innerWidth-50&&o<0)&&a.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Bt(),G()}var Ul=O('<!> <!> <!> <main><!> <div class="container svelte-ngsolt"><!></div></main>',1);function Hl(e,t){q(t,!0),le(async()=>{await new Promise(h=>setTimeout(h,100)),await ws(),he.working=!0});let n=$(()=>Ve().length>0),r=$(mt);var a=Ul(),s=J(a);jl(s,{});var o=D(s,2);Fl(o,{});var l=D(o,2);Zs(l,{});var c=D(l,2),f=b(c);{var u=h=>{fi(h,{})};N(f,h=>{i(r)&&h(u)})}var d=D(f,2),v=b(d);Rl(v,{}),me(c,h=>Et.ref=h,()=>Et==null?void 0:Et.ref),oe(()=>{xt(c,`--swiping-ratio: ${he.swipingRatio}; --transition-timing-default: ${he.duration}s;`),ae(c,1,se(["main",{isAnimationOn:he.working&&!he.isSwiping,open:i(n)}]),"svelte-ngsolt")}),E(e,a),G()}xs(Hl,{target:document.getElementById("app")});
