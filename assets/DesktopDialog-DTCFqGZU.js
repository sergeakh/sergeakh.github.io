import{o as P,p as X,A as u,u as Y,U as z,g as i,a as A,f as y,h as E,i as L,c as v,e as C,V as Z,k as M,l as h,W as N,m as Q,n as x,q,b as g,d as j,X as V,Y as H,Z as R,t as U,v as T,_ as W}from"./index-BMmQJNiY.js";const $=({getDialog:l,onOpen:e,onStartClose:a,onClose:r})=>{const d=t=>{t.preventDefault(),a()},n=()=>{r?.()};P(()=>{const t=l();return t?.addEventListener("cancel",d),t?.addEventListener("close",n),()=>{t?.removeEventListener("cancel",d),t?.removeEventListener("close",n)}}),P(()=>{const t=l();t?.showModal(),t?.getBoundingClientRect(),e()})};var ee=(l,e)=>{e.onStartBack()},te=y('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),ae=(l,e)=>{e.onStartClose()},ne=y('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),oe=y('<dialog><div class="dialogInner svelte-isq3u8"><div class="header svelte-isq3u8"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function le(l,e){X(e,!0);let a=u(e,"blockedDialog",3,!1),r=u(e,"hiddenDialog",3,!1),d=u(e,"isDesktopAnimationOff",3,!1),n=A(null),t=A(null);$({getDialog:()=>i(n),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose}),Y(()=>{e.stateDialog==="closing"&&(z.working?i(n)?.addEventListener("transitionend",()=>{i(n)?.close()},{once:!0}):i(n)?.close())});var k=oe(),f=E(k),D=v(f),_=v(D),m=v(_),I=v(m);{var b=o=>{var s=te();x(s,1,q(["navigateButton","buttonBack"]),"svelte-isq3u8"),s.__click=[ee,e];var c=v(s);V(c,()=>({"--size":"20px"})),H(c.lastChild,{name:"back"});var B=C(c,2);R(B,{children:(O,K)=>{var w=U("back");g(O,w)}}),g(o,s)};L(I,o=>{(!(a()||r())||a()&&e.unBlockedBack)&&e.onStartBack&&o(b)})}var S=C(m,2),p=v(S);{var F=o=>{var s=ne();x(s,1,q(["navigateButton","buttonClose"]),"svelte-isq3u8"),s.__click=[ae,e];var c=v(s);V(c,()=>({"--size":"20px"})),H(c.lastChild,{name:"close"});var B=C(c,2);R(B,{children:(O,K)=>{var w=U("close");g(O,w)}}),g(o,s)};L(p,o=>{a()||r()||o(F)})}var G=C(_,2);Z(G,()=>e.children),M(D,o=>h(t,o),()=>i(t)),M(f,o=>h(n,o),()=>i(n));var J=C(f,2);N(J,{get dialog(){return i(n)},get dialogInner(){return i(t)},get onClose(){return e.onStartClose}}),Q(()=>x(f,1,q([{open:e.stateDialog==="open",isAnimationOn:z.working,isDesktopAnimationOff:d(),hiddenDialog:r()}]),"svelte-isq3u8")),g(l,k),j()}T(["click"]);const se=({onStartClose:l,onClose:e})=>{let a=A("close");return{get state(){return i(a)},set state(t){h(a,t,!0)},handleStartClose:(t=!1)=>{t||(h(a,"closing"),l?.())},handleOpen:()=>{h(a,"open")},handleClose:()=>{h(a,"close"),e?.()}}};function re(l,e){X(e,!0);let a=u(e,"blockedDialog",3,!1),r=u(e,"hiddenDialog",3,!1),d=u(e,"onStartClose",3,()=>{}),n=u(e,"onClose",3,()=>{}),t=se({onStartClose:d(),onClose:n()});Y(()=>{t.state==="close"&&e.shownDialog?t.state="opening":t.state==="open"&&!e.shownDialog&&t.handleStartClose(a())});var k=W(),f=E(k);{var D=_=>{le(_,{get stateDialog(){return t.state},get blockedDialog(){return a()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return t.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{t.handleStartClose(a())},get onClose(){return t.handleClose},children:(m,I)=>{var b=W(),S=E(b);Z(S,()=>e.children),g(m,b)},$$slots:{default:!0}})};L(f,_=>{t.state!=="close"&&_(D)})}g(l,k),j()}export{re as default};
