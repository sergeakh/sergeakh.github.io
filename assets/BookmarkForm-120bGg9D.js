import{p as de,W as _,d as u,e as x,f as y,h as e,c as m,s as f,j as b,H as ve,b as T,k as ce,i as l,m as q,x as k,t as ue,r as me,a7 as G,a1 as fe,X as ge,Y as he,q as H,a8 as C,l as _e}from"./index-h3veWUoK.js";import{I as S}from"./Input-CF2mHbX7.js";var be=y("<div></div>"),pe=y('<div class="boxtags"><div class="sidebarFixed"><!></div> <div class="tags svelte-1as7gim"><!> <!></div> <div class="searchWrapper svelte-1as7gim"><!></div></div> <button class="buttonSubmit svelte-1as7gim" type="submit"> </button>',1),xe=y('<form class="svelte-1as7gim"><!> <!> <!></form>');function we(N,n){de(n,!0);let O=_(n,"initialTitle",3,""),X=_(n,"initialUrl",3,""),L=_(n,"initialDescription",3,""),Y=_(n,"initialTags",19,()=>[]),z=_(n,"mode",3,"add"),r=u("");u(L()!=="");let p=u(x(O())),d=u(x(X())),g=u(""),A=x(L()),i=u(x(Y().filter(t=>t!=="inbox")));const U=t=>{e(i).includes(t)||l(i,[...e(i),t],!0)},J=t=>{const s=e(i).filter(o=>o!==t);s.length===0?l(i,[],!0):l(i,s,!0)};let K=k(()=>G()?[...(fe()()||[]).reduce((t,s)=>(s?.tags.forEach(o=>{t.has(o)||t.add(o)}),t),new Set)]:[]),I=k(()=>G()?e(K).filter(t=>!e(i).some(s=>t===s)&&t!=="inbox"):[]),D=k(()=>e(I).find(t=>t.toLowerCase()===e(r).toLowerCase())||e(i).includes(e(r))),M=k(()=>e(I).filter(t=>e(r)===""?!0:t.toLowerCase().indexOf(e(r).toLowerCase())!==-1).slice(0,e(D)||e(r)===""?3:2));const P=t=>{t.preventDefault(),n.onSubmit({title:e(p).trim().slice(0,256)||"unkwown",url:e(d).trim().slice(0,2048),description:A.trim().slice(0,2048),tags:e(i).length>0?e(i):["inbox"]})},Q=t=>{l(g,""),l(d,t.target.value||"",!0);try{new URL(e(d))}catch{l(g,"Invalid URL")}};var w=xe(),E=m(w);S(E,{get value(){return e(d)},get error(){return e(g)},onInput:Q,placeholder:"url"});var R=f(E,2);{var V=t=>{S(t,{placeholder:"title",get value(){return e(p)},set value(s){l(p,s,!0)}})};b(R,t=>{e(d)&&e(g)===""&&t(V)})}var Z=f(R,2);{var $=t=>{var s=pe(),o=q(s),B=m(o),ee=m(B);{var te=a=>{var v=be();ge(v,1,he(["tags","selectedTags"]),"svelte-1as7gim"),H(v,20,()=>e(i),h=>h,(h,c)=>{C(h,{get title(){return c},onClick:()=>J(c),type:"button",style:"selected"})}),T(a,v)};b(ee,a=>{e(i).length>0&&a(te)})}var F=f(B,2),W=m(F);{var ae=a=>{var v=_e(),h=q(v);H(h,16,()=>e(M),c=>c,(c,j)=>{C(c,{get title(){return j},onClick:()=>U(j)})}),T(a,v)};b(W,a=>{e(r)!==""&&a(ae)})}var re=f(W,2);{var ie=a=>{C(a,{get title(){return e(r)},onClick:()=>{U(e(r)),l(r,"")}})};b(re,a=>{!e(D)&&e(r)!==""&&a(ie)})}var se=f(F,2),le=m(se);S(le,{placeholder:"search tag",get value(){return e(r)},set value(a){l(r,a,!0)}});var ne=f(o,2),oe=m(ne);ue(()=>me(oe,z()==="add"?"add":"edit")),T(t,s)};b(Z,t=>{e(d)&&e(g)===""&&e(p)&&t($)})}ve("submit",w,P),T(N,w),ce()}export{we as B};
