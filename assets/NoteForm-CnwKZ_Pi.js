import{p as le,W as c,d as o,e as g,u as ie,h as t,f as re,c as v,s as d,i as l,a4 as se,q as z,a7 as D,j as A,x as p,t as ne,r as oe,a8 as de,H as ue,b as B,k as ce,l as ve,m as fe,a9 as J,a1 as he,n as me}from"./index-qxPg0igd.js";import{I as E}from"./Input-BvfGngZr.js";const ge=(_,s,b,x,y,f)=>{_.preventDefault(),s.onSubmit({title:t(b).trim().slice(0,256)||"unkwown",url:t(x).trim().slice(0,2048),description:t(y).trim().slice(0,2048),tags:t(f).length>0?t(f):["inbox"]})};var pe=re('<div class="form svelte-elpyds"><!> <!> <textarea placeholder="notes" class="svelte-elpyds"></textarea> <form class="formTags svelte-elpyds"><div class="tags svelte-elpyds"><!> <!> <!></div> <div class="searchWrapper svelte-elpyds"><!></div></form> <button class="buttonSubmit svelte-elpyds" type="submit"> </button></div>');function xe(_,s){le(s,!0);let b=c(s,"initialTitle",3,""),x=c(s,"initialUrl",3,""),y=c(s,"initialDescription",3,""),f=c(s,"initialTags",19,()=>[]),K=c(s,"mode",3,"add"),a=o(""),T=o(g(b())),h=o(g(x())),k=o(""),C=o(g(y())),r=o(g(f().filter(e=>e!=="inbox"))),n=o(null);const w=e=>{t(r).includes(e)||(l(a,""),l(r,[...t(r),e],!0))},M=e=>{const i=t(r).filter(u=>u!==e);i.length===0?l(r,[],!0):l(r,i,!0)};let P=p(()=>J()?[...(he()()||[]).reduce((e,i)=>(i?.tags.forEach(u=>{e.has(u)||e.add(u)}),e),new Set)]:[]),I=p(()=>J()?t(P).filter(e=>!t(r).some(i=>e===i)&&e!=="inbox"):[]),S=p(()=>t(I).find(e=>e.toLowerCase()===t(a).toLowerCase())||t(r).includes(t(a))),Q=p(()=>t(I).filter(e=>t(a)===""?!0:e.toLowerCase().indexOf(t(a).toLowerCase())!==-1).slice(0,t(S)||t(a)===""?3:2));const V=e=>{l(k,""),l(h,e.target.value||"",!0);try{new URL(t(h))}catch{l(k,"Invalid URL")}},X=e=>{e.preventDefault(),t(a)!==""&&!t(S)&&(w(t(a)),l(a,""))},N=()=>{t(n)&&(t(n).style.height="auto",t(n).style.height=t(n).scrollHeight+"px")};ie(()=>{t(n),N()});var R=pe(),H=v(R);E(H,{get value(){return t(h)},get error(){return t(k)},onInput:V,placeholder:"url"});var W=d(H,2);E(W,{placeholder:"title",get value(){return t(T)},set value(e){l(T,e,!0)}});var m=d(W,2);m.__input=N,se(m,e=>l(n,e),()=>t(n));var L=d(m,2),j=v(L),q=v(j);z(q,16,()=>t(r),e=>e,(e,i)=>{D(e,{get title(){return i},onClick:()=>M(i),type:"button",style:"selected"})});var F=d(q,2);{var Y=e=>{var i=ve(),u=fe(i);z(u,16,()=>t(Q),U=>U,(U,O)=>{D(U,{get title(){return O},onClick:()=>w(O)})}),B(e,i)};A(F,e=>{t(a)!==""&&e(Y)})}var Z=d(F,2);{var $=e=>{D(e,{get title(){return t(a)},onClick:()=>{w(t(a)),l(a,"")}})};A(Z,e=>{!t(S)&&t(a)!==""&&e($)})}var ee=d(j,2),te=v(ee);E(te,{placeholder:"search tag",get value(){return t(a)},set value(e){l(a,e,!0)}});var G=d(L,2);G.__click=[ge,s,T,h,C,r];var ae=v(G);ne(()=>oe(ae,K()==="add"?"add":"edit")),de(m,()=>t(C),e=>l(C,e)),ue("submit",L,X),B(_,R),ce()}me(["input","click"]);export{xe as N};
