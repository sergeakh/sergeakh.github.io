import{p as D,b as j,E as K,o as T,s as S,F as u,u as $,a as p,f as d,i as y,c,d as o,e as I,n as g,G as L,H as O,I as z,z as F,h as _,j as v,L as G,l as H,B as J,t as M}from"./index-B7-fUZq5.js";import{g as N}from"./api-7nXQQ8YG.js";var t=(r=>(r[r.Signup=0]="Signup",r[r.SignupError=1]="SignupError",r))(t||{}),R=d('<p class="message svelte-9hh95f">signup</p> <!>',1),V=d('<p class="message svelte-9hh95f">error signup</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),W=d('<div class="content svelte-9hh95f"><!></div>');function X(r,b){D(b,!0);let s=j(K(t.Signup));const f=async()=>{g(s,t.Signup,!0);try{const a=await N(),e=crypto.getRandomValues(new Uint8Array(32)),n=await L({challenge:a,clientKey:e}),l=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(l.status!==200){g(s,t.SignupError,!0);return}const i=await l.json();await O({clientKey:e,serverKey:new Uint8Array(z(i.serverKey))}),S(!1),F()}catch{g(s,t.SignupError,!0)}};T(()=>(S(!0),u(!1),f(),()=>{u(!1)})),$(()=>{u(p(s)!==t.Signup)});var h=W(),w=c(h);{var U=a=>{var e=R(),n=_(v(e),2);G(n,{}),o(a,e)},k=a=>{var e=H(),n=v(e);{var l=i=>{var m=V(),B=_(v(m),2),C=c(B),E=c(C);J(E,{onClick:()=>f(),fullWidth:!0,children:(A,q)=>{var x=M("try again");o(A,x)},$$slots:{default:!0}}),o(i,m)};y(n,i=>{p(s)===t.SignupError&&i(l)},!0)}o(a,e)};y(w,a=>{p(s)===t.Signup?a(U):a(k,!1)})}o(r,h),I()}export{X as default};
