import{p as s,u as a,b as t,g as e,s as i,f as r,i as n,d as o,e as c,h as l,m as u,k as v,x as d,j as k,A as p,B as b,v as f,E as h,D as C,P as g,c as m,ac as $,t as y,r as S,G as w}from"./index-D_lOxY7D.js";var x=r('<p class="message svelte-uikrak">You need to connect to the cloud account to get an access to a subscription</p> <div class="buttonContainer svelte-uikrak"><!></div>',1),D=r('<div class="buttonContainer svelte-uikrak"><!></div>'),P=r('<p class="message svelte-uikrak"> </p>'),j=r('<h3 class="title svelte-uikrak">Subscription</h3> <!>',1),G=r('<p class="message svelte-uikrak">error signin</p> <div class="buttonContainer svelte-uikrak"><div class="buttonContainerItem"><!></div></div>',1),I=r('<p class="message svelte-uikrak">Subscription updated successfully</p> <div class="buttonContainer svelte-uikrak"><div class="buttonContainerItem"><!></div></div>',1),W=r('<div class="content svelte-uikrak"><!></div>');function Y(r,Y){s(Y,!0);let A=i("idle"),B=d(p);const E=()=>{h("retPath","subscription"),C(g.t)},O=()=>{w()},T=async()=>{m(A,"loading");try{const s=await fetch("/api/getSubscription",{method:"POST"});if(200!==s.status)return void m(A,"error");const a=await s.json();if(!a.i)return void m(A,"error");const t=a.i;$(t),m(A,"success")}catch{m(A,"error")}};a(()=>{t("loading"===e(A))});var q=W(),z=o(q),F=s=>{var a=j(),t=u(v(a),2),i=s=>{var a=x(),t=u(v(a),2),e=o(t);b(e,{o:E,children:(s,a)=>{var t=f("Connect");c(s,t)},l:{default:!0}}),c(s,a)},r=s=>{var a=k(),t=v(a),i=s=>{var a=D(),t=o(a);b(t,{o:T,children:(s,a)=>{var t=f("Get subscription");c(s,t)},l:{default:!0}}),c(s,a)},r=s=>{var a=P(),t=o(a);y(s=>S(t,`Your subscription is active until ${s??""}`),[()=>new Date(e(B).i).toLocaleDateString()]),c(s,a)};n(t,s=>{e(B).i<Date.now()?s(i):s(r,!1)},!0),c(s,a)};n(t,s=>{e(B)?s(r,!1):s(i)}),c(s,a)},H=s=>{var a=k(),t=v(a),i=s=>{var a=G(),t=u(v(a),2),e=o(t),i=o(e);b(i,{o:T,u:!0,children:(s,a)=>{var t=f("try again");c(s,t)},l:{default:!0}}),c(s,a)},r=s=>{var a=k(),t=v(a),i=s=>{var a=I(),t=u(v(a),2),e=o(t),i=o(e);b(i,{o:O,u:!0,children:(s,a)=>{var t=f("Close");c(s,t)},l:{default:!0}}),c(s,a)};n(t,s=>{"success"===e(A)&&s(i)},!0),c(s,a)};n(t,s=>{"error"===e(A)?s(i):s(r,!1)},!0),c(s,a)};n(z,s=>{"idle"===e(A)?s(F):s(H,!1)}),c(r,q),l()}export{Y as default};
