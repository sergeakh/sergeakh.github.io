import{p as U,u as B,s as $,a as f,b as y,o as F,f as R,i as A,c as m,d as n,e as P,h as g,j as O,n as L,B as w,t as b,l as H,A as N,C as q,L as J,z as G}from"./index-B7-fUZq5.js";import{S as z}from"./Switcher-CxF7l-6U.js";const Q=T=>{const r=Math.floor(Date.now()/1e3),e={};T.forEach(t=>{const a=t.tags||["Imported"];if(a.length===0){e.ROOT||(e.ROOT=[]),e.ROOT.push(t);return}a.forEach(i=>{e[i]||(e[i]=[]),e[i].push(t)})});let o=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${r}" LAST_MODIFIED="${r}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(e).forEach(t=>{t!=="ROOT"&&t!=="other"&&(o+=`
    <DT><H3 ADD_DATE="${r}" LAST_MODIFIED="${r}">${t}</H3>
    <DL><p>`,e[t].forEach(a=>{const i=a.title.replace(/"/g,"&quot;");o+=`
        <DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||r}">${i}</A>`}),o+=`
    </DL><p>`)}),e.ROOT&&e.ROOT.forEach(t=>{const a=t.title.replace(/"/g,"&quot;");o+=`
    <DT><A HREF="${t.url}" ADD_DATE="${Math.floor(t.createdAt/1e3)||r}">${a}</A>`}),o+=`
</DL><p>`,e.other&&e.other.forEach(t=>{const a=t.title.replace(/"/g,"&quot;");o+=`
    <DT><A HREF="${t.url}" ADD_DATE="${Math.floor(t.createdAt/1e3)||r}">${a}</A>`}),o+="</DL><p>",o},V=async T=>{const r="notes-export.json",e=JSON.stringify({notes:T}),o=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(o),a=document.createElement("a");a.href=t,a.download=r,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(t)},0)};var Y=R('<p class="message svelte-8vhup1">Export items</p> <div class="format-switcher svelte-8vhup1"><!> <p class="format-description svelte-8vhup1"><!></p></div> <div class="buttonContainer svelte-8vhup1"><!></div>',1),K=R('<p class="message svelte-8vhup1">Exporting data...</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),W=R('<p class="message svelte-8vhup1">Items exported successfully!</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),X=R('<div class="content svelte-8vhup1"><!></div>');function ae(T,r){U(r,!0);let e=y("idle"),o=y("html");const t=()=>{G()};B(()=>{$(f(e)==="loading")}),F(()=>()=>{$(!1)});const a=async()=>{L(e,"loading"),setTimeout(async()=>{if(f(o)==="json")await V(N()()||[]).finally(()=>{L(e,"success")});else try{const l=Q(q()()||new Map),p=new Blob([l],{type:"text/html"}),d=URL.createObjectURL(p),c=document.createElement("a");c.href=d,c.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(d),L(e,"success")}catch(l){console.error("Error exporting as HTML:",l),L(e,"success")}},0)};var i=X(),k=m(i);{var M=l=>{var p=Y(),d=g(O(p),2),c=m(d);z(c,{items:[{title:"HTML",value:"html"},{title:"JSON",value:"json"}],get value(){return f(o)},onChange:s=>{L(o,s,!0)}});var C=g(c,2),v=m(C);{var u=s=>{var h=b("JSON format (App compatible, a faster format)");n(s,h)},D=s=>{var h=b("HTML format (Browser compatible)");n(s,h)};A(v,s=>{f(o)==="json"?s(u):s(D,!1)})}var _=g(d,2),E=m(_);w(E,{onClick:a,children:(s,h)=>{var x=b("Export");n(s,x)},$$slots:{default:!0}}),n(l,p)},S=l=>{var p=H(),d=O(p);{var c=v=>{var u=K(),D=g(O(u),2),_=m(D);J(_,{}),n(v,u)},C=v=>{var u=H(),D=O(u);{var _=E=>{var s=W(),h=g(O(s),2),x=m(h);w(x,{onClick:t,children:(j,Z)=>{var I=b("Close");n(j,I)},$$slots:{default:!0}}),n(E,s)};A(D,E=>{f(e)==="success"&&E(_)},!0)}n(v,u)};A(d,v=>{f(e)==="loading"?v(c):v(C,!1)},!0)}n(l,p)};A(k,l=>{f(e)==="idle"?l(M):l(S,!1)})}n(T,i),P()}export{ae as default};
