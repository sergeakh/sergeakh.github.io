import{o as P,p as Z,C as u,u as j,a7 as z,g as i,a as E,f as A,h as L,i as y,c as v,e as C,a8 as p,l as M,m as h,a9 as T,n as U,q as x,r as q,b as g,d as F,X as H,Y as R,Z as V,t as X,w as W,k as Y}from"./index-C1vnfXtA.js";const $=({getDialog:l,onOpen:e,onStartClose:a,onClose:r})=>{const d=t=>{t.preventDefault(),a()},n=()=>{r?.()};P(()=>{const t=l();return t?.addEventListener("cancel",d),t?.addEventListener("close",n),()=>{t?.removeEventListener("cancel",d),t?.removeEventListener("close",n)}}),P(()=>{const t=l();t?.showModal(),t?.getBoundingClientRect(),e()})};var ee=(l,e)=>{e.onStartBack()},te=A('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),ae=(l,e)=>{e.onStartClose()},ne=A('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),oe=A('<dialog><div class="dialogInner svelte-isq3u8"><div class="header svelte-isq3u8"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function le(l,e){Z(e,!0);let a=u(e,"blockedDialog",3,!1),r=u(e,"hiddenDialog",3,!1),d=u(e,"isDesktopAnimationOff",3,!1),n=E(null),t=E(null);$({getDialog:()=>i(n),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose}),j(()=>{e.stateDialog==="closing"&&(z.working?i(n)?.addEventListener("transitionend",()=>{i(n)?.close()},{once:!0}):i(n)?.close())});var k=oe(),f=L(k),D=v(f),_=v(D),m=v(_),I=v(m);{var b=o=>{var s=te();x(s,1,q(["navigateButton","buttonBack"]),"svelte-isq3u8"),s.__click=[ee,e];var c=v(s);H(c,()=>({"--size":"20px"})),R(c.lastChild,{name:"back"});var B=C(c,2);V(B,{children:(O,Q)=>{var w=X("back");g(O,w)}}),g(o,s)};y(I,o=>{(!(a()||r())||a()&&e.unBlockedBack)&&e.onStartBack&&o(b)})}var S=C(m,2),G=v(S);{var J=o=>{var s=ne();x(s,1,q(["navigateButton","buttonClose"]),"svelte-isq3u8"),s.__click=[ae,e];var c=v(s);H(c,()=>({"--size":"20px"})),R(c.lastChild,{name:"close"});var B=C(c,2);V(B,{children:(O,Q)=>{var w=X("close");g(O,w)}}),g(o,s)};y(G,o=>{a()||r()||o(J)})}var K=C(_,2);p(K,()=>e.children),M(D,o=>h(t,o),()=>i(t)),M(f,o=>h(n,o),()=>i(n));var N=C(f,2);T(N,{get dialog(){return i(n)},get dialogInner(){return i(t)},get onClose(){return e.onStartClose}}),U(()=>x(f,1,q([{open:e.stateDialog==="open",isAnimationOn:z.working,isDesktopAnimationOff:d(),hiddenDialog:r()}]),"svelte-isq3u8")),g(l,k),F()}W(["click"]);const se=({onStartClose:l,onClose:e})=>{let a=E("close");return{get state(){return i(a)},set state(t){h(a,t,!0)},handleStartClose:(t=!1)=>{t||(h(a,"closing"),l?.())},handleOpen:()=>{h(a,"open")},handleClose:()=>{h(a,"close"),e?.()}}};function re(l,e){Z(e,!0);let a=u(e,"blockedDialog",3,!1),r=u(e,"hiddenDialog",3,!1),d=u(e,"onStartClose",3,()=>{}),n=u(e,"onClose",3,()=>{}),t=se({onStartClose:d(),onClose:n()});j(()=>{t.state==="close"&&e.shownDialog?t.state="opening":t.state==="open"&&!e.shownDialog&&t.handleStartClose(a())});var k=Y(),f=L(k);{var D=_=>{le(_,{get stateDialog(){return t.state},get blockedDialog(){return a()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return t.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{t.handleStartClose(a())},get onClose(){return t.handleClose},children:(m,I)=>{var b=Y(),S=L(b);p(S,()=>e.children),g(m,b)},$$slots:{default:!0}})};y(f,_=>{t.state!=="close"&&_(D)})}g(l,k),F()}export{re as default};
