import{p as D,a as T,P as K,o as $,s as S,Q as u,u as j,g as p,f as d,i as y,c,b as o,d as L,m as g,R as O,S as R,T as z,z as I,e as _,h as v,L as J,k as M,B as N,t as P}from"./index-C1vnfXtA.js";import{g as Q}from"./api-7nXQQ8YG.js";var t=(r=>(r[r.Signup=0]="Signup",r[r.SignupError=1]="SignupError",r))(t||{}),V=d('<p class="message svelte-9hh95f">signup</p> <!>',1),W=d('<p class="message svelte-9hh95f">error signup</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),q=d('<div class="content svelte-9hh95f"><!></div>');function X(r,b){D(b,!0);let s=T(K(t.Signup));const f=async()=>{g(s,t.Signup,!0);try{const a=await Q(),e=crypto.getRandomValues(new Uint8Array(32)),n=await O({challenge:a,clientKey:e}),l=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(l.status!==200){g(s,t.SignupError,!0);return}const i=await l.json();await R({clientKey:e,serverKey:new Uint8Array(z(i.serverKey))}),S(!1),I()}catch{g(s,t.SignupError,!0)}};$(()=>(S(!0),u(!1),f(),()=>{u(!1)})),j(()=>{u(p(s)!==t.Signup)});var h=q(),k=c(h);{var w=a=>{var e=V(),n=_(v(e),2);J(n),o(a,e)},U=a=>{var e=M(),n=v(e);{var l=i=>{var m=W(),B=_(v(m),2),C=c(B),A=c(C);N(A,{onClick:()=>f(),fullWidth:!0,children:(E,F)=>{var x=P("try again");o(E,x)},$$slots:{default:!0}}),o(i,m)};y(n,i=>{p(s)===t.SignupError&&i(l)},!0)}o(a,e)};y(k,a=>{p(s)===t.Signup?a(w):a(U,!1)})}o(r,h),L()}export{X as default};
