import{U as G,p as F,W as Q,f as b,q as X,m as E,X as j,Y as S,s as g,t as H,Z as D,h as c,_ as Y,$ as J,r as V,c as p,b as v,a0 as W,k as P,n as Z,u as z,g as B,d as I,o as K,j as k,i as A,B as M,v as x,l as U,a1 as ee,Q as te,L as ae,G as se}from"./index-CjUy5aUj.js";const oe=m=>{const s=Math.floor(Date.now()/1e3),e={};m.forEach(t=>{const a=t.tags||["Imported"];if(a.length===0){e.ROOT||(e.ROOT=[]),e.ROOT.push(t);return}a.forEach(d=>{e[d]||(e[d]=[]),e[d].push(t)})});let o=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(e).forEach(t=>{t!=="ROOT"&&t!=="other"&&(o+=`
    <DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}">${t}</H3>
    <DL><p>`,e[t].forEach(a=>{const d=a.name.replace(/"/g,"&quot;");o+=`
        <DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||s}">${d}</A>`}),o+=`
    </DL><p>`)}),e.ROOT&&e.ROOT.forEach(t=>{const a=t.name.replace(/"/g,"&quot;");o+=`
    <DT><A HREF="${t.url}" ADD_DATE="${Math.floor(t.createdAt/1e3)||s}">${a}</A>`}),o+=`
</DL><p>`,e.other&&e.other.forEach(t=>{const a=t.name.replace(/"/g,"&quot;");o+=`
    <DT><A HREF="${t.url}" ADD_DATE="${Math.floor(t.createdAt/1e3)||s}">${a}</A>`}),o+="</DL><p>",o},re=async m=>{const s="notes-export.json",e=JSON.stringify({notes:m}),o=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(o),a=document.createElement("a");a.href=t,a.download=s,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(t)},0)},le=(m,s,e)=>{s(m.target.value),e.onChange(s())};var ne=b('<input type="radio"/> <label> </label>',1),ce=b('<div class="wrapper svelte-egvjdf"><fieldset class="switcher svelte-egvjdf"><!> <div class="wrapSwitcherStatus svelte-egvjdf"><div class="switcherStatus svelte-egvjdf"></div></div></fieldset></div>');function ie(m,s){const e=G();F(s,!0);let o=Q(s,"value",7);const t=`switcher-${e}`;var a=ce(),d=p(a),L=p(d);X(L,17,()=>s.items,r=>r.title,(r,n)=>{var f=ne(),l=E(f);j(l,1,S(["vh","input"]),"svelte-egvjdf"),l.__change=[le,o,s];var h=g(l,2);j(h,1,S(["switcherButton"]),"svelte-egvjdf");var u=p(h);H(()=>{D(l,"id",`${c(n).title}-${e}`),D(l,"name",t),Y(l,c(n).value),J(l,c(n).value===o()),D(l,"aria-label",c(n).title),D(h,"for",`${c(n).title}-${e}`),D(h,"title",c(n).title),D(h,"aria-label",c(n).title),V(u,c(n).title)}),v(r,f)});var C=g(L,2),R=p(C);H(r=>W(R,r),[()=>`transform: translateX(${s.items.findIndex(r=>r.value===o())*100}%)`]),v(m,a),P()}Z(["change"]);var ve=b('<p class="message svelte-owa53m">Export data</p> <div class="format-switcher svelte-owa53m"><!> <p class="format-description svelte-owa53m"><!></p></div> <div class="buttonContainer svelte-owa53m"><!></div>',1),de=b('<p class="message svelte-owa53m">Exporting data...</p> <div class="buttonContainer svelte-owa53m"><!></div>',1),fe=b('<p class="message svelte-owa53m">Data exported successfully!</p> <div class="buttonContainer svelte-owa53m"><!></div>',1),ue=b('<div class="content svelte-owa53m"><!></div>');function he(m,s){F(s,!0);let e=I("idle"),o=I("sync");const t=()=>{se()};z(()=>{B(c(e)==="loading")}),K(()=>()=>{B(!1)});const a=async()=>{A(e,"loading"),setTimeout(async()=>{if(c(o)==="sync")await re(ee()()||[]).finally(async()=>{await new Promise(r=>setTimeout(r,500)),A(e,"success")});else try{const r=oe(te()()||new Map),n=new Blob([r],{type:"text/html"}),f=URL.createObjectURL(n),l=document.createElement("a");l.href=f,l.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(f),A(e,"success")}catch{A(e,"success")}},0)};var d=ue(),L=p(d);{var C=r=>{var n=ve(),f=g(E(n),2),l=p(f);ie(l,{items:[{title:"Sync",value:"sync"},{title:"Bookmarks",value:"bookmarks"}],get value(){return c(o)},onChange:i=>{A(o,i,!0)}});var h=g(l,2),u=p(h);{var _=i=>{var T=x("App format for sync or backup");v(i,T)},w=i=>{var T=x("Browser bookmarks format (exports only bookmarks, not notes)");v(i,T)};k(u,i=>{c(o)==="sync"?i(_):i(w,!1)})}var O=g(f,2),y=p(O);M(y,{onClick:a,children:(i,T)=>{var $=x("Export");v(i,$)},$$slots:{default:!0}}),v(r,n)},R=r=>{var n=U(),f=E(n);{var l=u=>{var _=de(),w=g(E(_),2),O=p(w);ae(O,{}),v(u,_)},h=u=>{var _=U(),w=E(_);{var O=y=>{var i=fe(),T=g(E(i),2),$=p(T);M($,{onClick:t,children:(N,pe)=>{var q=x("Close");v(N,q)},$$slots:{default:!0}}),v(y,i)};k(w,y=>{c(e)==="success"&&y(O)},!0)}v(u,_)};k(f,u=>{c(e)==="loading"?u(l):u(h,!1)},!0)}v(r,n)};k(L,r=>{c(e)==="idle"?r(C):r(R,!1)})}v(m,d),P()}export{he as default};
