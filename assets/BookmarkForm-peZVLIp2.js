import{p as le,W as c,d as o,e as g,u as re,h as t,f as ie,c as v,s as d,i as l,a4 as se,q as O,a7 as D,j as z,x as p,t as ne,r as oe,a8 as de,H as ue,b as A,k as ce,l as ve,m as fe,a9 as J,a1 as he,n as me}from"./index-C6ph0cVZ.js";import{I as E}from"./Input-C4nAY136.js";const ge=(_,s,b,x,y,f)=>{_.preventDefault(),s.onSubmit({title:t(b).trim().slice(0,256)||"unkwown",url:t(x).trim().slice(0,2048),description:t(y).trim().slice(0,2048),tags:t(f).length>0?t(f):["inbox"]})};var pe=ie('<div class="form svelte-elpyds"><!> <!> <textarea placeholder="notes" class="svelte-elpyds"></textarea> <form class="formTags svelte-elpyds"><div class="tags svelte-elpyds"><!> <!> <!></div> <div class="searchWrapper svelte-elpyds"><!></div></form> <button class="buttonSubmit svelte-elpyds" type="submit"> </button></div>');function xe(_,s){le(s,!0);let b=c(s,"initialTitle",3,""),x=c(s,"initialUrl",3,""),y=c(s,"initialDescription",3,""),f=c(s,"initialTags",19,()=>[]),K=c(s,"mode",3,"add"),a=o(""),k=o(g(b())),h=o(g(x())),T=o(""),C=o(g(y())),i=o(g(f().filter(e=>e!=="inbox"))),n=o(null);const w=e=>{t(i).includes(e)||(l(a,""),l(i,[...t(i),e],!0))},M=e=>{const r=t(i).filter(u=>u!==e);r.length===0?l(i,[],!0):l(i,r,!0)};let P=p(()=>J()?[...(he()()||[]).reduce((e,r)=>(r?.tags.forEach(u=>{e.has(u)||e.add(u)}),e),new Set)]:[]),I=p(()=>J()?t(P).filter(e=>!t(i).some(r=>e===r)&&e!=="inbox"):[]),S=p(()=>t(I).find(e=>e.toLowerCase()===t(a).toLowerCase())||t(i).includes(t(a))),Q=p(()=>t(I).filter(e=>t(a)===""?!0:e.toLowerCase().indexOf(t(a).toLowerCase())!==-1).slice(0,t(S)||t(a)===""?3:2));const V=e=>{l(T,""),l(h,e.target.value||"",!0);try{new URL(t(h))}catch{l(T,"Invalid URL")}},X=e=>{e.preventDefault(),t(a)!==""&&!t(S)&&(w(t(a)),l(a,""))},R=()=>{t(n)&&(t(n).style.height="auto",t(n).style.height=t(n).scrollHeight+"px")};re(()=>{t(n),R()});var B=pe(),H=v(B);E(H,{get value(){return t(h)},get error(){return t(T)},onInput:V,placeholder:"url"});var N=d(H,2);E(N,{placeholder:"title",get value(){return t(k)},set value(e){l(k,e,!0)}});var m=d(N,2);m.__input=R,se(m,e=>l(n,e),()=>t(n));var L=d(m,2),W=v(L),j=v(W);O(j,16,()=>t(i),e=>e,(e,r)=>{D(e,{get title(){return r},onClick:()=>M(r),type:"button",style:"selected"})});var q=d(j,2);{var Y=e=>{var r=ve(),u=fe(r);O(u,16,()=>t(Q),U=>U,(U,G)=>{D(U,{get title(){return G},onClick:()=>w(G)})}),A(e,r)};z(q,e=>{t(a)!==""&&e(Y)})}var Z=d(q,2);{var $=e=>{D(e,{get title(){return t(a)},onClick:()=>{w(t(a)),l(a,"")}})};z(Z,e=>{!t(S)&&t(a)!==""&&e($)})}var ee=d(W,2),te=v(ee);E(te,{placeholder:"search tag",get value(){return t(a)},set value(e){l(a,e,!0)}});var F=d(L,2);F.__click=[ge,s,k,h,C,i];var ae=v(F);ne(()=>oe(ae,K()==="add"?"add":"edit")),de(m,()=>t(C),e=>l(C,e)),ue("submit",L,X),A(_,B),ce()}me(["input","click"]);export{xe as B};
