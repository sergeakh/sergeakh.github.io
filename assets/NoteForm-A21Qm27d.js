import{p as ue,W as v,d,e as h,u as ce,h as t,f as ve,c as o,s as u,a4 as fe,i,q as A,a7 as D,j as B,x as p,t as me,r as he,H as J,a8 as K,b as M,k as pe,l as ge,m as _e,a9 as P,a1 as be,n as ye}from"./index-BZKyeLya.js";import{I as Q}from"./Input-lAG53kpe.js";const xe=(g,l,_,b,y,f)=>{g.preventDefault(),l.onSubmit({title:t(_).trim().slice(0,256)||"unkwown",url:t(b).trim().slice(0,2048),description:t(y).trim().slice(0,2048),tags:t(f).length>0?t(f):["inbox"]})};var Te=ve('<div class="form svelte-sonnay"><div class="formFields"><!> <form><input class="inputName svelte-sonnay" placeholder="Name"/></form> <textarea placeholder="Note" class="svelte-sonnay"></textarea></div> <div class="formTagsWrapper svelte-sonnay"><form class="formTags svelte-sonnay"><div class="tags svelte-sonnay"><!> <!> <!></div> <div class="searchWrapper svelte-sonnay"><!></div></form></div> <div class="submitWrapper svelte-sonnay"><button class="buttonSubmit svelte-sonnay" type="submit"> </button></div></div>');function we(g,l){ue(l,!0);let _=v(l,"initialTitle",3,""),b=v(l,"initialUrl",3,""),y=v(l,"initialDescription",3,""),f=v(l,"initialTags",19,()=>[]),V=v(l,"mode",3,"add"),a=d(""),x=d(h(_())),m=d(h(b())),T=d(""),k=d(h(y())),s=d(h(f().filter(e=>e!=="inbox"))),n=d(null);const C=e=>{t(s).includes(e)||(i(a,""),i(s,[...t(s),e],!0))},X=e=>{const r=t(s).filter(c=>c!==e);r.length===0?i(s,[],!0):i(s,r,!0)};let Y=p(()=>P()?[...(be()()||[]).reduce((e,r)=>(r?.tags.forEach(c=>{e.has(c)||e.add(c)}),e),new Set)]:[]),U=p(()=>P()?t(Y).filter(e=>!t(s).some(r=>e===r)&&e!=="inbox"):[]),w=p(()=>t(U).find(e=>e.toLowerCase()===t(a).toLowerCase())||t(s).includes(t(a))),Z=p(()=>t(U).filter(e=>t(a)===""?!0:e.toLowerCase().indexOf(t(a).toLowerCase())!==-1).slice(0,t(w)||t(a)===""?3:2));const $=e=>{i(T,""),i(m,e.target.value||"",!0);try{new URL(t(m))}catch{i(T,"Invalid URL")}},ee=e=>{e.preventDefault(),t(a)!==""&&!t(w)&&(C(t(a)),i(a,""))},E=()=>{t(n)&&(t(n).style.height="auto",t(n).style.height=t(n).scrollHeight+"px")};ce(()=>{t(n),E()});const te=e=>{e.preventDefault(),t(n)&&t(n).focus()};var I=Te(),W=o(I),R=o(W);Q(R,{get value(){return t(m)},get error(){return t(T)},onInput:$,placeholder:"url"});var S=u(R,2),ae=o(S),N=u(S,2);N.__input=E,fe(N,e=>i(n,e),()=>t(n));var F=u(W,2),H=o(F),j=o(H),q=o(j);A(q,16,()=>t(s),e=>e,(e,r)=>{D(e,{get title(){return r},onClick:()=>X(r),type:"button",style:"selected"})});var G=u(q,2);{var ie=e=>{var r=ge(),c=_e(r);A(c,16,()=>t(Z),L=>L,(L,z)=>{D(L,{get title(){return z},onClick:()=>C(z)})}),M(e,r)};B(G,e=>{t(a)!==""&&e(ie)})}var re=u(G,2);{var se=e=>{D(e,{get title(){return t(a)},onClick:()=>{C(t(a)),i(a,"")}})};B(re,e=>{!t(w)&&t(a)!==""&&e(se)})}var le=u(j,2),ne=o(le);Q(ne,{placeholder:"tag",get value(){return t(a)},set value(e){i(a,e,!0)}});var oe=u(F,2),O=o(oe);O.__click=[xe,l,x,m,k,s];var de=o(O);me(()=>he(de,V()==="add"?"add":"edit")),J("submit",S,te),K(ae,()=>t(x),e=>i(x,e)),K(N,()=>t(k),e=>i(k,e)),J("submit",H,ee),M(g,I),pe()}ye(["input","click"]);export{we as N};
