import{p as le,W as v,d as n,e as g,u as se,h as t,f as ne,c as o,s as d,i,a4 as oe,q as A,a7 as L,j as B,x as _,t as de,r as ue,a8 as ce,H as ve,b as J,k as fe,l as me,m as he,a9 as K,a1 as ge,n as _e}from"./index-BL9aR03j.js";import{I as U}from"./Input-Dn3bI2tj.js";const pe=(p,s,b,k,x,f)=>{p.preventDefault(),s.onSubmit({title:t(b).trim().slice(0,256)||"unkwown",url:t(k).trim().slice(0,2048),description:t(x).trim().slice(0,2048),tags:t(f).length>0?t(f):["inbox"]})};var be=ne('<div class="form svelte-o4iojk"><div class="formFields"><!> <!> <textarea placeholder="notes" class="svelte-o4iojk"></textarea> <form class="formTags svelte-o4iojk"><div class="tags svelte-o4iojk"><!> <!> <!></div> <div class="searchWrapper svelte-o4iojk"><!></div></form></div> <div class="submitWrapper svelte-o4iojk"><button class="buttonSubmit svelte-o4iojk" type="submit"> </button></div></div>');function Te(p,s){le(s,!0);let b=v(s,"initialTitle",3,""),k=v(s,"initialUrl",3,""),x=v(s,"initialDescription",3,""),f=v(s,"initialTags",19,()=>[]),M=v(s,"mode",3,"add"),a=n(""),T=n(g(b())),m=n(g(k())),C=n(""),w=n(g(x())),l=n(g(f().filter(e=>e!=="inbox"))),u=n(null);const j=e=>{t(l).includes(e)||(i(a,""),i(l,[...t(l),e],!0))},P=e=>{const r=t(l).filter(c=>c!==e);r.length===0?i(l,[],!0):i(l,r,!0)};let Q=_(()=>K()?[...(ge()()||[]).reduce((e,r)=>(r?.tags.forEach(c=>{e.has(c)||e.add(c)}),e),new Set)]:[]),D=_(()=>K()?t(Q).filter(e=>!t(l).some(r=>e===r)&&e!=="inbox"):[]),S=_(()=>t(D).find(e=>e.toLowerCase()===t(a).toLowerCase())||t(l).includes(t(a))),V=_(()=>t(D).filter(e=>t(a)===""?!0:e.toLowerCase().indexOf(t(a).toLowerCase())!==-1).slice(0,t(S)||t(a)===""?3:2));const X=e=>{i(C,""),i(m,e.target.value||"",!0);try{new URL(t(m))}catch{i(C,"Invalid URL")}},Y=e=>{e.preventDefault(),t(a)!==""&&!t(S)&&(j(t(a)),i(a,""))},E=()=>{t(u)&&(t(u).style.height=t(u).scrollHeight+"px")};se(()=>{t(u),E()});var I=be(),N=o(I),R=o(N);U(R,{get value(){return t(m)},get error(){return t(C)},onInput:X,placeholder:"url"});var W=d(R,2);U(W,{placeholder:"title",get value(){return t(T)},set value(e){i(T,e,!0)}});var h=d(W,2);h.__input=E,oe(h,e=>i(u,e),()=>t(u));var F=d(h,2),H=o(F),q=o(H);A(q,16,()=>t(l),e=>e,(e,r)=>{L(e,{get title(){return r},onClick:()=>P(r),type:"button",style:"selected"})});var G=d(q,2);{var Z=e=>{var r=me(),c=he(r);A(c,16,()=>t(V),y=>y,(y,z)=>{L(y,{get title(){return z},onClick:()=>j(z)})}),J(e,r)};B(G,e=>{t(a)!==""&&e(Z)})}var $=d(G,2);{var ee=e=>{L(e,{get title(){return t(a)},onClick:()=>{j(t(a)),i(a,"")}})};B($,e=>{!t(S)&&t(a)!==""&&e(ee)})}var te=d(H,2),ae=o(te);U(ae,{placeholder:"search tag",get value(){return t(a)},set value(e){i(a,e,!0)}});var ie=d(N,2),O=o(ie);O.__click=[pe,s,T,m,w,l];var re=o(O);de(()=>ue(re,M()==="add"?"add":"edit")),ce(h,()=>t(w),e=>i(w,e)),ve("submit",F,Y),J(p,I),fe()}_e(["input","click"]);export{Te as N};
