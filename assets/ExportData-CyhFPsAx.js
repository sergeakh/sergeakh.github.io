import{K as J,p as q,M as K,f as O,r as V,n as y,N as B,O as U,s as b,t as F,Q as k,i as n,R as X,S as Y,v as W,c as p,b as i,T as Z,l as G,q as ee,C as te,z as ae,d as se,u as re,e as j,o as oe,k as R,j as w,B as P,w as $,m as N,L as le}from"./index-DGGsS_Lk.js";const ne=h=>{const s=Math.floor(Date.now()/1e3),t={};h.forEach(e=>{const a=e.tags||["Imported"];if(a.length===0){t.ROOT||(t.ROOT=[]),t.ROOT.push(e);return}a.forEach(l=>{t[l]||(t[l]=[]),t[l].push(e)})});let o=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(t).forEach(e=>{e!=="ROOT"&&e!=="other"&&(o+=`
    <DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}">${e}</H3>
    <DL><p>`,t[e].forEach(a=>{const l=a.name.replace(/"/g,"&quot;");o+=`
        <DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||s}">${l}</A>`}),o+=`
    </DL><p>`)}),t.ROOT&&t.ROOT.forEach(e=>{const a=e.name.replace(/"/g,"&quot;");o+=`
    <DT><A HREF="${e.url}" ADD_DATE="${Math.floor(e.createdAt/1e3)||s}">${a}</A>`}),o+=`
</DL><p>`,t.other&&t.other.forEach(e=>{const a=e.name.replace(/"/g,"&quot;");o+=`
    <DT><A HREF="${e.url}" ADD_DATE="${Math.floor(e.createdAt/1e3)||s}">${a}</A>`}),o+="</DL><p>",o},ce=async h=>{const s="notes-export.json",t=JSON.stringify({notes:h}),o=new Blob([t],{type:"application/json"}),e=URL.createObjectURL(o),a=document.createElement("a");a.href=e,a.download=s,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(e)},0)},ie=(h,s,t)=>{s(h.target.value),t.onChange(s())};var ve=O('<input type="radio"/> <label> </label>',1),de=O('<div class="wrapper svelte-yu87bd"><fieldset class="switcher svelte-yu87bd"><!> <div class="wrapSwitcherStatus svelte-yu87bd"><div class="switcherStatus svelte-yu87bd"></div></div></fieldset></div>');function ue(h,s){const t=J();q(s,!0);let o=K(s,"value",7);const e=`switcher-${t}`;var a=de(),l=p(a),T=p(l);V(T,17,()=>s.items,v=>v.title,(v,d)=>{var C=ve(),u=y(C);B(u,1,U(["vh","input"]),"svelte-yu87bd"),u.__change=[ie,o,s];var r=b(u,2);B(r,1,U(["switcherButton"]),"svelte-yu87bd");var m=p(r);F(()=>{k(u,"id",`${n(d).title}-${t}`),k(u,"name",e),X(u,n(d).value),Y(u,n(d).value===o()),k(u,"aria-label",n(d).title),k(r,"for",`${n(d).title}-${t}`),k(r,"title",n(d).title),k(r,"aria-label",n(d).title),W(m,n(d).title)}),i(v,C)});var S=b(T,2),H=p(S);F(v=>Z(H,v),[()=>`transform: translateX(${s.items.findIndex(v=>v.value===o())*100}%)`]),i(h,a),G()}ee(["change"]);var fe=O('<p class="message svelte-1rr554k">Export data</p> <div class="format-switcher svelte-1rr554k"><!> <p class="format-description svelte-1rr554k"><!></p></div> <div class="buttonContainer svelte-1rr554k"><!></div>',1),pe=O('<p class="message svelte-1rr554k">Exporting data...</p> <div class="buttonContainer svelte-1rr554k"><!></div>',1),he=O('<p class="message svelte-1rr554k">Data exported successfully!</p> <div class="buttonContainer svelte-1rr554k"><!></div>',1),me=O('<div class="content svelte-1rr554k"><!></div>');function De(h,s){q(s,!0);const{getGetNotes:t,getGetMapNotes:o}=te(),{closeDialogStack:e}=ae(),{blockDialog:a}=se();let l=j("idle"),T=j("sync");const S=()=>{e()};re(()=>{a(n(l)==="loading")}),oe(()=>()=>{a(!1)});const H=async()=>{w(l,"loading"),setTimeout(async()=>{if(n(T)==="sync")await ce(t()()||[]).finally(async()=>{await new Promise(r=>setTimeout(r,500)),w(l,"success")});else try{const r=ne(o()()||new Map),m=new Blob([r],{type:"text/html"}),D=URL.createObjectURL(m),f=document.createElement("a");f.href=D,f.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(D),w(l,"success")}catch{w(l,"success")}},0)};var v=me(),d=p(v);{var C=r=>{var m=fe(),D=b(y(m),2),f=p(D);ue(f,{items:[{title:"Sync",value:"sync"},{title:"Bookmarks",value:"bookmarks"}],get value(){return n(T)},onChange:c=>{w(T,c,!0)}});var M=b(f,2),_=p(M);{var g=c=>{var E=$("App format for sync or backup");i(c,E)},A=c=>{var E=$("Browser bookmarks format (exports only bookmarks, not notes)");i(c,E)};R(_,c=>{n(T)==="sync"?c(g):c(A,!1)})}var x=b(D,2),L=p(x);P(L,{onClick:H,children:(c,E)=>{var I=$("Export");i(c,I)},$$slots:{default:!0}}),i(r,m)},u=r=>{var m=N(),D=y(m);{var f=_=>{var g=pe(),A=b(y(g),2),x=p(A);le(x,{}),i(_,g)},M=_=>{var g=N(),A=y(g);{var x=L=>{var c=he(),E=b(y(c),2),I=p(E);P(I,{onClick:S,children:(Q,_e)=>{var z=$("Close");i(Q,z)},$$slots:{default:!0}}),i(L,c)};R(A,L=>{n(l)==="success"&&L(x)},!0)}i(_,g)};R(D,_=>{n(l)==="loading"?_(f):_(M,!1)},!0)}i(r,m)};R(d,r=>{n(l)==="idle"?r(C):r(u,!1)})}i(h,v),G()}export{De as default};
