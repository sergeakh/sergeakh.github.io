var Na=Object.defineProperty;var Ma=(t,e,n)=>e in t?Na(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var rt=(t,e,n)=>Ma(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const $n=!1;var Ln=Array.isArray,Ia=Array.prototype.indexOf,An=Array.from,Ba=Object.defineProperty,wt=Object.getOwnPropertyDescriptor,_r=Object.getOwnPropertyDescriptors,Ra=Object.prototype,Fa=Array.prototype,Pn=Object.getPrototypeOf,er=Object.isExtensible;const Ht=()=>{};function Ua(t){return t()}function Zt(t){for(var e=0;e<t.length;e++)t[e]()}const Pe=2,mr=4,rn=8,xn=16,Je=32,Ct=64,On=128,Le=256,Qt=512,xe=1024,Ve=2048,ft=4096,ze=8192,Nn=16384,wr=32768,an=65536,tr=1<<17,Ka=1<<18,yr=1<<19,mn=1<<20,it=Symbol("$state"),Ha=Symbol("legacy props"),ja=Symbol(""),Sr=new class extends Error{constructor(){super(...arguments);rt(this,"name","StaleReactionError");rt(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function br(t){return t===this.v}function za(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Er(t){return!za(t,this.v)}function Va(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Wa(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ya(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ja(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Xa(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function qa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ga(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Za(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Tt=!1,Qa=!1;function $a(){Tt=!0}const Mn=1,In=2,kr=4,es=8,ts=16,ns=1,rs=2,as=4,ss=8,os=16,is=1,ls=2,Ce=Symbol(),cs="http://www.w3.org/1999/xhtml";function us(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let fe=null;function nr(t){fe=t}function W(t,e=!1,n){var r=fe={p:fe,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Tt&&!e&&(fe.l={s:null,u:null,r1:[],r2:It(!1)}),Mr(()=>{r.d=!0})}function Y(t){const e=fe;if(e!==null){t!==void 0&&(e.x=t);const i=e.e;if(i!==null){var n=se,r=ne;e.e=null;try{for(var a=0;a<i.length;a++){var s=i[a];et(s.effect),Be(s.reaction),Bn(s.fn)}}finally{et(n),Be(r)}}fe=e.p,e.m=!0}return t||{}}function jt(){return!Tt||fe!==null&&fe.l===null}function ue(t){if(typeof t!="object"||t===null||it in t)return t;const e=Pn(t);if(e!==Ra&&e!==Fa)return t;var n=new Map,r=Ln(t),a=P(0),s=ne,i=l=>{var u=ne;Be(s);var d=l();return Be(u),d};return r&&n.set("length",P(t.length)),new Proxy(t,{defineProperty(l,u,d){(!("value"in d)||d.configurable===!1||d.enumerable===!1||d.writable===!1)&&qa();var c=n.get(u);return c===void 0?c=i(()=>{var f=P(d.value);return n.set(u,f),f}):S(c,d.value,!0),!0},deleteProperty(l,u){var d=n.get(u);if(d===void 0){if(u in l){const v=i(()=>P(Ce));n.set(u,v),fn(a)}}else{if(r&&typeof u=="string"){var c=n.get("length"),f=Number(u);Number.isInteger(f)&&f<c.v&&S(c,f)}S(d,Ce),fn(a)}return!0},get(l,u,d){var h;if(u===it)return t;var c=n.get(u),f=u in l;if(c===void 0&&(!f||(h=wt(l,u))!=null&&h.writable)&&(c=i(()=>{var g=ue(f?l[u]:Ce),p=P(g);return p}),n.set(u,c)),c!==void 0){var v=o(c);return v===Ce?void 0:v}return Reflect.get(l,u,d)},getOwnPropertyDescriptor(l,u){var d=Reflect.getOwnPropertyDescriptor(l,u);if(d&&"value"in d){var c=n.get(u);c&&(d.value=o(c))}else if(d===void 0){var f=n.get(u),v=f==null?void 0:f.v;if(f!==void 0&&v!==Ce)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return d},has(l,u){var v;if(u===it)return!0;var d=n.get(u),c=d!==void 0&&d.v!==Ce||Reflect.has(l,u);if(d!==void 0||se!==null&&(!c||(v=wt(l,u))!=null&&v.writable)){d===void 0&&(d=i(()=>{var h=c?ue(l[u]):Ce,g=P(h);return g}),n.set(u,d));var f=o(d);if(f===Ce)return!1}return c},set(l,u,d,c){var _;var f=n.get(u),v=u in l;if(r&&u==="length")for(var h=d;h<f.v;h+=1){var g=n.get(h+"");g!==void 0?S(g,Ce):h in l&&(g=i(()=>P(Ce)),n.set(h+"",g))}if(f===void 0)(!v||(_=wt(l,u))!=null&&_.writable)&&(f=i(()=>P(void 0)),S(f,ue(d)),n.set(u,f));else{v=f.v!==Ce;var p=i(()=>ue(d));S(f,p)}var y=Reflect.getOwnPropertyDescriptor(l,u);if(y!=null&&y.set&&y.set.call(c,d),!v){if(r&&typeof u=="string"){var k=n.get("length"),m=Number(u);Number.isInteger(m)&&m>=k.v&&S(k,m+1)}fn(a)}return!0},ownKeys(l){o(a);var u=Reflect.ownKeys(l).filter(f=>{var v=n.get(f);return v===void 0||v.v!==Ce});for(var[d,c]of n)c.v!==Ce&&!(d in l)&&u.push(d);return u},setPrototypeOf(){Ga()}})}function fn(t,e=1){S(t,t.v+e)}function zt(t){var e=Pe|Ve,n=ne!==null&&(ne.f&Pe)!==0?ne:null;return se===null||n!==null&&(n.f&Le)!==0?e|=Le:se.f|=yr,{ctx:fe,deps:null,effects:null,equals:br,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:n??se,ac:null}}function G(t){const e=zt(t);return jr(e),e}function Cr(t){const e=zt(t);return e.equals=Er,e}function Tr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)We(e[n])}}function ds(t){for(var e=t.parent;e!==null;){if((e.f&Pe)===0)return e;e=e.parent}return null}function Dr(t){var e,n=se;et(ds(t));try{Tr(t),e=Yr(t)}finally{et(n)}return e}function Lr(t){var e=Dr(t);if(t.equals(e)||(t.v=e,t.wv=Vr()),!Lt){var n=(Ze||(t.f&Le)!==0)&&t.deps!==null?ft:xe;Re(t,n)}}const Mt=new Map;function It(t,e){var n={f:0,v:t,reactions:null,equals:br,rv:0,wv:0};return n}function P(t,e){const n=It(t);return jr(n),n}function fs(t,e=!1,n=!0){var a;const r=It(t);return e||(r.equals=Er),Tt&&n&&fe!==null&&fe.l!==null&&((a=fe.l).s??(a.s=[])).push(r),r}function S(t,e,n=!1){ne!==null&&(!Ie||(ne.f&tr)!==0)&&jt()&&(ne.f&(Pe|xn|tr))!==0&&!(pe!=null&&pe[1].includes(t)&&pe[0]===ne)&&Za();let r=n?ue(e):e;return wn(t,r)}function wn(t,e){if(!t.equals(e)){var n=t.v;Lt?Mt.set(t,e):Mt.set(t,n),t.v=e,(t.f&Pe)!==0&&((t.f&Ve)!==0&&Dr(t),Re(t,(t.f&Le)===0?xe:ft)),t.wv=Vr(),Ar(t,Ve),jt()&&se!==null&&(se.f&xe)!==0&&(se.f&(Je|Ct))===0&&(Ae===null?ks([t]):Ae.push(t))}return e}function Ar(t,e){var n=t.reactions;if(n!==null)for(var r=jt(),a=n.length,s=0;s<a;s++){var i=n[s],l=i.f;(l&Ve)===0&&(!r&&i===se||(Re(i,e),(l&(xe|Le))!==0&&((l&Pe)!==0?Ar(i,ft):Kn(i))))}}let vs=!1;var rr,Pr,xr,Or;function hs(){if(rr===void 0){rr=window,Pr=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;xr=wt(e,"firstChild").get,Or=wt(e,"nextSibling").get,er(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),er(n)&&(n.__t=void 0)}}function sn(t=""){return document.createTextNode(t)}function yt(t){return xr.call(t)}function on(t){return Or.call(t)}function b(t,e){return yt(t)}function z(t,e){{var n=yt(t);return n instanceof Comment&&n.data===""?on(n):n}}function D(t,e=1,n=!1){let r=t;for(;e--;)r=on(r);return r}function gs(t){t.textContent=""}function Nr(t){se===null&&ne===null&&Ya(),ne!==null&&(ne.f&Le)!==0&&se===null&&Wa(),Lt&&Va()}function ps(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Dt(t,e,n,r=!0){var a=se,s={ctx:fe,deps:null,nodes_start:null,nodes_end:null,f:t|Ve,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Un(s),s.f|=wr}catch(u){throw We(s),u}else e!==null&&Kn(s);var i=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(yr|On))===0;if(!i&&r&&(a!==null&&ps(s,a),ne!==null&&(ne.f&Pe)!==0)){var l=ne;(l.effects??(l.effects=[])).push(s)}return s}function Mr(t){const e=Dt(rn,null,!1);return Re(e,xe),e.teardown=t,e}function ve(t){Nr();var e=se!==null&&(se.f&Je)!==0&&fe!==null&&!fe.m;if(e){var n=fe;(n.e??(n.e=[])).push({fn:t,effect:se,reaction:ne})}else{var r=Bn(t);return r}}function _s(t){return Nr(),ln(t)}function ms(t){const e=Dt(Ct,t,!0);return(n={})=>new Promise(r=>{n.outro?$t(e,()=>{We(e),r(void 0)}):(We(e),r(void 0))})}function Bn(t){return Dt(mr,t,!1)}function ln(t){return Dt(rn,t,!0)}function ie(t,e=[],n=zt){const r=e.map(n);return cn(()=>t(...r.map(o)))}function cn(t,e=0){var n=Dt(rn|xn|e,t,!0);return n}function St(t,e=!0){return Dt(rn|Je,t,!0,e)}function Ir(t){var e=t.teardown;if(e!==null){const n=Lt,r=ne;ar(!0),Be(null);try{e.call(null)}finally{ar(n),Be(r)}}}function Br(t,e=!1){var a;var n=t.first;for(t.first=t.last=null;n!==null;){(a=n.ac)==null||a.abort(Sr);var r=n.next;(n.f&Ct)!==0?n.parent=null:We(n,e),n=r}}function ws(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Je)===0&&We(e),e=n}}function We(t,e=!0){var n=!1;(e||(t.f&Ka)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ys(t.nodes_start,t.nodes_end),n=!0),Br(t,e&&!n),nn(t,0),Re(t,Nn);var r=t.transitions;if(r!==null)for(const s of r)s.stop();Ir(t);var a=t.parent;a!==null&&a.first!==null&&Rr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ys(t,e){for(;t!==null;){var n=t===e?null:on(t);t.remove(),t=n}}function Rr(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function $t(t,e){var n=[];Rn(t,n,!0),Fr(n,()=>{We(t),e&&e()})}function Fr(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var a of t)a.out(r)}else e()}function Rn(t,e,n){if((t.f&ze)===0){if(t.f^=ze,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var a=r.next,s=(r.f&an)!==0||(r.f&Je)!==0;Rn(r,e,s?n:!1),r=a}}}function en(t){Ur(t,!0)}function Ur(t,e){if((t.f&ze)!==0){t.f^=ze;for(var n=t.first;n!==null;){var r=n.next,a=(n.f&an)!==0||(n.f&Je)!==0;Ur(n,a?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let Bt=[],yn=[];function Kr(){var t=Bt;Bt=[],Zt(t)}function Ss(){var t=yn;yn=[],Zt(t)}function Fn(t){Bt.length===0&&queueMicrotask(Kr),Bt.push(t)}function bs(){Bt.length>0&&Kr(),yn.length>0&&Ss()}function Es(t){var e=se;if((e.f&wr)===0){if((e.f&On)===0)throw t;e.fn(t)}else Hr(t,e)}function Hr(t,e){for(;e!==null;){if((e.f&On)!==0)try{e.b.error(t);return}catch{}e=e.parent}throw t}let Rt=!1,Ft=null,lt=!1,Lt=!1;function ar(t){Lt=t}let xt=[];let ne=null,Ie=!1;function Be(t){ne=t}let se=null;function et(t){se=t}let pe=null;function jr(t){ne!==null&&ne.f&mn&&(pe===null?pe=[ne,[t]]:pe[1].push(t))}let Ee=null,De=0,Ae=null;function ks(t){Ae=t}let zr=1,tn=0,Ze=!1;function Vr(){return++zr}function un(t){var f;var e=t.f;if((e&Ve)!==0)return!0;if((e&ft)!==0){var n=t.deps,r=(e&Le)!==0;if(n!==null){var a,s,i=(e&Qt)!==0,l=r&&se!==null&&!Ze,u=n.length;if(i||l){var d=t,c=d.parent;for(a=0;a<u;a++)s=n[a],(i||!((f=s==null?void 0:s.reactions)!=null&&f.includes(d)))&&(s.reactions??(s.reactions=[])).push(d);i&&(d.f^=Qt),l&&c!==null&&(c.f&Le)===0&&(d.f^=Le)}for(a=0;a<u;a++)if(s=n[a],un(s)&&Lr(s),s.wv>t.wv)return!0}(!r||se!==null&&!Ze)&&Re(t,xe)}return!1}function Wr(t,e,n=!0){var r=t.reactions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];pe!=null&&pe[1].includes(t)&&pe[0]===ne||((s.f&Pe)!==0?Wr(s,e,!1):e===s&&(n?Re(s,Ve):(s.f&xe)!==0&&Re(s,ft),Kn(s)))}}function Yr(t){var h;var e=Ee,n=De,r=Ae,a=ne,s=Ze,i=pe,l=fe,u=Ie,d=t.f;Ee=null,De=0,Ae=null,Ze=(d&Le)!==0&&(Ie||!lt||ne===null),ne=(d&(Je|Ct))===0?t:null,pe=null,nr(t.ctx),Ie=!1,tn++,t.f|=mn,t.ac!==null&&(t.ac.abort(Sr),t.ac=null);try{var c=(0,t.fn)(),f=t.deps;if(Ee!==null){var v;if(nn(t,De),f!==null&&De>0)for(f.length=De+Ee.length,v=0;v<Ee.length;v++)f[De+v]=Ee[v];else t.deps=f=Ee;if(!Ze||(d&Pe)!==0&&t.reactions!==null)for(v=De;v<f.length;v++)((h=f[v]).reactions??(h.reactions=[])).push(t)}else f!==null&&De<f.length&&(nn(t,De),f.length=De);if(jt()&&Ae!==null&&!Ie&&f!==null&&(t.f&(Pe|ft|Ve))===0)for(v=0;v<Ae.length;v++)Wr(Ae[v],t);return a!==null&&a!==t&&(tn++,Ae!==null&&(r===null?r=Ae:r.push(...Ae))),c}catch(g){Es(g)}finally{Ee=e,De=n,Ae=r,ne=a,Ze=s,pe=i,nr(l),Ie=u,t.f^=mn}}function Cs(t,e){let n=e.reactions;if(n!==null){var r=Ia.call(n,t);if(r!==-1){var a=n.length-1;a===0?n=e.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(e.f&Pe)!==0&&(Ee===null||!Ee.includes(e))&&(Re(e,ft),(e.f&(Le|Qt))===0&&(e.f^=Qt),Tr(e),nn(e,0))}function nn(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)Cs(t,n[r])}function Un(t){var e=t.f;if((e&Nn)===0){Re(t,xe);var n=se,r=lt;se=t,lt=!0;try{(e&xn)!==0?ws(t):Br(t),Ir(t);var a=Yr(t);t.teardown=typeof a=="function"?a:null,t.wv=zr;var s;$n&&Qa&&(t.f&Ve)!==0&&t.deps}finally{lt=r,se=n}}}function Ts(){try{Ja()}catch(t){if(Ft!==null)Hr(t,Ft);else throw t}}function Jr(){var t=lt;try{var e=0;for(lt=!0;xt.length>0;){e++>1e3&&Ts();var n=xt,r=n.length;xt=[];for(var a=0;a<r;a++){var s=Ls(n[a]);Ds(s)}Mt.clear()}}finally{Rt=!1,lt=t,Ft=null}}function Ds(t){var e=t.length;if(e!==0)for(var n=0;n<e;n++){var r=t[n];(r.f&(Nn|ze))===0&&un(r)&&(Un(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Rr(r):r.fn=null))}}function Kn(t){Rt||(Rt=!0,queueMicrotask(Jr));for(var e=Ft=t;e.parent!==null;){e=e.parent;var n=e.f;if((n&(Ct|Je))!==0){if((n&xe)===0)return;e.f^=xe}}xt.push(e)}function Ls(t){for(var e=[],n=t;n!==null;){var r=n.f,a=(r&(Je|Ct))!==0,s=a&&(r&xe)!==0;if(!s&&(r&ze)===0){(r&mr)!==0?e.push(n):a?n.f^=xe:un(n)&&Un(n);var i=n.first;if(i!==null){n=i;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)n=l.next,l=l.parent}return e}function As(t){for(var e;;){if(bs(),xt.length===0)return Rt=!1,Ft=null,e;Rt=!0,Jr()}}async function Ps(){await Promise.resolve(),As()}function o(t){var e=t.f,n=(e&Pe)!==0;if(ne!==null&&!Ie){if(!(pe!=null&&pe[1].includes(t))||pe[0]!==ne){var r=ne.deps;t.rv<tn&&(t.rv=tn,Ee===null&&r!==null&&r[De]===t?De++:Ee===null?Ee=[t]:(!Ze||!Ee.includes(t))&&Ee.push(t))}}else if(n&&t.deps===null&&t.effects===null){var a=t,s=a.parent;s!==null&&(s.f&Le)===0&&(a.f^=Le)}return n&&(a=t,un(a)&&Lr(a)),Lt&&Mt.has(t)?Mt.get(t):t.v}function Vt(t){var e=Ie;try{return Ie=!0,t()}finally{Ie=e}}const xs=-7169;function Re(t,e){t.f=t.f&xs|e}function Os(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(it in t)Sn(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&it in n&&Sn(n)}}}function Sn(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Sn(t[r],e)}catch{}const n=Pn(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=_r(n);for(let a in r){const s=r[a].get;if(s)try{s.call(t)}catch{}}}}}const Ns=["touchstart","touchmove"];function Ms(t){return Ns.includes(t)}let sr=!1;function Is(){sr||(sr=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function Xr(t){var e=ne,n=se;Be(null),et(null);try{return t()}finally{Be(e),et(n)}}function Bs(t,e,n,r=n){t.addEventListener(e,()=>Xr(n));const a=t.__on_r;a?t.__on_r=()=>{a(),r(!0)}:t.__on_r=()=>r(!0),Is()}const qr=new Set,bn=new Set;function Rs(t,e,n,r={}){function a(s){if(r.capture||At.call(e,s),!s.cancelBubble)return Xr(()=>n==null?void 0:n.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Fn(()=>{e.addEventListener(t,a,r)}):e.addEventListener(t,a,r),a}function He(t,e,n,r,a){var s={capture:r,passive:a},i=Rs(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Mr(()=>{e.removeEventListener(t,i,s)})}function be(t){for(var e=0;e<t.length;e++)qr.add(t[e]);for(var n of bn)n(t)}function At(t){var m;var e=this,n=e.ownerDocument,r=t.type,a=((m=t.composedPath)==null?void 0:m.call(t))||[],s=a[0]||t.target,i=0,l=t.__root;if(l){var u=a.indexOf(l);if(u!==-1&&(e===document||e===window)){t.__root=e;return}var d=a.indexOf(e);if(d===-1)return;u<=d&&(i=u)}if(s=a[i]||t.target,s!==e){Ba(t,"currentTarget",{configurable:!0,get(){return s||n}});var c=ne,f=se;Be(null),et(null);try{for(var v,h=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var p=s["__"+r];if(p!=null&&(!s.disabled||t.target===s))if(Ln(p)){var[y,...k]=p;y.apply(s,[t,...k])}else p.call(s,t)}catch(_){v?h.push(_):v=_}if(t.cancelBubble||g===e||g===null)break;s=g}if(v){for(let _ of h)queueMicrotask(()=>{throw _});throw v}}finally{t.__root=e,delete t.currentTarget,Be(c),et(f)}}}function Gr(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Ut(t,e){var n=se;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function x(t,e){var n=(e&is)!==0,r=(e&ls)!==0,a,s=!t.startsWith("<!>");return()=>{a===void 0&&(a=Gr(s?t:"<!>"+t),n||(a=yt(a)));var i=r||Pr?document.importNode(a,!0):a.cloneNode(!0);if(n){var l=yt(i),u=i.lastChild;Ut(l,u)}else Ut(i,i);return i}}function Fs(t,e,n="svg"){var r=!t.startsWith("<!>"),a=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=Gr(a),l=yt(i);s=yt(l)}var u=s.cloneNode(!0);return Ut(u,u),u}}function Us(t,e){return Fs(t,e,"svg")}function le(t=""){{var e=sn(t+"");return Ut(e,e),e}}function Se(){var t=document.createDocumentFragment(),e=document.createComment(""),n=sn();return t.append(e,n),Ut(e,n),t}function E(t,e){t!==null&&t.before(e)}function Ks(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function vt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Hs(t,e){return js(t,e)}const _t=new Map;function js(t,{target:e,anchor:n,props:r={},events:a,context:s,intro:i=!0}){hs();var l=new Set,u=f=>{for(var v=0;v<f.length;v++){var h=f[v];if(!l.has(h)){l.add(h);var g=Ms(h);e.addEventListener(h,At,{passive:g});var p=_t.get(h);p===void 0?(document.addEventListener(h,At,{passive:g}),_t.set(h,1)):_t.set(h,p+1)}}};u(An(qr)),bn.add(u);var d=void 0,c=ms(()=>{var f=n??e.appendChild(sn());return St(()=>{if(s){W({});var v=fe;v.c=s}a&&(r.$$events=a),d=t(f,r)||{},s&&Y()}),()=>{var g;for(var v of l){e.removeEventListener(v,At);var h=_t.get(v);--h===0?(document.removeEventListener(v,At),_t.delete(v)):_t.set(v,h)}bn.delete(u),f!==n&&((g=f.parentNode)==null||g.removeChild(f))}});return zs.set(d,c),d}let zs=new WeakMap;function M(t,e,[n,r]=[0,0]){var a=t,s=null,i=null,l=Ce,u=n>0?an:0,d=!1;const c=(v,h=!0)=>{d=!0,f(h,v)},f=(v,h)=>{l!==(l=v)&&(l?(s?en(s):h&&(s=St(()=>h(a))),i&&$t(i,()=>{i=null})):(i?en(i):h&&(i=St(()=>h(a,[n+1,r]))),s&&$t(s,()=>{s=null})))};cn(()=>{d=!1,e(c),d||f(null,null)},u)}function we(t,e){ln(()=>{var n=e();for(var r in n){var a=n[r];a?t.style.setProperty(r,a):t.style.removeProperty(r)}})}function Vs(t,e){return e}function Ws(t,e,n,r){for(var a=[],s=e.length,i=0;i<s;i++)Rn(e[i].e,a,!0);var l=s>0&&a.length===0&&n!==null;if(l){var u=n.parentNode;gs(u),u.append(n),r.clear(),qe(t,e[0].prev,e[s-1].next)}Fr(a,()=>{for(var d=0;d<s;d++){var c=e[d];l||(r.delete(c.k),qe(t,c.prev,c.next)),We(c.e,!l)}})}function je(t,e,n,r,a,s=null){var i=t,l={flags:e,items:new Map,first:null},u=(e&kr)!==0;if(u){var d=t;i=d.appendChild(sn())}var c=null,f=!1,v=Cr(()=>{var h=n();return Ln(h)?h:h==null?[]:An(h)});cn(()=>{var h=o(v),g=h.length;f&&g===0||(f=g===0,Ys(h,l,i,a,e,r,n),s!==null&&(g===0?c?en(c):c=St(()=>s(i)):c!==null&&$t(c,()=>{c=null})),o(v))})}function Ys(t,e,n,r,a,s,i){var I,B,O,U;var l=(a&es)!==0,u=(a&(Mn|In))!==0,d=t.length,c=e.items,f=e.first,v=f,h,g=null,p,y=[],k=[],m,_,w,C;if(l)for(C=0;C<d;C+=1)m=t[C],_=s(m,C),w=c.get(_),w!==void 0&&((I=w.a)==null||I.measure(),(p??(p=new Set)).add(w));for(C=0;C<d;C+=1){if(m=t[C],_=s(m,C),w=c.get(_),w===void 0){var L=v?v.e.nodes_start:n;g=Xs(L,e,g,g===null?e.first:g.next,m,_,C,r,a,i),c.set(_,g),y=[],k=[],v=g.next;continue}if(u&&Js(w,m,C,a),(w.e.f&ze)!==0&&(en(w.e),l&&((B=w.a)==null||B.unfix(),(p??(p=new Set)).delete(w))),w!==v){if(h!==void 0&&h.has(w)){if(y.length<k.length){var T=k[0],N;g=T.prev;var H=y[0],K=y[y.length-1];for(N=0;N<y.length;N+=1)or(y[N],T,n);for(N=0;N<k.length;N+=1)h.delete(k[N]);qe(e,H.prev,K.next),qe(e,g,H),qe(e,K,T),v=T,g=K,C-=1,y=[],k=[]}else h.delete(w),or(w,v,n),qe(e,w.prev,w.next),qe(e,w,g===null?e.first:g.next),qe(e,g,w),g=w;continue}for(y=[],k=[];v!==null&&v.k!==_;)(v.e.f&ze)===0&&(h??(h=new Set)).add(v),k.push(v),v=v.next;if(v===null)continue;w=v}y.push(w),g=w,v=w.next}if(v!==null||h!==void 0){for(var j=h===void 0?[]:An(h);v!==null;)(v.e.f&ze)===0&&j.push(v),v=v.next;var V=j.length;if(V>0){var q=(a&kr)!==0&&d===0?n:null;if(l){for(C=0;C<V;C+=1)(O=j[C].a)==null||O.measure();for(C=0;C<V;C+=1)(U=j[C].a)==null||U.fix()}Ws(e,j,q,c)}}l&&Fn(()=>{var J;if(p!==void 0)for(w of p)(J=w.a)==null||J.apply()}),se.first=e.first&&e.first.e,se.last=g&&g.e}function Js(t,e,n,r){(r&Mn)!==0&&wn(t.v,e),(r&In)!==0?wn(t.i,n):t.i=n}function Xs(t,e,n,r,a,s,i,l,u,d){var c=(u&Mn)!==0,f=(u&ts)===0,v=c?f?fs(a,!1,!1):It(a):a,h=(u&In)===0?i:It(i),g={i:h,v,k:s,a:null,e:null,prev:n,next:r};try{return g.e=St(()=>l(t,v,h,d),vs),g.e.prev=n&&n.e,g.e.next=r&&r.e,n===null?e.first=g:(n.next=g,n.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function or(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,a=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==r;){var i=on(s);a.before(s),s=i}}function qe(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Me(t,e,...n){var r=t,a=Ht,s;cn(()=>{a!==(a=e())&&(s&&(We(s),s=null),s=St(()=>a(r,...n)))},an)}function Zr(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=Zr(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function qs(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=Zr(t))&&(r&&(r+=" "),r+=e);return r}function ee(t){return typeof t=="object"?qs(t):t??""}const ir=[...` 	
\r\f \v\uFEFF`];function Gs(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var s=a.length,i=0;(i=r.indexOf(a,i))>=0;){var l=i+s;(i===0||ir.includes(r[i-1]))&&(l===r.length||ir.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Zs(t,e){return t==null?null:String(t)}function Z(t,e,n,r,a,s){var i=t.__className;if(i!==n||i===void 0){var l=Gs(n,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&a!==s)for(var u in s){var d=!!s[u];(a==null||d!==!!a[u])&&t.classList.toggle(u,d)}return s}function Kt(t,e,n,r){var a=t.__style;if(a!==e){var s=Zs(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Qs=Symbol("is custom element"),$s=Symbol("is html");function qt(t,e){var n=Hn(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Gt(t,e){var n=Hn(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function he(t,e,n,r){var a=Hn(t);a[e]!==(a[e]=n)&&(e==="loading"&&(t[ja]=n),n==null?t.removeAttribute(e):typeof n!="string"&&eo(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Hn(t){return t.__attributes??(t.__attributes={[Qs]:t.nodeName.includes("-"),[$s]:t.namespaceURI===cs})}var lr=new Map;function eo(t){var e=lr.get(t.nodeName);if(e)return e;lr.set(t.nodeName,e=[]);for(var n,r=t,a=Element.prototype;a!==r;){n=_r(r);for(var s in n)n[s].set&&e.push(s);r=Pn(r)}return e}function jn(t,e,n=e){var r=jt();Bs(t,"input",a=>{var s=a?t.defaultValue:t.value;if(s=vn(t)?hn(s):s,n(s),r&&s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd;t.value=s??"",l!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(l,t.value.length))}}),Vt(e)==null&&t.value&&n(vn(t)?hn(t.value):t.value),ln(()=>{var a=e();vn(t)&&a===hn(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function vn(t){var e=t.type;return e==="number"||e==="range"}function hn(t){return t===""?null:+t}function cr(t,e){return t===e||(t==null?void 0:t[it])===e}function ye(t={},e,n,r){return Bn(()=>{var a,s;return ln(()=>{a=s,s=[],Vt(()=>{t!==n(...s)&&(e(t,...s),a&&cr(n(...a),t)&&e(null,...a))})}),()=>{Fn(()=>{s&&cr(n(...s),t)&&e(null,...s)})}}),t}function Wt(t=!1){const e=fe,n=e.l.u;if(!n)return;let r=()=>Os(e.s);if(t){let a=0,s={};const i=zt(()=>{let l=!1;const u=e.s;for(const d in u)u[d]!==s[d]&&(s[d]=u[d],l=!0);return l&&a++,a});r=()=>o(i)}n.b.length&&_s(()=>{ur(e,r),Zt(n.b)}),ve(()=>{const a=Vt(()=>n.m.map(Ua));return()=>{for(const s of a)typeof s=="function"&&s()}}),n.a.length&&ve(()=>{ur(e,r),Zt(n.a)})}function ur(t,e){if(t.l.s)for(const n of t.l.s)o(n);e()}let Jt=!1;function to(t){var e=Jt;try{return Jt=!1,[t(),Jt]}finally{Jt=e}}function no(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function Q(t,e,n,r){var k;var a=!Tt||(n&rs)!==0,s=(n&ss)!==0,i=(n&os)!==0,l=r,u=!0,d=()=>(u&&(u=!1,l=i?Vt(r):r),l),c;if(s){var f=it in t||Ha in t;c=((k=wt(t,e))==null?void 0:k.set)??(f&&e in t?m=>t[e]=m:void 0)}var v,h=!1;s?[v,h]=to(()=>t[e]):v=t[e],v===void 0&&r!==void 0&&(v=d(),c&&(a&&Xa(),c(v)));var g;if(a?g=()=>{var m=t[e];return m===void 0?d():(u=!0,m)}:g=()=>{var m=t[e];return m!==void 0&&(l=void 0),m===void 0?l:m},a&&(n&as)===0)return g;if(c){var p=t.$$legacy;return function(m,_){return arguments.length>0?((!a||!_||p||h)&&c(_?g():m),m):g()}}var y=((n&ns)!==0?zt:Cr)(g);return s&&o(y),function(m,_){if(arguments.length>0){const w=_?o(y):a&&s?ue(m):m;return S(y,w),l!==void 0&&(l=w),m}return no(y)?y.v:o(y)}}function ce(t){fe===null&&us(),Tt&&fe.l!==null?ro(fe).m.push(t):ve(()=>{const e=Vt(t);if(typeof e=="function")return e})}function ro(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const ao="5";var pr;typeof window<"u"&&((pr=window.__svelte??(window.__svelte={})).v??(pr.v=new Set)).add(ao);let st=P(""),mt=P(null);function so(t){S(st,""),setTimeout(()=>{S(st,t,!0)},16)}var oo=x('<div class="notification svelte-1a2zucn"> </div>');function io(t,e){W(e,!0),ve(()=>{var l,u;o(st),o(st)&&((l=o(mt))==null||l.getBoundingClientRect(),(u=o(mt))==null||u.style.setProperty("opacity","1"));const s=setTimeout(()=>{var d;(d=o(mt))==null||d.style.removeProperty("opacity")},800),i=setTimeout(()=>{var d;S(st,""),(d=o(mt))==null||d.style.removeProperty("opacity")},1200);return()=>{clearTimeout(s),clearTimeout(i)}});var n=Se(),r=z(n);{var a=s=>{var i=oo(),l=b(i);ye(i,u=>S(mt,u),()=>o(mt)),ie(()=>vt(l,o(st))),E(s,i)};M(r,s=>{o(st)&&s(a)})}E(t,n),Y()}$a();var lo=x('<span class="vh svelte-14jjkpd"><!></span>');function tt(t,e){var n=lo(),r=b(n);Me(r,()=>e.children),E(t,n)}var co=Us('<svg class="svelte-gv09tg"><use></use></svg>');function _e(t,e){let n=Q(e,"name",8,"");var r=co(),a=b(r);ie(()=>he(a,"href",`#icon-${n()??""}`)),E(t,r)}const Qr=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"openSwiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:e.type==="swipe"?{type:"closeSwiping"}:t;case"openSwiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"closeSwiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};let En=P(ue(Qr({type:"closed"})));const Ge=t=>{S(En,Qr(o(En),t),!0)},$r=()=>o(En),uo=()=>{Ge({type:"open"})},fo=()=>{Ge({type:"close"})},vo=()=>{const t=$r().type;t==="closed"?uo():t==="opened"&&fo()};var ho=x('<button class="buttonMenu svelte-hxzs42"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ea(t,e){W(e,!1),Wt();var n=ho();n.__click=[vo];var r=b(n);we(r,()=>({"--size":"28px"})),_e(r.lastChild,{name:"sidebarMenu"});var a=D(r,2);tt(a,{children:(s,i)=>{var l=le("Menu");E(s,l)}}),E(t,n),Y()}be(["click"]);const F=ue({historyStack:[],pathname:window.location.pathname,search:window.location.search,historyLength:0});let ta=P(ue(new URLSearchParams(F.search).get("feedOrder")||"newest"));const na=()=>o(ta),go=t=>{S(ta,t,!0);const e=new URLSearchParams(F.search);t==="newest"?e.delete("feedOrder"):e.set("feedOrder",t),ut(`${F.pathname}${e.size>0?`?${e.toString()}`:""}`)},ra=()=>{var t;return((t=new URLSearchParams(F.search).get("selectedTags"))==null?void 0:t.split(","))||[]};let Xt=ra();const po=()=>{const t=ra();return t.join(",")===Xt.join(",")||(Xt=t),Xt},_o=()=>{F.pathname=document.location.pathname,F.search=document.location.search,F.historyLength=Math.max(0,F.historyLength-=1)};window.addEventListener("popstate",_o);const ut=t=>{const[e,n]=t.split("?");F.pathname=e,F.search=n?`?${n}`:"",F.historyLength+=1,F.historyStack.push(window.location.href),window.history.replaceState(null,"",t)},mo=t=>{const[e,n]=t.split("?");F.pathname=e,F.search=n?`?${n}`:"",window.history.replaceState(null,"",t)},aa=(t="/")=>{var r;const[e,n]=t.split("?");if(F.historyLength<=0){const a=window.location.href,[s,i]=a.split("?");if(!i.includes("stackPages"))window.history.replaceState(null,"",t),F.historyLength=0,F.pathname=e,F.search=n?`?${n}`:"";else{const l=new URLSearchParams(i),d=(((r=l.get("stackPages"))==null?void 0:r.split(","))||[]).slice(0,-1);d.length===0?l.delete("stackPages"):l.set("stackPages",d.join(","));const c=`${s}${l.toString()?`?${l.toString()}`:""}`;window.history.replaceState(null,"",c),F.search=l.toString()?`?${l.toString()}`:""}}else if(F.historyStack.length>0){const a=F.historyStack.pop();if(a){const[s,i]=a.split("?");window.history.replaceState(null,"",a),F.historyLength=Math.max(0,F.historyLength-=1),F.pathname=s,F.search=i?`?${i}`:""}}},ht=()=>{const t=F.historyStack.findIndex(n=>n.includes("stackPages")),e=t===-1?F.historyStack.slice(0):F.historyStack.slice(0,t);if(e.length>0){const n=e.pop();if(n){const[r,a]=n.split("?");window.history.replaceState(null,"",n),F.historyLength=Math.max(0,e.length),F.pathname=r,F.search=a?`?${a}`:"",F.historyStack=e}}else window.history.replaceState(null,"","/"),F.historyLength=0,F.pathname="/",F.search="",F.historyStack=[]},Ye=()=>{var t;return((t=new URLSearchParams(F.search).get("stackPages"))==null?void 0:t.split(","))||[]};let ct=P(ue(Ye()));const Fe=t=>{const e=Ye();if(!e.includes(t)){e.push(t);const n=new URLSearchParams(F.search);n.set("stackPages",e.join(",")),S(ct,e,!0),ut(`${F.pathname}?${n.toString()}`)}},wo=t=>Ye().includes(t),sa=()=>{const t=o(ct).slice(0,-1);S(ct,t,!0)},oa=()=>{const t=Ye();return t.length>=o(ct).length?t.reduce((e,n)=>[...e,{page:n,shown:!0}],[]):o(ct).reduce((e,n,r)=>[...e,{page:n,shown:t.length===0?!1:r!==o(ct).length-1}],[])},kn=()=>{S(ct,[],!0)},yo=t=>{t.preventDefault(),Fe("settings")},So=t=>{t.preventDefault(),Fe("newNote")};var bo=x('<a class="addNote svelte-ww662s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span></a>'),Eo=x('<div class="header svelte-ww662s"><div class="top svelte-ww662s"><div class="desktop svelte-ww662s"><a class="link svelte-ww662s"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a></div> <div class="mobile svelte-ww662s"><!></div> <!></div></div>');function ko(t,e){W(e,!0);const n=()=>{const p=Ye();p.includes("settings")||p.push("settings");const y=new URLSearchParams(F.search);return y.set("stackPages",p.join(",")),`${F.pathname}?${y}`};let a=G(()=>{const p=Ye();p.includes("newNote")||p.push("newNote");const y=new URLSearchParams(F.search);return y.set("stackPages",p.join(",")),`${F.pathname}?${y}`}),s=G(n);var i=Eo(),l=b(i),u=b(l),d=b(u);d.__click=[yo];var c=b(d);we(c,()=>({"--size":"20px"})),_e(c.lastChild,{name:"settings"});var f=D(u,2),v=b(f);ea(v,{});var h=D(f,2);{var g=p=>{var y=bo();y.__click=[So];var k=b(y);we(k,()=>({"--size":"24px","--color":"#b0b0b0"})),_e(k.lastChild,{name:"plus"}),ie(()=>he(y,"href",o(a))),E(p,y)};M(h,p=>{F.pathname!=="/settings"&&p(g)})}ie(()=>he(d,"href",o(s))),E(t,i),Y()}be(["click"]);const Co=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{t()},e)}},ia=()=>window.matchMedia("(max-width: 768px)").matches;let la=P(ue(ia()));const To=Co(()=>{S(la,ia(),!0)},16);window.addEventListener("resize",To);const gt=()=>o(la),zn=ue({count:0}),Do=()=>zn.count>0,ca=()=>{zn.count+=1},ua=()=>{zn.count-=1},ge=ue({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});let Cn=!1;const gn=()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?Cn=!0:Cn=!1},Vn=()=>Cn;function Lo(t,e){W(e,!0);let n=Q(e,"dialog",7),r=null;const a=()=>{e.dialogState==="swiping"&&e.onClose()};ve(()=>(e.dialogState==="swiping"&&(r=setTimeout(a,3e3)),()=>{r&&(clearTimeout(r),r=null)}));let s=null,i=null;const l=3,u=50,d=5,c=.6,f=.3,v=.35,h=.95;let g=0,p=0,y=0,k=!1,m=!1,_=0,w=0,C=0;const L=()=>{g=0,p=0,k=!1,m=!1,_=0,w=0,C=0,y=0,s=null,i!==null&&(cancelAnimationFrame(i),i=null),r&&(clearTimeout(r),r=null)},T=O=>{if(!n()){console.warn("Touch start: No dialog element");return}if(e.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${e.dialogState}`);return}g=O.touches[0].clientX,p=O.touches[0].clientY,y=performance.now(),k=!0,m=!1},N=O=>e.dialogState==="opened"&&O>0||e.dialogState==="swiping"&&O>0,H=O=>{if(n()){n().style.setProperty("--transition-timing","0s"),e.onSwipe(),navigator.vibrate&&navigator.vibrate(10);try{const U=window.getComputedStyle(n()),J=U.transform||U.webkitTransform||"";if(w=n().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(_=0),J&&J!=="none")try{_=new DOMMatrix(J).m41}catch{console.warn("Could not parse transform matrix, using default position")}m=!0}catch(U){console.error("Error during swipe initialization:",U),L()}}},K=()=>{if(!n())return;const U=Math.abs(_+C*w/100)/w;n().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-U)})`)},j=()=>{if(i=null,!s||!k||!n()||Vn()){L();return}const O=s.touches[0].clientX,U=s.touches[0].clientY,J=O-g,oe=U-p,R=Math.abs(J)>Math.abs(oe),re=Math.abs(J)>l;if(!m)if(R&&re&&N(J))try{H(J)}catch(me){console.error("Error initializing swipe:",me),L();return}else return;if(!N(J))return;n().style.setProperty("--transition-timing","0s");let A=_+J*h;A=Math.max(0,Math.min(w,A)),n().style.transform=`translate3d(${A}px, 0, 0)`,ge.swipingRatio=Math.abs(1-A/w),C=(A-_)/w*100,e.dialogState==="swiping"&&(r&&clearTimeout(r),r=setTimeout(a,3e3)),K()},V=O=>{if(!k)return;s=O,i===null&&(i=requestAnimationFrame(j));const U=O.touches[0].clientX-g,J=O.touches[0].clientY-p,oe=Math.abs(U)>Math.abs(J);m&&oe&&O.preventDefault()},q=O=>{const U=Math.abs(O);if(U>=c)return d;if(U>=f){const J=(U-f)/(c-f);return u-J*(u-d)}else return u},I=(O,U)=>{if(Math.abs(O)>=c)return v*.5;const oe=Math.abs(C)/100;return U?v*Math.max(.5,1-oe):v*Math.max(.5,oe)},B=O=>{var A,X;if(i!==null&&(cancelAnimationFrame(i),i=null),!k||!n()){L();return}if(!m){L();return}let U=0;if((A=O==null?void 0:O.changedTouches)!=null&&A[0]){const ae=O.changedTouches[0].clientX,de=performance.now()-y;de>0&&(U=(ae-g)/de)}const J=q(U);let oe=null;e.dialogState==="swiping"&&(oe=Math.abs(C)>J||U<-f?"close":"open");const R=e.dialogState==="swiping"&&oe==="close",re=I(U,R);ge.duration=re-.02,n().style.setProperty("--transition-timing",`${re}s`),n().offsetWidth,n().style.transform="",oe==="open"?e.onOpen():oe==="close"&&e.onClose(),(X=n())==null||X.style.removeProperty("--backdrop-bg"),L()};ce(()=>(n().addEventListener("touchstart",T,{passive:!0}),n().addEventListener("touchmove",V,{passive:!1}),n().addEventListener("touchend",B,{passive:!0}),n().addEventListener("touchcancel",B,{passive:!0}),()=>{n().removeEventListener("touchstart",T),n().removeEventListener("touchmove",V),n().removeEventListener("touchend",B),n().removeEventListener("touchcancel",B),i!==null&&cancelAnimationFrame(i)})),Y()}let Wn=P(!1);const Ao=(t,e)=>{let n;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{t()},e)}},Po=Ao(()=>{S(Wn,!1)},100),da=()=>{S(Wn,!0),Po()},fa=()=>o(Wn);var xo=(t,e)=>{e.onStartClose()},Oo=x('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),No=x('<dialog><div class="dialogInner svelte-68rj1a"><div class="header svelte-68rj1a"><div><!></div></div> <!></div></dialog> <!>',1);function Mo(t,e){W(e,!0);let n=350,r=P(null),a=P(null);const s=_=>{_.preventDefault(),e.onStartClose()};ce(()=>{var _,w;return(_=o(r))==null||_.addEventListener("close",e.onClosed),(w=o(r))==null||w.addEventListener("cancel",s),()=>{var C,L;(C=o(r))==null||C.removeEventListener("close",e.onClosed),(L=o(r))==null||L.removeEventListener("cancel",s)}});const i=()=>{var _,w,C;(_=o(r))==null||_.style.removeProperty("--transition-timing"),(w=o(r))==null||w.style.removeProperty("transform"),(C=o(r))==null||C.style.removeProperty("--backdrop-bg")},l=()=>{da()},u=G(fa);ve(()=>{var _,w;if(e.dialogState,!!o(r))switch(e.dialogState){case"opening":{o(r).open||o(r).showModal(),o(r).getBoundingClientRect();const C=setTimeout(()=>{i()},n+1),L=()=>{clearTimeout(C),i()};return(_=o(r))==null||_.addEventListener("transitionend",L,{once:!0}),e.onOpened(),()=>{var T;(T=o(r))==null||T.removeEventListener("transitionend",L)}}case"closing":{const C=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),L=()=>{clearTimeout(C),e.onClosed()};return(w=o(r))==null||w.addEventListener("transitionend",L,{once:!0}),()=>{var T;(T=o(r))==null||T.removeEventListener("transitionend",L)}}case"opened":i()}});var d=No(),c=z(d),f=b(c),v=b(f),h=b(v),g=b(h);{var p=_=>{var w=Oo();Z(w,1,ee(["navigateButton","buttonBack"]),"svelte-68rj1a"),w.__click=[xo,e];var C=b(w);we(C,()=>({"--size":"20px"})),_e(C.lastChild,{name:"back"});var L=D(C,2);tt(L,{children:(T,N)=>{var H=le("back");E(T,H)}}),E(_,w)};M(g,_=>{(!(e.blocked||e.hidden)||e.blocked&&e.unBlockedBack)&&_(p)})}var y=D(v,2);Me(y,()=>e.children),ye(f,_=>S(a,_),()=>o(a)),ye(c,_=>S(r,_),()=>o(r));var k=D(c,2);{var m=_=>{Lo(_,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return o(r)}})};M(k,_=>{(!o(u)&&e.dialogState==="opened"||e.dialogState==="swiping")&&(!e.blocked||e.unBlockedBack)&&_(m)})}ie(()=>Z(c,1,ee([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:ge.working&&(!ge.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-68rj1a")),He("scroll",f,l),E(t,d),Y()}be(["click"]);const dr=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function Io(t,e){W(e,!0);let n=Q(e,"blocked",3,!1),r=Q(e,"hiddenDialog",3,!1),a=Q(e,"unBlockedBack",3,!1),s=Q(e,"onStartClose",3,()=>{}),i=Q(e,"onClose",3,()=>{}),l=P(ue(dr({type:"closed"})));const u=k=>{S(l,dr(o(l),k),!0)},d=()=>{n()&&!a()||(s()(),u({type:"close"}))},c=()=>{u({type:"open"})},f=()=>{u({type:"opened"}),ge.duration=.2},v=()=>{i()(),u({type:"closed"}),ge.swipingRatio=1,ge.duration=.2},h=()=>{u({type:"swipe"})};ve(()=>{o(l).type==="swiping"?ge.isSwiping=!0:ge.isSwiping=!1,o(l).type==="closed"&&e.shownDialog?c():o(l).type==="opened"&&!e.shownDialog&&d()});var g=Se(),p=z(g);{var y=k=>{Mo(k,{onSwipe:h,onOpened:f,onClosed:v,onStartClose:d,onStartOpen:c,get dialogState(){return o(l).type},get hidden(){return r()},get blocked(){return n()},get unBlockedBack(){return a()},children:(m,_)=>{var w=Se(),C=z(w);Me(C,()=>e.children),E(m,w)},$$slots:{default:!0}})};M(p,k=>{o(l).type!=="closed"&&k(y)})}return E(t,g),Y({handleComputeState:u})}const Bo=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const a=i=>{i.preventDefault(),n()},s=()=>{r==null||r()};ce(()=>{const i=t();return i==null||i.addEventListener("cancel",a),i==null||i.addEventListener("close",s),()=>{i==null||i.removeEventListener("cancel",a),i==null||i.removeEventListener("close",s)}}),ce(()=>{const i=t();i==null||i.showModal(),i==null||i.getBoundingClientRect(),e()})};function Yn(t,e){W(e,!0),ce(()=>{const n=r=>{var a;r.target&&((a=e.dialog)!=null&&a.open)&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),Y()}var Ro=(t,e)=>{e.onStartBack()},Fo=x('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Uo=(t,e)=>{e.onStartClose()},Ko=x('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Ho=x('<dialog><div class="dialogInner svelte-isq3u8"><div class="header svelte-isq3u8"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function jo(t,e){W(e,!0);let n=Q(e,"blockedDialog",3,!1),r=Q(e,"hiddenDialog",3,!1),a=Q(e,"isDesktopAnimationOff",3,!1),s=P(null),i=P(null);Bo({getDialog:()=>o(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose}),ve(()=>{var _,w;e.stateDialog==="closing"&&(ge.working?(_=o(s))==null||_.addEventListener("transitionend",()=>{var C;(C=o(s))==null||C.close()},{once:!0}):(w=o(s))==null||w.close())});var l=Ho(),u=z(l),d=b(u),c=b(d),f=b(c),v=b(f);{var h=_=>{var w=Fo();Z(w,1,ee(["navigateButton","buttonBack"]),"svelte-isq3u8"),w.__click=[Ro,e];var C=b(w);we(C,()=>({"--size":"20px"})),_e(C.lastChild,{name:"back"});var L=D(C,2);tt(L,{children:(T,N)=>{var H=le("back");E(T,H)}}),E(_,w)};M(v,_=>{(!(n()||r())||n()&&e.unBlockedBack)&&e.onStartBack&&_(h)})}var g=D(f,2),p=b(g);{var y=_=>{var w=Ko();Z(w,1,ee(["navigateButton","buttonClose"]),"svelte-isq3u8"),w.__click=[Uo,e];var C=b(w);we(C,()=>({"--size":"20px"})),_e(C.lastChild,{name:"close"});var L=D(C,2);tt(L,{children:(T,N)=>{var H=le("close");E(T,H)}}),E(_,w)};M(p,_=>{n()||r()||_(y)})}var k=D(c,2);Me(k,()=>e.children),ye(d,_=>S(i,_),()=>o(i)),ye(u,_=>S(s,_),()=>o(s));var m=D(u,2);Yn(m,{get dialog(){return o(s)},get dialogInner(){return o(i)},get onClose(){return e.onStartClose}}),ie(()=>Z(u,1,ee([{open:e.stateDialog==="open",isAnimationOn:ge.working,isDesktopAnimationOff:a(),hiddenDialog:r()}]),"svelte-isq3u8")),E(t,l),Y()}be(["click"]);const zo=({onStartClose:t,onClose:e})=>{let n=P("close");return{get state(){return o(n)},set state(i){S(n,i,!0)},handleStartClose:(i=!1)=>{i||(S(n,"closing"),t==null||t())},handleOpen:()=>{S(n,"open")},handleClose:()=>{S(n,"close"),e==null||e()}}};function Vo(t,e){W(e,!0);let n=Q(e,"blockedDialog",3,!1),r=Q(e,"hiddenDialog",3,!1),a=Q(e,"onStartClose",3,()=>{}),s=Q(e,"onClose",3,()=>{}),i=zo({onStartClose:a(),onClose:s()});ve(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});var l=Se(),u=z(l);{var d=c=>{jo(c,{get stateDialog(){return i.state},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(f,v)=>{var h=Se(),g=z(h);Me(g,()=>e.children),E(f,h)},$$slots:{default:!0}})};M(u,c=>{i.state!=="close"&&c(d)})}E(t,l),Y()}function va(t,e){W(e,!0);let n=Q(e,"blockedDialog",3,!1),r=Q(e,"hiddenDialog",3,!1),a=Q(e,"isLastDialog",3,!1),s=Q(e,"onStartClose",3,()=>{}),i=Q(e,"onClose",3,()=>{});const l=G(()=>a()?void 0:e.onStartBack);ce(()=>(ca(),()=>{ua()}));var u=Se(),d=z(u);{var c=v=>{Io(v,{get shownDialog(){return e.shownDialog},get blocked(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return e.onStartBack},onClose:i()})},f=v=>{Vo(v,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return o(l)},onStartClose:s(),onClose:i()})};M(d,v=>{gt()?v(c):v(f,!1)})}E(t,u),Y()}let ha=P(!1),Jn=P(!1);const ke=t=>{S(ha,t,!0),t||S(Jn,!1)},Wo=()=>o(ha),$e=t=>{S(Jn,t,!0)},Yo=()=>o(Jn);function fr(t,e){W(e,!0);let n=Q(e,"blocked",3,!1),r=Q(e,"isLastDialog",3,!1),a=Q(e,"onBack",3,()=>{});const s=G(()=>n()||e.hidden||Wo()),i=G(()=>Yo()&&!r());va(t,{get shownDialog(){return e.shown},get blockedDialog(){return o(s)},get unBlockedBack(){return o(i)},get hiddenDialog(){return e.hidden},get isLastDialog(){return r()},onStartBack:()=>{(!o(s)||o(s)&&o(i))&&e.shown&&(aa(),a()())},onStartClose:()=>{(!o(s)||o(s)&&o(i))&&e.shown&&ht()},onClose:()=>{sa()},children:(c,f)=>{var v=Se(),h=z(v);Me(h,()=>e.children),E(c,v)},$$slots:{default:!0}}),Y()}const Ot=()=>crypto.randomUUID(),Jo="AppStorage",Xo=1,Oe="notes",bt="syncLog",Et="account";let te;window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});const qo=()=>new Promise((t,e)=>{const n=indexedDB.open(Jo,Xo);n.addEventListener("upgradeneeded",()=>{const r=n.result;r.objectStoreNames.contains(Oe)||r.createObjectStore(Oe,{keyPath:"id"}),r.objectStoreNames.contains(Et)||r.createObjectStore(Et,{keyPath:"id"}),r.objectStoreNames.contains(bt)||r.createObjectStore(bt,{keyPath:"id"})}),n.addEventListener("success",()=>{t(),te=n.result,te.onversionchange=function(){te==null||te.close(),alert("app outdated, please reload the page")}}),n.addEventListener("blocked",()=>{e(),alert("app outdated, please reload the page")}),n.addEventListener("error",()=>{e(),console.error("Error",n.error)})}),ga=()=>new Promise((t,e)=>{const n=te==null?void 0:te.transaction(Et,"readonly"),r=n==null?void 0:n.objectStore(Et).get("default");r==null||r.addEventListener("success",()=>{var s;const a=(s=r==null?void 0:r.result)==null?void 0:s.account;t(a)}),r==null||r.addEventListener("error",()=>{e()})}),Xn=t=>new Promise((e,n)=>{const r=te==null?void 0:te.transaction(Et,"readwrite"),a=r==null?void 0:r.objectStore(Et),s=a==null?void 0:a.put({id:"default",account:t});s==null||s.addEventListener("success",()=>{console.log("account inited"),e()}),s==null||s.addEventListener("error",()=>{n()})}),pa=()=>new Promise((t,e)=>{const n=te==null?void 0:te.transaction(Oe,"readonly"),r=n==null?void 0:n.objectStore(Oe).getAll();r==null||r.addEventListener("success",()=>{const a=r.result;t(a)}),r==null||r.addEventListener("error",()=>{e()})}),_a=async t=>new Promise((e,n)=>{const r=te==null?void 0:te.transaction(Oe,"readwrite"),a=r==null?void 0:r.objectStore(Oe),s=a==null?void 0:a.put({...t});s==null||s.addEventListener("success",()=>{e()}),s==null||s.addEventListener("error",()=>{n()})}),Go=async t=>new Promise((e,n)=>{const r=te==null?void 0:te.transaction(Oe,"readwrite"),a=r==null?void 0:r.objectStore(Oe),s=a==null?void 0:a.delete(t);s==null||s.addEventListener("success",()=>{e()}),s==null||s.addEventListener("error",()=>{n()})}),Zo=()=>new Promise((t,e)=>{const n=te==null?void 0:te.transaction(Oe,"readwrite"),r=n==null?void 0:n.objectStore(Oe),a=r==null?void 0:r.clear();a==null||a.addEventListener("success",()=>{t()}),a==null||a.addEventListener("error",()=>{e()})}),qn=async()=>{await Zo()},ma=async t=>{const e=(await pa()).reduce((s,i)=>(s[i.id]=i,s),{}),n={},r=te==null?void 0:te.transaction(Oe,"readwrite"),a=r==null?void 0:r.objectStore(Oe);t.forEach(s=>{e[s.id]?e[s.id].updatedAt<s.updatedAt&&(n[s.id]=s):n[s.id]=s}),await Promise.all(Object.values(n).map(s=>{const i=a==null?void 0:a.put(s);return new Promise((l,u)=>{i==null||i.addEventListener("success",()=>{l()}),i==null||i.addEventListener("error",()=>{u()})})}))},pn=async t=>new Promise((e,n)=>{const r=te==null?void 0:te.transaction(bt,"readwrite"),a=r==null?void 0:r.objectStore(bt),s=a==null?void 0:a.put({...t});s==null||s.addEventListener("success",()=>{e()}),s==null||s.addEventListener("error",()=>{n()})}),Qo=()=>new Promise((t,e)=>{const n=te==null?void 0:te.transaction(bt,"readonly"),r=n==null?void 0:n.objectStore(bt).getAll();r==null||r.addEventListener("success",()=>{const a=r.result;t(a)}),r==null||r.addEventListener("error",()=>{e()})});let $=P({initedDB:!1});const $o=()=>{S($,{...o($),initedDB:!0})},dt=async t=>{S($,{...o($),account:t,notes:[],mapNotes:new Map})},wa=()=>o($),dn=async()=>{const t=await pa(),e=new Map,n=[];t.forEach(r=>{n.push(r),e.set(r.id,r)}),S($,{...o($),notes:n,mapNotes:e})},kt=()=>o($).notes&&o($).mapNotes,ya=()=>o($).notes||[],ei=()=>o($).mapNotes||new Map,Sa=t=>{if(!o($).notes||!o($).mapNotes)throw new Error("Notes appState is not initialized");const e={...t};o($).notes.push(e),o($).mapNotes.set(e.id,e),S($,{...o($)})},ba=async t=>{if(!o($).notes||!o($).mapNotes)throw new Error("Notes appState is not initialized");o($).notes.forEach((e,n)=>{(e==null?void 0:e.id)===t.id&&o($).notes&&(o($).notes[n]=t)}),o($).mapNotes.set(t.id,t),S($,{...o($)})},Ea=async t=>{if(!o($).notes||!o($).mapNotes)throw new Error("Notes appState is not initialized");o($).mapNotes.delete(t),o($).notes=o($).notes.filter(e=>(e==null?void 0:e.id)!==t),S($,{...o($)})},ka=async()=>{S($,{...o($),initedDB:!0,notes:[],mapNotes:new Map})};let Ca=P({});const Ta=()=>o(Ca),ti=t=>{S(Ca,t)};var ni=x('<input class="svelte-6l2oy0"/>');function Tn(t,e){W(e,!0);let n=Q(e,"value",15,"");var r=ni();ie(()=>he(r,"placeholder",e.placeholder)),He("focus",r,function(...a){var s;(s=e.onFocus)==null||s.apply(this,a)}),jn(r,n),E(t,r),Y()}function ri(t,e){W(e,!0);let n=Q(e,"dialog",7);const r=3,a=50,s=5,i=.6,l=.3,u=.35,d=.95;let c=0,f=0,v=0,h=!1,g=!1,p=0,y=0,k=0;const m=()=>{c=0,f=0,h=!1,g=!1,p=0,y=0,k=0,v=0,_!==null&&(cancelAnimationFrame(_),_=null),w=null};let _=null,w=null;const C=I=>{if(!n()){console.warn("Touch start: No dialog element");return}if(e.sidebarState!=="opened"&&e.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${e.sidebarState}`);return}c=I.touches[0].clientX,f=I.touches[0].clientY,v=performance.now(),h=!0,g=!1},L=I=>e.sidebarState==="closed"&&I>0||e.sidebarState==="closeSwiping"&&I>0||e.sidebarState==="opened"&&I<0||e.sidebarState==="openSwiping"&&I<0,T=I=>{if(n()){if(n().style.setProperty("--transition-timing","0s"),!n().open&&e.sidebarState==="closed")try{n().showModal(),n().offsetWidth}catch(B){console.error("Error opening dialog:",B);return}e.onSwipe();try{const B=window.getComputedStyle(n()),O=B.transform||B.webkitTransform||"";if(y=n().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?p=-y:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(p=0),O&&O!=="none")try{p=new DOMMatrix(O).m41}catch{console.warn("Could not parse transform matrix, using default position")}g=!0}catch(B){console.error("Error during swipe initialization:",B),m()}}},N=()=>{if(!n())return;const B=(Math.abs(p+k*y/100)-y*.3-20)/y;n().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.25*(1-B)})`)},H=()=>{if(_=null,!w||!h||!n()||Vn())return;const{x:I,y:B}=w;w=null;const O=I-c,U=B-f,J=Math.abs(O)>Math.abs(U),oe=Math.abs(O)>r;if(!g)if(J&&oe&&L(O))try{T(O)}catch(X){console.error("Error initializing swipe:",X),m();return}else return;if(!L(O))return;n().style.setProperty("--transition-timing","0s");let R=p+O*d;const re=-y;R=Math.max(re,Math.min(0,R)),n().style.transform=`translate3d(${R}px, 0, 0)`,k=(R-p)/y*100,N()},K=I=>{if(!h)return;const B=I.touches[0].clientX,O=I.touches[0].clientY;w={x:B,y:O},_===null&&(_=requestAnimationFrame(H)),g&&Math.abs(B-c)>Math.abs(O-f)&&I.preventDefault()},j=I=>{const B=Math.abs(I);if(B>=i)return s;if(B>=l){const O=(B-l)/(i-l);return a-O*(a-s)}else return a},V=(I,B)=>{if(Math.abs(I)>=i)return u*.5;const U=Math.abs(k)/100;return B?u*Math.max(.5,1-U):u*Math.max(.5,U)},q=I=>{var R,re;if(_!==null&&(cancelAnimationFrame(_),_=null),w=null,!h||!n()){m();return}if(!g){m();return}let B=0;if((R=I==null?void 0:I.changedTouches)!=null&&R[0]){const A=I.changedTouches[0].clientX,ae=performance.now()-v;ae>0&&(B=(A-c)/ae)}const O=j(B);let U=null;e.sidebarState==="closeSwiping"?U=Math.abs(k)>O||B>l?"open":"close":e.sidebarState==="openSwiping"&&(U=Math.abs(k)>O||B<-l?"close":"open");const J=e.sidebarState==="closeSwiping"&&U==="open"||e.sidebarState==="openSwiping"&&U==="close",oe=V(B,J);n().style.setProperty("--transition-timing",`${oe}s`),n().offsetWidth,n().style.transform="",U==="open"?e.onOpen():U==="close"&&e.onClose(),(re=n())==null||re.style.removeProperty("--backdrop-bg"),m()};ce(()=>(document.addEventListener("touchstart",C,{passive:!0}),document.addEventListener("touchmove",K,{passive:!1}),document.addEventListener("touchend",q,{passive:!0}),document.addEventListener("touchcancel",q,{passive:!0}),()=>{document.removeEventListener("touchstart",C),document.removeEventListener("touchmove",K),document.removeEventListener("touchend",q),document.removeEventListener("touchcancel",q),_!==null&&cancelAnimationFrame(_)})),Y()}var ai=x('<dialog><div class="dialogInner svelte-1in1s0g"><!></div></dialog> <!> <!>',1);function si(t,e){W(e,!0);let n=350,r=P(null),a=P(null),s=G($r);ve(()=>{oa().length>0&&Ge({type:"close"})});const i=()=>{e.blocked||Ge({type:"close"})},l=()=>{e.blocked||Ge({type:"open"})},u=()=>{Ge({type:"opened"})},d=()=>{Ge({type:"closed"})},c=()=>{Ge({type:"swipe"})},f=T=>{T.preventDefault(),i()};ce(()=>{var T,N;return(T=o(r))==null||T.addEventListener("close",d),(N=o(r))==null||N.addEventListener("cancel",f),()=>{var H,K;(H=o(r))==null||H.removeEventListener("close",d),(K=o(r))==null||K.removeEventListener("cancel",f)}});const v=()=>{var T,N,H;(T=o(r))==null||T.style.removeProperty("--transition-timing"),(N=o(r))==null||N.style.removeProperty("transform"),(H=o(r))==null||H.style.removeProperty("--backdrop-bg")},h=G(fa);ve(()=>{var T,N,H;if(o(s),!!o(r))switch(o(s).type){case"closeSwiping":{const K=setTimeout(()=>{i()},3e3);return()=>{clearTimeout(K)}}case"openSwiping":{const K=setTimeout(()=>{l()},3e3);return()=>{clearTimeout(K)}}case"opening":{o(r).open||o(r).showModal(),o(r).getBoundingClientRect();const K=setTimeout(()=>{v()},n+1),j=()=>{clearTimeout(K),v()};return(T=o(r))==null||T.addEventListener("transitionend",j,{once:!0}),u(),()=>{var V;(V=o(r))==null||V.removeEventListener("transitionend",j)}}case"closing":{const K=setTimeout(()=>{o(s).type==="closing"&&d()},n+1),j=()=>{clearTimeout(K),d()};return(N=o(r))==null||N.addEventListener("transitionend",j,{once:!0}),()=>{var V;(V=o(r))==null||V.removeEventListener("transitionend",j)}}case"closed":(H=o(r))==null||H.close(),v();break;case"opened":v();break}});var g=ai(),p=z(g),y=b(p),k=b(y);{var m=T=>{var N=Se(),H=z(N);Me(H,()=>e.children),E(T,N)};M(k,T=>{o(s).type!=="closed"&&T(m)})}ye(y,T=>S(a,T),()=>o(a)),ye(p,T=>S(r,T),()=>o(r));var _=D(p,2);{var w=T=>{Yn(T,{get dialog(){return o(r)},get dialogInner(){return o(a)},onClose:i})};M(_,T=>{o(s).type==="opened"&&!e.blocked&&T(w)})}var C=D(_,2);{var L=T=>{ri(T,{onClose:i,onOpen:l,onSwipe:c,get sidebarState(){return o(s).type},get dialog(){return o(r)}})};M(C,T=>{(!o(h)&&o(s).type==="closed"||o(s).type==="opened"||o(s).type==="openSwiping"||o(s).type==="closeSwiping")&&!e.blocked&&T(L)})}ie(()=>Z(p,1,ee([{open:o(s).type==="opened",hidden:e.blocked,isAnimationOn:ge.working&&(!ge.isSwiping||!e.blocked)}]),"svelte-1in1s0g")),E(t,g),Y()}var oi=x('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>');function ot(t,e){let n=G(()=>e.style==="selected"?"45deg":"0deg");var r=oi();r.__click=function(...i){var l;(l=e.onClick)==null||l.apply(this,i)};var a=b(r),s=D(a);we(s,()=>({"--size":"20px","--rotate":o(n)})),_e(s.lastChild,{name:"plus"}),ie(()=>{he(r,"type",e.type),Z(r,1,ee([{selectedTag:e.style==="selected"}]),"svelte-1uqucql"),vt(a,`${e.title??""} `)}),E(t,r)}be(["click"]);const ii=t=>{t.preventDefault(),Fe("settings")};var li=x("<div></div>"),ci=x('<div class="sidebarFixed svelte-1y05y7k"><div class="nav svelte-1y05y7k"><!> <a class="link svelte-1y05y7k"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a></div> <div class="searchWrapper svelte-1y05y7k"><!></div> <!></div> <div></div>',1),ui=x("<div></div>"),di=x('<div class="sidebar svelte-1y05y7k"><div class="sidebarFixed svelte-1y05y7k"><div class="searchWrapper svelte-1y05y7k"><!></div> <!></div> <div class="tags svelte-1y05y7k"></div></div>');function fi(t,e){W(e,!0);let n=P(null),r=P(""),a=G(()=>{var p;return((p=new URLSearchParams(F.search).get("selectedTags"))==null?void 0:p.split(","))||[]});const s=()=>{const p=Ye();p.includes("settings")||p.push("settings");const y=new URLSearchParams(F.search);return y.set("stackPages",p.join(",")),`${F.pathname}?${y}`},i=p=>{const y=new URLSearchParams(F.search);y.set("selectedTags",[...o(a),p].join(",")),ut(`${F.pathname}${y.size>0?`?${y.toString()}`:""}`),S(r,"")},l=p=>{const y=new URLSearchParams(F.search),k=o(a).filter(m=>m!==p);k.length===0?y.delete("selectedTags"):y.set("selectedTags",k.join(",")),ut(`${F.pathname}${y.size>0?`?${y.toString()}`:""}`)};let u=G(()=>kt()?Object.values(Ta()).filter(p=>!o(a).some(y=>p.name===y)):[]),d=G(s),c=G(()=>Ye().length>0||Do());var f=Se(),v=z(f);{var h=p=>{si(p,{get blocked(){return o(c)},children:(y,k)=>{var m=ci(),_=z(m),w=b(_),C=b(w);ea(C,{});var L=D(C,2);L.__click=[ii];var T=b(L);we(T,()=>({"--size":"20px"})),_e(T.lastChild,{name:"settings"});var N=D(w,2),H=b(N);Tn(H,{placeholder:"Search tag",get value(){return o(r)},set value(q){S(r,q,!0)}});var K=D(N,2);{var j=q=>{var I=li();Z(I,1,ee(["tags","selectedTags"]),"svelte-1y05y7k"),je(I,20,()=>o(a),B=>B,(B,O)=>{ot(B,{get title(){return O},onClick:()=>l(O),style:"selected"})}),ye(I,B=>S(n,B),()=>o(n)),E(q,I)};M(K,q=>{o(a).length>0&&q(j)})}var V=D(_,2);Z(V,1,ee(["tags","tagsWrapper"]),"svelte-1y05y7k"),je(V,21,()=>o(u),q=>q.name,(q,I)=>{var B=Se(),O=z(B);{var U=J=>{ot(J,{get title(){return o(I).name},onClick:()=>i(o(I).name)})};M(O,J=>{(o(r)===""||o(I).name.toLowerCase().indexOf(o(r).toLowerCase())!==-1)&&J(U)})}E(q,B)}),ie(q=>{he(L,"href",o(d)),Kt(V,`min-height: height: calc(100dvh - 190px - ${q??""}px);`)},[()=>o(n)?o(n).getBoundingClientRect().height:0]),E(y,m)},$$slots:{default:!0}})},g=p=>{var y=di(),k=b(y),m=b(k),_=b(m);Tn(_,{placeholder:"Search tag",get value(){return o(r)},set value(T){S(r,T,!0)}});var w=D(m,2);{var C=T=>{var N=ui();Z(N,1,ee(["tags","selectedTags"]),"svelte-1y05y7k"),je(N,20,()=>o(a),H=>H,(H,K)=>{ot(H,{get title(){return K},onClick:()=>l(K),style:"selected"})}),E(T,N)};M(w,T=>{o(a).length>0&&T(C)})}var L=D(k,2);je(L,21,()=>o(u),T=>T.name,(T,N)=>{var H=Se(),K=z(H);{var j=V=>{ot(V,{get title(){return o(N).name},onClick:()=>i(o(N).name)})};M(K,V=>{(o(r)===""||o(N).name.toLowerCase().indexOf(o(r).toLowerCase())!==-1)&&V(j)})}E(T,H)}),E(p,y)};M(v,p=>{gt()?p(h):p(g,!1)})}E(t,f),Y()}be(["click"]);function Qe(t){const e=String.fromCharCode(...new Uint8Array(t));return window.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function Gn(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const n=e.length%4;return n&&(e+="=".repeat(4-n)),e}function Zn(t){try{const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}catch(e){throw console.error("Error decoding base64:",e,"Input:",t),e}}function Nt(t){const e=Gn(t);return Zn(e)}const vi=async t=>{const e=await crypto.subtle.importKey("raw",t.serverKey,{name:"HKDF"},!1,["deriveKey"]),n=await crypto.subtle.deriveKey({name:"HKDF",salt:t.id,info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt"]);return{encryptedClientKey:await crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(12)},n,t.clientKey)}},hi=async t=>{const e=await crypto.subtle.importKey("raw",t.serverKey,{name:"HKDF"},!1,["deriveKey"]),n=await crypto.subtle.deriveKey({name:"HKDF",info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["decrypt"]),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(12)},n,t.encryptedClientKey);return new Uint8Array(r)};function gi(t,e){const n=new ArrayBuffer(t.length+e.length),r=new Uint8Array(n);return r.set(t,0),r.set(e,t.length),n}const pi=async t=>{const e=await crypto.subtle.importKey("raw",gi(t.clientKey,t.serverKey),{name:"HKDF"},!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"HKDF",info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},_i=async(t,e)=>{const n=JSON.parse(t),a=new Uint8Array(n).buffer,s=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(12)},e,a);return new TextDecoder().decode(s)},mi=async(t,e)=>{const r=await(await fetch("/api/serverKey",{method:"POST"})).json(),a=await hi({encryptedClientKey:Nt(t.encryptedClientKey),serverKey:Nt(r.serverKey)});return{commonKey:await pi({clientKey:a,serverKey:new Uint8Array(Nt(e))})}};class wi{constructor(){rt(this,"queue",[]);rt(this,"commonKey",null);rt(this,"status","idle");rt(this,"ws",null)}async saveNewRecords(e,n){const r=await Promise.all(n.records.map(async s=>{if(this.commonKey===null)throw new Error("Common key is not initialized");const i=await _i(s.data,this.commonKey),l=JSON.parse(i);return{id:s.id,url:l.url,title:l.title,description:l.description,tags:l.tags,createdAt:l.createdAt,updatedAt:l.updatedAt}}));if(await ma(r),(await fetch("/api/sync/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lastLogId:n.lastLogId})})).status===200){await dn();const s={...e,lastSync:Date.now(),lastLogId:n.lastLogId};dt(s),Xn(s)}}connect(){}mergeLogNotes(e,n){const r={};return e.forEach(a=>{r[a.id]=a}),n.forEach(a=>{r[a.id]?r[a.id].createdAt<a.createdAt&&(r[a.id]=a):r[a.id]=a}),Object.values(r)}async start(){const e=await Qo();this.queue=this.mergeLogNotes(this.queue,e);const n=async()=>{var a;const r=wa().account;if(r){if(!navigator.onLine){setTimeout(n,5e3);return}if(!this.commonKey){const i=await(await fetch("/api/serverKey",{method:"POST"})).json(),{commonKey:l}=await mi(r,i.serverKey);this.commonKey=l}this.status==="idle"&&(this.status="sync",this.connect()),(a=this.ws)==null||a.send(JSON.stringify({type:"sync"}))}};n()}async putNote(e){const n={id:Ot(),operation:"put",recordId:e.id,createdAt:Date.now(),data:JSON.stringify({...e})};await pn(n),this.queue.push(n)}async delNote(e){const n={id:Ot(),operation:"del",recordId:e,createdAt:Date.now()};await pn(n),this.queue.push(n)}async delAll(){const e={id:Ot(),operation:"delAll",createdAt:Date.now()};await pn(e),this.queue.push(e)}}const Dn=(t,e,n,r=new Set,a={})=>{var s,i;for(const l of t.children)if(l.tagName==="DT"){const u=l.querySelector(":scope > A"),d=l.querySelector(":scope > H3");if(u){const c=u.getAttribute("href"),f=u.textContent||"unknown";if(!c)return n;const v=e.find(h=>h.toLowerCase()==="notes bar")?e.filter(h=>h.toLowerCase()!=="notes bar"):["other"];if(a[c])a[c].tags=[...new Set([...a[c].tags,...v])];else{const h={id:Ot(),url:c,title:f,description:"",tags:v.length>0?v:[],updatedAt:Date.now(),createdAt:Date.now()};a[h.url]=h,n.push(h)}}else if(d){const c=(s=d.textContent)==null?void 0:s.trim();if(c&&((i=d.nextElementSibling)==null?void 0:i.tagName)==="DL"){const f=[...e];f.push(c);const v=d.nextElementSibling;r.has(v)||(r.add(v),Dn(v,f,n,r,a))}}}else l.tagName!=="DL"&&l.children.length>0&&(r.has(l)||(r.add(l),Dn(l,[...e],n,r,a)));return n},yi=async t=>{const e=await t.text(),a=new DOMParser().parseFromString(e,"text/html").querySelector("DL");return a?Dn(a,[],[]):[]},Si=t=>{const e=Math.floor(Date.now()/1e3),n={};t.forEach(a=>{const s=a.tags||["Imported"];if(s.length===0){n.ROOT||(n.ROOT=[]),n.ROOT.push(a);return}s.forEach(i=>{n[i]||(n[i]=[]),n[i].push(a)})});let r=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${e}" LAST_MODIFIED="${e}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(n).forEach(a=>{a!=="ROOT"&&a!=="other"&&(r+=`
	<DT><H3 ADD_DATE="${e}" LAST_MODIFIED="${e}">${a}</H3>
	<DL><p>`,n[a].forEach(s=>{const i=s.title.replace(/"/g,"&quot;");r+=`
		<DT><A HREF="${s.url}" ADD_DATE="${Math.floor(s.createdAt/1e3)||e}">${i}</A>`}),r+=`
	</DL><p>`)}),n.ROOT&&n.ROOT.forEach(a=>{const s=a.title.replace(/"/g,"&quot;");r+=`
	<DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||e}">${s}</A>`}),r+=`
</DL><p>`,n.other&&n.other.forEach(a=>{const s=a.title.replace(/"/g,"&quot;");r+=`
	<DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||e}">${s}</A>`}),r+="</DL><p>",r};async function Qn(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{console.error("")}}const nt=new BroadcastChannel("app"),pt=new wi;nt.addEventListener("message",async t=>{if(console.log("Received message from BroadcastChannel:",t.data),t.data&&typeof t.data=="string"){const e=JSON.parse(t.data);if(e.operation==="addNote"){const n=e.note;Sa(n)}else if(e.operation==="updateNote"){const n=e.note;ba(n)}else if(e.operation==="deleteNote"){const n=e.noteId;Ea(n)}else if(e.operation==="clearAppState")ka();else if(e.operation==="reloadNotes")dn();else if(e.operation==="initLocalAccount")dt(null),kn(),ut("/");else if(e.operation==="initAccount"){const n=await ga();n&&(dt(n),kn(),ut("/"),pt.start())}}});qo().then(async()=>{$o();const t=await ga();t===void 0?Fe("start"):(wo("start")&&(kn(),ut("/")),t?(dt(t),await Qn(),pt.start()):dt(null),await dn())}).catch(()=>{console.error("failed to init db")});const bi=async t=>{const e={...t,id:Ot(),createdAt:Date.now(),updatedAt:Date.now()};Sa(e),nt.postMessage(JSON.stringify({operation:"addNote",note:{...e}})),await _a({...e}),pt.putNote({...e})},Ei=async t=>{const e={...t,updatedAt:Date.now()};nt.postMessage(JSON.stringify({operation:"updateNote",note:e})),ba(e),await _a(e),pt.putNote({...e})},ki=async t=>{nt.postMessage(JSON.stringify({operation:"deleteNote",noteId:t})),Ea(t),await Go(t),pt.delNote(t)},Ci=async()=>{nt.postMessage(JSON.stringify({operation:"clearAppState"})),ka(),await qn(),pt.delAll()},Ti=async(t="notes-export.json")=>{const e=JSON.stringify({notes:wa().notes}),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(r)},0)},vr=async t=>{await ma(t),nt.postMessage(JSON.stringify({operation:"reloadNotes"})),await dn()},Di=async()=>{await qn(),await Qn(),await Xn(null),dt(null),nt.postMessage(JSON.stringify({operation:"initLocalAccount"}))},Da=async t=>{await qn(),await Qn();const{encryptedClientKey:e}=await vi({id:t.credentialId,clientKey:t.clientKey,serverKey:t.serverKey}),n={encryptedClientKey:Qe(e),lastLogId:-1,lastSync:-1};await Xn(n),dt(n),nt.postMessage(JSON.stringify({operation:"initAccount"})),pt.start()};var Li=x('<div class="input-container svelte-hz572l"><input/> <div class="error-message svelte-hz572l"><!></div></div>');function _n(t,e){W(e,!0);let n=Q(e,"value",15,""),r=Q(e,"error",3,"");var a=Li(),s=b(a);s.__input=function(...c){var f;(f=e.onInput)==null||f.apply(this,c)};let i;var l=D(s,2),u=b(l);{var d=c=>{var f=le();ie(()=>vt(f,r())),E(c,f)};M(u,c=>{r()&&c(d)})}ie(c=>{he(s,"placeholder",e.placeholder),i=Z(s,1,"svelte-hz572l",null,i,c)},[()=>({error:!!r()})]),He("blur",s,function(...c){var f;(f=e.onBlur)==null||f.apply(this,c)}),He("focus",s,function(...c){var f;(f=e.onFocus)==null||f.apply(this,c)}),jn(s,n),E(t,a),Y()}be(["input"]);var Ai=x("<div></div>"),Pi=x('<form class="svelte-tcgkvd"><!> <!> <textarea placeholder="notes" class="svelte-tcgkvd"></textarea> <div class="boxtags"><div class="sidebarFixed"><!></div> <div class="tags svelte-tcgkvd"><!> <!></div> <div class="searchWrapper svelte-tcgkvd"><!></div></div> <button class="buttonSubmit svelte-tcgkvd" type="submit"> </button></form>');function La(t,e){W(e,!0);let n=Q(e,"initialTitle",3,""),r=Q(e,"initialUrl",3,""),a=Q(e,"initialDescription",3,""),s=Q(e,"initialTags",19,()=>[]),i=Q(e,"mode",3,"add"),l=P(""),u=P(ue(n())),d=P(ue(r())),c=P(ue(a())),f=P(ue(s().filter(R=>R!=="inbox")));const v=R=>{o(f).includes(R)||S(f,[...o(f),R],!0)},h=R=>{const re=o(f).filter(A=>A!==R);re.length===0?S(f,[],!0):S(f,re,!0)};let g=G(()=>kt()?[...ya().reduce((R,re)=>(re==null||re.tags.forEach(A=>{R.has(A)||R.add(A)}),R),new Set)]:[]),p=G(()=>kt()?o(g).filter(R=>!o(f).some(re=>R===re)&&R!=="inbox"):[]),y=G(()=>o(p).find(R=>R.toLowerCase()===o(l).toLowerCase())||o(f).includes(o(l))),k=G(()=>o(p).filter(R=>o(l)===""?!0:R.toLowerCase().indexOf(o(l).toLowerCase())!==-1).slice(0,o(y)||o(l)===""?3:2));const m=R=>{R.preventDefault(),e.onSubmit({title:o(u).trim().slice(0,256)||"unkwown",url:o(d).trim().slice(0,2048),description:o(c).trim().slice(0,2048),tags:o(f).length>0?o(f):["inbox"]})};var _=Pi(),w=b(_);_n(w,{placeholder:"url",get value(){return o(d)},set value(R){S(d,R,!0)}});var C=D(w,2);_n(C,{placeholder:"title",get value(){return o(u)},set value(R){S(u,R,!0)}});var L=D(C,2),T=D(L,2),N=b(T),H=b(N);{var K=R=>{var re=Ai();Z(re,1,ee(["tags","selectedTags"]),"svelte-tcgkvd"),je(re,20,()=>o(f),A=>A,(A,X)=>{ot(A,{get title(){return X},onClick:()=>h(X),type:"button",style:"selected"})}),E(R,re)};M(H,R=>{o(f).length>0&&R(K)})}var j=D(N,2),V=b(j);{var q=R=>{var re=Se(),A=z(re);je(A,16,()=>o(k),X=>X,(X,ae)=>{ot(X,{get title(){return ae},onClick:()=>v(ae)})}),E(R,re)};M(V,R=>{o(l)!==""&&R(q)})}var I=D(V,2);{var B=R=>{ot(R,{get title(){return o(l)},onClick:()=>{v(o(l)),S(l,"")}})};M(I,R=>{!o(y)&&o(l)!==""&&R(B)})}var O=D(j,2),U=b(O);_n(U,{placeholder:"search tag",get value(){return o(l)},set value(R){S(l,R,!0)}});var J=D(T,2),oe=b(J);ie(()=>vt(oe,i()==="add"?"add":"edit")),He("submit",_,m),jn(L,()=>o(c),R=>S(c,R)),E(t,_),Y()}function xi(t,e){W(e,!0);let n=P(!0);const r=()=>{e.onClose()},a=()=>{S(n,!1)},s=({title:i,url:l,description:u,tags:d})=>{Ei({...e.note,title:i,url:l,description:u,tags:d.map(c=>c.trim())}),a()};va(t,{get shownDialog(){return o(n)},onClose:r,children:(i,l)=>{La(i,{get initialTitle(){return e.note.title},get initialUrl(){return e.note.url},get initialDescription(){return e.note.description},get initialTags(){return e.note.tags},onSubmit:s,mode:"edit"})},$$slots:{default:!0}}),Y()}var Oi=x('<dialog><div class="dialogInner svelte-w3h659"><!></div></dialog> <!>',1);function Aa(t,e){W(e,!0);let n=P(null),r=P(null),a=P(!1);const s=()=>{var h;const v=setTimeout(()=>{e.onClosed()},150);(h=o(n))==null||h.addEventListener("transitionend",()=>{clearTimeout(v),e.onClosed()},{once:!0}),S(a,!1)};ve(()=>{e.startClose&&s()}),ce(()=>{var v,h;(v=o(n))==null||v.showModal(),(h=o(n))==null||h.getClientRects(),S(a,!0)}),ce(()=>(ca(),()=>{ua()}));var i=Oi(),l=z(i),u=b(l),d=b(u);Me(d,()=>e.children),ye(u,v=>S(r,v),()=>o(r)),ye(l,v=>S(n,v),()=>o(n));var c=D(l,2);{var f=v=>{Yn(v,{get dialog(){return o(n)},get dialogInner(){return o(r)},onClose:s})};M(c,v=>{o(n)&&o(r)&&v(f)})}ie(()=>Z(l,1,ee(["dialog",{shown:o(a)}]),"svelte-w3h659")),E(t,i),Y()}var Ni=x("<div><!></div>");function Pa(t,e){W(e,!0);let n=P(!1),r=P(null);const a=()=>{var c;const d=setTimeout(()=>{e.onClosed()},150);(c=o(r))==null||c.addEventListener("transitionend",()=>{clearTimeout(d),e.onClosed()},{once:!0}),S(n,!1)},s=d=>{var c;d.target!==o(r)&&!((c=o(r))!=null&&c.contains(d.target))&&a()},i=d=>{var c;d.target!==o(r)&&!((c=o(r))!=null&&c.contains(d.target))&&a()};ce(()=>{var c;(c=o(r))==null||c.getClientRects(),S(n,!0);const d=setTimeout(()=>{document.addEventListener("focusin",s),document.addEventListener("click",i)},0);return()=>{clearTimeout(d),document.removeEventListener("focusin",s),document.removeEventListener("click",i)}}),ve(()=>{e.startClose&&a()});var l=Ni(),u=b(l);Me(u,()=>e.children),ye(l,d=>S(r,d),()=>o(r)),ie(()=>Z(l,1,ee(["menu",{top:e.positionTop,shown:o(n)}]),"svelte-1ljsfcr")),E(t,l),Y()}const Mi=(t,e,n)=>{const r=Ta();e.note.tags.forEach(a=>{if(o(n).includes(a)&&r[a].connections===1){const s=new URLSearchParams(F.search),i=o(n).filter(l=>l!==a);i.length===0?s.delete("selectedTags"):s.set("selectedTags",i.join(",")),mo(`${F.pathname}${s.size>0?`?${s.toString()}`:""}`)}}),ki(e.note.id)},Ii=(t,e,n)=>{S(e,!0),S(n,!0)};var Bi=x('<div class="menu svelte-xxw0l"><div><button>Edit</button></div> <div><button>Delete</button></div></div>'),Ri=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Fi=x("<!> <!>",1);function Ui(t,e){W(e,!0);const n=(p,y=Ht)=>{var k=Bi(),m=b(k),_=b(m);_.__click=[Ii,s,a];var w=D(m,2),C=b(w);C.__click=[Mi,e,l],ie(()=>{Z(_,1,ee(["button",{buttonMenuDialog:y()}]),"svelte-xxw0l"),Z(C,1,ee(["button",{buttonMenuDialog:y()}]),"svelte-xxw0l")}),E(p,k)};let r=Q(e,"shownMenu",15),a=P(!1),s=P(!1),i=G(gt),l=G(()=>{var p;return((p=new URLSearchParams(F.search).get("selectedTags"))==null?void 0:p.split(","))||[]});const u=()=>{S(a,!1)},d=()=>{r(!1),S(s,!1)};var c=Fi(),f=z(c);{var v=p=>{var y=Se(),k=z(y);{var m=w=>{Aa(w,{get startClose(){return o(s)},onClosed:d,children:(C,L)=>{n(C,()=>!0)},$$slots:{default:!0}})},_=w=>{var C=Ri(),L=z(C);we(L,()=>({"--bottom":"-180%","--right":"30px"})),Pa(L.lastChild,{get startClose(){return o(s)},get positionTop(){return e.showMenuUp},onClosed:d,children:(T,N)=>{n(T,()=>!1)},$$slots:{default:!0}}),E(w,C)};M(k,w=>{o(i)?w(m):w(_,!1)})}E(p,y)};M(f,p=>{r()&&p(v)})}var h=D(f,2);{var g=p=>{xi(p,{get note(){return e.note},onClose:u})};M(h,p=>{o(a)&&p(g)})}E(t,c),Y()}be(["click"]);const Ki=(t,e,n)=>{e.showMenuUp||S(n,!0)},Hi=(t,e)=>{navigator.clipboard.writeText(e.note.url),so("Link copied to clipboard")},ji=(t,e)=>{S(e,!0)},zi=(t,e)=>{S(e,!1)};var Vi=x('<li class="note svelte-11sazhi"><img loading="lazy" class="noteIcon" height="16" width="16" alt="icon"/> <a class="noteLink svelte-11sazhi" target="_blank" rel="noopener noreferrer"> </a> <div class="spacer svelte-11sazhi"></div> <div><button class="button svelte-11sazhi"><!> <!></button> <button><!> <!></button> <!></div></li>');function Wi(t,e){W(e,!0);let n=P(!1),r=P(!1);const a=k=>{try{return`https://external-content.duckduckgo.com/ip3/${new URL(k).host}.ico`}catch{return""}};var s=Vi();s.__focusin=[ji,n],s.__focusout=[zi,n];var i=b(s),l=D(i,2),u=b(l),d=D(l,4),c=b(d);c.__click=[Hi,e];var f=b(c);_e(f,{name:"copy"});var v=D(f,2);tt(v,{children:(k,m)=>{var _=le("copy link");E(k,_)}});var h=D(c,2);h.__click=[Ki,e,r],Z(h,1,ee(["button","buttonMenu"]),"svelte-11sazhi");var g=b(h);_e(g,{name:"menu"});var p=D(g,2);tt(p,{children:(k,m)=>{var _=le("show menu");E(k,_)}});var y=D(h,2);Ui(y,{get note(){return e.note},get showMenuUp(){return e.showMenuUp},get shownMenu(){return o(r)},set shownMenu(k){S(r,k,!0)}}),ie(k=>{he(i,"src",k),he(l,"tabindex",e.focusHidden?-1:0),he(l,"href",e.note.url),vt(u,e.note.title),Z(d,1,ee(["noteMenuWrapper",{noteMenuWrapperActive:o(n)}]),"svelte-11sazhi"),he(c,"tabindex",e.focusHidden?-1:0),he(h,"tabindex",e.focusHidden?-1:0)},[()=>a(e.note.url)]),E(t,s),Y()}be(["focusin","focusout","click"]);const Pt=ue({ref:null}),Yi=(t,e)=>{o(e)||S(e,!0)};var Ji=(t,e)=>e("newest"),Xi=(t,e)=>e("oldest"),qi=(t,e)=>e("AtoZ"),Gi=(t,e)=>e("ZtoA"),Zi=x("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),Qi=x('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),$i=x('<div class="orderMenu svelte-16tnh9z"><button><!> <!></button> <!></div>');function el(t,e){W(e,!0);const n=(p,y=Ht)=>{var k=Zi(),m=b(k);m.__click=[Ji,l];var _=D(m,2);_.__click=[Xi,l];var w=D(_,2);w.__click=[qi,l];var C=D(w,2);C.__click=[Gi,l],ie(()=>{Z(k,1,ee(["menu",{menuDialog:y()}]),"svelte-16tnh9z"),Z(m,1,ee(["menuButton",{menuButtonDialog:y(),current:o(i)==="newest"}]),"svelte-16tnh9z"),Z(_,1,ee(["menuButton",{menuButtonDialog:y(),current:o(i)==="oldest"}]),"svelte-16tnh9z"),Z(w,1,ee(["menuButton",{menuButtonDialog:y(),current:o(i)==="AtoZ"}]),"svelte-16tnh9z"),Z(C,1,ee(["menuButton",{menuButtonDialog:y(),current:o(i)==="ZtoA"}]),"svelte-16tnh9z")}),E(p,k)};let r=P(!1),a=P(!1),s=G(gt),i=G(na);const l=p=>{S(a,!0),go(p)},u=()=>{S(r,!1),S(a,!1)};var d=$i(),c=b(d);c.__click=[Yi,r],Z(c,1,ee(["button","buttonMenu"]),"svelte-16tnh9z");var f=b(c);_e(f,{name:"filter"});var v=D(f,2);tt(v,{children:(p,y)=>{var k=le("show feed order menu");E(p,k)}});var h=D(c,2);{var g=p=>{var y=Se(),k=z(y);{var m=w=>{Aa(w,{get startClose(){return o(a)},onClosed:u,children:(C,L)=>{n(C,()=>!0)},$$slots:{default:!0}})},_=w=>{var C=Qi(),L=z(C);we(L,()=>({"--right":"20px","--top":"60px"})),Pa(L.lastChild,{get startClose(){return o(a)},onClosed:u,children:(T,N)=>{n(T,()=>!1)},$$slots:{default:!0}}),E(w,C)};M(k,w=>{o(s)?w(m):w(_,!1)})}E(p,y)};M(h,p=>{o(r)&&p(g)})}E(t,d),Y()}be(["click"]);const tl=(t,e)=>{o(e)&&o(e).scrollTo({top:0,behavior:"smooth"})};var nl=x('<div class="emptyMessage svelte-1nwd0on">No notes found</div>'),rl=x('<div class="wrapperButtonTop svelte-1nwd0on"><button class="buttonTop svelte-1nwd0on"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button></div>'),al=x('<div class="filter svelte-1nwd0on"><div class="searchWrapper svelte-1nwd0on"><!></div> <!></div> <div class="wrapperFeed svelte-1nwd0on"><div class="wrapperContainer svelte-1nwd0on"><div class="feed svelte-1nwd0on"><ul class="svelte-1nwd0on"></ul> <!></div></div></div> <!>',1);function sl(t,e){W(e,!0);let n=P(null),r=50,a=P(0),s=P(0),i=P(0),l=P(ue([])),u=P(""),d=G(()=>gt()?o(n):Pt.ref),c=null,f=null,v=P(!1),h=0;const g=G(po);ve(()=>{var A;o(u),o(g),(A=o(d))==null||A.scrollTo(0,0)});const p=()=>{if(o(d)){const A=o(d).scrollTop||0;A===0?S(v,!1):!o(v)&&h>A?S(v,!0):o(v)&&h<A&&S(v,!1),h=A}},y=()=>{da(),c||(c=requestAnimationFrame(()=>{var ae;p();const A=((ae=o(d))==null?void 0:ae.scrollTop)||0;S(i,A,!0);const X=Math.ceil(o(a)/r);S(s,Math.floor(A/(r*X))*(r*X)),c=null}))},k=()=>{f||(f=requestAnimationFrame(()=>{var ae;p(),S(a,window.innerHeight-180||0,!0);const A=((ae=o(d))==null?void 0:ae.scrollTop)||0;S(i,A,!0);const X=Math.ceil(o(a)/r);S(s,Math.floor(A/(r*X))*(r*X)),f=null}))};ce(()=>{k(),y()}),ve(()=>{var A;return(A=o(d))==null||A.addEventListener("scroll",y),window.addEventListener("resize",k),()=>{var X;(X=o(d))==null||X.removeEventListener("scroll",y),window.removeEventListener("resize",k)}});const m=G(na);ve(()=>{const A=ya(),X=[],ae={};for(let me=A.length-1;me>=0;me--){const de=A[me];if(de&&!(o(g).length&&o(g).some(Xe=>!de.tags.includes(Xe)))&&!(o(u)&&!(de.title.toLowerCase().includes(o(u).toLowerCase())||de.url.toLowerCase().includes(o(u).toLowerCase())||de.description.toLowerCase().includes(o(u).toLowerCase())))){if(de.tags)for(const Xe of de.tags)ae[Xe]?ae[Xe].connections++:ae[Xe]={name:Xe,connections:1};X.push(de)}}ti(ae),X.sort((me,de)=>{if(!me||!de)return 0;switch(o(m)){case"newest":return me.createdAt>de.createdAt?-1:1;case"oldest":return me.createdAt<de.createdAt?-1:1;case"AtoZ":return me.title.localeCompare(de.title);case"ZtoA":return de.title.localeCompare(me.title);default:return 0}}),S(l,X,!0)});const _=G(()=>o(l).length*r);let C=G(()=>{const A=Math.ceil(o(a)/r);let X=Math.floor(o(s)/r);return X=X-Math.min(X,A),o(l).slice(X,X+A*3)}),L=G(()=>r*Math.ceil(o(a)/r));const T=G(()=>o(s)-Math.min(o(s),o(L))),N=()=>{o(d)&&o(d).scrollTo({top:0,behavior:"smooth"})};var H=al(),K=z(H),j=b(K),V=b(j);Tn(V,{onFocus:N,placeholder:"Search",get value(){return o(u)},set value(A){S(u,A,!0)}});var q=D(j,2);el(q,{});var I=D(K,2),B=b(I),O=b(B),U=b(O);je(U,23,()=>o(C),A=>A.id,(A,X,ae)=>{const me=G(()=>o(ae)*r<o(i)-o(T)-r/2||o(ae)*r>o(i)-o(T)+Math.floor(o(a)/r)*r),de=G(()=>(o(ae)+3)*r<o(i)-o(T)-r/2||(o(ae)+3)*r>o(i)-o(T)+Math.floor(o(a)/r)*r);Wi(A,{get focusHidden(){return o(me)},get showMenuUp(){return o(de)},get note(){return o(X)}})});var J=D(U,2);{var oe=A=>{var X=nl();E(A,X)};M(J,A=>{o(C).length===0&&kt()&&A(oe)})}ye(B,A=>S(n,A),()=>o(n));var R=D(I,2);{var re=A=>{var X=rl(),ae=b(X);ae.__click=[tl,d];var me=b(ae);tt(me,{children:(Xe,uc)=>{var Oa=le("top");E(Xe,Oa)}});var de=D(me,2);we(de,()=>({"--size":"22px"})),_e(de.lastChild,{name:"up"}),E(A,X)};M(R,A=>{o(v)&&A(re)})}ie(A=>{Kt(O,`min-height: ${A??""}px`),Kt(U,`transform: translateY(${o(T)??""}px);`)},[()=>Math.max((o(_)>o(a),o(_)),0)]),E(t,H),Y()}be(["click"]);var ol=x('<!> <div class="content svelte-cu0ar8"><!></div>',1);function il(t){var e=ol(),n=z(e);fi(n,{});var r=D(n,2),a=b(r);sl(a,{}),E(t,e)}var at=(t=>(t.Light="light",t.System="system",t.Dark="dark",t))(at||{});let xa=P(ue(localStorage.getItem("colorScheme")||"system"));const ll=t=>{localStorage.setItem("colorScheme",t),t==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.dataset.colorScheme="dark":document.documentElement.dataset.colorScheme="light":document.documentElement.dataset.colorScheme=t,S(xa,t,!0)},cl=()=>o(xa);var ul=x('<div class="wrapper svelte-1elv5s4"><fieldset class="switcher svelte-1elv5s4"><legend class="vh svelte-1elv5s4">Color Scheme</legend> <input id="light" type="radio" aria-label="Light"/> <label for="light" title="Light" aria-label="Light"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="system" type="radio" aria-label="System"/> <label for="system" title="System" aria-label="System"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="dark" type="radio" aria-label="Dark"/> <label for="dark" title="Dark" aria-label="Dark"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <div class="wrapSwitcherStatus svelte-1elv5s4"><div class="switcherStatus svelte-1elv5s4"></div></div></fieldset></div>');function dl(t,e){W(e,!0);const n=G(cl),r=y=>{const k=y.target.value;ll(k)},a="color-scheme-switcher";var s=ul(),i=b(s),l=D(b(i),2);Z(l,1,ee(["vh","input"]),"svelte-1elv5s4"),he(l,"name",a),l.__change=r;var u=D(l,2);Z(u,1,ee(["switcherButton","light"]),"svelte-1elv5s4");var d=b(u);we(d,()=>({"--size":"20px"})),_e(d.lastChild,{name:"sun"});var c=D(u,2);Z(c,1,ee(["vh","input"]),"svelte-1elv5s4"),he(c,"name",a),c.__change=r;var f=D(c,2);Z(f,1,ee(["switcherButton","system"]),"svelte-1elv5s4");var v=b(f);we(v,()=>({"--size":"14px"})),_e(v.lastChild,{name:"a"});var h=D(f,2);Z(h,1,ee(["vh","input"]),"svelte-1elv5s4"),he(h,"name",a),h.__change=r;var g=D(h,2);Z(g,1,ee(["switcherButton","dark"]),"svelte-1elv5s4");var p=b(g);return we(p,()=>({"--size":"20px"})),_e(p.lastChild,{name:"moon"}),ie(()=>{qt(l,at.Light),Gt(l,o(n)===at.Light),qt(c,at.System),Gt(c,o(n)===at.System),qt(h,at.Dark),Gt(h,o(n)===at.Dark)}),E(t,s),Y({handleChange:r})}be(["change"]);const fl=()=>{Fe("import")},vl=()=>{Fe("export")},hl=()=>{Fe("clearStorage")};var gl=x("<span> </span>"),pl=x('<div class="svelte-378nhf"><!> <ul class="svelte-378nhf"><li class="svelte-378nhf"><button class="button svelte-378nhf"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-378nhf">import data</span></button></li> <li class="svelte-378nhf"><button class="button svelte-378nhf"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-378nhf">export data</span></button></li> <li class="svelte-378nhf"><button class="button svelte-378nhf"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-378nhf">clear storage</span></button></li></ul> <div class="version svelte-378nhf"><!></div></div>');function _l(t,e){W(e,!0);let n=P("");ce(()=>{const m=new AbortController;return fetch("/build-metadata.json",{signal:m.signal}).then(_=>_.json()).then(_=>{S(n,`${_.buildHash}`)}),()=>{m.abort()}});var r=pl(),a=b(r);dl(a,{});var s=D(a,2),i=b(s),l=b(i);l.__click=[fl];var u=b(l);we(u,()=>({"--size":"20px"})),_e(u.lastChild,{name:"import"});var d=D(i,2),c=b(d);c.__click=[vl];var f=b(c);we(f,()=>({"--size":"20px"})),_e(f.lastChild,{name:"export"});var v=D(d,2),h=b(v);h.__click=[hl];var g=b(h);we(g,()=>({"--size":"20px"})),_e(g.lastChild,{name:"trash"});var p=D(s,2),y=b(p);{var k=m=>{var _=gl(),w=b(_);ie(C=>vt(w,`version: 0.0.1 build_date: "${C??""}" build_hash:
				${o(n)??""}`),[()=>new Date(1752973517026).toISOString().replaceAll("T"," ").replace(/\..*/,"")]),E(m,_)};M(y,m=>{o(n)&&m(k)})}E(t,r),Y()}be(["click"]);function ml(t,e){W(e,!1);const n=()=>{aa()},r=({title:a,url:s,description:i,tags:l})=>{bi({title:a,url:s,description:i,tags:l.map(u=>u.trim())}),n()};Wt(),La(t,{onSubmit:r}),Y()}var wl=x('<button type="button"><!></button>');function Te(t,e){let n=Q(e,"type",3,"standard"),r=Q(e,"fullWidth",3,!1);var a=wl();a.__click=function(...i){var l;(l=e.onClick)==null||l.apply(this,i)};var s=b(a);Me(s,()=>e.children??Ht),ie(()=>Z(a,1,ee(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:r()}]),"svelte-ut1pbk")),E(t,a)}be(["click"]);var yl=x('<div class="loader svelte-1ygr46m"></div>');function Yt(t){var e=yl();E(t,e)}const hr=async(t,e)=>{const n=t.target;!n.files||n.files.length===0||await e(n.files[0])};var Sl=x('<div class="mobileContainer svelte-1n1lt8i"><!></div> <input type="file" accept=".json, .html" style="display: none;"/>',1),bl=x('<div class="desktopContainer svelte-1n1lt8i"><div class="desktopButtonContainer svelte-1n1lt8i"><!></div> <div role="button" tabindex="-1"><div tabindex="-1" class="dropzone-content svelte-1n1lt8i"><p class="svelte-1n1lt8i">Drag and drop your file here</p> <p class="svelte-1n1lt8i">or</p></div> <input type="file" accept=".json, .html" style="display: none;"/></div></div>'),El=x('<p class="message svelte-1n1lt8i">Select a file to import your notes</p> <!>',1),kl=x('<p class="message svelte-1n1lt8i">Importing data...</p> <!>',1),Cl=x('<p class="message success svelte-1n1lt8i">Data imported successfully!</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),Tl=x('<p class="message error svelte-1n1lt8i">Something went wrong</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),Dl=x('<div class="content svelte-1n1lt8i"><!></div>');function Ll(t,e){W(e,!0);let n=P("idle"),r=P(null),a=P(!1),s=P(null);const i=()=>{ht()};ve(()=>{ke(o(n)==="loading")}),ce(()=>(o(r)&&o(r).addEventListener("cancel",m=>{m.preventDefault(),m.stopImmediatePropagation(),m.stopPropagation()}),()=>{ke(!1)}));const l=async m=>{const _=await m.text(),w=JSON.parse(_),C=[];if(!w.notes)throw new Error("Invalid import file format");for(const L of Object.values(w.notes))L&&C.push(L);await vr(C)},u=async m=>{S(n,"loading");try{if(m.name.endsWith(".json"))await l(m);else if(m.name.endsWith(".html"))await vr(await yi(m));else throw new Error("Unsupported file format. Please upload a JSON or HTML file.");S(n,"success")}catch(_){console.error("Error processing file:",_),S(n,"error")}},d=()=>{var m;(m=o(r))==null||m.click()},c=m=>{m.preventDefault(),m.stopPropagation(),S(a,!0)},f=m=>{m.preventDefault(),m.stopPropagation(),S(a,!1)},v=m=>{m.preventDefault(),m.stopPropagation(),S(a,!0)},h=async m=>{var w;if(m.preventDefault(),m.stopPropagation(),S(a,!1),!((w=m.dataTransfer)!=null&&w.files)||m.dataTransfer.files.length===0)return;const _=m.dataTransfer.files[0];if(_.type!=="application/json"&&_.type!=="text/html"){S(n,"error");return}await u(_)};var g=Dl(),p=b(g);{var y=m=>{var _=El(),w=D(z(_),2);{var C=T=>{var N=Sl(),H=z(N),K=b(H);Te(K,{onClick:d,children:(V,q)=>{var I=le("Select File");E(V,I)},$$slots:{default:!0}});var j=D(H,2);j.__change=[hr,u],ye(j,V=>S(r,V),()=>o(r)),E(T,N)},L=T=>{var N=bl(),H=b(N),K=b(H);Te(K,{onClick:d,children:(q,I)=>{var B=le("Select File");E(q,B)},$$slots:{default:!0}});var j=D(H,2),V=D(b(j),2);V.__change=[hr,u],ye(V,q=>S(r,q),()=>o(r)),ye(j,q=>S(s,q),()=>o(s)),ie(()=>Z(j,1,ee(["dropzone",{active:o(a)}]),"svelte-1n1lt8i")),He("dragenter",j,c),He("dragover",j,v),He("dragleave",j,f),He("drop",j,h),E(T,N)};M(w,T=>{gt()?T(C):T(L,!1)})}E(m,_)},k=(m,_)=>{{var w=L=>{var T=kl(),N=D(z(T),2);Yt(N),E(L,T)},C=(L,T)=>{{var N=K=>{var j=Cl(),V=D(z(j),2),q=b(V);Te(q,{onClick:i,children:(I,B)=>{var O=le("close");E(I,O)},$$slots:{default:!0}}),E(K,j)},H=(K,j)=>{{var V=q=>{var I=Tl(),B=D(z(I),2),O=b(B);Te(O,{onClick:()=>{S(n,"idle")},children:(U,J)=>{var oe=le("Try Again");E(U,oe)},$$slots:{default:!0}}),E(q,I)};M(K,q=>{o(n)==="error"&&q(V)},j)}};M(L,K=>{o(n)==="success"?K(N):K(H,!1)},T)}};M(m,L=>{o(n)==="loading"?L(w):L(C,!1)},_)}};M(p,m=>{o(n)==="idle"?m(y):m(k,!1)})}E(t,g),Y()}be(["change"]);const Al=(t,e,n)=>{e(t.target.value),n.onChange(e())};var Pl=x('<input type="radio"/> <label> </label>',1),xl=x('<div class="wrapper svelte-1luxlbo"><fieldset class="switcher svelte-1luxlbo"><!> <div class="wrapSwitcherStatus svelte-1luxlbo"><div class="switcherStatus svelte-1luxlbo"></div></div></fieldset></div>');function Ol(t,e){const n=Ks();W(e,!0);let r=Q(e,"value",7);const a=`switcher-${n}`;var s=xl(),i=b(s),l=b(i);je(l,17,()=>e.items,c=>c.title,(c,f)=>{var v=Pl(),h=z(v);Z(h,1,ee(["vh","input"]),"svelte-1luxlbo"),h.__change=[Al,r,e];var g=D(h,2);Z(g,1,ee(["switcherButton"]),"svelte-1luxlbo");var p=b(g);ie(()=>{he(h,"id",`${o(f).title}-${n}`),he(h,"name",a),qt(h,o(f).value),Gt(h,o(f).value===r()),he(h,"aria-label",o(f).title),he(g,"for",`${o(f).title}-${n}`),he(g,"title",o(f).title),he(g,"aria-label",o(f).title),vt(p,o(f).value)}),E(c,v)});var u=D(l,2),d=b(u);ie(c=>Kt(d,c),[()=>`transform: translateX(${e.items.findIndex(c=>c.value===r())*100}%)`]),E(t,s),Y()}be(["change"]);var Nl=x('<p class="message svelte-8vhup1">Export items</p> <div class="format-switcher svelte-8vhup1"><!> <p class="format-description svelte-8vhup1"><!></p></div> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Ml=x('<p class="message svelte-8vhup1">Exporting data...</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Il=x('<p class="message svelte-8vhup1">Items exported successfully!</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Bl=x('<div class="content svelte-8vhup1"><!></div>');function Rl(t,e){W(e,!0);let n=P("idle"),r=P("html");const a=()=>{ht()};ve(()=>{ke(o(n)==="loading")}),ce(()=>()=>{ke(!1)});const s=async()=>{S(n,"loading"),setTimeout(async()=>{if(o(r)==="json")await Ti().finally(()=>{S(n,"success")});else try{const c=Si(ei()),f=new Blob([c],{type:"text/html"}),v=URL.createObjectURL(f),h=document.createElement("a");h.href=v,h.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(v),S(n,"success")}catch(c){console.error("Error exporting as HTML:",c),S(n,"success")}},0)};var i=Bl(),l=b(i);{var u=c=>{var f=Nl(),v=D(z(f),2),h=b(v);Ol(h,{items:[{title:"HTML",value:"html"},{title:"JSON",value:"json"}],get value(){return o(r)},onChange:w=>{S(r,w,!0)}});var g=D(h,2),p=b(g);{var y=w=>{var C=le("JSON format (App compatible, a faster format)");E(w,C)},k=w=>{var C=le("HTML format (Browser compatible)");E(w,C)};M(p,w=>{o(r)==="json"?w(y):w(k,!1)})}var m=D(v,2),_=b(m);Te(_,{onClick:s,children:(w,C)=>{var L=le("Export");E(w,L)},$$slots:{default:!0}}),E(c,f)},d=(c,f)=>{{var v=g=>{var p=Ml(),y=D(z(p),2),k=b(y);Yt(k),E(g,p)},h=(g,p)=>{{var y=k=>{var m=Il(),_=D(z(m),2),w=b(_);Te(w,{onClick:a,children:(C,L)=>{var T=le("Close");E(C,T)},$$slots:{default:!0}}),E(k,m)};M(g,k=>{o(n)==="success"&&k(y)},p)}};M(c,g=>{o(n)==="loading"?g(v):g(h,!1)},f)}};M(l,c=>{o(n)==="idle"?c(u):c(d,!1)})}E(t,i),Y()}var Fl=x('<div class="content svelte-9hh95f"><p class="message svelte-9hh95f">use app</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div> <div class="buttonContainerItem svelte-9hh95f"><!></div></div></div>');function Ul(t,e){W(e,!0);let n=P("idle");const r=()=>{S(n,"loading"),Fe("sign")},a=async()=>{S(n,"loading"),await Di(),ke(!1),ht()};ve(()=>{ke(o(n)==="idle"||o(n)==="loading")}),ce(()=>(ke(!0),()=>{ke(!1)}));var s=Fl(),i=D(b(s),2),l=b(i),u=b(l);Te(u,{onClick:r,fullWidth:!0,children:(f,v)=>{var h=le("with account");E(f,h)},$$slots:{default:!0}});var d=D(l,2),c=b(d);Te(c,{onClick:a,fullWidth:!0,type:"secondary",children:(f,v)=>{var h=le("without account");E(f,h)},$$slots:{default:!0}}),E(t,s),Y()}var Kl=x('<div class="content svelte-9hh95f"><p class="message svelte-9hh95f">sign in / sign up</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div> <div class="buttonContainerItem svelte-9hh95f"><!></div></div></div>');function Hl(t,e){W(e,!1);const n=async()=>{Fe("signin")},r=async()=>{Fe("signup")};ce(()=>(ke(!0),$e(!0),()=>{$e(!1)})),Wt();var a=Kl(),s=D(b(a),2),i=b(s),l=b(i);Te(l,{onClick:n,fullWidth:!0,children:(c,f)=>{var v=le("sign in");E(c,v)},$$slots:{default:!0}});var u=D(i,2),d=b(u);Te(d,{onClick:r,fullWidth:!0,children:(c,f)=>{var v=le("sign up");E(c,v)},$$slots:{default:!0}}),E(t,a),Y()}var Ke=(t=>(t[t.Signup=0]="Signup",t[t.SignupError=1]="SignupError",t))(Ke||{}),jl=x('<p class="message svelte-9hh95f">signup</p> <!>',1),zl=x('<p class="message svelte-9hh95f">error signup</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),Vl=x('<div class="content svelte-9hh95f"><!></div>');function Wl(t,e){W(e,!0);let n=P(ue(Ke.Signup));const r=async()=>{S(n,Ke.Signup,!0);try{const u=await fetch("/api/signup/start",{method:"post"}).then(f=>f.json()),d=crypto.getRandomValues(new Uint8Array(32)),c={challenge:Zn(Gn(u.challenge)),rp:{id:"localhost",name:"notes"},user:{id:d,name:"notes_account",displayName:"notes_account"},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],authenticatorSelection:{userVerification:"required"},timeout:6e4,attestation:"none"};try{const f=await navigator.credentials.create({publicKey:c}),v=f.response;if(console.log(f),f){const h={clientKey:d,challenge:u.challenge,id:f.id,rawId:Qe(f.rawId),type:f.type,response:{clientDataJSON:Qe(v.clientDataJSON),attestationObject:Qe(v.attestationObject)}},g=await fetch("/api/signup/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(g.status!==200){S(n,Ke.SignupError,!0);return}const p=await g.json();await Da({credentialId:new Uint8Array(f.rawId),clientKey:d,serverKey:new Uint8Array(Nt(p.serverKey))}),ke(!1),ht()}else throw new Error}catch(f){S(n,Ke.SignupError,!0),console.log(f)}}catch(u){S(n,Ke.SignupError,!0),console.log(u)}};ce(()=>(ke(!0),$e(!1),r(),()=>{$e(!1)})),ve(()=>{$e(o(n)!==Ke.Signup)});var a=Vl(),s=b(a);{var i=u=>{var d=jl(),c=D(z(d),2);Yt(c),E(u,d)},l=(u,d)=>{{var c=f=>{var v=zl(),h=D(z(v),2),g=b(h),p=b(g);Te(p,{onClick:()=>r(),fullWidth:!0,children:(y,k)=>{var m=le("try again");E(y,m)},$$slots:{default:!0}}),E(f,v)};M(u,f=>{o(n)===Ke.SignupError&&f(c)},d)}};M(s,u=>{o(n)===Ke.Signup?u(i):u(l,!1)})}E(t,a),Y()}var Ne=(t=>(t[t.Signin=0]="Signin",t[t.SigninError=1]="SigninError",t))(Ne||{}),Yl=x('<p class="message svelte-9hh95f">signin</p> <!>',1),Jl=x('<p class="message svelte-9hh95f">error signin</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),Xl=x('<div class="content svelte-9hh95f"><!></div>');function ql(t,e){W(e,!0);let n=P(ue(Ne.Signin));const r=async()=>{S(n,Ne.Signin,!0);try{const u=await fetch("/api/signin/start",{method:"post"}).then(c=>c.json()),d={challenge:Zn(Gn(u.challenge)),timeout:6e4,rpId:"localhost",userVerification:"required"};try{const c=await navigator.credentials.get({publicKey:d}),f=c.response;if(c){const v={challenge:u.challenge,id:c.id,rawId:Qe(c.rawId),type:c.type,response:{authenticatorData:Qe(f.authenticatorData),clientDataJSON:Qe(f.clientDataJSON),signature:Qe(f.signature)}},h=await fetch("/api/signin/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(h.status!==200){S(n,Ne.SigninError,!0);return}const g=await h.json();if(console.log("responseData: ",g),!g.success||!g.serverKey){console.error("Signin failed: ",g),S(n,Ne.SigninError,!0);return}if(!f.userHandle){S(n,Ne.SigninError,!0);return}const p=g.serverKey,y=f.userHandle;await Da({credentialId:new Uint8Array(c.rawId),clientKey:new Uint8Array(y),serverKey:new Uint8Array(Nt(p))}),ke(!1),ht()}else throw new Error}catch(c){S(n,Ne.SigninError,!0),console.log(c)}}catch(u){S(n,Ne.SigninError,!0),console.log(u)}};ce(()=>(ke(!0),$e(!1),r(),()=>{$e(!1)})),ve(()=>{$e(o(n)!==Ne.Signin)});var a=Xl(),s=b(a);{var i=u=>{var d=Yl(),c=D(z(d),2);Yt(c),E(u,d)},l=(u,d)=>{{var c=f=>{var v=Jl(),h=D(z(v),2),g=b(h),p=b(g);Te(p,{onClick:()=>r(),fullWidth:!0,children:(y,k)=>{var m=le("try again");E(y,m)},$$slots:{default:!0}}),E(f,v)};M(u,f=>{o(n)===Ne.SigninError&&f(c)},d)}};M(s,u=>{o(n)===Ne.Signin?u(i):u(l,!1)})}E(t,a),Y()}var Gl=x('<p class="message svelte-49o1d">Are you sure you want to clear the store?</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),Zl=x('<p class="message svelte-49o1d">clearing store...</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),Ql=x('<p class="message svelte-49o1d">store cleared</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),$l=x('<div class="content svelte-49o1d"><!></div>');function ec(t,e){W(e,!0);let n=P("idle");const r=()=>{ht()};ve(()=>{ke(o(n)==="loading")}),ce(()=>()=>{ke(!1)});const a=()=>{S(n,"loading"),Ci().finally(()=>{S(n,"success")})};var s=$l(),i=b(s);{var l=d=>{var c=Gl(),f=D(z(c),2),v=b(f);Te(v,{onClick:a,type:"dangerous",children:(h,g)=>{var p=le("Clear store");E(h,p)},$$slots:{default:!0}}),E(d,c)},u=(d,c)=>{{var f=h=>{var g=Zl(),p=D(z(g),2),y=b(p);Yt(y),E(h,g)},v=(h,g)=>{{var p=y=>{var k=Ql(),m=D(z(k),2),_=b(m);Te(_,{onClick:r,children:(w,C)=>{var L=le("Close");E(w,L)},$$slots:{default:!0}}),E(y,k)};M(h,y=>{o(n)==="success"&&y(p)},g)}};M(d,h=>{o(n)==="loading"?h(f):h(v,!1)},c)}};M(i,d=>{o(n)==="idle"?d(l):d(u,!1)})}E(t,s),Y()}var tc=x('<div class="svelte-t4bw1y"><!></div>');function Ue(t,e){W(e,!0);let n=P(null);ce(()=>{o(n)&&(o(n).getBoundingClientRect(),o(n).style.opacity="1")});var r=tc(),a=b(r);Me(a,()=>e.children),ye(r,s=>S(n,s),()=>o(n)),E(t,r),Y()}const gr=(t,e=Ht)=>{var n=Se(),r=z(n);{var a=i=>{Ue(i,{children:(l,u)=>{_l(l,{})},$$slots:{default:!0}})},s=(i,l)=>{{var u=c=>{Ue(c,{children:(f,v)=>{ml(f,{})},$$slots:{default:!0}})},d=(c,f)=>{{var v=g=>{Ue(g,{children:(p,y)=>{Ll(p,{})},$$slots:{default:!0}})},h=(g,p)=>{{var y=m=>{Ue(m,{children:(_,w)=>{Rl(_,{})},$$slots:{default:!0}})},k=(m,_)=>{{var w=L=>{Ue(L,{children:(T,N)=>{ec(T,{})},$$slots:{default:!0}})},C=(L,T)=>{{var N=K=>{Ue(K,{children:(j,V)=>{Ul(j,{})},$$slots:{default:!0}})},H=(K,j)=>{{var V=I=>{Ue(I,{children:(B,O)=>{Hl(B,{})},$$slots:{default:!0}})},q=(I,B)=>{{var O=J=>{Ue(J,{children:(oe,R)=>{Wl(oe,{})},$$slots:{default:!0}})},U=(J,oe)=>{{var R=re=>{Ue(re,{children:(A,X)=>{ql(A,{})},$$slots:{default:!0}})};M(J,re=>{e()==="signin"&&re(R)},oe)}};M(I,J=>{e()==="signup"?J(O):J(U,!1)},B)}};M(K,I=>{e()==="sign"?I(V):I(q,!1)},j)}};M(L,K=>{e()==="start"?K(N):K(H,!1)},T)}};M(m,L=>{e()==="clearStorage"?L(w):L(C,!1)},_)}};M(g,m=>{e()==="export"?m(y):m(k,!1)},p)}};M(c,g=>{e()==="import"?g(v):g(h,!1)},f)}};M(i,c=>{e()==="newNote"?c(u):c(d,!1)},l)}};M(r,i=>{e()==="settings"?i(a):i(s,!1)})}E(t,n)};var nc=x("<!> <!>",1);function rc(t,e){W(e,!0);let n=G(oa),r=G(kt);var a=nc(),s=z(a);{var i=c=>{il(c)};M(s,c=>{o(r)&&c(i)})}var l=D(s,2);{var u=c=>{var f=Se(),v=z(f);je(v,17,()=>o(n),Vs,(h,g,p)=>{const y=G(()=>{var k;return p!==o(n).length-1&&!!((k=o(n)[p+1])!=null&&k.shown)});fr(h,{get shown(){return o(g).shown},get hidden(){return o(y)},isLastDialog:p===0,children:(k,m)=>{gr(k,()=>o(g).page)},$$slots:{default:!0}})}),E(c,f)},d=(c,f)=>{{var v=h=>{const g=G(()=>o(n).length===1);fr(h,{onBack:()=>sa(),get shown(){return o(n)[o(n).length-1].shown},hidden:!1,get isLastDialog(){return o(g)},children:(p,y)=>{gr(p,()=>o(n)[o(n).length-1].page)},$$slots:{default:!0}})};M(c,h=>{o(n).length>0&&h(v)},f)}};M(l,c=>{gt()?c(u):c(d,!1)})}E(t,a),Y()}function ac(){const t=navigator.userAgent;if(!(/iPad|iPhone|iPod/.test(t)&&!window.MSStream))return!1;const n=/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t),r=/Macintosh/.test(t)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1;return!!n||!!r}const sc=ac();function oc(t,e){W(e,!1),ce(()=>{gn(),document.addEventListener("focusin",gn),document.addEventListener("focusout",gn),document.addEventListener("touchmove",function(n){Vn()&&sc&&n.preventDefault()},{passive:!1})}),Wt(),Y()}function ic(t,e){W(e,!1);let n=0;ce(()=>{document.querySelector("div"),document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-n;(n<50&&s>0||n>window.innerWidth-50&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Wt(),Y()}var lc=x('<!> <!> <!> <main><!> <div class="container svelte-ngsolt"><!></div></main>',1);function cc(t,e){W(e,!0),ce(async()=>{await new Promise(h=>setTimeout(h,100)),await Ps(),ge.working=!0});let n=G(()=>Ye().length>0),r=G(kt);var a=lc(),s=z(a);ic(s,{});var i=D(s,2);oc(i,{});var l=D(i,2);io(l,{});var u=D(l,2),d=b(u);{var c=h=>{ko(h,{})};M(d,h=>{o(r)&&h(c)})}var f=D(d,2),v=b(f);rc(v,{}),ye(u,h=>Pt.ref=h,()=>Pt==null?void 0:Pt.ref),ie(()=>{Kt(u,`--swiping-ratio: ${ge.swipingRatio}; --transition-timing-default: ${ge.duration}s;`),Z(u,1,ee(["main",{isAnimationOn:ge.working&&!ge.isSwiping,open:o(n)}]),"svelte-ngsolt")}),E(t,a),Y()}Hs(cc,{target:document.getElementById("app")});
