import{p as X,u as Y,s as O,g as o,a as P,o as Z,f as y,i as k,c as m,b as v,d as ee,e as h,h as x,j as te,B as C,t as S,k as E,l,m as ae,n as se,q as re,r as $,v as oe,w as J,x as le,y as ne}from"./index-F4UA7Zx-.js";import{L as ie}from"./Loader-D1ujCXmg.js";const M=async(F,j)=>{const a=F.target;!a.files||a.files.length===0||await j(a.files[0])};var ve=y('<div class="mobileContainer svelte-1n1lt8i"><!></div> <input type="file" accept=".json, .html" style="display: none;"/>',1),ce=y('<div class="desktopContainer svelte-1n1lt8i"><div class="desktopButtonContainer svelte-1n1lt8i"><!></div> <div role="button" tabindex="-1"><div tabindex="-1" class="dropzone-content svelte-1n1lt8i"><p class="svelte-1n1lt8i">Drag and drop your file here</p> <p class="svelte-1n1lt8i">or</p></div> <input type="file" accept=".json, .html" style="display: none;"/></div></div>'),de=y('<p class="message svelte-1n1lt8i">Select a file to import your notes</p> <!>',1),pe=y('<p class="message svelte-1n1lt8i">Importing data...</p> <!>',1),fe=y('<p class="message success svelte-1n1lt8i">Data imported successfully!</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),ue=y('<p class="message error svelte-1n1lt8i">Something went wrong</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),ge=y('<div class="content svelte-1n1lt8i"><!></div>');function ye(F,j){X(j,!0);let a=P("idle"),u=P(null),w=P(!1),L=P(null);const N=()=>{ne()};Y(()=>{O(o(a)==="loading")}),Z(()=>(o(u)&&o(u).addEventListener("cancel",e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}),()=>{O(!1)}));const H=async e=>{const s=await e.text(),p=JSON.parse(s),D=[];if(!p.notes)throw new Error("Invalid import file format");for(const n of Object.values(p.notes))n&&D.push(n);await J(D)},I=async e=>{l(a,"loading");try{if(e.name.endsWith(".json"))await H(e);else if(e.name.endsWith(".html"))await J(await le(e));else throw new Error("Unsupported file format. Please upload a JSON or HTML file.");l(a,"success")}catch(s){console.error("Error processing file:",s),l(a,"error")}},z=()=>{var e;(e=o(u))==null||e.click()},W=e=>{e.preventDefault(),e.stopPropagation(),l(w,!0)},q=e=>{e.preventDefault(),e.stopPropagation(),l(w,!1)},A=e=>{e.preventDefault(),e.stopPropagation(),l(w,!0)},U=async e=>{var p;if(e.preventDefault(),e.stopPropagation(),l(w,!1),!((p=e.dataTransfer)!=null&&p.files)||e.dataTransfer.files.length===0)return;const s=e.dataTransfer.files[0];if(s.type!=="application/json"&&s.type!=="text/html"){l(a,"error");return}await I(s)};var B=ge(),G=m(B);{var K=e=>{var s=de(),p=h(x(s),2);{var D=i=>{var f=ve(),g=x(f),c=m(g);C(c,{onClick:z,children:(d,r)=>{var _=S("Select File");v(d,_)},$$slots:{default:!0}});var t=h(g,2);t.__change=[M,I],E(t,d=>l(u,d),()=>o(u)),v(i,f)},n=i=>{var f=ce(),g=m(f),c=m(g);C(c,{onClick:z,children:(r,_)=>{var b=S("Select File");v(r,b)},$$slots:{default:!0}});var t=h(g,2),d=h(m(t),2);d.__change=[M,I],E(d,r=>l(u,r),()=>o(u)),E(t,r=>l(L,r),()=>o(L)),ae(()=>se(t,1,re(["dropzone",{active:o(w)}]),"svelte-1n1lt8i")),$("dragenter",t,W),$("dragover",t,A),$("dragleave",t,q),$("drop",t,U),v(i,f)};k(p,i=>{te()?i(D):i(n,!1)})}v(e,s)},Q=(e,s)=>{{var p=n=>{var i=pe(),f=h(x(i),2);ie(f),v(n,i)},D=(n,i)=>{{var f=c=>{var t=fe(),d=h(x(t),2),r=m(d);C(r,{onClick:N,children:(_,b)=>{var T=S("close");v(_,T)},$$slots:{default:!0}}),v(c,t)},g=(c,t)=>{{var d=r=>{var _=ue(),b=h(x(_),2),T=m(b);C(T,{onClick:()=>{l(a,"idle")},children:(R,_e)=>{var V=S("Try Again");v(R,V)},$$slots:{default:!0}}),v(r,_)};k(c,r=>{o(a)==="error"&&r(d)},t)}};k(n,c=>{o(a)==="success"?c(f):c(g,!1)},i)}};k(e,n=>{o(a)==="loading"?n(p):n(D,!1)},s)}};k(G,e=>{o(a)==="idle"?e(K):e(Q,!1)})}v(F,B),ee()}oe(["change"]);export{ye as default};
