import{p as te,u as ae,s as N,g as i,a as C,o as se,f as _,i as P,c as u,b as a,d as re,e as g,h as p,j as oe,k as L,B as S,t as $,l as B,m as v,n as le,q as ne,r as ie,v as F,L as ve,w as ce,x as H,y as de,z as pe}from"./index-C1vnfXtA.js";const W=async(j,I)=>{const t=j.target;!t.files||t.files.length===0||await I(t.files[0])};var fe=_('<div class="mobileContainer svelte-1n1lt8i"><!></div> <input type="file" accept=".json, .html" style="display: none;"/>',1),ue=_('<div class="desktopContainer svelte-1n1lt8i"><div class="desktopButtonContainer svelte-1n1lt8i"><!></div> <div role="button" tabindex="-1"><div tabindex="-1" class="dropzone-content svelte-1n1lt8i"><p class="svelte-1n1lt8i">Drag and drop your file here</p> <p class="svelte-1n1lt8i">or</p></div> <input type="file" accept=".json, .html" style="display: none;"/></div></div>'),ge=_('<p class="message svelte-1n1lt8i">Select a file to import your notes</p> <!>',1),_e=_('<p class="message svelte-1n1lt8i">Importing data...</p> <!>',1),me=_('<p class="message success svelte-1n1lt8i">Data imported successfully!</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),he=_('<p class="message error svelte-1n1lt8i">Something went wrong</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),ye=_('<div class="content svelte-1n1lt8i"><!></div>');function ke(j,I){te(I,!0);let t=C("idle"),f=C(null),w=C(!1),O=C(null);const q=()=>{pe()};ae(()=>{N(i(t)==="loading")}),se(()=>(i(f)&&i(f).addEventListener("cancel",e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}),()=>{N(!1)}));const A=async e=>{const s=await e.text(),m=JSON.parse(s),h=[];if(!m.notes)throw new Error("Invalid import file format");for(const y of Object.values(m.notes))y&&h.push(y);await H(h)},T=async e=>{v(t,"loading");try{if(e.name.endsWith(".json"))await A(e);else if(e.name.endsWith(".html"))await H(await de(e));else throw new Error("Unsupported file format. Please upload a JSON or HTML file.");v(t,"success")}catch(s){console.error("Error processing file:",s),v(t,"error")}},J=()=>{i(f)?.click()},U=e=>{e.preventDefault(),e.stopPropagation(),v(w,!0)},G=e=>{e.preventDefault(),e.stopPropagation(),v(w,!1)},K=e=>{e.preventDefault(),e.stopPropagation(),v(w,!0)},Q=async e=>{if(e.preventDefault(),e.stopPropagation(),v(w,!1),!e.dataTransfer?.files||e.dataTransfer.files.length===0)return;const s=e.dataTransfer.files[0];if(s.type!=="application/json"&&s.type!=="text/html"){v(t,"error");return}await T(s)};var M=ye(),R=u(M);{var V=e=>{var s=ge(),m=g(p(s),2);{var h=r=>{var c=fe(),d=p(c),k=u(d);S(k,{onClick:J,children:(o,n)=>{var D=$("Select File");a(o,D)},$$slots:{default:!0}});var l=g(d,2);l.__change=[W,T],B(l,o=>v(f,o),()=>i(f)),a(r,c)},y=r=>{var c=ue(),d=u(c),k=u(d);S(k,{onClick:J,children:(n,D)=>{var x=$("Select File");a(n,x)},$$slots:{default:!0}});var l=g(d,2),o=g(u(l),2);o.__change=[W,T],B(o,n=>v(f,n),()=>i(f)),B(l,n=>v(O,n),()=>i(O)),le(()=>ne(l,1,ie(["dropzone",{active:i(w)}]),"svelte-1n1lt8i")),F("dragenter",l,U),F("dragover",l,K),F("dragleave",l,G),F("drop",l,Q),a(r,c)};P(m,r=>{oe()?r(h):r(y,!1)})}a(e,s)},X=e=>{var s=L(),m=p(s);{var h=r=>{var c=_e(),d=g(p(c),2);ve(d),a(r,c)},y=r=>{var c=L(),d=p(c);{var k=o=>{var n=me(),D=g(p(n),2),x=u(D);S(x,{onClick:q,children:(b,z)=>{var E=$("close");a(b,E)},$$slots:{default:!0}}),a(o,n)},l=o=>{var n=L(),D=p(n);{var x=b=>{var z=he(),E=g(p(z),2),Y=u(E);S(Y,{onClick:()=>{v(t,"idle")},children:(Z,De)=>{var ee=$("Try Again");a(Z,ee)},$$slots:{default:!0}}),a(b,z)};P(D,b=>{i(t)==="error"&&b(x)},!0)}a(o,n)};P(d,o=>{i(t)==="success"?o(k):o(l,!1)},!0)}a(r,c)};P(m,r=>{i(t)==="loading"?r(h):r(y,!1)},!0)}a(e,s)};P(R,e=>{i(t)==="idle"?e(V):e(X,!1)})}a(j,M),re()}ce(["change"]);export{ke as default};
