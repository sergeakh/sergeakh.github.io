import{p as X,u as Y,s as O,g as o,a as P,o as Z,f as h,i as k,c as _,b as v,d as ee,e as m,h as x,j as te,B as C,t as S,k as E,l,m as ae,n as se,q as re,r as $,L as oe,v as le,w as J,x as ne,y as ie}from"./index-BMmQJNiY.js";const M=async(F,j)=>{const a=F.target;!a.files||a.files.length===0||await j(a.files[0])};var ve=h('<div class="mobileContainer svelte-1n1lt8i"><!></div> <input type="file" accept=".json, .html" style="display: none;"/>',1),ce=h('<div class="desktopContainer svelte-1n1lt8i"><div class="desktopButtonContainer svelte-1n1lt8i"><!></div> <div role="button" tabindex="-1"><div tabindex="-1" class="dropzone-content svelte-1n1lt8i"><p class="svelte-1n1lt8i">Drag and drop your file here</p> <p class="svelte-1n1lt8i">or</p></div> <input type="file" accept=".json, .html" style="display: none;"/></div></div>'),de=h('<p class="message svelte-1n1lt8i">Select a file to import your notes</p> <!>',1),pe=h('<p class="message svelte-1n1lt8i">Importing data...</p> <!>',1),fe=h('<p class="message success svelte-1n1lt8i">Data imported successfully!</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),ue=h('<p class="message error svelte-1n1lt8i">Something went wrong</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),ge=h('<div class="content svelte-1n1lt8i"><!></div>');function he(F,j){X(j,!0);let a=P("idle"),f=P(null),w=P(!1),L=P(null);const N=()=>{ie()};Y(()=>{O(o(a)==="loading")}),Z(()=>(o(f)&&o(f).addEventListener("cancel",e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()}),()=>{O(!1)}));const H=async e=>{const s=await e.text(),y=JSON.parse(s),D=[];if(!y.notes)throw new Error("Invalid import file format");for(const n of Object.values(y.notes))n&&D.push(n);await J(D)},I=async e=>{l(a,"loading");try{if(e.name.endsWith(".json"))await H(e);else if(e.name.endsWith(".html"))await J(await ne(e));else throw new Error("Unsupported file format. Please upload a JSON or HTML file.");l(a,"success")}catch(s){console.error("Error processing file:",s),l(a,"error")}},z=()=>{o(f)?.click()},W=e=>{e.preventDefault(),e.stopPropagation(),l(w,!0)},q=e=>{e.preventDefault(),e.stopPropagation(),l(w,!1)},A=e=>{e.preventDefault(),e.stopPropagation(),l(w,!0)},U=async e=>{if(e.preventDefault(),e.stopPropagation(),l(w,!1),!e.dataTransfer?.files||e.dataTransfer.files.length===0)return;const s=e.dataTransfer.files[0];if(s.type!=="application/json"&&s.type!=="text/html"){l(a,"error");return}await I(s)};var B=ge(),G=_(B);{var K=e=>{var s=de(),y=m(x(s),2);{var D=i=>{var p=ve(),u=x(p),c=_(u);C(c,{onClick:z,children:(d,r)=>{var g=S("Select File");v(d,g)},$$slots:{default:!0}});var t=m(u,2);t.__change=[M,I],E(t,d=>l(f,d),()=>o(f)),v(i,p)},n=i=>{var p=ce(),u=_(p),c=_(u);C(c,{onClick:z,children:(r,g)=>{var b=S("Select File");v(r,b)},$$slots:{default:!0}});var t=m(u,2),d=m(_(t),2);d.__change=[M,I],E(d,r=>l(f,r),()=>o(f)),E(t,r=>l(L,r),()=>o(L)),ae(()=>se(t,1,re(["dropzone",{active:o(w)}]),"svelte-1n1lt8i")),$("dragenter",t,W),$("dragover",t,A),$("dragleave",t,q),$("drop",t,U),v(i,p)};k(y,i=>{te()?i(D):i(n,!1)})}v(e,s)},Q=(e,s)=>{{var y=n=>{var i=pe(),p=m(x(i),2);oe(p),v(n,i)},D=(n,i)=>{{var p=c=>{var t=fe(),d=m(x(t),2),r=_(d);C(r,{onClick:N,children:(g,b)=>{var T=S("close");v(g,T)},$$slots:{default:!0}}),v(c,t)},u=(c,t)=>{{var d=r=>{var g=ue(),b=m(x(g),2),T=_(b);C(T,{onClick:()=>{l(a,"idle")},children:(R,_e)=>{var V=S("Try Again");v(R,V)},$$slots:{default:!0}}),v(r,g)};k(c,r=>{o(a)==="error"&&r(d)},t)}};k(n,c=>{o(a)==="success"?c(p):c(u,!1)},i)}};k(e,n=>{o(a)==="loading"?n(y):n(D,!1)},s)}};k(G,e=>{o(a)==="idle"?e(K):e(Q,!1)})}v(F,B),ee()}le(["change"]);export{he as default};
