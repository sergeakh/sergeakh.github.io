import{K as J,p as q,M as K,f as y,r as V,n as O,N as I,O as B,s as E,t as U,Q as w,i as n,R as X,S as Y,v as W,c as p,b as i,T as Z,l as G,q as ee,C as te,z as ae,d as se,u as oe,e as F,o as re,k as R,j as k,B as P,w as $,m as N,L as le}from"./index-D3sDlWLV.js";const ne=m=>{const s=Math.floor(Date.now()/1e3),t={};m.forEach(e=>{const a=e.tags||["Imported"];if(a.length===0){t.ROOT||(t.ROOT=[]),t.ROOT.push(e);return}a.forEach(l=>{t[l]||(t[l]=[]),t[l].push(e)})});let r=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(t).forEach(e=>{e!=="ROOT"&&e!=="other"&&(r+=`
    <DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}">${e}</H3>
    <DL><p>`,t[e].forEach(a=>{const l=a.name.replace(/"/g,"&quot;");r+=`
        <DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||s}">${l}</A>`}),r+=`
    </DL><p>`)}),t.ROOT&&t.ROOT.forEach(e=>{const a=e.name.replace(/"/g,"&quot;");r+=`
    <DT><A HREF="${e.url}" ADD_DATE="${Math.floor(e.createdAt/1e3)||s}">${a}</A>`}),r+=`
</DL><p>`,t.other&&t.other.forEach(e=>{const a=e.name.replace(/"/g,"&quot;");r+=`
    <DT><A HREF="${e.url}" ADD_DATE="${Math.floor(e.createdAt/1e3)||s}">${a}</A>`}),r+="</DL><p>",r},ce=async m=>{const s="notes-export.json",t=JSON.stringify({notes:m}),r=new Blob([t],{type:"application/json"}),e=URL.createObjectURL(r),a=document.createElement("a");a.href=e,a.download=s,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(e)},0)},ie=(m,s,t)=>{s(m.target.value),t.onChange(s())};var ve=y('<input type="radio"/> <label> </label>',1),de=y('<div class="wrapper svelte-egvjdf"><fieldset class="switcher svelte-egvjdf"><!> <div class="wrapSwitcherStatus svelte-egvjdf"><div class="switcherStatus svelte-egvjdf"></div></div></fieldset></div>');function fe(m,s){const t=J();q(s,!0);let r=K(s,"value",7);const e=`switcher-${t}`;var a=de(),l=p(a),g=p(l);V(g,17,()=>s.items,v=>v.title,(v,d)=>{var C=ve(),f=O(C);I(f,1,B(["vh","input"]),"svelte-egvjdf"),f.__change=[ie,r,s];var o=E(f,2);I(o,1,B(["switcherButton"]),"svelte-egvjdf");var h=p(o);U(()=>{w(f,"id",`${n(d).title}-${t}`),w(f,"name",e),X(f,n(d).value),Y(f,n(d).value===r()),w(f,"aria-label",n(d).title),w(o,"for",`${n(d).title}-${t}`),w(o,"title",n(d).title),w(o,"aria-label",n(d).title),W(h,n(d).title)}),i(v,C)});var S=E(g,2),j=p(S);U(v=>Z(j,v),[()=>`transform: translateX(${s.items.findIndex(v=>v.value===r())*100}%)`]),i(m,a),G()}ee(["change"]);var ue=y('<p class="message svelte-owa53m">Export data</p> <div class="format-switcher svelte-owa53m"><!> <p class="format-description svelte-owa53m"><!></p></div> <div class="buttonContainer svelte-owa53m"><!></div>',1),pe=y('<p class="message svelte-owa53m">Exporting data...</p> <div class="buttonContainer svelte-owa53m"><!></div>',1),me=y('<p class="message svelte-owa53m">Data exported successfully!</p> <div class="buttonContainer svelte-owa53m"><!></div>',1),he=y('<div class="content svelte-owa53m"><!></div>');function Te(m,s){q(s,!0);const{getGetNotes:t,getGetMapNotes:r}=te(),{closeDialogStack:e}=ae(),{blockDialog:a}=se();let l=F("idle"),g=F("sync");const S=()=>{e()};oe(()=>{a(n(l)==="loading")}),re(()=>()=>{a(!1)});const j=async()=>{k(l,"loading"),setTimeout(async()=>{if(n(g)==="sync")await ce(t()()||[]).finally(async()=>{await new Promise(o=>setTimeout(o,500)),k(l,"success")});else try{const o=ne(r()()||new Map),h=new Blob([o],{type:"text/html"}),T=URL.createObjectURL(h),u=document.createElement("a");u.href=T,u.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(T),k(l,"success")}catch{k(l,"success")}},0)};var v=he(),d=p(v);{var C=o=>{var h=ue(),T=E(O(h),2),u=p(T);fe(u,{items:[{title:"Sync",value:"sync"},{title:"Bookmarks",value:"bookmarks"}],get value(){return n(g)},onChange:c=>{k(g,c,!0)}});var H=E(u,2),_=p(H);{var D=c=>{var b=$("App format for sync or backup");i(c,b)},A=c=>{var b=$("Browser bookmarks format (exports only bookmarks, not notes)");i(c,b)};R(_,c=>{n(g)==="sync"?c(D):c(A,!1)})}var x=E(T,2),L=p(x);P(L,{onClick:j,children:(c,b)=>{var M=$("Export");i(c,M)},$$slots:{default:!0}}),i(o,h)},f=o=>{var h=N(),T=O(h);{var u=_=>{var D=pe(),A=E(O(D),2),x=p(A);le(x,{}),i(_,D)},H=_=>{var D=N(),A=O(D);{var x=L=>{var c=me(),b=E(O(c),2),M=p(b);P(M,{onClick:S,children:(Q,_e)=>{var z=$("Close");i(Q,z)},$$slots:{default:!0}}),i(L,c)};R(A,L=>{n(l)==="success"&&L(x)},!0)}i(_,D)};R(T,_=>{n(l)==="loading"?_(u):_(H,!1)},!0)}i(o,h)};R(d,o=>{n(l)==="idle"?o(C):o(f,!1)})}i(m,v),G()}export{Te as default};
