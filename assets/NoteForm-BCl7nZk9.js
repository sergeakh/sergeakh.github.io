import{p as ve,W as c,d,e as b,u as ue,h as t,f as ce,c as n,s as v,a4 as fe,i,q as z,a7 as U,j as A,x as h,t as me,r as be,H as B,a8 as J,b as K,k as he,l as pe,m as ge,a9 as M,a1 as _e,n as we}from"./index-C_5cVQiq.js";import{I as P}from"./Input-DhZWJeXT.js";const xe=(p,s,g,_,w,f)=>{p.preventDefault(),s.onSubmit({title:t(g).trim().slice(0,256)||"unkwown",url:t(_).trim().slice(0,2048),description:t(w).trim().slice(0,2048),tags:t(f).length>0?t(f):["inbox"]})};var Te=ce('<div class="form svelte-1ob2wlv"><div class="formFields"><!> <form><input class="inputName svelte-1ob2wlv" placeholder="Name"/></form> <textarea placeholder="Note" class="svelte-1ob2wlv"></textarea></div> <div><form class="formTags svelte-1ob2wlv"><div class="tags svelte-1ob2wlv"><!> <!> <!></div> <div class="searchWrapper svelte-1ob2wlv"><!></div></form> <div class="submitWrapper svelte-1ob2wlv"><button class="buttonSubmit svelte-1ob2wlv" type="submit"> </button></div></div></div>');function Se(p,s){ve(s,!0);let g=c(s,"initialTitle",3,""),_=c(s,"initialUrl",3,""),w=c(s,"initialDescription",3,""),f=c(s,"initialTags",19,()=>[]),Q=c(s,"mode",3,"add"),a=d(""),x=d(b(g())),m=d(b(_())),T=d(""),k=d(b(w())),r=d(b(f().filter(e=>e!=="inbox"))),o=d(null);const C=e=>{t(r).includes(e)||(i(a,""),i(r,[...t(r),e],!0))},V=e=>{const l=t(r).filter(u=>u!==e);l.length===0?i(r,[],!0):i(r,l,!0)};let X=h(()=>M()?[...(_e()()||[]).reduce((e,l)=>(l?.tags.forEach(u=>{e.has(u)||e.add(u)}),e),new Set)]:[]),E=h(()=>M()?t(X).filter(e=>!t(r).some(l=>e===l)&&e!=="inbox"):[]),S=h(()=>t(E).find(e=>e.toLowerCase()===t(a).toLowerCase())||t(r).includes(t(a))),Y=h(()=>t(E).filter(e=>t(a)===""?!0:e.toLowerCase().indexOf(t(a).toLowerCase())!==-1).slice(0,t(S)||t(a)===""?3:2));const Z=e=>{i(T,""),i(m,e.target.value||"",!0);try{new URL(t(m))}catch{i(T,"Invalid URL")}},$=e=>{e.preventDefault(),t(a)!==""&&!t(S)&&(C(t(a)),i(a,""))},I=()=>{t(o)&&(t(o).style.height=t(o).scrollHeight+"px")};ue(()=>{t(o),I()});const ee=e=>{e.preventDefault(),t(o)&&t(o).focus()};var R=Te(),W=n(R),F=n(W);P(F,{get value(){return t(m)},get error(){return t(T)},onInput:Z,placeholder:"url"});var N=v(F,2),te=n(N),y=v(N,2);y.__input=I,fe(y,e=>i(o,e),()=>t(o));var ae=v(W,2),L=n(ae),H=n(L),j=n(H);z(j,16,()=>t(r),e=>e,(e,l)=>{U(e,{get title(){return l},onClick:()=>V(l),type:"button",style:"selected"})});var q=v(j,2);{var ie=e=>{var l=pe(),u=ge(l);z(u,16,()=>t(Y),D=>D,(D,O)=>{U(D,{get title(){return O},onClick:()=>C(O)})}),K(e,l)};A(q,e=>{t(a)!==""&&e(ie)})}var le=v(q,2);{var re=e=>{U(e,{get title(){return t(a)},onClick:()=>{C(t(a)),i(a,"")}})};A(le,e=>{!t(S)&&t(a)!==""&&e(re)})}var se=v(H,2),ne=n(se);P(ne,{placeholder:"tag",get value(){return t(a)},set value(e){i(a,e,!0)}});var oe=v(L,2),G=n(oe);G.__click=[xe,s,x,m,k,r];var de=n(G);me(()=>be(de,Q()==="add"?"add":"edit")),B("submit",N,ee),J(te,()=>t(x),e=>i(x,e)),J(y,()=>t(k),e=>i(k,e)),B("submit",L,$),K(p,R),he()}we(["input","click"]);export{Se as N};
