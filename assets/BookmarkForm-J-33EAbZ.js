import{p as te,W as c,d,e as g,f as ae,h as t,c as u,s as n,i,q as H,a7 as y,j as N,x as m,t as re,r as ie,a8 as le,H as se,b as O,k as ne,l as oe,m as de,a9 as z,a1 as ce,n as ue}from"./index-BD4lsSGV.js";import{I as L}from"./Input-_VC7eulN.js";const ve=(h,s,p,b,_,v)=>{h.preventDefault(),s.onSubmit({title:t(p).trim().slice(0,256)||"unkwown",url:t(b).trim().slice(0,2048),description:t(_).trim().slice(0,2048),tags:t(v).length>0?t(v):["inbox"]})};var fe=ae('<div class="form svelte-psdqgd"><!> <!> <textarea placeholder="notes" class="svelte-psdqgd"></textarea> <form class="formTags svelte-psdqgd"><div class="tags svelte-psdqgd"><!> <!> <!></div> <div class="searchWrapper svelte-psdqgd"><!></div></form> <button class="buttonSubmit svelte-psdqgd" type="submit"> </button></div>');function he(h,s){te(s,!0);let p=c(s,"initialTitle",3,""),b=c(s,"initialUrl",3,""),_=c(s,"initialDescription",3,""),v=c(s,"initialTags",19,()=>[]),A=c(s,"mode",3,"add"),a=d(""),x=d(g(p())),f=d(g(b())),k=d(""),T=d(g(_())),l=d(g(v().filter(e=>e!=="inbox")));const w=e=>{t(l).includes(e)||(i(a,""),i(l,[...t(l),e],!0))},J=e=>{const r=t(l).filter(o=>o!==e);r.length===0?i(l,[],!0):i(l,r,!0)};let K=m(()=>z()?[...(ce()()||[]).reduce((e,r)=>(r?.tags.forEach(o=>{e.has(o)||e.add(o)}),e),new Set)]:[]),U=m(()=>z()?t(K).filter(e=>!t(l).some(r=>e===r)&&e!=="inbox"):[]),C=m(()=>t(U).find(e=>e.toLowerCase()===t(a).toLowerCase())||t(l).includes(t(a))),M=m(()=>t(U).filter(e=>t(a)===""?!0:e.toLowerCase().indexOf(t(a).toLowerCase())!==-1).slice(0,t(C)||t(a)===""?3:2));const P=e=>{i(k,""),i(f,e.target.value||"",!0);try{new URL(t(f))}catch{i(k,"Invalid URL")}},Q=e=>{e.preventDefault(),t(a)!==""&&!t(C)&&(w(t(a)),i(a,""))};var D=fe(),I=u(D);L(I,{get value(){return t(f)},get error(){return t(k)},onInput:P,placeholder:"url"});var E=n(I,2);L(E,{placeholder:"title",get value(){return t(x)},set value(e){i(x,e,!0)}});var R=n(E,2),S=n(R,2),B=u(S),W=u(B);H(W,16,()=>t(l),e=>e,(e,r)=>{y(e,{get title(){return r},onClick:()=>J(r),type:"button",style:"selected"})});var j=n(W,2);{var V=e=>{var r=oe(),o=de(r);H(o,16,()=>t(M),q=>q,(q,G)=>{y(q,{get title(){return G},onClick:()=>w(G)})}),O(e,r)};N(j,e=>{t(a)!==""&&e(V)})}var X=n(j,2);{var Y=e=>{y(e,{get title(){return t(a)},onClick:()=>{w(t(a)),i(a,"")}})};N(X,e=>{!t(C)&&t(a)!==""&&e(Y)})}var Z=n(B,2),$=u(Z);L($,{placeholder:"search tag",get value(){return t(a)},set value(e){i(a,e,!0)}});var F=n(S,2);F.__click=[ve,s,x,f,T,l];var ee=u(F);re(()=>ie(ee,A()==="add"?"add":"edit")),le(R,()=>t(T),e=>i(T,e)),se("submit",S,Q),O(h,D),ne()}ue(["click"]);export{he as B};
