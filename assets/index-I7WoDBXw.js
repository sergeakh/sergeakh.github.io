var Oa=Object.defineProperty;var Na=(t,e,n)=>e in t?Oa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var at=(t,e,n)=>Na(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const nr=!1;var Nn=Array.isArray,Ma=Array.prototype.indexOf,Mn=Array.from,Ia=Object.defineProperty,St=Object.getOwnPropertyDescriptor,yr=Object.getOwnPropertyDescriptors,Ba=Object.prototype,Ra=Array.prototype,In=Object.getPrototypeOf,rr=Object.isExtensible;const Bn=()=>{};function ja(t){return typeof(t==null?void 0:t.then)=="function"}function Fa(t){return t()}function tn(t){for(var e=0;e<t.length;e++)t[e]()}const Ae=2,wr=4,on=8,Rn=16,Ye=32,Lt=64,jn=128,Le=256,nn=512,xe=1024,Ve=2048,gt=4096,ze=8192,Fn=16384,Sr=32768,ln=65536,ar=1<<17,Ua=1<<18,br=1<<19,En=1<<20,lt=Symbol("$state"),Ha=Symbol("legacy props"),Ka=Symbol(""),Er=new class extends Error{constructor(){super(...arguments);at(this,"name","StaleReactionError");at(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function kr(t){return t===this.v}function za(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Cr(t){return!za(t,this.v)}function Va(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Wa(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function qa(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Ya(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ja(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Xa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ga(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Za(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Pt=!1,Qa=!1;function $a(){Pt=!0}const Un=1,Hn=2,Tr=4,es=8,ts=16,ns=1,rs=2,as=4,ss=8,os=16,is=1,ls=2,we=Symbol(),cs="http://www.w3.org/1999/xhtml";function us(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ue=null;function rn(t){ue=t}function J(t,e=!1,n){var r=ue={p:ue,c:null,d:!1,e:null,m:!1,s:t,x:null,l:null};Pt&&!e&&(ue.l={s:null,u:null,r1:[],r2:ft(!1)}),Br(()=>{r.d=!0})}function X(t){const e=ue;if(e!==null){t!==void 0&&(e.x=t);const i=e.e;if(i!==null){var n=ae,r=ee;e.e=null;try{for(var a=0;a<i.length;a++){var s=i[a];Be(s.effect),Oe(s.reaction),Kn(s.fn)}}finally{Be(n),Oe(r)}}ue=e.p,e.m=!0}return t||{}}function At(){return!Pt||ue!==null&&ue.l===null}function ce(t){if(typeof t!="object"||t===null||lt in t)return t;const e=In(t);if(e!==Ba&&e!==Ra)return t;var n=new Map,r=Nn(t),a=x(0),s=ee,i=l=>{var c=ee;Oe(s);var f=l();return Oe(c),f};return r&&n.set("length",x(t.length)),new Proxy(t,{defineProperty(l,c,f){(!("value"in f)||f.configurable===!1||f.enumerable===!1||f.writable===!1)&&Xa();var u=n.get(c);return u===void 0?u=i(()=>{var d=x(f.value);return n.set(c,d),d}):S(u,f.value,!0),!0},deleteProperty(l,c){var f=n.get(c);if(f===void 0){if(c in l){const v=i(()=>x(we));n.set(c,v),gn(a)}}else{if(r&&typeof c=="string"){var u=n.get("length"),d=Number(c);Number.isInteger(d)&&d<u.v&&S(u,d)}S(f,we),gn(a)}return!0},get(l,c,f){var h;if(c===lt)return t;var u=n.get(c),d=c in l;if(u===void 0&&(!d||(h=St(l,c))!=null&&h.writable)&&(u=i(()=>{var g=ce(d?l[c]:we),m=x(g);return m}),n.set(c,u)),u!==void 0){var v=o(u);return v===we?void 0:v}return Reflect.get(l,c,f)},getOwnPropertyDescriptor(l,c){var f=Reflect.getOwnPropertyDescriptor(l,c);if(f&&"value"in f){var u=n.get(c);u&&(f.value=o(u))}else if(f===void 0){var d=n.get(c),v=d==null?void 0:d.v;if(d!==void 0&&v!==we)return{enumerable:!0,configurable:!0,value:v,writable:!0}}return f},has(l,c){var v;if(c===lt)return!0;var f=n.get(c),u=f!==void 0&&f.v!==we||Reflect.has(l,c);if(f!==void 0||ae!==null&&(!u||(v=St(l,c))!=null&&v.writable)){f===void 0&&(f=i(()=>{var h=u?ce(l[c]):we,g=x(h);return g}),n.set(c,f));var d=o(f);if(d===we)return!1}return u},set(l,c,f,u){var y;var d=n.get(c),v=c in l;if(r&&c==="length")for(var h=f;h<d.v;h+=1){var g=n.get(h+"");g!==void 0?S(g,we):h in l&&(g=i(()=>x(we)),n.set(h+"",g))}if(d===void 0)(!v||(y=St(l,c))!=null&&y.writable)&&(d=i(()=>x(void 0)),S(d,ce(f)),n.set(c,d));else{v=d.v!==we;var m=i(()=>ce(f));S(d,m)}var w=Reflect.getOwnPropertyDescriptor(l,c);if(w!=null&&w.set&&w.set.call(u,f),!v){if(r&&typeof c=="string"){var b=n.get("length"),_=Number(c);Number.isInteger(_)&&_>=b.v&&S(b,_+1)}gn(a)}return!0},ownKeys(l){o(a);var c=Reflect.ownKeys(l).filter(d=>{var v=n.get(d);return v===void 0||v.v!==we});for(var[f,u]of n)u.v!==we&&!(f in l)&&c.push(f);return c},setPrototypeOf(){Ga()}})}function gn(t,e=1){S(t,t.v+e)}function Vt(t){var e=Ae|Ve,n=ee!==null&&(ee.f&Ae)!==0?ee:null;return ae===null||n!==null&&(n.f&Le)!==0?e|=Le:ae.f|=br,{ctx:ue,deps:null,effects:null,equals:kr,f:e,fn:t,reactions:null,rv:0,v:null,wv:0,parent:n??ae,ac:null}}function Z(t){const e=Vt(t);return Vr(e),e}function Dr(t){const e=Vt(t);return e.equals=Cr,e}function Lr(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)We(e[n])}}function ds(t){for(var e=t.parent;e!==null;){if((e.f&Ae)===0)return e;e=e.parent}return null}function Pr(t){var e,n=ae;Be(ds(t));try{Lr(t),e=Jr(t)}finally{Be(n)}return e}function Ar(t){var e=Pr(t);if(t.equals(e)||(t.v=e,t.wv=qr()),!Ot){var n=(Qe||(t.f&Le)!==0)&&t.deps!==null?gt:xe;Re(t,n)}}const jt=new Map;function ft(t,e){var n={f:0,v:t,reactions:null,equals:kr,rv:0,wv:0};return n}function x(t,e){const n=ft(t);return Vr(n),n}function kn(t,e=!1,n=!0){var a;const r=ft(t);return e||(r.equals=Cr),Pt&&n&&ue!==null&&ue.l!==null&&((a=ue.l).s??(a.s=[])).push(r),r}function S(t,e,n=!1){ee!==null&&(!Ie||(ee.f&ar)!==0)&&At()&&(ee.f&(Ae|Rn|ar))!==0&&!(pe!=null&&pe[1].includes(t)&&pe[0]===ee)&&Za();let r=n?ce(e):e;return bt(t,r)}function bt(t,e){if(!t.equals(e)){var n=t.v;Ot?jt.set(t,e):jt.set(t,n),t.v=e,(t.f&Ae)!==0&&((t.f&Ve)!==0&&Pr(t),Re(t,(t.f&Le)===0?xe:gt)),t.wv=qr(),xr(t,Ve),At()&&ae!==null&&(ae.f&xe)!==0&&(ae.f&(Ye|Lt))===0&&(Pe===null?Es([t]):Pe.push(t))}return e}function xr(t,e){var n=t.reactions;if(n!==null)for(var r=At(),a=n.length,s=0;s<a;s++){var i=n[s],l=i.f;(l&Ve)===0&&(!r&&i===ae||(Re(i,e),(l&(xe|Le))!==0&&((l&Ae)!==0?xr(i,gt):Wn(i))))}}let fs=!1;var sr,Or,Nr,Mr;function vs(){if(sr===void 0){sr=window,Or=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Nr=St(e,"firstChild").get,Mr=St(e,"nextSibling").get,rr(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),rr(n)&&(n.__t=void 0)}}function cn(t=""){return document.createTextNode(t)}function Et(t){return Nr.call(t)}function un(t){return Mr.call(t)}function E(t,e){return Et(t)}function Y(t,e){{var n=Et(t);return n instanceof Comment&&n.data===""?un(n):n}}function D(t,e=1,n=!1){let r=t;for(;e--;)r=un(r);return r}function hs(t){t.textContent=""}function Ir(t){ae===null&&ee===null&&qa(),ee!==null&&(ee.f&Le)!==0&&ae===null&&Wa(),Ot&&Va()}function gs(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function xt(t,e,n,r=!0){var a=ae,s={ctx:ue,deps:null,nodes_start:null,nodes_end:null,f:t|Ve,first:null,fn:e,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Vn(s),s.f|=Sr}catch(c){throw We(s),c}else e!==null&&Wn(s);var i=n&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(br|jn))===0;if(!i&&r&&(a!==null&&gs(s,a),ee!==null&&(ee.f&Ae)!==0)){var l=ee;(l.effects??(l.effects=[])).push(s)}return s}function Br(t){const e=xt(on,null,!1);return Re(e,xe),e.teardown=t,e}function ve(t){Ir();var e=ae!==null&&(ae.f&Ye)!==0&&ue!==null&&!ue.m;if(e){var n=ue;(n.e??(n.e=[])).push({fn:t,effect:ae,reaction:ee})}else{var r=Kn(t);return r}}function ps(t){return Ir(),dn(t)}function _s(t){const e=xt(Lt,t,!0);return(n={})=>new Promise(r=>{n.outro?ct(e,()=>{We(e),r(void 0)}):(We(e),r(void 0))})}function Kn(t){return xt(wr,t,!1)}function dn(t){return xt(on,t,!0)}function de(t,e=[],n=Vt){const r=e.map(n);return Wt(()=>t(...r.map(o)))}function Wt(t,e=0){var n=xt(on|Rn|e,t,!0);return n}function tt(t,e=!0){return xt(on|Ye,t,!0,e)}function Rr(t){var e=t.teardown;if(e!==null){const n=Ot,r=ee;or(!0),Oe(null);try{e.call(null)}finally{or(n),Oe(r)}}}function jr(t,e=!1){var a;var n=t.first;for(t.first=t.last=null;n!==null;){(a=n.ac)==null||a.abort(Er);var r=n.next;(n.f&Lt)!==0?n.parent=null:We(n,e),n=r}}function ms(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Ye)===0&&We(e),e=n}}function We(t,e=!0){var n=!1;(e||(t.f&Ua)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(ys(t.nodes_start,t.nodes_end),n=!0),jr(t,e&&!n),sn(t,0),Re(t,Fn);var r=t.transitions;if(r!==null)for(const s of r)s.stop();Rr(t);var a=t.parent;a!==null&&a.first!==null&&Fr(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function ys(t,e){for(;t!==null;){var n=t===e?null:un(t);t.remove(),t=n}}function Fr(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function ct(t,e){var n=[];zn(t,n,!0),Ur(n,()=>{We(t),e&&e()})}function Ur(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var a of t)a.out(r)}else e()}function zn(t,e,n){if((t.f&ze)===0){if(t.f^=ze,t.transitions!==null)for(const i of t.transitions)(i.is_global||n)&&e.push(i);for(var r=t.first;r!==null;){var a=r.next,s=(r.f&ln)!==0||(r.f&Ye)!==0;zn(r,e,s?n:!1),r=a}}}function kt(t){Hr(t,!0)}function Hr(t,e){if((t.f&ze)!==0){t.f^=ze;for(var n=t.first;n!==null;){var r=n.next,a=(n.f&ln)!==0||(n.f&Ye)!==0;Hr(n,a?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}let Ft=[],Cn=[];function Kr(){var t=Ft;Ft=[],tn(t)}function ws(){var t=Cn;Cn=[],tn(t)}function fn(t){Ft.length===0&&queueMicrotask(Kr),Ft.push(t)}function Ss(){Ft.length>0&&Kr(),Cn.length>0&&ws()}function bs(t){var e=ae;if((e.f&Sr)===0){if((e.f&jn)===0)throw t;e.fn(t)}else zr(t,e)}function zr(t,e){for(;e!==null;){if((e.f&jn)!==0)try{e.b.error(t);return}catch{}e=e.parent}throw t}let Ut=!1,Ht=null,ut=!1,Ot=!1;function or(t){Ot=t}let It=[];let ee=null,Ie=!1;function Oe(t){ee=t}let ae=null;function Be(t){ae=t}let pe=null;function Vr(t){ee!==null&&ee.f&En&&(pe===null?pe=[ee,[t]]:pe[1].push(t))}let be=null,De=0,Pe=null;function Es(t){Pe=t}let Wr=1,an=0,Qe=!1;function qr(){return++Wr}function vn(t){var d;var e=t.f;if((e&Ve)!==0)return!0;if((e&gt)!==0){var n=t.deps,r=(e&Le)!==0;if(n!==null){var a,s,i=(e&nn)!==0,l=r&&ae!==null&&!Qe,c=n.length;if(i||l){var f=t,u=f.parent;for(a=0;a<c;a++)s=n[a],(i||!((d=s==null?void 0:s.reactions)!=null&&d.includes(f)))&&(s.reactions??(s.reactions=[])).push(f);i&&(f.f^=nn),l&&u!==null&&(u.f&Le)===0&&(f.f^=Le)}for(a=0;a<c;a++)if(s=n[a],vn(s)&&Ar(s),s.wv>t.wv)return!0}(!r||ae!==null&&!Qe)&&Re(t,xe)}return!1}function Yr(t,e,n=!0){var r=t.reactions;if(r!==null)for(var a=0;a<r.length;a++){var s=r[a];pe!=null&&pe[1].includes(t)&&pe[0]===ee||((s.f&Ae)!==0?Yr(s,e,!1):e===s&&(n?Re(s,Ve):(s.f&xe)!==0&&Re(s,gt),Wn(s)))}}function Jr(t){var h;var e=be,n=De,r=Pe,a=ee,s=Qe,i=pe,l=ue,c=Ie,f=t.f;be=null,De=0,Pe=null,Qe=(f&Le)!==0&&(Ie||!ut||ee===null),ee=(f&(Ye|Lt))===0?t:null,pe=null,rn(t.ctx),Ie=!1,an++,t.f|=En,t.ac!==null&&(t.ac.abort(Er),t.ac=null);try{var u=(0,t.fn)(),d=t.deps;if(be!==null){var v;if(sn(t,De),d!==null&&De>0)for(d.length=De+be.length,v=0;v<be.length;v++)d[De+v]=be[v];else t.deps=d=be;if(!Qe||(f&Ae)!==0&&t.reactions!==null)for(v=De;v<d.length;v++)((h=d[v]).reactions??(h.reactions=[])).push(t)}else d!==null&&De<d.length&&(sn(t,De),d.length=De);if(At()&&Pe!==null&&!Ie&&d!==null&&(t.f&(Ae|gt|Ve))===0)for(v=0;v<Pe.length;v++)Yr(Pe[v],t);return a!==null&&a!==t&&(an++,Pe!==null&&(r===null?r=Pe:r.push(...Pe))),u}catch(g){bs(g)}finally{be=e,De=n,Pe=r,ee=a,Qe=s,pe=i,rn(l),Ie=c,t.f^=En}}function ks(t,e){let n=e.reactions;if(n!==null){var r=Ma.call(n,t);if(r!==-1){var a=n.length-1;a===0?n=e.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(e.f&Ae)!==0&&(be===null||!be.includes(e))&&(Re(e,gt),(e.f&(Le|nn))===0&&(e.f^=nn),Lr(e),sn(e,0))}function sn(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)ks(t,n[r])}function Vn(t){var e=t.f;if((e&Fn)===0){Re(t,xe);var n=ae,r=ut;ae=t,ut=!0;try{(e&Rn)!==0?ms(t):jr(t),Rr(t);var a=Jr(t);t.teardown=typeof a=="function"?a:null,t.wv=Wr;var s;nr&&Qa&&(t.f&Ve)!==0&&t.deps}finally{ut=r,ae=n}}}function Cs(){try{Ya()}catch(t){if(Ht!==null)zr(t,Ht);else throw t}}function Xr(){var t=ut;try{var e=0;for(ut=!0;It.length>0;){e++>1e3&&Cs();var n=It,r=n.length;It=[];for(var a=0;a<r;a++){var s=Ds(n[a]);Ts(s)}jt.clear()}}finally{Ut=!1,ut=t,Ht=null}}function Ts(t){var e=t.length;if(e!==0)for(var n=0;n<e;n++){var r=t[n];(r.f&(Fn|ze))===0&&vn(r)&&(Vn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Fr(r):r.fn=null))}}function Wn(t){Ut||(Ut=!0,queueMicrotask(Xr));for(var e=Ht=t;e.parent!==null;){e=e.parent;var n=e.f;if((n&(Lt|Ye))!==0){if((n&xe)===0)return;e.f^=xe}}It.push(e)}function Ds(t){for(var e=[],n=t;n!==null;){var r=n.f,a=(r&(Ye|Lt))!==0,s=a&&(r&xe)!==0;if(!s&&(r&ze)===0){(r&wr)!==0?e.push(n):a?n.f^=xe:vn(n)&&Vn(n);var i=n.first;if(i!==null){n=i;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)n=l.next,l=l.parent}return e}function Gr(t){for(var e;;){if(Ss(),It.length===0)return Ut=!1,Ht=null,e;Ut=!0,Xr()}}async function Ls(){await Promise.resolve(),Gr()}function o(t){var e=t.f,n=(e&Ae)!==0;if(ee!==null&&!Ie){if(!(pe!=null&&pe[1].includes(t))||pe[0]!==ee){var r=ee.deps;t.rv<an&&(t.rv=an,be===null&&r!==null&&r[De]===t?De++:be===null?be=[t]:(!Qe||!be.includes(t))&&be.push(t))}}else if(n&&t.deps===null&&t.effects===null){var a=t,s=a.parent;s!==null&&(s.f&Le)===0&&(a.f^=Le)}return n&&(a=t,vn(a)&&Ar(a)),Ot&&jt.has(t)?jt.get(t):t.v}function qt(t){var e=Ie;try{return Ie=!0,t()}finally{Ie=e}}const Ps=-7169;function Re(t,e){t.f=t.f&Ps|e}function As(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(lt in t)Tn(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&lt in n&&Tn(n)}}}function Tn(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Tn(t[r],e)}catch{}const n=In(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=yr(n);for(let a in r){const s=r[a].get;if(s)try{s.call(t)}catch{}}}}}const xs=["touchstart","touchmove"];function Os(t){return xs.includes(t)}let ir=!1;function Ns(){ir||(ir=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const n of t.target.elements)(e=n.__on_r)==null||e.call(n)})},{capture:!0}))}function Zr(t){var e=ee,n=ae;Oe(null),Be(null);try{return t()}finally{Oe(e),Be(n)}}function Ms(t,e,n,r=n){t.addEventListener(e,()=>Zr(n));const a=t.__on_r;a?t.__on_r=()=>{a(),r(!0)}:t.__on_r=()=>r(!0),Ns()}const Qr=new Set,Dn=new Set;function Is(t,e,n,r={}){function a(s){if(r.capture||Nt.call(e,s),!s.cancelBubble)return Zr(()=>n==null?void 0:n.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?fn(()=>{e.addEventListener(t,a,r)}):e.addEventListener(t,a,r),a}function He(t,e,n,r,a){var s={capture:r,passive:a},i=Is(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Br(()=>{e.removeEventListener(t,i,s)})}function Se(t){for(var e=0;e<t.length;e++)Qr.add(t[e]);for(var n of Dn)n(t)}function Nt(t){var _;var e=this,n=e.ownerDocument,r=t.type,a=((_=t.composedPath)==null?void 0:_.call(t))||[],s=a[0]||t.target,i=0,l=t.__root;if(l){var c=a.indexOf(l);if(c!==-1&&(e===document||e===window)){t.__root=e;return}var f=a.indexOf(e);if(f===-1)return;c<=f&&(i=c)}if(s=a[i]||t.target,s!==e){Ia(t,"currentTarget",{configurable:!0,get(){return s||n}});var u=ee,d=ae;Oe(null),Be(null);try{for(var v,h=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var m=s["__"+r];if(m!=null&&(!s.disabled||t.target===s))if(Nn(m)){var[w,...b]=m;w.apply(s,[t,...b])}else m.call(s,t)}catch(y){v?h.push(y):v=y}if(t.cancelBubble||g===e||g===null)break;s=g}if(v){for(let y of h)queueMicrotask(()=>{throw y});throw v}}finally{t.__root=e,delete t.currentTarget,Oe(u),Be(d)}}}function $r(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Kt(t,e){var n=ae;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function N(t,e){var n=(e&is)!==0,r=(e&ls)!==0,a,s=!t.startsWith("<!>");return()=>{a===void 0&&(a=$r(s?t:"<!>"+t),n||(a=Et(a)));var i=r||Or?document.importNode(a,!0):a.cloneNode(!0);if(n){var l=Et(i),c=i.lastChild;Kt(l,c)}else Kt(i,i);return i}}function Bs(t,e,n="svg"){var r=!t.startsWith("<!>"),a=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var i=$r(a),l=Et(i);s=Et(l)}var c=s.cloneNode(!0);return Kt(c,c),c}}function Rs(t,e){return Bs(t,e,"svg")}function ie(t=""){{var e=cn(t+"");return Kt(e,e),e}}function Ce(){var t=document.createDocumentFragment(),e=document.createComment(""),n=cn();return t.append(e,n),Kt(e,n),t}function k(t,e){t!==null&&t.before(e)}function js(){var t;return(t=window.__svelte??(window.__svelte={})).uid??(t.uid=1),`c${window.__svelte.uid++}`}function pt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??(t.__t=t.nodeValue))&&(t.__t=n,t.nodeValue=n+"")}function Fs(t,e){return Us(t,e)}const yt=new Map;function Us(t,{target:e,anchor:n,props:r={},events:a,context:s,intro:i=!0}){vs();var l=new Set,c=d=>{for(var v=0;v<d.length;v++){var h=d[v];if(!l.has(h)){l.add(h);var g=Os(h);e.addEventListener(h,Nt,{passive:g});var m=yt.get(h);m===void 0?(document.addEventListener(h,Nt,{passive:g}),yt.set(h,1)):yt.set(h,m+1)}}};c(Mn(Qr)),Dn.add(c);var f=void 0,u=_s(()=>{var d=n??e.appendChild(cn());return tt(()=>{if(s){J({});var v=ue;v.c=s}a&&(r.$$events=a),f=t(d,r)||{},s&&X()}),()=>{var g;for(var v of l){e.removeEventListener(v,Nt);var h=yt.get(v);--h===0?(document.removeEventListener(v,Nt),yt.delete(v)):yt.set(v,h)}Dn.delete(c),d!==n&&((g=d.parentNode)==null||g.removeChild(d))}});return Hs.set(f,u),f}let Hs=new WeakMap;const pn=0,Gt=1,_n=2;function Ks(t,e,n,r,a){var s=t,i=At(),l=ue,c=we,f,u,d,v=i?ft(void 0):kn(void 0,!1,!1),h=i?ft(void 0):kn(void 0,!1,!1),g=!1;function m(b,_){g=!0,_&&(Be(w),Oe(w),rn(l));try{b===pn&&n&&(f?kt(f):f=tt(()=>n(s))),b===Gt&&r&&(u?kt(u):u=tt(()=>r(s,v))),b!==pn&&f&&ct(f,()=>f=null),b!==Gt&&u&&ct(u,()=>u=null),b!==_n&&d&&ct(d,()=>d=null)}finally{_&&(rn(null),Oe(null),Be(null),Gr())}}var w=Wt(()=>{if(c!==(c=e())){if(ja(c)){var b=c;g=!1,b.then(_=>{b===c&&(bt(v,_),m(Gt,!0))},_=>{if(b===c)throw bt(h,_),m(_n,!0),h.v}),fn(()=>{g||m(pn,!0)})}else bt(v,c),m(Gt,!1);return()=>c=we}})}function R(t,e,[n,r]=[0,0]){var a=t,s=null,i=null,l=we,c=n>0?ln:0,f=!1;const u=(v,h=!0)=>{f=!0,d(h,v)},d=(v,h)=>{l!==(l=v)&&(l?(s?kt(s):h&&(s=tt(()=>h(a))),i&&ct(i,()=>{i=null})):(i?kt(i):h&&(i=tt(()=>h(a,[n+1,r]))),s&&ct(s,()=>{s=null})))};Wt(()=>{f=!1,e(u),f||d(null,null)},c)}function Te(t,e){dn(()=>{var n=e();for(var r in n){var a=n[r];a?t.style.setProperty(r,a):t.style.removeProperty(r)}})}function zs(t,e){return e}function Vs(t,e,n,r){for(var a=[],s=e.length,i=0;i<s;i++)zn(e[i].e,a,!0);var l=s>0&&a.length===0&&n!==null;if(l){var c=n.parentNode;hs(c),c.append(n),r.clear(),Ge(t,e[0].prev,e[s-1].next)}Ur(a,()=>{for(var f=0;f<s;f++){var u=e[f];l||(r.delete(u.k),Ge(t,u.prev,u.next)),We(u.e,!l)}})}function Ke(t,e,n,r,a,s=null){var i=t,l={flags:e,items:new Map,first:null},c=(e&Tr)!==0;if(c){var f=t;i=f.appendChild(cn())}var u=null,d=!1,v=Dr(()=>{var h=n();return Nn(h)?h:h==null?[]:Mn(h)});Wt(()=>{var h=o(v),g=h.length;d&&g===0||(d=g===0,Ws(h,l,i,a,e,r,n),s!==null&&(g===0?u?kt(u):u=tt(()=>s(i)):u!==null&&ct(u,()=>{u=null})),o(v))})}function Ws(t,e,n,r,a,s,i){var M,I,A,H;var l=(a&es)!==0,c=(a&(Un|Hn))!==0,f=t.length,u=e.items,d=e.first,v=d,h,g=null,m,w=[],b=[],_,y,p,C;if(l)for(C=0;C<f;C+=1)_=t[C],y=s(_,C),p=u.get(y),p!==void 0&&((M=p.a)==null||M.measure(),(m??(m=new Set)).add(p));for(C=0;C<f;C+=1){if(_=t[C],y=s(_,C),p=u.get(y),p===void 0){var L=v?v.e.nodes_start:n;g=Ys(L,e,g,g===null?e.first:g.next,_,y,C,r,a,i),u.set(y,g),w=[],b=[],v=g.next;continue}if(c&&qs(p,_,C,a),(p.e.f&ze)!==0&&(kt(p.e),l&&((I=p.a)==null||I.unfix(),(m??(m=new Set)).delete(p))),p!==v){if(h!==void 0&&h.has(p)){if(w.length<b.length){var T=b[0],O;g=T.prev;var U=w[0],F=w[w.length-1];for(O=0;O<w.length;O+=1)lr(w[O],T,n);for(O=0;O<b.length;O+=1)h.delete(b[O]);Ge(e,U.prev,F.next),Ge(e,g,U),Ge(e,F,T),v=T,g=F,C-=1,w=[],b=[]}else h.delete(p),lr(p,v,n),Ge(e,p.prev,p.next),Ge(e,p,g===null?e.first:g.next),Ge(e,g,p),g=p;continue}for(w=[],b=[];v!==null&&v.k!==y;)(v.e.f&ze)===0&&(h??(h=new Set)).add(v),b.push(v),v=v.next;if(v===null)continue;p=v}w.push(p),g=p,v=p.next}if(v!==null||h!==void 0){for(var K=h===void 0?[]:Mn(h);v!==null;)(v.e.f&ze)===0&&K.push(v),v=v.next;var z=K.length;if(z>0){var V=(a&Tr)!==0&&f===0?n:null;if(l){for(C=0;C<z;C+=1)(A=K[C].a)==null||A.measure();for(C=0;C<z;C+=1)(H=K[C].a)==null||H.fix()}Vs(e,K,V,u)}}l&&fn(()=>{var W;if(m!==void 0)for(p of m)(W=p.a)==null||W.apply()}),ae.first=e.first&&e.first.e,ae.last=g&&g.e}function qs(t,e,n,r){(r&Un)!==0&&bt(t.v,e),(r&Hn)!==0?bt(t.i,n):t.i=n}function Ys(t,e,n,r,a,s,i,l,c,f){var u=(c&Un)!==0,d=(c&ts)===0,v=u?d?kn(a,!1,!1):ft(a):a,h=(c&Hn)===0?i:ft(i),g={i:h,v,k:s,a:null,e:null,prev:n,next:r};try{return g.e=tt(()=>l(t,v,h,f),fs),g.e.prev=n&&n.e,g.e.next=r&&r.e,n===null?e.first=g:(n.next=g,n.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function lr(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,a=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==r;){var i=un(s);a.before(s),s=i}}function Ge(t,e,n){e===null?t.first=n:(e.next=n,e.e.next=n&&n.e),n!==null&&(n.prev=e,n.e.prev=e&&e.e)}function Je(t,e,...n){var r=t,a=Bn,s;Wt(()=>{a!==(a=e())&&(s&&(We(s),s=null),s=tt(()=>a(r,...n)))},ln)}function ea(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var a=t.length;for(e=0;e<a;e++)t[e]&&(n=ea(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Js(){for(var t,e,n=0,r="",a=arguments.length;n<a;n++)(t=arguments[n])&&(e=ea(t))&&(r&&(r+=" "),r+=e);return r}function oe(t){return typeof t=="object"?Js(t):t??""}const cr=[...` 	
\r\f \v\uFEFF`];function Xs(t,e,n){var r=t==null?"":""+t;if(e&&(r=r?r+" "+e:e),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var s=a.length,i=0;(i=r.indexOf(a,i))>=0;){var l=i+s;(i===0||cr.includes(r[i-1]))&&(l===r.length||cr.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Gs(t,e){return t==null?null:String(t)}function re(t,e,n,r,a,s){var i=t.__className;if(i!==n||i===void 0){var l=Xs(n,r,s);l==null?t.removeAttribute("class"):t.className=l,t.__className=n}else if(s&&a!==s)for(var c in s){var f=!!s[c];(a==null||f!==!!a[c])&&t.classList.toggle(c,f)}return s}function zt(t,e,n,r){var a=t.__style;if(a!==e){var s=Gs(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Zs=Symbol("is custom element"),Qs=Symbol("is html");function $t(t,e){var n=qn(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function en(t,e){var n=qn(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function he(t,e,n,r){var a=qn(t);a[e]!==(a[e]=n)&&(e==="loading"&&(t[Ka]=n),n==null?t.removeAttribute(e):typeof n!="string"&&$s(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function qn(t){return t.__attributes??(t.__attributes={[Zs]:t.nodeName.includes("-"),[Qs]:t.namespaceURI===cs})}var ur=new Map;function $s(t){var e=ur.get(t.nodeName);if(e)return e;ur.set(t.nodeName,e=[]);for(var n,r=t,a=Element.prototype;a!==r;){n=yr(r);for(var s in n)n[s].set&&e.push(s);r=In(r)}return e}function Yn(t,e,n=e){var r=At();Ms(t,"input",a=>{var s=a?t.defaultValue:t.value;if(s=mn(t)?yn(s):s,n(s),r&&s!==(s=e())){var i=t.selectionStart,l=t.selectionEnd;t.value=s??"",l!==null&&(t.selectionStart=i,t.selectionEnd=Math.min(l,t.value.length))}}),qt(e)==null&&t.value&&n(mn(t)?yn(t.value):t.value),dn(()=>{var a=e();mn(t)&&a===yn(t.value)||t.type==="date"&&!a&&!t.value||a!==t.value&&(t.value=a??"")})}function mn(t){var e=t.type;return e==="number"||e==="range"}function yn(t){return t===""?null:+t}function dr(t,e){return t===e||(t==null?void 0:t[lt])===e}function _e(t={},e,n,r){return Kn(()=>{var a,s;return dn(()=>{a=s,s=[],qt(()=>{t!==n(...s)&&(e(t,...s),a&&dr(n(...a),t)&&e(null,...a))})}),()=>{fn(()=>{s&&dr(n(...s),t)&&e(null,...s)})}}),t}function Yt(t=!1){const e=ue,n=e.l.u;if(!n)return;let r=()=>As(e.s);if(t){let a=0,s={};const i=Vt(()=>{let l=!1;const c=e.s;for(const f in c)c[f]!==s[f]&&(s[f]=c[f],l=!0);return l&&a++,a});r=()=>o(i)}n.b.length&&ps(()=>{fr(e,r),tn(n.b)}),ve(()=>{const a=qt(()=>n.m.map(Fa));return()=>{for(const s of a)typeof s=="function"&&s()}}),n.a.length&&ve(()=>{fr(e,r),tn(n.a)})}function fr(t,e){if(t.l.s)for(const n of t.l.s)o(n);e()}let Zt=!1;function eo(t){var e=Zt;try{return Zt=!1,[t(),Zt]}finally{Zt=e}}function to(t){var e;return((e=t.ctx)==null?void 0:e.d)??!1}function G(t,e,n,r){var b;var a=!Pt||(n&rs)!==0,s=(n&ss)!==0,i=(n&os)!==0,l=r,c=!0,f=()=>(c&&(c=!1,l=i?qt(r):r),l),u;if(s){var d=lt in t||Ha in t;u=((b=St(t,e))==null?void 0:b.set)??(d&&e in t?_=>t[e]=_:void 0)}var v,h=!1;s?[v,h]=eo(()=>t[e]):v=t[e],v===void 0&&r!==void 0&&(v=f(),u&&(a&&Ja(),u(v)));var g;if(a?g=()=>{var _=t[e];return _===void 0?f():(c=!0,_)}:g=()=>{var _=t[e];return _!==void 0&&(l=void 0),_===void 0?l:_},a&&(n&as)===0)return g;if(u){var m=t.$$legacy;return function(_,y){return arguments.length>0?((!a||!y||m||h)&&u(y?g():_),_):g()}}var w=((n&ns)!==0?Vt:Dr)(g);return s&&o(w),function(_,y){if(arguments.length>0){const p=y?o(w):a&&s?ce(_):_;return S(w,p),l!==void 0&&(l=p),_}return to(w)?w.v:o(w)}}function le(t){ue===null&&us(),Pt&&ue.l!==null?no(ue).m.push(t):ve(()=>{const e=qt(t);if(typeof e=="function")return e})}function no(t){var e=t.l;return e.u??(e.u={a:[],b:[],m:[]})}const ro="5";var mr;typeof window<"u"&&((mr=window.__svelte??(window.__svelte={})).v??(mr.v=new Set)).add(ro);let ot=x(""),wt=x(null);function ao(t){S(ot,""),setTimeout(()=>{S(ot,t,!0)},16)}var so=N('<div class="notification svelte-1a2zucn"> </div>');function oo(t,e){J(e,!0),ve(()=>{var l,c;o(ot),o(ot)&&((l=o(wt))==null||l.getBoundingClientRect(),(c=o(wt))==null||c.style.setProperty("opacity","1"));const s=setTimeout(()=>{var f;(f=o(wt))==null||f.style.removeProperty("opacity")},800),i=setTimeout(()=>{var f;S(ot,""),(f=o(wt))==null||f.style.removeProperty("opacity")},1200);return()=>{clearTimeout(s),clearTimeout(i)}});var n=Ce(),r=Y(n);{var a=s=>{var i=so(),l=E(i);_e(i,c=>S(wt,c),()=>o(wt)),de(()=>pt(l,o(ot))),k(s,i)};R(r,s=>{o(ot)&&s(a)})}k(t,n),X()}$a();var io=N('<span class="vh svelte-14jjkpd"><!></span>');function nt(t,e){var n=io(),r=E(n);Je(r,()=>e.children),k(t,n)}var lo=Rs('<svg class="svelte-gv09tg"><use></use></svg>');function me(t,e){let n=G(e,"name",8,"");var r=lo(),a=E(r);de(()=>he(a,"href",`#icon-${n()??""}`)),k(t,r)}const ta=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"openSwiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:e.type==="swipe"?{type:"closeSwiping"}:t;case"openSwiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"closeSwiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};let Ln=x(ce(ta({type:"closed"})));const Ze=t=>{S(Ln,ta(o(Ln),t),!0)},na=()=>o(Ln),co=()=>{Ze({type:"open"})},uo=()=>{Ze({type:"close"})},fo=()=>{const t=na().type;t==="closed"?co():t==="opened"&&uo()};var vo=N('<button class="buttonMenu svelte-hxzs42"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function ra(t,e){J(e,!1),Yt();var n=vo();n.__click=[fo];var r=E(n);Te(r,()=>({"--size":"28px"})),me(r.lastChild,{name:"sidebarMenu"});var a=D(r,2);nt(a,{children:(s,i)=>{var l=ie("Menu");k(s,l)}}),k(t,n),X()}Se(["click"]);const j=ce({historyStack:[],pathname:window.location.pathname,search:window.location.search,historyLength:0});let aa=x(ce(new URLSearchParams(j.search).get("feedOrder")||"newest"));const ho=()=>o(aa),go=t=>{S(aa,t,!0);const e=new URLSearchParams(j.search);t==="newest"?e.delete("feedOrder"):e.set("feedOrder",t),vt(`${j.pathname}${e.size>0?`?${e.toString()}`:""}`)},sa=()=>{var t;return((t=new URLSearchParams(j.search).get("selectedTags"))==null?void 0:t.split(","))||[]};let Qt=sa();const po=()=>{const t=sa();return t.join(",")===Qt.join(",")||(Qt=t),Qt},_o=()=>{j.pathname=document.location.pathname,j.search=document.location.search,j.historyLength=Math.max(0,j.historyLength-=1)};window.addEventListener("popstate",_o);const vt=t=>{const[e,n]=t.split("?");j.pathname=e,j.search=n?`?${n}`:"",j.historyLength+=1,j.historyStack.push(window.location.href),window.history.replaceState(null,"",t)},mo=t=>{const[e,n]=t.split("?");j.pathname=e,j.search=n?`?${n}`:"",window.history.replaceState(null,"",t)},oa=(t="/")=>{var r;const[e,n]=t.split("?");if(j.historyLength<=0){const a=window.location.href,[s,i]=a.split("?");if(!i.includes("stackPages"))window.history.replaceState(null,"",t),j.historyLength=0,j.pathname=e,j.search=n?`?${n}`:"";else{const l=new URLSearchParams(i),f=(((r=l.get("stackPages"))==null?void 0:r.split(","))||[]).slice(0,-1);f.length===0?l.delete("stackPages"):l.set("stackPages",f.join(","));const u=`${s}${l.toString()?`?${l.toString()}`:""}`;window.history.replaceState(null,"",u),j.search=l.toString()?`?${l.toString()}`:""}}else if(j.historyStack.length>0){const a=j.historyStack.pop();if(a){const[s,i]=a.split("?");window.history.replaceState(null,"",a),j.historyLength=Math.max(0,j.historyLength-=1),j.pathname=s,j.search=i?`?${i}`:""}}},_t=()=>{const t=j.historyStack.findIndex(n=>n.includes("stackPages")),e=t===-1?j.historyStack.slice(0):j.historyStack.slice(0,t);if(e.length>0){const n=e.pop();if(n){const[r,a]=n.split("?");window.history.replaceState(null,"",n),j.historyLength=Math.max(0,e.length),j.pathname=r,j.search=a?`?${a}`:"",j.historyStack=e}}else window.history.replaceState(null,"","/"),j.historyLength=0,j.pathname="/",j.search="",j.historyStack=[]},qe=()=>{var t;return((t=new URLSearchParams(j.search).get("stackPages"))==null?void 0:t.split(","))||[]};let dt=x(ce(qe()));const je=t=>{const e=qe();if(!e.includes(t)){e.push(t);const n=new URLSearchParams(j.search);n.set("stackPages",e.join(",")),S(dt,e,!0),vt(`${j.pathname}?${n.toString()}`)}},yo=t=>qe().includes(t),ia=()=>{const t=o(dt).slice(0,-1);S(dt,t,!0)},la=()=>{const t=qe();return t.length>=o(dt).length?t.reduce((e,n)=>[...e,{page:n,shown:!0}],[]):o(dt).reduce((e,n,r)=>[...e,{page:n,shown:t.length===0?!1:r!==o(dt).length-1}],[])},Pn=()=>{S(dt,[],!0)},wo=t=>{t.preventDefault(),je("settings")},So=t=>{t.preventDefault(),je("newNote")};var bo=N('<a class="addNote svelte-1xjx2l6"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add</span></a>'),Eo=N('<div class="header svelte-1xjx2l6"><div class="top svelte-1xjx2l6"><div class="desktop svelte-1xjx2l6"><a class="link svelte-1xjx2l6"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a></div> <div class="mobile svelte-1xjx2l6"><!></div> <!></div></div>');function ko(t,e){J(e,!0);const n=()=>{const m=qe();m.includes("settings")||m.push("settings");const w=new URLSearchParams(j.search);return w.set("stackPages",m.join(",")),`${j.pathname}?${w}`};let a=Z(()=>{const m=qe();m.includes("newNote")||m.push("newNote");const w=new URLSearchParams(j.search);return w.set("stackPages",m.join(",")),`${j.pathname}?${w}`}),s=Z(n);var i=Eo(),l=E(i),c=E(l),f=E(c);f.__click=[wo];var u=E(f);Te(u,()=>({"--size":"20px"})),me(u.lastChild,{name:"settings"});var d=D(c,2),v=E(d);ra(v,{});var h=D(d,2);{var g=m=>{var w=bo();w.__click=[So];var b=E(w);Te(b,()=>({"--size":"24px","--color":"#b0b0b0"})),me(b.lastChild,{name:"plus"}),de(()=>he(w,"href",o(a))),k(m,w)};R(h,m=>{j.pathname!=="/settings"&&m(g)})}de(()=>he(f,"href",o(s))),k(t,i),X()}Se(["click"]);const Co=(t,e)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{t()},e)}},ca=()=>window.matchMedia("(max-width: 768px)").matches;let ua=x(ce(ca()));const To=Co(()=>{S(ua,ca(),!0)},16);window.addEventListener("resize",To);const Jt=()=>o(ua),Jn=ce({count:0}),Do=()=>Jn.count>0,Lo=()=>{Jn.count+=1},Po=()=>{Jn.count-=1},ge=ce({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});let An=!1;const wn=()=>{document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement?An=!0:An=!1},Xn=()=>An;function Ao(t,e){J(e,!0);let n=G(e,"dialog",7),r=null;const a=()=>{e.dialogState==="swiping"&&e.onClose()};ve(()=>(e.dialogState==="swiping"&&(r=setTimeout(a,3e3)),()=>{r&&(clearTimeout(r),r=null)}));let s=null,i=null;const l=3,c=50,f=5,u=.6,d=.3,v=.35,h=.95;let g=0,m=0,w=0,b=!1,_=!1,y=0,p=0,C=0;const L=()=>{g=0,m=0,b=!1,_=!1,y=0,p=0,C=0,w=0,s=null,i!==null&&(cancelAnimationFrame(i),i=null),r&&(clearTimeout(r),r=null)},T=A=>{if(!n()){console.warn("Touch start: No dialog element");return}if(e.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${e.dialogState}`);return}g=A.touches[0].clientX,m=A.touches[0].clientY,w=performance.now(),b=!0,_=!1},O=A=>e.dialogState==="opened"&&A>0||e.dialogState==="swiping"&&A>0,U=A=>{if(n()){n().style.setProperty("--transition-timing","0s"),e.onSwipe(),navigator.vibrate&&navigator.vibrate(10);try{const H=window.getComputedStyle(n()),W=H.transform||H.webkitTransform||"";if(p=n().offsetWidth,(e.dialogState==="swiping"||e.dialogState==="opened")&&(y=0),W&&W!=="none")try{y=new DOMMatrix(W).m41}catch{console.warn("Could not parse transform matrix, using default position")}_=!0}catch(H){console.error("Error during swipe initialization:",H),L()}}},F=()=>{if(!n())return;const H=Math.abs(y+C*p/100)/p;n().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-H)})`)},K=()=>{if(i=null,!s||!b||!n()||Xn()){L();return}const A=s.touches[0].clientX,H=s.touches[0].clientY,W=A-g,se=H-m,B=Math.abs(W)>Math.abs(se),te=Math.abs(W)>l;if(!_)if(B&&te&&O(W))try{U(W)}catch(ye){console.error("Error initializing swipe:",ye),L();return}else return;if(!O(W))return;n().style.setProperty("--transition-timing","0s");let P=y+W*h;P=Math.max(0,Math.min(p,P)),n().style.transform=`translate3d(${P}px, 0, 0)`,ge.swipingRatio=Math.abs(1-P/p),C=(P-y)/p*100,e.dialogState==="swiping"&&(r&&clearTimeout(r),r=setTimeout(a,3e3)),F()},z=A=>{if(!b)return;s=A,i===null&&(i=requestAnimationFrame(K));const H=A.touches[0].clientX-g,W=A.touches[0].clientY-m,se=Math.abs(H)>Math.abs(W);_&&se&&A.preventDefault()},V=A=>{const H=Math.abs(A);if(H>=u)return f;if(H>=d){const W=(H-d)/(u-d);return c-W*(c-f)}else return c},M=(A,H)=>{if(Math.abs(A)>=u)return v*.5;const se=Math.abs(C)/100;return H?v*Math.max(.5,1-se):v*Math.max(.5,se)},I=A=>{var P,q;if(i!==null&&(cancelAnimationFrame(i),i=null),!b||!n()){L();return}if(!_){L();return}let H=0;if((P=A==null?void 0:A.changedTouches)!=null&&P[0]){const ne=A.changedTouches[0].clientX,fe=performance.now()-w;fe>0&&(H=(ne-g)/fe)}const W=V(H);let se=null;e.dialogState==="swiping"&&(se=Math.abs(C)>W||H<-d?"close":"open");const B=e.dialogState==="swiping"&&se==="close",te=M(H,B);ge.duration=te-.02,n().style.setProperty("--transition-timing",`${te}s`),n().offsetWidth,n().style.transform="",se==="open"?e.onOpen():se==="close"&&e.onClose(),(q=n())==null||q.style.removeProperty("--backdrop-bg"),L()};le(()=>(n().addEventListener("touchstart",T,{passive:!0}),n().addEventListener("touchmove",z,{passive:!1}),n().addEventListener("touchend",I,{passive:!0}),n().addEventListener("touchcancel",I,{passive:!0}),()=>{n().removeEventListener("touchstart",T),n().removeEventListener("touchmove",z),n().removeEventListener("touchend",I),n().removeEventListener("touchcancel",I),i!==null&&cancelAnimationFrame(i)})),X()}let Gn=x(!1);const xo=(t,e)=>{let n;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{t()},e)}},Oo=xo(()=>{S(Gn,!1)},100),da=()=>{S(Gn,!0),Oo()},fa=()=>o(Gn);var No=(t,e)=>{e.onStartClose()},Mo=N('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Io=N('<dialog><div class="dialogInner svelte-68rj1a"><div class="header svelte-68rj1a"><div><!></div></div> <!></div></dialog> <!>',1);function Bo(t,e){J(e,!0);let n=350,r=x(null),a=x(null);const s=y=>{y.preventDefault(),e.onStartClose()};le(()=>{var y,p;return(y=o(r))==null||y.addEventListener("close",e.onClosed),(p=o(r))==null||p.addEventListener("cancel",s),()=>{var C,L;(C=o(r))==null||C.removeEventListener("close",e.onClosed),(L=o(r))==null||L.removeEventListener("cancel",s)}});const i=()=>{var y,p,C;(y=o(r))==null||y.style.removeProperty("--transition-timing"),(p=o(r))==null||p.style.removeProperty("transform"),(C=o(r))==null||C.style.removeProperty("--backdrop-bg")},l=()=>{da()},c=Z(fa);ve(()=>{var y,p;if(e.dialogState,!!o(r))switch(e.dialogState){case"opening":{o(r).open||o(r).showModal(),o(r).getBoundingClientRect();const C=setTimeout(()=>{i()},n+1),L=()=>{clearTimeout(C),i()};return(y=o(r))==null||y.addEventListener("transitionend",L,{once:!0}),e.onOpened(),()=>{var T;(T=o(r))==null||T.removeEventListener("transitionend",L)}}case"closing":{const C=setTimeout(()=>{e.dialogState==="closing"&&e.onClosed()},n+1),L=()=>{clearTimeout(C),e.onClosed()};return(p=o(r))==null||p.addEventListener("transitionend",L,{once:!0}),()=>{var T;(T=o(r))==null||T.removeEventListener("transitionend",L)}}case"opened":i()}});var f=Io(),u=Y(f),d=E(u),v=E(d),h=E(v),g=E(h);{var m=y=>{var p=Mo();re(p,1,oe(["navigateButton","buttonBack"]),"svelte-68rj1a"),p.__click=[No,e];var C=E(p);Te(C,()=>({"--size":"20px"})),me(C.lastChild,{name:"back"});var L=D(C,2);nt(L,{children:(T,O)=>{var U=ie("back");k(T,U)}}),k(y,p)};R(g,y=>{(!(e.blocked||e.hidden)||e.blocked&&e.unBlockedBack)&&y(m)})}var w=D(v,2);Je(w,()=>e.children),_e(d,y=>S(a,y),()=>o(a)),_e(u,y=>S(r,y),()=>o(r));var b=D(u,2);{var _=y=>{Ao(y,{get onClose(){return e.onStartClose},get onOpen(){return e.onStartOpen},get onSwipe(){return e.onSwipe},get dialogState(){return e.dialogState},get dialog(){return o(r)}})};R(b,y=>{(!o(c)&&e.dialogState==="opened"||e.dialogState==="swiping")&&(!e.blocked||e.unBlockedBack)&&y(_)})}de(()=>re(u,1,oe([{open:e.dialogState==="opened",hidden:e.hidden,isAnimationOn:ge.working&&(!ge.isSwiping||!e.hidden)},{hidden:e.hidden}]),"svelte-68rj1a")),He("scroll",d,l),k(t,f),X()}Se(["click"]);const vr=(t,e)=>{if(!e)return t;if(e.type==="closed")return{type:"closed"};switch(t.type){case"opened":return e.type==="close"?{type:"closing"}:e.type==="swipe"?{type:"swiping"}:t;case"closed":return e.type==="open"?{type:"opening"}:t;case"swiping":return e.type==="open"?{type:"opening"}:e.type==="close"?{type:"closing"}:t;case"opening":return e.type==="opened"?{type:"opened"}:t;default:return t}};function Ro(t,e){J(e,!0);let n=G(e,"blocked",3,!1),r=G(e,"hiddenDialog",3,!1),a=G(e,"unBlockedBack",3,!1),s=G(e,"onStartClose",3,()=>{}),i=G(e,"onClose",3,()=>{}),l=x(ce(vr({type:"closed"})));const c=b=>{S(l,vr(o(l),b),!0)},f=()=>{n()&&!a()||(s()(),c({type:"close"}))},u=()=>{c({type:"open"})},d=()=>{c({type:"opened"}),ge.duration=.2},v=()=>{i()(),c({type:"closed"}),ge.swipingRatio=1,ge.duration=.2},h=()=>{c({type:"swipe"})};ve(()=>{o(l).type==="swiping"?ge.isSwiping=!0:ge.isSwiping=!1,o(l).type==="closed"&&e.shownDialog?u():o(l).type==="opened"&&!e.shownDialog&&f()});var g=Ce(),m=Y(g);{var w=b=>{Bo(b,{onSwipe:h,onOpened:d,onClosed:v,onStartClose:f,onStartOpen:u,get dialogState(){return o(l).type},get hidden(){return r()},get blocked(){return n()},get unBlockedBack(){return a()},children:(_,y)=>{var p=Ce(),C=Y(p);Je(C,()=>e.children),k(_,p)},$$slots:{default:!0}})};R(m,b=>{o(l).type!=="closed"&&b(w)})}return k(t,g),X({handleComputeState:c})}const jo=({getDialog:t,onOpen:e,onStartClose:n,onClose:r})=>{const a=i=>{i.preventDefault(),n()},s=()=>{r==null||r()};le(()=>{const i=t();return i==null||i.addEventListener("cancel",a),i==null||i.addEventListener("close",s),()=>{i==null||i.removeEventListener("cancel",a),i==null||i.removeEventListener("close",s)}}),le(()=>{const i=t();i==null||i.showModal(),i==null||i.getBoundingClientRect(),e()})};function va(t,e){J(e,!0),le(()=>{const n=r=>{var a;r.target&&((a=e.dialog)!=null&&a.open)&&e.dialogInner&&e.dialogInner!==r.target&&!e.dialogInner.contains(r.target)&&e.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),X()}var Fo=(t,e)=>{e.onStartBack()},Uo=N('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Ho=(t,e)=>{e.onStartClose()},Ko=N('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),zo=N('<dialog><div class="dialogInner svelte-141nkk0"><div class="header svelte-141nkk0"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function Vo(t,e){J(e,!0);let n=G(e,"blockedDialog",3,!1),r=G(e,"hiddenDialog",3,!1),a=G(e,"isDesktopAnimationOff",3,!1),s=x(null),i=x(null);jo({getDialog:()=>o(s),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose}),ve(()=>{var y,p;e.stateDialog==="closing"&&(ge.working?(y=o(s))==null||y.addEventListener("transitionend",()=>{var C;(C=o(s))==null||C.close()},{once:!0}):(p=o(s))==null||p.close())});var l=zo(),c=Y(l),f=E(c),u=E(f),d=E(u),v=E(d);{var h=y=>{var p=Uo();re(p,1,oe(["navigateButton","buttonBack"]),"svelte-141nkk0"),p.__click=[Fo,e];var C=E(p);Te(C,()=>({"--size":"20px"})),me(C.lastChild,{name:"back"});var L=D(C,2);nt(L,{children:(T,O)=>{var U=ie("back");k(T,U)}}),k(y,p)};R(v,y=>{(!(n()||r())||n()&&e.unBlockedBack)&&e.onStartBack&&y(h)})}var g=D(d,2),m=E(g);{var w=y=>{var p=Ko();re(p,1,oe(["navigateButton","buttonClose"]),"svelte-141nkk0"),p.__click=[Ho,e];var C=E(p);Te(C,()=>({"--size":"20px"})),me(C.lastChild,{name:"close"});var L=D(C,2);nt(L,{children:(T,O)=>{var U=ie("close");k(T,U)}}),k(y,p)};R(m,y=>{n()||r()||y(w)})}var b=D(u,2);Je(b,()=>e.children),_e(f,y=>S(i,y),()=>o(i)),_e(c,y=>S(s,y),()=>o(s));var _=D(c,2);va(_,{get dialog(){return o(s)},get dialogInner(){return o(i)},get onClose(){return e.onStartClose}}),de(()=>re(c,1,oe([{open:e.stateDialog==="open",isAnimationOn:ge.working,isDesktopAnimationOff:a(),hiddenDialog:r()}]),"svelte-141nkk0")),k(t,l),X()}Se(["click"]);const Wo=({onStartClose:t,onClose:e})=>{let n=x("close");return{get state(){return o(n)},set state(i){S(n,i,!0)},handleStartClose:(i=!1)=>{i||(S(n,"closing"),t==null||t())},handleOpen:()=>{S(n,"open")},handleClose:()=>{S(n,"close"),e==null||e()}}};function qo(t,e){J(e,!0);let n=G(e,"blockedDialog",3,!1),r=G(e,"hiddenDialog",3,!1),a=G(e,"onStartClose",3,()=>{}),s=G(e,"onClose",3,()=>{}),i=Wo({onStartClose:a(),onClose:s()});ve(()=>{i.state==="close"&&e.shownDialog?i.state="opening":i.state==="open"&&!e.shownDialog&&i.handleStartClose(n())});var l=Ce(),c=Y(l);{var f=u=>{Vo(u,{get stateDialog(){return i.state},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(d,v)=>{var h=Ce(),g=Y(h);Je(g,()=>e.children),k(d,h)},$$slots:{default:!0}})};R(c,u=>{i.state!=="close"&&u(f)})}k(t,l),X()}function ha(t,e){J(e,!0);let n=G(e,"blockedDialog",3,!1),r=G(e,"hiddenDialog",3,!1),a=G(e,"isLastDialog",3,!1),s=G(e,"onStartClose",3,()=>{}),i=G(e,"onClose",3,()=>{});const l=Z(()=>a()?void 0:e.onStartBack);le(()=>(Lo(),()=>{Po()}));var c=Ce(),f=Y(c);{var u=v=>{Ro(v,{get shownDialog(){return e.shownDialog},get blocked(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartClose(){return e.onStartBack},onClose:i()})},d=v=>{qo(v,{get shownDialog(){return e.shownDialog},get blockedDialog(){return n()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get children(){return e.children},get onStartBack(){return o(l)},onStartClose:s(),onClose:i()})};R(f,v=>{Jt()?v(u):v(d,!1)})}k(t,c),X()}let ga=x(!1),Zn=x(!1);const Ee=t=>{S(ga,t,!0),t||S(Zn,!1)},Yo=()=>o(ga),et=t=>{S(Zn,t,!0)},Jo=()=>o(Zn);function hr(t,e){J(e,!0);let n=G(e,"blocked",3,!1),r=G(e,"isLastDialog",3,!1),a=G(e,"onBack",3,()=>{});const s=Z(()=>n()||e.hidden||Yo()),i=Z(()=>Jo()&&!r());ha(t,{get shownDialog(){return e.shown},get blockedDialog(){return o(s)},get unBlockedBack(){return o(i)},get hiddenDialog(){return e.hidden},get isLastDialog(){return r()},onStartBack:()=>{(!o(s)||o(s)&&o(i))&&e.shown&&(oa(),a()())},onStartClose:()=>{(!o(s)||o(s)&&o(i))&&e.shown&&_t()},onClose:()=>{ia()},children:(u,d)=>{var v=Ce(),h=Y(v);Je(h,()=>e.children),k(u,v)},$$slots:{default:!0}}),X()}const Bt=()=>crypto.randomUUID(),Xo="AppStorage",Go=1,Ne="notes",Ct="syncLog",Tt="account";let $;window.addEventListener("unhandledrejection",t=>{alert("Error: "+t.reason.message)});const Zo=()=>new Promise((t,e)=>{const n=indexedDB.open(Xo,Go);n.addEventListener("upgradeneeded",()=>{const r=n.result;r.objectStoreNames.contains(Ne)||r.createObjectStore(Ne,{keyPath:"id"}),r.objectStoreNames.contains(Tt)||r.createObjectStore(Tt,{keyPath:"id"}),r.objectStoreNames.contains(Ct)||r.createObjectStore(Ct,{keyPath:"id"})}),n.addEventListener("success",()=>{t(),$=n.result,$.onversionchange=function(){$==null||$.close(),alert("app outdated, please reload the page")}}),n.addEventListener("blocked",()=>{e(),alert("app outdated, please reload the page")}),n.addEventListener("error",()=>{e(),console.error("Error",n.error)})}),pa=()=>new Promise((t,e)=>{const n=$==null?void 0:$.transaction(Tt,"readonly"),r=n==null?void 0:n.objectStore(Tt).get("default");r==null||r.addEventListener("success",()=>{var s;const a=(s=r==null?void 0:r.result)==null?void 0:s.account;t(a)}),r==null||r.addEventListener("error",()=>{e()})}),Qn=t=>new Promise((e,n)=>{const r=$==null?void 0:$.transaction(Tt,"readwrite"),a=r==null?void 0:r.objectStore(Tt),s=a==null?void 0:a.put({id:"default",account:t});s==null||s.addEventListener("success",()=>{console.log("account inited"),e()}),s==null||s.addEventListener("error",()=>{n()})}),_a=()=>new Promise((t,e)=>{const n=$==null?void 0:$.transaction(Ne,"readonly"),r=n==null?void 0:n.objectStore(Ne).getAll();r==null||r.addEventListener("success",()=>{const a=r.result;t(a)}),r==null||r.addEventListener("error",()=>{e()})}),ma=async t=>new Promise((e,n)=>{const r=$==null?void 0:$.transaction(Ne,"readwrite"),a=r==null?void 0:r.objectStore(Ne),s=a==null?void 0:a.put({...t});s==null||s.addEventListener("success",()=>{e()}),s==null||s.addEventListener("error",()=>{n()})}),Qo=async t=>new Promise((e,n)=>{const r=$==null?void 0:$.transaction(Ne,"readwrite"),a=r==null?void 0:r.objectStore(Ne),s=a==null?void 0:a.delete(t);s==null||s.addEventListener("success",()=>{e()}),s==null||s.addEventListener("error",()=>{n()})}),$o=()=>new Promise((t,e)=>{const n=$==null?void 0:$.transaction(Ne,"readwrite"),r=n==null?void 0:n.objectStore(Ne),a=r==null?void 0:r.clear();a==null||a.addEventListener("success",()=>{t()}),a==null||a.addEventListener("error",()=>{e()})}),$n=async()=>{await $o()},ya=async t=>{const e=(await _a()).reduce((s,i)=>(s[i.id]=i,s),{}),n={},r=$==null?void 0:$.transaction(Ne,"readwrite"),a=r==null?void 0:r.objectStore(Ne);t.forEach(s=>{e[s.id]?e[s.id].updatedAt<s.updatedAt&&(n[s.id]=s):n[s.id]=s}),await Promise.all(Object.values(n).map(s=>{const i=a==null?void 0:a.put(s);return new Promise((l,c)=>{i==null||i.addEventListener("success",()=>{l()}),i==null||i.addEventListener("error",()=>{c()})})}))},Sn=async t=>new Promise((e,n)=>{const r=$==null?void 0:$.transaction(Ct,"readwrite"),a=r==null?void 0:r.objectStore(Ct),s=a==null?void 0:a.put({...t});s==null||s.addEventListener("success",()=>{e()}),s==null||s.addEventListener("error",()=>{n()})}),ei=()=>new Promise((t,e)=>{const n=$==null?void 0:$.transaction(Ct,"readonly"),r=n==null?void 0:n.objectStore(Ct).getAll();r==null||r.addEventListener("success",()=>{const a=r.result;t(a)}),r==null||r.addEventListener("error",()=>{e()})});let Q=x({initedDB:!1});const ti=()=>{S(Q,{...o(Q),initedDB:!0})},ht=async t=>{S(Q,{...o(Q),account:t,notes:[],mapNotes:new Map})},wa=()=>o(Q),hn=async()=>{const t=await _a(),e=new Map,n=[];t.forEach(r=>{n.push(r),e.set(r.id,r)}),S(Q,{...o(Q),notes:n,mapNotes:e})},Dt=()=>o(Q).notes&&o(Q).mapNotes,Sa=()=>o(Q).notes||[],ni=()=>o(Q).mapNotes||new Map,ba=t=>{if(!o(Q).notes||!o(Q).mapNotes)throw new Error("Notes appState is not initialized");const e={...t};o(Q).notes.push(e),o(Q).mapNotes.set(e.id,e),S(Q,{...o(Q)})},Ea=async t=>{if(!o(Q).notes||!o(Q).mapNotes)throw new Error("Notes appState is not initialized");o(Q).notes.forEach((e,n)=>{(e==null?void 0:e.id)===t.id&&o(Q).notes&&(o(Q).notes[n]=t)}),o(Q).mapNotes.set(t.id,t),S(Q,{...o(Q)})},ka=async t=>{if(!o(Q).notes||!o(Q).mapNotes)throw new Error("Notes appState is not initialized");o(Q).mapNotes.delete(t),o(Q).notes=o(Q).notes.filter(e=>(e==null?void 0:e.id)!==t),S(Q,{...o(Q)})},Ca=async()=>{S(Q,{...o(Q),initedDB:!0,notes:[],mapNotes:new Map})};let Ta=x({});const Da=()=>o(Ta),ri=t=>{S(Ta,t)};var ai=N('<input class="svelte-6l2oy0"/>');function xn(t,e){J(e,!0);let n=G(e,"value",15,"");var r=ai();de(()=>he(r,"placeholder",e.placeholder)),He("focus",r,function(...a){var s;(s=e.onFocus)==null||s.apply(this,a)}),Yn(r,n),k(t,r),X()}function si(t,e){J(e,!0);let n=G(e,"dialog",7);const r=3,a=50,s=5,i=.6,l=.3,c=.35,f=.95;let u=0,d=0,v=0,h=!1,g=!1,m=0,w=0,b=0;const _=()=>{u=0,d=0,h=!1,g=!1,m=0,w=0,b=0,v=0,y!==null&&(cancelAnimationFrame(y),y=null),p=null};let y=null,p=null;const C=M=>{if(!n()){console.warn("Touch start: No dialog element");return}if(e.sidebarState!=="opened"&&e.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${e.sidebarState}`);return}u=M.touches[0].clientX,d=M.touches[0].clientY,v=performance.now(),h=!0,g=!1},L=M=>e.sidebarState==="closed"&&M>0||e.sidebarState==="closeSwiping"&&M>0||e.sidebarState==="opened"&&M<0||e.sidebarState==="openSwiping"&&M<0,T=M=>{if(n()){if(n().style.setProperty("--transition-timing","0s"),!n().open&&e.sidebarState==="closed")try{n().showModal(),n().offsetWidth}catch(I){console.error("Error opening dialog:",I);return}e.onSwipe();try{const I=window.getComputedStyle(n()),A=I.transform||I.webkitTransform||"";if(w=n().offsetWidth,e.sidebarState==="closeSwiping"||e.sidebarState==="closed"?m=-w:(e.sidebarState==="openSwiping"||e.sidebarState==="opened")&&(m=0),A&&A!=="none")try{m=new DOMMatrix(A).m41}catch{console.warn("Could not parse transform matrix, using default position")}g=!0}catch(I){console.error("Error during swipe initialization:",I),_()}}},O=()=>{if(!n())return;const I=(Math.abs(m+b*w/100)-w*.3-20)/w;n().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.25*(1-I)})`)},U=()=>{if(y=null,!p||!h||!n()||Xn())return;const{x:M,y:I}=p;p=null;const A=M-u,H=I-d,W=Math.abs(A)>Math.abs(H),se=Math.abs(A)>r;if(!g)if(W&&se&&L(A))try{T(A)}catch(q){console.error("Error initializing swipe:",q),_();return}else return;if(!L(A))return;n().style.setProperty("--transition-timing","0s");let B=m+A*f;const te=-w;B=Math.max(te,Math.min(0,B)),n().style.transform=`translate3d(${B}px, 0, 0)`,b=(B-m)/w*100,O()},F=M=>{if(!h)return;const I=M.touches[0].clientX,A=M.touches[0].clientY;p={x:I,y:A},y===null&&(y=requestAnimationFrame(U)),g&&Math.abs(I-u)>Math.abs(A-d)&&M.preventDefault()},K=M=>{const I=Math.abs(M);if(I>=i)return s;if(I>=l){const A=(I-l)/(i-l);return a-A*(a-s)}else return a},z=(M,I)=>{if(Math.abs(M)>=i)return c*.5;const H=Math.abs(b)/100;return I?c*Math.max(.5,1-H):c*Math.max(.5,H)},V=M=>{var B,te;if(y!==null&&(cancelAnimationFrame(y),y=null),p=null,!h||!n()){_();return}if(!g){_();return}let I=0;if((B=M==null?void 0:M.changedTouches)!=null&&B[0]){const P=M.changedTouches[0].clientX,ne=performance.now()-v;ne>0&&(I=(P-u)/ne)}const A=K(I);let H=null;e.sidebarState==="closeSwiping"?H=Math.abs(b)>A||I>l?"open":"close":e.sidebarState==="openSwiping"&&(H=Math.abs(b)>A||I<-l?"close":"open");const W=e.sidebarState==="closeSwiping"&&H==="open"||e.sidebarState==="openSwiping"&&H==="close",se=z(I,W);n().style.setProperty("--transition-timing",`${se}s`),n().offsetWidth,n().style.transform="",H==="open"?e.onOpen():H==="close"&&e.onClose(),(te=n())==null||te.style.removeProperty("--backdrop-bg"),_()};le(()=>(document.addEventListener("touchstart",C,{passive:!0}),document.addEventListener("touchmove",F,{passive:!1}),document.addEventListener("touchend",V,{passive:!0}),document.addEventListener("touchcancel",V,{passive:!0}),()=>{document.removeEventListener("touchstart",C),document.removeEventListener("touchmove",F),document.removeEventListener("touchend",V),document.removeEventListener("touchcancel",V),y!==null&&cancelAnimationFrame(y)})),X()}var oi=N('<dialog><div class="dialogInner svelte-1in1s0g"><!></div></dialog> <!> <!>',1);function ii(t,e){J(e,!0);let n=350,r=x(null),a=x(null),s=Z(na);ve(()=>{la().length>0&&Ze({type:"close"})});const i=()=>{e.blocked||Ze({type:"close"})},l=()=>{e.blocked||Ze({type:"open"})},c=()=>{Ze({type:"opened"})},f=()=>{Ze({type:"closed"})},u=()=>{Ze({type:"swipe"})},d=T=>{T.preventDefault(),i()};le(()=>{var T,O;return(T=o(r))==null||T.addEventListener("close",f),(O=o(r))==null||O.addEventListener("cancel",d),()=>{var U,F;(U=o(r))==null||U.removeEventListener("close",f),(F=o(r))==null||F.removeEventListener("cancel",d)}});const v=()=>{var T,O,U;(T=o(r))==null||T.style.removeProperty("--transition-timing"),(O=o(r))==null||O.style.removeProperty("transform"),(U=o(r))==null||U.style.removeProperty("--backdrop-bg")},h=Z(fa);ve(()=>{var T,O,U;if(o(s),!!o(r))switch(o(s).type){case"closeSwiping":{const F=setTimeout(()=>{i()},3e3);return()=>{clearTimeout(F)}}case"openSwiping":{const F=setTimeout(()=>{l()},3e3);return()=>{clearTimeout(F)}}case"opening":{o(r).open||o(r).showModal(),o(r).getBoundingClientRect();const F=setTimeout(()=>{v()},n+1),K=()=>{clearTimeout(F),v()};return(T=o(r))==null||T.addEventListener("transitionend",K,{once:!0}),c(),()=>{var z;(z=o(r))==null||z.removeEventListener("transitionend",K)}}case"closing":{const F=setTimeout(()=>{o(s).type==="closing"&&f()},n+1),K=()=>{clearTimeout(F),f()};return(O=o(r))==null||O.addEventListener("transitionend",K,{once:!0}),()=>{var z;(z=o(r))==null||z.removeEventListener("transitionend",K)}}case"closed":(U=o(r))==null||U.close(),v();break;case"opened":v();break}});var g=oi(),m=Y(g),w=E(m),b=E(w);{var _=T=>{var O=Ce(),U=Y(O);Je(U,()=>e.children),k(T,O)};R(b,T=>{o(s).type!=="closed"&&T(_)})}_e(w,T=>S(a,T),()=>o(a)),_e(m,T=>S(r,T),()=>o(r));var y=D(m,2);{var p=T=>{va(T,{get dialog(){return o(r)},get dialogInner(){return o(a)},onClose:i})};R(y,T=>{o(s).type==="opened"&&!e.blocked&&T(p)})}var C=D(y,2);{var L=T=>{si(T,{onClose:i,onOpen:l,onSwipe:u,get sidebarState(){return o(s).type},get dialog(){return o(r)}})};R(C,T=>{(!o(h)&&o(s).type==="closed"||o(s).type==="opened"||o(s).type==="openSwiping"||o(s).type==="closeSwiping")&&!e.blocked&&T(L)})}de(()=>re(m,1,oe([{open:o(s).type==="opened",hidden:e.blocked,isAnimationOn:ge.working&&(!ge.isSwiping||!e.blocked)}]),"svelte-1in1s0g")),k(t,g),X()}var li=N('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>');function it(t,e){let n=Z(()=>e.style==="selected"?"45deg":"0deg");var r=li();r.__click=function(...i){var l;(l=e.onClick)==null||l.apply(this,i)};var a=E(r),s=D(a);Te(s,()=>({"--size":"20px","--rotate":o(n)})),me(s.lastChild,{name:"plus"}),de(()=>{he(r,"type",e.type),re(r,1,oe([{selectedTag:e.style==="selected"}]),"svelte-4jwrjv"),pt(a,`${e.title??""} `)}),k(t,r)}Se(["click"]);const ci=t=>{t.preventDefault(),je("settings")};var ui=N("<div></div>"),di=N('<div class="sidebarFixed svelte-ri1xjn"><div class="nav svelte-ri1xjn"><!> <a class="link svelte-ri1xjn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a></div> <div class="searchWrapper svelte-ri1xjn"><!></div> <!></div> <div></div>',1),fi=N("<div></div>"),vi=N('<div class="sidebar svelte-ri1xjn"><div class="sidebarFixed svelte-ri1xjn"><div class="searchWrapper svelte-ri1xjn"><!></div> <!></div> <div class="tags svelte-ri1xjn"></div></div>');function hi(t,e){J(e,!0);let n=x(null),r=x(""),a=Z(()=>{var m;return((m=new URLSearchParams(j.search).get("selectedTags"))==null?void 0:m.split(","))||[]});const s=()=>{const m=qe();m.includes("settings")||m.push("settings");const w=new URLSearchParams(j.search);return w.set("stackPages",m.join(",")),`${j.pathname}?${w}`},i=m=>{const w=new URLSearchParams(j.search);w.set("selectedTags",[...o(a),m].join(",")),vt(`${j.pathname}${w.size>0?`?${w.toString()}`:""}`),S(r,"")},l=m=>{const w=new URLSearchParams(j.search),b=o(a).filter(_=>_!==m);b.length===0?w.delete("selectedTags"):w.set("selectedTags",b.join(",")),vt(`${j.pathname}${w.size>0?`?${w.toString()}`:""}`)};let c=Z(()=>Dt()?Object.values(Da()).filter(m=>!o(a).some(w=>m.name===w)):[]),f=Z(s),u=Z(()=>qe().length>0||Do());var d=Ce(),v=Y(d);{var h=m=>{ii(m,{get blocked(){return o(u)},children:(w,b)=>{var _=di(),y=Y(_),p=E(y),C=E(p);ra(C,{});var L=D(C,2);L.__click=[ci];var T=E(L);Te(T,()=>({"--size":"20px"})),me(T.lastChild,{name:"settings"});var O=D(p,2),U=E(O);xn(U,{placeholder:"Search tag",get value(){return o(r)},set value(V){S(r,V,!0)}});var F=D(O,2);{var K=V=>{var M=ui();re(M,1,oe(["tags","selectedTags"]),"svelte-ri1xjn"),Ke(M,20,()=>o(a),I=>I,(I,A)=>{it(I,{get title(){return A},onClick:()=>l(A),style:"selected"})}),_e(M,I=>S(n,I),()=>o(n)),k(V,M)};R(F,V=>{o(a).length>0&&V(K)})}var z=D(y,2);re(z,1,oe(["tags","tagsWrapper"]),"svelte-ri1xjn"),Ke(z,21,()=>o(c),V=>V.name,(V,M)=>{var I=Ce(),A=Y(I);{var H=W=>{it(W,{get title(){return o(M).name},onClick:()=>i(o(M).name)})};R(A,W=>{(o(r)===""||o(M).name.toLowerCase().indexOf(o(r).toLowerCase())!==-1)&&W(H)})}k(V,I)}),de(V=>{he(L,"href",o(f)),zt(z,`min-height: height: calc(100dvh - 190px - ${V??""}px);`)},[()=>o(n)?o(n).getBoundingClientRect().height:0]),k(w,_)},$$slots:{default:!0}})},g=m=>{var w=vi(),b=E(w),_=E(b),y=E(_);xn(y,{placeholder:"Search tag",get value(){return o(r)},set value(T){S(r,T,!0)}});var p=D(_,2);{var C=T=>{var O=fi();re(O,1,oe(["tags","selectedTags"]),"svelte-ri1xjn"),Ke(O,20,()=>o(a),U=>U,(U,F)=>{it(U,{get title(){return F},onClick:()=>l(F),style:"selected"})}),k(T,O)};R(p,T=>{o(a).length>0&&T(C)})}var L=D(b,2);Ke(L,21,()=>o(c),T=>T.name,(T,O)=>{var U=Ce(),F=Y(U);{var K=z=>{it(z,{get title(){return o(O).name},onClick:()=>i(o(O).name)})};R(F,z=>{(o(r)===""||o(O).name.toLowerCase().indexOf(o(r).toLowerCase())!==-1)&&z(K)})}k(T,U)}),k(m,w)};R(v,m=>{Jt()?m(h):m(g,!1)})}k(t,d),X()}Se(["click"]);function $e(t){const e=String.fromCharCode(...new Uint8Array(t));return window.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function er(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");const n=e.length%4;return n&&(e+="=".repeat(4-n)),e}function tr(t){try{const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n.buffer}catch(e){throw console.error("Error decoding base64:",e,"Input:",t),e}}function Rt(t){const e=er(t);return tr(e)}const gi=async t=>{const e=await crypto.subtle.importKey("raw",t.serverKey,{name:"HKDF"},!1,["deriveKey"]),n=await crypto.subtle.deriveKey({name:"HKDF",salt:t.id,info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt"]);return{encryptedClientKey:await crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(12)},n,t.clientKey)}},pi=async t=>{const e=await crypto.subtle.importKey("raw",t.serverKey,{name:"HKDF"},!1,["deriveKey"]),n=await crypto.subtle.deriveKey({name:"HKDF",info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["decrypt"]),r=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(12)},n,t.encryptedClientKey);return new Uint8Array(r)};function _i(t,e){const n=new ArrayBuffer(t.length+e.length),r=new Uint8Array(n);return r.set(t,0),r.set(e,t.length),n}const mi=async t=>{const e=await crypto.subtle.importKey("raw",_i(t.clientKey,t.serverKey),{name:"HKDF"},!1,["deriveKey"]);return await crypto.subtle.deriveKey({name:"HKDF",info:new TextEncoder().encode("aes-gcm-shared"),hash:"SHA-256"},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])},yi=async(t,e)=>{const n=JSON.parse(t),a=new Uint8Array(n).buffer,s=await crypto.subtle.decrypt({name:"AES-GCM",iv:new Uint8Array(12)},e,a);return new TextDecoder().decode(s)},wi=async(t,e)=>{const r=await(await fetch("/api/serverKey",{method:"POST"})).json(),a=await pi({encryptedClientKey:Rt(t.encryptedClientKey),serverKey:Rt(r.serverKey)});return{commonKey:await mi({clientKey:a,serverKey:new Uint8Array(Rt(e))})}};class Si{constructor(){at(this,"queue",[]);at(this,"commonKey",null);at(this,"status","idle");at(this,"ws",null)}async saveNewRecords(e,n){const r=await Promise.all(n.records.map(async s=>{if(this.commonKey===null)throw new Error("Common key is not initialized");const i=await yi(s.data,this.commonKey),l=JSON.parse(i);return{id:s.id,url:l.url,title:l.title,description:l.description,tags:l.tags,createdAt:l.createdAt,updatedAt:l.updatedAt}}));if(await ya(r),(await fetch("/api/sync/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lastLogId:n.lastLogId})})).status===200){await hn();const s={...e,lastSync:Date.now(),lastLogId:n.lastLogId};ht(s),Qn(s)}}connect(){}mergeLogNotes(e,n){const r={};return e.forEach(a=>{r[a.id]=a}),n.forEach(a=>{r[a.id]?r[a.id].createdAt<a.createdAt&&(r[a.id]=a):r[a.id]=a}),Object.values(r)}async start(){const e=await ei();this.queue=this.mergeLogNotes(this.queue,e);const n=async()=>{var a;const r=wa().account;if(r){if(!navigator.onLine){setTimeout(n,5e3);return}if(!this.commonKey){const i=await(await fetch("/api/serverKey",{method:"POST"})).json(),{commonKey:l}=await wi(r,i.serverKey);this.commonKey=l}this.status==="idle"&&(this.status="sync",this.connect()),(a=this.ws)==null||a.send(JSON.stringify({type:"sync"}))}};n()}async putNote(e){const n={id:Bt(),operation:"put",recordId:e.id,createdAt:Date.now(),data:JSON.stringify({...e})};await Sn(n),this.queue.push(n)}async delNote(e){const n={id:Bt(),operation:"del",recordId:e,createdAt:Date.now()};await Sn(n),this.queue.push(n)}async delAll(){const e={id:Bt(),operation:"delAll",createdAt:Date.now()};await Sn(e),this.queue.push(e)}}const rt=new BroadcastChannel("app"),mt=new Si;rt.addEventListener("message",async t=>{if(console.log("Received message from BroadcastChannel:",t.data),t.data&&typeof t.data=="string"){const e=JSON.parse(t.data);if(e.operation==="addNote"){const n=e.note;ba(n)}else if(e.operation==="updateNote"){const n=e.note;Ea(n)}else if(e.operation==="deleteNote"){const n=e.noteId;ka(n)}else if(e.operation==="clearAppState")Ca();else if(e.operation==="reloadNotes")hn();else if(e.operation==="initLocalAccount")ht(null),Pn(),vt("/");else if(e.operation==="initAccount"){const n=await pa();n&&(ht(n),Pn(),vt("/"),mt.start())}}});Zo().then(async()=>{ti();const t=await pa();t===void 0?je("start"):(yo("start")&&(Pn(),vt("/")),t?(ht(t),mt.start()):ht(null),await hn())}).catch(()=>{console.error("failed to init db")});const bi=async t=>{const e={...t,id:Bt(),createdAt:Date.now(),updatedAt:Date.now()};ba(e),rt.postMessage(JSON.stringify({operation:"addNote",note:{...e}})),await ma({...e}),mt.putNote({...e})},Ei=async t=>{const e={...t,updatedAt:Date.now()};rt.postMessage(JSON.stringify({operation:"updateNote",note:e})),Ea(e),await ma(e),mt.putNote({...e})},ki=async t=>{rt.postMessage(JSON.stringify({operation:"deleteNote",noteId:t})),ka(t),await Qo(t),mt.delNote(t)},Ci=async()=>{rt.postMessage(JSON.stringify({operation:"clearAppState"})),Ca(),await $n(),mt.delAll()},Ti=async(t="notes-export.json")=>{const e=JSON.stringify({notes:wa().notes}),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(r)},0)},gr=async t=>{await ya(t),rt.postMessage(JSON.stringify({operation:"reloadNotes"})),await hn()},Di=async()=>{await $n(),await Qn(null),ht(null),rt.postMessage(JSON.stringify({operation:"initLocalAccount"}))},La=async t=>{await $n();const{encryptedClientKey:e}=await gi({id:t.credentialId,clientKey:t.clientKey,serverKey:t.serverKey}),n={encryptedClientKey:$e(e),lastLogId:-1,lastSync:-1};await Qn(n),ht(n),rt.postMessage(JSON.stringify({operation:"initAccount"})),mt.start()};var Li=N('<div class="input-container svelte-hz572l"><input/> <div class="error-message svelte-hz572l"><!></div></div>');function bn(t,e){J(e,!0);let n=G(e,"value",15,""),r=G(e,"error",3,"");var a=Li(),s=E(a);s.__input=function(...u){var d;(d=e.onInput)==null||d.apply(this,u)};let i;var l=D(s,2),c=E(l);{var f=u=>{var d=ie();de(()=>pt(d,r())),k(u,d)};R(c,u=>{r()&&u(f)})}de(u=>{he(s,"placeholder",e.placeholder),i=re(s,1,"svelte-hz572l",null,i,u)},[()=>({error:!!r()})]),He("blur",s,function(...u){var d;(d=e.onBlur)==null||d.apply(this,u)}),He("focus",s,function(...u){var d;(d=e.onFocus)==null||d.apply(this,u)}),Yn(s,n),k(t,a),X()}Se(["input"]);var Pi=N("<div></div>"),Ai=N('<form class="svelte-wqwsb3"><!> <!> <textarea placeholder="notes" class="svelte-wqwsb3"></textarea> <div class="boxtags"><div class="sidebarFixed"><!></div> <div class="tags svelte-wqwsb3"><!> <!></div> <div class="searchWrapper svelte-wqwsb3"><!></div></div> <button class="buttonSubmit svelte-wqwsb3" type="submit"> </button></form>');function Pa(t,e){J(e,!0);let n=G(e,"initialTitle",3,""),r=G(e,"initialUrl",3,""),a=G(e,"initialDescription",3,""),s=G(e,"initialTags",19,()=>[]),i=G(e,"mode",3,"add"),l=x(""),c=x(ce(n())),f=x(ce(r())),u=x(ce(a())),d=x(ce(s().filter(B=>B!=="inbox")));const v=B=>{o(d).includes(B)||S(d,[...o(d),B],!0)},h=B=>{const te=o(d).filter(P=>P!==B);te.length===0?S(d,[],!0):S(d,te,!0)};let g=Z(()=>Dt()?[...Sa().reduce((B,te)=>(te==null||te.tags.forEach(P=>{B.has(P)||B.add(P)}),B),new Set)]:[]),m=Z(()=>Dt()?o(g).filter(B=>!o(d).some(te=>B===te)&&B!=="inbox"):[]),w=Z(()=>o(m).find(B=>B.toLowerCase()===o(l).toLowerCase())||o(d).includes(o(l))),b=Z(()=>o(m).filter(B=>o(l)===""?!0:B.toLowerCase().indexOf(o(l).toLowerCase())!==-1).slice(0,o(w)||o(l)===""?3:2));const _=B=>{B.preventDefault(),e.onSubmit({title:o(c).trim().slice(0,256)||"unkwown",url:o(f).trim().slice(0,2048),description:o(u).trim().slice(0,2048),tags:o(d).length>0?o(d):["inbox"]})};var y=Ai(),p=E(y);bn(p,{placeholder:"url",get value(){return o(f)},set value(B){S(f,B,!0)}});var C=D(p,2);bn(C,{placeholder:"title",get value(){return o(c)},set value(B){S(c,B,!0)}});var L=D(C,2),T=D(L,2),O=E(T),U=E(O);{var F=B=>{var te=Pi();re(te,1,oe(["tags","selectedTags"]),"svelte-wqwsb3"),Ke(te,20,()=>o(d),P=>P,(P,q)=>{it(P,{get title(){return q},onClick:()=>h(q),type:"button",style:"selected"})}),k(B,te)};R(U,B=>{o(d).length>0&&B(F)})}var K=D(O,2),z=E(K);{var V=B=>{var te=Ce(),P=Y(te);Ke(P,16,()=>o(b),q=>q,(q,ne)=>{it(q,{get title(){return ne},onClick:()=>v(ne)})}),k(B,te)};R(z,B=>{o(l)!==""&&B(V)})}var M=D(z,2);{var I=B=>{it(B,{get title(){return o(l)},onClick:()=>{v(o(l)),S(l,"")}})};R(M,B=>{!o(w)&&o(l)!==""&&B(I)})}var A=D(K,2),H=E(A);bn(H,{placeholder:"search tag",get value(){return o(l)},set value(B){S(l,B,!0)}});var W=D(T,2),se=E(W);de(()=>pt(se,i()==="add"?"add":"edit")),He("submit",y,_),Yn(L,()=>o(u),B=>S(u,B)),k(t,y),X()}function xi(t,e){J(e,!0);let n=x(!0);const r=()=>{e.onClose()},a=()=>{S(n,!1)},s=({title:i,url:l,description:c,tags:f})=>{Ei({...e.note,title:i,url:l,description:c,tags:f.map(u=>u.trim())}),a()};ha(t,{get shownDialog(){return o(n)},onClose:r,children:(i,l)=>{Pa(i,{get initialTitle(){return e.note.title},get initialUrl(){return e.note.url},get initialDescription(){return e.note.description},get initialTags(){return e.note.tags},onSubmit:s,mode:"edit"})},$$slots:{default:!0}}),X()}const Oi=(t,e,n)=>{const r=Da();e.note.tags.forEach(a=>{if(o(n).includes(a)&&r[a].connections===1){const s=new URLSearchParams(j.search),i=o(n).filter(l=>l!==a);i.length===0?s.delete("selectedTags"):s.set("selectedTags",i.join(",")),mo(`${j.pathname}${s.size>0?`?${s.toString()}`:""}`)}}),ki(e.note.id)},Ni=(t,e)=>{S(e,!0)};var Mi=N('<div><button class="menuButton svelte-1216vv3">Edit</button> <button class="menuButton svelte-1216vv3">Delete</button></div> <!>',1);function Ii(t,e){J(e,!0);let n=G(e,"menu",15),r=G(e,"shownMenu",15),a=x(!1),s=Z(()=>{var g;return((g=new URLSearchParams(j.search).get("selectedTags"))==null?void 0:g.split(","))||[]});const i=g=>{var m;g.target!==n()&&!((m=n())!=null&&m.contains(g.target))&&r(!1)};le(()=>(document.addEventListener("focusin",i),()=>{document.removeEventListener("focusin",i)})),ve(()=>{r()&&n()?(n().style.setProperty("display","flex"),n().getBoundingClientRect(),n().style.setProperty("opacity","1"),n().style.setProperty("transform","scale(1)")):n()&&(n().style.removeProperty("opacity"),n().style.removeProperty("transform"),n().getBoundingClientRect(),n().addEventListener("transitionend",()=>{!r()&&n()&&n().style.removeProperty("display")},{once:!0}))});const l=()=>{S(a,!1)};var c=Mi(),f=Y(c),u=E(f);u.__click=[Ni,a];var d=D(u,2);d.__click=[Oi,e,s],_e(f,g=>n(g),()=>n());var v=D(f,2);{var h=g=>{xi(g,{get note(){return e.note},onClose:l})};R(v,g=>{o(a)&&g(h)})}de(()=>re(f,1,oe(["itemMenu",{showMenuUp:e.showMenuUp}]),"svelte-1216vv3")),k(t,c),X()}Se(["click"]);const Bi=(t,e)=>{S(e,!o(e))},Ri=(t,e)=>{navigator.clipboard.writeText(e.note.url),ao("Link copied to clipboard")},ji=(t,e)=>{S(e,!0)},Fi=(t,e)=>{S(e,!1)};var Ui=N('<li class="note svelte-y1mo0t"><img loading="lazy" class="noteIcon" height="16" width="16" alt="icon"/> <a class="noteLink svelte-y1mo0t" target="_blank" rel="noopener noreferrer"> </a> <div class="spacer svelte-y1mo0t"></div> <div><button class="button svelte-y1mo0t"><!> <!></button> <button><!> <!></button> <!></div></li>');function Hi(t,e){J(e,!0);let n=x(!1),r=x(!1),a=x(null),s=null;const i=p=>{var C;p.target!==s&&p.target!==o(a)&&!((C=o(a))!=null&&C.contains(p.target))&&S(r,!1)};le(()=>(document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}));const l=p=>{try{return`https://external-content.duckduckgo.com/ip3/${new URL(p).host}.ico`}catch{return""}};var c=Ui();c.__focusin=[ji,n],c.__focusout=[Fi,n];var f=E(c),u=D(f,2),d=E(u),v=D(u,4),h=E(v);h.__click=[Ri,e];var g=E(h);me(g,{name:"copy"});var m=D(g,2);nt(m,{children:(p,C)=>{var L=ie("copy link");k(p,L)}});var w=D(h,2);w.__click=[Bi,r],re(w,1,oe(["button","buttonMenu"]),"svelte-y1mo0t");var b=E(w);me(b,{name:"menu"});var _=D(b,2);nt(_,{children:(p,C)=>{var L=ie("show menu");k(p,L)}}),_e(w,p=>S(a,p),()=>o(a));var y=D(w,2);Ii(y,{menu:s,get note(){return e.note},get showMenuUp(){return e.showMenuUp},get shownMenu(){return o(r)},set shownMenu(p){S(r,p,!0)}}),de(p=>{he(f,"src",p),he(u,"tabindex",e.focusHidden?-1:0),he(u,"href",e.note.url),pt(d,e.note.title),re(v,1,oe(["NoteMenuWrapper",{NoteMenuWrapperActive:o(n)}]),"svelte-y1mo0t"),he(h,"tabindex",e.focusHidden?-1:0),he(w,"tabindex",e.focusHidden?-1:0)},[()=>l(e.note.url)]),k(t,c),X()}Se(["focusin","focusout","click"]);const Mt=ce({ref:null}),Ki=(t,e)=>{S(e,!o(e))};var zi=(t,e)=>e("newest"),Vi=(t,e)=>e("oldest"),Wi=(t,e)=>e("AtoZ"),qi=(t,e)=>e("ZtoA"),Yi=N('<div class="orderMenu svelte-1s8zbgy"><button><!> <!></button> <div><button class="menuButton svelte-1s8zbgy">Newest</button> <button class="menuButton svelte-1s8zbgy">Oldest</button> <button class="menuButton svelte-1s8zbgy">A to Z</button> <button class="menuButton svelte-1s8zbgy">Z to A</button></div></div>');function Ji(t,e){J(e,!0);let n=x(!1),r=x(null),a=x(null);const s=b=>{var _;b.target!==o(r)&&!((_=o(r))!=null&&_.contains(b.target))&&S(n,!1)},i=b=>{var _,y;b.target!==o(r)&&b.target!==o(a)&&!((_=o(a))!=null&&_.contains(b.target))&&!((y=o(r))!=null&&y.contains(b.target))&&S(n,!1)};le(()=>(document.addEventListener("click",i),document.addEventListener("focusin",s),()=>{document.removeEventListener("click",i),document.removeEventListener("focusin",s)})),ve(()=>{o(n)&&o(r)?(o(r).style.setProperty("display","flex"),o(r).getBoundingClientRect(),o(r).style.setProperty("opacity","1"),o(r).style.setProperty("transform","scale(1)")):o(r)&&(o(r).style.removeProperty("opacity"),o(r).style.removeProperty("transform"),o(r).getBoundingClientRect(),o(r).addEventListener("transitionend",()=>{!o(n)&&o(r)&&o(r).style.removeProperty("display")},{once:!0}))});const l=b=>{S(n,!1),go(b)};var c=Yi(),f=E(c);f.__click=[Ki,n],re(f,1,oe(["button","buttonMenu"]),"svelte-1s8zbgy");var u=E(f);me(u,{name:"filter"});var d=D(u,2);nt(d,{children:(b,_)=>{var y=ie("show feed order menu");k(b,y)}}),_e(f,b=>S(a,b),()=>o(a));var v=D(f,2);re(v,1,oe(["itemMenu"]),"svelte-1s8zbgy");var h=E(v);h.__click=[zi,l];var g=D(h,2);g.__click=[Vi,l];var m=D(g,2);m.__click=[Wi,l];var w=D(m,2);w.__click=[qi,l],_e(v,b=>S(r,b),()=>o(r)),k(t,c),X()}Se(["click"]);const Xi=(t,e)=>{o(e)&&o(e).scrollTo({top:0,behavior:"smooth"})};var Gi=N('<div class="emptyMessage svelte-1mzngef">No notes found</div>'),Zi=N('<div class="wrapperButtonTop svelte-1mzngef"><button class="buttonTop svelte-1mzngef"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button></div>'),Qi=N('<div class="filter svelte-1mzngef"><div class="searchWrapper svelte-1mzngef"><!></div> <!></div> <div class="wrapperFeed svelte-1mzngef"><div class="wrapperContainer svelte-1mzngef"><div class="feed svelte-1mzngef"><ul class="svelte-1mzngef"></ul> <!></div></div></div> <!>',1);function $i(t,e){J(e,!0);let n=x(null),r=50,a=x(0),s=x(0),i=x(0),l=x(ce([])),c=x(""),f=Z(()=>Jt()?o(n):Mt.ref),u=null,d=null,v=x(!1),h=0;const g=Z(po);ve(()=>{var P;o(c),o(g),(P=o(f))==null||P.scrollTo(0,0)});const m=()=>{if(o(f)){const P=o(f).scrollTop||0;P===0?S(v,!1):!o(v)&&h>P?S(v,!0):o(v)&&h<P&&S(v,!1),h=P}},w=()=>{da(),u||(u=requestAnimationFrame(()=>{var ne;m();const P=((ne=o(f))==null?void 0:ne.scrollTop)||0;S(i,P,!0);const q=Math.ceil(o(a)/r);S(s,Math.floor(P/(r*q))*(r*q)),u=null}))},b=()=>{d||(d=requestAnimationFrame(()=>{var ne;m(),S(a,window.innerHeight-180||0,!0);const P=((ne=o(f))==null?void 0:ne.scrollTop)||0;S(i,P,!0);const q=Math.ceil(o(a)/r);S(s,Math.floor(P/(r*q))*(r*q)),d=null}))};le(()=>{b(),w()}),ve(()=>{var P;return(P=o(f))==null||P.addEventListener("scroll",w),window.addEventListener("resize",b),()=>{var q;(q=o(f))==null||q.removeEventListener("scroll",w),window.removeEventListener("resize",b)}});const _=Z(ho);ve(()=>{const P=Sa(),q=[],ne={};for(let ye=P.length-1;ye>=0;ye--){const fe=P[ye];if(fe&&!(o(g).length&&o(g).some(Xe=>!fe.tags.includes(Xe)))&&!(o(c)&&!(fe.title.toLowerCase().includes(o(c).toLowerCase())||fe.url.toLowerCase().includes(o(c).toLowerCase())||fe.description.toLowerCase().includes(o(c).toLowerCase())))){if(fe.tags)for(const Xe of fe.tags)ne[Xe]?ne[Xe].connections++:ne[Xe]={name:Xe,connections:1};q.push(fe)}}ri(ne),q.sort((ye,fe)=>{if(!ye||!fe)return 0;switch(o(_)){case"newest":return ye.createdAt>fe.createdAt?-1:1;case"oldest":return ye.createdAt<fe.createdAt?-1:1;case"AtoZ":return ye.title.localeCompare(fe.title);case"ZtoA":return fe.title.localeCompare(ye.title);default:return 0}}),S(l,q,!0)});const y=Z(()=>o(l).length*r);let C=Z(()=>{const P=Math.ceil(o(a)/r);let q=Math.floor(o(s)/r);return q=q-Math.min(q,P),o(l).slice(q,q+P*3)}),L=Z(()=>r*Math.ceil(o(a)/r));const T=Z(()=>o(s)-Math.min(o(s),o(L))),O=()=>{o(f)&&o(f).scrollTo({top:0,behavior:"smooth"})};var U=Qi(),F=Y(U),K=E(F),z=E(K);xn(z,{onFocus:O,placeholder:"Search",get value(){return o(c)},set value(P){S(c,P,!0)}});var V=D(K,2);Ji(V,{});var M=D(F,2),I=E(M),A=E(I),H=E(A);Ke(H,23,()=>o(C),P=>P.id,(P,q,ne)=>{const ye=Z(()=>o(ne)*r<o(i)-o(T)-r/2||o(ne)*r>o(i)-o(T)+Math.floor(o(a)/r)*r),fe=Z(()=>(o(ne)+3)*r<o(i)-o(T)-r/2||(o(ne)+3)*r>o(i)-o(T)+Math.floor(o(a)/r)*r);Hi(P,{get focusHidden(){return o(ye)},get showMenuUp(){return o(fe)},get note(){return o(q)}})});var W=D(H,2);{var se=P=>{var q=Gi();k(P,q)};R(W,P=>{o(C).length===0&&Dt()&&P(se)})}_e(I,P=>S(n,P),()=>o(n));var B=D(M,2);{var te=P=>{var q=Zi(),ne=E(q);ne.__click=[Xi,f];var ye=E(ne);nt(ye,{children:(Xe,cc)=>{var xa=ie("top");k(Xe,xa)}});var fe=D(ye,2);Te(fe,()=>({"--size":"22px"})),me(fe.lastChild,{name:"up"}),k(P,q)};R(B,P=>{o(v)&&P(te)})}de(P=>{zt(A,`min-height: ${P??""}px`),zt(H,`transform: translateY(${o(T)??""}px);`)},[()=>Math.max((o(y)>o(a),o(y)),0)]),k(t,U),X()}Se(["click"]);var el=N('<!> <div class="content svelte-cu0ar8"><!></div>',1);function tl(t){var e=el(),n=Y(e);hi(n,{});var r=D(n,2),a=E(r);$i(a,{}),k(t,e)}var st=(t=>(t.Light="light",t.System="system",t.Dark="dark",t))(st||{});let Aa=x(ce(localStorage.getItem("colorScheme")||"system"));const nl=t=>{localStorage.setItem("colorScheme",t),t==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.dataset.colorScheme="dark":document.documentElement.dataset.colorScheme="light":document.documentElement.dataset.colorScheme=t,S(Aa,t,!0)},rl=()=>o(Aa);var al=N('<div class="wrapper svelte-f3jwyy"><fieldset class="switcher svelte-f3jwyy"><legend class="vh svelte-f3jwyy">Color Scheme</legend> <input id="light" type="radio" aria-label="Light"/> <label for="light" title="Light" aria-label="Light"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="system" type="radio" aria-label="System"/> <label for="system" title="System" aria-label="System"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="dark" type="radio" aria-label="Dark"/> <label for="dark" title="Dark" aria-label="Dark"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <div class="wrapSwitcherStatus svelte-f3jwyy"><div class="switcherStatus svelte-f3jwyy"></div></div></fieldset></div>');function sl(t,e){J(e,!0);const n=Z(rl),r=w=>{const b=w.target.value;nl(b)},a="color-scheme-switcher";var s=al(),i=E(s),l=D(E(i),2);re(l,1,oe(["vh","input"]),"svelte-f3jwyy"),he(l,"name",a),l.__change=r;var c=D(l,2);re(c,1,oe(["switcherButton","light"]),"svelte-f3jwyy");var f=E(c);Te(f,()=>({"--size":"20px"})),me(f.lastChild,{name:"sun"});var u=D(c,2);re(u,1,oe(["vh","input"]),"svelte-f3jwyy"),he(u,"name",a),u.__change=r;var d=D(u,2);re(d,1,oe(["switcherButton","system"]),"svelte-f3jwyy");var v=E(d);Te(v,()=>({"--size":"14px"})),me(v.lastChild,{name:"a"});var h=D(d,2);re(h,1,oe(["vh","input"]),"svelte-f3jwyy"),he(h,"name",a),h.__change=r;var g=D(h,2);re(g,1,oe(["switcherButton","dark"]),"svelte-f3jwyy");var m=E(g);return Te(m,()=>({"--size":"20px"})),me(m.lastChild,{name:"moon"}),de(()=>{$t(l,st.Light),en(l,o(n)===st.Light),$t(u,st.System),en(u,o(n)===st.System),$t(h,st.Dark),en(h,o(n)===st.Dark)}),k(t,s),X({handleChange:r})}Se(["change"]);const On=(t,e,n,r=new Set,a={})=>{var s,i;for(const l of t.children)if(l.tagName==="DT"){const c=l.querySelector(":scope > A"),f=l.querySelector(":scope > H3");if(c){const u=c.getAttribute("href"),d=c.textContent||"unknown";if(!u)return n;const v=e.find(h=>h.toLowerCase()==="notes bar")?e.filter(h=>h.toLowerCase()!=="notes bar"):["other"];if(a[u])a[u].tags=[...new Set([...a[u].tags,...v])];else{const h={id:Bt(),url:u,title:d,description:"",tags:v.length>0?v:[],updatedAt:Date.now(),createdAt:Date.now()};a[h.url]=h,n.push(h)}}else if(f){const u=(s=f.textContent)==null?void 0:s.trim();if(u&&((i=f.nextElementSibling)==null?void 0:i.tagName)==="DL"){const d=[...e];d.push(u);const v=f.nextElementSibling;r.has(v)||(r.add(v),On(v,d,n,r,a))}}}else l.tagName!=="DL"&&l.children.length>0&&(r.has(l)||(r.add(l),On(l,[...e],n,r,a)));return n},ol=async t=>{const e=await t.text(),a=new DOMParser().parseFromString(e,"text/html").querySelector("DL");return a?On(a,[],[]):[]},il=t=>{const e=Math.floor(Date.now()/1e3),n={};t.forEach(a=>{const s=a.tags||["Imported"];if(s.length===0){n.ROOT||(n.ROOT=[]),n.ROOT.push(a);return}s.forEach(i=>{n[i]||(n[i]=[]),n[i].push(a)})});let r=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${e}" LAST_MODIFIED="${e}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(n).forEach(a=>{a!=="ROOT"&&a!=="other"&&(r+=`
	<DT><H3 ADD_DATE="${e}" LAST_MODIFIED="${e}">${a}</H3>
	<DL><p>`,n[a].forEach(s=>{const i=s.title.replace(/"/g,"&quot;");r+=`
		<DT><A HREF="${s.url}" ADD_DATE="${Math.floor(s.createdAt/1e3)||e}">${i}</A>`}),r+=`
	</DL><p>`)}),n.ROOT&&n.ROOT.forEach(a=>{const s=a.title.replace(/"/g,"&quot;");r+=`
	<DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||e}">${s}</A>`}),r+=`
</DL><p>`,n.other&&n.other.forEach(a=>{const s=a.title.replace(/"/g,"&quot;");r+=`
	<DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdAt/1e3)||e}">${s}</A>`}),r+="</DL><p>",r},ll=async()=>{if(navigator.storage&&navigator.storage.persist)try{return await navigator.storage.persisted()}catch{return!1}return!1};async function cl(){if(navigator.storage&&navigator.storage.persist)if(await navigator.storage.persisted())console.log("Already persisted in PWA context");else{const e=await navigator.storage.persist();console.log("Persist in PWA:",e)}}var ul=N('<button type="button"><!></button>');function ke(t,e){let n=G(e,"type",3,"standard"),r=G(e,"fullWidth",3,!1);var a=ul();a.__click=function(...i){var l;(l=e.onClick)==null||l.apply(this,i)};var s=E(a);Je(s,()=>e.children??Bn),de(()=>re(a,1,oe(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:r()}]),"svelte-h0mt7s")),k(t,a)}Se(["click"]);const dl=()=>{je("import")},fl=()=>{je("export")},vl=()=>{je("clearStorage")};var hl=N('<div class="optMenu svelte-qj5tot"><!></div>'),gl=N("<span> </span>"),pl=N('<div class="svelte-qj5tot"><!> <ul class="svelte-qj5tot"><li class="svelte-qj5tot"><button class="button svelte-qj5tot"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-qj5tot">import data</span></button></li> <li class="svelte-qj5tot"><button class="button svelte-qj5tot"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-qj5tot">export data</span></button></li> <li class="svelte-qj5tot"><button class="button svelte-qj5tot"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-qj5tot">clear storage</span></button></li></ul> <!> <div class="version svelte-qj5tot"><!></div></div>');function _l(t,e){J(e,!0);let n=x("");le(()=>{const y=new AbortController;return fetch("/build-metadata.json",{signal:y.signal}).then(p=>p.json()).then(p=>{S(n,`${p.buildHash}`)}),()=>{y.abort()}});var r=pl(),a=E(r);sl(a,{});var s=D(a,2),i=E(s),l=E(i);l.__click=[dl];var c=E(l);Te(c,()=>({"--size":"20px"})),me(c.lastChild,{name:"import"});var f=D(i,2),u=E(f);u.__click=[fl];var d=E(u);Te(d,()=>({"--size":"20px"})),me(d.lastChild,{name:"export"});var v=D(f,2),h=E(v);h.__click=[vl];var g=E(h);Te(g,()=>({"--size":"20px"})),me(g.lastChild,{name:"trash"});var m=D(s,2);Ks(m,ll,y=>{},(y,p)=>{var C=Ce(),L=Y(C);{var T=O=>{var U=hl(),F=E(U);ke(F,{get onClick(){return cl},children:(K,z)=>{var V=ie("Enable persisted storage");k(K,V)},$$slots:{default:!0}}),k(O,U)};R(L,O=>{o(p)||O(T)})}k(y,C)});var w=D(m,2),b=E(w);{var _=y=>{var p=gl(),C=E(p);de(L=>pt(C,`version: 0.0.1 build_date: "${L??""}" build_hash:
				${o(n)??""}`),[()=>new Date(1752764857774).toISOString().replaceAll("T"," ").replace(/\..*/,"")]),k(y,p)};R(b,y=>{o(n)&&y(_)})}k(t,r),X()}Se(["click"]);function ml(t,e){J(e,!1);const n=()=>{oa()},r=({title:a,url:s,description:i,tags:l})=>{bi({title:a,url:s,description:i,tags:l.map(c=>c.trim())}),n()};Yt(),Pa(t,{onSubmit:r}),X()}var yl=N('<div class="loader svelte-1ygr46m"></div>');function Xt(t){var e=yl();k(t,e)}const pr=async(t,e)=>{const n=t.target;!n.files||n.files.length===0||await e(n.files[0])};var wl=N('<div class="mobileContainer svelte-1n1lt8i"><!></div> <input type="file" accept=".json, .html" style="display: none;"/>',1),Sl=N('<div class="desktopContainer svelte-1n1lt8i"><div class="desktopButtonContainer svelte-1n1lt8i"><!></div> <div role="button" tabindex="-1"><div tabindex="-1" class="dropzone-content svelte-1n1lt8i"><p class="svelte-1n1lt8i">Drag and drop your file here</p> <p class="svelte-1n1lt8i">or</p></div> <input type="file" accept=".json, .html" style="display: none;"/></div></div>'),bl=N('<p class="message svelte-1n1lt8i">Select a file to import your notes</p> <!>',1),El=N('<p class="message svelte-1n1lt8i">Importing data...</p> <!>',1),kl=N('<p class="message success svelte-1n1lt8i">Data imported successfully!</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),Cl=N('<p class="message error svelte-1n1lt8i">Something went wrong</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),Tl=N('<div class="content svelte-1n1lt8i"><!></div>');function Dl(t,e){J(e,!0);let n=x("idle"),r=x(null),a=x(!1),s=x(null);const i=()=>{_t()};ve(()=>{Ee(o(n)==="loading")}),le(()=>(o(r)&&o(r).addEventListener("cancel",_=>{_.preventDefault(),_.stopImmediatePropagation(),_.stopPropagation()}),()=>{Ee(!1)}));const l=async _=>{const y=await _.text(),p=JSON.parse(y),C=[];if(!p.notes)throw new Error("Invalid import file format");for(const L of Object.values(p.notes))L&&C.push(L);await gr(C)},c=async _=>{S(n,"loading");try{if(_.name.endsWith(".json"))await l(_);else if(_.name.endsWith(".html"))await gr(await ol(_));else throw new Error("Unsupported file format. Please upload a JSON or HTML file.");S(n,"success")}catch(y){console.error("Error processing file:",y),S(n,"error")}},f=()=>{var _;(_=o(r))==null||_.click()},u=_=>{_.preventDefault(),_.stopPropagation(),S(a,!0)},d=_=>{_.preventDefault(),_.stopPropagation(),S(a,!1)},v=_=>{_.preventDefault(),_.stopPropagation(),S(a,!0)},h=async _=>{var p;if(_.preventDefault(),_.stopPropagation(),S(a,!1),!((p=_.dataTransfer)!=null&&p.files)||_.dataTransfer.files.length===0)return;const y=_.dataTransfer.files[0];if(y.type!=="application/json"&&y.type!=="text/html"){S(n,"error");return}await c(y)};var g=Tl(),m=E(g);{var w=_=>{var y=bl(),p=D(Y(y),2);{var C=T=>{var O=wl(),U=Y(O),F=E(U);ke(F,{onClick:f,children:(z,V)=>{var M=ie("Select File");k(z,M)},$$slots:{default:!0}});var K=D(U,2);K.__change=[pr,c],_e(K,z=>S(r,z),()=>o(r)),k(T,O)},L=T=>{var O=Sl(),U=E(O),F=E(U);ke(F,{onClick:f,children:(V,M)=>{var I=ie("Select File");k(V,I)},$$slots:{default:!0}});var K=D(U,2),z=D(E(K),2);z.__change=[pr,c],_e(z,V=>S(r,V),()=>o(r)),_e(K,V=>S(s,V),()=>o(s)),de(()=>re(K,1,oe(["dropzone",{active:o(a)}]),"svelte-1n1lt8i")),He("dragenter",K,u),He("dragover",K,v),He("dragleave",K,d),He("drop",K,h),k(T,O)};R(p,T=>{Jt()?T(C):T(L,!1)})}k(_,y)},b=(_,y)=>{{var p=L=>{var T=El(),O=D(Y(T),2);Xt(O),k(L,T)},C=(L,T)=>{{var O=F=>{var K=kl(),z=D(Y(K),2),V=E(z);ke(V,{onClick:i,children:(M,I)=>{var A=ie("close");k(M,A)},$$slots:{default:!0}}),k(F,K)},U=(F,K)=>{{var z=V=>{var M=Cl(),I=D(Y(M),2),A=E(I);ke(A,{onClick:()=>{S(n,"idle")},children:(H,W)=>{var se=ie("Try Again");k(H,se)},$$slots:{default:!0}}),k(V,M)};R(F,V=>{o(n)==="error"&&V(z)},K)}};R(L,F=>{o(n)==="success"?F(O):F(U,!1)},T)}};R(_,L=>{o(n)==="loading"?L(p):L(C,!1)},y)}};R(m,_=>{o(n)==="idle"?_(w):_(b,!1)})}k(t,g),X()}Se(["change"]);const Ll=(t,e,n)=>{e(t.target.value),n.onChange(e())};var Pl=N('<input type="radio"/> <label> </label>',1),Al=N('<div class="wrapper svelte-1065asd"><fieldset class="switcher svelte-1065asd"><!> <div class="wrapSwitcherStatus svelte-1065asd"><div class="switcherStatus svelte-1065asd"></div></div></fieldset></div>');function xl(t,e){const n=js();J(e,!0);let r=G(e,"value",7);const a=`switcher-${n}`;var s=Al(),i=E(s),l=E(i);Ke(l,17,()=>e.items,u=>u.title,(u,d)=>{var v=Pl(),h=Y(v);re(h,1,oe(["vh","input"]),"svelte-1065asd"),h.__change=[Ll,r,e];var g=D(h,2);re(g,1,oe(["switcherButton"]),"svelte-1065asd");var m=E(g);de(()=>{he(h,"id",`${o(d).title}-${n}`),he(h,"name",a),$t(h,o(d).value),en(h,o(d).value===r()),he(h,"aria-label",o(d).title),he(g,"for",`${o(d).title}-${n}`),he(g,"title",o(d).title),he(g,"aria-label",o(d).title),pt(m,o(d).value)}),k(u,v)});var c=D(l,2),f=E(c);de(u=>zt(f,u),[()=>`transform: translateX(${e.items.findIndex(u=>u.value===r())*100}%)`]),k(t,s),X()}Se(["change"]);var Ol=N('<p class="message svelte-8vhup1">Export items</p> <div class="format-switcher svelte-8vhup1"><!> <p class="format-description svelte-8vhup1"><!></p></div> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Nl=N('<p class="message svelte-8vhup1">Exporting data...</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Ml=N('<p class="message svelte-8vhup1">Items exported successfully!</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Il=N('<div class="content svelte-8vhup1"><!></div>');function Bl(t,e){J(e,!0);let n=x("idle"),r=x("html");const a=()=>{_t()};ve(()=>{Ee(o(n)==="loading")}),le(()=>()=>{Ee(!1)});const s=async()=>{S(n,"loading"),setTimeout(async()=>{if(o(r)==="json")await Ti().finally(()=>{S(n,"success")});else try{const u=il(ni()),d=new Blob([u],{type:"text/html"}),v=URL.createObjectURL(d),h=document.createElement("a");h.href=v,h.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(v),S(n,"success")}catch(u){console.error("Error exporting as HTML:",u),S(n,"success")}},0)};var i=Il(),l=E(i);{var c=u=>{var d=Ol(),v=D(Y(d),2),h=E(v);xl(h,{items:[{title:"HTML",value:"html"},{title:"JSON",value:"json"}],get value(){return o(r)},onChange:p=>{S(r,p,!0)}});var g=D(h,2),m=E(g);{var w=p=>{var C=ie("JSON format (App compatible, a faster format)");k(p,C)},b=p=>{var C=ie("HTML format (Browser compatible)");k(p,C)};R(m,p=>{o(r)==="json"?p(w):p(b,!1)})}var _=D(v,2),y=E(_);ke(y,{onClick:s,children:(p,C)=>{var L=ie("Export");k(p,L)},$$slots:{default:!0}}),k(u,d)},f=(u,d)=>{{var v=g=>{var m=Nl(),w=D(Y(m),2),b=E(w);Xt(b),k(g,m)},h=(g,m)=>{{var w=b=>{var _=Ml(),y=D(Y(_),2),p=E(y);ke(p,{onClick:a,children:(C,L)=>{var T=ie("Close");k(C,T)},$$slots:{default:!0}}),k(b,_)};R(g,b=>{o(n)==="success"&&b(w)},m)}};R(u,g=>{o(n)==="loading"?g(v):g(h,!1)},d)}};R(l,u=>{o(n)==="idle"?u(c):u(f,!1)})}k(t,i),X()}var Rl=N('<div class="content svelte-9hh95f"><p class="message svelte-9hh95f">use app</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div> <div class="buttonContainerItem svelte-9hh95f"><!></div></div></div>');function jl(t,e){J(e,!0);let n=x("idle");const r=()=>{S(n,"loading"),je("sign")},a=async()=>{S(n,"loading"),await Di(),Ee(!1),_t()};ve(()=>{Ee(o(n)==="idle"||o(n)==="loading")}),le(()=>(Ee(!0),()=>{Ee(!1)}));var s=Rl(),i=D(E(s),2),l=E(i),c=E(l);ke(c,{onClick:r,fullWidth:!0,children:(d,v)=>{var h=ie("with account");k(d,h)},$$slots:{default:!0}});var f=D(l,2),u=E(f);ke(u,{onClick:a,fullWidth:!0,type:"secondary",children:(d,v)=>{var h=ie("without account");k(d,h)},$$slots:{default:!0}}),k(t,s),X()}var Fl=N('<div class="content svelte-9hh95f"><p class="message svelte-9hh95f">sign in / sign up</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div> <div class="buttonContainerItem svelte-9hh95f"><!></div></div></div>');function Ul(t,e){J(e,!1);const n=async()=>{je("signin")},r=async()=>{je("signup")};le(()=>(Ee(!0),et(!0),()=>{et(!1)})),Yt();var a=Fl(),s=D(E(a),2),i=E(s),l=E(i);ke(l,{onClick:n,fullWidth:!0,children:(u,d)=>{var v=ie("sign in");k(u,v)},$$slots:{default:!0}});var c=D(i,2),f=E(c);ke(f,{onClick:r,fullWidth:!0,children:(u,d)=>{var v=ie("sign up");k(u,v)},$$slots:{default:!0}}),k(t,a),X()}var Ue=(t=>(t[t.Signup=0]="Signup",t[t.SignupError=1]="SignupError",t))(Ue||{}),Hl=N('<p class="message svelte-9hh95f">signup</p> <!>',1),Kl=N('<p class="message svelte-9hh95f">error signup</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),zl=N('<div class="content svelte-9hh95f"><!></div>');function Vl(t,e){J(e,!0);let n=x(ce(Ue.Signup));const r=async()=>{S(n,Ue.Signup,!0);try{const c=await fetch("/api/signup/start",{method:"post"}).then(d=>d.json()),f=crypto.getRandomValues(new Uint8Array(32)),u={challenge:tr(er(c.challenge)),rp:{id:"localhost",name:"notes"},user:{id:f,name:"notes_account",displayName:"notes_account"},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],authenticatorSelection:{userVerification:"required"},timeout:6e4,attestation:"none"};try{const d=await navigator.credentials.create({publicKey:u}),v=d.response;if(console.log(d),d){const h={clientKey:f,challenge:c.challenge,id:d.id,rawId:$e(d.rawId),type:d.type,response:{clientDataJSON:$e(v.clientDataJSON),attestationObject:$e(v.attestationObject)}},g=await fetch("/api/signup/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)});if(g.status!==200){S(n,Ue.SignupError,!0);return}const m=await g.json();await La({credentialId:new Uint8Array(d.rawId),clientKey:f,serverKey:new Uint8Array(Rt(m.serverKey))}),Ee(!1),_t()}else throw new Error}catch(d){S(n,Ue.SignupError,!0),console.log(d)}}catch(c){S(n,Ue.SignupError,!0),console.log(c)}};le(()=>(Ee(!0),et(!1),r(),()=>{et(!1)})),ve(()=>{et(o(n)!==Ue.Signup)});var a=zl(),s=E(a);{var i=c=>{var f=Hl(),u=D(Y(f),2);Xt(u),k(c,f)},l=(c,f)=>{{var u=d=>{var v=Kl(),h=D(Y(v),2),g=E(h),m=E(g);ke(m,{onClick:()=>r(),fullWidth:!0,children:(w,b)=>{var _=ie("try again");k(w,_)},$$slots:{default:!0}}),k(d,v)};R(c,d=>{o(n)===Ue.SignupError&&d(u)},f)}};R(s,c=>{o(n)===Ue.Signup?c(i):c(l,!1)})}k(t,a),X()}var Me=(t=>(t[t.Signin=0]="Signin",t[t.SigninError=1]="SigninError",t))(Me||{}),Wl=N('<p class="message svelte-9hh95f">signin</p> <!>',1),ql=N('<p class="message svelte-9hh95f">error signin</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),Yl=N('<div class="content svelte-9hh95f"><!></div>');function Jl(t,e){J(e,!0);let n=x(ce(Me.Signin));const r=async()=>{S(n,Me.Signin,!0);try{const c=await fetch("/api/signin/start",{method:"post"}).then(u=>u.json()),f={challenge:tr(er(c.challenge)),timeout:6e4,rpId:"localhost",userVerification:"required"};try{const u=await navigator.credentials.get({publicKey:f}),d=u.response;if(u){const v={challenge:c.challenge,id:u.id,rawId:$e(u.rawId),type:u.type,response:{authenticatorData:$e(d.authenticatorData),clientDataJSON:$e(d.clientDataJSON),signature:$e(d.signature)}},h=await fetch("/api/signin/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(h.status!==200){S(n,Me.SigninError,!0);return}const g=await h.json();if(console.log("responseData: ",g),!g.success||!g.serverKey){console.error("Signin failed: ",g),S(n,Me.SigninError,!0);return}if(!d.userHandle){S(n,Me.SigninError,!0);return}const m=g.serverKey,w=d.userHandle;await La({credentialId:new Uint8Array(u.rawId),clientKey:new Uint8Array(w),serverKey:new Uint8Array(Rt(m))}),Ee(!1),_t()}else throw new Error}catch(u){S(n,Me.SigninError,!0),console.log(u)}}catch(c){S(n,Me.SigninError,!0),console.log(c)}};le(()=>(Ee(!0),et(!1),r(),()=>{et(!1)})),ve(()=>{et(o(n)!==Me.Signin)});var a=Yl(),s=E(a);{var i=c=>{var f=Wl(),u=D(Y(f),2);Xt(u),k(c,f)},l=(c,f)=>{{var u=d=>{var v=ql(),h=D(Y(v),2),g=E(h),m=E(g);ke(m,{onClick:()=>r(),fullWidth:!0,children:(w,b)=>{var _=ie("try again");k(w,_)},$$slots:{default:!0}}),k(d,v)};R(c,d=>{o(n)===Me.SigninError&&d(u)},f)}};R(s,c=>{o(n)===Me.Signin?c(i):c(l,!1)})}k(t,a),X()}var Xl=N('<p class="message svelte-49o1d">Are you sure you want to clear the store?</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),Gl=N('<p class="message svelte-49o1d">clearing store...</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),Zl=N('<p class="message svelte-49o1d">store cleared</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),Ql=N('<div class="content svelte-49o1d"><!></div>');function $l(t,e){J(e,!0);let n=x("idle");const r=()=>{_t()};ve(()=>{Ee(o(n)==="loading")}),le(()=>()=>{Ee(!1)});const a=()=>{S(n,"loading"),Ci().finally(()=>{S(n,"success")})};var s=Ql(),i=E(s);{var l=f=>{var u=Xl(),d=D(Y(u),2),v=E(d);ke(v,{onClick:a,type:"dangerous",children:(h,g)=>{var m=ie("Clear store");k(h,m)},$$slots:{default:!0}}),k(f,u)},c=(f,u)=>{{var d=h=>{var g=Gl(),m=D(Y(g),2),w=E(m);Xt(w),k(h,g)},v=(h,g)=>{{var m=w=>{var b=Zl(),_=D(Y(b),2),y=E(_);ke(y,{onClick:r,children:(p,C)=>{var L=ie("Close");k(p,L)},$$slots:{default:!0}}),k(w,b)};R(h,w=>{o(n)==="success"&&w(m)},g)}};R(f,h=>{o(n)==="loading"?h(d):h(v,!1)},u)}};R(i,f=>{o(n)==="idle"?f(l):f(c,!1)})}k(t,s),X()}var ec=N('<div class="svelte-t4bw1y"><!></div>');function Fe(t,e){J(e,!0);let n=x(null);le(()=>{o(n)&&(o(n).getBoundingClientRect(),o(n).style.opacity="1")});var r=ec(),a=E(r);Je(a,()=>e.children),_e(r,s=>S(n,s),()=>o(n)),k(t,r),X()}const _r=(t,e=Bn)=>{var n=Ce(),r=Y(n);{var a=i=>{Fe(i,{children:(l,c)=>{_l(l,{})},$$slots:{default:!0}})},s=(i,l)=>{{var c=u=>{Fe(u,{children:(d,v)=>{ml(d,{})},$$slots:{default:!0}})},f=(u,d)=>{{var v=g=>{Fe(g,{children:(m,w)=>{Dl(m,{})},$$slots:{default:!0}})},h=(g,m)=>{{var w=_=>{Fe(_,{children:(y,p)=>{Bl(y,{})},$$slots:{default:!0}})},b=(_,y)=>{{var p=L=>{Fe(L,{children:(T,O)=>{$l(T,{})},$$slots:{default:!0}})},C=(L,T)=>{{var O=F=>{Fe(F,{children:(K,z)=>{jl(K,{})},$$slots:{default:!0}})},U=(F,K)=>{{var z=M=>{Fe(M,{children:(I,A)=>{Ul(I,{})},$$slots:{default:!0}})},V=(M,I)=>{{var A=W=>{Fe(W,{children:(se,B)=>{Vl(se,{})},$$slots:{default:!0}})},H=(W,se)=>{{var B=te=>{Fe(te,{children:(P,q)=>{Jl(P,{})},$$slots:{default:!0}})};R(W,te=>{e()==="signin"&&te(B)},se)}};R(M,W=>{e()==="signup"?W(A):W(H,!1)},I)}};R(F,M=>{e()==="sign"?M(z):M(V,!1)},K)}};R(L,F=>{e()==="start"?F(O):F(U,!1)},T)}};R(_,L=>{e()==="clearStorage"?L(p):L(C,!1)},y)}};R(g,_=>{e()==="export"?_(w):_(b,!1)},m)}};R(u,g=>{e()==="import"?g(v):g(h,!1)},d)}};R(i,u=>{e()==="newNote"?u(c):u(f,!1)},l)}};R(r,i=>{e()==="settings"?i(a):i(s,!1)})}k(t,n)};var tc=N("<!> <!>",1);function nc(t,e){J(e,!0);let n=Z(la),r=Z(Dt);var a=tc(),s=Y(a);{var i=u=>{tl(u)};R(s,u=>{o(r)&&u(i)})}var l=D(s,2);{var c=u=>{var d=Ce(),v=Y(d);Ke(v,17,()=>o(n),zs,(h,g,m)=>{const w=Z(()=>{var b;return m!==o(n).length-1&&!!((b=o(n)[m+1])!=null&&b.shown)});hr(h,{get shown(){return o(g).shown},get hidden(){return o(w)},isLastDialog:m===0,children:(b,_)=>{_r(b,()=>o(g).page)},$$slots:{default:!0}})}),k(u,d)},f=(u,d)=>{{var v=h=>{const g=Z(()=>o(n).length===1);hr(h,{onBack:()=>ia(),get shown(){return o(n)[o(n).length-1].shown},hidden:!1,get isLastDialog(){return o(g)},children:(m,w)=>{_r(m,()=>o(n)[o(n).length-1].page)},$$slots:{default:!0}})};R(u,h=>{o(n).length>0&&h(v)},d)}};R(l,u=>{Jt()?u(c):u(f,!1)})}k(t,a),X()}function rc(){const t=navigator.userAgent;if(!(/iPad|iPhone|iPod/.test(t)&&!window.MSStream))return!1;const n=/Safari/.test(t)&&!/Chrome/.test(t)&&!/CriOS/.test(t)&&!/FxiOS/.test(t),r=/Macintosh/.test(t)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1;return!!n||!!r}const ac=rc();function sc(t,e){J(e,!1),le(()=>{wn(),document.addEventListener("focusin",wn),document.addEventListener("focusout",wn),document.addEventListener("touchmove",function(n){Xn()&&ac&&n.preventDefault()},{passive:!1})}),Yt(),X()}function oc(t,e){J(e,!1);let n=0;le(()=>{document.querySelector("div"),document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const s=r.touches[0].clientX-n;(n<50&&s>0||n>window.innerWidth-50&&s<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Yt(),X()}var ic=N('<!> <!> <!> <main><!> <div class="container svelte-ngsolt"><!></div></main>',1);function lc(t,e){J(e,!0),le(async()=>{await new Promise(h=>setTimeout(h,100)),await Ls(),ge.working=!0});let n=Z(()=>qe().length>0),r=Z(Dt);var a=ic(),s=Y(a);oc(s,{});var i=D(s,2);sc(i,{});var l=D(i,2);oo(l,{});var c=D(l,2),f=E(c);{var u=h=>{ko(h,{})};R(f,h=>{o(r)&&h(u)})}var d=D(f,2),v=E(d);nc(v,{}),_e(c,h=>Mt.ref=h,()=>Mt==null?void 0:Mt.ref),de(()=>{zt(c,`--swiping-ratio: ${ge.swipingRatio}; --transition-timing-default: ${ge.duration}s;`),re(c,1,oe(["main",{isAnimationOn:ge.working&&!ge.isSwiping,open:o(n)}]),"svelte-ngsolt")}),k(t,a),X()}Fs(lc,{target:document.getElementById("app")});
