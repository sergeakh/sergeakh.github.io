import{o as P,p as W,A as g,u as X,T as z,g as c,a as A,f as y,h as E,i as L,c as v,e as D,U as Y,k as M,l as h,V as K,m as N,n as x,q,b as u,d as Z,W as V,X as H,Y as R,t as T,v as Q,Z as U}from"./index-F4UA7Zx-.js";const $=({getDialog:l,onOpen:t,onStartClose:a,onClose:i})=>{const d=e=>{e.preventDefault(),a()},s=()=>{i==null||i()};P(()=>{const e=l();return e==null||e.addEventListener("cancel",d),e==null||e.addEventListener("close",s),()=>{e==null||e.removeEventListener("cancel",d),e==null||e.removeEventListener("close",s)}}),P(()=>{const e=l();e==null||e.showModal(),e==null||e.getBoundingClientRect(),t()})};var ee=(l,t)=>{t.onStartBack()},te=y('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),ae=(l,t)=>{t.onStartClose()},ne=y('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),se=y('<dialog><div class="dialogInner svelte-isq3u8"><div class="header svelte-isq3u8"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function le(l,t){W(t,!0);let a=g(t,"blockedDialog",3,!1),i=g(t,"hiddenDialog",3,!1),d=g(t,"isDesktopAnimationOff",3,!1),s=A(null),e=A(null);$({getDialog:()=>c(s),onOpen:t.onOpen,onStartClose:t.onStartClose,onClose:t.onClose}),X(()=>{var n,o;t.stateDialog==="closing"&&(z.working?(n=c(s))==null||n.addEventListener("transitionend",()=>{var r;(r=c(s))==null||r.close()},{once:!0}):(o=c(s))==null||o.close())});var k=se(),f=E(k),m=v(f),_=v(m),b=v(_),I=v(b);{var C=n=>{var o=te();x(o,1,q(["navigateButton","buttonBack"]),"svelte-isq3u8"),o.__click=[ee,t];var r=v(o);V(r,()=>({"--size":"20px"})),H(r.lastChild,{name:"back"});var S=D(r,2);R(S,{children:(O,J)=>{var w=T("back");u(O,w)}}),u(n,o)};L(I,n=>{(!(a()||i())||a()&&t.unBlockedBack)&&t.onStartBack&&n(C)})}var B=D(b,2),j=v(B);{var p=n=>{var o=ne();x(o,1,q(["navigateButton","buttonClose"]),"svelte-isq3u8"),o.__click=[ae,t];var r=v(o);V(r,()=>({"--size":"20px"})),H(r.lastChild,{name:"close"});var S=D(r,2);R(S,{children:(O,J)=>{var w=T("close");u(O,w)}}),u(n,o)};L(j,n=>{a()||i()||n(p)})}var F=D(_,2);Y(F,()=>t.children),M(m,n=>h(e,n),()=>c(e)),M(f,n=>h(s,n),()=>c(s));var G=D(f,2);K(G,{get dialog(){return c(s)},get dialogInner(){return c(e)},get onClose(){return t.onStartClose}}),N(()=>x(f,1,q([{open:t.stateDialog==="open",isAnimationOn:z.working,isDesktopAnimationOff:d(),hiddenDialog:i()}]),"svelte-isq3u8")),u(l,k),Z()}Q(["click"]);const oe=({onStartClose:l,onClose:t})=>{let a=A("close");return{get state(){return c(a)},set state(e){h(a,e,!0)},handleStartClose:(e=!1)=>{e||(h(a,"closing"),l==null||l())},handleOpen:()=>{h(a,"open")},handleClose:()=>{h(a,"close"),t==null||t()}}};function re(l,t){W(t,!0);let a=g(t,"blockedDialog",3,!1),i=g(t,"hiddenDialog",3,!1),d=g(t,"onStartClose",3,()=>{}),s=g(t,"onClose",3,()=>{}),e=oe({onStartClose:d(),onClose:s()});X(()=>{e.state==="close"&&t.shownDialog?e.state="opening":e.state==="open"&&!t.shownDialog&&e.handleStartClose(a())});var k=U(),f=E(k);{var m=_=>{le(_,{get stateDialog(){return e.state},get blockedDialog(){return a()},get unBlockedBack(){return t.unBlockedBack},get hiddenDialog(){return i()},get onOpen(){return e.handleOpen},get onStartBack(){return t.onStartBack},onStartClose:()=>{e.handleStartClose(a())},get onClose(){return e.handleClose},children:(b,I)=>{var C=U(),B=E(C);Y(B,()=>t.children),u(b,C)},$$slots:{default:!0}})};L(f,_=>{e.state!=="close"&&_(m)})}u(l,k),Z()}export{re as default};
