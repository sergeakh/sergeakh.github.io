import{o as P,p as Q,Z as h,u as R,a8 as H,a as s,b as L,f as M,j as A,i as I,c as v,h as k,aa as Z,m as z,n as f,ad as X,q as Y,a7 as $,Q as ee,r as y,v as E,d as u,e as F,ae as te,M as V,N as j,V as p,t as q,x as ae,l as N}from"./index-B7-fUZq5.js";const ne=({getDialog:l,onOpen:e,onStartClose:a,onClose:d})=>{const r=t=>{t.preventDefault(),a()},n=()=>{d?.()};P(()=>{const t=l();return t?.addEventListener("cancel",r),t?.addEventListener("close",n),()=>{t?.removeEventListener("cancel",r),t?.removeEventListener("close",n)}}),P(()=>{const t=l();t?.showModal(),t?.getBoundingClientRect(),e()})};var oe=(l,e)=>{e.onStartBack()},le=M('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),se=(l,e)=>{e.onStartClose()},ie=M('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),de=M('<dialog><div class="dialogInner svelte-19g9dt6"><div class="header svelte-19g9dt6"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function re(l,e){Q(e,!0);let a=h(e,"blockedDialog",3,!1),d=h(e,"hiddenDialog",3,!1),r=h(e,"isDesktopAnimationOff",3,!1),n=L(null),t=L(null);ne({getDialog:()=>s(n),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose}),R(()=>{e.stateDialog==="closing"&&(H.working?s(n)?.addEventListener("transitionend",()=>{s(n)?.close()},{once:!0}):s(n)?.close())});const C=ee(te);var D=de(),c=A(D),_=v(c),m=v(_),S=v(m),b=v(S);{var B=o=>{var i=le();y(i,1,E(["navigateButton","buttonBack"]),"svelte-19g9dt6"),i.__click=[oe,e];var g=v(i);V(g,()=>({"--size":"20px"})),j(g.lastChild,{name:"back"});var O=k(g,2);p(O,{children:(w,W)=>{var x=q("back");u(w,x)}}),u(o,i)};I(b,o=>{(!(a()||d())||a()&&e.unBlockedBack)&&e.onStartBack&&o(B)})}var G=k(S,2),J=v(G);{var K=o=>{var i=ie();y(i,1,E(["navigateButton","buttonClose"]),"svelte-19g9dt6"),i.__click=[se,e];var g=v(i);V(g,()=>({"--size":"20px"})),j(g.lastChild,{name:"close"});var O=k(g,2);p(O,{children:(w,W)=>{var x=q("close");u(w,x)}}),u(o,i)};I(J,o=>{a()||d()||o(K)})}var T=k(m,2);Z(T,()=>e.children),z(_,o=>f(t,o),()=>s(t)),z(c,o=>f(n,o),()=>s(n));var U=k(c,2);X(U,{get dialog(){return s(n)},get dialogInner(){return s(t)},get onClose(){return e.onStartClose}}),Y(()=>{$(c,`height: ${s(C)+64}px`),y(c,1,E([{open:e.stateDialog==="open",isAnimationOn:H.working,isDesktopAnimationOff:r(),hiddenDialog:d()}]),"svelte-19g9dt6")}),u(l,D),F()}ae(["click"]);const ce=({onStartClose:l,onClose:e})=>{let a=L("close");return{get state(){return s(a)},set state(t){f(a,t,!0)},handleStartClose:(t=!1)=>{t||(f(a,"closing"),l?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function ve(l,e){Q(e,!0);let a=h(e,"blockedDialog",3,!1),d=h(e,"hiddenDialog",3,!1),r=h(e,"onStartClose",3,()=>{}),n=h(e,"onClose",3,()=>{}),t=ce({onStartClose:r(),onClose:n()});R(()=>{t.state==="close"&&e.shownDialog?t.state="opening":t.state==="open"&&!e.shownDialog&&t.handleStartClose(a())});var C=N(),D=A(C);{var c=_=>{re(_,{get stateDialog(){return t.state},get blockedDialog(){return a()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return d()},get onOpen(){return t.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{t.handleStartClose(a())},get onClose(){return t.handleClose},children:(m,S)=>{var b=N(),B=A(b);Z(B,()=>e.children),u(m,b)},$$slots:{default:!0}})};I(D,_=>{t.state!=="close"&&_(c)})}u(l,C),F()}export{ve as default};
