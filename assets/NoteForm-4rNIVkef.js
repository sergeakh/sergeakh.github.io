import{p as ne,W as v,d as o,e as m,u as oe,h as t,f as de,c as n,s as d,a4 as ce,i,q as z,a7 as U,j as A,x as h,t as ue,r as ve,a8 as B,H as fe,b as J,k as ge,l as me,m as he,a9 as K,a1 as pe,n as _e}from"./index-DLea47DX.js";import{I as M}from"./Input-C54CLUrM.js";const be=(p,s,_,b,x,f)=>{p.preventDefault(),s.onSubmit({title:t(_).trim().slice(0,256)||"unkwown",url:t(b).trim().slice(0,2048),description:t(x).trim().slice(0,2048),tags:t(f).length>0?t(f):["inbox"]})};var xe=de('<div class="form svelte-raoo7g"><div class="formFields"><!> <input class="inputName svelte-raoo7g" placeholder="Name"/> <textarea placeholder="Note" class="svelte-raoo7g"></textarea></div> <div><form class="formTags svelte-raoo7g"><div class="tags svelte-raoo7g"><!> <!> <!></div> <div class="searchWrapper svelte-raoo7g"><!></div></form> <div class="submitWrapper svelte-raoo7g"><button class="buttonSubmit svelte-raoo7g" type="submit"> </button></div></div></div>');function Ce(p,s){ne(s,!0);let _=v(s,"initialTitle",3,""),b=v(s,"initialUrl",3,""),x=v(s,"initialDescription",3,""),f=v(s,"initialTags",19,()=>[]),P=v(s,"mode",3,"add"),a=o(""),T=o(m(_())),g=o(m(b())),k=o(""),C=o(m(x())),l=o(m(f().filter(e=>e!=="inbox"))),c=o(null);const w=e=>{t(l).includes(e)||(i(a,""),i(l,[...t(l),e],!0))},Q=e=>{const r=t(l).filter(u=>u!==e);r.length===0?i(l,[],!0):i(l,r,!0)};let V=h(()=>K()?[...(pe()()||[]).reduce((e,r)=>(r?.tags.forEach(u=>{e.has(u)||e.add(u)}),e),new Set)]:[]),D=h(()=>K()?t(V).filter(e=>!t(l).some(r=>e===r)&&e!=="inbox"):[]),S=h(()=>t(D).find(e=>e.toLowerCase()===t(a).toLowerCase())||t(l).includes(t(a))),X=h(()=>t(D).filter(e=>t(a)===""?!0:e.toLowerCase().indexOf(t(a).toLowerCase())!==-1).slice(0,t(S)||t(a)===""?3:2));const Y=e=>{i(k,""),i(g,e.target.value||"",!0);try{new URL(t(g))}catch{i(k,"Invalid URL")}},Z=e=>{e.preventDefault(),t(a)!==""&&!t(S)&&(w(t(a)),i(a,""))},E=()=>{t(c)&&(t(c).style.height=t(c).scrollHeight+"px")};oe(()=>{t(c),E()});var I=xe(),R=n(I),W=n(R);M(W,{get value(){return t(g)},get error(){return t(k)},onInput:Y,placeholder:"url"});var F=d(W,2),y=d(F,2);y.__input=E,ce(y,e=>i(c,e),()=>t(c));var $=d(R,2),N=n($),H=n(N),j=n(H);z(j,16,()=>t(l),e=>e,(e,r)=>{U(e,{get title(){return r},onClick:()=>Q(r),type:"button",style:"selected"})});var q=d(j,2);{var ee=e=>{var r=me(),u=he(r);z(u,16,()=>t(X),L=>L,(L,O)=>{U(L,{get title(){return O},onClick:()=>w(O)})}),J(e,r)};A(q,e=>{t(a)!==""&&e(ee)})}var te=d(q,2);{var ae=e=>{U(e,{get title(){return t(a)},onClick:()=>{w(t(a)),i(a,"")}})};A(te,e=>{!t(S)&&t(a)!==""&&e(ae)})}var ie=d(H,2),re=n(ie);M(re,{placeholder:"tag",get value(){return t(a)},set value(e){i(a,e,!0)}});var le=d(N,2),G=n(le);G.__click=[be,s,T,g,C,l];var se=n(G);ue(()=>ve(se,P()==="add"?"add":"edit")),B(F,()=>t(T),e=>i(T,e)),B(y,()=>t(C),e=>i(C,e)),fe("submit",N,Z),J(p,I),ge()}_e(["input","click"]);export{Ce as N};
