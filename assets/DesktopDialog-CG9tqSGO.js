import{o as H,p as W,W as h,u as X,ag as M,g as s,s as I,f as P,k as L,i as A,d as v,m as k,ah as Y,a4 as j,c as f,ai as U,t as Z,a0 as $,x as ee,X as y,Y as E,e as u,h as F,aj as te,q as z,I as V,V as p,v as q,l as ae,j as R}from"./index-Czf_bs-C.js";const ne=({getDialog:l,onOpen:e,onStartClose:a,onClose:d})=>{const r=t=>{t.preventDefault(),a()},n=()=>{d?.()};H(()=>{const t=l();return t?.addEventListener("cancel",r),t?.addEventListener("close",n),()=>{t?.removeEventListener("cancel",r),t?.removeEventListener("close",n)}}),H(()=>{const t=l();t?.showModal(),t?.getBoundingClientRect(),e()})};var oe=(l,e)=>{e.onStartBack()},le=P('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),se=(l,e)=>{e.onStartClose()},ie=P('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),de=P('<dialog><div class="dialogInner svelte-19g9dt6"><div class="header svelte-19g9dt6"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function re(l,e){W(e,!0);let a=h(e,"blockedDialog",3,!1),d=h(e,"hiddenDialog",3,!1),r=h(e,"isDesktopAnimationOff",3,!1),n=I(null),t=I(null);ne({getDialog:()=>s(n),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose}),X(()=>{e.stateDialog==="closing"&&(M.working?s(n)?.addEventListener("transitionend",()=>{s(n)?.close()},{once:!0}):s(n)?.close())});const C=ee(te);var D=de(),c=L(D),_=v(c),m=v(_),S=v(m),b=v(S);{var B=o=>{var i=le();y(i,1,E(["navigateButton","buttonBack"]),"svelte-19g9dt6"),i.__click=[oe,e];var g=v(i);z(g,()=>({"--size":"20px"})),V(g.lastChild,{name:"back"});var O=k(g,2);p(O,{children:(w,T)=>{var x=q("back");u(w,x)}}),u(o,i)};A(b,o=>{(!(a()||d())||a()&&e.unBlockedBack)&&e.onStartBack&&o(B)})}var G=k(S,2),J=v(G);{var K=o=>{var i=ie();y(i,1,E(["navigateButton","buttonClose"]),"svelte-19g9dt6"),i.__click=[se,e];var g=v(i);z(g,()=>({"--size":"20px"})),V(g.lastChild,{name:"close"});var O=k(g,2);p(O,{children:(w,T)=>{var x=q("close");u(w,x)}}),u(o,i)};A(J,o=>{a()||d()||o(K)})}var N=k(m,2);Y(N,()=>e.children),j(_,o=>f(t,o),()=>s(t)),j(c,o=>f(n,o),()=>s(n));var Q=k(c,2);U(Q,{get dialog(){return s(n)},get dialogInner(){return s(t)},get onClose(){return e.onStartClose}}),Z(()=>{$(c,`height: ${s(C)+64}px`),y(c,1,E([{open:e.stateDialog==="open",isAnimationOn:M.working,isDesktopAnimationOff:r(),hiddenDialog:d()}]),"svelte-19g9dt6")}),u(l,D),F()}ae(["click"]);const ce=({onStartClose:l,onClose:e})=>{let a=I("close");return{get state(){return s(a)},set state(t){f(a,t,!0)},handleStartClose:(t=!1)=>{t||(f(a,"closing"),l?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function ve(l,e){W(e,!0);let a=h(e,"blockedDialog",3,!1),d=h(e,"hiddenDialog",3,!1),r=h(e,"onStartClose",3,()=>{}),n=h(e,"onClose",3,()=>{}),t=ce({onStartClose:r(),onClose:n()});X(()=>{t.state==="close"&&e.shownDialog?t.state="opening":t.state==="open"&&!e.shownDialog&&t.handleStartClose(a())});var C=R(),D=L(C);{var c=_=>{re(_,{get stateDialog(){return t.state},get blockedDialog(){return a()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return d()},get onOpen(){return t.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{t.handleStartClose(a())},get onClose(){return t.handleClose},children:(m,S)=>{var b=R(),B=L(b);Y(B,()=>e.children),u(m,b)},$$slots:{default:!0}})};A(D,_=>{t.state!=="close"&&_(c)})}u(l,C),F()}export{ve as default};
