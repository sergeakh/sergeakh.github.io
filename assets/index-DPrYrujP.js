var la=Object.defineProperty;var ca=(e,t,n)=>t in e?la(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var en=(e,t,n)=>ca(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();const Nn=!1;var pn=Array.isArray,ua=Array.prototype.indexOf,mn=Array.from,da=Object.defineProperty,st=Object.getOwnPropertyDescriptor,rr=Object.getOwnPropertyDescriptors,fa=Object.prototype,va=Array.prototype,_n=Object.getPrototypeOf,jn=Object.isExtensible;const ar=()=>{};function ha(e){return e()}function Ft(e){for(var t=0;t<e.length;t++)e[t]()}const xe=2,or=4,Yt=8,wn=16,ze=32,dt=64,yn=128,Le=256,Ut=512,Be=1024,Fe=2048,nt=4096,je=8192,kn=16384,sr=32768,Xt=65536,Fn=1<<17,ga=1<<18,ir=1<<19,sn=1<<20,Qe=Symbol("$state"),pa=Symbol("legacy props"),ma=Symbol(""),lr=new class extends Error{constructor(){super(...arguments);en(this,"name","StaleReactionError");en(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function cr(e){return e===this.v}function _a(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ur(e){return!_a(e,this.v)}function wa(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ya(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ka(e){throw new Error("https://svelte.dev/e/effect_orphan")}function ba(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Sa(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ea(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ta(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Ca(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let ft=!1,Da=!1;function La(){ft=!0}const bn=1,Sn=2,dr=4,Pa=8,xa=16,Ba=1,Oa=2,Ma=4,Aa=8,Ia=16,Ra=1,Na=2,Se=Symbol(),ja="http://www.w3.org/1999/xhtml";function Fa(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let le=null;function Un(e){le=e}function X(e,t=!1,n){var r=le={p:le,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};ft&&!t&&(le.l={s:null,u:null,r1:[],r2:bt(!1)}),kr(()=>{r.d=!0})}function q(e){const t=le;if(t!==null){e!==void 0&&(t.x=e);const i=t.e;if(i!==null){var n=ne,r=$;t.e=null;try{for(var a=0;a<i.length;a++){var o=i[a];qe(o.effect),Me(o.reaction),En(o.fn)}}finally{qe(n),Me(r)}}le=t.p,t.m=!0}return e||{}}function Pt(){return!ft||le!==null&&le.l===null}function de(e){if(typeof e!="object"||e===null||Qe in e)return e;const t=_n(e);if(t!==fa&&t!==va)return e;var n=new Map,r=pn(e),a=R(0),o=$,i=l=>{var u=$;Me(o);var v=l();return Me(u),v};return r&&n.set("length",R(e.length)),new Proxy(e,{defineProperty(l,u,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&Ea();var c=n.get(u);return c===void 0?c=i(()=>{var d=R(v.value);return n.set(u,d),d}):b(c,v.value,!0),!0},deleteProperty(l,u){var v=n.get(u);if(v===void 0){if(u in l){const f=i(()=>R(Se));n.set(u,f),tn(a)}}else{if(r&&typeof u=="string"){var c=n.get("length"),d=Number(u);Number.isInteger(d)&&d<c.v&&b(c,d)}b(v,Se),tn(a)}return!0},get(l,u,v){var h;if(u===Qe)return e;var c=n.get(u),d=u in l;if(c===void 0&&(!d||(h=st(l,u))!=null&&h.writable)&&(c=i(()=>{var g=de(d?l[u]:Se),w=R(g);return w}),n.set(u,c)),c!==void 0){var f=s(c);return f===Se?void 0:f}return Reflect.get(l,u,v)},getOwnPropertyDescriptor(l,u){var v=Reflect.getOwnPropertyDescriptor(l,u);if(v&&"value"in v){var c=n.get(u);c&&(v.value=s(c))}else if(v===void 0){var d=n.get(u),f=d==null?void 0:d.v;if(d!==void 0&&f!==Se)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return v},has(l,u){var f;if(u===Qe)return!0;var v=n.get(u),c=v!==void 0&&v.v!==Se||Reflect.has(l,u);if(v!==void 0||ne!==null&&(!c||(f=st(l,u))!=null&&f.writable)){v===void 0&&(v=i(()=>{var h=c?de(l[u]):Se,g=R(h);return g}),n.set(u,v));var d=s(v);if(d===Se)return!1}return c},set(l,u,v,c){var _;var d=n.get(u),f=u in l;if(r&&u==="length")for(var h=v;h<d.v;h+=1){var g=n.get(h+"");g!==void 0?b(g,Se):h in l&&(g=i(()=>R(Se)),n.set(h+"",g))}if(d===void 0)(!f||(_=st(l,u))!=null&&_.writable)&&(d=i(()=>R(void 0)),b(d,de(v)),n.set(u,d));else{f=d.v!==Se;var w=i(()=>de(v));b(d,w)}var y=Reflect.getOwnPropertyDescriptor(l,u);if(y!=null&&y.set&&y.set.call(c,v),!f){if(r&&typeof u=="string"){var T=n.get("length"),m=Number(u);Number.isInteger(m)&&m>=T.v&&b(T,m+1)}tn(a)}return!0},ownKeys(l){s(a);var u=Reflect.ownKeys(l).filter(d=>{var f=n.get(d);return f===void 0||f.v!==Se});for(var[v,c]of n)c.v!==Se&&!(v in l)&&u.push(v);return u},setPrototypeOf(){Ta()}})}function tn(e,t=1){b(e,e.v+t)}function xt(e){var t=xe|Fe,n=$!==null&&($.f&xe)!==0?$:null;return ne===null||n!==null&&(n.f&Le)!==0?t|=Le:ne.f|=ir,{ctx:le,deps:null,effects:null,equals:cr,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??ne,ac:null}}function Q(e){const t=xt(e);return Pr(t),t}function fr(e){const t=xt(e);return t.equals=ur,t}function vr(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Ue(t[n])}}function Ua(e){for(var t=e.parent;t!==null;){if((t.f&xe)===0)return t;t=t.parent}return null}function hr(e){var t,n=ne;qe(Ua(e));try{vr(e),t=Mr(e)}finally{qe(n)}return t}function gr(e){var t=hr(e);if(e.equals(t)||(e.v=t,e.wv=Br()),!ht){var n=(Xe||(e.f&Le)!==0)&&e.deps!==null?nt:Be;Ae(e,n)}}const kt=new Map;function bt(e,t){var n={f:0,v:e,reactions:null,equals:cr,rv:0,wv:0};return n}function R(e,t){const n=bt(e);return Pr(n),n}function Ha(e,t=!1,n=!0){var a;const r=bt(e);return t||(r.equals=ur),ft&&n&&le!==null&&le.l!==null&&((a=le.l).s??(a.s=[])).push(r),r}function b(e,t,n=!1){$!==null&&(!Oe||($.f&Fn)!==0)&&Pt()&&($.f&(xe|wn|Fn))!==0&&!(ge!=null&&ge[1].includes(e)&&ge[0]===$)&&Ca();let r=n?de(t):t;return ln(e,r)}function ln(e,t){if(!e.equals(t)){var n=e.v;ht?kt.set(e,t):kt.set(e,n),e.v=t,(e.f&xe)!==0&&((e.f&Fe)!==0&&hr(e),Ae(e,(e.f&Le)===0?Be:nt)),e.wv=Br(),pr(e,Fe),Pt()&&ne!==null&&(ne.f&Be)!==0&&(ne.f&(ze|dt))===0&&(Pe===null?$a([e]):Pe.push(e))}return t}function pr(e,t){var n=e.reactions;if(n!==null)for(var r=Pt(),a=n.length,o=0;o<a;o++){var i=n[o],l=i.f;(l&Fe)===0&&(!r&&i===ne||(Ae(i,t),(l&(Be|Le))!==0&&((l&xe)!==0?pr(i,nt):Ln(i))))}}let za=!1;var Hn,mr,_r,wr;function Va(){if(Hn===void 0){Hn=window,mr=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;_r=st(t,"firstChild").get,wr=st(t,"nextSibling").get,jn(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),jn(n)&&(n.__t=void 0)}}function qt(e=""){return document.createTextNode(e)}function it(e){return _r.call(e)}function Gt(e){return wr.call(e)}function k(e,t){return it(e)}function Y(e,t){{var n=it(e);return n instanceof Comment&&n.data===""?Gt(n):n}}function D(e,t=1,n=!1){let r=e;for(;t--;)r=Gt(r);return r}function Wa(e){e.textContent=""}function yr(e){ne===null&&$===null&&ka(),$!==null&&($.f&Le)!==0&&ne===null&&ya(),ht&&wa()}function Ka(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function vt(e,t,n,r=!0){var a=ne,o={ctx:le,deps:null,nodes_start:null,nodes_end:null,f:e|Fe,first:null,fn:t,last:null,next:null,parent:a,b:a&&a.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Dn(o),o.f|=sr}catch(u){throw Ue(o),u}else t!==null&&Ln(o);var i=n&&o.deps===null&&o.first===null&&o.nodes_start===null&&o.teardown===null&&(o.f&(ir|yn))===0;if(!i&&r&&(a!==null&&Ka(o,a),$!==null&&($.f&xe)!==0)){var l=$;(l.effects??(l.effects=[])).push(o)}return o}function kr(e){const t=vt(Yt,null,!1);return Ae(t,Be),t.teardown=e,t}function fe(e){yr();var t=ne!==null&&(ne.f&ze)!==0&&le!==null&&!le.m;if(t){var n=le;(n.e??(n.e=[])).push({fn:e,effect:ne,reaction:$})}else{var r=En(e);return r}}function Ya(e){return yr(),Jt(e)}function Xa(e){const t=vt(dt,e,!0);return(n={})=>new Promise(r=>{n.outro?Ht(t,()=>{Ue(t),r(void 0)}):(Ue(t),r(void 0))})}function En(e){return vt(or,e,!1)}function Jt(e){return vt(Yt,e,!0)}function ie(e,t=[],n=xt){const r=t.map(n);return Zt(()=>e(...r.map(s)))}function Zt(e,t=0){var n=vt(Yt|wn|t,e,!0);return n}function lt(e,t=!0){return vt(Yt|ze,e,!0,t)}function br(e){var t=e.teardown;if(t!==null){const n=ht,r=$;zn(!0),Me(null);try{t.call(null)}finally{zn(n),Me(r)}}}function Sr(e,t=!1){var a;var n=e.first;for(e.first=e.last=null;n!==null;){(a=n.ac)==null||a.abort(lr);var r=n.next;(n.f&dt)!==0?n.parent=null:Ue(n,t),n=r}}function qa(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&ze)===0&&Ue(t),t=n}}function Ue(e,t=!0){var n=!1;(t||(e.f&ga)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Ga(e.nodes_start,e.nodes_end),n=!0),Sr(e,t&&!n),Wt(e,0),Ae(e,kn);var r=e.transitions;if(r!==null)for(const o of r)o.stop();br(e);var a=e.parent;a!==null&&a.first!==null&&Er(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Ga(e,t){for(;e!==null;){var n=e===t?null:Gt(e);e.remove(),e=n}}function Er(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Ht(e,t){var n=[];Tn(e,n,!0),Tr(n,()=>{Ue(e),t&&t()})}function Tr(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var a of e)a.out(r)}else t()}function Tn(e,t,n){if((e.f&je)===0){if(e.f^=je,e.transitions!==null)for(const i of e.transitions)(i.is_global||n)&&t.push(i);for(var r=e.first;r!==null;){var a=r.next,o=(r.f&Xt)!==0||(r.f&ze)!==0;Tn(r,t,o?n:!1),r=a}}}function zt(e){Cr(e,!0)}function Cr(e,t){if((e.f&je)!==0){e.f^=je;for(var n=e.first;n!==null;){var r=n.next,a=(n.f&Xt)!==0||(n.f&ze)!==0;Cr(n,a?t:!1),n=r}if(e.transitions!==null)for(const o of e.transitions)(o.is_global||t)&&o.in()}}let St=[],cn=[];function Dr(){var e=St;St=[],Ft(e)}function Ja(){var e=cn;cn=[],Ft(e)}function Cn(e){St.length===0&&queueMicrotask(Dr),St.push(e)}function Za(){St.length>0&&Dr(),cn.length>0&&Ja()}function Qa(e){var t=ne;if((t.f&sr)===0){if((t.f&yn)===0)throw e;t.fn(e)}else Lr(e,t)}function Lr(e,t){for(;t!==null;){if((t.f&yn)!==0)try{t.b.error(e);return}catch{}t=t.parent}throw e}let Et=!1,Tt=null,$e=!1,ht=!1;function zn(e){ht=e}let wt=[];let $=null,Oe=!1;function Me(e){$=e}let ne=null;function qe(e){ne=e}let ge=null;function Pr(e){$!==null&&$.f&sn&&(ge===null?ge=[$,[e]]:ge[1].push(e))}let we=null,Ce=0,Pe=null;function $a(e){Pe=e}let xr=1,Vt=0,Xe=!1;function Br(){return++xr}function Qt(e){var d;var t=e.f;if((t&Fe)!==0)return!0;if((t&nt)!==0){var n=e.deps,r=(t&Le)!==0;if(n!==null){var a,o,i=(t&Ut)!==0,l=r&&ne!==null&&!Xe,u=n.length;if(i||l){var v=e,c=v.parent;for(a=0;a<u;a++)o=n[a],(i||!((d=o==null?void 0:o.reactions)!=null&&d.includes(v)))&&(o.reactions??(o.reactions=[])).push(v);i&&(v.f^=Ut),l&&c!==null&&(c.f&Le)===0&&(v.f^=Le)}for(a=0;a<u;a++)if(o=n[a],Qt(o)&&gr(o),o.wv>e.wv)return!0}(!r||ne!==null&&!Xe)&&Ae(e,Be)}return!1}function Or(e,t,n=!0){var r=e.reactions;if(r!==null)for(var a=0;a<r.length;a++){var o=r[a];ge!=null&&ge[1].includes(e)&&ge[0]===$||((o.f&xe)!==0?Or(o,t,!1):t===o&&(n?Ae(o,Fe):(o.f&Be)!==0&&Ae(o,nt),Ln(o)))}}function Mr(e){var h;var t=we,n=Ce,r=Pe,a=$,o=Xe,i=ge,l=le,u=Oe,v=e.f;we=null,Ce=0,Pe=null,Xe=(v&Le)!==0&&(Oe||!$e||$===null),$=(v&(ze|dt))===0?e:null,ge=null,Un(e.ctx),Oe=!1,Vt++,e.f|=sn,e.ac!==null&&(e.ac.abort(lr),e.ac=null);try{var c=(0,e.fn)(),d=e.deps;if(we!==null){var f;if(Wt(e,Ce),d!==null&&Ce>0)for(d.length=Ce+we.length,f=0;f<we.length;f++)d[Ce+f]=we[f];else e.deps=d=we;if(!Xe||(v&xe)!==0&&e.reactions!==null)for(f=Ce;f<d.length;f++)((h=d[f]).reactions??(h.reactions=[])).push(e)}else d!==null&&Ce<d.length&&(Wt(e,Ce),d.length=Ce);if(Pt()&&Pe!==null&&!Oe&&d!==null&&(e.f&(xe|nt|Fe))===0)for(f=0;f<Pe.length;f++)Or(Pe[f],e);return a!==null&&a!==e&&(Vt++,Pe!==null&&(r===null?r=Pe:r.push(...Pe))),c}catch(g){Qa(g)}finally{we=t,Ce=n,Pe=r,$=a,Xe=o,ge=i,Un(l),Oe=u,e.f^=sn}}function eo(e,t){let n=t.reactions;if(n!==null){var r=ua.call(n,e);if(r!==-1){var a=n.length-1;a===0?n=t.reactions=null:(n[r]=n[a],n.pop())}}n===null&&(t.f&xe)!==0&&(we===null||!we.includes(t))&&(Ae(t,nt),(t.f&(Le|Ut))===0&&(t.f^=Ut),vr(t),Wt(t,0))}function Wt(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)eo(e,n[r])}function Dn(e){var t=e.f;if((t&kn)===0){Ae(e,Be);var n=ne,r=$e;ne=e,$e=!0;try{(t&wn)!==0?qa(e):Sr(e),br(e);var a=Mr(e);e.teardown=typeof a=="function"?a:null,e.wv=xr;var o;Nn&&Da&&(e.f&Fe)!==0&&e.deps}finally{$e=r,ne=n}}}function to(){try{ba()}catch(e){if(Tt!==null)Lr(e,Tt);else throw e}}function Ar(){var e=$e;try{var t=0;for($e=!0;wt.length>0;){t++>1e3&&to();var n=wt,r=n.length;wt=[];for(var a=0;a<r;a++){var o=ro(n[a]);no(o)}kt.clear()}}finally{Et=!1,$e=e,Tt=null}}function no(e){var t=e.length;if(t!==0)for(var n=0;n<t;n++){var r=e[n];(r.f&(kn|je))===0&&Qt(r)&&(Dn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?Er(r):r.fn=null))}}function Ln(e){Et||(Et=!0,queueMicrotask(Ar));for(var t=Tt=e;t.parent!==null;){t=t.parent;var n=t.f;if((n&(dt|ze))!==0){if((n&Be)===0)return;t.f^=Be}}wt.push(t)}function ro(e){for(var t=[],n=e;n!==null;){var r=n.f,a=(r&(ze|dt))!==0,o=a&&(r&Be)!==0;if(!o&&(r&je)===0){(r&or)!==0?t.push(n):a?n.f^=Be:Qt(n)&&Dn(n);var i=n.first;if(i!==null){n=i;continue}}var l=n.parent;for(n=n.next;n===null&&l!==null;)n=l.next,l=l.parent}return t}function ao(e){for(var t;;){if(Za(),wt.length===0)return Et=!1,Tt=null,t;Et=!0,Ar()}}async function oo(){await Promise.resolve(),ao()}function s(e){var t=e.f,n=(t&xe)!==0;if($!==null&&!Oe){if(!(ge!=null&&ge[1].includes(e))||ge[0]!==$){var r=$.deps;e.rv<Vt&&(e.rv=Vt,we===null&&r!==null&&r[Ce]===e?Ce++:we===null?we=[e]:(!Xe||!we.includes(e))&&we.push(e))}}else if(n&&e.deps===null&&e.effects===null){var a=e,o=a.parent;o!==null&&(o.f&Le)===0&&(a.f^=Le)}return n&&(a=e,Qt(a)&&gr(a)),ht&&kt.has(e)?kt.get(e):e.v}function Bt(e){var t=Oe;try{return Oe=!0,e()}finally{Oe=t}}const so=-7169;function Ae(e,t){e.f=e.f&so|t}function io(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(Qe in e)un(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&Qe in n&&un(n)}}}function un(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{un(e[r],t)}catch{}const n=_n(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=rr(n);for(let a in r){const o=r[a].get;if(o)try{o.call(e)}catch{}}}}}const lo=["touchstart","touchmove"];function co(e){return lo.includes(e)}let Vn=!1;function uo(){Vn||(Vn=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)(t=n.__on_r)==null||t.call(n)})},{capture:!0}))}function Ir(e){var t=$,n=ne;Me(null),qe(null);try{return e()}finally{Me(t),qe(n)}}function fo(e,t,n,r=n){e.addEventListener(t,()=>Ir(n));const a=e.__on_r;a?e.__on_r=()=>{a(),r(!0)}:e.__on_r=()=>r(!0),uo()}const Rr=new Set,dn=new Set;function vo(e,t,n,r={}){function a(o){if(r.capture||mt.call(t,o),!o.cancelBubble)return Ir(()=>n==null?void 0:n.call(this,o))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?Cn(()=>{t.addEventListener(e,a,r)}):t.addEventListener(e,a,r),a}function Re(e,t,n,r,a){var o={capture:r,passive:a},i=vo(e,t,n,o);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&kr(()=>{t.removeEventListener(e,i,o)})}function be(e){for(var t=0;t<e.length;t++)Rr.add(e[t]);for(var n of dn)n(e)}function mt(e){var m;var t=this,n=t.ownerDocument,r=e.type,a=((m=e.composedPath)==null?void 0:m.call(e))||[],o=a[0]||e.target,i=0,l=e.__root;if(l){var u=a.indexOf(l);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var v=a.indexOf(t);if(v===-1)return;u<=v&&(i=u)}if(o=a[i]||e.target,o!==t){da(e,"currentTarget",{configurable:!0,get(){return o||n}});var c=$,d=ne;Me(null),qe(null);try{for(var f,h=[];o!==null;){var g=o.assignedSlot||o.parentNode||o.host||null;try{var w=o["__"+r];if(w!=null&&(!o.disabled||e.target===o))if(pn(w)){var[y,...T]=w;y.apply(o,[e,...T])}else w.call(o,e)}catch(_){f?h.push(_):f=_}if(e.cancelBubble||g===t||g===null)break;o=g}if(f){for(let _ of h)queueMicrotask(()=>{throw _});throw f}}finally{e.__root=t,delete e.currentTarget,Me(c),qe(d)}}}function Nr(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Ct(e,t){var n=ne;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function A(e,t){var n=(t&Ra)!==0,r=(t&Na)!==0,a,o=!e.startsWith("<!>");return()=>{a===void 0&&(a=Nr(o?e:"<!>"+e),n||(a=it(a)));var i=r||mr?document.importNode(a,!0):a.cloneNode(!0);if(n){var l=it(i),u=i.lastChild;Ct(l,u)}else Ct(i,i);return i}}function ho(e,t,n="svg"){var r=!e.startsWith("<!>"),a=`<${n}>${r?e:"<!>"+e}</${n}>`,o;return()=>{if(!o){var i=Nr(a),l=it(i);o=it(l)}var u=o.cloneNode(!0);return Ct(u,u),u}}function go(e,t){return ho(e,t,"svg")}function se(e=""){{var t=qt(e+"");return Ct(t,t),t}}function Ee(){var e=document.createDocumentFragment(),t=document.createComment(""),n=qt();return e.append(t,n),Ct(t,n),e}function S(e,t){e!==null&&e.before(t)}function po(){var e;return(e=window.__svelte??(window.__svelte={})).uid??(e.uid=1),`c${window.__svelte.uid++}`}function rt(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function mo(e,t){return _o(e,t)}const at=new Map;function _o(e,{target:t,anchor:n,props:r={},events:a,context:o,intro:i=!0}){Va();var l=new Set,u=d=>{for(var f=0;f<d.length;f++){var h=d[f];if(!l.has(h)){l.add(h);var g=co(h);t.addEventListener(h,mt,{passive:g});var w=at.get(h);w===void 0?(document.addEventListener(h,mt,{passive:g}),at.set(h,1)):at.set(h,w+1)}}};u(mn(Rr)),dn.add(u);var v=void 0,c=Xa(()=>{var d=n??t.appendChild(qt());return lt(()=>{if(o){X({});var f=le;f.c=o}a&&(r.$$events=a),v=e(d,r)||{},o&&q()}),()=>{var g;for(var f of l){t.removeEventListener(f,mt);var h=at.get(f);--h===0?(document.removeEventListener(f,mt),at.delete(f)):at.set(f,h)}dn.delete(u),d!==n&&((g=d.parentNode)==null||g.removeChild(d))}});return wo.set(v,c),v}let wo=new WeakMap;function N(e,t,[n,r]=[0,0]){var a=e,o=null,i=null,l=Se,u=n>0?Xt:0,v=!1;const c=(f,h=!0)=>{v=!0,d(h,f)},d=(f,h)=>{l!==(l=f)&&(l?(o?zt(o):h&&(o=lt(()=>h(a))),i&&Ht(i,()=>{i=null})):(i?zt(i):h&&(i=lt(()=>h(a,[n+1,r]))),o&&Ht(o,()=>{o=null})))};Zt(()=>{v=!1,t(c),v||d(null,null)},u)}function ke(e,t){Jt(()=>{var n=t();for(var r in n){var a=n[r];a?e.style.setProperty(r,a):e.style.removeProperty(r)}})}function yo(e,t){return t}function ko(e,t,n,r){for(var a=[],o=t.length,i=0;i<o;i++)Tn(t[i].e,a,!0);var l=o>0&&a.length===0&&n!==null;if(l){var u=n.parentNode;Wa(u),u.append(n),r.clear(),Ke(e,t[0].prev,t[o-1].next)}Tr(a,()=>{for(var v=0;v<o;v++){var c=t[v];l||(r.delete(c.k),Ke(e,c.prev,c.next)),Ue(c.e,!l)}})}function Ne(e,t,n,r,a,o=null){var i=e,l={flags:t,items:new Map,first:null},u=(t&dr)!==0;if(u){var v=e;i=v.appendChild(qt())}var c=null,d=!1,f=fr(()=>{var h=n();return pn(h)?h:h==null?[]:mn(h)});Zt(()=>{var h=s(f),g=h.length;d&&g===0||(d=g===0,bo(h,l,i,a,t,r,n),o!==null&&(g===0?c?zt(c):c=lt(()=>o(i)):c!==null&&Ht(c,()=>{c=null})),s(f))})}function bo(e,t,n,r,a,o,i){var M,I,B,U;var l=(a&Pa)!==0,u=(a&(bn|Sn))!==0,v=e.length,c=t.items,d=t.first,f=d,h,g=null,w,y=[],T=[],m,_,p,E;if(l)for(E=0;E<v;E+=1)m=e[E],_=o(m,E),p=c.get(_),p!==void 0&&((M=p.a)==null||M.measure(),(w??(w=new Set)).add(p));for(E=0;E<v;E+=1){if(m=e[E],_=o(m,E),p=c.get(_),p===void 0){var L=f?f.e.nodes_start:n;g=Eo(L,t,g,g===null?t.first:g.next,m,_,E,r,a,i),c.set(_,g),y=[],T=[],f=g.next;continue}if(u&&So(p,m,E,a),(p.e.f&je)!==0&&(zt(p.e),l&&((I=p.a)==null||I.unfix(),(w??(w=new Set)).delete(p))),p!==f){if(h!==void 0&&h.has(p)){if(y.length<T.length){var C=T[0],x;g=C.prev;var j=y[0],F=y[y.length-1];for(x=0;x<y.length;x+=1)Wn(y[x],C,n);for(x=0;x<T.length;x+=1)h.delete(T[x]);Ke(t,j.prev,F.next),Ke(t,g,j),Ke(t,F,C),f=C,g=F,E-=1,y=[],T=[]}else h.delete(p),Wn(p,f,n),Ke(t,p.prev,p.next),Ke(t,p,g===null?t.first:g.next),Ke(t,g,p),g=p;continue}for(y=[],T=[];f!==null&&f.k!==_;)(f.e.f&je)===0&&(h??(h=new Set)).add(f),T.push(f),f=f.next;if(f===null)continue;p=f}y.push(p),g=p,f=p.next}if(f!==null||h!==void 0){for(var z=h===void 0?[]:mn(h);f!==null;)(f.e.f&je)===0&&z.push(f),f=f.next;var V=z.length;if(V>0){var K=(a&dr)!==0&&v===0?n:null;if(l){for(E=0;E<V;E+=1)(B=z[E].a)==null||B.measure();for(E=0;E<V;E+=1)(U=z[E].a)==null||U.fix()}ko(t,z,K,c)}}l&&Cn(()=>{var J;if(w!==void 0)for(p of w)(J=p.a)==null||J.apply()}),ne.first=t.first&&t.first.e,ne.last=g&&g.e}function So(e,t,n,r){(r&bn)!==0&&ln(e.v,t),(r&Sn)!==0?ln(e.i,n):e.i=n}function Eo(e,t,n,r,a,o,i,l,u,v){var c=(u&bn)!==0,d=(u&xa)===0,f=c?d?Ha(a,!1,!1):bt(a):a,h=(u&Sn)===0?i:bt(i),g={i:h,v:f,k:o,a:null,e:null,prev:n,next:r};try{return g.e=lt(()=>l(e,f,h,v),za),g.e.prev=n&&n.e,g.e.next=r&&r.e,n===null?t.first=g:(n.next=g,n.e.next=g.e),r!==null&&(r.prev=g,r.e.prev=g.e),g}finally{}}function Wn(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,a=t?t.e.nodes_start:n,o=e.e.nodes_start;o!==r;){var i=Gt(o);a.before(o),o=i}}function Ke(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function Ve(e,t,...n){var r=e,a=ar,o;Zt(()=>{a!==(a=t())&&(o&&(Ue(o),o=null),o=lt(()=>a(r,...n)))},Xt)}function jr(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=jr(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function To(){for(var e,t,n=0,r="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=jr(e))&&(r&&(r+=" "),r+=t);return r}function oe(e){return typeof e=="object"?To(e):e??""}const Kn=[...` 	
\r\f \v\uFEFF`];function Co(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var a in n)if(n[a])r=r?r+" "+a:a;else if(r.length)for(var o=a.length,i=0;(i=r.indexOf(a,i))>=0;){var l=i+o;(i===0||Kn.includes(r[i-1]))&&(l===r.length||Kn.includes(r[l]))?r=(i===0?"":r.substring(0,i))+r.substring(l+1):i=l}}return r===""?null:r}function Do(e,t){return e==null?null:String(e)}function ae(e,t,n,r,a,o){var i=e.__className;if(i!==n||i===void 0){var l=Co(n,r,o);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(o&&a!==o)for(var u in o){var v=!!o[u];(a==null||v!==!!a[u])&&e.classList.toggle(u,v)}return o}function Dt(e,t,n,r){var a=e.__style;if(a!==t){var o=Do(t);o==null?e.removeAttribute("style"):e.style.cssText=o,e.__style=t}return r}const Lo=Symbol("is custom element"),Po=Symbol("is html");function Nt(e,t){var n=Pn(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function jt(e,t){var n=Pn(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function ue(e,t,n,r){var a=Pn(e);a[t]!==(a[t]=n)&&(t==="loading"&&(e[ma]=n),n==null?e.removeAttribute(t):typeof n!="string"&&xo(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Pn(e){return e.__attributes??(e.__attributes={[Lo]:e.nodeName.includes("-"),[Po]:e.namespaceURI===ja})}var Yn=new Map;function xo(e){var t=Yn.get(e.nodeName);if(t)return t;Yn.set(e.nodeName,t=[]);for(var n,r=e,a=Element.prototype;a!==r;){n=rr(r);for(var o in n)n[o].set&&t.push(o);r=_n(r)}return t}function xn(e,t,n=t){var r=Pt();fo(e,"input",a=>{var o=a?e.defaultValue:e.value;if(o=nn(e)?rn(o):o,n(o),r&&o!==(o=t())){var i=e.selectionStart,l=e.selectionEnd;e.value=o??"",l!==null&&(e.selectionStart=i,e.selectionEnd=Math.min(l,e.value.length))}}),Bt(t)==null&&e.value&&n(nn(e)?rn(e.value):e.value),Jt(()=>{var a=t();nn(e)&&a===rn(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function nn(e){var t=e.type;return t==="number"||t==="range"}function rn(e){return e===""?null:+e}function Xn(e,t){return e===t||(e==null?void 0:e[Qe])===t}function me(e={},t,n,r){return En(()=>{var a,o;return Jt(()=>{a=o,o=[],Bt(()=>{e!==n(...o)&&(t(e,...o),a&&Xn(n(...a),e)&&t(null,...a))})}),()=>{Cn(()=>{o&&Xn(n(...o),e)&&t(null,...o)})}}),e}function Ot(e=!1){const t=le,n=t.l.u;if(!n)return;let r=()=>io(t.s);if(e){let a=0,o={};const i=xt(()=>{let l=!1;const u=t.s;for(const v in u)u[v]!==o[v]&&(o[v]=u[v],l=!0);return l&&a++,a});r=()=>s(i)}n.b.length&&Ya(()=>{qn(t,r),Ft(n.b)}),fe(()=>{const a=Bt(()=>n.m.map(ha));return()=>{for(const o of a)typeof o=="function"&&o()}}),n.a.length&&fe(()=>{qn(t,r),Ft(n.a)})}function qn(e,t){if(e.l.s)for(const n of e.l.s)s(n);t()}let It=!1;function Bo(e){var t=It;try{return It=!1,[e(),It]}finally{It=t}}function Oo(e){var t;return((t=e.ctx)==null?void 0:t.d)??!1}function G(e,t,n,r){var T;var a=!ft||(n&Oa)!==0,o=(n&Aa)!==0,i=(n&Ia)!==0,l=r,u=!0,v=()=>(u&&(u=!1,l=i?Bt(r):r),l),c;if(o){var d=Qe in e||pa in e;c=((T=st(e,t))==null?void 0:T.set)??(d&&t in e?m=>e[t]=m:void 0)}var f,h=!1;o?[f,h]=Bo(()=>e[t]):f=e[t],f===void 0&&r!==void 0&&(f=v(),c&&(a&&Sa(),c(f)));var g;if(a?g=()=>{var m=e[t];return m===void 0?v():(u=!0,m)}:g=()=>{var m=e[t];return m!==void 0&&(l=void 0),m===void 0?l:m},a&&(n&Ma)===0)return g;if(c){var w=e.$$legacy;return function(m,_){return arguments.length>0?((!a||!_||w||h)&&c(_?g():m),m):g()}}var y=((n&Ba)!==0?xt:fr)(g);return o&&s(y),function(m,_){if(arguments.length>0){const p=_?s(y):a&&o?de(m):m;return b(y,p),l!==void 0&&(l=p),m}return Oo(y)?y.v:s(y)}}function ce(e){le===null&&Fa(),ft&&le.l!==null?Mo(le).m.push(e):fe(()=>{const t=Bt(e);if(typeof t=="function")return t})}function Mo(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const Ao="5";var nr;typeof window<"u"&&((nr=window.__svelte??(window.__svelte={})).v??(nr.v=new Set)).add(Ao);let Je=R(""),ot=R(null);function Io(e){b(Je,""),setTimeout(()=>{b(Je,e,!0)},16)}var Ro=A('<div class="notification svelte-1a2zucn"> </div>');function No(e,t){X(t,!0),fe(()=>{var l,u;s(Je),s(Je)&&((l=s(ot))==null||l.getBoundingClientRect(),(u=s(ot))==null||u.style.setProperty("opacity","1"));const o=setTimeout(()=>{var v;(v=s(ot))==null||v.style.removeProperty("opacity")},800),i=setTimeout(()=>{var v;b(Je,""),(v=s(ot))==null||v.style.removeProperty("opacity")},1200);return()=>{clearTimeout(o),clearTimeout(i)}});var n=Ee(),r=Y(n);{var a=o=>{var i=Ro(),l=k(i);me(i,u=>b(ot,u),()=>s(ot)),ie(()=>rt(l,s(Je))),S(o,i)};N(r,o=>{s(Je)&&o(a)})}S(e,n),q()}La();var jo=A('<span class="vh svelte-14jjkpd"><!></span>');function tt(e,t){var n=jo(),r=k(n);Ve(r,()=>t.children),S(e,n)}var Fo=go('<svg class="svelte-gv09tg"><use></use></svg>');function pe(e,t){let n=G(t,"name",8,"");var r=Fo(),a=k(r);ie(()=>ue(a,"href",`#icon-${n()??""}`)),S(e,r)}const Fr=(e,t)=>{if(!t)return e;if(t.type==="closed")return{type:"closed"};switch(e.type){case"opened":return t.type==="close"?{type:"closing"}:t.type==="swipe"?{type:"openSwiping"}:e;case"closed":return t.type==="open"?{type:"opening"}:t.type==="swipe"?{type:"closeSwiping"}:e;case"openSwiping":return t.type==="open"?{type:"opening"}:t.type==="close"?{type:"closing"}:e;case"closeSwiping":return t.type==="open"?{type:"opening"}:t.type==="close"?{type:"closing"}:e;case"opening":return t.type==="opened"?{type:"opened"}:e;default:return e}};let fn=R(de(Fr({type:"closed"})));const Ye=e=>{b(fn,Fr(s(fn),e),!0)},Ur=()=>s(fn),Uo=()=>{Ye({type:"open"})},Ho=()=>{Ye({type:"close"})},zo=()=>{const e=Ur().type;e==="closed"?Uo():e==="opened"&&Ho()};var Vo=A('<button class="buttonMenu svelte-hxzs42"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function Hr(e,t){X(t,!1),Ot();var n=Vo();n.__click=[zo];var r=k(n);ke(r,()=>({"--size":"28px"})),pe(r.lastChild,{name:"sidebarMenu"});var a=D(r,2);tt(a,{children:(o,i)=>{var l=se("Menu");S(o,l)}}),S(e,n),q()}be(["click"]);const H=de({historyStack:[],pathname:window.location.pathname,search:window.location.search,historyLength:0}),zr=()=>{var e;return((e=new URLSearchParams(H.search).get("selectedTags"))==null?void 0:e.split(","))||[]};let Rt=zr();const Wo=()=>{const e=zr();return e.join(",")===Rt.join(",")||(Rt=e),Rt},Ko=()=>{H.pathname=document.location.pathname,H.search=document.location.search,H.historyLength=Math.max(0,H.historyLength-=1)};window.addEventListener("popstate",Ko);const Kt=e=>{const[t,n]=e.split("?");H.pathname=t,H.search=n?`?${n}`:"",H.historyLength+=1,H.historyStack.push(window.location.href),window.history.replaceState(null,"",e)},Yo=e=>{const[t,n]=e.split("?");H.pathname=t,H.search=n?`?${n}`:"",window.history.replaceState(null,"",e)},Vr=(e="/")=>{var r;const[t,n]=e.split("?");if(H.historyLength<=0){const a=window.location.href,[o,i]=a.split("?");if(!i.includes("stackPages"))window.history.replaceState(null,"",e),H.historyLength=0,H.pathname=t,H.search=n?`?${n}`:"";else{const l=new URLSearchParams(i),v=(((r=l.get("stackPages"))==null?void 0:r.split(","))||[]).slice(0,-1);v.length===0?l.delete("stackPages"):l.set("stackPages",v.join(","));const c=`${o}${l.toString()?`?${l.toString()}`:""}`;window.history.replaceState(null,"",c),H.search=l.toString()?`?${l.toString()}`:""}}else if(H.historyStack.length>0){const a=H.historyStack.pop();if(a){const[o,i]=a.split("?");window.history.replaceState(null,"",a),H.historyLength=Math.max(0,H.historyLength-=1),H.pathname=o,H.search=i?`?${i}`:""}}},gt=()=>{const e=H.historyStack.findIndex(n=>n.includes("stackPages")),t=e===-1?H.historyStack.slice(0):H.historyStack.slice(0,e);if(t.length>0){const n=t.pop();if(n){const[r,a]=n.split("?");window.history.replaceState(null,"",n),H.historyLength=Math.max(0,t.length),H.pathname=r,H.search=a?`?${a}`:"",H.historyStack=t}}else window.history.replaceState(null,"","/"),H.historyLength=0,H.pathname="/",H.search="",H.historyStack=[]},He=()=>{var e;return((e=new URLSearchParams(H.search).get("stackPages"))==null?void 0:e.split(","))||[]};let et=R(de(He()));const Ie=e=>{const t=He();if(!t.includes(e)){t.push(e);const n=new URLSearchParams(H.search);n.set("stackPages",t.join(",")),b(et,t,!0),Kt(`${H.pathname}?${n.toString()}`)}},Xo=e=>He().includes(e),Wr=()=>{const e=s(et).slice(0,-1);b(et,e,!0)},Kr=()=>{const e=He();return e.length>=s(et).length?e.reduce((t,n)=>[...t,{page:n,shown:!0}],[]):s(et).reduce((t,n,r)=>[...t,{page:n,shown:e.length===0?!1:r!==s(et).length-1}],[])},qo=()=>{b(et,[],!0)},Go=e=>{e.preventDefault(),Ie("settings")},Jo=e=>{e.preventDefault(),Ie("newBookmark")};var Zo=A('<a class="addBookmark svelte-1dt9h1e"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add bookmark</span></a>'),Qo=A('<div class="header svelte-1dt9h1e"><div class="top svelte-1dt9h1e"><div class="desktop svelte-1dt9h1e"><a class="link svelte-1dt9h1e"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a></div> <div class="mobile svelte-1dt9h1e"><!></div> <!></div></div>');function $o(e,t){X(t,!0);const n=()=>{const w=He();w.includes("settings")||w.push("settings");const y=new URLSearchParams(H.search);return y.set("stackPages",w.join(",")),`${H.pathname}?${y}`};let a=Q(()=>{const w=He();w.includes("newBookmark")||w.push("newBookmark");const y=new URLSearchParams(H.search);return y.set("stackPages",w.join(",")),`${H.pathname}?${y}`}),o=Q(n);var i=Qo(),l=k(i),u=k(l),v=k(u);v.__click=[Go];var c=k(v);ke(c,()=>({"--size":"20px"})),pe(c.lastChild,{name:"settings"});var d=D(u,2),f=k(d);Hr(f,{});var h=D(d,2);{var g=w=>{var y=Zo();y.__click=[Jo];var T=k(y);ke(T,()=>({"--size":"24px","--color":"#b0b0b0"})),pe(T.lastChild,{name:"plus"}),ie(()=>ue(y,"href",s(a))),S(w,y)};N(h,w=>{H.pathname!=="/settings"&&w(g)})}ie(()=>ue(v,"href",s(o))),S(e,i),q()}be(["click"]);const es=(e,t)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{e()},t)}},Yr=()=>window.matchMedia("(max-width: 768px)").matches;let Xr=R(de(Yr()));const ts=es(()=>{b(Xr,Yr(),!0)},16);window.addEventListener("resize",ts);const Mt=()=>s(Xr),Bn=de({count:0}),ns=()=>Bn.count>0,rs=()=>{Bn.count+=1},as=()=>{Bn.count-=1},he=de({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});let vn=!1;const an=()=>{document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement?vn=!0:vn=!1},On=()=>vn;function os(e,t){X(t,!0);let n=G(t,"dialog",7),r=null;const a=()=>{t.dialogState==="swiping"&&t.onClose()};fe(()=>(t.dialogState==="swiping"&&(r=setTimeout(a,3e3)),()=>{r&&(clearTimeout(r),r=null)}));let o=null,i=null;const l=3,u=50,v=5,c=.6,d=.3,f=.35,h=.95;let g=0,w=0,y=0,T=!1,m=!1,_=0,p=0,E=0;const L=()=>{g=0,w=0,T=!1,m=!1,_=0,p=0,E=0,y=0,o=null,i!==null&&(cancelAnimationFrame(i),i=null),r&&(clearTimeout(r),r=null)},C=B=>{if(!n()){console.warn("Touch start: No dialog element");return}if(t.dialogState!=="opened"){console.warn(`Touch start: Invalid sidebar state: ${t.dialogState}`);return}g=B.touches[0].clientX,w=B.touches[0].clientY,y=performance.now(),T=!0,m=!1},x=B=>t.dialogState==="opened"&&B>0||t.dialogState==="swiping"&&B>0,j=B=>{if(n()){n().style.setProperty("--transition-timing","0s"),t.onSwipe(),navigator.vibrate&&navigator.vibrate(10);try{const U=window.getComputedStyle(n()),J=U.transform||U.webkitTransform||"";if(p=n().offsetWidth,(t.dialogState==="swiping"||t.dialogState==="opened")&&(_=0),J&&J!=="none")try{_=new DOMMatrix(J).m41}catch{console.warn("Could not parse transform matrix, using default position")}m=!0}catch(U){console.error("Error during swipe initialization:",U),L()}}},F=()=>{if(!n())return;const U=Math.abs(_+E*p/100)/p;n().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-U)})`)},z=()=>{if(i=null,!o||!T||!n()||On()){L();return}const B=o.touches[0].clientX,U=o.touches[0].clientY,J=B-g,O=U-w,P=Math.abs(J)>Math.abs(O),W=Math.abs(J)>l;if(!m)if(P&&W&&x(J))try{j(J)}catch($t){console.error("Error initializing swipe:",$t),L();return}else return;if(!x(J))return;n().style.setProperty("--transition-timing","0s");let Z=_+J*h;Z=Math.max(0,Math.min(p,Z)),n().style.transform=`translate3d(${Z}px, 0, 0)`,he.swipingRatio=Math.abs(1-Z/p),E=(Z-_)/p*100,t.dialogState==="swiping"&&(r&&clearTimeout(r),r=setTimeout(a,3e3)),F()},V=B=>{if(!T)return;o=B,i===null&&(i=requestAnimationFrame(z));const U=B.touches[0].clientX-g,J=B.touches[0].clientY-w,O=Math.abs(U)>Math.abs(J);m&&O&&B.preventDefault()},K=B=>{const U=Math.abs(B);if(U>=c)return v;if(U>=d){const J=(U-d)/(c-d);return u-J*(u-v)}else return u},M=(B,U)=>{if(Math.abs(B)>=c)return f*.5;const O=Math.abs(E)/100;return U?f*Math.max(.5,1-O):f*Math.max(.5,O)},I=B=>{var Z,re;if(i!==null&&(cancelAnimationFrame(i),i=null),!T||!n()){L();return}if(!m){L();return}let U=0;if((Z=B==null?void 0:B.changedTouches)!=null&&Z[0]){const ve=B.changedTouches[0].clientX,At=performance.now()-y;At>0&&(U=(ve-g)/At)}const J=K(U);let O=null;t.dialogState==="swiping"&&(O=Math.abs(E)>J||U<-d?"close":"open");const P=t.dialogState==="swiping"&&O==="close",W=M(U,P);he.duration=W-.02,n().style.setProperty("--transition-timing",`${W}s`),n().offsetWidth,n().style.transform="",O==="open"?t.onOpen():O==="close"&&t.onClose(),(re=n())==null||re.style.removeProperty("--backdrop-bg"),L()};ce(()=>(n().addEventListener("touchstart",C,{passive:!0}),n().addEventListener("touchmove",V,{passive:!1}),n().addEventListener("touchend",I,{passive:!0}),n().addEventListener("touchcancel",I,{passive:!0}),()=>{n().removeEventListener("touchstart",C),n().removeEventListener("touchmove",V),n().removeEventListener("touchend",I),n().removeEventListener("touchcancel",I),i!==null&&cancelAnimationFrame(i)})),q()}let Mn=R(!1);const ss=(e,t)=>{let n;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{e()},t)}},is=ss(()=>{b(Mn,!1)},100),qr=()=>{b(Mn,!0),is()},Gr=()=>s(Mn);var ls=(e,t)=>{t.onStartClose()},cs=A('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),us=A('<dialog><div class="dialogInner svelte-68rj1a"><div class="header svelte-68rj1a"><div><!></div></div> <!></div></dialog> <!>',1);function ds(e,t){X(t,!0);let n=350,r=R(null),a=R(null);const o=_=>{_.preventDefault(),t.onStartClose()};ce(()=>{var _,p;return(_=s(r))==null||_.addEventListener("close",t.onClosed),(p=s(r))==null||p.addEventListener("cancel",o),()=>{var E,L;(E=s(r))==null||E.removeEventListener("close",t.onClosed),(L=s(r))==null||L.removeEventListener("cancel",o)}});const i=()=>{var _,p,E;(_=s(r))==null||_.style.removeProperty("--transition-timing"),(p=s(r))==null||p.style.removeProperty("transform"),(E=s(r))==null||E.style.removeProperty("--backdrop-bg")},l=()=>{qr()},u=Q(Gr);fe(()=>{var _,p;if(t.dialogState,!!s(r))switch(t.dialogState){case"opening":{s(r).open||s(r).showModal(),s(r).getBoundingClientRect();const E=setTimeout(()=>{i()},n+1),L=()=>{clearTimeout(E),i()};return(_=s(r))==null||_.addEventListener("transitionend",L,{once:!0}),t.onOpened(),()=>{var C;(C=s(r))==null||C.removeEventListener("transitionend",L)}}case"closing":{const E=setTimeout(()=>{t.dialogState==="closing"&&t.onClosed()},n+1),L=()=>{clearTimeout(E),t.onClosed()};return(p=s(r))==null||p.addEventListener("transitionend",L,{once:!0}),()=>{var C;(C=s(r))==null||C.removeEventListener("transitionend",L)}}case"opened":i()}});var v=us(),c=Y(v),d=k(c),f=k(d),h=k(f),g=k(h);{var w=_=>{var p=cs();ae(p,1,oe(["navigateButton","buttonBack"]),"svelte-68rj1a"),p.__click=[ls,t];var E=k(p);ke(E,()=>({"--size":"20px"})),pe(E.lastChild,{name:"back"});var L=D(E,2);tt(L,{children:(C,x)=>{var j=se("back");S(C,j)}}),S(_,p)};N(g,_=>{(!(t.blocked||t.hidden)||t.blocked&&t.unBlockedBack)&&_(w)})}var y=D(f,2);Ve(y,()=>t.children),me(d,_=>b(a,_),()=>s(a)),me(c,_=>b(r,_),()=>s(r));var T=D(c,2);{var m=_=>{os(_,{get onClose(){return t.onStartClose},get onOpen(){return t.onStartOpen},get onSwipe(){return t.onSwipe},get dialogState(){return t.dialogState},get dialog(){return s(r)}})};N(T,_=>{(!s(u)&&t.dialogState==="opened"||t.dialogState==="swiping")&&(!t.blocked||t.unBlockedBack)&&_(m)})}ie(()=>ae(c,1,oe([{open:t.dialogState==="opened",hidden:t.hidden,isAnimationOn:he.working&&(!he.isSwiping||!t.hidden)},{hidden:t.hidden}]),"svelte-68rj1a")),Re("scroll",d,l),S(e,v),q()}be(["click"]);const Gn=(e,t)=>{if(!t)return e;if(t.type==="closed")return{type:"closed"};switch(e.type){case"opened":return t.type==="close"?{type:"closing"}:t.type==="swipe"?{type:"swiping"}:e;case"closed":return t.type==="open"?{type:"opening"}:e;case"swiping":return t.type==="open"?{type:"opening"}:t.type==="close"?{type:"closing"}:e;case"opening":return t.type==="opened"?{type:"opened"}:e;default:return e}};function fs(e,t){X(t,!0);let n=G(t,"blocked",3,!1),r=G(t,"hiddenDialog",3,!1),a=G(t,"unBlockedBack",3,!1),o=G(t,"onStartClose",3,()=>{}),i=G(t,"onClose",3,()=>{}),l=R(de(Gn({type:"closed"})));const u=T=>{b(l,Gn(s(l),T),!0)},v=()=>{n()&&!a()||(o()(),u({type:"close"}))},c=()=>{u({type:"open"})},d=()=>{u({type:"opened"}),he.duration=.2},f=()=>{i()(),u({type:"closed"}),he.swipingRatio=1,he.duration=.2},h=()=>{u({type:"swipe"})};fe(()=>{s(l).type==="swiping"?he.isSwiping=!0:he.isSwiping=!1,s(l).type==="closed"&&t.shownDialog?c():s(l).type==="opened"&&!t.shownDialog&&v()});var g=Ee(),w=Y(g);{var y=T=>{ds(T,{onSwipe:h,onOpened:d,onClosed:f,onStartClose:v,onStartOpen:c,get dialogState(){return s(l).type},get hidden(){return r()},get blocked(){return n()},get unBlockedBack(){return a()},children:(m,_)=>{var p=Ee(),E=Y(p);Ve(E,()=>t.children),S(m,p)},$$slots:{default:!0}})};N(w,T=>{s(l).type!=="closed"&&T(y)})}return S(e,g),q({handleComputeState:u})}const vs=({getDialog:e,onOpen:t,onStartClose:n,onClose:r})=>{const a=i=>{i.preventDefault(),n()},o=()=>{r==null||r()};ce(()=>{const i=e();return i==null||i.addEventListener("cancel",a),i==null||i.addEventListener("close",o),()=>{i==null||i.removeEventListener("cancel",a),i==null||i.removeEventListener("close",o)}}),ce(()=>{const i=e();i==null||i.showModal(),i==null||i.getBoundingClientRect(),t()})};function Jr(e,t){X(t,!0),ce(()=>{const n=r=>{var a;r.target&&((a=t.dialog)!=null&&a.open)&&t.dialogInner&&t.dialogInner!==r.target&&!t.dialogInner.contains(r.target)&&t.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),q()}var hs=(e,t)=>{t.onStartBack()},gs=A('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),ps=(e,t)=>{t.onStartClose()},ms=A('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),_s=A('<dialog><div class="dialogInner svelte-141nkk0"><div class="header svelte-141nkk0"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function ws(e,t){X(t,!0);let n=G(t,"blockedDialog",3,!1),r=G(t,"hiddenDialog",3,!1),a=G(t,"isDesktopAnimationOff",3,!1),o=R(null),i=R(null);vs({getDialog:()=>s(o),onOpen:t.onOpen,onStartClose:t.onStartClose,onClose:t.onClose}),fe(()=>{var _,p;t.stateDialog==="closing"&&(he.working?(_=s(o))==null||_.addEventListener("transitionend",()=>{var E;(E=s(o))==null||E.close()},{once:!0}):(p=s(o))==null||p.close())});var l=_s(),u=Y(l),v=k(u),c=k(v),d=k(c),f=k(d);{var h=_=>{var p=gs();ae(p,1,oe(["navigateButton","buttonBack"]),"svelte-141nkk0"),p.__click=[hs,t];var E=k(p);ke(E,()=>({"--size":"20px"})),pe(E.lastChild,{name:"back"});var L=D(E,2);tt(L,{children:(C,x)=>{var j=se("back");S(C,j)}}),S(_,p)};N(f,_=>{(!(n()||r())||n()&&t.unBlockedBack)&&t.onStartBack&&_(h)})}var g=D(d,2),w=k(g);{var y=_=>{var p=ms();ae(p,1,oe(["navigateButton","buttonClose"]),"svelte-141nkk0"),p.__click=[ps,t];var E=k(p);ke(E,()=>({"--size":"20px"})),pe(E.lastChild,{name:"close"});var L=D(E,2);tt(L,{children:(C,x)=>{var j=se("close");S(C,j)}}),S(_,p)};N(w,_=>{n()||r()||_(y)})}var T=D(c,2);Ve(T,()=>t.children),me(v,_=>b(i,_),()=>s(i)),me(u,_=>b(o,_),()=>s(o));var m=D(u,2);Jr(m,{get dialog(){return s(o)},get dialogInner(){return s(i)},get onClose(){return t.onStartClose}}),ie(()=>ae(u,1,oe([{open:t.stateDialog==="open",isAnimationOn:he.working,isDesktopAnimationOff:a(),hiddenDialog:r()}]),"svelte-141nkk0")),S(e,l),q()}be(["click"]);const ys=({onStartClose:e,onClose:t})=>{let n=R("close");return{get state(){return s(n)},set state(i){b(n,i,!0)},handleStartClose:(i=!1)=>{i||(b(n,"closing"),e==null||e())},handleOpen:()=>{b(n,"open")},handleClose:()=>{b(n,"close"),t==null||t()}}};function ks(e,t){X(t,!0);let n=G(t,"blockedDialog",3,!1),r=G(t,"hiddenDialog",3,!1),a=G(t,"onStartClose",3,()=>{}),o=G(t,"onClose",3,()=>{}),i=ys({onStartClose:a(),onClose:o()});fe(()=>{i.state==="close"&&t.shownDialog?i.state="opening":i.state==="open"&&!t.shownDialog&&i.handleStartClose(n())});var l=Ee(),u=Y(l);{var v=c=>{ws(c,{get stateDialog(){return i.state},get blockedDialog(){return n()},get unBlockedBack(){return t.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return i.handleOpen},get onStartBack(){return t.onStartBack},onStartClose:()=>{i.handleStartClose(n())},get onClose(){return i.handleClose},children:(d,f)=>{var h=Ee(),g=Y(h);Ve(g,()=>t.children),S(d,h)},$$slots:{default:!0}})};N(u,c=>{i.state!=="close"&&c(v)})}S(e,l),q()}function Zr(e,t){X(t,!0);let n=G(t,"blockedDialog",3,!1),r=G(t,"hiddenDialog",3,!1),a=G(t,"isLastDialog",3,!1),o=G(t,"onStartClose",3,()=>{}),i=G(t,"onClose",3,()=>{});const l=Q(()=>a()?void 0:t.onStartBack);ce(()=>(rs(),()=>{as()}));var u=Ee(),v=Y(u);{var c=f=>{fs(f,{get shownDialog(){return t.shownDialog},get blocked(){return n()},get unBlockedBack(){return t.unBlockedBack},get hiddenDialog(){return r()},get children(){return t.children},get onStartClose(){return t.onStartBack},onClose:i()})},d=f=>{ks(f,{get shownDialog(){return t.shownDialog},get blockedDialog(){return n()},get unBlockedBack(){return t.unBlockedBack},get hiddenDialog(){return r()},get children(){return t.children},get onStartBack(){return s(l)},onStartClose:o(),onClose:i()})};N(v,f=>{Mt()?f(c):f(d,!1)})}S(e,u),q()}let Qr=R(!1),An=R(!1);const De=e=>{b(Qr,e,!0),e||b(An,!1)},bs=()=>s(Qr),yt=e=>{b(An,e,!0)},Ss=()=>s(An);function Jn(e,t){X(t,!0);let n=G(t,"blocked",3,!1),r=G(t,"isLastDialog",3,!1),a=G(t,"onBack",3,()=>{});const o=Q(()=>n()||t.hidden||bs()),i=Q(()=>Ss()&&!r());Zr(e,{get shownDialog(){return t.shown},get blockedDialog(){return s(o)},get unBlockedBack(){return s(i)},get hiddenDialog(){return t.hidden},get isLastDialog(){return r()},onStartBack:()=>{(!s(o)||s(o)&&s(i))&&t.shown&&(Vr(),a()())},onStartClose:()=>{(!s(o)||s(o)&&s(i))&&t.shown&&gt()},onClose:()=>{Wr()},children:(c,d)=>{var f=Ee(),h=Y(f);Ve(h,()=>t.children),S(c,f)},$$slots:{default:!0}}),q()}const $r=()=>crypto.randomUUID(),Es="bookmarksStore",Ts=1,Te="bookmarks",ct="account";let te;window.addEventListener("unhandledrejection",e=>{alert("Error: "+e.reason.message)});const Cs=()=>new Promise((e,t)=>{const n=indexedDB.open(Es,Ts);n.addEventListener("upgradeneeded",()=>{const r=n.result;r.objectStoreNames.contains(Te)||r.createObjectStore(Te,{keyPath:"id"}),r.objectStoreNames.contains(ct)||r.createObjectStore(ct,{keyPath:"id"})}),n.addEventListener("success",()=>{e(),te=n.result,te.onversionchange=function(){te==null||te.close(),alert("app outdated, please reload the page")}}),n.addEventListener("blocked",()=>{t(),alert("app outdated, please reload the page")}),n.addEventListener("error",()=>{t(),console.error("Error",n.error)})}),Ds=()=>new Promise((e,t)=>{const n=te==null?void 0:te.transaction(ct,"readonly"),r=n==null?void 0:n.objectStore(ct).get("default");r==null||r.addEventListener("success",()=>{var o;console.log(r);const a=(o=r==null?void 0:r.result)==null?void 0:o.account;e(a)}),r==null||r.addEventListener("error",()=>{t()})}),ea=e=>new Promise((t,n)=>{const r=te==null?void 0:te.transaction(ct,"readwrite"),a=r==null?void 0:r.objectStore(ct),o=a==null?void 0:a.put({id:"default",account:e});o==null||o.addEventListener("success",()=>{console.log("account inited"),t()}),o==null||o.addEventListener("error",()=>{n()})}),ta=()=>new Promise((e,t)=>{const n=te==null?void 0:te.transaction(Te,"readonly"),r=n==null?void 0:n.objectStore(Te).getAll();r==null||r.addEventListener("success",()=>{const a=r.result;e(a)}),r==null||r.addEventListener("error",()=>{t()})}),Ls=async e=>new Promise((t,n)=>{const r=te==null?void 0:te.transaction(Te,"readwrite"),a=r==null?void 0:r.objectStore(Te),o=a==null?void 0:a.put({...e});o==null||o.addEventListener("success",()=>{t()}),o==null||o.addEventListener("error",()=>{n()})}),Ps=async e=>new Promise((t,n)=>{const r=te==null?void 0:te.transaction(Te,"readwrite"),a=r==null?void 0:r.objectStore(Te),o=a==null?void 0:a.delete(e);o==null||o.addEventListener("success",()=>{t()}),o==null||o.addEventListener("error",()=>{n()})}),xs=()=>new Promise((e,t)=>{const n=te==null?void 0:te.transaction(Te,"readwrite"),r=n==null?void 0:n.objectStore(Te),a=r==null?void 0:r.clear();a==null||a.addEventListener("success",()=>{e()}),a==null||a.addEventListener("error",()=>{t()})}),In=async()=>{await xs()},Bs=async e=>{const t=(await ta()).reduce((o,i)=>(o[i.id]=i,o),{}),n={},r=te==null?void 0:te.transaction(Te,"readwrite"),a=r==null?void 0:r.objectStore(Te);e.forEach(o=>{t[o.id]?t[o.id].lastUpdatedTimestamp<o.lastUpdatedTimestamp&&(n[o.id]=o):n[o.id]=o}),await Promise.all(Object.values(n).map(o=>{const i=a==null?void 0:a.put(o);return new Promise((l,u)=>{i==null||i.addEventListener("success",()=>{l()}),i==null||i.addEventListener("error",()=>{u()})})}))},Os=async e=>{const t=te==null?void 0:te.transaction(Te,"readwrite"),n=t==null?void 0:t.objectStore(Te);await Promise.all(Array.from({length:1e3},(r,a)=>{const o=[];for(let u=0;u<Math.random()*4;u++){const v=(Math.random()*100).toFixed();o.includes(v)||o.push(v)}const i={...e,url:`${e.url}${a}`,order:a,id:$r(),createdTimestamp:Date.now(),lastUpdatedTimestamp:Date.now(),title:o.join("#"),tags:o},l=n==null?void 0:n.put(i);return new Promise((u,v)=>{l==null||l.addEventListener("success",()=>{a%1e4===0&&console.log(`bookmark ${a} done`),u()}),l==null||l.addEventListener("error",()=>{console.log(`bookmark ${a} error`),v()})})}))};let ee=R({initedDB:!1});const Rn=async()=>{const e=await ta(),t=new Map,n=[];e.forEach(r=>{n[r.order]=r,t.set(r.id,r)}),console.log("loadedBookmarks"),b(ee,{...s(ee),bookmarks:n,mapBookmarks:t})};Cs().then(async()=>{b(ee,{...s(ee),initedDB:!0});const e=await Ds();e===void 0?Ie("start"):(Xo("start")&&(qo(),Kt("/")),b(ee,{...s(ee),account:e}),await Rn())}).catch(()=>{console.error("failed to init db")});const Ms=async()=>{await In(),await ea(null),b(ee,{...s(ee),account:null,mapBookmarks:new Map,bookmarks:[]})},As=async e=>{await In(),await ea(e),b(ee,{...s(ee),account:e,mapBookmarks:new Map,bookmarks:[]})},ut=()=>s(ee).bookmarks&&s(ee).mapBookmarks,na=()=>s(ee).bookmarks||[],Is=()=>s(ee).mapBookmarks||new Map,Rs=async e=>{if(!s(ee).bookmarks||!s(ee).mapBookmarks)throw new Error("Bookmarks store is not initialized");const t={...e,lastUpdatedTimestamp:Date.now()};s(ee).bookmarks[t.order]=t,s(ee).mapBookmarks.set(t.id,t),b(ee,{...s(ee)}),await Ls(t)},Ns=async e=>{await Os(e),await Rn()},js=async e=>{if(!s(ee).bookmarks||!s(ee).mapBookmarks)throw new Error("Bookmarks store is not initialized");const t=s(ee).mapBookmarks.get(e);s(ee).mapBookmarks.delete(e),s(ee).bookmarks[(t==null?void 0:t.order)||0]=void 0,b(ee,{...s(ee)}),await Ps(e)},Fs=async()=>{b(ee,{...s(ee),initedDB:!0,bookmarks:[],mapBookmarks:new Map}),await In()},Us=async(e="bookmarks-export.json")=>{const t=JSON.stringify({bookmarks:s(ee).bookmarks}),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),a=document.createElement("a");a.href=r,a.download=e,document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(r)},0)},Zn=async e=>{await Bs(e),await Rn()};let ra=R({});const aa=()=>s(ra),Hs=e=>{b(ra,e)};var zs=A('<input class="svelte-6l2oy0"/>');function hn(e,t){X(t,!0);let n=G(t,"value",15,"");var r=zs();ie(()=>ue(r,"placeholder",t.placeholder)),Re("focus",r,function(...a){var o;(o=t.onFocus)==null||o.apply(this,a)}),xn(r,n),S(e,r),q()}function Vs(e,t){X(t,!0);let n=G(t,"dialog",7);const r=3,a=50,o=5,i=.6,l=.3,u=.35,v=.95;let c=0,d=0,f=0,h=!1,g=!1,w=0,y=0,T=0;const m=()=>{c=0,d=0,h=!1,g=!1,w=0,y=0,T=0,f=0,_!==null&&(cancelAnimationFrame(_),_=null),p=null};let _=null,p=null;const E=M=>{if(!n()){console.warn("Touch start: No dialog element");return}if(t.sidebarState!=="opened"&&t.sidebarState!=="closed"){console.warn(`Touch start: Invalid sidebar state: ${t.sidebarState}`);return}c=M.touches[0].clientX,d=M.touches[0].clientY,f=performance.now(),h=!0,g=!1},L=M=>t.sidebarState==="closed"&&M>0||t.sidebarState==="closeSwiping"&&M>0||t.sidebarState==="opened"&&M<0||t.sidebarState==="openSwiping"&&M<0,C=M=>{if(n()){if(n().style.setProperty("--transition-timing","0s"),!n().open&&t.sidebarState==="closed")try{n().showModal(),n().offsetWidth}catch(I){console.error("Error opening dialog:",I);return}t.onSwipe();try{const I=window.getComputedStyle(n()),B=I.transform||I.webkitTransform||"";if(y=n().offsetWidth,t.sidebarState==="closeSwiping"||t.sidebarState==="closed"?w=-y:(t.sidebarState==="openSwiping"||t.sidebarState==="opened")&&(w=0),B&&B!=="none")try{w=new DOMMatrix(B).m41}catch{console.warn("Could not parse transform matrix, using default position")}g=!0}catch(I){console.error("Error during swipe initialization:",I),m()}}},x=()=>{if(!n())return;const I=(Math.abs(w+T*y/100)-y*.3-20)/y;n().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.25*(1-I)})`)},j=()=>{if(_=null,!p||!h||!n()||On())return;const{x:M,y:I}=p;p=null;const B=M-c,U=I-d,J=Math.abs(B)>Math.abs(U),O=Math.abs(B)>r;if(!g)if(J&&O&&L(B))try{C(B)}catch(re){console.error("Error initializing swipe:",re),m();return}else return;if(!L(B))return;n().style.setProperty("--transition-timing","0s");let P=w+B*v;const W=-y;P=Math.max(W,Math.min(0,P)),n().style.transform=`translate3d(${P}px, 0, 0)`,T=(P-w)/y*100,x()},F=M=>{if(!h)return;const I=M.touches[0].clientX,B=M.touches[0].clientY;p={x:I,y:B},_===null&&(_=requestAnimationFrame(j)),g&&Math.abs(I-c)>Math.abs(B-d)&&M.preventDefault()},z=M=>{const I=Math.abs(M);if(I>=i)return o;if(I>=l){const B=(I-l)/(i-l);return a-B*(a-o)}else return a},V=(M,I)=>{if(Math.abs(M)>=i)return u*.5;const U=Math.abs(T)/100;return I?u*Math.max(.5,1-U):u*Math.max(.5,U)},K=M=>{var P,W;if(_!==null&&(cancelAnimationFrame(_),_=null),p=null,!h||!n()){m();return}if(!g){m();return}let I=0;if((P=M==null?void 0:M.changedTouches)!=null&&P[0]){const Z=M.changedTouches[0].clientX,ve=performance.now()-f;ve>0&&(I=(Z-c)/ve)}const B=z(I);let U=null;t.sidebarState==="closeSwiping"?U=Math.abs(T)>B||I>l?"open":"close":t.sidebarState==="openSwiping"&&(U=Math.abs(T)>B||I<-l?"close":"open");const J=t.sidebarState==="closeSwiping"&&U==="open"||t.sidebarState==="openSwiping"&&U==="close",O=V(I,J);n().style.setProperty("--transition-timing",`${O}s`),n().offsetWidth,n().style.transform="",U==="open"?t.onOpen():U==="close"&&t.onClose(),(W=n())==null||W.style.removeProperty("--backdrop-bg"),m()};ce(()=>(document.addEventListener("touchstart",E,{passive:!0}),document.addEventListener("touchmove",F,{passive:!1}),document.addEventListener("touchend",K,{passive:!0}),document.addEventListener("touchcancel",K,{passive:!0}),()=>{document.removeEventListener("touchstart",E),document.removeEventListener("touchmove",F),document.removeEventListener("touchend",K),document.removeEventListener("touchcancel",K),_!==null&&cancelAnimationFrame(_)})),q()}var Ws=A('<dialog><div class="dialogInner svelte-1in1s0g"><!></div></dialog> <!> <!>',1);function Ks(e,t){X(t,!0);let n=350,r=R(null),a=R(null),o=Q(Ur);fe(()=>{Kr().length>0&&Ye({type:"close"})});const i=()=>{t.blocked||Ye({type:"close"})},l=()=>{t.blocked||Ye({type:"open"})},u=()=>{Ye({type:"opened"})},v=()=>{Ye({type:"closed"})},c=()=>{Ye({type:"swipe"})},d=C=>{C.preventDefault(),i()};ce(()=>{var C,x;return(C=s(r))==null||C.addEventListener("close",v),(x=s(r))==null||x.addEventListener("cancel",d),()=>{var j,F;(j=s(r))==null||j.removeEventListener("close",v),(F=s(r))==null||F.removeEventListener("cancel",d)}});const f=()=>{var C,x,j;(C=s(r))==null||C.style.removeProperty("--transition-timing"),(x=s(r))==null||x.style.removeProperty("transform"),(j=s(r))==null||j.style.removeProperty("--backdrop-bg")},h=Q(Gr);fe(()=>{var C,x,j;if(s(o),!!s(r))switch(s(o).type){case"closeSwiping":{const F=setTimeout(()=>{i()},3e3);return()=>{clearTimeout(F)}}case"openSwiping":{const F=setTimeout(()=>{l()},3e3);return()=>{clearTimeout(F)}}case"opening":{s(r).open||s(r).showModal(),s(r).getBoundingClientRect();const F=setTimeout(()=>{f()},n+1),z=()=>{clearTimeout(F),f()};return(C=s(r))==null||C.addEventListener("transitionend",z,{once:!0}),u(),()=>{var V;(V=s(r))==null||V.removeEventListener("transitionend",z)}}case"closing":{const F=setTimeout(()=>{s(o).type==="closing"&&v()},n+1),z=()=>{clearTimeout(F),v()};return(x=s(r))==null||x.addEventListener("transitionend",z,{once:!0}),()=>{var V;(V=s(r))==null||V.removeEventListener("transitionend",z)}}case"closed":(j=s(r))==null||j.close(),f();break;case"opened":f();break}});var g=Ws(),w=Y(g),y=k(w),T=k(y);{var m=C=>{var x=Ee(),j=Y(x);Ve(j,()=>t.children),S(C,x)};N(T,C=>{s(o).type!=="closed"&&C(m)})}me(y,C=>b(a,C),()=>s(a)),me(w,C=>b(r,C),()=>s(r));var _=D(w,2);{var p=C=>{Jr(C,{get dialog(){return s(r)},get dialogInner(){return s(a)},onClose:i})};N(_,C=>{s(o).type==="opened"&&!t.blocked&&C(p)})}var E=D(_,2);{var L=C=>{Vs(C,{onClose:i,onOpen:l,onSwipe:c,get sidebarState(){return s(o).type},get dialog(){return s(r)}})};N(E,C=>{(!s(h)&&s(o).type==="closed"||s(o).type==="opened"||s(o).type==="openSwiping"||s(o).type==="closeSwiping")&&!t.blocked&&C(L)})}ie(()=>ae(w,1,oe([{open:s(o).type==="opened",hidden:t.blocked,isAnimationOn:he.working&&(!he.isSwiping||!t.blocked)}]),"svelte-1in1s0g")),S(e,g),q()}var Ys=A('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>');function Ze(e,t){let n=Q(()=>t.style==="selected"?"45deg":"0deg");var r=Ys();r.__click=function(...i){var l;(l=t.onClick)==null||l.apply(this,i)};var a=k(r),o=D(a);ke(o,()=>({"--size":"20px","--rotate":s(n)})),pe(o.lastChild,{name:"plus"}),ie(()=>{ue(r,"type",t.type),ae(r,1,oe([{selectedTag:t.style==="selected"}]),"svelte-4jwrjv"),rt(a,`${t.title??""} `)}),S(e,r)}be(["click"]);const Xs=e=>{e.preventDefault(),Ie("settings")};var qs=A("<div></div>"),Gs=A('<div class="sidebarFixed svelte-ri1xjn"><div class="nav svelte-ri1xjn"><!> <a class="link svelte-ri1xjn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a></div> <div class="searchWrapper svelte-ri1xjn"><!></div> <!></div> <div></div>',1),Js=A("<div></div>"),Zs=A('<div class="sidebar svelte-ri1xjn"><div class="sidebarFixed svelte-ri1xjn"><div class="searchWrapper svelte-ri1xjn"><!></div> <!></div> <div class="tags svelte-ri1xjn"></div></div>');function Qs(e,t){X(t,!0);let n=R(null),r=R(""),a=Q(()=>{var w;return((w=new URLSearchParams(H.search).get("selectedTags"))==null?void 0:w.split(","))||[]});const o=()=>{const w=He();w.includes("settings")||w.push("settings");const y=new URLSearchParams(H.search);return y.set("stackPages",w.join(",")),`${H.pathname}?${y}`},i=w=>{const y=new URLSearchParams(H.search);y.set("selectedTags",[...s(a),w].join(",")),Kt(`${H.pathname}${y.size>0?`?${y.toString()}`:""}`),b(r,"")},l=w=>{const y=new URLSearchParams(H.search),T=s(a).filter(m=>m!==w);T.length===0?y.delete("selectedTags"):y.set("selectedTags",T.join(",")),Kt(`${H.pathname}${y.size>0?`?${y.toString()}`:""}`)};let u=Q(()=>ut()?Object.values(aa()).filter(w=>!s(a).some(y=>w.name===y)):[]),v=Q(o),c=Q(()=>He().length>0||ns());var d=Ee(),f=Y(d);{var h=w=>{Ks(w,{get blocked(){return s(c)},children:(y,T)=>{var m=Gs(),_=Y(m),p=k(_),E=k(p);Hr(E,{});var L=D(E,2);L.__click=[Xs];var C=k(L);ke(C,()=>({"--size":"20px"})),pe(C.lastChild,{name:"settings"});var x=D(p,2),j=k(x);hn(j,{placeholder:"Search tag",get value(){return s(r)},set value(K){b(r,K,!0)}});var F=D(x,2);{var z=K=>{var M=qs();ae(M,1,oe(["tags","selectedTags"]),"svelte-ri1xjn"),Ne(M,20,()=>s(a),I=>I,(I,B)=>{Ze(I,{get title(){return B},onClick:()=>l(B),style:"selected"})}),me(M,I=>b(n,I),()=>s(n)),S(K,M)};N(F,K=>{s(a).length>0&&K(z)})}var V=D(_,2);ae(V,1,oe(["tags","tagsWrapper"]),"svelte-ri1xjn"),Ne(V,21,()=>s(u),K=>K.name,(K,M)=>{var I=Ee(),B=Y(I);{var U=J=>{Ze(J,{get title(){return s(M).name},onClick:()=>i(s(M).name)})};N(B,J=>{(s(r)===""||s(M).name.toLowerCase().indexOf(s(r).toLowerCase())!==-1)&&J(U)})}S(K,I)}),ie(K=>{ue(L,"href",s(v)),Dt(V,`min-height: height: calc(100dvh - 190px - ${K??""}px);`)},[()=>s(n)?s(n).getBoundingClientRect().height:0]),S(y,m)},$$slots:{default:!0}})},g=w=>{var y=Zs(),T=k(y),m=k(T),_=k(m);hn(_,{placeholder:"Search tag",get value(){return s(r)},set value(C){b(r,C,!0)}});var p=D(m,2);{var E=C=>{var x=Js();ae(x,1,oe(["tags","selectedTags"]),"svelte-ri1xjn"),Ne(x,20,()=>s(a),j=>j,(j,F)=>{Ze(j,{get title(){return F},onClick:()=>l(F),style:"selected"})}),S(C,x)};N(p,C=>{s(a).length>0&&C(E)})}var L=D(T,2);Ne(L,21,()=>s(u),C=>C.name,(C,x)=>{var j=Ee(),F=Y(j);{var z=V=>{Ze(V,{get title(){return s(x).name},onClick:()=>i(s(x).name)})};N(F,V=>{(s(r)===""||s(x).name.toLowerCase().indexOf(s(r).toLowerCase())!==-1)&&V(z)})}S(C,j)}),S(w,y)};N(f,w=>{Mt()?w(h):w(g,!1)})}S(e,d),q()}be(["click"]);var $s=A('<div class="input-container svelte-hz572l"><input/> <div class="error-message svelte-hz572l"><!></div></div>');function on(e,t){X(t,!0);let n=G(t,"value",15,""),r=G(t,"error",3,"");var a=$s(),o=k(a);o.__input=function(...c){var d;(d=t.onInput)==null||d.apply(this,c)};let i;var l=D(o,2),u=k(l);{var v=c=>{var d=se();ie(()=>rt(d,r())),S(c,d)};N(u,c=>{r()&&c(v)})}ie(c=>{ue(o,"placeholder",t.placeholder),i=ae(o,1,"svelte-hz572l",null,i,c)},[()=>({error:!!r()})]),Re("blur",o,function(...c){var d;(d=t.onBlur)==null||d.apply(this,c)}),Re("focus",o,function(...c){var d;(d=t.onFocus)==null||d.apply(this,c)}),xn(o,n),S(e,a),q()}be(["input"]);var ei=A("<div></div>"),ti=A('<form class="svelte-wqwsb3"><!> <!> <textarea placeholder="notes" class="svelte-wqwsb3"></textarea> <div class="boxtags"><div class="sidebarFixed"><!></div> <div class="tags svelte-wqwsb3"><!> <!></div> <div class="searchWrapper svelte-wqwsb3"><!></div></div> <button class="buttonSubmit svelte-wqwsb3" type="submit"> </button></form>');function oa(e,t){X(t,!0);let n=G(t,"initialTitle",3,""),r=G(t,"initialUrl",3,""),a=G(t,"initialDescription",3,""),o=G(t,"initialTags",19,()=>[]),i=G(t,"mode",3,"add"),l=R(""),u=R(de(n())),v=R(de(r())),c=R(de(a())),d=R(de(o().filter(P=>P!=="inbox")));const f=P=>{s(d).includes(P)||b(d,[...s(d),P],!0)},h=P=>{const W=s(d).filter(Z=>Z!==P);W.length===0?b(d,[],!0):b(d,W,!0)};let g=Q(()=>ut()?[...na().reduce((P,W)=>(W==null||W.tags.forEach(Z=>{P.has(Z)||P.add(Z)}),P),new Set)]:[]),w=Q(()=>ut()?s(g).filter(P=>!s(d).some(W=>P===W)&&P!=="inbox"):[]),y=Q(()=>s(w).find(P=>P.toLowerCase()===s(l).toLowerCase())||s(d).includes(s(l))),T=Q(()=>s(w).filter(P=>s(l)===""?!0:P.toLowerCase().indexOf(s(l).toLowerCase())!==-1).slice(0,s(y)||s(l)===""?3:2));const m=P=>{P.preventDefault(),t.onSubmit({title:s(u).trim().slice(0,256)||"unkwown",url:s(v).trim().slice(0,2048),description:s(c).trim().slice(0,2048),tags:s(d).length>0?s(d):["inbox"]})};var _=ti(),p=k(_);on(p,{placeholder:"url",get value(){return s(v)},set value(P){b(v,P,!0)}});var E=D(p,2);on(E,{placeholder:"title",get value(){return s(u)},set value(P){b(u,P,!0)}});var L=D(E,2),C=D(L,2),x=k(C),j=k(x);{var F=P=>{var W=ei();ae(W,1,oe(["tags","selectedTags"]),"svelte-wqwsb3"),Ne(W,20,()=>s(d),Z=>Z,(Z,re)=>{Ze(Z,{get title(){return re},onClick:()=>h(re),type:"button",style:"selected"})}),S(P,W)};N(j,P=>{s(d).length>0&&P(F)})}var z=D(x,2),V=k(z);{var K=P=>{var W=Ee(),Z=Y(W);Ne(Z,16,()=>s(T),re=>re,(re,ve)=>{Ze(re,{get title(){return ve},onClick:()=>f(ve)})}),S(P,W)};N(V,P=>{s(l)!==""&&P(K)})}var M=D(V,2);{var I=P=>{Ze(P,{get title(){return s(l)},onClick:()=>{f(s(l)),b(l,"")}})};N(M,P=>{!s(y)&&s(l)!==""&&P(I)})}var B=D(z,2),U=k(B);on(U,{placeholder:"search tag",get value(){return s(l)},set value(P){b(l,P,!0)}});var J=D(C,2),O=k(J);ie(()=>rt(O,i()==="add"?"add":"edit")),Re("submit",_,m),xn(L,()=>s(c),P=>b(c,P)),S(e,_),q()}function ni(e,t){X(t,!0);let n=R(!0);const r=()=>{t.onClose()},a=()=>{b(n,!1)},o=({title:i,url:l,description:u,tags:v})=>{Rs({...t.bookmark,title:i,url:l,description:u,tags:v.map(c=>c.trim())}),a()};Zr(e,{get shownDialog(){return s(n)},onClose:r,children:(i,l)=>{oa(i,{get initialTitle(){return t.bookmark.title},get initialUrl(){return t.bookmark.url},get initialDescription(){return t.bookmark.description},get initialTags(){return t.bookmark.tags},onSubmit:o,mode:"edit"})},$$slots:{default:!0}}),q()}const ri=(e,t,n)=>{const r=aa();t.bookmark.tags.forEach(a=>{if(s(n).includes(a)&&r[a].connections===1){const o=new URLSearchParams(H.search),i=s(n).filter(l=>l!==a);i.length===0?o.delete("selectedTags"):o.set("selectedTags",i.join(",")),Yo(`${H.pathname}${o.size>0?`?${o.toString()}`:""}`)}}),js(t.bookmark.id)},ai=(e,t)=>{b(t,!0)};var oi=A('<div><button class="menuButton svelte-j5rwpt">Edit</button> <button class="menuButton svelte-j5rwpt">Delete</button></div> <!>',1);function si(e,t){X(t,!0);let n=G(t,"menu",15),r=G(t,"shownMenu",15),a=R(!1),o=Q(()=>{var g;return((g=new URLSearchParams(H.search).get("selectedTags"))==null?void 0:g.split(","))||[]});const i=g=>{var w;g.target!==n()&&!((w=n())!=null&&w.contains(g.target))&&r(!1)};ce(()=>(document.addEventListener("focusin",i),()=>{document.removeEventListener("focusin",i)})),fe(()=>{r()&&n()?(n().style.setProperty("display","flex"),n().getBoundingClientRect(),n().style.setProperty("opacity","1"),n().style.setProperty("transform","scale(1)")):n()&&(n().style.removeProperty("opacity"),n().style.removeProperty("transform"),n().getBoundingClientRect(),n().addEventListener("transitionend",()=>{!r()&&n()&&n().style.removeProperty("display")},{once:!0}))});const l=()=>{b(a,!1)};var u=oi(),v=Y(u),c=k(v);c.__click=[ai,a];var d=D(c,2);d.__click=[ri,t,o],me(v,g=>n(g),()=>n());var f=D(v,2);{var h=g=>{ni(g,{get bookmark(){return t.bookmark},onClose:l})};N(f,g=>{s(a)&&g(h)})}ie(()=>ae(v,1,oe(["bookmarkMenu",{showMenuUp:t.showMenuUp}]),"svelte-j5rwpt")),S(e,u),q()}be(["click"]);const ii=(e,t)=>{b(t,!s(t))},li=(e,t)=>{navigator.clipboard.writeText(t.bookmark.url),Io("Link copied to clipboard")},ci=(e,t)=>{b(t,!0)},ui=(e,t)=>{b(t,!1)};var di=A('<li class="bookmark svelte-y0qjzh"><img class="bookmarkIcon" height="16" width="16" alt="icon"/> <a class="bookmarkLink svelte-y0qjzh" target="_blank" rel="noopener noreferrer"> </a> <div class="spacer svelte-y0qjzh"></div> <div><button class="button svelte-y0qjzh"><!> <!></button> <button><!> <!></button> <!></div></li>');function fi(e,t){X(t,!0);let n=R(!1),r=R(!1),a=R(null),o=null;const i=p=>{var E;p.target!==o&&p.target!==s(a)&&!((E=s(a))!=null&&E.contains(p.target))&&b(r,!1)};ce(()=>(document.addEventListener("click",i),()=>{document.removeEventListener("click",i)}));const l=p=>{try{return`https://external-content.duckduckgo.com/ip3/${new URL(p).host}.ico`}catch{return""}};var u=di();u.__focusin=[ci,n],u.__focusout=[ui,n];var v=k(u),c=D(v,2),d=k(c),f=D(c,4),h=k(f);h.__click=[li,t];var g=k(h);pe(g,{name:"copy"});var w=D(g,2);tt(w,{children:(p,E)=>{var L=se("copy link");S(p,L)}});var y=D(h,2);y.__click=[ii,r],ae(y,1,oe(["button","buttonMenu"]),"svelte-y0qjzh");var T=k(y);pe(T,{name:"menu"});var m=D(T,2);tt(m,{children:(p,E)=>{var L=se("show menu");S(p,L)}}),me(y,p=>b(a,p),()=>s(a));var _=D(y,2);si(_,{menu:o,get bookmark(){return t.bookmark},get showMenuUp(){return t.showMenuUp},get shownMenu(){return s(r)},set shownMenu(p){b(r,p,!0)}}),ie(p=>{ue(v,"src",p),ue(c,"tabindex",t.focusHidden?-1:0),ue(c,"href",t.bookmark.url),rt(d,t.bookmark.title),ae(f,1,oe(["bookmarkMenuWrapper",{bookmarkMenuWrapperActive:s(n)}]),"svelte-y0qjzh"),ue(h,"tabindex",t.focusHidden?-1:0),ue(y,"tabindex",t.focusHidden?-1:0)},[()=>l(t.bookmark.url)]),S(e,u),q()}be(["focusin","focusout","click"]);const _t=de({ref:null}),vi=(e,t)=>{s(t)&&s(t).scrollTo({top:0,behavior:"smooth"})};var hi=A('<div class="emptyMessage svelte-146z9is">No bookmarks found</div>'),gi=A('<div class="wrapperButtonTop svelte-146z9is"><button class="buttonTop svelte-146z9is"><!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button></div>'),pi=A('<div class="searchWrapper svelte-146z9is"><!></div> <div class="wrapperFeed svelte-146z9is"><div class="wrapperContainer svelte-146z9is"><div class="feed svelte-146z9is"><ul class="svelte-146z9is"></ul> <!></div></div></div> <!>',1);function mi(e,t){X(t,!0);let n=R(null),r=50,a=R(0),o=R(0),i=R(0),l=R(de([])),u=R(""),v=Q(()=>Mt()?s(n):_t.ref),c=null,d=null,f=R(!1),h=0;const g=Q(Wo);fe(()=>{var O;s(u),s(g),(O=s(v))==null||O.scrollTo(0,0)});const w=()=>{if(s(v)){const O=s(v).scrollTop||0;O===0?b(f,!1):!s(f)&&h>O?b(f,!0):s(f)&&h<O&&b(f,!1),h=O}},y=()=>{qr(),c||(c=requestAnimationFrame(()=>{var W;w();const O=((W=s(v))==null?void 0:W.scrollTop)||0;b(i,O,!0);const P=Math.ceil(s(a)/r);b(o,Math.floor(O/(r*P))*(r*P)),c=null}))},T=()=>{d||(d=requestAnimationFrame(()=>{var W;w(),b(a,window.innerHeight-180||0,!0);const O=((W=s(v))==null?void 0:W.scrollTop)||0;b(i,O,!0);const P=Math.ceil(s(a)/r);b(o,Math.floor(O/(r*P))*(r*P)),d=null}))};ce(()=>{T(),y()}),fe(()=>{var O;return(O=s(v))==null||O.addEventListener("scroll",y),window.addEventListener("resize",T),()=>{var P;(P=s(v))==null||P.removeEventListener("scroll",y),window.removeEventListener("resize",T)}}),fe(()=>{const O=na(),P=[],W={};for(let Z=O.length-1;Z>=0;Z--){const re=O[Z];if(re&&!(s(g).length&&s(g).some(ve=>!re.tags.includes(ve)))&&!(s(u)&&!(re.title.toLowerCase().includes(s(u).toLowerCase())||re.url.toLowerCase().includes(s(u).toLowerCase())||re.description.toLowerCase().includes(s(u).toLowerCase())))){if(re.tags)for(const ve of re.tags)W[ve]?W[ve].connections++:W[ve]={name:ve,connections:1};P.push(re)}}Hs(W),b(l,P,!0)});const m=Q(()=>s(l).length*r);let p=Q(()=>{const O=Math.ceil(s(a)/r);let P=Math.floor(s(o)/r);return P=P-Math.min(P,O),s(l).slice(P,P+O*3)}),E=Q(()=>r*Math.ceil(s(a)/r));const L=Q(()=>s(o)-Math.min(s(o),s(E))),C=()=>{s(v)&&s(v).scrollTo({top:0,behavior:"smooth"})};var x=pi(),j=Y(x),F=k(j);hn(F,{onFocus:C,placeholder:"Search",get value(){return s(u)},set value(O){b(u,O,!0)}});var z=D(j,2),V=k(z),K=k(V),M=k(K);Ne(M,23,()=>s(p),O=>O.id,(O,P,W)=>{const Z=Q(()=>s(W)*r<s(i)-s(L)-r/2||s(W)*r>s(i)-s(L)+Math.floor(s(a)/r)*r),re=Q(()=>(s(W)+3)*r<s(i)-s(L)-r/2||(s(W)+3)*r>s(i)-s(L)+Math.floor(s(a)/r)*r);fi(O,{get focusHidden(){return s(Z)},get showMenuUp(){return s(re)},get bookmark(){return s(P)}})});var I=D(M,2);{var B=O=>{var P=hi();S(O,P)};N(I,O=>{s(p).length===0&&ut()&&O(B)})}me(V,O=>b(n,O),()=>s(n));var U=D(z,2);{var J=O=>{var P=gi(),W=k(P);W.__click=[vi,v];var Z=k(W);tt(Z,{children:(ve,$t)=>{var At=se("top");S(ve,At)}});var re=D(Z,2);ke(re,()=>({"--size":"22px"})),pe(re.lastChild,{name:"up"}),S(O,P)};N(U,O=>{s(f)&&O(J)})}ie(O=>{Dt(K,`min-height: ${O??""}px`),Dt(M,`transform: translateY(${s(L)??""}px);`)},[()=>Math.max((s(m)>s(a),s(m)),0)]),S(e,x),q()}be(["click"]);var _i=A('<!> <div class="content svelte-cu0ar8"><!></div>',1);function wi(e){var t=_i(),n=Y(t);Qs(n,{});var r=D(n,2),a=k(r);mi(a,{}),S(e,t)}var Ge=(e=>(e.Light="light",e.System="system",e.Dark="dark",e))(Ge||{});let sa=R(de(localStorage.getItem("colorScheme")||"system"));const yi=e=>{localStorage.setItem("colorScheme",e),e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?document.documentElement.dataset.colorScheme="dark":document.documentElement.dataset.colorScheme="light":document.documentElement.dataset.colorScheme=e,b(sa,e,!0)},ki=()=>s(sa);var bi=A('<div class="wrapper svelte-f3jwyy"><fieldset class="switcher svelte-f3jwyy"><legend class="vh svelte-f3jwyy">Color Scheme</legend> <input id="light" type="radio" aria-label="Light"/> <label for="light" title="Light" aria-label="Light"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="system" type="radio" aria-label="System"/> <label for="system" title="System" aria-label="System"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <input id="dark" type="radio" aria-label="Dark"/> <label for="dark" title="Dark" aria-label="Dark"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></label> <div class="wrapSwitcherStatus svelte-f3jwyy"><div class="switcherStatus svelte-f3jwyy"></div></div></fieldset></div>');function Si(e,t){X(t,!0);const n=Q(ki),r=y=>{const T=y.target.value;yi(T)},a="color-scheme-switcher";var o=bi(),i=k(o),l=D(k(i),2);ae(l,1,oe(["vh","input"]),"svelte-f3jwyy"),ue(l,"name",a),l.__change=r;var u=D(l,2);ae(u,1,oe(["switcherButton","light"]),"svelte-f3jwyy");var v=k(u);ke(v,()=>({"--size":"20px"})),pe(v.lastChild,{name:"sun"});var c=D(u,2);ae(c,1,oe(["vh","input"]),"svelte-f3jwyy"),ue(c,"name",a),c.__change=r;var d=D(c,2);ae(d,1,oe(["switcherButton","system"]),"svelte-f3jwyy");var f=k(d);ke(f,()=>({"--size":"14px"})),pe(f.lastChild,{name:"a"});var h=D(d,2);ae(h,1,oe(["vh","input"]),"svelte-f3jwyy"),ue(h,"name",a),h.__change=r;var g=D(h,2);ae(g,1,oe(["switcherButton","dark"]),"svelte-f3jwyy");var w=k(g);return ke(w,()=>({"--size":"20px"})),pe(w.lastChild,{name:"moon"}),ie(()=>{Nt(l,Ge.Light),jt(l,s(n)===Ge.Light),Nt(c,Ge.System),jt(c,s(n)===Ge.System),Nt(h,Ge.Dark),jt(h,s(n)===Ge.Dark)}),S(e,o),q({handleChange:r})}be(["change"]);const Ei=()=>{Ie("importBookmarks")},Ti=()=>{Ie("exportBookmarks")},Ci=()=>{Ie("clearStore")};var Di=A('<div class="version svelte-1cryup1"><span> </span></div>'),Li=A('<div class="svelte-1cryup1"><!> <ul class="svelte-1cryup1"><li class="svelte-1cryup1"><button class="button svelte-1cryup1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-1cryup1">import bookmarks</span></button></li> <li class="svelte-1cryup1"><button class="button svelte-1cryup1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-1cryup1">export bookmarks</span></button></li> <li class="svelte-1cryup1"><button class="button svelte-1cryup1"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span class="buttonTitle svelte-1cryup1">clear store</span></button></li></ul> <!></div>');function Pi(e,t){X(t,!0);let n=R("");ce(()=>{const T=new AbortController;return fetch("/build-metadata.json",{signal:T.signal}).then(m=>m.json()).then(m=>{b(n,`${m.buildHash}`)}),()=>{T.abort()}});var r=Li(),a=k(r);Si(a,{});var o=D(a,2),i=k(o),l=k(i);l.__click=[Ei];var u=k(l);ke(u,()=>({"--size":"20px"})),pe(u.lastChild,{name:"import"});var v=D(i,2),c=k(v);c.__click=[Ti];var d=k(c);ke(d,()=>({"--size":"20px"})),pe(d.lastChild,{name:"export"});var f=D(v,2),h=k(f);h.__click=[Ci];var g=k(h);ke(g,()=>({"--size":"20px"})),pe(g.lastChild,{name:"trash"});var w=D(o,2);{var y=T=>{var m=Di(),_=k(m),p=k(_);ie(E=>rt(p,`version: 0.0.1 build_date: "${E??""}" build_hash:
				${s(n)??""}`),[()=>new Date(1751990271628).toISOString().replaceAll("T"," ").replace(/\..*/,"")]),S(T,m)};N(w,T=>{s(n)&&T(y)})}S(e,r),q()}be(["click"]);function xi(e,t){X(t,!1);const n=()=>{Vr()},r=({title:a,url:o,description:i,tags:l})=>{Ns({title:a,url:o,description:i,tags:l.map(u=>u.trim())}),n()};Ot(),oa(e,{onSubmit:r}),q()}var Bi=A('<button type="button"><!></button>');function ye(e,t){let n=G(t,"type",3,"standard"),r=G(t,"fullWidth",3,!1);var a=Bi();a.__click=function(...i){var l;(l=t.onClick)==null||l.apply(this,i)};var o=k(a);Ve(o,()=>t.children),ie(()=>ae(a,1,oe(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:r()}]),"svelte-h0mt7s")),S(e,a)}be(["click"]);var Oi=A('<div class="loader svelte-1ygr46m"></div>');function Lt(e){var t=Oi();S(e,t)}const gn=(e,t,n,r=new Set,a={})=>{var o,i;for(const l of e.children)if(l.tagName==="DT"){const u=l.querySelector(":scope > A"),v=l.querySelector(":scope > H3");if(u){const c=u.getAttribute("href"),d=u.textContent||"unknown";if(!c)return n;const f=t.find(h=>h.toLowerCase()==="bookmarks bar")?t.filter(h=>h.toLowerCase()!=="bookmarks bar"):["other"];if(a[c])a[c].tags=[...new Set([...a[c].tags,...f])];else{const h={id:$r(),order:n.length,url:c,title:d,description:"",tags:f.length>0?f:[],lastUpdatedTimestamp:Date.now(),createdTimestamp:Date.now()};a[h.url]=h,n.push(h)}}else if(v){const c=(o=v.textContent)==null?void 0:o.trim();if(c&&((i=v.nextElementSibling)==null?void 0:i.tagName)==="DL"){const d=[...t];d.push(c);const f=v.nextElementSibling;r.has(f)||(r.add(f),gn(f,d,n,r,a))}}}else l.tagName!=="DL"&&l.children.length>0&&(r.has(l)||(r.add(l),gn(l,[...t],n,r,a)));return n},Mi=async e=>{const t=await e.text(),a=new DOMParser().parseFromString(t,"text/html").querySelector("DL");return a?gn(a,[],[]):[]},Ai=e=>{const t=Math.floor(Date.now()/1e3),n={};e.forEach(a=>{const o=a.tags||["Imported"];if(o.length===0){n.ROOT||(n.ROOT=[]),n.ROOT.push(a);return}o.forEach(i=>{n[i]||(n[i]=[]),n[i].push(a)})});let r=`<!DOCTYPE NETSCAPE-Bookmark-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>Bookmarks</TITLE>
<H1>Bookmarks</H1>
<DL><p>
<DT><H3 ADD_DATE="${t}" LAST_MODIFIED="${t}" PERSONAL_TOOLBAR_FOLDER="true">Bookmarks Bar</H3>
<DL><p>`;return Object.keys(n).forEach(a=>{a!=="ROOT"&&a!=="other"&&(r+=`
	<DT><H3 ADD_DATE="${t}" LAST_MODIFIED="${t}">${a}</H3>
	<DL><p>`,n[a].forEach(o=>{const i=o.title.replace(/"/g,"&quot;");r+=`
		<DT><A HREF="${o.url}" ADD_DATE="${Math.floor(o.createdTimestamp/1e3)||t}">${i}</A>`}),r+=`
	</DL><p>`)}),n.ROOT&&n.ROOT.forEach(a=>{const o=a.title.replace(/"/g,"&quot;");r+=`
	<DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdTimestamp/1e3)||t}">${o}</A>`}),r+=`
</DL><p>`,n.other&&n.other.forEach(a=>{const o=a.title.replace(/"/g,"&quot;");r+=`
	<DT><A HREF="${a.url}" ADD_DATE="${Math.floor(a.createdTimestamp/1e3)||t}">${o}</A>`}),r+="</DL><p>",r},Qn=async(e,t)=>{const n=e.target;!n.files||n.files.length===0||await t(n.files[0])};var Ii=A('<div class="mobileContainer svelte-1n1lt8i"><!></div> <input type="file" accept=".json, .html" style="display: none;"/>',1),Ri=A('<div class="desktopContainer svelte-1n1lt8i"><div class="desktopButtonContainer svelte-1n1lt8i"><!></div> <div role="button" tabindex="-1"><div tabindex="-1" class="dropzone-content svelte-1n1lt8i"><p class="svelte-1n1lt8i">Drag and drop your file here</p> <p class="svelte-1n1lt8i">or</p></div> <input type="file" accept=".json, .html" style="display: none;"/></div></div>'),Ni=A('<p class="message svelte-1n1lt8i">Select a file to import your bookmarks</p> <!>',1),ji=A('<p class="message svelte-1n1lt8i">Importing bookmarks...</p> <!>',1),Fi=A('<p class="message success svelte-1n1lt8i">Bookmarks imported successfully!</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),Ui=A('<p class="message error svelte-1n1lt8i">Something went wrong</p> <div class="buttonContainer svelte-1n1lt8i"><!></div>',1),Hi=A('<div class="content svelte-1n1lt8i"><!></div>');function zi(e,t){X(t,!0);let n=R("idle"),r=R(null),a=R(!1),o=R(null);const i=()=>{gt()};fe(()=>{De(s(n)==="loading")}),ce(()=>(s(r)&&s(r).addEventListener("cancel",m=>{m.preventDefault(),m.stopImmediatePropagation(),m.stopPropagation()}),()=>{De(!1)}));const l=async m=>{const _=await m.text(),p=JSON.parse(_),E=[];if(!p.bookmarks)throw new Error("Invalid import file format");for(const L of Object.values(p.bookmarks))L&&E.push(L);await Zn(E)},u=async m=>{b(n,"loading");try{if(m.name.endsWith(".json"))await l(m);else if(m.name.endsWith(".html"))await Zn(await Mi(m));else throw new Error("Unsupported file format. Please upload a JSON or HTML file.");await new Promise(_=>{setTimeout(()=>{_(!0)},1e3)}),b(n,"success")}catch{b(n,"error")}},v=()=>{var m;(m=s(r))==null||m.click()},c=m=>{m.preventDefault(),m.stopPropagation(),b(a,!0)},d=m=>{m.preventDefault(),m.stopPropagation(),b(a,!1)},f=m=>{m.preventDefault(),m.stopPropagation(),b(a,!0)},h=async m=>{var p;if(m.preventDefault(),m.stopPropagation(),b(a,!1),!((p=m.dataTransfer)!=null&&p.files)||m.dataTransfer.files.length===0)return;const _=m.dataTransfer.files[0];if(_.type!=="application/json"&&_.type!=="text/html"){b(n,"error");return}await u(_)};var g=Hi(),w=k(g);{var y=m=>{var _=Ni(),p=D(Y(_),2);{var E=C=>{var x=Ii(),j=Y(x),F=k(j);ye(F,{onClick:v,children:(V,K)=>{var M=se("Select File");S(V,M)},$$slots:{default:!0}});var z=D(j,2);z.__change=[Qn,u],me(z,V=>b(r,V),()=>s(r)),S(C,x)},L=C=>{var x=Ri(),j=k(x),F=k(j);ye(F,{onClick:v,children:(K,M)=>{var I=se("Select File");S(K,I)},$$slots:{default:!0}});var z=D(j,2),V=D(k(z),2);V.__change=[Qn,u],me(V,K=>b(r,K),()=>s(r)),me(z,K=>b(o,K),()=>s(o)),ie(()=>ae(z,1,oe(["dropzone",{active:s(a)}]),"svelte-1n1lt8i")),Re("dragenter",z,c),Re("dragover",z,f),Re("dragleave",z,d),Re("drop",z,h),S(C,x)};N(p,C=>{Mt()?C(E):C(L,!1)})}S(m,_)},T=(m,_)=>{{var p=L=>{var C=ji(),x=D(Y(C),2);Lt(x),S(L,C)},E=(L,C)=>{{var x=F=>{var z=Fi(),V=D(Y(z),2),K=k(V);ye(K,{onClick:i,children:(M,I)=>{var B=se("close");S(M,B)},$$slots:{default:!0}}),S(F,z)},j=(F,z)=>{{var V=K=>{var M=Ui(),I=D(Y(M),2),B=k(I);ye(B,{onClick:()=>{b(n,"idle")},children:(U,J)=>{var O=se("Try Again");S(U,O)},$$slots:{default:!0}}),S(K,M)};N(F,K=>{s(n)==="error"&&K(V)},z)}};N(L,F=>{s(n)==="success"?F(x):F(j,!1)},C)}};N(m,L=>{s(n)==="loading"?L(p):L(E,!1)},_)}};N(w,m=>{s(n)==="idle"?m(y):m(T,!1)})}S(e,g),q()}be(["change"]);const Vi=(e,t,n)=>{t(e.target.value),n.onChange(t())};var Wi=A('<input type="radio"/> <label> </label>',1),Ki=A('<div class="wrapper svelte-1065asd"><fieldset class="switcher svelte-1065asd"><!> <div class="wrapSwitcherStatus svelte-1065asd"><div class="switcherStatus svelte-1065asd"></div></div></fieldset></div>');function Yi(e,t){const n=po();X(t,!0);let r=G(t,"value",7);const a=`switcher-${n}`;var o=Ki(),i=k(o),l=k(i);Ne(l,17,()=>t.items,c=>c.title,(c,d)=>{var f=Wi(),h=Y(f);ae(h,1,oe(["vh","input"]),"svelte-1065asd"),h.__change=[Vi,r,t];var g=D(h,2);ae(g,1,oe(["switcherButton"]),"svelte-1065asd");var w=k(g);ie(()=>{ue(h,"id",`${s(d).title}-${n}`),ue(h,"name",a),Nt(h,s(d).value),jt(h,s(d).value===r()),ue(h,"aria-label",s(d).title),ue(g,"for",`${s(d).title}-${n}`),ue(g,"title",s(d).title),ue(g,"aria-label",s(d).title),rt(w,s(d).value)}),S(c,f)});var u=D(l,2),v=k(u);ie(c=>Dt(v,c),[()=>`transform: translateX(${t.items.findIndex(c=>c.value===r())*100}%)`]),S(e,o),q()}be(["change"]);var Xi=A('<p class="message svelte-8vhup1">Export bookmarks</p> <div class="format-switcher svelte-8vhup1"><!> <p class="format-description svelte-8vhup1"><!></p></div> <div class="buttonContainer svelte-8vhup1"><!></div>',1),qi=A('<p class="message svelte-8vhup1">Exporting data...</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Gi=A('<p class="message svelte-8vhup1">Bookmarks exported successfully!</p> <div class="buttonContainer svelte-8vhup1"><!></div>',1),Ji=A('<div class="content svelte-8vhup1"><!></div>');function Zi(e,t){X(t,!0);let n=R("idle"),r=R("html");const a=()=>{gt()};fe(()=>{De(s(n)==="loading")}),ce(()=>()=>{De(!1)});const o=async()=>{b(n,"loading"),setTimeout(async()=>{if(s(r)==="json")await Us().finally(()=>{b(n,"success")});else try{const c=Ai(Is()),d=new Blob([c],{type:"text/html"}),f=URL.createObjectURL(d),h=document.createElement("a");h.href=f,h.download=`bookmarks_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(h),h.click(),document.body.removeChild(h),URL.revokeObjectURL(f),b(n,"success")}catch(c){console.error("Error exporting as HTML:",c),b(n,"success")}},0)};var i=Ji(),l=k(i);{var u=c=>{var d=Xi(),f=D(Y(d),2),h=k(f);Yi(h,{items:[{title:"HTML",value:"html"},{title:"JSON",value:"json"}],get value(){return s(r)},onChange:p=>{b(r,p,!0)}});var g=D(h,2),w=k(g);{var y=p=>{var E=se("JSON format (App compatible, a faster format)");S(p,E)},T=p=>{var E=se("HTML format (Browser compatible)");S(p,E)};N(w,p=>{s(r)==="json"?p(y):p(T,!1)})}var m=D(f,2),_=k(m);ye(_,{onClick:o,children:(p,E)=>{var L=se("Export");S(p,L)},$$slots:{default:!0}}),S(c,d)},v=(c,d)=>{{var f=g=>{var w=qi(),y=D(Y(w),2),T=k(y);Lt(T),S(g,w)},h=(g,w)=>{{var y=T=>{var m=Gi(),_=D(Y(m),2),p=k(_);ye(p,{onClick:a,children:(E,L)=>{var C=se("Close");S(E,C)},$$slots:{default:!0}}),S(T,m)};N(g,T=>{s(n)==="success"&&T(y)},w)}};N(c,g=>{s(n)==="loading"?g(f):g(h,!1)},d)}};N(l,c=>{s(n)==="idle"?c(u):c(v,!1)})}S(e,i),q()}var Qi=A('<div class="content svelte-9hh95f"><p class="message svelte-9hh95f">use app</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div> <div class="buttonContainerItem svelte-9hh95f"><!></div></div></div>');function $i(e,t){X(t,!0);let n=R("idle");const r=()=>{Ie("sign")},a=async()=>{b(n,"loading"),await Ms(),De(!1),gt()};fe(()=>{De(s(n)==="idle"||s(n)==="loading")}),ce(()=>(De(!0),()=>{De(!1)}));var o=Qi(),i=D(k(o),2),l=k(i),u=k(l);ye(u,{onClick:r,fullWidth:!0,children:(d,f)=>{var h=se("with account");S(d,h)},$$slots:{default:!0}});var v=D(l,2),c=k(v);ye(c,{onClick:a,fullWidth:!0,type:"secondary",children:(d,f)=>{var h=se("without account");S(d,h)},$$slots:{default:!0}}),S(e,o),q()}var el=A('<div class="content svelte-9hh95f"><p class="message svelte-9hh95f">sign in / sign up</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div> <div class="buttonContainerItem svelte-9hh95f"><!></div></div></div>');function tl(e,t){X(t,!1);const n=async()=>{Ie("signin")},r=async()=>{Ie("signup")};ce(()=>(De(!0),yt(!0),()=>{yt(!1)})),Ot();var a=el(),o=D(k(a),2),i=k(o),l=k(i);ye(l,{onClick:n,fullWidth:!0,children:(c,d)=>{var f=se("sign in");S(c,f)},$$slots:{default:!0}});var u=D(i,2),v=k(u);ye(v,{onClick:r,fullWidth:!0,children:(c,d)=>{var f=se("sign up");S(c,f)},$$slots:{default:!0}}),S(e,a),q()}function pt(e){const t=String.fromCharCode(...new Uint8Array(e));return window.btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function $n(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");const n=t.length%4;return n&&(t+="=".repeat(4-n)),t}function er(e){try{const t=atob(e),n=new Uint8Array(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer}catch(t){throw console.error("Error decoding base64:",t,"Input:",e),t}}var _e=(e=>(e[e.Signup=0]="Signup",e[e.SignupError=1]="SignupError",e[e.CreateKeyStart=2]="CreateKeyStart",e[e.CreateKeyError=3]="CreateKeyError",e[e.CreateKeyProcess=4]="CreateKeyProcess",e))(_e||{}),nl=A('<p class="message svelte-9hh95f">signup</p> <!>',1),rl=A('<p class="message svelte-9hh95f">error signup</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),al=A('<div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>'),ol=A('<p class="message svelte-9hh95f">creating client key</p> <!>',1),sl=A('<p class="message svelte-9hh95f">error to create client key</p> <div class="buttonContainer svelte-9hh95f"><div class="buttonContainerItem svelte-9hh95f"><!></div></div>',1),il=A('<div class="content svelte-9hh95f"><!></div>');function ll(e,t){X(t,!0);let n="",r,a=R(de(_e.Signup));const o=async()=>{b(a,_e.CreateKeyProcess,!0);const d={challenge:er($n(n)),allowCredentials:[{id:new Uint8Array(r),type:"public-key"}],timeout:6e4};try{const f=await navigator.credentials.get({publicKey:d}),h=pt(f.response.signature);await As({clientKey:n,secretKey:h}),De(!1),gt()}catch(f){console.log(f)}},i=async()=>{b(a,_e.Signup,!0);try{const d=await fetch("/api/signup/start",{method:"post"}).then(h=>h.json());if(n=pt(crypto.getRandomValues(new Uint8Array(32)).buffer),d.challenge===n){b(a,_e.SignupError,!0);return}const f={challenge:er($n(d.challenge)),rp:{id:"localhost",name:"bookmarks"},user:{id:crypto.getRandomValues(new Uint8Array(10)),name:"bookmarks_account",displayName:"bookmarks_account"},pubKeyCredParams:[{type:"public-key",alg:-7},{type:"public-key",alg:-257}],authenticatorSelection:{userVerification:"required"},timeout:6e4,attestation:"none"};try{const h=await navigator.credentials.create({publicKey:f});if(h){const g={clientKey:n,challenge:d.challenge,id:h.id,rawId:pt(h.rawId),type:h.type,response:{clientDataJSON:pt(h.response.clientDataJSON),attestationObject:pt(h.response.attestationObject)}},w=await fetch("/api/signup/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});r=h.rawId,b(a,_e.CreateKeyStart,!0)}else throw new Error}catch(h){b(a,_e.SignupError,!0),console.log(h)}}catch(d){b(a,_e.SignupError,!0),console.log(d)}};fe(()=>{yt(!(s(a)===_e.Signup||s(a)===_e.CreateKeyProcess))}),ce(()=>(De(!0),yt(!0),i(),()=>{yt(!1)}));var l=il(),u=k(l);{var v=d=>{var f=nl(),h=D(Y(f),2);Lt(h),S(d,f)},c=(d,f)=>{{var h=w=>{var y=rl(),T=D(Y(y),2),m=k(T),_=k(m);ye(_,{onClick:()=>i(),fullWidth:!0,children:(p,E)=>{var L=se("try again");S(p,L)},$$slots:{default:!0}}),S(w,y)},g=(w,y)=>{{var T=_=>{var p=al(),E=k(p),L=k(E);ye(L,{onClick:()=>o(),fullWidth:!0,children:(C,x)=>{var j=se("create client key");S(C,j)},$$slots:{default:!0}}),S(_,p)},m=(_,p)=>{{var E=C=>{var x=ol(),j=D(Y(x),2);Lt(j),S(C,x)},L=(C,x)=>{{var j=F=>{var z=sl(),V=D(Y(z),2),K=k(V),M=k(K);ye(M,{onClick:()=>o(),fullWidth:!0,children:(I,B)=>{var U=se("try again");S(I,U)},$$slots:{default:!0}}),S(F,z)};N(C,F=>{s(a)===_e.CreateKeyError&&F(j)},x)}};N(_,C=>{s(a)===_e.CreateKeyProcess?C(E):C(L,!1)},p)}};N(w,_=>{s(a)===_e.CreateKeyStart?_(T):_(m,!1)},y)}};N(d,w=>{s(a)===_e.SignupError?w(h):w(g,!1)},f)}};N(u,d=>{s(a)===_e.Signup?d(v):d(c,!1)})}S(e,l),q()}var cl=A('<p class="message svelte-49o1d">Are you sure you want to clear the store?</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),ul=A('<p class="message svelte-49o1d">clearing store...</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),dl=A('<p class="message svelte-49o1d">store cleared</p> <div class="buttonContainer svelte-49o1d"><!></div>',1),fl=A('<div class="content svelte-49o1d"><!></div>');function vl(e,t){X(t,!0);let n=R("idle");const r=()=>{gt()};fe(()=>{De(s(n)==="loading")}),ce(()=>()=>{De(!1)});const a=()=>{b(n,"loading"),Fs().finally(()=>{setTimeout(()=>{b(n,"success")},1e3)})};var o=fl(),i=k(o);{var l=v=>{var c=cl(),d=D(Y(c),2),f=k(d);ye(f,{onClick:a,type:"dangerous",children:(h,g)=>{var w=se("Clear store");S(h,w)},$$slots:{default:!0}}),S(v,c)},u=(v,c)=>{{var d=h=>{var g=ul(),w=D(Y(g),2),y=k(w);Lt(y),S(h,g)},f=(h,g)=>{{var w=y=>{var T=dl(),m=D(Y(T),2),_=k(m);ye(_,{onClick:r,children:(p,E)=>{var L=se("Close");S(p,L)},$$slots:{default:!0}}),S(y,T)};N(h,y=>{s(n)==="success"&&y(w)},g)}};N(v,h=>{s(n)==="loading"?h(d):h(f,!1)},c)}};N(i,v=>{s(n)==="idle"?v(l):v(u,!1)})}S(e,o),q()}var hl=A('<div class="svelte-t4bw1y"><!></div>');function We(e,t){X(t,!0);let n=R(null);ce(()=>{s(n)&&(s(n).getBoundingClientRect(),s(n).style.opacity="1")});var r=hl(),a=k(r);Ve(a,()=>t.children),me(r,o=>b(n,o),()=>s(n)),S(e,r),q()}const tr=(e,t=ar)=>{var n=Ee(),r=Y(n);{var a=i=>{We(i,{children:(l,u)=>{Pi(l,{})},$$slots:{default:!0}})},o=(i,l)=>{{var u=c=>{We(c,{children:(d,f)=>{xi(d,{})},$$slots:{default:!0}})},v=(c,d)=>{{var f=g=>{We(g,{children:(w,y)=>{zi(w,{})},$$slots:{default:!0}})},h=(g,w)=>{{var y=m=>{We(m,{children:(_,p)=>{Zi(_,{})},$$slots:{default:!0}})},T=(m,_)=>{{var p=L=>{We(L,{children:(C,x)=>{vl(C,{})},$$slots:{default:!0}})},E=(L,C)=>{{var x=F=>{We(F,{children:(z,V)=>{$i(z,{})},$$slots:{default:!0}})},j=(F,z)=>{{var V=M=>{We(M,{children:(I,B)=>{tl(I,{})},$$slots:{default:!0}})},K=(M,I)=>{{var B=U=>{We(U,{children:(J,O)=>{ll(J,{})},$$slots:{default:!0}})};N(M,U=>{t()==="signup"&&U(B)},I)}};N(F,M=>{t()==="sign"?M(V):M(K,!1)},z)}};N(L,F=>{t()==="start"?F(x):F(j,!1)},C)}};N(m,L=>{t()==="clearStore"?L(p):L(E,!1)},_)}};N(g,m=>{t()==="exportBookmarks"?m(y):m(T,!1)},w)}};N(c,g=>{t()==="importBookmarks"?g(f):g(h,!1)},d)}};N(i,c=>{t()==="newBookmark"?c(u):c(v,!1)},l)}};N(r,i=>{t()==="settings"?i(a):i(o,!1)})}S(e,n)};var gl=A("<!> <!>",1);function pl(e,t){X(t,!0);let n=Q(Kr),r=Q(ut);var a=gl(),o=Y(a);{var i=c=>{wi(c)};N(o,c=>{s(r)&&c(i)})}var l=D(o,2);{var u=c=>{var d=Ee(),f=Y(d);Ne(f,17,()=>s(n),yo,(h,g,w)=>{const y=Q(()=>{var T;return w!==s(n).length-1&&!!((T=s(n)[w+1])!=null&&T.shown)});Jn(h,{get shown(){return s(g).shown},get hidden(){return s(y)},isLastDialog:w===0,children:(T,m)=>{tr(T,()=>s(g).page)},$$slots:{default:!0}})}),S(c,d)},v=(c,d)=>{{var f=h=>{const g=Q(()=>s(n).length===1);Jn(h,{onBack:()=>Wr(),get shown(){return s(n)[s(n).length-1].shown},hidden:!1,get isLastDialog(){return s(g)},children:(w,y)=>{tr(w,()=>s(n)[s(n).length-1].page)},$$slots:{default:!0}})};N(c,h=>{s(n).length>0&&h(f)},d)}};N(l,c=>{Mt()?c(u):c(v,!1)})}S(e,a),q()}function ml(){const e=navigator.userAgent;if(!(/iPad|iPhone|iPod/.test(e)&&!window.MSStream))return!1;const n=/Safari/.test(e)&&!/Chrome/.test(e)&&!/CriOS/.test(e)&&!/FxiOS/.test(e),r=/Macintosh/.test(e)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>1;return!!n||!!r}const ia=ml();function _l(e,t){X(t,!1),ce(()=>{an(),document.addEventListener("focusin",an),document.addEventListener("focusout",an),document.addEventListener("touchmove",function(n){On()&&ia&&n.preventDefault()},{passive:!1})}),Ot(),q()}function wl(e,t){X(t,!1);let n=0;ce(()=>{const r=document.querySelector("div");r&&ia&&r.addEventListener("touchstart",a=>{a.pageX>20&&a.pageX<window.innerWidth-20||a.preventDefault()}),document.addEventListener("touchstart",a=>{n=a.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",a=>{const i=a.touches[0].clientX-n;(n<50&&i>0||n>window.innerWidth-50&&i<0)&&a.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),Ot(),q()}var yl=A('<!> <!> <!> <main><!> <div class="container svelte-ngsolt"><!></div></main>',1);function kl(e,t){X(t,!0),ce(async()=>{await new Promise(h=>setTimeout(h,100)),await oo(),he.working=!0});let n=Q(()=>He().length>0),r=Q(ut);var a=yl(),o=Y(a);wl(o,{});var i=D(o,2);_l(i,{});var l=D(i,2);No(l,{});var u=D(l,2),v=k(u);{var c=h=>{$o(h,{})};N(v,h=>{s(r)&&h(c)})}var d=D(v,2),f=k(d);pl(f,{}),me(u,h=>_t.ref=h,()=>_t==null?void 0:_t.ref),ie(()=>{Dt(u,`--swiping-ratio: ${he.swipingRatio}; --transition-timing-default: ${he.duration}s;`),ae(u,1,oe(["main",{isAnimationOn:he.working&&!he.isSwiping,open:s(n)}]),"svelte-ngsolt")}),S(e,a),q()}mo(kl,{target:document.getElementById("app")});
