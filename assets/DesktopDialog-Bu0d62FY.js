import{o as H,p as j,a1 as h,u as F,a2 as M,g as s,a as L,f as I,h as P,i as A,c as v,e as k,a3 as G,l as z,m as f,a4 as Y,n as Z,a5 as $,T as ee,q as y,r as E,b as u,d as J,a6 as te,O as V,P as p,V as q,t as R,w as ae,k as T}from"./index-C9vv4zUQ.js";const ne=({getDialog:l,onOpen:e,onStartClose:a,onClose:r})=>{const d=t=>{t.preventDefault(),a()},n=()=>{r?.()};H(()=>{const t=l();return t?.addEventListener("cancel",d),t?.addEventListener("close",n),()=>{t?.removeEventListener("cancel",d),t?.removeEventListener("close",n)}}),H(()=>{const t=l();t?.showModal(),t?.getBoundingClientRect(),e()})};var oe=(l,e)=>{e.onStartBack()},le=I('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),se=(l,e)=>{e.onStartClose()},ie=I('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),re=I('<dialog><div class="dialogInner svelte-19g9dt6"><div class="header svelte-19g9dt6"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function de(l,e){j(e,!0);let a=h(e,"blockedDialog",3,!1),r=h(e,"hiddenDialog",3,!1),d=h(e,"isDesktopAnimationOff",3,!1),n=L(null),t=L(null);ne({getDialog:()=>s(n),onOpen:e.onOpen,onStartClose:e.onStartClose,onClose:e.onClose}),F(()=>{e.stateDialog==="closing"&&(M.working?s(n)?.addEventListener("transitionend",()=>{s(n)?.close()},{once:!0}):s(n)?.close())});const C=ee(te);var D=re(),c=P(D),_=v(c),m=v(_),S=v(m),b=v(S);{var B=o=>{var i=le();y(i,1,E(["navigateButton","buttonBack"]),"svelte-19g9dt6"),i.__click=[oe,e];var g=v(i);V(g,()=>({"--size":"20px"})),p(g.lastChild,{name:"back"});var O=k(g,2);q(O,{children:(w,X)=>{var x=R("back");u(w,x)}}),u(o,i)};A(b,o=>{(!(a()||r())||a()&&e.unBlockedBack)&&e.onStartBack&&o(B)})}var K=k(S,2),N=v(K);{var Q=o=>{var i=ie();y(i,1,E(["navigateButton","buttonClose"]),"svelte-19g9dt6"),i.__click=[se,e];var g=v(i);V(g,()=>({"--size":"20px"})),p(g.lastChild,{name:"close"});var O=k(g,2);q(O,{children:(w,X)=>{var x=R("close");u(w,x)}}),u(o,i)};A(N,o=>{a()||r()||o(Q)})}var U=k(m,2);G(U,()=>e.children),z(_,o=>f(t,o),()=>s(t)),z(c,o=>f(n,o),()=>s(n));var W=k(c,2);Y(W,{get dialog(){return s(n)},get dialogInner(){return s(t)},get onClose(){return e.onStartClose}}),Z(()=>{$(c,`height: ${s(C)+64}px`),y(c,1,E([{open:e.stateDialog==="open",isAnimationOn:M.working,isDesktopAnimationOff:d(),hiddenDialog:r()}]),"svelte-19g9dt6")}),u(l,D),J()}ae(["click"]);const ce=({onStartClose:l,onClose:e})=>{let a=L("close");return{get state(){return s(a)},set state(t){f(a,t,!0)},handleStartClose:(t=!1)=>{t||(f(a,"closing"),l?.())},handleOpen:()=>{f(a,"open")},handleClose:()=>{f(a,"close"),e?.()}}};function ve(l,e){j(e,!0);let a=h(e,"blockedDialog",3,!1),r=h(e,"hiddenDialog",3,!1),d=h(e,"onStartClose",3,()=>{}),n=h(e,"onClose",3,()=>{}),t=ce({onStartClose:d(),onClose:n()});F(()=>{t.state==="close"&&e.shownDialog?t.state="opening":t.state==="open"&&!e.shownDialog&&t.handleStartClose(a())});var C=T(),D=P(C);{var c=_=>{de(_,{get stateDialog(){return t.state},get blockedDialog(){return a()},get unBlockedBack(){return e.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return t.handleOpen},get onStartBack(){return e.onStartBack},onStartClose:()=>{t.handleStartClose(a())},get onClose(){return t.handleClose},children:(m,S)=>{var b=T(),B=P(b);G(B,()=>e.children),u(m,b)},$$slots:{default:!0}})};A(D,_=>{t.state!=="close"&&_(c)})}u(l,C),J()}export{ve as default};
