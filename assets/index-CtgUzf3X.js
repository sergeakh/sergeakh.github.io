const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MobileSidebar-B0Iq_kmS.js","assets/MobileSidebar-1JBO3KHP.css","assets/About-COJQBqc4.js","assets/About-Dq-CGdnI.css","assets/AccessKeys-COiINMe4.js","assets/webauthn-Dy13XHj8.js","assets/AccessKeys-BDHupy-W.css","assets/Account-9Chgo4Uw.js","assets/Account-B_4WPOGa.css","assets/Auth-CSySSQOE.js","assets/Auth-DUSiNlzc.css","assets/ClearStore-B_HYbL2o.js","assets/ClearStore-CFMXavw3.css","assets/ConfirmAccessKey-hAZ10jyz.js","assets/Input-CE8ZVMOJ.js","assets/Input-j0KFa_-O.css","assets/crypto-Cpa8lgv9.js","assets/ConfirmAccessKey-C5pMGk3u.css","assets/EditNote-BfZCbTpO.js","assets/NoteForm-C4MNJbDf.js","assets/NoteForm-DfRmfh2L.css","assets/Exit-Bmb-u3EN.js","assets/Exit-BVeFekri.css","assets/ExportData-CWvJ2cF6.js","assets/ExportData-DAHHg6lv.css","assets/ImportData-Df9R_fhH.js","assets/ImportData-BoD3Qa8Y.css","assets/NewNote-DoYXgaqO.js","assets/Settings-BiwoL2uK.js","assets/Settings-BN8xpILX.css","assets/Signin-b9oik-BG.js","assets/Signin-DlYwjIyC.css","assets/Signup-D_X-SsV8.js","assets/Signup-BlQ-6iHI.css","assets/Subscription-D9EeNtFc.js","assets/Subscription-DkTFHdRa.css","assets/Sync-BmnFDrze.js","assets/Sync-QQfGH1sn.css"])))=>i.map(i=>d[i]);
var Ds=Object.defineProperty;var Lo=e=>{throw TypeError(e)};var Ns=(e,t,n)=>t in e?Ds(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var wn=(e,t,n)=>Ns(e,typeof t!="symbol"?t+"":t,n),Ur=(e,t,n)=>t.has(e)||Lo("Cannot "+n);var D=(e,t,n)=>(Ur(e,t,"read from private field"),n?n.call(e):t.get(e)),ae=(e,t,n)=>t.has(e)?Lo("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),$=(e,t,n,r)=>(Ur(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),ze=(e,t,n)=>(Ur(e,t,"access private method"),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();const ta=!1;var lo=Array.isArray,As=Array.prototype.indexOf,co=Array.from,Zr=Object.defineProperty,kn=Object.getOwnPropertyDescriptor,na=Object.getOwnPropertyDescriptors,Ts=Object.prototype,Ls=Array.prototype,uo=Object.getPrototypeOf,Mo=Object.isExtensible;const se=()=>{};function Ms(e){return typeof e?.then=="function"}function Os(e){return e()}function br(e){for(var t=0;t<e.length;t++)e[t]()}function Is(){var e,t,n=new Promise((r,o)=>{e=r,t=o});return{promise:n,resolve:e,reject:t}}function Rs(e,t,n=!1){return e===void 0?n?t():t:e}const et=2,fo=4,Nr=8,On=16,Lt=32,ln=64,vo=128,lt=256,kr=512,Be=1024,ct=2048,Gt=4096,ht=8192,cn=16384,ho=32768,In=65536,Oo=1<<17,Bs=1<<18,Rn=1<<19,ra=1<<20,Jr=1<<21,go=1<<22,rn=1<<23,on=Symbol("$state"),js=Symbol("legacy props"),Fs=Symbol(""),_o=new class extends Error{constructor(){super(...arguments);wn(this,"name","StaleReactionError");wn(this,"message","The reaction that called `getAbortSignal()` was re-run or destroyed")}};function oa(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Hs(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function zs(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Us(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Vs(e){throw new Error("https://svelte.dev/e/effect_orphan")}function qs(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Ws(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ks(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Ys(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function $s(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Gs(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ar=1,Tr=2,aa=4,Xs=8,Zs=16,Js=1,Qs=2,ei=4,ti=8,ni=16,ri=1,oi=2,Ee=Symbol(),ai="http://www.w3.org/1999/xhtml";let si=!1;function sa(e){return e===this.v}function ii(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function ia(e){return!ii(e,this.v)}let Bn=!1,li=!1;function ci(){Bn=!0}let fe=null;function Wt(e){fe=e}function ye(e){return la().get(e)}function Se(e,t){return la().set(e,t),t}function W(e,t=!1,n){fe={p:fe,c:null,e:null,s:e,x:null,l:Bn&&!t?{s:null,u:null,$:[]}:null}}function K(e){var t=fe,n=t.e;if(n!==null){t.e=null;for(var r of n)ka(r)}return e!==void 0&&(t.x=e),fe=t.p,e??{}}function jn(){return!Bn||fe!==null&&fe.l===null}function la(e){return fe===null&&oa(),fe.c??(fe.c=new Map(ui(fe)||void 0))}function ui(e){let t=e.p;for(;t!==null;){const n=t.c;if(n!==null)return n;t=t.p}return null}let zt=[],Pr=[];function ca(){var e=zt;zt=[],br(e)}function di(){var e=Pr;Pr=[],br(e)}function fi(){return zt.length>0||Pr.length>0}function un(e){if(zt.length===0&&!Kn){var t=zt;queueMicrotask(()=>{t===zt&&ca()})}zt.push(e)}function vi(){zt.length>0&&ca(),Pr.length>0&&di()}const hi=new WeakMap;function ua(e){var t=ee;if(t===null)return J.f|=rn,e;if((t.f&ho)===0){if((t.f&vo)===0)throw!t.parent&&e instanceof Error&&da(e),e;t.b.error(e)}else An(e,t)}function An(e,t){for(;t!==null;){if((t.f&vo)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e instanceof Error&&da(e),e}function da(e){const t=hi.get(e);t&&(Zr(e,"message",{value:t.message}),Zr(e,"stack",{value:t.stack}))}const Vr=new Set;let ve=null,pr=null,Qr=new Set,sn=[],Lr=null,eo=!1,Kn=!1;var Jn,xn,Rt,Qn,er,Jt,Dn,Qt,Bt,Nn,tr,nr,_t,fa,mr,to;const Cr=class Cr{constructor(){ae(this,_t);wn(this,"current",new Map);ae(this,Jn,new Map);ae(this,xn,new Set);ae(this,Rt,0);ae(this,Qn,null);ae(this,er,!1);ae(this,Jt,[]);ae(this,Dn,[]);ae(this,Qt,[]);ae(this,Bt,[]);ae(this,Nn,[]);ae(this,tr,[]);ae(this,nr,[]);wn(this,"skipped_effects",new Set)}process(t){sn=[],pr=null;for(const o of t)ze(this,_t,fa).call(this,o);if(D(this,Jt).length===0&&D(this,Rt)===0){ze(this,_t,to).call(this);var n=D(this,Qt),r=D(this,Bt);$(this,Qt,[]),$(this,Bt,[]),$(this,Nn,[]),pr=ve,ve=null,Io(n),Io(r),ve===null?ve=this:Vr.delete(this),D(this,Qn)?.resolve()}else ze(this,_t,mr).call(this,D(this,Qt)),ze(this,_t,mr).call(this,D(this,Bt)),ze(this,_t,mr).call(this,D(this,Nn));for(const o of D(this,Jt))Cn(o);for(const o of D(this,Dn))Cn(o);$(this,Jt,[]),$(this,Dn,[])}capture(t,n){D(this,Jn).has(t)||D(this,Jn).set(t,n),this.current.set(t,t.v)}activate(){ve=this}deactivate(){ve=null,pr=null;for(const t of Qr)if(Qr.delete(t),t(),ve!==null)break}neuter(){$(this,er,!0)}flush(){sn.length>0?ha():ze(this,_t,to).call(this),ve===this&&(D(this,Rt)===0&&Vr.delete(this),this.deactivate())}increment(){$(this,Rt,D(this,Rt)+1)}decrement(){if($(this,Rt,D(this,Rt)-1),D(this,Rt)===0){for(const t of D(this,tr))Ge(t,ct),Tn(t);for(const t of D(this,nr))Ge(t,Gt),Tn(t);$(this,Qt,[]),$(this,Bt,[]),this.flush()}else this.deactivate()}add_callback(t){D(this,xn).add(t)}settled(){return(D(this,Qn)??$(this,Qn,Is())).promise}static ensure(){if(ve===null){const t=ve=new Cr;Vr.add(ve),Kn||Cr.enqueue(()=>{ve===t&&t.flush()})}return ve}static enqueue(t){un(t)}};Jn=new WeakMap,xn=new WeakMap,Rt=new WeakMap,Qn=new WeakMap,er=new WeakMap,Jt=new WeakMap,Dn=new WeakMap,Qt=new WeakMap,Bt=new WeakMap,Nn=new WeakMap,tr=new WeakMap,nr=new WeakMap,_t=new WeakSet,fa=function(t){t.f^=Be;for(var n=t.first;n!==null;){var r=n.f,o=(r&(Lt|ln))!==0,a=o&&(r&Be)!==0,s=a||(r&ht)!==0||this.skipped_effects.has(n);if(!s&&n.fn!==null){if(o)n.f^=Be;else if((r&fo)!==0)D(this,Bt).push(n);else if((r&Be)===0)if((r&go)!==0){var l=n.b?.is_pending()?D(this,Dn):D(this,Jt);l.push(n)}else Rr(n)&&((n.f&On)!==0&&D(this,Nn).push(n),Cn(n));var u=n.first;if(u!==null){n=u;continue}}var c=n.parent;for(n=n.next;n===null&&c!==null;)n=c.next,c=c.parent}},mr=function(t){for(const n of t)((n.f&ct)!==0?D(this,tr):D(this,nr)).push(n),Ge(n,Be);t.length=0},to=function(){if(!D(this,er))for(const t of D(this,xn))t();D(this,xn).clear()};let Vt=Cr;function va(e){var t=Kn;Kn=!0;try{for(var n;;){if(vi(),sn.length===0&&!fi()&&(ve?.flush(),sn.length===0))return Lr=null,n;ha()}}finally{Kn=t}}function ha(){var e=En;eo=!0;try{var t=0;for(jo(!0);sn.length>0;){var n=Vt.ensure();if(t++>1e3){var r,o;gi()}n.process(sn),qt.clear()}}finally{eo=!1,jo(e),Lr=null}}function gi(){try{qs()}catch(e){An(e,Lr)}}let Zt=null;function Io(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var r=e[n++];if((r.f&(cn|ht))===0&&Rr(r)&&(Zt=[],Cn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Ca(r):r.fn=null),Zt?.length>0)){qt.clear();for(const o of Zt)Cn(o);Zt=[]}}Zt=null}}function Tn(e){for(var t=Lr=e;t.parent!==null;){t=t.parent;var n=t.f;if(eo&&t===ee&&(n&On)!==0)return;if((n&(ln|Lt))!==0){if((n&Be)===0)return;t.f^=Be}}sn.push(t)}function _i(e){let t=0,n=Tt(0),r;return()=>{Li()&&(i(n),Ir(()=>(t===0&&(r=Kt(()=>e(()=>Yn(n)))),t+=1,()=>{un(()=>{t-=1,t===0&&(r?.(),r=void 0,Yn(n))})})))}}var pi=In|Rn|vo;function mi(e,t,n){new wi(e,t,n)}var ft,st,io,wt,en,yt,it,$e,St,jt,tn,Ft,nn,Ht,xr,Dr,qe,yi,Si,wr,yr,no;class wi{constructor(t,n,r){ae(this,qe);wn(this,"parent");ae(this,ft,!1);ae(this,st);ae(this,io,null);ae(this,wt);ae(this,en);ae(this,yt);ae(this,it,null);ae(this,$e,null);ae(this,St,null);ae(this,jt,null);ae(this,tn,0);ae(this,Ft,0);ae(this,nn,!1);ae(this,Ht,null);ae(this,xr,()=>{D(this,Ht)&&Nt(D(this,Ht),D(this,tn))});ae(this,Dr,_i(()=>($(this,Ht,Tt(D(this,tn))),()=>{$(this,Ht,null)})));$(this,st,t),$(this,wt,n),$(this,en,r),this.parent=ee.b,$(this,ft,!!D(this,wt).pending),$(this,yt,Fn(()=>{ee.b=this;{try{$(this,it,Re(()=>r(D(this,st))))}catch(o){this.error(o)}D(this,Ft)>0?ze(this,qe,yr).call(this):$(this,ft,!1)}},pi))}is_pending(){return D(this,ft)||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!D(this,wt).pending}update_pending_count(t){ze(this,qe,no).call(this,t),$(this,tn,D(this,tn)+t),Qr.add(D(this,xr))}get_effect_pending(){return D(this,Dr).call(this),i(D(this,Ht))}error(t){var n=D(this,wt).onerror;let r=D(this,wt).failed;if(D(this,nn)||!n&&!r)throw t;D(this,it)&&(Qe(D(this,it)),$(this,it,null)),D(this,$e)&&(Qe(D(this,$e)),$(this,$e,null)),D(this,St)&&(Qe(D(this,St)),$(this,St,null));var o=!1,a=!1;const s=()=>{if(o){return}o=!0,a&&Gs(),Vt.ensure(),$(this,tn,0),D(this,St)!==null&&bt(D(this,St),()=>{$(this,St,null)}),$(this,ft,this.has_pending_snippet()),$(this,it,ze(this,qe,wr).call(this,()=>($(this,nn,!1),Re(()=>D(this,en).call(this,D(this,st)))))),D(this,Ft)>0?ze(this,qe,yr).call(this):$(this,ft,!1)};var l=J;try{je(null),a=!0,n?.(t,s),a=!1}catch(u){An(u,D(this,yt)&&D(this,yt).parent)}finally{je(l)}r&&un(()=>{$(this,St,ze(this,qe,wr).call(this,()=>{$(this,nn,!0);try{return Re(()=>{r(D(this,st),()=>t,()=>s)})}catch(u){return An(u,D(this,yt).parent),null}finally{$(this,nn,!1)}}))})}}ft=new WeakMap,st=new WeakMap,io=new WeakMap,wt=new WeakMap,en=new WeakMap,yt=new WeakMap,it=new WeakMap,$e=new WeakMap,St=new WeakMap,jt=new WeakMap,tn=new WeakMap,Ft=new WeakMap,nn=new WeakMap,Ht=new WeakMap,xr=new WeakMap,Dr=new WeakMap,qe=new WeakSet,yi=function(){try{$(this,it,Re(()=>D(this,en).call(this,D(this,st))))}catch(t){this.error(t)}$(this,ft,!1)},Si=function(){const t=D(this,wt).pending;t&&($(this,$e,Re(()=>t(D(this,st)))),Vt.enqueue(()=>{$(this,it,ze(this,qe,wr).call(this,()=>(Vt.ensure(),Re(()=>D(this,en).call(this,D(this,st)))))),D(this,Ft)>0?ze(this,qe,yr).call(this):(bt(D(this,$e),()=>{$(this,$e,null)}),$(this,ft,!1))}))},wr=function(t){var n=ee,r=J,o=fe;ut(D(this,yt)),je(D(this,yt)),Wt(D(this,yt).ctx);try{return t()}catch(a){return ua(a),null}finally{ut(n),je(r),Wt(o)}},yr=function(){const t=D(this,wt).pending;D(this,it)!==null&&($(this,jt,document.createDocumentFragment()),bi(D(this,it),D(this,jt))),D(this,$e)===null&&$(this,$e,Re(()=>t(D(this,st))))},no=function(t){var n;if(!this.has_pending_snippet()){this.parent&&ze(n=this.parent,qe,no).call(n,t);return}$(this,Ft,D(this,Ft)+t),D(this,Ft)===0&&($(this,ft,!1),D(this,$e)&&bt(D(this,$e),()=>{$(this,$e,null)}),D(this,jt)&&(D(this,st).before(D(this,jt)),$(this,jt,null)))};function bi(e,t){for(var n=e.nodes_start,r=e.nodes_end;n!==null;){var o=n===r?null:or(n);t.append(n),n=o}}function ki(e,t,n){const r=jn()?rr:Mr;if(t.length===0){n(e.map(r));return}var o=ve,a=ee,s=Pi();Promise.all(t.map(l=>Ei(l))).then(l=>{o?.activate(),s();try{n([...e.map(r),...l])}catch(u){(a.f&cn)===0&&An(u,a)}o?.deactivate(),ga()}).catch(l=>{An(l,a)})}function Pi(){var e=ee,t=J,n=fe,r=ve;return function(){ut(e),je(t),Wt(n),r?.activate()}}function ga(){ut(null),je(null),Wt(null)}function rr(e){var t=et|ct,n=J!==null&&(J.f&et)!==0?J:null;return ee===null||n!==null&&(n.f&lt)!==0?t|=lt:ee.f|=Rn,{ctx:fe,deps:null,effects:null,equals:sa,f:t,fn:e,reactions:null,rv:0,v:Ee,wv:0,parent:n??ee,ac:null}}function Ei(e,t){let n=ee;n===null&&Hs();var r=n.b,o=void 0,a=Tt(Ee),s=null,l=!J;return Bi(()=>{try{var u=e();s&&Promise.resolve(u).catch(()=>{})}catch(g){u=Promise.reject(g)}var c=()=>u;o=s?.then(c,c)??Promise.resolve(u),s=o;var d=ve,v=r.is_pending();l&&(r.update_pending_count(1),v||d.increment());const h=(g,f=void 0)=>{s=null,v||d.activate(),f?f!==_o&&(a.f|=rn,Nt(a,f)):((a.f&rn)!==0&&(a.f^=rn),Nt(a,g)),l&&(r.update_pending_count(-1),v||d.decrement()),ga()};if(o.then(h,g=>h(null,g||"unknown")),d)return()=>{queueMicrotask(()=>d.neuter())}}),new Promise(u=>{function c(d){function v(){d===o?u(a):c(o)}d.then(v,v)}c(o)})}function M(e){const t=rr(e);return Na(t),t}function Mr(e){const t=rr(e);return t.equals=ia,t}function _a(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)Qe(t[n])}}function Ci(e){for(var t=e.parent;t!==null;){if((t.f&et)===0)return t;t=t.parent}return null}function po(e){var t,n=ee;ut(Ci(e));try{_a(e),t=Ma(e)}finally{ut(n)}return t}function pa(e){var t=po(e);if(e.equals(t)||(e.v=t,e.wv=Ta()),!fn){var n=(Ut||(e.f&lt)!==0)&&e.deps!==null?Gt:Be;Ge(e,n)}}const qt=new Map;function Tt(e,t){var n={f:0,v:e,reactions:null,equals:sa,rv:0,wv:0};return n}function I(e,t){const n=Tt(e);return Na(n),n}function ro(e,t=!1,n=!0){var o;const r=Tt(e);return t||(r.equals=ia),Bn&&n&&fe!==null&&fe.l!==null&&((o=fe.l).s??(o.s=[])).push(r),r}function S(e,t,n=!1){J!==null&&(!vt||(J.f&Oo)!==0)&&jn()&&(J.f&(et|On|go|Oo))!==0&&!At?.includes(e)&&$s();let r=n?Me(t):t;return Nt(e,r)}function Nt(e,t){if(!e.equals(t)){var n=e.v;fn?qt.set(e,t):qt.set(e,n),e.v=t;var r=Vt.ensure();r.capture(e,n),(e.f&et)!==0&&((e.f&ct)!==0&&po(e),Ge(e,(e.f&lt)===0?Be:Gt)),e.wv=Ta(),ma(e,ct),jn()&&ee!==null&&(ee.f&Be)!==0&&(ee.f&(Lt|ln))===0&&(at===null?Hi([e]):at.push(e))}return t}function Yn(e){S(e,e.v+1)}function ma(e,t){var n=e.reactions;if(n!==null)for(var r=jn(),o=n.length,a=0;a<o;a++){var s=n[a],l=s.f;if(!(!r&&s===ee)){var u=(l&ct)===0;u&&Ge(s,t),(l&et)!==0?ma(s,Gt):u&&((l&On)!==0&&Zt!==null&&Zt.push(s),Tn(s))}}}function Me(e){if(typeof e!="object"||e===null||on in e)return e;const t=uo(e);if(t!==Ts&&t!==Ls)return e;var n=new Map,r=lo(e),o=I(0),a=an,s=l=>{if(an===a)return l();var u=J,c=an;je(null),Ho(a);var d=l();return je(u),Ho(c),d};return r&&n.set("length",I(e.length)),new Proxy(e,{defineProperty(l,u,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&Ks();var d=n.get(u);return d===void 0?d=s(()=>{var v=I(c.value);return n.set(u,v),v}):S(d,c.value,!0),!0},deleteProperty(l,u){var c=n.get(u);if(c===void 0){if(u in l){const d=s(()=>I(Ee));n.set(u,d),Yn(o)}}else S(c,Ee),Yn(o);return!0},get(l,u,c){if(u===on)return e;var d=n.get(u),v=u in l;if(d===void 0&&(!v||kn(l,u)?.writable)&&(d=s(()=>{var g=Me(v?l[u]:Ee),f=I(g);return f}),n.set(u,d)),d!==void 0){var h=i(d);return h===Ee?void 0:h}return Reflect.get(l,u,c)},getOwnPropertyDescriptor(l,u){var c=Reflect.getOwnPropertyDescriptor(l,u);if(c&&"value"in c){var d=n.get(u);d&&(c.value=i(d))}else if(c===void 0){var v=n.get(u),h=v?.v;if(v!==void 0&&h!==Ee)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return c},has(l,u){if(u===on)return!0;var c=n.get(u),d=c!==void 0&&c.v!==Ee||Reflect.has(l,u);if(c!==void 0||ee!==null&&(!d||kn(l,u)?.writable)){c===void 0&&(c=s(()=>{var h=d?Me(l[u]):Ee,g=I(h);return g}),n.set(u,c));var v=i(c);if(v===Ee)return!1}return d},set(l,u,c,d){var v=n.get(u),h=u in l;if(r&&u==="length")for(var g=c;g<v.v;g+=1){var f=n.get(g+"");f!==void 0?S(f,Ee):g in l&&(f=s(()=>I(Ee)),n.set(g+"",f))}if(v===void 0)(!h||kn(l,u)?.writable)&&(v=s(()=>I(void 0)),S(v,Me(c)),n.set(u,v));else{h=v.v!==Ee;var _=s(()=>Me(c));S(v,_)}var y=Reflect.getOwnPropertyDescriptor(l,u);if(y?.set&&y.set.call(d,c),!h){if(r&&typeof u=="string"){var b=n.get("length"),P=Number(u);Number.isInteger(P)&&P>=b.v&&S(b,P+1)}Yn(o)}return!0},ownKeys(l){i(o);var u=Reflect.ownKeys(l).filter(v=>{var h=n.get(v);return h===void 0||h.v!==Ee});for(var[c,d]of n)d.v!==Ee&&!(c in l)&&u.push(c);return u},setPrototypeOf(){Ys()}})}var Ro,wa,ya,Sa;function xi(){if(Ro===void 0){Ro=window,wa=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;ya=kn(t,"firstChild").get,Sa=kn(t,"nextSibling").get,Mo(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Mo(n)&&(n.__t=void 0)}}function dn(e=""){return document.createTextNode(e)}function Ln(e){return ya.call(e)}function or(e){return Sa.call(e)}function N(e,t){return Ln(e)}function A(e,t=!1){{var n=Ln(e);return n instanceof Comment&&n.data===""?or(n):n}}function B(e,t=1,n=!1){let r=e;for(;t--;)r=or(r);return r}function Di(e){e.textContent=""}function mo(){return!1}let Bo=!1;function Ni(){Bo||(Bo=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{if(!e.defaultPrevented)for(const t of e.target.elements)t.__on_r?.()})},{capture:!0}))}function Or(e){var t=J,n=ee;je(null),ut(null);try{return e()}finally{je(t),ut(n)}}function Ai(e,t,n,r=n){e.addEventListener(t,()=>Or(n));const o=e.__on_r;o?e.__on_r=()=>{o(),r(!0)}:e.__on_r=()=>r(!0),Ni()}function ba(e){ee===null&&J===null&&Vs(),J!==null&&(J.f&lt)!==0&&ee===null&&Us(),fn&&zs()}function Ti(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function Pt(e,t,n,r=!0){var o=ee;o!==null&&(o.f&ht)!==0&&(e|=ht);var a={ctx:fe,deps:null,nodes_start:null,nodes_end:null,f:e|ct,first:null,fn:t,last:null,next:null,parent:o,b:o&&o.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Cn(a),a.f|=ho}catch(u){throw Qe(a),u}else t!==null&&Tn(a);if(r){var s=a;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&Rn)===0&&(s=s.first),s!==null&&(s.parent=o,o!==null&&Ti(s,o),J!==null&&(J.f&et)!==0&&(e&ln)===0)){var l=J;(l.effects??(l.effects=[])).push(s)}}return a}function Li(){return J!==null&&!vt}function Mi(e){const t=Pt(Nr,null,!1);return Ge(t,Be),t.teardown=e,t}function Oe(e){ba();var t=ee.f,n=!J&&(t&Lt)!==0&&(t&ho)===0;if(n){var r=fe;(r.e??(r.e=[])).push(e)}else return ka(e)}function ka(e){return Pt(fo|ra,e,!1)}function Oi(e){return ba(),Pt(Nr|ra,e,!0)}function Ii(e){Vt.ensure();const t=Pt(ln|Rn,e,!0);return(n={})=>new Promise(r=>{n.outro?bt(t,()=>{Qe(t),r(void 0)}):(Qe(t),r(void 0))})}function Ri(e){return Pt(fo,e,!1)}function Bi(e){return Pt(go|Rn,e,!0)}function Ir(e,t=0){return Pt(Nr|t,e,!0)}function pe(e,t=[],n=[]){ki(t,n,r=>{Pt(Nr,()=>e(...r.map(i)),!0)})}function Fn(e,t=0){var n=Pt(On|t,e,!0);return n}function Re(e,t=!0){return Pt(Lt|Rn,e,!0,t)}function Pa(e){var t=e.teardown;if(t!==null){const n=fn,r=J;Fo(!0),je(null);try{t.call(null)}finally{Fo(n),je(r)}}}function Ea(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const o=n.ac;o!==null&&Or(()=>{o.abort(_o)});var r=n.next;(n.f&ln)!==0?n.parent=null:Qe(n,t),n=r}}function ji(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&Lt)===0&&Qe(t),t=n}}function Qe(e,t=!0){var n=!1;(t||(e.f&Bs)!==0)&&e.nodes_start!==null&&e.nodes_end!==null&&(Fi(e.nodes_start,e.nodes_end),n=!0),Ea(e,t&&!n),Er(e,0),Ge(e,cn);var r=e.transitions;if(r!==null)for(const a of r)a.stop();Pa(e);var o=e.parent;o!==null&&o.first!==null&&Ca(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=e.ac=null}function Fi(e,t){for(;e!==null;){var n=e===t?null:or(e);e.remove(),e=n}}function Ca(e){var t=e.parent,n=e.prev,r=e.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),t!==null&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function bt(e,t){var n=[];wo(e,n,!0),xa(n,()=>{Qe(e),t&&t()})}function xa(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var o of e)o.out(r)}else t()}function wo(e,t,n){if((e.f&ht)===0){if(e.f^=ht,e.transitions!==null)for(const s of e.transitions)(s.is_global||n)&&t.push(s);for(var r=e.first;r!==null;){var o=r.next,a=(r.f&In)!==0||(r.f&Lt)!==0;wo(r,t,a?n:!1),r=o}}}function Pn(e){Da(e,!0)}function Da(e,t){if((e.f&ht)!==0){e.f^=ht,(e.f&Be)===0&&(Ge(e,ct),Tn(e));for(var n=e.first;n!==null;){var r=n.next,o=(n.f&In)!==0||(n.f&Lt)!==0;Da(n,o?t:!1),n=r}if(e.transitions!==null)for(const a of e.transitions)(a.is_global||t)&&a.in()}}let En=!1;function jo(e){En=e}let fn=!1;function Fo(e){fn=e}let J=null,vt=!1;function je(e){J=e}let ee=null;function ut(e){ee=e}let At=null;function Na(e){J!==null&&(At===null?At=[e]:At.push(e))}let Ue=null,Je=0,at=null;function Hi(e){at=e}let Aa=1,$n=0,an=$n;function Ho(e){an=e}let Ut=!1;function Ta(){return++Aa}function Rr(e){var t=e.f;if((t&ct)!==0)return!0;if((t&Gt)!==0){var n=e.deps,r=(t&lt)!==0;if(n!==null){var o,a,s=(t&kr)!==0,l=r&&ee!==null&&!Ut,u=n.length;if((s||l)&&(ee===null||(ee.f&cn)===0)){var c=e,d=c.parent;for(o=0;o<u;o++)a=n[o],(s||!a?.reactions?.includes(c))&&(a.reactions??(a.reactions=[])).push(c);s&&(c.f^=kr),l&&d!==null&&(d.f&lt)===0&&(c.f^=lt)}for(o=0;o<u;o++)if(a=n[o],Rr(a)&&pa(a),a.wv>e.wv)return!0}(!r||ee!==null&&!Ut)&&Ge(e,Be)}return!1}function La(e,t,n=!0){var r=e.reactions;if(r!==null&&!At?.includes(e))for(var o=0;o<r.length;o++){var a=r[o];(a.f&et)!==0?La(a,t,!1):t===a&&(n?Ge(a,ct):(a.f&Be)!==0&&Ge(a,Gt),Tn(a))}}function Ma(e){var _;var t=Ue,n=Je,r=at,o=J,a=Ut,s=At,l=fe,u=vt,c=an,d=e.f;Ue=null,Je=0,at=null,Ut=(d&lt)!==0&&(vt||!En||J===null),J=(d&(Lt|ln))===0?e:null,At=null,Wt(e.ctx),vt=!1,an=++$n,e.ac!==null&&(Or(()=>{e.ac.abort(_o)}),e.ac=null);try{e.f|=Jr;var v=e.fn,h=v(),g=e.deps;if(Ue!==null){var f;if(Er(e,Je),g!==null&&Je>0)for(g.length=Je+Ue.length,f=0;f<Ue.length;f++)g[Je+f]=Ue[f];else e.deps=g=Ue;if(!Ut||(d&et)!==0&&e.reactions!==null)for(f=Je;f<g.length;f++)((_=g[f]).reactions??(_.reactions=[])).push(e)}else g!==null&&Je<g.length&&(Er(e,Je),g.length=Je);if(jn()&&at!==null&&!vt&&g!==null&&(e.f&(et|Gt|ct))===0)for(f=0;f<at.length;f++)La(at[f],e);return o!==null&&o!==e&&($n++,at!==null&&(r===null?r=at:r.push(...at))),(e.f&rn)!==0&&(e.f^=rn),h}catch(y){return ua(y)}finally{e.f^=Jr,Ue=t,Je=n,at=r,J=o,Ut=a,At=s,Wt(l),vt=u,an=c}}function zi(e,t){let n=t.reactions;if(n!==null){var r=As.call(n,e);if(r!==-1){var o=n.length-1;o===0?n=t.reactions=null:(n[r]=n[o],n.pop())}}n===null&&(t.f&et)!==0&&(Ue===null||!Ue.includes(t))&&(Ge(t,Gt),(t.f&(lt|kr))===0&&(t.f^=kr),_a(t),Er(t,0))}function Er(e,t){var n=e.deps;if(n!==null)for(var r=t;r<n.length;r++)zi(e,n[r])}function Cn(e){var t=e.f;if((t&cn)===0){Ge(e,Be);var n=ee,r=En;ee=e,En=!0;try{(t&On)!==0?ji(e):Ea(e),Pa(e);var o=Ma(e);e.teardown=typeof o=="function"?o:null,e.wv=Aa;var a;ta&&li&&(e.f&ct)!==0&&e.deps}finally{En=r,ee=n}}}async function Oa(){await Promise.resolve(),va()}function i(e){var t=e.f,n=(t&et)!==0;if(J!==null&&!vt){var r=ee!==null&&(ee.f&cn)!==0;if(!r&&!At?.includes(e)){var o=J.deps;if((J.f&Jr)!==0)e.rv<$n&&(e.rv=$n,Ue===null&&o!==null&&o[Je]===e?Je++:Ue===null?Ue=[e]:(!Ut||!Ue.includes(e))&&Ue.push(e));else{(J.deps??(J.deps=[])).push(e);var a=e.reactions;a===null?e.reactions=[J]:a.includes(J)||a.push(J)}}}else if(n&&e.deps===null&&e.effects===null){var s=e,l=s.parent;l!==null&&(l.f&lt)===0&&(s.f^=lt)}if(fn){if(qt.has(e))return qt.get(e);if(n){s=e;var u=s.v;return((s.f&Be)===0&&s.reactions!==null||Ia(s))&&(u=po(s)),qt.set(s,u),u}}else n&&(s=e,Rr(s)&&pa(s));if((e.f&rn)!==0)throw e.v;return e.v}function Ia(e){if(e.v===Ee)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(qt.has(t)||(t.f&et)!==0&&Ia(t))return!0;return!1}function Kt(e){var t=vt;try{return vt=!0,e()}finally{vt=t}}const Ui=-7169;function Ge(e,t){e.f=e.f&Ui|t}function Vi(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(on in e)oo(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&on in n&&oo(n)}}}function oo(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let r in e)try{oo(e[r],t)}catch{}const n=uo(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=na(n);for(let o in r){const a=r[o].get;if(a)try{a.call(e)}catch{}}}}}const qi=["touchstart","touchmove"];function Wi(e){return qi.includes(e)}const Ra=new Set,ao=new Set;function Ki(e,t,n,r={}){function o(a){if(r.capture||Vn.call(t,a),!a.cancelBubble)return Or(()=>n?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?un(()=>{t.addEventListener(e,o,r)}):t.addEventListener(e,o,r),o}function yo(e,t,n,r,o){var a={capture:r,passive:o},s=Ki(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&Mi(()=>{t.removeEventListener(e,s,a)})}function tt(e){for(var t=0;t<e.length;t++)Ra.add(e[t]);for(var n of ao)n(e)}let zo=null;function Vn(e){var t=this,n=t.ownerDocument,r=e.type,o=e.composedPath?.()||[],a=o[0]||e.target;zo=e;var s=0,l=zo===e&&e.__root;if(l){var u=o.indexOf(l);if(u!==-1&&(t===document||t===window)){e.__root=t;return}var c=o.indexOf(t);if(c===-1)return;u<=c&&(s=u)}if(a=o[s]||e.target,a!==t){Zr(e,"currentTarget",{configurable:!0,get(){return a||n}});var d=J,v=ee;je(null),ut(null);try{for(var h,g=[];a!==null;){var f=a.assignedSlot||a.parentNode||a.host||null;try{var _=a["__"+r];if(_!=null&&(!a.disabled||e.target===a))if(lo(_)){var[y,...b]=_;y.apply(a,[e,...b])}else _.call(a,e)}catch(P){h?g.push(P):h=P}if(e.cancelBubble||f===t||f===null)break;a=f}if(h){for(let P of g)queueMicrotask(()=>{throw P});throw h}}finally{e.__root=t,delete e.currentTarget,je(d),ut(v)}}}function Ba(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Gn(e,t){var n=ee;n.nodes_start===null&&(n.nodes_start=e,n.nodes_end=t)}function Y(e,t){var n=(t&ri)!==0,r=(t&oi)!==0,o,a=!e.startsWith("<!>");return()=>{o===void 0&&(o=Ba(a?e:"<!>"+e),n||(o=Ln(o)));var s=r||wa?document.importNode(o,!0):o.cloneNode(!0);if(n){var l=Ln(s),u=s.lastChild;Gn(l,u)}else Gn(s,s);return s}}function Yi(e,t,n="svg"){var r=!e.startsWith("<!>"),o=`<${n}>${r?e:"<!>"+e}</${n}>`,a;return()=>{if(!a){var s=Ba(o),l=Ln(s);a=Ln(l)}var u=a.cloneNode(!0);return Gn(u,u),u}}function $i(e,t){return Yi(e,t,"svg")}function Ve(e=""){{var t=dn(e+"");return Gn(t,t),t}}function O(){var e=document.createDocumentFragment(),t=document.createComment(""),n=dn();return e.append(t,n),Gn(t,n),e}function m(e,t){e!==null&&e.before(t)}function vd(){var e;return(e=window.__svelte??(window.__svelte={})).uid??(e.uid=1),`c${window.__svelte.uid++}`}function Xn(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??(e.__t=e.nodeValue))&&(e.__t=n,e.nodeValue=n+"")}function Gi(e,t){return Xi(e,t)}const yn=new Map;function Xi(e,{target:t,anchor:n,props:r={},events:o,context:a,intro:s=!0}){xi();var l=new Set,u=v=>{for(var h=0;h<v.length;h++){var g=v[h];if(!l.has(g)){l.add(g);var f=Wi(g);t.addEventListener(g,Vn,{passive:f});var _=yn.get(g);_===void 0?(document.addEventListener(g,Vn,{passive:f}),yn.set(g,1)):yn.set(g,_+1)}}};u(co(Ra)),ao.add(u);var c=void 0,d=Ii(()=>{var v=n??t.appendChild(dn());return mi(v,{pending:()=>{}},h=>{if(a){W({});var g=fe;g.c=a}o&&(r.$$events=o),c=e(h,r)||{},a&&K()}),()=>{for(var h of l){t.removeEventListener(h,Vn);var g=yn.get(h);--g===0?(document.removeEventListener(h,Vn),yn.delete(h)):yn.set(h,g)}ao.delete(u),v!==n&&v.parentNode?.removeChild(v)}});return Zi.set(c,d),c}let Zi=new WeakMap;const qr=0,hr=1,Wr=2;function ja(e,t,n,r,o){var a=e,s=jn(),l=fe,u=Ee,c,d,v,h=s?Tt(void 0):ro(void 0,!1,!1),g=s?Tt(void 0):ro(void 0,!1,!1),f=!1;function _(b,P){f=!0,P&&(ut(y),je(y),Wt(l));try{b===qr&&n&&(c?Pn(c):c=Re(()=>n(a))),b===hr&&r&&(d?Pn(d):d=Re(()=>r(a,h))),b===Wr&&o&&(v?Pn(v):v=Re(()=>o(a,g))),b!==qr&&c&&bt(c,()=>c=null),b!==hr&&d&&bt(d,()=>d=null),b!==Wr&&v&&bt(v,()=>v=null)}finally{P&&(Wt(null),je(null),ut(null),va())}}var y=Fn(()=>{if(u!==(u=t())){if(Ms(u)){var b=u;f=!1,b.then(P=>{b===u&&(Nt(h,P),_(hr,!0))},P=>{if(b===u&&(Nt(g,P),_(Wr,!0),!o))throw g.v}),un(()=>{f||_(qr,!0)})}else Nt(h,u),_(hr,!1);return()=>u=Ee}})}function F(e,t,n=!1){var r=e,o=null,a=null,s=Ee,l=n?In:0,u=!1;const c=(g,f=!0)=>{u=!0,h(f,g)};var d=null;function v(){d!==null&&(d.lastChild.remove(),r.before(d),d=null);var g=s?o:a,f=s?a:o;g&&Pn(g),f&&bt(f,()=>{s?a=null:o=null})}const h=(g,f)=>{if(s!==(s=g)){var _=mo(),y=r;if(_&&(d=document.createDocumentFragment(),d.append(y=dn())),s?o??(o=f&&Re(()=>f(y))):a??(a=f&&Re(()=>f(y))),_){var b=ve,P=s?o:a,w=s?a:o;P&&b.skipped_effects.delete(P),w&&b.skipped_effects.add(w),b.add_callback(v)}else v()}};Fn(()=>{u=!1,t(c),u||h(null,null)},l)}function Ce(e,t){Ir(()=>{var n=t();for(var r in n){var o=n[r];o?e.style.setProperty(r,o):e.style.removeProperty(r)}})}function Ji(e,t,n){for(var r=e.items,o=[],a=t.length,s=0;s<a;s++)wo(t[s].e,o,!0);var l=a>0&&o.length===0&&n!==null;if(l){var u=n.parentNode;Di(u),u.append(n),r.clear(),mt(e,t[0].prev,t[a-1].next)}xa(o,()=>{for(var c=0;c<a;c++){var d=t[c];l||(r.delete(d.k),mt(e,d.prev,d.next)),Qe(d.e,!l)}})}function bn(e,t,n,r,o,a=null){var s=e,l={flags:t,items:new Map,first:null},u=(t&aa)!==0;if(u){var c=e;s=c.appendChild(dn())}var d=null,v=!1,h=new Map,g=Mr(()=>{var b=n();return lo(b)?b:b==null?[]:co(b)}),f,_;function y(){Qi(_,f,l,h,s,o,t,r,n),a!==null&&(f.length===0?d?Pn(d):d=Re(()=>a(s)):d!==null&&bt(d,()=>{d=null}))}Fn(()=>{_??(_=ee),f=i(g);var b=f.length;if(!(v&&b===0)){v=b===0;var P,w,C,x;if(mo()){var p=new Set,k=ve;for(w=0;w<b;w+=1){C=f[w],x=r(C,w);var E=l.items.get(x)??h.get(x);E?(t&(Ar|Tr))!==0&&Fa(E,C,w,t):(P=Ha(null,l,null,null,C,x,w,o,t,n,!0),h.set(x,P)),p.add(x)}for(const[R,V]of l.items)p.has(R)||k.skipped_effects.add(V.e);k.add_callback(y)}else y();i(g)}})}function Qi(e,t,n,r,o,a,s,l,u){var c=(s&Xs)!==0,d=(s&(Ar|Tr))!==0,v=t.length,h=n.items,g=n.first,f=g,_,y=null,b,P=[],w=[],C,x,p,k;if(c)for(k=0;k<v;k+=1)C=t[k],x=l(C,k),p=h.get(x),p!==void 0&&(p.a?.measure(),(b??(b=new Set)).add(p));for(k=0;k<v;k+=1){if(C=t[k],x=l(C,k),p=h.get(x),p===void 0){var E=r.get(x);if(E!==void 0){r.delete(x),h.set(x,E);var R=y?y.next:f;mt(n,y,E),mt(n,E,R),Kr(E,R,o),y=E}else{var V=f?f.e.nodes_start:o;y=Ha(V,n,y,y===null?n.first:y.next,C,x,k,a,s,u)}h.set(x,y),P=[],w=[],f=y.next;continue}if(d&&Fa(p,C,k,s),(p.e.f&ht)!==0&&(Pn(p.e),c&&(p.a?.unfix(),(b??(b=new Set)).delete(p))),p!==f){if(_!==void 0&&_.has(p)){if(P.length<w.length){var q=w[0],G;y=q.prev;var H=P[0],z=P[P.length-1];for(G=0;G<P.length;G+=1)Kr(P[G],q,o);for(G=0;G<w.length;G+=1)_.delete(w[G]);mt(n,H.prev,z.next),mt(n,y,H),mt(n,z,q),f=q,y=z,k-=1,P=[],w=[]}else _.delete(p),Kr(p,f,o),mt(n,p.prev,p.next),mt(n,p,y===null?n.first:y.next),mt(n,y,p),y=p;continue}for(P=[],w=[];f!==null&&f.k!==x;)(f.e.f&ht)===0&&(_??(_=new Set)).add(f),w.push(f),f=f.next;if(f===null)continue;p=f}P.push(p),y=p,f=p.next}if(f!==null||_!==void 0){for(var T=_===void 0?[]:co(_);f!==null;)(f.e.f&ht)===0&&T.push(f),f=f.next;var L=T.length;if(L>0){var j=(s&aa)!==0&&v===0?o:null;if(c){for(k=0;k<L;k+=1)T[k].a?.measure();for(k=0;k<L;k+=1)T[k].a?.fix()}Ji(n,T,j)}}c&&un(()=>{if(b!==void 0)for(p of b)p.a?.apply()}),e.first=n.first&&n.first.e,e.last=y&&y.e;for(var X of r.values())Qe(X.e);r.clear()}function Fa(e,t,n,r){(r&Ar)!==0&&Nt(e.v,t),(r&Tr)!==0?Nt(e.i,n):e.i=n}function Ha(e,t,n,r,o,a,s,l,u,c,d){var v=(u&Ar)!==0,h=(u&Zs)===0,g=v?h?ro(o,!1,!1):Tt(o):o,f=(u&Tr)===0?s:Tt(s),_={i:f,v:g,k:a,a:null,e:null,prev:n,next:r};try{if(e===null){var y=document.createDocumentFragment();y.append(e=dn())}return _.e=Re(()=>l(e,g,f,c),si),_.e.prev=n&&n.e,_.e.next=r&&r.e,n===null?d||(t.first=_):(n.next=_,n.e.next=_.e),r!==null&&(r.prev=_,r.e.prev=_.e),_}finally{}}function Kr(e,t,n){for(var r=e.next?e.next.e.nodes_start:n,o=t?t.e.nodes_start:n,a=e.e.nodes_start;a!==null&&a!==r;){var s=or(a);o.before(a),a=s}}function mt(e,t,n){t===null?e.first=n:(t.next=n,t.e.next=n&&n.e),n!==null&&(n.prev=t,n.e.prev=t&&t.e)}function ne(e,t,...n){var r=e,o=se,a;Fn(()=>{o!==(o=t())&&(a&&(Qe(a),a=null),a=Re(()=>o(r,...n)))},In)}function za(e,t,n){var r=e,o,a,s=null,l=null;function u(){a&&(bt(a),a=null),s&&(s.lastChild.remove(),r.before(s),s=null),a=l,l=null}Fn(()=>{if(o!==(o=t())){var c=mo();if(o){var d=r;c&&(s=document.createDocumentFragment(),s.append(d=dn()),a&&ve.skipped_effects.add(a)),l=Re(()=>n(d,o))}c?ve.add_callback(u):u()}},In)}function Ua(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(n=Ua(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function el(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=Ua(e))&&(r&&(r+=" "),r+=t);return r}function ue(e){return typeof e=="object"?el(e):e??""}const Uo=[...` 	
\r\f \v\uFEFF`];function tl(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var a=o.length,s=0;(s=r.indexOf(o,s))>=0;){var l=s+a;(s===0||Uo.includes(r[s-1]))&&(l===r.length||Uo.includes(r[l]))?r=(s===0?"":r.substring(0,s))+r.substring(l+1):s=l}}return r===""?null:r}function nl(e,t){return e==null?null:String(e)}function de(e,t,n,r,o,a){var s=e.__className;if(s!==n||s===void 0){var l=tl(n,r,a);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(a&&o!==a)for(var u in a){var c=!!a[u];(o==null||c!==!!o[u])&&e.classList.toggle(u,c)}return a}function Zn(e,t,n,r){var o=e.__style;if(o!==t){var a=nl(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return r}const rl=Symbol("is custom element"),ol=Symbol("is html");function hd(e,t){var n=So(e);n.value===(n.value=t??void 0)||e.value===t&&(t!==0||e.nodeName!=="PROGRESS")||(e.value=t??"")}function gd(e,t){var n=So(e);n.checked!==(n.checked=t??void 0)&&(e.checked=t)}function Le(e,t,n,r){var o=So(e);o[t]!==(o[t]=n)&&(t==="loading"&&(e[Fs]=n),n==null?e.removeAttribute(t):typeof n!="string"&&al(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function So(e){return e.__attributes??(e.__attributes={[rl]:e.nodeName.includes("-"),[ol]:e.namespaceURI===ai})}var Vo=new Map;function al(e){var t=e.getAttribute("is")||e.nodeName,n=Vo.get(t);if(n)return n;Vo.set(t,n=[]);for(var r,o=e,a=Element.prototype;a!==o;){r=na(o);for(var s in r)r[s].set&&n.push(s);o=uo(o)}return n}function sl(e,t,n=t){var r=new WeakSet;Ai(e,"input",async o=>{var a=o?e.defaultValue:e.value;if(a=Yr(e)?$r(a):a,n(a),ve!==null&&r.add(ve),await Oa(),a!==(a=t())){var s=e.selectionStart,l=e.selectionEnd;e.value=a??"",l!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(l,e.value.length))}}),Kt(t)==null&&e.value&&(n(Yr(e)?$r(e.value):e.value),ve!==null&&r.add(ve)),Ir(()=>{var o=t();if(e===document.activeElement){var a=pr??ve;if(r.has(a))return}Yr(e)&&o===$r(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function Yr(e){var t=e.type;return t==="number"||t==="range"}function $r(e){return e===""?null:+e}function qo(e,t){return e===t||e?.[on]===t}function pt(e={},t,n,r){return Ri(()=>{var o,a;return Ir(()=>{o=a,a=[],Kt(()=>{e!==n(...a)&&(t(e,...a),o&&qo(n(...o),e)&&t(null,...o))})}),()=>{un(()=>{a&&qo(n(...a),e)&&t(null,...a)})}}),e}function bo(e=!1){const t=fe,n=t.l.u;if(!n)return;let r=()=>Vi(t.s);if(e){let o=0,a={};const s=rr(()=>{let l=!1;const u=t.s;for(const c in u)u[c]!==a[c]&&(a[c]=u[c],l=!0);return l&&o++,o});r=()=>i(s)}n.b.length&&Oi(()=>{Wo(t,r),br(n.b)}),Oe(()=>{const o=Kt(()=>n.m.map(Os));return()=>{for(const a of o)typeof a=="function"&&a()}}),n.a.length&&Oe(()=>{Wo(t,r),br(n.a)})}function Wo(e,t){if(e.l.s)for(const n of e.l.s)i(n);t()}let gr=!1;function il(e){var t=gr;try{return gr=!1,[e(),gr]}finally{gr=t}}function ie(e,t,n,r){var o=!Bn||(n&Qs)!==0,a=(n&ti)!==0,s=(n&ni)!==0,l=r,u=!0,c=()=>(u&&(u=!1,l=s?Kt(r):r),l),d;if(a){var v=on in e||js in e;d=kn(e,t)?.set??(v&&t in e?w=>e[t]=w:void 0)}var h,g=!1;a?[h,g]=il(()=>e[t]):h=e[t],h===void 0&&r!==void 0&&(h=c(),d&&(o&&Ws(),d(h)));var f;if(o?f=()=>{var w=e[t];return w===void 0?c():(u=!0,w)}:f=()=>{var w=e[t];return w!==void 0&&(l=void 0),w===void 0?l:w},o&&(n&ei)===0)return f;if(d){var _=e.$$legacy;return(function(w,C){return arguments.length>0?((!o||!C||_||g)&&d(C?f():w),w):f()})}var y=!1,b=((n&Js)!==0?rr:Mr)(()=>(y=!1,f()));a&&i(b);var P=ee;return(function(w,C){if(arguments.length>0){const x=C?i(b):o&&a?Me(w):w;return S(b,x),y=!0,l!==void 0&&(l=x),w}return fn&&y||(P.f&cn)!==0?b.v:i(b)})}function ge(e){fe===null&&oa(),Bn&&fe.l!==null?ll(fe).m.push(e):Oe(()=>{const t=Kt(e);if(typeof t=="function")return t})}function ll(e){var t=e.l;return t.u??(t.u={a:[],b:[],m:[]})}const cl="5";var ea;typeof window<"u"&&((ea=window.__svelte??(window.__svelte={})).v??(ea.v=new Set)).add(cl);ci();const Va={};function ul(e){Se(Va,e)}function Br(){const e=ye(Va);if(!e)throw new Error("No LocalDBContext found");return e}const dl="AppStorage",fl=1,dt="notes",Ko="tags",Yo="syncLog",Yt="account",$t="settings",kt="drafts",Fe="success",He="error",re=(e,t,n)=>{e?.addEventListener(t,n)};function $o(e){return new Promise((t,n)=>{const o=e?.transaction(Yt,"readonly")?.objectStore(Yt).get("default");re(o,Fe,()=>{const a=o?.result?.account;t(a)}),re(o,He,()=>{n()})})}function _r(e,t){return new Promise((n,r)=>{const s=e?.transaction(Yt,"readwrite")?.objectStore(Yt)?.put({id:"default",account:t});re(s,Fe,()=>{n()}),re(s,He,()=>{r()})})}function vl(e){return new Promise((t,n)=>{const a=e?.transaction(Yt,"readwrite")?.objectStore(Yt)?.clear();re(a,Fe,()=>{t()}),re(a,He,()=>{n()})})}const qa={};function hl(e){Se(qa,e)}function ko(){const e=ye(qa);if(!e)throw new Error("No AccountContext found");return e}const Wa={};function gl(e){Se(Wa,e)}function jr(){const e=ye(Wa);if(!e)throw new Error("No BroadcastContext found");return e}const _l=(e,t)=>{let n=null;return()=>{n&&clearTimeout(n),n=setTimeout(()=>{n=null,e()},t)}};async function Gr(){if(navigator.storage&&navigator.storage.persist)try{await navigator.storage.persisted()||await navigator.storage.persist()}catch{}}const Ka={};function pl(e){Se(Ka,e)}function Et(){const e=ye(Ka);if(!e)throw new Error("No AppHistoryContext found");return e}const Ya={};function ml(e){Se(Ya,e)}function Mt(){const e=ye(Ya);if(!e)throw new Error("No StackPagesContext found");return e}function wl(e,t){W(t,!0);const{navigate:n}=Et(),{hasStackPage:r,pushStackPages:o,clearStackPages:a}=Mt();let s=I(void 0);const{getDB:l}=Br(),{createBroadcastChannel:u,tabId:c}=jr(),d=M(l),v=u(),h=async()=>{const p=await $o(i(d));p&&(S(s,p,!0),a(),n("/"))},g=async()=>{const p=await $o(i(d));p===void 0?o("start"):(r("start")&&(a(),n("/")),p?(S(s,p,!0),await Gr()):S(s,null))},f=async p=>{const k=JSON.parse(p.data);if(k.tabId&&k.tabId===c)return;const E=k;E.type==="initLocalAccount"?(S(s,null),a(),n("/")):E.type==="initCloudAccount"?(h(),a(),n("/")):E.type==="disconnectCloudAccount"?S(s,null):E.type==="exit"?S(s,void 0):E.type==="updateAccount"&&h()};ge(()=>(g(),v.addEventListener(f),()=>{v.removeEventListener(f)})),hl({getAccount:()=>i(s),initLocalAccount:async()=>{await Gr(),S(s,null),await _r(i(d),null),v.postMessage({type:"initLocalAccount"})},initCloudAccount:async p=>{await Gr();const k={encryptedClientKey:p.encryptedClientKey||"",subscriptionExpires:p.subscriptionExpires||-1,lastSync:-1};await _r(i(d),k),S(s,k,!0),v.postMessage({type:"initCloudAccount"})},disconnectCloudAccount:async()=>{S(s,null),await _r(i(d),null);try{await fetch("/api/dropSession",{method:"POST"})}catch{}v.postMessage({type:"disconnectCloudAccount"})},updateSubscription:async p=>{if(!i(s))throw new Error("No account to update subscription for");const k={...i(s),subscriptionExpires:p};await _r(i(d),k),v.postMessage({type:"updateAccount"})},exitApp:async()=>{S(s,void 0),v.postMessage({type:"exit"}),await vl(i(d))}});var C=O(),x=A(C);ne(x,()=>t.children??se),m(e,C),K()}const $a={},yl=()=>({working:!1,swipingRatio:1,isSwiping:!1,duration:.35});function Sl(e){Se($a,e)}function ar(){const e=ye($a);if(!e)throw new Error("No AnimationSettingsContext found");return e}function bl(e,t){W(t,!0);let n=Me(yl());Sl(n);var r=O(),o=A(r);ne(o,()=>t.children??se),m(e,r),K()}function kl(e,t){W(t,!0);const n=Me({historyStack:[],pathname:window.location.pathname,search:window.location.search,historyLength:0}),r=()=>{n.pathname=document.location.pathname,n.search=document.location.search,n.historyLength=Math.max(0,n.historyLength-=1)},o=h=>{const[g,f]=h.split("?");n.pathname=g,n.search=f?`?${f}`:"",n.historyLength+=1,n.historyStack.push(window.location.href),window.history.replaceState(null,"",h)},a=h=>{const[g,f]=h.split("?");n.pathname=g,n.search=f?`?${f}`:"",window.history.replaceState(null,"",h)};pl({getAppHistory:()=>n,navigate:o,replace:a,addSearchParam:(h,g)=>{const f=new URLSearchParams(n.search);f.append(h,g),a(`${n.pathname}${f.size>0?`?${f.toString()}`:""}`)},deleteSearchParam:h=>{const g=new URLSearchParams(n.search);g.delete(h),n.historyStack=n.historyStack.map(f=>{const _=new URLSearchParams(f.split("?")[1]);return _.delete(h),`${f.split("?")[0]}${g.size>0?`?${_.toString()}`:""}`}),a(`${n.pathname}${g.size>0?`?${g.toString()}`:""}`)},back:h=>{const{fallback:g="/",to:f}=h||{},[_,y]=g.split("?");if(n.historyLength<=0){const b=window.location.href,[P,w]=b.split("?");if(!w.includes("stackPages"))window.history.replaceState(null,"",g),n.historyLength=0,n.pathname=_,n.search=y?`?${y}`:"";else{const C=new URLSearchParams(w),x=C.get("stackPages")?.split(",")||[],p=x.slice(0,f&&x.includes(f)?x.indexOf(f)+1:-1);p.length===0?C.delete("stackPages"):C.set("stackPages",p.join(","));const k=`${P}${C.toString()?`?${C.toString()}`:""}`;window.history.replaceState(null,"",k),n.search=C.toString()?`?${C.toString()}`:""}}else if(n.historyStack.length>0){const P=new URLSearchParams(n.search).get("stackPages")?.split(",")||[];f&&P.includes(f)&&(n.historyStack=n.historyStack.slice(0,-(P.length-(P.indexOf(f)+1))+1),n.historyLength=n.historyStack.length);const w=n.historyStack.pop();if(w){const[C,x]=w.split("?");window.history.replaceState(null,"",w),n.historyLength=Math.max(0,n.historyLength-=1),n.pathname=C,n.search=x?`?${x}`:""}}},closeDialogStack:()=>{const h=n.historyStack.findIndex(f=>f.includes("stackPages")),g=h===-1?n.historyStack.slice(0):n.historyStack.slice(0,h);if(g.length>0){const f=g.pop();if(f){const[_,y]=f.split("?");window.history.replaceState(null,"",f),n.historyLength=Math.max(0,g.length),n.pathname=_,n.search=y?`?${y}`:"",n.historyStack=g}}else{const f=n.search,_=new URLSearchParams(f);_.delete("stackPages"),window.history.replaceState(null,"",_.toString()?"/?"+_.toString():"/"),n.historyLength=0,n.pathname="/",n.search=_.toString()?"?"+_.toString():"",n.historyStack=[]}}}),ge(()=>(window.addEventListener("popstate",r),()=>{window.removeEventListener("popstate",r)}));var d=O(),v=A(d);ne(v,()=>t.children??se),m(e,d),K()}function Pl(e,t){W(t,!0);const n=crypto.randomUUID(),r=(s,l)=>{s.postMessage(JSON.stringify({...l,tabId:n}))};gl({tabId:n,createBroadcastChannel:()=>{const s=new BroadcastChannel("app");return{postMessage:l=>r(s,l),addEventListener:l=>{s.addEventListener("message",l)},removeEventListener:l=>{s.removeEventListener("message",l)}}}});var o=O(),a=A(o);ne(a,()=>t.children??se),m(e,o),K()}const Ga={};function El(e){Se(Ga,e)}function sr(){const e=ye(Ga);if(!e)throw new Error("No DialogContext found");return e}function Cl(e,t){W(t,!0);let n=I(0),r=I(!1),o=I(!1);El({checkExistedDialog:()=>i(n)>0,showDialog:()=>{S(n,i(n)+1)},hideDialog:()=>{S(n,i(n)-1)},blockDialog:f=>{S(r,f,!0),f||S(o,!1)},checkBlockedDialog:()=>i(r),unBlockBackDialog:f=>{S(o,f,!0)},checkUnBlockedBackDialog:()=>i(o)});var h=O(),g=A(h);ne(g,()=>t.children??se),m(e,h),K()}const Xa={};function xl(e){Se(Xa,e)}function Po(){const e=ye(Xa);if(!e)throw new Error("No DialogPageHeightContext found");return e}function Dl(e,t){W(t,!0);let n=I(200);xl({setDialogPageHeight:l=>{S(n,l,!0)},getDialogPageHeight:()=>i(n)});var a=O(),s=A(a);ne(s,()=>t.children??se),m(e,a),K()}const Za={};function Nl(e){Se(Za,e)}function _d(){const e=ye(Za);if(!e)throw new Error("No DraftsContext found");return e}function Al(e){return new Promise((t,n)=>{const o=e?.transaction(kt,"readonly")?.objectStore(kt).getAll();re(o,Fe,()=>{const a=o?.result||[];t(a)}),re(o,He,()=>{n()})})}function Tl(e,t){return new Promise((n,r)=>{const s=e?.transaction(kt,"readwrite")?.objectStore(kt)?.put({...t});re(s,Fe,()=>{n()}),re(s,He,()=>{r()})})}function Ll(e,t){return new Promise((n,r)=>{const s=e?.transaction(kt,"readwrite")?.objectStore(kt)?.delete(t);re(s,Fe,()=>{n()}),re(s,He,()=>{r()})})}function Ml(e){return new Promise((t,n)=>{const a=e?.transaction(kt,"readwrite")?.objectStore(kt)?.clear();re(a,Fe,()=>{t()}),re(a,He,()=>{n()})})}function Ol(e,t){W(t,!0);let n,r=I(void 0);const{getDB:o}=Br(),{createBroadcastChannel:a,tabId:s}=jr(),l=M(o),u=a(),c=w=>{const C=new Map;w.forEach(x=>{C.set(x.id,x)}),n=C,S(r,()=>n)},d=async()=>{const w=await Al(i(l));c(w)},v=w=>i(r)?.()?.get(w),h=w=>{if(!n)throw new Error("Drafts state is not initialized");n.delete(w),S(r,()=>n)},g=w=>{if(!n)throw new Error("Drafts state is not initialized");n.set(w.id,w),S(r,()=>n)},f=async w=>{const C={...w};g(C),u.postMessage({type:"putDraft",data:{draft:C}}),await Tl(i(l),{...C})},_=async w=>{h(w),await Ll(i(l),w),u.postMessage({type:"deleteDraft",data:{id:w}})},y=async w=>{const C=JSON.parse(w.data),x=C;if(C.tabId&&C.tabId===s){x.type==="exit"&&(n=void 0,S(r,()=>{}),Ml(i(l)));return}if(x.type==="putDraft"){const p=x.data.draft;g(p)}else if(x.type==="deleteDraft"){const p=x.data.id;h(p)}else x.type==="exit"&&(n=void 0,S(r,()=>{}))};ge(()=>(d(),u.addEventListener(y),()=>{u.removeEventListener(y)})),Nl({getDraft:v,putDraft:f,deleteDraft:_});var b=O(),P=A(b);ne(P,()=>t.children??se),m(e,b),K()}const Ja={};function Il(e){Se(Ja,e)}function Qa(){const e=ye(Ja);if(!e)throw new Error("No FeedOrderContext found");return e}function Rl(e,t){W(t,!0);const{navigate:n,getAppHistory:r}=Et(),o=M(r),a="feedOrder";let s=I(Me(new URLSearchParams(r().search).get(a)||"newest"));Il({getFeedOrder:()=>i(s),setFeedOrder:v=>{S(s,v,!0);const h=new URLSearchParams(i(o).search);v==="newest"?h.delete(a):h.set(a,v),n(`${i(o).pathname}${h.size>0?`?${h.toString()}`:""}`)}});var c=O(),d=A(c);ne(d,()=>t.children??se),m(e,c),K()}const es={};function Bl(e){Se(es,e)}function Eo(){const e=ye(es);if(!e)throw new Error("No FeedSearchContext found");return e}function jl(e,t){W(t,!0);const{navigate:n,getAppHistory:r}=Et(),o=M(r),a="feedSearch";let s=I(Me(new URLSearchParams(r().search).get(a)||""));Bl({getFeedSearch:()=>i(s),setFeedSearch:v=>{S(s,v,!0);const h=new URLSearchParams(i(o).search);v===""?h.delete(a):h.set(a,v),n(`${i(o).pathname}${h.size>0?`?${h.toString()}`:""}`)}});var c=O(),d=A(c);ne(d,()=>t.children??se),m(e,c),K()}const ts={};function Fl(e){Se(ts,e)}function Hl(){const e=ye(ts);if(!e)throw new Error("No KeyboardVisibleContext found");return e}function zl(e,t){W(t,!0);let n=Me({value:!1});const r=()=>n.value;ge(()=>{const s=()=>{setTimeout(()=>{document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement?n.value=!0:n.value=!1},0)};return s(),document.addEventListener("focusin",s),document.addEventListener("focusout",s),()=>{document.removeEventListener("focusin",s),document.removeEventListener("focusout",s)}}),Fl({getIsKeyboardVisible:r});var o=O(),a=A(o);ne(a,()=>t.children??se),m(e,o),K()}function Ul(){return new Promise((e,t)=>{const n=indexedDB.open(dl,fl);re(n,"upgradeneeded",()=>{const r=n.result;r.objectStoreNames.contains(dt)||r.createObjectStore(dt,{keyPath:"id"}),r.objectStoreNames.contains(Ko)||r.createObjectStore(Ko,{keyPath:"id"}),r.objectStoreNames.contains(Yt)||r.createObjectStore(Yt,{keyPath:"id"}),r.objectStoreNames.contains($t)||r.createObjectStore($t,{keyPath:"id"}),r.objectStoreNames.contains(Yo)||r.createObjectStore(Yo,{keyPath:"id"}),r.objectStoreNames.contains(kt)||r.createObjectStore(kt,{keyPath:"id"})}),re(n,Fe,()=>{const r=n.result;e(r),r.onversionchange=function(){r?.close(),alert("app outdated, please reload the page")}}),re(n,"blocked",()=>{t(),alert("app outdated, please reload the page")}),re(n,He,()=>{t()})})}function Vl(e,t){W(t,!0);let n=I(null);ge(()=>{Ul().then(l=>{S(n,l,!0)})}),ul({getDB:()=>i(n)});var o=O(),a=A(o);{var s=l=>{var u=O(),c=A(u);ne(c,()=>t.children??se),m(l,u)};F(a,l=>{i(n)&&l(s)})}m(e,o),K()}const ns={};function ql(e){Se(ns,e)}function Hn(){const e=ye(ns);if(!e)throw new Error("No MobileSizeContext found");return e}const Wl=(e,t,n={})=>{let r=null;return()=>{r||(e(),r=setTimeout(()=>{if(r=null,n.trailing){e();return}},t))}};function Kl(e,t){W(t,!0);const n=()=>window.matchMedia("(max-width: 767px)").matches;let r=I(Me(n()));const o=Wl(()=>{S(r,n(),!0)},16,{trailing:!0});ql({checkMobileSize:()=>i(r)}),ge(()=>(window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)));var s=O(),l=A(s);ne(l,()=>t.children??se),m(e,s),K()}const Yl=()=>crypto.randomUUID();function Sr(e){return new Promise((t,n)=>{const o=e?.transaction(dt,"readonly")?.objectStore(dt).getAll();re(o,Fe,()=>{const a=o?.result||[];t(a)}),re(o,He,()=>{n()})})}function Xr(e,t){return new Promise((n,r)=>{const s=e?.transaction(dt,"readwrite")?.objectStore(dt)?.put({...t});re(s,Fe,()=>{n()}),re(s,He,()=>{r()})})}function $l(e,t){return new Promise((n,r)=>{const s=e?.transaction(dt,"readwrite")?.objectStore(dt)?.delete(t);re(s,Fe,()=>{n()}),re(s,He,()=>{r()})})}function Go(e){return new Promise((t,n)=>{const a=e?.transaction(dt,"readwrite")?.objectStore(dt)?.clear();re(a,Fe,()=>{t()}),re(a,He,()=>{n()})})}async function Gl(e,t){const n=(await Sr(e)).reduce((s,l)=>(s[l.id]=l,s),{}),r={},a=e?.transaction(dt,"readwrite")?.objectStore(dt);t.forEach(s=>{n[s.id]?n[s.id].updatedAt<s.updatedAt&&(r[s.id]=s):r[s.id]=s}),await Promise.all(Object.values(r).map(s=>{const l=a?.put(s);return new Promise((u,c)=>{re(l,Fe,()=>{u()}),re(l,He,()=>{c()})})}))}const rs={};function Xl(e){Se(rs,e)}function Fr(){const e=ye(rs);if(!e)throw new Error("No NotesContext found");return e}function Zl(e,t){W(t,!0);let n,r,o=I(()=>n),a=I(()=>r);const{getDB:s}=Br(),{createBroadcastChannel:l,tabId:u}=jr(),c=M(s),d=l(),v=T=>{n=[],r=new Map;for(const L of T)n.push(L),r.set(L.id,L);S(o,()=>n),S(a,()=>r)},h=async()=>{const T=await Sr(i(c));v(T)},g=()=>i(o)||(()=>n||[]),f=()=>i(a)||(()=>r||new Map),_=T=>{if(!n||!r)throw new Error("Notes appState is not initialized");const L={...T};n.push(L),r.set(L.id,L),S(o,()=>n),S(a,()=>r)},y=T=>{if(!n||!r)throw new Error("Notes appState is not initialized");for(let L=0;L<n.length;L++)n[L]?.id===T.id&&n&&(n[L]=T);r.set(T.id,T),S(o,()=>n),S(a,()=>r)},b=T=>{if(!n||!r)throw new Error("Notes state is not initialized");r.delete(T);const L=n.findIndex(j=>j?.id===T);L!==-1&&(n[L]=void 0),S(o,()=>n),S(a,()=>r)},P=()=>{v([])},w=async T=>{const L={...T,id:Yl(),createdAt:Date.now(),updatedAt:Date.now()};_(L),d.postMessage({type:"addNote",data:{note:L}}),await Xr(i(c),{...L})},C=async T=>{const L={...T,updatedAt:Date.now()};d.postMessage({type:"updateNote",data:{note:L}}),y(L),await Xr(i(c),L)},x=(T,L)=>{const j=r?.get(T);if(!j)return;const X={...j,deleting:L};d.postMessage({type:"updateNote",data:{note:X}}),y(X)},p=async(T,L)=>{const j=r?.get(T);if(!j)return;const X={...j,pinned:L};d.postMessage({type:"updateNote",data:{note:X}}),y(X),await Xr(i(c),X)},k=async T=>{r?.get(T),d.postMessage({type:"deleteNote",data:{id:T}}),b(T),await $l(i(c),T)},E=async()=>{d.postMessage({type:"clearNotes"}),P(),await Go(i(c))},R=async T=>{await Gl(i(c),T),d.postMessage({type:"reloadNotes"});const L=await Sr(i(c));v(L)},V=T=>i(a)?.()?.get(T),q=()=>{const T=i(o)?.(),L=i(a)?.();return T!==void 0&&L!==void 0},G=async T=>{const L=JSON.parse(T.data),j=L;if(L.tabId&&L.tabId===u){j.type==="exit"&&(n=[],S(o,()=>n),r=new Map,S(a,()=>r),Go(i(c)));return}if(j.type==="addNote"){const X=j.data.note;_(X)}else if(j.type==="updateNote"){const X=j.data.note;y(X)}else if(j.type==="deleteNote"){const X=j.data.id;b(X)}else if(j.type==="clearNotes")P();else if(j.type==="reloadNotes"){const X=await Sr(i(c));v(X)}else j.type==="exit"&&(n=[],S(o,()=>n),r=new Map,S(a,()=>r))};ge(()=>(h(),d.addEventListener(G),()=>{d.removeEventListener(G)})),Xl({addNote:w,updateNote:C,deleteNote:k,pinNote:p,setDeleting:x,getGetNotes:g,getGetMapNotes:f,importNotes:R,clearNotes:E,getNoteById:V,isReadyStore:q});var H=O(),z=A(H);ne(z,()=>t.children??se),m(e,H),K()}const os={};function Jl(e){Se(os,e)}function Co(){const e=ye(os);if(!e)throw new Error("No RelatedTagsContext found");return e}function Ql(e,t){W(t,!0);let n=I({});Jl({getRelatedTags:()=>i(n),setRelatedTags:a=>{S(n,a)}});var r=O(),o=A(r);ne(o,()=>t.children??se),m(e,r),K()}const as={};function ec(e){Se(as,e)}function xo(){const e=ye(as);if(!e)throw new Error("No ScrollContainerContext found");return e}function tc(e,t){W(t,!0);let n=I(null);ec({setScrollContainer:l=>{S(n,l,!0)},getScrollContainer:()=>i(n)});var a=O(),s=A(a);ne(s,()=>t.children??se),m(e,a),K()}const ss={};function nc(e){Se(ss,e)}function is(){const e=ye(ss);if(!e)throw new Error("No ScrollingContext found");return e}function rc(e,t){W(t,!0);let n=I(!1);const r=()=>i(n),o=_l(()=>{S(n,!1)},100);nc({isScrolling:r,enable:()=>{S(n,!0),o()}});var s=O(),l=A(s);ne(l,()=>t.children??se),m(e,s),K()}const ls={};function oc(e){Se(ls,e)}function cs(){const e=ye(ls);if(!e)throw new Error("No SearchContext found");return e}function ac(e,t){W(t,!0);const{getFeedSearch:n}=Eo(),r=Me({feedSearch:n(),tagSearch:""});oc(r);var o=O(),a=A(o);ne(a,()=>t.children??se),m(e,o),K()}const us={};function sc(e){Se(us,e)}function ic(){const e=ye(us);if(!e)throw new Error("No SelectedTagsContext found");return e}function lc(e,t){W(t,!0);const{getAppHistory:n}=Et(),r=()=>new URLSearchParams(n().search).get("selectedTags")?.split(",")||[];let o=r();sc({getSelectedTags:()=>{const u=r();return u.join(",")===o.join(",")||(o=u),o}});var s=O(),l=A(s);ne(l,()=>t.children??se),m(e,s),K()}function cc(e){return new Promise((t,n)=>{const o=e?.transaction($t,"readonly")?.objectStore($t).get("default");re(o,Fe,()=>{const a=o?.result?.settings;t(a)}),re(o,He,()=>{n()})})}function uc(e,t){return new Promise((n,r)=>{const s=e?.transaction($t,"readwrite")?.objectStore($t)?.put({id:"default",settings:t});re(s,Fe,()=>{n()}),re(s,He,()=>{r()})})}function dc(e){return new Promise((t,n)=>{const a=e?.transaction($t,"readwrite")?.objectStore($t)?.clear();re(a,Fe,()=>{t()}),re(a,He,()=>{n()})})}const ds={};function fc(e){Se(ds,e)}function vc(){const e=ye(ds);if(!e)throw new Error("No SettingsContext found");return e}function hc(e,t){W(t,!0);let n=I(Me({showFavicon:!1}));const{getDB:r}=Br(),{createBroadcastChannel:o,tabId:a}=jr(),s=o(),l=M(r),u=async()=>{const _=await cc(i(l));_&&S(n,_,!0)},c=async()=>{u()},d=async _=>{const y=JSON.parse(_.data),b=y;if(y.tabId&&y.tabId===a){b.type==="exit"&&(S(n,{showFavicon:!1},!0),dc(i(l)));return}b.type==="updateSettings"?u():b.type==="exit"&&S(n,{showFavicon:!1},!0)},v=()=>i(n).showFavicon,h=async _=>{i(n).showFavicon=_,await uc(i(l),{showFavicon:_}),s.postMessage({type:"updateSettings"})};ge(()=>(c(),s.addEventListener(d),()=>{s.removeEventListener(d)})),fc({getFaviconEnabled:v,setFaviconShown:h});var g=O(),f=A(g);ne(f,()=>t.children??se),m(e,g),K()}const fs={};function gc(e){Se(fs,e)}function _c(){const e=ye(fs);if(!e)throw new Error("No SidebarContext found");return e}function pc(e,t){W(t,!0);const n=(d,v)=>{if(!v)return d;if(v.type==="closed")return{type:"closed"};switch(d.type){case"opened":return v.type==="close"?{type:"closing"}:v.type==="swipe"?{type:"openSwiping"}:d;case"closed":return v.type==="open"?{type:"opening"}:v.type==="swipe"?{type:"closeSwiping"}:d;case"openSwiping":return v.type==="open"?{type:"opening"}:v.type==="close"?{type:"closing"}:d;case"closeSwiping":return v.type==="open"?{type:"opening"}:v.type==="close"?{type:"closing"}:d;case"opening":return v.type==="opened"?{type:"opened"}:d;default:return d}};let r=I(Me(n({type:"closed"})));const o=d=>{S(r,n(i(r),d),!0)};gc({sidebarOpen:()=>{o({type:"open"})},sidebarClose:()=>{o({type:"close"})},handleComputeState:o,getSidebarState:()=>i(r)});var u=O(),c=A(u);ne(c,()=>t.children??se),m(e,u),K()}function mc(e,t){W(t,!0);const{getAppHistory:n,navigate:r}=Et(),o=()=>new URLSearchParams(n().search).get("stackPages")?.split(",")||[];let a=I(Me(o()));const s=y=>{const b=o();if(!b.includes(y)){b.push(y);const P=new URLSearchParams(n().search);P.set("stackPages",b.join(",")),S(a,b,!0),r(`${n().pathname}?${P.toString()}`)}};ml({pushStackPages:s,hasStackPage:y=>o().includes(y),updateStackPages:()=>{S(a,o(),!0)},popStackPages:()=>{const y=i(a).slice(0,-1);S(a,y,!0)},getStackPages:()=>{const y=o();return y.length>=i(a).length?y.reduce((b,P)=>[...b,{page:P,shown:!0}],[]):i(a).reduce((b,P,w)=>[...b,{page:P,shown:y.length===0?!1:w!==i(a).length-1}],[])},clearStackPages:()=>{S(a,[],!0)},getPageUrl:y=>{const b=o();b.includes(y)||b.push(y);const P=new URLSearchParams(n().search);return P.set("stackPages",b.join(",")),`${n().pathname}?${P}`},createHandlePage:y=>b=>{b.preventDefault(),s(y)},getStackPagesFormUrl:o});var f=O(),_=A(f);ne(_,()=>t.children??se),m(e,f),K()}function wc(e,t){bl(e,{children:(n,r)=>{rc(n,{children:(o,a)=>{Kl(o,{children:(s,l)=>{Cl(s,{children:(u,c)=>{tc(u,{children:(d,v)=>{Dl(d,{children:(h,g)=>{zl(h,{children:(f,_)=>{kl(f,{children:(y,b)=>{mc(y,{children:(P,w)=>{Vl(P,{children:(C,x)=>{Pl(C,{children:(p,k)=>{var E=O(),R=A(E);ne(R,()=>t.children??se),m(p,E)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}function yc(e,t){wc(e,{children:(n,r)=>{Ql(n,{children:(o,a)=>{jl(o,{children:(s,l)=>{ac(s,{children:(u,c)=>{Rl(u,{children:(d,v)=>{pc(d,{children:(h,g)=>{lc(h,{children:(f,_)=>{hc(f,{children:(y,b)=>{wl(y,{children:(P,w)=>{Ol(P,{children:(C,x)=>{Zl(C,{children:(p,k)=>{var E=O(),R=A(E);ne(R,()=>t.children??se),m(p,E)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})}})}let It=I(""),Xt=I(null),qn=I(null),Wn=I(null);function Hr(e,t){S(It,""),setTimeout(()=>{S(It,e,!0),t?.onFinish&&S(qn,t.onFinish,!0),t?.onCancel&&S(Wn,t.onCancel,!0)},16)}const Sc=(e,t,n,r,o)=>{e.preventDefault(),i(t)&&(S(n,null),i(t)(),S(t,null)),S(r,""),i(o)?.style.removeProperty("opacity")};var bc=Y('<button type="button" class="undoButton svelte-1vxmgq5">undo</button>'),kc=Y('<div class="notification svelte-1vxmgq5"><span> </span> <!></div>'),Pc=Y("<div><!></div>");function Ec(e,t){W(t,!0),Oe(()=>{i(It);const a=i(Wn)?2e3:800;i(It)&&(i(Xt)?.getBoundingClientRect(),i(Xt)?.style.setProperty("opacity","1"));const s=setTimeout(()=>{i(Xt)?.style.removeProperty("opacity")},a),l=setTimeout(()=>{S(It,""),i(qn)&&i(qn)(),S(qn,null),S(Wn,null),i(Xt)?.style.removeProperty("opacity")},a+400);return()=>{clearTimeout(s),clearTimeout(l)}});var n=Pc(),r=N(n);{var o=a=>{var s=kc(),l=N(s),u=N(l),c=B(l,2);{var d=v=>{var h=bc();h.__click=[Sc,Wn,qn,It,Xt],m(v,h)};F(c,v=>{i(Wn)&&v(d)})}pt(s,v=>S(Xt,v),()=>i(Xt)),pe(()=>Xn(u,i(It))),m(a,s)};F(r,a=>{i(It)&&a(o)})}m(e,n),K()}tt(["click"]);var Cc=Y('<span class="vh svelte-1s25udk"><!></span>');function gt(e,t){var n=Cc(),r=N(n);ne(r,()=>t.children),m(e,n)}var xc=Y("<a><!></a>"),Dc=Y("<button><!></button>");function Mn(e,t){let n=ie(t,"type",3,"standard"),r=ie(t,"typeButton",3,"button"),o=ie(t,"element",3,"button"),a=ie(t,"href",3,""),s=ie(t,"fullWidth",3,!1),l=ie(t,"withoutMinWidth",3,!1);var u=O(),c=A(u);{var d=h=>{var g=xc();g.__click=function(..._){t.onClick?.apply(this,_)};var f=N(g);ne(f,()=>t.children??se),pe(()=>{Le(g,"href",a()),de(g,1,ue(["button","a",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:s(),withoutMinWidth:l()}]),"svelte-aqjevc")}),m(h,g)},v=h=>{var g=Dc();g.__click=function(..._){t.onClick?.apply(this,_)};var f=N(g);ne(f,()=>t.children??se),pe(()=>{Le(g,"type",r()),de(g,1,ue(["button",{dangerous:n()==="dangerous",secondary:n()==="secondary",fullWidth:s(),withoutMinWidth:l()}]),"svelte-aqjevc")}),m(h,g)};F(c,h=>{o()==="a"?h(d):h(v,!1)})}m(e,u)}tt(["click"]);var Nc=$i('<svg class="svelte-18et5h9"><use></use></svg>');function De(e,t){let n=ie(t,"name",8,"");var r=Nc(),o=N(r);pe(()=>Le(o,"href",`#icon-${n()??""}`)),m(e,r)}var Ac=Y('<button> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></button>');function Sn(e,t){let n=M(()=>t.style==="selected"?"45deg":"0deg");var r=Ac();r.__click=function(...s){t.onClick?.apply(this,s)};var o=N(r),a=B(o);Ce(a,()=>({"--size":t.size==="small"?"10px":"12px","--rotate":i(n)})),De(a.lastChild,{name:"plus"}),pe(()=>{Le(r,"type",t.type),de(r,1,ue([{selectedTag:t.style==="selected",small:t.size==="small"}]),"svelte-uu8a24"),Xn(o,`${t.title??""} `)}),m(e,r)}tt(["click"]);const Tc=(e,t,n,r)=>{const o=t().type;o==="closed"?n():o==="opened"&&r()};var Lc=Y('<button class="buttonMenu svelte-bpktnw"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>');function vs(e,t){W(t,!1);const{sidebarOpen:n,getSidebarState:r,sidebarClose:o}=_c();bo();var a=Lc();a.__click=[Tc,r,n,o];var s=N(a);Ce(s,()=>({"--size":"36px"})),De(s.lastChild,{name:"sidebarMenu"});var l=B(s,2);gt(l,{children:(u,c)=>{var d=Ve("Menu");m(u,d)}}),m(e,a),K()}tt(["click"]);var Mc=(e,t)=>t.onChange?.(e.target?.value||""),Oc=Y('<input class="svelte-15lr19w"/>');function so(e,t){W(t,!0);let n=ie(t,"value",15,"");var r=Oc();r.__input=[Mc,t],pe(()=>Le(r,"placeholder",t.placeholder)),yo("focus",r,function(...o){t.onFocus?.apply(this,o)}),sl(r,n),m(e,r),K()}tt(["input"]);function hs(e,t){W(t,!0),ge(()=>{const n=r=>{r.target&&t.dialog?.open&&t.dialogInner&&t.dialogInner!==r.target&&!t.dialogInner.contains(r.target)&&t.onClose()};return document.addEventListener("mousedown",n,{capture:!0}),()=>{document.removeEventListener("mousedown",n,{capture:!0})}}),K()}var Ic=Y('<dialog><div class="dialogInner svelte-1x410nl"><!></div></dialog> <!>',1);function gs(e,t){W(t,!0);let n=I(null),r=I(null),o=I(!1),{showDialog:a,hideDialog:s}=sr();const l=()=>{const f=setTimeout(()=>{t.onClosed()},150);i(n)?.addEventListener("transitionend",()=>{clearTimeout(f),t.onClosed()},{once:!0}),S(o,!1)};Oe(()=>{t.startClose&&l()}),ge(()=>{i(n)?.showModal(),i(n)?.getClientRects(),S(o,!0)}),ge(()=>(a(),()=>{s()}));var u=Ic(),c=A(u),d=N(c),v=N(d);ne(v,()=>t.children),pt(d,f=>S(r,f),()=>i(r)),pt(c,f=>S(n,f),()=>i(n));var h=B(c,2);{var g=f=>{hs(f,{get dialog(){return i(n)},get dialogInner(){return i(r)},onClose:l})};F(h,f=>{i(n)&&i(r)&&f(g)})}pe(()=>de(c,1,ue(["dialog",{shown:i(o)}]),"svelte-1x410nl")),m(e,u),K()}var Rc=Y("<div><!></div>");function _s(e,t){W(t,!0);let n=I(!1),r=I(null);const o=()=>{const c=setTimeout(()=>{t.onClosed()},150);i(r)?.addEventListener("transitionend",()=>{clearTimeout(c),t.onClosed()},{once:!0}),S(n,!1)},a=c=>{c.target!==i(r)&&!i(r)?.contains(c.target)&&o()},s=c=>{c.target!==i(r)&&!i(r)?.contains(c.target)&&o()};ge(()=>{i(r)?.getClientRects(),S(n,!0);const c=setTimeout(()=>{document.addEventListener("focusin",a),document.addEventListener("click",s)},0);return()=>{clearTimeout(c),document.removeEventListener("focusin",a),document.removeEventListener("click",s)}}),Oe(()=>{t.startClose&&o()});var l=Rc(),u=N(l);ne(u,()=>t.children),pt(l,c=>S(r,c),()=>i(r)),pe(()=>de(l,1,ue(["menu",{top:t.positionTop,shown:i(n)}]),"svelte-ujw4xi")),m(e,l),K()}const Bc=(e,t)=>{i(t)||S(t,!0)};var jc=(e,t)=>t("newest"),Fc=(e,t)=>t("oldest"),Hc=(e,t)=>t("AtoZ"),zc=(e,t)=>t("ZtoA"),Uc=Y("<div><button>Newest</button> <button>Oldest</button> <button>A to Z</button> <button>Z to A</button></div>"),Vc=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),qc=Y('<div class="orderMenu svelte-14zj87s"><button><!> <!></button> <!></div>');function Wc(e,t){W(t,!0);const n=(P,w=se)=>{var C=Uc(),x=N(C);x.__click=[jc,d];var p=B(x,2);p.__click=[Fc,d];var k=B(p,2);k.__click=[Hc,d];var E=B(k,2);E.__click=[zc,d],pe(()=>{de(C,1,ue(["menu",{menuDialog:w()}]),"svelte-14zj87s"),de(x,1,ue(["menuButton",{menuButtonDialog:w(),current:i(c)==="newest"}]),"svelte-14zj87s"),de(p,1,ue(["menuButton",{menuButtonDialog:w(),current:i(c)==="oldest"}]),"svelte-14zj87s"),de(k,1,ue(["menuButton",{menuButtonDialog:w(),current:i(c)==="AtoZ"}]),"svelte-14zj87s"),de(E,1,ue(["menuButton",{menuButtonDialog:w(),current:i(c)==="ZtoA"}]),"svelte-14zj87s")}),m(P,C)};let r=I(!1),o=I(!1);const{checkMobileSize:a}=Hn(),{getFeedOrder:s,setFeedOrder:l}=Qa();let u=M(a),c=M(s);const d=P=>{S(o,!0),l(P)},v=()=>{S(r,!1),S(o,!1)};var h=qc(),g=N(h);g.__click=[Bc,r],de(g,1,ue(["button","buttonMenu"]),"svelte-14zj87s");var f=N(g);De(f,{name:"filter"});var _=B(f,2);gt(_,{children:(P,w)=>{var C=Ve("show feed order menu");m(P,C)}});var y=B(g,2);{var b=P=>{var w=O(),C=A(w);{var x=k=>{gs(k,{get startClose(){return i(o)},onClosed:v,children:(E,R)=>{n(E,()=>!0)},$$slots:{default:!0}})},p=k=>{var E=Vc(),R=A(E);Ce(R,()=>({"--right":"20px","--top":"60px"})),_s(R.lastChild,{get startClose(){return i(o)},onClosed:v,children:(V,q)=>{n(V,()=>!1)},$$slots:{default:!0}}),m(k,E)};F(C,k=>{i(u)?k(x):k(p,!1)})}m(P,w)};F(y,P=>{i(r)&&P(b)})}m(e,h),K()}tt(["click"]);var U=(e=>(e.NewNote="newNote",e.EditNote="editNote",e.Settings="settings",e.ImportData="importData",e.ExportData="exportData",e.ClearStore="clearStore",e.Account="account",e.Sync="sync",e.Start="start",e.Auth="auth",e.Signin="signin",e.Signup="signup",e.AccessKeys="accessKeys",e.ConfirmAccessKey="confirmAccessKey",e.Subscription="subscription",e.Exit="exit",e.NotFound="notFound",e.About="about",e))(U||{}),Kc=Y('<div class="header svelte-13t3afu"><div class="top svelte-13t3afu"><div class="menu svelte-13t3afu"><a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Settings</span></a> <a class="link svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Sync</span></a></div> <div class="mobile svelte-13t3afu"><!></div> <a class="buttonAdd svelte-13t3afu"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Note</span></a></div> <div class="bottom svelte-13t3afu"><div><div class="sidebarSearchWrapper"><!></div></div> <div class="right svelte-13t3afu"><div class="filter svelte-13t3afu"><div class="feedSearchWrapper svelte-13t3afu"><!></div> <!></div></div></div></div>');function Yc(e,t){W(t,!0);const{createHandlePage:n,getPageUrl:r}=Mt(),o=cs(),{setFeedSearch:a}=Eo(),{getScrollContainer:s}=xo();let l=M(s);const u=()=>{i(l)&&i(l).scrollTo({top:0,behavior:"smooth"})},c=j=>{a(j)};var d=Kc(),v=N(d),h=N(v),g=N(h),f=M(()=>n(U.Settings));g.__click=function(...j){i(f)?.apply(this,j)};var _=N(g);Ce(_,()=>({"--rotate":"30deg","--size":"20px"})),De(_.lastChild,{name:"settings"});var y=B(g,2),b=M(()=>n(U.Sync));y.__click=function(...j){i(b)?.apply(this,j)};var P=N(y);Ce(P,()=>({"--size":"20px"})),De(P.lastChild,{name:"sync"});var w=B(h,2),C=N(w);vs(C,{});var x=B(w,2),p=M(()=>n(U.NewNote));x.__click=function(...j){i(p)?.apply(this,j)};var k=N(x);Ce(k,()=>({"--size":"16px","--color":"#b0b0b0"})),De(k.lastChild,{name:"plus"});var E=B(v,2),R=N(E);de(R,1,ue(["left"]),"svelte-13t3afu");var V=N(R),q=N(V);so(q,{placeholder:"Search tag",get value(){return o.tagSearch},set value(j){o.tagSearch=j}});var G=B(R,2),H=N(G),z=N(H),T=N(z);so(T,{onFocus:u,onChange:c,placeholder:"Search",get value(){return o.feedSearch}});var L=B(z,2);Wc(L,{}),pe((j,X,Z)=>{Le(g,"href",j),Le(y,"href",X),Le(x,"href",Z)},[()=>r(U.Settings),()=>r(U.Sync),()=>r(U.NewNote)]),m(e,d),K()}tt(["click"]);function $c(e,t){W(t,!0);const{getIsKeyboardVisible:n}=Hl();let r=ie(t,"dialog",7);const o=M(n),a=ar();let s=null;const l=()=>{t.dialogState==="swiping"&&t.onClose()};Oe(()=>(t.dialogState==="swiping"&&(s=setTimeout(l,3e3)),()=>{s&&(clearTimeout(s),s=null)}));let u=null,c=null;const d=3,v=50,h=5,g=.6,f=.3,_=.35,y=.95;let b=0,P=0,w=0,C=!1,x=!1,p=0,k=0,E=0;const R=()=>{b=0,P=0,C=!1,x=!1,p=0,k=0,E=0,w=0,u=null,c!==null&&(cancelAnimationFrame(c),c=null),s&&(clearTimeout(s),s=null)},V=Z=>{r()&&t.dialogState==="opened"&&(b=Z.touches[0].clientX,P=Z.touches[0].clientY,w=performance.now(),C=!0,x=!1)},q=Z=>t.dialogState==="opened"&&Z>0||t.dialogState==="swiping"&&Z>0,G=()=>{if(r()){r().style.setProperty("--transition-timing","0s"),t.onSwipe(),navigator.vibrate&&navigator.vibrate(10);try{const Z=window.getComputedStyle(r()),le=Z.transform||Z.webkitTransform||"";if(k=r().offsetWidth,(t.dialogState==="swiping"||t.dialogState==="opened")&&(p=0),le&&le!=="none")try{p=new DOMMatrix(le).m41}catch{}x=!0}catch{R()}}},H=()=>{if(!r())return;const le=Math.abs(p+E*k/100)/k;r().style.setProperty("--backdrop-bg",`rgba(0, 0, 0, ${.1*(1-le)})`)},z=()=>{if(c=null,!u||!C||!r()||i(o)){R();return}const Z=u.touches[0].clientX,le=u.touches[0].clientY,we=Z-b,ce=le-P,me=Math.abs(we)>Math.abs(ce),Q=Math.abs(we)>d;if(!x)if(me&&Q&&q(we))try{G()}catch{R();return}else return;if(!q(we))return;r().style.setProperty("--transition-timing","0s");let te=p+we*y;te=Math.max(0,Math.min(k,te)),r().style.transform=`translate3d(${te}px, 0, 0)`,a.swipingRatio=Math.abs(1-te/k),E=(te-p)/k*100,t.dialogState==="swiping"&&(s&&clearTimeout(s),s=setTimeout(l,3e3)),H()},T=Z=>{if(!C)return;u=Z,c===null&&(c=requestAnimationFrame(z));const le=Z.touches[0].clientX-b,we=Z.touches[0].clientY-P,ce=Math.abs(le)>Math.abs(we);x&&ce&&Z.preventDefault()},L=Z=>{const le=Math.abs(Z);if(le>=g)return h;if(le>=f){const we=(le-f)/(g-f);return v-we*(v-h)}else return v},j=(Z,le)=>{if(Math.abs(Z)>=g)return _*.5;const ce=Math.abs(E)/100;return le?_*Math.max(.5,1-ce):_*Math.max(.5,ce)},X=Z=>{if(c!==null&&(cancelAnimationFrame(c),c=null),!C||!r()){R();return}if(!x){R();return}let le=0;if(Z?.changedTouches?.[0]){const te=Z.changedTouches[0].clientX,ke=performance.now()-w;ke>0&&(le=(te-b)/ke)}const we=L(le);let ce=null;t.dialogState==="swiping"&&(ce=Math.abs(E)>we||le<-f?"close":"open");const me=t.dialogState==="swiping"&&ce==="close",Q=j(le,me);a.duration=Q-.02,r().style.setProperty("--transition-timing",`${Q}s`),r().offsetWidth,r().style.transform="",ce==="open"?t.onOpen():ce==="close"&&t.onClose(),r()?.style.removeProperty("--backdrop-bg"),R()};ge(()=>(r().addEventListener("touchstart",V,{passive:!0}),r().addEventListener("touchmove",T,{passive:!1}),r().addEventListener("touchend",X,{passive:!0}),r().addEventListener("touchcancel",X,{passive:!0}),()=>{r().removeEventListener("touchstart",V),r().removeEventListener("touchmove",T),r().removeEventListener("touchend",X),r().removeEventListener("touchcancel",X),c!==null&&cancelAnimationFrame(c)})),K()}var Gc=(e,t)=>{t.onStartClose()},Xc=Y('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Zc=Y('<dialog><div class="dialogInner svelte-vr2o0t"><div class="header svelte-vr2o0t"><div><!></div></div> <!></div></dialog> <!>',1);function Jc(e,t){W(t,!0);let n=350;const{isScrolling:r,enable:o}=is();let a=I(null),s=I(null);const l=ar(),u=p=>{p.preventDefault(),t.onStartClose()};ge(()=>(i(a)?.addEventListener("close",t.onClosed),i(a)?.addEventListener("cancel",u),()=>{i(a)?.removeEventListener("close",t.onClosed),i(a)?.removeEventListener("cancel",u)}));const c=()=>{i(a)?.style.removeProperty("--transition-timing"),i(a)?.style.removeProperty("transform"),i(a)?.style.removeProperty("--backdrop-bg")},d=()=>{o()},v=M(r);Oe(()=>{if(t.dialogState,!!i(a))switch(t.dialogState){case"opening":{i(a).open||i(a).showModal(),i(a).getBoundingClientRect();const p=setTimeout(()=>{c()},n+1),k=()=>{clearTimeout(p),c()};return i(a)?.addEventListener("transitionend",k,{once:!0}),t.onOpened(),()=>{i(a)?.removeEventListener("transitionend",k)}}case"closing":{const p=setTimeout(()=>{t.dialogState==="closing"&&t.onClosed()},n+1),k=()=>{clearTimeout(p),t.onClosed()};return i(a)?.addEventListener("transitionend",k,{once:!0}),()=>{i(a)?.removeEventListener("transitionend",k)}}case"opened":c()}});var h=Zc(),g=A(h),f=N(g),_=N(f),y=N(_),b=N(y);{var P=p=>{var k=Xc();de(k,1,ue(["navigateButton","buttonBack"]),"svelte-vr2o0t"),k.__click=[Gc,t];var E=N(k);Ce(E,()=>({"--size":"36px"})),De(E.lastChild,{name:"back"});var R=B(E,2);gt(R,{children:(V,q)=>{var G=Ve("back");m(V,G)}}),m(p,k)};F(b,p=>{(!(t.blocked||t.hidden)||t.blocked&&t.unBlockedBack)&&p(P)})}var w=B(_,2);ne(w,()=>t.children),pt(f,p=>S(s,p),()=>i(s)),pt(g,p=>S(a,p),()=>i(a));var C=B(g,2);{var x=p=>{$c(p,{get onClose(){return t.onStartClose},get onOpen(){return t.onStartOpen},get onSwipe(){return t.onSwipe},get dialogState(){return t.dialogState},get dialog(){return i(a)}})};F(C,p=>{(!i(v)&&t.dialogState==="opened"||t.dialogState==="swiping")&&(!t.blocked||t.unBlockedBack)&&p(x)})}pe(()=>de(g,1,ue([{open:t.dialogState==="opened",hidden:t.hidden,isAnimationOn:l.working&&(!l.isSwiping||!t.hidden)},{hidden:t.hidden}]),"svelte-vr2o0t")),yo("scroll",f,d),m(e,h),K()}tt(["click"]);const Xo=(e,t)=>{if(!t)return e;if(t.type==="closed")return{type:"closed"};switch(e.type){case"opened":return t.type==="close"?{type:"closing"}:t.type==="swipe"?{type:"swiping"}:e;case"closed":return t.type==="open"?{type:"opening"}:e;case"swiping":return t.type==="open"?{type:"opening"}:t.type==="close"?{type:"closing"}:e;case"opening":return t.type==="opened"?{type:"opened"}:e;default:return e}};function Qc(e,t){W(t,!0);let n=ie(t,"blocked",3,!1),r=ie(t,"hiddenDialog",3,!1),o=ie(t,"unBlockedBack",3,!1),a=ie(t,"onStartClose",3,()=>{}),s=ie(t,"onClose",3,()=>{});const l=ar();let u=I(Me(Xo({type:"closed"})));const c=w=>{S(u,Xo(i(u),w),!0)},d=()=>{n()&&!o()||(a()(),c({type:"close"}))},v=()=>{c({type:"open"})},h=()=>{c({type:"opened"}),l.duration=.2},g=()=>{s()(),c({type:"closed"}),l.swipingRatio=1,l.duration=.2},f=()=>{c({type:"swipe"})};Oe(()=>{i(u).type==="swiping"?l.isSwiping=!0:l.isSwiping=!1,i(u).type==="closed"&&t.shownDialog?v():i(u).type==="opened"&&!t.shownDialog&&d()});var _={handleComputeState:c},y=O(),b=A(y);{var P=w=>{Jc(w,{onSwipe:f,onOpened:h,onClosed:g,onStartClose:d,onStartOpen:v,get dialogState(){return i(u).type},get hidden(){return r()},get blocked(){return n()},get unBlockedBack(){return o()},children:(C,x)=>{var p=O(),k=A(p);ne(k,()=>t.children),m(C,p)},$$slots:{default:!0}})};F(b,w=>{i(u).type!=="closed"&&w(P)})}return m(e,y),K(_)}const eu=({getDialog:e,onOpen:t,onStartClose:n,onClose:r})=>{const o=s=>{s.preventDefault(),n()},a=()=>{r?.()};ge(()=>{const s=e();return s?.addEventListener("cancel",o),s?.addEventListener("close",a),()=>{s?.removeEventListener("cancel",o),s?.removeEventListener("close",a)}}),ge(()=>{const s=e();s?.showModal(),s?.getBoundingClientRect(),t()})};var tu=(e,t)=>{t.onStartBack()},nu=Y('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),ru=(e,t)=>{t.onStartClose()},ou=Y('<button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),au=Y('<dialog><div class="dialogInner svelte-rt409n"><div class="header svelte-rt409n"><div><!></div> <div><!></div></div> <!></div></dialog> <!>',1);function su(e,t){W(t,!0);let n=ie(t,"blockedDialog",3,!1),r=ie(t,"hiddenDialog",3,!1),o=ie(t,"isDesktopAnimationOff",3,!1),a=I(null),s=I(null);eu({getDialog:()=>i(a),onOpen:t.onOpen,onStartClose:t.onStartClose,onClose:t.onClose});const l=ar();Oe(()=>{t.stateDialog==="closing"&&(l.working?i(a)?.addEventListener("transitionend",()=>{i(a)?.close()},{once:!0}):i(a)?.close())});const{getDialogPageHeight:u}=Po(),c=M(u);var d=au(),v=A(d),h=N(v),g=N(h),f=N(g),_=N(f);{var y=p=>{var k=nu();de(k,1,ue(["navigateButton","buttonBack"]),"svelte-rt409n"),k.__click=[tu,t];var E=N(k);Ce(E,()=>({"--size":"28px"})),De(E.lastChild,{name:"back"});var R=B(E,2);gt(R,{children:(V,q)=>{var G=Ve("back");m(V,G)}}),m(p,k)};F(_,p=>{(!(n()||r())||n()&&t.unBlockedBack)&&t.onStartBack&&p(y)})}var b=B(f,2),P=N(b);{var w=p=>{var k=ou();de(k,1,ue(["navigateButton","buttonClose"]),"svelte-rt409n"),k.__click=[ru,t];var E=N(k);Ce(E,()=>({"--size":"28px"})),De(E.lastChild,{name:"close"});var R=B(E,2);gt(R,{children:(V,q)=>{var G=Ve("close");m(V,G)}}),m(p,k)};F(P,p=>{n()||r()||p(w)})}var C=B(g,2);ne(C,()=>t.children),pt(h,p=>S(s,p),()=>i(s)),pt(v,p=>S(a,p),()=>i(a));var x=B(v,2);hs(x,{get dialog(){return i(a)},get dialogInner(){return i(s)},get onClose(){return t.onStartClose}}),pe(()=>{Zn(v,`height: ${i(c)+74}px`),de(v,1,ue([{open:t.stateDialog==="open",isAnimationOn:l.working,isDesktopAnimationOff:o(),hiddenDialog:r()}]),"svelte-rt409n")}),m(e,d),K()}tt(["click"]);const iu=({onStartClose:e,onClose:t})=>{let n=I("close");return{get state(){return i(n)},set state(s){S(n,s,!0)},handleStartClose:(s=!1)=>{s||(S(n,"closing"),e?.())},handleOpen:()=>{S(n,"open")},handleClose:()=>{S(n,"close"),t?.()}}};function lu(e,t){W(t,!0);let n=ie(t,"blockedDialog",3,!1),r=ie(t,"hiddenDialog",3,!1),o=ie(t,"onStartClose",3,()=>{}),a=ie(t,"onClose",3,()=>{}),s=iu({onStartClose:o(),onClose:a()});Oe(()=>{s.state==="close"&&t.shownDialog?s.state="opening":s.state==="open"&&!t.shownDialog&&s.handleStartClose(n())});const l=v=>{v.key==="Escape"&&(document.activeElement instanceof HTMLInputElement&&document.activeElement.type==="text"||document.activeElement instanceof HTMLTextAreaElement||n())&&(v.preventDefault(),v.stopPropagation())};ge(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}));var u=O(),c=A(u);{var d=v=>{su(v,{get stateDialog(){return s.state},get blockedDialog(){return n()},get unBlockedBack(){return t.unBlockedBack},get hiddenDialog(){return r()},get onOpen(){return s.handleOpen},get onStartBack(){return t.onStartBack},onStartClose:()=>{s.handleStartClose(n())},get onClose(){return s.handleClose},children:(h,g)=>{var f=O(),_=A(f);ne(_,()=>t.children),m(h,f)},$$slots:{default:!0}})};F(c,v=>{s.state!=="close"&&v(d)})}m(e,u),K()}function cu(e,t){W(t,!0);let n=ie(t,"blockedDialog",3,!1),r=ie(t,"hiddenDialog",3,!1),o=ie(t,"isLastDialog",3,!1),a=ie(t,"onStartClose",3,()=>{}),s=ie(t,"onClose",3,()=>{});const l=M(()=>o()?void 0:t.onStartBack),{showDialog:u,hideDialog:c}=sr();ge(()=>(u(),()=>{c()}));const{checkMobileSize:d}=Hn();var v=O(),h=A(v);{var g=_=>{Qc(_,{get shownDialog(){return t.shownDialog},get blocked(){return n()},get unBlockedBack(){return t.unBlockedBack},get hiddenDialog(){return r()},get children(){return t.children},get onStartClose(){return t.onStartBack},get onClose(){return s()}})},f=_=>{lu(_,{get shownDialog(){return t.shownDialog},get blockedDialog(){return n()},get unBlockedBack(){return t.unBlockedBack},get hiddenDialog(){return r()},get children(){return t.children},get onStartBack(){return i(l)},get onStartClose(){return a()},get onClose(){return s()}})};F(h,_=>{d()?_(g):_(f,!1)})}m(e,v),K()}function Zo(e,t){W(t,!0);const{back:n,closeDialogStack:r}=Et(),{popStackPages:o}=Mt();let a=ie(t,"blocked",3,!1),s=ie(t,"isLastDialog",3,!1),l=ie(t,"onBack",3,()=>{});const{checkBlockedDialog:u,checkUnBlockedBackDialog:c}=sr(),d=M(()=>a()||t.hidden||u()),v=M(()=>c()&&!s());cu(e,{get shownDialog(){return t.shown},get blockedDialog(){return i(d)},get unBlockedBack(){return i(v)},get hiddenDialog(){return t.hidden},get isLastDialog(){return s()},onStartBack:()=>{(!i(d)||i(d)&&i(v))&&t.shown&&(n(),l()())},onStartClose:()=>{(!i(d)||i(d)&&i(v))&&t.shown&&r()},onClose:()=>{o()},children:(_,y)=>{var b=O(),P=A(b);ne(P,()=>t.children),m(_,b)},$$slots:{default:!0}}),K()}const uu="modulepreload",du=function(e){return"/"+e},Jo={},Te=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){let u=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=s?.nonce||s?.getAttribute("nonce");o=u(n.map(c=>{if(c=du(c),c in Jo)return;Jo[c]=!0;const d=c.endsWith(".css"),v=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${v}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":uu,d||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),d)return new Promise((g,f)=>{h.addEventListener("load",g),h.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return o.then(s=>{for(const l of s||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})};var fu=Y("<div></div>"),vu=Y('<div class="sidebarFixed svelte-1hv280f"><div class="nav svelte-1hv280f"><!> <div class="menu svelte-1hv280f"><a class="link svelte-1hv280f"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a> <a class="link svelte-1hv280f"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a></div></div> <div class="searchWrapper svelte-1hv280f"><!></div> <!></div> <div><!> <!></div>',1),hu=Y("<div></div>"),gu=Y('<div class="sidebar svelte-1hv280f"><div class="sidebarFixed svelte-1hv280f"><!></div> <div class="tags svelte-1hv280f"><!> <!></div></div>');function _u(e,t){W(t,!0);const{checkMobileSize:n}=Hn(),{getRelatedTags:r}=Co(),{isReadyStore:o}=Fr(),{getAppHistory:a,navigate:s}=Et(),{getPageUrl:l,createHandlePage:u,getStackPagesFormUrl:c}=Mt(),d=cs(),v=M(a),h=M(o);let g=I(null),f=M(()=>new URLSearchParams(i(v).search).get("selectedTags")?.split(",")||[]),_=null;function y(){return _||(_=Te(()=>import("./MobileSidebar-B0Iq_kmS.js"),__vite__mapDeps([0,1]))),_}const b=H=>{const z=new URLSearchParams(i(v).search);z.set("selectedTags",[...i(f),H].join(",")),s(`${i(v).pathname}${z.size>0?`?${z.toString()}`:""}`),d.tagSearch=""},P=H=>{const z=new URLSearchParams(i(v).search),T=i(f).filter(L=>L!==H);T.length===0?z.delete("selectedTags"):z.set("selectedTags",T.join(",")),s(`${i(v).pathname}${z.size>0?`?${z.toString()}`:""}`)};let w=M(r),C=M(()=>i(h)?Object.values(i(w)).filter(H=>!i(f).some(z=>H.name===z)&&H.name!=="inbox").sort((H,z)=>H.name.localeCompare(z.name)):[]),x=M(()=>i(w).inbox&&i(f).includes("inbox")===!1?i(w).inbox:null),p=M(n);ge(()=>{i(p)&&y()});const{checkExistedDialog:k}=sr();let E=M(()=>c().length>0||k());var R=O(),V=A(R);{var q=H=>{var z=O(),T=A(z);ja(T,y,null,(L,j)=>{const X=M(()=>i(j).default);var Z=O(),le=A(Z);za(le,()=>i(X),(we,ce)=>{ce(we,{get blocked(){return i(E)},children:(me,Q)=>{var te=vu(),We=A(te),ke=N(We),_e=N(ke);vs(_e,{});var oe=B(_e,2),be=N(oe),Ot=M(()=>u(U.Settings));be.__click=function(...he){i(Ot)?.apply(this,he)};var Ct=N(be);Ce(Ct,()=>({"--size":"24px"})),De(Ct.lastChild,{name:"settings"});var nt=B(Ct,2);gt(nt,{children:(he,Ye)=>{var Pe=Ve("Settings");m(he,Pe)}});var Ne=B(be,2),Ke=M(()=>u(U.Sync));Ne.__click=function(...he){i(Ke)?.apply(this,he)};var rt=N(Ne);Ce(rt,()=>({"--size":"24px"})),De(rt.lastChild,{name:"sync"});var Xe=B(rt,2);gt(Xe,{children:(he,Ye)=>{var Pe=Ve("Sync");m(he,Pe)}});var Ze=B(ke,2),Ae=N(Ze);so(Ae,{placeholder:"Search tag",get value(){return d.tagSearch},set value(he){d.tagSearch=he}});var ot=B(Ze,2);{var zn=he=>{var Ye=fu();de(Ye,1,ue(["tags","selectedTags"]),"svelte-1hv280f"),bn(Ye,20,()=>i(f),Pe=>Pe,(Pe,Dt)=>{Sn(Pe,{get title(){return Dt},onClick:()=>P(Dt),style:"selected"})}),pt(Ye,Pe=>S(g,Pe),()=>i(g)),m(he,Ye)};F(ot,he=>{i(f).length>0&&he(zn)})}var ir=B(We,2);de(ir,1,ue(["tags","tagsWrapper"]),"svelte-1hv280f");var xt=N(ir);{var vn=he=>{Sn(he,{get title(){return i(x).name},onClick:()=>b(i(x).name)})};F(xt,he=>{i(x)&&he(vn)})}var lr=B(xt,2);bn(lr,17,()=>i(C),he=>he.name,(he,Ye)=>{var Pe=O(),Dt=A(Pe);{var cr=Un=>{Sn(Un,{get title(){return i(Ye).name},onClick:()=>b(i(Ye).name)})};F(Dt,Un=>{(d.tagSearch===""||i(Ye).name.toLowerCase().indexOf(d.tagSearch.toLowerCase())!==-1)&&Un(cr)})}m(he,Pe)}),pe((he,Ye)=>{Le(be,"href",he),Le(Ne,"href",Ye)},[()=>l(U.Settings),()=>l(U.Sync)]),m(me,te)},$$slots:{default:!0}})}),m(L,Z)}),m(H,z)},G=H=>{var z=gu(),T=N(z),L=N(T);{var j=ce=>{var me=hu();de(me,1,ue(["tags","selectedTags"]),"svelte-1hv280f"),bn(me,20,()=>i(f),Q=>Q,(Q,te)=>{Sn(Q,{get title(){return te},onClick:()=>P(te),style:"selected"})}),m(ce,me)};F(L,ce=>{i(f).length>0&&ce(j)})}var X=B(T,2),Z=N(X);{var le=ce=>{Sn(ce,{get title(){return i(x).name},onClick:()=>b(i(x).name)})};F(Z,ce=>{i(x)&&ce(le)})}var we=B(Z,2);bn(we,17,()=>i(C),ce=>ce.name,(ce,me)=>{var Q=O(),te=A(Q);{var We=ke=>{Sn(ke,{get title(){return i(me).name},onClick:()=>b(i(me).name)})};F(te,ke=>{(d.tagSearch===""||i(me).name.toLowerCase().indexOf(d.tagSearch.toLowerCase())!==-1)&&ke(We)})}m(ce,Q)}),m(H,z)};F(V,H=>{i(p)?H(q):H(G,!1)})}m(e,R),K()}tt(["click"]);const pu=(e,t,n)=>{S(t,!0),S(n,!0)},mu=(e,t,n,r)=>{t(n.note.id,!n.note.pinned),Hr(n.note.pinned?"Note unpinned":"Note pinned"),S(r,!0)},wu=(e,t,n)=>{navigator.clipboard.writeText(t.note.url),Hr("Link copied"),S(n,!0)};var yu=Y("<div><button>Copy link</button></div>"),Su=Y('<div class="menu svelte-8ve3pe"><!> <div><button> </button></div> <div><button>Delete</button></div></div>'),bu=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function ku(e,t){W(t,!0);const n=(x,p=se)=>{var k=Su(),E=N(k);{var R=T=>{var L=yu(),j=N(L);j.__click=[wu,t,v],pe(()=>de(j,1,ue(["button",{buttonMenuDialog:p()}]),"svelte-8ve3pe")),m(T,L)};F(E,T=>{p()&&t.note.url&&T(R)})}var V=B(E,2),q=N(V);q.__click=[mu,l,t,v];var G=N(q),H=B(V,2),z=N(H);z.__click=[pu,h,v],pe(()=>{de(q,1,ue(["button",{buttonMenuDialog:p()}]),"svelte-8ve3pe"),Xn(G,t.note.pinned?"Unpin":"Pin"),de(z,1,ue(["button",{buttonMenuDialog:p()}]),"svelte-8ve3pe")}),m(x,k)},{getRelatedTags:r}=Co(),{getAppHistory:o,replace:a}=Et(),{deleteNote:s,pinNote:l,setDeleting:u}=Fr();let c=M(o),d=ie(t,"shownMenu",15),v=I(!1),h=I(!1);const{checkMobileSize:g}=Hn();let f=M(g),_=M(()=>new URLSearchParams(i(c).search).get("selectedTags")?.split(",")||[]);const y=async()=>{const x=r();u(t.note.id,!0);let p=!1;Hr("Note deleted",{onCancel:()=>{p=!0,u(t.note.id,!1)},onFinish:()=>{p||(t.note.tags.forEach(k=>{if(i(_).includes(k)&&x[k].connections===1){const E=new URLSearchParams(i(c).search),R=i(_).filter(V=>V!==k);R.length===0?E.delete("selectedTags"):E.set("selectedTags",R.join(",")),a(`${i(c).pathname}${E.size>0?`?${E.toString()}`:""}`)}}),s(t.note.id))}})},b=()=>{i(h)&&y(),d(!1),S(v,!1)};var P=O(),w=A(P);{var C=x=>{var p=O(),k=A(p);{var E=V=>{gs(V,{get startClose(){return i(v)},onClosed:b,children:(q,G)=>{n(q,()=>!0)},$$slots:{default:!0}})},R=V=>{var q=bu(),G=A(q);Ce(G,()=>({"--bottom":"-90px","--right":"20px"})),_s(G.lastChild,{get startClose(){return i(v)},get positionTop(){return t.showMenuUp},onClosed:b,children:(H,z)=>{n(H,()=>!1)},$$slots:{default:!0}}),m(V,q)};F(k,V=>{i(f)?V(E):V(R,!1)})}m(x,p)};F(w,x=>{d()&&x(C)})}m(e,P),K()}tt(["click"]);const Pu=(e,t)=>{S(t,!0)},Eu=(e,t,n)=>{navigator.clipboard.writeText(t.note.url),Hr("Link copied"),S(n,!1)},Cu=(e,t)=>{S(t,!0)},xu=(e,t)=>{S(t,!1)},Du=(e,t,n,r)=>{e.preventDefault(),t(`${U.EditNote}?id=${n.note.id}`),S(r,!1)};var Nu=Y('<div class="iconPlaceholder svelte-1jg44o9"></div>'),Au=Y('<img loading="lazy" class="noteIcon" height="16" width="16" alt=""/>'),Tu=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Lu=Y('<div class="noteIconWrapper svelte-1jg44o9"><!></div>'),Mu=Y('<button class="button svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button>'),Ou=(e,t)=>{S(t,!1)},Iu=Y('<!> <a target="_blank" rel="noopener noreferrer" class="button openLink svelte-1jg44o9"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></a>',1),Ru=Y('<li><!> <a class="noteLink svelte-1jg44o9" target="_blank" rel="noopener noreferrer"> </a> <div><!> <button><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!></button></div> <!></li>');function Bu(e,t){W(t,!0);const{pushStackPages:n}=Mt(),{getFaviconEnabled:r}=vc();let o=I(!1),a=I(!1),s=I(!1),l=M(r);const{checkMobileSize:u}=Hn(),c=p=>{try{return`https://icons.duckduckgo.com/ip3/${new URL(p).host}.ico`}catch{return""}};var d=Ru();d.__focusin=[Cu,a],d.__focusout=[xu,a];var v=N(d);{var h=p=>{var k=Lu(),E=N(k);{var R=q=>{var G=O(),H=A(G);{var z=L=>{var j=Nu();m(L,j)},T=L=>{var j=Au();pe(X=>Le(j,"src",X),[()=>c(t.note.url)]),yo("error",j,()=>{S(s,!0)}),m(L,j)};F(H,L=>{i(s)?L(z):L(T,!1)})}m(q,G)},V=q=>{var G=Tu(),H=A(G);Ce(H,()=>({"--size":"16px"})),De(H.lastChild,{name:"note"}),m(q,G)};F(E,q=>{t.note.url?q(R):q(V,!1)})}m(p,k)};F(v,p=>{i(l)&&p(h)})}var g=B(v,2);g.__click=[Du,n,t,a];var f=N(g),_=B(g,2),y=N(_);{var b=p=>{var k=Iu(),E=A(k);{var R=H=>{var z=Mu();z.__click=[Eu,t,a];var T=N(z);Ce(T,()=>({"--size":"20px"})),De(T.lastChild,{name:"copy"});var L=B(T,2);gt(L,{children:(j,X)=>{var Z=Ve("copy link");m(j,Z)}}),pe(()=>Le(z,"tabindex",t.focusHidden?-1:0)),m(H,z)};F(E,H=>{u()||H(R)})}var V=B(E,2);V.__click=[Ou,a];var q=N(V);Ce(q,()=>({"--size":"18px"})),De(q.lastChild,{name:"open"});var G=B(q,2);gt(G,{children:(H,z)=>{var T=Ve();pe(()=>Xn(T,t.note.name)),m(H,T)}}),pe(()=>{Le(V,"href",t.note.url),Le(V,"tabindex",t.focusHidden?-1:0)}),m(p,k)};F(y,p=>{t.note.url&&p(b)})}var P=B(y,2);P.__click=[Pu,o],de(P,1,ue(["button","buttonMenu"]),"svelte-1jg44o9");var w=N(P);Ce(w,()=>({"--size":"18px","--rotate":"90deg"})),De(w.lastChild,{name:"menu"});var C=B(w,2);gt(C,{children:(p,k)=>{var E=Ve("show menu");m(p,E)}});var x=B(_,2);ku(x,{get note(){return t.note},get showMenuUp(){return t.showMenuUp},get shownMenu(){return i(o)},set shownMenu(p){S(o,p,!0)}}),pe(p=>{de(d,1,ue(["record",{pinned:t.note.pinned}]),"svelte-1jg44o9"),Le(g,"tabindex",t.focusHidden?-1:0),Le(g,"href",p),Xn(f,t.note.name),de(_,1,ue(["noteMenuWrapper",{noteMenuWrapperActive:i(a)}]),"svelte-1jg44o9"),Le(P,"tabindex",t.focusHidden?-1:0)},[()=>`/?stackPages=${encodeURIComponent(`${U.EditNote}?id=${t.note.id}`)}`]),m(e,d),K()}tt(["focusin","focusout","click"]);var ju=Y('<div><!> <div class="loader svelte-m0sno1"></div></div>');function ps(e,t){W(t,!0);let n=I(!1);ge(()=>{const a=setTimeout(()=>{S(n,!0)},200);return()=>{clearTimeout(a)}});var r=ju(),o=N(r);ne(o,()=>t.children??se),pe(()=>de(r,1,ue(["block",{shown:i(n)}]),"svelte-m0sno1")),m(e,r),K()}var Fu=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span>Add note</span>',1),Hu=Y('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <span style="padding-left: 6px;">Import data</span>',1),zu=Y('<div class="emptyStore svelte-n515mf"><p class="message">No notes found</p> <div class="wrapperButtonsAdd svelte-n515mf"><!></div> <div>or</div> <div class="wrapperButtonsAdd svelte-n515mf"><!></div></div>'),Uu=Y('<div class="emptyMessage svelte-n515mf">No notes found</div>'),Vu=Y('<div class="feed svelte-n515mf"><ul class="svelte-n515mf"></ul></div>'),qu=Y('<div class="wrapperFeed svelte-n515mf"><div class="wrapperContainer svelte-n515mf"><!></div></div>');function Wu(e,t){W(t,!0);const{setRelatedTags:n}=Co(),{getScrollContainer:r}=xo(),{createHandlePage:o,getPageUrl:a}=Mt(),{getSelectedTags:s}=ic(),{getFeedOrder:l}=Qa(),{getFeedSearch:u}=Eo(),{getGetNotes:c,isReadyStore:d}=Fr();let v=54,h=I(0),g=I(0),f=I(0),_=M(u),y=I(0),b=[],P=I(0),w=M(r),C=null,x=null;const p=M(s),k=M(d);Oe(()=>{i(_),i(p),i(q),i(w)?.scrollTo(0,0)});const{enable:E}=is(),R=()=>{E(),C||(C=requestAnimationFrame(()=>{const Q=i(w)?.scrollTop||0;S(f,Q,!0);const te=Math.ceil(i(h)/v);S(g,Math.floor(Q/(v*te))*(v*te)),C=null}))},V=()=>{x||(x=requestAnimationFrame(()=>{S(h,window.innerHeight-180||0,!0);const Q=i(w)?.scrollTop||0;S(f,Q,!0);const te=Math.ceil(i(h)/v);S(g,Math.floor(Q/(v*te))*(v*te)),x=null}))};ge(()=>{V(),R()}),Oe(()=>(i(w)?.addEventListener("scroll",R),window.addEventListener("resize",V),()=>{i(w)?.removeEventListener("scroll",R),window.removeEventListener("resize",V)}));const q=M(l);let G=I(""),H=M(c);Oe(()=>{i(q);const Q=i(H)()||[];Kt(()=>i(G))!==i(q)&&Kt(()=>S(G,i(q),!0)),Q.sort((_e,oe)=>{if(!_e||!oe)return 0;if(_e.pinned&&!oe.pinned)return 1;if(!_e.pinned&&oe.pinned)return-1;switch(i(q)){case"newest":return _e.updatedAt<oe.updatedAt?-1:1;case"oldest":return _e.updatedAt>oe.updatedAt?-1:1;case"AtoZ":return oe.name.localeCompare(_e.name);case"ZtoA":return _e.name.localeCompare(oe.name);default:return 0}});const We=[],ke={};for(let _e=Q.length-1;_e>=0;_e--){const oe=Q[_e];if(oe&&!(i(p).length&&i(p).some(be=>!oe.tags.includes(be)))&&!oe.deleting&&!(i(_)&&!(oe.name.toLowerCase().includes(i(_).toLowerCase())||oe.url.toLowerCase().includes(i(_).toLowerCase())||oe.text.toLowerCase().includes(i(_).toLowerCase())))){if(oe.tags)for(const be of oe.tags)ke[be]?ke[be].connections++:ke[be]={name:be,connections:1};We.push(oe)}}n(ke),S(y,We.length,!0),b=We,S(P,Date.now(),!0)});const z=M(()=>i(y)*v);let L=M(()=>{i(P);const Q=Math.ceil(i(h)/v);let te=Math.floor(i(g)/v);return te=te-Math.min(te,Q),b.slice(te,te+Q*3)}),j=M(()=>v*Math.ceil(i(h)/v));const X=M(()=>i(g)-Math.min(i(g),i(j)));var Z=qu(),le=N(Z),we=N(le);{var ce=Q=>{ps(Q,{})},me=Q=>{var te=O(),We=A(te);{var ke=oe=>{var be=zu(),Ot=B(N(be),2),Ct=N(Ot);{let Ke=M(()=>a(U.NewNote)),rt=M(()=>o(U.NewNote));Mn(Ct,{element:"a",get href(){return i(Ke)},get onClick(){return i(rt)},children:(Xe,Ze)=>{var Ae=Fu(),ot=A(Ae);Ce(ot,()=>({"--size":"18px","--color":"#b0b0b0"})),De(ot.lastChild,{name:"plus"}),m(Xe,Ae)},$$slots:{default:!0}})}var nt=B(Ot,4),Ne=N(nt);{let Ke=M(()=>a(U.ImportData)),rt=M(()=>o(U.ImportData));Mn(Ne,{element:"a",get href(){return i(Ke)},get onClick(){return i(rt)},children:(Xe,Ze)=>{var Ae=Hu(),ot=A(Ae);Ce(ot,()=>({"--size":"18px","--color":"#b0b0b0"})),De(ot.lastChild,{name:"import"}),m(Xe,Ae)},$$slots:{default:!0}})}m(oe,be)},_e=oe=>{var be=O(),Ot=A(be);{var Ct=Ne=>{var Ke=Uu();m(Ne,Ke)},nt=Ne=>{var Ke=Vu(),rt=N(Ke);bn(rt,23,()=>i(L),Xe=>Xe.id,(Xe,Ze,Ae)=>{{let ot=M(()=>i(Ae)*v<i(f)-i(X)-v/2||i(Ae)*v>i(f)-i(X)+Math.floor(i(h)/v)*v),zn=M(()=>(i(Ae)+3)*v<i(f)-i(X)-v/2||(i(Ae)+3)*v>i(f)-i(X)+Math.floor(i(h)/v)*v);Bu(Xe,{get focusHidden(){return i(ot)},get showMenuUp(){return i(zn)},get note(){return i(Ze)}})}}),pe(Xe=>{Zn(Ke,`min-height: ${Xe??""}px`),Zn(rt,`transform: translateY(${i(X)??""}px);`)},[()=>Math.max((i(z)>i(h),i(z)),0)]),m(Ne,Ke)};F(Ot,Ne=>{i(L).length===0?Ne(Ct):Ne(nt,!1)},!0)}m(oe,be)};F(We,oe=>{(i(H)()||[]).length===0?oe(ke):oe(_e,!1)},!0)}m(Q,te)};F(we,Q=>{i(k)?Q(me,!1):Q(ce)})}m(e,Z),K()}var Ku=Y('<!> <div class="content svelte-6sscvv"><!></div>',1);function Yu(e){var t=Ku(),n=A(t);_u(n,{});var r=B(n,2),o=N(r);Wu(o,{}),m(e,t)}var $u=Y('<div class="content svelte-ujk4k"><p class="message svelte-ujk4k">use app</p> <div class="buttonContainer svelte-ujk4k"><div class="buttonContainerItem svelte-ujk4k"><!></div> <div class="buttonContainerItem svelte-ujk4k"><!></div></div></div>');function Gu(e,t){W(t,!0);const{blockDialog:n}=sr(),{pushStackPages:r}=Mt(),{closeDialogStack:o}=Et(),{initLocalAccount:a}=ko();let s=I("idle");const l=()=>{S(s,"loading"),r(U.Auth)},u=async()=>{S(s,"loading"),await a(),n(!1),o()};Oe(()=>{n(i(s)==="idle"||i(s)==="loading")}),ge(()=>(n(!0),()=>{n(!1)}));var c=$u(),d=B(N(c),2),v=N(d),h=N(v);Mn(h,{onClick:l,fullWidth:!0,children:(_,y)=>{var b=Ve("cloud account");m(_,b)},$$slots:{default:!0}});var g=B(v,2),f=N(g);Mn(f,{onClick:u,fullWidth:!0,type:"secondary",children:(_,y)=>{var b=Ve("local account");m(_,b)},$$slots:{default:!0}}),m(e,c),K()}var Xu=Y('<div class="svelte-1x9a4ve"><!></div>');function xe(e,t){W(t,!0);const{setDialogPageHeight:n}=Po();let r=I(null);ge(()=>{i(r)&&(i(r).getBoundingClientRect(),i(r).style.opacity="1");const s=new ResizeObserver(l=>{for(let u of l){const c=u.contentRect.height;n(c)}});if(i(r))return s.observe(i(r)),()=>{i(r)&&s.unobserve(i(r)),s.disconnect()}});var o=Xu(),a=N(o);ne(a,()=>t.children),pt(o,s=>S(r,s),()=>i(r)),m(e,o),K()}var Zu=Y('<div class="svelte-stjbkr"><p class="svelte-stjbkr">Page not found</p> <!></div>');function Ju(e,t){W(t,!1);const{navigate:n}=Et(),r=s=>{s.preventDefault(),n("/")};bo();var o=Zu(),a=B(N(o),2);Mn(a,{element:"a",href:"/",onClick:r,children:(s,l)=>{var u=Ve("close");m(s,u)},$$slots:{default:!0}}),m(e,o),K()}var Qu=Y('<div class="svelte-10xfz1h"><p class="svelte-10xfz1h">Something went wrong. Please reload the page</p> <!></div>');function ed(e){var t=Qu(),n=B(N(t),2);Mn(n,{onClick:()=>location.reload(),children:(r,o)=>{var a=Ve("Reload");m(r,a)},$$slots:{default:!0}}),m(e,t)}var td=Y('<div class="svelte-1mu1b44"><!></div>');function nd(e,t){W(t,!0);const{getDialogPageHeight:n}=Po(),r=M(n);var o=td(),a=N(o);ps(a,{}),pe(()=>Zn(o,`min-height: ${i(r)??""}px;`)),m(e,o),K()}function Ie(e,t){W(t,!0);const n={},r=Object.assign({"./Pages/About.svelte":()=>Te(()=>import("./About-COJQBqc4.js"),__vite__mapDeps([2,3])),"./Pages/AccessKeys.svelte":()=>Te(()=>import("./AccessKeys-COiINMe4.js"),__vite__mapDeps([4,5,6])),"./Pages/Account.svelte":()=>Te(()=>import("./Account-9Chgo4Uw.js"),__vite__mapDeps([7,8])),"./Pages/Auth.svelte":()=>Te(()=>import("./Auth-CSySSQOE.js"),__vite__mapDeps([9,10])),"./Pages/ClearStore.svelte":()=>Te(()=>import("./ClearStore-B_HYbL2o.js"),__vite__mapDeps([11,12])),"./Pages/ConfirmAccessKey.svelte":()=>Te(()=>import("./ConfirmAccessKey-hAZ10jyz.js"),__vite__mapDeps([13,14,15,5,16,17])),"./Pages/EditNote.svelte":()=>Te(()=>import("./EditNote-BfZCbTpO.js"),__vite__mapDeps([18,19,14,15,20])),"./Pages/Exit.svelte":()=>Te(()=>import("./Exit-Bmb-u3EN.js"),__vite__mapDeps([21,22])),"./Pages/ExportData.svelte":()=>Te(()=>import("./ExportData-CWvJ2cF6.js"),__vite__mapDeps([23,24])),"./Pages/ImportData.svelte":()=>Te(()=>import("./ImportData-Df9R_fhH.js"),__vite__mapDeps([25,26])),"./Pages/NewNote.svelte":()=>Te(()=>import("./NewNote-DoYXgaqO.js"),__vite__mapDeps([27,19,14,15,20])),"./Pages/Settings.svelte":()=>Te(()=>import("./Settings-BiwoL2uK.js"),__vite__mapDeps([28,29])),"./Pages/Signin.svelte":()=>Te(()=>import("./Signin-b9oik-BG.js"),__vite__mapDeps([30,16,5,31])),"./Pages/Signup.svelte":()=>Te(()=>import("./Signup-D_X-SsV8.js"),__vite__mapDeps([32,5,16,33])),"./Pages/Subscription.svelte":()=>Te(()=>import("./Subscription-D9EeNtFc.js"),__vite__mapDeps([34,35])),"./Pages/Sync.svelte":()=>Te(()=>import("./Sync-BmnFDrze.js"),__vite__mapDeps([36,37]))}),o=async l=>{const u=`./Pages/${l[0].toUpperCase()+l.slice(1)}.svelte`;if(!n[l]){if(r[u]){const c=r[u]();return n[l]={promise:c},n[l].module=await c,n[l].module}throw new Error(`Page ${l} not found`)}return n[l].module||await n[l].promise};var a=O(),s=A(a);ja(s,()=>o(t.page),l=>{nd(l,{})},(l,u)=>{const c=M(()=>i(u).default);var d=O(),v=A(d);za(v,()=>i(c),(h,g)=>{g(h,{get params(){return t.params},get hidden(){return t.hidden}})}),m(l,d)},l=>{ed(l)}),m(e,a),K()}const Qo=(e,t=se,n=se,r)=>{let o=Mr(()=>Rs(r?.(),!1));var a=O(),s=A(a);{var l=c=>{xe(c,{children:(d,v)=>{Ie(d,{get hidden(){return i(o)},get page(){return U.Settings}})},$$slots:{default:!0}})},u=c=>{var d=O(),v=A(d);{var h=f=>{xe(f,{children:(_,y)=>{Ie(_,{get hidden(){return i(o)},get page(){return U.NewNote}})},$$slots:{default:!0}})},g=f=>{var _=O(),y=A(_);{var b=w=>{xe(w,{children:(C,x)=>{Ie(C,{get params(){return n()},get hidden(){return i(o)},get page(){return U.EditNote}})},$$slots:{default:!0}})},P=w=>{var C=O(),x=A(C);{var p=E=>{xe(E,{children:(R,V)=>{Ie(R,{get hidden(){return i(o)},get page(){return U.ImportData}})},$$slots:{default:!0}})},k=E=>{var R=O(),V=A(R);{var q=H=>{xe(H,{children:(z,T)=>{Ie(z,{get hidden(){return i(o)},get page(){return U.ExportData}})},$$slots:{default:!0}})},G=H=>{var z=O(),T=A(z);{var L=X=>{xe(X,{children:(Z,le)=>{Ie(Z,{get hidden(){return i(o)},get page(){return U.ClearStore}})},$$slots:{default:!0}})},j=X=>{var Z=O(),le=A(Z);{var we=me=>{xe(me,{children:(Q,te)=>{Gu(Q,{})},$$slots:{default:!0}})},ce=me=>{var Q=O(),te=A(Q);{var We=_e=>{xe(_e,{children:(oe,be)=>{Ie(oe,{get hidden(){return i(o)},get page(){return U.Auth}})},$$slots:{default:!0}})},ke=_e=>{var oe=O(),be=A(oe);{var Ot=nt=>{xe(nt,{children:(Ne,Ke)=>{Ie(Ne,{get hidden(){return i(o)},get page(){return U.Signup}})},$$slots:{default:!0}})},Ct=nt=>{var Ne=O(),Ke=A(Ne);{var rt=Ze=>{xe(Ze,{children:(Ae,ot)=>{Ie(Ae,{get hidden(){return i(o)},get page(){return U.Signin}})},$$slots:{default:!0}})},Xe=Ze=>{var Ae=O(),ot=A(Ae);{var zn=xt=>{xe(xt,{children:(vn,lr)=>{Ie(vn,{get hidden(){return i(o)},get page(){return U.AccessKeys}})},$$slots:{default:!0}})},ir=xt=>{var vn=O(),lr=A(vn);{var he=Pe=>{xe(Pe,{children:(Dt,cr)=>{Ie(Dt,{get hidden(){return i(o)},get page(){return U.Account}})},$$slots:{default:!0}})},Ye=Pe=>{var Dt=O(),cr=A(Dt);{var Un=hn=>{xe(hn,{children:(ur,Do)=>{Ie(ur,{get hidden(){return i(o)},get page(){return U.ConfirmAccessKey}})},$$slots:{default:!0}})},ms=hn=>{var ur=O(),Do=A(ur);{var ws=gn=>{xe(gn,{children:(dr,No)=>{Ie(dr,{get hidden(){return i(o)},get page(){return U.Exit}})},$$slots:{default:!0}})},ys=gn=>{var dr=O(),No=A(dr);{var Ss=_n=>{xe(_n,{children:(fr,Ao)=>{Ie(fr,{get hidden(){return i(o)},get page(){return U.Sync}})},$$slots:{default:!0}})},bs=_n=>{var fr=O(),Ao=A(fr);{var ks=pn=>{xe(pn,{children:(vr,To)=>{Ie(vr,{get hidden(){return i(o)},get page(){return U.Subscription}})},$$slots:{default:!0}})},Ps=pn=>{var vr=O(),To=A(vr);{var Es=mn=>{xe(mn,{children:(zr,xs)=>{Ie(zr,{get hidden(){return i(o)},get page(){return U.About}})},$$slots:{default:!0}})},Cs=mn=>{xe(mn,{children:(zr,xs)=>{Ju(zr,{})},$$slots:{default:!0}})};F(To,mn=>{t()===U.About?mn(Es):mn(Cs,!1)},!0)}m(pn,vr)};F(Ao,pn=>{t()===U.Subscription?pn(ks):pn(Ps,!1)},!0)}m(_n,fr)};F(No,_n=>{t()===U.Sync?_n(Ss):_n(bs,!1)},!0)}m(gn,dr)};F(Do,gn=>{t()===U.Exit?gn(ws):gn(ys,!1)},!0)}m(hn,ur)};F(cr,hn=>{t()===U.ConfirmAccessKey?hn(Un):hn(ms,!1)},!0)}m(Pe,Dt)};F(lr,Pe=>{t()===U.Account?Pe(he):Pe(Ye,!1)},!0)}m(xt,vn)};F(ot,xt=>{t()===U.AccessKeys?xt(zn):xt(ir,!1)},!0)}m(Ze,Ae)};F(Ke,Ze=>{t()===U.Signin?Ze(rt):Ze(Xe,!1)},!0)}m(nt,Ne)};F(be,nt=>{t()===U.Signup?nt(Ot):nt(Ct,!1)},!0)}m(_e,oe)};F(te,_e=>{t()===U.Auth?_e(We):_e(ke,!1)},!0)}m(me,Q)};F(le,me=>{t()===U.Start?me(we):me(ce,!1)},!0)}m(X,Z)};F(T,X=>{t()===U.ClearStore?X(L):X(j,!1)},!0)}m(H,z)};F(V,H=>{t()===U.ExportData?H(q):H(G,!1)},!0)}m(E,R)};F(x,E=>{t()===U.ImportData?E(p):E(k,!1)},!0)}m(w,C)};F(y,w=>{t()===U.EditNote?w(b):w(P,!1)},!0)}m(f,_)};F(v,f=>{t()===U.NewNote?f(h):f(g,!1)},!0)}m(c,d)};F(s,c=>{t()===U.Settings?c(l):c(u,!1)})}m(e,a)};var rd=Y("<!> <!>",1);function od(e,t){W(t,!0);const{isReadyStore:n}=Fr(),{getStackPages:r,popStackPages:o}=Mt(),{getAccount:a}=ko();let s=M(r),l=M(()=>n()&&a()!==void 0);const{checkMobileSize:u}=Hn();var c=rd(),d=A(c);{var v=_=>{Yu(_)};F(d,_=>{i(l)&&_(v)})}var h=B(d,2);{var g=_=>{var y=O(),b=A(y);bn(b,19,()=>i(s),P=>P.page,(P,w,C)=>{const x=M(()=>i(w).page.split("?")[1]),p=M(()=>i(w).page.split("?")[0]);{let k=M(()=>i(C)!==i(s).length-1&&!!i(s)[i(C)+1]?.shown),E=M(()=>i(C)===0);Zo(P,{get shown(){return i(w).shown},get hidden(){return i(k)},get isLastDialog(){return i(E)},children:(R,V)=>{{let q=M(()=>i(C)!==i(s).length-1&&!!i(s)[i(C)+1]?.shown);Qo(R,()=>i(p),()=>i(x),()=>i(q))}},$$slots:{default:!0}})}}),m(_,y)},f=_=>{var y=O(),b=A(y);{var P=w=>{const C=M(()=>i(s)[i(s).length-1].page.split("?")[1]),x=M(()=>i(s)[i(s).length-1].page.split("?")[0]);{let p=M(()=>i(s).length===1);Zo(w,{onBack:()=>o(),get shown(){return i(s)[i(s).length-1].shown},hidden:!1,get isLastDialog(){return i(p)},children:(k,E)=>{Qo(k,()=>i(x),()=>i(C))},$$slots:{default:!0}})}};F(b,w=>{i(s).length>0&&w(P)},!0)}m(_,y)};F(h,_=>{u()?_(g):_(f,!1)})}m(e,c),K()}function ad(e,t){W(t,!1);let n=0;ge(()=>{document.addEventListener("touchstart",r=>{n=r.touches[0].clientX},{passive:!1}),document.addEventListener("touchmove",r=>{const a=r.touches[0].clientX-n;(n<50&&a>0||n>window.innerWidth-50&&a<0)&&r.preventDefault()},{passive:!1}),document.addEventListener("touchend",()=>{n=0}),document.addEventListener("touchcancel",()=>{n=0})}),bo(),K()}const sd=(e,t)=>{i(t)&&i(t).scrollTo({top:0})};var id=Y('<div class="wrapperButtonTop svelte-1n46o8q"><button class="buttonTop svelte-1n46o8q"><!> <span class="icon svelte-1n46o8q"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></span></button></div>'),ld=Y('<!> <!> <main><div class="wrapperHeader svelte-1n46o8q"><!></div> <div class="container svelte-1n46o8q"><!></div></main> <!>',1);function cd(e,t){W(t,!0);const{setScrollContainer:n}=xo(),{getAccount:r}=ko(),{getStackPagesFormUrl:o}=Mt(),a=ar();ge(async()=>{await new Promise(E=>setTimeout(E,100)),await Oa(),a.working=!0});let s=I(!1),l=0,u=M(()=>o().length>0),c=M(r),d=I(null);Oe(()=>{n(i(d))});const v=()=>{if(i(d)){const E=i(d).scrollTop||0;E===0?S(s,!1):!i(s)&&l>E?S(s,!0):i(s)&&l+50<E&&S(s,!1),l=E}},h=()=>{v()};Oe(()=>(i(d)?.addEventListener("scroll",h),window.addEventListener("resize",h),()=>{i(d)?.removeEventListener("scroll",h),window.removeEventListener("resize",h)}));var g=ld(),f=A(g);ad(f,{});var _=B(f,2);Ec(_,{});var y=B(_,2),b=N(y),P=N(b);{var w=E=>{Yc(E,{})};F(P,E=>{i(c)!==void 0&&E(w)})}var C=B(b,2),x=N(C);od(x,{}),pt(y,E=>S(d,E),()=>i(d));var p=B(y,2);{var k=E=>{var R=id(),V=N(R);V.__click=[sd,d];var q=N(V);gt(q,{children:(z,T)=>{var L=Ve("top");m(z,L)}});var G=B(q,2),H=N(G);Ce(H,()=>({"--rotate":"90deg","--size":"28px"})),De(H.lastChild,{name:"back"}),m(E,R)};F(p,E=>{i(s)&&E(k)})}pe(()=>{Zn(y,`--swiping-ratio: ${a.swipingRatio}; --transition-timing-default: ${a.duration}s;`),de(y,1,ue(["main",{isAnimationOn:a.working&&!a.isSwiping,open:i(u)}]),"svelte-1n46o8q")}),m(e,g),K()}tt(["click"]);function ud(e){yc(e,{children:(t,n)=>{cd(t,{})}})}window.addEventListener("unhandledrejection",e=>{alert("Error: "+e.reason.message)});window.isUnsupportedBrowser||Gi(ud,{target:document.getElementById("app")});export{ne as $,Fr as A,Mn as B,yo as C,_d as D,bo as E,vd as F,ie as G,de as H,De as I,ue as J,Le as K,ps as L,hd as M,gd as N,Zn as O,U as P,Yl as Q,Hn as R,pt as S,Sn as T,sl as U,gt as V,vc as W,Hl as X,_c as Y,ar as Z,is as _,Ce as a,hs as a0,m as b,N as c,sr as d,I as e,Y as f,Mt as g,Me as h,i,S as j,F as k,K as l,O as m,A as n,ge as o,W as p,tt as q,bn as r,B as s,pe as t,Oe as u,Xn as v,Ve as w,M as x,Et as y,ko as z};
