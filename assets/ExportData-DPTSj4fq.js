import{J as Q,p as N,K as z,f as w,r as K,n as b,M,N as I,s as T,t as B,O as E,i as l,Q as V,R as X,v as Y,c as u,b as v,S as W,l as q,q as Z,z as ee,A as te,d as ae,u as se,e as U,o as oe,k as R,j as y,B as F,w as $,m as P,L as re}from"./index-CZzB_zyz.js";const le=p=>{const s=Math.floor(Date.now()/1e3),a={};p.forEach(t=>{const e=t.tags||["Imported"];if(e.length===0){a.ROOT||(a.ROOT=[]),a.ROOT.push(t);return}e.forEach(i=>{a[i]||(a[i]=[]),a[i].push(t)})});let r=`<!DOCTYPE NETSCAPE-Note-file-1>
<!-- This is an automatically generated file.
 It will be read and overwritten.
 DO NOT EDIT! -->
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8">
<TITLE>notes</TITLE>
<H1>notes</H1>
<DL><p>
<DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}" PERSONAL_TOOLBAR_FOLDER="true">notes Bar</H3>
<DL><p>`;return Object.keys(a).forEach(t=>{t!=="ROOT"&&t!=="other"&&(r+=`
    <DT><H3 ADD_DATE="${s}" LAST_MODIFIED="${s}">${t}</H3>
    <DL><p>`,a[t].forEach(e=>{const i=e.name.replace(/"/g,"&quot;");r+=`
        <DT><A HREF="${e.url}" ADD_DATE="${Math.floor(e.createdAt/1e3)||s}">${i}</A>`}),r+=`
    </DL><p>`)}),a.ROOT&&a.ROOT.forEach(t=>{const e=t.name.replace(/"/g,"&quot;");r+=`
    <DT><A HREF="${t.url}" ADD_DATE="${Math.floor(t.createdAt/1e3)||s}">${e}</A>`}),r+=`
</DL><p>`,a.other&&a.other.forEach(t=>{const e=t.name.replace(/"/g,"&quot;");r+=`
    <DT><A HREF="${t.url}" ADD_DATE="${Math.floor(t.createdAt/1e3)||s}">${e}</A>`}),r+="</DL><p>",r},ne=async p=>{const s="notes-export.json",a=JSON.stringify({notes:p}),r=new Blob([a],{type:"application/json"}),t=URL.createObjectURL(r),e=document.createElement("a");e.href=t,e.download=s,document.body.appendChild(e),e.click(),setTimeout(()=>{document.body.removeChild(e),URL.revokeObjectURL(t)},0)},ce=(p,s,a)=>{s(p.target.value),a.onChange(s())};var ie=w('<input type="radio"/> <label> </label>',1),ve=w('<div class="wrapper svelte-egvjdf"><fieldset class="switcher svelte-egvjdf"><!> <div class="wrapSwitcherStatus svelte-egvjdf"><div class="switcherStatus svelte-egvjdf"></div></div></fieldset></div>');function de(p,s){const a=Q();N(s,!0);let r=z(s,"value",7);const t=`switcher-${a}`;var e=ve(),i=u(e),L=u(i);K(L,17,()=>s.items,m=>m.title,(m,d)=>{var C=ie(),o=b(C);M(o,1,I(["vh","input"]),"svelte-egvjdf"),o.__change=[ce,r,s];var n=T(o,2);M(n,1,I(["switcherButton"]),"svelte-egvjdf");var h=u(n);B(()=>{E(o,"id",`${l(d).title}-${a}`),E(o,"name",t),V(o,l(d).value),X(o,l(d).value===r()),E(o,"aria-label",l(d).title),E(n,"for",`${l(d).title}-${a}`),E(n,"title",l(d).title),E(n,"aria-label",l(d).title),Y(h,l(d).title)}),v(m,C)});var S=T(L,2),k=u(S);B(m=>W(k,m),[()=>`transform: translateX(${s.items.findIndex(m=>m.value===r())*100}%)`]),v(p,e),q()}Z(["change"]);var fe=w('<p class="message svelte-owa53m">Export data</p> <div class="format-switcher svelte-owa53m"><!> <p class="format-description svelte-owa53m"><!></p></div> <div class="buttonContainer svelte-owa53m"><!></div>',1),ue=w('<p class="message svelte-owa53m">Exporting data...</p> <div class="buttonContainer svelte-owa53m"><!></div>',1),pe=w('<p class="message svelte-owa53m">Data exported successfully!</p> <div class="buttonContainer svelte-owa53m"><!></div>',1),me=w('<div class="content svelte-owa53m"><!></div>');function ge(p,s){N(s,!0);const a=ee(),{closeDialogStack:r}=te(),{blockDialog:t}=ae();let e=U("idle"),i=U("sync");const L=()=>{r()};se(()=>{t(l(e)==="loading")}),oe(()=>()=>{t(!1)});const S=async()=>{y(e,"loading"),setTimeout(async()=>{if(l(i)==="sync")await ne(a.getGetNotes()()||[]).finally(async()=>{await new Promise(o=>setTimeout(o,500)),y(e,"success")});else try{const o=le(a.getGetMapNotes()()||new Map),n=new Blob([o],{type:"text/html"}),h=URL.createObjectURL(n),f=document.createElement("a");f.href=h,f.download=`items_${new Date().toLocaleDateString().replace(/\//g,"_")}.html`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(h),y(e,"success")}catch{y(e,"success")}},0)};var k=me(),m=u(k);{var d=o=>{var n=fe(),h=T(b(n),2),f=u(h);de(f,{items:[{title:"Sync",value:"sync"},{title:"Bookmarks",value:"bookmarks"}],get value(){return l(i)},onChange:c=>{y(i,c,!0)}});var j=T(f,2),_=u(j);{var g=c=>{var D=$("App format for sync or backup");v(c,D)},A=c=>{var D=$("Browser bookmarks format (exports only bookmarks, not notes)");v(c,D)};R(_,c=>{l(i)==="sync"?c(g):c(A,!1)})}var O=T(h,2),x=u(O);F(x,{onClick:S,children:(c,D)=>{var H=$("Export");v(c,H)},$$slots:{default:!0}}),v(o,n)},C=o=>{var n=P(),h=b(n);{var f=_=>{var g=ue(),A=T(b(g),2),O=u(A);re(O,{}),v(_,g)},j=_=>{var g=P(),A=b(g);{var O=x=>{var c=pe(),D=T(b(c),2),H=u(D);F(H,{onClick:L,children:(G,he)=>{var J=$("Close");v(G,J)},$$slots:{default:!0}}),v(x,c)};R(A,x=>{l(e)==="success"&&x(O)},!0)}v(_,g)};R(h,_=>{l(e)==="loading"?_(f):_(j,!1)},!0)}v(o,n)};R(m,o=>{l(e)==="idle"?o(d):o(C,!1)})}v(p,k),q()}export{ge as default};
